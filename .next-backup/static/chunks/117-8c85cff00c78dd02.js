"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{1117:(e,r,t)=>{t.d(r,{CurrentChartProvider:()=>l,n:()=>s});var n=t(5155),a=t(2115),o=t(2634),i=t(2814);let u=(0,a.createContext)(null),l=e=>{let{children:r}=e,[t,l]=(0,a.useState)({planetaryPositions:{},aspects:[],currentSeason:"",lastUpdated:new Date,stelliums:{},houseEffects:{}}),[s,c]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),d=e=>{let r={};Object.entries(e).forEach(e=>{let[t,n]=e,a=f(n);r[a]||(r[a]=[]),r[a].push(t)});let t={};return Object.entries(r).forEach(e=>{let[r,n]=e;n.length>=3&&(t[r]=n)}),t},h=e=>{let r={Fire:0,Water:0,Earth:0,Air:0};return Object.entries(e).forEach(e=>{let[t,n]=e,a=y(Math.floor(n/30)+1);r[a]+=1}),r},f=e=>["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"][Math.floor(e/30)],y=e=>["Fire","Earth","Air","Water","Fire","Earth","Air","Water","Fire","Earth","Air","Water"][e-1]||"Fire",m=async()=>{c(!0),g(null);try{let e=await (0,o.ZL)(),r=(0,o._M)(e),t=(0,i.py)(),n=d(e),a=h(e);l({planetaryPositions:e,aspects:r,currentSeason:t,lastUpdated:new Date,stelliums:n,houseEffects:a})}catch(e){g(e instanceof Error?e.message:"Failed to update chart"),console.error("Error updating chart:",e)}finally{c(!1)}};return(0,a.useEffect)(()=>{m()},[]),(0,n.jsx)(u.Provider,{value:{chart:t,loading:s,error:p,refreshChart:m},children:r})},s=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useCurrentChart must be used within a CurrentChartProvider");return e}},2634:(e,r,t)=>{t.d(r,{_M:()=>s,_A:()=>a,ZL:()=>i,Eu:()=>o,Fd:()=>c,$5:()=>g,_4:()=>p});class n{calculatePlanetaryHour(e){let r=e.getHours(),t=e.getDay(),a=n.dayRulers[t],o=n.hourRulers.indexOf(a);return n.hourRulers[(o+(r>=6&&r<18?r-6:r<6?r+18:r-18))%7]}isDaytime(e){let r=e.getHours();return r>=6&&r<18}getDailyPlanetaryHours(e){let r=e.getDay(),t=new Map,a=n.dayRulers[r],o=n.hourRulers.indexOf(a);for(let e=0;e<24;e++){let r=(o+e)%7;t.set(e,n.hourRulers[r])}return t}}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=new Date("2023-01-21T20:53:00Z");return((e.getTime()-r.getTime())/864e5%29.53059+29.53059)%29.53059/29.53059}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=e.getMonth()+1,t=e.getDate();return 3===r&&t>=21||4===r&&t<=19?"aries":4===r&&t>=20||5===r&&t<=20?"taurus":5===r&&t>=21||6===r&&t<=20?"gemini":6===r&&t>=21||7===r&&t<=22?"cancer":7===r&&t>=23||8===r&&t<=22?"leo":8===r&&t>=23||9===r&&t<=22?"virgo":9===r&&t>=23||10===r&&t<=22?"libra":10===r&&t>=23||11===r&&t<=21?"scorpio":11===r&&t>=22||12===r&&t<=21?"sagittarius":12===r&&t>=22||1===r&&t<=19?"capricorn":1===r&&t>=20||2===r&&t<=18?"aquarius":"pisces"}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return function(e){let r={},t=function(e){let r=e.getUTCFullYear(),t=e.getUTCMonth()+1,n=e.getUTCDate(),a=e.getUTCHours(),o=e.getUTCMinutes(),i=e.getUTCSeconds();try{return julian.CalendarGregorianToJD(r,t,n+(a+o/60+i/3600)/24)}catch(r){return console.error("Error calculating Julian date with astronomia:",r),e.getTime()/864e5+2440587.5}}(e);try{r.Sun=function(e){try{let{lon:r}=solar.apparentLongitude(e);return r}catch(t){console.error("Error calculating Sun longitude:",t);let r=(e-2451545)/36525;return(280.46646+r*(36000.76983+3032e-7*r))%360}}(t),r.Moon=function(e){try{let{lon:r}=moon.position(e);return r}catch(t){console.error("Error calculating Moon longitude:",t);let r=(e-2451545)/36525;return(218.3164477+r*(481267.88123421+r*(-.0015786+r*(1/538841-r/65194e3))))%360}}(t),r.Mercury=u(t,"mercury"),r.Venus=u(t,"venus"),r.Mars=l(t,"mars"),r.Jupiter=l(t,"jupiter"),r.Saturn=l(t,"saturn"),r.Uranus=l(t,"uranus"),r.Neptune=l(t,"neptune"),r.Pluto=l(t,"pluto")}catch(r){return console.error("Error in astronomia calculations, falling back to simple model:",r),function(e){let r={},t=new Date("2000-01-01T12:00:00Z").getTime(),n=(e.getTime()-t)/864e5;return Object.entries({Sun:365.25,Moon:27.322,Mercury:87.969,Venus:224.701,Mars:686.98,Jupiter:4332.59,Saturn:10759.22,Uranus:30688.5,Neptune:60182,Pluto:90560}).forEach(e=>{let[t,a]=e;"Sun"===t?r[t]=(n/365.25*360+180)%360:r[t]=n/a*360%360}),r}(e)}return r}(e)}n.dayRulers=["Sun","Moon","Mars","Mercury","Jupiter","Venus","Saturn"],n.hourRulers=["Sun","Venus","Mercury","Moon","Saturn","Jupiter","Mars"];function u(e,r){try{let t={mercury:{sma:.387098,ecc:.20563,inc:7.0047,peri:29.1241,node:48.3313,period:87.969},venus:{sma:.723332,ecc:.006772,inc:3.3946,peri:54.891,node:76.68,period:224.701}}[r];if(!t)throw Error("Planet ".concat(r," not supported"));let n=360/t.period*(e-2451545)%360,a=t.node+t.peri;return(n+2*t.ecc*Math.sin(n*Math.PI/180)+a)%360}catch(n){console.error("Error calculating ".concat(r," longitude:"),n);let t=(e-2451545)/36525;return("mercury"===r?252.25084+538101.03*t:181.9798+210664.1366*t)%360}}function l(e,r){try{let t={mars:{period:686.98,epochLongitude:355.45332,epochDate:2451545,dailyMotion:.5240207766},jupiter:{period:4332.59,epochLongitude:34.40438,epochDate:2451545,dailyMotion:.0830853001},saturn:{period:10759.22,epochLongitude:50.077471,epochDate:2451545,dailyMotion:.0334442282},uranus:{period:30688.5,epochLongitude:314.055005,epochDate:2451545,dailyMotion:.011725806},neptune:{period:60182,epochLongitude:304.348665,epochDate:2451545,dailyMotion:.0059802665},pluto:{period:90560,epochLongitude:238.92881,epochDate:2451545,dailyMotion:.0039793764}}[r];if(!t)throw Error("Planet ".concat(r," not supported"));let n=e-t.epochDate;return(t.epochLongitude+n*t.dailyMotion)%360}catch(t){return console.error("Error calculating ".concat(r," longitude:"),t),(e-2451545)/(({mars:686.98,jupiter:4332.59,saturn:10759.22,uranus:30688.5,neptune:60182,pluto:90560})[r]||365.25)*360%360}}function s(e){let r=[],t=Object.keys(e),n=[{name:"conjunction",angle:0,orb:8},{name:"sextile",angle:60,orb:6},{name:"square",angle:90,orb:8},{name:"trine",angle:120,orb:8},{name:"opposition",angle:180,orb:10}];for(let a=0;a<t.length;a++)for(let o=a+1;o<t.length;o++){let i=t[a],u=t[o],l=Math.abs(e[i]-e[u]),s=l>180?360-l:l;for(let e of n)if(Math.abs(s-e.angle)<e.orb){r.push({planet1:i,planet2:u,type:e.name,strength:1-Math.abs(s-e.angle)/e.orb});break}}return r}function c(){let e=new Date,r=o(e),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=new Date("2023-01-13T12:00:00Z");return["aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius","capricorn","aquarius","pisces"][Math.floor((e.getTime()-r.getTime())/864e5%27.3/2.275)]}(e),n=a(e),i=function(){let e=new Date().getHours();return e>=5&&e<12?"morning":e>=12&&e<17?"afternoon":e>=17&&e<22?"evening":"night"}(),u=e.getHours(),l={aries:"Fire",leo:"Fire",sagittarius:"Fire",taurus:"Earth",virgo:"Earth",capricorn:"Earth",gemini:"Air",libra:"Air",aquarius:"Air",cancer:"Water",scorpio:"Water",pisces:"Water"}[r.toLowerCase()]||"Fire";return{sunSign:r,moonSign:t,lunarPhase:n,timeOfDay:i,isDaytime:u>=6&&u<18,planetaryHour:"Sun",zodiacSign:r,planetaryAlignment:void 0,activePlanets:["Sun","Moon"],activeAspects:[],dominantElement:l,risingSign:void 0}}function p(e){let r=(e%360+360)%360;return{sign:["aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius","capricorn","aquarius","pisces"][Math.floor(r/30)],degree:r%30}}function g(e,r){let t={Sun:{dignity:["Leo"],detriment:["Aquarius"],exaltation:["Aries"],fall:["Libra"]},Moon:{dignity:["Cancer"],detriment:["Capricorn"],exaltation:["Taurus"],fall:["Scorpio"]}}[e];return t?t.dignity.includes(r)?1:t.exaltation.includes(r)?.8:t.detriment.includes(r)?-.5:t.fall.includes(r)?-.8:0:0}},2814:(e,r,t)=>{t.d(r,{py:()=>n});function n(){let e=new Date().getMonth();return e>=2&&e<=4?"spring":e>=5&&e<=7?"summer":e>=8&&e<=10?"fall":"winter"}}}]);