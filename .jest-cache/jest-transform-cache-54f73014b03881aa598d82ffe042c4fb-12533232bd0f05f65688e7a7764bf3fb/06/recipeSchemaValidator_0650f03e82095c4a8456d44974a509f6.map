{"file":"/data/data/com.termux/files/home/WhatToEatNext/src/utils/recipe/recipeSchemaValidator.ts","mappings":"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","names":[],"sources":["/data/data/com.termux/files/home/WhatToEatNext/src/utils/recipe/recipeSchemaValidator.ts"],"sourcesContent":["/**\n * Recipe Schema Validator\n * Comprehensive validation for recipe data standardization\n *\n * @file src/utils/recipe/recipeSchemaValidator.ts\n * @created 2026-01-28\n */\n\nimport type {\n  Recipe,\n  RecipeIngredient,\n  ElementalProperties,\n} from \"@/types/recipe\";\n\n// ============ VALIDATION TYPES ============\n\nexport interface ValidationIssue {\n  field: string;\n  severity: \"error\" | \"warning\" | \"info\";\n  message: string;\n  currentValue?: unknown;\n  suggestedValue?: unknown;\n  autoFixable: boolean;\n}\n\nexport interface RecipeValidationResult {\n  recipeId: string;\n  recipeName: string;\n  isValid: boolean;\n  issues: ValidationIssue[];\n  fieldCoverage: number; // Percentage of recommended fields present\n  qualityScore: number; // 0-100 quality score\n}\n\nexport interface ValidationReport {\n  totalRecipes: number;\n  validRecipes: number;\n  invalidRecipes: number;\n  issuesByType: Record<string, number>;\n  issuesBySeverity: Record<\"error\" | \"warning\" | \"info\", number>;\n  averageFieldCoverage: number;\n  averageQualityScore: number;\n  autoFixableIssues: number;\n  recipeResults: RecipeValidationResult[];\n}\n\nexport interface DuplicateGroup {\n  recipes: Array<{\n    id: string;\n    name: string;\n    cuisine?: string;\n    similarity: number;\n  }>;\n  suggestedKeep: string;\n  reason: string;\n}\n\nexport interface DuplicateReport {\n  totalDuplicateGroups: number;\n  totalDuplicateRecipes: number;\n  duplicateGroups: DuplicateGroup[];\n}\n\n// ============ FIELD DEFINITIONS ============\n\n// Required fields that MUST be present\nconst REQUIRED_FIELDS = [\"name\", \"ingredients\", \"instructions\"] as const;\n\n// Recommended fields for high-quality recipes\nconst RECOMMENDED_FIELDS = [\n  \"id\",\n  \"description\",\n  \"cuisine\",\n  \"cookingMethods\",\n  \"prepTime\",\n  \"cookTime\",\n  \"servingSize\",\n  \"season\",\n  \"mealType\",\n  \"elementalProperties\",\n  \"nutrition\",\n  \"dietaryInfo\",\n  \"spiceLevel\",\n  \"allergens\",\n] as const;\n\n// Optional fields that enhance the recipe\nconst OPTIONAL_FIELDS = [\n  \"tools\",\n  \"substitutions\",\n  \"culturalNotes\",\n  \"pairingSuggestions\",\n  \"technicalTips\",\n  \"astrologicalAffinities\",\n  \"zodiacInfluences\",\n  \"lunarPhaseInfluences\",\n  \"preparationSteps\",\n  \"preparationNotes\",\n] as const;\n\n// Valid values for categorical fields\nconst VALID_SEASONS = [\n  \"spring\",\n  \"summer\",\n  \"autumn\",\n  \"winter\",\n  \"fall\",\n  \"all\",\n] as const;\nconst VALID_MEAL_TYPES = [\n  \"breakfast\",\n  \"lunch\",\n  \"dinner\",\n  \"snack\",\n  \"dessert\",\n  \"brunch\",\n  \"appetizer\",\n] as const;\nconst VALID_ELEMENTS = [\"Fire\", \"Water\", \"Earth\", \"Air\"] as const;\nconst VALID_SPICE_LEVELS = [\n  \"none\",\n  \"mild\",\n  \"medium\",\n  \"hot\",\n  \"very hot\",\n] as const;\n\n// ============ VALIDATION FUNCTIONS ============\n\n/**\n * Generate a standardized ID from recipe name and cuisine\n */\nexport function generateRecipeId(name: string, cuisine?: string): string {\n  const baseName = name\n    .toLowerCase()\n    .replace(/[^a-z0-9\\s-]/g, \"\")\n    .replace(/\\s+/g, \"-\")\n    .replace(/-+/g, \"-\")\n    .trim();\n\n  if (cuisine) {\n    const cuisinePart = cuisine.toLowerCase().replace(/[^a-z0-9]/g, \"\");\n    return `${cuisinePart}-${baseName}`;\n  }\n\n  return baseName;\n}\n\n/**\n * Validate time format (e.g., \"30 minutes\", \"1 hour\", \"1.5 hours\")\n */\nexport function isValidTimeFormat(time: unknown): boolean {\n  if (typeof time === \"number\") return time > 0;\n  if (typeof time !== \"string\") return false;\n\n  const timePatterns = [\n    /^\\d+\\s*(min|mins|minute|minutes)$/i,\n    /^\\d+\\s*(hr|hrs|hour|hours)$/i,\n    /^\\d+\\.?\\d*\\s*(hr|hrs|hour|hours)$/i,\n    /^\\d+\\s*h\\s*\\d*\\s*m?$/i,\n    /^\\d+:\\d{2}$/,\n  ];\n\n  return timePatterns.some((pattern) => pattern.test(time.trim()));\n}\n\n/**\n * Normalize time to minutes\n */\nexport function normalizeTimeToMinutes(time: unknown): number | null {\n  if (typeof time === \"number\") return time;\n  if (typeof time !== \"string\") return null;\n\n  const str = time.toLowerCase().trim();\n\n  // Handle \"X minutes\" format\n  const minMatch = str.match(/^(\\d+\\.?\\d*)\\s*(min|mins|minute|minutes)$/i);\n  if (minMatch) return parseFloat(minMatch[1]);\n\n  // Handle \"X hours\" format\n  const hrMatch = str.match(/^(\\d+\\.?\\d*)\\s*(hr|hrs|hour|hours)$/i);\n  if (hrMatch) return parseFloat(hrMatch[1]) * 60;\n\n  // Handle \"X h Y m\" format\n  const hhmMatch = str.match(/^(\\d+)\\s*h\\s*(\\d*)\\s*m?$/i);\n  if (hhmMatch) {\n    const hours = parseInt(hhmMatch[1], 10);\n    const mins = hhmMatch[2] ? parseInt(hhmMatch[2], 10) : 0;\n    return hours * 60 + mins;\n  }\n\n  return null;\n}\n\n/**\n * Validate elemental properties sum to ~1.0\n */\nexport function validateElementalProperties(props: unknown): {\n  isValid: boolean;\n  issues: string[];\n  normalized?: ElementalProperties;\n} {\n  if (!props || typeof props !== \"object\") {\n    return {\n      isValid: false,\n      issues: [\"Elemental properties missing or invalid\"],\n    };\n  }\n\n  const elemental = props as Record<string, unknown>;\n  const issues: string[] = [];\n  const values: Record<string, number> = {};\n\n  // Check all required elements exist and are numbers\n  for (const element of VALID_ELEMENTS) {\n    const val = elemental[element];\n    if (typeof val !== \"number\") {\n      issues.push(`${element} is not a number`);\n      values[element] = 0.25; // Default\n    } else if (val < 0 || val > 1) {\n      issues.push(`${element} value ${val} is out of range [0, 1]`);\n      values[element] = Math.max(0, Math.min(1, val));\n    } else {\n      values[element] = val;\n    }\n  }\n\n  // Check sum is approximately 1.0\n  const sum = Object.values(values).reduce((a, b) => a + b, 0);\n  if (Math.abs(sum - 1) > 0.01) {\n    issues.push(`Elemental properties sum to ${sum.toFixed(3)}, should be 1.0`);\n  }\n\n  // Normalize if needed\n  const normalized: ElementalProperties = {\n    Fire: values.Fire / sum,\n    Water: values.Water / sum,\n    Earth: values.Earth / sum,\n    Air: values.Air / sum,\n  };\n\n  return {\n    isValid: issues.length === 0,\n    issues,\n    normalized,\n  };\n}\n\n/**\n * Validate a single ingredient\n */\nexport function validateIngredient(\n  ingredient: unknown,\n  index: number,\n): ValidationIssue[] {\n  const issues: ValidationIssue[] = [];\n\n  if (!ingredient || typeof ingredient !== \"object\") {\n    issues.push({\n      field: `ingredients[${index}]`,\n      severity: \"error\",\n      message: \"Ingredient is not a valid object\",\n      currentValue: ingredient,\n      autoFixable: false,\n    });\n    return issues;\n  }\n\n  const ing = ingredient as Record<string, unknown>;\n\n  // Check name\n  if (!ing.name || typeof ing.name !== \"string\" || ing.name.trim() === \"\") {\n    issues.push({\n      field: `ingredients[${index}].name`,\n      severity: \"error\",\n      message: \"Ingredient name is required\",\n      currentValue: ing.name,\n      autoFixable: false,\n    });\n  }\n\n  // Check amount\n  if (ing.amount === undefined || ing.amount === null) {\n    issues.push({\n      field: `ingredients[${index}].amount`,\n      severity: \"warning\",\n      message: \"Ingredient amount is missing\",\n      currentValue: ing.amount,\n      suggestedValue: 1,\n      autoFixable: true,\n    });\n  } else if (typeof ing.amount !== \"number\" && typeof ing.amount !== \"string\") {\n    issues.push({\n      field: `ingredients[${index}].amount`,\n      severity: \"warning\",\n      message: \"Ingredient amount should be a number or string\",\n      currentValue: ing.amount,\n      autoFixable: true,\n    });\n  }\n\n  // Check unit\n  if (!ing.unit || typeof ing.unit !== \"string\") {\n    issues.push({\n      field: `ingredients[${index}].unit`,\n      severity: \"warning\",\n      message: \"Ingredient unit is missing\",\n      currentValue: ing.unit,\n      suggestedValue: \"piece\",\n      autoFixable: true,\n    });\n  }\n\n  return issues;\n}\n\n/**\n * Validate a single recipe\n */\nexport function validateRecipe(\n  recipe: unknown,\n  index?: number,\n): RecipeValidationResult {\n  const issues: ValidationIssue[] = [];\n  const prefix = index !== undefined ? `recipes[${index}]` : \"\";\n\n  if (!recipe || typeof recipe !== \"object\") {\n    return {\n      recipeId: \"unknown\",\n      recipeName: \"unknown\",\n      isValid: false,\n      issues: [\n        {\n          field: prefix || \"recipe\",\n          severity: \"error\",\n          message: \"Recipe is not a valid object\",\n          currentValue: recipe,\n          autoFixable: false,\n        },\n      ],\n      fieldCoverage: 0,\n      qualityScore: 0,\n    };\n  }\n\n  const r = recipe as Record<string, unknown>;\n  const recipeName = typeof r.name === \"string\" ? r.name : \"unnamed\";\n  const recipeId =\n    typeof r.id === \"string\"\n      ? r.id\n      : generateRecipeId(recipeName, r.cuisine as string | undefined);\n\n  // ============ REQUIRED FIELD VALIDATION ============\n\n  // Name\n  if (!r.name || typeof r.name !== \"string\" || r.name.trim() === \"\") {\n    issues.push({\n      field: \"name\",\n      severity: \"error\",\n      message: \"Recipe name is required\",\n      currentValue: r.name,\n      autoFixable: false,\n    });\n  }\n\n  // Ingredients\n  if (!r.ingredients || !Array.isArray(r.ingredients)) {\n    issues.push({\n      field: \"ingredients\",\n      severity: \"error\",\n      message: \"Recipe ingredients array is required\",\n      currentValue: r.ingredients,\n      autoFixable: false,\n    });\n  } else if (r.ingredients.length === 0) {\n    issues.push({\n      field: \"ingredients\",\n      severity: \"error\",\n      message: \"Recipe must have at least one ingredient\",\n      currentValue: r.ingredients,\n      autoFixable: false,\n    });\n  } else {\n    // Validate each ingredient\n    r.ingredients.forEach((ing, idx) => {\n      issues.push(...validateIngredient(ing, idx));\n    });\n  }\n\n  // Instructions\n  if (!r.instructions && !r.preparationSteps) {\n    issues.push({\n      field: \"instructions\",\n      severity: \"error\",\n      message: \"Recipe instructions are required\",\n      currentValue: r.instructions,\n      autoFixable: false,\n    });\n  } else {\n    const instructions = r.instructions || r.preparationSteps;\n    if (!Array.isArray(instructions)) {\n      issues.push({\n        field: \"instructions\",\n        severity: \"warning\",\n        message: \"Instructions should be an array of strings\",\n        currentValue: instructions,\n        autoFixable: true,\n      });\n    } else if (instructions.length === 0) {\n      issues.push({\n        field: \"instructions\",\n        severity: \"warning\",\n        message: \"Recipe should have at least one instruction\",\n        currentValue: instructions,\n        autoFixable: false,\n      });\n    }\n  }\n\n  // ============ RECOMMENDED FIELD VALIDATION ============\n\n  // ID\n  if (!r.id || typeof r.id !== \"string\") {\n    issues.push({\n      field: \"id\",\n      severity: \"warning\",\n      message: \"Recipe ID is recommended\",\n      currentValue: r.id,\n      suggestedValue: recipeId,\n      autoFixable: true,\n    });\n  }\n\n  // Description\n  if (!r.description || typeof r.description !== \"string\") {\n    issues.push({\n      field: \"description\",\n      severity: \"info\",\n      message: \"Recipe description is recommended\",\n      currentValue: r.description,\n      autoFixable: false,\n    });\n  }\n\n  // Cuisine\n  if (!r.cuisine || typeof r.cuisine !== \"string\") {\n    issues.push({\n      field: \"cuisine\",\n      severity: \"warning\",\n      message: \"Cuisine type is recommended\",\n      currentValue: r.cuisine,\n      autoFixable: false,\n    });\n  }\n\n  // Prep Time\n  if (!r.prepTime) {\n    issues.push({\n      field: \"prepTime\",\n      severity: \"info\",\n      message: \"Prep time is recommended\",\n      currentValue: r.prepTime,\n      autoFixable: false,\n    });\n  } else if (!isValidTimeFormat(r.prepTime)) {\n    issues.push({\n      field: \"prepTime\",\n      severity: \"warning\",\n      message: \"Prep time format is invalid\",\n      currentValue: r.prepTime,\n      suggestedValue: `${normalizeTimeToMinutes(r.prepTime) || 30} minutes`,\n      autoFixable: true,\n    });\n  }\n\n  // Cook Time\n  if (!r.cookTime) {\n    issues.push({\n      field: \"cookTime\",\n      severity: \"info\",\n      message: \"Cook time is recommended\",\n      currentValue: r.cookTime,\n      autoFixable: false,\n    });\n  } else if (!isValidTimeFormat(r.cookTime)) {\n    issues.push({\n      field: \"cookTime\",\n      severity: \"warning\",\n      message: \"Cook time format is invalid\",\n      currentValue: r.cookTime,\n      suggestedValue: `${normalizeTimeToMinutes(r.cookTime) || 30} minutes`,\n      autoFixable: true,\n    });\n  }\n\n  // Serving Size\n  if (r.servingSize === undefined || r.servingSize === null) {\n    issues.push({\n      field: \"servingSize\",\n      severity: \"info\",\n      message: \"Serving size is recommended\",\n      currentValue: r.servingSize,\n      suggestedValue: 4,\n      autoFixable: true,\n    });\n  } else if (typeof r.servingSize !== \"number\" || r.servingSize < 1) {\n    issues.push({\n      field: \"servingSize\",\n      severity: \"warning\",\n      message: \"Serving size should be a positive number\",\n      currentValue: r.servingSize,\n      suggestedValue: 4,\n      autoFixable: true,\n    });\n  }\n\n  // Season\n  if (!r.season) {\n    issues.push({\n      field: \"season\",\n      severity: \"info\",\n      message: \"Season is recommended\",\n      currentValue: r.season,\n      suggestedValue: [\"all\"],\n      autoFixable: true,\n    });\n  } else {\n    const seasons = Array.isArray(r.season) ? r.season : [r.season];\n    const invalidSeasons = seasons.filter(\n      (s) =>\n        typeof s !== \"string\" ||\n        !VALID_SEASONS.includes(s.toLowerCase() as any),\n    );\n    if (invalidSeasons.length > 0) {\n      issues.push({\n        field: \"season\",\n        severity: \"warning\",\n        message: `Invalid season values: ${invalidSeasons.join(\", \")}`,\n        currentValue: r.season,\n        autoFixable: true,\n      });\n    }\n  }\n\n  // Meal Type\n  if (!r.mealType) {\n    issues.push({\n      field: \"mealType\",\n      severity: \"info\",\n      message: \"Meal type is recommended\",\n      currentValue: r.mealType,\n      suggestedValue: [\"dinner\"],\n      autoFixable: true,\n    });\n  } else {\n    const mealTypes = Array.isArray(r.mealType) ? r.mealType : [r.mealType];\n    const invalidTypes = mealTypes.filter(\n      (t) =>\n        typeof t !== \"string\" ||\n        !VALID_MEAL_TYPES.includes(t.toLowerCase() as any),\n    );\n    if (invalidTypes.length > 0) {\n      issues.push({\n        field: \"mealType\",\n        severity: \"warning\",\n        message: `Invalid meal type values: ${invalidTypes.join(\", \")}`,\n        currentValue: r.mealType,\n        autoFixable: true,\n      });\n    }\n  }\n\n  // Elemental Properties\n  if (!r.elementalProperties) {\n    issues.push({\n      field: \"elementalProperties\",\n      severity: \"warning\",\n      message: \"Elemental properties are recommended for astrological features\",\n      currentValue: r.elementalProperties,\n      suggestedValue: { Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25 },\n      autoFixable: true,\n    });\n  } else {\n    const elemResult = validateElementalProperties(r.elementalProperties);\n    if (!elemResult.isValid) {\n      issues.push({\n        field: \"elementalProperties\",\n        severity: \"warning\",\n        message: elemResult.issues.join(\"; \"),\n        currentValue: r.elementalProperties,\n        suggestedValue: elemResult.normalized,\n        autoFixable: true,\n      });\n    }\n  }\n\n  // Nutrition\n  if (!r.nutrition) {\n    issues.push({\n      field: \"nutrition\",\n      severity: \"info\",\n      message: \"Nutritional information is recommended\",\n      currentValue: r.nutrition,\n      autoFixable: false,\n    });\n  }\n\n  // Spice Level\n  if (r.spiceLevel !== undefined && r.spiceLevel !== null) {\n    if (typeof r.spiceLevel === \"string\") {\n      if (!VALID_SPICE_LEVELS.includes(r.spiceLevel.toLowerCase() as any)) {\n        issues.push({\n          field: \"spiceLevel\",\n          severity: \"warning\",\n          message: `Invalid spice level: ${r.spiceLevel}`,\n          currentValue: r.spiceLevel,\n          suggestedValue: \"mild\",\n          autoFixable: true,\n        });\n      }\n    } else if (typeof r.spiceLevel === \"number\") {\n      if (r.spiceLevel < 0 || r.spiceLevel > 5) {\n        issues.push({\n          field: \"spiceLevel\",\n          severity: \"warning\",\n          message: \"Spice level should be 0-5 or a valid string\",\n          currentValue: r.spiceLevel,\n          autoFixable: true,\n        });\n      }\n    }\n  }\n\n  // Cooking Methods\n  if (!r.cookingMethods || !Array.isArray(r.cookingMethods)) {\n    issues.push({\n      field: \"cookingMethods\",\n      severity: \"info\",\n      message: \"Cooking methods are recommended\",\n      currentValue: r.cookingMethods,\n      autoFixable: false,\n    });\n  }\n\n  // ============ CALCULATE METRICS ============\n\n  // Calculate field coverage\n  const allRecommendedFields = [...REQUIRED_FIELDS, ...RECOMMENDED_FIELDS];\n  const presentFields = allRecommendedFields.filter((field) => {\n    const value = r[field];\n    if (value === undefined || value === null) return false;\n    if (Array.isArray(value) && value.length === 0) return false;\n    if (typeof value === \"string\" && value.trim() === \"\") return false;\n    return true;\n  });\n  const fieldCoverage =\n    (presentFields.length / allRecommendedFields.length) * 100;\n\n  // Calculate quality score\n  const errorCount = issues.filter((i) => i.severity === \"error\").length;\n  const warningCount = issues.filter((i) => i.severity === \"warning\").length;\n  const infoCount = issues.filter((i) => i.severity === \"info\").length;\n\n  let qualityScore = 100;\n  qualityScore -= errorCount * 20;\n  qualityScore -= warningCount * 5;\n  qualityScore -= infoCount * 1;\n  qualityScore = Math.max(0, Math.min(100, qualityScore));\n\n  // Boost for good field coverage\n  qualityScore = qualityScore * 0.6 + fieldCoverage * 0.4;\n\n  return {\n    recipeId,\n    recipeName,\n    isValid: errorCount === 0,\n    issues,\n    fieldCoverage: Math.round(fieldCoverage * 100) / 100,\n    qualityScore: Math.round(qualityScore * 100) / 100,\n  };\n}\n\n/**\n * Validate all recipes and generate a comprehensive report\n */\nexport function validateAllRecipes(recipes: unknown[]): ValidationReport {\n  if (!Array.isArray(recipes)) {\n    return {\n      totalRecipes: 0,\n      validRecipes: 0,\n      invalidRecipes: 0,\n      issuesByType: {},\n      issuesBySeverity: { error: 0, warning: 0, info: 0 },\n      averageFieldCoverage: 0,\n      averageQualityScore: 0,\n      autoFixableIssues: 0,\n      recipeResults: [],\n    };\n  }\n\n  const recipeResults = recipes.map((recipe, index) =>\n    validateRecipe(recipe, index),\n  );\n\n  // Aggregate statistics\n  const issuesByType: Record<string, number> = {};\n  const issuesBySeverity: Record<\"error\" | \"warning\" | \"info\", number> = {\n    error: 0,\n    warning: 0,\n    info: 0,\n  };\n  let autoFixableIssues = 0;\n\n  recipeResults.forEach((result) => {\n    result.issues.forEach((issue) => {\n      issuesByType[issue.field] = (issuesByType[issue.field] || 0) + 1;\n      issuesBySeverity[issue.severity]++;\n      if (issue.autoFixable) autoFixableIssues++;\n    });\n  });\n\n  const validRecipes = recipeResults.filter((r) => r.isValid).length;\n  const totalFieldCoverage = recipeResults.reduce(\n    (sum, r) => sum + r.fieldCoverage,\n    0,\n  );\n  const totalQualityScore = recipeResults.reduce(\n    (sum, r) => sum + r.qualityScore,\n    0,\n  );\n\n  return {\n    totalRecipes: recipes.length,\n    validRecipes,\n    invalidRecipes: recipes.length - validRecipes,\n    issuesByType,\n    issuesBySeverity,\n    averageFieldCoverage:\n      recipes.length > 0\n        ? Math.round((totalFieldCoverage / recipes.length) * 100) / 100\n        : 0,\n    averageQualityScore:\n      recipes.length > 0\n        ? Math.round((totalQualityScore / recipes.length) * 100) / 100\n        : 0,\n    autoFixableIssues,\n    recipeResults,\n  };\n}\n\n// ============ DUPLICATE DETECTION ============\n\n/**\n * Calculate Levenshtein distance between two strings\n */\nfunction levenshteinDistance(str1: string, str2: string): number {\n  const m = str1.length;\n  const n = str2.length;\n  const dp: number[][] = Array(m + 1)\n    .fill(null)\n    .map(() => Array(n + 1).fill(0));\n\n  for (let i = 0; i <= m; i++) dp[i][0] = i;\n  for (let j = 0; j <= n; j++) dp[0][j] = j;\n\n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n      if (str1[i - 1] === str2[j - 1]) {\n        dp[i][j] = dp[i - 1][j - 1];\n      } else {\n        dp[i][j] = 1 + Math.min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]);\n      }\n    }\n  }\n\n  return dp[m][n];\n}\n\n/**\n * Calculate similarity between two recipe names (0-1)\n */\nfunction calculateNameSimilarity(name1: string, name2: string): number {\n  const s1 = name1.toLowerCase().trim();\n  const s2 = name2.toLowerCase().trim();\n\n  if (s1 === s2) return 1;\n\n  const maxLen = Math.max(s1.length, s2.length);\n  if (maxLen === 0) return 1;\n\n  const distance = levenshteinDistance(s1, s2);\n  return 1 - distance / maxLen;\n}\n\n/**\n * Calculate similarity between two recipes\n */\nfunction calculateRecipeSimilarity(\n  recipe1: Record<string, unknown>,\n  recipe2: Record<string, unknown>,\n): number {\n  let totalWeight = 0;\n  let weightedSimilarity = 0;\n\n  // Name similarity (weight: 0.4)\n  const name1 = String(recipe1.name || \"\").toLowerCase();\n  const name2 = String(recipe2.name || \"\").toLowerCase();\n  if (name1 && name2) {\n    weightedSimilarity += calculateNameSimilarity(name1, name2) * 0.4;\n    totalWeight += 0.4;\n  }\n\n  // Cuisine match (weight: 0.2)\n  const cuisine1 = String(recipe1.cuisine || \"\").toLowerCase();\n  const cuisine2 = String(recipe2.cuisine || \"\").toLowerCase();\n  if (cuisine1 && cuisine2) {\n    weightedSimilarity += (cuisine1 === cuisine2 ? 1 : 0) * 0.2;\n    totalWeight += 0.2;\n  }\n\n  // Ingredient overlap (weight: 0.3)\n  const ingredients1 = Array.isArray(recipe1.ingredients)\n    ? recipe1.ingredients.map((i: any) => String(i.name || i).toLowerCase())\n    : [];\n  const ingredients2 = Array.isArray(recipe2.ingredients)\n    ? recipe2.ingredients.map((i: any) => String(i.name || i).toLowerCase())\n    : [];\n\n  if (ingredients1.length > 0 && ingredients2.length > 0) {\n    const set1 = new Set(ingredients1);\n    const set2 = new Set(ingredients2);\n    const intersection = ingredients1.filter((i) => set2.has(i)).length;\n    const union = new Set([...ingredients1, ...ingredients2]).size;\n    const ingredientSimilarity = union > 0 ? intersection / union : 0;\n    weightedSimilarity += ingredientSimilarity * 0.3;\n    totalWeight += 0.3;\n  }\n\n  // Cooking method match (weight: 0.1)\n  const methods1 = Array.isArray(recipe1.cookingMethods)\n    ? recipe1.cookingMethods.map((m) => String(m).toLowerCase())\n    : [];\n  const methods2 = Array.isArray(recipe2.cookingMethods)\n    ? recipe2.cookingMethods.map((m) => String(m).toLowerCase())\n    : [];\n\n  if (methods1.length > 0 && methods2.length > 0) {\n    const methodSet1 = new Set(methods1);\n    const methodSet2 = new Set(methods2);\n    const methodIntersection = methods1.filter((m) => methodSet2.has(m)).length;\n    const methodUnion = new Set([...methods1, ...methods2]).size;\n    const methodSimilarity =\n      methodUnion > 0 ? methodIntersection / methodUnion : 0;\n    weightedSimilarity += methodSimilarity * 0.1;\n    totalWeight += 0.1;\n  }\n\n  return totalWeight > 0 ? weightedSimilarity / totalWeight : 0;\n}\n\n/**\n * Detect duplicate recipes\n */\nexport function detectDuplicates(\n  recipes: unknown[],\n  similarityThreshold = 0.8,\n): DuplicateReport {\n  if (!Array.isArray(recipes) || recipes.length < 2) {\n    return {\n      totalDuplicateGroups: 0,\n      totalDuplicateRecipes: 0,\n      duplicateGroups: [],\n    };\n  }\n\n  const duplicateGroups: DuplicateGroup[] = [];\n  const processedIndices = new Set<number>();\n\n  for (let i = 0; i < recipes.length; i++) {\n    if (processedIndices.has(i)) continue;\n\n    const recipe1 = recipes[i] as Record<string, unknown>;\n    const group: DuplicateGroup[\"recipes\"] = [\n      {\n        id: String(recipe1.id || `recipe-${i}`),\n        name: String(recipe1.name || \"unknown\"),\n        cuisine: recipe1.cuisine as string | undefined,\n        similarity: 1,\n      },\n    ];\n\n    for (let j = i + 1; j < recipes.length; j++) {\n      if (processedIndices.has(j)) continue;\n\n      const recipe2 = recipes[j] as Record<string, unknown>;\n      const similarity = calculateRecipeSimilarity(recipe1, recipe2);\n\n      if (similarity >= similarityThreshold) {\n        group.push({\n          id: String(recipe2.id || `recipe-${j}`),\n          name: String(recipe2.name || \"unknown\"),\n          cuisine: recipe2.cuisine as string | undefined,\n          similarity: Math.round(similarity * 100) / 100,\n        });\n        processedIndices.add(j);\n      }\n    }\n\n    if (group.length > 1) {\n      processedIndices.add(i);\n\n      // Determine which recipe to keep\n      const recipeObjects = group.map((g) => {\n        const originalRecipe = recipes.find((r: any) => r.id === g.id); // Find the original recipe by ID\n        return {\n          ...g,\n          recipe: originalRecipe as Record<string, unknown>,\n        };\n      });\n\n      // Score recipes by completeness\n      const scores = recipeObjects.map((r) => {\n        let score = 0;\n        if (r.recipe) {\n          if (r.recipe.id) score += 10;\n          if (r.recipe.description) score += 5;\n          if (\n            Array.isArray(r.recipe.ingredients) &&\n            r.recipe.ingredients.length > 0\n          ) {\n            score += r.recipe.ingredients.length;\n          }\n          if (\n            Array.isArray(r.recipe.instructions) &&\n            r.recipe.instructions.length > 0\n          ) {\n            score += r.recipe.instructions.length;\n          }\n          if (r.recipe.nutrition) score += 5;\n          if (r.recipe.elementalProperties) score += 5;\n        }\n        return score;\n      });\n\n      const bestIndex = scores.indexOf(Math.max(...scores));\n\n      duplicateGroups.push({\n        recipes: group,\n        suggestedKeep: group[bestIndex]?.id || group[0].id,\n        reason: \"Based on recipe completeness and data quality\",\n      });\n    }\n  }\n\n  const totalDuplicateRecipes = duplicateGroups.reduce(\n    (sum, group) => sum + group.recipes.length - 1, // -1 because we keep one\n    0,\n  );\n\n  return {\n    totalDuplicateGroups: duplicateGroups.length,\n    totalDuplicateRecipes,\n    duplicateGroups,\n  };\n}\n\n// ============ EXPORTS ============\n\nexport default {\n  validateRecipe,\n  validateAllRecipes,\n  detectDuplicates,\n  generateRecipeId,\n  isValidTimeFormat,\n  normalizeTimeToMinutes,\n  validateElementalProperties,\n  validateIngredient,\n};\n"],"version":3}