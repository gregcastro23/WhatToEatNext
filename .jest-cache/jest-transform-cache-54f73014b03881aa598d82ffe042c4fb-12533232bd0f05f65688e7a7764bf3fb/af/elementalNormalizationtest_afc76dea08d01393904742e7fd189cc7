423e58a48a99a5338e872d3cbbf09d02
"use strict";
/**
 * Elemental Normalization Tests
 *
 * Comprehensive tests for the elemental normalization utilities
 * including normalizeForDisplay, isNormalized, convertNormalizedToRaw, etc.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const normalization_1 = require("@/utils/elemental/normalization");
// Sample test data
const rawProperties = {
    Fire: 5.2,
    Water: 3.1,
    Earth: 1.8,
    Air: 1.2,
};
const normalizedProperties = {
    Fire: 0.25,
    Water: 0.25,
    Earth: 0.25,
    Air: 0.25,
};
const highFireRaw = {
    Fire: 8.0,
    Water: 2.0,
    Earth: 2.0,
    Air: 2.0,
};
const zeroProperties = {
    Fire: 0,
    Water: 0,
    Earth: 0,
    Air: 0,
};
(0, globals_1.describe)("Elemental Normalization Utilities", () => {
    (0, globals_1.describe)("normalizeForDisplay", () => {
        (0, globals_1.test)("normalizes raw values to percentages summing to 1.0", () => {
            const result = (0, normalization_1.normalizeForDisplay)(rawProperties);
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBeCloseTo(1.0, 6);
        });
        (0, globals_1.test)("preserves relative proportions", () => {
            const result = (0, normalization_1.normalizeForDisplay)(rawProperties);
            // Fire should be largest (5.2 / 11.3 = 0.46)
            (0, globals_1.expect)(result.Fire).toBeCloseTo(5.2 / 11.3, 2);
            (0, globals_1.expect)(result.Water).toBeCloseTo(3.1 / 11.3, 2);
            (0, globals_1.expect)(result.Earth).toBeCloseTo(1.8 / 11.3, 2);
            (0, globals_1.expect)(result.Air).toBeCloseTo(1.2 / 11.3, 2);
        });
        (0, globals_1.test)("returns default values for zero input", () => {
            const result = (0, normalization_1.normalizeForDisplay)(zeroProperties);
            (0, globals_1.expect)(result.Fire).toBe(0.25);
            (0, globals_1.expect)(result.Water).toBe(0.25);
            (0, globals_1.expect)(result.Earth).toBe(0.25);
            (0, globals_1.expect)(result.Air).toBe(0.25);
        });
        (0, globals_1.test)("works with already normalized values", () => {
            const result = (0, normalization_1.normalizeForDisplay)(normalizedProperties);
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBeCloseTo(1.0, 6);
        });
        (0, globals_1.test)("handles high-intensity raw values", () => {
            const highIntensity = { Fire: 100, Water: 50, Earth: 30, Air: 20 };
            const result = (0, normalization_1.normalizeForDisplay)(highIntensity);
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBeCloseTo(1.0, 6);
            (0, globals_1.expect)(result.Fire).toBeCloseTo(0.5, 2); // 100/200
        });
    });
    (0, globals_1.describe)("getTotalIntensity", () => {
        (0, globals_1.test)("sums all element values", () => {
            const result = (0, normalization_1.getTotalIntensity)(rawProperties);
            (0, globals_1.expect)(result).toBeCloseTo(5.2 + 3.1 + 1.8 + 1.2, 6);
            (0, globals_1.expect)(result).toBeCloseTo(11.3, 6);
        });
        (0, globals_1.test)("returns 1.0 for normalized properties", () => {
            const result = (0, normalization_1.getTotalIntensity)(normalizedProperties);
            (0, globals_1.expect)(result).toBeCloseTo(1.0, 6);
        });
        (0, globals_1.test)("returns 0 for zero properties", () => {
            const result = (0, normalization_1.getTotalIntensity)(zeroProperties);
            (0, globals_1.expect)(result).toBe(0);
        });
    });
    (0, globals_1.describe)("getDominantElementByIntensity", () => {
        (0, globals_1.test)("returns element with highest value", () => {
            const result = (0, normalization_1.getDominantElementByIntensity)(rawProperties);
            (0, globals_1.expect)(result).toBe("Fire");
        });
        (0, globals_1.test)("works with high-intensity values", () => {
            const result = (0, normalization_1.getDominantElementByIntensity)(highFireRaw);
            (0, globals_1.expect)(result).toBe("Fire");
        });
        (0, globals_1.test)("returns first element for equal values", () => {
            const equalProperties = {
                Fire: 0.25,
                Water: 0.25,
                Earth: 0.25,
                Air: 0.25,
            };
            const result = (0, normalization_1.getDominantElementByIntensity)(equalProperties);
            // Should return first element (order depends on Object.entries)
            (0, globals_1.expect)(["Fire", "Water", "Earth", "Air"]).toContain(result);
        });
    });
    (0, globals_1.describe)("isNormalized", () => {
        (0, globals_1.test)("returns true for normalized properties (sum = 1.0)", () => {
            const result = (0, normalization_1.isNormalized)(normalizedProperties);
            (0, globals_1.expect)(result).toBe(true);
        });
        (0, globals_1.test)("returns false for raw properties (sum > 1.0)", () => {
            const result = (0, normalization_1.isNormalized)(rawProperties);
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.test)("handles edge cases near 1.0", () => {
            const nearNormalized = {
                Fire: 0.24,
                Water: 0.26,
                Earth: 0.25,
                Air: 0.25,
            };
            const result = (0, normalization_1.isNormalized)(nearNormalized);
            (0, globals_1.expect)(result).toBe(true);
        });
        (0, globals_1.test)("returns true for sum of 1.05 (within tolerance)", () => {
            const nearNormalized = {
                Fire: 0.26,
                Water: 0.26,
                Earth: 0.26,
                Air: 0.27,
            };
            const result = (0, normalization_1.isNormalized)(nearNormalized);
            // Should still be considered normalized (within tolerance)
            (0, globals_1.expect)(result).toBe(true);
        });
    });
    (0, globals_1.describe)("convertNormalizedToRaw", () => {
        (0, globals_1.test)("scales normalized values to reference intensity", () => {
            const result = (0, normalization_1.convertNormalizedToRaw)(normalizedProperties, 10);
            (0, globals_1.expect)(result.Fire).toBe(2.5);
            (0, globals_1.expect)(result.Water).toBe(2.5);
            (0, globals_1.expect)(result.Earth).toBe(2.5);
            (0, globals_1.expect)(result.Air).toBe(2.5);
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBe(10);
        });
        (0, globals_1.test)("uses default reference intensity of 4.0", () => {
            const result = (0, normalization_1.convertNormalizedToRaw)(normalizedProperties);
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBe(4.0);
        });
        (0, globals_1.test)("returns raw values unchanged when already raw", () => {
            const result = (0, normalization_1.convertNormalizedToRaw)(rawProperties, 10);
            // Should detect that rawProperties is not normalized (sum != 1.0)
            // and return values as-is
            (0, globals_1.expect)(result.Fire).toBe(5.2);
            (0, globals_1.expect)(result.Water).toBe(3.1);
            (0, globals_1.expect)(result.Earth).toBe(1.8);
            (0, globals_1.expect)(result.Air).toBe(1.2);
        });
    });
    (0, globals_1.describe)("getRelativeStrengths", () => {
        (0, globals_1.test)("calculates element strength relative to average", () => {
            const result = (0, normalization_1.getRelativeStrengths)(highFireRaw);
            // Total = 14, average = 3.5
            // Fire = 8 / 3.5 = 2.29
            (0, globals_1.expect)(result.Fire).toBeCloseTo(8 / 3.5, 2);
            (0, globals_1.expect)(result.Water).toBeCloseTo(2 / 3.5, 2);
        });
        (0, globals_1.test)("returns all 1.0 for zero properties", () => {
            const result = (0, normalization_1.getRelativeStrengths)(zeroProperties);
            (0, globals_1.expect)(result.Fire).toBe(1);
            (0, globals_1.expect)(result.Water).toBe(1);
            (0, globals_1.expect)(result.Earth).toBe(1);
            (0, globals_1.expect)(result.Air).toBe(1);
        });
        (0, globals_1.test)("balanced properties have strength of 1.0", () => {
            const balanced = { Fire: 5, Water: 5, Earth: 5, Air: 5 };
            const result = (0, normalization_1.getRelativeStrengths)(balanced);
            (0, globals_1.expect)(result.Fire).toBe(1);
            (0, globals_1.expect)(result.Water).toBe(1);
            (0, globals_1.expect)(result.Earth).toBe(1);
            (0, globals_1.expect)(result.Air).toBe(1);
        });
    });
    (0, globals_1.describe)("formatAsPercentages", () => {
        (0, globals_1.test)("formats raw values as percentage strings", () => {
            const result = (0, normalization_1.formatAsPercentages)(rawProperties);
            (0, globals_1.expect)(result.Fire).toBe("46.0%");
            (0, globals_1.expect)(result.Water).toBe("27.4%");
            (0, globals_1.expect)(result.Earth).toBe("15.9%");
            (0, globals_1.expect)(result.Air).toBe("10.6%");
        });
        (0, globals_1.test)("respects decimal places parameter", () => {
            const result = (0, normalization_1.formatAsPercentages)(rawProperties, 2);
            (0, globals_1.expect)(result.Fire).toContain("46.");
            (0, globals_1.expect)(result.Fire.split(".")[1]).toBe("02%");
        });
        (0, globals_1.test)("works with already normalized values", () => {
            const result = (0, normalization_1.formatAsPercentages)(normalizedProperties);
            (0, globals_1.expect)(result.Fire).toBe("25.0%");
            (0, globals_1.expect)(result.Water).toBe("25.0%");
            (0, globals_1.expect)(result.Earth).toBe("25.0%");
            (0, globals_1.expect)(result.Air).toBe("25.0%");
        });
    });
    (0, globals_1.describe)("compareIntensities", () => {
        (0, globals_1.test)("calculates differences between two property sets", () => {
            const props1 = { Fire: 5.2, Water: 3.1, Earth: 1.8, Air: 1.2 };
            const props2 = { Fire: 3.0, Water: 4.0, Earth: 2.0, Air: 1.0 };
            const result = (0, normalization_1.compareIntensities)(props1, props2);
            (0, globals_1.expect)(result.Fire).toBeCloseTo(2.2, 6);
            (0, globals_1.expect)(result.Water).toBeCloseTo(-0.9, 6);
            (0, globals_1.expect)(result.Earth).toBeCloseTo(-0.2, 6);
            (0, globals_1.expect)(result.Air).toBeCloseTo(0.2, 6);
        });
        (0, globals_1.test)("returns zeros for identical properties", () => {
            const result = (0, normalization_1.compareIntensities)(rawProperties, rawProperties);
            (0, globals_1.expect)(result.Fire).toBe(0);
            (0, globals_1.expect)(result.Water).toBe(0);
            (0, globals_1.expect)(result.Earth).toBe(0);
            (0, globals_1.expect)(result.Air).toBe(0);
        });
    });
    (0, globals_1.describe)("Integration Tests", () => {
        (0, globals_1.test)("round-trip: normalize -> convert back preserves proportions", () => {
            const original = { Fire: 4, Water: 3, Earth: 2, Air: 1 };
            const originalTotal = (0, normalization_1.getTotalIntensity)(original);
            const normalized = (0, normalization_1.normalizeForDisplay)(original);
            const restored = (0, normalization_1.convertNormalizedToRaw)(normalized, originalTotal);
            (0, globals_1.expect)(restored.Fire).toBeCloseTo(original.Fire, 5);
            (0, globals_1.expect)(restored.Water).toBeCloseTo(original.Water, 5);
            (0, globals_1.expect)(restored.Earth).toBeCloseTo(original.Earth, 5);
            (0, globals_1.expect)(restored.Air).toBeCloseTo(original.Air, 5);
        });
        (0, globals_1.test)("dominant element is consistent across normalization", () => {
            const raw = { Fire: 8, Water: 2, Earth: 3, Air: 1 };
            const normalized = (0, normalization_1.normalizeForDisplay)(raw);
            const rawDominant = (0, normalization_1.getDominantElementByIntensity)(raw);
            const normalizedDominant = (0, normalization_1.getDominantElementByIntensity)(normalized);
            (0, globals_1.expect)(rawDominant).toBe(normalizedDominant);
            (0, globals_1.expect)(rawDominant).toBe("Fire");
        });
        (0, globals_1.test)("relative strengths remain consistent after normalization", () => {
            const raw = { Fire: 10, Water: 5, Earth: 3, Air: 2 };
            const normalized = (0, normalization_1.normalizeForDisplay)(raw);
            const rawStrengths = (0, normalization_1.getRelativeStrengths)(raw);
            const normalizedStrengths = (0, normalization_1.getRelativeStrengths)(normalized);
            // Relative strengths should be the same
            (0, globals_1.expect)(rawStrengths.Fire).toBeCloseTo(normalizedStrengths.Fire, 5);
            (0, globals_1.expect)(rawStrengths.Water).toBeCloseTo(normalizedStrengths.Water, 5);
            (0, globals_1.expect)(rawStrengths.Earth).toBeCloseTo(normalizedStrengths.Earth, 5);
            (0, globals_1.expect)(rawStrengths.Air).toBeCloseTo(normalizedStrengths.Air, 5);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL2hvbWUvV2hhdFRvRWF0TmV4dC9fX3Rlc3RzX18vZWxlbWVudGFsTm9ybWFsaXphdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCwyQ0FBdUQ7QUFDdkQsbUVBU3lDO0FBTXpDLG1CQUFtQjtBQUNuQixNQUFNLGFBQWEsR0FBMkI7SUFDNUMsSUFBSSxFQUFFLEdBQUc7SUFDVCxLQUFLLEVBQUUsR0FBRztJQUNWLEtBQUssRUFBRSxHQUFHO0lBQ1YsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBRUYsTUFBTSxvQkFBb0IsR0FBa0M7SUFDMUQsSUFBSSxFQUFFLElBQUk7SUFDVixLQUFLLEVBQUUsSUFBSTtJQUNYLEtBQUssRUFBRSxJQUFJO0lBQ1gsR0FBRyxFQUFFLElBQUk7Q0FDVixDQUFDO0FBRUYsTUFBTSxXQUFXLEdBQTJCO0lBQzFDLElBQUksRUFBRSxHQUFHO0lBQ1QsS0FBSyxFQUFFLEdBQUc7SUFDVixLQUFLLEVBQUUsR0FBRztJQUNWLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQUVGLE1BQU0sY0FBYyxHQUEyQjtJQUM3QyxJQUFJLEVBQUUsQ0FBQztJQUNQLEtBQUssRUFBRSxDQUFDO0lBQ1IsS0FBSyxFQUFFLENBQUM7SUFDUixHQUFHLEVBQUUsQ0FBQztDQUNQLENBQUM7QUFFRixJQUFBLGtCQUFRLEVBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO0lBQ2pELElBQUEsa0JBQVEsRUFBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7UUFDbkMsSUFBQSxjQUFJLEVBQUMscURBQXFELEVBQUUsR0FBRyxFQUFFO1lBQy9ELE1BQU0sTUFBTSxHQUFHLElBQUEsbUNBQW1CLEVBQUMsYUFBYSxDQUFDLENBQUM7WUFFbEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQztZQUNyRSxJQUFBLGdCQUFNLEVBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUMxQyxNQUFNLE1BQU0sR0FBRyxJQUFBLG1DQUFtQixFQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRWxELDZDQUE2QztZQUM3QyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQy9DLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDaEQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNoRCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQ2pELE1BQU0sTUFBTSxHQUFHLElBQUEsbUNBQW1CLEVBQUMsY0FBYyxDQUFDLENBQUM7WUFFbkQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDL0IsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxNQUFNLEdBQUcsSUFBQSxtQ0FBbUIsRUFBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBRXpELE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7WUFDckUsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxhQUFhLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDbkUsTUFBTSxNQUFNLEdBQUcsSUFBQSxtQ0FBbUIsRUFBQyxhQUFhLENBQUMsQ0FBQztZQUVsRCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDO1lBQ3JFLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVU7UUFDckQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDakMsSUFBQSxjQUFJLEVBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1lBQ25DLE1BQU0sTUFBTSxHQUFHLElBQUEsaUNBQWlCLEVBQUMsYUFBYSxDQUFDLENBQUM7WUFFaEQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDckQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsTUFBTSxNQUFNLEdBQUcsSUFBQSxpQ0FBaUIsRUFBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBRXZELElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUEsaUNBQWlCLEVBQUMsY0FBYyxDQUFDLENBQUM7WUFFakQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtRQUM3QyxJQUFBLGNBQUksRUFBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxNQUFNLEdBQUcsSUFBQSw2Q0FBNkIsRUFBQyxhQUFhLENBQUMsQ0FBQztZQUU1RCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUEsNkNBQTZCLEVBQUMsV0FBVyxDQUFDLENBQUM7WUFFMUQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLGVBQWUsR0FBRztnQkFDdEIsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsR0FBRyxFQUFFLElBQUk7YUFDVixDQUFDO1lBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBQSw2Q0FBNkIsRUFBQyxlQUFlLENBQUMsQ0FBQztZQUU5RCxnRUFBZ0U7WUFDaEUsSUFBQSxnQkFBTSxFQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1FBQzVCLElBQUEsY0FBSSxFQUFDLG9EQUFvRCxFQUFFLEdBQUcsRUFBRTtZQUM5RCxNQUFNLE1BQU0sR0FBRyxJQUFBLDRCQUFZLEVBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUVsRCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1lBQ3hELE1BQU0sTUFBTSxHQUFHLElBQUEsNEJBQVksRUFBQyxhQUFhLENBQUMsQ0FBQztZQUUzQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLE1BQU0sY0FBYyxHQUFHO2dCQUNyQixJQUFJLEVBQUUsSUFBSTtnQkFDVixLQUFLLEVBQUUsSUFBSTtnQkFDWCxLQUFLLEVBQUUsSUFBSTtnQkFDWCxHQUFHLEVBQUUsSUFBSTthQUNWLENBQUM7WUFDRixNQUFNLE1BQU0sR0FBRyxJQUFBLDRCQUFZLEVBQUMsY0FBYyxDQUFDLENBQUM7WUFFNUMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLGNBQWMsR0FBRztnQkFDckIsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsR0FBRyxFQUFFLElBQUk7YUFDVixDQUFDO1lBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBQSw0QkFBWSxFQUFDLGNBQWMsQ0FBQyxDQUFDO1lBRTVDLDJEQUEyRDtZQUMzRCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFO1FBQ3RDLElBQUEsY0FBSSxFQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLE1BQU0sR0FBRyxJQUFBLHNDQUFzQixFQUFDLG9CQUFvQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRWhFLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlCLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9CLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9CLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRTdCLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7WUFDckUsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNuRCxNQUFNLE1BQU0sR0FBRyxJQUFBLHNDQUFzQixFQUFDLG9CQUFvQixDQUFDLENBQUM7WUFFNUQsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQztZQUNyRSxJQUFBLGdCQUFNLEVBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3pELE1BQU0sTUFBTSxHQUFHLElBQUEsc0NBQXNCLEVBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRXpELGtFQUFrRTtZQUNsRSwwQkFBMEI7WUFDMUIsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDOUIsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0IsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0IsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7UUFDcEMsSUFBQSxjQUFJLEVBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQzNELE1BQU0sTUFBTSxHQUFHLElBQUEsb0NBQW9CLEVBQUMsV0FBVyxDQUFDLENBQUM7WUFFakQsNEJBQTRCO1lBQzVCLHdCQUF3QjtZQUN4QixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsTUFBTSxNQUFNLEdBQUcsSUFBQSxvQ0FBb0IsRUFBQyxjQUFjLENBQUMsQ0FBQztZQUVwRCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxNQUFNLFFBQVEsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN6RCxNQUFNLE1BQU0sR0FBRyxJQUFBLG9DQUFvQixFQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTlDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFO1FBQ25DLElBQUEsY0FBSSxFQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxNQUFNLE1BQU0sR0FBRyxJQUFBLG1DQUFtQixFQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRWxELElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUEsbUNBQW1CLEVBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXJELElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3JDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLE1BQU0sR0FBRyxJQUFBLG1DQUFtQixFQUFDLG9CQUFvQixDQUFDLENBQUM7WUFFekQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbEMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbkMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbkMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7UUFDbEMsSUFBQSxjQUFJLEVBQUMsa0RBQWtELEVBQUUsR0FBRyxFQUFFO1lBQzVELE1BQU0sTUFBTSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBQy9ELE1BQU0sTUFBTSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBRS9ELE1BQU0sTUFBTSxHQUFHLElBQUEsa0NBQWtCLEVBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRWxELElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN4QyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMxQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMxQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDbEQsTUFBTSxNQUFNLEdBQUcsSUFBQSxrQ0FBa0IsRUFBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFaEUsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDakMsSUFBQSxjQUFJLEVBQUMsNkRBQTZELEVBQUUsR0FBRyxFQUFFO1lBQ3ZFLE1BQU0sUUFBUSxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3pELE1BQU0sYUFBYSxHQUFHLElBQUEsaUNBQWlCLEVBQUMsUUFBUSxDQUFDLENBQUM7WUFFbEQsTUFBTSxVQUFVLEdBQUcsSUFBQSxtQ0FBbUIsRUFBQyxRQUFRLENBQUMsQ0FBQztZQUNqRCxNQUFNLFFBQVEsR0FBRyxJQUFBLHNDQUFzQixFQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsQ0FBQztZQUVuRSxJQUFBLGdCQUFNLEVBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3BELElBQUEsZ0JBQU0sRUFBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEQsSUFBQSxnQkFBTSxFQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN0RCxJQUFBLGdCQUFNLEVBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMscURBQXFELEVBQUUsR0FBRyxFQUFFO1lBQy9ELE1BQU0sR0FBRyxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3BELE1BQU0sVUFBVSxHQUFHLElBQUEsbUNBQW1CLEVBQUMsR0FBRyxDQUFDLENBQUM7WUFFNUMsTUFBTSxXQUFXLEdBQUcsSUFBQSw2Q0FBNkIsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUN2RCxNQUFNLGtCQUFrQixHQUFHLElBQUEsNkNBQTZCLEVBQUMsVUFBVSxDQUFDLENBQUM7WUFFckUsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQzdDLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQywwREFBMEQsRUFBRSxHQUFHLEVBQUU7WUFDcEUsTUFBTSxHQUFHLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDckQsTUFBTSxVQUFVLEdBQUcsSUFBQSxtQ0FBbUIsRUFBQyxHQUFHLENBQUMsQ0FBQztZQUU1QyxNQUFNLFlBQVksR0FBRyxJQUFBLG9DQUFvQixFQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9DLE1BQU0sbUJBQW1CLEdBQUcsSUFBQSxvQ0FBb0IsRUFBQyxVQUFVLENBQUMsQ0FBQztZQUU3RCx3Q0FBd0M7WUFDeEMsSUFBQSxnQkFBTSxFQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ25FLElBQUEsZ0JBQU0sRUFBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNyRSxJQUFBLGdCQUFNLEVBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDckUsSUFBQSxnQkFBTSxFQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvaG9tZS9XaGF0VG9FYXROZXh0L19fdGVzdHNfXy9lbGVtZW50YWxOb3JtYWxpemF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbGVtZW50YWwgTm9ybWFsaXphdGlvbiBUZXN0c1xuICpcbiAqIENvbXByZWhlbnNpdmUgdGVzdHMgZm9yIHRoZSBlbGVtZW50YWwgbm9ybWFsaXphdGlvbiB1dGlsaXRpZXNcbiAqIGluY2x1ZGluZyBub3JtYWxpemVGb3JEaXNwbGF5LCBpc05vcm1hbGl6ZWQsIGNvbnZlcnROb3JtYWxpemVkVG9SYXcsIGV0Yy5cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgZXhwZWN0LCB0ZXN0IH0gZnJvbSBcIkBqZXN0L2dsb2JhbHNcIjtcbmltcG9ydCB7XG4gIG5vcm1hbGl6ZUZvckRpc3BsYXksXG4gIGdldFRvdGFsSW50ZW5zaXR5LFxuICBnZXREb21pbmFudEVsZW1lbnRCeUludGVuc2l0eSxcbiAgaXNOb3JtYWxpemVkLFxuICBjb252ZXJ0Tm9ybWFsaXplZFRvUmF3LFxuICBnZXRSZWxhdGl2ZVN0cmVuZ3RocyxcbiAgZm9ybWF0QXNQZXJjZW50YWdlcyxcbiAgY29tcGFyZUludGVuc2l0aWVzLFxufSBmcm9tIFwiQC91dGlscy9lbGVtZW50YWwvbm9ybWFsaXphdGlvblwiO1xuaW1wb3J0IHR5cGUge1xuICBSYXdFbGVtZW50YWxQcm9wZXJ0aWVzLFxuICBOb3JtYWxpemVkRWxlbWVudGFsUHJvcGVydGllcyxcbn0gZnJvbSBcIkAvdHlwZXMvYWxjaGVteVwiO1xuXG4vLyBTYW1wbGUgdGVzdCBkYXRhXG5jb25zdCByYXdQcm9wZXJ0aWVzOiBSYXdFbGVtZW50YWxQcm9wZXJ0aWVzID0ge1xuICBGaXJlOiA1LjIsXG4gIFdhdGVyOiAzLjEsXG4gIEVhcnRoOiAxLjgsXG4gIEFpcjogMS4yLFxufTtcblxuY29uc3Qgbm9ybWFsaXplZFByb3BlcnRpZXM6IE5vcm1hbGl6ZWRFbGVtZW50YWxQcm9wZXJ0aWVzID0ge1xuICBGaXJlOiAwLjI1LFxuICBXYXRlcjogMC4yNSxcbiAgRWFydGg6IDAuMjUsXG4gIEFpcjogMC4yNSxcbn07XG5cbmNvbnN0IGhpZ2hGaXJlUmF3OiBSYXdFbGVtZW50YWxQcm9wZXJ0aWVzID0ge1xuICBGaXJlOiA4LjAsXG4gIFdhdGVyOiAyLjAsXG4gIEVhcnRoOiAyLjAsXG4gIEFpcjogMi4wLFxufTtcblxuY29uc3QgemVyb1Byb3BlcnRpZXM6IFJhd0VsZW1lbnRhbFByb3BlcnRpZXMgPSB7XG4gIEZpcmU6IDAsXG4gIFdhdGVyOiAwLFxuICBFYXJ0aDogMCxcbiAgQWlyOiAwLFxufTtcblxuZGVzY3JpYmUoXCJFbGVtZW50YWwgTm9ybWFsaXphdGlvbiBVdGlsaXRpZXNcIiwgKCkgPT4ge1xuICBkZXNjcmliZShcIm5vcm1hbGl6ZUZvckRpc3BsYXlcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJub3JtYWxpemVzIHJhdyB2YWx1ZXMgdG8gcGVyY2VudGFnZXMgc3VtbWluZyB0byAxLjBcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gbm9ybWFsaXplRm9yRGlzcGxheShyYXdQcm9wZXJ0aWVzKTtcblxuICAgICAgY29uc3QgdG90YWwgPSByZXN1bHQuRmlyZSArIHJlc3VsdC5XYXRlciArIHJlc3VsdC5FYXJ0aCArIHJlc3VsdC5BaXI7XG4gICAgICBleHBlY3QodG90YWwpLnRvQmVDbG9zZVRvKDEuMCwgNik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwicHJlc2VydmVzIHJlbGF0aXZlIHByb3BvcnRpb25zXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUZvckRpc3BsYXkocmF3UHJvcGVydGllcyk7XG5cbiAgICAgIC8vIEZpcmUgc2hvdWxkIGJlIGxhcmdlc3QgKDUuMiAvIDExLjMgPSAwLjQ2KVxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0JlQ2xvc2VUbyg1LjIgLyAxMS4zLCAyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmVDbG9zZVRvKDMuMSAvIDExLjMsIDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5FYXJ0aCkudG9CZUNsb3NlVG8oMS44IC8gMTEuMywgMik7XG4gICAgICBleHBlY3QocmVzdWx0LkFpcikudG9CZUNsb3NlVG8oMS4yIC8gMTEuMywgMik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwicmV0dXJucyBkZWZhdWx0IHZhbHVlcyBmb3IgemVybyBpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBub3JtYWxpemVGb3JEaXNwbGF5KHplcm9Qcm9wZXJ0aWVzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0JlKDAuMjUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5XYXRlcikudG9CZSgwLjI1KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuRWFydGgpLnRvQmUoMC4yNSk7XG4gICAgICBleHBlY3QocmVzdWx0LkFpcikudG9CZSgwLjI1KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJ3b3JrcyB3aXRoIGFscmVhZHkgbm9ybWFsaXplZCB2YWx1ZXNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gbm9ybWFsaXplRm9yRGlzcGxheShub3JtYWxpemVkUHJvcGVydGllcyk7XG5cbiAgICAgIGNvbnN0IHRvdGFsID0gcmVzdWx0LkZpcmUgKyByZXN1bHQuV2F0ZXIgKyByZXN1bHQuRWFydGggKyByZXN1bHQuQWlyO1xuICAgICAgZXhwZWN0KHRvdGFsKS50b0JlQ2xvc2VUbygxLjAsIDYpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgaGlnaC1pbnRlbnNpdHkgcmF3IHZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBoaWdoSW50ZW5zaXR5ID0geyBGaXJlOiAxMDAsIFdhdGVyOiA1MCwgRWFydGg6IDMwLCBBaXI6IDIwIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBub3JtYWxpemVGb3JEaXNwbGF5KGhpZ2hJbnRlbnNpdHkpO1xuXG4gICAgICBjb25zdCB0b3RhbCA9IHJlc3VsdC5GaXJlICsgcmVzdWx0LldhdGVyICsgcmVzdWx0LkVhcnRoICsgcmVzdWx0LkFpcjtcbiAgICAgIGV4cGVjdCh0b3RhbCkudG9CZUNsb3NlVG8oMS4wLCA2KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuRmlyZSkudG9CZUNsb3NlVG8oMC41LCAyKTsgLy8gMTAwLzIwMFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImdldFRvdGFsSW50ZW5zaXR5XCIsICgpID0+IHtcbiAgICB0ZXN0KFwic3VtcyBhbGwgZWxlbWVudCB2YWx1ZXNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0VG90YWxJbnRlbnNpdHkocmF3UHJvcGVydGllcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVDbG9zZVRvKDUuMiArIDMuMSArIDEuOCArIDEuMiwgNik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlQ2xvc2VUbygxMS4zLCA2KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJyZXR1cm5zIDEuMCBmb3Igbm9ybWFsaXplZCBwcm9wZXJ0aWVzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFRvdGFsSW50ZW5zaXR5KG5vcm1hbGl6ZWRQcm9wZXJ0aWVzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZUNsb3NlVG8oMS4wLCA2KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJyZXR1cm5zIDAgZm9yIHplcm8gcHJvcGVydGllc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRUb3RhbEludGVuc2l0eSh6ZXJvUHJvcGVydGllcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiZ2V0RG9taW5hbnRFbGVtZW50QnlJbnRlbnNpdHlcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJyZXR1cm5zIGVsZW1lbnQgd2l0aCBoaWdoZXN0IHZhbHVlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldERvbWluYW50RWxlbWVudEJ5SW50ZW5zaXR5KHJhd1Byb3BlcnRpZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKFwiRmlyZVwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJ3b3JrcyB3aXRoIGhpZ2gtaW50ZW5zaXR5IHZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXREb21pbmFudEVsZW1lbnRCeUludGVuc2l0eShoaWdoRmlyZVJhdyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoXCJGaXJlXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInJldHVybnMgZmlyc3QgZWxlbWVudCBmb3IgZXF1YWwgdmFsdWVzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGVxdWFsUHJvcGVydGllcyA9IHtcbiAgICAgICAgRmlyZTogMC4yNSxcbiAgICAgICAgV2F0ZXI6IDAuMjUsXG4gICAgICAgIEVhcnRoOiAwLjI1LFxuICAgICAgICBBaXI6IDAuMjUsXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0RG9taW5hbnRFbGVtZW50QnlJbnRlbnNpdHkoZXF1YWxQcm9wZXJ0aWVzKTtcblxuICAgICAgLy8gU2hvdWxkIHJldHVybiBmaXJzdCBlbGVtZW50IChvcmRlciBkZXBlbmRzIG9uIE9iamVjdC5lbnRyaWVzKVxuICAgICAgZXhwZWN0KFtcIkZpcmVcIiwgXCJXYXRlclwiLCBcIkVhcnRoXCIsIFwiQWlyXCJdKS50b0NvbnRhaW4ocmVzdWx0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJpc05vcm1hbGl6ZWRcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJyZXR1cm5zIHRydWUgZm9yIG5vcm1hbGl6ZWQgcHJvcGVydGllcyAoc3VtID0gMS4wKVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBpc05vcm1hbGl6ZWQobm9ybWFsaXplZFByb3BlcnRpZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInJldHVybnMgZmFsc2UgZm9yIHJhdyBwcm9wZXJ0aWVzIChzdW0gPiAxLjApXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGlzTm9ybWFsaXplZChyYXdQcm9wZXJ0aWVzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyBlZGdlIGNhc2VzIG5lYXIgMS4wXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG5lYXJOb3JtYWxpemVkID0ge1xuICAgICAgICBGaXJlOiAwLjI0LFxuICAgICAgICBXYXRlcjogMC4yNixcbiAgICAgICAgRWFydGg6IDAuMjUsXG4gICAgICAgIEFpcjogMC4yNSxcbiAgICAgIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBpc05vcm1hbGl6ZWQobmVhck5vcm1hbGl6ZWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInJldHVybnMgdHJ1ZSBmb3Igc3VtIG9mIDEuMDUgKHdpdGhpbiB0b2xlcmFuY2UpXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG5lYXJOb3JtYWxpemVkID0ge1xuICAgICAgICBGaXJlOiAwLjI2LFxuICAgICAgICBXYXRlcjogMC4yNixcbiAgICAgICAgRWFydGg6IDAuMjYsXG4gICAgICAgIEFpcjogMC4yNyxcbiAgICAgIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBpc05vcm1hbGl6ZWQobmVhck5vcm1hbGl6ZWQpO1xuXG4gICAgICAvLyBTaG91bGQgc3RpbGwgYmUgY29uc2lkZXJlZCBub3JtYWxpemVkICh3aXRoaW4gdG9sZXJhbmNlKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJjb252ZXJ0Tm9ybWFsaXplZFRvUmF3XCIsICgpID0+IHtcbiAgICB0ZXN0KFwic2NhbGVzIG5vcm1hbGl6ZWQgdmFsdWVzIHRvIHJlZmVyZW5jZSBpbnRlbnNpdHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29udmVydE5vcm1hbGl6ZWRUb1Jhdyhub3JtYWxpemVkUHJvcGVydGllcywgMTApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUpLnRvQmUoMi41KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmUoMi41KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuRWFydGgpLnRvQmUoMi41KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuQWlyKS50b0JlKDIuNSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsID0gcmVzdWx0LkZpcmUgKyByZXN1bHQuV2F0ZXIgKyByZXN1bHQuRWFydGggKyByZXN1bHQuQWlyO1xuICAgICAgZXhwZWN0KHRvdGFsKS50b0JlKDEwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJ1c2VzIGRlZmF1bHQgcmVmZXJlbmNlIGludGVuc2l0eSBvZiA0LjBcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29udmVydE5vcm1hbGl6ZWRUb1Jhdyhub3JtYWxpemVkUHJvcGVydGllcyk7XG5cbiAgICAgIGNvbnN0IHRvdGFsID0gcmVzdWx0LkZpcmUgKyByZXN1bHQuV2F0ZXIgKyByZXN1bHQuRWFydGggKyByZXN1bHQuQWlyO1xuICAgICAgZXhwZWN0KHRvdGFsKS50b0JlKDQuMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwicmV0dXJucyByYXcgdmFsdWVzIHVuY2hhbmdlZCB3aGVuIGFscmVhZHkgcmF3XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbnZlcnROb3JtYWxpemVkVG9SYXcocmF3UHJvcGVydGllcywgMTApO1xuXG4gICAgICAvLyBTaG91bGQgZGV0ZWN0IHRoYXQgcmF3UHJvcGVydGllcyBpcyBub3Qgbm9ybWFsaXplZCAoc3VtICE9IDEuMClcbiAgICAgIC8vIGFuZCByZXR1cm4gdmFsdWVzIGFzLWlzXG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUpLnRvQmUoNS4yKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmUoMy4xKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuRWFydGgpLnRvQmUoMS44KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuQWlyKS50b0JlKDEuMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiZ2V0UmVsYXRpdmVTdHJlbmd0aHNcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJjYWxjdWxhdGVzIGVsZW1lbnQgc3RyZW5ndGggcmVsYXRpdmUgdG8gYXZlcmFnZVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRSZWxhdGl2ZVN0cmVuZ3RocyhoaWdoRmlyZVJhdyk7XG5cbiAgICAgIC8vIFRvdGFsID0gMTQsIGF2ZXJhZ2UgPSAzLjVcbiAgICAgIC8vIEZpcmUgPSA4IC8gMy41ID0gMi4yOVxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0JlQ2xvc2VUbyg4IC8gMy41LCAyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmVDbG9zZVRvKDIgLyAzLjUsIDIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInJldHVybnMgYWxsIDEuMCBmb3IgemVybyBwcm9wZXJ0aWVzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFJlbGF0aXZlU3RyZW5ndGhzKHplcm9Qcm9wZXJ0aWVzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5XYXRlcikudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuRWFydGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QocmVzdWx0LkFpcikudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJiYWxhbmNlZCBwcm9wZXJ0aWVzIGhhdmUgc3RyZW5ndGggb2YgMS4wXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGJhbGFuY2VkID0geyBGaXJlOiA1LCBXYXRlcjogNSwgRWFydGg6IDUsIEFpcjogNSB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0UmVsYXRpdmVTdHJlbmd0aHMoYmFsYW5jZWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUpLnRvQmUoMSk7XG4gICAgICBleHBlY3QocmVzdWx0LldhdGVyKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5FYXJ0aCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuQWlyKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImZvcm1hdEFzUGVyY2VudGFnZXNcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJmb3JtYXRzIHJhdyB2YWx1ZXMgYXMgcGVyY2VudGFnZSBzdHJpbmdzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdEFzUGVyY2VudGFnZXMocmF3UHJvcGVydGllcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuRmlyZSkudG9CZShcIjQ2LjAlXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5XYXRlcikudG9CZShcIjI3LjQlXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5FYXJ0aCkudG9CZShcIjE1LjklXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5BaXIpLnRvQmUoXCIxMC42JVwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJyZXNwZWN0cyBkZWNpbWFsIHBsYWNlcyBwYXJhbWV0ZXJcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZm9ybWF0QXNQZXJjZW50YWdlcyhyYXdQcm9wZXJ0aWVzLCAyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0NvbnRhaW4oXCI0Ni5cIik7XG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUuc3BsaXQoXCIuXCIpWzFdKS50b0JlKFwiMDIlXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcIndvcmtzIHdpdGggYWxyZWFkeSBub3JtYWxpemVkIHZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRBc1BlcmNlbnRhZ2VzKG5vcm1hbGl6ZWRQcm9wZXJ0aWVzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0JlKFwiMjUuMCVcIik7XG4gICAgICBleHBlY3QocmVzdWx0LldhdGVyKS50b0JlKFwiMjUuMCVcIik7XG4gICAgICBleHBlY3QocmVzdWx0LkVhcnRoKS50b0JlKFwiMjUuMCVcIik7XG4gICAgICBleHBlY3QocmVzdWx0LkFpcikudG9CZShcIjI1LjAlXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImNvbXBhcmVJbnRlbnNpdGllc1wiLCAoKSA9PiB7XG4gICAgdGVzdChcImNhbGN1bGF0ZXMgZGlmZmVyZW5jZXMgYmV0d2VlbiB0d28gcHJvcGVydHkgc2V0c1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wczEgPSB7IEZpcmU6IDUuMiwgV2F0ZXI6IDMuMSwgRWFydGg6IDEuOCwgQWlyOiAxLjIgfTtcbiAgICAgIGNvbnN0IHByb3BzMiA9IHsgRmlyZTogMy4wLCBXYXRlcjogNC4wLCBFYXJ0aDogMi4wLCBBaXI6IDEuMCB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjb21wYXJlSW50ZW5zaXRpZXMocHJvcHMxLCBwcm9wczIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUpLnRvQmVDbG9zZVRvKDIuMiwgNik7XG4gICAgICBleHBlY3QocmVzdWx0LldhdGVyKS50b0JlQ2xvc2VUbygtMC45LCA2KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuRWFydGgpLnRvQmVDbG9zZVRvKC0wLjIsIDYpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5BaXIpLnRvQmVDbG9zZVRvKDAuMiwgNik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwicmV0dXJucyB6ZXJvcyBmb3IgaWRlbnRpY2FsIHByb3BlcnRpZXNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcGFyZUludGVuc2l0aWVzKHJhd1Byb3BlcnRpZXMsIHJhd1Byb3BlcnRpZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUpLnRvQmUoMCk7XG4gICAgICBleHBlY3QocmVzdWx0LldhdGVyKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5FYXJ0aCkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuQWlyKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkludGVncmF0aW9uIFRlc3RzXCIsICgpID0+IHtcbiAgICB0ZXN0KFwicm91bmQtdHJpcDogbm9ybWFsaXplIC0+IGNvbnZlcnQgYmFjayBwcmVzZXJ2ZXMgcHJvcG9ydGlvbnNcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWwgPSB7IEZpcmU6IDQsIFdhdGVyOiAzLCBFYXJ0aDogMiwgQWlyOiAxIH07XG4gICAgICBjb25zdCBvcmlnaW5hbFRvdGFsID0gZ2V0VG90YWxJbnRlbnNpdHkob3JpZ2luYWwpO1xuXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplRm9yRGlzcGxheShvcmlnaW5hbCk7XG4gICAgICBjb25zdCByZXN0b3JlZCA9IGNvbnZlcnROb3JtYWxpemVkVG9SYXcobm9ybWFsaXplZCwgb3JpZ2luYWxUb3RhbCk7XG5cbiAgICAgIGV4cGVjdChyZXN0b3JlZC5GaXJlKS50b0JlQ2xvc2VUbyhvcmlnaW5hbC5GaXJlLCA1KTtcbiAgICAgIGV4cGVjdChyZXN0b3JlZC5XYXRlcikudG9CZUNsb3NlVG8ob3JpZ2luYWwuV2F0ZXIsIDUpO1xuICAgICAgZXhwZWN0KHJlc3RvcmVkLkVhcnRoKS50b0JlQ2xvc2VUbyhvcmlnaW5hbC5FYXJ0aCwgNSk7XG4gICAgICBleHBlY3QocmVzdG9yZWQuQWlyKS50b0JlQ2xvc2VUbyhvcmlnaW5hbC5BaXIsIDUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImRvbWluYW50IGVsZW1lbnQgaXMgY29uc2lzdGVudCBhY3Jvc3Mgbm9ybWFsaXphdGlvblwiLCAoKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSB7IEZpcmU6IDgsIFdhdGVyOiAyLCBFYXJ0aDogMywgQWlyOiAxIH07XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplRm9yRGlzcGxheShyYXcpO1xuXG4gICAgICBjb25zdCByYXdEb21pbmFudCA9IGdldERvbWluYW50RWxlbWVudEJ5SW50ZW5zaXR5KHJhdyk7XG4gICAgICBjb25zdCBub3JtYWxpemVkRG9taW5hbnQgPSBnZXREb21pbmFudEVsZW1lbnRCeUludGVuc2l0eShub3JtYWxpemVkKTtcblxuICAgICAgZXhwZWN0KHJhd0RvbWluYW50KS50b0JlKG5vcm1hbGl6ZWREb21pbmFudCk7XG4gICAgICBleHBlY3QocmF3RG9taW5hbnQpLnRvQmUoXCJGaXJlXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInJlbGF0aXZlIHN0cmVuZ3RocyByZW1haW4gY29uc2lzdGVudCBhZnRlciBub3JtYWxpemF0aW9uXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IHsgRmlyZTogMTAsIFdhdGVyOiA1LCBFYXJ0aDogMywgQWlyOiAyIH07XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplRm9yRGlzcGxheShyYXcpO1xuXG4gICAgICBjb25zdCByYXdTdHJlbmd0aHMgPSBnZXRSZWxhdGl2ZVN0cmVuZ3RocyhyYXcpO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFN0cmVuZ3RocyA9IGdldFJlbGF0aXZlU3RyZW5ndGhzKG5vcm1hbGl6ZWQpO1xuXG4gICAgICAvLyBSZWxhdGl2ZSBzdHJlbmd0aHMgc2hvdWxkIGJlIHRoZSBzYW1lXG4gICAgICBleHBlY3QocmF3U3RyZW5ndGhzLkZpcmUpLnRvQmVDbG9zZVRvKG5vcm1hbGl6ZWRTdHJlbmd0aHMuRmlyZSwgNSk7XG4gICAgICBleHBlY3QocmF3U3RyZW5ndGhzLldhdGVyKS50b0JlQ2xvc2VUbyhub3JtYWxpemVkU3RyZW5ndGhzLldhdGVyLCA1KTtcbiAgICAgIGV4cGVjdChyYXdTdHJlbmd0aHMuRWFydGgpLnRvQmVDbG9zZVRvKG5vcm1hbGl6ZWRTdHJlbmd0aHMuRWFydGgsIDUpO1xuICAgICAgZXhwZWN0KHJhd1N0cmVuZ3Rocy5BaXIpLnRvQmVDbG9zZVRvKG5vcm1hbGl6ZWRTdHJlbmd0aHMuQWlyLCA1KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==