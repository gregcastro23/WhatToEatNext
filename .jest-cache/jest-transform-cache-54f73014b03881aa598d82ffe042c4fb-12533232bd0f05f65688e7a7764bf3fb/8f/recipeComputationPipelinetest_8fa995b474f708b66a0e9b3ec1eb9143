eabd248957d1ab1667ed92413af40dd6
"use strict";
/**
 * Recipe Computation Pipeline Tests
 *
 * Comprehensive tests for the hierarchical recipe computation system
 * including planetary alchemy, cooking transformations, and kinetic properties.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock the planetary alchemy mapping functions
jest.mock("@/utils/planetaryAlchemyMapping", () => ({
    calculateAlchemicalFromPlanets: jest.fn((positions) => ({
        Spirit: 4,
        Essence: 6,
        Matter: 5,
        Substance: 2,
    })),
    aggregateZodiacElementals: jest.fn((positions) => ({
        Fire: 0.3,
        Water: 0.3,
        Earth: 0.2,
        Air: 0.2,
    })),
    getDominantElement: jest.fn((elementals) => "Fire"),
    getDominantAlchemicalProperty: jest.fn((alchemical) => "Essence"),
    validatePlanetaryPositions: jest.fn(() => true),
}));
// Mock the thermodynamic calculations
jest.mock("@/utils/monicaKalchmCalculations", () => ({
    calculateThermodynamicMetrics: jest.fn((alchemical, elemental) => ({
        heat: 0.15,
        entropy: 0.25,
        reactivity: 0.35,
        gregsEnergy: 0.05,
        kalchm: 0.8,
        monica: 1.2,
    })),
}));
// Mock kinetics calculations
jest.mock("@/calculations/kinetics", () => ({
    calculateKinetics: jest.fn(() => ({
        velocity: { Fire: 0.1, Water: 0.1, Earth: 0.1, Air: 0.1 },
        momentum: { Fire: 0.1, Water: 0.1, Earth: 0.1, Air: 0.1 },
        charge: 7,
        potentialDifference: 0.007,
        currentFlow: 0.175,
        power: 0.0012,
        inertia: 1.7,
        force: { Fire: 0.0003, Water: 0.0003, Earth: 0.0003, Air: 0.0003 },
        forceMagnitude: 0.0012,
        forceClassification: "balanced",
        aspectPhase: null,
        thermalDirection: "stable",
    })),
}));
const hierarchicalRecipeCalculations_1 = require("@/utils/hierarchicalRecipeCalculations");
// Sample test data
const samplePlanetaryPositions = {
    Sun: "Leo",
    Moon: "Cancer",
    Mercury: "Virgo",
    Venus: "Libra",
    Mars: "Aries",
    Jupiter: "Sagittarius",
    Saturn: "Capricorn",
    Uranus: "Aquarius",
    Neptune: "Pisces",
    Pluto: "Scorpio",
};
const sampleIngredients = [
    {
        name: "salmon fillet",
        amount: 6,
        unit: "oz",
        elementalProperties: { Fire: 0.2, Water: 0.5, Earth: 0.2, Air: 0.1 },
    },
    {
        name: "olive oil",
        amount: 2,
        unit: "tbsp",
        elementalProperties: { Fire: 0.3, Water: 0.1, Earth: 0.4, Air: 0.2 },
    },
    {
        name: "lemon",
        amount: 1,
        unit: "whole",
        elementalProperties: { Fire: 0.4, Water: 0.4, Earth: 0.1, Air: 0.1 },
    },
];
const sampleCookingMethods = ["grilling", "seasoning"];
(0, globals_1.describe)("Recipe Computation Pipeline", () => {
    (0, globals_1.describe)("Core Computation Functions", () => {
        (0, globals_1.test)("computeRecipeProperties returns complete computed properties", () => {
            const options = {
                planetaryPositions: samplePlanetaryPositions,
                applyCookingMethods: true,
            };
            const result = (0, hierarchicalRecipeCalculations_1.computeRecipeProperties)(sampleIngredients, sampleCookingMethods, options);
            (0, globals_1.expect)(result).toHaveProperty("alchemicalProperties");
            (0, globals_1.expect)(result).toHaveProperty("elementalProperties");
            (0, globals_1.expect)(result).toHaveProperty("thermodynamicProperties");
            (0, globals_1.expect)(result).toHaveProperty("kineticProperties");
            (0, globals_1.expect)(result).toHaveProperty("dominantElement");
            (0, globals_1.expect)(result).toHaveProperty("dominantAlchemicalProperty");
            (0, globals_1.expect)(result).toHaveProperty("computationMetadata");
        });
        (0, globals_1.test)("computeRecipePropertiesSimple provides default options", () => {
            const result = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, samplePlanetaryPositions);
            (0, globals_1.expect)(result.computationMetadata.cookingMethodsApplied).toEqual(sampleCookingMethods);
            (0, globals_1.expect)(result.computationMetadata.planetaryPositionsUsed).toEqual(samplePlanetaryPositions);
        });
        (0, globals_1.test)("throws error when planetary positions are missing", () => {
            (0, globals_1.expect)(() => {
                (0, hierarchicalRecipeCalculations_1.computeRecipeProperties)(sampleIngredients, sampleCookingMethods, {});
            }).toThrow("planetaryPositions are required");
        });
    });
    (0, globals_1.describe)("Kinetic Properties Calculation", () => {
        (0, globals_1.test)("calculateRecipeKinetics generates P=IV circuit properties", () => {
            const alchemical = { Spirit: 4, Essence: 6, Matter: 5, Substance: 2 };
            const thermodynamic = {
                heat: 0.15,
                entropy: 0.25,
                reactivity: 0.35,
                gregsEnergy: 0.05,
                kalchm: 0.8,
                monica: 1.2,
            };
            const result = (0, hierarchicalRecipeCalculations_1.calculateRecipeKinetics)(alchemical, thermodynamic, samplePlanetaryPositions);
            (0, globals_1.expect)(result).toHaveProperty("charge");
            (0, globals_1.expect)(result).toHaveProperty("potentialDifference");
            (0, globals_1.expect)(result).toHaveProperty("currentFlow");
            (0, globals_1.expect)(result).toHaveProperty("power");
            (0, globals_1.expect)(result).toHaveProperty("force");
            (0, globals_1.expect)(result).toHaveProperty("forceMagnitude");
            (0, globals_1.expect)(result).toHaveProperty("forceClassification");
            (0, globals_1.expect)(result).toHaveProperty("thermalDirection");
            // Validate P=IV relationship: P = I Ã— V
            const expectedPower = result.currentFlow * result.potentialDifference;
            (0, globals_1.expect)(Math.abs(result.power - expectedPower)).toBeLessThan(0.001);
        });
        (0, globals_1.test)("kinetic properties reflect recipe composition", () => {
            const alchemical = { Spirit: 2, Essence: 8, Matter: 3, Substance: 4 };
            const thermodynamic = {
                heat: 0.1,
                entropy: 0.2,
                reactivity: 0.4,
                gregsEnergy: -0.02,
                kalchm: 0.6,
                monica: 0.8,
            };
            const result = (0, hierarchicalRecipeCalculations_1.calculateRecipeKinetics)(alchemical, thermodynamic, samplePlanetaryPositions);
            // Higher matter + substance = higher charge
            (0, globals_1.expect)(result.charge).toBe(7);
            // Lower gregs energy = lower potential difference
            (0, globals_1.expect)(result.potentialDifference).toBeLessThan(0.01);
        });
    });
    (0, globals_1.describe)("Ingredient Processing", () => {
        (0, globals_1.test)("aggregateIngredientElementals combines ingredient properties", () => {
            const result = (0, hierarchicalRecipeCalculations_1.aggregateIngredientElementals)(sampleIngredients);
            (0, globals_1.expect)(result).toHaveProperty("Fire");
            (0, globals_1.expect)(result).toHaveProperty("Water");
            (0, globals_1.expect)(result).toHaveProperty("Earth");
            (0, globals_1.expect)(result).toHaveProperty("Air");
            // Properties should be normalized (sum to ~1.0)
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBeGreaterThan(0.99);
            (0, globals_1.expect)(total).toBeLessThan(1.01);
        });
        (0, globals_1.test)("scaleIngredientByQuantity applies logarithmic scaling", () => {
            const baseElementals = { Fire: 0.3, Water: 0.4, Earth: 0.2, Air: 0.1 };
            const smallAmount = (0, hierarchicalRecipeCalculations_1.scaleIngredientByQuantity)(baseElementals, 5, "g");
            const largeAmount = (0, hierarchicalRecipeCalculations_1.scaleIngredientByQuantity)(baseElementals, 500, "g");
            // Small amounts should be significantly scaled down
            (0, globals_1.expect)(smallAmount.scaled.Fire).toBeLessThan(baseElementals.Fire);
            // Large amounts should approach but not exceed base values
            (0, globals_1.expect)(largeAmount.scaled.Fire).toBeLessThanOrEqual(baseElementals.Fire);
            (0, globals_1.expect)(largeAmount.scalingFactor).toBeGreaterThan(smallAmount.scalingFactor);
        });
        (0, globals_1.test)("handles empty ingredient list gracefully", () => {
            const result = (0, hierarchicalRecipeCalculations_1.aggregateIngredientElementals)([]);
            (0, globals_1.expect)(result.Fire).toBe(0.25);
            (0, globals_1.expect)(result.Water).toBe(0.25);
            (0, globals_1.expect)(result.Earth).toBe(0.25);
            (0, globals_1.expect)(result.Air).toBe(0.25);
        });
    });
    (0, globals_1.describe)("Cooking Method Transformations", () => {
        (0, globals_1.test)("applyCookingMethodTransforms modifies elemental properties", () => {
            const baseElementals = {
                Fire: 0.25,
                Water: 0.25,
                Earth: 0.25,
                Air: 0.25,
            };
            const result = (0, hierarchicalRecipeCalculations_1.applyCookingMethodTransforms)(baseElementals, ["grilling"]);
            // Grilling should increase Fire and Air, decrease Water
            (0, globals_1.expect)(result.Fire).toBeGreaterThan(baseElementals.Fire);
            (0, globals_1.expect)(result.Air).toBeGreaterThan(baseElementals.Air);
            (0, globals_1.expect)(result.Water).toBeLessThan(baseElementals.Water);
            // Result should still be normalized
            const total = result.Fire + result.Water + result.Earth + result.Air;
            (0, globals_1.expect)(total).toBeGreaterThan(0.99);
            (0, globals_1.expect)(total).toBeLessThan(1.01);
        });
        (0, globals_1.test)("handles unknown cooking methods gracefully", () => {
            const baseElementals = { Fire: 0.3, Water: 0.3, Earth: 0.2, Air: 0.2 };
            const result = (0, hierarchicalRecipeCalculations_1.applyCookingMethodTransforms)(baseElementals, [
                "unknown_method",
            ]);
            // Should return unmodified properties for unknown methods
            (0, globals_1.expect)(result).toEqual(baseElementals);
        });
        (0, globals_1.test)("applies multiple cooking methods sequentially", () => {
            const baseElementals = {
                Fire: 0.25,
                Water: 0.25,
                Earth: 0.25,
                Air: 0.25,
            };
            const result = (0, hierarchicalRecipeCalculations_1.applyCookingMethodTransforms)(baseElementals, [
                "grilling",
                "boiling",
            ]);
            // First grilling increases Fire (and decreases Water), then boiling partially recovers Water
            (0, globals_1.expect)(result.Fire).toBeGreaterThan(baseElementals.Fire * 0.7); // Partial Fire increase from grilling
            // After grilling reduces Water to ~0.15, boiling's 1.3x brings it to ~0.218 (less than original 0.25)
            (0, globals_1.expect)(result.Water).toBeGreaterThan(0.15); // Water partially recovers from grilling's reduction
            (0, globals_1.expect)(result.Water).toBeLessThan(baseElementals.Water); // But still less than original due to normalization
        });
    });
    (0, globals_1.describe)("Integration Tests", () => {
        (0, globals_1.test)("complete pipeline produces consistent results", () => {
            // Run computation multiple times with same inputs
            const result1 = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, samplePlanetaryPositions);
            const result2 = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, samplePlanetaryPositions);
            // Results should be identical (deterministic)
            (0, globals_1.expect)(result1.alchemicalProperties).toEqual(result2.alchemicalProperties);
            (0, globals_1.expect)(result1.elementalProperties).toEqual(result2.elementalProperties);
            (0, globals_1.expect)(result1.dominantElement).toBe(result2.dominantElement);
            (0, globals_1.expect)(result1.dominantAlchemicalProperty).toBe(result2.dominantAlchemicalProperty);
        });
        (0, globals_1.test)("different planetary positions produce different results", () => {
            const positions1 = { ...samplePlanetaryPositions, Sun: "Leo" };
            const positions2 = { ...samplePlanetaryPositions, Sun: "Cancer" };
            const result1 = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, positions1);
            const result2 = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, positions2);
            // Results should be different due to different planetary influences
            // Note: In this mock setup, they might be the same, but in real implementation they would differ
            (0, globals_1.expect)(result1).toBeDefined();
            (0, globals_1.expect)(result2).toBeDefined();
        });
        (0, globals_1.test)("cooking methods affect final elemental balance", () => {
            const noCooking = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, [], samplePlanetaryPositions);
            const withCooking = (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, samplePlanetaryPositions);
            // Cooking methods should modify the elemental properties
            (0, globals_1.expect)(noCooking.elementalProperties).not.toEqual(withCooking.elementalProperties);
        });
    });
    (0, globals_1.describe)("Performance Tests", () => {
        (0, globals_1.test)("computation completes within performance targets", () => {
            const startTime = Date.now();
            // Run multiple computations to test performance
            for (let i = 0; i < 10; i++) {
                (0, hierarchicalRecipeCalculations_1.computeRecipePropertiesSimple)(sampleIngredients, sampleCookingMethods, samplePlanetaryPositions);
            }
            const endTime = Date.now();
            const averageTime = (endTime - startTime) / 10;
            // Should complete in under 100ms per recipe
            (0, globals_1.expect)(averageTime).toBeLessThan(100);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL2hvbWUvV2hhdFRvRWF0TmV4dC9fX3Rlc3RzX18vcmVjaXBlQ29tcHV0YXRpb25QaXBlbGluZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCwyQ0FBdUQ7QUFFdkQsK0NBQStDO0FBQy9DLElBQUksQ0FBQyxJQUFJLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsRCw4QkFBOEIsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3RELE1BQU0sRUFBRSxDQUFDO1FBQ1QsT0FBTyxFQUFFLENBQUM7UUFDVixNQUFNLEVBQUUsQ0FBQztRQUNULFNBQVMsRUFBRSxDQUFDO0tBQ2IsQ0FBQyxDQUFDO0lBQ0gseUJBQXlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqRCxJQUFJLEVBQUUsR0FBRztRQUNULEtBQUssRUFBRSxHQUFHO1FBQ1YsS0FBSyxFQUFFLEdBQUc7UUFDVixHQUFHLEVBQUUsR0FBRztLQUNULENBQUMsQ0FBQztJQUNILGtCQUFrQixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNuRCw2QkFBNkIsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUM7SUFDakUsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUM7Q0FDaEQsQ0FBQyxDQUFDLENBQUM7QUFFSixzQ0FBc0M7QUFDdEMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ25ELDZCQUE2QixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFF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QixFQUNwQix3QkFBd0IsQ0FDekIsQ0FBQztZQUNKLENBQUM7WUFFRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDM0IsTUFBTSxXQUFXLEdBQUcsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBRS9DLDRDQUE0QztZQUM1QyxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvaG9tZS9XaGF0VG9FYXROZXh0L19fdGVzdHNfXy9yZWNpcGVDb21wdXRhdGlvblBpcGVsaW5lLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWNpcGUgQ29tcHV0YXRpb24gUGlwZWxpbmUgVGVzdHNcbiAqXG4gKiBDb21wcmVoZW5zaXZlIHRlc3RzIGZvciB0aGUgaGllcmFyY2hpY2FsIHJlY2lwZSBjb21wdXRhdGlvbiBzeXN0ZW1cbiAqIGluY2x1ZGluZyBwbGFuZXRhcnkgYWxjaGVteSwgY29va2luZyB0cmFuc2Zvcm1hdGlvbnMsIGFuZCBraW5ldGljIHByb3BlcnRpZXMuXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGV4cGVjdCwgdGVzdCB9IGZyb20gXCJAamVzdC9nbG9iYWxzXCI7XG5cbi8vIE1vY2sgdGhlIHBsYW5ldGFyeSBhbGNoZW15IG1hcHBpbmcgZnVuY3Rpb25zXG5qZXN0Lm1vY2soXCJAL3V0aWxzL3BsYW5ldGFyeUFsY2hlbXlNYXBwaW5nXCIsICgpID0+ICh7XG4gIGNhbGN1bGF0ZUFsY2hlbWljYWxGcm9tUGxhbmV0czogamVzdC5mbigocG9zaXRpb25zKSA9PiAoe1xuICAgIFNwaXJpdDogNCxcbiAgICBFc3NlbmNlOiA2LFxuICAgIE1hdHRlcjogNSxcbiAgICBTdWJzdGFuY2U6IDIsXG4gIH0pKSxcbiAgYWdncmVnYXRlWm9kaWFjRWxlbWVudGFsczogamVzdC5mbigocG9zaXRpb25zKSA9PiAoe1xuICAgIEZpcmU6IDAuMyxcbiAgICBXYXRlcjogMC4zLFxuICAgIEVhcnRoOiAwLjIsXG4gICAgQWlyOiAwLjIsXG4gIH0pKSxcbiAgZ2V0RG9taW5hbnRFbGVtZW50OiBqZXN0LmZuKChlbGVtZW50YWxzKSA9PiBcIkZpcmVcIiksXG4gIGdldERvbWluYW50QWxjaGVtaWNhbFByb3BlcnR5OiBqZXN0LmZuKChhbGNoZW1pY2FsKSA9PiBcIkVzc2VuY2VcIiksXG4gIHZhbGlkYXRlUGxhbmV0YXJ5UG9zaXRpb25zOiBqZXN0LmZuKCgpID0+IHRydWUpLFxufSkpO1xuXG4vLyBNb2NrIHRoZSB0aGVybW9keW5hbWljIGNhbGN1bGF0aW9uc1xuamVzdC5tb2NrKFwiQC91dGlscy9tb25pY2FLYWxjaG1DYWxjdWxhdGlvbnNcIiwgKCkgPT4gKHtcbiAgY2FsY3VsYXRlVGhlcm1vZHluYW1pY01ldHJpY3M6IGplc3QuZm4oKGFsY2hlbWljYWwsIGVsZW1lbnRhbCkgPT4gKHtcbiAgICBoZWF0OiAwLjE1LFxuICAgIGVudHJvcHk6IDAuMjUsXG4gICAgcmVhY3Rpdml0eTogMC4zNSxcbiAgICBncmVnc0VuZXJneTogMC4wNSxcbiAgICBrYWxjaG06IDAuOCxcbiAgICBtb25pY2E6IDEuMixcbiAgfSkpLFxufSkpO1xuXG4vLyBNb2NrIGtpbmV0aWNzIGNhbGN1bGF0aW9uc1xuamVzdC5tb2NrKFwiQC9jYWxjdWxhdGlvbnMva2luZXRpY3NcIiwgKCkgPT4gKHtcbiAgY2FsY3VsYXRlS2luZXRpY3M6IGplc3QuZm4oKCkgPT4gKHtcbiAgICB2ZWxvY2l0eTogeyBGaXJlOiAwLjEsIFdhdGVyOiAwLjEsIEVhcnRoOiAwLjEsIEFpcjogMC4xIH0sXG4gICAgbW9tZW50dW06IHsgRmlyZTogMC4xLCBXYXRlcjogMC4xLCBFYXJ0aDogMC4xLCBBaXI6IDAuMSB9LFxuICAgIGNoYXJnZTogNyxcbiAgICBwb3RlbnRpYWxEaWZmZXJlbmNlOiAwLjAwNyxcbiAgICBjdXJyZW50RmxvdzogMC4xNzUsXG4gICAgcG93ZXI6IDAuMDAxMixcbiAgICBpbmVydGlhOiAxLjcsXG4gICAgZm9yY2U6IHsgRmlyZTogMC4wMDAzLCBXYXRlcjogMC4wMDAzLCBFYXJ0aDogMC4wMDAzLCBBaXI6IDAuMDAwMyB9LFxuICAgIGZvcmNlTWFnbml0dWRlOiAwLjAwMTIsXG4gICAgZm9yY2VDbGFzc2lmaWNhdGlvbjogXCJiYWxhbmNlZFwiIGFzIGNvbnN0LFxuICAgIGFzcGVjdFBoYXNlOiBudWxsLFxuICAgIHRoZXJtYWxEaXJlY3Rpb246IFwic3RhYmxlXCIgYXMgY29uc3QsXG4gIH0pKSxcbn0pKTtcblxuaW1wb3J0IHtcbiAgYWdncmVnYXRlSW5ncmVkaWVudEVsZW1lbnRhbHMsXG4gIGFwcGx5Q29va2luZ01ldGhvZFRyYW5zZm9ybXMsXG4gIGNhbGN1bGF0ZVJlY2lwZUtpbmV0aWNzLFxuICBjb21wdXRlUmVjaXBlUHJvcGVydGllcyxcbiAgY29tcHV0ZVJlY2lwZVByb3BlcnRpZXNTaW1wbGUsXG4gIHNjYWxlSW5ncmVkaWVudEJ5UXVhbnRpdHksXG59IGZyb20gXCJAL3V0aWxzL2hpZXJhcmNoaWNhbFJlY2lwZUNhbGN1bGF0aW9uc1wiO1xuXG4vLyBTYW1wbGUgdGVzdCBkYXRhXG5jb25zdCBzYW1wbGVQbGFuZXRhcnlQb3NpdGlvbnMgPSB7XG4gIFN1bjogXCJMZW9cIixcbiAgTW9vbjogXCJDYW5jZXJcIixcbiAgTWVyY3VyeTogXCJWaXJnb1wiLFxuICBWZW51czogXCJMaWJyYVwiLFxuICBNYXJzOiBcIkFyaWVzXCIsXG4gIEp1cGl0ZXI6IFwiU2FnaXR0YXJpdXNcIixcbiAgU2F0dXJuOiBcIkNhcHJpY29yblwiLFxuICBVcmFudXM6IFwiQXF1YXJpdXNcIixcbiAgTmVwdHVuZTogXCJQaXNjZXNcIixcbiAgUGx1dG86IFwiU2NvcnBpb1wiLFxufTtcblxuY29uc3Qgc2FtcGxlSW5ncmVkaWVudHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcInNhbG1vbiBmaWxsZXRcIixcbiAgICBhbW91bnQ6IDYsXG4gICAgdW5pdDogXCJvelwiLFxuICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IHsgRmlyZTogMC4yLCBXYXRlcjogMC41LCBFYXJ0aDogMC4yLCBBaXI6IDAuMSB9LFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJvbGl2ZSBvaWxcIixcbiAgICBhbW91bnQ6IDIsXG4gICAgdW5pdDogXCJ0YnNwXCIsXG4gICAgZWxlbWVudGFsUHJvcGVydGllczogeyBGaXJlOiAwLjMsIFdhdGVyOiAwLjEsIEVhcnRoOiAwLjQsIEFpcjogMC4yIH0sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImxlbW9uXCIsXG4gICAgYW1vdW50OiAxLFxuICAgIHVuaXQ6IFwid2hvbGVcIixcbiAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiB7IEZpcmU6IDAuNCwgV2F0ZXI6IDAuNCwgRWFydGg6IDAuMSwgQWlyOiAwLjEgfSxcbiAgfSxcbl07XG5cbmNvbnN0IHNhbXBsZUNvb2tpbmdNZXRob2RzID0gW1wiZ3JpbGxpbmdcIiwgXCJzZWFzb25pbmdcIl07XG5cbmRlc2NyaWJlKFwiUmVjaXBlIENvbXB1dGF0aW9uIFBpcGVsaW5lXCIsICgpID0+IHtcbiAgZGVzY3JpYmUoXCJDb3JlIENvbXB1dGF0aW9uIEZ1bmN0aW9uc1wiLCAoKSA9PiB7XG4gICAgdGVzdChcImNvbXB1dGVSZWNpcGVQcm9wZXJ0aWVzIHJldHVybnMgY29tcGxldGUgY29tcHV0ZWQgcHJvcGVydGllc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBwbGFuZXRhcnlQb3NpdGlvbnM6IHNhbXBsZVBsYW5ldGFyeVBvc2l0aW9ucyxcbiAgICAgICAgYXBwbHlDb29raW5nTWV0aG9kczogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXB1dGVSZWNpcGVQcm9wZXJ0aWVzKFxuICAgICAgICBzYW1wbGVJbmdyZWRpZW50cyxcbiAgICAgICAgc2FtcGxlQ29va2luZ01ldGhvZHMsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcImFsY2hlbWljYWxQcm9wZXJ0aWVzXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJlbGVtZW50YWxQcm9wZXJ0aWVzXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJ0aGVybW9keW5hbWljUHJvcGVydGllc1wiKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KFwia2luZXRpY1Byb3BlcnRpZXNcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcImRvbWluYW50RWxlbWVudFwiKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KFwiZG9taW5hbnRBbGNoZW1pY2FsUHJvcGVydHlcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcImNvbXB1dGF0aW9uTWV0YWRhdGFcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiY29tcHV0ZVJlY2lwZVByb3BlcnRpZXNTaW1wbGUgcHJvdmlkZXMgZGVmYXVsdCBvcHRpb25zXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXB1dGVSZWNpcGVQcm9wZXJ0aWVzU2ltcGxlKFxuICAgICAgICBzYW1wbGVJbmdyZWRpZW50cyxcbiAgICAgICAgc2FtcGxlQ29va2luZ01ldGhvZHMsXG4gICAgICAgIHNhbXBsZVBsYW5ldGFyeVBvc2l0aW9ucyxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcHV0YXRpb25NZXRhZGF0YS5jb29raW5nTWV0aG9kc0FwcGxpZWQpLnRvRXF1YWwoXG4gICAgICAgIHNhbXBsZUNvb2tpbmdNZXRob2RzLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcHV0YXRpb25NZXRhZGF0YS5wbGFuZXRhcnlQb3NpdGlvbnNVc2VkKS50b0VxdWFsKFxuICAgICAgICBzYW1wbGVQbGFuZXRhcnlQb3NpdGlvbnMsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInRocm93cyBlcnJvciB3aGVuIHBsYW5ldGFyeSBwb3NpdGlvbnMgYXJlIG1pc3NpbmdcIiwgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgY29tcHV0ZVJlY2lwZVByb3BlcnRpZXMoXG4gICAgICAgICAgc2FtcGxlSW5ncmVkaWVudHMsXG4gICAgICAgICAgc2FtcGxlQ29va2luZ01ldGhvZHMsXG4gICAgICAgICAge30gYXMgYW55LFxuICAgICAgICApO1xuICAgICAgfSkudG9UaHJvdyhcInBsYW5ldGFyeVBvc2l0aW9ucyBhcmUgcmVxdWlyZWRcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiS2luZXRpYyBQcm9wZXJ0aWVzIENhbGN1bGF0aW9uXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiY2FsY3VsYXRlUmVjaXBlS2luZXRpY3MgZ2VuZXJhdGVzIFA9SVYgY2lyY3VpdCBwcm9wZXJ0aWVzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFsY2hlbWljYWwgPSB7IFNwaXJpdDogNCwgRXNzZW5jZTogNiwgTWF0dGVyOiA1LCBTdWJzdGFuY2U6IDIgfTtcbiAgICAgIGNvbnN0IHRoZXJtb2R5bmFtaWMgPSB7XG4gICAgICAgIGhlYXQ6IDAuMTUsXG4gICAgICAgIGVudHJvcHk6IDAuMjUsXG4gICAgICAgIHJlYWN0aXZpdHk6IDAuMzUsXG4gICAgICAgIGdyZWdzRW5lcmd5OiAwLjA1LFxuICAgICAgICBrYWxjaG06IDAuOCxcbiAgICAgICAgbW9uaWNhOiAxLjIsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVSZWNpcGVLaW5ldGljcyhcbiAgICAgICAgYWxjaGVtaWNhbCxcbiAgICAgICAgdGhlcm1vZHluYW1pYyxcbiAgICAgICAgc2FtcGxlUGxhbmV0YXJ5UG9zaXRpb25zLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJjaGFyZ2VcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcInBvdGVudGlhbERpZmZlcmVuY2VcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcImN1cnJlbnRGbG93XCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJwb3dlclwiKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KFwiZm9yY2VcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcImZvcmNlTWFnbml0dWRlXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJmb3JjZUNsYXNzaWZpY2F0aW9uXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJ0aGVybWFsRGlyZWN0aW9uXCIpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBQPUlWIHJlbGF0aW9uc2hpcDogUCA9IEkgw5cgVlxuICAgICAgY29uc3QgZXhwZWN0ZWRQb3dlciA9IHJlc3VsdC5jdXJyZW50RmxvdyAqIHJlc3VsdC5wb3RlbnRpYWxEaWZmZXJlbmNlO1xuICAgICAgZXhwZWN0KE1hdGguYWJzKHJlc3VsdC5wb3dlciAtIGV4cGVjdGVkUG93ZXIpKS50b0JlTGVzc1RoYW4oMC4wMDEpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImtpbmV0aWMgcHJvcGVydGllcyByZWZsZWN0IHJlY2lwZSBjb21wb3NpdGlvblwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBhbGNoZW1pY2FsID0geyBTcGlyaXQ6IDIsIEVzc2VuY2U6IDgsIE1hdHRlcjogMywgU3Vic3RhbmNlOiA0IH07XG4gICAgICBjb25zdCB0aGVybW9keW5hbWljID0ge1xuICAgICAgICBoZWF0OiAwLjEsXG4gICAgICAgIGVudHJvcHk6IDAuMixcbiAgICAgICAgcmVhY3Rpdml0eTogMC40LFxuICAgICAgICBncmVnc0VuZXJneTogLTAuMDIsXG4gICAgICAgIGthbGNobTogMC42LFxuICAgICAgICBtb25pY2E6IDAuOCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVJlY2lwZUtpbmV0aWNzKFxuICAgICAgICBhbGNoZW1pY2FsLFxuICAgICAgICB0aGVybW9keW5hbWljLFxuICAgICAgICBzYW1wbGVQbGFuZXRhcnlQb3NpdGlvbnMsXG4gICAgICApO1xuXG4gICAgICAvLyBIaWdoZXIgbWF0dGVyICsgc3Vic3RhbmNlID0gaGlnaGVyIGNoYXJnZVxuICAgICAgZXhwZWN0KHJlc3VsdC5jaGFyZ2UpLnRvQmUoNyk7XG5cbiAgICAgIC8vIExvd2VyIGdyZWdzIGVuZXJneSA9IGxvd2VyIHBvdGVudGlhbCBkaWZmZXJlbmNlXG4gICAgICBleHBlY3QocmVzdWx0LnBvdGVudGlhbERpZmZlcmVuY2UpLnRvQmVMZXNzVGhhbigwLjAxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJJbmdyZWRpZW50IFByb2Nlc3NpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJhZ2dyZWdhdGVJbmdyZWRpZW50RWxlbWVudGFscyBjb21iaW5lcyBpbmdyZWRpZW50IHByb3BlcnRpZXNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYWdncmVnYXRlSW5ncmVkaWVudEVsZW1lbnRhbHMoc2FtcGxlSW5ncmVkaWVudHMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcIkZpcmVcIik7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eShcIldhdGVyXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoXCJFYXJ0aFwiKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KFwiQWlyXCIpO1xuXG4gICAgICAvLyBQcm9wZXJ0aWVzIHNob3VsZCBiZSBub3JtYWxpemVkIChzdW0gdG8gfjEuMClcbiAgICAgIGNvbnN0IHRvdGFsID0gcmVzdWx0LkZpcmUgKyByZXN1bHQuV2F0ZXIgKyByZXN1bHQuRWFydGggKyByZXN1bHQuQWlyO1xuICAgICAgZXhwZWN0KHRvdGFsKS50b0JlR3JlYXRlclRoYW4oMC45OSk7XG4gICAgICBleHBlY3QodG90YWwpLnRvQmVMZXNzVGhhbigxLjAxKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzY2FsZUluZ3JlZGllbnRCeVF1YW50aXR5IGFwcGxpZXMgbG9nYXJpdGhtaWMgc2NhbGluZ1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBiYXNlRWxlbWVudGFscyA9IHsgRmlyZTogMC4zLCBXYXRlcjogMC40LCBFYXJ0aDogMC4yLCBBaXI6IDAuMSB9O1xuXG4gICAgICBjb25zdCBzbWFsbEFtb3VudCA9IHNjYWxlSW5ncmVkaWVudEJ5UXVhbnRpdHkoYmFzZUVsZW1lbnRhbHMsIDUsIFwiZ1wiKTtcbiAgICAgIGNvbnN0IGxhcmdlQW1vdW50ID0gc2NhbGVJbmdyZWRpZW50QnlRdWFudGl0eShiYXNlRWxlbWVudGFscywgNTAwLCBcImdcIik7XG5cbiAgICAgIC8vIFNtYWxsIGFtb3VudHMgc2hvdWxkIGJlIHNpZ25pZmljYW50bHkgc2NhbGVkIGRvd25cbiAgICAgIGV4cGVjdChzbWFsbEFtb3VudC5zY2FsZWQuRmlyZSkudG9CZUxlc3NUaGFuKGJhc2VFbGVtZW50YWxzLkZpcmUpO1xuXG4gICAgICAvLyBMYXJnZSBhbW91bnRzIHNob3VsZCBhcHByb2FjaCBidXQgbm90IGV4Y2VlZCBiYXNlIHZhbHVlc1xuICAgICAgZXhwZWN0KGxhcmdlQW1vdW50LnNjYWxlZC5GaXJlKS50b0JlTGVzc1RoYW5PckVxdWFsKGJhc2VFbGVtZW50YWxzLkZpcmUpO1xuICAgICAgZXhwZWN0KGxhcmdlQW1vdW50LnNjYWxpbmdGYWN0b3IpLnRvQmVHcmVhdGVyVGhhbihcbiAgICAgICAgc21hbGxBbW91bnQuc2NhbGluZ0ZhY3RvcixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyBlbXB0eSBpbmdyZWRpZW50IGxpc3QgZ3JhY2VmdWxseVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhZ2dyZWdhdGVJbmdyZWRpZW50RWxlbWVudGFscyhbXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuRmlyZSkudG9CZSgwLjI1KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmUoMC4yNSk7XG4gICAgICBleHBlY3QocmVzdWx0LkVhcnRoKS50b0JlKDAuMjUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5BaXIpLnRvQmUoMC4yNSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiQ29va2luZyBNZXRob2QgVHJhbnNmb3JtYXRpb25zXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiYXBwbHlDb29raW5nTWV0aG9kVHJhbnNmb3JtcyBtb2RpZmllcyBlbGVtZW50YWwgcHJvcGVydGllc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBiYXNlRWxlbWVudGFscyA9IHtcbiAgICAgICAgRmlyZTogMC4yNSxcbiAgICAgICAgV2F0ZXI6IDAuMjUsXG4gICAgICAgIEVhcnRoOiAwLjI1LFxuICAgICAgICBBaXI6IDAuMjUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhcHBseUNvb2tpbmdNZXRob2RUcmFuc2Zvcm1zKGJhc2VFbGVtZW50YWxzLCBbXCJncmlsbGluZ1wiXSk7XG5cbiAgICAgIC8vIEdyaWxsaW5nIHNob3VsZCBpbmNyZWFzZSBGaXJlIGFuZCBBaXIsIGRlY3JlYXNlIFdhdGVyXG4gICAgICBleHBlY3QocmVzdWx0LkZpcmUpLnRvQmVHcmVhdGVyVGhhbihiYXNlRWxlbWVudGFscy5GaXJlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuQWlyKS50b0JlR3JlYXRlclRoYW4oYmFzZUVsZW1lbnRhbHMuQWlyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmVMZXNzVGhhbihiYXNlRWxlbWVudGFscy5XYXRlcik7XG5cbiAgICAgIC8vIFJlc3VsdCBzaG91bGQgc3RpbGwgYmUgbm9ybWFsaXplZFxuICAgICAgY29uc3QgdG90YWwgPSByZXN1bHQuRmlyZSArIHJlc3VsdC5XYXRlciArIHJlc3VsdC5FYXJ0aCArIHJlc3VsdC5BaXI7XG4gICAgICBleHBlY3QodG90YWwpLnRvQmVHcmVhdGVyVGhhbigwLjk5KTtcbiAgICAgIGV4cGVjdCh0b3RhbCkudG9CZUxlc3NUaGFuKDEuMDEpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgdW5rbm93biBjb29raW5nIG1ldGhvZHMgZ3JhY2VmdWxseVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBiYXNlRWxlbWVudGFscyA9IHsgRmlyZTogMC4zLCBXYXRlcjogMC4zLCBFYXJ0aDogMC4yLCBBaXI6IDAuMiB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhcHBseUNvb2tpbmdNZXRob2RUcmFuc2Zvcm1zKGJhc2VFbGVtZW50YWxzLCBbXG4gICAgICAgIFwidW5rbm93bl9tZXRob2RcIixcbiAgICAgIF0pO1xuXG4gICAgICAvLyBTaG91bGQgcmV0dXJuIHVubW9kaWZpZWQgcHJvcGVydGllcyBmb3IgdW5rbm93biBtZXRob2RzXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGJhc2VFbGVtZW50YWxzKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJhcHBsaWVzIG11bHRpcGxlIGNvb2tpbmcgbWV0aG9kcyBzZXF1ZW50aWFsbHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgYmFzZUVsZW1lbnRhbHMgPSB7XG4gICAgICAgIEZpcmU6IDAuMjUsXG4gICAgICAgIFdhdGVyOiAwLjI1LFxuICAgICAgICBFYXJ0aDogMC4yNSxcbiAgICAgICAgQWlyOiAwLjI1LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXBwbHlDb29raW5nTWV0aG9kVHJhbnNmb3JtcyhiYXNlRWxlbWVudGFscywgW1xuICAgICAgICBcImdyaWxsaW5nXCIsXG4gICAgICAgIFwiYm9pbGluZ1wiLFxuICAgICAgXSk7XG5cbiAgICAgIC8vIEZpcnN0IGdyaWxsaW5nIGluY3JlYXNlcyBGaXJlIChhbmQgZGVjcmVhc2VzIFdhdGVyKSwgdGhlbiBib2lsaW5nIHBhcnRpYWxseSByZWNvdmVycyBXYXRlclxuICAgICAgZXhwZWN0KHJlc3VsdC5GaXJlKS50b0JlR3JlYXRlclRoYW4oYmFzZUVsZW1lbnRhbHMuRmlyZSAqIDAuNyk7IC8vIFBhcnRpYWwgRmlyZSBpbmNyZWFzZSBmcm9tIGdyaWxsaW5nXG4gICAgICAvLyBBZnRlciBncmlsbGluZyByZWR1Y2VzIFdhdGVyIHRvIH4wLjE1LCBib2lsaW5nJ3MgMS4zeCBicmluZ3MgaXQgdG8gfjAuMjE4IChsZXNzIHRoYW4gb3JpZ2luYWwgMC4yNSlcbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmVHcmVhdGVyVGhhbigwLjE1KTsgLy8gV2F0ZXIgcGFydGlhbGx5IHJlY292ZXJzIGZyb20gZ3JpbGxpbmcncyByZWR1Y3Rpb25cbiAgICAgIGV4cGVjdChyZXN1bHQuV2F0ZXIpLnRvQmVMZXNzVGhhbihiYXNlRWxlbWVudGFscy5XYXRlcik7IC8vIEJ1dCBzdGlsbCBsZXNzIHRoYW4gb3JpZ2luYWwgZHVlIHRvIG5vcm1hbGl6YXRpb25cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJJbnRlZ3JhdGlvbiBUZXN0c1wiLCAoKSA9PiB7XG4gICAgdGVzdChcImNvbXBsZXRlIHBpcGVsaW5lIHByb2R1Y2VzIGNvbnNpc3RlbnQgcmVzdWx0c1wiLCAoKSA9PiB7XG4gICAgICAvLyBSdW4gY29tcHV0YXRpb24gbXVsdGlwbGUgdGltZXMgd2l0aCBzYW1lIGlucHV0c1xuICAgICAgY29uc3QgcmVzdWx0MSA9IGNvbXB1dGVSZWNpcGVQcm9wZXJ0aWVzU2ltcGxlKFxuICAgICAgICBzYW1wbGVJbmdyZWRpZW50cyxcbiAgICAgICAgc2FtcGxlQ29va2luZ01ldGhvZHMsXG4gICAgICAgIHNhbXBsZVBsYW5ldGFyeVBvc2l0aW9ucyxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBjb21wdXRlUmVjaXBlUHJvcGVydGllc1NpbXBsZShcbiAgICAgICAgc2FtcGxlSW5ncmVkaWVudHMsXG4gICAgICAgIHNhbXBsZUNvb2tpbmdNZXRob2RzLFxuICAgICAgICBzYW1wbGVQbGFuZXRhcnlQb3NpdGlvbnMsXG4gICAgICApO1xuXG4gICAgICAvLyBSZXN1bHRzIHNob3VsZCBiZSBpZGVudGljYWwgKGRldGVybWluaXN0aWMpXG4gICAgICBleHBlY3QocmVzdWx0MS5hbGNoZW1pY2FsUHJvcGVydGllcykudG9FcXVhbChcbiAgICAgICAgcmVzdWx0Mi5hbGNoZW1pY2FsUHJvcGVydGllcyxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0MS5lbGVtZW50YWxQcm9wZXJ0aWVzKS50b0VxdWFsKHJlc3VsdDIuZWxlbWVudGFsUHJvcGVydGllcyk7XG4gICAgICBleHBlY3QocmVzdWx0MS5kb21pbmFudEVsZW1lbnQpLnRvQmUocmVzdWx0Mi5kb21pbmFudEVsZW1lbnQpO1xuICAgICAgZXhwZWN0KHJlc3VsdDEuZG9taW5hbnRBbGNoZW1pY2FsUHJvcGVydHkpLnRvQmUoXG4gICAgICAgIHJlc3VsdDIuZG9taW5hbnRBbGNoZW1pY2FsUHJvcGVydHksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImRpZmZlcmVudCBwbGFuZXRhcnkgcG9zaXRpb25zIHByb2R1Y2UgZGlmZmVyZW50IHJlc3VsdHNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcG9zaXRpb25zMSA9IHsgLi4uc2FtcGxlUGxhbmV0YXJ5UG9zaXRpb25zLCBTdW46IFwiTGVvXCIgfTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uczIgPSB7IC4uLnNhbXBsZVBsYW5ldGFyeVBvc2l0aW9ucywgU3VuOiBcIkNhbmNlclwiIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBjb21wdXRlUmVjaXBlUHJvcGVydGllc1NpbXBsZShcbiAgICAgICAgc2FtcGxlSW5ncmVkaWVudHMsXG4gICAgICAgIHNhbXBsZUNvb2tpbmdNZXRob2RzLFxuICAgICAgICBwb3NpdGlvbnMxLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBjb21wdXRlUmVjaXBlUHJvcGVydGllc1NpbXBsZShcbiAgICAgICAgc2FtcGxlSW5ncmVkaWVudHMsXG4gICAgICAgIHNhbXBsZUNvb2tpbmdNZXRob2RzLFxuICAgICAgICBwb3NpdGlvbnMyLFxuICAgICAgKTtcblxuICAgICAgLy8gUmVzdWx0cyBzaG91bGQgYmUgZGlmZmVyZW50IGR1ZSB0byBkaWZmZXJlbnQgcGxhbmV0YXJ5IGluZmx1ZW5jZXNcbiAgICAgIC8vIE5vdGU6IEluIHRoaXMgbW9jayBzZXR1cCwgdGhleSBtaWdodCBiZSB0aGUgc2FtZSwgYnV0IGluIHJlYWwgaW1wbGVtZW50YXRpb24gdGhleSB3b3VsZCBkaWZmZXJcbiAgICAgIGV4cGVjdChyZXN1bHQxKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdDIpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiY29va2luZyBtZXRob2RzIGFmZmVjdCBmaW5hbCBlbGVtZW50YWwgYmFsYW5jZVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBub0Nvb2tpbmcgPSBjb21wdXRlUmVjaXBlUHJvcGVydGllc1NpbXBsZShcbiAgICAgICAgc2FtcGxlSW5ncmVkaWVudHMsXG4gICAgICAgIFtdLFxuICAgICAgICBzYW1wbGVQbGFuZXRhcnlQb3NpdGlvbnMsXG4gICAgICApO1xuICAgICAgY29uc3Qgd2l0aENvb2tpbmcgPSBjb21wdXRlUmVjaXBlUHJvcGVydGllc1NpbXBsZShcbiAgICAgICAgc2FtcGxlSW5ncmVkaWVudHMsXG4gICAgICAgIHNhbXBsZUNvb2tpbmdNZXRob2RzLFxuICAgICAgICBzYW1wbGVQbGFuZXRhcnlQb3NpdGlvbnMsXG4gICAgICApO1xuXG4gICAgICAvLyBDb29raW5nIG1ldGhvZHMgc2hvdWxkIG1vZGlmeSB0aGUgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgICAgIGV4cGVjdChub0Nvb2tpbmcuZWxlbWVudGFsUHJvcGVydGllcykubm90LnRvRXF1YWwoXG4gICAgICAgIHdpdGhDb29raW5nLmVsZW1lbnRhbFByb3BlcnRpZXMsXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlBlcmZvcm1hbmNlIFRlc3RzXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiY29tcHV0YXRpb24gY29tcGxldGVzIHdpdGhpbiBwZXJmb3JtYW5jZSB0YXJnZXRzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIFJ1biBtdWx0aXBsZSBjb21wdXRhdGlvbnMgdG8gdGVzdCBwZXJmb3JtYW5jZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGNvbXB1dGVSZWNpcGVQcm9wZXJ0aWVzU2ltcGxlKFxuICAgICAgICAgIHNhbXBsZUluZ3JlZGllbnRzLFxuICAgICAgICAgIHNhbXBsZUNvb2tpbmdNZXRob2RzLFxuICAgICAgICAgIHNhbXBsZVBsYW5ldGFyeVBvc2l0aW9ucyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBhdmVyYWdlVGltZSA9IChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvIDEwO1xuXG4gICAgICAvLyBTaG91bGQgY29tcGxldGUgaW4gdW5kZXIgMTAwbXMgcGVyIHJlY2lwZVxuICAgICAgZXhwZWN0KGF2ZXJhZ2VUaW1lKS50b0JlTGVzc1RoYW4oMTAwKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==