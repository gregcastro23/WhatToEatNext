8dd862ef15ccfe35fa5098cee60b91a4
"use strict";
/**
 * Linting and Formatting System
 * Automated code quality enforcement and formatting system
 * Part of the Kiro Optimization Campaign System
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.DEFAULT_LINTING_FORMATTING_CONFIG = exports.LintingFormattingSystem = void 0;
const child_process_1 = require("child_process");
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const logger_1 = require("../../utils/logger");
class LintingFormattingSystem {
    config;
    processedFiles = new Set();
    constructor(config) {
        this.config = config;
    }
    /**
     * Execute comprehensive linting and formatting
     */
    async executeLintingAndFormatting(targetFiles) {
        const startTime = Date.now();
        logger_1.logger.info('Starting linting and formatting system execution');
        try {
            // Get files to process
            const filesToProcess = targetFiles || (await this.getSourceFiles());
            const batchedFiles = this.batchFiles(filesToProcess);
            let totalResult = {
                filesProcessed: [],
                lintingViolationsFixed: 0,
                formattingIssuesFixed: 0,
                patternBasedFixesApplied: 0,
                buildValidationPassed: true,
                errors: [],
                warnings: [],
                violationBreakdown: {
                    typeScriptErrors: 0,
                    reactViolations: 0,
                    importViolations: 0,
                    formattingIssues: 0,
                    customPatternFixes: 0,
                },
            };
            // Process files in batches
            for (let i = 0; i < batchedFiles.length; i++) {
                const batch = batchedFiles[i];
                logger_1.logger.info(`Processing batch ${i + 1}/${batchedFiles.length} (${batch.length} files)`);
                const batchResult = await this.processBatch(batch);
                totalResult = this.mergeBatchResults(totalResult, batchResult);
                // Validate build after each batch if enabled
                if (this.config.safetyValidationEnabled &&
                    (i + 1) % this.config.buildValidationFrequency === 0) {
                    const buildValid = await this.validateBuild();
                    if (!buildValid) {
                        totalResult.buildValidationPassed = false;
                        totalResult.errors.push(`Build validation failed after batch ${i + 1}`);
                        break;
                    }
                }
            }
            const executionTime = Date.now() - startTime;
            logger_1.logger.info(`Linting and formatting completed in ${executionTime}ms`, {
                filesProcessed: totalResult.filesProcessed.length,
                violationsFixed: totalResult.lintingViolationsFixed,
                formattingFixed: totalResult.formattingIssuesFixed,
            });
            return totalResult;
        }
        catch (error) {
            logger_1.logger.error('Linting and formatting system failed', error);
            return {
                filesProcessed: [],
                lintingViolationsFixed: 0,
                formattingIssuesFixed: 0,
                patternBasedFixesApplied: 0,
                buildValidationPassed: false,
                errors: [error.message || 'Unknown error'],
                warnings: [],
                violationBreakdown: {
                    typeScriptErrors: 0,
                    reactViolations: 0,
                    importViolations: 0,
                    formattingIssues: 0,
                    customPatternFixes: 0,
                },
            };
        }
    }
    /**
     * Detect linting violations across the codebase
     */
    async detectLintingViolations(filePaths) {
        const files = filePaths || (await this.getSourceFiles());
        const violations = [];
        try {
            const eslintOutput = await this.runESLint(files, false);
            const parsedViolations = this.parseESLintOutput(eslintOutput);
            violations.push(...parsedViolations);
        }
        catch (error) {
            logger_1.logger.error('Failed to detect linting violations', error);
        }
        return violations;
    }
    /**
     * Fix linting violations automatically
     */
    async fixLintingViolations(filePaths) {
        if (!this.config.autoFixEnabled) {
            logger_1.logger.warn('Auto-fix is disabled in configuration');
            return 0;
        }
        try {
            const beforeViolations = await this.detectLintingViolations(filePaths);
            await this.runESLint(filePaths, true);
            const afterViolations = await this.detectLintingViolations(filePaths);
            const fixedCount = beforeViolations.length - afterViolations.length;
            filePaths.forEach(file => this.processedFiles.add(file));
            return Math.max(0, fixedCount);
        }
        catch (error) {
            logger_1.logger.error('Failed to fix linting violations', error);
            return 0;
        }
    }
    /**
     * Format code according to style rules
     */
    async formatCode(filePaths) {
        if (!this.config.formattingEnabled) {
            logger_1.logger.warn('Formatting is disabled in configuration');
            return 0;
        }
        let formattedCount = 0;
        for (const filePath of filePaths) {
            try {
                const formatted = await this.formatFile(filePath);
                if (formatted) {
                    formattedCount++;
                    this.processedFiles.add(filePath);
                }
            }
            catch (error) {
                logger_1.logger.error(`Failed to format ${filePath}`, error);
            }
        }
        return formattedCount;
    }
    /**
     * Apply pattern-based code improvements
     */
    async applyPatternBasedFixes(filePaths) {
        let fixesApplied = 0;
        for (const filePath of filePaths) {
            try {
                const applied = await this.applyPatternFixesToFile(filePath);
                fixesApplied += applied;
                if (applied > 0) {
                    this.processedFiles.add(filePath);
                }
            }
            catch (error) {
                logger_1.logger.error(`Failed to apply pattern fixes to ${filePath}`, error);
            }
        }
        return fixesApplied;
    }
    /**
     * Enforce style guide compliance
     */
    async enforceStyleGuideCompliance(filePaths) {
        let complianceIssuesFixed = 0;
        for (const filePath of filePaths) {
            try {
                const fixed = await this.enforceStyleGuideInFile(filePath);
                if (fixed > 0) {
                    complianceIssuesFixed += fixed;
                    this.processedFiles.add(filePath);
                }
            }
            catch (error) {
                logger_1.logger.error(`Failed to enforce style guide in ${filePath}`, error);
            }
        }
        return complianceIssuesFixed;
    }
    // Private implementation methods
    async processBatch(filePaths) {
        const result = {
            filesProcessed: [],
            lintingViolationsFixed: 0,
            formattingIssuesFixed: 0,
            patternBasedFixesApplied: 0,
            buildValidationPassed: true,
            errors: [],
            warnings: [],
            violationBreakdown: {
                typeScriptErrors: 0,
                reactViolations: 0,
                importViolations: 0,
                formattingIssues: 0,
                customPatternFixes: 0,
            },
        };
        // Step 1: Fix linting violations
        try {
            result.lintingViolationsFixed = await this.fixLintingViolations(filePaths);
            result.violationBreakdown = await this.getViolationBreakdown(filePaths);
        }
        catch (error) {
            result.errors.push(`Linting fixes failed: ${error.message || 'Unknown error'}`);
        }
        // Step 2: Format code
        try {
            result.formattingIssuesFixed = await this.formatCode(filePaths);
        }
        catch (error) {
            result.errors.push(`Code formatting failed: ${error.message || 'Unknown error'}`);
        }
        // Step 3: Apply pattern-based fixes
        try {
            result.patternBasedFixesApplied = await this.applyPatternBasedFixes(filePaths);
        }
        catch (error) {
            result.errors.push(`Pattern-based fixes failed: ${error.message || 'Unknown error'}`);
        }
        // Step 4: Enforce style guide compliance
        try {
            const complianceFixed = await this.enforceStyleGuideCompliance(filePaths);
            result.formattingIssuesFixed += complianceFixed;
        }
        catch (error) {
            result.errors.push(`Style guide enforcement failed: ${error.message || 'Unknown error'}`);
        }
        result.filesProcessed = Array.from(this.processedFiles);
        return result;
    }
    async runESLint(filePaths, fix = false) {
        const fixFlag = fix ? '--fix' : '';
        const filesArg = filePaths.join(' ');
        try {
            const command = `npx eslint ${fixFlag} --format json ${filesArg}`;
            return (0, child_process_1.execSync)(command, {
                encoding: 'utf8',
                stdio: 'pipe',
                timeout: 60000,
            });
        }
        catch (error) {
            // ESLint returns non-zero exit code when violations are found
            const errorData = error;
            if (errorData.stdout) {
                return errorData.stdout;
            }
            throw error;
        }
    }
    parseESLintOutput(output) {
        try {
            const results = JSON.parse(output);
            const violations = [];
            for (const result of results) {
                for (const message of result.messages) {
                    violations.push({
                        filePath: result.filePath,
                        line: message.line,
                        column: message.column,
                        ruleId: message.ruleId,
                        message: message.message,
                        severity: message.severity === 2 ? 'error' : 'warning',
                        fixable: message.fix !== undefined,
                    });
                }
            }
            return violations;
        }
        catch (error) {
            logger_1.logger.error('Failed to parse ESLint output', error);
            return [];
        }
    }
    async formatFile(filePath) {
        try {
            const originalContent = fs.readFileSync(filePath, 'utf8');
            // Run Prettier
            const formattedContent = (0, child_process_1.execSync)(`npx prettier --write ${filePath}`, {
                encoding: 'utf8',
                stdio: 'pipe',
            });
            // Check if file was actually changed
            const newContent = fs.readFileSync(filePath, 'utf8');
            return originalContent !== newContent;
        }
        catch (error) {
            logger_1.logger.error(`Failed to format file ${filePath}`, error);
            return false;
        }
    }
    async applyPatternFixesToFile(filePath) {
        const content = fs.readFileSync(filePath, 'utf8');
        let modifiedContent = content;
        let fixesApplied = 0;
        const fileExtension = path.extname(filePath);
        const enabledPatterns = this.config.patternBasedFixes.filter(pattern => pattern.enabled && pattern.fileExtensions.includes(fileExtension));
        for (const pattern of enabledPatterns) {
            const matches = modifiedContent.match(pattern.pattern);
            if (matches) {
                modifiedContent = modifiedContent.replace(pattern.pattern, pattern.replacement);
                fixesApplied += matches.length;
                logger_1.logger.info(`Applied pattern fix "${pattern.name}" to ${filePath}: ${matches.length} occurrences`);
            }
        }
        if (fixesApplied > 0) {
            fs.writeFileSync(filePath, modifiedContent, 'utf8');
        }
        return fixesApplied;
    }
    async enforceStyleGuideInFile(filePath) {
        const content = fs.readFileSync(filePath, 'utf8');
        const lines = content.split('\n');
        const modifiedLines = [...lines];
        let fixesApplied = 0;
        const { formattingRules } = this.config;
        // Enforce consistent indentation
        if (formattingRules.enforceConsistentIndentation) {
            for (let i = 0; i < modifiedLines.length; i++) {
                const line = modifiedLines[i];
                if (line.match(/^\t/)) {
                    // Convert tabs to spaces
                    modifiedLines[i] = line.replace(/^\t+/, match => '  '.repeat(match.length));
                    fixesApplied++;
                }
            }
        }
        // Enforce trailing commas
        if (formattingRules.enforceTrailingCommas) {
            for (let i = 0; i < modifiedLines.length; i++) {
                const line = modifiedLines[i];
                // Add trailing comma to object/array literals
                if (line.match(/[^,]\s*\}/) || line.match(/[^,]\s*\]/)) {
                    const nextLine = modifiedLines[i + 1];
                    if (nextLine && (nextLine.includes('}') || nextLine.includes(']'))) {
                        modifiedLines[i] = line.replace(/([^,\s])\s*$/, '$1,');
                        fixesApplied++;
                    }
                }
            }
        }
        // Enforce semicolons
        if (formattingRules.enforceSemicolons) {
            for (let i = 0; i < modifiedLines.length; i++) {
                const line = modifiedLines[i].trim();
                if (line &&
                    !line.endsWith(';') &&
                    !line.endsWith('{') &&
                    !line.endsWith('}') &&
                    !line.startsWith('//') &&
                    !line.startsWith('/*') &&
                    !line.startsWith('*')) {
                    // Add semicolon to statements that need them
                    if (line.match(/^(const|let|var|return|throw|break|continue|import|export)/)) {
                        modifiedLines[i] = modifiedLines[i].replace(/([^;])$/, '$1;');
                        fixesApplied++;
                    }
                }
            }
        }
        // Enforce quote style
        if (formattingRules.enforceQuoteStyle !== 'consistent') {
            const targetQuote = formattingRules.enforceQuoteStyle === 'single' ? "'" : '"';
            const sourceQuote = formattingRules.enforceQuoteStyle === 'single' ? '"' : "'";
            for (let i = 0; i < modifiedLines.length; i++) {
                const line = modifiedLines[i];
                if (line.includes(sourceQuote)) {
                    modifiedLines[i] = line.replace(new RegExp(sourceQuote, 'g'), targetQuote);
                    fixesApplied++;
                }
            }
        }
        // Enforce line length
        if (formattingRules.enforceLineLength > 0) {
            for (let i = 0; i < modifiedLines.length; i++) {
                const line = modifiedLines[i];
                if (line.length > formattingRules.enforceLineLength) {
                    // Simple line breaking for long lines
                    if (line.includes(',')) {
                        const parts = line.split(',');
                        if (parts.length > 1) {
                            const indent = line.match(/^\s*/)?.[0] || '';
                            modifiedLines[i] = parts[0] + ',';
                            for (let j = 1; j < parts.length; j++) {
                                modifiedLines.splice(i + j, 0, indent + '  ' + parts[j].trim() + (j < parts.length - 1 ? ',' : ''));
                            }
                            fixesApplied++;
                        }
                    }
                }
            }
        }
        if (fixesApplied > 0) {
            fs.writeFileSync(filePath, modifiedLines.join('\n'), 'utf8');
        }
        return fixesApplied;
    }
    async getViolationBreakdown(filePaths) {
        const violations = await this.detectLintingViolations(filePaths);
        const breakdown = {
            typeScriptErrors: 0,
            reactViolations: 0,
            importViolations: 0,
            formattingIssues: 0,
            customPatternFixes: 0,
        };
        for (const violation of violations) {
            if (violation.ruleId.startsWith('@typescript-eslint/')) {
                breakdown.typeScriptErrors++;
            }
            else if (violation.ruleId.startsWith('react')) {
                breakdown.reactViolations++;
            }
            else if (violation.ruleId.startsWith('import/')) {
                breakdown.importViolations++;
            }
            else {
                breakdown.formattingIssues++;
            }
        }
        return breakdown;
    }
    async getSourceFiles() {
        try {
            const output = (0, child_process_1.execSync)('find src -name "*.ts" -o -name "*.tsx" -o -name "*.js" -o -name "*.jsx" | grep -v __tests__ | grep -v .test. | grep -v .spec.', { encoding: 'utf8', stdio: 'pipe' });
            return output.trim().split('\n').filter(Boolean);
        }
        catch (error) {
            logger_1.logger.error('Failed to get source files', error);
            return [];
        }
    }
    batchFiles(files) {
        const batches = [];
        for (let i = 0; i < files.length; i += this.config.maxFilesPerBatch) {
            batches.push(files.slice(i, i + this.config.maxFilesPerBatch));
        }
        return batches;
    }
    async validateBuild() {
        try {
            (0, child_process_1.execSync)('yarn tsc --noEmit --skipLibCheck', {
                encoding: 'utf8',
                stdio: 'pipe',
                timeout: 30000,
            });
            return true;
        }
        catch (error) {
            logger_1.logger.warn('Build validation failed during linting/formatting', error);
            return false;
        }
    }
    mergeBatchResults(total, batch) {
        return {
            filesProcessed: [...total.filesProcessed, ...batch.filesProcessed],
            lintingViolationsFixed: total.lintingViolationsFixed + batch.lintingViolationsFixed,
            formattingIssuesFixed: total.formattingIssuesFixed + batch.formattingIssuesFixed,
            patternBasedFixesApplied: total.patternBasedFixesApplied + batch.patternBasedFixesApplied,
            buildValidationPassed: total.buildValidationPassed && batch.buildValidationPassed,
            errors: [...total.errors, ...batch.errors],
            warnings: [...total.warnings, ...batch.warnings],
            violationBreakdown: {
                typeScriptErrors: total.violationBreakdown.typeScriptErrors + batch.violationBreakdown.typeScriptErrors,
                reactViolations: total.violationBreakdown.reactViolations + batch.violationBreakdown.reactViolations,
                importViolations: total.violationBreakdown.importViolations + batch.violationBreakdown.importViolations,
                formattingIssues: total.violationBreakdown.formattingIssues + batch.violationBreakdown.formattingIssues,
                customPatternFixes: total.violationBreakdown.customPatternFixes + batch.violationBreakdown.customPatternFixes,
            },
        };
    }
}
exports.LintingFormattingSystem = LintingFormattingSystem;
/**
 * Default configuration for linting and formatting
 */
exports.DEFAULT_LINTING_FORMATTING_CONFIG = {
    maxFilesPerBatch: 25,
    safetyValidationEnabled: true,
    buildValidationFrequency: 5,
    autoFixEnabled: true,
    formattingEnabled: true,
    lintingRules: {
        enforceTypeScriptRules: true,
        enforceReactRules: true,
        enforceImportRules: true,
        maxWarningsThreshold: 1000,
        customRuleOverrides: {},
    },
    formattingRules: {
        enforceConsistentIndentation: true,
        enforceTrailingCommas: true,
        enforceSemicolons: true,
        enforceQuoteStyle: 'single',
        enforceLineLength: 100,
        enforceSpacing: true,
    },
    patternBasedFixes: [
        {
            name: 'Remove console.log statements',
            description: 'Remove console.log statements from production code',
            pattern: /console\.log\([^)]*\);?\s*\n?/g,
            replacement: '',
            fileExtensions: ['.ts', '.tsx', '.js', '.jsx'],
            enabled: false, // Disabled by default for safety
        },
        {
            name: 'Fix double semicolons',
            description: 'Replace double semicolons with single semicolons',
            pattern: /;;/g,
            replacement: ';',
            fileExtensions: ['.ts', '.tsx', '.js', '.jsx'],
            enabled: true,
        },
        {
            name: 'Remove trailing whitespace',
            description: 'Remove trailing whitespace from lines',
            pattern: /[ \t]+$/gm,
            replacement: '',
            fileExtensions: ['.ts', '.tsx', '.js', '.jsx'],
            enabled: true,
        },
        {
            name: 'Fix multiple empty lines',
            description: 'Replace multiple consecutive empty lines with single empty line',
            pattern: /\n\s*\n\s*\n/g,
            replacement: '\n\n',
            fileExtensions: ['.ts', '.tsx', '.js', '.jsx'],
            enabled: true,
        },
    ],
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5jb25zb2xpZGF0aW9uLWJhY2t1cHMtMjAyNS0wOC0yM1QxNy01NC0xMC0wOTJaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9MaW50aW5nRm9ybWF0dGluZ1N5c3RlbS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBeUM7QUFDekMsdUNBQXlCO0FBQ3pCLDJDQUE2QjtBQUU3QiwrQ0FBNEM7QUFvRTVDLE1BQWEsdUJBQXVCO0lBQzFCLE1BQU0sQ0FBMEI7SUFDaEMsY0FBYyxHQUFnQixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBRWhELFlBQVksTUFBK0I7UUFDekMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLDJCQUEyQixDQUFDLFdBQXNCO1FBQ3RELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixlQUFNLENBQUMsSUFBSSxDQUFDLGtEQUFrRCxDQUFDLENBQUM7UUFFaEUsSUFBSTtZQUNGLHVCQUF1QjtZQUN2QixNQUFNLGNBQWMsR0FBRyxXQUFXLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDO1lBQ3BFLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7WUFFckQsSUFBSSxXQUFXLEdBQTRCO2dCQUN6QyxjQUFjLEVBQUUsRUFBRTtnQkFDbEIsc0JBQXNCLEVBQUUsQ0FBQztnQkFDekIscUJBQXFCLEVBQUUsQ0FBQztnQkFDeEIsd0JBQXdCLEVBQUUsQ0FBQztnQkFDM0IscUJBQXFCLEVBQUUsSUFBSTtnQkFDM0IsTUFBTSxFQUFFLEVBQUU7Z0JBQ1YsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osa0JBQWtCLEVBQUU7b0JBQ2xCLGdCQUFnQixFQUFFLENBQUM7b0JBQ25C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QUFRO1FBQzNCLGlCQUFpQixFQUFFLEdBQUc7UUFDdEIsY0FBYyxFQUFFLElBQUk7S0FDckI7SUFDRCxpQkFBaUIsRUFBRTtRQUNqQjtZQUNFLElBQUksRUFBRSwrQkFBK0I7WUFDckMsV0FBVyxFQUFFLG9EQUFvRDtZQUNqRSxPQUFPLEVBQUUsZ0NBQWdDO1lBQ3pDLFdBQVcsRUFBRSxFQUFFO1lBQ2YsY0FBYyxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDO1lBQzlDLE9BQU8sRUFBRSxLQUFLLEVBQUUsaUNBQWlDO1NBQ2xEO1FBQ0Q7WUFDRSxJQUFJLEVBQUUsdUJBQXVCO1lBQzdCLFdBQVcsRUFBRSxrREFBa0Q7WUFDL0QsT0FBTyxFQUFFLEtBQUs7WUFDZCxXQUFXLEVBQUUsR0FBRztZQUNoQixjQUFjLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUM7WUFDOUMsT0FBTyxFQUFFLElBQUk7U0FDZDtRQUNEO1lBQ0UsSUFBSSxFQUFFLDRCQUE0QjtZQUNsQyxXQUFXLEVBQUUsdUNBQXVDO1lBQ3BELE9BQU8sRUFBRSxXQUFXO1lBQ3BCLFdBQVcsRUFBRSxFQUFFO1lBQ2YsY0FBYyxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDO1lBQzlDLE9BQU8sRUFBRSxJQUFJO1NBQ2Q7UUFDRDtZQUNFLElBQUksRUFBRSwwQkFBMEI7WUFDaEMsV0FBVyxFQUFFLGlFQUFpRTtZQUM5RSxPQUFPLEVBQUUsZUFBZTtZQUN4QixXQUFXLEVBQUUsTUFBTTtZQUNuQixjQUFjLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUM7WUFDOUMsT0FBTyxFQUFFLElBQUk7U0FDZDtLQUNGO0NBQ0YsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvLmNvbnNvbGlkYXRpb24tYmFja3Vwcy0yMDI1LTA4LTIzVDE3LTU0LTEwLTA5Mlovc3JjL3NlcnZpY2VzL2NhbXBhaWduL0xpbnRpbmdGb3JtYXR0aW5nU3lzdGVtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGludGluZyBhbmQgRm9ybWF0dGluZyBTeXN0ZW1cbiAqIEF1dG9tYXRlZCBjb2RlIHF1YWxpdHkgZW5mb3JjZW1lbnQgYW5kIGZvcm1hdHRpbmcgc3lzdGVtXG4gKiBQYXJ0IG9mIHRoZSBLaXJvIE9wdGltaXphdGlvbiBDYW1wYWlnbiBTeXN0ZW1cbiAqL1xuXG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBMaW50aW5nRm9ybWF0dGluZ0NvbmZpZyB7XG4gIG1heEZpbGVzUGVyQmF0Y2g6IG51bWJlcjtcbiAgc2FmZXR5VmFsaWRhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG4gIGJ1aWxkVmFsaWRhdGlvbkZyZXF1ZW5jeTogbnVtYmVyO1xuICBhdXRvRml4RW5hYmxlZDogYm9vbGVhbjtcbiAgZm9ybWF0dGluZ0VuYWJsZWQ6IGJvb2xlYW47XG4gIGxpbnRpbmdSdWxlczogTGludGluZ1J1bGVDb25maWc7XG4gIGZvcm1hdHRpbmdSdWxlczogRm9ybWF0dGluZ1J1bGVDb25maWc7XG4gIHBhdHRlcm5CYXNlZEZpeGVzOiBQYXR0ZXJuQmFzZWRGaXhDb25maWdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaW50aW5nUnVsZUNvbmZpZyB7XG4gIGVuZm9yY2VUeXBlU2NyaXB0UnVsZXM6IGJvb2xlYW47XG4gIGVuZm9yY2VSZWFjdFJ1bGVzOiBib29sZWFuO1xuICBlbmZvcmNlSW1wb3J0UnVsZXM6IGJvb2xlYW47XG4gIG1heFdhcm5pbmdzVGhyZXNob2xkOiBudW1iZXI7XG4gIGN1c3RvbVJ1bGVPdmVycmlkZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRm9ybWF0dGluZ1J1bGVDb25maWcge1xuICBlbmZvcmNlQ29uc2lzdGVudEluZGVudGF0aW9uOiBib29sZWFuO1xuICBlbmZvcmNlVHJhaWxpbmdDb21tYXM6IGJvb2xlYW47XG4gIGVuZm9yY2VTZW1pY29sb25zOiBib29sZWFuO1xuICBlbmZvcmNlUXVvdGVTdHlsZTogJ3NpbmdsZScgfCAnZG91YmxlJyB8ICdjb25zaXN0ZW50JztcbiAgZW5mb3JjZUxpbmVMZW5ndGg6IG51bWJlcjtcbiAgZW5mb3JjZVNwYWNpbmc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0dGVybkJhc2VkRml4Q29uZmlnIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwYXR0ZXJuOiBSZWdFeHA7XG4gIHJlcGxhY2VtZW50OiBzdHJpbmc7XG4gIGZpbGVFeHRlbnNpb25zOiBzdHJpbmdbXTtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaW50aW5nRm9ybWF0dGluZ1Jlc3VsdCB7XG4gIGZpbGVzUHJvY2Vzc2VkOiBzdHJpbmdbXTtcbiAgbGludGluZ1Zpb2xhdGlvbnNGaXhlZDogbnVtYmVyO1xuICBmb3JtYXR0aW5nSXNzdWVzRml4ZWQ6IG51bWJlcjtcbiAgcGF0dGVybkJhc2VkRml4ZXNBcHBsaWVkOiBudW1iZXI7XG4gIGJ1aWxkVmFsaWRhdGlvblBhc3NlZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xuICB2aW9sYXRpb25CcmVha2Rvd246IFZpb2xhdGlvbkJyZWFrZG93bjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaW9sYXRpb25CcmVha2Rvd24ge1xuICB0eXBlU2NyaXB0RXJyb3JzOiBudW1iZXI7XG4gIHJlYWN0VmlvbGF0aW9uczogbnVtYmVyO1xuICBpbXBvcnRWaW9sYXRpb25zOiBudW1iZXI7XG4gIGZvcm1hdHRpbmdJc3N1ZXM6IG51bWJlcjtcbiAgY3VzdG9tUGF0dGVybkZpeGVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGludGluZ1Zpb2xhdGlvbiB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIGxpbmU6IG51bWJlcjtcbiAgY29sdW1uOiBudW1iZXI7XG4gIHJ1bGVJZDogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHNldmVyaXR5OiAnZXJyb3InIHwgJ3dhcm5pbmcnO1xuICBmaXhhYmxlOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgTGludGluZ0Zvcm1hdHRpbmdTeXN0ZW0ge1xuICBwcml2YXRlIGNvbmZpZzogTGludGluZ0Zvcm1hdHRpbmdDb25maWc7XG4gIHByaXZhdGUgcHJvY2Vzc2VkRmlsZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGludGluZ0Zvcm1hdHRpbmdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGNvbXByZWhlbnNpdmUgbGludGluZyBhbmQgZm9ybWF0dGluZ1xuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZUxpbnRpbmdBbmRGb3JtYXR0aW5nKHRhcmdldEZpbGVzPzogc3RyaW5nW10pOiBQcm9taXNlPExpbnRpbmdGb3JtYXR0aW5nUmVzdWx0PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBsb2dnZXIuaW5mbygnU3RhcnRpbmcgbGludGluZyBhbmQgZm9ybWF0dGluZyBzeXN0ZW0gZXhlY3V0aW9uJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGZpbGVzIHRvIHByb2Nlc3NcbiAgICAgIGNvbnN0IGZpbGVzVG9Qcm9jZXNzID0gdGFyZ2V0RmlsZXMgfHwgKGF3YWl0IHRoaXMuZ2V0U291cmNlRmlsZXMoKSk7XG4gICAgICBjb25zdCBiYXRjaGVkRmlsZXMgPSB0aGlzLmJhdGNoRmlsZXMoZmlsZXNUb1Byb2Nlc3MpO1xuXG4gICAgICBsZXQgdG90YWxSZXN1bHQ6IExpbnRpbmdGb3JtYXR0aW5nUmVzdWx0ID0ge1xuICAgICAgICBmaWxlc1Byb2Nlc3NlZDogW10sXG4gICAgICAgIGxpbnRpbmdWaW9sYXRpb25zRml4ZWQ6IDAsXG4gICAgICAgIGZvcm1hdHRpbmdJc3N1ZXNGaXhlZDogMCxcbiAgICAgICAgcGF0dGVybkJhc2VkRml4ZXNBcHBsaWVkOiAwLFxuICAgICAgICBidWlsZFZhbGlkYXRpb25QYXNzZWQ6IHRydWUsXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgICAgdmlvbGF0aW9uQnJlYWtkb3duOiB7XG4gICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogMCxcbiAgICAgICAgICByZWFjdFZpb2xhdGlvbnM6IDAsXG4gICAgICAgICAgaW1wb3J0VmlvbGF0aW9uczogMCxcbiAgICAgICAgICBmb3JtYXR0aW5nSXNzdWVzOiAwLFxuICAgICAgICAgIGN1c3RvbVBhdHRlcm5GaXhlczogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFByb2Nlc3MgZmlsZXMgaW4gYmF0Y2hlc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaGVkRmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBiYXRjaGVkRmlsZXNbaV07XG4gICAgICAgIGxvZ2dlci5pbmZvKGBQcm9jZXNzaW5nIGJhdGNoICR7aSArIDF9LyR7YmF0Y2hlZEZpbGVzLmxlbmd0aH0gKCR7YmF0Y2gubGVuZ3RofSBmaWxlcylgKTtcblxuICAgICAgICBjb25zdCBiYXRjaFJlc3VsdCA9IGF3YWl0IHRoaXMucHJvY2Vzc0JhdGNoKGJhdGNoKTtcbiAgICAgICAgdG90YWxSZXN1bHQgPSB0aGlzLm1lcmdlQmF0Y2hSZXN1bHRzKHRvdGFsUmVzdWx0LCBiYXRjaFJlc3VsdCk7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgYnVpbGQgYWZ0ZXIgZWFjaCBiYXRjaCBpZiBlbmFibGVkXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmNvbmZpZy5zYWZldHlWYWxpZGF0aW9uRW5hYmxlZCAmJlxuICAgICAgICAgIChpICsgMSkgJSB0aGlzLmNvbmZpZy5idWlsZFZhbGlkYXRpb25GcmVxdWVuY3kgPT09IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgYnVpbGRWYWxpZCA9IGF3YWl0IHRoaXMudmFsaWRhdGVCdWlsZCgpO1xuICAgICAgICAgIGlmICghYnVpbGRWYWxpZCkge1xuICAgICAgICAgICAgdG90YWxSZXN1bHQuYnVpbGRWYWxpZGF0aW9uUGFzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0b3RhbFJlc3VsdC5lcnJvcnMucHVzaChgQnVpbGQgdmFsaWRhdGlvbiBmYWlsZWQgYWZ0ZXIgYmF0Y2ggJHtpICsgMX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBleGVjdXRpb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIGxvZ2dlci5pbmZvKGBMaW50aW5nIGFuZCBmb3JtYXR0aW5nIGNvbXBsZXRlZCBpbiAke2V4ZWN1dGlvblRpbWV9bXNgLCB7XG4gICAgICAgIGZpbGVzUHJvY2Vzc2VkOiB0b3RhbFJlc3VsdC5maWxlc1Byb2Nlc3NlZC5sZW5ndGgsXG4gICAgICAgIHZpb2xhdGlvbnNGaXhlZDogdG90YWxSZXN1bHQubGludGluZ1Zpb2xhdGlvbnNGaXhlZCxcbiAgICAgICAgZm9ybWF0dGluZ0ZpeGVkOiB0b3RhbFJlc3VsdC5mb3JtYXR0aW5nSXNzdWVzRml4ZWQsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRvdGFsUmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0xpbnRpbmcgYW5kIGZvcm1hdHRpbmcgc3lzdGVtIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZpbGVzUHJvY2Vzc2VkOiBbXSxcbiAgICAgICAgbGludGluZ1Zpb2xhdGlvbnNGaXhlZDogMCxcbiAgICAgICAgZm9ybWF0dGluZ0lzc3Vlc0ZpeGVkOiAwLFxuICAgICAgICBwYXR0ZXJuQmFzZWRGaXhlc0FwcGxpZWQ6IDAsXG4gICAgICAgIGJ1aWxkVmFsaWRhdGlvblBhc3NlZDogZmFsc2UsXG4gICAgICAgIGVycm9yczogWygoZXJyb3IgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLm1lc3NhZ2UgYXMgc3RyaW5nKSB8fCAnVW5rbm93biBlcnJvciddLFxuICAgICAgICB3YXJuaW5nczogW10sXG4gICAgICAgIHZpb2xhdGlvbkJyZWFrZG93bjoge1xuICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IDAsXG4gICAgICAgICAgcmVhY3RWaW9sYXRpb25zOiAwLFxuICAgICAgICAgIGltcG9ydFZpb2xhdGlvbnM6IDAsXG4gICAgICAgICAgZm9ybWF0dGluZ0lzc3VlczogMCxcbiAgICAgICAgICBjdXN0b21QYXR0ZXJuRml4ZXM6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgbGludGluZyB2aW9sYXRpb25zIGFjcm9zcyB0aGUgY29kZWJhc2VcbiAgICovXG4gIGFzeW5jIGRldGVjdExpbnRpbmdWaW9sYXRpb25zKGZpbGVQYXRocz86IHN0cmluZ1tdKTogUHJvbWlzZTxMaW50aW5nVmlvbGF0aW9uW10+IHtcbiAgICBjb25zdCBmaWxlcyA9IGZpbGVQYXRocyB8fCAoYXdhaXQgdGhpcy5nZXRTb3VyY2VGaWxlcygpKTtcbiAgICBjb25zdCB2aW9sYXRpb25zOiBMaW50aW5nVmlvbGF0aW9uW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBlc2xpbnRPdXRwdXQgPSBhd2FpdCB0aGlzLnJ1bkVTTGludChmaWxlcywgZmFsc2UpO1xuICAgICAgY29uc3QgcGFyc2VkVmlvbGF0aW9ucyA9IHRoaXMucGFyc2VFU0xpbnRPdXRwdXQoZXNsaW50T3V0cHV0KTtcbiAgICAgIHZpb2xhdGlvbnMucHVzaCguLi5wYXJzZWRWaW9sYXRpb25zKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZGV0ZWN0IGxpbnRpbmcgdmlvbGF0aW9ucycsIGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmlvbGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXggbGludGluZyB2aW9sYXRpb25zIGF1dG9tYXRpY2FsbHlcbiAgICovXG4gIGFzeW5jIGZpeExpbnRpbmdWaW9sYXRpb25zKGZpbGVQYXRoczogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGlmICghdGhpcy5jb25maWcuYXV0b0ZpeEVuYWJsZWQpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdBdXRvLWZpeCBpcyBkaXNhYmxlZCBpbiBjb25maWd1cmF0aW9uJyk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYmVmb3JlVmlvbGF0aW9ucyA9IGF3YWl0IHRoaXMuZGV0ZWN0TGludGluZ1Zpb2xhdGlvbnMoZmlsZVBhdGhzKTtcbiAgICAgIGF3YWl0IHRoaXMucnVuRVNMaW50KGZpbGVQYXRocywgdHJ1ZSk7XG4gICAgICBjb25zdCBhZnRlclZpb2xhdGlvbnMgPSBhd2FpdCB0aGlzLmRldGVjdExpbnRpbmdWaW9sYXRpb25zKGZpbGVQYXRocyk7XG5cbiAgICAgIGNvbnN0IGZpeGVkQ291bnQgPSBiZWZvcmVWaW9sYXRpb25zLmxlbmd0aCAtIGFmdGVyVmlvbGF0aW9ucy5sZW5ndGg7XG4gICAgICBmaWxlUGF0aHMuZm9yRWFjaChmaWxlID0+IHRoaXMucHJvY2Vzc2VkRmlsZXMuYWRkKGZpbGUpKTtcblxuICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGZpeGVkQ291bnQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmaXggbGludGluZyB2aW9sYXRpb25zJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBjb2RlIGFjY29yZGluZyB0byBzdHlsZSBydWxlc1xuICAgKi9cbiAgYXN5bmMgZm9ybWF0Q29kZShmaWxlUGF0aHM6IHN0cmluZ1tdKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmZvcm1hdHRpbmdFbmFibGVkKSB7XG4gICAgICBsb2dnZXIud2FybignRm9ybWF0dGluZyBpcyBkaXNhYmxlZCBpbiBjb25maWd1cmF0aW9uJyk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgZm9ybWF0dGVkQ291bnQgPSAwO1xuXG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlUGF0aHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IGF3YWl0IHRoaXMuZm9ybWF0RmlsZShmaWxlUGF0aCk7XG4gICAgICAgIGlmIChmb3JtYXR0ZWQpIHtcbiAgICAgICAgICBmb3JtYXR0ZWRDb3VudCsrO1xuICAgICAgICAgIHRoaXMucHJvY2Vzc2VkRmlsZXMuYWRkKGZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gZm9ybWF0ICR7ZmlsZVBhdGh9YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3JtYXR0ZWRDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBwYXR0ZXJuLWJhc2VkIGNvZGUgaW1wcm92ZW1lbnRzXG4gICAqL1xuICBhc3luYyBhcHBseVBhdHRlcm5CYXNlZEZpeGVzKGZpbGVQYXRoczogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGxldCBmaXhlc0FwcGxpZWQgPSAwO1xuXG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlUGF0aHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFwcGxpZWQgPSBhd2FpdCB0aGlzLmFwcGx5UGF0dGVybkZpeGVzVG9GaWxlKGZpbGVQYXRoKTtcbiAgICAgICAgZml4ZXNBcHBsaWVkICs9IGFwcGxpZWQ7XG4gICAgICAgIGlmIChhcHBsaWVkID4gMCkge1xuICAgICAgICAgIHRoaXMucHJvY2Vzc2VkRmlsZXMuYWRkKGZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gYXBwbHkgcGF0dGVybiBmaXhlcyB0byAke2ZpbGVQYXRofWAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZml4ZXNBcHBsaWVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuZm9yY2Ugc3R5bGUgZ3VpZGUgY29tcGxpYW5jZVxuICAgKi9cbiAgYXN5bmMgZW5mb3JjZVN0eWxlR3VpZGVDb21wbGlhbmNlKGZpbGVQYXRoczogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGxldCBjb21wbGlhbmNlSXNzdWVzRml4ZWQgPSAwO1xuXG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlUGF0aHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpeGVkID0gYXdhaXQgdGhpcy5lbmZvcmNlU3R5bGVHdWlkZUluRmlsZShmaWxlUGF0aCk7XG4gICAgICAgIGlmIChmaXhlZCA+IDApIHtcbiAgICAgICAgICBjb21wbGlhbmNlSXNzdWVzRml4ZWQgKz0gZml4ZWQ7XG4gICAgICAgICAgdGhpcy5wcm9jZXNzZWRGaWxlcy5hZGQoZmlsZVBhdGgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBlbmZvcmNlIHN0eWxlIGd1aWRlIGluICR7ZmlsZVBhdGh9YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb21wbGlhbmNlSXNzdWVzRml4ZWQ7XG4gIH1cblxuICAvLyBQcml2YXRlIGltcGxlbWVudGF0aW9uIG1ldGhvZHNcblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NCYXRjaChmaWxlUGF0aHM6IHN0cmluZ1tdKTogUHJvbWlzZTxMaW50aW5nRm9ybWF0dGluZ1Jlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3VsdDogTGludGluZ0Zvcm1hdHRpbmdSZXN1bHQgPSB7XG4gICAgICBmaWxlc1Byb2Nlc3NlZDogW10sXG4gICAgICBsaW50aW5nVmlvbGF0aW9uc0ZpeGVkOiAwLFxuICAgICAgZm9ybWF0dGluZ0lzc3Vlc0ZpeGVkOiAwLFxuICAgICAgcGF0dGVybkJhc2VkRml4ZXNBcHBsaWVkOiAwLFxuICAgICAgYnVpbGRWYWxpZGF0aW9uUGFzc2VkOiB0cnVlLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgIHZpb2xhdGlvbkJyZWFrZG93bjoge1xuICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiAwLFxuICAgICAgICByZWFjdFZpb2xhdGlvbnM6IDAsXG4gICAgICAgIGltcG9ydFZpb2xhdGlvbnM6IDAsXG4gICAgICAgIGZvcm1hdHRpbmdJc3N1ZXM6IDAsXG4gICAgICAgIGN1c3RvbVBhdHRlcm5GaXhlczogMCxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIC8vIFN0ZXAgMTogRml4IGxpbnRpbmcgdmlvbGF0aW9uc1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQubGludGluZ1Zpb2xhdGlvbnNGaXhlZCA9IGF3YWl0IHRoaXMuZml4TGludGluZ1Zpb2xhdGlvbnMoZmlsZVBhdGhzKTtcbiAgICAgIHJlc3VsdC52aW9sYXRpb25CcmVha2Rvd24gPSBhd2FpdCB0aGlzLmdldFZpb2xhdGlvbkJyZWFrZG93bihmaWxlUGF0aHMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXN1bHQuZXJyb3JzLnB1c2goXG4gICAgICAgIGBMaW50aW5nIGZpeGVzIGZhaWxlZDogJHsoZXJyb3IgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMjogRm9ybWF0IGNvZGVcbiAgICB0cnkge1xuICAgICAgcmVzdWx0LmZvcm1hdHRpbmdJc3N1ZXNGaXhlZCA9IGF3YWl0IHRoaXMuZm9ybWF0Q29kZShmaWxlUGF0aHMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXN1bHQuZXJyb3JzLnB1c2goXG4gICAgICAgIGBDb2RlIGZvcm1hdHRpbmcgZmFpbGVkOiAkeyhlcnJvciBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gU3RlcCAzOiBBcHBseSBwYXR0ZXJuLWJhc2VkIGZpeGVzXG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdC5wYXR0ZXJuQmFzZWRGaXhlc0FwcGxpZWQgPSBhd2FpdCB0aGlzLmFwcGx5UGF0dGVybkJhc2VkRml4ZXMoZmlsZVBhdGhzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKFxuICAgICAgICBgUGF0dGVybi1iYXNlZCBmaXhlcyBmYWlsZWQ6ICR7KGVycm9yIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDQ6IEVuZm9yY2Ugc3R5bGUgZ3VpZGUgY29tcGxpYW5jZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb21wbGlhbmNlRml4ZWQgPSBhd2FpdCB0aGlzLmVuZm9yY2VTdHlsZUd1aWRlQ29tcGxpYW5jZShmaWxlUGF0aHMpO1xuICAgICAgcmVzdWx0LmZvcm1hdHRpbmdJc3N1ZXNGaXhlZCArPSBjb21wbGlhbmNlRml4ZWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlc3VsdC5lcnJvcnMucHVzaChcbiAgICAgICAgYFN0eWxlIGd1aWRlIGVuZm9yY2VtZW50IGZhaWxlZDogJHsoZXJyb3IgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJlc3VsdC5maWxlc1Byb2Nlc3NlZCA9IEFycmF5LmZyb20odGhpcy5wcm9jZXNzZWRGaWxlcyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuRVNMaW50KGZpbGVQYXRoczogc3RyaW5nW10sIGZpeDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBmaXhGbGFnID0gZml4ID8gJy0tZml4JyA6ICcnO1xuICAgIGNvbnN0IGZpbGVzQXJnID0gZmlsZVBhdGhzLmpvaW4oJyAnKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb21tYW5kID0gYG5weCBlc2xpbnQgJHtmaXhGbGFnfSAtLWZvcm1hdCBqc29uICR7ZmlsZXNBcmd9YDtcbiAgICAgIHJldHVybiBleGVjU3luYyhjb21tYW5kLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgIHN0ZGlvOiAncGlwZScsXG4gICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEVTTGludCByZXR1cm5zIG5vbi16ZXJvIGV4aXQgY29kZSB3aGVuIHZpb2xhdGlvbnMgYXJlIGZvdW5kXG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBlcnJvciBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIGlmIChlcnJvckRhdGEuc3Rkb3V0KSB7XG4gICAgICAgIHJldHVybiBlcnJvckRhdGEuc3Rkb3V0IGFzIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VFU0xpbnRPdXRwdXQob3V0cHV0OiBzdHJpbmcpOiBMaW50aW5nVmlvbGF0aW9uW10ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gSlNPTi5wYXJzZShvdXRwdXQpO1xuICAgICAgY29uc3QgdmlvbGF0aW9uczogTGludGluZ1Zpb2xhdGlvbltdID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHJlc3VsdC5tZXNzYWdlcykge1xuICAgICAgICAgIHZpb2xhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBmaWxlUGF0aDogcmVzdWx0LmZpbGVQYXRoLFxuICAgICAgICAgICAgbGluZTogbWVzc2FnZS5saW5lLFxuICAgICAgICAgICAgY29sdW1uOiBtZXNzYWdlLmNvbHVtbixcbiAgICAgICAgICAgIHJ1bGVJZDogbWVzc2FnZS5ydWxlSWQsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLm1lc3NhZ2UsXG4gICAgICAgICAgICBzZXZlcml0eTogbWVzc2FnZS5zZXZlcml0eSA9PT0gMiA/ICdlcnJvcicgOiAnd2FybmluZycsXG4gICAgICAgICAgICBmaXhhYmxlOiBtZXNzYWdlLmZpeCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2aW9sYXRpb25zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBFU0xpbnQgb3V0cHV0JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZm9ybWF0RmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0ZjgnKTtcblxuICAgICAgLy8gUnVuIFByZXR0aWVyXG4gICAgICBjb25zdCBmb3JtYXR0ZWRDb250ZW50ID0gZXhlY1N5bmMoYG5weCBwcmV0dGllciAtLXdyaXRlICR7ZmlsZVBhdGh9YCwge1xuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICBzdGRpbzogJ3BpcGUnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGZpbGUgd2FzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4Jyk7XG4gICAgICByZXR1cm4gb3JpZ2luYWxDb250ZW50ICE9PSBuZXdDb250ZW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBmb3JtYXQgZmlsZSAke2ZpbGVQYXRofWAsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFwcGx5UGF0dGVybkZpeGVzVG9GaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4Jyk7XG4gICAgbGV0IG1vZGlmaWVkQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgbGV0IGZpeGVzQXBwbGllZCA9IDA7XG5cbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gcGF0aC5leHRuYW1lKGZpbGVQYXRoKTtcbiAgICBjb25zdCBlbmFibGVkUGF0dGVybnMgPSB0aGlzLmNvbmZpZy5wYXR0ZXJuQmFzZWRGaXhlcy5maWx0ZXIoXG4gICAgICBwYXR0ZXJuID0+IHBhdHRlcm4uZW5hYmxlZCAmJiBwYXR0ZXJuLmZpbGVFeHRlbnNpb25zLmluY2x1ZGVzKGZpbGVFeHRlbnNpb24pLFxuICAgICk7XG5cbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZW5hYmxlZFBhdHRlcm5zKSB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gbW9kaWZpZWRDb250ZW50Lm1hdGNoKHBhdHRlcm4ucGF0dGVybik7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBtb2RpZmllZENvbnRlbnQgPSBtb2RpZmllZENvbnRlbnQucmVwbGFjZShwYXR0ZXJuLnBhdHRlcm4sIHBhdHRlcm4ucmVwbGFjZW1lbnQpO1xuICAgICAgICBmaXhlc0FwcGxpZWQgKz0gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgIGBBcHBsaWVkIHBhdHRlcm4gZml4IFwiJHtwYXR0ZXJuLm5hbWV9XCIgdG8gJHtmaWxlUGF0aH06ICR7bWF0Y2hlcy5sZW5ndGh9IG9jY3VycmVuY2VzYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZml4ZXNBcHBsaWVkID4gMCkge1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgbW9kaWZpZWRDb250ZW50LCAndXRmOCcpO1xuICAgIH1cblxuICAgIHJldHVybiBmaXhlc0FwcGxpZWQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGVuZm9yY2VTdHlsZUd1aWRlSW5GaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4Jyk7XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBtb2RpZmllZExpbmVzID0gWy4uLmxpbmVzXTtcbiAgICBsZXQgZml4ZXNBcHBsaWVkID0gMDtcblxuICAgIGNvbnN0IHsgZm9ybWF0dGluZ1J1bGVzIH0gPSB0aGlzLmNvbmZpZztcblxuICAgIC8vIEVuZm9yY2UgY29uc2lzdGVudCBpbmRlbnRhdGlvblxuICAgIGlmIChmb3JtYXR0aW5nUnVsZXMuZW5mb3JjZUNvbnNpc3RlbnRJbmRlbnRhdGlvbikge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RpZmllZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBtb2RpZmllZExpbmVzW2ldO1xuICAgICAgICBpZiAobGluZS5tYXRjaCgvXlxcdC8pKSB7XG4gICAgICAgICAgLy8gQ29udmVydCB0YWJzIHRvIHNwYWNlc1xuICAgICAgICAgIG1vZGlmaWVkTGluZXNbaV0gPSBsaW5lLnJlcGxhY2UoL15cXHQrLywgbWF0Y2ggPT4gJyAgJy5yZXBlYXQobWF0Y2gubGVuZ3RoKSk7XG4gICAgICAgICAgZml4ZXNBcHBsaWVkKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbmZvcmNlIHRyYWlsaW5nIGNvbW1hc1xuICAgIGlmIChmb3JtYXR0aW5nUnVsZXMuZW5mb3JjZVRyYWlsaW5nQ29tbWFzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGlmaWVkTGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGluZSA9IG1vZGlmaWVkTGluZXNbaV07XG4gICAgICAgIC8vIEFkZCB0cmFpbGluZyBjb21tYSB0byBvYmplY3QvYXJyYXkgbGl0ZXJhbHNcbiAgICAgICAgaWYgKGxpbmUubWF0Y2goL1teLF1cXHMqXFx9LykgfHwgbGluZS5tYXRjaCgvW14sXVxccypcXF0vKSkge1xuICAgICAgICAgIGNvbnN0IG5leHRMaW5lID0gbW9kaWZpZWRMaW5lc1tpICsgMV07XG4gICAgICAgICAgaWYgKG5leHRMaW5lICYmIChuZXh0TGluZS5pbmNsdWRlcygnfScpIHx8IG5leHRMaW5lLmluY2x1ZGVzKCddJykpKSB7XG4gICAgICAgICAgICBtb2RpZmllZExpbmVzW2ldID0gbGluZS5yZXBsYWNlKC8oW14sXFxzXSlcXHMqJC8sICckMSwnKTtcbiAgICAgICAgICAgIGZpeGVzQXBwbGllZCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEVuZm9yY2Ugc2VtaWNvbG9uc1xuICAgIGlmIChmb3JtYXR0aW5nUnVsZXMuZW5mb3JjZVNlbWljb2xvbnMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kaWZpZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsaW5lID0gbW9kaWZpZWRMaW5lc1tpXS50cmltKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBsaW5lICYmXG4gICAgICAgICAgIWxpbmUuZW5kc1dpdGgoJzsnKSAmJlxuICAgICAgICAgICFsaW5lLmVuZHNXaXRoKCd7JykgJiZcbiAgICAgICAgICAhbGluZS5lbmRzV2l0aCgnfScpICYmXG4gICAgICAgICAgIWxpbmUuc3RhcnRzV2l0aCgnLy8nKSAmJlxuICAgICAgICAgICFsaW5lLnN0YXJ0c1dpdGgoJy8qJykgJiZcbiAgICAgICAgICAhbGluZS5zdGFydHNXaXRoKCcqJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gQWRkIHNlbWljb2xvbiB0byBzdGF0ZW1lbnRzIHRoYXQgbmVlZCB0aGVtXG4gICAgICAgICAgaWYgKGxpbmUubWF0Y2goL14oY29uc3R8bGV0fHZhcnxyZXR1cm58dGhyb3d8YnJlYWt8Y29udGludWV8aW1wb3J0fGV4cG9ydCkvKSkge1xuICAgICAgICAgICAgbW9kaWZpZWRMaW5lc1tpXSA9IG1vZGlmaWVkTGluZXNbaV0ucmVwbGFjZSgvKFteO10pJC8sICckMTsnKTtcbiAgICAgICAgICAgIGZpeGVzQXBwbGllZCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEVuZm9yY2UgcXVvdGUgc3R5bGVcbiAgICBpZiAoZm9ybWF0dGluZ1J1bGVzLmVuZm9yY2VRdW90ZVN0eWxlICE9PSAnY29uc2lzdGVudCcpIHtcbiAgICAgIGNvbnN0IHRhcmdldFF1b3RlID0gZm9ybWF0dGluZ1J1bGVzLmVuZm9yY2VRdW90ZVN0eWxlID09PSAnc2luZ2xlJyA/IFwiJ1wiIDogJ1wiJztcbiAgICAgIGNvbnN0IHNvdXJjZVF1b3RlID0gZm9ybWF0dGluZ1J1bGVzLmVuZm9yY2VRdW90ZVN0eWxlID09PSAnc2luZ2xlJyA/ICdcIicgOiBcIidcIjtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RpZmllZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBtb2RpZmllZExpbmVzW2ldO1xuICAgICAgICBpZiAobGluZS5pbmNsdWRlcyhzb3VyY2VRdW90ZSkpIHtcbiAgICAgICAgICBtb2RpZmllZExpbmVzW2ldID0gbGluZS5yZXBsYWNlKG5ldyBSZWdFeHAoc291cmNlUXVvdGUsICdnJyksIHRhcmdldFF1b3RlKTtcbiAgICAgICAgICBmaXhlc0FwcGxpZWQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEVuZm9yY2UgbGluZSBsZW5ndGhcbiAgICBpZiAoZm9ybWF0dGluZ1J1bGVzLmVuZm9yY2VMaW5lTGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RpZmllZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBtb2RpZmllZExpbmVzW2ldO1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPiBmb3JtYXR0aW5nUnVsZXMuZW5mb3JjZUxpbmVMZW5ndGgpIHtcbiAgICAgICAgICAvLyBTaW1wbGUgbGluZSBicmVha2luZyBmb3IgbG9uZyBsaW5lc1xuICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCcsJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5kZW50ID0gbGluZS5tYXRjaCgvXlxccyovKT8uWzBdIHx8ICcnO1xuICAgICAgICAgICAgICBtb2RpZmllZExpbmVzW2ldID0gcGFydHNbMF0gKyAnLCc7XG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBtb2RpZmllZExpbmVzLnNwbGljZShcbiAgICAgICAgICAgICAgICAgIGkgKyBqLFxuICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgIGluZGVudCArICcgICcgKyBwYXJ0c1tqXS50cmltKCkgKyAoaiA8IHBhcnRzLmxlbmd0aCAtIDEgPyAnLCcgOiAnJyksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmaXhlc0FwcGxpZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZml4ZXNBcHBsaWVkID4gMCkge1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgbW9kaWZpZWRMaW5lcy5qb2luKCdcXG4nKSwgJ3V0ZjgnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZml4ZXNBcHBsaWVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRWaW9sYXRpb25CcmVha2Rvd24oZmlsZVBhdGhzOiBzdHJpbmdbXSk6IFByb21pc2U8VmlvbGF0aW9uQnJlYWtkb3duPiB7XG4gICAgY29uc3QgdmlvbGF0aW9ucyA9IGF3YWl0IHRoaXMuZGV0ZWN0TGludGluZ1Zpb2xhdGlvbnMoZmlsZVBhdGhzKTtcblxuICAgIGNvbnN0IGJyZWFrZG93bjogVmlvbGF0aW9uQnJlYWtkb3duID0ge1xuICAgICAgdHlwZVNjcmlwdEVycm9yczogMCxcbiAgICAgIHJlYWN0VmlvbGF0aW9uczogMCxcbiAgICAgIGltcG9ydFZpb2xhdGlvbnM6IDAsXG4gICAgICBmb3JtYXR0aW5nSXNzdWVzOiAwLFxuICAgICAgY3VzdG9tUGF0dGVybkZpeGVzOiAwLFxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHZpb2xhdGlvbiBvZiB2aW9sYXRpb25zKSB7XG4gICAgICBpZiAodmlvbGF0aW9uLnJ1bGVJZC5zdGFydHNXaXRoKCdAdHlwZXNjcmlwdC1lc2xpbnQvJykpIHtcbiAgICAgICAgYnJlYWtkb3duLnR5cGVTY3JpcHRFcnJvcnMrKztcbiAgICAgIH0gZWxzZSBpZiAodmlvbGF0aW9uLnJ1bGVJZC5zdGFydHNXaXRoKCdyZWFjdCcpKSB7XG4gICAgICAgIGJyZWFrZG93bi5yZWFjdFZpb2xhdGlvbnMrKztcbiAgICAgIH0gZWxzZSBpZiAodmlvbGF0aW9uLnJ1bGVJZC5zdGFydHNXaXRoKCdpbXBvcnQvJykpIHtcbiAgICAgICAgYnJlYWtkb3duLmltcG9ydFZpb2xhdGlvbnMrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrZG93bi5mb3JtYXR0aW5nSXNzdWVzKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJyZWFrZG93bjtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0U291cmNlRmlsZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvdXRwdXQgPSBleGVjU3luYyhcbiAgICAgICAgJ2ZpbmQgc3JjIC1uYW1lIFwiKi50c1wiIC1vIC1uYW1lIFwiKi50c3hcIiAtbyAtbmFtZSBcIiouanNcIiAtbyAtbmFtZSBcIiouanN4XCIgfCBncmVwIC12IF9fdGVzdHNfXyB8IGdyZXAgLXYgLnRlc3QuIHwgZ3JlcCAtdiAuc3BlYy4nLFxuICAgICAgICB7IGVuY29kaW5nOiAndXRmOCcsIHN0ZGlvOiAncGlwZScgfSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gb3V0cHV0LnRyaW0oKS5zcGxpdCgnXFxuJykuZmlsdGVyKEJvb2xlYW4pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgc291cmNlIGZpbGVzJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYmF0Y2hGaWxlcyhmaWxlczogc3RyaW5nW10pOiBzdHJpbmdbXVtdIHtcbiAgICBjb25zdCBiYXRjaGVzOiBzdHJpbmdbXVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkgKz0gdGhpcy5jb25maWcubWF4RmlsZXNQZXJCYXRjaCkge1xuICAgICAgYmF0Y2hlcy5wdXNoKGZpbGVzLnNsaWNlKGksIGkgKyB0aGlzLmNvbmZpZy5tYXhGaWxlc1BlckJhdGNoKSk7XG4gICAgfVxuICAgIHJldHVybiBiYXRjaGVzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUJ1aWxkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBleGVjU3luYygneWFybiB0c2MgLS1ub0VtaXQgLS1za2lwTGliQ2hlY2snLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgIHN0ZGlvOiAncGlwZScsXG4gICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0J1aWxkIHZhbGlkYXRpb24gZmFpbGVkIGR1cmluZyBsaW50aW5nL2Zvcm1hdHRpbmcnLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtZXJnZUJhdGNoUmVzdWx0cyhcbiAgICB0b3RhbDogTGludGluZ0Zvcm1hdHRpbmdSZXN1bHQsXG4gICAgYmF0Y2g6IExpbnRpbmdGb3JtYXR0aW5nUmVzdWx0LFxuICApOiBMaW50aW5nRm9ybWF0dGluZ1Jlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbGVzUHJvY2Vzc2VkOiBbLi4udG90YWwuZmlsZXNQcm9jZXNzZWQsIC4uLmJhdGNoLmZpbGVzUHJvY2Vzc2VkXSxcbiAgICAgIGxpbnRpbmdWaW9sYXRpb25zRml4ZWQ6IHRvdGFsLmxpbnRpbmdWaW9sYXRpb25zRml4ZWQgKyBiYXRjaC5saW50aW5nVmlvbGF0aW9uc0ZpeGVkLFxuICAgICAgZm9ybWF0dGluZ0lzc3Vlc0ZpeGVkOiB0b3RhbC5mb3JtYXR0aW5nSXNzdWVzRml4ZWQgKyBiYXRjaC5mb3JtYXR0aW5nSXNzdWVzRml4ZWQsXG4gICAgICBwYXR0ZXJuQmFzZWRGaXhlc0FwcGxpZWQ6IHRvdGFsLnBhdHRlcm5CYXNlZEZpeGVzQXBwbGllZCArIGJhdGNoLnBhdHRlcm5CYXNlZEZpeGVzQXBwbGllZCxcbiAgICAgIGJ1aWxkVmFsaWRhdGlvblBhc3NlZDogdG90YWwuYnVpbGRWYWxpZGF0aW9uUGFzc2VkICYmIGJhdGNoLmJ1aWxkVmFsaWRhdGlvblBhc3NlZCxcbiAgICAgIGVycm9yczogWy4uLnRvdGFsLmVycm9ycywgLi4uYmF0Y2guZXJyb3JzXSxcbiAgICAgIHdhcm5pbmdzOiBbLi4udG90YWwud2FybmluZ3MsIC4uLmJhdGNoLndhcm5pbmdzXSxcbiAgICAgIHZpb2xhdGlvbkJyZWFrZG93bjoge1xuICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOlxuICAgICAgICAgIHRvdGFsLnZpb2xhdGlvbkJyZWFrZG93bi50eXBlU2NyaXB0RXJyb3JzICsgYmF0Y2gudmlvbGF0aW9uQnJlYWtkb3duLnR5cGVTY3JpcHRFcnJvcnMsXG4gICAgICAgIHJlYWN0VmlvbGF0aW9uczpcbiAgICAgICAgICB0b3RhbC52aW9sYXRpb25CcmVha2Rvd24ucmVhY3RWaW9sYXRpb25zICsgYmF0Y2gudmlvbGF0aW9uQnJlYWtkb3duLnJlYWN0VmlvbGF0aW9ucyxcbiAgICAgICAgaW1wb3J0VmlvbGF0aW9uczpcbiAgICAgICAgICB0b3RhbC52aW9sYXRpb25CcmVha2Rvd24uaW1wb3J0VmlvbGF0aW9ucyArIGJhdGNoLnZpb2xhdGlvbkJyZWFrZG93bi5pbXBvcnRWaW9sYXRpb25zLFxuICAgICAgICBmb3JtYXR0aW5nSXNzdWVzOlxuICAgICAgICAgIHRvdGFsLnZpb2xhdGlvbkJyZWFrZG93bi5mb3JtYXR0aW5nSXNzdWVzICsgYmF0Y2gudmlvbGF0aW9uQnJlYWtkb3duLmZvcm1hdHRpbmdJc3N1ZXMsXG4gICAgICAgIGN1c3RvbVBhdHRlcm5GaXhlczpcbiAgICAgICAgICB0b3RhbC52aW9sYXRpb25CcmVha2Rvd24uY3VzdG9tUGF0dGVybkZpeGVzICsgYmF0Y2gudmlvbGF0aW9uQnJlYWtkb3duLmN1c3RvbVBhdHRlcm5GaXhlcyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIERlZmF1bHQgY29uZmlndXJhdGlvbiBmb3IgbGludGluZyBhbmQgZm9ybWF0dGluZ1xuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9MSU5USU5HX0ZPUk1BVFRJTkdfQ09ORklHOiBMaW50aW5nRm9ybWF0dGluZ0NvbmZpZyA9IHtcbiAgbWF4RmlsZXNQZXJCYXRjaDogMjUsXG4gIHNhZmV0eVZhbGlkYXRpb25FbmFibGVkOiB0cnVlLFxuICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDUsXG4gIGF1dG9GaXhFbmFibGVkOiB0cnVlLFxuICBmb3JtYXR0aW5nRW5hYmxlZDogdHJ1ZSxcbiAgbGludGluZ1J1bGVzOiB7XG4gICAgZW5mb3JjZVR5cGVTY3JpcHRSdWxlczogdHJ1ZSxcbiAgICBlbmZvcmNlUmVhY3RSdWxlczogdHJ1ZSxcbiAgICBlbmZvcmNlSW1wb3J0UnVsZXM6IHRydWUsXG4gICAgbWF4V2FybmluZ3NUaHJlc2hvbGQ6IDEwMDAsXG4gICAgY3VzdG9tUnVsZU92ZXJyaWRlczoge30sXG4gIH0sXG4gIGZvcm1hdHRpbmdSdWxlczoge1xuICAgIGVuZm9yY2VDb25zaXN0ZW50SW5kZW50YXRpb246IHRydWUsXG4gICAgZW5mb3JjZVRyYWlsaW5nQ29tbWFzOiB0cnVlLFxuICAgIGVuZm9yY2VTZW1pY29sb25zOiB0cnVlLFxuICAgIGVuZm9yY2VRdW90ZVN0eWxlOiAnc2luZ2xlJyxcbiAgICBlbmZvcmNlTGluZUxlbmd0aDogMTAwLFxuICAgIGVuZm9yY2VTcGFjaW5nOiB0cnVlLFxuICB9LFxuICBwYXR0ZXJuQmFzZWRGaXhlczogW1xuICAgIHtcbiAgICAgIG5hbWU6ICdSZW1vdmUgY29uc29sZS5sb2cgc3RhdGVtZW50cycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSBjb25zb2xlLmxvZyBzdGF0ZW1lbnRzIGZyb20gcHJvZHVjdGlvbiBjb2RlJyxcbiAgICAgIHBhdHRlcm46IC9jb25zb2xlXFwubG9nXFwoW14pXSpcXCk7P1xccypcXG4/L2csXG4gICAgICByZXBsYWNlbWVudDogJycsXG4gICAgICBmaWxlRXh0ZW5zaW9uczogWycudHMnLCAnLnRzeCcsICcuanMnLCAnLmpzeCddLFxuICAgICAgZW5hYmxlZDogZmFsc2UsIC8vIERpc2FibGVkIGJ5IGRlZmF1bHQgZm9yIHNhZmV0eVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0ZpeCBkb3VibGUgc2VtaWNvbG9ucycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlcGxhY2UgZG91YmxlIHNlbWljb2xvbnMgd2l0aCBzaW5nbGUgc2VtaWNvbG9ucycsXG4gICAgICBwYXR0ZXJuOiAvOzsvZyxcbiAgICAgIHJlcGxhY2VtZW50OiAnOycsXG4gICAgICBmaWxlRXh0ZW5zaW9uczogWycudHMnLCAnLnRzeCcsICcuanMnLCAnLmpzeCddLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdSZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1JlbW92ZSB0cmFpbGluZyB3aGl0ZXNwYWNlIGZyb20gbGluZXMnLFxuICAgICAgcGF0dGVybjogL1sgXFx0XSskL2dtLFxuICAgICAgcmVwbGFjZW1lbnQ6ICcnLFxuICAgICAgZmlsZUV4dGVuc2lvbnM6IFsnLnRzJywgJy50c3gnLCAnLmpzJywgJy5qc3gnXSxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnRml4IG11bHRpcGxlIGVtcHR5IGxpbmVzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVwbGFjZSBtdWx0aXBsZSBjb25zZWN1dGl2ZSBlbXB0eSBsaW5lcyB3aXRoIHNpbmdsZSBlbXB0eSBsaW5lJyxcbiAgICAgIHBhdHRlcm46IC9cXG5cXHMqXFxuXFxzKlxcbi9nLFxuICAgICAgcmVwbGFjZW1lbnQ6ICdcXG5cXG4nLFxuICAgICAgZmlsZUV4dGVuc2lvbnM6IFsnLnRzJywgJy50c3gnLCAnLmpzJywgJy5qc3gnXSxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgfSxcbiAgXSxcbn07XG4iXSwidmVyc2lvbiI6M30=