b00a90c0fda13d50557759b5a3b7e367
"use strict";
/**
 * Domain-Specific Testing
 * Tests for astrological code analysis and preservation, recipe/ingredient type suggestions,
 * campaign system flexibility preservation, and service layer interface suggestions
 */
Object.defineProperty(exports, "__esModule", { value: true });
const AnyTypeClassifier_1 = require("../AnyTypeClassifier");
const DomainContextAnalyzer_1 = require("../DomainContextAnalyzer");
const SafeTypeReplacer_1 = require("../SafeTypeReplacer");
const types_1 = require("../types");
describe('Domain-Specific Testing', () => {
    let classifier;
    let analyzer;
    let replacer;
    beforeEach(() => {
        classifier = new AnyTypeClassifier_1.AnyTypeClassifier();
        analyzer = new DomainContextAnalyzer_1.DomainContextAnalyzer();
        replacer = new SafeTypeReplacer_1.SafeTypeReplacer();
    });
    const createDomainContext = (codeSnippet, filePath, domain, surroundingLines = [], hasComment = false, comment) => ({
        filePath,
        lineNumber: 1,
        codeSnippet,
        surroundingLines,
        hasExistingComment: hasComment,
        existingComment: comment,
        isInTestFile: filePath.includes('.test.') || filePath.includes('.spec.'),
        domainContext: {
            domain,
            intentionalityHints: [],
            suggestedTypes: [],
            preservationReasons: []
        }
    });
    describe('Astrological Code Analysis and Preservation', () => {
        describe('Planetary Position Data Preservation', () => {
            test('should preserve planetary position API responses', async () => {
                const context = createDomainContext('const planetaryPositions: any = await getReliablePlanetaryPositions();', 'src/calculations/planetary/positions.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { getReliablePlanetaryPositions } from "@/utils/reliableAstronomy";',
                    'export async function calculateCurrentPositions() {'
                ]);
                const domainAnalysis = await analyzer.analyzeDomain(context);
                expect(domainAnalysis.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
                expect(domainAnalysis.preservationReasons).toContain('Astrological calculations require compatibility with external astronomical libraries');
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('planetary position data');
            });
            test('should preserve ephemeris data from external sources', async () => {
                const context = createDomainContext('const ephemerisData: any = astronomyEngine.getEphemeris(date);', 'src/calculations/ephemeris/calculator.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { astronomyEngine } from "astronomy-engine";',
                    'function calculateTransits(startDate: Date, endDate: Date) {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('external astronomical data');
                expect(classification.requiresDocumentation).toBe(true);
            });
            test('should preserve Swiss Ephemeris compatibility', async () => {
                const context = createDomainContext('const swissData: any = swisseph.calc_ut(julianDay, planet);', 'src/calculations/swiss-ephemeris/wrapper.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import * as swisseph from "swisseph";',
                    'export function calculatePlanetPosition(planet: number, date: Date): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('Swiss Ephemeris');
            });
            test('should preserve NASA JPL Horizons API responses', async () => {
                const context = createDomainContext('const horizonsResponse: any = await nasaJplApi.getHorizonsData(params);', 'src/services/astronomy/nasa-jpl.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'class NasaJplService {',
                    '  async fetchPlanetaryData(params: HorizonsParams): Promise<any> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('NASA JPL');
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
            });
        });
        describe('Elemental Properties Preservation', () => {
            test('should preserve dynamic elemental calculations', async () => {
                const context = createDomainContext('const elementalBalance: any = calculateElementalHarmony(ingredients);', 'src/calculations/elemental/harmony.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { ElementalProperties } from "@/types";',
                    'function calculateCompatibility(source: ElementalProperties, target: ElementalProperties): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('elemental');
            });
            test('should suggest specific types for elemental properties when possible', async () => {
                const context = createDomainContext('const fireValue: any = ingredient.fire;', 'src/calculations/elemental/properties.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'interface ElementalProperties {',
                    '  fire: number;',
                    '  water: number;'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('number');
            });
            test('should preserve complex elemental compatibility matrices', async () => {
                const context = createDomainContext('const compatibilityMatrix: Record<string, any> = buildElementalMatrix();', 'src/calculations/elemental/compatibility.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function buildElementalMatrix(): Record<string, any> {',
                    '  return { Fire: { Fire: 0.9, Water: 0.7 } };'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('dynamic');
            });
        });
        describe('Transit and Timing Calculations', () => {
            test('should preserve transit date validation logic', async () => {
                const context = createDomainContext('const transitData: any = validateTransitDate(planet, date, sign);', 'src/utils/planetaryConsistencyCheck.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'export function validateTransitDate(planet: string, date: Date, sign: string): any {',
                    '  const planetData = require(`@/data/planets/${planet.toLowerCase()}`);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('transit date');
            });
            test('should preserve retrograde motion calculations', async () => {
                const context = createDomainContext('const retrogradeData: any = calculateRetrogradePhases(planet, year);', 'src/calculations/retrograde/motion.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function calculateRetrogradePhases(planet: string, year: number): any {',
                    '  const phases = getRetrogradePhases(planet, year);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('retrograde');
            });
        });
        describe('Astrological Chart Calculations', () => {
            test('should preserve house system calculations', async () => {
                const context = createDomainContext('const houseData: any = calculateHouses(latitude, longitude, time);', 'src/calculations/houses/systems.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { HouseSystem } from "@/types/astrology";',
                    'export function calculateHouses(lat: number, lon: number, time: Date): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('house');
            });
            test('should preserve aspect calculations', async () => {
                const context = createDomainContext('const aspects: any[] = calculateAspects(planetPositions);', 'src/calculations/aspects/calculator.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function calculateAspects(positions: PlanetaryPosition[]): any[] {',
                    '  const aspects = [];'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
            });
        });
    });
    describe('Recipe/Ingredient Type Suggestions', () => {
        describe('Ingredient Data Type Suggestions', () => {
            test('should suggest Ingredient interface for ingredient data', async () => {
                const context = createDomainContext('const ingredient: any = getIngredientData(name);', 'src/data/ingredients/processor.ts', types_1.CodeDomain.RECIPE, [
                    'import { Ingredient } from "@/types";',
                    'export function processIngredient(name: string): Ingredient {'
                ]);
                const domainAnalysis = await analyzer.analyzeDomain(context);
                expect(domainAnalysis.suggestedTypes).toContain('Ingredient');
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('Ingredient');
            });
            test('should suggest specific ingredient subtypes', async () => {
                const contexts = [
                    createDomainContext('const spice: any = getSpiceProperties(name);', 'src/data/ingredients/spices.ts', types_1.CodeDomain.RECIPE),
                    createDomainContext('const herb: any = getHerbData(name);', 'src/data/ingredients/herbs.ts', types_1.CodeDomain.RECIPE),
                    createDomainContext('const vegetable: any = getVegetableInfo(name);', 'src/data/ingredients/vegetables.ts', types_1.CodeDomain.RECIPE)
                ];
                for (const context of contexts) {
                    const domainAnalysis = await analyzer.analyzeDomain(context);
                    const classification = await classifier.classify(context);
                    expect(classification.isIntentional).toBe(false);
                    expect(domainAnalysis.suggestedTypes.length).toBeGreaterThan(0);
                    if (context.filePath.includes('spices')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Spice');
                    }
                    else if (context.filePath.includes('herbs')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Herb');
                    }
                    else if (context.filePath.includes('vegetables')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Vegetable');
                    }
                }
            });
            test('should suggest array types for ingredient collections', async () => {
                const context = createDomainContext('const ingredients: any[] = getAllIngredients();', 'src/data/ingredients/collection.ts', types_1.CodeDomain.RECIPE, [
                    'export function getAllIngredients(): Ingredient[] {',
                    '  return ingredientDatabase.getAll();'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
                expect(classification.suggestedReplacement).toBe('Ingredient[]');
            });
            test('should suggest nutritional info types', async () => {
                const context = createDomainContext('const nutrition: any = getNutritionalData(ingredient);', 'src/data/nutrition/calculator.ts', types_1.CodeDomain.RECIPE, [
                    'import { NutritionalInfo } from "@/types";',
                    'function calculateNutrition(ingredient: Ingredient): NutritionalInfo {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('NutritionalInfo');
            });
        });
        describe('Recipe Data Type Suggestions', () => {
            test('should suggest Recipe interface for recipe data', async () => {
                const context = createDomainContext('const recipe: any = buildRecipe(ingredients, instructions);', 'src/data/recipes/builder.ts', types_1.CodeDomain.RECIPE, [
                    'import { Recipe, Ingredient, CookingInstruction } from "@/types";',
                    'export function buildRecipe(ingredients: Ingredient[], instructions: CookingInstruction[]): Recipe {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('Recipe');
            });
            test('should suggest cooking method types', async () => {
                const context = createDomainContext('const method: any = selectCookingMethod(ingredients);', 'src/data/cooking/methods.ts', types_1.CodeDomain.RECIPE, [
                    'import { CookingMethod } from "@/types";',
                    'export function selectOptimalMethod(ingredients: Ingredient[]): CookingMethod {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CookingMethod');
            });
            test('should suggest cuisine type for cultural data', async () => {
                const context = createDomainContext('const cuisine: any = identifyCuisineType(recipe);', 'src/data/cuisines/classifier.ts', types_1.CodeDomain.RECIPE, [
                    'import { CuisineType } from "@/types";',
                    'function classifyCuisine(recipe: Recipe): CuisineType {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CuisineType');
            });
        });
        describe('External Food API Preservation', () => {
            test('should preserve Spoonacular API responses', async () => {
                const context = createDomainContext('const spoonacularData: any = await spoonacularApi.getRecipe(id);', 'src/services/external/spoonacular.ts', types_1.CodeDomain.RECIPE, [
                    'class SpoonacularService {',
                    '  async fetchRecipeData(recipeId: number): Promise<any> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('API');
            });
            test('should preserve USDA Food Data Central responses', async () => {
                const context = createDomainContext('const usdaResponse: any = await usdaApi.getFoodData(fdcId);', 'src/services/external/usda.ts', types_1.CodeDomain.RECIPE, [
                    'async function fetchNutritionalData(fdcId: string): Promise<any> {',
                    '  const response = await fetch(`https://api.nal.usda.gov/fdc/v1/food/${fdcId}`);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('USDA');
            });
        });
        describe('Elemental Properties in Recipe Context', () => {
            test('should suggest ElementalProperties for ingredient elements', async () => {
                const context = createDomainContext('const elements: any = ingredient.elementalProperties;', 'src/data/ingredients/elemental.ts', types_1.CodeDomain.RECIPE, [
                    'interface Ingredient {',
                    '  elementalProperties: ElementalProperties;',
                    '}'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ElementalProperties');
            });
            test('should preserve dynamic elemental calculations in recipes', async () => {
                const context = createDomainContext('const harmony: any = calculateRecipeHarmony(recipe);', 'src/calculations/recipe/harmony.ts', types_1.CodeDomain.RECIPE, [
                    'function calculateRecipeHarmony(recipe: Recipe): any {',
                    '  return recipe.ingredients.reduce((harmony, ingredient) => {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('harmony');
            });
        });
    });
    describe('Campaign System Flexibility Preservation', () => {
        describe('Dynamic Configuration Preservation', () => {
            test('should preserve campaign configuration flexibility', async () => {
                const context = createDomainContext('const campaignConfig: any = loadDynamicConfig(environment);', 'src/services/campaign/ConfigLoader.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class ConfigLoader {',
                    '  loadDynamicConfig(env: string): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.DYNAMIC_CONFIG);
                expect(classification.reasoning).toContain('dynamic');
            });
            test('should preserve adaptive strategy configurations', async () => {
                const context = createDomainContext('const adaptiveSettings: any = calculateOptimalSettings(metrics);', 'src/services/campaign/AdaptiveStrategy.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class AdaptiveStrategy {',
                    '  calculateOptimalSettings(metrics: ProgressMetrics): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('adaptive');
            });
            test('should preserve intelligence system configurations', async () => {
                const context = createDomainContext('const intelligenceConfig: any = buildIntelligenceSystem(params);', 'src/services/campaign/IntelligenceSystem.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class IntelligenceSystem {',
                    '  buildIntelligenceSystem(params: IntelligenceParams): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('intelligence');
            });
        });
        describe('Metrics and Progress Tracking', () => {
            test('should suggest specific types for well-defined metrics', async () => {
                const context = createDomainContext('const progress: any = calculateProgress();', 'src/services/campaign/ProgressTracker.ts', types_1.CodeDomain.CAMPAIGN, [
                    'import { ProgressMetrics } from "@/types";',
                    'function calculateProgress(): ProgressMetrics {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ProgressMetrics');
            });
            test('should preserve dynamic metrics calculations', async () => {
                const context = createDomainContext('const dynamicMetrics: any = aggregateMetrics(sources);', 'src/services/campaign/MetricsAggregator.ts', types_1.CodeDomain.CAMPAIGN, [
                    'function aggregateMetrics(sources: MetricsSource[]): any {',
                    '  return sources.reduce((agg, source) => ({ ...agg, ...source.getMetrics() }), {});'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('dynamic');
            });
            test('should suggest TypeScriptError for error analysis', async () => {
                const context = createDomainContext('const errors: any[] = analyzeTypeScriptErrors();', 'src/services/campaign/TypeScriptErrorAnalyzer.ts', types_1.CodeDomain.CAMPAIGN, [
                    'import { TypeScriptError } from "@/types";',
                    'function analyzeTypeScriptErrors(): TypeScriptError[] {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('TypeScriptError[]');
            });
        });
        describe('Tool Integration Flexibility', () => {
            test('should preserve tool integration configurations', async () => {
                const context = createDomainContext('const toolConfig: any = integrateExternalTool(toolName, settings);', 'src/services/campaign/ToolIntegration.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class ToolIntegration {',
                    '  integrateExternalTool(name: string, settings: any): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('tool integration');
            });
            test('should preserve validation framework flexibility', async () => {
                const context = createDomainContext('const validationResult: any = runValidation(rules, data);', 'src/services/campaign/ValidationFramework.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class ValidationFramework {',
                    '  runValidation(rules: ValidationRule[], data: any): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('validation');
            });
        });
        describe('Safety Protocol Flexibility', () => {
            test('should preserve safety event handling', async () => {
                const context = createDomainContext('const safetyEvent: any = createSafetyEvent(type, data);', 'src/services/campaign/SafetyProtocol.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class SafetyProtocol {',
                    '  createSafetyEvent(type: SafetyEventType, data: any): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('safety');
            });
            test('should preserve rollback mechanism flexibility', async () => {
                const context = createDomainContext('const rollbackData: any = prepareRollback(changes);', 'src/services/campaign/RollbackManager.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class RollbackManager {',
                    '  prepareRollback(changes: FileChange[]): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('rollback');
            });
        });
    });
    describe('Service Layer Interface Suggestions', () => {
        describe('API Service Interface Suggestions', () => {
            test('should suggest ApiResponse for API service responses', async () => {
                const context = createDomainContext('const response: any = await this.httpClient.get(endpoint);', 'src/services/api/BaseApiService.ts', types_1.CodeDomain.SERVICE, [
                    'export class BaseApiService {',
                    '  async get<T>(endpoint: string): Promise<ApiResponse<T>> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ApiResponse<T>');
            });
            test('should suggest specific service interfaces', async () => {
                const contexts = [
                    createDomainContext('const service: any = new RecommendationService();', 'src/services/RecommendationService.ts', types_1.CodeDomain.SERVICE),
                    createDomainContext('const astroService: any = new AstrologicalService();', 'src/services/AstrologicalService.ts', types_1.CodeDomain.SERVICE),
                    createDomainContext('const recipeService: any = new RecipeService();', 'src/services/RecipeService.ts', types_1.CodeDomain.SERVICE)
                ];
                for (const context of contexts) {
                    const classification = await classifier.classify(context);
                    expect(classification.isIntentional).toBe(false);
                    if (context.filePath.includes('Recommendation')) {
                        expect(classification.suggestedReplacement).toBe('RecommendationService');
                    }
                    else if (context.filePath.includes('Astrological')) {
                        expect(classification.suggestedReplacement).toBe('AstrologicalService');
                    }
                    else if (context.filePath.includes('Recipe')) {
                        expect(classification.suggestedReplacement).toBe('RecipeService');
                    }
                }
            });
            test('should preserve external service integration flexibility', async () => {
                const context = createDomainContext('const externalService: any = createExternalServiceClient(config);', 'src/services/external/ExternalServiceFactory.ts', types_1.CodeDomain.SERVICE, [
                    'export class ExternalServiceFactory {',
                    '  createExternalServiceClient(config: ServiceConfig): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('external service');
            });
        });
        describe('Data Transformation Service Suggestions', () => {
            test('should suggest specific transformer interfaces', async () => {
                const context = createDomainContext('const transformer: any = new DataTransformer();', 'src/services/data/DataTransformer.ts', types_1.CodeDomain.SERVICE, [
                    'export class DataTransformer {',
                    '  transform<T, U>(data: T): U {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('DataTransformer');
            });
            test('should suggest mapper interfaces for data mapping', async () => {
                const context = createDomainContext('const mapper: any = createMapper(sourceSchema, targetSchema);', 'src/services/data/SchemaMapper.ts', types_1.CodeDomain.SERVICE, [
                    'export function createMapper(source: Schema, target: Schema): any {',
                    '  return new SchemaMapper(source, target);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('SchemaMapper');
            });
        });
        describe('Caching Service Interface Suggestions', () => {
            test('should suggest cache interface types', async () => {
                const context = createDomainContext('const cache: any = new CacheService();', 'src/services/cache/CacheService.ts', types_1.CodeDomain.SERVICE, [
                    'export class CacheService {',
                    '  get<T>(key: string): Promise<T | null> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CacheService');
            });
            test('should suggest cache entry types', async () => {
                const context = createDomainContext('const entry: any = cache.get(key);', 'src/services/cache/CacheManager.ts', types_1.CodeDomain.SERVICE, [
                    'class CacheManager {',
                    '  async getCacheEntry(key: string): Promise<CacheEntry | null> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CacheEntry | null');
            });
        });
        describe('Validation Service Interface Suggestions', () => {
            test('should suggest validation result interfaces', async () => {
                const context = createDomainContext('const result: any = validator.validate(data);', 'src/services/validation/ValidationService.ts', types_1.CodeDomain.SERVICE, [
                    'export class ValidationService {',
                    '  validate(data: unknown): ValidationResult {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ValidationResult');
            });
            test('should suggest schema validation interfaces', async () => {
                const context = createDomainContext('const schema: any = buildValidationSchema(rules);', 'src/services/validation/SchemaBuilder.ts', types_1.CodeDomain.SERVICE, [
                    'import { ValidationSchema } from "@/types";',
                    'function buildValidationSchema(rules: ValidationRule[]): ValidationSchema {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ValidationSchema');
            });
        });
        describe('Service Error Handling', () => {
            test('should preserve service error handling flexibility', async () => {
                const context = createDomainContext('const error: any = new ServiceError(message, code);', 'src/services/errors/ServiceError.ts', types_1.CodeDomain.SERVICE, [
                    'export class ServiceError extends Error {',
                    '  constructor(message: string, code: string, details?: any) {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('error');
            });
            test('should suggest specific error types when available', async () => {
                const context = createDomainContext('const apiError: any = handleApiError(response);', 'src/services/errors/ApiErrorHandler.ts', types_1.CodeDomain.SERVICE, [
                    'import { ApiError } from "@/types";',
                    'function handleApiError(response: Response): ApiError {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ApiError');
            });
        });
    });
    describe('Cross-Domain Integration', () => {
        test('should handle mixed domain contexts appropriately', async () => {
            // Test a service that integrates astrological calculations with recipe recommendations
            const context = createDomainContext('const recommendation: any = await astroRecipeService.getRecommendation(userChart, preferences);', 'src/services/AstrologicalRecipeService.ts', types_1.CodeDomain.SERVICE, [
                'export class AstrologicalRecipeService {',
                '  async getRecommendation(chart: AstrologyChart, prefs: UserPreferences): Promise<RecipeRecommendation> {'
            ]);
            const classification = await classifier.classify(context);
            expect(classification.isIntentional).toBe(false);
            expect(classification.suggestedReplacement).toBe('RecipeRecommendation');
        });
        test('should preserve campaign system integration with domain services', async () => {
            const context = createDomainContext('const campaignData: any = integrateDomainServices(services);', 'src/services/campaign/DomainIntegration.ts', types_1.CodeDomain.CAMPAIGN, [
                'class DomainIntegration {',
                '  integrateDomainServices(services: DomainService[]): any {'
            ]);
            const classification = await classifier.classify(context);
            expect(classification.isIntentional).toBe(true);
            expect(classification.reasoning).toContain('integration');
        });
    });
    describe('Type Replacement Integration', () => {
        test('should apply domain-specific replacements correctly', async () => {
            const replacements = [
                {
                    original: 'any',
                    replacement: 'Ingredient',
                    filePath: 'src/data/ingredients/processor.ts',
                    lineNumber: 1,
                    confidence: 0.9,
                    validationRequired: true
                },
                {
                    original: 'any',
                    replacement: 'PlanetaryPosition',
                    filePath: 'src/calculations/planetary/positions.ts',
                    lineNumber: 1,
                    confidence: 0.8,
                    validationRequired: true
                },
                {
                    original: 'any',
                    replacement: 'ProgressMetrics',
                    filePath: 'src/services/campaign/ProgressTracker.ts',
                    lineNumber: 1,
                    confidence: 0.9,
                    validationRequired: true
                }
            ];
            // Mock file system for domain-specific content
            jest.spyOn(require('fs'), 'readFileSync').mockImplementation((path) => {
                if (path.includes('ingredients'))
                    return 'const ingredient: any = getData();';
                if (path.includes('planetary'))
                    return 'const position: any = calculate();';
                if (path.includes('campaign'))
                    return 'const metrics: any = getProgress();';
                return 'backup content';
            });
            jest.spyOn(require('fs'), 'writeFileSync').mockImplementation(() => undefined);
            jest.spyOn(require('fs'), 'existsSync').mockReturnValue(true);
            // Mock successful compilation
            jest.spyOn(require('child_process'), 'execSync').mockReturnValue('');
            const results = await Promise.all(replacements.map(replacement => replacer.applyReplacement(replacement)));
            results.forEach(result => {
                expect(result.success).toBe(true);
                expect(result.appliedReplacements).toHaveLength(1);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5kdXBsaWNhdGUtZGlycy1iYWNrdXAtMjAyNTA5MDctMTY0ODAyL3NlcnZpY2VzIDIvY2FtcGFpZ24vdW5pbnRlbnRpb25hbC1hbnktZWxpbWluYXRpb24vX190ZXN0c19fL0RvbWFpblNwZWNpZmljVGVzdGluZy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOztBQUVILDREQUF5RDtBQUN6RCxvRUFBaUU7QUFDakUsMERBQXVEO0FBQ3ZELG9DQUtrQjtBQUVsQixRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO0lBQ3ZDLElBQUksVUFBNkIsQ0FBQztJQUNsQyxJQUFJLFFBQStCLENBQUM7SUFDcEMsSUFBSSxRQUEwQixDQUFDO0lBRS9CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxVQUFVLEdBQUcsSUFBSSxxQ0FBaUIsRUFBRSxDQUFDO1FBQ3JDLFFBQVEsR0FBRyxJQUFJLDZDQUFxQixFQUFFLENBQUM7UUFDdkMsUUFBUSxHQUFHLElBQUksbUNBQWdCLEVBQUUsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sbUJBQW1CLEdBQUcsQ0FDMUIsV0FBbUIsRUFDbkIsUUFBZ0IsRUFDaEIsTUFBa0IsRUFDbEIsbUJBQTZCLEVBQUUsRUFDL0IsVUFBVSxHQUFHLEtBQUssRUFDbEIsT0FBZ0IsRUFDTyxFQUFFLENBQUMsQ0FBQztRQUMzQixRQUFRO1FBQ1IsVUFBVSxFQUFFLENBQUM7UUFDYixXQUFXO1FBQ1gsZ0JBQWdCO1FBQ2hCLGtCQUFrQixFQUFFLFVBQVU7UUFDOUIsZUFBZSxFQUFFLE9BQU87UUFDeEIsWUFBWSxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDeEUsYUFBYSxFQUFFO1lBQ2IsTUFBTTtZQUNOLG1CQUFtQixFQUFFLEVBQUU7WUFDdkIsY0FBYyxFQUFFLEVBQUU7WUFDbEIsbUJBQW1CLEVBQUUsRUFBRTtTQUN4QjtLQUNGLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7UUFDM0QsUUFBUSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxJQUFJLENBQUMsa0RBQWtELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ2xFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyx3RUFBd0UsRUFDeEUseUNBQXlDLEVBQ3pDLGtCQUFVLENBQUMsWUFBWSxFQUN2QjtvQkFDRSw0RUFBNEU7b0JBQzVFLHFEQUFxRDtpQkFDdEQsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDN0QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDNUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFNBQVMsQ0FDbEQsc0ZBQXNGLENBQ3ZGLENBQUM7Z0JBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsdUJBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDbkUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMseUJBQXlCLENBQUMsQ0FBQztZQUN4RSxDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyxzREFBc0QsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDdEUsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLGdFQUFnRSxFQUNoRSwwQ0FBMEMsRUFDMUMsa0JBQVUsQ0FBQyxZQUFZLEVBQ3ZCO29CQUNFLHFEQUFxRDtvQkFDckQsOERBQThEO2lCQUMvRCxDQUNGLENBQUM7Z0JBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsNEJBQTRCLENBQUMsQ0FBQztnQkFDekUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxRCxDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQywrQ0FBK0MsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDL0QsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLDZEQUE2RCxFQUM3RCw2Q0FBNkMsRUFDN0Msa0JBQVUsQ0FBQyxZQUFZLEVBQ3ZCO29CQUNFLHVDQUF1QztvQkFDdkMsNEVBQTRFO2lCQUM3RSxDQUNGLENBQUM7Z0JBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsdUJBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDbkUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUNoRSxDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyxpREFBaUQsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDakUsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLHlFQUF5RSxFQUN6RSxvQ0FBb0MsRUFDcEMsa0JBQVUsQ0FBQyxZQUFZLEVBQ3ZCO29CQUNFLHdCQUF3QjtvQkFDeEIsb0VBQW9FO2lCQUNyRSxDQUNGLENBQUM7Z0JBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ3ZELE1BQU0sQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLHVCQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDckUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNoRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsdUVBQXVFLEVBQ3ZFLHVDQUF1QyxFQUN2QyxrQkFBVSxDQUFDLFlBQVksRUFDdkI7b0JBQ0UsZ0RBQWdEO29CQUNoRCxrR0FBa0c7aUJBQ25HLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMxRCxDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyxzRUFBc0UsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDdEYsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLHlDQUF5QyxFQUN6QywwQ0FBMEMsRUFDMUMsa0JBQVUsQ0FBQyxZQUFZLEVBQ3ZCO29CQUNFLGlDQUFpQztvQkFDakMsaUJBQWlCO29CQUNqQixrQkFBa0I7aUJBQ25CLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzdELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLDBEQUEwRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUMxRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsMEVBQTBFLEVBQzFFLDZDQUE2QyxFQUM3QyxrQkFBVSxDQUFDLFlBQVksRUFDdkI7b0JBQ0Usd0RBQXdEO29CQUN4RCwrQ0FBK0M7aUJBQ2hELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN4RCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxJQUFJLENBQUMsK0NBQStDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQy9ELE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxtRUFBbUUsRUFDbkUsd0NBQXdDLEVBQ3hDLGtCQUFVLENBQUMsWUFBWSxFQUN2QjtvQkFDRSxzRkFBc0Y7b0JBQ3RGLHlFQUF5RTtpQkFDMUUsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzdELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNoRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsc0VBQXNFLEVBQ3RFLHVDQUF1QyxFQUN2QyxrQkFBVSxDQUFDLFlBQVksRUFDdkI7b0JBQ0UseUVBQXlFO29CQUN6RSxxREFBcUQ7aUJBQ3RELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMzRCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxJQUFJLENBQUMsMkNBQTJDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzNELE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxvRUFBb0UsRUFDcEUsb0NBQW9DLEVBQ3BDLGtCQUFVLENBQUMsWUFBWSxFQUN2QjtvQkFDRSxrREFBa0Q7b0JBQ2xELDhFQUE4RTtpQkFDL0UsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNyRCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsMkRBQTJELEVBQzNELHdDQUF3QyxFQUN4QyxrQkFBVSxDQUFDLFlBQVksRUFDdkI7b0JBQ0Usb0VBQW9FO29CQUNwRSx1QkFBdUI7aUJBQ3hCLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ25FLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7UUFDbEQsUUFBUSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxJQUFJLENBQUMseURBQXlELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ3pFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxrREFBa0QsRUFDbEQsbUNBQW1DLEVBQ25DLGtCQUFVLENBQUMsTUFBTSxFQUNqQjtvQkFDRSx1Q0FBdUM7b0JBQ3ZDLCtEQUErRDtpQkFDaEUsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDN0QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBRTlELE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDakUsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsNkNBQTZDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzdELE1BQU0sUUFBUSxHQUFHO29CQUNmLG1CQUFtQixDQUNqQiw4Q0FBOEMsRUFDOUMsZ0NBQWdDLEVBQ2hDLGtCQUFVLENBQUMsTUFBTSxDQUNsQjtvQkFDRCxtQkFBbUIsQ0FDakIsc0NBQXNDLEVBQ3RDLCtCQUErQixFQUMvQixrQkFBVSxDQUFDLE1BQU0sQ0FDbEI7b0JBQ0QsbUJBQW1CLENBQ2pCLGdEQUFnRCxFQUNoRCxvQ0FBb0MsRUFDcEMsa0JBQVUsQ0FBQyxNQUFNLENBQ2xCO2lCQUNGLENBQUM7Z0JBRUYsS0FBSyxNQUFNLE9BQU8sSUFBSSxRQUFRLEVBQUU7b0JBQzlCLE1BQU0sY0FBYyxHQUFHLE1BQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDN0QsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUUxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDakQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUVoRSxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO3dCQUN2QyxNQUFNLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztxQkFDMUQ7eUJBQU0sSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTt3QkFDN0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7cUJBQ3pEO3lCQUFNLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUU7d0JBQ2xELE1BQU0sQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO3FCQUM5RDtpQkFDRjtZQUNILENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLHVEQUF1RCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUN2RSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsaURBQWlELEVBQ2pELG9DQUFvQyxFQUNwQyxrQkFBVSxDQUFDLE1BQU0sRUFDakI7b0JBQ0UscURBQXFEO29CQUNyRCx1Q0FBdUM7aUJBQ3hDLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNqRSxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ25FLENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLHVDQUF1QyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUN2RCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsd0RBQXdELEVBQ3hELGtDQUFrQyxFQUNsQyxrQkFBVSxDQUFDLE1BQU0sRUFDakI7b0JBQ0UsNENBQTRDO29CQUM1Qyx3RUFBd0U7aUJBQ3pFLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDdEUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDNUMsSUFBSSxDQUFDLGlEQUFpRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNqRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsNkRBQTZELEVBQzdELDZCQUE2QixFQUM3QixrQkFBVSxDQUFDLE1BQU0sRUFDakI7b0JBQ0UsbUVBQW1FO29CQUNuRSxzR0FBc0c7aUJBQ3ZHLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzdELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNyRCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsdURBQXVELEVBQ3ZELDZCQUE2QixFQUM3QixrQkFBVSxDQUFDLE1BQU0sRUFDakI7b0JBQ0UsMENBQTBDO29CQUMxQyxpRkFBaUY7aUJBQ2xGLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3BFLENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLCtDQUErQyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUMvRCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsbURBQW1ELEVBQ25ELGlDQUFpQyxFQUNqQyxrQkFBVSxDQUFDLE1BQU0sRUFDakI7b0JBQ0Usd0NBQXdDO29CQUN4Qyx5REFBeUQ7aUJBQzFELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2xFLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxRQUFRLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1lBQzlDLElBQUksQ0FBQywyQ0FBMkMsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDM0QsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLGtFQUFrRSxFQUNsRSxzQ0FBc0MsRUFDdEMsa0JBQVUsQ0FBQyxNQUFNLEVBQ2pCO29CQUNFLDRCQUE0QjtvQkFDNUIsMkRBQTJEO2lCQUM1RCxDQUNGLENBQUM7Z0JBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsdUJBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDbkUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDcEQsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsa0RBQWtELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ2xFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyw2REFBNkQsRUFDN0QsK0JBQStCLEVBQy9CLGtCQUFVLENBQUMsTUFBTSxFQUNqQjtvQkFDRSxvRUFBb0U7b0JBQ3BFLGtGQUFrRjtpQkFDbkYsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxRQUFRLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1lBQ3RELElBQUksQ0FBQyw0REFBNEQsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDNUUsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLHVEQUF1RCxFQUN2RCxtQ0FBbUMsRUFDbkMsa0JBQVUsQ0FBQyxNQUFNLEVBQ2pCO29CQUNFLHdCQUF3QjtvQkFDeEIsNkNBQTZDO29CQUM3QyxHQUFHO2lCQUNKLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFDMUUsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsMkRBQTJELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzNFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxzREFBc0QsRUFDdEQsb0NBQW9DLEVBQ3BDLGtCQUFVLENBQUMsTUFBTSxFQUNqQjtvQkFDRSx3REFBd0Q7b0JBQ3hELCtEQUErRDtpQkFDaEUsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3hELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDeEQsUUFBUSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxJQUFJLENBQUMsb0RBQW9ELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ3BFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyw2REFBNkQsRUFDN0QsdUNBQXVDLEVBQ3ZDLGtCQUFVLENBQUMsUUFBUSxFQUNuQjtvQkFDRSw2QkFBNkI7b0JBQzdCLHlDQUF5QztpQkFDMUMsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLHVCQUFlLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQ3JFLE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3hELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLGtEQUFrRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNsRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsa0VBQWtFLEVBQ2xFLDJDQUEyQyxFQUMzQyxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7b0JBQ0UsMEJBQTBCO29CQUMxQiw2REFBNkQ7aUJBQzlELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN6RCxDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyxvREFBb0QsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDcEUsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQ2pDLGtFQUFrRSxFQUNsRSw2Q0FBNkMsRUFDN0Msa0JBQVUsQ0FBQyxRQUFRLEVBQ25CO29CQUNFLG1DQUFtQztvQkFDbkMsOERBQThEO2lCQUMvRCxDQUNGLENBQUM7Z0JBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0QsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUU7WUFDN0MsSUFBSSxDQUFDLHdEQUF3RCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUN4RSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsNENBQTRDLEVBQzVDLDBDQUEwQyxFQUMxQyxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7b0JBQ0UsNENBQTRDO29CQUM1QyxpREFBaUQ7aUJBQ2xELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDdEUsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsOENBQThDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzlELE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyx3REFBd0QsRUFDeEQsNENBQTRDLEVBQzVDLGtCQUFVLENBQUMsUUFBUSxFQUNuQjtvQkFDRSw0REFBNEQ7b0JBQzVELHFGQUFxRjtpQkFDdEYsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3hELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLG1EQUFtRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNuRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsa0RBQWtELEVBQ2xELGtEQUFrRCxFQUNsRCxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7b0JBQ0UsNENBQTRDO29CQUM1Qyx5REFBeUQ7aUJBQzFELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDeEUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDNUMsSUFBSSxDQUFDLGlEQUFpRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNqRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsb0VBQW9FLEVBQ3BFLDBDQUEwQyxFQUMxQyxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7b0JBQ0UseUJBQXlCO29CQUN6Qiw2REFBNkQ7aUJBQzlELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ2pFLENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLGtEQUFrRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNsRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsMkRBQTJELEVBQzNELDhDQUE4QyxFQUM5QyxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7b0JBQ0Usb0NBQW9DO29CQUNwQyw0REFBNEQ7aUJBQzdELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMzRCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLDZCQUE2QixFQUFFLEdBQUcsRUFBRTtZQUMzQyxJQUFJLENBQUMsdUNBQXVDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ3ZELE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyx5REFBeUQsRUFDekQseUNBQXlDLEVBQ3pDLGtCQUFVLENBQUMsUUFBUSxFQUNuQjtvQkFDRSx3QkFBd0I7b0JBQ3hCLDhEQUE4RDtpQkFDL0QsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNoRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMscURBQXFELEVBQ3JELDBDQUEwQyxFQUMxQyxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7b0JBQ0UsZ0NBQWdDO29CQUNoQyxpREFBaUQ7aUJBQ2xELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN6RCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1FBQ25ELFFBQVEsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsSUFBSSxDQUFDLHNEQUFzRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUN0RSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsNERBQTRELEVBQzVELG9DQUFvQyxFQUNwQyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7b0JBQ0UsK0JBQStCO29CQUMvQiw2REFBNkQ7aUJBQzlELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDckUsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsNENBQTRDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzVELE1BQU0sUUFBUSxHQUFHO29CQUNmLG1CQUFtQixDQUNqQixtREFBbUQsRUFDbkQsdUNBQXVDLEVBQ3ZDLGtCQUFVLENBQUMsT0FBTyxDQUNuQjtvQkFDRCxtQkFBbUIsQ0FDakIsc0RBQXNELEVBQ3RELHFDQUFxQyxFQUNyQyxrQkFBVSxDQUFDLE9BQU8sQ0FDbkI7b0JBQ0QsbUJBQW1CLENBQ2pCLGlEQUFpRCxFQUNqRCwrQkFBK0IsRUFDL0Isa0JBQVUsQ0FBQyxPQUFPLENBQ25CO2lCQUNGLENBQUM7Z0JBRUYsS0FBSyxNQUFNLE9BQU8sSUFBSSxRQUFRLEVBQUU7b0JBQzlCLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBRWpELElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsRUFBRTt3QkFDL0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO3FCQUMzRTt5QkFBTSxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFO3dCQUNwRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7cUJBQ3pFO3lCQUFNLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7d0JBQzlDLE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7cUJBQ25FO2lCQUNGO1lBQ0gsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsMERBQTBELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzFFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxtRUFBbUUsRUFDbkUsaURBQWlELEVBQ2pELGtCQUFVLENBQUMsT0FBTyxFQUNsQjtvQkFDRSx1Q0FBdUM7b0JBQ3ZDLDZEQUE2RDtpQkFDOUQsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDakUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyx5Q0FBeUMsRUFBRSxHQUFHLEVBQUU7WUFDdkQsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNoRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsaURBQWlELEVBQ2pELHNDQUFzQyxFQUN0QyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7b0JBQ0UsZ0NBQWdDO29CQUNoQyxpQ0FBaUM7aUJBQ2xDLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDdEUsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsbURBQW1ELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ25FLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQywrREFBK0QsRUFDL0QsbUNBQW1DLEVBQ25DLGtCQUFVLENBQUMsT0FBTyxFQUNsQjtvQkFDRSxxRUFBcUU7b0JBQ3JFLDRDQUE0QztpQkFDN0MsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDbkUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDckQsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUN0RCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsd0NBQXdDLEVBQ3hDLG9DQUFvQyxFQUNwQyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7b0JBQ0UsNkJBQTZCO29CQUM3Qiw0Q0FBNEM7aUJBQzdDLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ25FLENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNsRCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsb0NBQW9DLEVBQ3BDLG9DQUFvQyxFQUNwQyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7b0JBQ0Usc0JBQXNCO29CQUN0QixrRUFBa0U7aUJBQ25FLENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDeEUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDeEQsSUFBSSxDQUFDLDZDQUE2QyxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUM3RCxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsK0NBQStDLEVBQy9DLDhDQUE4QyxFQUM5QyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7b0JBQ0Usa0NBQWtDO29CQUNsQywrQ0FBK0M7aUJBQ2hELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDdkUsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsNkNBQTZDLEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQzdELE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxtREFBbUQsRUFDbkQsMENBQTBDLEVBQzFDLGtCQUFVLENBQUMsT0FBTyxFQUNsQjtvQkFDRSw2Q0FBNkM7b0JBQzdDLDZFQUE2RTtpQkFDOUUsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN2RSxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtZQUN0QyxJQUFJLENBQUMsb0RBQW9ELEVBQUUsS0FBSyxJQUFJLEVBQUU7Z0JBQ3BFLE1BQU0sT0FBTyxHQUFHLG1CQUFtQixDQUNqQyxxREFBcUQsRUFDckQscUNBQXFDLEVBQ3JDLGtCQUFVLENBQUMsT0FBTyxFQUNsQjtvQkFDRSwyQ0FBMkM7b0JBQzNDLCtEQUErRDtpQkFDaEUsQ0FDRixDQUFDO2dCQUVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sVUFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLG9EQUFvRCxFQUFFLEtBQUssSUFBSSxFQUFFO2dCQUNwRSxNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsaURBQWlELEVBQ2pELHdDQUF3QyxFQUN4QyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7b0JBQ0UscUNBQXFDO29CQUNyQyx5REFBeUQ7aUJBQzFELENBQ0YsQ0FBQztnQkFFRixNQUFNLGNBQWMsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQy9ELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsSUFBSSxDQUFDLG1EQUFtRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ25FLHVGQUF1RjtZQUN2RixNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsaUdBQWlHLEVBQ2pHLDJDQUEyQyxFQUMzQyxrQkFBVSxDQUFDLE9BQU8sRUFDbEI7Z0JBQ0UsMENBQTBDO2dCQUMxQywyR0FBMkc7YUFDNUcsQ0FDRixDQUFDO1lBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxrRUFBa0UsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNsRixNQUFNLE9BQU8sR0FBRyxtQkFBbUIsQ0FDakMsOERBQThELEVBQzlELDRDQUE0QyxFQUM1QyxrQkFBVSxDQUFDLFFBQVEsRUFDbkI7Z0JBQ0UsMkJBQTJCO2dCQUMzQiw2REFBNkQ7YUFDOUQsQ0FDRixDQUFDO1lBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO1FBQzVDLElBQUksQ0FBQyxxREFBcUQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNyRSxNQUFNLFlBQVksR0FBc0I7Z0JBQ3RDO29CQUNFLFFBQVEsRUFBRSxLQUFLO29CQUNmLFdBQVcsRUFBRSxZQUFZO29CQUN6QixRQUFRLEVBQUUsbUNBQW1DO29CQUM3QyxVQUFVLEVBQUUsQ0FBQztvQkFDYixVQUFVLEVBQUUsR0FBRztvQkFDZixrQkFBa0IsRUFBRSxJQUFJO2lCQUN6QjtnQkFDRDtvQkFDRSxRQUFRLEVBQUUsS0FBSztvQkFDZixXQUFXLEVBQUUsbUJBQW1CO29CQUNoQyxRQUFRLEVBQUUseUNBQXlDO29CQUNuRCxVQUFVLEVBQUUsQ0FBQztvQkFDYixVQUFVLEVBQUUsR0FBRztvQkFDZixrQkFBa0IsRUFBRSxJQUFJO2lCQUN6QjtnQkFDRDtvQkFDRSxRQUFRLEVBQUUsS0FBSztvQkFDZixXQUFXLEVBQUUsaUJBQWlCO29CQUM5QixRQUFRLEVBQUUsMENBQTBDO29CQUNwRCxVQUFVLEVBQUUsQ0FBQztvQkFDYixVQUFVLEVBQUUsR0FBRztvQkFDZixrQkFBa0IsRUFBRSxJQUFJO2lCQUN6QjthQUNGLENBQUM7WUFFRiwrQ0FBK0M7WUFDL0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtnQkFDekUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQztvQkFBRSxPQUFPLG9DQUFvQyxDQUFDO2dCQUM5RSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO29CQUFFLE9BQU8sb0NBQW9DLENBQUM7Z0JBQzVFLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7b0JBQUUsT0FBTyxxQ0FBcUMsQ0FBQztnQkFDNUUsT0FBTyxnQkFBZ0IsQ0FBQztZQUMxQixDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLGVBQWUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUU5RCw4QkFBOEI7WUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRXJFLE1BQU0sT0FBTyxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FDL0IsWUFBWSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUN4RSxDQUFDO1lBRUYsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDdkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2xDLE1BQU0sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5kdXBsaWNhdGUtZGlycy1iYWNrdXAtMjAyNTA5MDctMTY0ODAyL3NlcnZpY2VzIDIvY2FtcGFpZ24vdW5pbnRlbnRpb25hbC1hbnktZWxpbWluYXRpb24vX190ZXN0c19fL0RvbWFpblNwZWNpZmljVGVzdGluZy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRG9tYWluLVNwZWNpZmljIFRlc3RpbmdcbiAqIFRlc3RzIGZvciBhc3Ryb2xvZ2ljYWwgY29kZSBhbmFseXNpcyBhbmQgcHJlc2VydmF0aW9uLCByZWNpcGUvaW5ncmVkaWVudCB0eXBlIHN1Z2dlc3Rpb25zLFxuICogY2FtcGFpZ24gc3lzdGVtIGZsZXhpYmlsaXR5IHByZXNlcnZhdGlvbiwgYW5kIHNlcnZpY2UgbGF5ZXIgaW50ZXJmYWNlIHN1Z2dlc3Rpb25zXG4gKi9cblxuaW1wb3J0IHsgQW55VHlwZUNsYXNzaWZpZXIgfSBmcm9tICcuLi9BbnlUeXBlQ2xhc3NpZmllcic7XG5pbXBvcnQgeyBEb21haW5Db250ZXh0QW5hbHl6ZXIgfSBmcm9tICcuLi9Eb21haW5Db250ZXh0QW5hbHl6ZXInO1xuaW1wb3J0IHsgU2FmZVR5cGVSZXBsYWNlciB9IGZyb20gJy4uL1NhZmVUeXBlUmVwbGFjZXInO1xuaW1wb3J0IHtcbiAgICBBbnlUeXBlQ2F0ZWdvcnksXG4gICAgQ2xhc3NpZmljYXRpb25Db250ZXh0LFxuICAgIENvZGVEb21haW4sXG4gICAgVHlwZVJlcGxhY2VtZW50XG59IGZyb20gJy4uL3R5cGVzJztcblxuZGVzY3JpYmUoJ0RvbWFpbi1TcGVjaWZpYyBUZXN0aW5nJywgKCkgPT4ge1xuICBsZXQgY2xhc3NpZmllcjogQW55VHlwZUNsYXNzaWZpZXI7XG4gIGxldCBhbmFseXplcjogRG9tYWluQ29udGV4dEFuYWx5emVyO1xuICBsZXQgcmVwbGFjZXI6IFNhZmVUeXBlUmVwbGFjZXI7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xhc3NpZmllciA9IG5ldyBBbnlUeXBlQ2xhc3NpZmllcigpO1xuICAgIGFuYWx5emVyID0gbmV3IERvbWFpbkNvbnRleHRBbmFseXplcigpO1xuICAgIHJlcGxhY2VyID0gbmV3IFNhZmVUeXBlUmVwbGFjZXIoKTtcbiAgfSk7XG5cbiAgY29uc3QgY3JlYXRlRG9tYWluQ29udGV4dCA9IChcbiAgICBjb2RlU25pcHBldDogc3RyaW5nLFxuICAgIGZpbGVQYXRoOiBzdHJpbmcsXG4gICAgZG9tYWluOiBDb2RlRG9tYWluLFxuICAgIHN1cnJvdW5kaW5nTGluZXM6IHN0cmluZ1tdID0gW10sXG4gICAgaGFzQ29tbWVudCA9IGZhbHNlLFxuICAgIGNvbW1lbnQ/OiBzdHJpbmdcbiAgKTogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0+ICh7XG4gICAgZmlsZVBhdGgsXG4gICAgbGluZU51bWJlcjogMSxcbiAgICBjb2RlU25pcHBldCxcbiAgICBzdXJyb3VuZGluZ0xpbmVzLFxuICAgIGhhc0V4aXN0aW5nQ29tbWVudDogaGFzQ29tbWVudCxcbiAgICBleGlzdGluZ0NvbW1lbnQ6IGNvbW1lbnQsXG4gICAgaXNJblRlc3RGaWxlOiBmaWxlUGF0aC5pbmNsdWRlcygnLnRlc3QuJykgfHwgZmlsZVBhdGguaW5jbHVkZXMoJy5zcGVjLicpLFxuICAgIGRvbWFpbkNvbnRleHQ6IHtcbiAgICAgIGRvbWFpbixcbiAgICAgIGludGVudGlvbmFsaXR5SGludHM6IFtdLFxuICAgICAgc3VnZ2VzdGVkVHlwZXM6IFtdLFxuICAgICAgcHJlc2VydmF0aW9uUmVhc29uczogW11cbiAgICB9XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBc3Ryb2xvZ2ljYWwgQ29kZSBBbmFseXNpcyBhbmQgUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdQbGFuZXRhcnkgUG9zaXRpb24gRGF0YSBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgcGxhbmV0YXJ5IHBvc2l0aW9uIEFQSSByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBwbGFuZXRhcnlQb3NpdGlvbnM6IGFueSA9IGF3YWl0IGdldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zKCk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9wbGFuZXRhcnkvcG9zaXRpb25zLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgZ2V0UmVsaWFibGVQbGFuZXRhcnlQb3NpdGlvbnMgfSBmcm9tIFwiQC91dGlscy9yZWxpYWJsZUFzdHJvbm9teVwiOycsXG4gICAgICAgICAgICAnZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZUN1cnJlbnRQb3NpdGlvbnMoKSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBkb21haW5BbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5BU1RST0xPR0lDQUwpO1xuICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMucHJlc2VydmF0aW9uUmVhc29ucykudG9Db250YWluKFxuICAgICAgICAgICdBc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb25zIHJlcXVpcmUgY29tcGF0aWJpbGl0eSB3aXRoIGV4dGVybmFsIGFzdHJvbm9taWNhbCBsaWJyYXJpZXMnXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEkpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3BsYW5ldGFyeSBwb3NpdGlvbiBkYXRhJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGVwaGVtZXJpcyBkYXRhIGZyb20gZXh0ZXJuYWwgc291cmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGVwaGVtZXJpc0RhdGE6IGFueSA9IGFzdHJvbm9teUVuZ2luZS5nZXRFcGhlbWVyaXMoZGF0ZSk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9lcGhlbWVyaXMvY2FsY3VsYXRvci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IGFzdHJvbm9teUVuZ2luZSB9IGZyb20gXCJhc3Ryb25vbXktZW5naW5lXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVUcmFuc2l0cyhzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZXh0ZXJuYWwgYXN0cm9ub21pY2FsIGRhdGEnKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlcXVpcmVzRG9jdW1lbnRhdGlvbikudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgU3dpc3MgRXBoZW1lcmlzIGNvbXBhdGliaWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBzd2lzc0RhdGE6IGFueSA9IHN3aXNzZXBoLmNhbGNfdXQoanVsaWFuRGF5LCBwbGFuZXQpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvc3dpc3MtZXBoZW1lcmlzL3dyYXBwZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgKiBhcyBzd2lzc2VwaCBmcm9tIFwic3dpc3NlcGhcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQbGFuZXRQb3NpdGlvbihwbGFuZXQ6IG51bWJlciwgZGF0ZTogRGF0ZSk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignU3dpc3MgRXBoZW1lcmlzJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIE5BU0EgSlBMIEhvcml6b25zIEFQSSByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBob3Jpem9uc1Jlc3BvbnNlOiBhbnkgPSBhd2FpdCBuYXNhSnBsQXBpLmdldEhvcml6b25zRGF0YShwYXJhbXMpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9hc3Ryb25vbXkvbmFzYS1qcGwudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBOYXNhSnBsU2VydmljZSB7JyxcbiAgICAgICAgICAgICcgIGFzeW5jIGZldGNoUGxhbmV0YXJ5RGF0YShwYXJhbXM6IEhvcml6b25zUGFyYW1zKTogUHJvbWlzZTxhbnk+IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignTkFTQSBKUEwnKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEkpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRWxlbWVudGFsIFByb3BlcnRpZXMgUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGR5bmFtaWMgZWxlbWVudGFsIGNhbGN1bGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGVsZW1lbnRhbEJhbGFuY2U6IGFueSA9IGNhbGN1bGF0ZUVsZW1lbnRhbEhhcm1vbnkoaW5ncmVkaWVudHMpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvZWxlbWVudGFsL2hhcm1vbnkudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBFbGVtZW50YWxQcm9wZXJ0aWVzIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZUNvbXBhdGliaWxpdHkoc291cmNlOiBFbGVtZW50YWxQcm9wZXJ0aWVzLCB0YXJnZXQ6IEVsZW1lbnRhbFByb3BlcnRpZXMpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdlbGVtZW50YWwnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyB0eXBlcyBmb3IgZWxlbWVudGFsIHByb3BlcnRpZXMgd2hlbiBwb3NzaWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGZpcmVWYWx1ZTogYW55ID0gaW5ncmVkaWVudC5maXJlOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvZWxlbWVudGFsL3Byb3BlcnRpZXMudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbnRlcmZhY2UgRWxlbWVudGFsUHJvcGVydGllcyB7JyxcbiAgICAgICAgICAgICcgIGZpcmU6IG51bWJlcjsnLFxuICAgICAgICAgICAgJyAgd2F0ZXI6IG51bWJlcjsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ251bWJlcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBjb21wbGV4IGVsZW1lbnRhbCBjb21wYXRpYmlsaXR5IG1hdHJpY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgY29tcGF0aWJpbGl0eU1hdHJpeDogUmVjb3JkPHN0cmluZywgYW55PiA9IGJ1aWxkRWxlbWVudGFsTWF0cml4KCk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9lbGVtZW50YWwvY29tcGF0aWJpbGl0eS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2Z1bmN0aW9uIGJ1aWxkRWxlbWVudGFsTWF0cml4KCk6IFJlY29yZDxzdHJpbmcsIGFueT4geycsXG4gICAgICAgICAgICAnICByZXR1cm4geyBGaXJlOiB7IEZpcmU6IDAuOSwgV2F0ZXI6IDAuNyB9IH07J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2R5bmFtaWMnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1RyYW5zaXQgYW5kIFRpbWluZyBDYWxjdWxhdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgdHJhbnNpdCBkYXRlIHZhbGlkYXRpb24gbG9naWMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCB0cmFuc2l0RGF0YTogYW55ID0gdmFsaWRhdGVUcmFuc2l0RGF0ZShwbGFuZXQsIGRhdGUsIHNpZ24pOycsXG4gICAgICAgICAgJ3NyYy91dGlscy9wbGFuZXRhcnlDb25zaXN0ZW5jeUNoZWNrLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVHJhbnNpdERhdGUocGxhbmV0OiBzdHJpbmcsIGRhdGU6IERhdGUsIHNpZ246IHN0cmluZyk6IGFueSB7JyxcbiAgICAgICAgICAgICcgIGNvbnN0IHBsYW5ldERhdGEgPSByZXF1aXJlKGBAL2RhdGEvcGxhbmV0cy8ke3BsYW5ldC50b0xvd2VyQ2FzZSgpfWApOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCd0cmFuc2l0IGRhdGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgcmV0cm9ncmFkZSBtb3Rpb24gY2FsY3VsYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcmV0cm9ncmFkZURhdGE6IGFueSA9IGNhbGN1bGF0ZVJldHJvZ3JhZGVQaGFzZXMocGxhbmV0LCB5ZWFyKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL3JldHJvZ3JhZGUvbW90aW9uLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlUmV0cm9ncmFkZVBoYXNlcyhwbGFuZXQ6IHN0cmluZywgeWVhcjogbnVtYmVyKTogYW55IHsnLFxuICAgICAgICAgICAgJyAgY29uc3QgcGhhc2VzID0gZ2V0UmV0cm9ncmFkZVBoYXNlcyhwbGFuZXQsIHllYXIpOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdyZXRyb2dyYWRlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdBc3Ryb2xvZ2ljYWwgQ2hhcnQgQ2FsY3VsYXRpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGhvdXNlIHN5c3RlbSBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBob3VzZURhdGE6IGFueSA9IGNhbGN1bGF0ZUhvdXNlcyhsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2hvdXNlcy9zeXN0ZW1zLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgSG91c2VTeXN0ZW0gfSBmcm9tIFwiQC90eXBlcy9hc3Ryb2xvZ3lcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVIb3VzZXMobGF0OiBudW1iZXIsIGxvbjogbnVtYmVyLCB0aW1lOiBEYXRlKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignaG91c2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgYXNwZWN0IGNhbGN1bGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGFzcGVjdHM6IGFueVtdID0gY2FsY3VsYXRlQXNwZWN0cyhwbGFuZXRQb3NpdGlvbnMpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvYXNwZWN0cy9jYWxjdWxhdG9yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlQXNwZWN0cyhwb3NpdGlvbnM6IFBsYW5ldGFyeVBvc2l0aW9uW10pOiBhbnlbXSB7JyxcbiAgICAgICAgICAgICcgIGNvbnN0IGFzcGVjdHMgPSBbXTsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlY2lwZS9JbmdyZWRpZW50IFR5cGUgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ0luZ3JlZGllbnQgRGF0YSBUeXBlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgSW5ncmVkaWVudCBpbnRlcmZhY2UgZm9yIGluZ3JlZGllbnQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGluZ3JlZGllbnQ6IGFueSA9IGdldEluZ3JlZGllbnREYXRhKG5hbWUpOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL2luZ3JlZGllbnRzL3Byb2Nlc3Nvci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IEluZ3JlZGllbnQgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NJbmdyZWRpZW50KG5hbWU6IHN0cmluZyk6IEluZ3JlZGllbnQgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZG9tYWluQW5hbHlzaXMgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignSW5ncmVkaWVudCcpO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0luZ3JlZGllbnQnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyBpbmdyZWRpZW50IHN1YnR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0cyA9IFtcbiAgICAgICAgICBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICAgJ2NvbnN0IHNwaWNlOiBhbnkgPSBnZXRTcGljZVByb3BlcnRpZXMobmFtZSk7JyxcbiAgICAgICAgICAgICdzcmMvZGF0YS9pbmdyZWRpZW50cy9zcGljZXMudHMnLFxuICAgICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEVcbiAgICAgICAgICApLFxuICAgICAgICAgIGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgICAnY29uc3QgaGVyYjogYW55ID0gZ2V0SGVyYkRhdGEobmFtZSk7JyxcbiAgICAgICAgICAgICdzcmMvZGF0YS9pbmdyZWRpZW50cy9oZXJicy50cycsXG4gICAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRVxuICAgICAgICAgICksXG4gICAgICAgICAgY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAgICdjb25zdCB2ZWdldGFibGU6IGFueSA9IGdldFZlZ2V0YWJsZUluZm8obmFtZSk7JyxcbiAgICAgICAgICAgICdzcmMvZGF0YS9pbmdyZWRpZW50cy92ZWdldGFibGVzLnRzJyxcbiAgICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFXG4gICAgICAgICAgKVxuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAoY29uc3QgY29udGV4dCBvZiBjb250ZXh0cykge1xuICAgICAgICAgIGNvbnN0IGRvbWFpbkFuYWx5c2lzID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG5cbiAgICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLnN1Z2dlc3RlZFR5cGVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQuZmlsZVBhdGguaW5jbHVkZXMoJ3NwaWNlcycpKSB7XG4gICAgICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignU3BpY2UnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQuZmlsZVBhdGguaW5jbHVkZXMoJ2hlcmJzJykpIHtcbiAgICAgICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdIZXJiJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0LmZpbGVQYXRoLmluY2x1ZGVzKCd2ZWdldGFibGVzJykpIHtcbiAgICAgICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdWZWdldGFibGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBhcnJheSB0eXBlcyBmb3IgaW5ncmVkaWVudCBjb2xsZWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGluZ3JlZGllbnRzOiBhbnlbXSA9IGdldEFsbEluZ3JlZGllbnRzKCk7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvaW5ncmVkaWVudHMvY29sbGVjdGlvbi50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBnZXRBbGxJbmdyZWRpZW50cygpOiBJbmdyZWRpZW50W10geycsXG4gICAgICAgICAgICAnICByZXR1cm4gaW5ncmVkaWVudERhdGFiYXNlLmdldEFsbCgpOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnSW5ncmVkaWVudFtdJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgbnV0cml0aW9uYWwgaW5mbyB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IG51dHJpdGlvbjogYW55ID0gZ2V0TnV0cml0aW9uYWxEYXRhKGluZ3JlZGllbnQpOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL251dHJpdGlvbi9jYWxjdWxhdG9yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgTnV0cml0aW9uYWxJbmZvIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZU51dHJpdGlvbihpbmdyZWRpZW50OiBJbmdyZWRpZW50KTogTnV0cml0aW9uYWxJbmZvIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ051dHJpdGlvbmFsSW5mbycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnUmVjaXBlIERhdGEgVHlwZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IFJlY2lwZSBpbnRlcmZhY2UgZm9yIHJlY2lwZSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcmVjaXBlOiBhbnkgPSBidWlsZFJlY2lwZShpbmdyZWRpZW50cywgaW5zdHJ1Y3Rpb25zKTsnLFxuICAgICAgICAgICdzcmMvZGF0YS9yZWNpcGVzL2J1aWxkZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBSZWNpcGUsIEluZ3JlZGllbnQsIENvb2tpbmdJbnN0cnVjdGlvbiB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gYnVpbGRSZWNpcGUoaW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSwgaW5zdHJ1Y3Rpb25zOiBDb29raW5nSW5zdHJ1Y3Rpb25bXSk6IFJlY2lwZSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdSZWNpcGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBjb29raW5nIG1ldGhvZCB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IG1ldGhvZDogYW55ID0gc2VsZWN0Q29va2luZ01ldGhvZChpbmdyZWRpZW50cyk7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvY29va2luZy9tZXRob2RzLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgQ29va2luZ01ldGhvZCB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gc2VsZWN0T3B0aW1hbE1ldGhvZChpbmdyZWRpZW50czogSW5ncmVkaWVudFtdKTogQ29va2luZ01ldGhvZCB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdDb29raW5nTWV0aG9kJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgY3Vpc2luZSB0eXBlIGZvciBjdWx0dXJhbCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgY3Vpc2luZTogYW55ID0gaWRlbnRpZnlDdWlzaW5lVHlwZShyZWNpcGUpOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL2N1aXNpbmVzL2NsYXNzaWZpZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBDdWlzaW5lVHlwZSB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBjbGFzc2lmeUN1aXNpbmUocmVjaXBlOiBSZWNpcGUpOiBDdWlzaW5lVHlwZSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdDdWlzaW5lVHlwZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRXh0ZXJuYWwgRm9vZCBBUEkgUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIFNwb29uYWN1bGFyIEFQSSByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBzcG9vbmFjdWxhckRhdGE6IGFueSA9IGF3YWl0IHNwb29uYWN1bGFyQXBpLmdldFJlY2lwZShpZCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2V4dGVybmFsL3Nwb29uYWN1bGFyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnY2xhc3MgU3Bvb25hY3VsYXJTZXJ2aWNlIHsnLFxuICAgICAgICAgICAgJyAgYXN5bmMgZmV0Y2hSZWNpcGVEYXRhKHJlY2lwZUlkOiBudW1iZXIpOiBQcm9taXNlPGFueT4geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEkpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ0FQSScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBVU0RBIEZvb2QgRGF0YSBDZW50cmFsIHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHVzZGFSZXNwb25zZTogYW55ID0gYXdhaXQgdXNkYUFwaS5nZXRGb29kRGF0YShmZGNJZCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2V4dGVybmFsL3VzZGEudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdhc3luYyBmdW5jdGlvbiBmZXRjaE51dHJpdGlvbmFsRGF0YShmZGNJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHsnLFxuICAgICAgICAgICAgJyAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkubmFsLnVzZGEuZ292L2ZkYy92MS9mb29kLyR7ZmRjSWR9YCk7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ1VTREEnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0VsZW1lbnRhbCBQcm9wZXJ0aWVzIGluIFJlY2lwZSBDb250ZXh0JywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgRWxlbWVudGFsUHJvcGVydGllcyBmb3IgaW5ncmVkaWVudCBlbGVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGVsZW1lbnRzOiBhbnkgPSBpbmdyZWRpZW50LmVsZW1lbnRhbFByb3BlcnRpZXM7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvaW5ncmVkaWVudHMvZWxlbWVudGFsLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW50ZXJmYWNlIEluZ3JlZGllbnQgeycsXG4gICAgICAgICAgICAnICBlbGVtZW50YWxQcm9wZXJ0aWVzOiBFbGVtZW50YWxQcm9wZXJ0aWVzOycsXG4gICAgICAgICAgICAnfSdcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnRWxlbWVudGFsUHJvcGVydGllcycpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBkeW5hbWljIGVsZW1lbnRhbCBjYWxjdWxhdGlvbnMgaW4gcmVjaXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGhhcm1vbnk6IGFueSA9IGNhbGN1bGF0ZVJlY2lwZUhhcm1vbnkocmVjaXBlKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL3JlY2lwZS9oYXJtb255LnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlUmVjaXBlSGFybW9ueShyZWNpcGU6IFJlY2lwZSk6IGFueSB7JyxcbiAgICAgICAgICAgICcgIHJldHVybiByZWNpcGUuaW5ncmVkaWVudHMucmVkdWNlKChoYXJtb255LCBpbmdyZWRpZW50KSA9PiB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2hhcm1vbnknKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FtcGFpZ24gU3lzdGVtIEZsZXhpYmlsaXR5IFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICBkZXNjcmliZSgnRHluYW1pYyBDb25maWd1cmF0aW9uIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBjYW1wYWlnbiBjb25maWd1cmF0aW9uIGZsZXhpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgY2FtcGFpZ25Db25maWc6IGFueSA9IGxvYWREeW5hbWljQ29uZmlnKGVudmlyb25tZW50KTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vQ29uZmlnTG9hZGVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgQ29uZmlnTG9hZGVyIHsnLFxuICAgICAgICAgICAgJyAgbG9hZER5bmFtaWNDb25maWcoZW52OiBzdHJpbmcpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5EWU5BTUlDX0NPTkZJRyk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZHluYW1pYycpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBhZGFwdGl2ZSBzdHJhdGVneSBjb25maWd1cmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGFkYXB0aXZlU2V0dGluZ3M6IGFueSA9IGNhbGN1bGF0ZU9wdGltYWxTZXR0aW5ncyhtZXRyaWNzKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vQWRhcHRpdmVTdHJhdGVneS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnY2xhc3MgQWRhcHRpdmVTdHJhdGVneSB7JyxcbiAgICAgICAgICAgICcgIGNhbGN1bGF0ZU9wdGltYWxTZXR0aW5ncyhtZXRyaWNzOiBQcm9ncmVzc01ldHJpY3MpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdhZGFwdGl2ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtIGNvbmZpZ3VyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgaW50ZWxsaWdlbmNlQ29uZmlnOiBhbnkgPSBidWlsZEludGVsbGlnZW5jZVN5c3RlbShwYXJhbXMpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9JbnRlbGxpZ2VuY2VTeXN0ZW0udHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBJbnRlbGxpZ2VuY2VTeXN0ZW0geycsXG4gICAgICAgICAgICAnICBidWlsZEludGVsbGlnZW5jZVN5c3RlbShwYXJhbXM6IEludGVsbGlnZW5jZVBhcmFtcyk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2ludGVsbGlnZW5jZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnTWV0cmljcyBhbmQgUHJvZ3Jlc3MgVHJhY2tpbmcnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyB0eXBlcyBmb3Igd2VsbC1kZWZpbmVkIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBwcm9ncmVzczogYW55ID0gY2FsY3VsYXRlUHJvZ3Jlc3MoKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vUHJvZ3Jlc3NUcmFja2VyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBQcm9ncmVzc01ldHJpY3MgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlUHJvZ3Jlc3MoKTogUHJvZ3Jlc3NNZXRyaWNzIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1Byb2dyZXNzTWV0cmljcycpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBkeW5hbWljIG1ldHJpY3MgY2FsY3VsYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZHluYW1pY01ldHJpY3M6IGFueSA9IGFnZ3JlZ2F0ZU1ldHJpY3Moc291cmNlcyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL01ldHJpY3NBZ2dyZWdhdG9yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdmdW5jdGlvbiBhZ2dyZWdhdGVNZXRyaWNzKHNvdXJjZXM6IE1ldHJpY3NTb3VyY2VbXSk6IGFueSB7JyxcbiAgICAgICAgICAgICcgIHJldHVybiBzb3VyY2VzLnJlZHVjZSgoYWdnLCBzb3VyY2UpID0+ICh7IC4uLmFnZywgLi4uc291cmNlLmdldE1ldHJpY3MoKSB9KSwge30pOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdkeW5hbWljJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgVHlwZVNjcmlwdEVycm9yIGZvciBlcnJvciBhbmFseXNpcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGVycm9yczogYW55W10gPSBhbmFseXplVHlwZVNjcmlwdEVycm9ycygpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9UeXBlU2NyaXB0RXJyb3JBbmFseXplci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgVHlwZVNjcmlwdEVycm9yIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGFuYWx5emVUeXBlU2NyaXB0RXJyb3JzKCk6IFR5cGVTY3JpcHRFcnJvcltdIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1R5cGVTY3JpcHRFcnJvcltdJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdUb29sIEludGVncmF0aW9uIEZsZXhpYmlsaXR5JywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHRvb2wgaW50ZWdyYXRpb24gY29uZmlndXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCB0b29sQ29uZmlnOiBhbnkgPSBpbnRlZ3JhdGVFeHRlcm5hbFRvb2wodG9vbE5hbWUsIHNldHRpbmdzKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vVG9vbEludGVncmF0aW9uLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBUb29sSW50ZWdyYXRpb24geycsXG4gICAgICAgICAgICAnICBpbnRlZ3JhdGVFeHRlcm5hbFRvb2wobmFtZTogc3RyaW5nLCBzZXR0aW5nczogYW55KTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbigndG9vbCBpbnRlZ3JhdGlvbicpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSB2YWxpZGF0aW9uIGZyYW1ld29yayBmbGV4aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHZhbGlkYXRpb25SZXN1bHQ6IGFueSA9IHJ1blZhbGlkYXRpb24ocnVsZXMsIGRhdGEpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9WYWxpZGF0aW9uRnJhbWV3b3JrLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgVmFsaWRhdGlvbkZyYW1ld29yayB7JyxcbiAgICAgICAgICAgICcgIHJ1blZhbGlkYXRpb24ocnVsZXM6IFZhbGlkYXRpb25SdWxlW10sIGRhdGE6IGFueSk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3ZhbGlkYXRpb24nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1NhZmV0eSBQcm90b2NvbCBGbGV4aWJpbGl0eScsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBzYWZldHkgZXZlbnQgaGFuZGxpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBzYWZldHlFdmVudDogYW55ID0gY3JlYXRlU2FmZXR5RXZlbnQodHlwZSwgZGF0YSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1NhZmV0eVByb3RvY29sLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBTYWZldHlQcm90b2NvbCB7JyxcbiAgICAgICAgICAgICcgIGNyZWF0ZVNhZmV0eUV2ZW50KHR5cGU6IFNhZmV0eUV2ZW50VHlwZSwgZGF0YTogYW55KTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignc2FmZXR5Jyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHJvbGxiYWNrIG1lY2hhbmlzbSBmbGV4aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHJvbGxiYWNrRGF0YTogYW55ID0gcHJlcGFyZVJvbGxiYWNrKGNoYW5nZXMpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Sb2xsYmFja01hbmFnZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBSb2xsYmFja01hbmFnZXIgeycsXG4gICAgICAgICAgICAnICBwcmVwYXJlUm9sbGJhY2soY2hhbmdlczogRmlsZUNoYW5nZVtdKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbigncm9sbGJhY2snKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VydmljZSBMYXllciBJbnRlcmZhY2UgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ0FQSSBTZXJ2aWNlIEludGVyZmFjZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IEFwaVJlc3BvbnNlIGZvciBBUEkgc2VydmljZSByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCByZXNwb25zZTogYW55ID0gYXdhaXQgdGhpcy5odHRwQ2xpZW50LmdldChlbmRwb2ludCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2FwaS9CYXNlQXBpU2VydmljZS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgQmFzZUFwaVNlcnZpY2UgeycsXG4gICAgICAgICAgICAnICBhc3luYyBnZXQ8VD4oZW5kcG9pbnQ6IHN0cmluZyk6IFByb21pc2U8QXBpUmVzcG9uc2U8VD4+IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0FwaVJlc3BvbnNlPFQ+Jyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc3BlY2lmaWMgc2VydmljZSBpbnRlcmZhY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0cyA9IFtcbiAgICAgICAgICBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICAgJ2NvbnN0IHNlcnZpY2U6IGFueSA9IG5ldyBSZWNvbW1lbmRhdGlvblNlcnZpY2UoKTsnLFxuICAgICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9SZWNvbW1lbmRhdGlvblNlcnZpY2UudHMnLFxuICAgICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFXG4gICAgICAgICAgKSxcbiAgICAgICAgICBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICAgJ2NvbnN0IGFzdHJvU2VydmljZTogYW55ID0gbmV3IEFzdHJvbG9naWNhbFNlcnZpY2UoKTsnLFxuICAgICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9Bc3Ryb2xvZ2ljYWxTZXJ2aWNlLnRzJyxcbiAgICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRVxuICAgICAgICAgICksXG4gICAgICAgICAgY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAgICdjb25zdCByZWNpcGVTZXJ2aWNlOiBhbnkgPSBuZXcgUmVjaXBlU2VydmljZSgpOycsXG4gICAgICAgICAgICAnc3JjL3NlcnZpY2VzL1JlY2lwZVNlcnZpY2UudHMnLFxuICAgICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFXG4gICAgICAgICAgKVxuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAoY29uc3QgY29udGV4dCBvZiBjb250ZXh0cykge1xuICAgICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5maWxlUGF0aC5pbmNsdWRlcygnUmVjb21tZW5kYXRpb24nKSkge1xuICAgICAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdSZWNvbW1lbmRhdGlvblNlcnZpY2UnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQuZmlsZVBhdGguaW5jbHVkZXMoJ0FzdHJvbG9naWNhbCcpKSB7XG4gICAgICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0FzdHJvbG9naWNhbFNlcnZpY2UnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQuZmlsZVBhdGguaW5jbHVkZXMoJ1JlY2lwZScpKSB7XG4gICAgICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1JlY2lwZVNlcnZpY2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgZXh0ZXJuYWwgc2VydmljZSBpbnRlZ3JhdGlvbiBmbGV4aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGV4dGVybmFsU2VydmljZTogYW55ID0gY3JlYXRlRXh0ZXJuYWxTZXJ2aWNlQ2xpZW50KGNvbmZpZyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2V4dGVybmFsL0V4dGVybmFsU2VydmljZUZhY3RvcnkudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIEV4dGVybmFsU2VydmljZUZhY3RvcnkgeycsXG4gICAgICAgICAgICAnICBjcmVhdGVFeHRlcm5hbFNlcnZpY2VDbGllbnQoY29uZmlnOiBTZXJ2aWNlQ29uZmlnKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZXh0ZXJuYWwgc2VydmljZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRGF0YSBUcmFuc2Zvcm1hdGlvbiBTZXJ2aWNlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc3BlY2lmaWMgdHJhbnNmb3JtZXIgaW50ZXJmYWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHRyYW5zZm9ybWVyOiBhbnkgPSBuZXcgRGF0YVRyYW5zZm9ybWVyKCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2RhdGEvRGF0YVRyYW5zZm9ybWVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBEYXRhVHJhbnNmb3JtZXIgeycsXG4gICAgICAgICAgICAnICB0cmFuc2Zvcm08VCwgVT4oZGF0YTogVCk6IFUgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnRGF0YVRyYW5zZm9ybWVyJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgbWFwcGVyIGludGVyZmFjZXMgZm9yIGRhdGEgbWFwcGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IG1hcHBlcjogYW55ID0gY3JlYXRlTWFwcGVyKHNvdXJjZVNjaGVtYSwgdGFyZ2V0U2NoZW1hKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvZGF0YS9TY2hlbWFNYXBwZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hcHBlcihzb3VyY2U6IFNjaGVtYSwgdGFyZ2V0OiBTY2hlbWEpOiBhbnkgeycsXG4gICAgICAgICAgICAnICByZXR1cm4gbmV3IFNjaGVtYU1hcHBlcihzb3VyY2UsIHRhcmdldCk7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdTY2hlbWFNYXBwZXInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0NhY2hpbmcgU2VydmljZSBJbnRlcmZhY2UgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBjYWNoZSBpbnRlcmZhY2UgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBjYWNoZTogYW55ID0gbmV3IENhY2hlU2VydmljZSgpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYWNoZS9DYWNoZVNlcnZpY2UudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIENhY2hlU2VydmljZSB7JyxcbiAgICAgICAgICAgICcgIGdldDxUPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0NhY2hlU2VydmljZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IGNhY2hlIGVudHJ5IHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZW50cnk6IGFueSA9IGNhY2hlLmdldChrZXkpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYWNoZS9DYWNoZU1hbmFnZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnY2xhc3MgQ2FjaGVNYW5hZ2VyIHsnLFxuICAgICAgICAgICAgJyAgYXN5bmMgZ2V0Q2FjaGVFbnRyeShrZXk6IHN0cmluZyk6IFByb21pc2U8Q2FjaGVFbnRyeSB8IG51bGw+IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0NhY2hlRW50cnkgfCBudWxsJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdWYWxpZGF0aW9uIFNlcnZpY2UgSW50ZXJmYWNlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgdmFsaWRhdGlvbiByZXN1bHQgaW50ZXJmYWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHJlc3VsdDogYW55ID0gdmFsaWRhdG9yLnZhbGlkYXRlKGRhdGEpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy92YWxpZGF0aW9uL1ZhbGlkYXRpb25TZXJ2aWNlLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBWYWxpZGF0aW9uU2VydmljZSB7JyxcbiAgICAgICAgICAgICcgIHZhbGlkYXRlKGRhdGE6IHVua25vd24pOiBWYWxpZGF0aW9uUmVzdWx0IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1ZhbGlkYXRpb25SZXN1bHQnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzY2hlbWEgdmFsaWRhdGlvbiBpbnRlcmZhY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3Qgc2NoZW1hOiBhbnkgPSBidWlsZFZhbGlkYXRpb25TY2hlbWEocnVsZXMpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy92YWxpZGF0aW9uL1NjaGVtYUJ1aWxkZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgVmFsaWRhdGlvblNjaGVtYSB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBidWlsZFZhbGlkYXRpb25TY2hlbWEocnVsZXM6IFZhbGlkYXRpb25SdWxlW10pOiBWYWxpZGF0aW9uU2NoZW1hIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1ZhbGlkYXRpb25TY2hlbWEnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1NlcnZpY2UgRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgc2VydmljZSBlcnJvciBoYW5kbGluZyBmbGV4aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGVycm9yOiBhbnkgPSBuZXcgU2VydmljZUVycm9yKG1lc3NhZ2UsIGNvZGUpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9lcnJvcnMvU2VydmljZUVycm9yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBTZXJ2aWNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7JyxcbiAgICAgICAgICAgICcgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29kZTogc3RyaW5nLCBkZXRhaWxzPzogYW55KSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2Vycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc3BlY2lmaWMgZXJyb3IgdHlwZXMgd2hlbiBhdmFpbGFibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBhcGlFcnJvcjogYW55ID0gaGFuZGxlQXBpRXJyb3IocmVzcG9uc2UpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9lcnJvcnMvQXBpRXJyb3JIYW5kbGVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IEFwaUVycm9yIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGhhbmRsZUFwaUVycm9yKHJlc3BvbnNlOiBSZXNwb25zZSk6IEFwaUVycm9yIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0FwaUVycm9yJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Nyb3NzLURvbWFpbiBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG1peGVkIGRvbWFpbiBjb250ZXh0cyBhcHByb3ByaWF0ZWx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCBhIHNlcnZpY2UgdGhhdCBpbnRlZ3JhdGVzIGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMgd2l0aCByZWNpcGUgcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgJ2NvbnN0IHJlY29tbWVuZGF0aW9uOiBhbnkgPSBhd2FpdCBhc3Ryb1JlY2lwZVNlcnZpY2UuZ2V0UmVjb21tZW5kYXRpb24odXNlckNoYXJ0LCBwcmVmZXJlbmNlcyk7JyxcbiAgICAgICAgJ3NyYy9zZXJ2aWNlcy9Bc3Ryb2xvZ2ljYWxSZWNpcGVTZXJ2aWNlLnRzJyxcbiAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICBbXG4gICAgICAgICAgJ2V4cG9ydCBjbGFzcyBBc3Ryb2xvZ2ljYWxSZWNpcGVTZXJ2aWNlIHsnLFxuICAgICAgICAgICcgIGFzeW5jIGdldFJlY29tbWVuZGF0aW9uKGNoYXJ0OiBBc3Ryb2xvZ3lDaGFydCwgcHJlZnM6IFVzZXJQcmVmZXJlbmNlcyk6IFByb21pc2U8UmVjaXBlUmVjb21tZW5kYXRpb24+IHsnXG4gICAgICAgIF1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnUmVjaXBlUmVjb21tZW5kYXRpb24nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBjYW1wYWlnbiBzeXN0ZW0gaW50ZWdyYXRpb24gd2l0aCBkb21haW4gc2VydmljZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgJ2NvbnN0IGNhbXBhaWduRGF0YTogYW55ID0gaW50ZWdyYXRlRG9tYWluU2VydmljZXMoc2VydmljZXMpOycsXG4gICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vRG9tYWluSW50ZWdyYXRpb24udHMnLFxuICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICBbXG4gICAgICAgICAgJ2NsYXNzIERvbWFpbkludGVncmF0aW9uIHsnLFxuICAgICAgICAgICcgIGludGVncmF0ZURvbWFpblNlcnZpY2VzKHNlcnZpY2VzOiBEb21haW5TZXJ2aWNlW10pOiBhbnkgeydcbiAgICAgICAgXVxuICAgICAgKTtcblxuICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2ludGVncmF0aW9uJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUeXBlIFJlcGxhY2VtZW50IEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBhcHBseSBkb21haW4tc3BlY2lmaWMgcmVwbGFjZW1lbnRzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcGxhY2VtZW50czogVHlwZVJlcGxhY2VtZW50W10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBvcmlnaW5hbDogJ2FueScsXG4gICAgICAgICAgcmVwbGFjZW1lbnQ6ICdJbmdyZWRpZW50JyxcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9kYXRhL2luZ3JlZGllbnRzL3Byb2Nlc3Nvci50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMSxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgICAgdmFsaWRhdGlvblJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBvcmlnaW5hbDogJ2FueScsXG4gICAgICAgICAgcmVwbGFjZW1lbnQ6ICdQbGFuZXRhcnlQb3NpdGlvbicsXG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3BsYW5ldGFyeS9wb3NpdGlvbnMudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDEsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC44LFxuICAgICAgICAgIHZhbGlkYXRpb25SZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgb3JpZ2luYWw6ICdhbnknLFxuICAgICAgICAgIHJlcGxhY2VtZW50OiAnUHJvZ3Jlc3NNZXRyaWNzJyxcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Qcm9ncmVzc1RyYWNrZXIudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDEsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC45LFxuICAgICAgICAgIHZhbGlkYXRpb25SZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICAvLyBNb2NrIGZpbGUgc3lzdGVtIGZvciBkb21haW4tc3BlY2lmaWMgY29udGVudFxuICAgICAgamVzdC5zcHlPbihyZXF1aXJlKCdmcycpLCAncmVhZEZpbGVTeW5jJykubW9ja0ltcGxlbWVudGF0aW9uKChwYXRoOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoJ2luZ3JlZGllbnRzJykpIHJldHVybiAnY29uc3QgaW5ncmVkaWVudDogYW55ID0gZ2V0RGF0YSgpOyc7XG4gICAgICAgIGlmIChwYXRoLmluY2x1ZGVzKCdwbGFuZXRhcnknKSkgcmV0dXJuICdjb25zdCBwb3NpdGlvbjogYW55ID0gY2FsY3VsYXRlKCk7JztcbiAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoJ2NhbXBhaWduJykpIHJldHVybiAnY29uc3QgbWV0cmljczogYW55ID0gZ2V0UHJvZ3Jlc3MoKTsnO1xuICAgICAgICByZXR1cm4gJ2JhY2t1cCBjb250ZW50JztcbiAgICAgIH0pO1xuXG4gICAgICBqZXN0LnNweU9uKHJlcXVpcmUoJ2ZzJyksICd3cml0ZUZpbGVTeW5jJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHVuZGVmaW5lZCk7XG4gICAgICBqZXN0LnNweU9uKHJlcXVpcmUoJ2ZzJyksICdleGlzdHNTeW5jJykubW9ja1JldHVyblZhbHVlKHRydWUpO1xuXG4gICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgY29tcGlsYXRpb25cbiAgICAgIGplc3Quc3B5T24ocmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpLCAnZXhlY1N5bmMnKS5tb2NrUmV0dXJuVmFsdWUoJycpO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJlcGxhY2VtZW50cy5tYXAocmVwbGFjZW1lbnQgPT4gcmVwbGFjZXIuYXBwbHlSZXBsYWNlbWVudChyZXBsYWNlbWVudCkpXG4gICAgICApO1xuXG4gICAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmFwcGxpZWRSZXBsYWNlbWVudHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9