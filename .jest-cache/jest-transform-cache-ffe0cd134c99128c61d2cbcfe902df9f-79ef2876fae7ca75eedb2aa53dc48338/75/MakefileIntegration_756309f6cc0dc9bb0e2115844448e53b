3ddaf451f132c0c2fc80874d1cb92839
"use strict";
/**
 * Makefile Integration System
 *
 * Integrates with existing make commands and implements campaign-specific
 * make targets for phase execution and progress reporting.
 *
 * Requirements: 7.7
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MakefileIntegration = void 0;
const child_process_1 = require("child_process");
const fs_1 = __importDefault(require("fs"));
/**
 * Makefile Integration for Campaign Execution Framework
 */
class MakefileIntegration {
    constructor(makefilePath = 'Makefile') {
        this.makefilePath = makefilePath;
        this.campaignTargets = new Map();
        this.initializeCampaignTargets();
    }
    /**
     * Initialize campaign-specific make targets
     */
    initializeCampaignTargets() {
        // Campaign Phase Execution Targets
        this.campaignTargets.set('campaign-phase1', {
            name: 'campaign-phase1',
            description: 'Execute Phase 1: TypeScript Error Elimination',
            commands: [
                '@echo "🎯 Starting Phase 1: TypeScript Error Elimination"',
                '@echo "Target: Zero TypeScript compilation errors"',
                'node src/services/campaign/CampaignController.js --phase=1 --execute',
                '@make campaign-validate-phase1',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-phase2', {
            name: 'campaign-phase2',
            description: 'Execute Phase 2: Linting Excellence Achievement',
            dependencies: ['campaign-validate-phase1'],
            commands: [
                '@echo "🎯 Starting Phase 2: Linting Excellence Achievement"',
                '@echo "Target: Zero linting warnings"',
                'node src/services/campaign/CampaignController.js --phase=2 --execute',
                '@make campaign-validate-phase2',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-phase3', {
            name: 'campaign-phase3',
            description: 'Execute Phase 3: Enterprise Intelligence Transformation',
            dependencies: ['campaign-validate-phase2'],
            commands: [
                '@echo "🎯 Starting Phase 3: Enterprise Intelligence Transformation"',
                '@echo "Target: Transform all unused exports to intelligence systems"',
                'node src/services/campaign/CampaignController.js --phase=3 --execute',
                '@make campaign-validate-phase3',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-phase4', {
            name: 'campaign-phase4',
            description: 'Execute Phase 4: Performance Optimization Maintenance',
            dependencies: ['campaign-validate-phase3'],
            commands: [
                '@echo "🎯 Starting Phase 4: Performance Optimization Maintenance"',
                '@echo "Target: Maintain <10s build times and performance targets"',
                'node src/services/campaign/CampaignController.js --phase=4 --execute',
                '@make campaign-validate-phase4',
            ],
            phony: true,
        });
        // Campaign Validation Targets
        this.campaignTargets.set('campaign-validate-phase1', {
            name: 'campaign-validate-phase1',
            description: 'Validate Phase 1 completion (zero TypeScript errors)',
            commands: [
                '@echo "🔍 Validating Phase 1 completion..."',
                '@ERRORS=$$(yarn tsc --noEmit --skipLibCheck 2>&1 | grep -c "error TS" || echo "0"); \\',
                'if [ "$$ERRORS" -eq 0 ]; then \\',
                '  echo "✅ Phase 1 COMPLETE: Zero TypeScript errors achieved!"; \\',
                'else \\',
                '  echo "❌ Phase 1 INCOMPLETE: $$ERRORS TypeScript errors remaining"; \\',
                '  exit 1; \\',
                'fi',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-validate-phase2', {
            name: 'campaign-validate-phase2',
            description: 'Validate Phase 2 completion (zero linting warnings)',
            commands: [
                '@echo "🔍 Validating Phase 2 completion..."',
                '@WARNINGS=$$(yarn lint 2>&1 | grep -c "warning" || echo "0"); \\',
                'if [ "$$WARNINGS" -eq 0 ]; then \\',
                '  echo "✅ Phase 2 COMPLETE: Zero linting warnings achieved!"; \\',
                'else \\',
                '  echo "❌ Phase 2 INCOMPLETE: $$WARNINGS linting warnings remaining"; \\',
                '  exit 1; \\',
                'fi',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-validate-phase3', {
            name: 'campaign-validate-phase3',
            description: 'Validate Phase 3 completion (all exports transformed)',
            commands: [
                '@echo "🔍 Validating Phase 3 completion..."',
                '@SYSTEMS=$$(grep -r "INTELLIGENCE_SYSTEM" src/ | wc -l || echo "0"); \\',
                'if [ "$$SYSTEMS" -ge 200 ]; then \\',
                '  echo "✅ Phase 3 COMPLETE: $$SYSTEMS enterprise intelligence systems active!"; \\',
                'else \\',
                '  echo "❌ Phase 3 INCOMPLETE: Only $$SYSTEMS intelligence systems (target: 200+)"; \\',
                '  exit 1; \\',
                'fi',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-validate-phase4', {
            name: 'campaign-validate-phase4',
            description: 'Validate Phase 4 completion (performance targets met)',
            commands: [
                '@echo "🔍 Validating Phase 4 completion..."',
                '@BUILD_TIME=$$(time yarn build 2>&1 | grep real | cut -d"m" -f2 | cut -d"s" -f1 || echo "999"); \\',
                'if [ "$$(echo "$$BUILD_TIME < 10" | bc -l)" -eq 1 ]; then \\',
                '  echo "✅ Phase 4 COMPLETE: Build time $$BUILD_TIME seconds (target: <10s)"; \\',
                'else \\',
                '  echo "❌ Phase 4 INCOMPLETE: Build time $$BUILD_TIME seconds exceeds 10s target"; \\',
                '  exit 1; \\',
                'fi',
            ],
            phony: true,
        });
        // Campaign Progress and Reporting Targets
        this.campaignTargets.set('campaign-status', {
            name: 'campaign-status',
            description: 'Show comprehensive campaign progress status',
            commands: [
                '@echo "📊 PERFECT CODEBASE CAMPAIGN STATUS"',
                '@echo "=================================="',
                '@echo ""',
                '@echo "📈 Current Metrics:"',
                '@echo "TypeScript Errors: $$(yarn tsc --noEmit --skipLibCheck 2>&1 | grep -c "error TS" || echo "0")"',
                '@echo "Linting Warnings: $$(yarn lint 2>&1 | grep -c "warning" || echo "0")"',
                '@echo "Enterprise Systems: $$(grep -r "INTELLIGENCE_SYSTEM" src/ | wc -l || echo "0")"',
                '@echo "Build Time: $$(time yarn build >/dev/null 2>&1 && echo "Build successful" || echo "Build failed")"',
                '@echo ""',
                '@echo "🎯 Phase Status:"',
                '@make campaign-validate-phase1 2>/dev/null && echo "✅ Phase 1: TypeScript Errors" || echo "❌ Phase 1: TypeScript Errors"',
                '@make campaign-validate-phase2 2>/dev/null && echo "✅ Phase 2: Linting Warnings" || echo "❌ Phase 2: Linting Warnings"',
                '@make campaign-validate-phase3 2>/dev/null && echo "✅ Phase 3: Enterprise Intelligence" || echo "❌ Phase 3: Enterprise Intelligence"',
                '@make campaign-validate-phase4 2>/dev/null && echo "✅ Phase 4: Performance Optimization" || echo "❌ Phase 4: Performance Optimization"',
                '@echo ""',
                '@echo "🚀 Next Steps:"',
                '@echo "Run: make campaign-execute-next"',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-execute-next', {
            name: 'campaign-execute-next',
            description: 'Execute the next incomplete campaign phase',
            commands: [
                '@echo "🎯 Determining next campaign phase..."',
                '@if ! make campaign-validate-phase1 >/dev/null 2>&1; then \\',
                '  echo "▶️ Executing Phase 1: TypeScript Error Elimination"; \\',
                '  make campaign-phase1; \\',
                'elif ! make campaign-validate-phase2 >/dev/null 2>&1; then \\',
                '  echo "▶️ Executing Phase 2: Linting Excellence Achievement"; \\',
                '  make campaign-phase2; \\',
                'elif ! make campaign-validate-phase3 >/dev/null 2>&1; then \\',
                '  echo "▶️ Executing Phase 3: Enterprise Intelligence Transformation"; \\',
                '  make campaign-phase3; \\',
                'elif ! make campaign-validate-phase4 >/dev/null 2>&1; then \\',
                '  echo "▶️ Executing Phase 4: Performance Optimization Maintenance"; \\',
                '  make campaign-phase4; \\',
                'else \\',
                '  echo "🎉 ALL PHASES COMPLETE! Perfect Codebase Campaign achieved!"; \\',
                '  make campaign-celebration; \\',
                'fi',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-celebration', {
            name: 'campaign-celebration',
            description: 'Celebrate campaign completion',
            commands: [
                '@echo "🎉🎉🎉 PERFECT CODEBASE CAMPAIGN COMPLETE! 🎉🎉🎉"',
                '@echo ""',
                '@echo "🏆 ACHIEVEMENTS UNLOCKED:"',
                '@echo "✅ Zero TypeScript compilation errors"',
                '@echo "✅ Zero linting warnings"',
                '@echo "✅ 200+ enterprise intelligence systems"',
                '@echo "✅ Sub-10 second build times"',
                '@echo "✅ 100% build stability maintained"',
                '@echo ""',
                '@echo "📊 Final Metrics:"',
                '@make campaign-status',
                '@echo ""',
                '@echo "🚀 Ready for production deployment!"',
            ],
            phony: true,
        });
        // Campaign Safety and Recovery Targets
        this.campaignTargets.set('campaign-safety-check', {
            name: 'campaign-safety-check',
            description: 'Comprehensive safety validation before campaign execution',
            commands: [
                '@echo "🛡️ Campaign Safety Check"',
                '@echo "======================"',
                '@echo ""',
                '@echo "1. Git Status Check:"',
                '@git status --porcelain | wc -l | xargs -I {} echo "Uncommitted changes: {}"',
                '@echo ""',
                '@echo "2. Build Stability Check:"',
                '@yarn build >/dev/null 2>&1 && echo "✅ Build stable" || echo "❌ Build unstable"',
                '@echo ""',
                '@echo "3. Test Suite Check:"',
                '@yarn test --run >/dev/null 2>&1 && echo "✅ Tests passing" || echo "❌ Tests failing"',
                '@echo ""',
                '@echo "4. Script Availability Check:"',
                '@test -f scripts/typescript-fixes/fix-typescript-errors-enhanced-v3.js && echo "✅ Enhanced TypeScript Fixer available" || echo "❌ Enhanced TypeScript Fixer missing"',
                '@test -f scripts/typescript-fixes/fix-explicit-any-systematic.js && echo "✅ Explicit-Any Fixer available" || echo "❌ Explicit-Any Fixer missing"',
                '@echo ""',
                '@echo "🎯 Safety Status: Ready for campaign execution"',
            ],
            phony: true,
        });
        this.campaignTargets.set('campaign-emergency-rollback', {
            name: 'campaign-emergency-rollback',
            description: 'Emergency rollback to last safe state',
            commands: [
                '@echo "🚨 EMERGENCY ROLLBACK INITIATED"',
                '@echo "==============================="',
                '@echo ""',
                '@echo "1. Checking for git stashes..."',
                '@git stash list | head -5',
                '@echo ""',
                '@echo "2. Recent commits with checkpoints:"',
                '@git log --oneline --grep="checkpoint\\|Phase" -5',
                '@echo ""',
                '@echo "⚠️ MANUAL ACTION REQUIRED:"',
                '@echo "Choose recovery option:"',
                '@echo "  git stash apply stash@{0}  # Apply most recent stash"',
                '@echo "  git reset --hard <commit>  # Reset to specific commit"',
                '@echo ""',
                '@echo "After recovery, run: make campaign-safety-check"',
            ],
            phony: true,
        });
        // Integration with existing make targets
        this.campaignTargets.set('campaign-errors-analysis', {
            name: 'campaign-errors-analysis',
            description: 'Enhanced error analysis for campaign planning',
            commands: [
                '@echo "📊 Campaign-Focused Error Analysis"',
                '@echo "================================="',
                '@make errors-by-type',
                '@echo ""',
                '@echo "🎯 Phase 1 Target Errors:"',
                '@yarn tsc --noEmit --skipLibCheck 2>&1 | grep -E "(TS2352|TS2345|TS2698|TS2304|TS2362)" | wc -l | xargs -I {} echo "High-priority errors: {}"',
                '@echo ""',
                '@echo "🎯 Phase 2 Target Warnings:"',
                '@yarn lint 2>&1 | grep -E "(no-explicit-any|no-unused-vars|no-console)" | wc -l | xargs -I {} echo "Target linting warnings: {}"',
                '@echo ""',
                '@make errors-by-file | head -10',
            ],
            phony: true,
        });
    }
    /**
     * Execute a make target
     */
    async executeMakeTarget(target, options = {}) {
        const { silent = false, dryRun = false, timeout = 300000 } = options;
        console.log(`🔨 Executing make target: ${target}`);
        if (dryRun) {
            console.log(`🔍 DRY RUN: Would execute 'make ${target}'`);
            return {
                success: true,
                exitCode: 0,
                output: `DRY RUN: make ${target}`,
                executionTime: 0,
                target,
            };
        }
        const startTime = Date.now();
        try {
            const output = (0, child_process_1.execSync)(`make ${target}`, {
                encoding: 'utf8',
                stdio: silent ? 'pipe' : 'inherit',
                timeout,
                maxBuffer: 10 * 1024 * 1024, // 10MB buffer
            });
            const executionTime = Date.now() - startTime;
            return {
                success: true,
                exitCode: 0,
                output: output || '',
                executionTime,
                target,
            };
        }
        catch (error) {
            const executionTime = Date.now() - startTime;
            return {
                success: false,
                exitCode: error.status || 1,
                output: error.stdout || error.message || '',
                executionTime,
                target,
            };
        }
    }
    /**
     * Get current campaign progress
     */
    async getCampaignProgress() {
        try {
            // Get TypeScript errors count
            const tsErrorsResult = await this.executeMakeTarget('errors', {
                silent: true,
            });
            const tsErrors = this.parseErrorCount(tsErrorsResult.output);
            // Get linting warnings count
            const lintResult = (0, child_process_1.execSync)('yarn lint 2>&1 | grep -c "warning" || echo "0"', {
                encoding: 'utf8',
            });
            const lintingWarnings = parseInt(lintResult.trim()) || 0;
            // Get enterprise systems count
            const systemsResult = (0, child_process_1.execSync)('grep -r "INTELLIGENCE_SYSTEM" src/ | wc -l || echo "0"', {
                encoding: 'utf8',
            });
            const enterpriseSystems = parseInt(systemsResult.trim()) || 0;
            // Get build time (approximate)
            let buildTime = 0;
            try {
                const buildStart = Date.now();
                (0, child_process_1.execSync)('yarn build', { stdio: 'pipe', timeout: 60000 });
                buildTime = Date.now() - buildStart;
            }
            catch (error) {
                buildTime = -1; // Build failed
            }
            // Determine current phase
            let currentPhase = 1;
            if (tsErrors === 0)
                currentPhase = 2;
            if (tsErrors === 0 && lintingWarnings === 0)
                currentPhase = 3;
            if (tsErrors === 0 && lintingWarnings === 0 && enterpriseSystems >= 200)
                currentPhase = 4;
            if (tsErrors === 0 &&
                lintingWarnings === 0 &&
                enterpriseSystems >= 200 &&
                buildTime > 0 &&
                buildTime < 10000) {
                currentPhase = 5; // Complete
            }
            return {
                currentPhase,
                totalPhases: 4,
                typeScriptErrors: tsErrors,
                lintingWarnings,
                buildTime,
                enterpriseSystems,
                lastUpdate: new Date(),
            };
        }
        catch (error) {
            console.warn('⚠️ Could not get campaign progress:', error);
            return {
                currentPhase: 1,
                totalPhases: 4,
                typeScriptErrors: -1,
                lintingWarnings: -1,
                buildTime: -1,
                enterpriseSystems: -1,
                lastUpdate: new Date(),
            };
        }
    }
    /**
     * Add campaign targets to existing Makefile
     */
    async addCampaignTargetsToMakefile() {
        try {
            if (!fs_1.default.existsSync(this.makefilePath)) {
                console.warn(`⚠️ Makefile not found at ${this.makefilePath}`);
                return false;
            }
            let makefileContent = fs_1.default.readFileSync(this.makefilePath, 'utf8');
            // Check if campaign targets already exist
            if (makefileContent.includes('# Campaign Execution Framework')) {
                console.log('✅ Campaign targets already exist in Makefile');
                return true;
            }
            // Add campaign targets section
            const campaignSection = this.generateCampaignMakefileSection();
            makefileContent += '\n' + campaignSection;
            // Write updated Makefile
            fs_1.default.writeFileSync(this.makefilePath, makefileContent, 'utf8');
            console.log('✅ Campaign targets added to Makefile');
            return true;
        }
        catch (error) {
            console.error('❌ Failed to add campaign targets to Makefile:', error);
            return false;
        }
    }
    /**
     * Generate campaign Makefile section
     */
    generateCampaignMakefileSection() {
        const lines = [
            '',
            '# Campaign Execution Framework',
            '# Perfect Codebase Campaign - Systematic Excellence Initiative',
            '',
        ];
        // Add phony declaration
        const phonyTargets = Array.from(this.campaignTargets.values())
            .filter(target => target.phony)
            .map(target => target.name);
        if (phonyTargets.length > 0) {
            lines.push(`.PHONY: ${phonyTargets.join(' ')}`);
            lines.push('');
        }
        // Add each target
        for (const target of this.campaignTargets.values()) {
            lines.push(`# ${target.description}`);
            let targetLine = `${target.name}:`;
            if (target.dependencies && target.dependencies.length > 0) {
                targetLine += ` ${target.dependencies.join(' ')}`;
            }
            lines.push(targetLine);
            for (const command of target.commands) {
                lines.push(`\t${command}`);
            }
            lines.push('');
        }
        return lines.join('\n');
    }
    /**
     * Parse error count from make output
     */
    parseErrorCount(output) {
        const lines = output.split('\n');
        for (const line of lines) {
            const match = line.match(/(\d+)/);
            if (match) {
                return parseInt(match[1]);
            }
        }
        return 0;
    }
    /**
     * Get available campaign targets
     */
    getCampaignTargets() {
        return Array.from(this.campaignTargets.values());
    }
    /**
     * Validate that required make targets exist
     */
    async validateExistingTargets() {
        const requiredTargets = [
            'errors',
            'errors-by-type',
            'errors-by-file',
            'check',
            'build',
            'test',
            'lint',
        ];
        const missing = [];
        for (const target of requiredTargets) {
            try {
                await this.executeMakeTarget(target, { silent: true, timeout: 5000 });
            }
            catch (error) {
                missing.push(target);
            }
        }
        return {
            valid: missing.length === 0,
            missing,
        };
    }
}
exports.MakefileIntegration = MakefileIntegration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9NYWtlZmlsZUludGVncmF0aW9uLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztHQU9HOzs7Ozs7QUFFSCxpREFBeUM7QUFDekMsNENBQW9CO0FBNkJwQjs7R0FFRztBQUNILE1BQWEsbUJBQW1CO0lBSTlCLFlBQVksZUFBdUIsVUFBVTtRQUMzQyxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUM7SUFDbkMsQ0FBQztJQUVEOztPQUVHO0lBQ0sseUJBQXlCO1FBQy9CLG1DQUFtQztRQUNuQyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3ZCLFdBQVcsRUFBRSwrQ0FBK0M7WUFDNUQsUUFBUSxFQUFFO2dCQUNSLDJEQUEyRDtnQkFDM0Qsb0RBQW9EO2dCQUNwRCxzRUFBc0U7Z0JBQ3RFLGdDQUFnQzthQUNqQztZQUNELEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUU7WUFDMUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN2QixXQUFXLEVBQUUsaURBQWlEO1lBQzlELFlBQVksRUFBRSxDQUFDLDBCQUEwQixDQUFDO1lBQzFDLFFBQVEsRUFBRTtnQkFDUiw2REFBNkQ7Z0JBQzdELHVDQUF1QztnQkFDdkMsc0VBQXNFO2dCQUN0RSxnQ0FBZ0M7YUFDakM7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO1lBQzFDLElBQUksRUFBRSxpQkFBaUI7WUFDdkIsV0FBVyxFQUFFLHlE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QzthQUN0QjtTQUNGO1FBRUQsT0FBTztZQUNMLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUM7WUFDM0IsT0FBTztTQUNSLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUF2aEJELGtEQXVoQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9NYWtlZmlsZUludGVncmF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFrZWZpbGUgSW50ZWdyYXRpb24gU3lzdGVtXG4gKlxuICogSW50ZWdyYXRlcyB3aXRoIGV4aXN0aW5nIG1ha2UgY29tbWFuZHMgYW5kIGltcGxlbWVudHMgY2FtcGFpZ24tc3BlY2lmaWNcbiAqIG1ha2UgdGFyZ2V0cyBmb3IgcGhhc2UgZXhlY3V0aW9uIGFuZCBwcm9ncmVzcyByZXBvcnRpbmcuXG4gKlxuICogUmVxdWlyZW1lbnRzOiA3LjdcbiAqL1xuXG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1ha2VUYXJnZXQge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGRlcGVuZGVuY2llcz86IHN0cmluZ1tdO1xuICBjb21tYW5kczogc3RyaW5nW107XG4gIHBob255PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYWtlRXhlY3V0aW9uUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXhpdENvZGU6IG51bWJlcjtcbiAgb3V0cHV0OiBzdHJpbmc7XG4gIGV4ZWN1dGlvblRpbWU6IG51bWJlcjtcbiAgdGFyZ2V0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FtcGFpZ25Qcm9ncmVzcyB7XG4gIGN1cnJlbnRQaGFzZTogbnVtYmVyO1xuICB0b3RhbFBoYXNlczogbnVtYmVyO1xuICB0eXBlU2NyaXB0RXJyb3JzOiBudW1iZXI7XG4gIGxpbnRpbmdXYXJuaW5nczogbnVtYmVyO1xuICBidWlsZFRpbWU6IG51bWJlcjtcbiAgZW50ZXJwcmlzZVN5c3RlbXM6IG51bWJlcjtcbiAgbGFzdFVwZGF0ZTogRGF0ZTtcbn1cblxuLyoqXG4gKiBNYWtlZmlsZSBJbnRlZ3JhdGlvbiBmb3IgQ2FtcGFpZ24gRXhlY3V0aW9uIEZyYW1ld29ya1xuICovXG5leHBvcnQgY2xhc3MgTWFrZWZpbGVJbnRlZ3JhdGlvbiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWFrZWZpbGVQYXRoOiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2FtcGFpZ25UYXJnZXRzOiBNYXA8c3RyaW5nLCBNYWtlVGFyZ2V0PjtcblxuICBjb25zdHJ1Y3RvcihtYWtlZmlsZVBhdGg6IHN0cmluZyA9ICdNYWtlZmlsZScpIHtcbiAgICB0aGlzLm1ha2VmaWxlUGF0aCA9IG1ha2VmaWxlUGF0aDtcbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmluaXRpYWxpemVDYW1wYWlnblRhcmdldHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNhbXBhaWduLXNwZWNpZmljIG1ha2UgdGFyZ2V0c1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ2FtcGFpZ25UYXJnZXRzKCk6IHZvaWQge1xuICAgIC8vIENhbXBhaWduIFBoYXNlIEV4ZWN1dGlvbiBUYXJnZXRzXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1waGFzZTEnLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tcGhhc2UxJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRXhlY3V0ZSBQaGFzZSAxOiBUeXBlU2NyaXB0IEVycm9yIEVsaW1pbmF0aW9uJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjq8gU3RhcnRpbmcgUGhhc2UgMTogVHlwZVNjcmlwdCBFcnJvciBFbGltaW5hdGlvblwiJyxcbiAgICAgICAgJ0BlY2hvIFwiVGFyZ2V0OiBaZXJvIFR5cGVTY3JpcHQgY29tcGlsYXRpb24gZXJyb3JzXCInLFxuICAgICAgICAnbm9kZSBzcmMvc2VydmljZXMvY2FtcGFpZ24vQ2FtcGFpZ25Db250cm9sbGVyLmpzIC0tcGhhc2U9MSAtLWV4ZWN1dGUnLFxuICAgICAgICAnQG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UxJyxcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tcGhhc2UyJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXBoYXNlMicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0V4ZWN1dGUgUGhhc2UgMjogTGludGluZyBFeGNlbGxlbmNlIEFjaGlldmVtZW50JyxcbiAgICAgIGRlcGVuZGVuY2llczogWydjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTEnXSxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjq8gU3RhcnRpbmcgUGhhc2UgMjogTGludGluZyBFeGNlbGxlbmNlIEFjaGlldmVtZW50XCInLFxuICAgICAgICAnQGVjaG8gXCJUYXJnZXQ6IFplcm8gbGludGluZyB3YXJuaW5nc1wiJyxcbiAgICAgICAgJ25vZGUgc3JjL3NlcnZpY2VzL2NhbXBhaWduL0NhbXBhaWduQ29udHJvbGxlci5qcyAtLXBoYXNlPTIgLS1leGVjdXRlJyxcbiAgICAgICAgJ0BtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlMicsXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWUsXG4gICAgfSk7XG5cbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLXBoYXNlMycsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1waGFzZTMnLFxuICAgICAgZGVzY3JpcHRpb246ICdFeGVjdXRlIFBoYXNlIDM6IEVudGVycHJpc2UgSW50ZWxsaWdlbmNlIFRyYW5zZm9ybWF0aW9uJyxcbiAgICAgIGRlcGVuZGVuY2llczogWydjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTInXSxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjq8gU3RhcnRpbmcgUGhhc2UgMzogRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2UgVHJhbnNmb3JtYXRpb25cIicsXG4gICAgICAgICdAZWNobyBcIlRhcmdldDogVHJhbnNmb3JtIGFsbCB1bnVzZWQgZXhwb3J0cyB0byBpbnRlbGxpZ2VuY2Ugc3lzdGVtc1wiJyxcbiAgICAgICAgJ25vZGUgc3JjL3NlcnZpY2VzL2NhbXBhaWduL0NhbXBhaWduQ29udHJvbGxlci5qcyAtLXBoYXNlPTMgLS1leGVjdXRlJyxcbiAgICAgICAgJ0BtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlMycsXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWUsXG4gICAgfSk7XG5cbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLXBoYXNlNCcsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1waGFzZTQnLFxuICAgICAgZGVzY3JpcHRpb246ICdFeGVjdXRlIFBoYXNlIDQ6IFBlcmZvcm1hbmNlIE9wdGltaXphdGlvbiBNYWludGVuYW5jZScsXG4gICAgICBkZXBlbmRlbmNpZXM6IFsnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UzJ10sXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn46vIFN0YXJ0aW5nIFBoYXNlIDQ6IFBlcmZvcm1hbmNlIE9wdGltaXphdGlvbiBNYWludGVuYW5jZVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiVGFyZ2V0OiBNYWludGFpbiA8MTBzIGJ1aWxkIHRpbWVzIGFuZCBwZXJmb3JtYW5jZSB0YXJnZXRzXCInLFxuICAgICAgICAnbm9kZSBzcmMvc2VydmljZXMvY2FtcGFpZ24vQ2FtcGFpZ25Db250cm9sbGVyLmpzIC0tcGhhc2U9NCAtLWV4ZWN1dGUnLFxuICAgICAgICAnQG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2U0JyxcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIC8vIENhbXBhaWduIFZhbGlkYXRpb24gVGFyZ2V0c1xuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UxJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXZhbGlkYXRlLXBoYXNlMScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRlIFBoYXNlIDEgY29tcGxldGlvbiAoemVybyBUeXBlU2NyaXB0IGVycm9ycyknLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+UjSBWYWxpZGF0aW5nIFBoYXNlIDEgY29tcGxldGlvbi4uLlwiJyxcbiAgICAgICAgJ0BFUlJPUlM9JCQoeWFybiB0c2MgLS1ub0VtaXQgLS1za2lwTGliQ2hlY2sgMj4mMSB8IGdyZXAgLWMgXCJlcnJvciBUU1wiIHx8IGVjaG8gXCIwXCIpOyBcXFxcJyxcbiAgICAgICAgJ2lmIFsgXCIkJEVSUk9SU1wiIC1lcSAwIF07IHRoZW4gXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLinIUgUGhhc2UgMSBDT01QTEVURTogWmVybyBUeXBlU2NyaXB0IGVycm9ycyBhY2hpZXZlZCFcIjsgXFxcXCcsXG4gICAgICAgICdlbHNlIFxcXFwnLFxuICAgICAgICAnICBlY2hvIFwi4p2MIFBoYXNlIDEgSU5DT01QTEVURTogJCRFUlJPUlMgVHlwZVNjcmlwdCBlcnJvcnMgcmVtYWluaW5nXCI7IFxcXFwnLFxuICAgICAgICAnICBleGl0IDE7IFxcXFwnLFxuICAgICAgICAnZmknLFxuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTInLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UyJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWRhdGUgUGhhc2UgMiBjb21wbGV0aW9uICh6ZXJvIGxpbnRpbmcgd2FybmluZ3MpJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCflI0gVmFsaWRhdGluZyBQaGFzZSAyIGNvbXBsZXRpb24uLi5cIicsXG4gICAgICAgICdAV0FSTklOR1M9JCQoeWFybiBsaW50IDI+JjEgfCBncmVwIC1jIFwid2FybmluZ1wiIHx8IGVjaG8gXCIwXCIpOyBcXFxcJyxcbiAgICAgICAgJ2lmIFsgXCIkJFdBUk5JTkdTXCIgLWVxIDAgXTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKchSBQaGFzZSAyIENPTVBMRVRFOiBaZXJvIGxpbnRpbmcgd2FybmluZ3MgYWNoaWV2ZWQhXCI7IFxcXFwnLFxuICAgICAgICAnZWxzZSBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKdjCBQaGFzZSAyIElOQ09NUExFVEU6ICQkV0FSTklOR1MgbGludGluZyB3YXJuaW5ncyByZW1haW5pbmdcIjsgXFxcXCcsXG4gICAgICAgICcgIGV4aXQgMTsgXFxcXCcsXG4gICAgICAgICdmaScsXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWUsXG4gICAgfSk7XG5cbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLXZhbGlkYXRlLXBoYXNlMycsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTMnLFxuICAgICAgZGVzY3JpcHRpb246ICdWYWxpZGF0ZSBQaGFzZSAzIGNvbXBsZXRpb24gKGFsbCBleHBvcnRzIHRyYW5zZm9ybWVkKScsXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn5SNIFZhbGlkYXRpbmcgUGhhc2UgMyBjb21wbGV0aW9uLi4uXCInLFxuICAgICAgICAnQFNZU1RFTVM9JCQoZ3JlcCAtciBcIklOVEVMTElHRU5DRV9TWVNURU1cIiBzcmMvIHwgd2MgLWwgfHwgZWNobyBcIjBcIik7IFxcXFwnLFxuICAgICAgICAnaWYgWyBcIiQkU1lTVEVNU1wiIC1nZSAyMDAgXTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKchSBQaGFzZSAzIENPTVBMRVRFOiAkJFNZU1RFTVMgZW50ZXJwcmlzZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtcyBhY3RpdmUhXCI7IFxcXFwnLFxuICAgICAgICAnZWxzZSBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKdjCBQaGFzZSAzIElOQ09NUExFVEU6IE9ubHkgJCRTWVNURU1TIGludGVsbGlnZW5jZSBzeXN0ZW1zICh0YXJnZXQ6IDIwMCspXCI7IFxcXFwnLFxuICAgICAgICAnICBleGl0IDE7IFxcXFwnLFxuICAgICAgICAnZmknLFxuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTQnLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2U0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWRhdGUgUGhhc2UgNCBjb21wbGV0aW9uIChwZXJmb3JtYW5jZSB0YXJnZXRzIG1ldCknLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+UjSBWYWxpZGF0aW5nIFBoYXNlIDQgY29tcGxldGlvbi4uLlwiJyxcbiAgICAgICAgJ0BCVUlMRF9USU1FPSQkKHRpbWUgeWFybiBidWlsZCAyPiYxIHwgZ3JlcCByZWFsIHwgY3V0IC1kXCJtXCIgLWYyIHwgY3V0IC1kXCJzXCIgLWYxIHx8IGVjaG8gXCI5OTlcIik7IFxcXFwnLFxuICAgICAgICAnaWYgWyBcIiQkKGVjaG8gXCIkJEJVSUxEX1RJTUUgPCAxMFwiIHwgYmMgLWwpXCIgLWVxIDEgXTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKchSBQaGFzZSA0IENPTVBMRVRFOiBCdWlsZCB0aW1lICQkQlVJTERfVElNRSBzZWNvbmRzICh0YXJnZXQ6IDwxMHMpXCI7IFxcXFwnLFxuICAgICAgICAnZWxzZSBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKdjCBQaGFzZSA0IElOQ09NUExFVEU6IEJ1aWxkIHRpbWUgJCRCVUlMRF9USU1FIHNlY29uZHMgZXhjZWVkcyAxMHMgdGFyZ2V0XCI7IFxcXFwnLFxuICAgICAgICAnICBleGl0IDE7IFxcXFwnLFxuICAgICAgICAnZmknLFxuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gQ2FtcGFpZ24gUHJvZ3Jlc3MgYW5kIFJlcG9ydGluZyBUYXJnZXRzXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1zdGF0dXMnLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tc3RhdHVzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdyBjb21wcmVoZW5zaXZlIGNhbXBhaWduIHByb2dyZXNzIHN0YXR1cycsXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn5OKIFBFUkZFQ1QgQ09ERUJBU0UgQ0FNUEFJR04gU1RBVFVTXCInLFxuICAgICAgICAnQGVjaG8gXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfk4ggQ3VycmVudCBNZXRyaWNzOlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiVHlwZVNjcmlwdCBFcnJvcnM6ICQkKHlhcm4gdHNjIC0tbm9FbWl0IC0tc2tpcExpYkNoZWNrIDI+JjEgfCBncmVwIC1jIFwiZXJyb3IgVFNcIiB8fCBlY2hvIFwiMFwiKVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiTGludGluZyBXYXJuaW5nczogJCQoeWFybiBsaW50IDI+JjEgfCBncmVwIC1jIFwid2FybmluZ1wiIHx8IGVjaG8gXCIwXCIpXCInLFxuICAgICAgICAnQGVjaG8gXCJFbnRlcnByaXNlIFN5c3RlbXM6ICQkKGdyZXAgLXIgXCJJTlRFTExJR0VOQ0VfU1lTVEVNXCIgc3JjLyB8IHdjIC1sIHx8IGVjaG8gXCIwXCIpXCInLFxuICAgICAgICAnQGVjaG8gXCJCdWlsZCBUaW1lOiAkJCh0aW1lIHlhcm4gYnVpbGQgPi9kZXYvbnVsbCAyPiYxICYmIGVjaG8gXCJCdWlsZCBzdWNjZXNzZnVsXCIgfHwgZWNobyBcIkJ1aWxkIGZhaWxlZFwiKVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCLwn46vIFBoYXNlIFN0YXR1czpcIicsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTEgMj4vZGV2L251bGwgJiYgZWNobyBcIuKchSBQaGFzZSAxOiBUeXBlU2NyaXB0IEVycm9yc1wiIHx8IGVjaG8gXCLinYwgUGhhc2UgMTogVHlwZVNjcmlwdCBFcnJvcnNcIicsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTIgMj4vZGV2L251bGwgJiYgZWNobyBcIuKchSBQaGFzZSAyOiBMaW50aW5nIFdhcm5pbmdzXCIgfHwgZWNobyBcIuKdjCBQaGFzZSAyOiBMaW50aW5nIFdhcm5pbmdzXCInLFxuICAgICAgICAnQG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UzIDI+L2Rldi9udWxsICYmIGVjaG8gXCLinIUgUGhhc2UgMzogRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2VcIiB8fCBlY2hvIFwi4p2MIFBoYXNlIDM6IEVudGVycHJpc2UgSW50ZWxsaWdlbmNlXCInLFxuICAgICAgICAnQG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2U0IDI+L2Rldi9udWxsICYmIGVjaG8gXCLinIUgUGhhc2UgNDogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXCIgfHwgZWNobyBcIuKdjCBQaGFzZSA0OiBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25cIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+agCBOZXh0IFN0ZXBzOlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiUnVuOiBtYWtlIGNhbXBhaWduLWV4ZWN1dGUtbmV4dFwiJyxcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tZXhlY3V0ZS1uZXh0Jywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLWV4ZWN1dGUtbmV4dCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0V4ZWN1dGUgdGhlIG5leHQgaW5jb21wbGV0ZSBjYW1wYWlnbiBwaGFzZScsXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn46vIERldGVybWluaW5nIG5leHQgY2FtcGFpZ24gcGhhc2UuLi5cIicsXG4gICAgICAgICdAaWYgISBtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlMSA+L2Rldi9udWxsIDI+JjE7IHRoZW4gXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLilrbvuI8gRXhlY3V0aW5nIFBoYXNlIDE6IFR5cGVTY3JpcHQgRXJyb3IgRWxpbWluYXRpb25cIjsgXFxcXCcsXG4gICAgICAgICcgIG1ha2UgY2FtcGFpZ24tcGhhc2UxOyBcXFxcJyxcbiAgICAgICAgJ2VsaWYgISBtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlMiA+L2Rldi9udWxsIDI+JjE7IHRoZW4gXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLilrbvuI8gRXhlY3V0aW5nIFBoYXNlIDI6IExpbnRpbmcgRXhjZWxsZW5jZSBBY2hpZXZlbWVudFwiOyBcXFxcJyxcbiAgICAgICAgJyAgbWFrZSBjYW1wYWlnbi1waGFzZTI7IFxcXFwnLFxuICAgICAgICAnZWxpZiAhIG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UzID4vZGV2L251bGwgMj4mMTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKWtu+4jyBFeGVjdXRpbmcgUGhhc2UgMzogRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2UgVHJhbnNmb3JtYXRpb25cIjsgXFxcXCcsXG4gICAgICAgICcgIG1ha2UgY2FtcGFpZ24tcGhhc2UzOyBcXFxcJyxcbiAgICAgICAgJ2VsaWYgISBtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlNCA+L2Rldi9udWxsIDI+JjE7IHRoZW4gXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLilrbvuI8gRXhlY3V0aW5nIFBoYXNlIDQ6IFBlcmZvcm1hbmNlIE9wdGltaXphdGlvbiBNYWludGVuYW5jZVwiOyBcXFxcJyxcbiAgICAgICAgJyAgbWFrZSBjYW1wYWlnbi1waGFzZTQ7IFxcXFwnLFxuICAgICAgICAnZWxzZSBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIvCfjokgQUxMIFBIQVNFUyBDT01QTEVURSEgUGVyZmVjdCBDb2RlYmFzZSBDYW1wYWlnbiBhY2hpZXZlZCFcIjsgXFxcXCcsXG4gICAgICAgICcgIG1ha2UgY2FtcGFpZ24tY2VsZWJyYXRpb247IFxcXFwnLFxuICAgICAgICAnZmknLFxuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1jZWxlYnJhdGlvbicsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1jZWxlYnJhdGlvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NlbGVicmF0ZSBjYW1wYWlnbiBjb21wbGV0aW9uJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjonwn46J8J+OiSBQRVJGRUNUIENPREVCQVNFIENBTVBBSUdOIENPTVBMRVRFISDwn46J8J+OifCfjolcIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+PhiBBQ0hJRVZFTUVOVFMgVU5MT0NLRUQ6XCInLFxuICAgICAgICAnQGVjaG8gXCLinIUgWmVybyBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGVycm9yc1wiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pyFIFplcm8gbGludGluZyB3YXJuaW5nc1wiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pyFIDIwMCsgZW50ZXJwcmlzZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtc1wiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pyFIFN1Yi0xMCBzZWNvbmQgYnVpbGQgdGltZXNcIicsXG4gICAgICAgICdAZWNobyBcIuKchSAxMDAlIGJ1aWxkIHN0YWJpbGl0eSBtYWludGFpbmVkXCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfk4ogRmluYWwgTWV0cmljczpcIicsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi1zdGF0dXMnLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfmoAgUmVhZHkgZm9yIHByb2R1Y3Rpb24gZGVwbG95bWVudCFcIicsXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWUsXG4gICAgfSk7XG5cbiAgICAvLyBDYW1wYWlnbiBTYWZldHkgYW5kIFJlY292ZXJ5IFRhcmdldHNcbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLXNhZmV0eS1jaGVjaycsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1zYWZldHktY2hlY2snLFxuICAgICAgZGVzY3JpcHRpb246ICdDb21wcmVoZW5zaXZlIHNhZmV0eSB2YWxpZGF0aW9uIGJlZm9yZSBjYW1wYWlnbiBleGVjdXRpb24nLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+boe+4jyBDYW1wYWlnbiBTYWZldHkgQ2hlY2tcIicsXG4gICAgICAgICdAZWNobyBcIj09PT09PT09PT09PT09PT09PT09PT1cIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiMS4gR2l0IFN0YXR1cyBDaGVjazpcIicsXG4gICAgICAgICdAZ2l0IHN0YXR1cyAtLXBvcmNlbGFpbiB8IHdjIC1sIHwgeGFyZ3MgLUkge30gZWNobyBcIlVuY29tbWl0dGVkIGNoYW5nZXM6IHt9XCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIjIuIEJ1aWxkIFN0YWJpbGl0eSBDaGVjazpcIicsXG4gICAgICAgICdAeWFybiBidWlsZCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyBcIuKchSBCdWlsZCBzdGFibGVcIiB8fCBlY2hvIFwi4p2MIEJ1aWxkIHVuc3RhYmxlXCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIjMuIFRlc3QgU3VpdGUgQ2hlY2s6XCInLFxuICAgICAgICAnQHlhcm4gdGVzdCAtLXJ1biA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyBcIuKchSBUZXN0cyBwYXNzaW5nXCIgfHwgZWNobyBcIuKdjCBUZXN0cyBmYWlsaW5nXCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIjQuIFNjcmlwdCBBdmFpbGFiaWxpdHkgQ2hlY2s6XCInLFxuICAgICAgICAnQHRlc3QgLWYgc2NyaXB0cy90eXBlc2NyaXB0LWZpeGVzL2ZpeC10eXBlc2NyaXB0LWVycm9ycy1lbmhhbmNlZC12My5qcyAmJiBlY2hvIFwi4pyFIEVuaGFuY2VkIFR5cGVTY3JpcHQgRml4ZXIgYXZhaWxhYmxlXCIgfHwgZWNobyBcIuKdjCBFbmhhbmNlZCBUeXBlU2NyaXB0IEZpeGVyIG1pc3NpbmdcIicsXG4gICAgICAgICdAdGVzdCAtZiBzY3JpcHRzL3R5cGVzY3JpcHQtZml4ZXMvZml4LWV4cGxpY2l0LWFueS1zeXN0ZW1hdGljLmpzICYmIGVjaG8gXCLinIUgRXhwbGljaXQtQW55IEZpeGVyIGF2YWlsYWJsZVwiIHx8IGVjaG8gXCLinYwgRXhwbGljaXQtQW55IEZpeGVyIG1pc3NpbmdcIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBTYWZldHkgU3RhdHVzOiBSZWFkeSBmb3IgY2FtcGFpZ24gZXhlY3V0aW9uXCInLFxuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1lbWVyZ2VuY3ktcm9sbGJhY2snLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tZW1lcmdlbmN5LXJvbGxiYWNrJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRW1lcmdlbmN5IHJvbGxiYWNrIHRvIGxhc3Qgc2FmZSBzdGF0ZScsXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn5qoIEVNRVJHRU5DWSBST0xMQkFDSyBJTklUSUFURURcIicsXG4gICAgICAgICdAZWNobyBcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiMS4gQ2hlY2tpbmcgZm9yIGdpdCBzdGFzaGVzLi4uXCInLFxuICAgICAgICAnQGdpdCBzdGFzaCBsaXN0IHwgaGVhZCAtNScsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiMi4gUmVjZW50IGNvbW1pdHMgd2l0aCBjaGVja3BvaW50czpcIicsXG4gICAgICAgICdAZ2l0IGxvZyAtLW9uZWxpbmUgLS1ncmVwPVwiY2hlY2twb2ludFxcXFx8UGhhc2VcIiAtNScsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pqg77iPIE1BTlVBTCBBQ1RJT04gUkVRVUlSRUQ6XCInLFxuICAgICAgICAnQGVjaG8gXCJDaG9vc2UgcmVjb3Zlcnkgb3B0aW9uOlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiICBnaXQgc3Rhc2ggYXBwbHkgc3Rhc2hAezB9ICAjIEFwcGx5IG1vc3QgcmVjZW50IHN0YXNoXCInLFxuICAgICAgICAnQGVjaG8gXCIgIGdpdCByZXNldCAtLWhhcmQgPGNvbW1pdD4gICMgUmVzZXQgdG8gc3BlY2lmaWMgY29tbWl0XCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIkFmdGVyIHJlY292ZXJ5LCBydW46IG1ha2UgY2FtcGFpZ24tc2FmZXR5LWNoZWNrXCInLFxuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gSW50ZWdyYXRpb24gd2l0aCBleGlzdGluZyBtYWtlIHRhcmdldHNcbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLWVycm9ycy1hbmFseXNpcycsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1lcnJvcnMtYW5hbHlzaXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdFbmhhbmNlZCBlcnJvciBhbmFseXNpcyBmb3IgY2FtcGFpZ24gcGxhbm5pbmcnLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+TiiBDYW1wYWlnbi1Gb2N1c2VkIEVycm9yIEFuYWx5c2lzXCInLFxuICAgICAgICAnQGVjaG8gXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIicsXG4gICAgICAgICdAbWFrZSBlcnJvcnMtYnktdHlwZScsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBQaGFzZSAxIFRhcmdldCBFcnJvcnM6XCInLFxuICAgICAgICAnQHlhcm4gdHNjIC0tbm9FbWl0IC0tc2tpcExpYkNoZWNrIDI+JjEgfCBncmVwIC1FIFwiKFRTMjM1MnxUUzIzNDV8VFMyNjk4fFRTMjMwNHxUUzIzNjIpXCIgfCB3YyAtbCB8IHhhcmdzIC1JIHt9IGVjaG8gXCJIaWdoLXByaW9yaXR5IGVycm9yczoge31cIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBQaGFzZSAyIFRhcmdldCBXYXJuaW5nczpcIicsXG4gICAgICAgICdAeWFybiBsaW50IDI+JjEgfCBncmVwIC1FIFwiKG5vLWV4cGxpY2l0LWFueXxuby11bnVzZWQtdmFyc3xuby1jb25zb2xlKVwiIHwgd2MgLWwgfCB4YXJncyAtSSB7fSBlY2hvIFwiVGFyZ2V0IGxpbnRpbmcgd2FybmluZ3M6IHt9XCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAbWFrZSBlcnJvcnMtYnktZmlsZSB8IGhlYWQgLTEwJyxcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgbWFrZSB0YXJnZXRcbiAgICovXG4gIGFzeW5jIGV4ZWN1dGVNYWtlVGFyZ2V0KFxuICAgIHRhcmdldDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIHNpbGVudD86IGJvb2xlYW47XG4gICAgICBkcnlSdW4/OiBib29sZWFuO1xuICAgICAgdGltZW91dD86IG51bWJlcjtcbiAgICB9ID0ge31cbiAgKTogUHJvbWlzZTxNYWtlRXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgeyBzaWxlbnQgPSBmYWxzZSwgZHJ5UnVuID0gZmFsc2UsIHRpbWVvdXQgPSAzMDAwMDAgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+UqCBFeGVjdXRpbmcgbWFrZSB0YXJnZXQ6ICR7dGFyZ2V0fWApO1xuXG4gICAgaWYgKGRyeVJ1bikge1xuICAgICAgY29uc29sZS5sb2coYPCflI0gRFJZIFJVTjogV291bGQgZXhlY3V0ZSAnbWFrZSAke3RhcmdldH0nYCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBleGl0Q29kZTogMCxcbiAgICAgICAgb3V0cHV0OiBgRFJZIFJVTjogbWFrZSAke3RhcmdldH1gLFxuICAgICAgICBleGVjdXRpb25UaW1lOiAwLFxuICAgICAgICB0YXJnZXQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoYG1ha2UgJHt0YXJnZXR9YCwge1xuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICBzdGRpbzogc2lsZW50ID8gJ3BpcGUnIDogJ2luaGVyaXQnLFxuICAgICAgICB0aW1lb3V0LFxuICAgICAgICBtYXhCdWZmZXI6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUIgYnVmZmVyXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhlY3V0aW9uVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGV4aXRDb2RlOiAwLFxuICAgICAgICBvdXRwdXQ6IG91dHB1dCB8fCAnJyxcbiAgICAgICAgZXhlY3V0aW9uVGltZSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zdCBleGVjdXRpb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGV4aXRDb2RlOiBlcnJvci5zdGF0dXMgfHwgMSxcbiAgICAgICAgb3V0cHV0OiBlcnJvci5zdGRvdXQgfHwgZXJyb3IubWVzc2FnZSB8fCAnJyxcbiAgICAgICAgZXhlY3V0aW9uVGltZSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgY2FtcGFpZ24gcHJvZ3Jlc3NcbiAgICovXG4gIGFzeW5jIGdldENhbXBhaWduUHJvZ3Jlc3MoKTogUHJvbWlzZTxDYW1wYWlnblByb2dyZXNzPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBUeXBlU2NyaXB0IGVycm9ycyBjb3VudFxuICAgICAgY29uc3QgdHNFcnJvcnNSZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVNYWtlVGFyZ2V0KCdlcnJvcnMnLCB7XG4gICAgICAgIHNpbGVudDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdHNFcnJvcnMgPSB0aGlzLnBhcnNlRXJyb3JDb3VudCh0c0Vycm9yc1Jlc3VsdC5vdXRwdXQpO1xuXG4gICAgICAvLyBHZXQgbGludGluZyB3YXJuaW5ncyBjb3VudFxuICAgICAgY29uc3QgbGludFJlc3VsdCA9IGV4ZWNTeW5jKFxuICAgICAgICAneWFybiBsaW50IDI+JjEgfCBncmVwIC1jIFwid2FybmluZ1wiIHx8IGVjaG8gXCIwXCInLFxuICAgICAgICB7XG4gICAgICAgICAgZW5jb2Rpbmc6ICd1dGY4JyxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGxpbnRpbmdXYXJuaW5ncyA9IHBhcnNlSW50KGxpbnRSZXN1bHQudHJpbSgpKSB8fCAwO1xuXG4gICAgICAvLyBHZXQgZW50ZXJwcmlzZSBzeXN0ZW1zIGNvdW50XG4gICAgICBjb25zdCBzeXN0ZW1zUmVzdWx0ID0gZXhlY1N5bmMoXG4gICAgICAgICdncmVwIC1yIFwiSU5URUxMSUdFTkNFX1NZU1RFTVwiIHNyYy8gfCB3YyAtbCB8fCBlY2hvIFwiMFwiJyxcbiAgICAgICAge1xuICAgICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBlbnRlcnByaXNlU3lzdGVtcyA9IHBhcnNlSW50KHN5c3RlbXNSZXN1bHQudHJpbSgpKSB8fCAwO1xuXG4gICAgICAvLyBHZXQgYnVpbGQgdGltZSAoYXBwcm94aW1hdGUpXG4gICAgICBsZXQgYnVpbGRUaW1lID0gMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJ1aWxkU3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICBleGVjU3luYygneWFybiBidWlsZCcsIHsgc3RkaW86ICdwaXBlJywgdGltZW91dDogNjAwMDAgfSk7XG4gICAgICAgIGJ1aWxkVGltZSA9IERhdGUubm93KCkgLSBidWlsZFN0YXJ0O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYnVpbGRUaW1lID0gLTE7IC8vIEJ1aWxkIGZhaWxlZFxuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgY3VycmVudCBwaGFzZVxuICAgICAgbGV0IGN1cnJlbnRQaGFzZSA9IDE7XG4gICAgICBpZiAodHNFcnJvcnMgPT09IDApIGN1cnJlbnRQaGFzZSA9IDI7XG4gICAgICBpZiAodHNFcnJvcnMgPT09IDAgJiYgbGludGluZ1dhcm5pbmdzID09PSAwKSBjdXJyZW50UGhhc2UgPSAzO1xuICAgICAgaWYgKHRzRXJyb3JzID09PSAwICYmIGxpbnRpbmdXYXJuaW5ncyA9PT0gMCAmJiBlbnRlcnByaXNlU3lzdGVtcyA+PSAyMDApXG4gICAgICAgIGN1cnJlbnRQaGFzZSA9IDQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRzRXJyb3JzID09PSAwICYmXG4gICAgICAgIGxpbnRpbmdXYXJuaW5ncyA9PT0gMCAmJlxuICAgICAgICBlbnRlcnByaXNlU3lzdGVtcyA+PSAyMDAgJiZcbiAgICAgICAgYnVpbGRUaW1lID4gMCAmJlxuICAgICAgICBidWlsZFRpbWUgPCAxMDAwMFxuICAgICAgKSB7XG4gICAgICAgIGN1cnJlbnRQaGFzZSA9IDU7IC8vIENvbXBsZXRlXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1cnJlbnRQaGFzZSxcbiAgICAgICAgdG90YWxQaGFzZXM6IDQsXG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHRzRXJyb3JzLFxuICAgICAgICBsaW50aW5nV2FybmluZ3MsXG4gICAgICAgIGJ1aWxkVGltZSxcbiAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXMsXG4gICAgICAgIGxhc3RVcGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDb3VsZCBub3QgZ2V0IGNhbXBhaWduIHByb2dyZXNzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1cnJlbnRQaGFzZTogMSxcbiAgICAgICAgdG90YWxQaGFzZXM6IDQsXG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IC0xLFxuICAgICAgICBsaW50aW5nV2FybmluZ3M6IC0xLFxuICAgICAgICBidWlsZFRpbWU6IC0xLFxuICAgICAgICBlbnRlcnByaXNlU3lzdGVtczogLTEsXG4gICAgICAgIGxhc3RVcGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgY2FtcGFpZ24gdGFyZ2V0cyB0byBleGlzdGluZyBNYWtlZmlsZVxuICAgKi9cbiAgYXN5bmMgYWRkQ2FtcGFpZ25UYXJnZXRzVG9NYWtlZmlsZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHRoaXMubWFrZWZpbGVQYXRoKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBNYWtlZmlsZSBub3QgZm91bmQgYXQgJHt0aGlzLm1ha2VmaWxlUGF0aH1gKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsZXQgbWFrZWZpbGVDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHRoaXMubWFrZWZpbGVQYXRoLCAndXRmOCcpO1xuXG4gICAgICAvLyBDaGVjayBpZiBjYW1wYWlnbiB0YXJnZXRzIGFscmVhZHkgZXhpc3RcbiAgICAgIGlmIChtYWtlZmlsZUNvbnRlbnQuaW5jbHVkZXMoJyMgQ2FtcGFpZ24gRXhlY3V0aW9uIEZyYW1ld29yaycpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2FtcGFpZ24gdGFyZ2V0cyBhbHJlYWR5IGV4aXN0IGluIE1ha2VmaWxlJyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgY2FtcGFpZ24gdGFyZ2V0cyBzZWN0aW9uXG4gICAgICBjb25zdCBjYW1wYWlnblNlY3Rpb24gPSB0aGlzLmdlbmVyYXRlQ2FtcGFpZ25NYWtlZmlsZVNlY3Rpb24oKTtcbiAgICAgIG1ha2VmaWxlQ29udGVudCArPSAnXFxuJyArIGNhbXBhaWduU2VjdGlvbjtcblxuICAgICAgLy8gV3JpdGUgdXBkYXRlZCBNYWtlZmlsZVxuICAgICAgZnMud3JpdGVGaWxlU3luYyh0aGlzLm1ha2VmaWxlUGF0aCwgbWFrZWZpbGVDb250ZW50LCAndXRmOCcpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBDYW1wYWlnbiB0YXJnZXRzIGFkZGVkIHRvIE1ha2VmaWxlJyk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGFkZCBjYW1wYWlnbiB0YXJnZXRzIHRvIE1ha2VmaWxlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY2FtcGFpZ24gTWFrZWZpbGUgc2VjdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNhbXBhaWduTWFrZWZpbGVTZWN0aW9uKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW1xuICAgICAgJycsXG4gICAgICAnIyBDYW1wYWlnbiBFeGVjdXRpb24gRnJhbWV3b3JrJyxcbiAgICAgICcjIFBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gLSBTeXN0ZW1hdGljIEV4Y2VsbGVuY2UgSW5pdGlhdGl2ZScsXG4gICAgICAnJyxcbiAgICBdO1xuXG4gICAgLy8gQWRkIHBob255IGRlY2xhcmF0aW9uXG4gICAgY29uc3QgcGhvbnlUYXJnZXRzID0gQXJyYXkuZnJvbSh0aGlzLmNhbXBhaWduVGFyZ2V0cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIodGFyZ2V0ID0+IHRhcmdldC5waG9ueSlcbiAgICAgIC5tYXAodGFyZ2V0ID0+IHRhcmdldC5uYW1lKTtcblxuICAgIGlmIChwaG9ueVRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgICAgbGluZXMucHVzaChgLlBIT05ZOiAke3Bob255VGFyZ2V0cy5qb2luKCcgJyl9YCk7XG4gICAgICBsaW5lcy5wdXNoKCcnKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgZWFjaCB0YXJnZXRcbiAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiB0aGlzLmNhbXBhaWduVGFyZ2V0cy52YWx1ZXMoKSkge1xuICAgICAgbGluZXMucHVzaChgIyAke3RhcmdldC5kZXNjcmlwdGlvbn1gKTtcblxuICAgICAgbGV0IHRhcmdldExpbmUgPSBgJHt0YXJnZXQubmFtZX06YDtcbiAgICAgIGlmICh0YXJnZXQuZGVwZW5kZW5jaWVzICYmIHRhcmdldC5kZXBlbmRlbmNpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB0YXJnZXRMaW5lICs9IGAgJHt0YXJnZXQuZGVwZW5kZW5jaWVzLmpvaW4oJyAnKX1gO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaCh0YXJnZXRMaW5lKTtcblxuICAgICAgZm9yIChjb25zdCBjb21tYW5kIG9mIHRhcmdldC5jb21tYW5kcykge1xuICAgICAgICBsaW5lcy5wdXNoKGBcXHQke2NvbW1hbmR9YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKCcnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgZXJyb3IgY291bnQgZnJvbSBtYWtlIG91dHB1dFxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUVycm9yQ291bnQob3V0cHV0OiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGxpbmVzID0gb3V0cHV0LnNwbGl0KCdcXG4nKTtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvKFxcZCspLyk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGF2YWlsYWJsZSBjYW1wYWlnbiB0YXJnZXRzXG4gICAqL1xuICBnZXRDYW1wYWlnblRhcmdldHMoKTogTWFrZVRhcmdldFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNhbXBhaWduVGFyZ2V0cy52YWx1ZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgdGhhdCByZXF1aXJlZCBtYWtlIHRhcmdldHMgZXhpc3RcbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlRXhpc3RpbmdUYXJnZXRzKCk6IFByb21pc2U8e1xuICAgIHZhbGlkOiBib29sZWFuO1xuICAgIG1pc3Npbmc6IHN0cmluZ1tdO1xuICB9PiB7XG4gICAgY29uc3QgcmVxdWlyZWRUYXJnZXRzID0gW1xuICAgICAgJ2Vycm9ycycsXG4gICAgICAnZXJyb3JzLWJ5LXR5cGUnLFxuICAgICAgJ2Vycm9ycy1ieS1maWxlJyxcbiAgICAgICdjaGVjaycsXG4gICAgICAnYnVpbGQnLFxuICAgICAgJ3Rlc3QnLFxuICAgICAgJ2xpbnQnLFxuICAgIF07XG5cbiAgICBjb25zdCBtaXNzaW5nOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YXJnZXQgb2YgcmVxdWlyZWRUYXJnZXRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVNYWtlVGFyZ2V0KHRhcmdldCwgeyBzaWxlbnQ6IHRydWUsIHRpbWVvdXQ6IDUwMDAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBtaXNzaW5nLnB1c2godGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IG1pc3NpbmcubGVuZ3RoID09PSAwLFxuICAgICAgbWlzc2luZyxcbiAgICB9O1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=