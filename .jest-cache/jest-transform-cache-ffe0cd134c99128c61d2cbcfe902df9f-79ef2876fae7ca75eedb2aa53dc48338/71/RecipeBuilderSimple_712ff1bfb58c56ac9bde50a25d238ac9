808cb0478ff6f50a042339e745368867
"use strict";
'use client';
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const logger_1 = require("@/utils/logger");
const RecipeBuilderSimple = (0, react_1.memo)(function RecipeBuilderSimple({ initialIngredients = [], initialMethods = [], onRecipeComplete, onSave }) {
    const [recipeName, setRecipeName] = (0, react_1.useState)('');
    const [ingredients, setIngredients] = (0, react_1.useState)([]);
    const [steps, setSteps] = (0, react_1.useState)([]);
    const [servings, setServings] = (0, react_1.useState)(4);
    const [prepTime, setPrepTime] = (0, react_1.useState)(15);
    const [cookTime, setCookTime] = (0, react_1.useState)(30);
    const addIngredient = (0, react_1.useCallback)(() => {
        setIngredients(prev => [...prev, { name: '', quantity: '', preparation: '' }]);
    }, []);
    const updateIngredient = (0, react_1.useCallback)((index, field, value) => {
        setIngredients(prev => prev.map((ing, i) => i === index ? { ...ing, [field]: value } : ing));
    }, []);
    const removeIngredient = (0, react_1.useCallback)((index) => {
        setIngredients(prev => prev.filter((_, i) => i !== index));
    }, []);
    const addStep = (0, react_1.useCallback)(() => {
        setSteps(prev => [...prev, { step: prev.length + 1, instruction: '', timing: '' }]);
    }, []);
    const updateStep = (0, react_1.useCallback)((index, field, value) => {
        setSteps(prev => prev.map((step, i) => i === index ? { ...step, [field]: value } : step));
    }, []);
    const removeStep = (0, react_1.useCallback)((index) => {
        setSteps(prev => prev.filter((_, i) => i !== index).map((step, i) => ({ ...step, step: i + 1 })));
    }, []);
    // Memoize expensive calculations
    const totalTime = (0, react_1.useMemo)(() => prepTime + cookTime, [prepTime, cookTime]);
    const isRecipeValid = (0, react_1.useMemo)(() => recipeName.trim() && ingredients.length > 0 && steps.length > 0, [recipeName, ingredients.length, steps.length]);
    const recipeSummary = (0, react_1.useMemo)(() => ({
        name: recipeName,
        servings,
        totalTime,
        ingredientCount: ingredients.length,
        stepCount: steps.length
    }), [recipeName, servings, totalTime, ingredients.length, steps.length]);
    const saveRecipe = (0, react_1.useCallback)(() => {
        const recipe = {
            id: `recipe_${Date.now()}`,
            name: recipeName || 'Untitled Recipe',
            ingredients,
            steps,
            servings,
            prepTime,
            cookTime,
            totalTime,
            createdAt: new Date().toISOString()
        };
        logger_1.logger.info('Saving recipe:', recipe);
        onSave === null || onSave === void 0 ? void 0 : onSave(recipe);
        onRecipeComplete === null || onRecipeComplete === void 0 ? void 0 : onRecipeComplete(recipe);
    }, [recipeName, ingredients, steps, servings, prepTime, cookTime, totalTime, onSave, onRecipeComplete]);
    return ((0, jsx_runtime_1.jsxs)("div", { className: "bg-white rounded-lg shadow-md p-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-xl font-semibold mb-4 text-gray-800", children: "Create Your Recipe" }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-4", children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Recipe Name" }), (0, jsx_runtime_1.jsx)("input", { type: "text", value: recipeName, onChange: (e) => setRecipeName(e.target.value), placeholder: "Enter recipe name...", className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Servings" }), (0, jsx_runtime_1.jsx)("input", { type: "number", value: servings, onChange: (e) => setServings(parseInt(e.target.value) || 1), min: "1", max: "20", className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Prep Time (min)" }), (0, jsx_runtime_1.jsx)("input", { type: "number", value: prepTime, onChange: (e) => setPrepTime(parseInt(e.target.value) || 0), min: "0", className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "block text-sm font-medium text-gray-700 mb-2", children: "Cook Time (min)" }), (0, jsx_runtime_1.jsx)("input", { type: "number", value: cookTime, onChange: (e) => setCookTime(parseInt(e.target.value) || 0), min: "0", className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-4", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-lg font-medium text-gray-800", children: "Ingredients" }), (0, jsx_runtime_1.jsx)("button", { onClick: addIngredient, className: "bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition-colors", children: "Add Ingredient" })] }), ingredients.length === 0 ? ((0, jsx_runtime_1.jsx)("p", { className: "text-gray-500 text-center py-4", children: "No ingredients added yet. Click \"Add Ingredient\" to start." })) : ((0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: ingredients.map((ingredient, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex gap-3 items-center bg-gray-50 p-3 rounded", children: [(0, jsx_runtime_1.jsx)("input", { type: "text", value: ingredient.quantity, onChange: (e) => updateIngredient(index, 'quantity', e.target.value), placeholder: "1 cup", className: "w-24 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500" }), (0, jsx_runtime_1.jsx)("input", { type: "text", value: ingredient.name, onChange: (e) => updateIngredient(index, 'name', e.target.value), placeholder: "Ingredient name", className: "flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500" }), (0, jsx_runtime_1.jsx)("input", { type: "text", value: ingredient.preparation, onChange: (e) => updateIngredient(index, 'preparation', e.target.value), placeholder: "diced, chopped...", className: "w-32 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeIngredient(index), className: "text-red-600 hover:text-red-800 p-1", title: "Remove ingredient", children: "\u00D7" })] }, index))) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-4", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-lg font-medium text-gray-800", children: "Instructions" }), (0, jsx_runtime_1.jsx)("button", { onClick: addStep, className: "bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition-colors", children: "Add Step" })] }), steps.length === 0 ? ((0, jsx_runtime_1.jsx)("p", { className: "text-gray-500 text-center py-4", children: "No steps added yet. Click \"Add Step\" to start." })) : ((0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: steps.map((step, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex gap-3 items-start bg-gray-50 p-3 rounded", children: [(0, jsx_runtime_1.jsx)("span", { className: "bg-indigo-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mt-1", children: step.step }), (0, jsx_runtime_1.jsx)("textarea", { value: step.instruction, onChange: (e) => updateStep(index, 'instruction', e.target.value), placeholder: "Describe this step...", rows: 2, className: "flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none" }), (0, jsx_runtime_1.jsx)("input", { type: "text", value: step.timing || '', onChange: (e) => updateStep(index, 'timing', e.target.value), placeholder: "5 min", className: "w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeStep(index), className: "text-red-600 hover:text-red-800 p-1", title: "Remove step", children: "\u00D7" })] }, index))) }))] }), (0, jsx_runtime_1.jsx)("div", { className: "flex justify-end", children: (0, jsx_runtime_1.jsx)("button", { onClick: saveRecipe, disabled: !isRecipeValid, className: "bg-green-600 text-white px-6 py-2 rounded font-medium hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed", children: "Save Recipe" }) }), recipeSummary.name && recipeSummary.ingredientCount > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "mt-6 p-4 bg-indigo-50 rounded-lg", children: [(0, jsx_runtime_1.jsx)("h5", { className: "font-medium text-indigo-800 mb-2", children: "Recipe Summary" }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm text-indigo-700", children: [(0, jsx_runtime_1.jsx)("p", { children: (0, jsx_runtime_1.jsx)("strong", { children: recipeSummary.name }) }), (0, jsx_runtime_1.jsxs)("p", { children: ["Serves ", recipeSummary.servings, " \u2022 Total time: ", recipeSummary.totalTime, " minutes"] }), (0, jsx_runtime_1.jsxs)("p", { children: [recipeSummary.ingredientCount, " ingredients \u2022 ", recipeSummary.stepCount, " steps"] })] })] }))] }));
});
exports.default = RecipeBuilderSimple;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL3JlY2lwZXMvUmVjaXBlQnVpbGRlclNpbXBsZS50c3giLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFYiwrQ0FBb0U7QUFDcEUsMkNBQXdDO0FBcUJ4QyxNQUFNLG1CQUFtQixHQUFpQyxJQUFBLFlBQUksRUFBQyxTQUFTLG1CQUFtQixDQUFDLEVBQzFGLGtCQUFrQixHQUFHLEVBQUUsRUFDdkIsY0FBYyxHQUFHLEVBQUUsRUFDbkIsZ0JBQWdCLEVBQ2hCLE1BQU0sRUFDUDtJQUNDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFxQixFQUFFLENBQUMsQ0FBQztJQUN2RSxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBZSxFQUFFLENBQUMsQ0FBQztJQUNyRCxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxDQUFDLENBQUMsQ0FBQztJQUM1QyxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUM3QyxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUU3QyxNQUFNLGFBQWEsR0FBRyxJQUFBLG1CQUFXLEVBQUMsR0FBRyxFQUFFO1FBQ3JDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLEVBQUUs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VyxJQUNoRixJQUNGLENBQ1AsSUFDRyxDQUNQLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQUVILGtCQUFlLG1CQUFtQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvY29tcG9uZW50cy9yZWNpcGVzL1JlY2lwZUJ1aWxkZXJTaW1wbGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgbWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcblxuaW50ZXJmYWNlIFJlY2lwZUJ1aWxkZXJQcm9wcyB7XG4gIGluaXRpYWxJbmdyZWRpZW50cz86IHN0cmluZ1tdO1xuICBpbml0aWFsTWV0aG9kcz86IHN0cmluZ1tdO1xuICBvblJlY2lwZUNvbXBsZXRlPzogKHJlY2lwZTogYW55KSA9PiB2b2lkO1xuICBvblNhdmU/OiAocmVjaXBlOiBhbnkpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBSZWNpcGVJbmdyZWRpZW50IHtcbiAgbmFtZTogc3RyaW5nO1xuICBxdWFudGl0eTogc3RyaW5nO1xuICBwcmVwYXJhdGlvbjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUmVjaXBlU3RlcCB7XG4gIHN0ZXA6IG51bWJlcjtcbiAgaW5zdHJ1Y3Rpb246IHN0cmluZztcbiAgdGltaW5nPzogc3RyaW5nO1xufVxuXG5jb25zdCBSZWNpcGVCdWlsZGVyU2ltcGxlOiBSZWFjdC5GQzxSZWNpcGVCdWlsZGVyUHJvcHM+ID0gbWVtbyhmdW5jdGlvbiBSZWNpcGVCdWlsZGVyU2ltcGxlKHtcbiAgaW5pdGlhbEluZ3JlZGllbnRzID0gW10sXG4gIGluaXRpYWxNZXRob2RzID0gW10sXG4gIG9uUmVjaXBlQ29tcGxldGUsXG4gIG9uU2F2ZVxufSkge1xuICBjb25zdCBbcmVjaXBlTmFtZSwgc2V0UmVjaXBlTmFtZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpbmdyZWRpZW50cywgc2V0SW5ncmVkaWVudHNdID0gdXNlU3RhdGU8UmVjaXBlSW5ncmVkaWVudFtdPihbXSk7XG4gIGNvbnN0IFtzdGVwcywgc2V0U3RlcHNdID0gdXNlU3RhdGU8UmVjaXBlU3RlcFtdPihbXSk7XG4gIGNvbnN0IFtzZXJ2aW5ncywgc2V0U2VydmluZ3NdID0gdXNlU3RhdGUoNCk7XG4gIGNvbnN0IFtwcmVwVGltZSwgc2V0UHJlcFRpbWVdID0gdXNlU3RhdGUoMTUpO1xuICBjb25zdCBbY29va1RpbWUsIHNldENvb2tUaW1lXSA9IHVzZVN0YXRlKDMwKTtcblxuICBjb25zdCBhZGRJbmdyZWRpZW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gWy4uLnByZXYsIHsgbmFtZTogJycsIHF1YW50aXR5OiAnJywgcHJlcGFyYXRpb246ICcnIH1dKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHVwZGF0ZUluZ3JlZGllbnQgPSB1c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgZmllbGQ6IGtleW9mIFJlY2lwZUluZ3JlZGllbnQsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBzZXRJbmdyZWRpZW50cyhwcmV2ID0+IHByZXYubWFwKChpbmcsIGkpID0+IFxuICAgICAgaSA9PT0gaW5kZXggPyB7IC4uLmluZywgW2ZpZWxkXTogdmFsdWUgfSA6IGluZ1xuICAgICkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVtb3ZlSW5ncmVkaWVudCA9IHVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgc2V0SW5ncmVkaWVudHMocHJldiA9PiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGFkZFN0ZXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RlcHMocHJldiA9PiBbLi4ucHJldiwgeyBzdGVwOiBwcmV2Lmxlbmd0aCArIDEsIGluc3RydWN0aW9uOiAnJywgdGltaW5nOiAnJyB9XSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCB1cGRhdGVTdGVwID0gdXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIGZpZWxkOiBrZXlvZiBSZWNpcGVTdGVwLCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgc2V0U3RlcHMocHJldiA9PiBwcmV2Lm1hcCgoc3RlcCwgaSkgPT4gXG4gICAgICBpID09PSBpbmRleCA/IHsgLi4uc3RlcCwgW2ZpZWxkXTogdmFsdWUgfSA6IHN0ZXBcbiAgICApKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlbW92ZVN0ZXAgPSB1c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNldFN0ZXBzKHByZXYgPT4gcHJldi5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KS5tYXAoKHN0ZXAsIGkpID0+ICh7IC4uLnN0ZXAsIHN0ZXA6IGkgKyAxIH0pKSk7XG4gIH0sIFtdKTtcblxuICAvLyBNZW1vaXplIGV4cGVuc2l2ZSBjYWxjdWxhdGlvbnNcbiAgY29uc3QgdG90YWxUaW1lID0gdXNlTWVtbygoKSA9PiBwcmVwVGltZSArIGNvb2tUaW1lLCBbcHJlcFRpbWUsIGNvb2tUaW1lXSk7XG4gIFxuICBjb25zdCBpc1JlY2lwZVZhbGlkID0gdXNlTWVtbygoKSA9PiBcbiAgICByZWNpcGVOYW1lLnRyaW0oKSAmJiBpbmdyZWRpZW50cy5sZW5ndGggPiAwICYmIHN0ZXBzLmxlbmd0aCA+IDAsXG4gICAgW3JlY2lwZU5hbWUsIGluZ3JlZGllbnRzLmxlbmd0aCwgc3RlcHMubGVuZ3RoXVxuICApO1xuXG4gIGNvbnN0IHJlY2lwZVN1bW1hcnkgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgbmFtZTogcmVjaXBlTmFtZSxcbiAgICBzZXJ2aW5ncyxcbiAgICB0b3RhbFRpbWUsXG4gICAgaW5ncmVkaWVudENvdW50OiBpbmdyZWRpZW50cy5sZW5ndGgsXG4gICAgc3RlcENvdW50OiBzdGVwcy5sZW5ndGhcbiAgfSksIFtyZWNpcGVOYW1lLCBzZXJ2aW5ncywgdG90YWxUaW1lLCBpbmdyZWRpZW50cy5sZW5ndGgsIHN0ZXBzLmxlbmd0aF0pO1xuXG4gIGNvbnN0IHNhdmVSZWNpcGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgcmVjaXBlID0ge1xuICAgICAgaWQ6IGByZWNpcGVfJHtEYXRlLm5vdygpfWAsXG4gICAgICBuYW1lOiByZWNpcGVOYW1lIHx8ICdVbnRpdGxlZCBSZWNpcGUnLFxuICAgICAgaW5ncmVkaWVudHMsXG4gICAgICBzdGVwcyxcbiAgICAgIHNlcnZpbmdzLFxuICAgICAgcHJlcFRpbWUsXG4gICAgICBjb29rVGltZSxcbiAgICAgIHRvdGFsVGltZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIGxvZ2dlci5pbmZvKCdTYXZpbmcgcmVjaXBlOicsIHJlY2lwZSk7XG4gICAgb25TYXZlPy4ocmVjaXBlKTtcbiAgICBvblJlY2lwZUNvbXBsZXRlPy4ocmVjaXBlKTtcbiAgfSwgW3JlY2lwZU5hbWUsIGluZ3JlZGllbnRzLCBzdGVwcywgc2VydmluZ3MsIHByZXBUaW1lLCBjb29rVGltZSwgdG90YWxUaW1lLCBvblNhdmUsIG9uUmVjaXBlQ29tcGxldGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbWQgcC02XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1zZW1pYm9sZCBtYi00IHRleHQtZ3JheS04MDBcIj5DcmVhdGUgWW91ciBSZWNpcGU8L2gzPlxuICAgICAgICBcbiAgICAgICAgey8qIFJlY2lwZSBOYW1lICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5cbiAgICAgICAgICAgIFJlY2lwZSBOYW1lXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtyZWNpcGVOYW1lfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRSZWNpcGVOYW1lKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgcmVjaXBlIG5hbWUuLi5cIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby01MDBcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBSZWNpcGUgRGV0YWlscyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC00IG1iLTZcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+XG4gICAgICAgICAgICAgIFNlcnZpbmdzXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICB2YWx1ZT17c2VydmluZ3N9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2VydmluZ3MocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpIHx8IDEpfVxuICAgICAgICAgICAgICBtaW49XCIxXCJcbiAgICAgICAgICAgICAgbWF4PVwiMjBcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5cbiAgICAgICAgICAgICAgUHJlcCBUaW1lIChtaW4pXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICB2YWx1ZT17cHJlcFRpbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJlcFRpbWUocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpIHx8IDApfVxuICAgICAgICAgICAgICBtaW49XCIwXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby01MDBcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+XG4gICAgICAgICAgICAgIENvb2sgVGltZSAobWluKVxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Nvb2tUaW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldENvb2tUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1pbmRpZ28tNTAwXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBJbmdyZWRpZW50cyBTZWN0aW9uICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTRcIj5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktODAwXCI+SW5ncmVkaWVudHM8L2g0PlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e2FkZEluZ3JlZGllbnR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBob3ZlcjpiZy1pbmRpZ28tNzAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICBBZGQgSW5ncmVkaWVudFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHtpbmdyZWRpZW50cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCB0ZXh0LWNlbnRlciBweS00XCI+Tm8gaW5ncmVkaWVudHMgYWRkZWQgeWV0LiBDbGljayBcIkFkZCBJbmdyZWRpZW50XCIgdG8gc3RhcnQuPC9wPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICB7aW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cImZsZXggZ2FwLTMgaXRlbXMtY2VudGVyIGJnLWdyYXktNTAgcC0zIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtpbmdyZWRpZW50LnF1YW50aXR5fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB1cGRhdGVJbmdyZWRpZW50KGluZGV4LCAncXVhbnRpdHknLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjEgY3VwXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMjQgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1pbmRpZ28tNTAwXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdXBkYXRlSW5ncmVkaWVudChpbmRleCwgJ25hbWUnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkluZ3JlZGllbnQgbmFtZVwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1pbmRpZ28tNTAwXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQucHJlcGFyYXRpb259XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZUluZ3JlZGllbnQoaW5kZXgsICdwcmVwYXJhdGlvbicsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZGljZWQsIGNob3BwZWQuLi5cIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0zMiBweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLWluZGlnby01MDBcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVtb3ZlSW5ncmVkaWVudChpbmRleCl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwIHAtMVwiXG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIlJlbW92ZSBpbmdyZWRpZW50XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICDDl1xuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBJbnN0cnVjdGlvbnMgU2VjdGlvbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00XCI+XG4gICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPkluc3RydWN0aW9uczwvaDQ+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17YWRkU3RlcH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGhvdmVyOmJnLWluZGlnby03MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIEFkZCBTdGVwXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAge3N0ZXBzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIHRleHQtY2VudGVyIHB5LTRcIj5ObyBzdGVwcyBhZGRlZCB5ZXQuIENsaWNrIFwiQWRkIFN0ZXBcIiB0byBzdGFydC48L3A+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgIHtzdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwiZmxleCBnYXAtMyBpdGVtcy1zdGFydCBiZy1ncmF5LTUwIHAtMyByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmctaW5kaWdvLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtZnVsbCB3LTYgaC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc20gZm9udC1tZWRpdW0gbXQtMVwiPlxuICAgICAgICAgICAgICAgICAge3N0ZXAuc3RlcH1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17c3RlcC5pbnN0cnVjdGlvbn1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdXBkYXRlU3RlcChpbmRleCwgJ2luc3RydWN0aW9uJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEZXNjcmliZSB0aGlzIHN0ZXAuLi5cIlxuICAgICAgICAgICAgICAgICAgcm93cz17Mn1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLWluZGlnby01MDAgcmVzaXplLW5vbmVcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17c3RlcC50aW1pbmcgfHwgJyd9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZVN0ZXAoaW5kZXgsICd0aW1pbmcnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIjUgbWluXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMjAgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1pbmRpZ28tNTAwXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJlbW92ZVN0ZXAoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwIGhvdmVyOnRleHQtcmVkLTgwMCBwLTFcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgc3RlcFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgw5dcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogU2F2ZSBCdXR0b24gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1lbmRcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e3NhdmVSZWNpcGV9XG4gICAgICAgICAgZGlzYWJsZWQ9eyFpc1JlY2lwZVZhbGlkfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyZWVuLTYwMCB0ZXh0LXdoaXRlIHB4LTYgcHktMiByb3VuZGVkIGZvbnQtbWVkaXVtIGhvdmVyOmJnLWdyZWVuLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpiZy1ncmF5LTQwMCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICA+XG4gICAgICAgICAgU2F2ZSBSZWNpcGVcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIFJlY2lwZSBTdW1tYXJ5ICovfVxuICAgICAge3JlY2lwZVN1bW1hcnkubmFtZSAmJiByZWNpcGVTdW1tYXJ5LmluZ3JlZGllbnRDb3VudCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTYgcC00IGJnLWluZGlnby01MCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtaW5kaWdvLTgwMCBtYi0yXCI+UmVjaXBlIFN1bW1hcnk8L2g1PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWluZGlnby03MDBcIj5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+e3JlY2lwZVN1bW1hcnkubmFtZX08L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8cD5TZXJ2ZXMge3JlY2lwZVN1bW1hcnkuc2VydmluZ3N9IOKAoiBUb3RhbCB0aW1lOiB7cmVjaXBlU3VtbWFyeS50b3RhbFRpbWV9IG1pbnV0ZXM8L3A+XG4gICAgICAgICAgICA8cD57cmVjaXBlU3VtbWFyeS5pbmdyZWRpZW50Q291bnR9IGluZ3JlZGllbnRzIOKAoiB7cmVjaXBlU3VtbWFyeS5zdGVwQ291bnR9IHN0ZXBzPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUmVjaXBlQnVpbGRlclNpbXBsZTsiXSwidmVyc2lvbiI6M30=