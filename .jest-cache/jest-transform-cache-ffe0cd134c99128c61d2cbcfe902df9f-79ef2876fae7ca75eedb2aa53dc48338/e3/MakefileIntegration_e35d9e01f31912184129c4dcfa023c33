4438afee49fbd45ca224959830535df2
"use strict";
/**
 * Makefile Integration System
 *
 * Integrates with existing make commands and implements campaign-specific
 * make targets for phase execution and progress reporting.
 *
 * Requirements: 7.7
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MakefileIntegration = void 0;
const child_process_1 = require("child_process");
const fs_1 = __importDefault(require("fs"));
/**
 * Makefile Integration for Campaign Execution Framework
 */
class MakefileIntegration {
    constructor(makefilePath = 'Makefile') {
        this.makefilePath = makefilePath;
        this.campaignTargets = new Map();
        this.initializeCampaignTargets();
    }
    /**
     * Initialize campaign-specific make targets
     */
    initializeCampaignTargets() {
        // Campaign Phase Execution Targets
        this.campaignTargets.set('campaign-phase1', {
            name: 'campaign-phase1',
            description: 'Execute Phase 1: TypeScript Error Elimination',
            commands: [
                '@echo "üéØ Starting Phase 1: TypeScript Error Elimination"',
                '@echo "Target: Zero TypeScript compilation errors"',
                'node src/services/campaign/CampaignController.js --phase=1 --execute',
                '@make campaign-validate-phase1'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-phase2', {
            name: 'campaign-phase2',
            description: 'Execute Phase 2: Linting Excellence Achievement',
            dependencies: ['campaign-validate-phase1'],
            commands: [
                '@echo "üéØ Starting Phase 2: Linting Excellence Achievement"',
                '@echo "Target: Zero linting warnings"',
                'node src/services/campaign/CampaignController.js --phase=2 --execute',
                '@make campaign-validate-phase2'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-phase3', {
            name: 'campaign-phase3',
            description: 'Execute Phase 3: Enterprise Intelligence Transformation',
            dependencies: ['campaign-validate-phase2'],
            commands: [
                '@echo "üéØ Starting Phase 3: Enterprise Intelligence Transformation"',
                '@echo "Target: Transform all unused exports to intelligence systems"',
                'node src/services/campaign/CampaignController.js --phase=3 --execute',
                '@make campaign-validate-phase3'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-phase4', {
            name: 'campaign-phase4',
            description: 'Execute Phase 4: Performance Optimization Maintenance',
            dependencies: ['campaign-validate-phase3'],
            commands: [
                '@echo "üéØ Starting Phase 4: Performance Optimization Maintenance"',
                '@echo "Target: Maintain <10s build times and performance targets"',
                'node src/services/campaign/CampaignController.js --phase=4 --execute',
                '@make campaign-validate-phase4'
            ],
            phony: true
        });
        // Campaign Validation Targets
        this.campaignTargets.set('campaign-validate-phase1', {
            name: 'campaign-validate-phase1',
            description: 'Validate Phase 1 completion (zero TypeScript errors)',
            commands: [
                '@echo "üîç Validating Phase 1 completion..."',
                '@ERRORS=$$(yarn tsc --noEmit --skipLibCheck 2>&1 | grep -c "error TS" || echo "0"); \\',
                'if [ "$$ERRORS" -eq 0 ]; then \\',
                '  echo "‚úÖ Phase 1 COMPLETE: Zero TypeScript errors achieved!"; \\',
                'else \\',
                '  echo "‚ùå Phase 1 INCOMPLETE: $$ERRORS TypeScript errors remaining"; \\',
                '  exit 1; \\',
                'fi'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-validate-phase2', {
            name: 'campaign-validate-phase2',
            description: 'Validate Phase 2 completion (zero linting warnings)',
            commands: [
                '@echo "üîç Validating Phase 2 completion..."',
                '@WARNINGS=$$(yarn lint 2>&1 | grep -c "warning" || echo "0"); \\',
                'if [ "$$WARNINGS" -eq 0 ]; then \\',
                '  echo "‚úÖ Phase 2 COMPLETE: Zero linting warnings achieved!"; \\',
                'else \\',
                '  echo "‚ùå Phase 2 INCOMPLETE: $$WARNINGS linting warnings remaining"; \\',
                '  exit 1; \\',
                'fi'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-validate-phase3', {
            name: 'campaign-validate-phase3',
            description: 'Validate Phase 3 completion (all exports transformed)',
            commands: [
                '@echo "üîç Validating Phase 3 completion..."',
                '@SYSTEMS=$$(grep -r "INTELLIGENCE_SYSTEM" src/ | wc -l || echo "0"); \\',
                'if [ "$$SYSTEMS" -ge 200 ]; then \\',
                '  echo "‚úÖ Phase 3 COMPLETE: $$SYSTEMS enterprise intelligence systems active!"; \\',
                'else \\',
                '  echo "‚ùå Phase 3 INCOMPLETE: Only $$SYSTEMS intelligence systems (target: 200+)"; \\',
                '  exit 1; \\',
                'fi'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-validate-phase4', {
            name: 'campaign-validate-phase4',
            description: 'Validate Phase 4 completion (performance targets met)',
            commands: [
                '@echo "üîç Validating Phase 4 completion..."',
                '@BUILD_TIME=$$(time yarn build 2>&1 | grep real | cut -d"m" -f2 | cut -d"s" -f1 || echo "999"); \\',
                'if [ "$$(echo "$$BUILD_TIME < 10" | bc -l)" -eq 1 ]; then \\',
                '  echo "‚úÖ Phase 4 COMPLETE: Build time $$BUILD_TIME seconds (target: <10s)"; \\',
                'else \\',
                '  echo "‚ùå Phase 4 INCOMPLETE: Build time $$BUILD_TIME seconds exceeds 10s target"; \\',
                '  exit 1; \\',
                'fi'
            ],
            phony: true
        });
        // Campaign Progress and Reporting Targets
        this.campaignTargets.set('campaign-status', {
            name: 'campaign-status',
            description: 'Show comprehensive campaign progress status',
            commands: [
                '@echo "üìä PERFECT CODEBASE CAMPAIGN STATUS"',
                '@echo "=================================="',
                '@echo ""',
                '@echo "üìà Current Metrics:"',
                '@echo "TypeScript Errors: $$(yarn tsc --noEmit --skipLibCheck 2>&1 | grep -c "error TS" || echo "0")"',
                '@echo "Linting Warnings: $$(yarn lint 2>&1 | grep -c "warning" || echo "0")"',
                '@echo "Enterprise Systems: $$(grep -r "INTELLIGENCE_SYSTEM" src/ | wc -l || echo "0")"',
                '@echo "Build Time: $$(time yarn build >/dev/null 2>&1 && echo "Build successful" || echo "Build failed")"',
                '@echo ""',
                '@echo "üéØ Phase Status:"',
                '@make campaign-validate-phase1 2>/dev/null && echo "‚úÖ Phase 1: TypeScript Errors" || echo "‚ùå Phase 1: TypeScript Errors"',
                '@make campaign-validate-phase2 2>/dev/null && echo "‚úÖ Phase 2: Linting Warnings" || echo "‚ùå Phase 2: Linting Warnings"',
                '@make campaign-validate-phase3 2>/dev/null && echo "‚úÖ Phase 3: Enterprise Intelligence" || echo "‚ùå Phase 3: Enterprise Intelligence"',
                '@make campaign-validate-phase4 2>/dev/null && echo "‚úÖ Phase 4: Performance Optimization" || echo "‚ùå Phase 4: Performance Optimization"',
                '@echo ""',
                '@echo "üöÄ Next Steps:"',
                '@echo "Run: make campaign-execute-next"'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-execute-next', {
            name: 'campaign-execute-next',
            description: 'Execute the next incomplete campaign phase',
            commands: [
                '@echo "üéØ Determining next campaign phase..."',
                '@if ! make campaign-validate-phase1 >/dev/null 2>&1; then \\',
                '  echo "‚ñ∂Ô∏è Executing Phase 1: TypeScript Error Elimination"; \\',
                '  make campaign-phase1; \\',
                'elif ! make campaign-validate-phase2 >/dev/null 2>&1; then \\',
                '  echo "‚ñ∂Ô∏è Executing Phase 2: Linting Excellence Achievement"; \\',
                '  make campaign-phase2; \\',
                'elif ! make campaign-validate-phase3 >/dev/null 2>&1; then \\',
                '  echo "‚ñ∂Ô∏è Executing Phase 3: Enterprise Intelligence Transformation"; \\',
                '  make campaign-phase3; \\',
                'elif ! make campaign-validate-phase4 >/dev/null 2>&1; then \\',
                '  echo "‚ñ∂Ô∏è Executing Phase 4: Performance Optimization Maintenance"; \\',
                '  make campaign-phase4; \\',
                'else \\',
                '  echo "üéâ ALL PHASES COMPLETE! Perfect Codebase Campaign achieved!"; \\',
                '  make campaign-celebration; \\',
                'fi'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-celebration', {
            name: 'campaign-celebration',
            description: 'Celebrate campaign completion',
            commands: [
                '@echo "üéâüéâüéâ PERFECT CODEBASE CAMPAIGN COMPLETE! üéâüéâüéâ"',
                '@echo ""',
                '@echo "üèÜ ACHIEVEMENTS UNLOCKED:"',
                '@echo "‚úÖ Zero TypeScript compilation errors"',
                '@echo "‚úÖ Zero linting warnings"',
                '@echo "‚úÖ 200+ enterprise intelligence systems"',
                '@echo "‚úÖ Sub-10 second build times"',
                '@echo "‚úÖ 100% build stability maintained"',
                '@echo ""',
                '@echo "üìä Final Metrics:"',
                '@make campaign-status',
                '@echo ""',
                '@echo "üöÄ Ready for production deployment!"'
            ],
            phony: true
        });
        // Campaign Safety and Recovery Targets
        this.campaignTargets.set('campaign-safety-check', {
            name: 'campaign-safety-check',
            description: 'Comprehensive safety validation before campaign execution',
            commands: [
                '@echo "üõ°Ô∏è Campaign Safety Check"',
                '@echo "======================"',
                '@echo ""',
                '@echo "1. Git Status Check:"',
                '@git status --porcelain | wc -l | xargs -I {} echo "Uncommitted changes: {}"',
                '@echo ""',
                '@echo "2. Build Stability Check:"',
                '@yarn build >/dev/null 2>&1 && echo "‚úÖ Build stable" || echo "‚ùå Build unstable"',
                '@echo ""',
                '@echo "3. Test Suite Check:"',
                '@yarn test --run >/dev/null 2>&1 && echo "‚úÖ Tests passing" || echo "‚ùå Tests failing"',
                '@echo ""',
                '@echo "4. Script Availability Check:"',
                '@test -f scripts/typescript-fixes/fix-typescript-errors-enhanced-v3.js && echo "‚úÖ Enhanced TypeScript Fixer available" || echo "‚ùå Enhanced TypeScript Fixer missing"',
                '@test -f scripts/typescript-fixes/fix-explicit-any-systematic.js && echo "‚úÖ Explicit-Any Fixer available" || echo "‚ùå Explicit-Any Fixer missing"',
                '@echo ""',
                '@echo "üéØ Safety Status: Ready for campaign execution"'
            ],
            phony: true
        });
        this.campaignTargets.set('campaign-emergency-rollback', {
            name: 'campaign-emergency-rollback',
            description: 'Emergency rollback to last safe state',
            commands: [
                '@echo "üö® EMERGENCY ROLLBACK INITIATED"',
                '@echo "==============================="',
                '@echo ""',
                '@echo "1. Checking for git stashes..."',
                '@git stash list | head -5',
                '@echo ""',
                '@echo "2. Recent commits with checkpoints:"',
                '@git log --oneline --grep="checkpoint\\|Phase" -5',
                '@echo ""',
                '@echo "‚ö†Ô∏è MANUAL ACTION REQUIRED:"',
                '@echo "Choose recovery option:"',
                '@echo "  git stash apply stash@{0}  # Apply most recent stash"',
                '@echo "  git reset --hard <commit>  # Reset to specific commit"',
                '@echo ""',
                '@echo "After recovery, run: make campaign-safety-check"'
            ],
            phony: true
        });
        // Integration with existing make targets
        this.campaignTargets.set('campaign-errors-analysis', {
            name: 'campaign-errors-analysis',
            description: 'Enhanced error analysis for campaign planning',
            commands: [
                '@echo "üìä Campaign-Focused Error Analysis"',
                '@echo "================================="',
                '@make errors-by-type',
                '@echo ""',
                '@echo "üéØ Phase 1 Target Errors:"',
                '@yarn tsc --noEmit --skipLibCheck 2>&1 | grep -E "(TS2352|TS2345|TS2698|TS2304|TS2362)" | wc -l | xargs -I {} echo "High-priority errors: {}"',
                '@echo ""',
                '@echo "üéØ Phase 2 Target Warnings:"',
                '@yarn lint 2>&1 | grep -E "(no-explicit-any|no-unused-vars|no-console)" | wc -l | xargs -I {} echo "Target linting warnings: {}"',
                '@echo ""',
                '@make errors-by-file | head -10'
            ],
            phony: true
        });
    }
    /**
     * Execute a make target
     */
    async executeMakeTarget(target, options = {}) {
        const { silent = false, dryRun = false, timeout = 300000 } = options;
        console.log(`üî® Executing make target: ${target}`);
        if (dryRun) {
            console.log(`üîç DRY RUN: Would execute 'make ${target}'`);
            return {
                success: true,
                exitCode: 0,
                output: `DRY RUN: make ${target}`,
                executionTime: 0,
                target
            };
        }
        const startTime = Date.now();
        try {
            const output = (0, child_process_1.execSync)(`make ${target}`, {
                encoding: 'utf8',
                stdio: silent ? 'pipe' : 'inherit',
                timeout,
                maxBuffer: 10 * 1024 * 1024 // 10MB buffer
            });
            const executionTime = Date.now() - startTime;
            return {
                success: true,
                exitCode: 0,
                output: output || '',
                executionTime,
                target
            };
        }
        catch (error) {
            const executionTime = Date.now() - startTime;
            return {
                success: false,
                exitCode: error.status || 1,
                output: error.stdout || error.message || '',
                executionTime,
                target
            };
        }
    }
    /**
     * Get current campaign progress
     */
    async getCampaignProgress() {
        try {
            // Get TypeScript errors count
            const tsErrorsResult = await this.executeMakeTarget('errors', { silent: true });
            const tsErrors = this.parseErrorCount(tsErrorsResult.output);
            // Get linting warnings count
            const lintResult = (0, child_process_1.execSync)('yarn lint 2>&1 | grep -c "warning" || echo "0"', {
                encoding: 'utf8'
            });
            const lintingWarnings = parseInt(lintResult.trim()) || 0;
            // Get enterprise systems count
            const systemsResult = (0, child_process_1.execSync)('grep -r "INTELLIGENCE_SYSTEM" src/ | wc -l || echo "0"', {
                encoding: 'utf8'
            });
            const enterpriseSystems = parseInt(systemsResult.trim()) || 0;
            // Get build time (approximate)
            let buildTime = 0;
            try {
                const buildStart = Date.now();
                (0, child_process_1.execSync)('yarn build', { stdio: 'pipe', timeout: 60000 });
                buildTime = Date.now() - buildStart;
            }
            catch (error) {
                buildTime = -1; // Build failed
            }
            // Determine current phase
            let currentPhase = 1;
            if (tsErrors === 0)
                currentPhase = 2;
            if (tsErrors === 0 && lintingWarnings === 0)
                currentPhase = 3;
            if (tsErrors === 0 && lintingWarnings === 0 && enterpriseSystems >= 200)
                currentPhase = 4;
            if (tsErrors === 0 && lintingWarnings === 0 && enterpriseSystems >= 200 && buildTime > 0 && buildTime < 10000) {
                currentPhase = 5; // Complete
            }
            return {
                currentPhase,
                totalPhases: 4,
                typeScriptErrors: tsErrors,
                lintingWarnings,
                buildTime,
                enterpriseSystems,
                lastUpdate: new Date()
            };
        }
        catch (error) {
            console.warn('‚ö†Ô∏è Could not get campaign progress:', error);
            return {
                currentPhase: 1,
                totalPhases: 4,
                typeScriptErrors: -1,
                lintingWarnings: -1,
                buildTime: -1,
                enterpriseSystems: -1,
                lastUpdate: new Date()
            };
        }
    }
    /**
     * Add campaign targets to existing Makefile
     */
    async addCampaignTargetsToMakefile() {
        try {
            if (!fs_1.default.existsSync(this.makefilePath)) {
                console.warn(`‚ö†Ô∏è Makefile not found at ${this.makefilePath}`);
                return false;
            }
            let makefileContent = fs_1.default.readFileSync(this.makefilePath, 'utf8');
            // Check if campaign targets already exist
            if (makefileContent.includes('# Campaign Execution Framework')) {
                console.log('‚úÖ Campaign targets already exist in Makefile');
                return true;
            }
            // Add campaign targets section
            const campaignSection = this.generateCampaignMakefileSection();
            makefileContent += '\n' + campaignSection;
            // Write updated Makefile
            fs_1.default.writeFileSync(this.makefilePath, makefileContent, 'utf8');
            console.log('‚úÖ Campaign targets added to Makefile');
            return true;
        }
        catch (error) {
            console.error('‚ùå Failed to add campaign targets to Makefile:', error);
            return false;
        }
    }
    /**
     * Generate campaign Makefile section
     */
    generateCampaignMakefileSection() {
        const lines = [
            '',
            '# Campaign Execution Framework',
            '# Perfect Codebase Campaign - Systematic Excellence Initiative',
            ''
        ];
        // Add phony declaration
        const phonyTargets = Array.from(this.campaignTargets.values())
            .filter(target => target.phony)
            .map(target => target.name);
        if (phonyTargets.length > 0) {
            lines.push(`.PHONY: ${phonyTargets.join(' ')}`);
            lines.push('');
        }
        // Add each target
        for (const target of this.campaignTargets.values()) {
            lines.push(`# ${target.description}`);
            let targetLine = `${target.name}:`;
            if (target.dependencies && target.dependencies.length > 0) {
                targetLine += ` ${target.dependencies.join(' ')}`;
            }
            lines.push(targetLine);
            for (const command of target.commands) {
                lines.push(`\t${command}`);
            }
            lines.push('');
        }
        return lines.join('\n');
    }
    /**
     * Parse error count from make output
     */
    parseErrorCount(output) {
        const lines = output.split('\n');
        for (const line of lines) {
            const match = line.match(/(\d+)/);
            if (match) {
                return parseInt(match[1]);
            }
        }
        return 0;
    }
    /**
     * Get available campaign targets
     */
    getCampaignTargets() {
        return Array.from(this.campaignTargets.values());
    }
    /**
     * Validate that required make targets exist
     */
    async validateExistingTargets() {
        const requiredTargets = [
            'errors',
            'errors-by-type',
            'errors-by-file',
            'check',
            'build',
            'test',
            'lint'
        ];
        const missing = [];
        for (const target of requiredTargets) {
            try {
                await this.executeMakeTarget(target, { silent: true, timeout: 5000 });
            }
            catch (error) {
                missing.push(target);
            }
        }
        return {
            valid: missing.length === 0,
            missing
        };
    }
}
exports.MakefileIntegration = MakefileIntegration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9NYWtlZmlsZUludGVncmF0aW9uLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztHQU9HOzs7Ozs7QUFFSCxpREFBeUM7QUFDekMsNENBQW9CO0FBNkJwQjs7R0FFRztBQUNILE1BQWEsbUJBQW1CO0lBSTlCLFlBQVksZUFBdUIsVUFBVTtRQUMzQyxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUM7SUFDbkMsQ0FBQztJQUVEOztPQUVHO0lBQ0sseUJBQXlCO1FBQy9CLG1DQUFtQztRQUNuQyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3ZCLFdBQVcsRUFBRSwrQ0FBK0M7WUFDNUQsUUFBUSxFQUFFO2dCQUNSLDJEQUEyRDtnQkFDM0Qsb0RBQW9EO2dCQUNwRCxzRUFBc0U7Z0JBQ3RFLGdDQUFnQzthQUNqQztZQUNELEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUU7WUFDMUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN2QixXQUFXLEVBQUUsaURBQWlEO1lBQzlELFlBQVksRUFBRSxDQUFDLDBCQUEwQixDQUFDO1lBQzFDLFFBQVEsRUFBRTtnQkFDUiw2REFBNkQ7Z0JBQzdELHVDQUF1QztnQkFDdkMsc0VBQXNFO2dCQUN0RSxnQ0FBZ0M7YUFDakM7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO1lBQzFDLElBQUksRUFBRSxpQkFBaUI7WUFDdkIsV0FBVyxFQUFFLHlEQUF5RDtZQUN0RSxZQUFZLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQztZQUMxQyxRQUFRLEVBQUU7Z0JBQ1IscUVBQXFFO2dCQUNyRSxzRUFBc0U7Z0JBQ3RFLHNFQUFzRTtnQkFDdEUsZ0NBQWdDO2FBQ2pDO1lBQ0QsS0FBSyxFQUFFLElBQUk7U0FDWixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3ZCLFdBQVcsRUFBRSx1REFBdUQ7WUFDcEUsWUFBWSxFQUFFLENBQUMsMEJBQTBCLENBQUM7WUFDMUMsUUFBUSxFQUFFO2dCQUNSLG1FQUFtRTtnQkFDbkUsbUVBQW1FO2dCQUNuRSxzRUFBc0U7Z0JBQ3RFLGdDQUFnQzthQUNqQztZQUNELEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQyxDQUFDO1FBRUgsOEJBQThCO1FBQzlCLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFO1lBQ25ELElBQUksRUFBRSwwQkFBMEI7WUFDaEMsV0FBVyxFQUFFLHNEQUFzRDtZQUNuRSxRQUFRLEVBQUU7Z0JBQ1IsNkNBQTZDO2dCQUM3Qyx3RkFBd0Y7Z0JBQ3hGLGtDQUFrQztnQkFDbEMsbUVBQW1FO2dCQUNuRSxTQUFTO2dCQUNULHlFQUF5RTtnQkFDekUsY0FBYztnQkFDZCxJQUFJO2FBQ0w7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFO1lBQ25ELElBQUksRUFBRSwwQkFBMEI7WUFDaEMsV0FBVyxFQUFFLHFEQUFxRDtZQUNsRSxRQUFRLEVBQUU7Z0JBQ1IsNkNBQTZDO2dCQUM3QyxrRUFBa0U7Z0JBQ2xFLG9DQUFvQztnQkFDcEMsa0VBQWtFO2dCQUNsRSxTQUFTO2dCQUNULDBFQUEwRTtnQkFDMUUsY0FBYztnQkFDZCxJQUFJO2FBQ0w7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFO1lBQ25ELElBQUksRUFBRSwwQkFBMEI7WUFDaEMsV0FBVyxFQUFFLHVEQUF1RDtZQUNwRSxRQUFRLEVBQUU7Z0JBQ1IsNkNBQTZDO2dCQUM3Qyx5RUFBeUU7Z0JBQ3pFLHFDQUFxQztnQkFDckMsb0ZBQW9GO2dCQUNwRixTQUFTO2dCQUNULHVGQUF1RjtnQkFDdkYsY0FBYztnQkFDZCxJQUFJO2FBQ0w7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFO1lBQ25ELElBQUksRUFBRSwwQkFBMEI7WUFDaEMsV0FBVyxFQUFFLHVEQUF1RDtZQUNwRSxRQUFRLEVBQUU7Z0JBQ1IsNkNBQTZDO2dCQUM3QyxvR0FBb0c7Z0JBQ3BHLDhEQUE4RDtnQkFDOUQsaUZBQWlGO2dCQUNqRixTQUFTO2dCQUNULHVGQUF1RjtnQkFDdkYsY0FBYztnQkFDZCxJQUFJO2FBQ0w7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILDBDQUEwQztRQUMxQyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3ZCLFdBQVcsRUFBRSw2Q0FBNkM7WUFDMUQsUUFBUSxFQUFFO2dCQUNSLDZDQUE2QztnQkFDN0MsNENBQTRDO2dCQUM1QyxVQUFVO2dCQUNWLDZCQUE2QjtnQkFDN0IsdUdBQXVHO2dCQUN2Ryw4RUFBOEU7Z0JBQzlFLHdGQUF3RjtnQkFDeEYsMkdBQTJHO2dCQUMzRyxVQUFVO2dCQUNWLDBCQUEwQjtnQkFDMUIsMEhBQTBIO2dCQUMxSCx3SEFBd0g7Z0JBQ3hILHNJQUFzSTtnQkFDdEksd0lBQXdJO2dCQUN4SSxVQUFVO2dCQUNWLHdCQUF3QjtnQkFDeEIseUNBQXlDO2FBQzFDO1lBQ0QsS0FBSyxFQUFFLElBQUk7U0FDWixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsRUFBRTtZQUNoRCxJQUFJLEVBQUUsdUJBQXVCO1lBQzdCLFdBQVcsRUFBRSw0Q0FBNEM7WUFDekQsUUFBUSxFQUFFO2dCQUNSLCtDQUErQztnQkFDL0MsOERBQThEO2dCQUM5RCxpRUFBaUU7Z0JBQ2pFLDRCQUE0QjtnQkFDNUIsK0RBQStEO2dCQUMvRCxtRUFBbUU7Z0JBQ25FLDRCQUE0QjtnQkFDNUIsK0RBQStEO2dCQUMvRCwyRUFBMkU7Z0JBQzNFLDRCQUE0QjtnQkFDNUIsK0RBQStEO2dCQUMvRCx5RUFBeUU7Z0JBQ3pFLDRCQUE0QjtnQkFDNUIsU0FBUztnQkFDVCwwRUFBMEU7Z0JBQzFFLGlDQUFpQztnQkFDakMsSUFBSTthQUNMO1lBQ0QsS0FBSyxFQUFFLElBQUk7U0FDWixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRTtZQUMvQyxJQUFJLEVBQUUsc0JBQXNCO1lBQzVCLFdBQVcsRUFBRSwrQkFBK0I7WUFDNUMsUUFBUSxFQUFFO2dCQUNSLDJEQUEyRDtnQkFDM0QsVUFBVTtnQkFDVixtQ0FBbUM7Z0JBQ25DLDhDQUE4QztnQkFDOUMsaUNBQWlDO2dCQUNqQyxnREFBZ0Q7Z0JBQ2hELHFDQUFxQztnQkFDckMsMkNBQTJDO2dCQUMzQyxVQUFVO2dCQUNWLDJCQUEyQjtnQkFDM0IsdUJBQXVCO2dCQUN2QixVQUFVO2dCQUNWLDZDQUE2QzthQUM5QztZQUNELEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQyxDQUFDO1FBRUgsdUNBQXVDO1FBQ3ZDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFFO1lBQ2hELElBQUksRUFBRSx1QkFBdUI7WUFDN0IsV0FBVyxFQUFFLDJEQUEyRDtZQUN4RSxRQUFRLEVBQUU7Z0JBQ1IsbUNBQW1DO2dCQUNuQyxnQ0FBZ0M7Z0JBQ2hDLFVBQVU7Z0JBQ1YsOEJBQThCO2dCQUM5Qiw4RUFBOEU7Z0JBQzlFLFVBQVU7Z0JBQ1YsbUNBQW1DO2dCQUNuQyxpRkFBaUY7Z0JBQ2pGLFVBQVU7Z0JBQ1YsOEJBQThCO2dCQUM5QixzRkFBc0Y7Z0JBQ3RGLFVBQVU7Z0JBQ1YsdUNBQXVDO2dCQUN2QyxzS0FBc0s7Z0JBQ3RLLGtKQUFrSjtnQkFDbEosVUFBVTtnQkFDVix3REFBd0Q7YUFDekQ7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLDZCQUE2QixFQUFFO1lBQ3RELElBQUksRUFBRSw2QkFBNkI7WUFDbkMsV0FBVyxFQUFFLHVDQUF1QztZQUNwRCxRQUFRLEVBQUU7Z0JBQ1IseUNBQXlDO2dCQUN6Qyx5Q0FBeUM7Z0JBQ3pDLFVBQVU7Z0JBQ1Ysd0NBQXdDO2dCQUN4QywyQkFBMkI7Z0JBQzNCLFVBQVU7Z0JBQ1YsNkNBQTZDO2dCQUM3QyxtREFBbUQ7Z0JBQ25ELFVBQVU7Z0JBQ1Ysb0NBQW9DO2dCQUNwQyxpQ0FBaUM7Z0JBQ2pDLGdFQUFnRTtnQkFDaEUsaUVBQWlFO2dCQUNqRSxVQUFVO2dCQUNWLHlEQUF5RDthQUMxRDtZQUNELEtBQUssRUFBRSxJQUFJO1NBQ1osQ0FBQyxDQUFDO1FBRUgseUNBQXlDO1FBQ3pDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFO1lBQ25ELElBQUksRUFBRSwwQkFBMEI7WUFDaEMsV0FBVyxFQUFFLCtDQUErQztZQUM1RCxRQUFRLEVBQUU7Z0JBQ1IsNENBQTRDO2dCQUM1QywyQ0FBMkM7Z0JBQzNDLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixtQ0FBbUM7Z0JBQ25DLCtJQUErSTtnQkFDL0ksVUFBVTtnQkFDVixxQ0FBcUM7Z0JBQ3JDLGtJQUFrSTtnQkFDbEksVUFBVTtnQkFDVixpQ0FBaUM7YUFDbEM7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxNQUFjLEVBQUUsVUFJcEMsRUFBRTtRQUNKLE1BQU0sRUFBRSxNQUFNLEdBQUcsS0FBSyxFQUFFLE1BQU0sR0FBRyxLQUFLLEVBQUUsT0FBTyxHQUFHLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQztRQUVyRSxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBRW5ELElBQUksTUFBTSxFQUFFO1lBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQ0FBbUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUMxRCxPQUFPO2dCQUNMLE9BQU8sRUFBRSxJQUFJO2dCQUNiLFFBQVEsRUFBRSxDQUFDO2dCQUNYLE1BQU0sRUFBRSxpQkFBaUIsTUFBTSxFQUFFO2dCQUNqQyxhQUFhLEVBQUUsQ0FBQztnQkFDaEIsTUFBTTthQUNQLENBQUM7U0FDSDtRQUVELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUU3QixJQUFJO1lBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBQSx3QkFBUSxFQUFDLFFBQVEsTUFBTSxFQUFFLEVBQUU7Z0JBQ3hDLFFBQVEsRUFBRSxNQUFNO2dCQUNoQixLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQ2xDLE9BQU87Z0JBQ1AsU0FBUyxFQUFFLEVBQUUsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWM7YUFDM0MsQ0FBQyxDQUFDO1lBRUgsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztZQUU3QyxPQUFPO2dCQUNMLE9BQU8sRUFBRSxJQUFJO2dCQUNiLFFBQVEsRUFBRSxDQUFDO2dCQUNYLE1BQU0sRUFBRSxNQUFNLElBQUksRUFBRTtnQkFDcEIsYUFBYTtnQkFDYixNQUFNO2FBQ1AsQ0FBQztTQUNIO1FBQUMsT0FBTyxLQUFVLEVBQUU7WUFDbkIsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztZQUU3QyxPQUFPO2dCQUNMLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFFBQVEsRUFBRSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUM7Z0JBQzNCLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxPQUFPLElBQUksRUFBRTtnQkFDM0MsYUFBYTtnQkFDYixNQUFNO2FBQ1AsQ0FBQztTQUNIO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLG1CQUFtQjtRQUN2QixJQUFJO1lBQ0YsOEJBQThCO1lBQzlCLE1BQU0sY0FBYyxHQUFHLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ2hGLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRTdELDZCQUE2QjtZQUM3QixNQUFNLFVBQVUsR0FBRyxJQUFBLHdCQUFRLEVBQUMsZ0RBQWdELEVBQUU7Z0JBQzVFLFFBQVEsRUFBRSxNQUFNO2FBQ2pCLENBQUMsQ0FBQztZQUNILE1BQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFekQsK0JBQStCO1lBQy9CLE1BQU0sYUFBYSxHQUFHLElBQUEsd0JBQVEsRUFBQyx3REFBd0QsRUFBRTtnQkFDdkYsUUFBUSxFQUFFLE1BQU07YUFDakIsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRTlELCtCQUErQjtZQUMvQixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDbEIsSUFBSTtnQkFDRixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQzlCLElBQUEsd0JBQVEsRUFBQyxZQUFZLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRCxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFVBQVUsQ0FBQzthQUNyQztZQUFDLE9BQU8sS0FBSyxFQUFFO2dCQUNkLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWU7YUFDaEM7WUFFRCwwQkFBMEI7WUFDMUIsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksUUFBUSxLQUFLLENBQUM7Z0JBQUUsWUFBWSxHQUFHLENBQUMsQ0FBQztZQUNyQyxJQUFJLFFBQVEsS0FBSyxDQUFDLElBQUksZUFBZSxLQUFLLENBQUM7Z0JBQUUsWUFBWSxHQUFHLENBQUMsQ0FBQztZQUM5RCxJQUFJLFFBQVEsS0FBSyxDQUFDLElBQUksZUFBZSxLQUFLLENBQUMsSUFBSSxpQkFBaUIsSUFBSSxHQUFHO2dCQUFFLFlBQVksR0FBRyxDQUFDLENBQUM7WUFDMUYsSUFBSSxRQUFRLEtBQUssQ0FBQyxJQUFJLGVBQWUsS0FBSyxDQUFDLElBQUksaUJBQWlCLElBQUksR0FBRyxJQUFJLFNBQVMsR0FBRyxDQUFDLElBQUksU0FBUyxHQUFHLEtBQUssRUFBRTtnQkFDN0csWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVc7YUFDOUI7WUFFRCxPQUFPO2dCQUNMLFlBQVk7Z0JBQ1osV0FBVyxFQUFFLENBQUM7Z0JBQ2QsZ0JBQWdCLEVBQUUsUUFBUTtnQkFDMUIsZUFBZTtnQkFDZixTQUFTO2dCQUNULGlCQUFpQjtnQkFDakIsVUFBVSxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3ZCLENBQUM7U0FDSDtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsT0FBTyxDQUFDLElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUMzRCxPQUFPO2dCQUNMLFlBQVksRUFBRSxDQUFDO2dCQUNmLFdBQVcsRUFBRSxDQUFDO2dCQUNkLGdCQUFnQixFQUFFLENBQUMsQ0FBQztnQkFDcEIsZUFBZSxFQUFFLENBQUMsQ0FBQztnQkFDbkIsU0FBUyxFQUFFLENBQUMsQ0FBQztnQkFDYixpQkFBaUIsRUFBRSxDQUFDLENBQUM7Z0JBQ3JCLFVBQVUsRUFBRSxJQUFJLElBQUksRUFBRTthQUN2QixDQUFDO1NBQ0g7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsNEJBQTRCO1FBQ2hDLElBQUk7WUFDRixJQUFJLENBQUMsWUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUU7Z0JBQ3JDLE9BQU8sQ0FBQyxJQUFJLENBQUMsNEJBQTRCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO2dCQUM5RCxPQUFPLEtBQUssQ0FBQzthQUNkO1lBRUQsSUFBSSxlQUFlLEdBQUcsWUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRWpFLDBDQUEwQztZQUMxQyxJQUFJLGVBQWUsQ0FBQyxRQUFRLENBQUMsZ0NBQWdDLENBQUMsRUFBRTtnQkFDOUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDO2dCQUM1RCxPQUFPLElBQUksQ0FBQzthQUNiO1lBRUQsK0JBQStCO1lBQy9CLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQywrQkFBK0IsRUFBRSxDQUFDO1lBQy9ELGVBQWUsSUFBSSxJQUFJLEdBQUcsZUFBZSxDQUFDO1lBRTFDLHlCQUF5QjtZQUN6QixZQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsZUFBZSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzdELE9BQU8sQ0FBQyxHQUFHLENBQUMsc0NBQXNDLENBQUMsQ0FBQztZQUVwRCxPQUFPLElBQUksQ0FBQztTQUNiO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxPQUFPLENBQUMsS0FBSyxDQUFDLCtDQUErQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3RFLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSywrQkFBK0I7UUFDckMsTUFBTSxLQUFLLEdBQWE7WUFDdEIsRUFBRTtZQUNGLGdDQUFnQztZQUNoQyxnRUFBZ0U7WUFDaEUsRUFBRTtTQUNILENBQUM7UUFFRix3QkFBd0I7UUFDeEIsTUFBTSxZQUFZLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQzNELE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7YUFDOUIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTlCLElBQUksWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDM0IsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2hELEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDaEI7UUFFRCxrQkFBa0I7UUFDbEIsS0FBSyxNQUFNLE1BQU0sSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ2xELEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUV0QyxJQUFJLFVBQVUsR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQztZQUNuQyxJQUFJLE1BQU0sQ0FBQyxZQUFZLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUN6RCxVQUFVLElBQUksSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO2FBQ25EO1lBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUV2QixLQUFLLE1BQU0sT0FBTyxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQUU7Z0JBQ3JDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxPQUFPLEVBQUUsQ0FBQyxDQUFDO2FBQzVCO1lBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNoQjtRQUVELE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7O09BRUc7SUFDSyxlQUFlLENBQUMsTUFBYztRQUNwQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pDLEtBQUssTUFBTSxJQUFJLElBQUksS0FBSyxFQUFFO1lBQ3hCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbEMsSUFBSSxLQUFLLEVBQUU7Z0JBQ1QsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0I7U0FDRjtRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsa0JBQWtCO1FBQ2hCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLHVCQUF1QjtRQUMzQixNQUFNLGVBQWUsR0FBRztZQUN0QixRQUFRO1lBQ1IsZ0JBQWdCO1lBQ2hCLGdCQUFnQjtZQUNoQixPQUFPO1lBQ1AsT0FBTztZQUNQLE1BQU07WUFDTixNQUFNO1NBQ1AsQ0FBQztRQUVGLE1BQU0sT0FBTyxHQUFhLEVBQUUsQ0FBQztRQUU3QixLQUFLLE1BQU0sTUFBTSxJQUFJLGVBQWUsRUFBRTtZQUNwQyxJQUFJO2dCQUNGLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7YUFDdkU7WUFBQyxPQUFPLEtBQUssRUFBRTtnQkFDZCxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3RCO1NBQ0Y7UUFFRCxPQUFPO1lBQ0wsS0FBSyxFQUFFLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQztZQUMzQixPQUFPO1NBQ1IsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQWxnQkQsa0RBa2dCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL01ha2VmaWxlSW50ZWdyYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYWtlZmlsZSBJbnRlZ3JhdGlvbiBTeXN0ZW1cbiAqIFxuICogSW50ZWdyYXRlcyB3aXRoIGV4aXN0aW5nIG1ha2UgY29tbWFuZHMgYW5kIGltcGxlbWVudHMgY2FtcGFpZ24tc3BlY2lmaWMgXG4gKiBtYWtlIHRhcmdldHMgZm9yIHBoYXNlIGV4ZWN1dGlvbiBhbmQgcHJvZ3Jlc3MgcmVwb3J0aW5nLlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDcuN1xuICovXG5cbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFrZVRhcmdldCB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZGVwZW5kZW5jaWVzPzogc3RyaW5nW107XG4gIGNvbW1hbmRzOiBzdHJpbmdbXTtcbiAgcGhvbnk/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1ha2VFeGVjdXRpb25SZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBleGl0Q29kZTogbnVtYmVyO1xuICBvdXRwdXQ6IHN0cmluZztcbiAgZXhlY3V0aW9uVGltZTogbnVtYmVyO1xuICB0YXJnZXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYW1wYWlnblByb2dyZXNzIHtcbiAgY3VycmVudFBoYXNlOiBudW1iZXI7XG4gIHRvdGFsUGhhc2VzOiBudW1iZXI7XG4gIHR5cGVTY3JpcHRFcnJvcnM6IG51bWJlcjtcbiAgbGludGluZ1dhcm5pbmdzOiBudW1iZXI7XG4gIGJ1aWxkVGltZTogbnVtYmVyO1xuICBlbnRlcnByaXNlU3lzdGVtczogbnVtYmVyO1xuICBsYXN0VXBkYXRlOiBEYXRlO1xufVxuXG4vKipcbiAqIE1ha2VmaWxlIEludGVncmF0aW9uIGZvciBDYW1wYWlnbiBFeGVjdXRpb24gRnJhbWV3b3JrXG4gKi9cbmV4cG9ydCBjbGFzcyBNYWtlZmlsZUludGVncmF0aW9uIHtcbiAgcHJpdmF0ZSByZWFkb25seSBtYWtlZmlsZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBjYW1wYWlnblRhcmdldHM6IE1hcDxzdHJpbmcsIE1ha2VUYXJnZXQ+O1xuXG4gIGNvbnN0cnVjdG9yKG1ha2VmaWxlUGF0aDogc3RyaW5nID0gJ01ha2VmaWxlJykge1xuICAgIHRoaXMubWFrZWZpbGVQYXRoID0gbWFrZWZpbGVQYXRoO1xuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUNhbXBhaWduVGFyZ2V0cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgY2FtcGFpZ24tc3BlY2lmaWMgbWFrZSB0YXJnZXRzXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVDYW1wYWlnblRhcmdldHMoKTogdm9pZCB7XG4gICAgLy8gQ2FtcGFpZ24gUGhhc2UgRXhlY3V0aW9uIFRhcmdldHNcbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLXBoYXNlMScsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1waGFzZTEnLFxuICAgICAgZGVzY3JpcHRpb246ICdFeGVjdXRlIFBoYXNlIDE6IFR5cGVTY3JpcHQgRXJyb3IgRWxpbWluYXRpb24nLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBTdGFydGluZyBQaGFzZSAxOiBUeXBlU2NyaXB0IEVycm9yIEVsaW1pbmF0aW9uXCInLFxuICAgICAgICAnQGVjaG8gXCJUYXJnZXQ6IFplcm8gVHlwZVNjcmlwdCBjb21waWxhdGlvbiBlcnJvcnNcIicsXG4gICAgICAgICdub2RlIHNyYy9zZXJ2aWNlcy9jYW1wYWlnbi9DYW1wYWlnbkNvbnRyb2xsZXIuanMgLS1waGFzZT0xIC0tZXhlY3V0ZScsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTEnXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tcGhhc2UyJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXBoYXNlMicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0V4ZWN1dGUgUGhhc2UgMjogTGludGluZyBFeGNlbGxlbmNlIEFjaGlldmVtZW50JyxcbiAgICAgIGRlcGVuZGVuY2llczogWydjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTEnXSxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjq8gU3RhcnRpbmcgUGhhc2UgMjogTGludGluZyBFeGNlbGxlbmNlIEFjaGlldmVtZW50XCInLFxuICAgICAgICAnQGVjaG8gXCJUYXJnZXQ6IFplcm8gbGludGluZyB3YXJuaW5nc1wiJyxcbiAgICAgICAgJ25vZGUgc3JjL3NlcnZpY2VzL2NhbXBhaWduL0NhbXBhaWduQ29udHJvbGxlci5qcyAtLXBoYXNlPTIgLS1leGVjdXRlJyxcbiAgICAgICAgJ0BtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlMidcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1waGFzZTMnLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tcGhhc2UzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRXhlY3V0ZSBQaGFzZSAzOiBFbnRlcnByaXNlIEludGVsbGlnZW5jZSBUcmFuc2Zvcm1hdGlvbicsXG4gICAgICBkZXBlbmRlbmNpZXM6IFsnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UyJ10sXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn46vIFN0YXJ0aW5nIFBoYXNlIDM6IEVudGVycHJpc2UgSW50ZWxsaWdlbmNlIFRyYW5zZm9ybWF0aW9uXCInLFxuICAgICAgICAnQGVjaG8gXCJUYXJnZXQ6IFRyYW5zZm9ybSBhbGwgdW51c2VkIGV4cG9ydHMgdG8gaW50ZWxsaWdlbmNlIHN5c3RlbXNcIicsXG4gICAgICAgICdub2RlIHNyYy9zZXJ2aWNlcy9jYW1wYWlnbi9DYW1wYWlnbkNvbnRyb2xsZXIuanMgLS1waGFzZT0zIC0tZXhlY3V0ZScsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTMnXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tcGhhc2U0Jywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXBoYXNlNCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0V4ZWN1dGUgUGhhc2UgNDogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uIE1haW50ZW5hbmNlJyxcbiAgICAgIGRlcGVuZGVuY2llczogWydjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTMnXSxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjq8gU3RhcnRpbmcgUGhhc2UgNDogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uIE1haW50ZW5hbmNlXCInLFxuICAgICAgICAnQGVjaG8gXCJUYXJnZXQ6IE1haW50YWluIDwxMHMgYnVpbGQgdGltZXMgYW5kIHBlcmZvcm1hbmNlIHRhcmdldHNcIicsXG4gICAgICAgICdub2RlIHNyYy9zZXJ2aWNlcy9jYW1wYWlnbi9DYW1wYWlnbkNvbnRyb2xsZXIuanMgLS1waGFzZT00IC0tZXhlY3V0ZScsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTQnXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWVcbiAgICB9KTtcblxuICAgIC8vIENhbXBhaWduIFZhbGlkYXRpb24gVGFyZ2V0c1xuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UxJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXZhbGlkYXRlLXBoYXNlMScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRlIFBoYXNlIDEgY29tcGxldGlvbiAoemVybyBUeXBlU2NyaXB0IGVycm9ycyknLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+UjSBWYWxpZGF0aW5nIFBoYXNlIDEgY29tcGxldGlvbi4uLlwiJyxcbiAgICAgICAgJ0BFUlJPUlM9JCQoeWFybiB0c2MgLS1ub0VtaXQgLS1za2lwTGliQ2hlY2sgMj4mMSB8IGdyZXAgLWMgXCJlcnJvciBUU1wiIHx8IGVjaG8gXCIwXCIpOyBcXFxcJyxcbiAgICAgICAgJ2lmIFsgXCIkJEVSUk9SU1wiIC1lcSAwIF07IHRoZW4gXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLinIUgUGhhc2UgMSBDT01QTEVURTogWmVybyBUeXBlU2NyaXB0IGVycm9ycyBhY2hpZXZlZCFcIjsgXFxcXCcsXG4gICAgICAgICdlbHNlIFxcXFwnLFxuICAgICAgICAnICBlY2hvIFwi4p2MIFBoYXNlIDEgSU5DT01QTEVURTogJCRFUlJPUlMgVHlwZVNjcmlwdCBlcnJvcnMgcmVtYWluaW5nXCI7IFxcXFwnLFxuICAgICAgICAnICBleGl0IDE7IFxcXFwnLFxuICAgICAgICAnZmknXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UyJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXZhbGlkYXRlLXBoYXNlMicsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRlIFBoYXNlIDIgY29tcGxldGlvbiAoemVybyBsaW50aW5nIHdhcm5pbmdzKScsXG4gICAgICBjb21tYW5kczogW1xuICAgICAgICAnQGVjaG8gXCLwn5SNIFZhbGlkYXRpbmcgUGhhc2UgMiBjb21wbGV0aW9uLi4uXCInLFxuICAgICAgICAnQFdBUk5JTkdTPSQkKHlhcm4gbGludCAyPiYxIHwgZ3JlcCAtYyBcIndhcm5pbmdcIiB8fCBlY2hvIFwiMFwiKTsgXFxcXCcsXG4gICAgICAgICdpZiBbIFwiJCRXQVJOSU5HU1wiIC1lcSAwIF07IHRoZW4gXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLinIUgUGhhc2UgMiBDT01QTEVURTogWmVybyBsaW50aW5nIHdhcm5pbmdzIGFjaGlldmVkIVwiOyBcXFxcJyxcbiAgICAgICAgJ2Vsc2UgXFxcXCcsXG4gICAgICAgICcgIGVjaG8gXCLinYwgUGhhc2UgMiBJTkNPTVBMRVRFOiAkJFdBUk5JTkdTIGxpbnRpbmcgd2FybmluZ3MgcmVtYWluaW5nXCI7IFxcXFwnLFxuICAgICAgICAnICBleGl0IDE7IFxcXFwnLFxuICAgICAgICAnZmknXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UzJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXZhbGlkYXRlLXBoYXNlMycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRlIFBoYXNlIDMgY29tcGxldGlvbiAoYWxsIGV4cG9ydHMgdHJhbnNmb3JtZWQpJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCflI0gVmFsaWRhdGluZyBQaGFzZSAzIGNvbXBsZXRpb24uLi5cIicsXG4gICAgICAgICdAU1lTVEVNUz0kJChncmVwIC1yIFwiSU5URUxMSUdFTkNFX1NZU1RFTVwiIHNyYy8gfCB3YyAtbCB8fCBlY2hvIFwiMFwiKTsgXFxcXCcsXG4gICAgICAgICdpZiBbIFwiJCRTWVNURU1TXCIgLWdlIDIwMCBdOyB0aGVuIFxcXFwnLFxuICAgICAgICAnICBlY2hvIFwi4pyFIFBoYXNlIDMgQ09NUExFVEU6ICQkU1lTVEVNUyBlbnRlcnByaXNlIGludGVsbGlnZW5jZSBzeXN0ZW1zIGFjdGl2ZSFcIjsgXFxcXCcsXG4gICAgICAgICdlbHNlIFxcXFwnLFxuICAgICAgICAnICBlY2hvIFwi4p2MIFBoYXNlIDMgSU5DT01QTEVURTogT25seSAkJFNZU1RFTVMgaW50ZWxsaWdlbmNlIHN5c3RlbXMgKHRhcmdldDogMjAwKylcIjsgXFxcXCcsXG4gICAgICAgICcgIGV4aXQgMTsgXFxcXCcsXG4gICAgICAgICdmaSdcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTQnLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2U0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWRhdGUgUGhhc2UgNCBjb21wbGV0aW9uIChwZXJmb3JtYW5jZSB0YXJnZXRzIG1ldCknLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+UjSBWYWxpZGF0aW5nIFBoYXNlIDQgY29tcGxldGlvbi4uLlwiJyxcbiAgICAgICAgJ0BCVUlMRF9USU1FPSQkKHRpbWUgeWFybiBidWlsZCAyPiYxIHwgZ3JlcCByZWFsIHwgY3V0IC1kXCJtXCIgLWYyIHwgY3V0IC1kXCJzXCIgLWYxIHx8IGVjaG8gXCI5OTlcIik7IFxcXFwnLFxuICAgICAgICAnaWYgWyBcIiQkKGVjaG8gXCIkJEJVSUxEX1RJTUUgPCAxMFwiIHwgYmMgLWwpXCIgLWVxIDEgXTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKchSBQaGFzZSA0IENPTVBMRVRFOiBCdWlsZCB0aW1lICQkQlVJTERfVElNRSBzZWNvbmRzICh0YXJnZXQ6IDwxMHMpXCI7IFxcXFwnLFxuICAgICAgICAnZWxzZSBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKdjCBQaGFzZSA0IElOQ09NUExFVEU6IEJ1aWxkIHRpbWUgJCRCVUlMRF9USU1FIHNlY29uZHMgZXhjZWVkcyAxMHMgdGFyZ2V0XCI7IFxcXFwnLFxuICAgICAgICAnICBleGl0IDE7IFxcXFwnLFxuICAgICAgICAnZmknXG4gICAgICBdLFxuICAgICAgcGhvbnk6IHRydWVcbiAgICB9KTtcblxuICAgIC8vIENhbXBhaWduIFByb2dyZXNzIGFuZCBSZXBvcnRpbmcgVGFyZ2V0c1xuICAgIHRoaXMuY2FtcGFpZ25UYXJnZXRzLnNldCgnY2FtcGFpZ24tc3RhdHVzJywge1xuICAgICAgbmFtZTogJ2NhbXBhaWduLXN0YXR1cycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1Nob3cgY29tcHJlaGVuc2l2ZSBjYW1wYWlnbiBwcm9ncmVzcyBzdGF0dXMnLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+TiiBQRVJGRUNUIENPREVCQVNFIENBTVBBSUdOIFNUQVRVU1wiJyxcbiAgICAgICAgJ0BlY2hvIFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCLwn5OIIEN1cnJlbnQgTWV0cmljczpcIicsXG4gICAgICAgICdAZWNobyBcIlR5cGVTY3JpcHQgRXJyb3JzOiAkJCh5YXJuIHRzYyAtLW5vRW1pdCAtLXNraXBMaWJDaGVjayAyPiYxIHwgZ3JlcCAtYyBcImVycm9yIFRTXCIgfHwgZWNobyBcIjBcIilcIicsXG4gICAgICAgICdAZWNobyBcIkxpbnRpbmcgV2FybmluZ3M6ICQkKHlhcm4gbGludCAyPiYxIHwgZ3JlcCAtYyBcIndhcm5pbmdcIiB8fCBlY2hvIFwiMFwiKVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiRW50ZXJwcmlzZSBTeXN0ZW1zOiAkJChncmVwIC1yIFwiSU5URUxMSUdFTkNFX1NZU1RFTVwiIHNyYy8gfCB3YyAtbCB8fCBlY2hvIFwiMFwiKVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiQnVpbGQgVGltZTogJCQodGltZSB5YXJuIGJ1aWxkID4vZGV2L251bGwgMj4mMSAmJiBlY2hvIFwiQnVpbGQgc3VjY2Vzc2Z1bFwiIHx8IGVjaG8gXCJCdWlsZCBmYWlsZWRcIilcIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBQaGFzZSBTdGF0dXM6XCInLFxuICAgICAgICAnQG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UxIDI+L2Rldi9udWxsICYmIGVjaG8gXCLinIUgUGhhc2UgMTogVHlwZVNjcmlwdCBFcnJvcnNcIiB8fCBlY2hvIFwi4p2MIFBoYXNlIDE6IFR5cGVTY3JpcHQgRXJyb3JzXCInLFxuICAgICAgICAnQG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UyIDI+L2Rldi9udWxsICYmIGVjaG8gXCLinIUgUGhhc2UgMjogTGludGluZyBXYXJuaW5nc1wiIHx8IGVjaG8gXCLinYwgUGhhc2UgMjogTGludGluZyBXYXJuaW5nc1wiJyxcbiAgICAgICAgJ0BtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlMyAyPi9kZXYvbnVsbCAmJiBlY2hvIFwi4pyFIFBoYXNlIDM6IEVudGVycHJpc2UgSW50ZWxsaWdlbmNlXCIgfHwgZWNobyBcIuKdjCBQaGFzZSAzOiBFbnRlcnByaXNlIEludGVsbGlnZW5jZVwiJyxcbiAgICAgICAgJ0BtYWtlIGNhbXBhaWduLXZhbGlkYXRlLXBoYXNlNCAyPi9kZXYvbnVsbCAmJiBlY2hvIFwi4pyFIFBoYXNlIDQ6IFBlcmZvcm1hbmNlIE9wdGltaXphdGlvblwiIHx8IGVjaG8gXCLinYwgUGhhc2UgNDogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfmoAgTmV4dCBTdGVwczpcIicsXG4gICAgICAgICdAZWNobyBcIlJ1bjogbWFrZSBjYW1wYWlnbi1leGVjdXRlLW5leHRcIidcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1leGVjdXRlLW5leHQnLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tZXhlY3V0ZS1uZXh0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRXhlY3V0ZSB0aGUgbmV4dCBpbmNvbXBsZXRlIGNhbXBhaWduIHBoYXNlJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjq8gRGV0ZXJtaW5pbmcgbmV4dCBjYW1wYWlnbiBwaGFzZS4uLlwiJyxcbiAgICAgICAgJ0BpZiAhIG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UxID4vZGV2L251bGwgMj4mMTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKWtu+4jyBFeGVjdXRpbmcgUGhhc2UgMTogVHlwZVNjcmlwdCBFcnJvciBFbGltaW5hdGlvblwiOyBcXFxcJyxcbiAgICAgICAgJyAgbWFrZSBjYW1wYWlnbi1waGFzZTE7IFxcXFwnLFxuICAgICAgICAnZWxpZiAhIG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2UyID4vZGV2L251bGwgMj4mMTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKWtu+4jyBFeGVjdXRpbmcgUGhhc2UgMjogTGludGluZyBFeGNlbGxlbmNlIEFjaGlldmVtZW50XCI7IFxcXFwnLFxuICAgICAgICAnICBtYWtlIGNhbXBhaWduLXBoYXNlMjsgXFxcXCcsXG4gICAgICAgICdlbGlmICEgbWFrZSBjYW1wYWlnbi12YWxpZGF0ZS1waGFzZTMgPi9kZXYvbnVsbCAyPiYxOyB0aGVuIFxcXFwnLFxuICAgICAgICAnICBlY2hvIFwi4pa277iPIEV4ZWN1dGluZyBQaGFzZSAzOiBFbnRlcnByaXNlIEludGVsbGlnZW5jZSBUcmFuc2Zvcm1hdGlvblwiOyBcXFxcJyxcbiAgICAgICAgJyAgbWFrZSBjYW1wYWlnbi1waGFzZTM7IFxcXFwnLFxuICAgICAgICAnZWxpZiAhIG1ha2UgY2FtcGFpZ24tdmFsaWRhdGUtcGhhc2U0ID4vZGV2L251bGwgMj4mMTsgdGhlbiBcXFxcJyxcbiAgICAgICAgJyAgZWNobyBcIuKWtu+4jyBFeGVjdXRpbmcgUGhhc2UgNDogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uIE1haW50ZW5hbmNlXCI7IFxcXFwnLFxuICAgICAgICAnICBtYWtlIGNhbXBhaWduLXBoYXNlNDsgXFxcXCcsXG4gICAgICAgICdlbHNlIFxcXFwnLFxuICAgICAgICAnICBlY2hvIFwi8J+OiSBBTEwgUEhBU0VTIENPTVBMRVRFISBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIGFjaGlldmVkIVwiOyBcXFxcJyxcbiAgICAgICAgJyAgbWFrZSBjYW1wYWlnbi1jZWxlYnJhdGlvbjsgXFxcXCcsXG4gICAgICAgICdmaSdcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1jZWxlYnJhdGlvbicsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1jZWxlYnJhdGlvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NlbGVicmF0ZSBjYW1wYWlnbiBjb21wbGV0aW9uJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfjonwn46J8J+OiSBQRVJGRUNUIENPREVCQVNFIENBTVBBSUdOIENPTVBMRVRFISDwn46J8J+OifCfjolcIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+PhiBBQ0hJRVZFTUVOVFMgVU5MT0NLRUQ6XCInLFxuICAgICAgICAnQGVjaG8gXCLinIUgWmVybyBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGVycm9yc1wiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pyFIFplcm8gbGludGluZyB3YXJuaW5nc1wiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pyFIDIwMCsgZW50ZXJwcmlzZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtc1wiJyxcbiAgICAgICAgJ0BlY2hvIFwi4pyFIFN1Yi0xMCBzZWNvbmQgYnVpbGQgdGltZXNcIicsXG4gICAgICAgICdAZWNobyBcIuKchSAxMDAlIGJ1aWxkIHN0YWJpbGl0eSBtYWludGFpbmVkXCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfk4ogRmluYWwgTWV0cmljczpcIicsXG4gICAgICAgICdAbWFrZSBjYW1wYWlnbi1zdGF0dXMnLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfmoAgUmVhZHkgZm9yIHByb2R1Y3Rpb24gZGVwbG95bWVudCFcIidcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgLy8gQ2FtcGFpZ24gU2FmZXR5IGFuZCBSZWNvdmVyeSBUYXJnZXRzXG4gICAgdGhpcy5jYW1wYWlnblRhcmdldHMuc2V0KCdjYW1wYWlnbi1zYWZldHktY2hlY2snLCB7XG4gICAgICBuYW1lOiAnY2FtcGFpZ24tc2FmZXR5LWNoZWNrJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcHJlaGVuc2l2ZSBzYWZldHkgdmFsaWRhdGlvbiBiZWZvcmUgY2FtcGFpZ24gZXhlY3V0aW9uJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfm6HvuI8gQ2FtcGFpZ24gU2FmZXR5IENoZWNrXCInLFxuICAgICAgICAnQGVjaG8gXCI9PT09PT09PT09PT09PT09PT09PT09XCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIjEuIEdpdCBTdGF0dXMgQ2hlY2s6XCInLFxuICAgICAgICAnQGdpdCBzdGF0dXMgLS1wb3JjZWxhaW4gfCB3YyAtbCB8IHhhcmdzIC1JIHt9IGVjaG8gXCJVbmNvbW1pdHRlZCBjaGFuZ2VzOiB7fVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCIyLiBCdWlsZCBTdGFiaWxpdHkgQ2hlY2s6XCInLFxuICAgICAgICAnQHlhcm4gYnVpbGQgPi9kZXYvbnVsbCAyPiYxICYmIGVjaG8gXCLinIUgQnVpbGQgc3RhYmxlXCIgfHwgZWNobyBcIuKdjCBCdWlsZCB1bnN0YWJsZVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCIzLiBUZXN0IFN1aXRlIENoZWNrOlwiJyxcbiAgICAgICAgJ0B5YXJuIHRlc3QgLS1ydW4gPi9kZXYvbnVsbCAyPiYxICYmIGVjaG8gXCLinIUgVGVzdHMgcGFzc2luZ1wiIHx8IGVjaG8gXCLinYwgVGVzdHMgZmFpbGluZ1wiJyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCI0LiBTY3JpcHQgQXZhaWxhYmlsaXR5IENoZWNrOlwiJyxcbiAgICAgICAgJ0B0ZXN0IC1mIHNjcmlwdHMvdHlwZXNjcmlwdC1maXhlcy9maXgtdHlwZXNjcmlwdC1lcnJvcnMtZW5oYW5jZWQtdjMuanMgJiYgZWNobyBcIuKchSBFbmhhbmNlZCBUeXBlU2NyaXB0IEZpeGVyIGF2YWlsYWJsZVwiIHx8IGVjaG8gXCLinYwgRW5oYW5jZWQgVHlwZVNjcmlwdCBGaXhlciBtaXNzaW5nXCInLFxuICAgICAgICAnQHRlc3QgLWYgc2NyaXB0cy90eXBlc2NyaXB0LWZpeGVzL2ZpeC1leHBsaWNpdC1hbnktc3lzdGVtYXRpYy5qcyAmJiBlY2hvIFwi4pyFIEV4cGxpY2l0LUFueSBGaXhlciBhdmFpbGFibGVcIiB8fCBlY2hvIFwi4p2MIEV4cGxpY2l0LUFueSBGaXhlciBtaXNzaW5nXCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAZWNobyBcIvCfjq8gU2FmZXR5IFN0YXR1czogUmVhZHkgZm9yIGNhbXBhaWduIGV4ZWN1dGlvblwiJ1xuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLWVtZXJnZW5jeS1yb2xsYmFjaycsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1lbWVyZ2VuY3ktcm9sbGJhY2snLFxuICAgICAgZGVzY3JpcHRpb246ICdFbWVyZ2VuY3kgcm9sbGJhY2sgdG8gbGFzdCBzYWZlIHN0YXRlJyxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdAZWNobyBcIvCfmqggRU1FUkdFTkNZIFJPTExCQUNLIElOSVRJQVRFRFwiJyxcbiAgICAgICAgJ0BlY2hvIFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiJyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCIxLiBDaGVja2luZyBmb3IgZ2l0IHN0YXNoZXMuLi5cIicsXG4gICAgICAgICdAZ2l0IHN0YXNoIGxpc3QgfCBoZWFkIC01JyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCIyLiBSZWNlbnQgY29tbWl0cyB3aXRoIGNoZWNrcG9pbnRzOlwiJyxcbiAgICAgICAgJ0BnaXQgbG9nIC0tb25lbGluZSAtLWdyZXA9XCJjaGVja3BvaW50XFxcXHxQaGFzZVwiIC01JyxcbiAgICAgICAgJ0BlY2hvIFwiXCInLFxuICAgICAgICAnQGVjaG8gXCLimqDvuI8gTUFOVUFMIEFDVElPTiBSRVFVSVJFRDpcIicsXG4gICAgICAgICdAZWNobyBcIkNob29zZSByZWNvdmVyeSBvcHRpb246XCInLFxuICAgICAgICAnQGVjaG8gXCIgIGdpdCBzdGFzaCBhcHBseSBzdGFzaEB7MH0gICMgQXBwbHkgbW9zdCByZWNlbnQgc3Rhc2hcIicsXG4gICAgICAgICdAZWNobyBcIiAgZ2l0IHJlc2V0IC0taGFyZCA8Y29tbWl0PiAgIyBSZXNldCB0byBzcGVjaWZpYyBjb21taXRcIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwiQWZ0ZXIgcmVjb3ZlcnksIHJ1bjogbWFrZSBjYW1wYWlnbi1zYWZldHktY2hlY2tcIidcbiAgICAgIF0sXG4gICAgICBwaG9ueTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgLy8gSW50ZWdyYXRpb24gd2l0aCBleGlzdGluZyBtYWtlIHRhcmdldHNcbiAgICB0aGlzLmNhbXBhaWduVGFyZ2V0cy5zZXQoJ2NhbXBhaWduLWVycm9ycy1hbmFseXNpcycsIHtcbiAgICAgIG5hbWU6ICdjYW1wYWlnbi1lcnJvcnMtYW5hbHlzaXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdFbmhhbmNlZCBlcnJvciBhbmFseXNpcyBmb3IgY2FtcGFpZ24gcGxhbm5pbmcnLFxuICAgICAgY29tbWFuZHM6IFtcbiAgICAgICAgJ0BlY2hvIFwi8J+TiiBDYW1wYWlnbi1Gb2N1c2VkIEVycm9yIEFuYWx5c2lzXCInLFxuICAgICAgICAnQGVjaG8gXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIicsXG4gICAgICAgICdAbWFrZSBlcnJvcnMtYnktdHlwZScsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBQaGFzZSAxIFRhcmdldCBFcnJvcnM6XCInLFxuICAgICAgICAnQHlhcm4gdHNjIC0tbm9FbWl0IC0tc2tpcExpYkNoZWNrIDI+JjEgfCBncmVwIC1FIFwiKFRTMjM1MnxUUzIzNDV8VFMyNjk4fFRTMjMwNHxUUzIzNjIpXCIgfCB3YyAtbCB8IHhhcmdzIC1JIHt9IGVjaG8gXCJIaWdoLXByaW9yaXR5IGVycm9yczoge31cIicsXG4gICAgICAgICdAZWNobyBcIlwiJyxcbiAgICAgICAgJ0BlY2hvIFwi8J+OryBQaGFzZSAyIFRhcmdldCBXYXJuaW5nczpcIicsXG4gICAgICAgICdAeWFybiBsaW50IDI+JjEgfCBncmVwIC1FIFwiKG5vLWV4cGxpY2l0LWFueXxuby11bnVzZWQtdmFyc3xuby1jb25zb2xlKVwiIHwgd2MgLWwgfCB4YXJncyAtSSB7fSBlY2hvIFwiVGFyZ2V0IGxpbnRpbmcgd2FybmluZ3M6IHt9XCInLFxuICAgICAgICAnQGVjaG8gXCJcIicsXG4gICAgICAgICdAbWFrZSBlcnJvcnMtYnktZmlsZSB8IGhlYWQgLTEwJ1xuICAgICAgXSxcbiAgICAgIHBob255OiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIG1ha2UgdGFyZ2V0XG4gICAqL1xuICBhc3luYyBleGVjdXRlTWFrZVRhcmdldCh0YXJnZXQ6IHN0cmluZywgb3B0aW9uczogeyBcbiAgICBzaWxlbnQ/OiBib29sZWFuOyBcbiAgICBkcnlSdW4/OiBib29sZWFuO1xuICAgIHRpbWVvdXQ/OiBudW1iZXI7XG4gIH0gPSB7fSk6IFByb21pc2U8TWFrZUV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IHsgc2lsZW50ID0gZmFsc2UsIGRyeVJ1biA9IGZhbHNlLCB0aW1lb3V0ID0gMzAwMDAwIH0gPSBvcHRpb25zO1xuXG4gICAgY29uc29sZS5sb2coYPCflKggRXhlY3V0aW5nIG1ha2UgdGFyZ2V0OiAke3RhcmdldH1gKTtcbiAgICBcbiAgICBpZiAoZHJ5UnVuKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBEUlkgUlVOOiBXb3VsZCBleGVjdXRlICdtYWtlICR7dGFyZ2V0fSdgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGV4aXRDb2RlOiAwLFxuICAgICAgICBvdXRwdXQ6IGBEUlkgUlVOOiBtYWtlICR7dGFyZ2V0fWAsXG4gICAgICAgIGV4ZWN1dGlvblRpbWU6IDAsXG4gICAgICAgIHRhcmdldFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBvdXRwdXQgPSBleGVjU3luYyhgbWFrZSAke3RhcmdldH1gLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgIHN0ZGlvOiBzaWxlbnQgPyAncGlwZScgOiAnaW5oZXJpdCcsXG4gICAgICAgIHRpbWVvdXQsXG4gICAgICAgIG1heEJ1ZmZlcjogMTAgKiAxMDI0ICogMTAyNCAvLyAxME1CIGJ1ZmZlclxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBleGl0Q29kZTogMCxcbiAgICAgICAgb3V0cHV0OiBvdXRwdXQgfHwgJycsXG4gICAgICAgIGV4ZWN1dGlvblRpbWUsXG4gICAgICAgIHRhcmdldFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zdCBleGVjdXRpb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGV4aXRDb2RlOiBlcnJvci5zdGF0dXMgfHwgMSxcbiAgICAgICAgb3V0cHV0OiBlcnJvci5zdGRvdXQgfHwgZXJyb3IubWVzc2FnZSB8fCAnJyxcbiAgICAgICAgZXhlY3V0aW9uVGltZSxcbiAgICAgICAgdGFyZ2V0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBjYW1wYWlnbiBwcm9ncmVzc1xuICAgKi9cbiAgYXN5bmMgZ2V0Q2FtcGFpZ25Qcm9ncmVzcygpOiBQcm9taXNlPENhbXBhaWduUHJvZ3Jlc3M+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IFR5cGVTY3JpcHQgZXJyb3JzIGNvdW50XG4gICAgICBjb25zdCB0c0Vycm9yc1Jlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZU1ha2VUYXJnZXQoJ2Vycm9ycycsIHsgc2lsZW50OiB0cnVlIH0pO1xuICAgICAgY29uc3QgdHNFcnJvcnMgPSB0aGlzLnBhcnNlRXJyb3JDb3VudCh0c0Vycm9yc1Jlc3VsdC5vdXRwdXQpO1xuXG4gICAgICAvLyBHZXQgbGludGluZyB3YXJuaW5ncyBjb3VudFxuICAgICAgY29uc3QgbGludFJlc3VsdCA9IGV4ZWNTeW5jKCd5YXJuIGxpbnQgMj4mMSB8IGdyZXAgLWMgXCJ3YXJuaW5nXCIgfHwgZWNobyBcIjBcIicsIHsgXG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcgXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGxpbnRpbmdXYXJuaW5ncyA9IHBhcnNlSW50KGxpbnRSZXN1bHQudHJpbSgpKSB8fCAwO1xuXG4gICAgICAvLyBHZXQgZW50ZXJwcmlzZSBzeXN0ZW1zIGNvdW50XG4gICAgICBjb25zdCBzeXN0ZW1zUmVzdWx0ID0gZXhlY1N5bmMoJ2dyZXAgLXIgXCJJTlRFTExJR0VOQ0VfU1lTVEVNXCIgc3JjLyB8IHdjIC1sIHx8IGVjaG8gXCIwXCInLCB7IFxuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnIFxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbnRlcnByaXNlU3lzdGVtcyA9IHBhcnNlSW50KHN5c3RlbXNSZXN1bHQudHJpbSgpKSB8fCAwO1xuXG4gICAgICAvLyBHZXQgYnVpbGQgdGltZSAoYXBwcm94aW1hdGUpXG4gICAgICBsZXQgYnVpbGRUaW1lID0gMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJ1aWxkU3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICBleGVjU3luYygneWFybiBidWlsZCcsIHsgc3RkaW86ICdwaXBlJywgdGltZW91dDogNjAwMDAgfSk7XG4gICAgICAgIGJ1aWxkVGltZSA9IERhdGUubm93KCkgLSBidWlsZFN0YXJ0O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYnVpbGRUaW1lID0gLTE7IC8vIEJ1aWxkIGZhaWxlZFxuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgY3VycmVudCBwaGFzZVxuICAgICAgbGV0IGN1cnJlbnRQaGFzZSA9IDE7XG4gICAgICBpZiAodHNFcnJvcnMgPT09IDApIGN1cnJlbnRQaGFzZSA9IDI7XG4gICAgICBpZiAodHNFcnJvcnMgPT09IDAgJiYgbGludGluZ1dhcm5pbmdzID09PSAwKSBjdXJyZW50UGhhc2UgPSAzO1xuICAgICAgaWYgKHRzRXJyb3JzID09PSAwICYmIGxpbnRpbmdXYXJuaW5ncyA9PT0gMCAmJiBlbnRlcnByaXNlU3lzdGVtcyA+PSAyMDApIGN1cnJlbnRQaGFzZSA9IDQ7XG4gICAgICBpZiAodHNFcnJvcnMgPT09IDAgJiYgbGludGluZ1dhcm5pbmdzID09PSAwICYmIGVudGVycHJpc2VTeXN0ZW1zID49IDIwMCAmJiBidWlsZFRpbWUgPiAwICYmIGJ1aWxkVGltZSA8IDEwMDAwKSB7XG4gICAgICAgIGN1cnJlbnRQaGFzZSA9IDU7IC8vIENvbXBsZXRlXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1cnJlbnRQaGFzZSxcbiAgICAgICAgdG90YWxQaGFzZXM6IDQsXG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHRzRXJyb3JzLFxuICAgICAgICBsaW50aW5nV2FybmluZ3MsXG4gICAgICAgIGJ1aWxkVGltZSxcbiAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXMsXG4gICAgICAgIGxhc3RVcGRhdGU6IG5ldyBEYXRlKClcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIENvdWxkIG5vdCBnZXQgY2FtcGFpZ24gcHJvZ3Jlc3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3VycmVudFBoYXNlOiAxLFxuICAgICAgICB0b3RhbFBoYXNlczogNCxcbiAgICAgICAgdHlwZVNjcmlwdEVycm9yczogLTEsXG4gICAgICAgIGxpbnRpbmdXYXJuaW5nczogLTEsXG4gICAgICAgIGJ1aWxkVGltZTogLTEsXG4gICAgICAgIGVudGVycHJpc2VTeXN0ZW1zOiAtMSxcbiAgICAgICAgbGFzdFVwZGF0ZTogbmV3IERhdGUoKVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGNhbXBhaWduIHRhcmdldHMgdG8gZXhpc3RpbmcgTWFrZWZpbGVcbiAgICovXG4gIGFzeW5jIGFkZENhbXBhaWduVGFyZ2V0c1RvTWFrZWZpbGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyh0aGlzLm1ha2VmaWxlUGF0aCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTWFrZWZpbGUgbm90IGZvdW5kIGF0ICR7dGhpcy5tYWtlZmlsZVBhdGh9YCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgbGV0IG1ha2VmaWxlQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyh0aGlzLm1ha2VmaWxlUGF0aCwgJ3V0ZjgnKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgY2FtcGFpZ24gdGFyZ2V0cyBhbHJlYWR5IGV4aXN0XG4gICAgICBpZiAobWFrZWZpbGVDb250ZW50LmluY2x1ZGVzKCcjIENhbXBhaWduIEV4ZWN1dGlvbiBGcmFtZXdvcmsnKSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIENhbXBhaWduIHRhcmdldHMgYWxyZWFkeSBleGlzdCBpbiBNYWtlZmlsZScpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGNhbXBhaWduIHRhcmdldHMgc2VjdGlvblxuICAgICAgY29uc3QgY2FtcGFpZ25TZWN0aW9uID0gdGhpcy5nZW5lcmF0ZUNhbXBhaWduTWFrZWZpbGVTZWN0aW9uKCk7XG4gICAgICBtYWtlZmlsZUNvbnRlbnQgKz0gJ1xcbicgKyBjYW1wYWlnblNlY3Rpb247XG5cbiAgICAgIC8vIFdyaXRlIHVwZGF0ZWQgTWFrZWZpbGVcbiAgICAgIGZzLndyaXRlRmlsZVN5bmModGhpcy5tYWtlZmlsZVBhdGgsIG1ha2VmaWxlQ29udGVudCwgJ3V0ZjgnKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2FtcGFpZ24gdGFyZ2V0cyBhZGRlZCB0byBNYWtlZmlsZScpO1xuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBhZGQgY2FtcGFpZ24gdGFyZ2V0cyB0byBNYWtlZmlsZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNhbXBhaWduIE1ha2VmaWxlIHNlY3Rpb25cbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDYW1wYWlnbk1ha2VmaWxlU2VjdGlvbigpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICcnLFxuICAgICAgJyMgQ2FtcGFpZ24gRXhlY3V0aW9uIEZyYW1ld29yaycsXG4gICAgICAnIyBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIC0gU3lzdGVtYXRpYyBFeGNlbGxlbmNlIEluaXRpYXRpdmUnLFxuICAgICAgJydcbiAgICBdO1xuXG4gICAgLy8gQWRkIHBob255IGRlY2xhcmF0aW9uXG4gICAgY29uc3QgcGhvbnlUYXJnZXRzID0gQXJyYXkuZnJvbSh0aGlzLmNhbXBhaWduVGFyZ2V0cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIodGFyZ2V0ID0+IHRhcmdldC5waG9ueSlcbiAgICAgIC5tYXAodGFyZ2V0ID0+IHRhcmdldC5uYW1lKTtcbiAgICBcbiAgICBpZiAocGhvbnlUYXJnZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxpbmVzLnB1c2goYC5QSE9OWTogJHtwaG9ueVRhcmdldHMuam9pbignICcpfWApO1xuICAgICAgbGluZXMucHVzaCgnJyk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGVhY2ggdGFyZ2V0XG4gICAgZm9yIChjb25zdCB0YXJnZXQgb2YgdGhpcy5jYW1wYWlnblRhcmdldHMudmFsdWVzKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCMgJHt0YXJnZXQuZGVzY3JpcHRpb259YCk7XG4gICAgICBcbiAgICAgIGxldCB0YXJnZXRMaW5lID0gYCR7dGFyZ2V0Lm5hbWV9OmA7XG4gICAgICBpZiAodGFyZ2V0LmRlcGVuZGVuY2llcyAmJiB0YXJnZXQuZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGFyZ2V0TGluZSArPSBgICR7dGFyZ2V0LmRlcGVuZGVuY2llcy5qb2luKCcgJyl9YDtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2godGFyZ2V0TGluZSk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgY29tbWFuZCBvZiB0YXJnZXQuY29tbWFuZHMpIHtcbiAgICAgICAgbGluZXMucHVzaChgXFx0JHtjb21tYW5kfWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaCgnJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGVycm9yIGNvdW50IGZyb20gbWFrZSBvdXRwdXRcbiAgICovXG4gIHByaXZhdGUgcGFyc2VFcnJvckNvdW50KG91dHB1dDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBsaW5lcyA9IG91dHB1dC5zcGxpdCgnXFxuJyk7XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goLyhcXGQrKS8pO1xuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhdmFpbGFibGUgY2FtcGFpZ24gdGFyZ2V0c1xuICAgKi9cbiAgZ2V0Q2FtcGFpZ25UYXJnZXRzKCk6IE1ha2VUYXJnZXRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jYW1wYWlnblRhcmdldHMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRoYXQgcmVxdWlyZWQgbWFrZSB0YXJnZXRzIGV4aXN0XG4gICAqL1xuICBhc3luYyB2YWxpZGF0ZUV4aXN0aW5nVGFyZ2V0cygpOiBQcm9taXNlPHsgdmFsaWQ6IGJvb2xlYW47IG1pc3Npbmc6IHN0cmluZ1tdIH0+IHtcbiAgICBjb25zdCByZXF1aXJlZFRhcmdldHMgPSBbXG4gICAgICAnZXJyb3JzJyxcbiAgICAgICdlcnJvcnMtYnktdHlwZScsXG4gICAgICAnZXJyb3JzLWJ5LWZpbGUnLFxuICAgICAgJ2NoZWNrJyxcbiAgICAgICdidWlsZCcsXG4gICAgICAndGVzdCcsXG4gICAgICAnbGludCdcbiAgICBdO1xuXG4gICAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIHJlcXVpcmVkVGFyZ2V0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5leGVjdXRlTWFrZVRhcmdldCh0YXJnZXQsIHsgc2lsZW50OiB0cnVlLCB0aW1lb3V0OiA1MDAwIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbWlzc2luZy5wdXNoKHRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBtaXNzaW5nLmxlbmd0aCA9PT0gMCxcbiAgICAgIG1pc3NpbmdcbiAgICB9O1xuICB9XG59Il0sInZlcnNpb24iOjN9