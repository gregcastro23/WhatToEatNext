fb2ccc686b7aaaca617eef379cc31d8e
"use strict";
/**
 * ConsoleStatementRemovalSystem.ts
 *
 * Phase 2.3 Implementation - Console Statement Removal System
 * Integration for scripts/lint-fixes/fix-console-statements-only.js
 *
 * Features:
 * - Dry-run validation before console statement removal
 * - Selective removal system preserving debug-critical statements
 * - Integration with existing console statement removal script
 * - Safety protocols with git stash management
 * - Build validation after removal
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConsoleStatementRemovalSystem = void 0;
const child_process_1 = require("child_process");
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
class ConsoleStatementRemovalSystem {
    constructor(config = {}) {
        this.scriptPath = path.join(process.cwd(), 'scripts/lint-fixes/fix-console-statements-only.js');
        this.metricsFile = path.join(process.cwd(), '.console-removal-metrics.json');
        this.config = {
            maxFiles: 10,
            dryRun: true,
            autoFix: false,
            preserveDebugCritical: true,
            enableGitStash: true,
            buildValidation: true,
            batchSize: 8,
            selectiveRemoval: true,
            ...config,
        };
    }
    /**
     * Execute console statement removal with safety protocols
     */
    async executeRemoval() {
        console.log('üîá Starting Console Statement Removal System...');
        try {
            // Pre-execution validation
            await this.validatePreConditions();
            // Analyze console statements before removal
            const consoleAnalysis = await this.analyzeConsoleStatements();
            // Create safety checkpoint if enabled
            let stashId = null;
            if (this.config.enableGitStash) {
                stashId = await this.createSafetyStash();
            }
            // Execute the removal
            const result = await this.executeScript(consoleAnalysis);
            // Post-execution validation
            if (this.config.buildValidation && result.success) {
                const buildValid = await this.validateBuild();
                if (!buildValid) {
                    result.success = false;
                    result.errors.push('Build validation failed after console removal');
                    // Rollback if build fails
                    if (stashId) {
                        await this.rollbackFromStash(stashId);
                    }
                }
            }
            // Save metrics
            await this.saveMetrics(result);
            return result;
        }
        catch (error) {
            console.error('‚ùå Console statement removal failed:', error);
            throw error;
        }
    }
    /**
     * Execute batch processing for large-scale console removal
     */
    async executeBatchRemoval(totalFiles) {
        console.log('‚ö° Starting batch processing for console statement removal...');
        const batchResult = {
            totalBatches: 0,
            successfulBatches: 0,
            failedBatches: 0,
            totalFilesProcessed: 0,
            totalConsoleStatementsProcessed: 0,
            averageBuildTime: 0,
            errors: [],
            preservedCriticalStatements: 0,
        };
        try {
            // Determine number of batches
            const estimatedFiles = totalFiles || (await this.estimateFilesWithConsoleStatements());
            const batchCount = Math.ceil(estimatedFiles / this.config.batchSize);
            batchResult.totalBatches = batchCount;
            console.log(`üìä Processing ${estimatedFiles} files in ${batchCount} batches of ${this.config.batchSize} files each`);
            const buildTimes = [];
            // Process each batch
            for (let i = 0; i < batchCount; i++) {
                console.log(`\nüîÑ Processing batch ${i + 1}/${batchCount}...`);
                try {
                    const batchConfig = {
                        ...this.config,
                        maxFiles: this.config.batchSize,
                    };
                    const batchSystem = new ConsoleStatementRemovalSystem(batchConfig);
                    const result = await batchSystem.executeRemoval();
                    if (result.success) {
                        batchResult.successfulBatches++;
                        batchResult.totalFilesProcessed += result.filesProcessed;
                        batchResult.totalConsoleStatementsProcessed +=
                            result.consoleStatementsRemoved;
                        batchResult.preservedCriticalStatements +=
                            result.consoleStatementsPreserved;
                        buildTimes.push(result.buildTime);
                    }
                    else {
                        batchResult.failedBatches++;
                        batchResult.errors.push(`Batch ${i + 1} failed: ${result.errors.join(', ')}`);
                    }
                    // Safety pause between batches
                    if (i < batchCount - 1) {
                        console.log('‚è∏Ô∏è Pausing 2 seconds between batches for safety...');
                        await this.sleep(2000);
                    }
                }
                catch (error) {
                    batchResult.failedBatches++;
                    batchResult.errors.push(`Batch ${i + 1} error: ${error}`);
                    console.error(`‚ùå Batch ${i + 1} failed:`, error);
                }
            }
            // Calculate averages
            if (buildTimes.length > 0) {
                batchResult.averageBuildTime =
                    buildTimes.reduce((a, b) => a + b, 0) / buildTimes.length;
            }
            console.log(`\n‚úÖ Batch processing completed: ${batchResult.successfulBatches}/${batchResult.totalBatches} batches successful`);
            return batchResult;
        }
        catch (error) {
            console.error('‚ùå Batch processing failed:', error);
            throw error;
        }
    }
    /**
     * Analyze console statements to identify critical ones
     */
    async analyzeConsoleStatements() {
        console.log('üîç Analyzing console statements for critical preservation...');
        const statements = [];
        const srcDir = path.join(process.cwd(), 'src');
        const files = this.getAllSourceFiles(srcDir);
        for (const file of files) {
            try {
                const content = fs.readFileSync(file, 'utf-8');
                const fileStatements = this.analyzeFileConsoleStatements(file, content);
                statements.push(...fileStatements);
            }
            catch (error) {
                console.warn(`‚ö†Ô∏è Could not analyze file ${file}:`, error);
            }
        }
        const criticalCount = statements.filter(s => s.isCritical).length;
        const totalCount = statements.length;
        console.log(`üìä Found ${totalCount} console statements, ${criticalCount} marked as critical`);
        return statements;
    }
    /**
     * Analyze console statements in a single file
     */
    analyzeFileConsoleStatements(filePath, content) {
        const statements = [];
        const lines = content.split('\n');
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i];
            const lineNumber = i + 1;
            // Match console statements
            const consoleMatches = line.matchAll(/console\.(log|warn|error|info|debug)\s*\([^)]*\)/g);
            for (const match of consoleMatches) {
                const type = match[1];
                const column = match.index + 1;
                const content = match[0];
                // Get context (surrounding lines)
                const contextStart = Math.max(0, i - 2);
                const contextEnd = Math.min(lines.length - 1, i + 2);
                const context = lines.slice(contextStart, contextEnd + 1).join('\n');
                // Determine if critical
                const isCritical = this.isConsoleStatementCritical(filePath, content, context, type);
                const shouldPreserve = this.config.preserveDebugCritical && isCritical;
                statements.push({
                    file: filePath,
                    line: lineNumber,
                    column,
                    type,
                    content,
                    context,
                    isCritical,
                    shouldPreserve,
                });
            }
        }
        return statements;
    }
    /**
     * Determine if a console statement is critical and should be preserved
     */
    isConsoleStatementCritical(filePath, content, context, type) {
        // Always preserve error statements
        if (type === 'error') {
            return true;
        }
        // Preserve statements in debug/test files
        const debugFiles = ['debug', 'test', 'spec', '.test.', '.spec.', 'logger'];
        if (debugFiles.some(pattern => filePath.toLowerCase().includes(pattern))) {
            return true;
        }
        // Preserve statements with error handling context
        const errorHandlingPatterns = [
            /try\s*{[\s\S]*?catch/i,
            /catch\s*\(/i,
            /error/i,
            /exception/i,
            /fail/i,
            /throw/i,
        ];
        if (errorHandlingPatterns.some(pattern => pattern.test(context))) {
            return true;
        }
        // Preserve statements with important debugging information
        const importantPatterns = [
            /api/i,
            /request/i,
            /response/i,
            /auth/i,
            /login/i,
            /security/i,
            /critical/i,
            /important/i,
        ];
        if (importantPatterns.some(pattern => pattern.test(content))) {
            return true;
        }
        // Preserve warn statements in production code
        if (type === 'warn' && !filePath.includes('test')) {
            return true;
        }
        return false;
    }
    /**
     * Get all source files recursively
     */
    getAllSourceFiles(dir) {
        const files = [];
        if (!fs.existsSync(dir)) {
            return files;
        }
        const entries = fs.readdirSync(dir, { withFileTypes: true });
        for (const entry of entries) {
            const fullPath = path.join(dir, entry.name);
            if (entry.isDirectory() &&
                !entry.name.startsWith('.') &&
                entry.name !== 'node_modules') {
                files.push(...this.getAllSourceFiles(fullPath));
            }
            else if (entry.isFile() && /\.(ts|tsx|js|jsx)$/.test(entry.name)) {
                files.push(fullPath);
            }
        }
        return files;
    }
    /**
     * Validate pre-conditions before execution
     */
    async validatePreConditions() {
        // Check if script exists
        if (!fs.existsSync(this.scriptPath)) {
            throw new Error(`Console removal script not found: ${this.scriptPath}`);
        }
        // Check git status if required
        if (this.config.enableGitStash) {
            try {
                const gitStatus = (0, child_process_1.execSync)('git status --porcelain', {
                    encoding: 'utf-8',
                });
                if (gitStatus.trim() && !this.config.autoFix) {
                    console.warn('‚ö†Ô∏è Git working directory has uncommitted changes. Consider using --auto-fix or commit changes first.');
                }
            }
            catch (error) {
                console.warn('‚ö†Ô∏è Could not check git status:', error);
            }
        }
    }
    /**
     * Create safety stash before execution
     */
    async createSafetyStash() {
        try {
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const stashName = `console-removal-${timestamp}`;
            (0, child_process_1.execSync)(`git stash push -m "${stashName}"`, { encoding: 'utf-8' });
            console.log(`üì¶ Created safety stash: ${stashName}`);
            return stashName;
        }
        catch (error) {
            console.warn('‚ö†Ô∏è Could not create git stash:', error);
            return '';
        }
    }
    /**
     * Execute the console removal script
     */
    async executeScript(consoleAnalysis) {
        const result = {
            success: false,
            filesProcessed: 0,
            consoleStatementsRemoved: 0,
            consoleStatementsPreserved: 0,
            buildTime: 0,
            errors: [],
            warnings: [],
            preservedFiles: [],
        };
        try {
            // Build command arguments
            const args = [];
            if (this.config.dryRun) {
                args.push('--dry-run');
            }
            if (this.config.maxFiles) {
                args.push('--max-files');
                args.push(this.config.maxFiles.toString());
            }
            const command = `node ${this.scriptPath} ${args.join(' ')}`;
            console.log(`üîß Executing: ${command}`);
            const startTime = Date.now();
            const output = (0, child_process_1.execSync)(command, {
                encoding: 'utf-8',
                maxBuffer: 1024 * 1024 * 10, // 10MB buffer
            });
            const endTime = Date.now();
            // Parse output for metrics
            result.success = !output.includes('‚ùå') && !output.includes('Error:');
            result.buildTime = endTime - startTime;
            // Extract metrics from output
            const filesMatch = output.match(/Files processed:\s*(\d+)/i);
            if (filesMatch) {
                result.filesProcessed = parseInt(filesMatch[1]);
            }
            const statementsMatch = output.match(/Total console statements fixed:\s*(\d+)/i);
            if (statementsMatch) {
                result.consoleStatementsRemoved = parseInt(statementsMatch[1]);
            }
            // Calculate preserved statements
            const criticalStatements = consoleAnalysis.filter(s => s.shouldPreserve);
            result.consoleStatementsPreserved = criticalStatements.length;
            result.preservedFiles = [...new Set(criticalStatements.map(s => s.file))];
            // Extract warnings and errors
            const lines = output.split('\n');
            for (const line of lines) {
                if (line.includes('‚ö†Ô∏è') || line.includes('WARNING')) {
                    result.warnings.push(line.trim());
                }
                else if (line.includes('‚ùå') || line.includes('ERROR')) {
                    result.errors.push(line.trim());
                }
            }
            console.log(`‚úÖ Script execution completed in ${result.buildTime}ms`);
            console.log(`üìä Removed: ${result.consoleStatementsRemoved}, Preserved: ${result.consoleStatementsPreserved}`);
            return result;
        }
        catch (error) {
            result.success = false;
            result.errors.push(`Script execution failed: ${error}`);
            console.error('‚ùå Script execution failed:', error);
            return result;
        }
    }
    /**
     * Validate build after console removal
     */
    async validateBuild() {
        try {
            console.log('üîç Validating build after console removal...');
            const startTime = Date.now();
            (0, child_process_1.execSync)('yarn build', {
                encoding: 'utf-8',
                stdio: 'pipe',
            });
            const buildTime = Date.now() - startTime;
            console.log(`‚úÖ Build validation successful (${buildTime}ms)`);
            return true;
        }
        catch (error) {
            console.error('‚ùå Build validation failed:', error);
            return false;
        }
    }
    /**
     * Rollback from git stash
     */
    async rollbackFromStash(stashName) {
        try {
            console.log(`üîÑ Rolling back from stash: ${stashName}`);
            (0, child_process_1.execSync)(`git stash apply stash^{/${stashName}}`, { encoding: 'utf-8' });
            console.log('‚úÖ Rollback completed');
        }
        catch (error) {
            console.error('‚ùå Rollback failed:', error);
            throw error;
        }
    }
    /**
     * Estimate files with console statements
     */
    async estimateFilesWithConsoleStatements() {
        try {
            // Use the analyzer to get current console statements count
            const { LintingWarningAnalyzer } = await Promise.resolve().then(() => __importStar(require('./LintingWarningAnalyzer.js')));
            const analyzer = new LintingWarningAnalyzer();
            const result = await analyzer.analyzeLintingWarnings();
            return result.distribution.consoleStatements.files.length;
        }
        catch (error) {
            console.warn('‚ö†Ô∏è Could not estimate files with console statements, using default:', error);
            return 50; // Default estimate
        }
    }
    /**
     * Save metrics to file
     */
    async saveMetrics(result) {
        try {
            const metrics = {
                timestamp: new Date().toISOString(),
                config: this.config,
                result,
                summary: {
                    success: result.success,
                    filesProcessed: result.filesProcessed,
                    consoleStatementsRemoved: result.consoleStatementsRemoved,
                    consoleStatementsPreserved: result.consoleStatementsPreserved,
                    buildTime: result.buildTime,
                    preservedFiles: result.preservedFiles.length,
                },
            };
            fs.writeFileSync(this.metricsFile, JSON.stringify(metrics, null, 2));
            console.log(`üìä Metrics saved to ${this.metricsFile}`);
        }
        catch (error) {
            console.warn('‚ö†Ô∏è Could not save metrics:', error);
        }
    }
    /**
     * Generate removal report
     */
    generateReport(result) {
        if ('totalBatches' in result) {
            // Batch processing report
            return this.generateBatchReport(result);
        }
        else {
            // Single execution report
            return this.generateSingleReport(result);
        }
    }
    /**
     * Generate single execution report
     */
    generateSingleReport(result) {
        return `
# Console Statement Removal Report
Generated: ${new Date().toISOString()}

## Execution Summary
- **Success**: ${result.success ? '‚úÖ' : '‚ùå'}
- **Files Processed**: ${result.filesProcessed}
- **Console Statements Removed**: ${result.consoleStatementsRemoved}
- **Console Statements Preserved**: ${result.consoleStatementsPreserved}
- **Build Time**: ${result.buildTime}ms
- **Files with Preserved Statements**: ${result.preservedFiles.length}

## Configuration
- **Max Files**: ${this.config.maxFiles}
- **Dry Run**: ${this.config.dryRun}
- **Preserve Debug Critical**: ${this.config.preserveDebugCritical}
- **Selective Removal**: ${this.config.selectiveRemoval}
- **Build Validation**: ${this.config.buildValidation}
- **Git Stash**: ${this.config.enableGitStash}

## Preserved Files
${result.preservedFiles.length > 0
            ? result.preservedFiles.map(f => `- ${f}`).join('\n')
            : 'No files had critical console statements preserved'}

## Issues
${result.errors.length > 0 ? '### Errors\n' + result.errors.map(e => `- ${e}`).join('\n') : 'No errors'}
${result.warnings.length > 0 ? '### Warnings\n' + result.warnings.map(w => `- ${w}`).join('\n') : 'No warnings'}

## Next Steps
${result.success
            ? '- ‚úÖ Console removal completed successfully\n- Review preserved critical statements\n- Run linting to verify improvements\n- Consider committing changes'
            : '- ‚ùå Console removal failed\n- Review errors above\n- Consider running with --dry-run first\n- Check git stash for rollback if needed'}
`;
    }
    /**
     * Generate batch processing report
     */
    generateBatchReport(result) {
        return `
# Console Statement Batch Removal Report
Generated: ${new Date().toISOString()}

## Batch Summary
- **Total Batches**: ${result.totalBatches}
- **Successful Batches**: ${result.successfulBatches}
- **Failed Batches**: ${result.failedBatches}
- **Success Rate**: ${((result.successfulBatches / result.totalBatches) * 100).toFixed(1)}%

## Processing Summary
- **Total Files Processed**: ${result.totalFilesProcessed}
- **Total Console Statements Processed**: ${result.totalConsoleStatementsProcessed}
- **Critical Statements Preserved**: ${result.preservedCriticalStatements}
- **Average Build Time**: ${result.averageBuildTime.toFixed(0)}ms

## Batch Configuration
- **Batch Size**: ${this.config.batchSize} files per batch
- **Preserve Debug Critical**: ${this.config.preserveDebugCritical}
- **Selective Removal**: ${this.config.selectiveRemoval}
- **Build Validation**: ${this.config.buildValidation}

## Issues
${result.errors.length > 0 ? '### Batch Errors\n' + result.errors.map(e => `- ${e}`).join('\n') : 'No batch errors'}

## Recommendations
${result.successfulBatches === result.totalBatches
            ? '- ‚úÖ All batches completed successfully\n- Review preserved critical statements\n- Run final linting validation\n- Consider committing all changes'
            : '- ‚ö†Ô∏è Some batches failed\n- Review failed batch errors\n- Consider re-running failed batches\n- Check git stashes for rollback if needed'}
`;
    }
    /**
     * Utility function for delays
     */
    sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
}
exports.ConsoleStatementRemovalSystem = ConsoleStatementRemovalSystem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Db25zb2xlU3RhdGVtZW50UmVtb3ZhbFN5c3RlbS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7OztHQVlHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILGlEQUF5QztBQUN6Qyx1Q0FBeUI7QUFDekIsMkNBQTZCO0FBOEM3QixNQUFhLDZCQUE2QjtJQUt4QyxZQUFZLFNBQXdDLEVBQUU7UUFDcEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUN6QixPQUFPLENBQUMsR0FBRyxFQUFFLEVBQ2IsbURBQW1ELENBQ3BELENBQUM7UUFDRixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQzFCLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFDYiwrQkFBK0IsQ0FDaEMsQ0FBQztRQUVGLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixRQUFRLEVBQUUsRUFBRTtZQUNaLE1BQU0sRUFBRSxJQUFJO1lBQ1osT0FBTyxFQUFFLEtBQUs7WUFDZCxxQkFBcUIsRUFBRSxJQUFJO1lBQzNCLGNBQWMsRUFBRSxJQUFJO1lBQ3BCLGVBQWUsRUFBRSxJQUFJO1lBQ3JCLFNBQVMsRUFBRSxDQUFDO1lBQ1osZ0JBQWdCLEVBQUUsSUFBSTtZQUN0QixHQUFHLE1BQU07U0FDVixDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGNBQWM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpREFBaUQsQ0FBQyxDQUFDO1FBRS9ELElBQUk7WUFDRiwyQkFBMkI7WUFDM0IsTUFBTSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztZQUVuQyw0Q0FBNEM7WUFDNUMsTUFBTSxlQUFlLEdBQUcsTUFBTSxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztZQUU5RCxzQ0FBc0M7WUFDdEMsSUFBSSxPQUFPLEdBQWtCLElBQUksQ0FBQztZQUNs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QUFZLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOzs7K0JBRzFELE1BQU0sQ0FBQyxtQkFBbUI7NENBQ2IsTUFBTSxDQUFDLCtCQUErQjt1Q0FDM0MsTUFBTSxDQUFDLDJCQUEyQjs0QkFDN0MsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7OztvQkFHMUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTO2lDQUNSLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCOzJCQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQjswQkFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlOzs7RUFHbkQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGlCQUFpQjs7O0VBSWpILE1BQU0sQ0FBQyxpQkFBaUIsS0FBSyxNQUFNLENBQUMsWUFBWTtZQUM5QyxDQUFDLENBQUMsbUpBQW1KO1lBQ3JKLENBQUMsQ0FBQywwSUFDTjtDQUNDLENBQUM7SUFDQSxDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsRUFBVTtRQUN0QixPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7Q0FDRjtBQXpvQkQsc0VBeW9CQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL0NvbnNvbGVTdGF0ZW1lbnRSZW1vdmFsU3lzdGVtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29uc29sZVN0YXRlbWVudFJlbW92YWxTeXN0ZW0udHNcbiAqXG4gKiBQaGFzZSAyLjMgSW1wbGVtZW50YXRpb24gLSBDb25zb2xlIFN0YXRlbWVudCBSZW1vdmFsIFN5c3RlbVxuICogSW50ZWdyYXRpb24gZm9yIHNjcmlwdHMvbGludC1maXhlcy9maXgtY29uc29sZS1zdGF0ZW1lbnRzLW9ubHkuanNcbiAqXG4gKiBGZWF0dXJlczpcbiAqIC0gRHJ5LXJ1biB2YWxpZGF0aW9uIGJlZm9yZSBjb25zb2xlIHN0YXRlbWVudCByZW1vdmFsXG4gKiAtIFNlbGVjdGl2ZSByZW1vdmFsIHN5c3RlbSBwcmVzZXJ2aW5nIGRlYnVnLWNyaXRpY2FsIHN0YXRlbWVudHNcbiAqIC0gSW50ZWdyYXRpb24gd2l0aCBleGlzdGluZyBjb25zb2xlIHN0YXRlbWVudCByZW1vdmFsIHNjcmlwdFxuICogLSBTYWZldHkgcHJvdG9jb2xzIHdpdGggZ2l0IHN0YXNoIG1hbmFnZW1lbnRcbiAqIC0gQnVpbGQgdmFsaWRhdGlvbiBhZnRlciByZW1vdmFsXG4gKi9cblxuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uc29sZVJlbW92YWxDb25maWcge1xuICBtYXhGaWxlczogbnVtYmVyO1xuICBkcnlSdW46IGJvb2xlYW47XG4gIGF1dG9GaXg6IGJvb2xlYW47XG4gIHByZXNlcnZlRGVidWdDcml0aWNhbDogYm9vbGVhbjtcbiAgZW5hYmxlR2l0U3Rhc2g6IGJvb2xlYW47XG4gIGJ1aWxkVmFsaWRhdGlvbjogYm9vbGVhbjtcbiAgYmF0Y2hTaXplOiBudW1iZXI7XG4gIHNlbGVjdGl2ZVJlbW92YWw6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uc29sZVJlbW92YWxSZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBmaWxlc1Byb2Nlc3NlZDogbnVtYmVyO1xuICBjb25zb2xlU3RhdGVtZW50c1JlbW92ZWQ6IG51bWJlcjtcbiAgY29uc29sZVN0YXRlbWVudHNQcmVzZXJ2ZWQ6IG51bWJlcjtcbiAgYnVpbGRUaW1lOiBudW1iZXI7XG4gIGVycm9yczogc3RyaW5nW107XG4gIHdhcm5pbmdzOiBzdHJpbmdbXTtcbiAgcHJlc2VydmVkRmlsZXM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoUmVtb3ZhbFJlc3VsdCB7XG4gIHRvdGFsQmF0Y2hlczogbnVtYmVyO1xuICBzdWNjZXNzZnVsQmF0Y2hlczogbnVtYmVyO1xuICBmYWlsZWRCYXRjaGVzOiBudW1iZXI7XG4gIHRvdGFsRmlsZXNQcm9jZXNzZWQ6IG51bWJlcjtcbiAgdG90YWxDb25zb2xlU3RhdGVtZW50c1Byb2Nlc3NlZDogbnVtYmVyO1xuICBhdmVyYWdlQnVpbGRUaW1lOiBudW1iZXI7XG4gIGVycm9yczogc3RyaW5nW107XG4gIHByZXNlcnZlZENyaXRpY2FsU3RhdGVtZW50czogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnNvbGVTdGF0ZW1lbnQge1xuICBmaWxlOiBzdHJpbmc7XG4gIGxpbmU6IG51bWJlcjtcbiAgY29sdW1uOiBudW1iZXI7XG4gIHR5cGU6ICdsb2cnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdpbmZvJyB8ICdkZWJ1Zyc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgY29udGV4dDogc3RyaW5nO1xuICBpc0NyaXRpY2FsOiBib29sZWFuO1xuICBzaG91bGRQcmVzZXJ2ZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIENvbnNvbGVTdGF0ZW1lbnRSZW1vdmFsU3lzdGVtIHtcbiAgcHJpdmF0ZSBzY3JpcHRQYXRoOiBzdHJpbmc7XG4gIHByaXZhdGUgbWV0cmljc0ZpbGU6IHN0cmluZztcbiAgcHJpdmF0ZSBjb25maWc6IENvbnNvbGVSZW1vdmFsQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUGFydGlhbDxDb25zb2xlUmVtb3ZhbENvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuc2NyaXB0UGF0aCA9IHBhdGguam9pbihcbiAgICAgIHByb2Nlc3MuY3dkKCksXG4gICAgICAnc2NyaXB0cy9saW50LWZpeGVzL2ZpeC1jb25zb2xlLXN0YXRlbWVudHMtb25seS5qcydcbiAgICApO1xuICAgIHRoaXMubWV0cmljc0ZpbGUgPSBwYXRoLmpvaW4oXG4gICAgICBwcm9jZXNzLmN3ZCgpLFxuICAgICAgJy5jb25zb2xlLXJlbW92YWwtbWV0cmljcy5qc29uJ1xuICAgICk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIG1heEZpbGVzOiAxMCxcbiAgICAgIGRyeVJ1bjogdHJ1ZSxcbiAgICAgIGF1dG9GaXg6IGZhbHNlLFxuICAgICAgcHJlc2VydmVEZWJ1Z0NyaXRpY2FsOiB0cnVlLFxuICAgICAgZW5hYmxlR2l0U3Rhc2g6IHRydWUsXG4gICAgICBidWlsZFZhbGlkYXRpb246IHRydWUsXG4gICAgICBiYXRjaFNpemU6IDgsXG4gICAgICBzZWxlY3RpdmVSZW1vdmFsOiB0cnVlLFxuICAgICAgLi4uY29uZmlnLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBjb25zb2xlIHN0YXRlbWVudCByZW1vdmFsIHdpdGggc2FmZXR5IHByb3RvY29sc1xuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZVJlbW92YWwoKTogUHJvbWlzZTxDb25zb2xlUmVtb3ZhbFJlc3VsdD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SHIFN0YXJ0aW5nIENvbnNvbGUgU3RhdGVtZW50IFJlbW92YWwgU3lzdGVtLi4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJlLWV4ZWN1dGlvbiB2YWxpZGF0aW9uXG4gICAgICBhd2FpdCB0aGlzLnZhbGlkYXRlUHJlQ29uZGl0aW9ucygpO1xuXG4gICAgICAvLyBBbmFseXplIGNvbnNvbGUgc3RhdGVtZW50cyBiZWZvcmUgcmVtb3ZhbFxuICAgICAgY29uc3QgY29uc29sZUFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplQ29uc29sZVN0YXRlbWVudHMoKTtcblxuICAgICAgLy8gQ3JlYXRlIHNhZmV0eSBjaGVja3BvaW50IGlmIGVuYWJsZWRcbiAgICAgIGxldCBzdGFzaElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVHaXRTdGFzaCkge1xuICAgICAgICBzdGFzaElkID0gYXdhaXQgdGhpcy5jcmVhdGVTYWZldHlTdGFzaCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIHRoZSByZW1vdmFsXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTY3JpcHQoY29uc29sZUFuYWx5c2lzKTtcblxuICAgICAgLy8gUG9zdC1leGVjdXRpb24gdmFsaWRhdGlvblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmJ1aWxkVmFsaWRhdGlvbiAmJiByZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBidWlsZFZhbGlkID0gYXdhaXQgdGhpcy52YWxpZGF0ZUJ1aWxkKCk7XG4gICAgICAgIGlmICghYnVpbGRWYWxpZCkge1xuICAgICAgICAgIHJlc3VsdC5zdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKCdCdWlsZCB2YWxpZGF0aW9uIGZhaWxlZCBhZnRlciBjb25zb2xlIHJlbW92YWwnKTtcblxuICAgICAgICAgIC8vIFJvbGxiYWNrIGlmIGJ1aWxkIGZhaWxzXG4gICAgICAgICAgaWYgKHN0YXNoSWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucm9sbGJhY2tGcm9tU3Rhc2goc3Rhc2hJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNhdmUgbWV0cmljc1xuICAgICAgYXdhaXQgdGhpcy5zYXZlTWV0cmljcyhyZXN1bHQpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQ29uc29sZSBzdGF0ZW1lbnQgcmVtb3ZhbCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYmF0Y2ggcHJvY2Vzc2luZyBmb3IgbGFyZ2Utc2NhbGUgY29uc29sZSByZW1vdmFsXG4gICAqL1xuICBhc3luYyBleGVjdXRlQmF0Y2hSZW1vdmFsKHRvdGFsRmlsZXM/OiBudW1iZXIpOiBQcm9taXNlPEJhdGNoUmVtb3ZhbFJlc3VsdD4ge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgJ+KaoSBTdGFydGluZyBiYXRjaCBwcm9jZXNzaW5nIGZvciBjb25zb2xlIHN0YXRlbWVudCByZW1vdmFsLi4uJ1xuICAgICk7XG5cbiAgICBjb25zdCBiYXRjaFJlc3VsdDogQmF0Y2hSZW1vdmFsUmVzdWx0ID0ge1xuICAgICAgdG90YWxCYXRjaGVzOiAwLFxuICAgICAgc3VjY2Vzc2Z1bEJhdGNoZXM6IDAsXG4gICAgICBmYWlsZWRCYXRjaGVzOiAwLFxuICAgICAgdG90YWxGaWxlc1Byb2Nlc3NlZDogMCxcbiAgICAgIHRvdGFsQ29uc29sZVN0YXRlbWVudHNQcm9jZXNzZWQ6IDAsXG4gICAgICBhdmVyYWdlQnVpbGRUaW1lOiAwLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHByZXNlcnZlZENyaXRpY2FsU3RhdGVtZW50czogMCxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIERldGVybWluZSBudW1iZXIgb2YgYmF0Y2hlc1xuICAgICAgY29uc3QgZXN0aW1hdGVkRmlsZXMgPVxuICAgICAgICB0b3RhbEZpbGVzIHx8IChhd2FpdCB0aGlzLmVzdGltYXRlRmlsZXNXaXRoQ29uc29sZVN0YXRlbWVudHMoKSk7XG4gICAgICBjb25zdCBiYXRjaENvdW50ID0gTWF0aC5jZWlsKGVzdGltYXRlZEZpbGVzIC8gdGhpcy5jb25maWcuYmF0Y2hTaXplKTtcbiAgICAgIGJhdGNoUmVzdWx0LnRvdGFsQmF0Y2hlcyA9IGJhdGNoQ291bnQ7XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg8J+TiiBQcm9jZXNzaW5nICR7ZXN0aW1hdGVkRmlsZXN9IGZpbGVzIGluICR7YmF0Y2hDb3VudH0gYmF0Y2hlcyBvZiAke3RoaXMuY29uZmlnLmJhdGNoU2l6ZX0gZmlsZXMgZWFjaGBcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGJ1aWxkVGltZXM6IG51bWJlcltdID0gW107XG5cbiAgICAgIC8vIFByb2Nlc3MgZWFjaCBiYXRjaFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaENvdW50OyBpKyspIHtcbiAgICAgICAgY29uc29sZS5sb2coYFxcbvCflIQgUHJvY2Vzc2luZyBiYXRjaCAke2kgKyAxfS8ke2JhdGNoQ291bnR9Li4uYCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBiYXRjaENvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLFxuICAgICAgICAgICAgbWF4RmlsZXM6IHRoaXMuY29uZmlnLmJhdGNoU2l6ZSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgYmF0Y2hTeXN0ZW0gPSBuZXcgQ29uc29sZVN0YXRlbWVudFJlbW92YWxTeXN0ZW0oYmF0Y2hDb25maWcpO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhdGNoU3lzdGVtLmV4ZWN1dGVSZW1vdmFsKCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGJhdGNoUmVzdWx0LnN1Y2Nlc3NmdWxCYXRjaGVzKys7XG4gICAgICAgICAgICBiYXRjaFJlc3VsdC50b3RhbEZpbGVzUHJvY2Vzc2VkICs9IHJlc3VsdC5maWxlc1Byb2Nlc3NlZDtcbiAgICAgICAgICAgIGJhdGNoUmVzdWx0LnRvdGFsQ29uc29sZVN0YXRlbWVudHNQcm9jZXNzZWQgKz1cbiAgICAgICAgICAgICAgcmVzdWx0LmNvbnNvbGVTdGF0ZW1lbnRzUmVtb3ZlZDtcbiAgICAgICAgICAgIGJhdGNoUmVzdWx0LnByZXNlcnZlZENyaXRpY2FsU3RhdGVtZW50cyArPVxuICAgICAgICAgICAgICByZXN1bHQuY29uc29sZVN0YXRlbWVudHNQcmVzZXJ2ZWQ7XG4gICAgICAgICAgICBidWlsZFRpbWVzLnB1c2gocmVzdWx0LmJ1aWxkVGltZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJhdGNoUmVzdWx0LmZhaWxlZEJhdGNoZXMrKztcbiAgICAgICAgICAgIGJhdGNoUmVzdWx0LmVycm9ycy5wdXNoKFxuICAgICAgICAgICAgICBgQmF0Y2ggJHtpICsgMX0gZmFpbGVkOiAke3Jlc3VsdC5lcnJvcnMuam9pbignLCAnKX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNhZmV0eSBwYXVzZSBiZXR3ZWVuIGJhdGNoZXNcbiAgICAgICAgICBpZiAoaSA8IGJhdGNoQ291bnQgLSAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4o+477iPIFBhdXNpbmcgMiBzZWNvbmRzIGJldHdlZW4gYmF0Y2hlcyBmb3Igc2FmZXR5Li4uJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDIwMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBiYXRjaFJlc3VsdC5mYWlsZWRCYXRjaGVzKys7XG4gICAgICAgICAgYmF0Y2hSZXN1bHQuZXJyb3JzLnB1c2goYEJhdGNoICR7aSArIDF9IGVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBCYXRjaCAke2kgKyAxfSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBhdmVyYWdlc1xuICAgICAgaWYgKGJ1aWxkVGltZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBiYXRjaFJlc3VsdC5hdmVyYWdlQnVpbGRUaW1lID1cbiAgICAgICAgICBidWlsZFRpbWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gYnVpbGRUaW1lcy5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgXFxu4pyFIEJhdGNoIHByb2Nlc3NpbmcgY29tcGxldGVkOiAke2JhdGNoUmVzdWx0LnN1Y2Nlc3NmdWxCYXRjaGVzfS8ke2JhdGNoUmVzdWx0LnRvdGFsQmF0Y2hlc30gYmF0Y2hlcyBzdWNjZXNzZnVsYFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGJhdGNoUmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQmF0Y2ggcHJvY2Vzc2luZyBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgY29uc29sZSBzdGF0ZW1lbnRzIHRvIGlkZW50aWZ5IGNyaXRpY2FsIG9uZXNcbiAgICovXG4gIGFzeW5jIGFuYWx5emVDb25zb2xlU3RhdGVtZW50cygpOiBQcm9taXNlPENvbnNvbGVTdGF0ZW1lbnRbXT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIEFuYWx5emluZyBjb25zb2xlIHN0YXRlbWVudHMgZm9yIGNyaXRpY2FsIHByZXNlcnZhdGlvbi4uLicpO1xuXG4gICAgY29uc3Qgc3RhdGVtZW50czogQ29uc29sZVN0YXRlbWVudFtdID0gW107XG4gICAgY29uc3Qgc3JjRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzcmMnKTtcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuZ2V0QWxsU291cmNlRmlsZXMoc3JjRGlyKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhmaWxlLCAndXRmLTgnKTtcbiAgICAgICAgY29uc3QgZmlsZVN0YXRlbWVudHMgPSB0aGlzLmFuYWx5emVGaWxlQ29uc29sZVN0YXRlbWVudHMoZmlsZSwgY29udGVudCk7XG4gICAgICAgIHN0YXRlbWVudHMucHVzaCguLi5maWxlU3RhdGVtZW50cyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBDb3VsZCBub3QgYW5hbHl6ZSBmaWxlICR7ZmlsZX06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNyaXRpY2FsQ291bnQgPSBzdGF0ZW1lbnRzLmZpbHRlcihzID0+IHMuaXNDcml0aWNhbCkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBzdGF0ZW1lbnRzLmxlbmd0aDtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYPCfk4ogRm91bmQgJHt0b3RhbENvdW50fSBjb25zb2xlIHN0YXRlbWVudHMsICR7Y3JpdGljYWxDb3VudH0gbWFya2VkIGFzIGNyaXRpY2FsYFxuICAgICk7XG5cbiAgICByZXR1cm4gc3RhdGVtZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGNvbnNvbGUgc3RhdGVtZW50cyBpbiBhIHNpbmdsZSBmaWxlXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVGaWxlQ29uc29sZVN0YXRlbWVudHMoXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICBjb250ZW50OiBzdHJpbmdcbiAgKTogQ29uc29sZVN0YXRlbWVudFtdIHtcbiAgICBjb25zdCBzdGF0ZW1lbnRzOiBDb25zb2xlU3RhdGVtZW50W10gPSBbXTtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgY29uc3QgbGluZU51bWJlciA9IGkgKyAxO1xuXG4gICAgICAvLyBNYXRjaCBjb25zb2xlIHN0YXRlbWVudHNcbiAgICAgIGNvbnN0IGNvbnNvbGVNYXRjaGVzID0gbGluZS5tYXRjaEFsbChcbiAgICAgICAgL2NvbnNvbGVcXC4obG9nfHdhcm58ZXJyb3J8aW5mb3xkZWJ1ZylcXHMqXFwoW14pXSpcXCkvZ1xuICAgICAgKTtcblxuICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBjb25zb2xlTWF0Y2hlcykge1xuICAgICAgICBjb25zdCB0eXBlID0gbWF0Y2hbMV0gYXMgJ2xvZycgfCAnd2FybicgfCAnZXJyb3InIHwgJ2luZm8nIHwgJ2RlYnVnJztcbiAgICAgICAgY29uc3QgY29sdW1uID0gbWF0Y2guaW5kZXghICsgMTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IG1hdGNoWzBdO1xuXG4gICAgICAgIC8vIEdldCBjb250ZXh0IChzdXJyb3VuZGluZyBsaW5lcylcbiAgICAgICAgY29uc3QgY29udGV4dFN0YXJ0ID0gTWF0aC5tYXgoMCwgaSAtIDIpO1xuICAgICAgICBjb25zdCBjb250ZXh0RW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoIC0gMSwgaSArIDIpO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbGluZXMuc2xpY2UoY29udGV4dFN0YXJ0LCBjb250ZXh0RW5kICsgMSkuam9pbignXFxuJyk7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIGNyaXRpY2FsXG4gICAgICAgIGNvbnN0IGlzQ3JpdGljYWwgPSB0aGlzLmlzQ29uc29sZVN0YXRlbWVudENyaXRpY2FsKFxuICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICB0eXBlXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHNob3VsZFByZXNlcnZlID0gdGhpcy5jb25maWcucHJlc2VydmVEZWJ1Z0NyaXRpY2FsICYmIGlzQ3JpdGljYWw7XG5cbiAgICAgICAgc3RhdGVtZW50cy5wdXNoKHtcbiAgICAgICAgICBmaWxlOiBmaWxlUGF0aCxcbiAgICAgICAgICBsaW5lOiBsaW5lTnVtYmVyLFxuICAgICAgICAgIGNvbHVtbixcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICBpc0NyaXRpY2FsLFxuICAgICAgICAgIHNob3VsZFByZXNlcnZlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGVtZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgYSBjb25zb2xlIHN0YXRlbWVudCBpcyBjcml0aWNhbCBhbmQgc2hvdWxkIGJlIHByZXNlcnZlZFxuICAgKi9cbiAgcHJpdmF0ZSBpc0NvbnNvbGVTdGF0ZW1lbnRDcml0aWNhbChcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBjb250ZXh0OiBzdHJpbmcsXG4gICAgdHlwZTogc3RyaW5nXG4gICk6IGJvb2xlYW4ge1xuICAgIC8vIEFsd2F5cyBwcmVzZXJ2ZSBlcnJvciBzdGF0ZW1lbnRzXG4gICAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFByZXNlcnZlIHN0YXRlbWVudHMgaW4gZGVidWcvdGVzdCBmaWxlc1xuICAgIGNvbnN0IGRlYnVnRmlsZXMgPSBbJ2RlYnVnJywgJ3Rlc3QnLCAnc3BlYycsICcudGVzdC4nLCAnLnNwZWMuJywgJ2xvZ2dlciddO1xuICAgIGlmIChkZWJ1Z0ZpbGVzLnNvbWUocGF0dGVybiA9PiBmaWxlUGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBhdHRlcm4pKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gUHJlc2VydmUgc3RhdGVtZW50cyB3aXRoIGVycm9yIGhhbmRsaW5nIGNvbnRleHRcbiAgICBjb25zdCBlcnJvckhhbmRsaW5nUGF0dGVybnMgPSBbXG4gICAgICAvdHJ5XFxzKntbXFxzXFxTXSo/Y2F0Y2gvaSxcbiAgICAgIC9jYXRjaFxccypcXCgvaSxcbiAgICAgIC9lcnJvci9pLFxuICAgICAgL2V4Y2VwdGlvbi9pLFxuICAgICAgL2ZhaWwvaSxcbiAgICAgIC90aHJvdy9pLFxuICAgIF07XG5cbiAgICBpZiAoZXJyb3JIYW5kbGluZ1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29udGV4dCkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBQcmVzZXJ2ZSBzdGF0ZW1lbnRzIHdpdGggaW1wb3J0YW50IGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgIGNvbnN0IGltcG9ydGFudFBhdHRlcm5zID0gW1xuICAgICAgL2FwaS9pLFxuICAgICAgL3JlcXVlc3QvaSxcbiAgICAgIC9yZXNwb25zZS9pLFxuICAgICAgL2F1dGgvaSxcbiAgICAgIC9sb2dpbi9pLFxuICAgICAgL3NlY3VyaXR5L2ksXG4gICAgICAvY3JpdGljYWwvaSxcbiAgICAgIC9pbXBvcnRhbnQvaSxcbiAgICBdO1xuXG4gICAgaWYgKGltcG9ydGFudFBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29udGVudCkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBQcmVzZXJ2ZSB3YXJuIHN0YXRlbWVudHMgaW4gcHJvZHVjdGlvbiBjb2RlXG4gICAgaWYgKHR5cGUgPT09ICd3YXJuJyAmJiAhZmlsZVBhdGguaW5jbHVkZXMoJ3Rlc3QnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgc291cmNlIGZpbGVzIHJlY3Vyc2l2ZWx5XG4gICAqL1xuICBwcml2YXRlIGdldEFsbFNvdXJjZUZpbGVzKGRpcjogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGRpcikpIHtcbiAgICAgIHJldHVybiBmaWxlcztcbiAgICB9XG5cbiAgICBjb25zdCBlbnRyaWVzID0gZnMucmVhZGRpclN5bmMoZGlyLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5qb2luKGRpciwgZW50cnkubmFtZSk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgZW50cnkuaXNEaXJlY3RvcnkoKSAmJlxuICAgICAgICAhZW50cnkubmFtZS5zdGFydHNXaXRoKCcuJykgJiZcbiAgICAgICAgZW50cnkubmFtZSAhPT0gJ25vZGVfbW9kdWxlcydcbiAgICAgICkge1xuICAgICAgICBmaWxlcy5wdXNoKC4uLnRoaXMuZ2V0QWxsU291cmNlRmlsZXMoZnVsbFBhdGgpKTtcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkuaXNGaWxlKCkgJiYgL1xcLih0c3x0c3h8anN8anN4KSQvLnRlc3QoZW50cnkubmFtZSkpIHtcbiAgICAgICAgZmlsZXMucHVzaChmdWxsUGF0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHByZS1jb25kaXRpb25zIGJlZm9yZSBleGVjdXRpb25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVQcmVDb25kaXRpb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENoZWNrIGlmIHNjcmlwdCBleGlzdHNcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmModGhpcy5zY3JpcHRQYXRoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25zb2xlIHJlbW92YWwgc2NyaXB0IG5vdCBmb3VuZDogJHt0aGlzLnNjcmlwdFBhdGh9YCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZ2l0IHN0YXR1cyBpZiByZXF1aXJlZFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVHaXRTdGFzaCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ2l0U3RhdHVzID0gZXhlY1N5bmMoJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nLCB7XG4gICAgICAgICAgZW5jb2Rpbmc6ICd1dGYtOCcsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZ2l0U3RhdHVzLnRyaW0oKSAmJiAhdGhpcy5jb25maWcuYXV0b0ZpeCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICfimqDvuI8gR2l0IHdvcmtpbmcgZGlyZWN0b3J5IGhhcyB1bmNvbW1pdHRlZCBjaGFuZ2VzLiBDb25zaWRlciB1c2luZyAtLWF1dG8tZml4IG9yIGNvbW1pdCBjaGFuZ2VzIGZpcnN0LidcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDb3VsZCBub3QgY2hlY2sgZ2l0IHN0YXR1czonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBzYWZldHkgc3Rhc2ggYmVmb3JlIGV4ZWN1dGlvblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVTYWZldHlTdGFzaCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICAgICAgY29uc3Qgc3Rhc2hOYW1lID0gYGNvbnNvbGUtcmVtb3ZhbC0ke3RpbWVzdGFtcH1gO1xuXG4gICAgICBleGVjU3luYyhgZ2l0IHN0YXNoIHB1c2ggLW0gXCIke3N0YXNoTmFtZX1cImAsIHsgZW5jb2Rpbmc6ICd1dGYtOCcgfSk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TpiBDcmVhdGVkIHNhZmV0eSBzdGFzaDogJHtzdGFzaE5hbWV9YCk7XG5cbiAgICAgIHJldHVybiBzdGFzaE5hbWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIENvdWxkIG5vdCBjcmVhdGUgZ2l0IHN0YXNoOicsIGVycm9yKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSB0aGUgY29uc29sZSByZW1vdmFsIHNjcmlwdFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlU2NyaXB0KFxuICAgIGNvbnNvbGVBbmFseXNpczogQ29uc29sZVN0YXRlbWVudFtdXG4gICk6IFByb21pc2U8Q29uc29sZVJlbW92YWxSZXN1bHQ+IHtcbiAgICBjb25zdCByZXN1bHQ6IENvbnNvbGVSZW1vdmFsUmVzdWx0ID0ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBmaWxlc1Byb2Nlc3NlZDogMCxcbiAgICAgIGNvbnNvbGVTdGF0ZW1lbnRzUmVtb3ZlZDogMCxcbiAgICAgIGNvbnNvbGVTdGF0ZW1lbnRzUHJlc2VydmVkOiAwLFxuICAgICAgYnVpbGRUaW1lOiAwLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgIHByZXNlcnZlZEZpbGVzOiBbXSxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEJ1aWxkIGNvbW1hbmQgYXJndW1lbnRzXG4gICAgICBjb25zdCBhcmdzID0gW107XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kcnlSdW4pIHtcbiAgICAgICAgYXJncy5wdXNoKCctLWRyeS1ydW4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29uZmlnLm1heEZpbGVzKSB7XG4gICAgICAgIGFyZ3MucHVzaCgnLS1tYXgtZmlsZXMnKTtcbiAgICAgICAgYXJncy5wdXNoKHRoaXMuY29uZmlnLm1heEZpbGVzLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tYW5kID0gYG5vZGUgJHt0aGlzLnNjcmlwdFBhdGh9ICR7YXJncy5qb2luKCcgJyl9YDtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SnIEV4ZWN1dGluZzogJHtjb21tYW5kfWApO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoY29tbWFuZCwge1xuICAgICAgICBlbmNvZGluZzogJ3V0Zi04JyxcbiAgICAgICAgbWF4QnVmZmVyOiAxMDI0ICogMTAyNCAqIDEwLCAvLyAxME1CIGJ1ZmZlclxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gUGFyc2Ugb3V0cHV0IGZvciBtZXRyaWNzXG4gICAgICByZXN1bHQuc3VjY2VzcyA9ICFvdXRwdXQuaW5jbHVkZXMoJ+KdjCcpICYmICFvdXRwdXQuaW5jbHVkZXMoJ0Vycm9yOicpO1xuICAgICAgcmVzdWx0LmJ1aWxkVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG5cbiAgICAgIC8vIEV4dHJhY3QgbWV0cmljcyBmcm9tIG91dHB1dFxuICAgICAgY29uc3QgZmlsZXNNYXRjaCA9IG91dHB1dC5tYXRjaCgvRmlsZXMgcHJvY2Vzc2VkOlxccyooXFxkKykvaSk7XG4gICAgICBpZiAoZmlsZXNNYXRjaCkge1xuICAgICAgICByZXN1bHQuZmlsZXNQcm9jZXNzZWQgPSBwYXJzZUludChmaWxlc01hdGNoWzFdKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhdGVtZW50c01hdGNoID0gb3V0cHV0Lm1hdGNoKFxuICAgICAgICAvVG90YWwgY29uc29sZSBzdGF0ZW1lbnRzIGZpeGVkOlxccyooXFxkKykvaVxuICAgICAgKTtcbiAgICAgIGlmIChzdGF0ZW1lbnRzTWF0Y2gpIHtcbiAgICAgICAgcmVzdWx0LmNvbnNvbGVTdGF0ZW1lbnRzUmVtb3ZlZCA9IHBhcnNlSW50KHN0YXRlbWVudHNNYXRjaFsxXSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBwcmVzZXJ2ZWQgc3RhdGVtZW50c1xuICAgICAgY29uc3QgY3JpdGljYWxTdGF0ZW1lbnRzID0gY29uc29sZUFuYWx5c2lzLmZpbHRlcihzID0+IHMuc2hvdWxkUHJlc2VydmUpO1xuICAgICAgcmVzdWx0LmNvbnNvbGVTdGF0ZW1lbnRzUHJlc2VydmVkID0gY3JpdGljYWxTdGF0ZW1lbnRzLmxlbmd0aDtcbiAgICAgIHJlc3VsdC5wcmVzZXJ2ZWRGaWxlcyA9IFsuLi5uZXcgU2V0KGNyaXRpY2FsU3RhdGVtZW50cy5tYXAocyA9PiBzLmZpbGUpKV07XG5cbiAgICAgIC8vIEV4dHJhY3Qgd2FybmluZ3MgYW5kIGVycm9yc1xuICAgICAgY29uc3QgbGluZXMgPSBvdXRwdXQuc3BsaXQoJ1xcbicpO1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCfimqDvuI8nKSB8fCBsaW5lLmluY2x1ZGVzKCdXQVJOSU5HJykpIHtcbiAgICAgICAgICByZXN1bHQud2FybmluZ3MucHVzaChsaW5lLnRyaW0oKSk7XG4gICAgICAgIH0gZWxzZSBpZiAobGluZS5pbmNsdWRlcygn4p2MJykgfHwgbGluZS5pbmNsdWRlcygnRVJST1InKSkge1xuICAgICAgICAgIHJlc3VsdC5lcnJvcnMucHVzaChsaW5lLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYOKchSBTY3JpcHQgZXhlY3V0aW9uIGNvbXBsZXRlZCBpbiAke3Jlc3VsdC5idWlsZFRpbWV9bXNgKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg8J+TiiBSZW1vdmVkOiAke3Jlc3VsdC5jb25zb2xlU3RhdGVtZW50c1JlbW92ZWR9LCBQcmVzZXJ2ZWQ6ICR7cmVzdWx0LmNvbnNvbGVTdGF0ZW1lbnRzUHJlc2VydmVkfWBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlc3VsdC5zdWNjZXNzID0gZmFsc2U7XG4gICAgICByZXN1bHQuZXJyb3JzLnB1c2goYFNjcmlwdCBleGVjdXRpb24gZmFpbGVkOiAke2Vycm9yfWApO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFNjcmlwdCBleGVjdXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGJ1aWxkIGFmdGVyIGNvbnNvbGUgcmVtb3ZhbFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUJ1aWxkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBWYWxpZGF0aW5nIGJ1aWxkIGFmdGVyIGNvbnNvbGUgcmVtb3ZhbC4uLicpO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgZXhlY1N5bmMoJ3lhcm4gYnVpbGQnLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmLTgnLFxuICAgICAgICBzdGRpbzogJ3BpcGUnLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBidWlsZFRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIEJ1aWxkIHZhbGlkYXRpb24gc3VjY2Vzc2Z1bCAoJHtidWlsZFRpbWV9bXMpYCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEJ1aWxkIHZhbGlkYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUm9sbGJhY2sgZnJvbSBnaXQgc3Rhc2hcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcm9sbGJhY2tGcm9tU3Rhc2goc3Rhc2hOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYPCflIQgUm9sbGluZyBiYWNrIGZyb20gc3Rhc2g6ICR7c3Rhc2hOYW1lfWApO1xuICAgICAgZXhlY1N5bmMoYGdpdCBzdGFzaCBhcHBseSBzdGFzaF57LyR7c3Rhc2hOYW1lfX1gLCB7IGVuY29kaW5nOiAndXRmLTgnIH0pO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBSb2xsYmFjayBjb21wbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFJvbGxiYWNrIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXN0aW1hdGUgZmlsZXMgd2l0aCBjb25zb2xlIHN0YXRlbWVudHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXN0aW1hdGVGaWxlc1dpdGhDb25zb2xlU3RhdGVtZW50cygpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgdGhlIGFuYWx5emVyIHRvIGdldCBjdXJyZW50IGNvbnNvbGUgc3RhdGVtZW50cyBjb3VudFxuICAgICAgY29uc3QgeyBMaW50aW5nV2FybmluZ0FuYWx5emVyIH0gPSBhd2FpdCBpbXBvcnQoXG4gICAgICAgICcuL0xpbnRpbmdXYXJuaW5nQW5hbHl6ZXIuanMnXG4gICAgICApO1xuICAgICAgY29uc3QgYW5hbHl6ZXIgPSBuZXcgTGludGluZ1dhcm5pbmdBbmFseXplcigpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZUxpbnRpbmdXYXJuaW5ncygpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0LmRpc3RyaWJ1dGlvbi5jb25zb2xlU3RhdGVtZW50cy5maWxlcy5sZW5ndGg7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ+KaoO+4jyBDb3VsZCBub3QgZXN0aW1hdGUgZmlsZXMgd2l0aCBjb25zb2xlIHN0YXRlbWVudHMsIHVzaW5nIGRlZmF1bHQ6JyxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgICByZXR1cm4gNTA7IC8vIERlZmF1bHQgZXN0aW1hdGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBtZXRyaWNzIHRvIGZpbGVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2F2ZU1ldHJpY3MocmVzdWx0OiBDb25zb2xlUmVtb3ZhbFJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXRyaWNzID0ge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgcmVzdWx0LFxuICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXG4gICAgICAgICAgZmlsZXNQcm9jZXNzZWQ6IHJlc3VsdC5maWxlc1Byb2Nlc3NlZCxcbiAgICAgICAgICBjb25zb2xlU3RhdGVtZW50c1JlbW92ZWQ6IHJlc3VsdC5jb25zb2xlU3RhdGVtZW50c1JlbW92ZWQsXG4gICAgICAgICAgY29uc29sZVN0YXRlbWVudHNQcmVzZXJ2ZWQ6IHJlc3VsdC5jb25zb2xlU3RhdGVtZW50c1ByZXNlcnZlZCxcbiAgICAgICAgICBidWlsZFRpbWU6IHJlc3VsdC5idWlsZFRpbWUsXG4gICAgICAgICAgcHJlc2VydmVkRmlsZXM6IHJlc3VsdC5wcmVzZXJ2ZWRGaWxlcy5sZW5ndGgsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHRoaXMubWV0cmljc0ZpbGUsIEpTT04uc3RyaW5naWZ5KG1ldHJpY3MsIG51bGwsIDIpKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIE1ldHJpY3Mgc2F2ZWQgdG8gJHt0aGlzLm1ldHJpY3NGaWxlfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDb3VsZCBub3Qgc2F2ZSBtZXRyaWNzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcmVtb3ZhbCByZXBvcnRcbiAgICovXG4gIGdlbmVyYXRlUmVwb3J0KHJlc3VsdDogQ29uc29sZVJlbW92YWxSZXN1bHQgfCBCYXRjaFJlbW92YWxSZXN1bHQpOiBzdHJpbmcge1xuICAgIGlmICgndG90YWxCYXRjaGVzJyBpbiByZXN1bHQpIHtcbiAgICAgIC8vIEJhdGNoIHByb2Nlc3NpbmcgcmVwb3J0XG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUJhdGNoUmVwb3J0KHJlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpbmdsZSBleGVjdXRpb24gcmVwb3J0XG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVNpbmdsZVJlcG9ydChyZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzaW5nbGUgZXhlY3V0aW9uIHJlcG9ydFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNpbmdsZVJlcG9ydChyZXN1bHQ6IENvbnNvbGVSZW1vdmFsUmVzdWx0KTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuIyBDb25zb2xlIFN0YXRlbWVudCBSZW1vdmFsIFJlcG9ydFxuR2VuZXJhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cblxuIyMgRXhlY3V0aW9uIFN1bW1hcnlcbi0gKipTdWNjZXNzKio6ICR7cmVzdWx0LnN1Y2Nlc3MgPyAn4pyFJyA6ICfinYwnfVxuLSAqKkZpbGVzIFByb2Nlc3NlZCoqOiAke3Jlc3VsdC5maWxlc1Byb2Nlc3NlZH1cbi0gKipDb25zb2xlIFN0YXRlbWVudHMgUmVtb3ZlZCoqOiAke3Jlc3VsdC5jb25zb2xlU3RhdGVtZW50c1JlbW92ZWR9XG4tICoqQ29uc29sZSBTdGF0ZW1lbnRzIFByZXNlcnZlZCoqOiAke3Jlc3VsdC5jb25zb2xlU3RhdGVtZW50c1ByZXNlcnZlZH1cbi0gKipCdWlsZCBUaW1lKio6ICR7cmVzdWx0LmJ1aWxkVGltZX1tc1xuLSAqKkZpbGVzIHdpdGggUHJlc2VydmVkIFN0YXRlbWVudHMqKjogJHtyZXN1bHQucHJlc2VydmVkRmlsZXMubGVuZ3RofVxuXG4jIyBDb25maWd1cmF0aW9uXG4tICoqTWF4IEZpbGVzKio6ICR7dGhpcy5jb25maWcubWF4RmlsZXN9XG4tICoqRHJ5IFJ1bioqOiAke3RoaXMuY29uZmlnLmRyeVJ1bn1cbi0gKipQcmVzZXJ2ZSBEZWJ1ZyBDcml0aWNhbCoqOiAke3RoaXMuY29uZmlnLnByZXNlcnZlRGVidWdDcml0aWNhbH1cbi0gKipTZWxlY3RpdmUgUmVtb3ZhbCoqOiAke3RoaXMuY29uZmlnLnNlbGVjdGl2ZVJlbW92YWx9XG4tICoqQnVpbGQgVmFsaWRhdGlvbioqOiAke3RoaXMuY29uZmlnLmJ1aWxkVmFsaWRhdGlvbn1cbi0gKipHaXQgU3Rhc2gqKjogJHt0aGlzLmNvbmZpZy5lbmFibGVHaXRTdGFzaH1cblxuIyMgUHJlc2VydmVkIEZpbGVzXG4ke1xuICByZXN1bHQucHJlc2VydmVkRmlsZXMubGVuZ3RoID4gMFxuICAgID8gcmVzdWx0LnByZXNlcnZlZEZpbGVzLm1hcChmID0+IGAtICR7Zn1gKS5qb2luKCdcXG4nKVxuICAgIDogJ05vIGZpbGVzIGhhZCBjcml0aWNhbCBjb25zb2xlIHN0YXRlbWVudHMgcHJlc2VydmVkJ1xufVxuXG4jIyBJc3N1ZXNcbiR7cmVzdWx0LmVycm9ycy5sZW5ndGggPiAwID8gJyMjIyBFcnJvcnNcXG4nICsgcmVzdWx0LmVycm9ycy5tYXAoZSA9PiBgLSAke2V9YCkuam9pbignXFxuJykgOiAnTm8gZXJyb3JzJ31cbiR7cmVzdWx0Lndhcm5pbmdzLmxlbmd0aCA+IDAgPyAnIyMjIFdhcm5pbmdzXFxuJyArIHJlc3VsdC53YXJuaW5ncy5tYXAodyA9PiBgLSAke3d9YCkuam9pbignXFxuJykgOiAnTm8gd2FybmluZ3MnfVxuXG4jIyBOZXh0IFN0ZXBzXG4ke1xuICByZXN1bHQuc3VjY2Vzc1xuICAgID8gJy0g4pyFIENvbnNvbGUgcmVtb3ZhbCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5XFxuLSBSZXZpZXcgcHJlc2VydmVkIGNyaXRpY2FsIHN0YXRlbWVudHNcXG4tIFJ1biBsaW50aW5nIHRvIHZlcmlmeSBpbXByb3ZlbWVudHNcXG4tIENvbnNpZGVyIGNvbW1pdHRpbmcgY2hhbmdlcydcbiAgICA6ICctIOKdjCBDb25zb2xlIHJlbW92YWwgZmFpbGVkXFxuLSBSZXZpZXcgZXJyb3JzIGFib3ZlXFxuLSBDb25zaWRlciBydW5uaW5nIHdpdGggLS1kcnktcnVuIGZpcnN0XFxuLSBDaGVjayBnaXQgc3Rhc2ggZm9yIHJvbGxiYWNrIGlmIG5lZWRlZCdcbn1cbmA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgYmF0Y2ggcHJvY2Vzc2luZyByZXBvcnRcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVCYXRjaFJlcG9ydChyZXN1bHQ6IEJhdGNoUmVtb3ZhbFJlc3VsdCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiMgQ29uc29sZSBTdGF0ZW1lbnQgQmF0Y2ggUmVtb3ZhbCBSZXBvcnRcbkdlbmVyYXRlZDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XG5cbiMjIEJhdGNoIFN1bW1hcnlcbi0gKipUb3RhbCBCYXRjaGVzKio6ICR7cmVzdWx0LnRvdGFsQmF0Y2hlc31cbi0gKipTdWNjZXNzZnVsIEJhdGNoZXMqKjogJHtyZXN1bHQuc3VjY2Vzc2Z1bEJhdGNoZXN9XG4tICoqRmFpbGVkIEJhdGNoZXMqKjogJHtyZXN1bHQuZmFpbGVkQmF0Y2hlc31cbi0gKipTdWNjZXNzIFJhdGUqKjogJHsoKHJlc3VsdC5zdWNjZXNzZnVsQmF0Y2hlcyAvIHJlc3VsdC50b3RhbEJhdGNoZXMpICogMTAwKS50b0ZpeGVkKDEpfSVcblxuIyMgUHJvY2Vzc2luZyBTdW1tYXJ5XG4tICoqVG90YWwgRmlsZXMgUHJvY2Vzc2VkKio6ICR7cmVzdWx0LnRvdGFsRmlsZXNQcm9jZXNzZWR9XG4tICoqVG90YWwgQ29uc29sZSBTdGF0ZW1lbnRzIFByb2Nlc3NlZCoqOiAke3Jlc3VsdC50b3RhbENvbnNvbGVTdGF0ZW1lbnRzUHJvY2Vzc2VkfVxuLSAqKkNyaXRpY2FsIFN0YXRlbWVudHMgUHJlc2VydmVkKio6ICR7cmVzdWx0LnByZXNlcnZlZENyaXRpY2FsU3RhdGVtZW50c31cbi0gKipBdmVyYWdlIEJ1aWxkIFRpbWUqKjogJHtyZXN1bHQuYXZlcmFnZUJ1aWxkVGltZS50b0ZpeGVkKDApfW1zXG5cbiMjIEJhdGNoIENvbmZpZ3VyYXRpb25cbi0gKipCYXRjaCBTaXplKio6ICR7dGhpcy5jb25maWcuYmF0Y2hTaXplfSBmaWxlcyBwZXIgYmF0Y2hcbi0gKipQcmVzZXJ2ZSBEZWJ1ZyBDcml0aWNhbCoqOiAke3RoaXMuY29uZmlnLnByZXNlcnZlRGVidWdDcml0aWNhbH1cbi0gKipTZWxlY3RpdmUgUmVtb3ZhbCoqOiAke3RoaXMuY29uZmlnLnNlbGVjdGl2ZVJlbW92YWx9XG4tICoqQnVpbGQgVmFsaWRhdGlvbioqOiAke3RoaXMuY29uZmlnLmJ1aWxkVmFsaWRhdGlvbn1cblxuIyMgSXNzdWVzXG4ke3Jlc3VsdC5lcnJvcnMubGVuZ3RoID4gMCA/ICcjIyMgQmF0Y2ggRXJyb3JzXFxuJyArIHJlc3VsdC5lcnJvcnMubWFwKGUgPT4gYC0gJHtlfWApLmpvaW4oJ1xcbicpIDogJ05vIGJhdGNoIGVycm9ycyd9XG5cbiMjIFJlY29tbWVuZGF0aW9uc1xuJHtcbiAgcmVzdWx0LnN1Y2Nlc3NmdWxCYXRjaGVzID09PSByZXN1bHQudG90YWxCYXRjaGVzXG4gICAgPyAnLSDinIUgQWxsIGJhdGNoZXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseVxcbi0gUmV2aWV3IHByZXNlcnZlZCBjcml0aWNhbCBzdGF0ZW1lbnRzXFxuLSBSdW4gZmluYWwgbGludGluZyB2YWxpZGF0aW9uXFxuLSBDb25zaWRlciBjb21taXR0aW5nIGFsbCBjaGFuZ2VzJ1xuICAgIDogJy0g4pqg77iPIFNvbWUgYmF0Y2hlcyBmYWlsZWRcXG4tIFJldmlldyBmYWlsZWQgYmF0Y2ggZXJyb3JzXFxuLSBDb25zaWRlciByZS1ydW5uaW5nIGZhaWxlZCBiYXRjaGVzXFxuLSBDaGVjayBnaXQgc3Rhc2hlcyBmb3Igcm9sbGJhY2sgaWYgbmVlZGVkJ1xufVxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciBkZWxheXNcbiAgICovXG4gIHByaXZhdGUgc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9