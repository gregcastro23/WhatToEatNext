bf49f71d7299a6461e0978622bff9732
"use strict";
/**
 * ResolutionStrategyGenerator - Intelligent resolution strategy generation for different error types
 *
 * This system generates comprehensive resolution strategies based on error types,
 * domain context, and risk assessment to provide actionable fixing approaches.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ResolutionStrategyGenerator = void 0;
/**
 * Main ResolutionStrategyGenerator class
 */
class ResolutionStrategyGenerator {
    strategyTemplates;
    domainSpecificStrategies;
    constructor() {
        this.strategyTemplates = new Map();
        this.domainSpecificStrategies = new Map();
        this.initializeStrategyTemplates();
        this.initializeDomainSpecificStrategies();
    }
    /**
     * Generate comprehensive resolution strategy for an error
     */
    generateStrategy(context) {
        const { errorClassification, domainContext, fileAnalysis, projectContext } = context;
        // Get base strategy template
        const baseStrategy = this.getBaseStrategy(errorClassification.ruleId);
        // Enhance with domain-specific considerations
        const domainEnhancedStrategy = this.enhanceWithDomainContext(baseStrategy, domainContext, fileAnalysis);
        // Adjust for project context
        const projectAdjustedStrategy = this.adjustForProjectContext(domainEnhancedStrategy, projectContext);
        // Generate final strategy with all components
        const strategy = this.finalizeStrategy(projectAdjustedStrategy, errorClassification, domainContext, fileAnalysis);
        return strategy;
    }
    /**
     * Generate strategies for multiple errors with optimization
     */
    generateBatchStrategies(contexts) {
        const strategies = contexts.map(context => this.generateStrategy(context));
        const optimizedPlan = this.optimizeResolutionPlan(strategies);
        return { strategies, optimizedPlan };
    }
    /**
     * Get base strategy template for a rule
     */
    getBaseStrategy(ruleId) {
        return this.strategyTemplates.get(ruleId) || this.strategyTemplates.get('default') || {};
    }
    /**
     * Enhance strategy with domain context
     */
    enhanceWithDomainContext(baseStrategy, domainContext, fileAnalysis) {
        const enhanced = { ...baseStrategy };
        // Get domain-specific enhancements
        const domainStrategy = this.domainSpecificStrategies.get(domainContext.type);
        if (domainStrategy) {
            // Merge domain-specific steps
            enhanced.steps = [...(enhanced.steps || []), ...(domainStrategy.steps || [])];
            // Merge prerequisites
            enhanced.prerequisites = [
                ...(enhanced.prerequisites || []),
                ...(domainStrategy.prerequisites || []),
            ];
            // Merge validation requirements
            enhanced.validationRequirements = [
                ...(enhanced.validationRequirements || []),
                ...(domainStrategy.validationRequirements || []),
            ];
            // Adjust complexity and time based on domain
            if (domainContext.type === 'astrological' || domainContext.type === 'campaign') {
                enhanced.complexity = 'expert-required';
                enhanced.estimatedTime = (enhanced.estimatedTime || 0) * 2; // Double time for domain expertise
            }
        }
        // Add preservation requirements as validation steps
        for (const requirement of fileAnalysis.preservationRequirements) {
            enhanced.validationRequirements = enhanced.validationRequirements || [];
            enhanced.validationRequirements.push({
                type: 'manual-review',
                description: `Verify preservation of ${requirement.element}: ${requirement.reason}`,
                automated: false,
                criticalPath: requirement.strictness === 'absolute',
            });
        }
        return enhanced;
    }
    /**
     * Adjust strategy for project context
     */
    adjustForProjectContext(strategy, projectContext) {
        const adjusted = { ...strategy };
        // Adjust based on risk tolerance
        if (projectContext.riskTolerance === 'conservative') {
            adjusted.type = 'manual'; // Force manual review for conservative projects
            adjusted.validationRequirements = adjusted.validationRequirements || [];
            adjusted.validationRequirements.push({
                type: 'manual-review',
                description: 'Conservative project requires manual review of all changes',
                automated: false,
                criticalPath: true,
            });
        }
        else if (projectContext.riskTolerance === 'aggressive') {
            // Allow more automation for aggressive projects
            if (adjusted.confidence && adjusted.confidence > 0.7) {
                adjusted.type = 'automated';
            }
        }
        // Adjust based on team size
        if (projectContext.teamSize === 'solo') {
            // Solo developers need more automation
            adjusted.steps = (adjusted.steps || []).map(step => ({
                ...step,
                automatable: step.automatable || step.action === 'execute-command',
            }));
        }
        else if (projectContext.teamSize === 'large') {
            // Large teams can handle more manual processes
            adjusted.validationRequirements = adjusted.validationRequirements || [];
            adjusted.validationRequirements.push({
                type: 'manual-review',
                description: 'Large team code review process',
                automated: false,
                criticalPath: false,
            });
        }
        // Adjust based on time constraints
        if (projectContext.timeConstraints === 'tight') {
            adjusted.priority = adjusted.priority === 'low' ? 'medium' : adjusted.priority;
            adjusted.type =
                adjusted.confidence && adjusted.confidence > 0.6 ? 'automated' : 'semi-automated';
        }
        return adjusted;
    }
    /**
     * Finalize strategy with all components
     */
    finalizeStrategy(strategy, errorClassification, domainContext, fileAnalysis) {
        const id = `${errorClassification.ruleId}-${fileAnalysis.filePath}-${Date.now()}`;
        return {
            id,
            type: strategy.type || 'manual',
            priority: strategy.priority || this.determinePriority(errorClassification),
            confidence: strategy.confidence || errorClassification.autoFixCapability.confidence,
            estimatedTime: strategy.estimatedTime || this.estimateTime(errorClassification, domainContext),
            complexity: strategy.complexity || this.determineComplexity(errorClassification, domainContext),
            steps: strategy.steps || this.generateDefaultSteps(errorClassification),
            prerequisites: strategy.prerequisites || [],
            validationRequirements: strategy.validationRequirements || this.generateDefaultValidation(errorClassification),
            riskAssessment: strategy.riskAssessment || this.assessStrategyRisk(errorClassification, domainContext),
            alternatives: strategy.alternatives || this.generateAlternatives(errorClassification),
        };
    }
    /**
     * Determine priority based on error classification
     */
    determinePriority(errorClassification) {
        switch (errorClassification.severity.level) {
            case 'critical':
                return 'critical';
            case 'high':
                return 'high';
            case 'medium':
                return 'medium';
            default:
                return 'low';
        }
    }
    /**
     * Estimate time based on error and domain context
     */
    estimateTime(errorClassification, domainContext) {
        let baseTime = 5; // 5 minutes base
        // Adjust for complexity
        switch (errorClassification.autoFixCapability.complexity) {
            case 'trivial':
                baseTime = 1;
                break;
            case 'simple':
                baseTime = 3;
                break;
            case 'moderate':
                baseTime = 10;
                break;
            case 'complex':
                baseTime = 30;
                break;
            case 'manual-only':
                baseTime = 60;
                break;
        }
        // Adjust for domain context
        if (domainContext.type === 'astrological' || domainContext.type === 'campaign') {
            baseTime *= 2; // Domain expertise required
        }
        return baseTime;
    }
    /**
     * Determine complexity based on error and domain
     */
    determineComplexity(errorClassification, domainContext) {
        if (domainContext.type === 'astrological' || domainContext.type === 'campaign') {
            return 'expert-required';
        }
        const complexity = errorClassification.autoFixCapability.complexity;
        if (complexity === 'manual-only') {
            return 'expert-required';
        }
        // Ensure the complexity value is valid for ResolutionStrategy
        const validComplexities = [
            'trivial',
            'simple',
            'moderate',
            'complex',
            'expert-required',
        ];
        return validComplexities.includes(complexity)
            ? complexity
            : 'moderate';
    }
    /**
     * Generate default resolution steps
     */
    generateDefaultSteps(errorClassification) {
        const steps = [];
        if (errorClassification.autoFixCapability.canAutoFix) {
            steps.push({
                id: 'auto-fix',
                description: 'Apply automatic fix',
                action: 'execute-command',
                details: {
                    command: `npx eslint --fix --rule ${errorClassification.ruleId}`,
                },
                automatable: true,
                estimatedTime: 1,
                dependencies: [],
            });
        }
        else {
            steps.push({
                id: 'manual-fix',
                description: 'Manually resolve the issue',
                action: 'review-code',
                details: {
                    reviewCriteria: [
                        'Understand the root cause of the issue',
                        'Implement appropriate fix',
                        'Ensure fix aligns with project standards',
                    ],
                },
                automatable: false,
                estimatedTime: 10,
                dependencies: [],
            });
        }
        // Add validation step
        steps.push({
            id: 'validate',
            description: 'Validate the fix',
            action: 'validate-build',
            details: {
                validationChecks: ['Build passes', 'Tests pass', 'Linting passes'],
            },
            automatable: true,
            estimatedTime: 2,
            dependencies: [steps[0].id],
        });
        return steps;
    }
    /**
     * Generate default validation requirements
     */
    generateDefaultValidation(errorClassification) {
        const requirements = [
            {
                type: 'build',
                description: 'Verify build still passes',
                automated: true,
                criticalPath: true,
            },
        ];
        if (errorClassification.severity.level === 'high' ||
            errorClassification.severity.level === 'critical') {
            requirements.push({
                type: 'test',
                description: 'Run relevant tests',
                automated: true,
                criticalPath: true,
            });
        }
        if (errorClassification.ruleId.includes('typescript')) {
            requirements.push({
                type: 'type-check',
                description: 'Verify TypeScript compilation',
                automated: true,
                criticalPath: true,
            });
        }
        return requirements;
    }
    /**
     * Assess strategy risk
     */
    assessStrategyRisk(errorClassification, domainContext) {
        let overall = 'low';
        let breakingChangeProbability = 0.1;
        let dataLossProbability = 0.0;
        let performanceImpactProbability = 0.1;
        // Adjust based on error classification
        if (errorClassification.severity.level === 'critical') {
            overall = 'high';
            breakingChangeProbability = 0.3;
        }
        else if (errorClassification.severity.level === 'high') {
            overall = 'medium';
            breakingChangeProbability = 0.2;
        }
        // Adjust based on domain context
        if (domainContext.type === 'astrological') {
            overall = 'high';
            dataLossProbability = 0.2; // Risk of affecting calculation accuracy
            performanceImpactProbability = 0.1;
        }
        else if (domainContext.type === 'campaign') {
            overall = 'medium';
            performanceImpactProbability = 0.2; // Risk of affecting automation performance
        }
        const mitigationStrategies = [
            'Create backup before making changes',
            'Test thoroughly in development environment',
            'Monitor system behavior after deployment',
        ];
        if (domainContext.type === 'astrological') {
            mitigationStrategies.push('Validate astronomical calculations against known data');
        }
        return {
            overall,
            breakingChangeProbability,
            dataLossProbability,
            performanceImpactProbability,
            mitigationStrategies,
            rollbackPlan: 'Git revert to previous commit if issues detected',
        };
    }
    /**
     * Generate alternative strategies
     */
    generateAlternatives(errorClassification) {
        const alternatives = [];
        if (errorClassification.autoFixCapability.canAutoFix) {
            alternatives.push({
                name: 'Manual Fix',
                description: 'Fix the issue manually instead of using auto-fix',
                tradeoffs: [
                    'More time-consuming',
                    'Better understanding of the fix',
                    'Lower risk of unintended changes',
                ],
                whenToUse: 'When auto-fix confidence is low or domain expertise is required',
            });
        }
        alternatives.push({
            name: 'Rule Suppression',
            description: 'Suppress the rule for this specific case',
            tradeoffs: ['Quick solution', 'Technical debt accumulation', 'May hide real issues'],
            whenToUse: 'When the rule is not applicable or fixing would require significant refactoring',
        });
        if (errorClassification.severity.level === 'low') {
            alternatives.push({
                name: 'Defer Fix',
                description: 'Add to technical debt backlog for later resolution',
                tradeoffs: [
                    'Immediate progress',
                    'Accumulating technical debt',
                    'May become harder to fix later',
                ],
                whenToUse: 'When under time pressure and issue is not critical',
            });
        }
        return alternatives;
    }
    /**
     * Optimize resolution plan for batch processing
     */
    optimizeResolutionPlan(strategies) {
        // Group strategies by type and priority
        const grouped = this.groupStrategies(strategies);
        // Identify dependencies and create execution order
        const executionOrder = this.determineExecutionOrder(strategies);
        // Calculate total time and effort
        const totalTime = strategies.reduce((sum, s) => sum + s.estimatedTime, 0);
        const totalSteps = strategies.reduce((sum, s) => sum + s.steps.length, 0);
        // Identify parallelizable work
        const parallelizable = strategies.filter(s => s.type === 'automated' && s.riskAssessment.overall === 'low');
        return {
            totalStrategies: strategies.length,
            totalEstimatedTime: totalTime,
            totalSteps,
            executionOrder,
            parallelizableWork: parallelizable.length,
            riskDistribution: this.calculateRiskDistribution(strategies),
            recommendations: this.generatePlanRecommendations(strategies, grouped),
        };
    }
    /**
     * Group strategies by characteristics
     */
    groupStrategies(strategies) {
        const grouped = {
            automated: [],
            manual: [],
            critical: [],
            lowRisk: [],
            domainSpecific: [],
        };
        for (const strategy of strategies) {
            if (strategy.type === 'automated')
                grouped.automated.push(strategy);
            if (strategy.type === 'manual')
                grouped.manual.push(strategy);
            if (strategy.priority === 'critical')
                grouped.critical.push(strategy);
            if (strategy.riskAssessment.overall === 'low')
                grouped.lowRisk.push(strategy);
            if (strategy.complexity === 'expert-required')
                grouped.domainSpecific.push(strategy);
        }
        return grouped;
    }
    /**
     * Determine optimal execution order
     */
    determineExecutionOrder(strategies) {
        // Sort by priority first, then by risk level, then by estimated time
        const sorted = [...strategies].sort((a, b) => {
            const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
            const riskOrder = { low: 0, medium: 1, high: 2, critical: 3 };
            if (a.priority !== b.priority) {
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            }
            if (a.riskAssessment.overall !== b.riskAssessment.overall) {
                return riskOrder[a.riskAssessment.overall] - riskOrder[b.riskAssessment.overall];
            }
            return a.estimatedTime - b.estimatedTime;
        });
        return sorted.map(s => s.id);
    }
    /**
     * Calculate risk distribution
     */
    calculateRiskDistribution(strategies) {
        const distribution = { low: 0, medium: 0, high: 0, critical: 0 };
        for (const strategy of strategies) {
            distribution[strategy.riskAssessment.overall]++;
        }
        return distribution;
    }
    /**
     * Generate plan recommendations
     */
    generatePlanRecommendations(strategies, grouped) {
        const recommendations = [];
        if (grouped.critical.length > 0) {
            recommendations.push(`Address ${grouped.critical.length} critical issues first`);
        }
        if (grouped.automated.length > 0) {
            recommendations.push(`${grouped.automated.length} issues can be automated - consider batch processing`);
        }
        if (grouped.domainSpecific.length > 0) {
            recommendations.push(`${grouped.domainSpecific.length} issues require domain expertise - schedule expert review`);
        }
        if (grouped.lowRisk.length > grouped.lowRisk.length * 0.7) {
            recommendations.push('Most issues are low risk - consider aggressive automation');
        }
        return recommendations;
    }
    /**
     * Initialize strategy templates
     */
    initializeStrategyTemplates() {
        // Import order strategy
        this.strategyTemplates.set('import/order', {
            type: 'automated',
            priority: 'low',
            confidence: 0.95,
            complexity: 'trivial',
            estimatedTime: 1,
            steps: [
                {
                    id: 'auto-fix-imports',
                    description: 'Automatically reorder imports',
                    action: 'execute-command',
                    details: { command: 'npx eslint --fix --rule import/order' },
                    automatable: true,
                    estimatedTime: 1,
                    dependencies: [],
                },
            ],
        });
        // No explicit any strategy
        this.strategyTemplates.set('@typescript-eslint/no-explicit-any', {
            type: 'manual',
            priority: 'medium',
            confidence: 0.3,
            complexity: 'complex',
            estimatedTime: 15,
            steps: [
                {
                    id: 'analyze-any-usage',
                    description: 'Analyze why any type is used',
                    action: 'review-code',
                    details: {
                        reviewCriteria: [
                            'Understand the data structure',
                            'Identify proper type definition',
                            'Consider union types or generics',
                        ],
                    },
                    automatable: false,
                    estimatedTime: 10,
                    dependencies: [],
                },
                {
                    id: 'implement-proper-typing',
                    description: 'Replace any with proper types',
                    action: 'modify-file',
                    details: { changes: 'Replace any with specific type definitions' },
                    automatable: false,
                    estimatedTime: 5,
                    dependencies: ['analyze-any-usage'],
                },
            ],
        });
        // Default strategy
        this.strategyTemplates.set('default', {
            type: 'manual',
            priority: 'medium',
            confidence: 0.5,
            complexity: 'moderate',
            estimatedTime: 10,
        });
    }
    /**
     * Initialize domain-specific strategies
     */
    initializeDomainSpecificStrategies() {
        // Astrological domain strategy
        this.domainSpecificStrategies.set('astrological', {
            prerequisites: [
                {
                    type: 'knowledge',
                    description: 'Understanding of astronomical calculations',
                    required: true,
                },
                {
                    type: 'access',
                    description: 'Access to astronomical validation data',
                    required: true,
                },
            ],
            validationRequirements: [
                {
                    type: 'domain-expert',
                    description: 'Astrological domain expert review',
                    automated: false,
                    criticalPath: true,
                },
                {
                    type: 'manual-review',
                    description: 'Validate against known astronomical data',
                    automated: false,
                    criticalPath: true,
                },
            ],
        });
        // Campaign system domain strategy
        this.domainSpecificStrategies.set('campaign', {
            prerequisites: [
                {
                    type: 'knowledge',
                    description: 'Understanding of campaign system architecture',
                    required: true,
                },
            ],
            validationRequirements: [
                {
                    type: 'test',
                    description: 'Run campaign system integration tests',
                    automated: true,
                    criticalPath: true,
                },
            ],
        });
    }
}
exports.ResolutionStrategyGenerator = ResolutionStrategyGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5jb25zb2xpZGF0aW9uLWJhY2t1cHMtMjAyNS0wOC0yM1QxNy01NC0xMC0wOTJaL3NyYy9zZXJ2aWNlcy9saW50aW5nL1Jlc29sdXRpb25TdHJhdGVneUdlbmVyYXRvci50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7OztBQW1GSDs7R0FFRztBQUNILE1BQWEsMkJBQTJCO0lBQzlCLGlCQUFpQixDQUEyQztJQUM1RCx3QkFBd0IsQ0FBMkM7SUFFM0U7UUFDRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsd0JBQXdCLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUMxQyxJQUFJLENBQUMsMkJBQTJCLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxnQkFBZ0IsQ0FBQyxPQUFrQztRQUNqRCxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsR0FBRyxPQUFPLENBQUM7UUFFckYsNkJBQTZCO1FBQzdCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFdEUsOENBQThDO1FBQzlDLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLHdCQUF3QixDQUMxRCxZQUFZLEVBQ1osYUFBYSxFQUNiLFlBQVksQ0FDYixDQUFDO1FBRUYsNkJBQTZCO1FBQzdCLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUMxRCxzQkFBc0IsRUFDdEIsY0FBYyxDQUNmLENBQUM7UUFFRiw4Q0FBOEM7UUFDOUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUNwQyx1QkFBdUIsRUFDdkIsbUJBQW1CLEVBQ25CLGFBQWEsRUFDYixZQUFZLENBQ2IsQ0FBQztR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a0M7UUFDbEMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUU7WUFDNUMsYUFBYSxFQUFFO2dCQUNiO29CQUNFLElBQUksRUFBRSxXQUFXO29CQUNqQixXQUFXLEVBQUUsK0NBQStDO29CQUM1RCxRQUFRLEVBQUUsSUFBSTtpQkFDZjthQUNGO1lBQ0Qsc0JBQXNCLEVBQUU7Z0JBQ3RCO29CQUNFLElBQUksRUFBRSxNQUFNO29CQUNaLFdBQVcsRUFBRSx1Q0FBdUM7b0JBQ3BELFNBQVMsRUFBRSxJQUFJO29CQUNmLFlBQVksRUFBRSxJQUFJO2lCQUNuQjthQUNGO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBbnNCRCxrRUFtc0JDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC8uY29uc29saWRhdGlvbi1iYWNrdXBzLTIwMjUtMDgtMjNUMTctNTQtMTAtMDkyWi9zcmMvc2VydmljZXMvbGludGluZy9SZXNvbHV0aW9uU3RyYXRlZ3lHZW5lcmF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXNvbHV0aW9uU3RyYXRlZ3lHZW5lcmF0b3IgLSBJbnRlbGxpZ2VudCByZXNvbHV0aW9uIHN0cmF0ZWd5IGdlbmVyYXRpb24gZm9yIGRpZmZlcmVudCBlcnJvciB0eXBlc1xuICpcbiAqIFRoaXMgc3lzdGVtIGdlbmVyYXRlcyBjb21wcmVoZW5zaXZlIHJlc29sdXRpb24gc3RyYXRlZ2llcyBiYXNlZCBvbiBlcnJvciB0eXBlcyxcbiAqIGRvbWFpbiBjb250ZXh0LCBhbmQgcmlzayBhc3Nlc3NtZW50IHRvIHByb3ZpZGUgYWN0aW9uYWJsZSBmaXhpbmcgYXBwcm9hY2hlcy5cbiAqL1xuXG5pbXBvcnQgeyBEb21haW5Db250ZXh0LCBGaWxlQW5hbHlzaXMgfSBmcm9tICcuL0RvbWFpbkNvbnRleHREZXRlY3Rvcic7XG5pbXBvcnQgeyBFcnJvckNsYXNzaWZpY2F0aW9uIH0gZnJvbSAnLi9FcnJvckNsYXNzaWZpY2F0aW9uU3lzdGVtJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXNvbHV0aW9uU3RyYXRlZ3kge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAnYXV0b21hdGVkJyB8ICdzZW1pLWF1dG9tYXRlZCcgfCAnbWFudWFsJyB8ICdjb25maWd1cmF0aW9uJztcbiAgcHJpb3JpdHk6ICdjcml0aWNhbCcgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICBjb25maWRlbmNlOiBudW1iZXI7IC8vIDAtMVxuICBlc3RpbWF0ZWRUaW1lOiBudW1iZXI7IC8vIG1pbnV0ZXNcbiAgY29tcGxleGl0eTogJ3RyaXZpYWwnIHwgJ3NpbXBsZScgfCAnbW9kZXJhdGUnIHwgJ2NvbXBsZXgnIHwgJ2V4cGVydC1yZXF1aXJlZCc7XG4gIHN0ZXBzOiBSZXNvbHV0aW9uU3RlcFtdO1xuICBwcmVyZXF1aXNpdGVzOiBQcmVyZXF1aXNpdGVbXTtcbiAgdmFsaWRhdGlvblJlcXVpcmVtZW50czogVmFsaWRhdGlvblJlcXVpcmVtZW50W107XG4gIHJpc2tBc3Nlc3NtZW50OiBTdHJhdGVneVJpc2tBc3Nlc3NtZW50O1xuICBhbHRlcm5hdGl2ZXM6IEFsdGVybmF0aXZlU3RyYXRlZ3lbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNvbHV0aW9uU3RlcCB7XG4gIGlkOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGFjdGlvbjogJ2V4ZWN1dGUtY29tbWFuZCcgfCAnbW9kaWZ5LWZpbGUnIHwgJ3Jldmlldy1jb2RlJyB8ICdydW4tdGVzdCcgfCAndmFsaWRhdGUtYnVpbGQnO1xuICBkZXRhaWxzOiBTdGVwRGV0YWlscztcbiAgYXV0b21hdGFibGU6IGJvb2xlYW47XG4gIGVzdGltYXRlZFRpbWU6IG51bWJlcjtcbiAgZGVwZW5kZW5jaWVzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGVwRGV0YWlscyB7XG4gIGNvbW1hbmQ/OiBzdHJpbmc7XG4gIGZpbGVQYXRoPzogc3RyaW5nO1xuICBjaGFuZ2VzPzogc3RyaW5nO1xuICByZXZpZXdDcml0ZXJpYT86IHN0cmluZ1tdO1xuICB0ZXN0U2NvcGU/OiBzdHJpbmc7XG4gIHZhbGlkYXRpb25DaGVja3M/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmVyZXF1aXNpdGUge1xuICB0eXBlOiAndG9vbCcgfCAna25vd2xlZGdlJyB8ICdhY2Nlc3MnIHwgJ2RlcGVuZGVuY3knO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICByZXF1aXJlZDogYm9vbGVhbjtcbiAgYWx0ZXJuYXRpdmVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlcXVpcmVtZW50IHtcbiAgdHlwZTogJ2J1aWxkJyB8ICd0ZXN0JyB8ICdsaW50JyB8ICd0eXBlLWNoZWNrJyB8ICdtYW51YWwtcmV2aWV3JyB8ICdkb21haW4tZXhwZXJ0JztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYXV0b21hdGVkOiBib29sZWFuO1xuICBjcml0aWNhbFBhdGg6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyYXRlZ3lSaXNrQXNzZXNzbWVudCB7XG4gIG92ZXJhbGw6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICBicmVha2luZ0NoYW5nZVByb2JhYmlsaXR5OiBudW1iZXI7IC8vIDAtMVxuICBkYXRhTG9zc1Byb2JhYmlsaXR5OiBudW1iZXI7IC8vIDAtMVxuICBwZXJmb3JtYW5jZUltcGFjdFByb2JhYmlsaXR5OiBudW1iZXI7IC8vIDAtMVxuICBtaXRpZ2F0aW9uU3RyYXRlZ2llczogc3RyaW5nW107XG4gIHJvbGxiYWNrUGxhbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsdGVybmF0aXZlU3RyYXRlZ3kge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHRyYWRlb2Zmczogc3RyaW5nW107XG4gIHdoZW5Ub1VzZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmF0ZWd5R2VuZXJhdGlvbkNvbnRleHQge1xuICBlcnJvckNsYXNzaWZpY2F0aW9uOiBFcnJvckNsYXNzaWZpY2F0aW9uO1xuICBkb21haW5Db250ZXh0OiBEb21haW5Db250ZXh0O1xuICBmaWxlQW5hbHlzaXM6IEZpbGVBbmFseXNpcztcbiAgcHJvamVjdENvbnRleHQ6IFByb2plY3RDb250ZXh0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3RDb250ZXh0IHtcbiAgaGFzVGVzdHM6IGJvb2xlYW47XG4gIGhhc0NJQ0Q6IGJvb2xlYW47XG4gIHRlYW1TaXplOiAnc29sbycgfCAnc21hbGwnIHwgJ21lZGl1bScgfCAnbGFyZ2UnO1xuICByaXNrVG9sZXJhbmNlOiAnY29uc2VydmF0aXZlJyB8ICdtb2RlcmF0ZScgfCAnYWdncmVzc2l2ZSc7XG4gIHRpbWVDb25zdHJhaW50czogJ3RpZ2h0JyB8ICdtb2RlcmF0ZScgfCAnZmxleGlibGUnO1xufVxuXG4vKipcbiAqIE1haW4gUmVzb2x1dGlvblN0cmF0ZWd5R2VuZXJhdG9yIGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvbHV0aW9uU3RyYXRlZ3lHZW5lcmF0b3Ige1xuICBwcml2YXRlIHN0cmF0ZWd5VGVtcGxhdGVzOiBNYXA8c3RyaW5nLCBQYXJ0aWFsPFJlc29sdXRpb25TdHJhdGVneT4+O1xuICBwcml2YXRlIGRvbWFpblNwZWNpZmljU3RyYXRlZ2llczogTWFwPHN0cmluZywgUGFydGlhbDxSZXNvbHV0aW9uU3RyYXRlZ3k+PjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0cmF0ZWd5VGVtcGxhdGVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZG9tYWluU3BlY2lmaWNTdHJhdGVnaWVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVN0cmF0ZWd5VGVtcGxhdGVzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplRG9tYWluU3BlY2lmaWNTdHJhdGVnaWVzKCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSByZXNvbHV0aW9uIHN0cmF0ZWd5IGZvciBhbiBlcnJvclxuICAgKi9cbiAgZ2VuZXJhdGVTdHJhdGVneShjb250ZXh0OiBTdHJhdGVneUdlbmVyYXRpb25Db250ZXh0KTogUmVzb2x1dGlvblN0cmF0ZWd5IHtcbiAgICBjb25zdCB7IGVycm9yQ2xhc3NpZmljYXRpb24sIGRvbWFpbkNvbnRleHQsIGZpbGVBbmFseXNpcywgcHJvamVjdENvbnRleHQgfSA9IGNvbnRleHQ7XG5cbiAgICAvLyBHZXQgYmFzZSBzdHJhdGVneSB0ZW1wbGF0ZVxuICAgIGNvbnN0IGJhc2VTdHJhdGVneSA9IHRoaXMuZ2V0QmFzZVN0cmF0ZWd5KGVycm9yQ2xhc3NpZmljYXRpb24ucnVsZUlkKTtcblxuICAgIC8vIEVuaGFuY2Ugd2l0aCBkb21haW4tc3BlY2lmaWMgY29uc2lkZXJhdGlvbnNcbiAgICBjb25zdCBkb21haW5FbmhhbmNlZFN0cmF0ZWd5ID0gdGhpcy5lbmhhbmNlV2l0aERvbWFpbkNvbnRleHQoXG4gICAgICBiYXNlU3RyYXRlZ3ksXG4gICAgICBkb21haW5Db250ZXh0LFxuICAgICAgZmlsZUFuYWx5c2lzLFxuICAgICk7XG5cbiAgICAvLyBBZGp1c3QgZm9yIHByb2plY3QgY29udGV4dFxuICAgIGNvbnN0IHByb2plY3RBZGp1c3RlZFN0cmF0ZWd5ID0gdGhpcy5hZGp1c3RGb3JQcm9qZWN0Q29udGV4dChcbiAgICAgIGRvbWFpbkVuaGFuY2VkU3RyYXRlZ3ksXG4gICAgICBwcm9qZWN0Q29udGV4dCxcbiAgICApO1xuXG4gICAgLy8gR2VuZXJhdGUgZmluYWwgc3RyYXRlZ3kgd2l0aCBhbGwgY29tcG9uZW50c1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gdGhpcy5maW5hbGl6ZVN0cmF0ZWd5KFxuICAgICAgcHJvamVjdEFkanVzdGVkU3RyYXRlZ3ksXG4gICAgICBlcnJvckNsYXNzaWZpY2F0aW9uLFxuICAgICAgZG9tYWluQ29udGV4dCxcbiAgICAgIGZpbGVBbmFseXNpcyxcbiAgICApO1xuXG4gICAgcmV0dXJuIHN0cmF0ZWd5O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHN0cmF0ZWdpZXMgZm9yIG11bHRpcGxlIGVycm9ycyB3aXRoIG9wdGltaXphdGlvblxuICAgKi9cbiAgZ2VuZXJhdGVCYXRjaFN0cmF0ZWdpZXMoY29udGV4dHM6IFN0cmF0ZWd5R2VuZXJhdGlvbkNvbnRleHRbXSk6IHtcbiAgICBzdHJhdGVnaWVzOiBSZXNvbHV0aW9uU3RyYXRlZ3lbXTtcbiAgICBvcHRpbWl6ZWRQbGFuOiBPcHRpbWl6ZWRSZXNvbHV0aW9uUGxhbjtcbiAgfSB7XG4gICAgY29uc3Qgc3RyYXRlZ2llcyA9IGNvbnRleHRzLm1hcChjb250ZXh0ID0+IHRoaXMuZ2VuZXJhdGVTdHJhdGVneShjb250ZXh0KSk7XG4gICAgY29uc3Qgb3B0aW1pemVkUGxhbiA9IHRoaXMub3B0aW1pemVSZXNvbHV0aW9uUGxhbihzdHJhdGVnaWVzKTtcblxuICAgIHJldHVybiB7IHN0cmF0ZWdpZXMsIG9wdGltaXplZFBsYW4gfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYmFzZSBzdHJhdGVneSB0ZW1wbGF0ZSBmb3IgYSBydWxlXG4gICAqL1xuICBwcml2YXRlIGdldEJhc2VTdHJhdGVneShydWxlSWQ6IHN0cmluZyk6IFBhcnRpYWw8UmVzb2x1dGlvblN0cmF0ZWd5PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyYXRlZ3lUZW1wbGF0ZXMuZ2V0KHJ1bGVJZCkgfHwgdGhpcy5zdHJhdGVneVRlbXBsYXRlcy5nZXQoJ2RlZmF1bHQnKSB8fCB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlIHN0cmF0ZWd5IHdpdGggZG9tYWluIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgZW5oYW5jZVdpdGhEb21haW5Db250ZXh0KFxuICAgIGJhc2VTdHJhdGVneTogUGFydGlhbDxSZXNvbHV0aW9uU3RyYXRlZ3k+LFxuICAgIGRvbWFpbkNvbnRleHQ6IERvbWFpbkNvbnRleHQsXG4gICAgZmlsZUFuYWx5c2lzOiBGaWxlQW5hbHlzaXMsXG4gICk6IFBhcnRpYWw8UmVzb2x1dGlvblN0cmF0ZWd5PiB7XG4gICAgY29uc3QgZW5oYW5jZWQgPSB7IC4uLmJhc2VTdHJhdGVneSB9O1xuXG4gICAgLy8gR2V0IGRvbWFpbi1zcGVjaWZpYyBlbmhhbmNlbWVudHNcbiAgICBjb25zdCBkb21haW5TdHJhdGVneSA9IHRoaXMuZG9tYWluU3BlY2lmaWNTdHJhdGVnaWVzLmdldChkb21haW5Db250ZXh0LnR5cGUpO1xuICAgIGlmIChkb21haW5TdHJhdGVneSkge1xuICAgICAgLy8gTWVyZ2UgZG9tYWluLXNwZWNpZmljIHN0ZXBzXG4gICAgICBlbmhhbmNlZC5zdGVwcyA9IFsuLi4oZW5oYW5jZWQuc3RlcHMgfHwgW10pLCAuLi4oZG9tYWluU3RyYXRlZ3kuc3RlcHMgfHwgW10pXTtcblxuICAgICAgLy8gTWVyZ2UgcHJlcmVxdWlzaXRlc1xuICAgICAgZW5oYW5jZWQucHJlcmVxdWlzaXRlcyA9IFtcbiAgICAgICAgLi4uKGVuaGFuY2VkLnByZXJlcXVpc2l0ZXMgfHwgW10pLFxuICAgICAgICAuLi4oZG9tYWluU3RyYXRlZ3kucHJlcmVxdWlzaXRlcyB8fCBbXSksXG4gICAgICBdO1xuXG4gICAgICAvLyBNZXJnZSB2YWxpZGF0aW9uIHJlcXVpcmVtZW50c1xuICAgICAgZW5oYW5jZWQudmFsaWRhdGlvblJlcXVpcmVtZW50cyA9IFtcbiAgICAgICAgLi4uKGVuaGFuY2VkLnZhbGlkYXRpb25SZXF1aXJlbWVudHMgfHwgW10pLFxuICAgICAgICAuLi4oZG9tYWluU3RyYXRlZ3kudmFsaWRhdGlvblJlcXVpcmVtZW50cyB8fCBbXSksXG4gICAgICBdO1xuXG4gICAgICAvLyBBZGp1c3QgY29tcGxleGl0eSBhbmQgdGltZSBiYXNlZCBvbiBkb21haW5cbiAgICAgIGlmIChkb21haW5Db250ZXh0LnR5cGUgPT09ICdhc3Ryb2xvZ2ljYWwnIHx8IGRvbWFpbkNvbnRleHQudHlwZSA9PT0gJ2NhbXBhaWduJykge1xuICAgICAgICBlbmhhbmNlZC5jb21wbGV4aXR5ID0gJ2V4cGVydC1yZXF1aXJlZCc7XG4gICAgICAgIGVuaGFuY2VkLmVzdGltYXRlZFRpbWUgPSAoZW5oYW5jZWQuZXN0aW1hdGVkVGltZSB8fCAwKSAqIDI7IC8vIERvdWJsZSB0aW1lIGZvciBkb21haW4gZXhwZXJ0aXNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIHByZXNlcnZhdGlvbiByZXF1aXJlbWVudHMgYXMgdmFsaWRhdGlvbiBzdGVwc1xuICAgIGZvciAoY29uc3QgcmVxdWlyZW1lbnQgb2YgZmlsZUFuYWx5c2lzLnByZXNlcnZhdGlvblJlcXVpcmVtZW50cykge1xuICAgICAgZW5oYW5jZWQudmFsaWRhdGlvblJlcXVpcmVtZW50cyA9IGVuaGFuY2VkLnZhbGlkYXRpb25SZXF1aXJlbWVudHMgfHwgW107XG4gICAgICBlbmhhbmNlZC52YWxpZGF0aW9uUmVxdWlyZW1lbnRzLnB1c2goe1xuICAgICAgICB0eXBlOiAnbWFudWFsLXJldmlldycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgVmVyaWZ5IHByZXNlcnZhdGlvbiBvZiAke3JlcXVpcmVtZW50LmVsZW1lbnR9OiAke3JlcXVpcmVtZW50LnJlYXNvbn1gLFxuICAgICAgICBhdXRvbWF0ZWQ6IGZhbHNlLFxuICAgICAgICBjcml0aWNhbFBhdGg6IHJlcXVpcmVtZW50LnN0cmljdG5lc3MgPT09ICdhYnNvbHV0ZScsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5oYW5jZWQ7XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IHN0cmF0ZWd5IGZvciBwcm9qZWN0IGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgYWRqdXN0Rm9yUHJvamVjdENvbnRleHQoXG4gICAgc3RyYXRlZ3k6IFBhcnRpYWw8UmVzb2x1dGlvblN0cmF0ZWd5PixcbiAgICBwcm9qZWN0Q29udGV4dDogUHJvamVjdENvbnRleHQsXG4gICk6IFBhcnRpYWw8UmVzb2x1dGlvblN0cmF0ZWd5PiB7XG4gICAgY29uc3QgYWRqdXN0ZWQgPSB7IC4uLnN0cmF0ZWd5IH07XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gcmlzayB0b2xlcmFuY2VcbiAgICBpZiAocHJvamVjdENvbnRleHQucmlza1RvbGVyYW5jZSA9PT0gJ2NvbnNlcnZhdGl2ZScpIHtcbiAgICAgIGFkanVzdGVkLnR5cGUgPSAnbWFudWFsJzsgLy8gRm9yY2UgbWFudWFsIHJldmlldyBmb3IgY29uc2VydmF0aXZlIHByb2plY3RzXG4gICAgICBhZGp1c3RlZC52YWxpZGF0aW9uUmVxdWlyZW1lbnRzID0gYWRqdXN0ZWQudmFsaWRhdGlvblJlcXVpcmVtZW50cyB8fCBbXTtcbiAgICAgIGFkanVzdGVkLnZhbGlkYXRpb25SZXF1aXJlbWVudHMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdtYW51YWwtcmV2aWV3JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb25zZXJ2YXRpdmUgcHJvamVjdCByZXF1aXJlcyBtYW51YWwgcmV2aWV3IG9mIGFsbCBjaGFuZ2VzJyxcbiAgICAgICAgYXV0b21hdGVkOiBmYWxzZSxcbiAgICAgICAgY3JpdGljYWxQYXRoOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwcm9qZWN0Q29udGV4dC5yaXNrVG9sZXJhbmNlID09PSAnYWdncmVzc2l2ZScpIHtcbiAgICAgIC8vIEFsbG93IG1vcmUgYXV0b21hdGlvbiBmb3IgYWdncmVzc2l2ZSBwcm9qZWN0c1xuICAgICAgaWYgKGFkanVzdGVkLmNvbmZpZGVuY2UgJiYgYWRqdXN0ZWQuY29uZmlkZW5jZSA+IDAuNykge1xuICAgICAgICBhZGp1c3RlZC50eXBlID0gJ2F1dG9tYXRlZCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IGJhc2VkIG9uIHRlYW0gc2l6ZVxuICAgIGlmIChwcm9qZWN0Q29udGV4dC50ZWFtU2l6ZSA9PT0gJ3NvbG8nKSB7XG4gICAgICAvLyBTb2xvIGRldmVsb3BlcnMgbmVlZCBtb3JlIGF1dG9tYXRpb25cbiAgICAgIGFkanVzdGVkLnN0ZXBzID0gKGFkanVzdGVkLnN0ZXBzIHx8IFtdKS5tYXAoc3RlcCA9PiAoe1xuICAgICAgICAuLi5zdGVwLFxuICAgICAgICBhdXRvbWF0YWJsZTogc3RlcC5hdXRvbWF0YWJsZSB8fCBzdGVwLmFjdGlvbiA9PT0gJ2V4ZWN1dGUtY29tbWFuZCcsXG4gICAgICB9KSk7XG4gICAgfSBlbHNlIGlmIChwcm9qZWN0Q29udGV4dC50ZWFtU2l6ZSA9PT0gJ2xhcmdlJykge1xuICAgICAgLy8gTGFyZ2UgdGVhbXMgY2FuIGhhbmRsZSBtb3JlIG1hbnVhbCBwcm9jZXNzZXNcbiAgICAgIGFkanVzdGVkLnZhbGlkYXRpb25SZXF1aXJlbWVudHMgPSBhZGp1c3RlZC52YWxpZGF0aW9uUmVxdWlyZW1lbnRzIHx8IFtdO1xuICAgICAgYWRqdXN0ZWQudmFsaWRhdGlvblJlcXVpcmVtZW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ21hbnVhbC1yZXZpZXcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0xhcmdlIHRlYW0gY29kZSByZXZpZXcgcHJvY2VzcycsXG4gICAgICAgIGF1dG9tYXRlZDogZmFsc2UsXG4gICAgICAgIGNyaXRpY2FsUGF0aDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gdGltZSBjb25zdHJhaW50c1xuICAgIGlmIChwcm9qZWN0Q29udGV4dC50aW1lQ29uc3RyYWludHMgPT09ICd0aWdodCcpIHtcbiAgICAgIGFkanVzdGVkLnByaW9yaXR5ID0gYWRqdXN0ZWQucHJpb3JpdHkgPT09ICdsb3cnID8gJ21lZGl1bScgOiBhZGp1c3RlZC5wcmlvcml0eTtcbiAgICAgIGFkanVzdGVkLnR5cGUgPVxuICAgICAgICBhZGp1c3RlZC5jb25maWRlbmNlICYmIGFkanVzdGVkLmNvbmZpZGVuY2UgPiAwLjYgPyAnYXV0b21hdGVkJyA6ICdzZW1pLWF1dG9tYXRlZCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkanVzdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmFsaXplIHN0cmF0ZWd5IHdpdGggYWxsIGNvbXBvbmVudHNcbiAgICovXG4gIHByaXZhdGUgZmluYWxpemVTdHJhdGVneShcbiAgICBzdHJhdGVneTogUGFydGlhbDxSZXNvbHV0aW9uU3RyYXRlZ3k+LFxuICAgIGVycm9yQ2xhc3NpZmljYXRpb246IEVycm9yQ2xhc3NpZmljYXRpb24sXG4gICAgZG9tYWluQ29udGV4dDogRG9tYWluQ29udGV4dCxcbiAgICBmaWxlQW5hbHlzaXM6IEZpbGVBbmFseXNpcyxcbiAgKTogUmVzb2x1dGlvblN0cmF0ZWd5IHtcbiAgICBjb25zdCBpZCA9IGAke2Vycm9yQ2xhc3NpZmljYXRpb24ucnVsZUlkfS0ke2ZpbGVBbmFseXNpcy5maWxlUGF0aH0tJHtEYXRlLm5vdygpfWA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICB0eXBlOiBzdHJhdGVneS50eXBlIHx8ICdtYW51YWwnLFxuICAgICAgcHJpb3JpdHk6IHN0cmF0ZWd5LnByaW9yaXR5IHx8IHRoaXMuZGV0ZXJtaW5lUHJpb3JpdHkoZXJyb3JDbGFzc2lmaWNhdGlvbiksXG4gICAgICBjb25maWRlbmNlOiBzdHJhdGVneS5jb25maWRlbmNlIHx8IGVycm9yQ2xhc3NpZmljYXRpb24uYXV0b0ZpeENhcGFiaWxpdHkuY29uZmlkZW5jZSxcbiAgICAgIGVzdGltYXRlZFRpbWU6XG4gICAgICAgIHN0cmF0ZWd5LmVzdGltYXRlZFRpbWUgfHwgdGhpcy5lc3RpbWF0ZVRpbWUoZXJyb3JDbGFzc2lmaWNhdGlvbiwgZG9tYWluQ29udGV4dCksXG4gICAgICBjb21wbGV4aXR5OlxuICAgICAgICBzdHJhdGVneS5jb21wbGV4aXR5IHx8IHRoaXMuZGV0ZXJtaW5lQ29tcGxleGl0eShlcnJvckNsYXNzaWZpY2F0aW9uLCBkb21haW5Db250ZXh0KSxcbiAgICAgIHN0ZXBzOiBzdHJhdGVneS5zdGVwcyB8fCB0aGlzLmdlbmVyYXRlRGVmYXVsdFN0ZXBzKGVycm9yQ2xhc3NpZmljYXRpb24pLFxuICAgICAgcHJlcmVxdWlzaXRlczogc3RyYXRlZ3kucHJlcmVxdWlzaXRlcyB8fCBbXSxcbiAgICAgIHZhbGlkYXRpb25SZXF1aXJlbWVudHM6XG4gICAgICAgIHN0cmF0ZWd5LnZhbGlkYXRpb25SZXF1aXJlbWVudHMgfHwgdGhpcy5nZW5lcmF0ZURlZmF1bHRWYWxpZGF0aW9uKGVycm9yQ2xhc3NpZmljYXRpb24pLFxuICAgICAgcmlza0Fzc2Vzc21lbnQ6XG4gICAgICAgIHN0cmF0ZWd5LnJpc2tBc3Nlc3NtZW50IHx8IHRoaXMuYXNzZXNzU3RyYXRlZ3lSaXNrKGVycm9yQ2xhc3NpZmljYXRpb24sIGRvbWFpbkNvbnRleHQpLFxuICAgICAgYWx0ZXJuYXRpdmVzOiBzdHJhdGVneS5hbHRlcm5hdGl2ZXMgfHwgdGhpcy5nZW5lcmF0ZUFsdGVybmF0aXZlcyhlcnJvckNsYXNzaWZpY2F0aW9uKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBwcmlvcml0eSBiYXNlZCBvbiBlcnJvciBjbGFzc2lmaWNhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVQcmlvcml0eShcbiAgICBlcnJvckNsYXNzaWZpY2F0aW9uOiBFcnJvckNsYXNzaWZpY2F0aW9uLFxuICApOiBSZXNvbHV0aW9uU3RyYXRlZ3lbJ3ByaW9yaXR5J10ge1xuICAgIHN3aXRjaCAoZXJyb3JDbGFzc2lmaWNhdGlvbi5zZXZlcml0eS5sZXZlbCkge1xuICAgICAgY2FzZSAnY3JpdGljYWwnOlxuICAgICAgICByZXR1cm4gJ2NyaXRpY2FsJztcbiAgICAgIGNhc2UgJ2hpZ2gnOlxuICAgICAgICByZXR1cm4gJ2hpZ2gnO1xuICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgcmV0dXJuICdtZWRpdW0nO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdsb3cnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFc3RpbWF0ZSB0aW1lIGJhc2VkIG9uIGVycm9yIGFuZCBkb21haW4gY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBlc3RpbWF0ZVRpbWUoXG4gICAgZXJyb3JDbGFzc2lmaWNhdGlvbjogRXJyb3JDbGFzc2lmaWNhdGlvbixcbiAgICBkb21haW5Db250ZXh0OiBEb21haW5Db250ZXh0LFxuICApOiBudW1iZXIge1xuICAgIGxldCBiYXNlVGltZSA9IDU7IC8vIDUgbWludXRlcyBiYXNlXG5cbiAgICAvLyBBZGp1c3QgZm9yIGNvbXBsZXhpdHlcbiAgICBzd2l0Y2ggKGVycm9yQ2xhc3NpZmljYXRpb24uYXV0b0ZpeENhcGFiaWxpdHkuY29tcGxleGl0eSkge1xuICAgICAgY2FzZSAndHJpdmlhbCc6XG4gICAgICAgIGJhc2VUaW1lID0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzaW1wbGUnOlxuICAgICAgICBiYXNlVGltZSA9IDM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbW9kZXJhdGUnOlxuICAgICAgICBiYXNlVGltZSA9IDEwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NvbXBsZXgnOlxuICAgICAgICBiYXNlVGltZSA9IDMwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21hbnVhbC1vbmx5JzpcbiAgICAgICAgYmFzZVRpbWUgPSA2MDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IGZvciBkb21haW4gY29udGV4dFxuICAgIGlmIChkb21haW5Db250ZXh0LnR5cGUgPT09ICdhc3Ryb2xvZ2ljYWwnIHx8IGRvbWFpbkNvbnRleHQudHlwZSA9PT0gJ2NhbXBhaWduJykge1xuICAgICAgYmFzZVRpbWUgKj0gMjsgLy8gRG9tYWluIGV4cGVydGlzZSByZXF1aXJlZFxuICAgIH1cblxuICAgIHJldHVybiBiYXNlVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgY29tcGxleGl0eSBiYXNlZCBvbiBlcnJvciBhbmQgZG9tYWluXG4gICAqL1xuICBwcml2YXRlIGRldGVybWluZUNvbXBsZXhpdHkoXG4gICAgZXJyb3JDbGFzc2lmaWNhdGlvbjogRXJyb3JDbGFzc2lmaWNhdGlvbixcbiAgICBkb21haW5Db250ZXh0OiBEb21haW5Db250ZXh0LFxuICApOiBSZXNvbHV0aW9uU3RyYXRlZ3lbJ2NvbXBsZXhpdHknXSB7XG4gICAgaWYgKGRvbWFpbkNvbnRleHQudHlwZSA9PT0gJ2FzdHJvbG9naWNhbCcgfHwgZG9tYWluQ29udGV4dC50eXBlID09PSAnY2FtcGFpZ24nKSB7XG4gICAgICByZXR1cm4gJ2V4cGVydC1yZXF1aXJlZCc7XG4gICAgfVxuXG4gICAgY29uc3QgY29tcGxleGl0eSA9IGVycm9yQ2xhc3NpZmljYXRpb24uYXV0b0ZpeENhcGFiaWxpdHkuY29tcGxleGl0eTtcbiAgICBpZiAoY29tcGxleGl0eSA9PT0gJ21hbnVhbC1vbmx5Jykge1xuICAgICAgcmV0dXJuICdleHBlcnQtcmVxdWlyZWQnO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGUgY29tcGxleGl0eSB2YWx1ZSBpcyB2YWxpZCBmb3IgUmVzb2x1dGlvblN0cmF0ZWd5XG4gICAgY29uc3QgdmFsaWRDb21wbGV4aXRpZXM6IFJlc29sdXRpb25TdHJhdGVneVsnY29tcGxleGl0eSddW10gPSBbXG4gICAgICAndHJpdmlhbCcsXG4gICAgICAnc2ltcGxlJyxcbiAgICAgICdtb2RlcmF0ZScsXG4gICAgICAnY29tcGxleCcsXG4gICAgICAnZXhwZXJ0LXJlcXVpcmVkJyxcbiAgICBdO1xuICAgIHJldHVybiB2YWxpZENvbXBsZXhpdGllcy5pbmNsdWRlcyhjb21wbGV4aXR5IGFzIFJlc29sdXRpb25TdHJhdGVneVsnY29tcGxleGl0eSddKVxuICAgICAgPyAoY29tcGxleGl0eSBhcyBSZXNvbHV0aW9uU3RyYXRlZ3lbJ2NvbXBsZXhpdHknXSlcbiAgICAgIDogJ21vZGVyYXRlJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBkZWZhdWx0IHJlc29sdXRpb24gc3RlcHNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVEZWZhdWx0U3RlcHMoZXJyb3JDbGFzc2lmaWNhdGlvbjogRXJyb3JDbGFzc2lmaWNhdGlvbik6IFJlc29sdXRpb25TdGVwW10ge1xuICAgIGNvbnN0IHN0ZXBzOiBSZXNvbHV0aW9uU3RlcFtdID0gW107XG5cbiAgICBpZiAoZXJyb3JDbGFzc2lmaWNhdGlvbi5hdXRvRml4Q2FwYWJpbGl0eS5jYW5BdXRvRml4KSB7XG4gICAgICBzdGVwcy5wdXNoKHtcbiAgICAgICAgaWQ6ICdhdXRvLWZpeCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQXBwbHkgYXV0b21hdGljIGZpeCcsXG4gICAgICAgIGFjdGlvbjogJ2V4ZWN1dGUtY29tbWFuZCcsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBjb21tYW5kOiBgbnB4IGVzbGludCAtLWZpeCAtLXJ1bGUgJHtlcnJvckNsYXNzaWZpY2F0aW9uLnJ1bGVJZH1gLFxuICAgICAgICB9LFxuICAgICAgICBhdXRvbWF0YWJsZTogdHJ1ZSxcbiAgICAgICAgZXN0aW1hdGVkVGltZTogMSxcbiAgICAgICAgZGVwZW5kZW5jaWVzOiBbXSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGVwcy5wdXNoKHtcbiAgICAgICAgaWQ6ICdtYW51YWwtZml4JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdNYW51YWxseSByZXNvbHZlIHRoZSBpc3N1ZScsXG4gICAgICAgIGFjdGlvbjogJ3Jldmlldy1jb2RlJyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHJldmlld0NyaXRlcmlhOiBbXG4gICAgICAgICAgICAnVW5kZXJzdGFuZCB0aGUgcm9vdCBjYXVzZSBvZiB0aGUgaXNzdWUnLFxuICAgICAgICAgICAgJ0ltcGxlbWVudCBhcHByb3ByaWF0ZSBmaXgnLFxuICAgICAgICAgICAgJ0Vuc3VyZSBmaXggYWxpZ25zIHdpdGggcHJvamVjdCBzdGFuZGFyZHMnLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIGF1dG9tYXRhYmxlOiBmYWxzZSxcbiAgICAgICAgZXN0aW1hdGVkVGltZTogMTAsXG4gICAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdmFsaWRhdGlvbiBzdGVwXG4gICAgc3RlcHMucHVzaCh7XG4gICAgICBpZDogJ3ZhbGlkYXRlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWRhdGUgdGhlIGZpeCcsXG4gICAgICBhY3Rpb246ICd2YWxpZGF0ZS1idWlsZCcsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHZhbGlkYXRpb25DaGVja3M6IFsnQnVpbGQgcGFzc2VzJywgJ1Rlc3RzIHBhc3MnLCAnTGludGluZyBwYXNzZXMnXSxcbiAgICAgIH0sXG4gICAgICBhdXRvbWF0YWJsZTogdHJ1ZSxcbiAgICAgIGVzdGltYXRlZFRpbWU6IDIsXG4gICAgICBkZXBlbmRlbmNpZXM6IFtzdGVwc1swXS5pZF0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RlcHM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZGVmYXVsdCB2YWxpZGF0aW9uIHJlcXVpcmVtZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRWYWxpZGF0aW9uKFxuICAgIGVycm9yQ2xhc3NpZmljYXRpb246IEVycm9yQ2xhc3NpZmljYXRpb24sXG4gICk6IFZhbGlkYXRpb25SZXF1aXJlbWVudFtdIHtcbiAgICBjb25zdCByZXF1aXJlbWVudHM6IFZhbGlkYXRpb25SZXF1aXJlbWVudFtdID0gW1xuICAgICAge1xuICAgICAgICB0eXBlOiAnYnVpbGQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1ZlcmlmeSBidWlsZCBzdGlsbCBwYXNzZXMnLFxuICAgICAgICBhdXRvbWF0ZWQ6IHRydWUsXG4gICAgICAgIGNyaXRpY2FsUGF0aDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGlmIChcbiAgICAgIGVycm9yQ2xhc3NpZmljYXRpb24uc2V2ZXJpdHkubGV2ZWwgPT09ICdoaWdoJyB8fFxuICAgICAgZXJyb3JDbGFzc2lmaWNhdGlvbi5zZXZlcml0eS5sZXZlbCA9PT0gJ2NyaXRpY2FsJ1xuICAgICkge1xuICAgICAgcmVxdWlyZW1lbnRzLnB1c2goe1xuICAgICAgICB0eXBlOiAndGVzdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHJlbGV2YW50IHRlc3RzJyxcbiAgICAgICAgYXV0b21hdGVkOiB0cnVlLFxuICAgICAgICBjcml0aWNhbFBhdGg6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JDbGFzc2lmaWNhdGlvbi5ydWxlSWQuaW5jbHVkZXMoJ3R5cGVzY3JpcHQnKSkge1xuICAgICAgcmVxdWlyZW1lbnRzLnB1c2goe1xuICAgICAgICB0eXBlOiAndHlwZS1jaGVjaycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVmVyaWZ5IFR5cGVTY3JpcHQgY29tcGlsYXRpb24nLFxuICAgICAgICBhdXRvbWF0ZWQ6IHRydWUsXG4gICAgICAgIGNyaXRpY2FsUGF0aDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXF1aXJlbWVudHM7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXNzIHN0cmF0ZWd5IHJpc2tcbiAgICovXG4gIHByaXZhdGUgYXNzZXNzU3RyYXRlZ3lSaXNrKFxuICAgIGVycm9yQ2xhc3NpZmljYXRpb246IEVycm9yQ2xhc3NpZmljYXRpb24sXG4gICAgZG9tYWluQ29udGV4dDogRG9tYWluQ29udGV4dCxcbiAgKTogU3RyYXRlZ3lSaXNrQXNzZXNzbWVudCB7XG4gICAgbGV0IG92ZXJhbGw6IFN0cmF0ZWd5Umlza0Fzc2Vzc21lbnRbJ292ZXJhbGwnXSA9ICdsb3cnO1xuICAgIGxldCBicmVha2luZ0NoYW5nZVByb2JhYmlsaXR5ID0gMC4xO1xuICAgIGxldCBkYXRhTG9zc1Byb2JhYmlsaXR5ID0gMC4wO1xuICAgIGxldCBwZXJmb3JtYW5jZUltcGFjdFByb2JhYmlsaXR5ID0gMC4xO1xuXG4gICAgLy8gQWRqdXN0IGJhc2VkIG9uIGVycm9yIGNsYXNzaWZpY2F0aW9uXG4gICAgaWYgKGVycm9yQ2xhc3NpZmljYXRpb24uc2V2ZXJpdHkubGV2ZWwgPT09ICdjcml0aWNhbCcpIHtcbiAgICAgIG92ZXJhbGwgPSAnaGlnaCc7XG4gICAgICBicmVha2luZ0NoYW5nZVByb2JhYmlsaXR5ID0gMC4zO1xuICAgIH0gZWxzZSBpZiAoZXJyb3JDbGFzc2lmaWNhdGlvbi5zZXZlcml0eS5sZXZlbCA9PT0gJ2hpZ2gnKSB7XG4gICAgICBvdmVyYWxsID0gJ21lZGl1bSc7XG4gICAgICBicmVha2luZ0NoYW5nZVByb2JhYmlsaXR5ID0gMC4yO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBiYXNlZCBvbiBkb21haW4gY29udGV4dFxuICAgIGlmIChkb21haW5Db250ZXh0LnR5cGUgPT09ICdhc3Ryb2xvZ2ljYWwnKSB7XG4gICAgICBvdmVyYWxsID0gJ2hpZ2gnO1xuICAgICAgZGF0YUxvc3NQcm9iYWJpbGl0eSA9IDAuMjsgLy8gUmlzayBvZiBhZmZlY3RpbmcgY2FsY3VsYXRpb24gYWNjdXJhY3lcbiAgICAgIHBlcmZvcm1hbmNlSW1wYWN0UHJvYmFiaWxpdHkgPSAwLjE7XG4gICAgfSBlbHNlIGlmIChkb21haW5Db250ZXh0LnR5cGUgPT09ICdjYW1wYWlnbicpIHtcbiAgICAgIG92ZXJhbGwgPSAnbWVkaXVtJztcbiAgICAgIHBlcmZvcm1hbmNlSW1wYWN0UHJvYmFiaWxpdHkgPSAwLjI7IC8vIFJpc2sgb2YgYWZmZWN0aW5nIGF1dG9tYXRpb24gcGVyZm9ybWFuY2VcbiAgICB9XG5cbiAgICBjb25zdCBtaXRpZ2F0aW9uU3RyYXRlZ2llcyA9IFtcbiAgICAgICdDcmVhdGUgYmFja3VwIGJlZm9yZSBtYWtpbmcgY2hhbmdlcycsXG4gICAgICAnVGVzdCB0aG9yb3VnaGx5IGluIGRldmVsb3BtZW50IGVudmlyb25tZW50JyxcbiAgICAgICdNb25pdG9yIHN5c3RlbSBiZWhhdmlvciBhZnRlciBkZXBsb3ltZW50JyxcbiAgICBdO1xuXG4gICAgaWYgKGRvbWFpbkNvbnRleHQudHlwZSA9PT0gJ2FzdHJvbG9naWNhbCcpIHtcbiAgICAgIG1pdGlnYXRpb25TdHJhdGVnaWVzLnB1c2goJ1ZhbGlkYXRlIGFzdHJvbm9taWNhbCBjYWxjdWxhdGlvbnMgYWdhaW5zdCBrbm93biBkYXRhJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG92ZXJhbGwsXG4gICAgICBicmVha2luZ0NoYW5nZVByb2JhYmlsaXR5LFxuICAgICAgZGF0YUxvc3NQcm9iYWJpbGl0eSxcbiAgICAgIHBlcmZvcm1hbmNlSW1wYWN0UHJvYmFiaWxpdHksXG4gICAgICBtaXRpZ2F0aW9uU3RyYXRlZ2llcyxcbiAgICAgIHJvbGxiYWNrUGxhbjogJ0dpdCByZXZlcnQgdG8gcHJldmlvdXMgY29tbWl0IGlmIGlzc3VlcyBkZXRlY3RlZCcsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhbHRlcm5hdGl2ZSBzdHJhdGVnaWVzXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQWx0ZXJuYXRpdmVzKGVycm9yQ2xhc3NpZmljYXRpb246IEVycm9yQ2xhc3NpZmljYXRpb24pOiBBbHRlcm5hdGl2ZVN0cmF0ZWd5W10ge1xuICAgIGNvbnN0IGFsdGVybmF0aXZlczogQWx0ZXJuYXRpdmVTdHJhdGVneVtdID0gW107XG5cbiAgICBpZiAoZXJyb3JDbGFzc2lmaWNhdGlvbi5hdXRvRml4Q2FwYWJpbGl0eS5jYW5BdXRvRml4KSB7XG4gICAgICBhbHRlcm5hdGl2ZXMucHVzaCh7XG4gICAgICAgIG5hbWU6ICdNYW51YWwgRml4JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGaXggdGhlIGlzc3VlIG1hbnVhbGx5IGluc3RlYWQgb2YgdXNpbmcgYXV0by1maXgnLFxuICAgICAgICB0cmFkZW9mZnM6IFtcbiAgICAgICAgICAnTW9yZSB0aW1lLWNvbnN1bWluZycsXG4gICAgICAgICAgJ0JldHRlciB1bmRlcnN0YW5kaW5nIG9mIHRoZSBmaXgnLFxuICAgICAgICAgICdMb3dlciByaXNrIG9mIHVuaW50ZW5kZWQgY2hhbmdlcycsXG4gICAgICAgIF0sXG4gICAgICAgIHdoZW5Ub1VzZTogJ1doZW4gYXV0by1maXggY29uZmlkZW5jZSBpcyBsb3cgb3IgZG9tYWluIGV4cGVydGlzZSBpcyByZXF1aXJlZCcsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhbHRlcm5hdGl2ZXMucHVzaCh7XG4gICAgICBuYW1lOiAnUnVsZSBTdXBwcmVzc2lvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ1N1cHByZXNzIHRoZSBydWxlIGZvciB0aGlzIHNwZWNpZmljIGNhc2UnLFxuICAgICAgdHJhZGVvZmZzOiBbJ1F1aWNrIHNvbHV0aW9uJywgJ1RlY2huaWNhbCBkZWJ0IGFjY3VtdWxhdGlvbicsICdNYXkgaGlkZSByZWFsIGlzc3VlcyddLFxuICAgICAgd2hlblRvVXNlOiAnV2hlbiB0aGUgcnVsZSBpcyBub3QgYXBwbGljYWJsZSBvciBmaXhpbmcgd291bGQgcmVxdWlyZSBzaWduaWZpY2FudCByZWZhY3RvcmluZycsXG4gICAgfSk7XG5cbiAgICBpZiAoZXJyb3JDbGFzc2lmaWNhdGlvbi5zZXZlcml0eS5sZXZlbCA9PT0gJ2xvdycpIHtcbiAgICAgIGFsdGVybmF0aXZlcy5wdXNoKHtcbiAgICAgICAgbmFtZTogJ0RlZmVyIEZpeCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHRvIHRlY2huaWNhbCBkZWJ0IGJhY2tsb2cgZm9yIGxhdGVyIHJlc29sdXRpb24nLFxuICAgICAgICB0cmFkZW9mZnM6IFtcbiAgICAgICAgICAnSW1tZWRpYXRlIHByb2dyZXNzJyxcbiAgICAgICAgICAnQWNjdW11bGF0aW5nIHRlY2huaWNhbCBkZWJ0JyxcbiAgICAgICAgICAnTWF5IGJlY29tZSBoYXJkZXIgdG8gZml4IGxhdGVyJyxcbiAgICAgICAgXSxcbiAgICAgICAgd2hlblRvVXNlOiAnV2hlbiB1bmRlciB0aW1lIHByZXNzdXJlIGFuZCBpc3N1ZSBpcyBub3QgY3JpdGljYWwnLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsdGVybmF0aXZlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpbWl6ZSByZXNvbHV0aW9uIHBsYW4gZm9yIGJhdGNoIHByb2Nlc3NpbmdcbiAgICovXG4gIHByaXZhdGUgb3B0aW1pemVSZXNvbHV0aW9uUGxhbihzdHJhdGVnaWVzOiBSZXNvbHV0aW9uU3RyYXRlZ3lbXSk6IE9wdGltaXplZFJlc29sdXRpb25QbGFuIHtcbiAgICAvLyBHcm91cCBzdHJhdGVnaWVzIGJ5IHR5cGUgYW5kIHByaW9yaXR5XG4gICAgY29uc3QgZ3JvdXBlZCA9IHRoaXMuZ3JvdXBTdHJhdGVnaWVzKHN0cmF0ZWdpZXMpO1xuXG4gICAgLy8gSWRlbnRpZnkgZGVwZW5kZW5jaWVzIGFuZCBjcmVhdGUgZXhlY3V0aW9uIG9yZGVyXG4gICAgY29uc3QgZXhlY3V0aW9uT3JkZXIgPSB0aGlzLmRldGVybWluZUV4ZWN1dGlvbk9yZGVyKHN0cmF0ZWdpZXMpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHRpbWUgYW5kIGVmZm9ydFxuICAgIGNvbnN0IHRvdGFsVGltZSA9IHN0cmF0ZWdpZXMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMuZXN0aW1hdGVkVGltZSwgMCk7XG4gICAgY29uc3QgdG90YWxTdGVwcyA9IHN0cmF0ZWdpZXMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMuc3RlcHMubGVuZ3RoLCAwKTtcblxuICAgIC8vIElkZW50aWZ5IHBhcmFsbGVsaXphYmxlIHdvcmtcbiAgICBjb25zdCBwYXJhbGxlbGl6YWJsZSA9IHN0cmF0ZWdpZXMuZmlsdGVyKFxuICAgICAgcyA9PiBzLnR5cGUgPT09ICdhdXRvbWF0ZWQnICYmIHMucmlza0Fzc2Vzc21lbnQub3ZlcmFsbCA9PT0gJ2xvdycsXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFN0cmF0ZWdpZXM6IHN0cmF0ZWdpZXMubGVuZ3RoLFxuICAgICAgdG90YWxFc3RpbWF0ZWRUaW1lOiB0b3RhbFRpbWUsXG4gICAgICB0b3RhbFN0ZXBzLFxuICAgICAgZXhlY3V0aW9uT3JkZXIsXG4gICAgICBwYXJhbGxlbGl6YWJsZVdvcms6IHBhcmFsbGVsaXphYmxlLmxlbmd0aCxcbiAgICAgIHJpc2tEaXN0cmlidXRpb246IHRoaXMuY2FsY3VsYXRlUmlza0Rpc3RyaWJ1dGlvbihzdHJhdGVnaWVzKSxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogdGhpcy5nZW5lcmF0ZVBsYW5SZWNvbW1lbmRhdGlvbnMoc3RyYXRlZ2llcywgZ3JvdXBlZCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHcm91cCBzdHJhdGVnaWVzIGJ5IGNoYXJhY3RlcmlzdGljc1xuICAgKi9cbiAgcHJpdmF0ZSBncm91cFN0cmF0ZWdpZXMoc3RyYXRlZ2llczogUmVzb2x1dGlvblN0cmF0ZWd5W10pOiBSZWNvcmQ8c3RyaW5nLCBSZXNvbHV0aW9uU3RyYXRlZ3lbXT4ge1xuICAgIGNvbnN0IGdyb3VwZWQ6IFJlY29yZDxzdHJpbmcsIFJlc29sdXRpb25TdHJhdGVneVtdPiA9IHtcbiAgICAgIGF1dG9tYXRlZDogW10sXG4gICAgICBtYW51YWw6IFtdLFxuICAgICAgY3JpdGljYWw6IFtdLFxuICAgICAgbG93UmlzazogW10sXG4gICAgICBkb21haW5TcGVjaWZpYzogW10sXG4gICAgfTtcblxuICAgIGZvciAoY29uc3Qgc3RyYXRlZ3kgb2Ygc3RyYXRlZ2llcykge1xuICAgICAgaWYgKHN0cmF0ZWd5LnR5cGUgPT09ICdhdXRvbWF0ZWQnKSBncm91cGVkLmF1dG9tYXRlZC5wdXNoKHN0cmF0ZWd5KTtcbiAgICAgIGlmIChzdHJhdGVneS50eXBlID09PSAnbWFudWFsJykgZ3JvdXBlZC5tYW51YWwucHVzaChzdHJhdGVneSk7XG4gICAgICBpZiAoc3RyYXRlZ3kucHJpb3JpdHkgPT09ICdjcml0aWNhbCcpIGdyb3VwZWQuY3JpdGljYWwucHVzaChzdHJhdGVneSk7XG4gICAgICBpZiAoc3RyYXRlZ3kucmlza0Fzc2Vzc21lbnQub3ZlcmFsbCA9PT0gJ2xvdycpIGdyb3VwZWQubG93Umlzay5wdXNoKHN0cmF0ZWd5KTtcbiAgICAgIGlmIChzdHJhdGVneS5jb21wbGV4aXR5ID09PSAnZXhwZXJ0LXJlcXVpcmVkJykgZ3JvdXBlZC5kb21haW5TcGVjaWZpYy5wdXNoKHN0cmF0ZWd5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ3JvdXBlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgb3B0aW1hbCBleGVjdXRpb24gb3JkZXJcbiAgICovXG4gIHByaXZhdGUgZGV0ZXJtaW5lRXhlY3V0aW9uT3JkZXIoc3RyYXRlZ2llczogUmVzb2x1dGlvblN0cmF0ZWd5W10pOiBzdHJpbmdbXSB7XG4gICAgLy8gU29ydCBieSBwcmlvcml0eSBmaXJzdCwgdGhlbiBieSByaXNrIGxldmVsLCB0aGVuIGJ5IGVzdGltYXRlZCB0aW1lXG4gICAgY29uc3Qgc29ydGVkID0gWy4uLnN0cmF0ZWdpZXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IHByaW9yaXR5T3JkZXIgPSB7IGNyaXRpY2FsOiAwLCBoaWdoOiAxLCBtZWRpdW06IDIsIGxvdzogMyB9O1xuICAgICAgY29uc3Qgcmlza09yZGVyID0geyBsb3c6IDAsIG1lZGl1bTogMSwgaGlnaDogMiwgY3JpdGljYWw6IDMgfTtcblxuICAgICAgaWYgKGEucHJpb3JpdHkgIT09IGIucHJpb3JpdHkpIHtcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5T3JkZXJbYS5wcmlvcml0eV0gLSBwcmlvcml0eU9yZGVyW2IucHJpb3JpdHldO1xuICAgICAgfVxuXG4gICAgICBpZiAoYS5yaXNrQXNzZXNzbWVudC5vdmVyYWxsICE9PSBiLnJpc2tBc3Nlc3NtZW50Lm92ZXJhbGwpIHtcbiAgICAgICAgcmV0dXJuIHJpc2tPcmRlclthLnJpc2tBc3Nlc3NtZW50Lm92ZXJhbGxdIC0gcmlza09yZGVyW2Iucmlza0Fzc2Vzc21lbnQub3ZlcmFsbF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhLmVzdGltYXRlZFRpbWUgLSBiLmVzdGltYXRlZFRpbWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc29ydGVkLm1hcChzID0+IHMuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSByaXNrIGRpc3RyaWJ1dGlvblxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVSaXNrRGlzdHJpYnV0aW9uKHN0cmF0ZWdpZXM6IFJlc29sdXRpb25TdHJhdGVneVtdKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgZGlzdHJpYnV0aW9uID0geyBsb3c6IDAsIG1lZGl1bTogMCwgaGlnaDogMCwgY3JpdGljYWw6IDAgfTtcblxuICAgIGZvciAoY29uc3Qgc3RyYXRlZ3kgb2Ygc3RyYXRlZ2llcykge1xuICAgICAgZGlzdHJpYnV0aW9uW3N0cmF0ZWd5LnJpc2tBc3Nlc3NtZW50Lm92ZXJhbGxdKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpc3RyaWJ1dGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwbGFuIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBsYW5SZWNvbW1lbmRhdGlvbnMoXG4gICAgc3RyYXRlZ2llczogUmVzb2x1dGlvblN0cmF0ZWd5W10sXG4gICAgZ3JvdXBlZDogUmVjb3JkPHN0cmluZywgUmVzb2x1dGlvblN0cmF0ZWd5W10+LFxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKGdyb3VwZWQuY3JpdGljYWwubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goYEFkZHJlc3MgJHtncm91cGVkLmNyaXRpY2FsLmxlbmd0aH0gY3JpdGljYWwgaXNzdWVzIGZpcnN0YCk7XG4gICAgfVxuXG4gICAgaWYgKGdyb3VwZWQuYXV0b21hdGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBgJHtncm91cGVkLmF1dG9tYXRlZC5sZW5ndGh9IGlzc3VlcyBjYW4gYmUgYXV0b21hdGVkIC0gY29uc2lkZXIgYmF0Y2ggcHJvY2Vzc2luZ2AsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChncm91cGVkLmRvbWFpblNwZWNpZmljLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBgJHtncm91cGVkLmRvbWFpblNwZWNpZmljLmxlbmd0aH0gaXNzdWVzIHJlcXVpcmUgZG9tYWluIGV4cGVydGlzZSAtIHNjaGVkdWxlIGV4cGVydCByZXZpZXdgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZ3JvdXBlZC5sb3dSaXNrLmxlbmd0aCA+IGdyb3VwZWQubG93Umlzay5sZW5ndGggKiAwLjcpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdNb3N0IGlzc3VlcyBhcmUgbG93IHJpc2sgLSBjb25zaWRlciBhZ2dyZXNzaXZlIGF1dG9tYXRpb24nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgc3RyYXRlZ3kgdGVtcGxhdGVzXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVTdHJhdGVneVRlbXBsYXRlcygpOiB2b2lkIHtcbiAgICAvLyBJbXBvcnQgb3JkZXIgc3RyYXRlZ3lcbiAgICB0aGlzLnN0cmF0ZWd5VGVtcGxhdGVzLnNldCgnaW1wb3J0L29yZGVyJywge1xuICAgICAgdHlwZTogJ2F1dG9tYXRlZCcsXG4gICAgICBwcmlvcml0eTogJ2xvdycsXG4gICAgICBjb25maWRlbmNlOiAwLjk1LFxuICAgICAgY29tcGxleGl0eTogJ3RyaXZpYWwnLFxuICAgICAgZXN0aW1hdGVkVGltZTogMSxcbiAgICAgIHN0ZXBzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2F1dG8tZml4LWltcG9ydHMnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXV0b21hdGljYWxseSByZW9yZGVyIGltcG9ydHMnLFxuICAgICAgICAgIGFjdGlvbjogJ2V4ZWN1dGUtY29tbWFuZCcsXG4gICAgICAgICAgZGV0YWlsczogeyBjb21tYW5kOiAnbnB4IGVzbGludCAtLWZpeCAtLXJ1bGUgaW1wb3J0L29yZGVyJyB9LFxuICAgICAgICAgIGF1dG9tYXRhYmxlOiB0cnVlLFxuICAgICAgICAgIGVzdGltYXRlZFRpbWU6IDEsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBbXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICAvLyBObyBleHBsaWNpdCBhbnkgc3RyYXRlZ3lcbiAgICB0aGlzLnN0cmF0ZWd5VGVtcGxhdGVzLnNldCgnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScsIHtcbiAgICAgIHR5cGU6ICdtYW51YWwnLFxuICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxuICAgICAgY29uZmlkZW5jZTogMC4zLFxuICAgICAgY29tcGxleGl0eTogJ2NvbXBsZXgnLFxuICAgICAgZXN0aW1hdGVkVGltZTogMTUsXG4gICAgICBzdGVwczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdhbmFseXplLWFueS11c2FnZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBbmFseXplIHdoeSBhbnkgdHlwZSBpcyB1c2VkJyxcbiAgICAgICAgICBhY3Rpb246ICdyZXZpZXctY29kZScsXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgcmV2aWV3Q3JpdGVyaWE6IFtcbiAgICAgICAgICAgICAgJ1VuZGVyc3RhbmQgdGhlIGRhdGEgc3RydWN0dXJlJyxcbiAgICAgICAgICAgICAgJ0lkZW50aWZ5IHByb3BlciB0eXBlIGRlZmluaXRpb24nLFxuICAgICAgICAgICAgICAnQ29uc2lkZXIgdW5pb24gdHlwZXMgb3IgZ2VuZXJpY3MnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1dG9tYXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICBlc3RpbWF0ZWRUaW1lOiAxMCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFtdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdpbXBsZW1lbnQtcHJvcGVyLXR5cGluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdSZXBsYWNlIGFueSB3aXRoIHByb3BlciB0eXBlcycsXG4gICAgICAgICAgYWN0aW9uOiAnbW9kaWZ5LWZpbGUnLFxuICAgICAgICAgIGRldGFpbHM6IHsgY2hhbmdlczogJ1JlcGxhY2UgYW55IHdpdGggc3BlY2lmaWMgdHlwZSBkZWZpbml0aW9ucycgfSxcbiAgICAgICAgICBhdXRvbWF0YWJsZTogZmFsc2UsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogNSxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYW5hbHl6ZS1hbnktdXNhZ2UnXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICAvLyBEZWZhdWx0IHN0cmF0ZWd5XG4gICAgdGhpcy5zdHJhdGVneVRlbXBsYXRlcy5zZXQoJ2RlZmF1bHQnLCB7XG4gICAgICB0eXBlOiAnbWFudWFsJyxcbiAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNSxcbiAgICAgIGNvbXBsZXhpdHk6ICdtb2RlcmF0ZScsXG4gICAgICBlc3RpbWF0ZWRUaW1lOiAxMCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGRvbWFpbi1zcGVjaWZpYyBzdHJhdGVnaWVzXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVEb21haW5TcGVjaWZpY1N0cmF0ZWdpZXMoKTogdm9pZCB7XG4gICAgLy8gQXN0cm9sb2dpY2FsIGRvbWFpbiBzdHJhdGVneVxuICAgIHRoaXMuZG9tYWluU3BlY2lmaWNTdHJhdGVnaWVzLnNldCgnYXN0cm9sb2dpY2FsJywge1xuICAgICAgcHJlcmVxdWlzaXRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2tub3dsZWRnZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdVbmRlcnN0YW5kaW5nIG9mIGFzdHJvbm9taWNhbCBjYWxjdWxhdGlvbnMnLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2FjY2VzcycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBY2Nlc3MgdG8gYXN0cm9ub21pY2FsIHZhbGlkYXRpb24gZGF0YScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdmFsaWRhdGlvblJlcXVpcmVtZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2RvbWFpbi1leHBlcnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXN0cm9sb2dpY2FsIGRvbWFpbiBleHBlcnQgcmV2aWV3JyxcbiAgICAgICAgICBhdXRvbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGNyaXRpY2FsUGF0aDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdtYW51YWwtcmV2aWV3JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkYXRlIGFnYWluc3Qga25vd24gYXN0cm9ub21pY2FsIGRhdGEnLFxuICAgICAgICAgIGF1dG9tYXRlZDogZmFsc2UsXG4gICAgICAgICAgY3JpdGljYWxQYXRoOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcblxuICAgIC8vIENhbXBhaWduIHN5c3RlbSBkb21haW4gc3RyYXRlZ3lcbiAgICB0aGlzLmRvbWFpblNwZWNpZmljU3RyYXRlZ2llcy5zZXQoJ2NhbXBhaWduJywge1xuICAgICAgcHJlcmVxdWlzaXRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2tub3dsZWRnZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdVbmRlcnN0YW5kaW5nIG9mIGNhbXBhaWduIHN5c3RlbSBhcmNoaXRlY3R1cmUnLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHZhbGlkYXRpb25SZXF1aXJlbWVudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICd0ZXN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biBjYW1wYWlnbiBzeXN0ZW0gaW50ZWdyYXRpb24gdGVzdHMnLFxuICAgICAgICAgIGF1dG9tYXRlZDogdHJ1ZSxcbiAgICAgICAgICBjcml0aWNhbFBhdGg6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW1pemVkUmVzb2x1dGlvblBsYW4ge1xuICB0b3RhbFN0cmF0ZWdpZXM6IG51bWJlcjtcbiAgdG90YWxFc3RpbWF0ZWRUaW1lOiBudW1iZXI7XG4gIHRvdGFsU3RlcHM6IG51bWJlcjtcbiAgZXhlY3V0aW9uT3JkZXI6IHN0cmluZ1tdO1xuICBwYXJhbGxlbGl6YWJsZVdvcms6IG51bWJlcjtcbiAgcmlza0Rpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==