f694cbb9314ceaf51151ec77a4d8af4f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.enhancedCuisineRecommender = exports.EnhancedCuisineRecommender = void 0;
const cuisines_1 = require("@/data/cuisines");
/**
 * Enhanced cuisine-specific recipe recommender that incorporates:
 * - Day of week (planetary day)
 * - Hour and minute (planetary hours)
 * - Astrological matching
 * - Seasonal factors
 * - Uniform recipe structure across cuisine files
 */
class EnhancedCuisineRecommender {
    constructor() { }
    static getInstance() {
        if (!EnhancedCuisineRecommender.instance) {
            EnhancedCuisineRecommender.instance = new EnhancedCuisineRecommender();
        }
        return EnhancedCuisineRecommender.instance;
    }
    /**
     * Get enhanced recipe recommendations for a specific cuisine
     *
     * @param cuisineName Name of the cuisine
     * @param astroState Current astrological state
     * @param count Number of recommendations to return
     * @param mealType Optional meal type filter (breakfast, lunch, dinner, dessert)
     * @param dietaryRestrictions Optional dietary restrictions
     * @returns Array of recipe matches with detailed match scores
     */
    getRecommendationsForCuisine(cuisineName, astroState, count = 5, mealType, dietaryRestrictions) {
        // Get current time factors
        const timeFactors = this.getCurrentTimeFactors();
        // Get cuisine data
        const cuisine = this.getCuisine(cuisineName);
        if (!cuisine) {
            return [];
        }
        // Get all recipes from the specified cuisine
        const allRecipes = this.getAllRecipesFromCuisine(cuisine, timeFactors.currentSeason);
        // Filter by meal type if specified
        const filteredRecipes = mealType
            ? allRecipes.filter((recipe) => { var _a; return (_a = recipe.mealType) === null || _a === void 0 ? void 0 : _a.includes(mealType); })
            : allRecipes;
        // Filter by dietary restrictions if specified
        const dietaryFilteredRecipes = (dietaryRestrictions === null || dietaryRestrictions === void 0 ? void 0 : dietaryRestrictions.length)
            ? filteredRecipes.filter((recipe) => {
                const recipeDietary = recipe.dietaryInfo || [];
                return dietaryRestrictions.every((restriction) => recipeDietary.includes(restriction) ||
                    !this.conflictsWithRestriction(recipe, restriction));
            })
            : filteredRecipes;
        // Calculate match scores for each recipe
        const matches = dietaryFilteredRecipes.map((recipe) => {
            var _a;
            const seasonalScore = this.calculateSeasonalScore(recipe, timeFactors);
            const planetaryDayScore = this.calculatePlanetaryDayScore(recipe, timeFactors, astroState);
            const planetaryHourScore = this.calculatePlanetaryHourScore(recipe, timeFactors, astroState);
            const elementalScore = this.calculateElementalScore(recipe, astroState);
            const astrologicalScore = this.calculateAstrologicalScore(recipe, astroState);
            const timeOfDayScore = this.calculateTimeOfDayScore(recipe, timeFactors);
            // Overall match percentage - weighted combination of all scores
            const matchPercentage = this.calculateOverallMatch(seasonalScore, planetaryDayScore, planetaryHourScore, elementalScore, astrologicalScore, timeOfDayScore);
            return {
                cuisine: cuisineName,
                recipeName: recipe.name || 'Unknown Recipe',
                recipeId: recipe.id || ((_a = recipe.name) === null || _a === void 0 ? void 0 : _a.toLowerCase().replace(/\s+/g, '-')) || 'unknown',
                matchPercentage,
                seasonalScore,
                planetaryDayScore,
                planetaryHourScore,
                elementalScore,
                astrologicalScore,
                timeOfDayScore,
                tags: recipe.tags || [],
                description: recipe.description || '',
                ingredients: recipe.ingredients || [],
                season: recipe.season || [],
                mealType: recipe.mealType || []
            };
        });
        // Sort by match percentage and return top count
        return matches
            .sort((a, b) => b.matchPercentage - a.matchPercentage)
            .slice(0, count);
    }
    /**
     * Get current planetary day, hour, season and time of day
     */
    getCurrentTimeFactors() {
        const now = new Date();
        const dayOfWeek = now.getDay(); // 0 = Sunday, 1 = Monday, etc.
        const hours = now.getHours();
        const minutes = now.getMinutes();
        // Map day of week to planetary day
        const planetaryDays = [
            'Sun',
            'Moon',
            'Mars',
            'Mercury',
            'Jupiter',
            'Venus',
            'Saturn',
        ];
        const planetaryDay = planetaryDays[dayOfWeek];
        // Calculate planetary hour (simplified implementation)
        // In traditional planetary hours, daylight is divided into 12 equal parts, as is night
        // For simplicity, we'll use a 24-hour approximation
        const hourIndex = (dayOfWeek * 24 + hours) % 7;
        const planetaryHour = planetaryDays[hourIndex];
        // Determine time of day
        let timeOfDay;
        if (hours >= 5 && hours < 12) {
            timeOfDay = 'morning';
        }
        else if (hours >= 12 && hours < 17) {
            timeOfDay = 'afternoon';
        }
        else if (hours >= 17 && hours < 22) {
            timeOfDay = 'evening';
        }
        else {
            timeOfDay = 'night';
        }
        // Determine current season based on month in Northern Hemisphere
        // (This could be improved to account for Southern Hemisphere)
        const month = now.getMonth(); // 0 = January, 11 = December
        let currentSeason;
        if (month >= 2 && month <= 4) {
            currentSeason = 'spring';
        }
        else if (month >= 5 && month <= 7) {
            currentSeason = 'summer';
        }
        else if (month >= 8 && month <= 10) {
            currentSeason = 'autumn';
        }
        else {
            currentSeason = 'winter';
        }
        return {
            planetaryDay,
            planetaryHour,
            timeOfDay,
            currentSeason,
            currentDate: now
        };
    }
    /**
     * Get cuisine data by name
     */
    getCuisine(cuisineName) {
        const cuisineKey = Object.keys(cuisines_1.cuisinesMap).find((key) => key.toLowerCase() === cuisineName.toLowerCase());
        return cuisineKey
            ? cuisines_1.cuisinesMap[cuisineKey]
            : null;
    }
    /**
     * Extract all recipes from a cuisine, combining seasonal and non-seasonal recipes
     */
    getAllRecipesFromCuisine(cuisine, currentSeason) {
        const allRecipes = [];
        const mealTypes = ['breakfast', 'lunch', 'dinner', 'dessert'];
        mealTypes.forEach((mealType) => {
            // Add current season recipes
            if (cuisine.dishes[mealType][currentSeason]) {
                allRecipes.push(...cuisine.dishes[mealType][currentSeason]);
            }
            // Add "all" season recipes if they exist
            if (cuisine.dishes[mealType].all) {
                allRecipes.push(...cuisine.dishes[mealType].all);
            }
        });
        return allRecipes;
    }
    /**
     * Calculate seasonal match score (0-1)
     */
    calculateSeasonalScore(recipe, timeFactors) {
        // If recipe has no seasonal information, give it a neutral score
        if (!recipe.season || recipe.season.length === 0) {
            return 0.5;
        }
        // If recipe is good for all seasons, give it a good but not perfect score
        if (recipe.season.includes('all')) {
            return 0.8;
        }
        // If recipe is specifically for the current season, perfect score
        if (recipe.season.includes(timeFactors.currentSeason)) {
            return 1.0;
        }
        // Otherwise, lower score - recipe is out of season
        return 0.3;
    }
    /**
     * Calculate match based on planetary day (0-1)
     * The planetary day influences the entire day with both its diurnal and nocturnal elements
     */
    calculatePlanetaryDayScore(recipe, timeFactors, astroState) {
        var _a;
        const { planetaryDay, currentDate } = timeFactors;
        const isDaytime = this.isDaytime(currentDate);
        // If recipe has no elemental properties, give it a neutral score
        if (!recipe.elementalProperties) {
            return 0.5;
        }
        // Map planets to their elemental influences (diurnal and nocturnal elements)
        const planetaryElements = {
            Sun: { diurnal: 'Fire', nocturnal: 'Fire' },
            Moon: { diurnal: 'Water', nocturnal: 'Water' },
            Mercury: { diurnal: 'Air', nocturnal: 'Earth' },
            Venus: { diurnal: 'Water', nocturnal: 'Earth' },
            Mars: { diurnal: 'Fire', nocturnal: 'Water' },
            Jupiter: { diurnal: 'Air', nocturnal: 'Fire' },
            Saturn: { diurnal: 'Air', nocturnal: 'Earth' },
            Uranus: { diurnal: 'Water', nocturnal: 'Air' },
            Neptune: { diurnal: 'Water', nocturnal: 'Water' },
            Pluto: { diurnal: 'Earth', nocturnal: 'Water' }
        };
        // Get the elements associated with the current planetary day
        const dayElements = planetaryElements[planetaryDay];
        if (!dayElements)
            return 0.5; // Unknown planet
        // For planetary day, BOTH diurnal and nocturnal elements influence all day
        // regardless of whether it's day or night
        const diurnalElement = dayElements.diurnal;
        const nocturnalElement = dayElements.nocturnal;
        // Calculate how much of each planetary element is present in the recipe
        const recipeElementals = recipe.elementalProperties;
        const diurnalMatch = recipeElementals[diurnalElement] || 0;
        const nocturnalMatch = recipeElementals[nocturnalElement] || 0;
        // Calculate a weighted score - both elements are equally important for planetary day
        let elementalScore = (diurnalMatch + nocturnalMatch) / 2;
        // If the recipe has a direct planetary affinity, give bonus points
        if (((_a = recipe.astrologicalAffinities) === null || _a === void 0 ? void 0 : _a.planets) &&
            recipe.astrologicalAffinities.planets.some((p) => p.toLowerCase() === planetaryDay.toLowerCase())) {
            elementalScore = Math.min(1.0, elementalScore + 0.3);
        }
        return elementalScore;
    }
    /**
     * Calculate match based on planetary hour (0-1)
     * The planetary hour influences with its diurnal element during day, and nocturnal element at night
     */
    calculatePlanetaryHourScore(recipe, timeFactors, astroState) {
        var _a;
        const { planetaryHour, currentDate } = timeFactors;
        const isDaytime = this.isDaytime(currentDate);
        // If recipe has no elemental properties, give it a neutral score
        if (!recipe.elementalProperties) {
            return 0.5;
        }
        // Map planets to their elemental influences (diurnal and nocturnal elements)
        const planetaryElements = {
            Sun: { diurnal: 'Fire', nocturnal: 'Fire' },
            Moon: { diurnal: 'Water', nocturnal: 'Water' },
            Mercury: { diurnal: 'Air', nocturnal: 'Earth' },
            Venus: { diurnal: 'Water', nocturnal: 'Earth' },
            Mars: { diurnal: 'Fire', nocturnal: 'Water' },
            Jupiter: { diurnal: 'Air', nocturnal: 'Fire' },
            Saturn: { diurnal: 'Air', nocturnal: 'Earth' },
            Uranus: { diurnal: 'Water', nocturnal: 'Air' },
            Neptune: { diurnal: 'Water', nocturnal: 'Water' },
            Pluto: { diurnal: 'Earth', nocturnal: 'Water' }
        };
        // Get the elements associated with the current planetary hour
        const hourElements = planetaryElements[planetaryHour];
        if (!hourElements)
            return 0.5; // Unknown planet
        // For planetary hour, use diurnal element during the day and nocturnal element at night
        const relevantElement = isDaytime
            ? hourElements.diurnal
            : hourElements.nocturnal;
        // Calculate how much of the relevant planetary element is present in the recipe
        const recipeElementals = recipe.elementalProperties;
        const elementalMatch = recipeElementals[relevantElement] || 0;
        // Calculate a score based on how well the recipe matches the planetary hour's element
        let elementalScore = elementalMatch;
        // If the recipe has a direct planetary affinity, give bonus points
        if (((_a = recipe.astrologicalAffinities) === null || _a === void 0 ? void 0 : _a.planets) &&
            recipe.astrologicalAffinities.planets.some((p) => p.toLowerCase() === planetaryHour.toLowerCase())) {
            elementalScore = Math.min(1.0, elementalScore + 0.3);
        }
        return elementalScore;
    }
    /**
     * Calculate elemental match score (0-1)
     */
    calculateElementalScore(recipe, astroState) {
        // If recipe has no elemental properties, give it a neutral score
        if (!recipe.elementalProperties) {
            return 0.5;
        }
        // Get dominant element from astro state
        const dominantElement = this.getDominantElementFromAstro(astroState);
        // Calculate score based on how much of the dominant element is in the recipe
        const elementValue = recipe.elementalProperties[dominantElement] || 0;
        // Scale value (typical values range from 0 to 1)
        return Math.min(1.0, elementValue * 1.5); // Scale up slightly to reward recipes with strong elemental alignment
    }
    /**
     * Calculate astrological match score based on signs and lunar phases (0-1)
     */
    calculateAstrologicalScore(recipe, astroState) {
        let score = 0.5; // Start with neutral score
        // Check zodiac influences
        if (recipe.zodiacInfluences &&
            recipe.zodiacInfluences.length > 0 &&
            astroState.sunSign) {
            const matchingSigns = recipe.zodiacInfluences.filter((sign) => { var _a; return sign.toLowerCase() === ((_a = astroState.sunSign) === null || _a === void 0 ? void 0 : _a.toLowerCase()); });
            if (matchingSigns.length > 0) {
                score += 0.3; // Significant boost for sun sign match
            }
        }
        // Check lunar phase influences
        if (recipe.lunarPhaseInfluences &&
            recipe.lunarPhaseInfluences.length > 0 &&
            astroState.lunarPhase) {
            const matchingPhases = recipe.lunarPhaseInfluences.filter((phase) => { var _a; return phase.toLowerCase() === ((_a = astroState.lunarPhase) === null || _a === void 0 ? void 0 : _a.toLowerCase()); });
            if (matchingPhases.length > 0) {
                score += 0.2; // Moderate boost for lunar phase match
            }
        }
        return Math.min(1.0, score); // Cap at 1.0
    }
    /**
     * Calculate match based on time of day (0-1)
     */
    calculateTimeOfDayScore(recipe, timeFactors) {
        const { timeOfDay } = timeFactors;
        // Map meal types to appropriate times of day
        const mealTypeToTimeMap = {
            breakfast: ['morning'],
            brunch: ['morning', 'afternoon'],
            lunch: ['afternoon'],
            dinner: ['evening'],
            dessert: ['afternoon', 'evening'],
            snack: ['morning', 'afternoon', 'evening']
        };
        // If recipe has no meal type, give it a neutral score
        if (!recipe.mealType || recipe.mealType.length === 0) {
            return 0.5;
        }
        // Check if any of the recipe's meal types are appropriate for the current time of day
        for (const mealType of recipe.mealType) {
            const appropriateTimes = mealTypeToTimeMap[mealType.toLowerCase()];
            if (appropriateTimes && appropriateTimes.includes(timeOfDay)) {
                return 1.0; // Perfect match for time of day
            }
        }
        // If we get here, there's no direct match for time of day
        return 0.4; // Lower score for inappropriate time
    }
    /**
     * Calculate overall match percentage (0-100)
     */
    calculateOverallMatch(seasonalScore, planetaryDayScore, planetaryHourScore, elementalScore, astrologicalScore, timeOfDayScore) {
        // Weight the different factors - increased planetary influence
        const weights = {
            seasonal: 0.15,
            planetaryDay: 0.3,
            planetaryHour: 0.2,
            elemental: 0.15,
            astrological: 0.1,
            timeOfDay: 0.1, // Reduced from 0.15
        };
        // Calculate weighted score with stronger emphasis on planetary factors
        const weightedScore = seasonalScore * weights.seasonal +
            planetaryDayScore * weights.planetaryDay +
            planetaryHourScore * weights.planetaryHour +
            elementalScore * weights.elemental +
            astrologicalScore * weights.astrological +
            timeOfDayScore * weights.timeOfDay;
        // Convert to percentage
        return Math.round(weightedScore * 100);
    }
    /**
     * Extract dominant element from astrological state
     */
    getDominantElementFromAstro(astroState) {
        // If astroState has already calculated dominant element, use that
        if (astroState.dominantElement) {
            return astroState.dominantElement;
        }
        // Otherwise, calculate based on Sun sign
        const elementMap = {
            aries: 'Fire',
            taurus: 'Earth',
            gemini: 'Air',
            cancer: 'Water',
            leo: 'Fire',
            virgo: 'Earth',
            libra: 'Air',
            scorpio: 'Water',
            sagittarius: 'Fire',
            capricorn: 'Earth',
            aquarius: 'Air',
            pisces: 'Water'
        };
        return astroState.sunSign
            ? elementMap[astroState.sunSign] || 'Fire'
            : 'Fire';
    }
    /**
     * Check if a recipe conflicts with a dietary restriction
     */
    conflictsWithRestriction(recipe, restriction) {
        // Check allergens if restriction is an allergy
        if (recipe.allergens && recipe.allergens.length > 0) {
            // Common restriction mappings
            const restrictionMap = {
                vegetarian: ['beef', 'pork', 'chicken', 'fish', 'meat'],
                vegan: [
                    'beef',
                    'pork',
                    'chicken',
                    'fish',
                    'meat',
                    'dairy',
                    'eggs',
                    'honey',
                ],
                'gluten-free': ['gluten', 'wheat'],
                'dairy-free': ['dairy', 'milk', 'cream', 'cheese'],
                'nut-free': ['nuts', 'peanuts', 'almonds', 'walnuts']
            };
            const restrictedItems = restrictionMap[restriction.toLowerCase()];
            if (restrictedItems) {
                return recipe.allergens.some((allergen) => restrictedItems.includes(allergen.toLowerCase()));
            }
        }
        // Default to no conflict if we can't determine
        return false;
    }
    /**
     * Determine if the current time is during daylight hours
     */
    isDaytime(date) {
        const hour = date.getHours();
        return hour >= 6 && hour < 18;
    }
}
exports.EnhancedCuisineRecommender = EnhancedCuisineRecommender;
// Export singleton instance
exports.enhancedCuisineRecommender = EnhancedCuisineRecommender.getInstance();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jYWxjdWxhdGlvbnMvZW5oYW5jZWRDdWlzaW5lUmVjb21tZW5kZXIudHMiLCJtYXBwaW5ncyI6Ijs7O0FBS0EsOENBQThDO0FBc0U5Qzs7Ozs7OztHQU9HO0FBQ0gsTUFBYSwwQkFBMEI7SUFHckMsZ0JBQXVCLENBQUM7SUFFakIsTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLDBCQUEwQixDQUFDLFFBQVEsRUFBRTtZQUN4QywwQkFBMEIsQ0FBQyxRQUFRLEdBQUcsSUFBSSwwQkFBMEIsRUFBRSxDQUFDO1NBQ3hFO1FBQ0QsT0FBTywwQkFBMEIsQ0FBQyxRQUFRLENBQUM7SUFDN0MsQ0FBQztJQUVEOzs7Ozs7Ozs7T0FTRztJQUNJLDRCQUE0QixDQUNqQyxXQUFtQixFQUNuQixVQUE2QixFQUM3QixRQUFnQixDQUFDLEVBQ2pCLFFBQWlCLEVBQ2pCLG1CQUE4QjtRQUU5QiwyQkFBMkI7UUFDM0IsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFFakQsbUJBQW1CO1FBQ25CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNaLE9BQU8sRUFBRSxDQUFDO1NBQ1g7UUFFRCw2Q0FBNkM7UUFDN0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLHdCQUF3QixDQUM5QyxPQUFPLEVBQ1AsV0FBVyxDQUFDLGFBQWEsQ0FDMUIsQ0FBQztRQUVGLG1DQUFtQztRQUNuQyxNQUFNLGVBQWUsR0FBRyxRQUFRO1lBQzlCLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsV0FBQyxPQUFBLE1BQUEsTUFBTSxDQUFDLFFBQVEsMENBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFBLEVBQUEsQ0FBQztZQUNwRSxDQUFDLENBQUMsVUFBVSxDQUFDO1FBRWYs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IjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL2NhbGN1bGF0aW9ucy9lbmhhbmNlZEN1aXNpbmVSZWNvbW1lbmRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEN1aXNpbmUgfSBmcm9tICdAL3R5cGVzL2N1aXNpbmUnO1xuaW1wb3J0IHR5cGUge1xuICBBc3Ryb2xvZ2ljYWxTdGF0ZSxcbiAgRWxlbWVudGFsUHJvcGVydGllcyxcbiAgWm9kaWFjU2lnbn0gZnJvbSAnQC90eXBlcy9hbGNoZW15JztcbmltcG9ydCB7IGN1aXNpbmVzTWFwIH0gZnJvbSAnQC9kYXRhL2N1aXNpbmVzJztcblxuLy8gUmVjaXBlIGludGVyZmFjZSBmb3IgaW50ZXJuYWwgdXNlIGluIGVuaGFuY2VkIHJlY29tbWVuZGVyXG5pbnRlcmZhY2UgUmVjaXBlRGF0YSB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlkPzogc3RyaW5nO1xuICB0YWdzPzogc3RyaW5nW107XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBpbmdyZWRpZW50cz86IGFueVtdO1xuICBzZWFzb24/OiBzdHJpbmdbXTtcbiAgbWVhbFR5cGU/OiBzdHJpbmdbXTtcbiAgZGlldGFyeUluZm8/OiBzdHJpbmdbXTtcbiAgcGxhbmV0YXJ5Pzogc3RyaW5nW107XG4gIHpvZGlhYz86IHN0cmluZ1tdO1xuICBsdW5hcj86IHN0cmluZ1tdO1xuICBmbGF2b3JQcm9maWxlPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgdGltZVRvTWFrZT86IG51bWJlcjtcbiAgc3BpY2VMZXZlbD86IG51bWJlciB8IHN0cmluZztcbiAgcHJlcGFyYXRpb25TdGVwcz86IHN0cmluZ1tdO1xuICBpbnN0cnVjdGlvbnM/OiBzdHJpbmdbXTtcbiAgLy8gQWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRoYXQgYXJlIGFjY2Vzc2VkIGluIHRoZSBjb2RlXG4gIGVsZW1lbnRhbFByb3BlcnRpZXM/OiBFbGVtZW50YWxQcm9wZXJ0aWVzIHwgUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgYXN0cm9sb2dpY2FsQWZmaW5pdGllcz86IHtcbiAgICBwbGFuZXRzPzogc3RyaW5nW107XG4gICAgem9kaWFjPzogc3RyaW5nW107XG4gICAgbHVuYXI/OiBzdHJpbmdbXTtcbiAgfTtcbiAgem9kaWFjSW5mbHVlbmNlcz86IHN0cmluZ1tdO1xuICBsdW5hclBoYXNlSW5mbHVlbmNlcz86IHN0cmluZ1tdO1xuICBhbGxlcmdlbnM/OiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIEVuaGFuY2VkUmVjaXBlTWF0Y2gge1xuICBjdWlzaW5lOiBzdHJpbmc7XG4gIHJlY2lwZU5hbWU6IHN0cmluZztcbiAgcmVjaXBlSWQ6IHN0cmluZztcbiAgbWF0Y2hQZXJjZW50YWdlOiBudW1iZXI7XG4gIHNlYXNvbmFsU2NvcmU6IG51bWJlcjtcbiAgcGxhbmV0YXJ5RGF5U2NvcmU6IG51bWJlcjtcbiAgcGxhbmV0YXJ5SG91clNjb3JlOiBudW1iZXI7XG4gIGVsZW1lbnRhbFNjb3JlOiBudW1iZXI7XG4gIGFzdHJvbG9naWNhbFNjb3JlOiBudW1iZXI7XG4gIHRpbWVPZkRheVNjb3JlOiBudW1iZXI7XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpbmdyZWRpZW50czogdW5rbm93bltdO1xuICBzZWFzb246IHN0cmluZ1tdO1xuICBtZWFsVHlwZTogc3RyaW5nW107XG59XG5cbmludGVyZmFjZSBUaW1lRmFjdG9ycyB7XG4gIHBsYW5ldGFyeURheTogUGxhbmV0YXJ5RGF5O1xuICBwbGFuZXRhcnlIb3VyOiBQbGFuZXRhcnlIb3VyO1xuICB0aW1lT2ZEYXk6IFRpbWVPZkRheTtcbiAgY3VycmVudFNlYXNvbjogU2Vhc29uO1xuICBjdXJyZW50RGF0ZTogRGF0ZTtcbn1cblxudHlwZSBQbGFuZXRhcnlEYXkgPVxuICB8ICdTdW4nXG4gIHwgJ01vb24nXG4gIHwgJ01hcnMnXG4gIHwgJ01lcmN1cnknXG4gIHwgJ0p1cGl0ZXInXG4gIHwgJ1ZlbnVzJ1xuICB8ICdTYXR1cm4nO1xudHlwZSBQbGFuZXRhcnlIb3VyID0gUGxhbmV0YXJ5RGF5O1xudHlwZSBUaW1lT2ZEYXkgPSAnbW9ybmluZycgfCAnYWZ0ZXJub29uJyB8ICdldmVuaW5nJyB8ICduaWdodCc7XG50eXBlIFNlYXNvbiA9ICdzcHJpbmcnIHwgJ3N1bW1lcicgfCAnYXV0dW1uJyB8ICd3aW50ZXInO1xuXG4vKipcbiAqIEVuaGFuY2VkIGN1aXNpbmUtc3BlY2lmaWMgcmVjaXBlIHJlY29tbWVuZGVyIHRoYXQgaW5jb3Jwb3JhdGVzOlxuICogLSBEYXkgb2Ygd2VlayAocGxhbmV0YXJ5IGRheSlcbiAqIC0gSG91ciBhbmQgbWludXRlIChwbGFuZXRhcnkgaG91cnMpXG4gKiAtIEFzdHJvbG9naWNhbCBtYXRjaGluZ1xuICogLSBTZWFzb25hbCBmYWN0b3JzXG4gKiAtIFVuaWZvcm0gcmVjaXBlIHN0cnVjdHVyZSBhY3Jvc3MgY3Vpc2luZSBmaWxlc1xuICovXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDdWlzaW5lUmVjb21tZW5kZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRW5oYW5jZWRDdWlzaW5lUmVjb21tZW5kZXI7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFbmhhbmNlZEN1aXNpbmVSZWNvbW1lbmRlciB7XG4gICAgaWYgKCFFbmhhbmNlZEN1aXNpbmVSZWNvbW1lbmRlci5pbnN0YW5jZSkge1xuICAgICAgRW5oYW5jZWRDdWlzaW5lUmVjb21tZW5kZXIuaW5zdGFuY2UgPSBuZXcgRW5oYW5jZWRDdWlzaW5lUmVjb21tZW5kZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIEVuaGFuY2VkQ3Vpc2luZVJlY29tbWVuZGVyLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbmhhbmNlZCByZWNpcGUgcmVjb21tZW5kYXRpb25zIGZvciBhIHNwZWNpZmljIGN1aXNpbmVcbiAgICpcbiAgICogQHBhcmFtIGN1aXNpbmVOYW1lIE5hbWUgb2YgdGhlIGN1aXNpbmVcbiAgICogQHBhcmFtIGFzdHJvU3RhdGUgQ3VycmVudCBhc3Ryb2xvZ2ljYWwgc3RhdGVcbiAgICogQHBhcmFtIGNvdW50IE51bWJlciBvZiByZWNvbW1lbmRhdGlvbnMgdG8gcmV0dXJuXG4gICAqIEBwYXJhbSBtZWFsVHlwZSBPcHRpb25hbCBtZWFsIHR5cGUgZmlsdGVyIChicmVha2Zhc3QsIGx1bmNoLCBkaW5uZXIsIGRlc3NlcnQpXG4gICAqIEBwYXJhbSBkaWV0YXJ5UmVzdHJpY3Rpb25zIE9wdGlvbmFsIGRpZXRhcnkgcmVzdHJpY3Rpb25zXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIHJlY2lwZSBtYXRjaGVzIHdpdGggZGV0YWlsZWQgbWF0Y2ggc2NvcmVzXG4gICAqL1xuICBwdWJsaWMgZ2V0UmVjb21tZW5kYXRpb25zRm9yQ3Vpc2luZShcbiAgICBjdWlzaW5lTmFtZTogc3RyaW5nLFxuICAgIGFzdHJvU3RhdGU6IEFzdHJvbG9naWNhbFN0YXRlLFxuICAgIGNvdW50OiBudW1iZXIgPSA1LFxuICAgIG1lYWxUeXBlPzogc3RyaW5nLFxuICAgIGRpZXRhcnlSZXN0cmljdGlvbnM/OiBzdHJpbmdbXVxuICApOiBFbmhhbmNlZFJlY2lwZU1hdGNoW10ge1xuICAgIC8vIEdldCBjdXJyZW50IHRpbWUgZmFjdG9yc1xuICAgIGNvbnN0IHRpbWVGYWN0b3JzID0gdGhpcy5nZXRDdXJyZW50VGltZUZhY3RvcnMoKTtcblxuICAgIC8vIEdldCBjdWlzaW5lIGRhdGFcbiAgICBjb25zdCBjdWlzaW5lID0gdGhpcy5nZXRDdWlzaW5lKGN1aXNpbmVOYW1lKTtcbiAgICBpZiAoIWN1aXNpbmUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyBHZXQgYWxsIHJlY2lwZXMgZnJvbSB0aGUgc3BlY2lmaWVkIGN1aXNpbmVcbiAgICBjb25zdCBhbGxSZWNpcGVzID0gdGhpcy5nZXRBbGxSZWNpcGVzRnJvbUN1aXNpbmUoXG4gICAgICBjdWlzaW5lLFxuICAgICAgdGltZUZhY3RvcnMuY3VycmVudFNlYXNvblxuICAgICk7XG5cbiAgICAvLyBGaWx0ZXIgYnkgbWVhbCB0eXBlIGlmIHNwZWNpZmllZFxuICAgIGNvbnN0IGZpbHRlcmVkUmVjaXBlcyA9IG1lYWxUeXBlXG4gICAgICA/IGFsbFJlY2lwZXMuZmlsdGVyKChyZWNpcGUpID0+IHJlY2lwZS5tZWFsVHlwZT8uaW5jbHVkZXMobWVhbFR5cGUpKVxuICAgICAgOiBhbGxSZWNpcGVzO1xuXG4gICAgLy8gRmlsdGVyIGJ5IGRpZXRhcnkgcmVzdHJpY3Rpb25zIGlmIHNwZWNpZmllZFxuICAgIGNvbnN0IGRpZXRhcnlGaWx0ZXJlZFJlY2lwZXMgPSBkaWV0YXJ5UmVzdHJpY3Rpb25zPy5sZW5ndGhcbiAgICAgID8gZmlsdGVyZWRSZWNpcGVzLmZpbHRlcigocmVjaXBlKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVjaXBlRGlldGFyeSA9IHJlY2lwZS5kaWV0YXJ5SW5mbyB8fCBbXTtcbiAgICAgICAgICByZXR1cm4gZGlldGFyeVJlc3RyaWN0aW9ucy5ldmVyeShcbiAgICAgICAgICAgIChyZXN0cmljdGlvbikgPT5cbiAgICAgICAgICAgICAgcmVjaXBlRGlldGFyeS5pbmNsdWRlcyhyZXN0cmljdGlvbikgfHxcbiAgICAgICAgICAgICAgIXRoaXMuY29uZmxpY3RzV2l0aFJlc3RyaWN0aW9uKHJlY2lwZSwgcmVzdHJpY3Rpb24pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgIDogZmlsdGVyZWRSZWNpcGVzO1xuXG4gICAgLy8gQ2FsY3VsYXRlIG1hdGNoIHNjb3JlcyBmb3IgZWFjaCByZWNpcGVcbiAgICBjb25zdCBtYXRjaGVzID0gZGlldGFyeUZpbHRlcmVkUmVjaXBlcy5tYXAoKHJlY2lwZSkgPT4ge1xuICAgICAgY29uc3Qgc2Vhc29uYWxTY29yZSA9IHRoaXMuY2FsY3VsYXRlU2Vhc29uYWxTY29yZShyZWNpcGUsIHRpbWVGYWN0b3JzKTtcbiAgICAgIGNvbnN0IHBsYW5ldGFyeURheVNjb3JlID0gdGhpcy5jYWxjdWxhdGVQbGFuZXRhcnlEYXlTY29yZShcbiAgICAgICAgcmVjaXBlLFxuICAgICAgICB0aW1lRmFjdG9ycyxcbiAgICAgICAgYXN0cm9TdGF0ZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBsYW5ldGFyeUhvdXJTY29yZSA9IHRoaXMuY2FsY3VsYXRlUGxhbmV0YXJ5SG91clNjb3JlKFxuICAgICAgICByZWNpcGUsXG4gICAgICAgIHRpbWVGYWN0b3JzLFxuICAgICAgICBhc3Ryb1N0YXRlXG4gICAgICApO1xuICAgICAgY29uc3QgZWxlbWVudGFsU2NvcmUgPSB0aGlzLmNhbGN1bGF0ZUVsZW1lbnRhbFNjb3JlKHJlY2lwZSwgYXN0cm9TdGF0ZSk7XG4gICAgICBjb25zdCBhc3Ryb2xvZ2ljYWxTY29yZSA9IHRoaXMuY2FsY3VsYXRlQXN0cm9sb2dpY2FsU2NvcmUoXG4gICAgICAgIHJlY2lwZSxcbiAgICAgICAgYXN0cm9TdGF0ZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRpbWVPZkRheVNjb3JlID0gdGhpcy5jYWxjdWxhdGVUaW1lT2ZEYXlTY29yZShyZWNpcGUsIHRpbWVGYWN0b3JzKTtcblxuICAgICAgLy8gT3ZlcmFsbCBtYXRjaCBwZXJjZW50YWdlIC0gd2VpZ2h0ZWQgY29tYmluYXRpb24gb2YgYWxsIHNjb3Jlc1xuICAgICAgY29uc3QgbWF0Y2hQZXJjZW50YWdlID0gdGhpcy5jYWxjdWxhdGVPdmVyYWxsTWF0Y2goXG4gICAgICAgIHNlYXNvbmFsU2NvcmUsXG4gICAgICAgIHBsYW5ldGFyeURheVNjb3JlLFxuICAgICAgICBwbGFuZXRhcnlIb3VyU2NvcmUsXG4gICAgICAgIGVsZW1lbnRhbFNjb3JlLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxTY29yZSxcbiAgICAgICAgdGltZU9mRGF5U2NvcmVcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1aXNpbmU6IGN1aXNpbmVOYW1lLFxuICAgICAgICByZWNpcGVOYW1lOiByZWNpcGUubmFtZSB8fCAnVW5rbm93biBSZWNpcGUnLFxuICAgICAgICByZWNpcGVJZDogcmVjaXBlLmlkIHx8IHJlY2lwZS5uYW1lPy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKSB8fCAndW5rbm93bicsXG4gICAgICAgIG1hdGNoUGVyY2VudGFnZSxcbiAgICAgICAgc2Vhc29uYWxTY29yZSxcbiAgICAgICAgcGxhbmV0YXJ5RGF5U2NvcmUsXG4gICAgICAgIHBsYW5ldGFyeUhvdXJTY29yZSxcbiAgICAgICAgZWxlbWVudGFsU2NvcmUsXG4gICAgICAgIGFzdHJvbG9naWNhbFNjb3JlLFxuICAgICAgICB0aW1lT2ZEYXlTY29yZSxcbiAgICAgICAgdGFnczogcmVjaXBlLnRhZ3MgfHwgW10sXG4gICAgICAgIGRlc2NyaXB0aW9uOiByZWNpcGUuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIGluZ3JlZGllbnRzOiByZWNpcGUuaW5ncmVkaWVudHMgfHwgW10sXG4gICAgICAgIHNlYXNvbjogcmVjaXBlLnNlYXNvbiB8fCBbXSxcbiAgICAgICAgbWVhbFR5cGU6IHJlY2lwZS5tZWFsVHlwZSB8fCBbXX07XG4gICAgfSk7XG5cbiAgICAvLyBTb3J0IGJ5IG1hdGNoIHBlcmNlbnRhZ2UgYW5kIHJldHVybiB0b3AgY291bnRcbiAgICByZXR1cm4gbWF0Y2hlc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGIubWF0Y2hQZXJjZW50YWdlIC0gYS5tYXRjaFBlcmNlbnRhZ2UpXG4gICAgICAuc2xpY2UoMCwgY291bnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHBsYW5ldGFyeSBkYXksIGhvdXIsIHNlYXNvbiBhbmQgdGltZSBvZiBkYXlcbiAgICovXG4gIHByaXZhdGUgZ2V0Q3VycmVudFRpbWVGYWN0b3JzKCk6IFRpbWVGYWN0b3JzIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRheU9mV2VlayA9IG5vdy5nZXREYXkoKTsgLy8gMCA9IFN1bmRheSwgMSA9IE1vbmRheSwgZXRjLlxuICAgIGNvbnN0IGhvdXJzID0gbm93LmdldEhvdXJzKCk7XG4gICAgY29uc3QgbWludXRlcyA9IG5vdy5nZXRNaW51dGVzKCk7XG5cbiAgICAvLyBNYXAgZGF5IG9mIHdlZWsgdG8gcGxhbmV0YXJ5IGRheVxuICAgIGNvbnN0IHBsYW5ldGFyeURheXM6IFBsYW5ldGFyeURheVtdID0gW1xuICAgICAgJ1N1bicsXG4gICAgICAnTW9vbicsXG4gICAgICAnTWFycycsXG4gICAgICAnTWVyY3VyeScsXG4gICAgICAnSnVwaXRlcicsXG4gICAgICAnVmVudXMnLFxuICAgICAgJ1NhdHVybicsXG4gICAgXTtcbiAgICBjb25zdCBwbGFuZXRhcnlEYXkgPSBwbGFuZXRhcnlEYXlzW2RheU9mV2Vla107XG5cbiAgICAvLyBDYWxjdWxhdGUgcGxhbmV0YXJ5IGhvdXIgKHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24pXG4gICAgLy8gSW4gdHJhZGl0aW9uYWwgcGxhbmV0YXJ5IGhvdXJzLCBkYXlsaWdodCBpcyBkaXZpZGVkIGludG8gMTIgZXF1YWwgcGFydHMsIGFzIGlzIG5pZ2h0XG4gICAgLy8gRm9yIHNpbXBsaWNpdHksIHdlJ2xsIHVzZSBhIDI0LWhvdXIgYXBwcm94aW1hdGlvblxuICAgIGNvbnN0IGhvdXJJbmRleCA9IChkYXlPZldlZWsgKiAyNCArIGhvdXJzKSAlIDc7XG4gICAgY29uc3QgcGxhbmV0YXJ5SG91ciA9IHBsYW5ldGFyeURheXNbaG91ckluZGV4XTtcblxuICAgIC8vIERldGVybWluZSB0aW1lIG9mIGRheVxuICAgIGxldCB0aW1lT2ZEYXk6IFRpbWVPZkRheTtcbiAgICBpZiAoaG91cnMgPj0gNSAmJiBob3VycyA8IDEyKSB7XG4gICAgICB0aW1lT2ZEYXkgPSAnbW9ybmluZyc7XG4gICAgfSBlbHNlIGlmIChob3VycyA+PSAxMiAmJiBob3VycyA8IDE3KSB7XG4gICAgICB0aW1lT2ZEYXkgPSAnYWZ0ZXJub29uJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDE3ICYmIGhvdXJzIDwgMjIpIHtcbiAgICAgIHRpbWVPZkRheSA9ICdldmVuaW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZU9mRGF5ID0gJ25pZ2h0JztcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgY3VycmVudCBzZWFzb24gYmFzZWQgb24gbW9udGggaW4gTm9ydGhlcm4gSGVtaXNwaGVyZVxuICAgIC8vIChUaGlzIGNvdWxkIGJlIGltcHJvdmVkIHRvIGFjY291bnQgZm9yIFNvdXRoZXJuIEhlbWlzcGhlcmUpXG4gICAgY29uc3QgbW9udGggPSBub3cuZ2V0TW9udGgoKTsgLy8gMCA9IEphbnVhcnksIDExID0gRGVjZW1iZXJcbiAgICBsZXQgY3VycmVudFNlYXNvbjogU2Vhc29uO1xuICAgIGlmIChtb250aCA+PSAyICYmIG1vbnRoIDw9IDQpIHtcbiAgICAgIGN1cnJlbnRTZWFzb24gPSAnc3ByaW5nJztcbiAgICB9IGVsc2UgaWYgKG1vbnRoID49IDUgJiYgbW9udGggPD0gNykge1xuICAgICAgY3VycmVudFNlYXNvbiA9ICdzdW1tZXInO1xuICAgIH0gZWxzZSBpZiAobW9udGggPj0gOCAmJiBtb250aCA8PSAxMCkge1xuICAgICAgY3VycmVudFNlYXNvbiA9ICdhdXR1bW4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50U2Vhc29uID0gJ3dpbnRlcic7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBsYW5ldGFyeURheSxcbiAgICAgIHBsYW5ldGFyeUhvdXIsXG4gICAgICB0aW1lT2ZEYXksXG4gICAgICBjdXJyZW50U2Vhc29uLFxuICAgICAgY3VycmVudERhdGU6IG5vd307XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1aXNpbmUgZGF0YSBieSBuYW1lXG4gICAqL1xuICBwcml2YXRlIGdldEN1aXNpbmUoY3Vpc2luZU5hbWU6IHN0cmluZyk6IEN1aXNpbmUgfCBudWxsIHtcbiAgICBjb25zdCBjdWlzaW5lS2V5ID0gT2JqZWN0LmtleXMoY3Vpc2luZXNNYXApLmZpbmQoXG4gICAgICAoa2V5KSA9PiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gY3Vpc2luZU5hbWUudG9Mb3dlckNhc2UoKVxuICAgICk7XG5cbiAgICByZXR1cm4gY3Vpc2luZUtleVxuICAgICAgPyBjdWlzaW5lc01hcFtjdWlzaW5lS2V5IGFzIGtleW9mIHR5cGVvZiBjdWlzaW5lc01hcF1cbiAgICAgIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGFsbCByZWNpcGVzIGZyb20gYSBjdWlzaW5lLCBjb21iaW5pbmcgc2Vhc29uYWwgYW5kIG5vbi1zZWFzb25hbCByZWNpcGVzXG4gICAqL1xuICBwcml2YXRlIGdldEFsbFJlY2lwZXNGcm9tQ3Vpc2luZShcbiAgICBjdWlzaW5lOiBDdWlzaW5lLFxuICAgIGN1cnJlbnRTZWFzb246IFNlYXNvblxuICApOiBSZWNpcGVEYXRhW10ge1xuICAgIGNvbnN0IGFsbFJlY2lwZXM6IFJlY2lwZURhdGFbXSA9IFtdO1xuXG4gICAgY29uc3QgbWVhbFR5cGVzID0gWydicmVha2Zhc3QnLCAnbHVuY2gnLCAnZGlubmVyJywgJ2Rlc3NlcnQnXTtcblxuICAgIG1lYWxUeXBlcy5mb3JFYWNoKChtZWFsVHlwZSkgPT4ge1xuICAgICAgLy8gQWRkIGN1cnJlbnQgc2Vhc29uIHJlY2lwZXNcbiAgICAgIGlmIChcbiAgICAgICAgY3Vpc2luZS5kaXNoZXNbbWVhbFR5cGUgYXMga2V5b2YgdHlwZW9mIGN1aXNpbmUuZGlzaGVzXVtjdXJyZW50U2Vhc29uXVxuICAgICAgKSB7XG4gICAgICAgIGFsbFJlY2lwZXMucHVzaChcbiAgICAgICAgICAuLi5jdWlzaW5lLmRpc2hlc1ttZWFsVHlwZSBhcyBrZXlvZiB0eXBlb2YgY3Vpc2luZS5kaXNoZXNdW1xuICAgICAgICAgICAgY3VycmVudFNlYXNvblxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIFwiYWxsXCIgc2Vhc29uIHJlY2lwZXMgaWYgdGhleSBleGlzdFxuICAgICAgaWYgKGN1aXNpbmUuZGlzaGVzW21lYWxUeXBlIGFzIGtleW9mIHR5cGVvZiBjdWlzaW5lLmRpc2hlc10uYWxsKSB7XG4gICAgICAgIGFsbFJlY2lwZXMucHVzaChcbiAgICAgICAgICAuLi5jdWlzaW5lLmRpc2hlc1ttZWFsVHlwZSBhcyBrZXlvZiB0eXBlb2YgY3Vpc2luZS5kaXNoZXNdLmFsbFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFsbFJlY2lwZXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHNlYXNvbmFsIG1hdGNoIHNjb3JlICgwLTEpXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVNlYXNvbmFsU2NvcmUoXG4gICAgcmVjaXBlOiBSZWNpcGVEYXRhLFxuICAgIHRpbWVGYWN0b3JzOiBUaW1lRmFjdG9yc1xuICApOiBudW1iZXIge1xuICAgIC8vIElmIHJlY2lwZSBoYXMgbm8gc2Vhc29uYWwgaW5mb3JtYXRpb24sIGdpdmUgaXQgYSBuZXV0cmFsIHNjb3JlXG4gICAgaWYgKCFyZWNpcGUuc2Vhc29uIHx8IHJlY2lwZS5zZWFzb24ubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gMC41O1xuICAgIH1cblxuICAgIC8vIElmIHJlY2lwZSBpcyBnb29kIGZvciBhbGwgc2Vhc29ucywgZ2l2ZSBpdCBhIGdvb2QgYnV0IG5vdCBwZXJmZWN0IHNjb3JlXG4gICAgaWYgKHJlY2lwZS5zZWFzb24uaW5jbHVkZXMoJ2FsbCcpKSB7XG4gICAgICByZXR1cm4gMC44O1xuICAgIH1cblxuICAgIC8vIElmIHJlY2lwZSBpcyBzcGVjaWZpY2FsbHkgZm9yIHRoZSBjdXJyZW50IHNlYXNvbiwgcGVyZmVjdCBzY29yZVxuICAgIGlmIChyZWNpcGUuc2Vhc29uLmluY2x1ZGVzKHRpbWVGYWN0b3JzLmN1cnJlbnRTZWFzb24pKSB7XG4gICAgICByZXR1cm4gMS4wO1xuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSwgbG93ZXIgc2NvcmUgLSByZWNpcGUgaXMgb3V0IG9mIHNlYXNvblxuICAgIHJldHVybiAwLjM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG1hdGNoIGJhc2VkIG9uIHBsYW5ldGFyeSBkYXkgKDAtMSlcbiAgICogVGhlIHBsYW5ldGFyeSBkYXkgaW5mbHVlbmNlcyB0aGUgZW50aXJlIGRheSB3aXRoIGJvdGggaXRzIGRpdXJuYWwgYW5kIG5vY3R1cm5hbCBlbGVtZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVQbGFuZXRhcnlEYXlTY29yZShcbiAgICByZWNpcGU6IFJlY2lwZURhdGEsXG4gICAgdGltZUZhY3RvcnM6IFRpbWVGYWN0b3JzLFxuICAgIGFzdHJvU3RhdGU6IEFzdHJvbG9naWNhbFN0YXRlXG4gICk6IG51bWJlciB7XG4gICAgY29uc3QgeyBwbGFuZXRhcnlEYXksIGN1cnJlbnREYXRlIH0gPSB0aW1lRmFjdG9ycztcbiAgICBjb25zdCBpc0RheXRpbWUgPSB0aGlzLmlzRGF5dGltZShjdXJyZW50RGF0ZSk7XG5cbiAgICAvLyBJZiByZWNpcGUgaGFzIG5vIGVsZW1lbnRhbCBwcm9wZXJ0aWVzLCBnaXZlIGl0IGEgbmV1dHJhbCBzY29yZVxuICAgIGlmICghcmVjaXBlLmVsZW1lbnRhbFByb3BlcnRpZXMpIHtcbiAgICAgIHJldHVybiAwLjU7XG4gICAgfVxuXG4gICAgLy8gTWFwIHBsYW5ldHMgdG8gdGhlaXIgZWxlbWVudGFsIGluZmx1ZW5jZXMgKGRpdXJuYWwgYW5kIG5vY3R1cm5hbCBlbGVtZW50cylcbiAgICBjb25zdCBwbGFuZXRhcnlFbGVtZW50czogUmVjb3JkPFxuICAgICAgc3RyaW5nLFxuICAgICAgeyBkaXVybmFsOiBzdHJpbmc7IG5vY3R1cm5hbDogc3RyaW5nIH1cbiAgICA+ID0ge1xuICAgICAgU3VuOiB7IGRpdXJuYWw6ICdGaXJlJywgbm9jdHVybmFsOiAnRmlyZScgfSxcbiAgICAgIE1vb246IHsgZGl1cm5hbDogJ1dhdGVyJywgbm9jdHVybmFsOiAnV2F0ZXInIH0sXG4gICAgICBNZXJjdXJ5OiB7IGRpdXJuYWw6ICdBaXInLCBub2N0dXJuYWw6ICdFYXJ0aCcgfSxcbiAgICAgIFZlbnVzOiB7IGRpdXJuYWw6ICdXYXRlcicsIG5vY3R1cm5hbDogJ0VhcnRoJyB9LFxuICAgICAgTWFyczogeyBkaXVybmFsOiAnRmlyZScsIG5vY3R1cm5hbDogJ1dhdGVyJyB9LFxuICAgICAgSnVwaXRlcjogeyBkaXVybmFsOiAnQWlyJywgbm9jdHVybmFsOiAnRmlyZScgfSxcbiAgICAgIFNhdHVybjogeyBkaXVybmFsOiAnQWlyJywgbm9jdHVybmFsOiAnRWFydGgnIH0sXG4gICAgICBVcmFudXM6IHsgZGl1cm5hbDogJ1dhdGVyJywgbm9jdHVybmFsOiAnQWlyJyB9LFxuICAgICAgTmVwdHVuZTogeyBkaXVybmFsOiAnV2F0ZXInLCBub2N0dXJuYWw6ICdXYXRlcicgfSxcbiAgICAgIFBsdXRvOiB7IGRpdXJuYWw6ICdFYXJ0aCcsIG5vY3R1cm5hbDogJ1dhdGVyJyB9fTtcblxuICAgIC8vIEdldCB0aGUgZWxlbWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IHBsYW5ldGFyeSBkYXlcbiAgICBjb25zdCBkYXlFbGVtZW50cyA9IHBsYW5ldGFyeUVsZW1lbnRzW3BsYW5ldGFyeURheV07XG4gICAgaWYgKCFkYXlFbGVtZW50cykgcmV0dXJuIDAuNTsgLy8gVW5rbm93biBwbGFuZXRcblxuICAgIC8vIEZvciBwbGFuZXRhcnkgZGF5LCBCT1RIIGRpdXJuYWwgYW5kIG5vY3R1cm5hbCBlbGVtZW50cyBpbmZsdWVuY2UgYWxsIGRheVxuICAgIC8vIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBpdCdzIGRheSBvciBuaWdodFxuICAgIGNvbnN0IGRpdXJuYWxFbGVtZW50ID0gZGF5RWxlbWVudHMuZGl1cm5hbDtcbiAgICBjb25zdCBub2N0dXJuYWxFbGVtZW50ID0gZGF5RWxlbWVudHMubm9jdHVybmFsO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIG9mIGVhY2ggcGxhbmV0YXJ5IGVsZW1lbnQgaXMgcHJlc2VudCBpbiB0aGUgcmVjaXBlXG4gICAgY29uc3QgcmVjaXBlRWxlbWVudGFscyA9IHJlY2lwZS5lbGVtZW50YWxQcm9wZXJ0aWVzIGFzIFJlY29yZDxcbiAgICAgIHN0cmluZyxcbiAgICAgIG51bWJlclxuICAgID47XG4gICAgY29uc3QgZGl1cm5hbE1hdGNoID0gcmVjaXBlRWxlbWVudGFsc1tkaXVybmFsRWxlbWVudF0gfHwgMDtcbiAgICBjb25zdCBub2N0dXJuYWxNYXRjaCA9IHJlY2lwZUVsZW1lbnRhbHNbbm9jdHVybmFsRWxlbWVudF0gfHwgMDtcblxuICAgIC8vIENhbGN1bGF0ZSBhIHdlaWdodGVkIHNjb3JlIC0gYm90aCBlbGVtZW50cyBhcmUgZXF1YWxseSBpbXBvcnRhbnQgZm9yIHBsYW5ldGFyeSBkYXlcbiAgICBsZXQgZWxlbWVudGFsU2NvcmUgPSAoZGl1cm5hbE1hdGNoICsgbm9jdHVybmFsTWF0Y2gpIC8gMjtcblxuICAgIC8vIElmIHRoZSByZWNpcGUgaGFzIGEgZGlyZWN0IHBsYW5ldGFyeSBhZmZpbml0eSwgZ2l2ZSBib251cyBwb2ludHNcbiAgICBpZiAoXG4gICAgICByZWNpcGUuYXN0cm9sb2dpY2FsQWZmaW5pdGllcz8ucGxhbmV0cyAmJlxuICAgICAgcmVjaXBlLmFzdHJvbG9naWNhbEFmZmluaXRpZXMucGxhbmV0cy5zb21lKFxuICAgICAgICAocDogc3RyaW5nKSA9PiBwLnRvTG93ZXJDYXNlKCkgPT09IHBsYW5ldGFyeURheS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgKSB7XG4gICAgICBlbGVtZW50YWxTY29yZSA9IE1hdGgubWluKDEuMCwgZWxlbWVudGFsU2NvcmUgKyAwLjMpO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50YWxTY29yZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgbWF0Y2ggYmFzZWQgb24gcGxhbmV0YXJ5IGhvdXIgKDAtMSlcbiAgICogVGhlIHBsYW5ldGFyeSBob3VyIGluZmx1ZW5jZXMgd2l0aCBpdHMgZGl1cm5hbCBlbGVtZW50IGR1cmluZyBkYXksIGFuZCBub2N0dXJuYWwgZWxlbWVudCBhdCBuaWdodFxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVQbGFuZXRhcnlIb3VyU2NvcmUoXG4gICAgcmVjaXBlOiBSZWNpcGVEYXRhLFxuICAgIHRpbWVGYWN0b3JzOiBUaW1lRmFjdG9ycyxcbiAgICBhc3Ryb1N0YXRlOiBBc3Ryb2xvZ2ljYWxTdGF0ZVxuICApOiBudW1iZXIge1xuICAgIGNvbnN0IHsgcGxhbmV0YXJ5SG91ciwgY3VycmVudERhdGUgfSA9IHRpbWVGYWN0b3JzO1xuICAgIGNvbnN0IGlzRGF5dGltZSA9IHRoaXMuaXNEYXl0aW1lKGN1cnJlbnREYXRlKTtcblxuICAgIC8vIElmIHJlY2lwZSBoYXMgbm8gZWxlbWVudGFsIHByb3BlcnRpZXMsIGdpdmUgaXQgYSBuZXV0cmFsIHNjb3JlXG4gICAgaWYgKCFyZWNpcGUuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgICAgcmV0dXJuIDAuNTtcbiAgICB9XG5cbiAgICAvLyBNYXAgcGxhbmV0cyB0byB0aGVpciBlbGVtZW50YWwgaW5mbHVlbmNlcyAoZGl1cm5hbCBhbmQgbm9jdHVybmFsIGVsZW1lbnRzKVxuICAgIGNvbnN0IHBsYW5ldGFyeUVsZW1lbnRzOiBSZWNvcmQ8XG4gICAgICBzdHJpbmcsXG4gICAgICB7IGRpdXJuYWw6IHN0cmluZzsgbm9jdHVybmFsOiBzdHJpbmcgfVxuICAgID4gPSB7XG4gICAgICBTdW46IHsgZGl1cm5hbDogJ0ZpcmUnLCBub2N0dXJuYWw6ICdGaXJlJyB9LFxuICAgICAgTW9vbjogeyBkaXVybmFsOiAnV2F0ZXInLCBub2N0dXJuYWw6ICdXYXRlcicgfSxcbiAgICAgIE1lcmN1cnk6IHsgZGl1cm5hbDogJ0FpcicsIG5vY3R1cm5hbDogJ0VhcnRoJyB9LFxuICAgICAgVmVudXM6IHsgZGl1cm5hbDogJ1dhdGVyJywgbm9jdHVybmFsOiAnRWFydGgnIH0sXG4gICAgICBNYXJzOiB7IGRpdXJuYWw6ICdGaXJlJywgbm9jdHVybmFsOiAnV2F0ZXInIH0sXG4gICAgICBKdXBpdGVyOiB7IGRpdXJuYWw6ICdBaXInLCBub2N0dXJuYWw6ICdGaXJlJyB9LFxuICAgICAgU2F0dXJuOiB7IGRpdXJuYWw6ICdBaXInLCBub2N0dXJuYWw6ICdFYXJ0aCcgfSxcbiAgICAgIFVyYW51czogeyBkaXVybmFsOiAnV2F0ZXInLCBub2N0dXJuYWw6ICdBaXInIH0sXG4gICAgICBOZXB0dW5lOiB7IGRpdXJuYWw6ICdXYXRlcicsIG5vY3R1cm5hbDogJ1dhdGVyJyB9LFxuICAgICAgUGx1dG86IHsgZGl1cm5hbDogJ0VhcnRoJywgbm9jdHVybmFsOiAnV2F0ZXInIH19O1xuXG4gICAgLy8gR2V0IHRoZSBlbGVtZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgcGxhbmV0YXJ5IGhvdXJcbiAgICBjb25zdCBob3VyRWxlbWVudHMgPSBwbGFuZXRhcnlFbGVtZW50c1twbGFuZXRhcnlIb3VyXTtcbiAgICBpZiAoIWhvdXJFbGVtZW50cykgcmV0dXJuIDAuNTsgLy8gVW5rbm93biBwbGFuZXRcblxuICAgIC8vIEZvciBwbGFuZXRhcnkgaG91ciwgdXNlIGRpdXJuYWwgZWxlbWVudCBkdXJpbmcgdGhlIGRheSBhbmQgbm9jdHVybmFsIGVsZW1lbnQgYXQgbmlnaHRcbiAgICBjb25zdCByZWxldmFudEVsZW1lbnQgPSBpc0RheXRpbWVcbiAgICAgID8gaG91ckVsZW1lbnRzLmRpdXJuYWxcbiAgICAgIDogaG91ckVsZW1lbnRzLm5vY3R1cm5hbDtcblxuICAgIC8vIENhbGN1bGF0ZSBob3cgbXVjaCBvZiB0aGUgcmVsZXZhbnQgcGxhbmV0YXJ5IGVsZW1lbnQgaXMgcHJlc2VudCBpbiB0aGUgcmVjaXBlXG4gICAgY29uc3QgcmVjaXBlRWxlbWVudGFscyA9IHJlY2lwZS5lbGVtZW50YWxQcm9wZXJ0aWVzIGFzIFJlY29yZDxcbiAgICAgIHN0cmluZyxcbiAgICAgIG51bWJlclxuICAgID47XG4gICAgY29uc3QgZWxlbWVudGFsTWF0Y2ggPSByZWNpcGVFbGVtZW50YWxzW3JlbGV2YW50RWxlbWVudF0gfHwgMDtcblxuICAgIC8vIENhbGN1bGF0ZSBhIHNjb3JlIGJhc2VkIG9uIGhvdyB3ZWxsIHRoZSByZWNpcGUgbWF0Y2hlcyB0aGUgcGxhbmV0YXJ5IGhvdXIncyBlbGVtZW50XG4gICAgbGV0IGVsZW1lbnRhbFNjb3JlID0gZWxlbWVudGFsTWF0Y2g7XG5cbiAgICAvLyBJZiB0aGUgcmVjaXBlIGhhcyBhIGRpcmVjdCBwbGFuZXRhcnkgYWZmaW5pdHksIGdpdmUgYm9udXMgcG9pbnRzXG4gICAgaWYgKFxuICAgICAgcmVjaXBlLmFzdHJvbG9naWNhbEFmZmluaXRpZXM/LnBsYW5ldHMgJiZcbiAgICAgIHJlY2lwZS5hc3Ryb2xvZ2ljYWxBZmZpbml0aWVzLnBsYW5ldHMuc29tZShcbiAgICAgICAgKHA6IHN0cmluZykgPT4gcC50b0xvd2VyQ2FzZSgpID09PSBwbGFuZXRhcnlIb3VyLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGVsZW1lbnRhbFNjb3JlID0gTWF0aC5taW4oMS4wLCBlbGVtZW50YWxTY29yZSArIDAuMyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnRhbFNjb3JlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBlbGVtZW50YWwgbWF0Y2ggc2NvcmUgKDAtMSlcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlRWxlbWVudGFsU2NvcmUoXG4gICAgcmVjaXBlOiBSZWNpcGVEYXRhLFxuICAgIGFzdHJvU3RhdGU6IEFzdHJvbG9naWNhbFN0YXRlXG4gICk6IG51bWJlciB7XG4gICAgLy8gSWYgcmVjaXBlIGhhcyBubyBlbGVtZW50YWwgcHJvcGVydGllcywgZ2l2ZSBpdCBhIG5ldXRyYWwgc2NvcmVcbiAgICBpZiAoIXJlY2lwZS5lbGVtZW50YWxQcm9wZXJ0aWVzKSB7XG4gICAgICByZXR1cm4gMC41O1xuICAgIH1cblxuICAgIC8vIEdldCBkb21pbmFudCBlbGVtZW50IGZyb20gYXN0cm8gc3RhdGVcbiAgICBjb25zdCBkb21pbmFudEVsZW1lbnQgPSB0aGlzLmdldERvbWluYW50RWxlbWVudEZyb21Bc3Rybyhhc3Ryb1N0YXRlKTtcblxuICAgIC8vIENhbGN1bGF0ZSBzY29yZSBiYXNlZCBvbiBob3cgbXVjaCBvZiB0aGUgZG9taW5hbnQgZWxlbWVudCBpcyBpbiB0aGUgcmVjaXBlXG4gICAgY29uc3QgZWxlbWVudFZhbHVlID0gcmVjaXBlLmVsZW1lbnRhbFByb3BlcnRpZXNbZG9taW5hbnRFbGVtZW50XSB8fCAwO1xuXG4gICAgLy8gU2NhbGUgdmFsdWUgKHR5cGljYWwgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxKVxuICAgIHJldHVybiBNYXRoLm1pbigxLjAsIGVsZW1lbnRWYWx1ZSAqIDEuNSk7IC8vIFNjYWxlIHVwIHNsaWdodGx5IHRvIHJld2FyZCByZWNpcGVzIHdpdGggc3Ryb25nIGVsZW1lbnRhbCBhbGlnbm1lbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgYXN0cm9sb2dpY2FsIG1hdGNoIHNjb3JlIGJhc2VkIG9uIHNpZ25zIGFuZCBsdW5hciBwaGFzZXMgKDAtMSlcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlQXN0cm9sb2dpY2FsU2NvcmUoXG4gICAgcmVjaXBlOiBSZWNpcGVEYXRhLFxuICAgIGFzdHJvU3RhdGU6IEFzdHJvbG9naWNhbFN0YXRlXG4gICk6IG51bWJlciB7XG4gICAgbGV0IHNjb3JlID0gMC41OyAvLyBTdGFydCB3aXRoIG5ldXRyYWwgc2NvcmVcblxuICAgIC8vIENoZWNrIHpvZGlhYyBpbmZsdWVuY2VzXG4gICAgaWYgKFxuICAgICAgcmVjaXBlLnpvZGlhY0luZmx1ZW5jZXMgJiZcbiAgICAgIHJlY2lwZS56b2RpYWNJbmZsdWVuY2VzLmxlbmd0aCA+IDAgJiZcbiAgICAgIGFzdHJvU3RhdGUuc3VuU2lnblxuICAgICkge1xuICAgICAgY29uc3QgbWF0Y2hpbmdTaWducyA9IHJlY2lwZS56b2RpYWNJbmZsdWVuY2VzLmZpbHRlcihcbiAgICAgICAgKHNpZ246IHN0cmluZykgPT5cbiAgICAgICAgICBzaWduLnRvTG93ZXJDYXNlKCkgPT09IGFzdHJvU3RhdGUuc3VuU2lnbj8udG9Mb3dlckNhc2UoKVxuICAgICAgKTtcblxuICAgICAgaWYgKG1hdGNoaW5nU2lnbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBzY29yZSArPSAwLjM7IC8vIFNpZ25pZmljYW50IGJvb3N0IGZvciBzdW4gc2lnbiBtYXRjaFxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGx1bmFyIHBoYXNlIGluZmx1ZW5jZXNcbiAgICBpZiAoXG4gICAgICByZWNpcGUubHVuYXJQaGFzZUluZmx1ZW5jZXMgJiZcbiAgICAgIHJlY2lwZS5sdW5hclBoYXNlSW5mbHVlbmNlcy5sZW5ndGggPiAwICYmXG4gICAgICBhc3Ryb1N0YXRlLmx1bmFyUGhhc2VcbiAgICApIHtcbiAgICAgIGNvbnN0IG1hdGNoaW5nUGhhc2VzID0gcmVjaXBlLmx1bmFyUGhhc2VJbmZsdWVuY2VzLmZpbHRlcihcbiAgICAgICAgKHBoYXNlOiBzdHJpbmcpID0+XG4gICAgICAgICAgcGhhc2UudG9Mb3dlckNhc2UoKSA9PT0gYXN0cm9TdGF0ZS5sdW5hclBoYXNlPy50b0xvd2VyQ2FzZSgpXG4gICAgICApO1xuXG4gICAgICBpZiAobWF0Y2hpbmdQaGFzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBzY29yZSArPSAwLjI7IC8vIE1vZGVyYXRlIGJvb3N0IGZvciBsdW5hciBwaGFzZSBtYXRjaFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBNYXRoLm1pbigxLjAsIHNjb3JlKTsgLy8gQ2FwIGF0IDEuMFxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBtYXRjaCBiYXNlZCBvbiB0aW1lIG9mIGRheSAoMC0xKVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUaW1lT2ZEYXlTY29yZShcbiAgICByZWNpcGU6IFJlY2lwZURhdGEsXG4gICAgdGltZUZhY3RvcnM6IFRpbWVGYWN0b3JzXG4gICk6IG51bWJlciB7XG4gICAgY29uc3QgeyB0aW1lT2ZEYXkgfSA9IHRpbWVGYWN0b3JzO1xuXG4gICAgLy8gTWFwIG1lYWwgdHlwZXMgdG8gYXBwcm9wcmlhdGUgdGltZXMgb2YgZGF5XG4gICAgY29uc3QgbWVhbFR5cGVUb1RpbWVNYXA6IFJlY29yZDxzdHJpbmcsIFRpbWVPZkRheVtdPiA9IHtcbiAgICAgIGJyZWFrZmFzdDogWydtb3JuaW5nJ10sXG4gICAgICBicnVuY2g6IFsnbW9ybmluZycsICdhZnRlcm5vb24nXSxcbiAgICAgIGx1bmNoOiBbJ2FmdGVybm9vbiddLFxuICAgICAgZGlubmVyOiBbJ2V2ZW5pbmcnXSxcbiAgICAgIGRlc3NlcnQ6IFsnYWZ0ZXJub29uJywgJ2V2ZW5pbmcnXSxcbiAgICAgIHNuYWNrOiBbJ21vcm5pbmcnLCAnYWZ0ZXJub29uJywgJ2V2ZW5pbmcnXX07XG5cbiAgICAvLyBJZiByZWNpcGUgaGFzIG5vIG1lYWwgdHlwZSwgZ2l2ZSBpdCBhIG5ldXRyYWwgc2NvcmVcbiAgICBpZiAoIXJlY2lwZS5tZWFsVHlwZSB8fCByZWNpcGUubWVhbFR5cGUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gMC41O1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGFueSBvZiB0aGUgcmVjaXBlJ3MgbWVhbCB0eXBlcyBhcmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBjdXJyZW50IHRpbWUgb2YgZGF5XG4gICAgZm9yIChjb25zdCBtZWFsVHlwZSBvZiByZWNpcGUubWVhbFR5cGUpIHtcbiAgICAgIGNvbnN0IGFwcHJvcHJpYXRlVGltZXMgPSBtZWFsVHlwZVRvVGltZU1hcFttZWFsVHlwZS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIGlmIChhcHByb3ByaWF0ZVRpbWVzICYmIGFwcHJvcHJpYXRlVGltZXMuaW5jbHVkZXModGltZU9mRGF5KSkge1xuICAgICAgICByZXR1cm4gMS4wOyAvLyBQZXJmZWN0IG1hdGNoIGZvciB0aW1lIG9mIGRheVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlIGdldCBoZXJlLCB0aGVyZSdzIG5vIGRpcmVjdCBtYXRjaCBmb3IgdGltZSBvZiBkYXlcbiAgICByZXR1cm4gMC40OyAvLyBMb3dlciBzY29yZSBmb3IgaW5hcHByb3ByaWF0ZSB0aW1lXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG92ZXJhbGwgbWF0Y2ggcGVyY2VudGFnZSAoMC0xMDApXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZU92ZXJhbGxNYXRjaChcbiAgICBzZWFzb25hbFNjb3JlOiBudW1iZXIsXG4gICAgcGxhbmV0YXJ5RGF5U2NvcmU6IG51bWJlcixcbiAgICBwbGFuZXRhcnlIb3VyU2NvcmU6IG51bWJlcixcbiAgICBlbGVtZW50YWxTY29yZTogbnVtYmVyLFxuICAgIGFzdHJvbG9naWNhbFNjb3JlOiBudW1iZXIsXG4gICAgdGltZU9mRGF5U2NvcmU6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIC8vIFdlaWdodCB0aGUgZGlmZmVyZW50IGZhY3RvcnMgLSBpbmNyZWFzZWQgcGxhbmV0YXJ5IGluZmx1ZW5jZVxuICAgIGNvbnN0IHdlaWdodHMgPSB7XG4gICAgICBzZWFzb25hbDogMC4xNSwgLy8gUmVkdWNlZCBmcm9tIDAuMjVcbiAgICAgIHBsYW5ldGFyeURheTogMC4zLCAvLyBEb3VibGVkIGZyb20gMC4xNVxuICAgICAgcGxhbmV0YXJ5SG91cjogMC4yLCAvLyBEb3VibGVkIGZyb20gMC4xMFxuICAgICAgZWxlbWVudGFsOiAwLjE1LCAvLyBSZWR1Y2VkIGZyb20gMC4yMFxuICAgICAgYXN0cm9sb2dpY2FsOiAwLjEsIC8vIFJlZHVjZWQgZnJvbSAwLjE1XG4gICAgICB0aW1lT2ZEYXk6IDAuMSwgLy8gUmVkdWNlZCBmcm9tIDAuMTVcbiAgICB9O1xuXG4gICAgLy8gQ2FsY3VsYXRlIHdlaWdodGVkIHNjb3JlIHdpdGggc3Ryb25nZXIgZW1waGFzaXMgb24gcGxhbmV0YXJ5IGZhY3RvcnNcbiAgICBjb25zdCB3ZWlnaHRlZFNjb3JlID1cbiAgICAgIHNlYXNvbmFsU2NvcmUgKiB3ZWlnaHRzLnNlYXNvbmFsICtcbiAgICAgIHBsYW5ldGFyeURheVNjb3JlICogd2VpZ2h0cy5wbGFuZXRhcnlEYXkgK1xuICAgICAgcGxhbmV0YXJ5SG91clNjb3JlICogd2VpZ2h0cy5wbGFuZXRhcnlIb3VyICtcbiAgICAgIGVsZW1lbnRhbFNjb3JlICogd2VpZ2h0cy5lbGVtZW50YWwgK1xuICAgICAgYXN0cm9sb2dpY2FsU2NvcmUgKiB3ZWlnaHRzLmFzdHJvbG9naWNhbCArXG4gICAgICB0aW1lT2ZEYXlTY29yZSAqIHdlaWdodHMudGltZU9mRGF5O1xuXG4gICAgLy8gQ29udmVydCB0byBwZXJjZW50YWdlXG4gICAgcmV0dXJuIE1hdGgucm91bmQod2VpZ2h0ZWRTY29yZSAqIDEwMCk7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBkb21pbmFudCBlbGVtZW50IGZyb20gYXN0cm9sb2dpY2FsIHN0YXRlXG4gICAqL1xuICBwcml2YXRlIGdldERvbWluYW50RWxlbWVudEZyb21Bc3Rybyhhc3Ryb1N0YXRlOiBBc3Ryb2xvZ2ljYWxTdGF0ZSk6IHN0cmluZyB7XG4gICAgLy8gSWYgYXN0cm9TdGF0ZSBoYXMgYWxyZWFkeSBjYWxjdWxhdGVkIGRvbWluYW50IGVsZW1lbnQsIHVzZSB0aGF0XG4gICAgaWYgKGFzdHJvU3RhdGUuZG9taW5hbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gYXN0cm9TdGF0ZS5kb21pbmFudEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlLCBjYWxjdWxhdGUgYmFzZWQgb24gU3VuIHNpZ25cbiAgICBjb25zdCBlbGVtZW50TWFwOiBSZWNvcmQ8Wm9kaWFjU2lnbiwgc3RyaW5nPiA9IHtcbiAgICAgIGFyaWVzOiAnRmlyZScsXG4gICAgICB0YXVydXM6ICdFYXJ0aCcsXG4gICAgICBnZW1pbmk6ICdBaXInLFxuICAgICAgY2FuY2VyOiAnV2F0ZXInLFxuICAgICAgbGVvOiAnRmlyZScsXG4gICAgICB2aXJnbzogJ0VhcnRoJyxcbiAgICAgIGxpYnJhOiAnQWlyJyxcbiAgICAgIHNjb3JwaW86ICdXYXRlcicsXG4gICAgICBzYWdpdHRhcml1czogJ0ZpcmUnLFxuICAgICAgY2Fwcmljb3JuOiAnRWFydGgnLFxuICAgICAgYXF1YXJpdXM6ICdBaXInLFxuICAgICAgcGlzY2VzOiAnV2F0ZXInfTtcblxuICAgIHJldHVybiBhc3Ryb1N0YXRlLnN1blNpZ25cbiAgICAgID8gZWxlbWVudE1hcFthc3Ryb1N0YXRlLnN1blNpZ24gYXMgWm9kaWFjU2lnbl0gfHwgJ0ZpcmUnXG4gICAgICA6ICdGaXJlJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHJlY2lwZSBjb25mbGljdHMgd2l0aCBhIGRpZXRhcnkgcmVzdHJpY3Rpb25cbiAgICovXG4gIHByaXZhdGUgY29uZmxpY3RzV2l0aFJlc3RyaWN0aW9uKFxuICAgIHJlY2lwZTogUmVjaXBlRGF0YSxcbiAgICByZXN0cmljdGlvbjogc3RyaW5nXG4gICk6IGJvb2xlYW4ge1xuICAgIC8vIENoZWNrIGFsbGVyZ2VucyBpZiByZXN0cmljdGlvbiBpcyBhbiBhbGxlcmd5XG4gICAgaWYgKHJlY2lwZS5hbGxlcmdlbnMgJiYgcmVjaXBlLmFsbGVyZ2Vucy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBDb21tb24gcmVzdHJpY3Rpb24gbWFwcGluZ3NcbiAgICAgIGNvbnN0IHJlc3RyaWN0aW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgICAgIHZlZ2V0YXJpYW46IFsnYmVlZicsICdwb3JrJywgJ2NoaWNrZW4nLCAnZmlzaCcsICdtZWF0J10sXG4gICAgICAgIHZlZ2FuOiBbXG4gICAgICAgICAgJ2JlZWYnLFxuICAgICAgICAgICdwb3JrJyxcbiAgICAgICAgICAnY2hpY2tlbicsXG4gICAgICAgICAgJ2Zpc2gnLFxuICAgICAgICAgICdtZWF0JyxcbiAgICAgICAgICAnZGFpcnknLFxuICAgICAgICAgICdlZ2dzJyxcbiAgICAgICAgICAnaG9uZXknLFxuICAgICAgICBdLFxuICAgICAgICAnZ2x1dGVuLWZyZWUnOiBbJ2dsdXRlbicsICd3aGVhdCddLFxuICAgICAgICAnZGFpcnktZnJlZSc6IFsnZGFpcnknLCAnbWlsaycsICdjcmVhbScsICdjaGVlc2UnXSxcbiAgICAgICAgJ251dC1mcmVlJzogWydudXRzJywgJ3BlYW51dHMnLCAnYWxtb25kcycsICd3YWxudXRzJ119O1xuXG4gICAgICBjb25zdCByZXN0cmljdGVkSXRlbXMgPSByZXN0cmljdGlvbk1hcFtyZXN0cmljdGlvbi50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIGlmIChyZXN0cmljdGVkSXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIHJlY2lwZS5hbGxlcmdlbnMuc29tZSgoYWxsZXJnZW46IHN0cmluZykgPT5cbiAgICAgICAgICByZXN0cmljdGVkSXRlbXMuaW5jbHVkZXMoYWxsZXJnZW4udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IHRvIG5vIGNvbmZsaWN0IGlmIHdlIGNhbid0IGRldGVybWluZVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgdGltZSBpcyBkdXJpbmcgZGF5bGlnaHQgaG91cnNcbiAgICovXG4gIHByaXZhdGUgaXNEYXl0aW1lKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIHJldHVybiBob3VyID49IDYgJiYgaG91ciA8IDE4O1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBlbmhhbmNlZEN1aXNpbmVSZWNvbW1lbmRlciA9XG4gIEVuaGFuY2VkQ3Vpc2luZVJlY29tbWVuZGVyLmdldEluc3RhbmNlKCk7XG4iXSwidmVyc2lvbiI6M30=