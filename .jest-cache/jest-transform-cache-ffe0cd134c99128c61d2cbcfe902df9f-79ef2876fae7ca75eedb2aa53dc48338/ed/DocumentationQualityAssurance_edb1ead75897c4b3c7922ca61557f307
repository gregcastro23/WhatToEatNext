b62f6c9b953cce78ca3bbdffc5553eb4
"use strict";
/**
 * Documentation Quality Assurance System
 *
 * Implements comment quality checking, validation of documentation completeness,
 * and reporting system for undocumented intentional any types.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.DocumentationQualityAssurance = void 0;
const fs = __importStar(require("fs/promises"));
const glob_1 = require("glob");
const types_1 = require("./types");
class DocumentationQualityAssurance {
    config;
    qualityCache = new Map();
    constructor(config) {
        this.config = {
            sourceDirectories: ['src'],
            excludePatterns: [
                'node_modules/**',
                'dist/**',
                'build/**',
                '**/*.test.ts',
                '**/*.test.tsx',
                '**/*.spec.ts',
                '**/*.spec.tsx'
            ],
            minimumCommentLength: 20,
            requiredKeywords: ['intentionally', 'deliberately', 'required', 'needed'],
            qualityThresholds: {
                excellent: 90,
                good: 70,
                fair: 50
            },
            ...config
        };
    }
    /**
     * Perform comprehensive quality assurance scan
     */
    async performQualityAssurance() {
        const files = await this.findTypeScriptFiles();
        const undocumentedTypes = [];
        const qualityBreakdown = {
            poor: 0,
            fair: 0,
            good: 0,
            excellent: 0
        };
        let totalAnyTypes = 0;
        let documentedTypes = 0;
        let totalQualityScore = 0;
        for (const filePath of files) {
            try {
                const anyTypes = await this.findAnyTypesInFile(filePath);
                totalAnyTypes += anyTypes.length;
                for (const anyType of anyTypes) {
                    const validation = await this.validateDocumentationQuality(anyType);
                    if (validation.hasComment) {
                        documentedTypes++;
                        qualityBreakdown[validation.commentQuality]++;
                        totalQualityScore += this.getQualityScore(validation.commentQuality);
                    }
                    else {
                        undocumentedTypes.push({
                            filePath: anyType.filePath,
                            lineNumber: anyType.lineNumber,
                            codeSnippet: anyType.codeSnippet,
                            category: this.categorizeAnyType(anyType.codeSnippet),
                            domain: this.determineDomain(anyType.filePath),
                            severity: this.assessSeverity(anyType)
                        });
                    }
                }
            }
            catch (error) {
                console.warn(`Error processing file ${filePath}:`, error);
            }
        }
        const averageQualityScore = totalAnyTypes > 0 ? totalQualityScore / documentedTypes : 0;
        const documentationCoverage = totalAnyTypes > 0 ? (documentedTypes / totalAnyTypes) * 100 : 100;
        return {
            totalIntentionalAnyTypes: totalAnyTypes,
            documentedTypes,
            undocumentedTypes: undocumentedTypes.length,
            documentationCoverage,
            qualityBreakdown,
            undocumentedFiles: [...new Set(undocumentedTypes.map(t => t.filePath))],
            recommendations: this.generateRecommendations(documentationCoverage, qualityBreakdown, undocumentedTypes)
        };
    }
    /**
     * Validate documentation quality for a specific context
     */
    async validateDocumentationQuality(context) {
        const cacheKey = `${context.filePath}:${context.lineNumber}`;
        if (this.qualityCache.has(cacheKey)) {
            return this.qualityCache.get(cacheKey);
        }
        const fileContent = await fs.readFile(context.filePath, 'utf-8');
        const lines = fileContent.split('\n');
        const lineIndex = context.lineNumber - 1;
        // Check for comments in surrounding lines
        const { comment, hasComment } = this.extractComment(lines, lineIndex);
        // Check for ESLint disable comment
        const hasEslintDisable = this.hasEslintDisableComment(lines, lineIndex);
        const eslintDisableHasExplanation = hasEslintDisable &&
            this.eslintDisableHasExplanation(lines, lineIndex);
        // Assess comment quality
        const commentQuality = this.assessCommentQuality(comment);
        // Check completeness
        const isComplete = hasComment &&
            commentQuality !== 'poor' &&
            hasEslintDisable &&
            eslintDisableHasExplanation;
        // Generate suggestions
        const suggestions = this.generateQualityImprovementSuggestions(comment, hasComment, commentQuality, hasEslintDisable, eslintDisableHasExplanation, context);
        const validation = {
            hasComment,
            commentQuality,
            hasEslintDisable,
            eslintDisableHasExplanation,
            isComplete,
            suggestions
        };
        this.qualityCache.set(cacheKey, validation);
        return validation;
    }
    /**
     * Generate detailed quality improvement report
     */
    async generateQualityReport() {
        const files = await this.findTypeScriptFiles();
        let totalFiles = 0;
        let filesWithAnyTypes = 0;
        let totalAnyTypes = 0;
        let documentedAnyTypes = 0;
        const qualityDistribution = {
            poor: 0,
            fair: 0,
            good: 0,
            excellent: 0
        };
        let totalQualityScore = 0;
        for (const filePath of files) {
            totalFiles++;
            try {
                const anyTypes = await this.findAnyTypesInFile(filePath);
                if (anyTypes.length > 0) {
                    filesWithAnyTypes++;
                    totalAnyTypes += anyTypes.length;
                    for (const anyType of anyTypes) {
                        const validation = await this.validateDocumentationQuality(anyType);
                        if (validation.hasComment) {
                            documentedAnyTypes++;
                            qualityDistribution[validation.commentQuality]++;
                            totalQualityScore += this.getQualityScore(validation.commentQuality);
                        }
                    }
                }
            }
            catch (error) {
                console.warn(`Error processing file ${filePath}:`, error);
            }
        }
        const averageQualityScore = documentedAnyTypes > 0 ? totalQualityScore / documentedAnyTypes : 0;
        const compliancePercentage = totalAnyTypes > 0 ? (documentedAnyTypes / totalAnyTypes) * 100 : 100;
        return {
            totalFiles,
            filesWithAnyTypes,
            totalAnyTypes,
            documentedAnyTypes,
            undocumentedAnyTypes: totalAnyTypes - documentedAnyTypes,
            qualityDistribution,
            averageQualityScore,
            compliancePercentage
        };
    }
    /**
     * Find all TypeScript files in source directories
     */
    async findTypeScriptFiles() {
        const patterns = this.config.sourceDirectories.map(dir => `${dir}/**/*.{ts,tsx}`);
        const files = [];
        for (const pattern of patterns) {
            const matches = await (0, glob_1.glob)(pattern, {
                ignore: this.config.excludePatterns
            });
            files.push(...matches);
        }
        return [...new Set(files)];
    }
    /**
     * Find any types in a specific file
     */
    async findAnyTypesInFile(filePath) {
        const content = await fs.readFile(filePath, 'utf-8');
        const lines = content.split('\n');
        const anyTypes = [];
        // Patterns to match any types
        const anyPatterns = [
            /:\s*any\b/g,
            /:\s*any\[\]/g,
            /:\s*Record<[^,]+,\s*any>/g,
            /\bas\s+any\b/g,
            /<any>/g,
            /Array<any>/g, // Array<any>
        ];
        lines.forEach((line, index) => {
            anyPatterns.forEach(pattern => {
                const matches = line.matchAll(pattern);
                for (const match of matches) {
                    if (match.index !== undefined) {
                        const context = {
                            filePath,
                            lineNumber: index + 1,
                            codeSnippet: line.trim(),
                            surroundingLines: this.getSurroundingLines(lines, index),
                            hasExistingComment: this.hasCommentNearLine(lines, index),
                            existingComment: this.extractComment(lines, index).comment,
                            isInTestFile: this.isTestFile(filePath),
                            domainContext: {
                                domain: this.determineDomain(filePath),
                                intentionalityHints: [],
                                suggestedTypes: [],
                                preservationReasons: []
                            }
                        };
                        anyTypes.push(context);
                    }
                }
            });
        });
        return anyTypes;
    }
    /**
     * Extract comment from surrounding lines
     */
    extractComment(lines, lineIndex) {
        // Check previous lines for comments
        for (let i = Math.max(0, lineIndex - 3); i < lineIndex; i++) {
            const line = lines[i]?.trim();
            if (line && line.startsWith('//')) {
                return {
                    comment: line.replace(/^\/\/\s*/, ''),
                    hasComment: true
                };
            }
            if (line && line.startsWith('/*')) {
                // Handle multi-line comments
                let comment = line.replace(/^\/\*\s*/, '');
                let j = i;
                while (j < lines.length && !lines[j].includes('*/')) {
                    j++;
                    if (j < lines.length) {
                        comment += ' ' + lines[j].trim();
                    }
                }
                comment = comment.replace(/\*\/.*$/, '');
                return {
                    comment: comment.trim(),
                    hasComment: true
                };
            }
        }
        return { comment: '', hasComment: false };
    }
    /**
     * Check if there's a comment near the line
     */
    hasCommentNearLine(lines, lineIndex) {
        for (let i = Math.max(0, lineIndex - 2); i <= Math.min(lines.length - 1, lineIndex + 1); i++) {
            const line = lines[i]?.trim();
            if (line && (line.startsWith('//') || line.startsWith('/*'))) {
                return true;
            }
        }
        return false;
    }
    /**
     * Get surrounding lines for context
     */
    getSurroundingLines(lines, lineIndex) {
        const start = Math.max(0, lineIndex - 2);
        const end = Math.min(lines.length, lineIndex + 3);
        return lines.slice(start, end);
    }
    /**
     * Check if ESLint disable comment exists
     */
    hasEslintDisableComment(lines, lineIndex) {
        for (let i = Math.max(0, lineIndex - 2); i <= lineIndex; i++) {
            if (lines[i] && lines[i].includes('eslint-disable') &&
                lines[i].includes('no-explicit-any')) {
                return true;
            }
        }
        return false;
    }
    /**
     * Check if ESLint disable comment has explanation
     */
    eslintDisableHasExplanation(lines, lineIndex) {
        for (let i = Math.max(0, lineIndex - 2); i <= lineIndex; i++) {
            const line = lines[i];
            if (line && line.includes('eslint-disable') && line.includes('no-explicit-any')) {
                const parts = line.split('eslint-disable-next-line');
                return parts.length > 1 && parts[1].trim().length > '@typescript-eslint/no-explicit-any'.length;
            }
        }
        return false;
    }
    /**
     * Assess comment quality
     */
    assessCommentQuality(comment) {
        if (!comment || comment.trim().length < this.config.minimumCommentLength) {
            return 'poor';
        }
        const lowerComment = comment.toLowerCase();
        let score = 0;
        // Check for required keywords
        const hasRequiredKeyword = this.config.requiredKeywords.some(keyword => lowerComment.includes(keyword.toLowerCase()));
        if (hasRequiredKeyword)
            score += 30;
        // Check for explanation
        if (lowerComment.includes('because') || lowerComment.includes('for') ||
            lowerComment.includes('due to') || lowerComment.includes('requires')) {
            score += 25;
        }
        // Check for domain-specific context
        if (lowerComment.includes('api') || lowerComment.includes('external') ||
            lowerComment.includes('dynamic') || lowerComment.includes('flexible') ||
            lowerComment.includes('legacy') || lowerComment.includes('compatibility')) {
            score += 20;
        }
        // Check length and detail
        if (comment.length > 50)
            score += 15;
        if (comment.length > 100)
            score += 10;
        if (score >= this.config.qualityThresholds.excellent)
            return 'excellent';
        if (score >= this.config.qualityThresholds.good)
            return 'good';
        if (score >= this.config.qualityThresholds.fair)
            return 'fair';
        return 'poor';
    }
    /**
     * Get numeric quality score
     */
    getQualityScore(quality) {
        const scores = { poor: 25, fair: 50, good: 75, excellent: 100 };
        return scores[quality];
    }
    /**
     * Categorize any type based on code snippet
     */
    categorizeAnyType(codeSnippet) {
        const lower = codeSnippet.toLowerCase();
        if (lower.includes('catch') || lower.includes('error')) {
            return types_1.AnyTypeCategory.ERROR_HANDLING;
        }
        if (lower.includes('api') || lower.includes('response') || lower.includes('fetch')) {
            return types_1.AnyTypeCategory.EXTERNAL_API;
        }
        if (lower.includes('mock') || lower.includes('jest') || lower.includes('test')) {
            return types_1.AnyTypeCategory.TEST_MOCK;
        }
        if (lower.includes('config') || lower.includes('options') || lower.includes('params')) {
            return types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        if (lower.includes('any[]')) {
            return types_1.AnyTypeCategory.ARRAY_TYPE;
        }
        if (lower.includes('record') || lower.includes('object')) {
            return types_1.AnyTypeCategory.RECORD_TYPE;
        }
        if (lower.includes('function') || lower.includes('=>') || lower.includes('param')) {
            return types_1.AnyTypeCategory.FUNCTION_PARAM;
        }
        if (lower.includes('return') || lower.includes(':')) {
            return types_1.AnyTypeCategory.RETURN_TYPE;
        }
        return types_1.AnyTypeCategory.LEGACY_COMPATIBILITY;
    }
    /**
     * Determine code domain from file path
     */
    determineDomain(filePath) {
        const lower = filePath.toLowerCase();
        // Check for test files first (they often contain other keywords)
        if (lower.includes('test') || lower.includes('spec')) {
            return types_1.CodeDomain.TEST;
        }
        if (lower.includes('astro') || lower.includes('planet') || lower.includes('lunar')) {
            return types_1.CodeDomain.ASTROLOGICAL;
        }
        if (lower.includes('recipe') || lower.includes('ingredient') || lower.includes('food')) {
            return types_1.CodeDomain.RECIPE;
        }
        if (lower.includes('campaign') || lower.includes('automation')) {
            return types_1.CodeDomain.CAMPAIGN;
        }
        if (lower.includes('intelligence') || lower.includes('ai') || lower.includes('ml')) {
            return types_1.CodeDomain.INTELLIGENCE;
        }
        if (lower.includes('service') || lower.includes('api')) {
            return types_1.CodeDomain.SERVICE;
        }
        if (lower.includes('component') || lower.includes('tsx')) {
            return types_1.CodeDomain.COMPONENT;
        }
        return types_1.CodeDomain.UTILITY;
    }
    /**
     * Assess severity of undocumented any type
     */
    assessSeverity(context) {
        const { codeSnippet, filePath, isInTestFile } = context;
        // Test files are lower priority
        if (isInTestFile)
            return 'low';
        // Critical files or patterns
        if (filePath.includes('service') || filePath.includes('api')) {
            return 'high';
        }
        // Function parameters and return types are medium priority
        if (codeSnippet.includes('function') || codeSnippet.includes('=>')) {
            return 'medium';
        }
        // Array and Record types are medium priority
        if (codeSnippet.includes('any[]') || codeSnippet.includes('Record')) {
            return 'medium';
        }
        return 'low';
    }
    /**
     * Check if file is a test file
     */
    isTestFile(filePath) {
        return /\.(test|spec)\.(ts|tsx)$/.test(filePath);
    }
    /**
     * Generate quality improvement suggestions
     */
    generateQualityImprovementSuggestions(comment, hasComment, commentQuality, hasEslintDisable, eslintDisableHasExplanation, context) {
        const suggestions = [];
        if (!hasComment) {
            suggestions.push('Add explanatory comment indicating intentional use of any type');
            suggestions.push(`Consider using template: "// Intentionally any: ${this.suggestCommentTemplate(context)}"`);
        }
        else {
            switch (commentQuality) {
                case 'poor':
                    suggestions.push('Improve comment quality with more detailed explanation');
                    suggestions.push('Include keywords like "intentionally", "deliberately", or "required"');
                    suggestions.push(`Minimum comment length should be ${this.config.minimumCommentLength} characters`);
                    break;
                case 'fair':
                    suggestions.push('Consider adding more context about why any type is necessary');
                    suggestions.push('Explain the specific use case or external dependency');
                    break;
                case 'good':
                    suggestions.push('Comment quality is good, consider adding domain-specific context');
                    break;
                case 'excellent':
                    // No suggestions needed
                    break;
            }
        }
        if (!hasEslintDisable) {
            suggestions.push('Add ESLint disable comment: // eslint-disable-next-line @typescript-eslint/no-explicit-any');
        }
        else if (!eslintDisableHasExplanation) {
            suggestions.push('Add explanation to ESLint disable comment');
        }
        if (suggestions.length === 0) {
            suggestions.push('Documentation is complete and meets quality standards');
        }
        return suggestions;
    }
    /**
     * Suggest comment template based on context
     */
    suggestCommentTemplate(context) {
        const { domainContext, codeSnippet } = context;
        switch (domainContext.domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
                return 'External astrological API response with dynamic structure';
            case types_1.CodeDomain.RECIPE:
                return 'External recipe API with flexible ingredient data';
            case types_1.CodeDomain.CAMPAIGN:
                return 'Campaign system requires flexible configuration for dynamic behavior';
            case types_1.CodeDomain.SERVICE:
                return 'External API response with unknown structure';
            case types_1.CodeDomain.TEST:
                return 'Test mock requires flexible typing for comprehensive testing';
            default:
                if (codeSnippet.includes('catch') || codeSnippet.includes('error')) {
                    return 'Error handling requires flexible typing for unknown error structures';
                }
                return 'Requires flexible typing for specific use case';
        }
    }
    /**
     * Generate recommendations based on analysis results
     */
    generateRecommendations(coverage, qualityBreakdown, undocumentedTypes) {
        const recommendations = [];
        if (coverage < 50) {
            recommendations.push('CRITICAL: Less than 50% of any types are documented. Immediate action required.');
        }
        else if (coverage < 80) {
            recommendations.push('WARNING: Documentation coverage is below 80%. Consider systematic documentation effort.');
        }
        else if (coverage < 95) {
            recommendations.push('GOOD: Documentation coverage is above 80%. Focus on remaining undocumented types.');
        }
        else {
            recommendations.push('EXCELLENT: Documentation coverage is above 95%. Maintain current standards.');
        }
        // Quality-based recommendations
        const totalQuality = Object.values(qualityBreakdown).reduce((sum, count) => sum + count, 0);
        if (totalQuality > 0) {
            const poorPercentage = (qualityBreakdown.poor / totalQuality) * 100;
            if (poorPercentage > 20) {
                recommendations.push('Focus on improving comment quality - over 20% are rated as poor quality.');
            }
        }
        // File-specific recommendations
        const criticalFiles = undocumentedTypes
            .filter(t => t.severity === 'critical' || t.severity === 'high')
            .map(t => t.filePath);
        if (criticalFiles.length > 0) {
            recommendations.push(`Priority files needing documentation: ${[...new Set(criticalFiles)].slice(0, 5).join(', ')}`);
        }
        // General recommendations
        recommendations.push('Use domain-specific documentation templates for consistency');
        recommendations.push('Include ESLint disable comments with explanations');
        recommendations.push('Regular quality assurance scans to maintain documentation standards');
        return recommendations;
    }
}
exports.DocumentationQualityAssurance = DocumentationQualityAssurance;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9Eb2N1bWVudGF0aW9uUXVhbGl0eUFzc3VyYW5jZS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsZ0RBQWtDO0FBQ2xDLCtCQUE0QjtBQUM1QixtQ0FNaUI7QUFrQ2pCLE1BQWEsNkJBQTZCO0lBQ2hDLE1BQU0sQ0FBeUI7SUFDL0IsWUFBWSxHQUF5QyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBRXZFLFlBQVksTUFBd0M7UUFDbEQsSUFBSSxDQUFDLE1BQU0sR0FBRztZQUNaLGlCQUFpQixFQUFFLENBQUMsS0FBSyxDQUFDO1lBQzFCLGVBQWUsRUFBRTtnQkFDZixpQkFBaUI7Z0JBQ2pCLFNBQVM7Z0JBQ1QsVUFBVTtnQkFDVixjQUFjO2dCQUNkLGVBQWU7Z0JBQ2YsY0FBYztnQkFDZCxlQUFlO2FBQ2hCO1lBQ0Qsb0JBQW9CLEVBQUUsRUFBRTtZQUN4QixnQkFBZ0IsRUFBRSxDQUFDLGVBQWUsRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLFFBQVEsQ0FBQztZQUN6RSxpQkFBaUIsRUFBRTtnQkFDakIsU0FBUyxFQUFFLEVBQUU7Z0JBQ2IsSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsSUFBSSxFQUFFLEVBQUU7YUFDVDtZQUNELEdBQUcsTUFBTTtTQUNWLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsdUJBQXVCO1FBQzNCLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDL0MsTUFBTSxpQkFBaUIsR0FBMEIsRUFBRSxDQUFDO1FBQ3BELE1BQU0sZ0JBQWdCLEdBQTJCO1lBQy9DLElBQUksRUFBRSxDQUFDO1lBQ1AsSUFBSSxFQUFFLENBQUM7WUFDUCxJQUFJLEVBQUUsQ0FBQztZQUNQLFNBQVMsRUFB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LENBQUM7UUFDMUUsZUFBZSxDQUFDLElBQUksQ0FBQyxxRUFBcUUsQ0FBQyxDQUFDO1FBRTVGLE9BQU8sZUFBZSxDQUFDO0lBQ3pCLENBQUM7Q0FDRjtBQXZtQkQsc0VBdW1CQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL0RvY3VtZW50YXRpb25RdWFsaXR5QXNzdXJhbmNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRG9jdW1lbnRhdGlvbiBRdWFsaXR5IEFzc3VyYW5jZSBTeXN0ZW1cbiAqXG4gKiBJbXBsZW1lbnRzIGNvbW1lbnQgcXVhbGl0eSBjaGVja2luZywgdmFsaWRhdGlvbiBvZiBkb2N1bWVudGF0aW9uIGNvbXBsZXRlbmVzcyxcbiAqIGFuZCByZXBvcnRpbmcgc3lzdGVtIGZvciB1bmRvY3VtZW50ZWQgaW50ZW50aW9uYWwgYW55IHR5cGVzLlxuICovXG5cbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCB7IGdsb2IgfSBmcm9tICdnbG9iJztcbmltcG9ydCB7XG4gICAgQW55VHlwZUNhdGVnb3J5LFxuICAgIENsYXNzaWZpY2F0aW9uQ29udGV4dCxcbiAgICBDb2RlRG9tYWluLFxuICAgIERvY3VtZW50YXRpb25SZXBvcnQsXG4gICAgRG9jdW1lbnRhdGlvblZhbGlkYXRpb25cbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVhbGl0eUFzc3VyYW5jZUNvbmZpZyB7XG4gIHNvdXJjZURpcmVjdG9yaWVzOiBzdHJpbmdbXTtcbiAgZXhjbHVkZVBhdHRlcm5zOiBzdHJpbmdbXTtcbiAgbWluaW11bUNvbW1lbnRMZW5ndGg6IG51bWJlcjtcbiAgcmVxdWlyZWRLZXl3b3Jkczogc3RyaW5nW107XG4gIHF1YWxpdHlUaHJlc2hvbGRzOiB7XG4gICAgZXhjZWxsZW50OiBudW1iZXI7XG4gICAgZ29vZDogbnVtYmVyO1xuICAgIGZhaXI6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVbmRvY3VtZW50ZWRBbnlUeXBlIHtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgbGluZU51bWJlcjogbnVtYmVyO1xuICBjb2RlU25pcHBldDogc3RyaW5nO1xuICBjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5O1xuICBkb21haW46IENvZGVEb21haW47XG4gIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWFsaXR5TWV0cmljcyB7XG4gIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgZmlsZXNXaXRoQW55VHlwZXM6IG51bWJlcjtcbiAgdG90YWxBbnlUeXBlczogbnVtYmVyO1xuICBkb2N1bWVudGVkQW55VHlwZXM6IG51bWJlcjtcbiAgdW5kb2N1bWVudGVkQW55VHlwZXM6IG51bWJlcjtcbiAgcXVhbGl0eURpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgYXZlcmFnZVF1YWxpdHlTY29yZTogbnVtYmVyO1xuICBjb21wbGlhbmNlUGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRhdGlvblF1YWxpdHlBc3N1cmFuY2Uge1xuICBwcml2YXRlIGNvbmZpZzogUXVhbGl0eUFzc3VyYW5jZUNvbmZpZztcbiAgcHJpdmF0ZSBxdWFsaXR5Q2FjaGU6IE1hcDxzdHJpbmcsIERvY3VtZW50YXRpb25WYWxpZGF0aW9uPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc/OiBQYXJ0aWFsPFF1YWxpdHlBc3N1cmFuY2VDb25maWc+KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBzb3VyY2VEaXJlY3RvcmllczogWydzcmMnXSxcbiAgICAgIGV4Y2x1ZGVQYXR0ZXJuczogW1xuICAgICAgICAnbm9kZV9tb2R1bGVzLyoqJyxcbiAgICAgICAgJ2Rpc3QvKionLFxuICAgICAgICAnYnVpbGQvKionLFxuICAgICAgICAnKiovKi50ZXN0LnRzJyxcbiAgICAgICAgJyoqLyoudGVzdC50c3gnLFxuICAgICAgICAnKiovKi5zcGVjLnRzJyxcbiAgICAgICAgJyoqLyouc3BlYy50c3gnXG4gICAgICBdLFxuICAgICAgbWluaW11bUNvbW1lbnRMZW5ndGg6IDIwLFxuICAgICAgcmVxdWlyZWRLZXl3b3JkczogWydpbnRlbnRpb25hbGx5JywgJ2RlbGliZXJhdGVseScsICdyZXF1aXJlZCcsICduZWVkZWQnXSxcbiAgICAgIHF1YWxpdHlUaHJlc2hvbGRzOiB7XG4gICAgICAgIGV4Y2VsbGVudDogOTAsXG4gICAgICAgIGdvb2Q6IDcwLFxuICAgICAgICBmYWlyOiA1MFxuICAgICAgfSxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBjb21wcmVoZW5zaXZlIHF1YWxpdHkgYXNzdXJhbmNlIHNjYW5cbiAgICovXG4gIGFzeW5jIHBlcmZvcm1RdWFsaXR5QXNzdXJhbmNlKCk6IFByb21pc2U8RG9jdW1lbnRhdGlvblJlcG9ydD4ge1xuICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5maW5kVHlwZVNjcmlwdEZpbGVzKCk7XG4gICAgY29uc3QgdW5kb2N1bWVudGVkVHlwZXM6IFVuZG9jdW1lbnRlZEFueVR5cGVbXSA9IFtdO1xuICAgIGNvbnN0IHF1YWxpdHlCcmVha2Rvd246IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICBwb29yOiAwLFxuICAgICAgZmFpcjogMCxcbiAgICAgIGdvb2Q6IDAsXG4gICAgICBleGNlbGxlbnQ6IDBcbiAgICB9O1xuXG4gICAgbGV0IHRvdGFsQW55VHlwZXMgPSAwO1xuICAgIGxldCBkb2N1bWVudGVkVHlwZXMgPSAwO1xuICAgIGxldCB0b3RhbFF1YWxpdHlTY29yZSA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbnlUeXBlcyA9IGF3YWl0IHRoaXMuZmluZEFueVR5cGVzSW5GaWxlKGZpbGVQYXRoKTtcbiAgICAgICAgdG90YWxBbnlUeXBlcyArPSBhbnlUeXBlcy5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChjb25zdCBhbnlUeXBlIG9mIGFueVR5cGVzKSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVEb2N1bWVudGF0aW9uUXVhbGl0eShhbnlUeXBlKTtcblxuICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmhhc0NvbW1lbnQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50ZWRUeXBlcysrO1xuICAgICAgICAgICAgcXVhbGl0eUJyZWFrZG93blt2YWxpZGF0aW9uLmNvbW1lbnRRdWFsaXR5XSsrO1xuICAgICAgICAgICAgdG90YWxRdWFsaXR5U2NvcmUgKz0gdGhpcy5nZXRRdWFsaXR5U2NvcmUodmFsaWRhdGlvbi5jb21tZW50UXVhbGl0eSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVuZG9jdW1lbnRlZFR5cGVzLnB1c2goe1xuICAgICAgICAgICAgICBmaWxlUGF0aDogYW55VHlwZS5maWxlUGF0aCxcbiAgICAgICAgICAgICAgbGluZU51bWJlcjogYW55VHlwZS5saW5lTnVtYmVyLFxuICAgICAgICAgICAgICBjb2RlU25pcHBldDogYW55VHlwZS5jb2RlU25pcHBldCxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcml6ZUFueVR5cGUoYW55VHlwZS5jb2RlU25pcHBldCksXG4gICAgICAgICAgICAgIGRvbWFpbjogdGhpcy5kZXRlcm1pbmVEb21haW4oYW55VHlwZS5maWxlUGF0aCksXG4gICAgICAgICAgICAgIHNldmVyaXR5OiB0aGlzLmFzc2Vzc1NldmVyaXR5KGFueVR5cGUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRXJyb3IgcHJvY2Vzc2luZyBmaWxlICR7ZmlsZVBhdGh9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhdmVyYWdlUXVhbGl0eVNjb3JlID0gdG90YWxBbnlUeXBlcyA+IDAgPyB0b3RhbFF1YWxpdHlTY29yZSAvIGRvY3VtZW50ZWRUeXBlcyA6IDA7XG4gICAgY29uc3QgZG9jdW1lbnRhdGlvbkNvdmVyYWdlID0gdG90YWxBbnlUeXBlcyA+IDAgPyAoZG9jdW1lbnRlZFR5cGVzIC8gdG90YWxBbnlUeXBlcykgKiAxMDAgOiAxMDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxJbnRlbnRpb25hbEFueVR5cGVzOiB0b3RhbEFueVR5cGVzLFxuICAgICAgZG9jdW1lbnRlZFR5cGVzLFxuICAgICAgdW5kb2N1bWVudGVkVHlwZXM6IHVuZG9jdW1lbnRlZFR5cGVzLmxlbmd0aCxcbiAgICAgIGRvY3VtZW50YXRpb25Db3ZlcmFnZSxcbiAgICAgIHF1YWxpdHlCcmVha2Rvd24sXG4gICAgICB1bmRvY3VtZW50ZWRGaWxlczogWy4uLm5ldyBTZXQodW5kb2N1bWVudGVkVHlwZXMubWFwKHQgPT4gdC5maWxlUGF0aCkpXSxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogdGhpcy5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgZG9jdW1lbnRhdGlvbkNvdmVyYWdlLFxuICAgICAgICBxdWFsaXR5QnJlYWtkb3duLFxuICAgICAgICB1bmRvY3VtZW50ZWRUeXBlc1xuICAgICAgKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgZG9jdW1lbnRhdGlvbiBxdWFsaXR5IGZvciBhIHNwZWNpZmljIGNvbnRleHRcbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlRG9jdW1lbnRhdGlvblF1YWxpdHkoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogUHJvbWlzZTxEb2N1bWVudGF0aW9uVmFsaWRhdGlvbj4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gYCR7Y29udGV4dC5maWxlUGF0aH06JHtjb250ZXh0LmxpbmVOdW1iZXJ9YDtcblxuICAgIGlmICh0aGlzLnF1YWxpdHlDYWNoZS5oYXMoY2FjaGVLZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWFsaXR5Q2FjaGUuZ2V0KGNhY2hlS2V5KSE7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShjb250ZXh0LmZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICBjb25zdCBsaW5lcyA9IGZpbGVDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBsaW5lSW5kZXggPSBjb250ZXh0LmxpbmVOdW1iZXIgLSAxO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGNvbW1lbnRzIGluIHN1cnJvdW5kaW5nIGxpbmVzXG4gICAgY29uc3QgeyBjb21tZW50LCBoYXNDb21tZW50IH0gPSB0aGlzLmV4dHJhY3RDb21tZW50KGxpbmVzLCBsaW5lSW5kZXgpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIEVTTGludCBkaXNhYmxlIGNvbW1lbnRcbiAgICBjb25zdCBoYXNFc2xpbnREaXNhYmxlID0gdGhpcy5oYXNFc2xpbnREaXNhYmxlQ29tbWVudChsaW5lcywgbGluZUluZGV4KTtcbiAgICBjb25zdCBlc2xpbnREaXNhYmxlSGFzRXhwbGFuYXRpb24gPSBoYXNFc2xpbnREaXNhYmxlICYmXG4gICAgICB0aGlzLmVzbGludERpc2FibGVIYXNFeHBsYW5hdGlvbihsaW5lcywgbGluZUluZGV4KTtcblxuICAgIC8vIEFzc2VzcyBjb21tZW50IHF1YWxpdHlcbiAgICBjb25zdCBjb21tZW50UXVhbGl0eSA9IHRoaXMuYXNzZXNzQ29tbWVudFF1YWxpdHkoY29tbWVudCk7XG5cbiAgICAvLyBDaGVjayBjb21wbGV0ZW5lc3NcbiAgICBjb25zdCBpc0NvbXBsZXRlID0gaGFzQ29tbWVudCAmJlxuICAgICAgY29tbWVudFF1YWxpdHkgIT09ICdwb29yJyAmJlxuICAgICAgaGFzRXNsaW50RGlzYWJsZSAmJlxuICAgICAgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uO1xuXG4gICAgLy8gR2VuZXJhdGUgc3VnZ2VzdGlvbnNcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuZ2VuZXJhdGVRdWFsaXR5SW1wcm92ZW1lbnRTdWdnZXN0aW9ucyhcbiAgICAgIGNvbW1lbnQsXG4gICAgICBoYXNDb21tZW50LFxuICAgICAgY29tbWVudFF1YWxpdHksXG4gICAgICBoYXNFc2xpbnREaXNhYmxlLFxuICAgICAgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uLFxuICAgICAgY29udGV4dFxuICAgICk7XG5cbiAgICBjb25zdCB2YWxpZGF0aW9uOiBEb2N1bWVudGF0aW9uVmFsaWRhdGlvbiA9IHtcbiAgICAgIGhhc0NvbW1lbnQsXG4gICAgICBjb21tZW50UXVhbGl0eSxcbiAgICAgIGhhc0VzbGludERpc2FibGUsXG4gICAgICBlc2xpbnREaXNhYmxlSGFzRXhwbGFuYXRpb24sXG4gICAgICBpc0NvbXBsZXRlLFxuICAgICAgc3VnZ2VzdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5xdWFsaXR5Q2FjaGUuc2V0KGNhY2hlS2V5LCB2YWxpZGF0aW9uKTtcbiAgICByZXR1cm4gdmFsaWRhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBkZXRhaWxlZCBxdWFsaXR5IGltcHJvdmVtZW50IHJlcG9ydFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVRdWFsaXR5UmVwb3J0KCk6IFByb21pc2U8UXVhbGl0eU1ldHJpY3M+IHtcbiAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMuZmluZFR5cGVTY3JpcHRGaWxlcygpO1xuICAgIGxldCB0b3RhbEZpbGVzID0gMDtcbiAgICBsZXQgZmlsZXNXaXRoQW55VHlwZXMgPSAwO1xuICAgIGxldCB0b3RhbEFueVR5cGVzID0gMDtcbiAgICBsZXQgZG9jdW1lbnRlZEFueVR5cGVzID0gMDtcbiAgICBjb25zdCBxdWFsaXR5RGlzdHJpYnV0aW9uOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgcG9vcjogMCxcbiAgICAgIGZhaXI6IDAsXG4gICAgICBnb29kOiAwLFxuICAgICAgZXhjZWxsZW50OiAwXG4gICAgfTtcbiAgICBsZXQgdG90YWxRdWFsaXR5U2NvcmUgPSAwO1xuXG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlcykge1xuICAgICAgdG90YWxGaWxlcysrO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbnlUeXBlcyA9IGF3YWl0IHRoaXMuZmluZEFueVR5cGVzSW5GaWxlKGZpbGVQYXRoKTtcblxuICAgICAgICBpZiAoYW55VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZpbGVzV2l0aEFueVR5cGVzKys7XG4gICAgICAgICAgdG90YWxBbnlUeXBlcyArPSBhbnlUeXBlcy5sZW5ndGg7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IGFueVR5cGUgb2YgYW55VHlwZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlRG9jdW1lbnRhdGlvblF1YWxpdHkoYW55VHlwZSk7XG5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmhhc0NvbW1lbnQpIHtcbiAgICAgICAgICAgICAgZG9jdW1lbnRlZEFueVR5cGVzKys7XG4gICAgICAgICAgICAgIHF1YWxpdHlEaXN0cmlidXRpb25bdmFsaWRhdGlvbi5jb21tZW50UXVhbGl0eV0rKztcbiAgICAgICAgICAgICAgdG90YWxRdWFsaXR5U2NvcmUgKz0gdGhpcy5nZXRRdWFsaXR5U2NvcmUodmFsaWRhdGlvbi5jb21tZW50UXVhbGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYEVycm9yIHByb2Nlc3NpbmcgZmlsZSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYXZlcmFnZVF1YWxpdHlTY29yZSA9IGRvY3VtZW50ZWRBbnlUeXBlcyA+IDAgPyB0b3RhbFF1YWxpdHlTY29yZSAvIGRvY3VtZW50ZWRBbnlUeXBlcyA6IDA7XG4gICAgY29uc3QgY29tcGxpYW5jZVBlcmNlbnRhZ2UgPSB0b3RhbEFueVR5cGVzID4gMCA/IChkb2N1bWVudGVkQW55VHlwZXMgLyB0b3RhbEFueVR5cGVzKSAqIDEwMCA6IDEwMDtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEZpbGVzLFxuICAgICAgZmlsZXNXaXRoQW55VHlwZXMsXG4gICAgICB0b3RhbEFueVR5cGVzLFxuICAgICAgZG9jdW1lbnRlZEFueVR5cGVzLFxuICAgICAgdW5kb2N1bWVudGVkQW55VHlwZXM6IHRvdGFsQW55VHlwZXMgLSBkb2N1bWVudGVkQW55VHlwZXMsXG4gICAgICBxdWFsaXR5RGlzdHJpYnV0aW9uLFxuICAgICAgYXZlcmFnZVF1YWxpdHlTY29yZSxcbiAgICAgIGNvbXBsaWFuY2VQZXJjZW50YWdlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFsbCBUeXBlU2NyaXB0IGZpbGVzIGluIHNvdXJjZSBkaXJlY3Rvcmllc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5kVHlwZVNjcmlwdEZpbGVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBwYXR0ZXJucyA9IHRoaXMuY29uZmlnLnNvdXJjZURpcmVjdG9yaWVzLm1hcChkaXIgPT4gYCR7ZGlyfS8qKi8qLnt0cyx0c3h9YCk7XG4gICAgY29uc3QgZmlsZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBnbG9iKHBhdHRlcm4sIHtcbiAgICAgICAgaWdub3JlOiB0aGlzLmNvbmZpZy5leGNsdWRlUGF0dGVybnNcbiAgICAgIH0pO1xuICAgICAgZmlsZXMucHVzaCguLi5tYXRjaGVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLm5ldyBTZXQoZmlsZXMpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFueSB0eXBlcyBpbiBhIHNwZWNpZmljIGZpbGVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmluZEFueVR5cGVzSW5GaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPENsYXNzaWZpY2F0aW9uQ29udGV4dFtdPiB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGFueVR5cGVzOiBDbGFzc2lmaWNhdGlvbkNvbnRleHRbXSA9IFtdO1xuXG4gICAgLy8gUGF0dGVybnMgdG8gbWF0Y2ggYW55IHR5cGVzXG4gICAgY29uc3QgYW55UGF0dGVybnMgPSBbXG4gICAgICAvOlxccyphbnlcXGIvZywgICAgICAgICAgIC8vIDogYW55XG4gICAgICAvOlxccyphbnlcXFtcXF0vZywgICAgICAgICAvLyA6IGFueVtdXG4gICAgICAvOlxccypSZWNvcmQ8W14sXSssXFxzKmFueT4vZywgIC8vIDogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICAgL1xcYmFzXFxzK2FueVxcYi9nLCAgICAgICAgLy8gYXMgYW55XG4gICAgICAvPGFueT4vZywgICAgICAgICAgICAgICAvLyA8YW55PlxuICAgICAgL0FycmF5PGFueT4vZywgICAgICAgICAgLy8gQXJyYXk8YW55PlxuICAgIF07XG5cbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgYW55UGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGxpbmUubWF0Y2hBbGwocGF0dGVybik7XG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGlmIChtYXRjaC5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICBsaW5lTnVtYmVyOiBpbmRleCArIDEsXG4gICAgICAgICAgICAgIGNvZGVTbmlwcGV0OiBsaW5lLnRyaW0oKSxcbiAgICAgICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogdGhpcy5nZXRTdXJyb3VuZGluZ0xpbmVzKGxpbmVzLCBpbmRleCksXG4gICAgICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogdGhpcy5oYXNDb21tZW50TmVhckxpbmUobGluZXMsIGluZGV4KSxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb21tZW50OiB0aGlzLmV4dHJhY3RDb21tZW50KGxpbmVzLCBpbmRleCkuY29tbWVudCxcbiAgICAgICAgICAgICAgaXNJblRlc3RGaWxlOiB0aGlzLmlzVGVzdEZpbGUoZmlsZVBhdGgpLFxuICAgICAgICAgICAgICBkb21haW5Db250ZXh0OiB7XG4gICAgICAgICAgICAgICAgZG9tYWluOiB0aGlzLmRldGVybWluZURvbWFpbihmaWxlUGF0aCksXG4gICAgICAgICAgICAgICAgaW50ZW50aW9uYWxpdHlIaW50czogW10sXG4gICAgICAgICAgICAgICAgc3VnZ2VzdGVkVHlwZXM6IFtdLFxuICAgICAgICAgICAgICAgIHByZXNlcnZhdGlvblJlYXNvbnM6IFtdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhbnlUeXBlcy5wdXNoKGNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYW55VHlwZXM7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBjb21tZW50IGZyb20gc3Vycm91bmRpbmcgbGluZXNcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENvbW1lbnQobGluZXM6IHN0cmluZ1tdLCBsaW5lSW5kZXg6IG51bWJlcik6IHsgY29tbWVudDogc3RyaW5nOyBoYXNDb21tZW50OiBib29sZWFuIH0ge1xuICAgIC8vIENoZWNrIHByZXZpb3VzIGxpbmVzIGZvciBjb21tZW50c1xuICAgIGZvciAobGV0IGkgPSBNYXRoLm1heCgwLCBsaW5lSW5kZXggLSAzKTsgaSA8IGxpbmVJbmRleDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV0/LnRyaW0oKTtcbiAgICAgIGlmIChsaW5lICYmIGxpbmUuc3RhcnRzV2l0aCgnLy8nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbW1lbnQ6IGxpbmUucmVwbGFjZSgvXlxcL1xcL1xccyovLCAnJyksXG4gICAgICAgICAgaGFzQ29tbWVudDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKGxpbmUgJiYgbGluZS5zdGFydHNXaXRoKCcvKicpKSB7XG4gICAgICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGNvbW1lbnRzXG4gICAgICAgIGxldCBjb21tZW50ID0gbGluZS5yZXBsYWNlKC9eXFwvXFwqXFxzKi8sICcnKTtcbiAgICAgICAgbGV0IGogPSBpO1xuICAgICAgICB3aGlsZSAoaiA8IGxpbmVzLmxlbmd0aCAmJiAhbGluZXNbal0uaW5jbHVkZXMoJyovJykpIHtcbiAgICAgICAgICBqKys7XG4gICAgICAgICAgaWYgKGogPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbW1lbnQgKz0gJyAnICsgbGluZXNbal0udHJpbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb21tZW50ID0gY29tbWVudC5yZXBsYWNlKC9cXCpcXC8uKiQvLCAnJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29tbWVudDogY29tbWVudC50cmltKCksXG4gICAgICAgICAgaGFzQ29tbWVudDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGNvbW1lbnQ6ICcnLCBoYXNDb21tZW50OiBmYWxzZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZXJlJ3MgYSBjb21tZW50IG5lYXIgdGhlIGxpbmVcbiAgICovXG4gIHByaXZhdGUgaGFzQ29tbWVudE5lYXJMaW5lKGxpbmVzOiBzdHJpbmdbXSwgbGluZUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gTWF0aC5tYXgoMCwgbGluZUluZGV4IC0gMik7IGkgPD0gTWF0aC5taW4obGluZXMubGVuZ3RoIC0gMSwgbGluZUluZGV4ICsgMSk7IGkrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldPy50cmltKCk7XG4gICAgICBpZiAobGluZSAmJiAobGluZS5zdGFydHNXaXRoKCcvLycpIHx8IGxpbmUuc3RhcnRzV2l0aCgnLyonKSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3Vycm91bmRpbmcgbGluZXMgZm9yIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgZ2V0U3Vycm91bmRpbmdMaW5lcyhsaW5lczogc3RyaW5nW10sIGxpbmVJbmRleDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgbGluZUluZGV4IC0gMik7XG4gICAgY29uc3QgZW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoLCBsaW5lSW5kZXggKyAzKTtcbiAgICByZXR1cm4gbGluZXMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgRVNMaW50IGRpc2FibGUgY29tbWVudCBleGlzdHNcbiAgICovXG4gIHByaXZhdGUgaGFzRXNsaW50RGlzYWJsZUNvbW1lbnQobGluZXM6IHN0cmluZ1tdLCBsaW5lSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSBNYXRoLm1heCgwLCBsaW5lSW5kZXggLSAyKTsgaSA8PSBsaW5lSW5kZXg7IGkrKykge1xuICAgICAgaWYgKGxpbmVzW2ldICYmIGxpbmVzW2ldLmluY2x1ZGVzKCdlc2xpbnQtZGlzYWJsZScpICYmXG4gICAgICAgICAgbGluZXNbaV0uaW5jbHVkZXMoJ25vLWV4cGxpY2l0LWFueScpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgRVNMaW50IGRpc2FibGUgY29tbWVudCBoYXMgZXhwbGFuYXRpb25cbiAgICovXG4gIHByaXZhdGUgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uKGxpbmVzOiBzdHJpbmdbXSwgbGluZUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gTWF0aC5tYXgoMCwgbGluZUluZGV4IC0gMik7IGkgPD0gbGluZUluZGV4OyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGlmIChsaW5lICYmIGxpbmUuaW5jbHVkZXMoJ2VzbGludC1kaXNhYmxlJykgJiYgbGluZS5pbmNsdWRlcygnbm8tZXhwbGljaXQtYW55JykpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCdlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUnKTtcbiAgICAgICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHNbMV0udHJpbSgpLmxlbmd0aCA+ICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55Jy5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3Nlc3MgY29tbWVudCBxdWFsaXR5XG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc0NvbW1lbnRRdWFsaXR5KGNvbW1lbnQ6IHN0cmluZyk6ICdwb29yJyB8ICdmYWlyJyB8ICdnb29kJyB8ICdleGNlbGxlbnQnIHtcbiAgICBpZiAoIWNvbW1lbnQgfHwgY29tbWVudC50cmltKCkubGVuZ3RoIDwgdGhpcy5jb25maWcubWluaW11bUNvbW1lbnRMZW5ndGgpIHtcbiAgICAgIHJldHVybiAncG9vcic7XG4gICAgfVxuXG4gICAgY29uc3QgbG93ZXJDb21tZW50ID0gY29tbWVudC50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAvLyBDaGVjayBmb3IgcmVxdWlyZWQga2V5d29yZHNcbiAgICBjb25zdCBoYXNSZXF1aXJlZEtleXdvcmQgPSB0aGlzLmNvbmZpZy5yZXF1aXJlZEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PlxuICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICAgIGlmIChoYXNSZXF1aXJlZEtleXdvcmQpIHNjb3JlICs9IDMwO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4cGxhbmF0aW9uXG4gICAgaWYgKGxvd2VyQ29tbWVudC5pbmNsdWRlcygnYmVjYXVzZScpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnZm9yJykgfHxcbiAgICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKCdkdWUgdG8nKSB8fCBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ3JlcXVpcmVzJykpIHtcbiAgICAgIHNjb3JlICs9IDI1O1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBkb21haW4tc3BlY2lmaWMgY29udGV4dFxuICAgIGlmIChsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2FwaScpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnZXh0ZXJuYWwnKSB8fFxuICAgICAgICBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2R5bmFtaWMnKSB8fCBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2ZsZXhpYmxlJykgfHxcbiAgICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKCdsZWdhY3knKSB8fCBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2NvbXBhdGliaWxpdHknKSkge1xuICAgICAgc2NvcmUgKz0gMjA7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgbGVuZ3RoIGFuZCBkZXRhaWxcbiAgICBpZiAoY29tbWVudC5sZW5ndGggPiA1MCkgc2NvcmUgKz0gMTU7XG4gICAgaWYgKGNvbW1lbnQubGVuZ3RoID4gMTAwKSBzY29yZSArPSAxMDtcblxuICAgIGlmIChzY29yZSA+PSB0aGlzLmNvbmZpZy5xdWFsaXR5VGhyZXNob2xkcy5leGNlbGxlbnQpIHJldHVybiAnZXhjZWxsZW50JztcbiAgICBpZiAoc2NvcmUgPj0gdGhpcy5jb25maWcucXVhbGl0eVRocmVzaG9sZHMuZ29vZCkgcmV0dXJuICdnb29kJztcbiAgICBpZiAoc2NvcmUgPj0gdGhpcy5jb25maWcucXVhbGl0eVRocmVzaG9sZHMuZmFpcikgcmV0dXJuICdmYWlyJztcbiAgICByZXR1cm4gJ3Bvb3InO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBudW1lcmljIHF1YWxpdHkgc2NvcmVcbiAgICovXG4gIHByaXZhdGUgZ2V0UXVhbGl0eVNjb3JlKHF1YWxpdHk6ICdwb29yJyB8ICdmYWlyJyB8ICdnb29kJyB8ICdleGNlbGxlbnQnKTogbnVtYmVyIHtcbiAgICBjb25zdCBzY29yZXMgPSB7IHBvb3I6IDI1LCBmYWlyOiA1MCwgZ29vZDogNzUsIGV4Y2VsbGVudDogMTAwIH07XG4gICAgcmV0dXJuIHNjb3Jlc1txdWFsaXR5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXRlZ29yaXplIGFueSB0eXBlIGJhc2VkIG9uIGNvZGUgc25pcHBldFxuICAgKi9cbiAgcHJpdmF0ZSBjYXRlZ29yaXplQW55VHlwZShjb2RlU25pcHBldDogc3RyaW5nKTogQW55VHlwZUNhdGVnb3J5IHtcbiAgICBjb25zdCBsb3dlciA9IGNvZGVTbmlwcGV0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2NhdGNoJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuRVJST1JfSEFORExJTkc7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnYXBpJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3Jlc3BvbnNlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2ZldGNoJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ21vY2snKSB8fCBsb3dlci5pbmNsdWRlcygnamVzdCcpIHx8IGxvd2VyLmluY2x1ZGVzKCd0ZXN0JykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuVEVTVF9NT0NLO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2NvbmZpZycpIHx8IGxvd2VyLmluY2x1ZGVzKCdvcHRpb25zJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3BhcmFtcycpKSB7XG4gICAgICByZXR1cm4gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2FueVtdJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRTtcbiAgICB9XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdyZWNvcmQnKSB8fCBsb3dlci5pbmNsdWRlcygnb2JqZWN0JykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuUkVDT1JEX1RZUEU7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnZnVuY3Rpb24nKSB8fCBsb3dlci5pbmNsdWRlcygnPT4nKSB8fCBsb3dlci5pbmNsdWRlcygncGFyYW0nKSkge1xuICAgICAgcmV0dXJuIEFueVR5cGVDYXRlZ29yeS5GVU5DVElPTl9QQVJBTTtcbiAgICB9XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdyZXR1cm4nKSB8fCBsb3dlci5pbmNsdWRlcygnOicpKSB7XG4gICAgICByZXR1cm4gQW55VHlwZUNhdGVnb3J5LlJFVFVSTl9UWVBFO1xuICAgIH1cblxuICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuTEVHQUNZX0NPTVBBVElCSUxJVFk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGNvZGUgZG9tYWluIGZyb20gZmlsZSBwYXRoXG4gICAqL1xuICBwcml2YXRlIGRldGVybWluZURvbWFpbihmaWxlUGF0aDogc3RyaW5nKTogQ29kZURvbWFpbiB7XG4gICAgY29uc3QgbG93ZXIgPSBmaWxlUGF0aC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHRlc3QgZmlsZXMgZmlyc3QgKHRoZXkgb2Z0ZW4gY29udGFpbiBvdGhlciBrZXl3b3JkcylcbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ3Rlc3QnKSB8fCBsb3dlci5pbmNsdWRlcygnc3BlYycpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5URVNUO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2FzdHJvJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3BsYW5ldCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdsdW5hcicpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5BU1RST0xPR0lDQUw7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygncmVjaXBlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2luZ3JlZGllbnQnKSB8fCBsb3dlci5pbmNsdWRlcygnZm9vZCcpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5SRUNJUEU7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnY2FtcGFpZ24nKSB8fCBsb3dlci5pbmNsdWRlcygnYXV0b21hdGlvbicpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5DQU1QQUlHTjtcbiAgICB9XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdpbnRlbGxpZ2VuY2UnKSB8fCBsb3dlci5pbmNsdWRlcygnYWknKSB8fCBsb3dlci5pbmNsdWRlcygnbWwnKSkge1xuICAgICAgcmV0dXJuIENvZGVEb21haW4uSU5URUxMSUdFTkNFO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ3NlcnZpY2UnKSB8fCBsb3dlci5pbmNsdWRlcygnYXBpJykpIHtcbiAgICAgIHJldHVybiBDb2RlRG9tYWluLlNFUlZJQ0U7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnY29tcG9uZW50JykgfHwgbG93ZXIuaW5jbHVkZXMoJ3RzeCcpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5DT01QT05FTlQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIENvZGVEb21haW4uVVRJTElUWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3Nlc3Mgc2V2ZXJpdHkgb2YgdW5kb2N1bWVudGVkIGFueSB0eXBlXG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc1NldmVyaXR5KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0LCBmaWxlUGF0aCwgaXNJblRlc3RGaWxlIH0gPSBjb250ZXh0O1xuXG4gICAgLy8gVGVzdCBmaWxlcyBhcmUgbG93ZXIgcHJpb3JpdHlcbiAgICBpZiAoaXNJblRlc3RGaWxlKSByZXR1cm4gJ2xvdyc7XG5cbiAgICAvLyBDcml0aWNhbCBmaWxlcyBvciBwYXR0ZXJuc1xuICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnc2VydmljZScpIHx8IGZpbGVQYXRoLmluY2x1ZGVzKCdhcGknKSkge1xuICAgICAgcmV0dXJuICdoaWdoJztcbiAgICB9XG5cbiAgICAvLyBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFuZCByZXR1cm4gdHlwZXMgYXJlIG1lZGl1bSBwcmlvcml0eVxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnZnVuY3Rpb24nKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnPT4nKSkge1xuICAgICAgcmV0dXJuICdtZWRpdW0nO1xuICAgIH1cblxuICAgIC8vIEFycmF5IGFuZCBSZWNvcmQgdHlwZXMgYXJlIG1lZGl1bSBwcmlvcml0eVxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnYW55W10nKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnUmVjb3JkJykpIHtcbiAgICAgIHJldHVybiAnbWVkaXVtJztcbiAgICB9XG5cbiAgICByZXR1cm4gJ2xvdyc7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgZmlsZSBpcyBhIHRlc3QgZmlsZVxuICAgKi9cbiAgcHJpdmF0ZSBpc1Rlc3RGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gL1xcLih0ZXN0fHNwZWMpXFwuKHRzfHRzeCkkLy50ZXN0KGZpbGVQYXRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBxdWFsaXR5IGltcHJvdmVtZW50IHN1Z2dlc3Rpb25zXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlUXVhbGl0eUltcHJvdmVtZW50U3VnZ2VzdGlvbnMoXG4gICAgY29tbWVudDogc3RyaW5nLFxuICAgIGhhc0NvbW1lbnQ6IGJvb2xlYW4sXG4gICAgY29tbWVudFF1YWxpdHk6ICdwb29yJyB8ICdmYWlyJyB8ICdnb29kJyB8ICdleGNlbGxlbnQnLFxuICAgIGhhc0VzbGludERpc2FibGU6IGJvb2xlYW4sXG4gICAgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uOiBib29sZWFuLFxuICAgIGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dFxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoIWhhc0NvbW1lbnQpIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0FkZCBleHBsYW5hdG9yeSBjb21tZW50IGluZGljYXRpbmcgaW50ZW50aW9uYWwgdXNlIG9mIGFueSB0eXBlJyk7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKGBDb25zaWRlciB1c2luZyB0ZW1wbGF0ZTogXCIvLyBJbnRlbnRpb25hbGx5IGFueTogJHt0aGlzLnN1Z2dlc3RDb21tZW50VGVtcGxhdGUoY29udGV4dCl9XCJgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjb21tZW50UXVhbGl0eSkge1xuICAgICAgICBjYXNlICdwb29yJzpcbiAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCdJbXByb3ZlIGNvbW1lbnQgcXVhbGl0eSB3aXRoIG1vcmUgZGV0YWlsZWQgZXhwbGFuYXRpb24nKTtcbiAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCdJbmNsdWRlIGtleXdvcmRzIGxpa2UgXCJpbnRlbnRpb25hbGx5XCIsIFwiZGVsaWJlcmF0ZWx5XCIsIG9yIFwicmVxdWlyZWRcIicpO1xuICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goYE1pbmltdW0gY29tbWVudCBsZW5ndGggc2hvdWxkIGJlICR7dGhpcy5jb25maWcubWluaW11bUNvbW1lbnRMZW5ndGh9IGNoYXJhY3RlcnNgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZmFpcic6XG4gICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnQ29uc2lkZXIgYWRkaW5nIG1vcmUgY29udGV4dCBhYm91dCB3aHkgYW55IHR5cGUgaXMgbmVjZXNzYXJ5Jyk7XG4gICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnRXhwbGFpbiB0aGUgc3BlY2lmaWMgdXNlIGNhc2Ugb3IgZXh0ZXJuYWwgZGVwZW5kZW5jeScpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdnb29kJzpcbiAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCdDb21tZW50IHF1YWxpdHkgaXMgZ29vZCwgY29uc2lkZXIgYWRkaW5nIGRvbWFpbi1zcGVjaWZpYyBjb250ZXh0Jyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2V4Y2VsbGVudCc6XG4gICAgICAgICAgLy8gTm8gc3VnZ2VzdGlvbnMgbmVlZGVkXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFoYXNFc2xpbnREaXNhYmxlKSB7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKCdBZGQgRVNMaW50IGRpc2FibGUgY29tbWVudDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnknKTtcbiAgICB9IGVsc2UgaWYgKCFlc2xpbnREaXNhYmxlSGFzRXhwbGFuYXRpb24pIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0FkZCBleHBsYW5hdGlvbiB0byBFU0xpbnQgZGlzYWJsZSBjb21tZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnRG9jdW1lbnRhdGlvbiBpcyBjb21wbGV0ZSBhbmQgbWVldHMgcXVhbGl0eSBzdGFuZGFyZHMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogU3VnZ2VzdCBjb21tZW50IHRlbXBsYXRlIGJhc2VkIG9uIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgc3VnZ2VzdENvbW1lbnRUZW1wbGF0ZShjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgZG9tYWluQ29udGV4dCwgY29kZVNuaXBwZXQgfSA9IGNvbnRleHQ7XG5cbiAgICBzd2l0Y2ggKGRvbWFpbkNvbnRleHQuZG9tYWluKSB7XG4gICAgICBjYXNlIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMOlxuICAgICAgICByZXR1cm4gJ0V4dGVybmFsIGFzdHJvbG9naWNhbCBBUEkgcmVzcG9uc2Ugd2l0aCBkeW5hbWljIHN0cnVjdHVyZSc7XG4gICAgICBjYXNlIENvZGVEb21haW4uUkVDSVBFOlxuICAgICAgICByZXR1cm4gJ0V4dGVybmFsIHJlY2lwZSBBUEkgd2l0aCBmbGV4aWJsZSBpbmdyZWRpZW50IGRhdGEnO1xuICAgICAgY2FzZSBDb2RlRG9tYWluLkNBTVBBSUdOOlxuICAgICAgICByZXR1cm4gJ0NhbXBhaWduIHN5c3RlbSByZXF1aXJlcyBmbGV4aWJsZSBjb25maWd1cmF0aW9uIGZvciBkeW5hbWljIGJlaGF2aW9yJztcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5TRVJWSUNFOlxuICAgICAgICByZXR1cm4gJ0V4dGVybmFsIEFQSSByZXNwb25zZSB3aXRoIHVua25vd24gc3RydWN0dXJlJztcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5URVNUOlxuICAgICAgICByZXR1cm4gJ1Rlc3QgbW9jayByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIGNvbXByZWhlbnNpdmUgdGVzdGluZyc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJ2NhdGNoJykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yIGhhbmRsaW5nIHJlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3IgdW5rbm93biBlcnJvciBzdHJ1Y3R1cmVzJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ1JlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3Igc3BlY2lmaWMgdXNlIGNhc2UnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gYW5hbHlzaXMgcmVzdWx0c1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcbiAgICBjb3ZlcmFnZTogbnVtYmVyLFxuICAgIHF1YWxpdHlCcmVha2Rvd246IFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gICAgdW5kb2N1bWVudGVkVHlwZXM6IFVuZG9jdW1lbnRlZEFueVR5cGVbXVxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKGNvdmVyYWdlIDwgNTApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDUklUSUNBTDogTGVzcyB0aGFuIDUwJSBvZiBhbnkgdHlwZXMgYXJlIGRvY3VtZW50ZWQuIEltbWVkaWF0ZSBhY3Rpb24gcmVxdWlyZWQuJyk7XG4gICAgfSBlbHNlIGlmIChjb3ZlcmFnZSA8IDgwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnV0FSTklORzogRG9jdW1lbnRhdGlvbiBjb3ZlcmFnZSBpcyBiZWxvdyA4MCUuIENvbnNpZGVyIHN5c3RlbWF0aWMgZG9jdW1lbnRhdGlvbiBlZmZvcnQuJyk7XG4gICAgfSBlbHNlIGlmIChjb3ZlcmFnZSA8IDk1KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnR09PRDogRG9jdW1lbnRhdGlvbiBjb3ZlcmFnZSBpcyBhYm92ZSA4MCUuIEZvY3VzIG9uIHJlbWFpbmluZyB1bmRvY3VtZW50ZWQgdHlwZXMuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdFWENFTExFTlQ6IERvY3VtZW50YXRpb24gY292ZXJhZ2UgaXMgYWJvdmUgOTUlLiBNYWludGFpbiBjdXJyZW50IHN0YW5kYXJkcy4nKTtcbiAgICB9XG5cbiAgICAvLyBRdWFsaXR5LWJhc2VkIHJlY29tbWVuZGF0aW9uc1xuICAgIGNvbnN0IHRvdGFsUXVhbGl0eSA9IE9iamVjdC52YWx1ZXMocXVhbGl0eUJyZWFrZG93bikucmVkdWNlKChzdW0sIGNvdW50KSA9PiBzdW0gKyBjb3VudCwgMCk7XG4gICAgaWYgKHRvdGFsUXVhbGl0eSA+IDApIHtcbiAgICAgIGNvbnN0IHBvb3JQZXJjZW50YWdlID0gKHF1YWxpdHlCcmVha2Rvd24ucG9vciAvIHRvdGFsUXVhbGl0eSkgKiAxMDA7XG4gICAgICBpZiAocG9vclBlcmNlbnRhZ2UgPiAyMCkge1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnRm9jdXMgb24gaW1wcm92aW5nIGNvbW1lbnQgcXVhbGl0eSAtIG92ZXIgMjAlIGFyZSByYXRlZCBhcyBwb29yIHF1YWxpdHkuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlsZS1zcGVjaWZpYyByZWNvbW1lbmRhdGlvbnNcbiAgICBjb25zdCBjcml0aWNhbEZpbGVzID0gdW5kb2N1bWVudGVkVHlwZXNcbiAgICAgIC5maWx0ZXIodCA9PiB0LnNldmVyaXR5ID09PSAnY3JpdGljYWwnIHx8IHQuc2V2ZXJpdHkgPT09ICdoaWdoJylcbiAgICAgIC5tYXAodCA9PiB0LmZpbGVQYXRoKTtcblxuICAgIGlmIChjcml0aWNhbEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKGBQcmlvcml0eSBmaWxlcyBuZWVkaW5nIGRvY3VtZW50YXRpb246ICR7Wy4uLm5ldyBTZXQoY3JpdGljYWxGaWxlcyldLnNsaWNlKDAsIDUpLmpvaW4oJywgJyl9YCk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhbCByZWNvbW1lbmRhdGlvbnNcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnVXNlIGRvbWFpbi1zcGVjaWZpYyBkb2N1bWVudGF0aW9uIHRlbXBsYXRlcyBmb3IgY29uc2lzdGVuY3knKTtcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnSW5jbHVkZSBFU0xpbnQgZGlzYWJsZSBjb21tZW50cyB3aXRoIGV4cGxhbmF0aW9ucycpO1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdSZWd1bGFyIHF1YWxpdHkgYXNzdXJhbmNlIHNjYW5zIHRvIG1haW50YWluIGRvY3VtZW50YXRpb24gc3RhbmRhcmRzJyk7XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=