dbe2cae0711bb0c9738ae65230b79d57
"use strict";
/**
 * Enhanced Development Experience Optimizations
 *
 * This module implements enhanced development experience optimizations including:
 * - Optimized TypeScript configuration for faster compilation
 * - Enhanced IntelliSense for astrological type definitions
 * - Automatic import organization and error fixing
 * - Performance monitoring and real-time error detection
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.useDevelopmentExperienceOptimizations = exports.getDevelopmentExperienceOptimizer = exports.DevelopmentExperienceOptimizer = void 0;
const logger_1 = require("@/utils/logger");
/**
 * Enhanced Development Experience Manager
 */
class DevelopmentExperienceOptimizer {
    constructor() {
        this.metrics = this.initializeMetrics();
        this.optimizationConfig = this.getDefaultOptimizationConfig();
        this.startPerformanceMonitoring();
    }
    static getInstance() {
        if (!DevelopmentExperienceOptimizer.instance) {
            DevelopmentExperienceOptimizer.instance = new DevelopmentExperienceOptimizer();
        }
        return DevelopmentExperienceOptimizer.instance;
    }
    /**
     * Generate optimized TypeScript configuration
     */
    generateOptimizedTypeScriptConfig() {
        const config = this.optimizationConfig.typescript;
        return {
            compilerOptions: {
                // Performance optimizations
                target: config.target,
                module: config.module,
                moduleResolution: config.moduleResolution,
                // Compilation speed optimizations
                incremental: config.enableIncrementalCompilation,
                composite: config.enableCompositeMode,
                skipLibCheck: config.skipLibCheck,
                skipDefaultLibCheck: config.skipDefaultLibCheck,
                // Type checking optimizations
                strict: true,
                noImplicitAny: false,
                strictNullChecks: false,
                useDefineForClassFields: config.useDefineForClassFields,
                exactOptionalPropertyTypes: config.exactOptionalPropertyTypes,
                noUncheckedIndexedAccess: config.noUncheckedIndexedAccess,
                // Path mapping for better imports
                baseUrl: ".",
                paths: {
                    "@/*": ["./src/*"],
                    "@components/*": ["./src/components/*"],
                    "@utils/*": ["./src/utils/*"],
                    "@types/*": ["./src/types/*"],
                    "@data/*": ["./src/data/*"],
                    "@calculations/*": ["./src/calculations/*"],
                    "@hooks/*": ["./src/hooks/*"],
                    "@contexts/*": ["./src/contexts/*"]
                },
                // Enhanced type definitions
                lib: ["dom", "dom.iterable", "es6", "es2018", "es2020"],
                allowJs: true,
                allowSyntheticDefaultImports: true,
                esModuleInterop: true,
                forceConsistentCasingInFileNames: true,
                isolatedModules: true,
                jsx: "preserve",
                noEmit: true,
                resolveJsonModule: true
            },
            // Include patterns for faster compilation
            include: [
                "next-env.d.ts",
                "**/*.ts",
                "**/*.tsx",
                ".next/types/**/*.ts"
            ],
            // Exclude patterns to reduce compilation time
            exclude: [
                "node_modules",
                ".next",
                "out",
                "build",
                "dist",
                "**/*.test.ts",
                "**/*.test.tsx",
                "**/*.spec.ts",
                "**/*.spec.tsx"
            ],
            // TypeScript project references for faster builds
            references: config.enableProjectReferences ? [
                { path: "./tsconfig.paths.json" }
            ] : undefined
        };
    }
    /**
     * Generate enhanced IntelliSense type definitions
     */
    generateAstrologicalTypeDefinitions() {
        return `
// Enhanced Astrological Type Definitions for IntelliSense
declare global {
  namespace Astrology {
    // Planetary positions with enhanced IntelliSense
    interface PlanetaryPosition {
      /** Zodiac sign (e.g., 'aries', 'taurus', 'gemini') */
      sign: 'aries' | 'taurus' | 'gemini' | 'cancer' | 'leo' | 'virgo' | 
            'libra' | 'scorpio' | 'sagittarius' | 'capricorn' | 'aquarius' | 'pisces';
      /** Degree within the sign (0-30) */
      degree: number;
      /** Exact longitude (0-360) */
      exactLongitude: number;
      /** Whether the planet is in retrograde motion */
      isRetrograde: boolean;
    }

    // Elemental properties with validation
    interface ElementalProperties {
      /** Fire element strength (0-1) - Energy, spice, quick cooking */
      Fire: number;
      /** Water element strength (0-1) - Cooling, fluid, steaming */
      Water: number;
      /** Earth element strength (0-1) - Grounding, root vegetables, slow cooking */
      Earth: number;
      /** Air element strength (0-1) - Light, leafy, raw preparations */
      Air: number;
    }

    // Planetary correspondences for ingredients
    interface PlanetaryCorrespondence {
      /** Primary ruling planet */
      rulingPlanet: 'sun' | 'moon' | 'mercury' | 'venus' | 'mars' | 'jupiter' | 'saturn';
      /** Secondary planetary influences */
      influences?: Array<'sun' | 'moon' | 'mercury' | 'venus' | 'mars' | 'jupiter' | 'saturn'>;
      /** Optimal timing for use */
      optimalTiming?: string;
    }

    // Culinary astrology calculations
    interface CulinaryAstrologyData {
      /** Current dominant element based on planetary positions */
      dominantElement: 'Fire' | 'Water' | 'Earth' | 'Air';
      /** Recommended cooking methods */
      recommendedMethods: string[];
      /** Optimal ingredients for current conditions */
      optimalIngredients: string[];
      /** Timing recommendations */
      timing: {
        bestHours: string[];
        lunarPhase: string;
        planetaryHour: string;
      };
    }

    // Type guards for runtime validation
    function isPlanetaryPosition(obj: any): obj is PlanetaryPosition;
    function isElementalProperties(obj: any): obj is ElementalProperties;
    function isValidCompatibilityScore(score: number): boolean;
  }

  // Enhanced ingredient type definitions
  interface EnhancedIngredient {
    name: string;
    category: string;
    elementalProperties: Astrology.ElementalProperties;
    planetaryCorrespondence: Astrology.PlanetaryCorrespondence;
    culinaryProperties: {
      flavorProfile: string[];
      cookingMethods: string[];
      seasonality: string[];
      pairings: string[];
    };
    nutritionalData?: {
      calories: number;
      protein: number;
      carbs: number;
      fat: number;
      vitamins: string[];
      minerals: string[];
    };
  }

  // Enhanced recipe type definitions
  interface EnhancedRecipe {
    id: string;
    name: string;
    ingredients: EnhancedIngredient[];
    instructions: string[];
    astrologicalOptimization: Astrology.CulinaryAstrologyData;
    elementalBalance: Astrology.ElementalProperties;
    timing: {
      prepTime: number;
      cookTime: number;
      totalTime: number;
      optimalStartTime?: string;
    };
  }
}

// Export enhanced types for use in components
export type {
  Astrology.PlanetaryPosition as PlanetaryPosition,
  Astrology.ElementalProperties as ElementalProperties,
  Astrology.CulinaryAstrologyData as CulinaryAstrologyData,
  EnhancedIngredient,
  EnhancedRecipe
};
`;
    }
    /**
     * Organize and optimize imports automatically
     */
    organizeImports(sourceCode) {
        if (!this.optimizationConfig.importOrganization.enableAutoImportOrganization) {
            return sourceCode;
        }
        const lines = sourceCode.split('\n');
        const imports = [];
        const otherLines = [];
        let inImportSection = true;
        for (const line of lines) {
            if (line.trim().startsWith('import ') || line.trim().startsWith('export ')) {
                if (inImportSection) {
                    imports.push(line);
                }
                else {
                    otherLines.push(line);
                }
            }
            else if (line.trim() === '') {
                if (inImportSection && imports.length > 0) {
                    imports.push(line);
                }
                else {
                    otherLines.push(line);
                }
            }
            else {
                inImportSection = false;
                otherLines.push(line);
            }
        }
        // Remove unused imports
        const usedImports = this.optimizationConfig.importOrganization.enableUnusedImportRemoval
            ? this.removeUnusedImports(imports, otherLines.join('\n'))
            : imports;
        // Sort imports
        const sortedImports = this.optimizationConfig.importOrganization.enableImportSorting
            ? this.sortImports(usedImports)
            : usedImports;
        return [...sortedImports, '', ...otherLines].join('\n');
    }
    /**
     * Real-time error detection and fixing
     */
    detectAndFixCommonErrors(sourceCode) {
        let fixedCode = sourceCode;
        const fixes = [];
        const remainingErrors = [];
        // Fix common TypeScript errors
        const commonFixes = [
            {
                pattern: /React\.FC<([^>]+)>/g,
                replacement: 'React.FC<$1>',
                description: 'Fixed React.FC type annotation'
            },
            {
                pattern: /useEffect\(\(\) => \{([^}]+)\}, \[\]\)/g,
                replacement: 'useEffect(() => {$1}, [])',
                description: 'Fixed useEffect dependency array'
            },
            {
                pattern: /const \[([^,]+), set([^\]]+)\] = useState\(\)/g,
                replacement: 'const [$1, set$2] = useState<any>()',
                description: 'Added type annotation to useState'
            },
            {
                pattern: /interface ([A-Z][a-zA-Z]*) \{/g,
                replacement: 'interface $1 {',
                description: 'Fixed interface naming convention'
            }
        ];
        commonFixes.forEach(fix => {
            if (fix.pattern.test(fixedCode)) {
                fixedCode = fixedCode.replace(fix.pattern, fix.replacement);
                fixes.push(fix.description);
            }
        });
        // Detect remaining errors (simplified detection)
        const errorPatterns = [
            /Property '([^']+)' does not exist on type/g,
            /Type '([^']+)' is not assignable to type/g,
            /Cannot find name '([^']+)'/g
        ];
        errorPatterns.forEach(pattern => {
            const matches = fixedCode.match(pattern);
            if (matches) {
                matches.forEach(match => remainingErrors.push(match));
            }
        });
        return { fixedCode, fixes, remainingErrors };
    }
    /**
     * Monitor performance metrics in real-time
     */
    updatePerformanceMetrics(newMetrics) {
        this.metrics = { ...this.metrics, ...newMetrics, lastOptimization: Date.now() };
        if (this.optimizationConfig.performanceMonitoring.enableRealTimeErrorDetection) {
            this.checkPerformanceThresholds();
        }
    }
    /**
     * Get current development metrics
     */
    getDevelopmentMetrics() {
        return { ...this.metrics };
    }
    /**
     * Generate performance optimization recommendations
     */
    getPerformanceOptimizationRecommendations() {
        const recommendations = {
            typescript: [],
            bundling: [],
            runtime: [],
            development: []
        };
        // TypeScript recommendations
        if (this.metrics.compilationTime > 30000) { // 30 seconds
            recommendations.typescript.push('Enable incremental compilation');
            recommendations.typescript.push('Use project references for large codebases');
            recommendations.typescript.push('Enable skipLibCheck for faster builds');
        }
        // Bundle size recommendations
        if (this.metrics.bundleSize > 500 * 1024) { // 500KB
            recommendations.bundling.push('Implement code splitting');
            recommendations.bundling.push('Enable tree shaking');
            recommendations.bundling.push('Use dynamic imports for large components');
        }
        // Runtime performance recommendations
        if (this.metrics.memoryUsage > 100) { // 100MB
            recommendations.runtime.push('Optimize React component re-renders');
            recommendations.runtime.push('Use React.memo for expensive components');
            recommendations.runtime.push('Implement proper cleanup in useEffect');
        }
        // Development experience recommendations
        if (this.metrics.hotReloadTime > 5000) { // 5 seconds
            recommendations.development.push('Optimize webpack configuration');
            recommendations.development.push('Reduce the number of watched files');
            recommendations.development.push('Use faster development server');
        }
        return recommendations;
    }
    /**
     * Apply automatic optimizations
     */
    applyAutomaticOptimizations() {
        const applied = [];
        const skipped = [];
        const errors = [];
        try {
            // Generate optimized TypeScript config
            const tsConfig = this.generateOptimizedTypeScriptConfig();
            applied.push('Generated optimized TypeScript configuration');
            // Generate enhanced type definitions
            const typeDefinitions = this.generateAstrologicalTypeDefinitions();
            applied.push('Generated enhanced astrological type definitions');
            // Update performance monitoring
            if (this.optimizationConfig.performanceMonitoring.enableRealTimeErrorDetection) {
                this.startRealTimeErrorDetection();
                applied.push('Started real-time error detection');
            }
            logger_1.logger.info('Automatic optimizations applied:', applied);
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Unknown error';
            errors.push(errorMessage);
            logger_1.logger.error('Error applying automatic optimizations:', error);
        }
        return { applied, skipped, errors };
    }
    // Private helper methods
    initializeMetrics() {
        return {
            compilationTime: 0,
            memoryUsage: 0,
            bundleSize: 0,
            errorCount: 0,
            warningCount: 0,
            hotReloadTime: 0,
            lastOptimization: Date.now()
        };
    }
    getDefaultOptimizationConfig() {
        return {
            typescript: {
                enableIncrementalCompilation: true,
                enableProjectReferences: false,
                enableCompositeMode: false,
                skipLibCheck: true,
                skipDefaultLibCheck: true,
                useDefineForClassFields: true,
                exactOptionalPropertyTypes: false,
                noUncheckedIndexedAccess: false,
                target: 'es2018',
                module: 'esnext',
                moduleResolution: 'bundler'
            },
            intelliSense: {
                enableAstrologicalTypeDefinitions: true,
                enableElementalPropertyIntelliSense: true,
                enablePlanetaryPositionAutoComplete: true,
                enableCulinaryAstrologySnippets: true,
                enableCustomTypeGuards: true
            },
            importOrganization: {
                enableAutoImportOrganization: true,
                enableUnusedImportRemoval: true,
                enableImportSorting: true,
                enablePathMapping: true,
                groupExternalImports: true,
                groupInternalImports: true
            },
            performanceMonitoring: {
                enableRealTimeErrorDetection: true,
                enableCompilationTimeTracking: true,
                enableMemoryUsageMonitoring: true,
                enableBundleSizeTracking: true,
                enableHotReloadOptimization: true
            }
        };
    }
    startPerformanceMonitoring() {
        if (typeof window === 'undefined')
            return;
        // Monitor memory usage
        setInterval(() => {
            if (performance.memory) {
                const memoryUsage = performance.memory.usedJSHeapSize / 1024 / 1024;
                this.updatePerformanceMetrics({ memoryUsage });
            }
        }, 10000); // Every 10 seconds
    }
    checkPerformanceThresholds() {
        const thresholds = {
            compilationTime: 30000,
            memoryUsage: 100,
            bundleSize: 500 * 1024,
            errorCount: 10
        };
        Object.entries(thresholds).forEach(([metric, threshold]) => {
            const currentValue = this.metrics[metric];
            if (typeof currentValue === 'number' && currentValue > threshold) {
                logger_1.logger.warn(`Performance threshold exceeded for ${metric}:`, {
                    current: currentValue,
                    threshold
                });
            }
        });
    }
    removeUnusedImports(imports, codeBody) {
        return imports.filter(importLine => {
            // Extract imported names from the import statement
            const importMatch = importLine.match(/import\s+(?:\{([^}]+)\}|\*\s+as\s+(\w+)|(\w+))/);
            if (!importMatch)
                return true;
            const importedNames = importMatch[1]
                ? importMatch[1].split(',').map(name => name.trim().split(' as ')[0])
                : [importMatch[2] || importMatch[3]];
            // Check if any imported name is used in the code
            return importedNames.some(name => {
                const regex = new RegExp(`\\b${name}\\b`, 'g');
                return regex.test(codeBody);
            });
        });
    }
    sortImports(imports) {
        const externalImports = [];
        const internalImports = [];
        imports.forEach(importLine => {
            if (importLine.includes('@/') || importLine.includes('./') || importLine.includes('../')) {
                internalImports.push(importLine);
            }
            else if (importLine.trim().startsWith('import ')) {
                externalImports.push(importLine);
            }
        });
        return [
            ...externalImports.sort(),
            ...(externalImports.length > 0 && internalImports.length > 0 ? [''] : []),
            ...internalImports.sort()
        ];
    }
    startRealTimeErrorDetection() {
        // In a real implementation, this would integrate with the TypeScript compiler API
        // For now, we'll simulate real-time error detection
        setInterval(() => {
            // Simulate error detection
            const errorCount = Math.floor(Math.random() * 5);
            this.updatePerformanceMetrics({ errorCount });
        }, 30000); // Every 30 seconds
    }
}
exports.DevelopmentExperienceOptimizer = DevelopmentExperienceOptimizer;
/**
 * Convenience function to get development experience optimizer instance
 */
function getDevelopmentExperienceOptimizer() {
    return DevelopmentExperienceOptimizer.getInstance();
}
exports.getDevelopmentExperienceOptimizer = getDevelopmentExperienceOptimizer;
/**
 * Hook for components to use development experience optimizations
 */
function useDevelopmentExperienceOptimizations() {
    const optimizer = getDevelopmentExperienceOptimizer();
    return {
        generateOptimizedTypeScriptConfig: () => optimizer.generateOptimizedTypeScriptConfig(),
        generateAstrologicalTypeDefinitions: () => optimizer.generateAstrologicalTypeDefinitions(),
        organizeImports: (code) => optimizer.organizeImports(code),
        detectAndFixCommonErrors: (code) => optimizer.detectAndFixCommonErrors(code),
        updatePerformanceMetrics: (metrics) => optimizer.updatePerformanceMetrics(metrics),
        getDevelopmentMetrics: () => optimizer.getDevelopmentMetrics(),
        getPerformanceOptimizationRecommendations: () => optimizer.getPerformanceOptimizationRecommendations(),
        applyAutomaticOptimizations: () => optimizer.applyAutomaticOptimizations()
    };
}
exports.useDevelopmentExperienceOptimizations = useDevelopmentExperienceOptimizations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9kZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6YXRpb25zLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7R0FRRzs7O0FBRUgsMkNBQXdDO0FBdUR4Qzs7R0FFRztBQUNILE1BQWEsOEJBQThCO0lBVXpDO1FBQ0UsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN4QyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLDRCQUE0QixFQUFFLENBQUM7UUFDOUQsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxRQUFRLEVBQUU7WUFDNUMsOEJBQThCLENBQUMsUUFBUSxHQUFHLElBQUksOEJBQThCLEVBQUUsQ0FBQztTQUNoRjtRQUNELE9BQU8sOEJBQThCLENBQUMsUUFBUSxDQUFDO0lBQ2pELENBQUM7SUFFRDs7T0FFRztJQUNJLGlDQUFpQztRQUN0QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDO1FBRWxELE9BQU87WUFDTCxlQUFlLEVBQUU7Z0JBQ2YsNEJBQTRCO2dCQUM1QixNQUFNLEVBQUUsTUFBTSxDQUFDLE1BQU07Z0JBQ3JCLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTTtnQkFDckIsZ0JBQWdCLEVBQUUsTUFBTSxDQUFDLGdCQUFnQjtnQkFFekMsa0NBQWtDO2dCQUNsQyxXQUFXLEVBQUUsTUFBTSxDQUFDLDRCQUE0QjtnQkFDaEQsU0FBUyxFQUFFLE1BQU0sQ0FBQyxtQkFBbUI7Z0JBQ3JDLFlBQVksRUFBRSxNQUFNLENBQUMsWUFBWTtnQkFDakMsbUJBQW1CLEVBQUUsTUFBTSxDQUFDLG1CQUFtQjtnQkFFL0MsOEJBQThCO2dCQUM5QixNQUFNLEVBQUUsSUFBSTtnQkFDWixhQUFhLEVB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Qyx5Q0FBeUMsRUFBRTtRQUN0RywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsMkJBQTJCLEVBQUU7S0FDM0UsQ0FBQztBQUNKLENBQUM7QUFiRCxzRkFhQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3V0aWxzL2RldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmhhbmNlZCBEZXZlbG9wbWVudCBFeHBlcmllbmNlIE9wdGltaXphdGlvbnNcbiAqIFxuICogVGhpcyBtb2R1bGUgaW1wbGVtZW50cyBlbmhhbmNlZCBkZXZlbG9wbWVudCBleHBlcmllbmNlIG9wdGltaXphdGlvbnMgaW5jbHVkaW5nOlxuICogLSBPcHRpbWl6ZWQgVHlwZVNjcmlwdCBjb25maWd1cmF0aW9uIGZvciBmYXN0ZXIgY29tcGlsYXRpb25cbiAqIC0gRW5oYW5jZWQgSW50ZWxsaVNlbnNlIGZvciBhc3Ryb2xvZ2ljYWwgdHlwZSBkZWZpbml0aW9uc1xuICogLSBBdXRvbWF0aWMgaW1wb3J0IG9yZ2FuaXphdGlvbiBhbmQgZXJyb3IgZml4aW5nXG4gKiAtIFBlcmZvcm1hbmNlIG1vbml0b3JpbmcgYW5kIHJlYWwtdGltZSBlcnJvciBkZXRlY3Rpb25cbiAqL1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5cbi8vIFR5cGVTY3JpcHQgY29tcGlsYXRpb24gb3B0aW1pemF0aW9uIHNldHRpbmdzXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVTY3JpcHRPcHRpbWl6YXRpb25Db25maWcge1xuICBlbmFibGVJbmNyZW1lbnRhbENvbXBpbGF0aW9uOiBib29sZWFuO1xuICBlbmFibGVQcm9qZWN0UmVmZXJlbmNlczogYm9vbGVhbjtcbiAgZW5hYmxlQ29tcG9zaXRlTW9kZTogYm9vbGVhbjtcbiAgc2tpcExpYkNoZWNrOiBib29sZWFuO1xuICBza2lwRGVmYXVsdExpYkNoZWNrOiBib29sZWFuO1xuICB1c2VEZWZpbmVGb3JDbGFzc0ZpZWxkczogYm9vbGVhbjtcbiAgZXhhY3RPcHRpb25hbFByb3BlcnR5VHlwZXM6IGJvb2xlYW47XG4gIG5vVW5jaGVja2VkSW5kZXhlZEFjY2VzczogYm9vbGVhbjtcbiAgdGFyZ2V0OiAnZXMyMDE4JyB8ICdlczIwMjAnIHwgJ2VzMjAyMicgfCAnZXNuZXh0JztcbiAgbW9kdWxlOiAnY29tbW9uanMnIHwgJ2VzbmV4dCcgfCAnZXMyMDIwJyB8ICdlczIwMjInO1xuICBtb2R1bGVSZXNvbHV0aW9uOiAnbm9kZScgfCAnYnVuZGxlcic7XG59XG5cbi8vIEludGVsbGlTZW5zZSBlbmhhbmNlbWVudCBjb25maWd1cmF0aW9uXG5leHBvcnQgaW50ZXJmYWNlIEludGVsbGlTZW5zZUNvbmZpZyB7XG4gIGVuYWJsZUFzdHJvbG9naWNhbFR5cGVEZWZpbml0aW9uczogYm9vbGVhbjtcbiAgZW5hYmxlRWxlbWVudGFsUHJvcGVydHlJbnRlbGxpU2Vuc2U6IGJvb2xlYW47XG4gIGVuYWJsZVBsYW5ldGFyeVBvc2l0aW9uQXV0b0NvbXBsZXRlOiBib29sZWFuO1xuICBlbmFibGVDdWxpbmFyeUFzdHJvbG9neVNuaXBwZXRzOiBib29sZWFuO1xuICBlbmFibGVDdXN0b21UeXBlR3VhcmRzOiBib29sZWFuO1xufVxuXG4vLyBJbXBvcnQgb3JnYW5pemF0aW9uIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0T3JnYW5pemF0aW9uQ29uZmlnIHtcbiAgZW5hYmxlQXV0b0ltcG9ydE9yZ2FuaXphdGlvbjogYm9vbGVhbjtcbiAgZW5hYmxlVW51c2VkSW1wb3J0UmVtb3ZhbDogYm9vbGVhbjtcbiAgZW5hYmxlSW1wb3J0U29ydGluZzogYm9vbGVhbjtcbiAgZW5hYmxlUGF0aE1hcHBpbmc6IGJvb2xlYW47XG4gIGdyb3VwRXh0ZXJuYWxJbXBvcnRzOiBib29sZWFuO1xuICBncm91cEludGVybmFsSW1wb3J0czogYm9vbGVhbjtcbn1cblxuLy8gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBjb25maWd1cmF0aW9uXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlTW9uaXRvcmluZ0NvbmZpZyB7XG4gIGVuYWJsZVJlYWxUaW1lRXJyb3JEZXRlY3Rpb246IGJvb2xlYW47XG4gIGVuYWJsZUNvbXBpbGF0aW9uVGltZVRyYWNraW5nOiBib29sZWFuO1xuICBlbmFibGVNZW1vcnlVc2FnZU1vbml0b3Jpbmc6IGJvb2xlYW47XG4gIGVuYWJsZUJ1bmRsZVNpemVUcmFja2luZzogYm9vbGVhbjtcbiAgZW5hYmxlSG90UmVsb2FkT3B0aW1pemF0aW9uOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldmVsb3BtZW50TWV0cmljcyB7XG4gIGNvbXBpbGF0aW9uVGltZTogbnVtYmVyO1xuICBtZW1vcnlVc2FnZTogbnVtYmVyO1xuICBidW5kbGVTaXplOiBudW1iZXI7XG4gIGVycm9yQ291bnQ6IG51bWJlcjtcbiAgd2FybmluZ0NvdW50OiBudW1iZXI7XG4gIGhvdFJlbG9hZFRpbWU6IG51bWJlcjtcbiAgbGFzdE9wdGltaXphdGlvbjogbnVtYmVyO1xufVxuXG4vKipcbiAqIEVuaGFuY2VkIERldmVsb3BtZW50IEV4cGVyaWVuY2UgTWFuYWdlclxuICovXG5leHBvcnQgY2xhc3MgRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXplcjtcbiAgcHJpdmF0ZSBtZXRyaWNzOiBEZXZlbG9wbWVudE1ldHJpY3M7XG4gIHByaXZhdGUgb3B0aW1pemF0aW9uQ29uZmlnOiB7XG4gICAgdHlwZXNjcmlwdDogVHlwZVNjcmlwdE9wdGltaXphdGlvbkNvbmZpZztcbiAgICBpbnRlbGxpU2Vuc2U6IEludGVsbGlTZW5zZUNvbmZpZztcbiAgICBpbXBvcnRPcmdhbml6YXRpb246IEltcG9ydE9yZ2FuaXphdGlvbkNvbmZpZztcbiAgICBwZXJmb3JtYW5jZU1vbml0b3Jpbmc6IFBlcmZvcm1hbmNlTW9uaXRvcmluZ0NvbmZpZztcbiAgfTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWV0cmljcyA9IHRoaXMuaW5pdGlhbGl6ZU1ldHJpY3MoKTtcbiAgICB0aGlzLm9wdGltaXphdGlvbkNvbmZpZyA9IHRoaXMuZ2V0RGVmYXVsdE9wdGltaXphdGlvbkNvbmZpZygpO1xuICAgIHRoaXMuc3RhcnRQZXJmb3JtYW5jZU1vbml0b3JpbmcoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyIHtcbiAgICBpZiAoIURldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXplci5pbnN0YW5jZSkge1xuICAgICAgRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyLmluc3RhbmNlID0gbmV3IERldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXplcigpO1xuICAgIH1cbiAgICByZXR1cm4gRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG9wdGltaXplZCBUeXBlU2NyaXB0IGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZU9wdGltaXplZFR5cGVTY3JpcHRDb25maWcoKTogYW55IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLm9wdGltaXphdGlvbkNvbmZpZy50eXBlc2NyaXB0O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgLy8gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uc1xuICAgICAgICB0YXJnZXQ6IGNvbmZpZy50YXJnZXQsXG4gICAgICAgIG1vZHVsZTogY29uZmlnLm1vZHVsZSxcbiAgICAgICAgbW9kdWxlUmVzb2x1dGlvbjogY29uZmlnLm1vZHVsZVJlc29sdXRpb24sXG4gICAgICAgIFxuICAgICAgICAvLyBDb21waWxhdGlvbiBzcGVlZCBvcHRpbWl6YXRpb25zXG4gICAgICAgIGluY3JlbWVudGFsOiBjb25maWcuZW5hYmxlSW5jcmVtZW50YWxDb21waWxhdGlvbixcbiAgICAgICAgY29tcG9zaXRlOiBjb25maWcuZW5hYmxlQ29tcG9zaXRlTW9kZSxcbiAgICAgICAgc2tpcExpYkNoZWNrOiBjb25maWcuc2tpcExpYkNoZWNrLFxuICAgICAgICBza2lwRGVmYXVsdExpYkNoZWNrOiBjb25maWcuc2tpcERlZmF1bHRMaWJDaGVjayxcbiAgICAgICAgXG4gICAgICAgIC8vIFR5cGUgY2hlY2tpbmcgb3B0aW1pemF0aW9uc1xuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIG5vSW1wbGljaXRBbnk6IGZhbHNlLCAvLyBSZWxheGVkIGZvciByYXBpZCBkZXZlbG9wbWVudFxuICAgICAgICBzdHJpY3ROdWxsQ2hlY2tzOiBmYWxzZSwgLy8gUmVsYXhlZCBmb3IgcmFwaWQgZGV2ZWxvcG1lbnRcbiAgICAgICAgdXNlRGVmaW5lRm9yQ2xhc3NGaWVsZHM6IGNvbmZpZy51c2VEZWZpbmVGb3JDbGFzc0ZpZWxkcyxcbiAgICAgICAgZXhhY3RPcHRpb25hbFByb3BlcnR5VHlwZXM6IGNvbmZpZy5leGFjdE9wdGlvbmFsUHJvcGVydHlUeXBlcyxcbiAgICAgICAgbm9VbmNoZWNrZWRJbmRleGVkQWNjZXNzOiBjb25maWcubm9VbmNoZWNrZWRJbmRleGVkQWNjZXNzLFxuICAgICAgICBcbiAgICAgICAgLy8gUGF0aCBtYXBwaW5nIGZvciBiZXR0ZXIgaW1wb3J0c1xuICAgICAgICBiYXNlVXJsOiBcIi5cIixcbiAgICAgICAgcGF0aHM6IHtcbiAgICAgICAgICBcIkAvKlwiOiBbXCIuL3NyYy8qXCJdLFxuICAgICAgICAgIFwiQGNvbXBvbmVudHMvKlwiOiBbXCIuL3NyYy9jb21wb25lbnRzLypcIl0sXG4gICAgICAgICAgXCJAdXRpbHMvKlwiOiBbXCIuL3NyYy91dGlscy8qXCJdLFxuICAgICAgICAgIFwiQHR5cGVzLypcIjogW1wiLi9zcmMvdHlwZXMvKlwiXSxcbiAgICAgICAgICBcIkBkYXRhLypcIjogW1wiLi9zcmMvZGF0YS8qXCJdLFxuICAgICAgICAgIFwiQGNhbGN1bGF0aW9ucy8qXCI6IFtcIi4vc3JjL2NhbGN1bGF0aW9ucy8qXCJdLFxuICAgICAgICAgIFwiQGhvb2tzLypcIjogW1wiLi9zcmMvaG9va3MvKlwiXSxcbiAgICAgICAgICBcIkBjb250ZXh0cy8qXCI6IFtcIi4vc3JjL2NvbnRleHRzLypcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIEVuaGFuY2VkIHR5cGUgZGVmaW5pdGlvbnNcbiAgICAgICAgbGliOiBbXCJkb21cIiwgXCJkb20uaXRlcmFibGVcIiwgXCJlczZcIiwgXCJlczIwMThcIiwgXCJlczIwMjBcIl0sXG4gICAgICAgIGFsbG93SnM6IHRydWUsXG4gICAgICAgIGFsbG93U3ludGhldGljRGVmYXVsdEltcG9ydHM6IHRydWUsXG4gICAgICAgIGVzTW9kdWxlSW50ZXJvcDogdHJ1ZSxcbiAgICAgICAgZm9yY2VDb25zaXN0ZW50Q2FzaW5nSW5GaWxlTmFtZXM6IHRydWUsXG4gICAgICAgIGlzb2xhdGVkTW9kdWxlczogdHJ1ZSxcbiAgICAgICAganN4OiBcInByZXNlcnZlXCIsXG4gICAgICAgIG5vRW1pdDogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZUpzb25Nb2R1bGU6IHRydWVcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIEluY2x1ZGUgcGF0dGVybnMgZm9yIGZhc3RlciBjb21waWxhdGlvblxuICAgICAgaW5jbHVkZTogW1xuICAgICAgICBcIm5leHQtZW52LmQudHNcIixcbiAgICAgICAgXCIqKi8qLnRzXCIsXG4gICAgICAgIFwiKiovKi50c3hcIixcbiAgICAgICAgXCIubmV4dC90eXBlcy8qKi8qLnRzXCJcbiAgICAgIF0sXG4gICAgICBcbiAgICAgIC8vIEV4Y2x1ZGUgcGF0dGVybnMgdG8gcmVkdWNlIGNvbXBpbGF0aW9uIHRpbWVcbiAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgXCJub2RlX21vZHVsZXNcIixcbiAgICAgICAgXCIubmV4dFwiLFxuICAgICAgICBcIm91dFwiLFxuICAgICAgICBcImJ1aWxkXCIsXG4gICAgICAgIFwiZGlzdFwiLFxuICAgICAgICBcIioqLyoudGVzdC50c1wiLFxuICAgICAgICBcIioqLyoudGVzdC50c3hcIixcbiAgICAgICAgXCIqKi8qLnNwZWMudHNcIixcbiAgICAgICAgXCIqKi8qLnNwZWMudHN4XCJcbiAgICAgIF0sXG4gICAgICBcbiAgICAgIC8vIFR5cGVTY3JpcHQgcHJvamVjdCByZWZlcmVuY2VzIGZvciBmYXN0ZXIgYnVpbGRzXG4gICAgICByZWZlcmVuY2VzOiBjb25maWcuZW5hYmxlUHJvamVjdFJlZmVyZW5jZXMgPyBbXG4gICAgICAgIHsgcGF0aDogXCIuL3RzY29uZmlnLnBhdGhzLmpzb25cIiB9XG4gICAgICBdIDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBlbmhhbmNlZCBJbnRlbGxpU2Vuc2UgdHlwZSBkZWZpbml0aW9uc1xuICAgKi9cbiAgcHVibGljIGdlbmVyYXRlQXN0cm9sb2dpY2FsVHlwZURlZmluaXRpb25zKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbi8vIEVuaGFuY2VkIEFzdHJvbG9naWNhbCBUeXBlIERlZmluaXRpb25zIGZvciBJbnRlbGxpU2Vuc2VcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgbmFtZXNwYWNlIEFzdHJvbG9neSB7XG4gICAgLy8gUGxhbmV0YXJ5IHBvc2l0aW9ucyB3aXRoIGVuaGFuY2VkIEludGVsbGlTZW5zZVxuICAgIGludGVyZmFjZSBQbGFuZXRhcnlQb3NpdGlvbiB7XG4gICAgICAvKiogWm9kaWFjIHNpZ24gKGUuZy4sICdhcmllcycsICd0YXVydXMnLCAnZ2VtaW5pJykgKi9cbiAgICAgIHNpZ246ICdhcmllcycgfCAndGF1cnVzJyB8ICdnZW1pbmknIHwgJ2NhbmNlcicgfCAnbGVvJyB8ICd2aXJnbycgfCBcbiAgICAgICAgICAgICdsaWJyYScgfCAnc2NvcnBpbycgfCAnc2FnaXR0YXJpdXMnIHwgJ2NhcHJpY29ybicgfCAnYXF1YXJpdXMnIHwgJ3Bpc2Nlcyc7XG4gICAgICAvKiogRGVncmVlIHdpdGhpbiB0aGUgc2lnbiAoMC0zMCkgKi9cbiAgICAgIGRlZ3JlZTogbnVtYmVyO1xuICAgICAgLyoqIEV4YWN0IGxvbmdpdHVkZSAoMC0zNjApICovXG4gICAgICBleGFjdExvbmdpdHVkZTogbnVtYmVyO1xuICAgICAgLyoqIFdoZXRoZXIgdGhlIHBsYW5ldCBpcyBpbiByZXRyb2dyYWRlIG1vdGlvbiAqL1xuICAgICAgaXNSZXRyb2dyYWRlOiBib29sZWFuO1xuICAgIH1cblxuICAgIC8vIEVsZW1lbnRhbCBwcm9wZXJ0aWVzIHdpdGggdmFsaWRhdGlvblxuICAgIGludGVyZmFjZSBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICAgIC8qKiBGaXJlIGVsZW1lbnQgc3RyZW5ndGggKDAtMSkgLSBFbmVyZ3ksIHNwaWNlLCBxdWljayBjb29raW5nICovXG4gICAgICBGaXJlOiBudW1iZXI7XG4gICAgICAvKiogV2F0ZXIgZWxlbWVudCBzdHJlbmd0aCAoMC0xKSAtIENvb2xpbmcsIGZsdWlkLCBzdGVhbWluZyAqL1xuICAgICAgV2F0ZXI6IG51bWJlcjtcbiAgICAgIC8qKiBFYXJ0aCBlbGVtZW50IHN0cmVuZ3RoICgwLTEpIC0gR3JvdW5kaW5nLCByb290IHZlZ2V0YWJsZXMsIHNsb3cgY29va2luZyAqL1xuICAgICAgRWFydGg6IG51bWJlcjtcbiAgICAgIC8qKiBBaXIgZWxlbWVudCBzdHJlbmd0aCAoMC0xKSAtIExpZ2h0LCBsZWFmeSwgcmF3IHByZXBhcmF0aW9ucyAqL1xuICAgICAgQWlyOiBudW1iZXI7XG4gICAgfVxuXG4gICAgLy8gUGxhbmV0YXJ5IGNvcnJlc3BvbmRlbmNlcyBmb3IgaW5ncmVkaWVudHNcbiAgICBpbnRlcmZhY2UgUGxhbmV0YXJ5Q29ycmVzcG9uZGVuY2Uge1xuICAgICAgLyoqIFByaW1hcnkgcnVsaW5nIHBsYW5ldCAqL1xuICAgICAgcnVsaW5nUGxhbmV0OiAnc3VuJyB8ICdtb29uJyB8ICdtZXJjdXJ5JyB8ICd2ZW51cycgfCAnbWFycycgfCAnanVwaXRlcicgfCAnc2F0dXJuJztcbiAgICAgIC8qKiBTZWNvbmRhcnkgcGxhbmV0YXJ5IGluZmx1ZW5jZXMgKi9cbiAgICAgIGluZmx1ZW5jZXM/OiBBcnJheTwnc3VuJyB8ICdtb29uJyB8ICdtZXJjdXJ5JyB8ICd2ZW51cycgfCAnbWFycycgfCAnanVwaXRlcicgfCAnc2F0dXJuJz47XG4gICAgICAvKiogT3B0aW1hbCB0aW1pbmcgZm9yIHVzZSAqL1xuICAgICAgb3B0aW1hbFRpbWluZz86IHN0cmluZztcbiAgICB9XG5cbiAgICAvLyBDdWxpbmFyeSBhc3Ryb2xvZ3kgY2FsY3VsYXRpb25zXG4gICAgaW50ZXJmYWNlIEN1bGluYXJ5QXN0cm9sb2d5RGF0YSB7XG4gICAgICAvKiogQ3VycmVudCBkb21pbmFudCBlbGVtZW50IGJhc2VkIG9uIHBsYW5ldGFyeSBwb3NpdGlvbnMgKi9cbiAgICAgIGRvbWluYW50RWxlbWVudDogJ0ZpcmUnIHwgJ1dhdGVyJyB8ICdFYXJ0aCcgfCAnQWlyJztcbiAgICAgIC8qKiBSZWNvbW1lbmRlZCBjb29raW5nIG1ldGhvZHMgKi9cbiAgICAgIHJlY29tbWVuZGVkTWV0aG9kczogc3RyaW5nW107XG4gICAgICAvKiogT3B0aW1hbCBpbmdyZWRpZW50cyBmb3IgY3VycmVudCBjb25kaXRpb25zICovXG4gICAgICBvcHRpbWFsSW5ncmVkaWVudHM6IHN0cmluZ1tdO1xuICAgICAgLyoqIFRpbWluZyByZWNvbW1lbmRhdGlvbnMgKi9cbiAgICAgIHRpbWluZzoge1xuICAgICAgICBiZXN0SG91cnM6IHN0cmluZ1tdO1xuICAgICAgICBsdW5hclBoYXNlOiBzdHJpbmc7XG4gICAgICAgIHBsYW5ldGFyeUhvdXI6IHN0cmluZztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gVHlwZSBndWFyZHMgZm9yIHJ1bnRpbWUgdmFsaWRhdGlvblxuICAgIGZ1bmN0aW9uIGlzUGxhbmV0YXJ5UG9zaXRpb24ob2JqOiBhbnkpOiBvYmogaXMgUGxhbmV0YXJ5UG9zaXRpb247XG4gICAgZnVuY3Rpb24gaXNFbGVtZW50YWxQcm9wZXJ0aWVzKG9iajogYW55KTogb2JqIGlzIEVsZW1lbnRhbFByb3BlcnRpZXM7XG4gICAgZnVuY3Rpb24gaXNWYWxpZENvbXBhdGliaWxpdHlTY29yZShzY29yZTogbnVtYmVyKTogYm9vbGVhbjtcbiAgfVxuXG4gIC8vIEVuaGFuY2VkIGluZ3JlZGllbnQgdHlwZSBkZWZpbml0aW9uc1xuICBpbnRlcmZhY2UgRW5oYW5jZWRJbmdyZWRpZW50IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiBBc3Ryb2xvZ3kuRWxlbWVudGFsUHJvcGVydGllcztcbiAgICBwbGFuZXRhcnlDb3JyZXNwb25kZW5jZTogQXN0cm9sb2d5LlBsYW5ldGFyeUNvcnJlc3BvbmRlbmNlO1xuICAgIGN1bGluYXJ5UHJvcGVydGllczoge1xuICAgICAgZmxhdm9yUHJvZmlsZTogc3RyaW5nW107XG4gICAgICBjb29raW5nTWV0aG9kczogc3RyaW5nW107XG4gICAgICBzZWFzb25hbGl0eTogc3RyaW5nW107XG4gICAgICBwYWlyaW5nczogc3RyaW5nW107XG4gICAgfTtcbiAgICBudXRyaXRpb25hbERhdGE/OiB7XG4gICAgICBjYWxvcmllczogbnVtYmVyO1xuICAgICAgcHJvdGVpbjogbnVtYmVyO1xuICAgICAgY2FyYnM6IG51bWJlcjtcbiAgICAgIGZhdDogbnVtYmVyO1xuICAgICAgdml0YW1pbnM6IHN0cmluZ1tdO1xuICAgICAgbWluZXJhbHM6IHN0cmluZ1tdO1xuICAgIH07XG4gIH1cblxuICAvLyBFbmhhbmNlZCByZWNpcGUgdHlwZSBkZWZpbml0aW9uc1xuICBpbnRlcmZhY2UgRW5oYW5jZWRSZWNpcGUge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGluZ3JlZGllbnRzOiBFbmhhbmNlZEluZ3JlZGllbnRbXTtcbiAgICBpbnN0cnVjdGlvbnM6IHN0cmluZ1tdO1xuICAgIGFzdHJvbG9naWNhbE9wdGltaXphdGlvbjogQXN0cm9sb2d5LkN1bGluYXJ5QXN0cm9sb2d5RGF0YTtcbiAgICBlbGVtZW50YWxCYWxhbmNlOiBBc3Ryb2xvZ3kuRWxlbWVudGFsUHJvcGVydGllcztcbiAgICB0aW1pbmc6IHtcbiAgICAgIHByZXBUaW1lOiBudW1iZXI7XG4gICAgICBjb29rVGltZTogbnVtYmVyO1xuICAgICAgdG90YWxUaW1lOiBudW1iZXI7XG4gICAgICBvcHRpbWFsU3RhcnRUaW1lPzogc3RyaW5nO1xuICAgIH07XG4gIH1cbn1cblxuLy8gRXhwb3J0IGVuaGFuY2VkIHR5cGVzIGZvciB1c2UgaW4gY29tcG9uZW50c1xuZXhwb3J0IHR5cGUge1xuICBBc3Ryb2xvZ3kuUGxhbmV0YXJ5UG9zaXRpb24gYXMgUGxhbmV0YXJ5UG9zaXRpb24sXG4gIEFzdHJvbG9neS5FbGVtZW50YWxQcm9wZXJ0aWVzIGFzIEVsZW1lbnRhbFByb3BlcnRpZXMsXG4gIEFzdHJvbG9neS5DdWxpbmFyeUFzdHJvbG9neURhdGEgYXMgQ3VsaW5hcnlBc3Ryb2xvZ3lEYXRhLFxuICBFbmhhbmNlZEluZ3JlZGllbnQsXG4gIEVuaGFuY2VkUmVjaXBlXG59O1xuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcmdhbml6ZSBhbmQgb3B0aW1pemUgaW1wb3J0cyBhdXRvbWF0aWNhbGx5XG4gICAqL1xuICBwdWJsaWMgb3JnYW5pemVJbXBvcnRzKHNvdXJjZUNvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLm9wdGltaXphdGlvbkNvbmZpZy5pbXBvcnRPcmdhbml6YXRpb24uZW5hYmxlQXV0b0ltcG9ydE9yZ2FuaXphdGlvbikge1xuICAgICAgcmV0dXJuIHNvdXJjZUNvZGU7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZXMgPSBzb3VyY2VDb2RlLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBpbXBvcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG90aGVyTGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGluSW1wb3J0U2VjdGlvbiA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGlmIChsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCdpbXBvcnQgJykgfHwgbGluZS50cmltKCkuc3RhcnRzV2l0aCgnZXhwb3J0ICcpKSB7XG4gICAgICAgIGlmIChpbkltcG9ydFNlY3Rpb24pIHtcbiAgICAgICAgICBpbXBvcnRzLnB1c2gobGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3RoZXJMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGxpbmUudHJpbSgpID09PSAnJykge1xuICAgICAgICBpZiAoaW5JbXBvcnRTZWN0aW9uICYmIGltcG9ydHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGltcG9ydHMucHVzaChsaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdGhlckxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluSW1wb3J0U2VjdGlvbiA9IGZhbHNlO1xuICAgICAgICBvdGhlckxpbmVzLnB1c2gobGluZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHVudXNlZCBpbXBvcnRzXG4gICAgY29uc3QgdXNlZEltcG9ydHMgPSB0aGlzLm9wdGltaXphdGlvbkNvbmZpZy5pbXBvcnRPcmdhbml6YXRpb24uZW5hYmxlVW51c2VkSW1wb3J0UmVtb3ZhbFxuICAgICAgPyB0aGlzLnJlbW92ZVVudXNlZEltcG9ydHMoaW1wb3J0cywgb3RoZXJMaW5lcy5qb2luKCdcXG4nKSlcbiAgICAgIDogaW1wb3J0cztcblxuICAgIC8vIFNvcnQgaW1wb3J0c1xuICAgIGNvbnN0IHNvcnRlZEltcG9ydHMgPSB0aGlzLm9wdGltaXphdGlvbkNvbmZpZy5pbXBvcnRPcmdhbml6YXRpb24uZW5hYmxlSW1wb3J0U29ydGluZ1xuICAgICAgPyB0aGlzLnNvcnRJbXBvcnRzKHVzZWRJbXBvcnRzKVxuICAgICAgOiB1c2VkSW1wb3J0cztcblxuICAgIHJldHVybiBbLi4uc29ydGVkSW1wb3J0cywgJycsIC4uLm90aGVyTGluZXNdLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWwtdGltZSBlcnJvciBkZXRlY3Rpb24gYW5kIGZpeGluZ1xuICAgKi9cbiAgcHVibGljIGRldGVjdEFuZEZpeENvbW1vbkVycm9ycyhzb3VyY2VDb2RlOiBzdHJpbmcpOiB7XG4gICAgZml4ZWRDb2RlOiBzdHJpbmc7XG4gICAgZml4ZXM6IHN0cmluZ1tdO1xuICAgIHJlbWFpbmluZ0Vycm9yczogc3RyaW5nW107XG4gIH0ge1xuICAgIGxldCBmaXhlZENvZGUgPSBzb3VyY2VDb2RlO1xuICAgIGNvbnN0IGZpeGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHJlbWFpbmluZ0Vycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEZpeCBjb21tb24gVHlwZVNjcmlwdCBlcnJvcnNcbiAgICBjb25zdCBjb21tb25GaXhlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL1JlYWN0XFwuRkM8KFtePl0rKT4vZyxcbiAgICAgICAgcmVwbGFjZW1lbnQ6ICdSZWFjdC5GQzwkMT4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpeGVkIFJlYWN0LkZDIHR5cGUgYW5ub3RhdGlvbidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC91c2VFZmZlY3RcXChcXChcXCkgPT4gXFx7KFtefV0rKVxcfSwgXFxbXFxdXFwpL2csXG4gICAgICAgIHJlcGxhY2VtZW50OiAndXNlRWZmZWN0KCgpID0+IHskMX0sIFtdKScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRml4ZWQgdXNlRWZmZWN0IGRlcGVuZGVuY3kgYXJyYXknXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvY29uc3QgXFxbKFteLF0rKSwgc2V0KFteXFxdXSspXFxdID0gdXNlU3RhdGVcXChcXCkvZyxcbiAgICAgICAgcmVwbGFjZW1lbnQ6ICdjb25zdCBbJDEsIHNldCQyXSA9IHVzZVN0YXRlPGFueT4oKScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQWRkZWQgdHlwZSBhbm5vdGF0aW9uIHRvIHVzZVN0YXRlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL2ludGVyZmFjZSAoW0EtWl1bYS16QS1aXSopIFxcey9nLFxuICAgICAgICByZXBsYWNlbWVudDogJ2ludGVyZmFjZSAkMSB7JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGaXhlZCBpbnRlcmZhY2UgbmFtaW5nIGNvbnZlbnRpb24nXG4gICAgICB9XG4gICAgXTtcblxuICAgIGNvbW1vbkZpeGVzLmZvckVhY2goZml4ID0+IHtcbiAgICAgIGlmIChmaXgucGF0dGVybi50ZXN0KGZpeGVkQ29kZSkpIHtcbiAgICAgICAgZml4ZWRDb2RlID0gZml4ZWRDb2RlLnJlcGxhY2UoZml4LnBhdHRlcm4sIGZpeC5yZXBsYWNlbWVudCk7XG4gICAgICAgIGZpeGVzLnB1c2goZml4LmRlc2NyaXB0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERldGVjdCByZW1haW5pbmcgZXJyb3JzIChzaW1wbGlmaWVkIGRldGVjdGlvbilcbiAgICBjb25zdCBlcnJvclBhdHRlcm5zID0gW1xuICAgICAgL1Byb3BlcnR5ICcoW14nXSspJyBkb2VzIG5vdCBleGlzdCBvbiB0eXBlL2csXG4gICAgICAvVHlwZSAnKFteJ10rKScgaXMgbm90IGFzc2lnbmFibGUgdG8gdHlwZS9nLFxuICAgICAgL0Nhbm5vdCBmaW5kIG5hbWUgJyhbXiddKyknL2dcbiAgICBdO1xuXG4gICAgZXJyb3JQYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IGZpeGVkQ29kZS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgIG1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiByZW1haW5pbmdFcnJvcnMucHVzaChtYXRjaCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgZml4ZWRDb2RlLCBmaXhlcywgcmVtYWluaW5nRXJyb3JzIH07XG4gIH1cblxuICAvKipcbiAgICogTW9uaXRvciBwZXJmb3JtYW5jZSBtZXRyaWNzIGluIHJlYWwtdGltZVxuICAgKi9cbiAgcHVibGljIHVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljcyhuZXdNZXRyaWNzOiBQYXJ0aWFsPERldmVsb3BtZW50TWV0cmljcz4pOiB2b2lkIHtcbiAgICB0aGlzLm1ldHJpY3MgPSB7IC4uLnRoaXMubWV0cmljcywgLi4ubmV3TWV0cmljcywgbGFzdE9wdGltaXphdGlvbjogRGF0ZS5ub3coKSB9O1xuICAgIFxuICAgIGlmICh0aGlzLm9wdGltaXphdGlvbkNvbmZpZy5wZXJmb3JtYW5jZU1vbml0b3JpbmcuZW5hYmxlUmVhbFRpbWVFcnJvckRldGVjdGlvbikge1xuICAgICAgdGhpcy5jaGVja1BlcmZvcm1hbmNlVGhyZXNob2xkcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBkZXZlbG9wbWVudCBtZXRyaWNzXG4gICAqL1xuICBwdWJsaWMgZ2V0RGV2ZWxvcG1lbnRNZXRyaWNzKCk6IERldmVsb3BtZW50TWV0cmljcyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5tZXRyaWNzIH07XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHVibGljIGdldFBlcmZvcm1hbmNlT3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zKCk6IHtcbiAgICB0eXBlc2NyaXB0OiBzdHJpbmdbXTtcbiAgICBidW5kbGluZzogc3RyaW5nW107XG4gICAgcnVudGltZTogc3RyaW5nW107XG4gICAgZGV2ZWxvcG1lbnQ6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB7XG4gICAgICB0eXBlc2NyaXB0OiBbXSxcbiAgICAgIGJ1bmRsaW5nOiBbXSxcbiAgICAgIHJ1bnRpbWU6IFtdLFxuICAgICAgZGV2ZWxvcG1lbnQ6IFtdXG4gICAgfSBhcyBhbnk7XG5cbiAgICAvLyBUeXBlU2NyaXB0IHJlY29tbWVuZGF0aW9uc1xuICAgIGlmICh0aGlzLm1ldHJpY3MuY29tcGlsYXRpb25UaW1lID4gMzAwMDApIHsgLy8gMzAgc2Vjb25kc1xuICAgICAgcmVjb21tZW5kYXRpb25zLnR5cGVzY3JpcHQucHVzaCgnRW5hYmxlIGluY3JlbWVudGFsIGNvbXBpbGF0aW9uJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMudHlwZXNjcmlwdC5wdXNoKCdVc2UgcHJvamVjdCByZWZlcmVuY2VzIGZvciBsYXJnZSBjb2RlYmFzZXMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy50eXBlc2NyaXB0LnB1c2goJ0VuYWJsZSBza2lwTGliQ2hlY2sgZm9yIGZhc3RlciBidWlsZHMnKTtcbiAgICB9XG5cbiAgICAvLyBCdW5kbGUgc2l6ZSByZWNvbW1lbmRhdGlvbnNcbiAgICBpZiAodGhpcy5tZXRyaWNzLmJ1bmRsZVNpemUgPiA1MDAgKiAxMDI0KSB7IC8vIDUwMEtCXG4gICAgICByZWNvbW1lbmRhdGlvbnMuYnVuZGxpbmcucHVzaCgnSW1wbGVtZW50IGNvZGUgc3BsaXR0aW5nJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMuYnVuZGxpbmcucHVzaCgnRW5hYmxlIHRyZWUgc2hha2luZycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLmJ1bmRsaW5nLnB1c2goJ1VzZSBkeW5hbWljIGltcG9ydHMgZm9yIGxhcmdlIGNvbXBvbmVudHMnKTtcbiAgICB9XG5cbiAgICAvLyBSdW50aW1lIHBlcmZvcm1hbmNlIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmICh0aGlzLm1ldHJpY3MubWVtb3J5VXNhZ2UgPiAxMDApIHsgLy8gMTAwTUJcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5ydW50aW1lLnB1c2goJ09wdGltaXplIFJlYWN0IGNvbXBvbmVudCByZS1yZW5kZXJzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucnVudGltZS5wdXNoKCdVc2UgUmVhY3QubWVtbyBmb3IgZXhwZW5zaXZlIGNvbXBvbmVudHMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5ydW50aW1lLnB1c2goJ0ltcGxlbWVudCBwcm9wZXIgY2xlYW51cCBpbiB1c2VFZmZlY3QnKTtcbiAgICB9XG5cbiAgICAvLyBEZXZlbG9wbWVudCBleHBlcmllbmNlIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmICh0aGlzLm1ldHJpY3MuaG90UmVsb2FkVGltZSA+IDUwMDApIHsgLy8gNSBzZWNvbmRzXG4gICAgICByZWNvbW1lbmRhdGlvbnMuZGV2ZWxvcG1lbnQucHVzaCgnT3B0aW1pemUgd2VicGFjayBjb25maWd1cmF0aW9uJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMuZGV2ZWxvcG1lbnQucHVzaCgnUmVkdWNlIHRoZSBudW1iZXIgb2Ygd2F0Y2hlZCBmaWxlcycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLmRldmVsb3BtZW50LnB1c2goJ1VzZSBmYXN0ZXIgZGV2ZWxvcG1lbnQgc2VydmVyJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhdXRvbWF0aWMgb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgcHVibGljIGFwcGx5QXV0b21hdGljT3B0aW1pemF0aW9ucygpOiB7XG4gICAgYXBwbGllZDogc3RyaW5nW107XG4gICAgc2tpcHBlZDogc3RyaW5nW107XG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgfSB7XG4gICAgY29uc3QgYXBwbGllZDogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBza2lwcGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZW5lcmF0ZSBvcHRpbWl6ZWQgVHlwZVNjcmlwdCBjb25maWdcbiAgICAgIGNvbnN0IHRzQ29uZmlnID0gdGhpcy5nZW5lcmF0ZU9wdGltaXplZFR5cGVTY3JpcHRDb25maWcoKTtcbiAgICAgIGFwcGxpZWQucHVzaCgnR2VuZXJhdGVkIG9wdGltaXplZCBUeXBlU2NyaXB0IGNvbmZpZ3VyYXRpb24nKTtcblxuICAgICAgLy8gR2VuZXJhdGUgZW5oYW5jZWQgdHlwZSBkZWZpbml0aW9uc1xuICAgICAgY29uc3QgdHlwZURlZmluaXRpb25zID0gdGhpcy5nZW5lcmF0ZUFzdHJvbG9naWNhbFR5cGVEZWZpbml0aW9ucygpO1xuICAgICAgYXBwbGllZC5wdXNoKCdHZW5lcmF0ZWQgZW5oYW5jZWQgYXN0cm9sb2dpY2FsIHR5cGUgZGVmaW5pdGlvbnMnKTtcblxuICAgICAgLy8gVXBkYXRlIHBlcmZvcm1hbmNlIG1vbml0b3JpbmdcbiAgICAgIGlmICh0aGlzLm9wdGltaXphdGlvbkNvbmZpZy5wZXJmb3JtYW5jZU1vbml0b3JpbmcuZW5hYmxlUmVhbFRpbWVFcnJvckRldGVjdGlvbikge1xuICAgICAgICB0aGlzLnN0YXJ0UmVhbFRpbWVFcnJvckRldGVjdGlvbigpO1xuICAgICAgICBhcHBsaWVkLnB1c2goJ1N0YXJ0ZWQgcmVhbC10aW1lIGVycm9yIGRldGVjdGlvbicpO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnQXV0b21hdGljIG9wdGltaXphdGlvbnMgYXBwbGllZDonLCBhcHBsaWVkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICBlcnJvcnMucHVzaChlcnJvck1lc3NhZ2UpO1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBhcHBseWluZyBhdXRvbWF0aWMgb3B0aW1pemF0aW9uczonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgYXBwbGllZCwgc2tpcHBlZCwgZXJyb3JzIH07XG4gIH1cblxuICAvLyBQcml2YXRlIGhlbHBlciBtZXRob2RzXG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplTWV0cmljcygpOiBEZXZlbG9wbWVudE1ldHJpY3Mge1xuICAgIHJldHVybiB7XG4gICAgICBjb21waWxhdGlvblRpbWU6IDAsXG4gICAgICBtZW1vcnlVc2FnZTogMCxcbiAgICAgIGJ1bmRsZVNpemU6IDAsXG4gICAgICBlcnJvckNvdW50OiAwLFxuICAgICAgd2FybmluZ0NvdW50OiAwLFxuICAgICAgaG90UmVsb2FkVGltZTogMCxcbiAgICAgIGxhc3RPcHRpbWl6YXRpb246IERhdGUubm93KClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0T3B0aW1pemF0aW9uQ29uZmlnKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlc2NyaXB0OiB7XG4gICAgICAgIGVuYWJsZUluY3JlbWVudGFsQ29tcGlsYXRpb246IHRydWUsXG4gICAgICAgIGVuYWJsZVByb2plY3RSZWZlcmVuY2VzOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlQ29tcG9zaXRlTW9kZTogZmFsc2UsXG4gICAgICAgIHNraXBMaWJDaGVjazogdHJ1ZSxcbiAgICAgICAgc2tpcERlZmF1bHRMaWJDaGVjazogdHJ1ZSxcbiAgICAgICAgdXNlRGVmaW5lRm9yQ2xhc3NGaWVsZHM6IHRydWUsXG4gICAgICAgIGV4YWN0T3B0aW9uYWxQcm9wZXJ0eVR5cGVzOiBmYWxzZSxcbiAgICAgICAgbm9VbmNoZWNrZWRJbmRleGVkQWNjZXNzOiBmYWxzZSxcbiAgICAgICAgdGFyZ2V0OiAnZXMyMDE4JyBhcyBjb25zdCxcbiAgICAgICAgbW9kdWxlOiAnZXNuZXh0JyBhcyBjb25zdCxcbiAgICAgICAgbW9kdWxlUmVzb2x1dGlvbjogJ2J1bmRsZXInIGFzIGNvbnN0XG4gICAgICB9LFxuICAgICAgaW50ZWxsaVNlbnNlOiB7XG4gICAgICAgIGVuYWJsZUFzdHJvbG9naWNhbFR5cGVEZWZpbml0aW9uczogdHJ1ZSxcbiAgICAgICAgZW5hYmxlRWxlbWVudGFsUHJvcGVydHlJbnRlbGxpU2Vuc2U6IHRydWUsXG4gICAgICAgIGVuYWJsZVBsYW5ldGFyeVBvc2l0aW9uQXV0b0NvbXBsZXRlOiB0cnVlLFxuICAgICAgICBlbmFibGVDdWxpbmFyeUFzdHJvbG9neVNuaXBwZXRzOiB0cnVlLFxuICAgICAgICBlbmFibGVDdXN0b21UeXBlR3VhcmRzOiB0cnVlXG4gICAgICB9LFxuICAgICAgaW1wb3J0T3JnYW5pemF0aW9uOiB7XG4gICAgICAgIGVuYWJsZUF1dG9JbXBvcnRPcmdhbml6YXRpb246IHRydWUsXG4gICAgICAgIGVuYWJsZVVudXNlZEltcG9ydFJlbW92YWw6IHRydWUsXG4gICAgICAgIGVuYWJsZUltcG9ydFNvcnRpbmc6IHRydWUsXG4gICAgICAgIGVuYWJsZVBhdGhNYXBwaW5nOiB0cnVlLFxuICAgICAgICBncm91cEV4dGVybmFsSW1wb3J0czogdHJ1ZSxcbiAgICAgICAgZ3JvdXBJbnRlcm5hbEltcG9ydHM6IHRydWVcbiAgICAgIH0sXG4gICAgICBwZXJmb3JtYW5jZU1vbml0b3Jpbmc6IHtcbiAgICAgICAgZW5hYmxlUmVhbFRpbWVFcnJvckRldGVjdGlvbjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlQ29tcGlsYXRpb25UaW1lVHJhY2tpbmc6IHRydWUsXG4gICAgICAgIGVuYWJsZU1lbW9yeVVzYWdlTW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlQnVuZGxlU2l6ZVRyYWNraW5nOiB0cnVlLFxuICAgICAgICBlbmFibGVIb3RSZWxvYWRPcHRpbWl6YXRpb246IHRydWVcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFBlcmZvcm1hbmNlTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIC8vIE1vbml0b3IgbWVtb3J5IHVzYWdlXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKChwZXJmb3JtYW5jZSBhcyBhbnkpLm1lbW9yeSkge1xuICAgICAgICBjb25zdCBtZW1vcnlVc2FnZSA9IChwZXJmb3JtYW5jZSBhcyBhbnkpLm1lbW9yeS51c2VkSlNIZWFwU2l6ZSAvIDEwMjQgLyAxMDI0O1xuICAgICAgICB0aGlzLnVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljcyh7IG1lbW9yeVVzYWdlIH0pO1xuICAgICAgfVxuICAgIH0sIDEwMDAwKTsgLy8gRXZlcnkgMTAgc2Vjb25kc1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1BlcmZvcm1hbmNlVGhyZXNob2xkcygpOiB2b2lkIHtcbiAgICBjb25zdCB0aHJlc2hvbGRzID0ge1xuICAgICAgY29tcGlsYXRpb25UaW1lOiAzMDAwMCwgLy8gMzAgc2Vjb25kc1xuICAgICAgbWVtb3J5VXNhZ2U6IDEwMCwgLy8gMTAwTUJcbiAgICAgIGJ1bmRsZVNpemU6IDUwMCAqIDEwMjQsIC8vIDUwMEtCXG4gICAgICBlcnJvckNvdW50OiAxMFxuICAgIH07XG5cbiAgICBPYmplY3QuZW50cmllcyh0aHJlc2hvbGRzKS5mb3JFYWNoKChbbWV0cmljLCB0aHJlc2hvbGRdKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLm1ldHJpY3NbbWV0cmljIGFzIGtleW9mIERldmVsb3BtZW50TWV0cmljc107XG4gICAgICBpZiAodHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ251bWJlcicgJiYgY3VycmVudFZhbHVlID4gdGhyZXNob2xkKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKGBQZXJmb3JtYW5jZSB0aHJlc2hvbGQgZXhjZWVkZWQgZm9yICR7bWV0cmljfTpgLCB7XG4gICAgICAgICAgY3VycmVudDogY3VycmVudFZhbHVlLFxuICAgICAgICAgIHRocmVzaG9sZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlVW51c2VkSW1wb3J0cyhpbXBvcnRzOiBzdHJpbmdbXSwgY29kZUJvZHk6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gaW1wb3J0cy5maWx0ZXIoaW1wb3J0TGluZSA9PiB7XG4gICAgICAvLyBFeHRyYWN0IGltcG9ydGVkIG5hbWVzIGZyb20gdGhlIGltcG9ydCBzdGF0ZW1lbnRcbiAgICAgIGNvbnN0IGltcG9ydE1hdGNoID0gaW1wb3J0TGluZS5tYXRjaCgvaW1wb3J0XFxzKyg/OlxceyhbXn1dKylcXH18XFwqXFxzK2FzXFxzKyhcXHcrKXwoXFx3KykpLyk7XG4gICAgICBpZiAoIWltcG9ydE1hdGNoKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgY29uc3QgaW1wb3J0ZWROYW1lcyA9IGltcG9ydE1hdGNoWzFdIFxuICAgICAgICA/IGltcG9ydE1hdGNoWzFdLnNwbGl0KCcsJykubWFwKG5hbWUgPT4gbmFtZS50cmltKCkuc3BsaXQoJyBhcyAnKVswXSlcbiAgICAgICAgOiBbaW1wb3J0TWF0Y2hbMl0gfHwgaW1wb3J0TWF0Y2hbM11dO1xuXG4gICAgICAvLyBDaGVjayBpZiBhbnkgaW1wb3J0ZWQgbmFtZSBpcyB1c2VkIGluIHRoZSBjb2RlXG4gICAgICByZXR1cm4gaW1wb3J0ZWROYW1lcy5zb21lKG5hbWUgPT4ge1xuICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFxcXFxiJHtuYW1lfVxcXFxiYCwgJ2cnKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoY29kZUJvZHkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNvcnRJbXBvcnRzKGltcG9ydHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGV4dGVybmFsSW1wb3J0czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBpbnRlcm5hbEltcG9ydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpbXBvcnRzLmZvckVhY2goaW1wb3J0TGluZSA9PiB7XG4gICAgICBpZiAoaW1wb3J0TGluZS5pbmNsdWRlcygnQC8nKSB8fCBpbXBvcnRMaW5lLmluY2x1ZGVzKCcuLycpIHx8IGltcG9ydExpbmUuaW5jbHVkZXMoJy4uLycpKSB7XG4gICAgICAgIGludGVybmFsSW1wb3J0cy5wdXNoKGltcG9ydExpbmUpO1xuICAgICAgfSBlbHNlIGlmIChpbXBvcnRMaW5lLnRyaW0oKS5zdGFydHNXaXRoKCdpbXBvcnQgJykpIHtcbiAgICAgICAgZXh0ZXJuYWxJbXBvcnRzLnB1c2goaW1wb3J0TGluZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgLi4uZXh0ZXJuYWxJbXBvcnRzLnNvcnQoKSxcbiAgICAgIC4uLihleHRlcm5hbEltcG9ydHMubGVuZ3RoID4gMCAmJiBpbnRlcm5hbEltcG9ydHMubGVuZ3RoID4gMCA/IFsnJ10gOiBbXSksXG4gICAgICAuLi5pbnRlcm5hbEltcG9ydHMuc29ydCgpXG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRSZWFsVGltZUVycm9yRGV0ZWN0aW9uKCk6IHZvaWQge1xuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBpbnRlZ3JhdGUgd2l0aCB0aGUgVHlwZVNjcmlwdCBjb21waWxlciBBUElcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBzaW11bGF0ZSByZWFsLXRpbWUgZXJyb3IgZGV0ZWN0aW9uXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgZXJyb3IgZGV0ZWN0aW9uXG4gICAgICBjb25zdCBlcnJvckNvdW50ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSk7XG4gICAgICB0aGlzLnVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljcyh7IGVycm9yQ291bnQgfSk7XG4gICAgfSwgMzAwMDApOyAvLyBFdmVyeSAzMCBzZWNvbmRzXG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbiB0byBnZXQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZSBvcHRpbWl6ZXIgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXplcigpOiBEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIge1xuICByZXR1cm4gRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyLmdldEluc3RhbmNlKCk7XG59XG5cbi8qKlxuICogSG9vayBmb3IgY29tcG9uZW50cyB0byB1c2UgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZSBvcHRpbWl6YXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6YXRpb25zKCkge1xuICBjb25zdCBvcHRpbWl6ZXIgPSBnZXREZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIoKTtcbiAgXG4gIHJldHVybiB7XG4gICAgZ2VuZXJhdGVPcHRpbWl6ZWRUeXBlU2NyaXB0Q29uZmlnOiAoKSA9PiBvcHRpbWl6ZXIuZ2VuZXJhdGVPcHRpbWl6ZWRUeXBlU2NyaXB0Q29uZmlnKCksXG4gICAgZ2VuZXJhdGVBc3Ryb2xvZ2ljYWxUeXBlRGVmaW5pdGlvbnM6ICgpID0+IG9wdGltaXplci5nZW5lcmF0ZUFzdHJvbG9naWNhbFR5cGVEZWZpbml0aW9ucygpLFxuICAgIG9yZ2FuaXplSW1wb3J0czogKGNvZGU6IHN0cmluZykgPT4gb3B0aW1pemVyLm9yZ2FuaXplSW1wb3J0cyhjb2RlKSxcbiAgICBkZXRlY3RBbmRGaXhDb21tb25FcnJvcnM6IChjb2RlOiBzdHJpbmcpID0+IG9wdGltaXplci5kZXRlY3RBbmRGaXhDb21tb25FcnJvcnMoY29kZSksXG4gICAgdXBkYXRlUGVyZm9ybWFuY2VNZXRyaWNzOiAobWV0cmljczogUGFydGlhbDxEZXZlbG9wbWVudE1ldHJpY3M+KSA9PiBvcHRpbWl6ZXIudXBkYXRlUGVyZm9ybWFuY2VNZXRyaWNzKG1ldHJpY3MpLFxuICAgIGdldERldmVsb3BtZW50TWV0cmljczogKCkgPT4gb3B0aW1pemVyLmdldERldmVsb3BtZW50TWV0cmljcygpLFxuICAgIGdldFBlcmZvcm1hbmNlT3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zOiAoKSA9PiBvcHRpbWl6ZXIuZ2V0UGVyZm9ybWFuY2VPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoKSxcbiAgICBhcHBseUF1dG9tYXRpY09wdGltaXphdGlvbnM6ICgpID0+IG9wdGltaXplci5hcHBseUF1dG9tYXRpY09wdGltaXphdGlvbnMoKVxuICB9O1xufSJdLCJ2ZXJzaW9uIjozfQ==