7a6eb8b3c265cc64ac9fb83b4e335c0a
"use strict";
/* eslint-disable @typescript-eslint/no-explicit-anyno-console, @typescript-eslint/no-unused-vars, max-lines-per-function -- Campaign/test file with intentional patterns */
/**
 * Campaign System Test Integration Tests
 *
 * Comprehensive tests for campaign system test integration functionality,
 * including mocking, isolation, and memory management.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const campaign_1 = require("../../types/campaign");
const CampaignTestController_1 = require("../utils/CampaignTestController");
const campaignTestUtils_1 = require("../utils/campaignTestUtils");
describe('Campaign System Test Integration', () => {
    // Test isolation and cleanup
    afterEach(async () => {
        // Ensure cleanup after each test
        try {
            void CampaignTestController_1.campaignTestController.cleanupAfterTest('test-cleanup');
        }
        catch (error) {
            console.warn('Cleanup warning:', error);
        }
    });
    afterAll(async () => {
        // Force cleanup of singleton instances
        const { CampaignTestController } = await Promise.resolve().then(() => __importStar(require('../utils/CampaignTestController')));
        void CampaignTestController.forceCleanup();
    });
    describe('Campaign System Mocking', () => {
        it('should initialize mock campaign system without running actual builds', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'mock-initialization-test',
                preventActualBuilds: true,
                preventGitOperations: true,
            });
            try {
                // Verify mock instances are created
                expect(context.controller).toBeDefined();
                expect(context.tracker).toBeDefined();
                expect(context.safety).toBeDefined();
                // Verify test isolation is active
                void campaignTestUtils_1.campaignTestAssertions.testIsolationActive(context);
                // Verify environment variables are set for test isolation
                expect(process.env.NODE_ENV).toBe('test');
                expect(process.env.DISABLE_ACTUAL_BUILDS).toBe('true');
                expect(process.env.DISABLE_GIT_OPERATIONS).toBe('true');
                // Test that mock controller doesn't run actual scripts
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                const result = await context.controller.executePhase(mockPhase);
                expect(result.success).toBe(true);
                expect(result.executionTime).toBeGreaterThan(0);
                expect(result.safetyEvents).toBeDefined();
                // Verify no actual build processes were triggered
                expect(result.filesProcessed).toBeGreaterThan(0); // Mock processing
                expect(result.errorsFixed).toBeGreaterThan(0); // Mock fixes
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('mock-initialization-test');
            }
        });
        it('should prevent actual TypeScript compilation during tests', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'prevent-tsc-test',
                preventActualBuilds: true,
            });
            try {
                // Mock TypeScript error count should not run actual tsc
                const errorCount = context.tracker.getTypeScriptErrorCount();
                expect(typeof errorCount).toBe('number');
                expect(errorCount).toBeGreaterThanOrEqual(0);
                // Mock error breakdown should not run actual analysis
                const breakdown = context.tracker.getTypeScriptErrorBreakdown();
                expect(typeof breakdown).toBe('object');
                expect(Object.keys(breakdown).length).toBeGreaterThan(0);
                // Verify that actual tsc command was not executed
                // (This is ensured by the mock implementation)
                expect(breakdown['TS2352']).toBeDefined();
                expect(breakdown['TS2339']).toBeDefined();
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('prevent-tsc-test');
            }
        });
        it('should prevent actual git operations during tests', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'prevent-git-test',
                preventGitOperations: true,
            });
            try {
                // Mock stash creation should not run actual git commands
                const stashId = context.safety.createStash('checkpoint', 'test');
                expect(typeof stashId).toBe('string');
                expect(stashId).toContain('mock_stash_');
                // Mock stash application should not run actual git commands
                const stashResult = context.safety.applyStash(String(stashId));
                expect(stashResult).toBeDefined();
                // Mock git state validation should not run actual git commands
                const validation = await context.safety.validateGitState();
                expect(validation.success).toBe(true);
                // Verify safety events were recorded
                const safetyEvents = context.safety.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
                expect(safetyEvents.some(e => e.type === campaign_1.SafetyEventType.CHECKPOINT_CREATED)).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('prevent-git-test');
            }
        });
    });
    describe('Test-Safe Progress Tracking', () => {
        it('should track progress without memory leaks', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'memory-safe-tracking-test',
                enableMemoryMonitoring: true,
                mockProgressTracking: true,
            });
            try {
                expect(context.testSafeTracker).toBeDefined();
                if (context.testSafeTracker) {
                    // Start tracking
                    context.testSafeTracker.startTracking('memory-test');
                    // Simulate multiple progress updates
                    for (let i = 0; i < 10; i++) {
                        context.testSafeTracker.updateMetrics({
                            typeScriptErrors: { current: 86 - i * 5,
                                target: 0,
                                reduction: i * 5,
                                percentage: Math.round(((i * 5) / 86) * 100),
                            },
                        }, `update-${i}`);
                    }
                    // Get progress history
                    const history = context.testSafeTracker.getProgressHistory();
                    expect(history.length).toBeGreaterThan(0);
                    expect(history.length).toBeLessThanOrEqual(20); // Should be limited to prevent memory issues
                    // Validate memory usage
                    const memoryStats = context.testSafeTracker.getMemoryStatistics();
                    if (memoryStats != null) {
                        expect(memoryStats.memoryEfficient).toBe(true);
                    }
                    // Stop tracking
                    context.testSafeTracker.stopTracking('memory-test');
                }
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('memory-safe-tracking-test');
            }
        });
        it('should simulate realistic progress over time', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'progress-simulation-test',
                mockProgressTracking: true,
            });
            try {
                if (context.testSafeTracker) {
                    const initialMetrics = await context.testSafeTracker.getProgressMetrics();
                    // Simulate progress to target metrics
                    const targetMetrics = {
                        typeScriptErrors: { current: 0, target: 0, reduction: 86, percentage: 100 },
                        lintingWarnings: { current: 0, target: 0, reduction: 4506, percentage: 100 },
                    };
                    context.testSafeTracker.simulateProgress(targetMetrics, 1000, 'simulation-test');
                    const finalMetrics = await context.testSafeTracker.getProgressMetrics();
                    // Verify progress was made
                    expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(initialMetrics.typeScriptErrors.current);
                    expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(initialMetrics.lintingWarnings.current);
                }
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('progress-simulation-test');
            }
        });
        it('should generate comprehensive progress reports', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'progress-report-test',
                mockProgressTracking: true,
            });
            try {
                // Generate progress report
                const report = await context.tracker.generateProgressReport();
                expect(report).toBeDefined();
                expect(report.campaignId).toBe('mock-campaign');
                expect(report.overallProgress).toBeGreaterThanOrEqual(0);
                expect(report.overallProgress).toBeLessThanOrEqual(100);
                expect(report.phases).toBeDefined();
                expect(report.phases.length).toBeGreaterThan(0);
                expect(report.currentMetrics).toBeDefined();
                expect(report.targetMetrics).toBeDefined();
                expect(report.estimatedCompletion).toBeInstanceOf(Date);
                // Verify phase reports
                const phase = (await report).phases[0];
                expect(phase.phaseId).toBeDefined();
                expect(phase.phaseName).toBeDefined();
                expect(phase.status).toBeDefined();
                expect(phase.metrics).toBeDefined();
                expect(Array.isArray(phase.achievements)).toBe(true);
                expect(Array.isArray(phase.issues)).toBe(true);
                expect(Array.isArray(phase.recommendations)).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('progress-report-test');
            }
        });
    });
    describe('Campaign Pause/Resume Functionality', () => {
        it('should pause campaign operations for test isolation', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'pause-resume-test',
            });
            try {
                // Verify campaign is paused
                expect(context.testController.isPaused()).toBe(true);
                expect(context.controller.isPaused()).toBe(true);
                // Attempt to execute phase while paused should handle gracefully
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                await expect(context.controller.executePhase(mockPhase)).rejects.toThrow('Campaign is paused');
                // Resume campaign
                context.testController.resumeCampaignAfterTest('pause-resume-test');
                expect(context.testController.isPaused()).toBe(false);
                expect(context.controller.isPaused()).toBe(false);
                // Should be able to execute phase after resume
                const result = await context.controller.executePhase(mockPhase);
                expect(result.success).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('pause-resume-test');
            }
        });
        it('should maintain test isolation across multiple tests', async () => {
            // First test
            const context1 = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'isolation-test-1',
            });
            try {
                context1.testController.updateMockMetrics({
                    typeScriptErrors: { current: 10, target: 0, reduction: 76, percentage: 88 },
                }, 'isolation-test-1');
                const metrics1 = await context1.tracker.getProgressMetrics();
                expect(metrics1.typeScriptErrors.current).toBe(10);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('isolation-test-1');
            }
            // Second test should have clean state
            const context2 = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'isolation-test-2',
            });
            try {
                const metrics2 = await context2.tracker.getProgressMetrics();
                // Should not have the modified metrics from test 1
                expect(metrics2.typeScriptErrors.current).not.toBe(10);
                expect(metrics2.typeScriptErrors.current).toBeGreaterThan(10); // Should be initial value
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('isolation-test-2');
            }
        });
        it('should handle concurrent test isolation', async () => {
            // This test verifies that the singleton pattern works correctly
            // and doesn't cause conflicts between concurrent test setups
            const testPromises = [
                (0, campaignTestUtils_1.withCampaignTestIsolation)('concurrent-test-1', async (context) => {
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { current: 20, target: 0, reduction: 66, percentage: 77 },
                    }, 'concurrent-test-1');
                    const metrics = await context.tracker.getProgressMetrics();
                    expect(metrics.typeScriptErrors.current).toBe(20);
                    return 'test-1-complete';
                }),
                (0, campaignTestUtils_1.withCampaignTestIsolation)('concurrent-test-2', async (context) => {
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { current: 30, target: 0, reduction: 56, percentage: 65 },
                    }, 'concurrent-test-2');
                    const metrics = await context.tracker.getProgressMetrics();
                    expect(metrics.typeScriptErrors.current).toBe(30);
                    return 'test-2-complete';
                }),
            ];
            const results = await Promise.all(testPromises);
            expect(results).toEqual(['test-1-complete', 'test-2-complete']);
        });
    });
    describe('Memory Management', () => {
        it('should prevent memory leaks during campaign operations', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'memory-leak-prevention-test',
                enableMemoryMonitoring: true,
            });
            try {
                // Perform multiple operations that could cause memory leaks
                for (let i = 0; i < 20; i++) {
                    const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                    context.controller.executePhase(mockPhase);
                    // Update metrics
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { current: 86 - i, target: 0, reduction: i, percentage: Math.round((i / 86) * 100) },
                    }, `iteration-${i}`);
                    // Create safety checkpoints
                    context.safety.createStash(`Checkpoint ${i}`, 'test-phase');
                }
                // Validate memory usage
                void campaignTestUtils_1.campaignTestAssertions.memoryUsageAcceptable(context);
                // Verify that safety events are properly managed (not accumulating indefinitely)
                const safetyEvents = context.controller.getSafetyEvents();
                expect(safetyEvents.length).toBeLessThan(100); // Should be limited to prevent memory issues
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('memory-leak-prevention-test');
            }
        });
        it('should cleanup resources properly after test completion', async () => {
            // Setup and use campaign test
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'resource-cleanup-test',
                enableMemoryMonitoring: true,
            });
            // Perform some operations
            const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
            context.controller.executePhase(mockPhase);
            if (context.testSafeTracker) {
                context.testSafeTracker.startTracking('cleanup-test');
                context.testSafeTracker.updateMetrics({
                    typeScriptErrors: { current: 50, target: 0, reduction: 50, percentage: 50 },
                }, 'cleanup-test');
            }
            // Cleanup
            (0, campaignTestUtils_1.cleanupCampaignTest)('resource-cleanup-test');
            // Verify cleanup was effective
            expect(context.testController.isPaused()).toBe(false);
            expect(context.testController.isIsolated()).toBe(false);
            // Test-safe tracker should be cleaned up
            if (context.testSafeTracker) {
                const validation = context.testSafeTracker.validateTrackingState();
                // Should not be tracking anymore
                expect(validation.success).toBe(true);
            }
        });
    });
    describe('Complete Campaign Test Scenarios', () => {
        it('should execute TypeScript error reduction scenario', async () => {
            const scenario = campaignTestUtils_1.campaignTestData.typeScriptErrorReduction();
            const _config = (0, campaignTestUtils_1.createMockCampaignConfig)();
            const { context: _context, results, finalMetrics, safetyEvents: _safetyEvents, } = await (0, campaignTestUtils_1.executeCampaignTestScenario)(scenario, _config);
            try {
                // Verify phase execution
                expect(results.length).toBe(1);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(results[0]);
                // Verify progress improvement
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(scenario.initialMetrics, finalMetrics);
                // Verify safety events
                campaignTestUtils_1.campaignTestAssertions.safetyEventsRecorded(_safetyEvents, scenario.expectedSafetyEvents);
                // Verify final state
                expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(scenario.initialMetrics.typeScriptErrors.current);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)(scenario.name);
            }
        });
        it('should execute linting warning cleanup scenario', async () => {
            const scenario = campaignTestUtils_1.campaignTestData.lintingWarningCleanup();
            const _config = (0, campaignTestUtils_1.createMockCampaignConfig)();
            const { context: _context, results, finalMetrics, safetyEvents: _safetyEvents, } = await (0, campaignTestUtils_1.executeCampaignTestScenario)(scenario, _config);
            try {
                // Verify phase execution
                expect(results.length).toBe(1);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(results[0]);
                // Verify progress improvement
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(scenario.initialMetrics, finalMetrics);
                // Verify linting-specific improvements
                expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(scenario.initialMetrics.lintingWarnings.current);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)(scenario.name);
            }
        });
        it('should handle campaign failures gracefully', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'failure-handling-test',
            });
            try {
                // Create a phase that will fail
                const failingPhase = {
                    ...(0, campaignTestUtils_1.createMockCampaignConfig)().phases[0],
                    successCriteria: { typeScriptErrors: -1, // Impossible criteria
                    },
                };
                // Mock the controller to simulate failure
                void jest.spyOn(context.controller, 'executePhase').mockRejectedValueOnce(new Error('Mock failure'));
                // Execute phase and expect it to handle failure
                await expect(context.controller.executePhase(failingPhase)).rejects.toThrow('Mock failure');
                // Verify safety events were recorded for the failure
                const safetyEvents = context.controller.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('failure-handling-test');
            }
        });
    });
    describe('Integration Validation', () => {
        it('should validate complete campaign system integration', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'integration-validation-test',
                enableMemoryMonitoring: true,
                preventActualBuilds: true,
                preventGitOperations: true,
                mockProgressTracking: true,
            });
            try {
                // Validate test isolation
                const isolation = (0, campaignTestUtils_1.validateCampaignTestIsolation)(await context);
                expect(isolation.isValid).toBe(true);
                expect(isolation.issues).toHaveLength(0);
                // Test all major components
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                // 1. Execute campaign phase
                const resolvedContext = await context;
                const phaseResult = await resolvedContext.controller.executePhase(mockPhase);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(phaseResult);
                // 2. Track progress
                const initialMetrics = await (await context).tracker.getProgressMetrics();
                context.testController.updateMockMetrics({
                    typeScriptErrors: { current: 25, target: 0, reduction: 61, percentage: 71 },
                }, 'integration-test');
                const updatedMetrics = await (await context).tracker.getProgressMetrics();
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(initialMetrics, updatedMetrics);
                // 3. Safety operations
                const stashId = (await context).safety.createStash('Integration test stash', 'test-phase');
                expect(stashId).toBeDefined();
                (await context).safety.applyStash(String(stashId));
                // 4. Generate reports
                const report = await context.tracker.generateProgressReport();
                expect(report).toBeDefined();
                expect(report.phases.length).toBeGreaterThan(0);
                // 5. Validate memory usage
                void campaignTestUtils_1.campaignTestAssertions.memoryUsageAcceptable(context);
                // 6. Verify all safety events
                const safetyEvents = (await context).controller.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
                campaignTestUtils_1.campaignTestAssertions.safetyEventsRecorded(safetyEvents, [campaign_1.SafetyEventType.CHECKPOINT_CREATED]);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('integration-validation-test');
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5jb21wcmVoZW5zaXZlLXN5bnRheC1iYWNrdXAtMTc1NzQ3NjY0MDMzNC9zcmNfX190ZXN0c19fX2NhbXBhaWduX0NhbXBhaWduU3lzdGVtVGVzdEludGVncmF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDRLQUE0SztBQUM1Szs7Ozs7R0FLRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILG1EQUU4QjtBQUM5Qiw0RUFBeUU7QUFDekUsa0VBU29DO0FBRXBDLFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7SUFDaEQsNkJBQTZCO0lBQzdCLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNuQixpQ0FBaUM7UUFDakMsSUFBSTtZQUNGLEtBQUssK0NBQXNCLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDOUQ7UUFBQyxPQUFPLEtBQVUsRUFBRTtZQUNuQixPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ3pDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbEIsdUNBQXVDO1FBQ3ZDLE1BQU0sRUFBRSxzQkFBc0IsRUFBRSxHQUFHLHdEQUFhLGlDQUFpQyxHQUFDLENBQUM7UUFDbkYsS0FBSyxzQkFBc0IsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUM3QyxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7UUFDdkMsRUFBRSxDQUFDLHNFQUFzRSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3BGLE1BQU0sT0FBTyxHQUFRLE1BQU0sSUFBQSxxQ0FBaUIsRUFBQztnQkFDM0MsUUFBUSxFQUFFLDBCQUEwQjtnQkFDcEMsbUJBQW1CLEVBQUUsSUFBSTtnQkFDekIsb0JBQW9CLEVBQUUsSUFBSTthQUMzQixDQUFDLENBQUM7WUFFSCxJQUFJO2dCQUNG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TyxHQUFRLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLHdCQUF3QixFQUFFLFlBQVksQ0FBQyxDQUFDO2dCQUNoRyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzlCLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUVuRCxzQkFBc0I7Z0JBQ3RCLE1BQU0sTUFBTSxHQUFRLE1BQU0sT0FBTyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO2dCQUNuRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFFaEQsMkJBQTJCO2dCQUMzQixLQUFLLDBDQUFzQixDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUUzRCw4QkFBOEI7Z0JBQzlCLE1BQU0sWUFBWSxHQUFRLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFLENBQUM7Z0JBQ3ZFLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvQywwQ0FBc0IsQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLEVBQUUsQ0FBQywwQkFBZSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQzthQUNqRztvQkFBUztnQkFDUixJQUFBLHVDQUFtQixFQUFDLDZCQUE2QixDQUFDLENBQUM7YUFDcEQ7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5jb21wcmVoZW5zaXZlLXN5bnRheC1iYWNrdXAtMTc1NzQ3NjY0MDMzNC9zcmNfX190ZXN0c19fX2NhbXBhaWduX0NhbXBhaWduU3lzdGVtVGVzdEludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueW5vLWNvbnNvbGUsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycywgbWF4LWxpbmVzLXBlci1mdW5jdGlvbiAtLSBDYW1wYWlnbi90ZXN0IGZpbGUgd2l0aCBpbnRlbnRpb25hbCBwYXR0ZXJucyAqL1xuLyoqXG4gKiBDYW1wYWlnbiBTeXN0ZW0gVGVzdCBJbnRlZ3JhdGlvbiBUZXN0c1xuICpcbiAqIENvbXByZWhlbnNpdmUgdGVzdHMgZm9yIGNhbXBhaWduIHN5c3RlbSB0ZXN0IGludGVncmF0aW9uIGZ1bmN0aW9uYWxpdHksXG4gKiBpbmNsdWRpbmcgbW9ja2luZywgaXNvbGF0aW9uLCBhbmQgbWVtb3J5IG1hbmFnZW1lbnQuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBTYWZldHlFdmVudFR5cGUsXG59IGZyb20gJy4uLy4uL3R5cGVzL2NhbXBhaWduJztcbmltcG9ydCB7IGNhbXBhaWduVGVzdENvbnRyb2xsZXIgfSBmcm9tICcuLi91dGlscy9DYW1wYWlnblRlc3RDb250cm9sbGVyJztcbmltcG9ydCB7XG4gICAgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucyxcbiAgICBjYW1wYWlnblRlc3REYXRhLFxuICAgIGNsZWFudXBDYW1wYWlnblRlc3QsXG4gICAgY3JlYXRlTW9ja0NhbXBhaWduQ29uZmlnLFxuICAgIGV4ZWN1dGVDYW1wYWlnblRlc3RTY2VuYXJpbyxcbiAgICBzZXR1cENhbXBhaWduVGVzdCxcbiAgICB2YWxpZGF0ZUNhbXBhaWduVGVzdElzb2xhdGlvbixcbiAgICB3aXRoQ2FtcGFpZ25UZXN0SXNvbGF0aW9uLFxufSBmcm9tICcuLi91dGlscy9jYW1wYWlnblRlc3RVdGlscyc7XG5cbmRlc2NyaWJlKCdDYW1wYWlnbiBTeXN0ZW0gVGVzdCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgLy8gVGVzdCBpc29sYXRpb24gYW5kIGNsZWFudXBcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBFbnN1cmUgY2xlYW51cCBhZnRlciBlYWNoIHRlc3RcbiAgICB0cnkge1xuICAgICAgdm9pZCBjYW1wYWlnblRlc3RDb250cm9sbGVyLmNsZWFudXBBZnRlclRlc3QoJ3Rlc3QtY2xlYW51cCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB3YXJuaW5nOicsIGVycm9yKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBGb3JjZSBjbGVhbnVwIG9mIHNpbmdsZXRvbiBpbnN0YW5jZXNcbiAgICBjb25zdCB7IENhbXBhaWduVGVzdENvbnRyb2xsZXIgfSA9IGF3YWl0IGltcG9ydCgnLi4vdXRpbHMvQ2FtcGFpZ25UZXN0Q29udHJvbGxlcicpO1xuICAgIHZvaWQgQ2FtcGFpZ25UZXN0Q29udHJvbGxlci5mb3JjZUNsZWFudXAoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhbXBhaWduIFN5c3RlbSBNb2NraW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSBtb2NrIGNhbXBhaWduIHN5c3RlbSB3aXRob3V0IHJ1bm5pbmcgYWN0dWFsIGJ1aWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdtb2NrLWluaXRpYWxpemF0aW9uLXRlc3QnLFxuICAgICAgICBwcmV2ZW50QWN0dWFsQnVpbGRzOiB0cnVlLFxuICAgICAgICBwcmV2ZW50R2l0T3BlcmF0aW9uczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgbW9jayBpbnN0YW5jZXMgYXJlIGNyZWF0ZWRcbiAgICAgICAgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlcikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQudHJhY2tlcikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQuc2FmZXR5KS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAgIC8vIFZlcmlmeSB0ZXN0IGlzb2xhdGlvbiBpcyBhY3RpdmVcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnRlc3RJc29sYXRpb25BY3RpdmUoY29udGV4dCk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgc2V0IGZvciB0ZXN0IGlzb2xhdGlvblxuICAgICAgICBleHBlY3QocHJvY2Vzcy5lbnYuTk9ERV9FTlYpLnRvQmUoJ3Rlc3QnKTtcbiAgICAgICAgZXhwZWN0KHByb2Nlc3MuZW52LkRJU0FCTEVfQUNUVUFMX0JVSUxEUykudG9CZSgndHJ1ZScpO1xuICAgICAgICBleHBlY3QocHJvY2Vzcy5lbnYuRElTQUJMRV9HSVRfT1BFUkFUSU9OUykudG9CZSgndHJ1ZScpO1xuXG4gICAgICAgIC8vIFRlc3QgdGhhdCBtb2NrIGNvbnRyb2xsZXIgZG9lc24ndCBydW4gYWN0dWFsIHNjcmlwdHNcbiAgICAgICAgY29uc3QgbW9ja1BoYXNlOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKS5waGFzZXNbMF07XG4gICAgICAgIGNvbnN0IHJlc3VsdDogYW55ID0gYXdhaXQgY29udGV4dC5jb250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrUGhhc2UpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5leGVjdXRpb25UaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc2FmZXR5RXZlbnRzKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBubyBhY3R1YWwgYnVpbGQgcHJvY2Vzc2VzIHdlcmUgdHJpZ2dlcmVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZXNQcm9jZXNzZWQpLnRvQmVHcmVhdGVyVGhhbigwKTsgLy8gTW9jayBwcm9jZXNzaW5nXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzRml4ZWQpLnRvQmVHcmVhdGVyVGhhbigwKTsgLy8gTW9jayBmaXhlc1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgnbW9jay1pbml0aWFsaXphdGlvbi10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgYWN0dWFsIFR5cGVTY3JpcHQgY29tcGlsYXRpb24gZHVyaW5nIHRlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ3ByZXZlbnQtdHNjLXRlc3QnLFxuICAgICAgICBwcmV2ZW50QWN0dWFsQnVpbGRzOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIE1vY2sgVHlwZVNjcmlwdCBlcnJvciBjb3VudCBzaG91bGQgbm90IHJ1biBhY3R1YWwgdHNjXG4gICAgICAgIGNvbnN0IGVycm9yQ291bnQ6IGFueSA9IGNvbnRleHQudHJhY2tlci5nZXRUeXBlU2NyaXB0RXJyb3JDb3VudCgpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGVycm9yQ291bnQpLnRvQmUoJ251bWJlcicpO1xuICAgICAgICBleHBlY3QoZXJyb3JDb3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcblxuICAgICAgICAvLyBNb2NrIGVycm9yIGJyZWFrZG93biBzaG91bGQgbm90IHJ1biBhY3R1YWwgYW5hbHlzaXNcbiAgICAgICAgY29uc3QgYnJlYWtkb3duOiBhbnkgPSBjb250ZXh0LnRyYWNrZXIuZ2V0VHlwZVNjcmlwdEVycm9yQnJlYWtkb3duKCk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgYnJlYWtkb3duKS50b0JlKCdvYmplY3QnKTtcbiAgICAgICAgZXhwZWN0KE9iamVjdC5rZXlzKGJyZWFrZG93bikubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgYWN0dWFsIHRzYyBjb21tYW5kIHdhcyBub3QgZXhlY3V0ZWRcbiAgICAgICAgLy8gKFRoaXMgaXMgZW5zdXJlZCBieSB0aGUgbW9jayBpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgZXhwZWN0KGJyZWFrZG93blsnVFMyMzUyJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChicmVha2Rvd25bJ1RTMjMzOSddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgncHJldmVudC10c2MtdGVzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IGFjdHVhbCBnaXQgb3BlcmF0aW9ucyBkdXJpbmcgdGVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAncHJldmVudC1naXQtdGVzdCcsXG4gICAgICAgIHByZXZlbnRHaXRPcGVyYXRpb25zOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIE1vY2sgc3Rhc2ggY3JlYXRpb24gc2hvdWxkIG5vdCBydW4gYWN0dWFsIGdpdCBjb21tYW5kc1xuICAgICAgICBjb25zdCBzdGFzaElkOiBhbnkgPSBjb250ZXh0LnNhZmV0eS5jcmVhdGVTdGFzaCgnY2hlY2twb2ludCcsICd0ZXN0Jyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2Ygc3Rhc2hJZCkudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIGV4cGVjdChzdGFzaElkKS50b0NvbnRhaW4oJ21vY2tfc3Rhc2hfJyk7XG5cbiAgICAgICAgLy8gTW9jayBzdGFzaCBhcHBsaWNhdGlvbiBzaG91bGQgbm90IHJ1biBhY3R1YWwgZ2l0IGNvbW1hbmRzXG4gICAgICAgIGNvbnN0IHN0YXNoUmVzdWx0OiBhbnkgPSBjb250ZXh0LnNhZmV0eS5hcHBseVN0YXNoKFN0cmluZyhzdGFzaElkKSk7XG4gICAgICAgIGV4cGVjdChzdGFzaFJlc3VsdCkudG9CZURlZmluZWQoKTtcblxuICAgICAgICAvLyBNb2NrIGdpdCBzdGF0ZSB2YWxpZGF0aW9uIHNob3VsZCBub3QgcnVuIGFjdHVhbCBnaXQgY29tbWFuZHNcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbjogYW55ID0gYXdhaXQgY29udGV4dC5zYWZldHkudmFsaWRhdGVHaXRTdGF0ZSgpO1xuICAgICAgICBleHBlY3QodmFsaWRhdGlvbi5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBzYWZldHkgZXZlbnRzIHdlcmUgcmVjb3JkZWRcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LnNhZmV0eS5nZXRTYWZldHlFdmVudHMoKTtcbiAgICAgICAgZXhwZWN0KHNhZmV0eUV2ZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHNhZmV0eUV2ZW50cy5zb21lKGUgPT4gZS50eXBlID09PSBTYWZldHlFdmVudFR5cGUuQ0hFQ0tQT0lOVF9DUkVBVEVEKSkudG9CZSh0cnVlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3ByZXZlbnQtZ2l0LXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rlc3QtU2FmZSBQcm9ncmVzcyBUcmFja2luZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHByb2dyZXNzIHdpdGhvdXQgbWVtb3J5IGxlYWtzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ21lbW9yeS1zYWZlLXRyYWNraW5nLXRlc3QnLFxuICAgICAgICBlbmFibGVNZW1vcnlNb25pdG9yaW5nOiB0cnVlLFxuICAgICAgICBtb2NrUHJvZ3Jlc3NUcmFja2luZzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBleHBlY3QoY29udGV4dC50ZXN0U2FmZVRyYWNrZXIpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQudGVzdFNhZmVUcmFja2VyKSB7XG4gICAgICAgICAgLy8gU3RhcnQgdHJhY2tpbmdcbiAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5zdGFydFRyYWNraW5nKCdtZW1vcnktdGVzdCcpO1xuXG4gICAgICAgICAgLy8gU2ltdWxhdGUgbXVsdGlwbGUgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci51cGRhdGVNZXRyaWNzKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiA4NiAtIGkgKiA1LFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAwLFxuICAgICAgICAgICAgICAgICAgcmVkdWN0aW9uOiBpICogNSxcbiAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKChpICogNSkgLyA4NikgKiAxMDApLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGB1cGRhdGUtJHtpfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEdldCBwcm9ncmVzcyBoaXN0b3J5XG4gICAgICAgICAgY29uc3QgaGlzdG9yeTogYW55ID0gY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0UHJvZ3Jlc3NIaXN0b3J5KCk7XG4gICAgICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDIwKTsgLy8gU2hvdWxkIGJlIGxpbWl0ZWQgdG8gcHJldmVudCBtZW1vcnkgaXNzdWVzXG5cbiAgICAgICAgICAvLyBWYWxpZGF0ZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgICBjb25zdCBtZW1vcnlTdGF0czogYW55ID0gY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0TWVtb3J5U3RhdGlzdGljcygpO1xuICAgICAgICAgIGlmIChtZW1vcnlTdGF0cyAhPSBudWxsKSB7XG4gICAgICAgICAgICBleHBlY3QobWVtb3J5U3RhdHMubWVtb3J5RWZmaWNpZW50KS50b0JlKHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0b3AgdHJhY2tpbmdcbiAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5zdG9wVHJhY2tpbmcoJ21lbW9yeS10ZXN0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ21lbW9yeS1zYWZlLXRyYWNraW5nLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2ltdWxhdGUgcmVhbGlzdGljIHByb2dyZXNzIG92ZXIgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdwcm9ncmVzcy1zaW11bGF0aW9uLXRlc3QnLFxuICAgICAgICBtb2NrUHJvZ3Jlc3NUcmFja2luZzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoY29udGV4dC50ZXN0U2FmZVRyYWNrZXIpIHtcbiAgICAgICAgICBjb25zdCBpbml0aWFsTWV0cmljczogYW55ID0gYXdhaXQgY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgcHJvZ3Jlc3MgdG8gdGFyZ2V0IG1ldHJpY3NcbiAgICAgICAgICBjb25zdCB0YXJnZXRNZXRyaWNzOiBhbnkgPSB7XG4gICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA4NiwgcGVyY2VudGFnZTogMTAwIH0sXG4gICAgICAgICAgICBsaW50aW5nV2FybmluZ3M6IHsgY3VycmVudDogMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDQ1MDYsIHBlcmNlbnRhZ2U6IDEwMCB9LFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5zaW11bGF0ZVByb2dyZXNzKHRhcmdldE1ldHJpY3MsIDEwMDAsICdzaW11bGF0aW9uLXRlc3QnKTtcblxuICAgICAgICAgIGNvbnN0IGZpbmFsTWV0cmljczogYW55ID0gYXdhaXQgY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG5cbiAgICAgICAgICAvLyBWZXJpZnkgcHJvZ3Jlc3Mgd2FzIG1hZGVcbiAgICAgICAgICBleHBlY3QoZmluYWxNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZUxlc3NUaGFuT3JFcXVhbChpbml0aWFsTWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQpO1xuICAgICAgICAgIGV4cGVjdChmaW5hbE1ldHJpY3MubGludGluZ1dhcm5pbmdzLmN1cnJlbnQpLnRvQmVMZXNzVGhhbk9yRXF1YWwoaW5pdGlhbE1ldHJpY3MubGludGluZ1dhcm5pbmdzLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdwcm9ncmVzcy1zaW11bGF0aW9uLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBwcm9ncmVzcyByZXBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ3Byb2dyZXNzLXJlcG9ydC10ZXN0JyxcbiAgICAgICAgbW9ja1Byb2dyZXNzVHJhY2tpbmc6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2VuZXJhdGUgcHJvZ3Jlc3MgcmVwb3J0XG4gICAgICAgIGNvbnN0IHJlcG9ydDogYW55ID0gYXdhaXQgY29udGV4dC50cmFja2VyLmdlbmVyYXRlUHJvZ3Jlc3NSZXBvcnQoKTtcblxuICAgICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LmNhbXBhaWduSWQpLnRvQmUoJ21vY2stY2FtcGFpZ24nKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5vdmVyYWxsUHJvZ3Jlc3MpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQub3ZlcmFsbFByb2dyZXNzKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQucGhhc2VzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LnBoYXNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5jdXJyZW50TWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC50YXJnZXRNZXRyaWNzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LmVzdGltYXRlZENvbXBsZXRpb24pLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBwaGFzZSByZXBvcnRzXG4gICAgICAgIGNvbnN0IHBoYXNlOiBhbnkgPSAoYXdhaXQgcmVwb3J0KS5waGFzZXNbMF07XG4gICAgICAgIGV4cGVjdChwaGFzZS5waGFzZUlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocGhhc2UucGhhc2VOYW1lKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocGhhc2Uuc3RhdHVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocGhhc2UubWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGhhc2UuYWNoaWV2ZW1lbnRzKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGhhc2UuaXNzdWVzKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGhhc2UucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3Byb2dyZXNzLXJlcG9ydC10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW1wYWlnbiBQYXVzZS9SZXN1bWUgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHBhdXNlIGNhbXBhaWduIG9wZXJhdGlvbnMgZm9yIHRlc3QgaXNvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ3BhdXNlLXJlc3VtZS10ZXN0JyxcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgY2FtcGFpZ24gaXMgcGF1c2VkXG4gICAgICAgIGV4cGVjdChjb250ZXh0LnRlc3RDb250cm9sbGVyLmlzUGF1c2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjb250ZXh0LmNvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGV4ZWN1dGUgcGhhc2Ugd2hpbGUgcGF1c2VkIHNob3VsZCBoYW5kbGUgZ3JhY2VmdWxseVxuICAgICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcbiAgICAgICAgYXdhaXQgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKSkucmVqZWN0cy50b1Rocm93KCdDYW1wYWlnbiBpcyBwYXVzZWQnKTtcblxuICAgICAgICAvLyBSZXN1bWUgY2FtcGFpZ25cbiAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci5yZXN1bWVDYW1wYWlnbkFmdGVyVGVzdCgncGF1c2UtcmVzdW1lLXRlc3QnKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQudGVzdENvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjb250ZXh0LmNvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGJlIGFibGUgdG8gZXhlY3V0ZSBwaGFzZSBhZnRlciByZXN1bWVcbiAgICAgICAgY29uc3QgcmVzdWx0OiBhbnkgPSBhd2FpdCBjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tQaGFzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3BhdXNlLXJlc3VtZS10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIHRlc3QgaXNvbGF0aW9uIGFjcm9zcyBtdWx0aXBsZSB0ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0IHRlc3RcbiAgICAgIGNvbnN0IGNvbnRleHQxOiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAnaXNvbGF0aW9uLXRlc3QtMScsXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29udGV4dDEudGVzdENvbnRyb2xsZXIudXBkYXRlTW9ja01ldHJpY3MoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiAxMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDc2LCBwZXJjZW50YWdlOiA4OCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2lzb2xhdGlvbi10ZXN0LTEnLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBtZXRyaWNzMTogYW55ID0gYXdhaXQgY29udGV4dDEudHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpY3MxLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZSgxMCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdpc29sYXRpb24tdGVzdC0xJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlY29uZCB0ZXN0IHNob3VsZCBoYXZlIGNsZWFuIHN0YXRlXG4gICAgICBjb25zdCBjb250ZXh0MjogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ2lzb2xhdGlvbi10ZXN0LTInLFxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldHJpY3MyOiBhbnkgPSBhd2FpdCBjb250ZXh0Mi50cmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgICAgICAvLyBTaG91bGQgbm90IGhhdmUgdGhlIG1vZGlmaWVkIG1ldHJpY3MgZnJvbSB0ZXN0IDFcbiAgICAgICAgZXhwZWN0KG1ldHJpY3MyLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkubm90LnRvQmUoMTApO1xuICAgICAgICBleHBlY3QobWV0cmljczIudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlR3JlYXRlclRoYW4oMTApOyAvLyBTaG91bGQgYmUgaW5pdGlhbCB2YWx1ZVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgnaXNvbGF0aW9uLXRlc3QtMicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCB0ZXN0IGlzb2xhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRoaXMgdGVzdCB2ZXJpZmllcyB0aGF0IHRoZSBzaW5nbGV0b24gcGF0dGVybiB3b3JrcyBjb3JyZWN0bHlcbiAgICAgIC8vIGFuZCBkb2Vzbid0IGNhdXNlIGNvbmZsaWN0cyBiZXR3ZWVuIGNvbmN1cnJlbnQgdGVzdCBzZXR1cHNcblxuICAgICAgY29uc3QgdGVzdFByb21pc2VzOiBhbnkgPSBbXG4gICAgICAgIHdpdGhDYW1wYWlnblRlc3RJc29sYXRpb24oJ2NvbmN1cnJlbnQtdGVzdC0xJywgYXN5bmMgY29udGV4dCA9PiB7XG4gICAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci51cGRhdGVNb2NrTWV0cmljcyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiAyMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDY2LCBwZXJjZW50YWdlOiA3NyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjb25jdXJyZW50LXRlc3QtMScsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBtZXRyaWNzOiBhbnkgPSBhd2FpdCBjb250ZXh0LnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgICAgZXhwZWN0KG1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlKDIwKTtcbiAgICAgICAgICByZXR1cm4gJ3Rlc3QtMS1jb21wbGV0ZSc7XG4gICAgICAgIH0pLFxuXG4gICAgICAgIHdpdGhDYW1wYWlnblRlc3RJc29sYXRpb24oJ2NvbmN1cnJlbnQtdGVzdC0yJywgYXN5bmMgY29udGV4dCA9PiB7XG4gICAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci51cGRhdGVNb2NrTWV0cmljcyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiAzMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDU2LCBwZXJjZW50YWdlOiA2NSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjb25jdXJyZW50LXRlc3QtMicsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBtZXRyaWNzOiBhbnkgPSBhd2FpdCBjb250ZXh0LnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgICAgZXhwZWN0KG1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlKDMwKTtcbiAgICAgICAgICByZXR1cm4gJ3Rlc3QtMi1jb21wbGV0ZSc7XG4gICAgICAgIH0pLFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0czogYW55ID0gYXdhaXQgUHJvbWlzZS5hbGwodGVzdFByb21pc2VzKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0VxdWFsKFsndGVzdC0xLWNvbXBsZXRlJywgJ3Rlc3QtMi1jb21wbGV0ZSddKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01lbW9yeSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJldmVudCBtZW1vcnkgbGVha3MgZHVyaW5nIGNhbXBhaWduIG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAnbWVtb3J5LWxlYWstcHJldmVudGlvbi10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBQZXJmb3JtIG11bHRpcGxlIG9wZXJhdGlvbnMgdGhhdCBjb3VsZCBjYXVzZSBtZW1vcnkgbGVha3NcbiAgICAgICAgZm9yIChsZXQgaTogYW55ID0gMDsgaSA8IDIwOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcbiAgICAgICAgICBjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tQaGFzZSk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgbWV0cmljc1xuICAgICAgICAgIGNvbnRleHQudGVzdENvbnRyb2xsZXIudXBkYXRlTW9ja01ldHJpY3MoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogODYgLSBpLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogaSwgcGVyY2VudGFnZTogTWF0aC5yb3VuZCgoaSAvIDg2KSAqIDEwMCkgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBgaXRlcmF0aW9uLSR7aX1gLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgc2FmZXR5IGNoZWNrcG9pbnRzXG4gICAgICAgICAgY29udGV4dC5zYWZldHkuY3JlYXRlU3Rhc2goYENoZWNrcG9pbnQgJHtpfWAsICd0ZXN0LXBoYXNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLm1lbW9yeVVzYWdlQWNjZXB0YWJsZShjb250ZXh0KTtcblxuICAgICAgICAvLyBWZXJpZnkgdGhhdCBzYWZldHkgZXZlbnRzIGFyZSBwcm9wZXJseSBtYW5hZ2VkIChub3QgYWNjdW11bGF0aW5nIGluZGVmaW5pdGVseSlcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LmNvbnRyb2xsZXIuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGJlIGxpbWl0ZWQgdG8gcHJldmVudCBtZW1vcnkgaXNzdWVzXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdtZW1vcnktbGVhay1wcmV2ZW50aW9uLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYW51cCByZXNvdXJjZXMgcHJvcGVybHkgYWZ0ZXIgdGVzdCBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2V0dXAgYW5kIHVzZSBjYW1wYWlnbiB0ZXN0XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAncmVzb3VyY2UtY2xlYW51cC10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uc1xuICAgICAgY29uc3QgbW9ja1BoYXNlOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKS5waGFzZXNbMF07XG4gICAgICBjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tQaGFzZSk7XG5cbiAgICAgIGlmIChjb250ZXh0LnRlc3RTYWZlVHJhY2tlcikge1xuICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5zdGFydFRyYWNraW5nKCdjbGVhbnVwLXRlc3QnKTtcbiAgICAgICAgY29udGV4dC50ZXN0U2FmZVRyYWNrZXIudXBkYXRlTWV0cmljcyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDUwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogNTAsIHBlcmNlbnRhZ2U6IDUwIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnY2xlYW51cC10ZXN0JyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW51cFxuICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgncmVzb3VyY2UtY2xlYW51cC10ZXN0Jyk7XG5cbiAgICAgIC8vIFZlcmlmeSBjbGVhbnVwIHdhcyBlZmZlY3RpdmVcbiAgICAgIGV4cGVjdChjb250ZXh0LnRlc3RDb250cm9sbGVyLmlzUGF1c2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGNvbnRleHQudGVzdENvbnRyb2xsZXIuaXNJc29sYXRlZCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gVGVzdC1zYWZlIHRyYWNrZXIgc2hvdWxkIGJlIGNsZWFuZWQgdXBcbiAgICAgIGlmIChjb250ZXh0LnRlc3RTYWZlVHJhY2tlcikge1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uOiBhbnkgPSBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci52YWxpZGF0ZVRyYWNraW5nU3RhdGUoKTtcbiAgICAgICAgLy8gU2hvdWxkIG5vdCBiZSB0cmFja2luZyBhbnltb3JlXG4gICAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wbGV0ZSBDYW1wYWlnbiBUZXN0IFNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgVHlwZVNjcmlwdCBlcnJvciByZWR1Y3Rpb24gc2NlbmFyaW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzY2VuYXJpbzogYW55ID0gY2FtcGFpZ25UZXN0RGF0YS50eXBlU2NyaXB0RXJyb3JSZWR1Y3Rpb24oKTtcbiAgICAgIGNvbnN0IF9jb25maWc6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjb250ZXh0OiBfY29udGV4dCxcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgZmluYWxNZXRyaWNzLFxuICAgICAgICBzYWZldHlFdmVudHM6IF9zYWZldHlFdmVudHMsXG4gICAgICB9ID0gYXdhaXQgZXhlY3V0ZUNhbXBhaWduVGVzdFNjZW5hcmlvKHNjZW5hcmlvLCBfY29uZmlnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmeSBwaGFzZSBleGVjdXRpb25cbiAgICAgICAgZXhwZWN0KHJlc3VsdHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMucGhhc2VDb21wbGV0ZWRTdWNjZXNzZnVsbHkocmVzdWx0c1swXSk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHByb2dyZXNzIGltcHJvdmVtZW50XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5wcm9ncmVzc0ltcHJvdmVkKHNjZW5hcmlvLmluaXRpYWxNZXRyaWNzLCBmaW5hbE1ldHJpY3MpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBzYWZldHkgZXZlbnRzXG4gICAgICAgIGNhbXBhaWduVGVzdEFzc2VydGlvbnMuc2FmZXR5RXZlbnRzUmVjb3JkZWQoX3NhZmV0eUV2ZW50cywgc2NlbmFyaW8uZXhwZWN0ZWRTYWZldHlFdmVudHMpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBmaW5hbCBzdGF0ZVxuICAgICAgICBleHBlY3QoZmluYWxNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZUxlc3NUaGFuT3JFcXVhbChcbiAgICAgICAgICBzY2VuYXJpby5pbml0aWFsTWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQsXG4gICAgICAgICk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KHNjZW5hcmlvLm5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIGxpbnRpbmcgd2FybmluZyBjbGVhbnVwIHNjZW5hcmlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NlbmFyaW86IGFueSA9IGNhbXBhaWduVGVzdERhdGEubGludGluZ1dhcm5pbmdDbGVhbnVwKCk7XG4gICAgICBjb25zdCBfY29uZmlnOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY29udGV4dDogX2NvbnRleHQsXG4gICAgICAgIHJlc3VsdHMsXG4gICAgICAgIGZpbmFsTWV0cmljcyxcbiAgICAgICAgc2FmZXR5RXZlbnRzOiBfc2FmZXR5RXZlbnRzLFxuICAgICAgfSA9IGF3YWl0IGV4ZWN1dGVDYW1wYWlnblRlc3RTY2VuYXJpbyhzY2VuYXJpbywgX2NvbmZpZyk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgcGhhc2UgZXhlY3V0aW9uXG4gICAgICAgIGV4cGVjdChyZXN1bHRzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnBoYXNlQ29tcGxldGVkU3VjY2Vzc2Z1bGx5KHJlc3VsdHNbMF0pO1xuXG4gICAgICAgIC8vIFZlcmlmeSBwcm9ncmVzcyBpbXByb3ZlbWVudFxuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMucHJvZ3Jlc3NJbXByb3ZlZChzY2VuYXJpby5pbml0aWFsTWV0cmljcywgZmluYWxNZXRyaWNzKTtcblxuICAgICAgICAvLyBWZXJpZnkgbGludGluZy1zcGVjaWZpYyBpbXByb3ZlbWVudHNcbiAgICAgICAgZXhwZWN0KGZpbmFsTWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCkudG9CZUxlc3NUaGFuT3JFcXVhbChcbiAgICAgICAgICBzY2VuYXJpby5pbml0aWFsTWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCxcbiAgICAgICAgKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3Qoc2NlbmFyaW8ubmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjYW1wYWlnbiBmYWlsdXJlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ2ZhaWx1cmUtaGFuZGxpbmctdGVzdCcsXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgcGhhc2UgdGhhdCB3aWxsIGZhaWxcbiAgICAgICAgY29uc3QgZmFpbGluZ1BoYXNlOiBhbnkgPSB7XG4gICAgICAgICAgLi4uY3JlYXRlTW9ja0NhbXBhaWduQ29uZmlnKCkucGhhc2VzWzBdLFxuICAgICAgICAgIHN1Y2Nlc3NDcml0ZXJpYTogeyB0eXBlU2NyaXB0RXJyb3JzOiAtMSwgLy8gSW1wb3NzaWJsZSBjcml0ZXJpYVxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTW9jayB0aGUgY29udHJvbGxlciB0byBzaW11bGF0ZSBmYWlsdXJlXG4gICAgICAgIHZvaWQgamVzdC5zcHlPbihjb250ZXh0LmNvbnRyb2xsZXIsICdleGVjdXRlUGhhc2UnKS5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdNb2NrIGZhaWx1cmUnKSk7XG5cbiAgICAgICAgLy8gRXhlY3V0ZSBwaGFzZSBhbmQgZXhwZWN0IGl0IHRvIGhhbmRsZSBmYWlsdXJlXG4gICAgICAgIGF3YWl0IGV4cGVjdChjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKGZhaWxpbmdQaGFzZSkpLnJlamVjdHMudG9UaHJvdygnTW9jayBmYWlsdXJlJyk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHNhZmV0eSBldmVudHMgd2VyZSByZWNvcmRlZCBmb3IgdGhlIGZhaWx1cmVcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LmNvbnRyb2xsZXIuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdmYWlsdXJlLWhhbmRsaW5nLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb21wbGV0ZSBjYW1wYWlnbiBzeXN0ZW0gaW50ZWdyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAnaW50ZWdyYXRpb24tdmFsaWRhdGlvbi10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgICAgcHJldmVudEFjdHVhbEJ1aWxkczogdHJ1ZSxcbiAgICAgICAgcHJldmVudEdpdE9wZXJhdGlvbnM6IHRydWUsXG4gICAgICAgIG1vY2tQcm9ncmVzc1RyYWNraW5nOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZhbGlkYXRlIHRlc3QgaXNvbGF0aW9uXG4gICAgICAgIGNvbnN0IGlzb2xhdGlvbjogYW55ID0gdmFsaWRhdGVDYW1wYWlnblRlc3RJc29sYXRpb24oYXdhaXQgY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChpc29sYXRpb24uaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGlzb2xhdGlvbi5pc3N1ZXMpLnRvSGF2ZUxlbmd0aCgwKTtcblxuICAgICAgICAvLyBUZXN0IGFsbCBtYWpvciBjb21wb25lbnRzXG4gICAgICAgIGNvbnN0IG1vY2tQaGFzZTogYW55ID0gY3JlYXRlTW9ja0NhbXBhaWduQ29uZmlnKCkucGhhc2VzWzBdO1xuXG4gICAgICAgIC8vIDEuIEV4ZWN1dGUgY2FtcGFpZ24gcGhhc2VcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRDb250ZXh0OiBhbnkgPSBhd2FpdCBjb250ZXh0O1xuICAgICAgICBjb25zdCBwaGFzZVJlc3VsdDogYW55ID0gYXdhaXQgcmVzb2x2ZWRDb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tQaGFzZSk7XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5waGFzZUNvbXBsZXRlZFN1Y2Nlc3NmdWxseShwaGFzZVJlc3VsdCk7XG5cbiAgICAgICAgLy8gMi4gVHJhY2sgcHJvZ3Jlc3NcbiAgICAgICAgY29uc3QgaW5pdGlhbE1ldHJpY3M6IGFueSA9IGF3YWl0IChhd2FpdCBjb250ZXh0KS50cmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgICAgICBjb250ZXh0LnRlc3RDb250cm9sbGVyLnVwZGF0ZU1vY2tNZXRyaWNzKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogMjUsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA2MSwgcGVyY2VudGFnZTogNzEgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgICdpbnRlZ3JhdGlvbi10ZXN0JyxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZE1ldHJpY3M6IGFueSA9IGF3YWl0IChhd2FpdCBjb250ZXh0KS50cmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMucHJvZ3Jlc3NJbXByb3ZlZChpbml0aWFsTWV0cmljcywgdXBkYXRlZE1ldHJpY3MpO1xuXG4gICAgICAgIC8vIDMuIFNhZmV0eSBvcGVyYXRpb25zXG4gICAgICAgIGNvbnN0IHN0YXNoSWQ6IGFueSA9IChhd2FpdCBjb250ZXh0KS5zYWZldHkuY3JlYXRlU3Rhc2goJ0ludGVncmF0aW9uIHRlc3Qgc3Rhc2gnLCAndGVzdC1waGFzZScpO1xuICAgICAgICBleHBlY3Qoc3Rhc2hJZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgKGF3YWl0IGNvbnRleHQpLnNhZmV0eS5hcHBseVN0YXNoKFN0cmluZyhzdGFzaElkKSk7XG5cbiAgICAgICAgLy8gNC4gR2VuZXJhdGUgcmVwb3J0c1xuICAgICAgICBjb25zdCByZXBvcnQ6IGFueSA9IGF3YWl0IGNvbnRleHQudHJhY2tlci5nZW5lcmF0ZVByb2dyZXNzUmVwb3J0KCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQucGhhc2VzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAgIC8vIDUuIFZhbGlkYXRlIG1lbW9yeSB1c2FnZVxuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMubWVtb3J5VXNhZ2VBY2NlcHRhYmxlKGNvbnRleHQpO1xuXG4gICAgICAgIC8vIDYuIFZlcmlmeSBhbGwgc2FmZXR5IGV2ZW50c1xuICAgICAgICBjb25zdCBzYWZldHlFdmVudHM6IGFueSA9IChhd2FpdCBjb250ZXh0KS5jb250cm9sbGVyLmdldFNhZmV0eUV2ZW50cygpO1xuICAgICAgICBleHBlY3Qoc2FmZXR5RXZlbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnNhZmV0eUV2ZW50c1JlY29yZGVkKHNhZmV0eUV2ZW50cywgW1NhZmV0eUV2ZW50VHlwZS5DSEVDS1BPSU5UX0NSRUFURURdKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ2ludGVncmF0aW9uLXZhbGlkYXRpb24tdGVzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9