{"file":"/Users/GregCastro/Desktop/WhatToEatNext/src/services/campaign/unintentional-any-elimination/FullCampaignExecutor.ts","mappings":"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","names":[],"sources":["/Users/GregCastro/Desktop/WhatToEatNext/src/services/campaign/unintentional-any-elimination/FullCampaignExecutor.ts"],"sourcesContent":["/**\n * Full Campaign Executor for Unintentional Any Elimination\n *\n * Executes the complete unintentional any elimination campaign across all domains\n * with target achievement of 15-20% reduction (250-350 fixes from 2,022 unintentional)\n */\n\nimport { execSync } from 'child_process';\nimport * as fs from 'fs';\nimport { AnalysisTools } from './AnalysisTools';\nimport { AnyTypeClassifier } from './AnyTypeClassifier';\nimport { AutoDocumentationGenerator } from './AutoDocumentationGenerator';\nimport { DomainContextAnalyzer } from './DomainContextAnalyzer';\nimport { ProgressMonitoringSystem } from './ProgressMonitoringSystem';\nimport { ProgressiveImprovementEngine } from './ProgressiveImprovementEngine';\nimport { SafeTypeReplacer } from './SafeTypeReplacer';\nimport {\n    AnyTypeCategory,\n    AnyTypeClassification,\n    CampaignMetrics,\n    CampaignPhase,\n    DomainProcessingResult,\n    FinalReport,\n    FullCampaignConfig,\n    FullCampaignResult,\n    ReplacementResult\n} from './types';\n\nexport class FullCampaignExecutor {\n  private classifier: AnyTypeClassifier;\n  private replacer: SafeTypeReplacer;\n  private domainAnalyzer: DomainContextAnalyzer;\n  private progressiveEngine: ProgressiveImprovementEngine;\n  private documentationGenerator: AutoDocumentationGenerator;\n  private analysisTools: AnalysisTools;\n  private progressMonitor: ProgressMonitoringSystem;\n  private config: FullCampaignConfig;\n  private startTime: Date;\n  private metrics: CampaignMetrics;\n\n  constructor(config: Partial<FullCampaignConfig> = {}) {\n    this.config = {\n      targetReductionPercentage: 17.5, // Target 15-20% reduction\n      targetFixCount: 300, // Target 250-350 fixes\n      maxBatchSize: 25,\n      minBatchSize: 10,\n      safetyThreshold: 0.7,\n      buildValidationFrequency: 5,\n      enableDocumentation: true,\n      enableProgressiveStrategy: true,\n      processAllDomains: true,\n      generateFinalReport: true,\n      validatePerformanceImprovements: true,\n      emergencyStopThreshold: 0.5,\n      maxCampaignDuration: 4 * 60 * 60 * 1000, // 4 hours max\n      ...config\n    };\n\n    this.classifier = new AnyTypeClassifier();\n    this.replacer = new SafeTypeReplacer();\n    this.domainAnalyzer = new DomainContextAnalyzer();\n    this.progressiveEngine = new ProgressiveImprovementEngine();\n    this.documentationGenerator = new AutoDocumentationGenerator();\n    this.analysisTools = new AnalysisTools();\n    this.progressMonitor = new ProgressMonitoringSystem();\n    this.startTime = new Date();\n    this.metrics = this.initializeMetrics();\n  }\n\n  /**\n   * Execute the complete unintentional any elimination campaign\n   */\n  async executeFullCampaign(): Promise<FullCampaignResult> {\n    console.log('🚀 Starting Full Unintentional Any Elimination Campaign');\n    console.log(`📊 Target: ${this.config.targetReductionPercentage}% reduction (${this.config.targetFixCount} fixes)`);\n\n    try {\n      // Phase 1: Initial Analysis and Baseline\n      const baselineResult = await this.executePhase1_InitialAnalysis();\n\n      // Phase 2: High-Confidence Replacements\n      const highConfidenceResult = await this.executePhase2_HighConfidenceReplacements();\n\n      // Phase 3: Medium-Risk Category Processing\n      const mediumRiskResult = await this.executePhase3_MediumRiskProcessing();\n\n      // Phase 4: Domain-Specific Processing\n      const domainSpecificResult = await this.executePhase4_DomainSpecificProcessing();\n\n      // Phase 5: Documentation and Validation\n      const documentationResult = await this.executePhase5_DocumentationAndValidation();\n\n      // Phase 6: Final Validation and Reporting\n      const finalResult = await this.executePhase6_FinalValidationAndReporting();\n\n      const campaignResult: FullCampaignResult = {\n        success: true,\n        totalFixesApplied: this.metrics.totalFixesApplied,\n        reductionPercentage: this.calculateReductionPercentage(),\n        targetAchieved: this.isTargetAchieved(),\n        phases: [\n          baselineResult,\n          highConfidenceResult,\n          mediumRiskResult,\n          domainSpecificResult,\n          documentationResult,\n          finalResult\n        ],\n        metrics: this.metrics,\n        finalReport: await this.generateFinalReport(),\n        duration: Date.now() - this.startTime.getTime(),\n        buildStable: await this.validateBuildStability(),\n        performanceImproved: await this.validatePerformanceImprovements()\n      };\n\n      console.log('✅ Full Campaign Completed Successfully');\n      console.log(`📈 Achieved: ${campaignResult.reductionPercentage.toFixed(1)}% reduction`);\n      console.log(`🎯 Target Met: ${campaignResult.targetAchieved ? 'YES' : 'NO'}`);\n\n      return campaignResult;\n\n    } catch (error) {\n      console.error('❌ Campaign execution failed:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        totalFixesApplied: this.metrics.totalFixesApplied,\n        reductionPercentage: this.calculateReductionPercentage(),\n        targetAchieved: false,\n        phases: [],\n        metrics: this.metrics,\n        duration: Date.now() - this.startTime.getTime(),\n        buildStable: await this.validateBuildStability(),\n        performanceImproved: false\n      };\n    }\n  }\n\n  /**\n   * Phase 1: Initial Analysis and Baseline Establishment\n   */\n  private async executePhase1_InitialAnalysis(): Promise<CampaignPhase> {\n    console.log('\\n📋 Phase 1: Initial Analysis and Baseline');\n\n    const phaseStart = Date.now();\n\n    try {\n      // Get initial baseline metrics\n      const initialErrorCount = await this.getCurrentErrorCount();\n      const initialAnyCount = await this.getCurrentAnyCount();\n\n      console.log(`📊 Baseline - TypeScript Errors: ${initialErrorCount}`);\n      console.log(`📊 Baseline - Explicit Any Count: ${initialAnyCount}`);\n\n      // Perform comprehensive analysis\n      const analysisResult = await this.analysisTools.performComprehensiveAnalysis();\n\n      // Update metrics\n      this.metrics.initialErrorCount = initialErrorCount;\n      this.metrics.initialAnyCount = initialAnyCount;\n      this.metrics.baselineEstablished = true;\n\n      return {\n        name: 'Initial Analysis and Baseline',\n        success: true,\n        duration: Date.now() - phaseStart,\n        fixesApplied: 0,\n        errorsBefore: initialErrorCount,\n        errorsAfter: initialErrorCount,\n        details: {\n          analysisResult,\n          baselineMetrics: {\n            errorCount: initialErrorCount,\n            anyCount: initialAnyCount\n          }\n        }\n      };\n\n    } catch (error) {\n      console.error('❌ Phase 1 failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Phase 2: High-Confidence Replacements (Array types, simple Records)\n   */\n  private async executePhase2_HighConfidenceReplacements(): Promise<CampaignPhase> {\n    console.log('\\n🎯 Phase 2: High-Confidence Replacements');\n\n    const phaseStart = Date.now();\n    const errorsBefore = await this.getCurrentErrorCount();\n\n    try {\n      let totalFixes = 0;\n      let batchCount = 0;\n      const maxBatches = 20; // Limit for high-confidence phase\n\n      while (batchCount < maxBatches && totalFixes < this.config.targetFixCount * 0.6) {\n        console.log(`\\n🔄 High-Confidence Batch ${batchCount + 1}`);\n\n        // Find high-confidence cases\n        const highConfidenceCases = await this.findHighConfidenceCases();\n\n        if (highConfidenceCases.length === 0) {\n          console.log('✅ No more high-confidence cases found');\n          break;\n        }\n\n        // Process batch with enhanced safety\n        const batchResult = await this.processBatchWithSafety(\n          highConfidenceCases.slice(0, this.config.maxBatchSize),\n          'high-confidence'\n        );\n\n        totalFixes += batchResult.successfulReplacements;\n        this.metrics.totalFixesApplied += batchResult.successfulReplacements;\n\n        // Validate build after each batch\n        if (!await this.validateBuildStability()) {\n          console.error('❌ Build instability detected, stopping phase');\n          break;\n        }\n\n        batchCount++;\n\n        // Progress update\n        console.log(`📈 Phase 2 Progress: ${totalFixes} fixes applied`);\n      }\n\n      const errorsAfter = await this.getCurrentErrorCount();\n\n      return {\n        name: 'High-Confidence Replacements',\n        success: true,\n        duration: Date.now() - phaseStart,\n        fixesApplied: totalFixes,\n        errorsBefore,\n        errorsAfter,\n        details: {\n          batchesProcessed: batchCount,\n          categories: ['ARRAY_TYPE', 'RECORD_TYPE']\n        }\n      };\n\n    } catch (error) {\n      console.error('❌ Phase 2 failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Phase 3: Medium-Risk Category Processing\n   */\n  private async executePhase3_MediumRiskProcessing(): Promise<CampaignPhase> {\n    console.log('\\n⚖️ Phase 3: Medium-Risk Category Processing');\n\n    const phaseStart = Date.now();\n    const errorsBefore = await this.getCurrentErrorCount();\n\n    try {\n      let totalFixes = 0;\n      const mediumRiskCategories = [\n        AnyTypeCategory.FUNCTION_PARAM,\n        AnyTypeCategory.RETURN_TYPE,\n        AnyTypeCategory.TYPE_ASSERTION\n      ];\n\n      for (const category of mediumRiskCategories) {\n        console.log(`\\n🔍 Processing ${category} category`);\n\n        const categoryFixes = await this.processCategoryWithEnhancedSafety(category);\n        totalFixes += categoryFixes;\n        this.metrics.totalFixesApplied += categoryFixes;\n\n        // Validate after each category\n        if (!await this.validateBuildStability()) {\n          console.error(`❌ Build instability after ${category}, stopping`);\n          break;\n        }\n\n        console.log(`✅ ${category}: ${categoryFixes} fixes applied`);\n      }\n\n      const errorsAfter = await this.getCurrentErrorCount();\n\n      return {\n        name: 'Medium-Risk Category Processing',\n        success: true,\n        duration: Date.now() - phaseStart,\n        fixesApplied: totalFixes,\n        errorsBefore,\n        errorsAfter,\n        details: {\n          categoriesProcessed: mediumRiskCategories,\n          enhancedSafetyProtocols: true\n        }\n      };\n\n    } catch (error) {\n      console.error('❌ Phase 3 failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Phase 4: Domain-Specific Processing\n   */\n  private async executePhase4_DomainSpecificProcessing(): Promise<CampaignPhase> {\n    console.log('\\n🏗️ Phase 4: Domain-Specific Processing');\n\n    const phaseStart = Date.now();\n    const errorsBefore = await this.getCurrentErrorCount();\n\n    try {\n      const domains = ['astrological', 'recipe', 'campaign', 'service', 'component'];\n      const domainResults: DomainProcessingResult[] = [];\n      let totalFixes = 0;\n\n      for (const domain of domains) {\n        console.log(`\\n🎯 Processing ${domain} domain`);\n\n        const domainFixes = await this.processDomainSpecific(domain);\n        totalFixes += domainFixes.fixesApplied;\n        this.metrics.totalFixesApplied += domainFixes.fixesApplied;\n\n        domainResults.push(domainFixes);\n\n        // Validate after each domain\n        if (!await this.validateBuildStability()) {\n          console.error(`❌ Build instability after ${domain} domain`);\n          break;\n        }\n\n        console.log(`✅ ${domain} domain: ${domainFixes.fixesApplied} fixes applied`);\n      }\n\n      const errorsAfter = await this.getCurrentErrorCount();\n\n      return {\n        name: 'Domain-Specific Processing',\n        success: true,\n        duration: Date.now() - phaseStart,\n        fixesApplied: totalFixes,\n        errorsBefore,\n        errorsAfter,\n        details: {\n          domainResults,\n          domainsProcessed: domains\n        }\n      };\n\n    } catch (error) {\n      console.error('❌ Phase 4 failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Phase 5: Documentation and Validation\n   */\n  private async executePhase5_DocumentationAndValidation(): Promise<CampaignPhase> {\n    console.log('\\n📝 Phase 5: Documentation and Validation');\n\n    const phaseStart = Date.now();\n    const errorsBefore = await this.getCurrentErrorCount();\n\n    try {\n      // Document all intentional any types\n      const documentationResult = await this.documentationGenerator.documentAllIntentionalAnyTypes();\n\n      // Add ESLint disable comments with explanations\n      const eslintResult = await this.addESLintDisableComments();\n\n      // Validate documentation completeness\n      const validationResult = await this.validateDocumentationCompleteness();\n\n      console.log(`📝 Documented ${documentationResult.documented} intentional any types`);\n      console.log(`🔧 Added ${eslintResult.added} ESLint disable comments`);\n      console.log(`✅ Documentation validation: ${validationResult.complete ? 'COMPLETE' : 'INCOMPLETE'}`);\n\n      const errorsAfter = await this.getCurrentErrorCount();\n\n      return {\n        name: 'Documentation and Validation',\n        success: true,\n        duration: Date.now() - phaseStart,\n        fixesApplied: 0, // Documentation doesn't count as fixes\n        errorsBefore,\n        errorsAfter,\n        details: {\n          documentationResult,\n          eslintResult,\n          validationResult\n        }\n      };\n\n    } catch (error) {\n      console.error('❌ Phase 5 failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Phase 6: Final Validation and Reporting\n   */\n  private async executePhase6_FinalValidationAndReporting(): Promise<CampaignPhase> {\n    console.log('\\n📊 Phase 6: Final Validation and Reporting');\n\n    const phaseStart = Date.now();\n    const errorsBefore = await this.getCurrentErrorCount();\n\n    try {\n      // Final TypeScript error validation\n      const finalErrorCount = await this.getCurrentErrorCount();\n      const finalAnyCount = await this.getCurrentAnyCount();\n\n      // Build performance validation\n      const performanceResult = await this.validatePerformanceImprovements();\n\n      // Generate comprehensive final report\n      const finalReport = await this.generateFinalReport();\n\n      // Update final metrics\n      this.metrics.finalErrorCount = finalErrorCount;\n      this.metrics.finalAnyCount = finalAnyCount;\n      this.metrics.campaignCompleted = true;\n\n      console.log(`📊 Final Metrics:`);\n      console.log(`   TypeScript Errors: ${this.metrics.initialErrorCount} → ${finalErrorCount}`);\n      console.log(`   Explicit Any Count: ${this.metrics.initialAnyCount} → ${finalAnyCount}`);\n      console.log(`   Total Fixes Applied: ${this.metrics.totalFixesApplied}`);\n      console.log(`   Reduction Percentage: ${this.calculateReductionPercentage().toFixed(1)}%`);\n      console.log(`   Target Achieved: ${this.isTargetAchieved() ? 'YES' : 'NO'}`);\n      console.log(`   Build Performance: ${performanceResult ? 'IMPROVED' : 'STABLE'}`);\n\n      return {\n        name: 'Final Validation and Reporting',\n        success: true,\n        duration: Date.now() - phaseStart,\n        fixesApplied: 0,\n        errorsBefore,\n        errorsAfter: finalErrorCount,\n        details: {\n          finalReport,\n          performanceResult,\n          targetAchieved: this.isTargetAchieved()\n        }\n      };\n\n    } catch (error) {\n      console.error('❌ Phase 6 failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Find high-confidence cases for replacement\n   */\n  private async findHighConfidenceCases(): Promise<AnyTypeClassification[]> {\n    const files = await this.getTypeScriptFiles();\n    const highConfidenceCases: AnyTypeClassification[] = [];\n\n    for (const file of files.slice(0, 50)) { // Process in chunks\n      try {\n        const content = fs.readFileSync(file, 'utf8');\n        const cases = await this.classifier.classifyFileContent(file, content);\n\n        // Filter for high-confidence unintentional cases\n        const highConfidence = cases.filter(c =>\n          !c.isIntentional &&\n          c.confidence >= 0.85 &&\n          (c.category === AnyTypeCategory.ARRAY_TYPE || c.category === AnyTypeCategory.RECORD_TYPE)\n        );\n\n        highConfidenceCases.push(...highConfidence);\n\n      } catch (error) {\n        console.warn(`Warning: Could not process ${file}:`, error);\n      }\n    }\n\n    return highConfidenceCases.slice(0, this.config.maxBatchSize);\n  }\n\n  /**\n   * Process a batch with enhanced safety protocols\n   */\n  private async processBatchWithSafety(\n    cases: AnyTypeClassification[],\n    batchType: string\n  ): Promise<ReplacementResult> {\n    console.log(`🔧 Processing ${cases.length} ${batchType} cases`);\n\n    // Create backup before processing\n    const backupPath = await this.createBackup();\n\n    try {\n      const result = await this.replacer.processBatch(cases);\n\n      // Validate build after replacement\n      if (!await this.validateBuildStability()) {\n        console.warn('⚠️ Build instability detected, rolling back');\n        await this.restoreBackup(backupPath);\n        return {\n          success: false,\n          appliedReplacements: [],\n          failedReplacements: cases.map(c => ({\n            original: 'any',\n            replacement: c.suggestedReplacement || 'unknown',\n            filePath: c.filePath,\n            lineNumber: c.lineNumber,\n            confidence: c.confidence,\n            validationRequired: true\n          })),\n          compilationErrors: ['Build instability after replacement'],\n          rollbackPerformed: true,\n          backupPath,\n          successfulReplacements: 0,\n          totalAttempted: cases.length\n        };\n      }\n\n      console.log(`✅ Batch completed: ${result.successfulReplacements}/${cases.length} successful`);\n      return result;\n\n    } catch (error) {\n      console.error('❌ Batch processing failed:', error);\n      await this.restoreBackup(backupPath);\n      throw error;\n    }\n  }\n\n  /**\n   * Process a specific category with enhanced safety\n   */\n  private async processCategoryWithEnhancedSafety(category: AnyTypeCategory): Promise<number> {\n    const files = await this.getTypeScriptFiles();\n    let totalFixes = 0;\n    let batchCount = 0;\n    const maxBatches = 15; // Limit for medium-risk categories\n\n    while (batchCount < maxBatches) {\n      const categoryCases = await this.findCategorySpecificCases(category, files);\n\n      if (categoryCases.length === 0) {\n        break;\n      }\n\n      const batchResult = await this.processBatchWithSafety(\n        categoryCases.slice(0, this.config.minBatchSize), // Smaller batches for medium-risk\n        `${category}-batch-${batchCount + 1}`\n      );\n\n      totalFixes += batchResult.successfulReplacements;\n      batchCount++;\n\n      // More frequent validation for medium-risk\n      if (batchCount % 3 === 0) {\n        if (!await this.validateBuildStability()) {\n          console.warn(`⚠️ Stopping ${category} processing due to build instability`);\n          break;\n        }\n      }\n    }\n\n    return totalFixes;\n  }\n\n  /**\n   * Process domain-specific cases\n   */\n  private async processDomainSpecific(domain: string): Promise<DomainProcessingResult> {\n    const domainFiles = await this.getDomainFiles(domain);\n    let fixesApplied = 0;\n    const processedFiles: string[] = [];\n\n    for (const file of domainFiles.slice(0, 20)) { // Limit per domain\n      try {\n        const content = fs.readFileSync(file, 'utf8');\n        const domainContext = await this.domainAnalyzer.analyzeDomain(file, content);\n        const cases = await this.classifier.classifyFileContent(file, content);\n\n        // Filter for domain-appropriate cases\n        const domainCases = cases.filter(c =>\n          !c.isIntentional &&\n          c.confidence >= 0.7 &&\n          this.isDomainAppropriate(c, domainContext)\n        );\n\n        if (domainCases.length > 0) {\n          const result = await this.processBatchWithSafety(domainCases, `${domain}-domain`);\n          fixesApplied += result.successfulReplacements;\n          processedFiles.push(file);\n        }\n\n      } catch (error) {\n        console.warn(`Warning: Could not process domain file ${file}:`, error);\n      }\n    }\n\n    return {\n      domain,\n      fixesApplied,\n      filesProcessed: processedFiles.length,\n      processedFiles\n    };\n  }\n\n  /**\n   * Add ESLint disable comments for intentional any types\n   */\n  private async addESLintDisableComments(): Promise<{ added: number }> {\n    const files = await this.getTypeScriptFiles();\n    let added = 0;\n\n    for (const file of files) {\n      try {\n        const content = fs.readFileSync(file, 'utf8');\n        const cases = await this.classifier.classifyFileContent(file, content);\n\n        const intentionalCases = cases.filter(c => c.isIntentional);\n\n        if (intentionalCases.length > 0) {\n          const updatedContent = await this.addESLintCommentsToFile(file, content, intentionalCases);\n          if (updatedContent !== content) {\n            fs.writeFileSync(file, updatedContent);\n            added += intentionalCases.length;\n          }\n        }\n\n      } catch (error) {\n        console.warn(`Warning: Could not add ESLint comments to ${file}:`, error);\n      }\n    }\n\n    return { added };\n  }\n\n  /**\n   * Add ESLint disable comments to a specific file\n   */\n  private async addESLintCommentsToFile(\n    filePath: string,\n    content: string,\n    intentionalCases: AnyTypeClassification[]\n  ): Promise<string> {\n    const lines = content.split('\\n');\n    let modified = false;\n\n    for (const case_ of intentionalCases) {\n      const lineIndex = case_.lineNumber - 1;\n      if (lineIndex >= 0 && lineIndex < lines.length) {\n        const line = lines[lineIndex];\n\n        // Check if ESLint disable comment already exists\n        if (!line.includes('eslint-disable') && !lines[lineIndex - 1]?.includes('eslint-disable')) {\n          const reason = this.getESLintDisableReason(case_);\n          const comment = `// eslint-disable-next-line @typescript-eslint/no-explicit-any -- ${reason}`;\n\n          // Insert comment on the line before\n          lines.splice(lineIndex, 0, comment);\n          modified = true;\n        }\n      }\n    }\n\n    return modified ? lines.join('\\n') : content;\n  }\n\n  /**\n   * Get appropriate ESLint disable reason\n   */\n  private getESLintDisableReason(case_: AnyTypeClassification): string {\n    switch (case_.category) {\n      case AnyTypeCategory.ERROR_HANDLING:\n        return 'Error handling requires flexible typing';\n      case AnyTypeCategory.EXTERNAL_API:\n        return 'External API response with unknown structure';\n      case AnyTypeCategory.DYNAMIC_CONFIG:\n        return 'Dynamic configuration requires flexible typing';\n      case AnyTypeCategory.TEST_MOCK:\n        return 'Test mock requires flexible typing';\n      default:\n        return case_.reasoning || 'Intentional any type for flexibility';\n    }\n  }\n\n  /**\n   * Validate documentation completeness\n   */\n  private async validateDocumentationCompleteness(): Promise<{ complete: boolean; undocumented: number }> {\n    const files = await this.getTypeScriptFiles();\n    let undocumented = 0;\n\n    for (const file of files) {\n      try {\n        const content = fs.readFileSync(file, 'utf8');\n        const cases = await this.classifier.classifyFileContent(file, content);\n\n        const intentionalCases = cases.filter(c => c.isIntentional);\n\n        for (const case_ of intentionalCases) {\n          if (!case_.requiresDocumentation) continue;\n\n          const hasDocumentation = this.hasAdequateDocumentation(content, case_);\n          if (!hasDocumentation) {\n            undocumented++;\n          }\n        }\n\n      } catch (error) {\n        console.warn(`Warning: Could not validate documentation in ${file}:`, error);\n      }\n    }\n\n    return {\n      complete: undocumented === 0,\n      undocumented\n    };\n  }\n\n  /**\n   * Check if a case has adequate documentation\n   */\n  private hasAdequateDocumentation(content: string, case_: AnyTypeClassification): boolean {\n    const lines = content.split('\\n');\n    const lineIndex = case_.lineNumber - 1;\n\n    // Check previous lines for comments or ESLint disable\n    for (let i = Math.max(0, lineIndex - 3); i < lineIndex; i++) {\n      const line = lines[i];\n      if (line.includes('//') || line.includes('/*') || line.includes('eslint-disable')) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Generate comprehensive final report\n   */\n  private async generateFinalReport(): Promise<FinalReport> {\n    const currentTime = new Date();\n    const duration = currentTime.getTime() - this.startTime.getTime();\n\n    return {\n      campaignId: `full-campaign-${this.startTime.getTime()}`,\n      startTime: this.startTime,\n      endTime: currentTime,\n      duration,\n      targetReductionPercentage: this.config.targetReductionPercentage,\n      actualReductionPercentage: this.calculateReductionPercentage(),\n      targetFixCount: this.config.targetFixCount,\n      actualFixCount: this.metrics.totalFixesApplied,\n      targetAchieved: this.isTargetAchieved(),\n      initialMetrics: {\n        errorCount: this.metrics.initialErrorCount,\n        anyCount: this.metrics.initialAnyCount\n      },\n      finalMetrics: {\n        errorCount: this.metrics.finalErrorCount,\n        anyCount: this.metrics.finalAnyCount\n      },\n      buildStable: await this.validateBuildStability(),\n      performanceImproved: await this.validatePerformanceImprovements(),\n      recommendations: this.generateRecommendations(),\n      achievements: this.generateAchievements(),\n      nextSteps: this.generateNextSteps()\n    };\n  }\n\n  /**\n   * Helper methods\n   */\n  private initializeMetrics(): CampaignMetrics {\n    return {\n      initialErrorCount: 0,\n      initialAnyCount: 0,\n      finalErrorCount: 0,\n      finalAnyCount: 0,\n      totalFixesApplied: 0,\n      batchesProcessed: 0,\n      rollbacksPerformed: 0,\n      buildValidationsPerformed: 0,\n      baselineEstablished: false,\n      campaignCompleted: false\n    };\n  }\n\n  private calculateReductionPercentage(): number {\n    if (this.metrics.initialAnyCount === 0) return 0;\n    const reduction = this.metrics.initialAnyCount - this.metrics.finalAnyCount;\n    return (reduction / this.metrics.initialAnyCount) * 100;\n  }\n\n  private isTargetAchieved(): boolean {\n    const reductionPercentage = this.calculateReductionPercentage();\n    return reductionPercentage >= 15 && this.metrics.totalFixesApplied >= 250;\n  }\n\n  private async getCurrentErrorCount(): Promise<number> {\n    try {\n      const output = execSync('yarn tsc --noEmit --skipLibCheck 2>&1 | grep -c \"error TS\" || echo \"0\"', {\n        encoding: 'utf8',\n        stdio: 'pipe'\n      });\n      return parseInt(output.trim()) || 0;\n    } catch {\n      return -1;\n    }\n  }\n\n  private async getCurrentAnyCount(): Promise<number> {\n    try {\n      const output = execSync('yarn lint --format=json 2>/dev/null | jq -r \".[].messages[] | select(.ruleId == \\\\\"@typescript-eslint/no-explicit-any\\\\\") | .ruleId\" | wc -l || echo \"0\"', {\n        encoding: 'utf8',\n        stdio: 'pipe'\n      });\n      return parseInt(output.trim()) || 0;\n    } catch {\n      // Fallback: count explicit any patterns in TypeScript files\n      try {\n        const output = execSync('find src -name \"*.ts\" -o -name \"*.tsx\" | xargs grep -c \": any\" | awk -F: \\'{sum += $2} END {print sum}\\' || echo \"0\"', {\n          encoding: 'utf8',\n          stdio: 'pipe'\n        });\n        return parseInt(output.trim()) || 0;\n      } catch {\n        return 0;\n      }\n    }\n  }\n\n  private async validateBuildStability(): Promise<boolean> {\n    try {\n      execSync('yarn tsc --noEmit --skipLibCheck', { stdio: 'pipe' });\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  private async validatePerformanceImprovements(): Promise<boolean> {\n    // This would typically measure build time, bundle size, etc.\n    // For now, return true if build is stable\n    return await this.validateBuildStability();\n  }\n\n  private async getTypeScriptFiles(): Promise<string[]> {\n    try {\n      const output = execSync('find src -name \"*.ts\" -o -name \"*.tsx\" | grep -v __tests__ | grep -v .test. | head -200', {\n        encoding: 'utf8'\n      });\n      return output.trim().split('\\n').filter(f => f.length > 0);\n    } catch {\n      return [];\n    }\n  }\n\n  private async getDomainFiles(domain: string): Promise<string[]> {\n    const allFiles = await this.getTypeScriptFiles();\n    return allFiles.filter(file => {\n      const lowerFile = file.toLowerCase();\n      switch (domain) {\n        case 'astrological':\n          return lowerFile.includes('astro') || lowerFile.includes('planet') || lowerFile.includes('calculation');\n        case 'recipe':\n          return lowerFile.includes('recipe') || lowerFile.includes('ingredient') || lowerFile.includes('food');\n        case 'campaign':\n          return lowerFile.includes('campaign') || lowerFile.includes('metrics');\n        case 'service':\n          return lowerFile.includes('service') || lowerFile.includes('api');\n        case 'component':\n          return lowerFile.includes('component') || lowerFile.includes('tsx');\n        default:\n          return false;\n      }\n    });\n  }\n\n  private async findCategorySpecificCases(\n    category: AnyTypeCategory,\n    files: string[]\n  ): Promise<AnyTypeClassification[]> {\n    const cases: AnyTypeClassification[] = [];\n\n    for (const file of files.slice(0, 30)) {\n      try {\n        const content = fs.readFileSync(file, 'utf8');\n        const fileCases = await this.classifier.classifyFileContent(file, content);\n\n        const categoryCases = fileCases.filter(c =>\n          !c.isIntentional &&\n          c.category === category &&\n          c.confidence >= 0.6\n        );\n\n        cases.push(...categoryCases);\n\n      } catch (error) {\n        console.warn(`Warning: Could not process ${file}:`, error);\n      }\n    }\n\n    return cases.slice(0, this.config.minBatchSize);\n  }\n\n  private isDomainAppropriate(case_: AnyTypeClassification, domainContext: any): boolean {\n    // Domain-specific logic for determining if a case is appropriate for replacement\n    return case_.confidence >= 0.7;\n  }\n\n  private async createBackup(): Promise<string> {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const backupPath = `backups/full-campaign-${timestamp}`;\n\n    try {\n      execSync(`mkdir -p ${backupPath}`);\n      execSync(`cp -r src ${backupPath}/`);\n      return backupPath;\n    } catch (error) {\n      console.warn('Warning: Could not create backup:', error);\n      return '';\n    }\n  }\n\n  private async restoreBackup(backupPath: string): Promise<void> {\n    if (!backupPath || !fs.existsSync(backupPath)) {\n      console.warn('Warning: Backup path not found, cannot restore');\n      return;\n    }\n\n    try {\n      execSync(`rm -rf src`);\n      execSync(`cp -r ${backupPath}/src .`);\n      console.log('✅ Backup restored successfully');\n    } catch (error) {\n      console.error('❌ Failed to restore backup:', error);\n    }\n  }\n\n  private generateRecommendations(): string[] {\n    const recommendations: string[] = [];\n\n    if (this.metrics.totalFixesApplied < this.config.targetFixCount) {\n      recommendations.push('Consider expanding pattern recognition for additional opportunities');\n    }\n\n    if (this.metrics.rollbacksPerformed > 0) {\n      recommendations.push('Review rollback cases for potential manual fixes');\n    }\n\n    recommendations.push('Continue monitoring for new unintentional any types in future development');\n    recommendations.push('Consider implementing pre-commit hooks to prevent new unintentional any types');\n\n    return recommendations;\n  }\n\n  private generateAchievements(): string[] {\n    const achievements: string[] = [];\n\n    achievements.push(`Applied ${this.metrics.totalFixesApplied} successful type improvements`);\n    achievements.push(`Achieved ${this.calculateReductionPercentage().toFixed(1)}% reduction in explicit any usage`);\n\n    if (this.isTargetAchieved()) {\n      achievements.push('✅ Successfully met campaign targets');\n    }\n\n    if (this.metrics.rollbacksPerformed === 0) {\n      achievements.push('✅ Zero rollbacks - perfect safety record');\n    }\n\n    return achievements;\n  }\n\n  private generateNextSteps(): string[] {\n    return [\n      'Monitor build performance and stability over the next week',\n      'Review any remaining intentional any types for potential improvements',\n      'Consider implementing automated monitoring for new unintentional any types',\n      'Document lessons learned for future campaigns',\n      'Plan follow-up campaigns for other code quality improvements'\n    ];\n  }\n}\n"],"version":3}