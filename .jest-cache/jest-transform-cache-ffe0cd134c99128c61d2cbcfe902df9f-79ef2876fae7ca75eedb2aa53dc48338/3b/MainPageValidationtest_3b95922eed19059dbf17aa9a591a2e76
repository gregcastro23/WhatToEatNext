388641911585d21ecf60a7c60f53b8a6
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const globals_1 = require("@jest/globals");
// Mock external dependencies with proper type safety
globals_1.jest.mock('next/navigation', () => ({
    useRouter: () => externalDependencies_1.mockRouter,
}));
globals_1.jest.mock('../../utils/logger', () => ({
    logger: externalDependencies_1.mockLogger,
    createLogger: externalDependencies_1.mockCreateLogger,
}));
globals_1.jest.mock('../../utils/reliableAstronomy', () => externalDependencies_1.mockReliableAstronomy);
// Mock hooks that might cause issues
globals_1.jest.mock('../../hooks/useAgentHooks', () => externalDependencies_1.mockAgentHooks);
globals_1.jest.mock('../../utils/mcpServerIntegration', () => externalDependencies_1.mockMCPServerIntegration);
globals_1.jest.mock('../../utils/developmentExperienceOptimizations', () => externalDependencies_1.mockDevelopmentExperienceOptimizations);
// Mock state preservation hooks
globals_1.jest.mock('../../hooks/useStatePreservation', () => externalDependencies_1.mockStatePreservationHooks);
// Mock error handling
globals_1.jest.mock('../../utils/errorHandling', () => externalDependencies_1.mockErrorHandler);
// Mock steering file intelligence
globals_1.jest.mock('../../utils/steeringFileIntelligence', () => externalDependencies_1.mockSteeringFileIntelligence);
// Mock alchemical context hooks
globals_1.jest.mock('../../contexts/AlchemicalContext/hooks', () => externalDependencies_1.mockAlchemicalContext);
// Mock component fallbacks
globals_1.jest.mock('../../components/fallbacks/ComponentFallbacks', () => ({
    ComponentFallbacks: {
        LoadingFallback: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'loading-fallback', children: "Loading..." }),
        ErrorFallback: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'error-fallback', children: "Error occurred" }),
    },
}));
/**
 * Comprehensive Main Page Validation Tests
 * Task 11.2: Validate all requirements and perform final testing
 */
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const App_1 = __importDefault(require("../../../App"));
const testComponentHelpers_1 = require("../utils/testComponentHelpers");
// Import comprehensive mocks
const externalDependencies_1 = require("../mocks/externalDependencies");
describe('Main Page Validation - Task 11.2', () => {
    beforeEach(() => {
        // Clear all mocks before each test
        globals_1.jest.clearAllMocks();
        // Mock window.scrollTo
        Object.defineProperty(window, 'scrollTo', {
            value: globals_1.jest.fn(),
            writable: true,
        });
        // Mock localStorage
        const localStorageMock = {
            getItem: globals_1.jest.fn(),
            setItem: globals_1.jest.fn(),
            removeItem: globals_1.jest.fn(),
            clear: globals_1.jest.fn(),
        };
        Object.defineProperty(window, 'localStorage', {
            value: localStorageMock,
        });
    });
    describe('1. Component Interactions and Data Flow', () => {
        test('App renders without crashing', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should render without throwing errors
            expect(react_2.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
        });
        test('MainPageLayout renders with AlchemicalProvider', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render the main layout
            expect(react_2.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Error boundary handles errors gracefully', async () => {
            const ThrowError = () => {
                throw new Error('Test error');
            };
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.TestErrorBoundary, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false, children: (0, jsx_runtime_1.jsx)(ThrowError, {}) }) }) }));
            });
            // Should handle error without crashing
            expect(react_2.screen.getByTestId('test-error-boundary')).toBeInTheDocument();
        });
    });
    describe('2. Navigation Functionality', () => {
        test('Navigation state is preserved', async () => {
            const mockOnSectionNavigate = globals_1.jest.fn();
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false, onSectionNavigate: mockOnSectionNavigate }) }));
            });
            // Navigation should be functional
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            expect(mockOnSectionNavigate).toBeDefined();
        });
        test('Scroll position is preserved', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Simulate scroll
            react_2.fireEvent.scroll(window, { target: { scrollY: 100 } });
            // Should handle scroll events
            expect(window.scrollTo).toBeDefined();
        });
    });
    describe('3. Debug Panel Functionality', () => {
        test('Debug panel renders in development mode', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: true, loading: false }) }));
            });
            // Should render without errors in debug mode
            expect(react_2.screen.getByTestId('debug-mode')).toHaveTextContent('debug');
        });
        test('Debug panel is hidden in production mode', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render without errors in production mode
            expect(react_2.screen.getByTestId('debug-mode')).toHaveTextContent('production');
        });
    });
    describe('4. Loading States', () => {
        test('Loading state displays correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: true }) }));
            });
            // Should handle loading state
            expect(react_2.screen.getByTestId('loading-state')).toHaveTextContent('loading');
        });
        test('Connected state displays when not loading', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle connected state
            expect(react_2.screen.getByTestId('loading-state')).toHaveTextContent('loaded');
        });
    });
    describe('5. Context and State Management', () => {
        test('AlchemicalProvider provides context', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Context should be provided
            expect(react_2.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
        });
        test('State preservation works correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // State preservation should work
            expect(localStorage.setItem).toBeDefined();
        });
    });
    describe('6. Error Handling', () => {
        test('Global error boundary catches errors', async () => {
            // Mock console.error to prevent test output noise
            const consoleSpy = globals_1.jest
                .spyOn(console, 'error')
                .mockImplementation(() => { });
            // Test that the App component renders without crashing
            // The App component has its own error boundary
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should handle errors gracefully
            expect(react_2.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
            consoleSpy.mockRestore();
        });
        test('Component-level error boundaries work', async () => {
            const consoleSpy = globals_1.jest
                .spyOn(console, 'error')
                .mockImplementation(() => { });
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render without errors
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            consoleSpy.mockRestore();
        });
    });
    describe('7. Performance and Accessibility', () => {
        test('Components are memoized for performance', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render efficiently
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Lazy loading works for non-critical components', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.AsyncTestWrapper, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: true, loading: false }) }) }));
            });
            // Should handle lazy loading
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
    describe('8. Integration with External Systems', () => {
        test('Astrological calculations integrate correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should integrate with astrological systems
            expect(react_2.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
            expect(externalDependencies_1.mockReliableAstronomy.getReliablePlanetaryPositions).toBeDefined();
        });
        test('Agent hooks integrate correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should integrate with agent hooks
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            expect(externalDependencies_1.mockAgentHooks.useAgentHooks).toBeDefined();
        });
    });
    describe('9. Mobile Responsiveness', () => {
        test('Layout adapts to mobile viewport', async () => {
            // Mock mobile viewport
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 375,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 667,
            });
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle mobile viewport
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Touch interactions work correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle touch interactions
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
    describe('10. System Integration Validation', () => {
        test('All required systems are integrated', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should integrate all systems
            expect(react_2.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
        });
        test('Fallback mechanisms work correctly', async () => {
            // Mock API failure
            externalDependencies_1.mockReliableAstronomy.getReliablePlanetaryPositions.mockRejectedValueOnce(new Error('API Error'));
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle API failures gracefully
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vdmFsaWRhdGlvbi9NYWluUGFnZVZhbGlkYXRpb24udGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBT0EsMkNBQXFDO0FBK0JyQyxxREFBcUQ7QUFDckQsY0FBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxpQ0FBVTtDQUM1QixDQUFDLENBQUMsQ0FBQztBQUVKLGNBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNyQyxNQUFNLEVBQUUsaUNBQVU7SUFDbEIsWUFBWSxFQUFFLHVDQUFnQjtDQUMvQixDQUFDLENBQUMsQ0FBQztBQUVKLGNBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFLENBQUMsNENBQXFCLENBQUMsQ0FBQztBQUV4RSxxQ0FBcUM7QUFDckMsY0FBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxxQ0FBYyxDQUFDLENBQUM7QUFFN0QsY0FBSSxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUUsQ0FBQywrQ0FBd0IsQ0FBQyxDQUFDO0FBRTlFLGNBQUksQ0FBQyxJQUFJLENBQ1AsZ0RBQWdELEVBQ2hELEdBQUcsRUFBRSxDQUFDLDZEQUFzQyxDQUM3QyxDQUFDO0FBRUYsZ0NBQWdDO0FBQ2hDLGNBQUksQ0FBQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFLENBQUMsaURBQTBCLENBQUMsQ0FBQztBQUVoRixzQkFBc0I7QUFDdEIsY0FBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyx1Q0FBZ0IsQ0FBQyxDQUFDO0FBRS9ELGtDQUFrQztBQUNsQyxjQUFJLENBQUMsSUFBSSxDQUNQLHNDQUFzQyxFQUN0QyxHQUFH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QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwRCxtQkFBbUI7WUFDbkIsNENBQXFCLENBQUMsNkJBQTZCLENBQUMscUJBQXFCLENBQ3ZFLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUN2QixDQUFDO1lBRUYsTUFBTSxJQUFBLFdBQUcsRUFBQyxLQUFLLElBQUksRUFBRTtnQkFDbkIsSUFBQSxjQUFNLEVBQ0osdUJBQUMsNkNBQXNCLGNBQ3JCLHVCQUFDLHlDQUFrQixJQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssR0FBSSxHQUNqQyxDQUMxQixDQUFDO1lBQ0osQ0FBQyxDQUFDLENBQUM7WUFFSCx3Q0FBd0M7WUFDeEMsTUFBTSxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDMUUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvX190ZXN0c19fL3ZhbGlkYXRpb24vTWFpblBhZ2VWYWxpZGF0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBNYWluIFBhZ2UgVmFsaWRhdGlvbiBUZXN0c1xuICogVGFzayAxMS4yOiBWYWxpZGF0ZSBhbGwgcmVxdWlyZW1lbnRzIGFuZCBwZXJmb3JtIGZpbmFsIHRlc3RpbmdcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgQXBwIGZyb20gJy4uLy4uLy4uL0FwcCc7XG5pbXBvcnQgeyBBbGNoZW1pY2FsUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9jb250ZXh0cy9BbGNoZW1pY2FsQ29udGV4dCc7XG5pbXBvcnQgTWFpblBhZ2VMYXlvdXQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9sYXlvdXQvTWFpblBhZ2VMYXlvdXQnO1xuaW1wb3J0IHR5cGUge1xuICBNYWluUGFnZUxheW91dFByb3BzLFxuICBBbGNoZW1pY2FsUHJvdmlkZXJQcm9wcyxcbn0gZnJvbSAnLi4vdHlwZXMvdGVzdFV0aWxzJztcbmltcG9ydCB7XG4gIE1vY2tBbGNoZW1pY2FsUHJvdmlkZXIsXG4gIE1vY2tNYWluUGFnZUxheW91dCxcbiAgcmVuZGVyV2l0aFByb3ZpZGVycyxcbiAgQXN5bmNUZXN0V3JhcHBlcixcbiAgVGVzdEVycm9yQm91bmRhcnksXG59IGZyb20gJy4uL3V0aWxzL3Rlc3RDb21wb25lbnRIZWxwZXJzJztcblxuLy8gSW1wb3J0IGNvbXByZWhlbnNpdmUgbW9ja3NcbmltcG9ydCB7XG4gIG1vY2tSb3V0ZXIsXG4gIG1vY2tMb2dnZXIsXG4gIG1vY2tDcmVhdGVMb2dnZXIsXG4gIG1vY2tSZWxpYWJsZUFzdHJvbm9teSxcbiAgbW9ja0FnZW50SG9va3MsXG4gIG1vY2tNQ1BTZXJ2ZXJJbnRlZ3JhdGlvbixcbiAgbW9ja0RldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMsXG4gIG1vY2tTdGF0ZVByZXNlcnZhdGlvbkhvb2tzLFxuICBtb2NrRXJyb3JIYW5kbGVyLFxuICBtb2NrU3RlZXJpbmdGaWxlSW50ZWxsaWdlbmNlLFxuICBtb2NrQWxjaGVtaWNhbENvbnRleHQsXG59IGZyb20gJy4uL21vY2tzL2V4dGVybmFsRGVwZW5kZW5jaWVzJztcblxuLy8gTW9jayBleHRlcm5hbCBkZXBlbmRlbmNpZXMgd2l0aCBwcm9wZXIgdHlwZSBzYWZldHlcbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiAoKSA9PiBtb2NrUm91dGVyLFxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL2xvZ2dlcicsICgpID0+ICh7XG4gIGxvZ2dlcjogbW9ja0xvZ2dlcixcbiAgY3JlYXRlTG9nZ2VyOiBtb2NrQ3JlYXRlTG9nZ2VyLFxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL3JlbGlhYmxlQXN0cm9ub215JywgKCkgPT4gbW9ja1JlbGlhYmxlQXN0cm9ub215KTtcblxuLy8gTW9jayBob29rcyB0aGF0IG1pZ2h0IGNhdXNlIGlzc3Vlc1xuamVzdC5tb2NrKCcuLi8uLi9ob29rcy91c2VBZ2VudEhvb2tzJywgKCkgPT4gbW9ja0FnZW50SG9va3MpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL21jcFNlcnZlckludGVncmF0aW9uJywgKCkgPT4gbW9ja01DUFNlcnZlckludGVncmF0aW9uKTtcblxuamVzdC5tb2NrKFxuICAnLi4vLi4vdXRpbHMvZGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemF0aW9ucycsXG4gICgpID0+IG1vY2tEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6YXRpb25zXG4pO1xuXG4vLyBNb2NrIHN0YXRlIHByZXNlcnZhdGlvbiBob29rc1xuamVzdC5tb2NrKCcuLi8uLi9ob29rcy91c2VTdGF0ZVByZXNlcnZhdGlvbicsICgpID0+IG1vY2tTdGF0ZVByZXNlcnZhdGlvbkhvb2tzKTtcblxuLy8gTW9jayBlcnJvciBoYW5kbGluZ1xuamVzdC5tb2NrKCcuLi8uLi91dGlscy9lcnJvckhhbmRsaW5nJywgKCkgPT4gbW9ja0Vycm9ySGFuZGxlcik7XG5cbi8vIE1vY2sgc3RlZXJpbmcgZmlsZSBpbnRlbGxpZ2VuY2Vcbmplc3QubW9jayhcbiAgJy4uLy4uL3V0aWxzL3N0ZWVyaW5nRmlsZUludGVsbGlnZW5jZScsXG4gICgpID0+IG1vY2tTdGVlcmluZ0ZpbGVJbnRlbGxpZ2VuY2Vcbik7XG5cbi8vIE1vY2sgYWxjaGVtaWNhbCBjb250ZXh0IGhvb2tzXG5qZXN0Lm1vY2soXG4gICcuLi8uLi9jb250ZXh0cy9BbGNoZW1pY2FsQ29udGV4dC9ob29rcycsXG4gICgpID0+IG1vY2tBbGNoZW1pY2FsQ29udGV4dFxuKTtcblxuLy8gTW9jayBjb21wb25lbnQgZmFsbGJhY2tzXG5qZXN0Lm1vY2soJy4uLy4uL2NvbXBvbmVudHMvZmFsbGJhY2tzL0NvbXBvbmVudEZhbGxiYWNrcycsICgpID0+ICh7XG4gIENvbXBvbmVudEZhbGxiYWNrczoge1xuICAgIExvYWRpbmdGYWxsYmFjazogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD0nbG9hZGluZy1mYWxsYmFjayc+TG9hZGluZy4uLjwvZGl2PixcbiAgICBFcnJvckZhbGxiYWNrOiAoKSA9PiA8ZGl2IGRhdGEtdGVzdGlkPSdlcnJvci1mYWxsYmFjayc+RXJyb3Igb2NjdXJyZWQ8L2Rpdj4sXG4gIH0sXG59KSk7XG5cbmRlc2NyaWJlKCdNYWluIFBhZ2UgVmFsaWRhdGlvbiAtIFRhc2sgMTEuMicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgYWxsIG1vY2tzIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIE1vY2sgd2luZG93LnNjcm9sbFRvXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3Njcm9sbFRvJywge1xuICAgICAgdmFsdWU6IGplc3QuZm4oKSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gTW9jayBsb2NhbFN0b3JhZ2VcbiAgICBjb25zdCBsb2NhbFN0b3JhZ2VNb2NrID0ge1xuICAgICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgICAgc2V0SXRlbTogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgICAgY2xlYXI6IGplc3QuZm4oKSxcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gICAgICB2YWx1ZTogbG9jYWxTdG9yYWdlTW9jayxcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzEuIENvbXBvbmVudCBJbnRlcmFjdGlvbnMgYW5kIERhdGEgRmxvdycsICgpID0+IHtcbiAgICB0ZXN0KCdBcHAgcmVuZGVycyB3aXRob3V0IGNyYXNoaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKDxBcHAgLz4pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aG91dCB0aHJvd2luZyBlcnJvcnNcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5VGV4dCgvTG9hZGluZyBBc3Ryb2xvZ2ljYWwgRGF0YS9pKVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnTWFpblBhZ2VMYXlvdXQgcmVuZGVycyB3aXRoIEFsY2hlbWljYWxQcm92aWRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCByZW5kZXIgdGhlIG1haW4gbGF5b3V0XG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1hbGNoZW1pY2FsLXByb3ZpZGVyJylcbiAgICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRXJyb3IgYm91bmRhcnkgaGFuZGxlcyBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRocm93RXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVzdCBlcnJvcicpO1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxUZXN0RXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfT5cbiAgICAgICAgICAgICAgICA8VGhyb3dFcnJvciAvPlxuICAgICAgICAgICAgICA8L01vY2tNYWluUGFnZUxheW91dD5cbiAgICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICA8L1Rlc3RFcnJvckJvdW5kYXJ5PlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgZXJyb3Igd2l0aG91dCBjcmFzaGluZ1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1lcnJvci1ib3VuZGFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnMi4gTmF2aWdhdGlvbiBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIHRlc3QoJ05hdmlnYXRpb24gc3RhdGUgaXMgcHJlc2VydmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09uU2VjdGlvbk5hdmlnYXRlID0gamVzdC5mbigpO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0XG4gICAgICAgICAgICAgIGRlYnVnTW9kZT17ZmFsc2V9XG4gICAgICAgICAgICAgIGxvYWRpbmc9e2ZhbHNlfVxuICAgICAgICAgICAgICBvblNlY3Rpb25OYXZpZ2F0ZT17bW9ja09uU2VjdGlvbk5hdmlnYXRlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gTmF2aWdhdGlvbiBzaG91bGQgYmUgZnVuY3Rpb25hbFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja09uU2VjdGlvbk5hdmlnYXRlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnU2Nyb2xsIHBvc2l0aW9uIGlzIHByZXNlcnZlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIHNjcm9sbFxuICAgICAgZmlyZUV2ZW50LnNjcm9sbCh3aW5kb3csIHsgdGFyZ2V0OiB7IHNjcm9sbFk6IDEwMCB9IH0pO1xuXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIHNjcm9sbCBldmVudHNcbiAgICAgIGV4cGVjdCh3aW5kb3cuc2Nyb2xsVG8pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczLiBEZWJ1ZyBQYW5lbCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIHRlc3QoJ0RlYnVnIHBhbmVsIHJlbmRlcnMgaW4gZGV2ZWxvcG1lbnQgbW9kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXt0cnVlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIHJlbmRlciB3aXRob3V0IGVycm9ycyBpbiBkZWJ1ZyBtb2RlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZWJ1Zy1tb2RlJykpLnRvSGF2ZVRleHRDb250ZW50KCdkZWJ1ZycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRGVidWcgcGFuZWwgaXMgaGlkZGVuIGluIHByb2R1Y3Rpb24gbW9kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aG91dCBlcnJvcnMgaW4gcHJvZHVjdGlvbiBtb2RlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZWJ1Zy1tb2RlJykpLnRvSGF2ZVRleHRDb250ZW50KCdwcm9kdWN0aW9uJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc0LiBMb2FkaW5nIFN0YXRlcycsICgpID0+IHtcbiAgICB0ZXN0KCdMb2FkaW5nIHN0YXRlIGRpc3BsYXlzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17dHJ1ZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBsb2FkaW5nIHN0YXRlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2FkaW5nLXN0YXRlJykpLnRvSGF2ZVRleHRDb250ZW50KCdsb2FkaW5nJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdDb25uZWN0ZWQgc3RhdGUgZGlzcGxheXMgd2hlbiBub3QgbG9hZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgY29ubmVjdGVkIHN0YXRlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2FkaW5nLXN0YXRlJykpLnRvSGF2ZVRleHRDb250ZW50KCdsb2FkZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzUuIENvbnRleHQgYW5kIFN0YXRlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnQWxjaGVtaWNhbFByb3ZpZGVyIHByb3ZpZGVzIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb250ZXh0IHNob3VsZCBiZSBwcm92aWRlZFxuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stYWxjaGVtaWNhbC1wcm92aWRlcicpXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdTdGF0ZSBwcmVzZXJ2YXRpb24gd29ya3MgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU3RhdGUgcHJlc2VydmF0aW9uIHNob3VsZCB3b3JrXG4gICAgICBleHBlY3QobG9jYWxTdG9yYWdlLnNldEl0ZW0pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc2LiBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICB0ZXN0KCdHbG9iYWwgZXJyb3IgYm91bmRhcnkgY2F0Y2hlcyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGNvbnNvbGUuZXJyb3IgdG8gcHJldmVudCB0ZXN0IG91dHB1dCBub2lzZVxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3RcbiAgICAgICAgLnNweU9uKGNvbnNvbGUsICdlcnJvcicpXG4gICAgICAgIC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4gICAgICAvLyBUZXN0IHRoYXQgdGhlIEFwcCBjb21wb25lbnQgcmVuZGVycyB3aXRob3V0IGNyYXNoaW5nXG4gICAgICAvLyBUaGUgQXBwIGNvbXBvbmVudCBoYXMgaXRzIG93biBlcnJvciBib3VuZGFyeVxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKDxBcHAgLz4pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgZXJyb3JzIGdyYWNlZnVsbHlcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5VGV4dCgvTG9hZGluZyBBc3Ryb2xvZ2ljYWwgRGF0YS9pKVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdDb21wb25lbnQtbGV2ZWwgZXJyb3IgYm91bmRhcmllcyB3b3JrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3RcbiAgICAgICAgLnNweU9uKGNvbnNvbGUsICdlcnJvcicpXG4gICAgICAgIC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIHdpdGhvdXQgZXJyb3JzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLW1haW4tcGFnZS1sYXlvdXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnNy4gUGVyZm9ybWFuY2UgYW5kIEFjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgdGVzdCgnQ29tcG9uZW50cyBhcmUgbWVtb2l6ZWQgZm9yIHBlcmZvcm1hbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIHJlbmRlciBlZmZpY2llbnRseVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdMYXp5IGxvYWRpbmcgd29ya3MgZm9yIG5vbi1jcml0aWNhbCBjb21wb25lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxBc3luY1Rlc3RXcmFwcGVyPlxuICAgICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXt0cnVlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICA8L0FzeW5jVGVzdFdyYXBwZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBsYXp5IGxvYWRpbmdcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnOC4gSW50ZWdyYXRpb24gd2l0aCBFeHRlcm5hbCBTeXN0ZW1zJywgKCkgPT4ge1xuICAgIHRlc3QoJ0FzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMgaW50ZWdyYXRlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBpbnRlZ3JhdGUgd2l0aCBhc3Ryb2xvZ2ljYWwgc3lzdGVtc1xuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stYWxjaGVtaWNhbC1wcm92aWRlcicpXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja1JlbGlhYmxlQXN0cm9ub215LmdldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnQWdlbnQgaG9va3MgaW50ZWdyYXRlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBpbnRlZ3JhdGUgd2l0aCBhZ2VudCBob29rc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja0FnZW50SG9va3MudXNlQWdlbnRIb29rcykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzkuIE1vYmlsZSBSZXNwb25zaXZlbmVzcycsICgpID0+IHtcbiAgICB0ZXN0KCdMYXlvdXQgYWRhcHRzIHRvIG1vYmlsZSB2aWV3cG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbW9iaWxlIHZpZXdwb3J0XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJXaWR0aCcsIHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDM3NSxcbiAgICAgIH0pO1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJIZWlnaHQnLCB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA2NjcsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBtb2JpbGUgdmlld3BvcnRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnVG91Y2ggaW50ZXJhY3Rpb25zIHdvcmsgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSB0b3VjaCBpbnRlcmFjdGlvbnNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnMTAuIFN5c3RlbSBJbnRlZ3JhdGlvbiBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ0FsbCByZXF1aXJlZCBzeXN0ZW1zIGFyZSBpbnRlZ3JhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKDxBcHAgLz4pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBpbnRlZ3JhdGUgYWxsIHN5c3RlbXNcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5VGV4dCgvTG9hZGluZyBBc3Ryb2xvZ2ljYWwgRGF0YS9pKVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRmFsbGJhY2sgbWVjaGFuaXNtcyB3b3JrIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgQVBJIGZhaWx1cmVcbiAgICAgIG1vY2tSZWxpYWJsZUFzdHJvbm9teS5nZXRSZWxpYWJsZVBsYW5ldGFyeVBvc2l0aW9ucy5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UoXG4gICAgICAgIG5ldyBFcnJvcignQVBJIEVycm9yJylcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgQVBJIGZhaWx1cmVzIGdyYWNlZnVsbHlcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9