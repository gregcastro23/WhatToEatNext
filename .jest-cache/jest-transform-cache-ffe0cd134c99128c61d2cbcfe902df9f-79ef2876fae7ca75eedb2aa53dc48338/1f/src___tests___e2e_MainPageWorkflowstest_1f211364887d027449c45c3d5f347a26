f32d5ff01a5d725634da921bc2823b6e
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock all external dependencies for E2E simulation
jest.mock('next/navigation', () => ({
    useRouter: () => ({ push: jest.fn(), back: jest.fn(),
        forward: jest.fn(),
        refresh: jest.fn(),
        replace: jest.fn(),
    }),
}));
jest.mock('@/contexts/AlchemicalContext/hooks');
jest.mock('@/hooks/useStatePreservation');
jest.mock('@/utils/logger', () => ({
    logger: { debug: jest.fn(), info: jest.fn(),
        warn: jest.fn(),
        error: jest.fn(),
    },
}));
// Mock realistic component behaviors for E2E testing
jest.mock('@/components/CuisineRecommender', () => {
    return function MockCuisineRecommender() {
        const [selectedCuisine, setSelectedCuisine] = react_2.default.useState(null);
        const [showRecipes, setShowRecipes] = react_2.default.useState(false);
        const cuisines = [
            { name: 'Italian', score: 95, recipes: ['Pasta Marinara', 'Risotto', 'Pizza Margherita'] },
            { name: 'Chinese', score: 88, recipes: ['Fried Rice', 'Sweet and Sour Pork', 'Kung Pao Chicken'] },
            { name: 'Mexican', score: 82, recipes: ['Tacos', 'Enchiladas', 'Guacamole'] },
            { name: 'Indian', score: 79, recipes: ['Curry', 'Biryani', 'Naan'] },
        ];
        const handleCuisineSelect = (cuisine) => {
            const cuisineData = cuisine;
            setSelectedCuisine(cuisineData.name);
            setShowRecipes(true);
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'cuisine-recommender', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cuisine Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: 'cuisine-grid', children: cuisines.map(cuisine => ((0, jsx_runtime_1.jsx)("div", { className: 'cuisine-card', "data-testid": `cuisine-card-${cuisine.name.toLowerCase()}`, children: (0, jsx_runtime_1.jsxs)("button", { onClick: () => handleCuisineSelect(cuisine), className: selectedCuisine === cuisine.name ? 'selected' : '', "data-testid": `cuisine-${cuisine.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: cuisine.name }), (0, jsx_runtime_1.jsxs)("div", { className: 'score', children: ["Match: ", cuisine.score, "%"] })] }) }, cuisine.name))) }), showRecipes && selectedCuisine && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'recipe-recommendations', className: 'recipe-section', children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Recommended ", selectedCuisine, " Recipes"] }), (0, jsx_runtime_1.jsx)("div", { className: 'recipe-list', children: cuisines
                                .find(c => c.name === selectedCuisine)
                                ?.recipes.map(recipe => ((0, jsx_runtime_1.jsx)("button", { "data-testid": `recipe-${recipe.toLowerCase().replace(/\s+/g, '-')}`, className: 'recipe-button', children: recipe }, recipe))) })] }))] }));
    };
});
jest.mock('@/components/IngredientRecommender', () => {
    return function MockIngredientRecommender({ maxDisplayed = 8 }) {
        const [selectedIngredients, setSelectedIngredients] = react_2.default.useState([]);
        const [expandedIngredient, setExpandedIngredient] = react_2.default.useState(null);
        const ingredients = [
            { name: 'Tomatoes', category: 'Vegetables', properties: ['Umami', 'Acidic', 'Fresh'] },
            { name: 'Onions', category: 'Vegetables', properties: ['Sweet', 'Pungent', 'Aromatic'] },
            { name: 'Garlic', category: 'Aromatics', properties: ['Pungent', 'Savory', 'Aromatic'] },
            { name: 'Basil', category: 'Herbs', properties: ['Fresh', 'Aromatic', 'Sweet'] },
            { name: 'Olive Oil', category: 'Oils', properties: ['Rich', 'Fruity', 'Smooth'] },
            { name: 'Cheese', category: 'Dairy', properties: ['Creamy', 'Salty', 'Rich'] },
            { name: 'Pasta', category: 'Grains', properties: ['Neutral', 'Filling', 'Versatile'] },
            { name: 'Chicken', category: 'Proteins', properties: ['Lean', 'Mild', 'Versatile'] },
        ];
        const displayedIngredients = ingredients.slice(0, maxDisplayed);
        const toggleIngredient = (ingredient) => {
            setSelectedIngredients(prev => prev.includes(ingredient) ? prev.filter(i => i !== ingredient) : [...prev, ingredient]);
        };
        const toggleExpanded = (ingredient) => {
            setExpandedIngredient(prev => (prev === ingredient ? null : ingredient));
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'ingredient-recommender', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Ingredient Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: 'ingredient-grid', children: displayedIngredients.map(ingredient => ((0, jsx_runtime_1.jsxs)("div", { className: 'ingredient-card', "data-testid": `ingredient-card-${ingredient.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => toggleIngredient(ingredient.name), className: selectedIngredients.includes(ingredient.name) ? 'selected' : '', "data-testid": `ingredient-${ingredient.name.toLowerCase()}`, children: ingredient.name }), (0, jsx_runtime_1.jsx)("button", { onClick: () => toggleExpanded(ingredient.name), "data-testid": `expand-${ingredient.name.toLowerCase()}`, className: 'expand-button', children: expandedIngredient === ingredient.name ? '▼' : '▶' }), expandedIngredient === ingredient.name && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": `details-${ingredient.name.toLowerCase()}`, className: 'ingredient-details', children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Category: ", ingredient.category] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Properties: ", ingredient.properties.join(', ')] })] }))] }, ingredient.name))) }), selectedIngredients.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'selected-ingredients-summary', className: 'selection-summary', children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Selected Ingredients (", selectedIngredients.length, ")"] }), (0, jsx_runtime_1.jsx)("div", { children: selectedIngredients.join(', ') })] }))] }));
    };
});
jest.mock('@/components/CookingMethodsSection', () => {
    return function MockCookingMethodsSection({ maxDisplayed = 6, onViewMore, }) {
        const [selectedMethod, setSelectedMethod] = react_2.default.useState(null);
        const methods = [
            { name: 'Sauté', time: '5-10 min', difficulty: 'Easy', description: 'Quick cooking in a pan with oil' },
            { name: 'Roast', time: '30-60 min', difficulty: 'Medium', description: 'Cooking in the oven with dry heat' },
            { name: 'Grill', time: '10-20 min', difficulty: 'Medium', description: 'Cooking over direct heat' },
            { name: 'Steam', time: '10-15 min', difficulty: 'Easy', description: 'Cooking with steam heat' },
            { name: 'Braise', time: '60-120 min', difficulty: 'Hard', description: 'Slow cooking with liquid' },
            { name: 'Stir-fry', time: '5-8 min', difficulty: 'Medium', description: 'Quick cooking while stirring' },
        ];
        const displayedMethods = methods.slice(0, maxDisplayed);
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'cooking-methods', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cooking Methods" }), (0, jsx_runtime_1.jsx)("div", { className: 'methods-grid', children: displayedMethods.map(method => ((0, jsx_runtime_1.jsxs)("div", { className: 'method-card', "data-testid": `method-card-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsxs)("button", { onClick: () => setSelectedMethod(method.name), className: selectedMethod === method.name ? 'selected' : '', "data-testid": `method-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: method.name }), (0, jsx_runtime_1.jsxs)("div", { className: 'method-info', children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Time: ", method.time] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Difficulty: ", method.difficulty] })] })] }), selectedMethod === method.name && ((0, jsx_runtime_1.jsx)("div", { "data-testid": `method-details-${method.name.toLowerCase()}`, className: 'method-details', children: (0, jsx_runtime_1.jsx)("p", { children: method.description }) }))] }, method.name))) }), (0, jsx_runtime_1.jsx)("button", { onClick: onViewMore, "data-testid": 'view-more-methods', className: 'view-more-button', children: "; View All Cooking Methods" })] }));
    };
});
jest.mock('@/components/recipes/RecipeBuilderSimple', () => {
    return function MockRecipeBuilderSimple() {
        const [recipeName, setRecipeName] = react_2.default.useState('');
        const [ingredients, setIngredients] = react_2.default.useState([]);
        const [steps, setSteps] = react_2.default.useState([]);
        const [servings, setServings] = react_2.default.useState(4);
        const [prepTime, setPrepTime] = react_2.default.useState(15);
        const [cookTime, setCookTime] = react_2.default.useState(30);
        const addIngredient = (props) => {
            setIngredients(prev => [...prev, { name: '', quantity: '' }]);
        };
        const updateIngredient = (index, field, value) => {
            setIngredients(prev => prev.map((ing) => (i === index ? { ...ing, [field]: value } : ing)));
        };
        const removeIngredient = (index) => {
            setIngredients(prev => prev.filter((_) => i !== index));
        };
        const addStep = (props) => {
            setSteps(prev => [...prev, { instruction: '', timing: '' }]);
        };
        const updateStep = (index, field, value) => {
            setSteps(prev => prev.map((step) => (i === index ? { ...step, [field]: value } : step)));
        };
        const removeStep = (index) => {
            setSteps(prev => prev.filter((_) => i !== index));
        };
        const canSave = recipeName.trim() && ingredients.some(ing => ing.name.trim()) && void steps.some(step => step.instruction.trim());
        const totalTime = prepTime + cookTime;
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'recipe-builder', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Recipe Builder" }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-form', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'recipe-header', children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Recipe Name', value: recipeName, onChange: e => setRecipeName(e.target.value), "data-testid": 'recipe-name-input' }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-meta', children: [(0, jsx_runtime_1.jsx)("input", { type: 'number', value: servings, onChange: e => setServings(parseInt(e.target.value) || 1), "data-testid": 'servings-input', min: '1' }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: prepTime, onChange: e => setPrepTime(parseInt(e.target.value) || 0), "data-testid": 'prep-time-input', min: '0' }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: cookTime, onChange: e => setCookTime(parseInt(e.target.value) || 0), "data-testid": 'cook-time-input', min: '0' })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'ingredients-section', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Ingredients" }), (0, jsx_runtime_1.jsx)("button", { onClick: addIngredient, "data-testid": 'add-ingredient', children: "Add Ingredient" }), ingredients.map((ingredient, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'ingredient-row', "data-testid": `ingredient-row-${index}`, children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Quantity', value: ingredient.quantity, onChange: e => updateIngredient(index, 'quantity', e.target.value), "data-testid": `ingredient-quantity-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Ingredient name', value: ingredient.name, onChange: e => updateIngredient(index, 'name', e.target.value), "data-testid": `ingredient-name-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeIngredient(index), "data-testid": `remove-ingredient-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": 'ingredients-count', children: [", Ingredients: ", ingredients.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'steps-section', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Instructions" }), (0, jsx_runtime_1.jsx)("button", { onClick: addStep, "data-testid": 'add-step', children: "Add Step" }), steps.map((step, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'step-row', "data-testid": `step-row-${index}`, children: [(0, jsx_runtime_1.jsx)("span", { className: 'step-number', children: index + 1 }), (0, jsx_runtime_1.jsx)("textarea", { placeholder: 'Describe this step...', value: step.instruction, onChange: e => updateStep(index, 'instruction', e.target.value), "data-testid": `step-instruction-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Timing', value: step.timing, onChange: e => updateStep(index, 'timing', e.target.value), "data-testid": `step-timing-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeStep(index), "data-testid": `remove-step-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": 'steps-count', children: [", Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-summary', "data-testid": 'recipe-summary', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Recipe Summary" }), (0, jsx_runtime_1.jsxs)("div", { children: ["Name: ", recipeName || 'Untitled Recipe'] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Servings: ", servings] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Total Time: ", totalTime, " minutes"] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Ingredients: ", ingredients.length] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsx)("button", { disabled: !canSave, "data-testid": 'save-recipe', className: canSave ? 'enabled' : 'disabled', children: "; Save Recipe" })] })] }));
    };
});
/**
 * End-to-End Tests for Main Page Workflows
 *
 * These tests simulate complete user workflows on the main page,
 * testing the integration between all components and user interactions.
 *
 * Note: These tests use jsdom and testing-library to simulate E2E scenarios
 * without requiring a full browser environment.
 */
const react_1 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const react_2 = __importDefault(require("react"));
const hooks_1 = require("@/contexts/AlchemicalContext/hooks");
const useStatePreservation_1 = require("@/hooks/useStatePreservation");
// Create mock components for testing
const MockCuisineRecommender = (props) => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'cuisine-recommender', children: "Cuisine Recommender" });
const MockElementalBalance = (props) => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'elemental-balance', children: "Elemental Balance" });
const MockIntelligencePanel = (props) => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'intelligence-panel', children: "Intelligence Panel" });
const MainPageLayout = ({ onSectionNavigate }) => {
    return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'main-page-layout', children: [(0, jsx_runtime_1.jsx)(MockCuisineRecommender, {}), (0, jsx_runtime_1.jsx)(MockElementalBalance, {}), (0, jsx_runtime_1.jsx)(MockIntelligencePanel, {})] }));
};
describe('Main Page E2E Workflows', () => {
    const mockAlchemicalContext = {
        state: { astrologicalState: { sunSign: 'aries' },
            elementalState: { Fire: 0.3, Water: 0.2, Earth: 0.3, Air: 0.2 },
        },
        planetaryPositions: { sun: { sign: 'aries' } },
        isDaytime: true,
    };
    const mockNavigationState = {
        saveState: jest.fn(),
        getState: jest.fn(() => ({})),
    };
    const mockScrollPreservation = {
        restoreScrollPosition: jest.fn(),
    };
    beforeEach(() => {
        void jest.clearAllMocks();
        hooks_1.useAlchemical.mockReturnValue(mockAlchemicalContext);
        useStatePreservation_1.useNavigationState.mockReturnValue(mockNavigationState);
        useStatePreservation_1.useScrollPreservation.mockReturnValue(mockScrollPreservation);
        useStatePreservation_1.useAutoStateCleanup.mockReturnValue(undefined);
        // Mock DOM methods
        void Object.defineProperty(window, 'scrollY', { value: 0, writable: true });
        jest.spyOn(document, 'getElementById').mockImplementation(() => ({
            scrollIntoView: jest.fn(),
            style: {},
            classList: { add: jest.fn(), remove: jest.fn() },
        }));
    });
    afterEach(() => {
        void jest.restoreAllMocks();
    });
    it('completes full meal planning workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        // Wait for all components to load
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('cooking-methods')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Step 1: Select a cuisine
        const italianCuisine = react_1.screen.getByTestId('italian-cuisine');
        void user.click(italianCuisine);
        // Verify cuisine selection and recipe recommendations appear
        expect(react_1.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_1.screen.getByText('Recommended Italian Recipes')).toBeInTheDocument();
        // Step 2: Select ingredients
        const tomatoes = react_1.screen.getByTestId('ingredient-tomatoes');
        const basil = react_1.screen.getByTestId('ingredient-basil');
        const oliveOil = react_1.screen.getByTestId('ingredient-olive oil');
        void user.click(tomatoes);
        void user.click(basil);
        void user.click(oliveOil);
        // Verify ingredient selection
        expect(react_1.screen.getByTestId('selected-ingredients-summary')).toBeInTheDocument();
        expect(react_1.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        // Step 3: Select cooking method
        const sauteMethod = react_1.screen.getByTestId('method-sauté');
        void user.click(sauteMethod);
        // Verify method selection and details
        expect(react_1.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
        // Step 4: Build a recipe
        const recipeNameInput = react_1.screen.getByTestId('recipe-name-input');
        void user.type(recipeNameInput, 'Italian Tomato Basil Sauté');
        // Add ingredients to recipe
        const addIngredientButton = react_1.screen.getByTestId('add-ingredient');
        void user.click(addIngredientButton);
        void user.click(addIngredientButton);
        void user.click(addIngredientButton);
        // Fill in ingredient details
        void user.type(react_1.screen.getByTestId('ingredient-quantity-0'), '2 cups');
        void user.type(react_1.screen.getByTestId('ingredient-name-0'), 'Fresh Tomatoes');
        void user.type(react_1.screen.getByTestId('ingredient-quantity-1'), '1/4 cup');
        void user.type(react_1.screen.getByTestId('ingredient-name-1'), 'Fresh Basil');
        void user.type(react_1.screen.getByTestId('ingredient-quantity-2'), '2 tbsp');
        void user.type(react_1.screen.getByTestId('ingredient-name-2'), 'Olive Oil');
        // Add cooking steps
        const addStepButton = react_1.screen.getByTestId('add-step');
        void user.click(addStepButton);
        void user.click(addStepButton);
        user.type(react_1.screen.getByTestId('step-instruction-0'), 'Heat olive oil in a large pan over medium heat');
        void user.type(react_1.screen.getByTestId('step-timing-0'), '2 min');
        user.type(react_1.screen.getByTestId('step-instruction-1'), 'Add tomatoes and basil, sauté until tender');
        void user.type(react_1.screen.getByTestId('step-timing-1'), '8 min');
        // Verify recipe can be saved
        const saveButton = react_1.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        // Save the recipe
        void user.click(saveButton);
        // Verify the complete workflow
        expect(react_1.screen.getByDisplayValue('Italian Tomato Basil Sauté')).toBeInTheDocument();
        expect(react_1.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        expect(react_1.screen.getByText('Steps: 2')).toBeInTheDocument();
    });
    it('handles ingredient exploration workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
        });
        // Expand ingredient details
        const expandTomatoes = react_1.screen.getByTestId('expand-tomatoes');
        void user.click(expandTomatoes);
        // Verify details are shown
        expect(react_1.screen.getByTestId('details-tomatoes')).toBeInTheDocument();
        expect(react_1.screen.getByText('Category: Vegetables')).toBeInTheDocument();
        expect(react_1.screen.getByText('Properties: Umami, Acidic, Fresh')).toBeInTheDocument();
        // Expand another ingredient
        const expandGarlic = react_1.screen.getByTestId('expand-garlic');
        void user.click(expandGarlic);
        expect(react_1.screen.getByTestId('details-garlic')).toBeInTheDocument();
        expect(react_1.screen.getByText('Category: Aromatics')).toBeInTheDocument();
        // Collapse first ingredient
        void user.click(expandTomatoes);
        expect(react_1.screen.queryByTestId('details-tomatoes')).not.toBeInTheDocument();
        // Select multiple ingredients
        void user.click(react_1.screen.getByTestId('ingredient-tomatoes'));
        void user.click(react_1.screen.getByTestId('ingredient-garlic'));
        void user.click(react_1.screen.getByTestId('ingredient-basil'));
        // Verify selection summary
        expect(react_1.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        expect(react_1.screen.getByText('Tomatoes, Garlic, Basil')).toBeInTheDocument();
    });
    it('handles cooking method exploration workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('cooking-methods')).toBeInTheDocument();
        });
        // Select different cooking methods and view details
        const roastMethod = react_1.screen.getByTestId('method-roast');
        void user.click(roastMethod);
        expect(react_1.screen.getByTestId('method-details-roast')).toBeInTheDocument();
        expect(react_1.screen.getByText('Cooking in the oven with dry heat')).toBeInTheDocument();
        // Switch to another method
        const grillMethod = react_1.screen.getByTestId('method-grill');
        void user.click(grillMethod);
        expect(react_1.screen.getByTestId('method-details-grill')).toBeInTheDocument();
        expect(react_1.screen.getByText('Cooking over direct heat')).toBeInTheDocument();
        // Previous method details should be hidden
        expect(react_1.screen.queryByTestId('method-details-roast')).not.toBeInTheDocument();
        // Test view more functionality
        const viewMoreButton = react_1.screen.getByTestId('view-more-methods');
        expect(viewMoreButton).toBeInTheDocument();
    });
    it('handles complete recipe creation workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Create a complete recipe from scratch
        const recipeNameInput = react_1.screen.getByTestId('recipe-name-input');
        void user.type(recipeNameInput, 'Mediterranean Chicken');
        // Update recipe metadata
        const servingsInput = react_1.screen.getByTestId('servings-input');
        const prepTimeInput = react_1.screen.getByTestId('prep-time-input');
        const cookTimeInput = react_1.screen.getByTestId('cook-time-input');
        void user.clear(servingsInput);
        void user.type(servingsInput, '6');
        void user.clear(prepTimeInput);
        void user.type(prepTimeInput, '20');
        void user.clear(cookTimeInput);
        void user.type(cookTimeInput, '45');
        // Add multiple ingredients
        for (let i = 0; i < 4; i++) {
            void user.click(react_1.screen.getByTestId('add-ingredient'));
        }
        const ingredients = [
            { quantity: '2 lbs', name: 'Chicken Breast' },
            { quantity: '1 cup', name: 'Cherry Tomatoes' },
            { quantity: '1/2 cup', name: 'Kalamata Olives' },
            { quantity: '1/4 cup', name: 'Olive Oil' },
        ];
        for (let i = 0; i < ingredients.length; i++) {
            void user.type(react_1.screen.getByTestId(`ingredient-quantity-${i}`), ingredients[i].quantity);
            void user.type(react_1.screen.getByTestId(`ingredient-name-${i}`), ingredients[i].name);
        }
        // Add cooking steps
        for (let i = 0; i < 3; i++) {
            void user.click(react_1.screen.getByTestId('add-step'));
        }
        const steps = [
            { instruction: 'Preheat oven to 375°F and prepare chicken', timing: '5 min' },
            { instruction: 'Sear chicken in olive oil until golden', timing: '10 min' },
            { instruction: 'Add tomatoes and olives, bake until done', timing: '30 min' },
        ];
        for (let i = 0; i < steps.length; i++) {
            void user.type(react_1.screen.getByTestId(`step-instruction-${i}`), steps[i].instruction);
            void user.type(react_1.screen.getByTestId(`step-timing-${i}`), steps[i].timing);
        }
        // Verify recipe summary
        const summary = react_1.screen.getByTestId('recipe-summary');
        expect(summary).toHaveTextContent('Name: Mediterranean Chicken');
        expect(summary).toHaveTextContent('Servings: 6');
        expect(summary).toHaveTextContent('Total Time: 65 minutes');
        expect(summary).toHaveTextContent('Ingredients: 4');
        expect(summary).toHaveTextContent('Steps: 3');
        // Verify save button is enabled
        const saveButton = react_1.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        expect(saveButton).toHaveClass('enabled');
        // Test ingredient removal
        void user.click(react_1.screen.getByTestId('remove-ingredient-3'));
        expect(react_1.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        // Test step removal
        void user.click(react_1.screen.getByTestId('remove-step-0'));
        expect(react_1.screen.getByText('Steps: 2')).toBeInTheDocument();
        // Verify step renumbering
        expect(react_1.screen.getByDisplayValue('Sear chicken in olive oil until golden')).toBeInTheDocument();
    });
    it('handles navigation and state preservation workflow', async () => {
        const user = user_event_1.default.setup();
        const mockOnSectionNavigate = jest.fn();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, { onSectionNavigate: mockOnSectionNavigate }));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
        });
        // Make selections across different components
        void user.click(react_1.screen.getByTestId('cuisine-italian'));
        void user.click(react_1.screen.getByTestId('ingredient-tomatoes'));
        void user.click(react_1.screen.getByTestId('method-sauté'));
        // Navigate between sections
        const cuisineNavButton = react_1.screen.getByText('Cuisine Recommendations');
        void user.click(cuisineNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('cuisine');
        const ingredientsNavButton = react_1.screen.getByText('Ingredient Recommendations');
        void user.click(ingredientsNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('ingredients');
        // Verify state preservation was called
        await (0, react_1.waitFor)(() => {
            expect(mockNavigationState.saveState).toHaveBeenCalled();
        });
        // Verify selections are maintained after navigation
        expect(react_1.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_1.screen.getByText('Selected Ingredients (1)')).toBeInTheDocument();
        expect(react_1.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
    });
    it('handles error recovery workflow', async () => {
        const user = user_event_1.default.setup();
        // Mock console.error to avoid noise
        const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => { });
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Simulate user creating a recipe and encountering an error
        const recipeNameInput = react_1.screen.getByTestId('recipe-name-input');
        void user.type(recipeNameInput, 'Test Recipe');
        // Add ingredient
        void user.click(react_1.screen.getByTestId('add-ingredient'));
        void user.type(react_1.screen.getByTestId('ingredient-name-0'), 'Test Ingredient');
        // Add step
        void user.click(react_1.screen.getByTestId('add-step'));
        void user.type(react_1.screen.getByTestId('step-instruction-0'), 'Test step');
        // Verify recipe is valid
        expect(react_1.screen.getByTestId('save-recipe')).toBeEnabled();
        // The main page should continue to function despite any errors
        expect(react_1.screen.getByText('What to Eat Next')).toBeInTheDocument();
        expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        consoleSpy.mockRestore();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5jb21wcmVoZW5zaXZlLXN5bnRheC1iYWNrdXAtMTc1NzQ3NjY0MDMzNC9zcmNfX190ZXN0c19fX2UyZV9NYWluUGFnZVdvcmtmbG93cy50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFzQ0Esb0RBQW9EO0FBQ3BELElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsQyxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEQsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDbkIsQ0FBQztDQUNILENBQUMsQ0FBQyxDQUFDO0FBRUosSUFBSSxDQUFDLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO0FBQ2hELElBQUksQ0FBQyxJQUFJLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUMxQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDakMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN6QyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2pCO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFFSixxREFBcUQ7QUFDckQsSUFBSSxDQUFDLElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7SUFDaEQsT0FBTyxTQUFTLHNCQUFzQjtRQUNwQyxNQUFNLENBQUMsZUFB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QixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ2pFLE1BQU0sQ0FBQyxjQUFNLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBRWpFLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUMzQixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC8uY29tcHJlaGVuc2l2ZS1zeW50YXgtYmFja3VwLTE3NTc0NzY2NDAzMzQvc3JjX19fdGVzdHNfX19lMmVfTWFpblBhZ2VXb3JrZmxvd3MudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueW5vLWNvbnNvbGUsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycywgbWF4LWxpbmVzLXBlci1mdW5jdGlvbiAtLSBDYW1wYWlnbi90ZXN0IGZpbGUgd2l0aCBpbnRlbnRpb25hbCBwYXR0ZXJucyAqL1xuaW1wb3J0IHR5cGUgeyB9IGZyb20gJ2plc3QnO1xuLyoqXG4gKiBFbmQtdG8tRW5kIFRlc3RzIGZvciBNYWluIFBhZ2UgV29ya2Zsb3dzXG4gKlxuICogVGhlc2UgdGVzdHMgc2ltdWxhdGUgY29tcGxldGUgdXNlciB3b3JrZmxvd3Mgb24gdGhlIG1haW4gcGFnZSxcbiAqIHRlc3RpbmcgdGhlIGludGVncmF0aW9uIGJldHdlZW4gYWxsIGNvbXBvbmVudHMgYW5kIHVzZXIgaW50ZXJhY3Rpb25zLlxuICpcbiAqIE5vdGU6IFRoZXNlIHRlc3RzIHVzZSBqc2RvbSBhbmQgdGVzdGluZy1saWJyYXJ5IHRvIHNpbXVsYXRlIEUyRSBzY2VuYXJpb3NcbiAqIHdpdGhvdXQgcmVxdWlyaW5nIGEgZnVsbCBicm93c2VyIGVudmlyb25tZW50LlxuICovXG5cbmltcG9ydCB7IGFjdCwgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB1c2VyRXZlbnQgZnJvbSAnQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VBbGNoZW1pY2FsIH0gZnJvbSAnQC9jb250ZXh0cy9BbGNoZW1pY2FsQ29udGV4dC9ob29rcyc7XG5pbXBvcnQgeyB1c2VBdXRvU3RhdGVDbGVhbnVwLCB1c2VOYXZpZ2F0aW9uU3RhdGUsIHVzZVNjcm9sbFByZXNlcnZhdGlvbiB9IGZyb20gJ0AvaG9va3MvdXNlU3RhdGVQcmVzZXJ2YXRpb24nO1xuXG4vLyBDcmVhdGUgbW9jayBjb21wb25lbnRzIGZvciB0ZXN0aW5nXG5jb25zdCBNb2NrQ3Vpc2luZVJlY29tbWVuZGVyOiBSZWFjdC5GQzxhbnk+ID0gKHByb3BzOiBhbnkpID0+IDxkaXYgZGF0YS10ZXN0aWQ9J2N1aXNpbmUtcmVjb21tZW5kZXInPkN1aXNpbmUgUmVjb21tZW5kZXI8L2Rpdj47XG5jb25zdCBNb2NrRWxlbWVudGFsQmFsYW5jZTogUmVhY3QuRkM8YW55PiA9IChwcm9wczogYW55KSA9PiA8ZGl2IGRhdGEtdGVzdGlkPSdlbGVtZW50YWwtYmFsYW5jZSc+RWxlbWVudGFsIEJhbGFuY2U8L2Rpdj47XG5jb25zdCBNb2NrSW50ZWxsaWdlbmNlUGFuZWw6IFJlYWN0LkZDPGFueT4gPSAocHJvcHM6IGFueSkgPT4gPGRpdiBkYXRhLXRlc3RpZD0naW50ZWxsaWdlbmNlLXBhbmVsJz5JbnRlbGxpZ2VuY2UgUGFuZWw8L2Rpdj47XG5cbmludGVyZmFjZSBNYWluUGFnZUxheW91dFByb3BzIHtcbiAgb25TZWN0aW9uTmF2aWdhdGU/OiAoc2VjdGlvbjogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5jb25zdCBNYWluUGFnZUxheW91dDogUmVhY3QuRkM8TWFpblBhZ2VMYXlvdXRQcm9wcz4gPSAoeyBvblNlY3Rpb25OYXZpZ2F0ZSB9OiBhbnkpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPSdtYWluLXBhZ2UtbGF5b3V0Jz5cbiAgICAgIDxNb2NrQ3Vpc2luZVJlY29tbWVuZGVyIC8+XG4gICAgICA8TW9ja0VsZW1lbnRhbEJhbGFuY2UgLz5cbiAgICAgIDxNb2NrSW50ZWxsaWdlbmNlUGFuZWwgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cblxuLy8gTW9jayBhbGwgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIGZvciBFMkUgc2ltdWxhdGlvblxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6ICgpID0+ICh7IHB1c2g6IGplc3QuZm4oKSwgYmFjazogamVzdC5mbigpLFxuICAgIGZvcndhcmQ6IGplc3QuZm4oKSxcbiAgICByZWZyZXNoOiBqZXN0LmZuKCksXG4gICAgcmVwbGFjZTogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJyk7XG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlU3RhdGVQcmVzZXJ2YXRpb24nKTtcbmplc3QubW9jaygnQC91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dnZXI6IHsgZGVidWc6IGplc3QuZm4oKSwgaW5mbzogamVzdC5mbigpLFxuICAgIHdhcm46IGplc3QuZm4oKSxcbiAgICBlcnJvcjogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIHJlYWxpc3RpYyBjb21wb25lbnQgYmVoYXZpb3JzIGZvciBFMkUgdGVzdGluZ1xuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvQ3Vpc2luZVJlY29tbWVuZGVyJywgKCkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gTW9ja0N1aXNpbmVSZWNvbW1lbmRlcigpOiBhbnkge1xuICAgIGNvbnN0IFtzZWxlY3RlZEN1aXNpbmUsIHNldFNlbGVjdGVkQ3Vpc2luZV0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbc2hvd1JlY2lwZXMsIHNldFNob3dSZWNpcGVzXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcblxuICAgIGNvbnN0IGN1aXNpbmVzOiBhbnkgPSBbXG4gICAgICB7IG5hbWU6ICdJdGFsaWFuJywgc2NvcmU6IDk1LCByZWNpcGVzOiBbJ1Bhc3RhIE1hcmluYXJhJywgJ1Jpc290dG8nLCAnUGl6emEgTWFyZ2hlcml0YSddIH0sXG4gICAgICB7IG5hbWU6ICdDaGluZXNlJywgc2NvcmU6IDg4LCByZWNpcGVzOiBbJ0ZyaWVkIFJpY2UnLCAnU3dlZXQgYW5kIFNvdXIgUG9yaycsICdLdW5nIFBhbyBDaGlja2VuJ10gfSxcbiAgICAgIHsgbmFtZTogJ01leGljYW4nLCBzY29yZTogODIsIHJlY2lwZXM6IFsnVGFjb3MnLCAnRW5jaGlsYWRhcycsICdHdWFjYW1vbGUnXSB9LFxuICAgICAgeyBuYW1lOiAnSW5kaWFuJywgc2NvcmU6IDc5LCByZWNpcGVzOiBbJ0N1cnJ5JywgJ0JpcnlhbmknLCAnTmFhbiddIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IGhhbmRsZUN1aXNpbmVTZWxlY3Q6IGFueSA9IChjdWlzaW5lOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGN1aXNpbmVEYXRhOiBhbnkgPSBjdWlzaW5lIGFzIHsgbmFtZTogc3RyaW5nOyBzY29yZTogbnVtYmVyOyByZWNpcGVzOiBzdHJpbmdbXSB9O1xuICAgICAgc2V0U2VsZWN0ZWRDdWlzaW5lKGN1aXNpbmVEYXRhLm5hbWUpO1xuICAgICAgc2V0U2hvd1JlY2lwZXModHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdjdWlzaW5lLXJlY29tbWVuZGVyJz5cbiAgICAgICAgPGgzPkN1aXNpbmUgUmVjb21tZW5kYXRpb25zPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2N1aXNpbmUtZ3JpZCc+XG4gICAgICAgICAge2N1aXNpbmVzLm1hcChjdWlzaW5lID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtjdWlzaW5lLm5hbWV9IGNsYXNzTmFtZT0nY3Vpc2luZS1jYXJkJyBkYXRhLXRlc3RpZD17YGN1aXNpbmUtY2FyZC0ke2N1aXNpbmUubmFtZS50b0xvd2VyQ2FzZSgpfWB9PlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQ3Vpc2luZVNlbGVjdChjdWlzaW5lKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3NlbGVjdGVkQ3Vpc2luZSA9PT0gY3Vpc2luZS5uYW1lID8gJ3NlbGVjdGVkJyA6ICcnfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgY3Vpc2luZS0ke2N1aXNpbmUubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDQ+e2N1aXNpbmUubmFtZX08L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzY29yZSc+TWF0Y2g6IHtjdWlzaW5lLnNjb3JlfSU8L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge3Nob3dSZWNpcGVzICYmIHNlbGVjdGVkQ3Vpc2luZSAmJiAoXG4gICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD0ncmVjaXBlLXJlY29tbWVuZGF0aW9ucycgY2xhc3NOYW1lPSdyZWNpcGUtc2VjdGlvbic+XG4gICAgICAgICAgICA8aDQ+UmVjb21tZW5kZWQge3NlbGVjdGVkQ3Vpc2luZX0gUmVjaXBlczwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjaXBlLWxpc3QnPlxuICAgICAgICAgICAgICB7Y3Vpc2luZXNcbiAgICAgICAgICAgICAgICAuZmluZChjID0+IGMubmFtZSA9PT0gc2VsZWN0ZWRDdWlzaW5lKVxuICAgICAgICAgICAgICAgID8ucmVjaXBlcy5tYXAocmVjaXBlID0+IChcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAga2V5PXtyZWNpcGV9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgcmVjaXBlLSR7cmVjaXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpfWB9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncmVjaXBlLWJ1dHRvbidcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3JlY2lwZX1cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL0luZ3JlZGllbnRSZWNvbW1lbmRlcicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tJbmdyZWRpZW50UmVjb21tZW5kZXIoeyBtYXhEaXNwbGF5ZWQgPSA4IH06IHsgbWF4RGlzcGxheWVkPzogbnVtYmVyIH0pIHtcbiAgICBjb25zdCBbc2VsZWN0ZWRJbmdyZWRpZW50cywgc2V0U2VsZWN0ZWRJbmdyZWRpZW50c10gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICAgIGNvbnN0IFtleHBhbmRlZEluZ3JlZGllbnQsIHNldEV4cGFuZGVkSW5ncmVkaWVudF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAgIGNvbnN0IGluZ3JlZGllbnRzOiBhbnkgPSBbXG4gICAgICB7IG5hbWU6ICdUb21hdG9lcycsIGNhdGVnb3J5OiAnVmVnZXRhYmxlcycsIHByb3BlcnRpZXM6IFsnVW1hbWknLCAnQWNpZGljJywgJ0ZyZXNoJ10gfSxcbiAgICAgIHsgbmFtZTogJ09uaW9ucycsIGNhdGVnb3J5OiAnVmVnZXRhYmxlcycsIHByb3BlcnRpZXM6IFsnU3dlZXQnLCAnUHVuZ2VudCcsICdBcm9tYXRpYyddIH0sXG4gICAgICB7IG5hbWU6ICdHYXJsaWMnLCBjYXRlZ29yeTogJ0Fyb21hdGljcycsIHByb3BlcnRpZXM6IFsnUHVuZ2VudCcsICdTYXZvcnknLCAnQXJvbWF0aWMnXSB9LFxuICAgICAgeyBuYW1lOiAnQmFzaWwnLCBjYXRlZ29yeTogJ0hlcmJzJywgcHJvcGVydGllczogWydGcmVzaCcsICdBcm9tYXRpYycsICdTd2VldCddIH0sXG4gICAgICB7IG5hbWU6ICdPbGl2ZSBPaWwnLCBjYXRlZ29yeTogJ09pbHMnLCBwcm9wZXJ0aWVzOiBbJ1JpY2gnLCAnRnJ1aXR5JywgJ1Ntb290aCddIH0sXG4gICAgICB7IG5hbWU6ICdDaGVlc2UnLCBjYXRlZ29yeTogJ0RhaXJ5JywgcHJvcGVydGllczogWydDcmVhbXknLCAnU2FsdHknLCAnUmljaCddIH0sXG4gICAgICB7IG5hbWU6ICdQYXN0YScsIGNhdGVnb3J5OiAnR3JhaW5zJywgcHJvcGVydGllczogWydOZXV0cmFsJywgJ0ZpbGxpbmcnLCAnVmVyc2F0aWxlJ10gfSxcbiAgICAgIHsgbmFtZTogJ0NoaWNrZW4nLCBjYXRlZ29yeTogJ1Byb3RlaW5zJywgcHJvcGVydGllczogWydMZWFuJywgJ01pbGQnLCAnVmVyc2F0aWxlJ10gfSxcbiAgICBdO1xuXG4gICAgY29uc3QgZGlzcGxheWVkSW5ncmVkaWVudHM6IGFueSA9IGluZ3JlZGllbnRzLnNsaWNlKDAsIG1heERpc3BsYXllZCk7XG5cbiAgICBjb25zdCB0b2dnbGVJbmdyZWRpZW50OiBhbnkgPSAoaW5ncmVkaWVudDogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRTZWxlY3RlZEluZ3JlZGllbnRzKHByZXYgPT5cbiAgICAgICAgcHJldi5pbmNsdWRlcyhpbmdyZWRpZW50KSA/IHByZXYuZmlsdGVyKGkgPT4gaSAhPT0gaW5ncmVkaWVudCkgOiBbLi4ucHJldiwgaW5ncmVkaWVudF0sXG4gICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCB0b2dnbGVFeHBhbmRlZDogYW55ID0gKGluZ3JlZGllbnQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0RXhwYW5kZWRJbmdyZWRpZW50KHByZXYgPT4gKHByZXYgPT09IGluZ3JlZGllbnQgPyBudWxsIDogaW5ncmVkaWVudCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD0naW5ncmVkaWVudC1yZWNvbW1lbmRlcic+XG4gICAgICAgIDxoMz5JbmdyZWRpZW50IFJlY29tbWVuZGF0aW9uczwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbmdyZWRpZW50LWdyaWQnPlxuICAgICAgICAgIHtkaXNwbGF5ZWRJbmdyZWRpZW50cy5tYXAoaW5ncmVkaWVudCA9PiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGtleT17aW5ncmVkaWVudC5uYW1lfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J2luZ3JlZGllbnQtY2FyZCdcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BpbmdyZWRpZW50LWNhcmQtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdG9nZ2xlSW5ncmVkaWVudChpbmdyZWRpZW50Lm5hbWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2VsZWN0ZWRJbmdyZWRpZW50cy5pbmNsdWRlcyhpbmdyZWRpZW50Lm5hbWUpID8gJ3NlbGVjdGVkJyA6ICcnfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgaW5ncmVkaWVudC0ke2luZ3JlZGllbnQubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aW5ncmVkaWVudC5uYW1lfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRvZ2dsZUV4cGFuZGVkKGluZ3JlZGllbnQubmFtZSl9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BleHBhbmQtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZXhwYW5kLWJ1dHRvbidcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtleHBhbmRlZEluZ3JlZGllbnQgPT09IGluZ3JlZGllbnQubmFtZSA/ICfilrwnIDogJ+KWtid9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgIHtleHBhbmRlZEluZ3JlZGllbnQgPT09IGluZ3JlZGllbnQubmFtZSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD17YGRldGFpbHMtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfSBjbGFzc05hbWU9J2luZ3JlZGllbnQtZGV0YWlscyc+XG4gICAgICAgICAgICAgICAgICA8ZGl2PkNhdGVnb3J5OiB7aW5ncmVkaWVudC5jYXRlZ29yeX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+UHJvcGVydGllczoge2luZ3JlZGllbnQucHJvcGVydGllcy5qb2luKCcsICcpfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtzZWxlY3RlZEluZ3JlZGllbnRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9J3NlbGVjdGVkLWluZ3JlZGllbnRzLXN1bW1hcnknIGNsYXNzTmFtZT0nc2VsZWN0aW9uLXN1bW1hcnknPlxuICAgICAgICAgICAgPGg0PlNlbGVjdGVkIEluZ3JlZGllbnRzICh7c2VsZWN0ZWRJbmdyZWRpZW50cy5sZW5ndGh9KTwvaDQ+XG4gICAgICAgICAgICA8ZGl2PntzZWxlY3RlZEluZ3JlZGllbnRzLmpvaW4oJywgJyl9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL0Nvb2tpbmdNZXRob2RzU2VjdGlvbicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tDb29raW5nTWV0aG9kc1NlY3Rpb24oe1xuICAgIG1heERpc3BsYXllZCA9IDYsXG4gICAgb25WaWV3TW9yZSxcbiAgfToge1xuICAgIG1heERpc3BsYXllZD86IG51bWJlcjtcbiAgICBvblZpZXdNb3JlPzogKCkgPT4gdm9pZDtcbiAgfSkge1xuICAgIGNvbnN0IFtzZWxlY3RlZE1ldGhvZCwgc2V0U2VsZWN0ZWRNZXRob2RdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgICBjb25zdCBtZXRob2RzOiBhbnkgPSBbXG4gICAgICB7IG5hbWU6ICdTYXV0w6knLCB0aW1lOiAnNS0xMCBtaW4nLCBkaWZmaWN1bHR5OiAnRWFzeScsIGRlc2NyaXB0aW9uOiAnUXVpY2sgY29va2luZyBpbiBhIHBhbiB3aXRoIG9pbCcgfSxcbiAgICAgIHsgbmFtZTogJ1JvYXN0JywgdGltZTogJzMwLTYwIG1pbicsIGRpZmZpY3VsdHk6ICdNZWRpdW0nLCBkZXNjcmlwdGlvbjogJ0Nvb2tpbmcgaW4gdGhlIG92ZW4gd2l0aCBkcnkgaGVhdCcgfSxcbiAgICAgIHsgbmFtZTogJ0dyaWxsJywgdGltZTogJzEwLTIwIG1pbicsIGRpZmZpY3VsdHk6ICdNZWRpdW0nLCBkZXNjcmlwdGlvbjogJ0Nvb2tpbmcgb3ZlciBkaXJlY3QgaGVhdCcgfSxcbiAgICAgIHsgbmFtZTogJ1N0ZWFtJywgdGltZTogJzEwLTE1IG1pbicsIGRpZmZpY3VsdHk6ICdFYXN5JywgZGVzY3JpcHRpb246ICdDb29raW5nIHdpdGggc3RlYW0gaGVhdCcgfSxcbiAgICAgIHsgbmFtZTogJ0JyYWlzZScsIHRpbWU6ICc2MC0xMjAgbWluJywgZGlmZmljdWx0eTogJ0hhcmQnLCBkZXNjcmlwdGlvbjogJ1Nsb3cgY29va2luZyB3aXRoIGxpcXVpZCcgfSxcbiAgICAgIHsgbmFtZTogJ1N0aXItZnJ5JywgdGltZTogJzUtOCBtaW4nLCBkaWZmaWN1bHR5OiAnTWVkaXVtJywgZGVzY3JpcHRpb246ICdRdWljayBjb29raW5nIHdoaWxlIHN0aXJyaW5nJyB9LFxuICAgIF07XG5cbiAgICBjb25zdCBkaXNwbGF5ZWRNZXRob2RzOiBhbnkgPSBtZXRob2RzLnNsaWNlKDAsIG1heERpc3BsYXllZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD0nY29va2luZy1tZXRob2RzJz5cbiAgICAgICAgPGgzPkNvb2tpbmcgTWV0aG9kczwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZXRob2RzLWdyaWQnPlxuICAgICAgICAgIHtkaXNwbGF5ZWRNZXRob2RzLm1hcChtZXRob2QgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e21ldGhvZC5uYW1lfSBjbGFzc05hbWU9J21ldGhvZC1jYXJkJyBkYXRhLXRlc3RpZD17YG1ldGhvZC1jYXJkLSR7bWV0aG9kLm5hbWUudG9Mb3dlckNhc2UoKX1gfT5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkTWV0aG9kKG1ldGhvZC5uYW1lKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3NlbGVjdGVkTWV0aG9kID09PSBtZXRob2QubmFtZSA/ICdzZWxlY3RlZCcgOiAnJ31cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YG1ldGhvZC0ke21ldGhvZC5uYW1lLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxoND57bWV0aG9kLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWV0aG9kLWluZm8nPlxuICAgICAgICAgICAgICAgICAgPGRpdj5UaW1lOiB7bWV0aG9kLnRpbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PkRpZmZpY3VsdHk6IHttZXRob2QuZGlmZmljdWx0eX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAge3NlbGVjdGVkTWV0aG9kID09PSBtZXRob2QubmFtZSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD17YG1ldGhvZC1kZXRhaWxzLSR7bWV0aG9kLm5hbWUudG9Mb3dlckNhc2UoKX1gfSBjbGFzc05hbWU9J21ldGhvZC1kZXRhaWxzJz5cbiAgICAgICAgICAgICAgICAgIDxwPnttZXRob2QuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxidXR0b24gb25DbGljaz17b25WaWV3TW9yZX0gZGF0YS10ZXN0aWQ9J3ZpZXctbW9yZS1tZXRob2RzJyBjbGFzc05hbWU9J3ZpZXctbW9yZS1idXR0b24nPjtcbiAgICAgICAgICBWaWV3IEFsbCBDb29raW5nIE1ldGhvZHNcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL3JlY2lwZXMvUmVjaXBlQnVpbGRlclNpbXBsZScsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tSZWNpcGVCdWlsZGVyU2ltcGxlKCk6IGFueSB7XG4gICAgY29uc3QgW3JlY2lwZU5hbWUsIHNldFJlY2lwZU5hbWVdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtpbmdyZWRpZW50cywgc2V0SW5ncmVkaWVudHNdID0gUmVhY3QudXNlU3RhdGU8QXJyYXk8eyBuYW1lOiBzdHJpbmc7IHF1YW50aXQsIHk6IHN0cmluZyB9Pj4oW10pO1xuICAgIGNvbnN0IFtzdGVwcywgc2V0U3RlcHNdID0gUmVhY3QudXNlU3RhdGU8QXJyYXk8eyBpbnN0cnVjdGlvbjogc3RyaW5nOyB0aW1pbmc6IHN0cmluZyB9Pj4oW10pO1xuICAgIGNvbnN0IFtzZXJ2aW5ncywgc2V0U2VydmluZ3NdID0gUmVhY3QudXNlU3RhdGUoNCk7XG4gICAgY29uc3QgW3ByZXBUaW1lLCBzZXRQcmVwVGltZV0gPSBSZWFjdC51c2VTdGF0ZSgxNSk7XG4gICAgY29uc3QgW2Nvb2tUaW1lLCBzZXRDb29rVGltZV0gPSBSZWFjdC51c2VTdGF0ZSgzMCk7XG5cbiAgICBjb25zdCBhZGRJbmdyZWRpZW50OiBSZWFjdC5GQzxhbnk+ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gWy4uLnByZXYsIHsgbmFtZTogJycsIHF1YW50aXR5OiAnJyB9XSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHVwZGF0ZUluZ3JlZGllbnQ6IGFueSA9IChpbmRleDogbnVtYmVyLCBmaWVsZDogJ25hbWUnIHwgJ3F1YW50aXR5JywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgc2V0SW5ncmVkaWVudHMocHJldiA9PiBwcmV2Lm1hcCgoaW5nOiBhbnkpID0+IChpID09PSBpbmRleCA/IHsgLi4uaW5nLCBbZmllbGRdOiB2YWx1ZSB9IDogaW5nKSkpO1xuICAgIH07XG5cbiAgICBjb25zdCByZW1vdmVJbmdyZWRpZW50OiBhbnkgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgc2V0SW5ncmVkaWVudHMocHJldiA9PiBwcmV2LmZpbHRlcigoXzogYW55KSA9PiBpICE9PSBpbmRleCkpO1xuICAgIH07XG5cbiAgICBjb25zdCBhZGRTdGVwOiBSZWFjdC5GQzxhbnk+ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gWy4uLnByZXYsIHsgaW5zdHJ1Y3Rpb246ICcnLCB0aW1pbmc6ICcnIH1dKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlU3RlcDogYW55ID0gKGluZGV4OiBudW1iZXIsIGZpZWxkOiAnaW5zdHJ1Y3Rpb24nIHwgJ3RpbWluZycsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gcHJldi5tYXAoKHN0ZXA6IGFueSkgPT4gKGkgPT09IGluZGV4ID8geyAuLi5zdGVwLCBbZmllbGRdOiB2YWx1ZSB9IDogc3RlcCkpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlU3RlcDogYW55ID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gcHJldi5maWx0ZXIoKF86IGFueSkgPT4gaSAhPT0gaW5kZXgpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2FuU2F2ZTogYW55ID0gcmVjaXBlTmFtZS50cmltKCkgJiYgaW5ncmVkaWVudHMuc29tZShpbmcgPT4gaW5nLm5hbWUudHJpbSgpKSAmJiB2b2lkIHN0ZXBzLnNvbWUoc3RlcCA9PiBzdGVwLmluc3RydWN0aW9uLnRyaW0oKSk7XG5cbiAgICBjb25zdCB0b3RhbFRpbWU6IGFueSA9IHByZXBUaW1lICsgY29va1RpbWU7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD0ncmVjaXBlLWJ1aWxkZXInPlxuICAgICAgICA8aDM+UmVjaXBlIEJ1aWxkZXI8L2gzPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNpcGUtZm9ybSc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2lwZS1oZWFkZXInPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdSZWNpcGUgTmFtZSdcbiAgICAgICAgICAgICAgdmFsdWU9e3JlY2lwZU5hbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFJlY2lwZU5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0ncmVjaXBlLW5hbWUtaW5wdXQnXG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjaXBlLW1ldGEnPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlcnZpbmdzfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFNlcnZpbmdzKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAxKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nc2VydmluZ3MtaW5wdXQnXG4gICAgICAgICAgICAgICAgbWluPScxJ1xuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ByZXBUaW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFByZXBUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0ncHJlcC10aW1lLWlucHV0J1xuICAgICAgICAgICAgICAgIG1pbj0nMCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT0nbnVtYmVyJ1xuICAgICAgICAgICAgICAgIHZhbHVlPXtjb29rVGltZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRDb29rVGltZShwYXJzZUludChlLnRhcmdldC52YWx1ZSkgfHwgMCl9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2Nvb2stdGltZS1pbnB1dCdcbiAgICAgICAgICAgICAgICBtaW49JzAnXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbmdyZWRpZW50cy1zZWN0aW9uJz5cbiAgICAgICAgICAgIDxoND5JbmdyZWRpZW50czwvaDQ+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FkZEluZ3JlZGllbnR9IGRhdGEtdGVzdGlkPSdhZGQtaW5ncmVkaWVudCc+XG4gICAgICAgICAgICAgIEFkZCBJbmdyZWRpZW50XG4gICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAge2luZ3JlZGllbnRzLm1hcCgoaW5ncmVkaWVudDogYW55LCBpbmRleDogYW55KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSdpbmdyZWRpZW50LXJvdycgZGF0YS10ZXN0aWQ9e2BpbmdyZWRpZW50LXJvdy0ke2luZGV4fWB9PlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdRdWFudGl0eSdcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtpbmdyZWRpZW50LnF1YW50aXR5fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdXBkYXRlSW5ncmVkaWVudChpbmRleCwgJ3F1YW50aXR5JywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BpbmdyZWRpZW50LXF1YW50aXR5LSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdJbmdyZWRpZW50IG5hbWUnXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17aW5ncmVkaWVudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdXBkYXRlSW5ncmVkaWVudChpbmRleCwgJ25hbWUnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtbmFtZS0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHJlbW92ZUluZ3JlZGllbnQoaW5kZXgpfSBkYXRhLXRlc3RpZD17YHJlbW92ZS1pbmdyZWRpZW50LSR7aW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgICBSZW1vdmVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cblxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD0naW5ncmVkaWVudHMtY291bnQnPiwgSW5ncmVkaWVudHM6IHtpbmdyZWRpZW50cy5sZW5ndGh9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3RlcHMtc2VjdGlvbic+XG4gICAgICAgICAgICA8aDQ+SW5zdHJ1Y3Rpb25zPC9oND5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkU3RlcH0gZGF0YS10ZXN0aWQ9J2FkZC1zdGVwJz5cbiAgICAgICAgICAgICAgQWRkIFN0ZXBcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICB7c3RlcHMubWFwKChzdGVwOiBhbnksIGluZGV4OiBhbnkpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9J3N0ZXAtcm93JyBkYXRhLXRlc3RpZD17YHN0ZXAtcm93LSR7aW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzdGVwLW51bWJlcic+e2luZGV4ICsgMX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nRGVzY3JpYmUgdGhpcyBzdGVwLi4uJ1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0ZXAuaW5zdHJ1Y3Rpb259XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB1cGRhdGVTdGVwKGluZGV4LCAnaW5zdHJ1Y3Rpb24nLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YHN0ZXAtaW5zdHJ1Y3Rpb24tJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J1RpbWluZydcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtzdGVwLnRpbWluZ31cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHVwZGF0ZVN0ZXAoaW5kZXgsICd0aW1pbmcnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YHN0ZXAtdGltaW5nLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gcmVtb3ZlU3RlcChpbmRleCl9IGRhdGEtdGVzdGlkPXtgcmVtb3ZlLXN0ZXAtJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICAgIFJlbW92ZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdzdGVwcy1jb3VudCc+LCBTdGVwczoge3N0ZXBzLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNpcGUtc3VtbWFyeScgZGF0YS10ZXN0aWQ9J3JlY2lwZS1zdW1tYXJ5Jz5cbiAgICAgICAgICAgIDxoND5SZWNpcGUgU3VtbWFyeTwvaDQ+XG4gICAgICAgICAgICA8ZGl2Pk5hbWU6IHtyZWNpcGVOYW1lIHx8ICdVbnRpdGxlZCBSZWNpcGUnfTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5TZXJ2aW5nczoge3NlcnZpbmdzfTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5Ub3RhbCBUaW1lOiB7dG90YWxUaW1lfSBtaW51dGVzPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PkluZ3JlZGllbnRzOiB7aW5ncmVkaWVudHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5TdGVwczoge3N0ZXBzLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxidXR0b24gZGlzYWJsZWQ9eyFjYW5TYXZlfSBkYXRhLXRlc3RpZD0nc2F2ZS1yZWNpcGUnIGNsYXNzTmFtZT17Y2FuU2F2ZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9PjtcbiAgICAgICAgICAgIFNhdmUgUmVjaXBlXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn0pO1xuXG5kZXNjcmliZSgnTWFpbiBQYWdlIEUyRSBXb3JrZmxvd3MnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBbGNoZW1pY2FsQ29udGV4dDogYW55ID0ge1xuICAgIHN0YXRlOiB7IGFzdHJvbG9naWNhbFN0YXRlOiB7IHN1blNpZ246ICdhcmllcycgfSxcbiAgICAgIGVsZW1lbnRhbFN0YXRlOiB7IEZpcmU6IDAuMywgV2F0ZXI6IDAuMiwgRWFydGg6IDAuMywgQWlyOiAwLjIgfSxcbiAgICB9LFxuICAgIHBsYW5ldGFyeVBvc2l0aW9uczogeyBzdW46IHsgc2lnbjogJ2FyaWVzJyB9IH0sXG4gICAgaXNEYXl0aW1lOiB0cnVlLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tOYXZpZ2F0aW9uU3RhdGUgPSB7XG4gICAgc2F2ZVN0YXRlOiBqZXN0LmZuKCksXG4gICAgZ2V0U3RhdGU6IGplc3QuZm4oKCkgPT4gKHt9KSksXG4gIH07XG5cbiAgY29uc3QgbW9ja1Njcm9sbFByZXNlcnZhdGlvbjogYW55ID0ge1xuICAgIHJlc3RvcmVTY3JvbGxQb3NpdGlvbjogamVzdC5mbigpLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHZvaWQgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICAodXNlQWxjaGVtaWNhbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrQWxjaGVtaWNhbENvbnRleHQpO1xuICAgICh1c2VOYXZpZ2F0aW9uU3RhdGUgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja05hdmlnYXRpb25TdGF0ZSk7XG4gICAgKHVzZVNjcm9sbFByZXNlcnZhdGlvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrU2Nyb2xsUHJlc2VydmF0aW9uKTtcbiAgICAodXNlQXV0b1N0YXRlQ2xlYW51cCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgLy8gTW9jayBET00gbWV0aG9kc1xuICAgIHZvaWQgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3Njcm9sbFknLCB7IHZhbHVlOiAwLCB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgICBqZXN0LnNweU9uKGRvY3VtZW50LCAnZ2V0RWxlbWVudEJ5SWQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT5cbiAgICAgICAgKHtcbiAgICAgICAgICBzY3JvbGxJbnRvVmlldzogamVzdC5mbigpLFxuICAgICAgICAgIHN0eWxlOiB7fSxcbiAgICAgICAgICBjbGFzc0xpc3Q6IHsgYWRkOiBqZXN0LmZuKCksIHJlbW92ZTogamVzdC5mbigpIH0sXG4gICAgICAgIH0pIGFzIGFueSxcbiAgICApO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHZvaWQgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgaXQoJ2NvbXBsZXRlcyBmdWxsIG1lYWwgcGxhbm5pbmcgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcjogYW55ID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICAvLyBXYWl0IGZvciBhbGwgY29tcG9uZW50cyB0byBsb2FkXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLXJlY29tbWVuZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXJlY29tbWVuZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjb29raW5nLW1ldGhvZHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1idWlsZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBTdGVwIDE6IFNlbGVjdCBhIGN1aXNpbmVcbiAgICBjb25zdCBpdGFsaWFuQ3Vpc2luZTogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpdGFsaWFuLWN1aXNpbmUnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soaXRhbGlhbkN1aXNpbmUpO1xuXG4gICAgLy8gVmVyaWZ5IGN1aXNpbmUgc2VsZWN0aW9uIGFuZCByZWNpcGUgcmVjb21tZW5kYXRpb25zIGFwcGVhclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1yZWNvbW1lbmRhdGlvbnMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmVjb21tZW5kZWQgSXRhbGlhbiBSZWNpcGVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTdGVwIDI6IFNlbGVjdCBpbmdyZWRpZW50c1xuICAgIGNvbnN0IHRvbWF0b2VzOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtdG9tYXRvZXMnKTtcbiAgICBjb25zdCBiYXNpbDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LWJhc2lsJyk7XG4gICAgY29uc3Qgb2xpdmVPaWw6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1vbGl2ZSBvaWwnKTtcblxuICAgIHZvaWQgdXNlci5jbGljayh0b21hdG9lcyk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGJhc2lsKTtcbiAgICB2b2lkIHVzZXIuY2xpY2sob2xpdmVPaWwpO1xuXG4gICAgLy8gVmVyaWZ5IGluZ3JlZGllbnQgc2VsZWN0aW9uXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VsZWN0ZWQtaW5ncmVkaWVudHMtc3VtbWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBJbmdyZWRpZW50cyAoMyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFN0ZXAgMzogU2VsZWN0IGNvb2tpbmcgbWV0aG9kXG4gICAgY29uc3Qgc2F1dGVNZXRob2Q6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLXNhdXTDqScpO1xuICAgIHZvaWQgdXNlci5jbGljayhzYXV0ZU1ldGhvZCk7XG5cbiAgICAvLyBWZXJpZnkgbWV0aG9kIHNlbGVjdGlvbiBhbmQgZGV0YWlsc1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXNhdXTDqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gU3RlcCA0OiBCdWlsZCBhIHJlY2lwZVxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIHZvaWQgdXNlci50eXBlKHJlY2lwZU5hbWVJbnB1dCwgJ0l0YWxpYW4gVG9tYXRvIEJhc2lsIFNhdXTDqScpO1xuXG4gICAgLy8gQWRkIGluZ3JlZGllbnRzIHRvIHJlY2lwZVxuICAgIGNvbnN0IGFkZEluZ3JlZGllbnRCdXR0b246IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLWluZ3JlZGllbnQnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soYWRkSW5ncmVkaWVudEJ1dHRvbik7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGFkZEluZ3JlZGllbnRCdXR0b24pO1xuICAgIHZvaWQgdXNlci5jbGljayhhZGRJbmdyZWRpZW50QnV0dG9uKTtcblxuICAgIC8vIEZpbGwgaW4gaW5ncmVkaWVudCBkZXRhaWxzXG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXF1YW50aXR5LTAnKSwgJzIgY3VwcycpO1xuICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTAnKSwgJ0ZyZXNoIFRvbWF0b2VzJyk7XG5cbiAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcXVhbnRpdHktMScpLCAnMS80IGN1cCcpO1xuICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTEnKSwgJ0ZyZXNoIEJhc2lsJyk7XG5cbiAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcXVhbnRpdHktMicpLCAnMiB0YnNwJyk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LW5hbWUtMicpLCAnT2xpdmUgT2lsJyk7XG5cbiAgICAvLyBBZGQgY29va2luZyBzdGVwc1xuICAgIGNvbnN0IGFkZFN0ZXBCdXR0b246IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXN0ZXAnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soYWRkU3RlcEJ1dHRvbik7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGFkZFN0ZXBCdXR0b24pO1xuXG4gICAgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0wJyksICdIZWF0IG9saXZlIG9pbCBpbiBhIGxhcmdlIHBhbiBvdmVyIG1lZGl1bSBoZWF0Jyk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLXRpbWluZy0wJyksICcyIG1pbicpO1xuXG4gICAgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0xJyksICdBZGQgdG9tYXRvZXMgYW5kIGJhc2lsLCBzYXV0w6kgdW50aWwgdGVuZGVyJyk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLXRpbWluZy0xJyksICc4IG1pbicpO1xuXG4gICAgLy8gVmVyaWZ5IHJlY2lwZSBjYW4gYmUgc2F2ZWRcbiAgICBjb25zdCBzYXZlQnV0dG9uOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NhdmUtcmVjaXBlJyk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvQmVFbmFibGVkKCk7XG5cbiAgICAvLyBTYXZlIHRoZSByZWNpcGVcbiAgICB2b2lkIHVzZXIuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAvLyBWZXJpZnkgdGhlIGNvbXBsZXRlIHdvcmtmbG93XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnSXRhbGlhbiBUb21hdG8gQmFzaWwgU2F1dMOpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0luZ3JlZGllbnRzOiAzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1N0ZXBzOiAyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGluZ3JlZGllbnQgZXhwbG9yYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcjogYW55ID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIEV4cGFuZCBpbmdyZWRpZW50IGRldGFpbHNcbiAgICBjb25zdCBleHBhbmRUb21hdG9lczogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdleHBhbmQtdG9tYXRvZXMnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soZXhwYW5kVG9tYXRvZXMpO1xuXG4gICAgLy8gVmVyaWZ5IGRldGFpbHMgYXJlIHNob3duXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZGV0YWlscy10b21hdG9lcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDYXRlZ29yeTogVmVnZXRhYmxlcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQcm9wZXJ0aWVzOiBVbWFtaSwgQWNpZGljLCBGcmVzaCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gRXhwYW5kIGFub3RoZXIgaW5ncmVkaWVudFxuICAgIGNvbnN0IGV4cGFuZEdhcmxpYzogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdleHBhbmQtZ2FybGljJyk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGV4cGFuZEdhcmxpYyk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXRhaWxzLWdhcmxpYycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDYXRlZ29yeTogQXJvbWF0aWNzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBDb2xsYXBzZSBmaXJzdCBpbmdyZWRpZW50XG4gICAgdm9pZCB1c2VyLmNsaWNrKGV4cGFuZFRvbWF0b2VzKTtcbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ2RldGFpbHMtdG9tYXRvZXMnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTZWxlY3QgbXVsdGlwbGUgaW5ncmVkaWVudHNcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXRvbWF0b2VzJykpO1xuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtZ2FybGljJykpO1xuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtYmFzaWwnKSk7XG5cbiAgICAvLyBWZXJpZnkgc2VsZWN0aW9uIHN1bW1hcnlcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgSW5ncmVkaWVudHMgKDMpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RvbWF0b2VzLCBHYXJsaWMsIEJhc2lsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGNvb2tpbmcgbWV0aG9kIGV4cGxvcmF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXI6IGFueSA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8TWFpblBhZ2VMYXlvdXQgLz4pO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjb29raW5nLW1ldGhvZHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIFNlbGVjdCBkaWZmZXJlbnQgY29va2luZyBtZXRob2RzIGFuZCB2aWV3IGRldGFpbHNcbiAgICBjb25zdCByb2FzdE1ldGhvZDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2Qtcm9hc3QnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2socm9hc3RNZXRob2QpO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtcm9hc3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29va2luZyBpbiB0aGUgb3ZlbiB3aXRoIGRyeSBoZWF0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTd2l0Y2ggdG8gYW5vdGhlciBtZXRob2RcbiAgICBjb25zdCBncmlsbE1ldGhvZDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2QtZ3JpbGwnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soZ3JpbGxNZXRob2QpO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtZ3JpbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29va2luZyBvdmVyIGRpcmVjdCBoZWF0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBQcmV2aW91cyBtZXRob2QgZGV0YWlscyBzaG91bGQgYmUgaGlkZGVuXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGVzdElkKCdtZXRob2QtZGV0YWlscy1yb2FzdCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFRlc3QgdmlldyBtb3JlIGZ1bmN0aW9uYWxpdHlcbiAgICBjb25zdCB2aWV3TW9yZUJ1dHRvbjogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCd2aWV3LW1vcmUtbWV0aG9kcycpO1xuICAgIGV4cGVjdCh2aWV3TW9yZUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgY29tcGxldGUgcmVjaXBlIGNyZWF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXI6IGFueSA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8TWFpblBhZ2VMYXlvdXQgLz4pO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtYnVpbGRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGEgY29tcGxldGUgcmVjaXBlIGZyb20gc2NyYXRjaFxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIHZvaWQgdXNlci50eXBlKHJlY2lwZU5hbWVJbnB1dCwgJ01lZGl0ZXJyYW5lYW4gQ2hpY2tlbicpO1xuXG4gICAgLy8gVXBkYXRlIHJlY2lwZSBtZXRhZGF0YVxuICAgIGNvbnN0IHNlcnZpbmdzSW5wdXQ6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VydmluZ3MtaW5wdXQnKTtcbiAgICBjb25zdCBwcmVwVGltZUlucHV0OiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ByZXAtdGltZS1pbnB1dCcpO1xuICAgIGNvbnN0IGNvb2tUaW1lSW5wdXQ6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnY29vay10aW1lLWlucHV0Jyk7XG5cbiAgICB2b2lkIHVzZXIuY2xlYXIoc2VydmluZ3NJbnB1dCk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2VydmluZ3NJbnB1dCwgJzYnKTtcblxuICAgIHZvaWQgdXNlci5jbGVhcihwcmVwVGltZUlucHV0KTtcbiAgICB2b2lkIHVzZXIudHlwZShwcmVwVGltZUlucHV0LCAnMjAnKTtcblxuICAgIHZvaWQgdXNlci5jbGVhcihjb29rVGltZUlucHV0KTtcbiAgICB2b2lkIHVzZXIudHlwZShjb29rVGltZUlucHV0LCAnNDUnKTtcblxuICAgIC8vIEFkZCBtdWx0aXBsZSBpbmdyZWRpZW50c1xuICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1pbmdyZWRpZW50JykpO1xuICAgIH1cblxuICAgIGNvbnN0IGluZ3JlZGllbnRzOiBhbnkgPSBbXG4gICAgICB7IHF1YW50aXR5OiAnMiBsYnMnLCBuYW1lOiAnQ2hpY2tlbiBCcmVhc3QnIH0sXG4gICAgICB7IHF1YW50aXR5OiAnMSBjdXAnLCBuYW1lOiAnQ2hlcnJ5IFRvbWF0b2VzJyB9LFxuICAgICAgeyBxdWFudGl0eTogJzEvMiBjdXAnLCBuYW1lOiAnS2FsYW1hdGEgT2xpdmVzJyB9LFxuICAgICAgeyBxdWFudGl0eTogJzEvNCBjdXAnLCBuYW1lOiAnT2xpdmUgT2lsJyB9LFxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpOiBhbnkgPSAwOyBpIDwgaW5ncmVkaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZChgaW5ncmVkaWVudC1xdWFudGl0eS0ke2l9YCksIGluZ3JlZGllbnRzW2ldLnF1YW50aXR5KTtcbiAgICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZChgaW5ncmVkaWVudC1uYW1lLSR7aX1gKSwgaW5ncmVkaWVudHNbaV0ubmFtZSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGNvb2tpbmcgc3RlcHNcbiAgICBmb3IgKGxldCBpOiBhbnkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtc3RlcCcpKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGVwczogYW55ID0gW1xuICAgICAgeyBpbnN0cnVjdGlvbjogJ1ByZWhlYXQgb3ZlbiB0byAzNzXCsEYgYW5kIHByZXBhcmUgY2hpY2tlbicsIHRpbWluZzogJzUgbWluJyB9LFxuICAgICAgeyBpbnN0cnVjdGlvbjogJ1NlYXIgY2hpY2tlbiBpbiBvbGl2ZSBvaWwgdW50aWwgZ29sZGVuJywgdGltaW5nOiAnMTAgbWluJyB9LFxuICAgICAgeyBpbnN0cnVjdGlvbjogJ0FkZCB0b21hdG9lcyBhbmQgb2xpdmVzLCBiYWtlIHVudGlsIGRvbmUnLCB0aW1pbmc6ICczMCBtaW4nIH0sXG4gICAgXTtcblxuICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKGBzdGVwLWluc3RydWN0aW9uLSR7aX1gKSwgc3RlcHNbaV0uaW5zdHJ1Y3Rpb24pO1xuICAgICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKGBzdGVwLXRpbWluZy0ke2l9YCksIHN0ZXBzW2ldLnRpbWluZyk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHJlY2lwZSBzdW1tYXJ5XG4gICAgY29uc3Qgc3VtbWFyeTogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtc3VtbWFyeScpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnTmFtZTogTWVkaXRlcnJhbmVhbiBDaGlja2VuJyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvSGF2ZVRleHRDb250ZW50KCdTZXJ2aW5nczogNicpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnVG90YWwgVGltZTogNjUgbWludXRlcycpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnSW5ncmVkaWVudHM6IDQnKTtcbiAgICBleHBlY3Qoc3VtbWFyeSkudG9IYXZlVGV4dENvbnRlbnQoJ1N0ZXBzOiAzJyk7XG5cbiAgICAvLyBWZXJpZnkgc2F2ZSBidXR0b24gaXMgZW5hYmxlZFxuICAgIGNvbnN0IHNhdmVCdXR0b246IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2F2ZS1yZWNpcGUnKTtcbiAgICBleHBlY3Qoc2F2ZUJ1dHRvbikudG9CZUVuYWJsZWQoKTtcbiAgICBleHBlY3Qoc2F2ZUJ1dHRvbikudG9IYXZlQ2xhc3MoJ2VuYWJsZWQnKTtcblxuICAgIC8vIFRlc3QgaW5ncmVkaWVudCByZW1vdmFsXG4gICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgncmVtb3ZlLWluZ3JlZGllbnQtMycpKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSW5ncmVkaWVudHM6IDMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFRlc3Qgc3RlcCByZW1vdmFsXG4gICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgncmVtb3ZlLXN0ZXAtMCcpKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcHM6IDInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFZlcmlmeSBzdGVwIHJlbnVtYmVyaW5nXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnU2VhciBjaGlja2VuIGluIG9saXZlIG9pbCB1bnRpbCBnb2xkZW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgbmF2aWdhdGlvbiBhbmQgc3RhdGUgcHJlc2VydmF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXI6IGFueSA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgIGNvbnN0IG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSA9IGplc3QuZm4oKSBhcyBhbnk7XG5cbiAgICBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCBvblNlY3Rpb25OYXZpZ2F0ZT17bW9ja09uU2VjdGlvbk5hdmlnYXRlfSAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1aXNpbmUtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIE1ha2Ugc2VsZWN0aW9ucyBhY3Jvc3MgZGlmZmVyZW50IGNvbXBvbmVudHNcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLWl0YWxpYW4nKSk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC10b21hdG9lcycpKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2Qtc2F1dMOpJykpO1xuXG4gICAgLy8gTmF2aWdhdGUgYmV0d2VlbiBzZWN0aW9uc1xuICAgIGNvbnN0IGN1aXNpbmVOYXZCdXR0b246IGFueSA9IHNjcmVlbi5nZXRCeVRleHQoJ0N1aXNpbmUgUmVjb21tZW5kYXRpb25zJyk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGN1aXNpbmVOYXZCdXR0b24pO1xuICAgIGV4cGVjdChtb2NrT25TZWN0aW9uTmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdjdWlzaW5lJyk7XG5cbiAgICBjb25zdCBpbmdyZWRpZW50c05hdkJ1dHRvbjogYW55ID0gc2NyZWVuLmdldEJ5VGV4dCgnSW5ncmVkaWVudCBSZWNvbW1lbmRhdGlvbnMnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soaW5ncmVkaWVudHNOYXZCdXR0b24pO1xuICAgIGV4cGVjdChtb2NrT25TZWN0aW9uTmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdpbmdyZWRpZW50cycpO1xuXG4gICAgLy8gVmVyaWZ5IHN0YXRlIHByZXNlcnZhdGlvbiB3YXMgY2FsbGVkXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QobW9ja05hdmlnYXRpb25TdGF0ZS5zYXZlU3RhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIC8vIFZlcmlmeSBzZWxlY3Rpb25zIGFyZSBtYWludGFpbmVkIGFmdGVyIG5hdmlnYXRpb25cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtcmVjb21tZW5kYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIEluZ3JlZGllbnRzICgxKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXNhdXTDqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBlcnJvciByZWNvdmVyeSB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VyOiBhbnkgPSB1c2VyRXZlbnQuc2V0dXAoKTtcblxuICAgIC8vIE1vY2sgY29uc29sZS5lcnJvciB0byBhdm9pZCBub2lzZVxuICAgIGNvbnN0IGNvbnNvbGVTcHk6IGFueSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcblxuICAgIGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IC8+KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLWJ1aWxkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIFNpbXVsYXRlIHVzZXIgY3JlYXRpbmcgYSByZWNpcGUgYW5kIGVuY291bnRlcmluZyBhbiBlcnJvclxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIHZvaWQgdXNlci50eXBlKHJlY2lwZU5hbWVJbnB1dCwgJ1Rlc3QgUmVjaXBlJyk7XG5cbiAgICAvLyBBZGQgaW5ncmVkaWVudFxuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1pbmdyZWRpZW50JykpO1xuICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTAnKSwgJ1Rlc3QgSW5ncmVkaWVudCcpO1xuXG4gICAgLy8gQWRkIHN0ZXBcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtc3RlcCcpKTtcbiAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0ZXAtaW5zdHJ1Y3Rpb24tMCcpLCAnVGVzdCBzdGVwJyk7XG5cbiAgICAvLyBWZXJpZnkgcmVjaXBlIGlzIHZhbGlkXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2F2ZS1yZWNpcGUnKSkudG9CZUVuYWJsZWQoKTtcblxuICAgIC8vIFRoZSBtYWluIHBhZ2Ugc2hvdWxkIGNvbnRpbnVlIHRvIGZ1bmN0aW9uIGRlc3BpdGUgYW55IGVycm9yc1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXaGF0IHRvIEVhdCBOZXh0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLWJ1aWxkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==