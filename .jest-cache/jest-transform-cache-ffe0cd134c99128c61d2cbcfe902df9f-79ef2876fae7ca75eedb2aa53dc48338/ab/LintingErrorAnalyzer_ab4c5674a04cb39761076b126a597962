c1e6b1b570bd9c85b9e16a27f1479781
"use strict";
/**
 * LintingErrorAnalyzer - Automated linting error analysis and categorization system
 *
 * This class implements comprehensive error analysis, categorization, and resolution
 * strategy generation for ESLint issues across the WhatToEatNext codebase.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LintingErrorAnalyzer = void 0;
const child_process_1 = require("child_process");
const path = __importStar(require("path"));
const LoggingService_1 = require("@/services/LoggingService");
/**
 * Main LintingErrorAnalyzer class
 */
class LintingErrorAnalyzer {
    workspaceRoot;
    eslintConfigPath;
    domainPatterns;
    constructor(workspaceRoot = process.cwd()) {
        this.workspaceRoot = workspaceRoot;
        this.eslintConfigPath = path.join(workspaceRoot, 'eslint.config.cjs');
        // Define domain-specific file patterns
        this.domainPatterns = {
            astrological: [
                /\/calculations\//,
                /\/data\/planets\//,
                /reliableAstronomy/,
                /planetaryConsistencyCheck/,
                /Astrological/,
                /Alchemical/,
            ],
            campaign: [/\/services\/campaign\//, /\/types\/campaign/, /Campaign/, /Progress/],
            test: [/\.test\./, /\.spec\./, /__tests__/],
            script: [/\/scripts\//, /\.config\./, /\.setup\./],
        };
    }
    /**
     * Analyze all linting issues in the codebase
     */
    async analyzeAllIssues() {
        void LoggingService_1.log.info('ðŸ” Starting comprehensive linting error analysis...');
        try {
            // Run ESLint to get all issues
            const eslintOutput = await this.runESLint();
            const rawIssues = this.parseESLintOutput(eslintOutput);
            void LoggingService_1.log.info(`ðŸ“Š Found ${rawIssues.length} total linting issues`);
            // Categorize and analyze each issue
            const analyzedIssues = rawIssues.map(issue => this.analyzeIssue(issue));
            // Categorize issues
            const categorized = this.categorizeIssues(analyzedIssues);
            void LoggingService_1.log.info('âœ… Linting error analysis complete');
            void this.logAnalysisSummary(categorized);
            return categorized;
        }
        catch (error) {
            console.error('âŒ Error during linting analysis:', error);
            throw error;
        }
    }
    /**
     * Generate resolution strategies for categorized errors
     */
    generateResolutionPlan(categorizedErrors) {
        void LoggingService_1.log.info('ðŸŽ¯ Generating resolution plan...');
        const phases = [];
        let totalTime = 0;
        // Phase 1: Auto-fixable issues (low risk)
        if (categorizedErrors.autoFixable.length > 0) {
            const autoFixPhase = {
                id: 'auto-fix',
                name: 'Automated Fixes',
                issues: categorizedErrors.autoFixable,
                estimatedTime: Math.ceil(categorizedErrors.autoFixable.length * 0.1),
                riskLevel: 'low',
                dependencies: [],
            };
            void phases.push(autoFixPhase);
            totalTime += autoFixPhase.estimatedTime;
        }
        // Phase 2: Import and style issues (medium risk)
        const importStyleIssues = [
            ...(categorizedErrors.byCategory['import'] || []),
            ...(categorizedErrors.byCategory['style'] || []),
        ].filter(issue => issue.resolutionStrategy.type !== 'auto-fix');
        if (importStyleIssues.length > 0) {
            const importStylePhase = {
                id: 'import-style',
                name: 'Import and Style Fixes',
                issues: importStyleIssues,
                estimatedTime: Math.ceil(importStyleIssues.length * 0.5),
                riskLevel: 'medium',
                dependencies: ['auto-fix'],
            };
            void phases.push(importStylePhase);
            totalTime += importStylePhase.estimatedTime;
        }
        // Phase 3: TypeScript issues (high risk)
        const typescriptIssues = categorizedErrors.byCategory['typescript'] || [];
        if (typescriptIssues.length > 0) {
            const typescriptPhase = {
                id: 'typescript',
                name: 'TypeScript Fixes',
                issues: typescriptIssues,
                estimatedTime: Math.ceil(typescriptIssues.length * 2),
                riskLevel: 'high',
                dependencies: ['auto-fix', 'import-style'],
            };
            void phases.push(typescriptPhase);
            totalTime += typescriptPhase.estimatedTime;
        }
        // Phase 4: React issues (medium risk)
        const reactIssues = categorizedErrors.byCategory['react'] || [];
        if (reactIssues.length > 0) {
            const reactPhase = {
                id: 'react',
                name: 'React Fixes',
                issues: reactIssues,
                estimatedTime: Math.ceil(reactIssues.length * 1),
                riskLevel: 'medium',
                dependencies: ['typescript'],
            };
            void phases.push(reactPhase);
            totalTime += reactPhase.estimatedTime;
        }
        // Phase 5: Domain-specific issues (varies by context)
        const domainIssues = categorizedErrors.byCategory['domain'] || [];
        if (domainIssues.length > 0) {
            const domainPhase = {
                id: 'domain',
                name: 'Domain-Specific Fixes',
                issues: domainIssues,
                estimatedTime: Math.ceil(domainIssues.length * 3),
                riskLevel: 'high',
                dependencies: ['typescript', 'react'],
            };
            void phases.push(domainPhase);
            totalTime += domainPhase.estimatedTime;
        }
        // Calculate risk assessment
        const riskAssessment = this.assessResolutionRisk(categorizedErrors, phases);
        // Calculate success probability based on issue types and complexity
        const successProbability = this.calculateSuccessProbability(categorizedErrors);
        const plan = {
            phases,
            totalEstimatedTime: totalTime,
            riskAssessment,
            successProbability,
        };
        void LoggingService_1.log.info(`ðŸ“‹ Resolution plan generated: ${phases.length} phases, ${totalTime} minutes estimated`);
        return plan;
    }
    /**
     * Run ESLint and capture output
     */
    async runESLint() {
        try {
            const command = `npx eslint --config ${this.eslintConfigPath} src --format json --max-warnings=10000`;
            const output = (0, child_process_1.execSync)(command, {
                encoding: 'utf8',
                cwd: this.workspaceRoot,
                maxBuffer: 10 * 1024 * 1024, // 10MB buffer
            });
            return output;
        }
        catch (error) {
            // ESLint returns non-zero exit code when issues are found
            const err = error;
            if (err.stdout) {
                return err.stdout;
            }
            throw error;
        }
    }
    /**
     * Parse ESLint JSON output into raw issues
     */
    parseESLintOutput(output) {
        try {
            const results = JSON.parse(output);
            const issues = [];
            for (const fileResult of results) {
                for (const message of fileResult.messages) {
                    issues.push({
                        ...message,
                        filePath: fileResult.filePath,
                    });
                }
            }
            return issues;
        }
        catch (error) {
            console.error('Failed to parse ESLint output:', error);
            return [];
        }
    }
    /**
     * Analyze individual issue and determine resolution strategy
     */
    analyzeIssue(rawIssue) {
        const file = String(rawIssue.filePath || '')
            .replace(this.workspaceRoot, '')
            .replace(/^\//, '');
        const domainContext = this.detectDomainContext(file);
        const category = this.categorizeIssue(rawIssue, domainContext);
        const resolutionStrategy = this.determineResolutionStrategy(rawIssue, category, domainContext);
        const issue = {
            id: `${file}:${String(rawIssue.line)}:${String(rawIssue.column)}:${String(rawIssue.ruleId)}`,
            file,
            line: Number(rawIssue.line || 0),
            column: Number(rawIssue.column || 0),
            rule: String(rawIssue.ruleId || 'unknown'),
            message: String(rawIssue.message || ''),
            severity: Number(rawIssue.severity) === 2 ? 'error' : 'warning',
            category,
            autoFixable: Boolean(rawIssue.fix),
            domainContext,
            resolutionStrategy,
        };
        return issue;
    }
    /**
     * Detect domain context for a file
     */
    detectDomainContext(filePath) {
        const context = {
            isAstrologicalCalculation: false,
            isCampaignSystem: false,
            isTestFile: false,
            isScriptFile: false,
            requiresSpecialHandling: false,
        };
        // Check astrological patterns
        context.isAstrologicalCalculation = this.domainPatterns.astrological.some(pattern => pattern.test(filePath));
        // Check campaign system patterns
        context.isCampaignSystem = this.domainPatterns.campaign.some(pattern => pattern.test(filePath));
        // Check test file patterns
        context.isTestFile = this.domainPatterns.test.some(pattern => pattern.test(filePath));
        // Check script file patterns
        context.isScriptFile = this.domainPatterns.script.some(pattern => pattern.test(filePath));
        // Determine if special handling is required
        context.requiresSpecialHandling =
            context.isAstrologicalCalculation ||
                context.isCampaignSystem ||
                context.isTestFile ||
                context.isScriptFile;
        return context;
    }
    /**
     * Categorize individual issue
     */
    categorizeIssue(rawIssue, domainContext) {
        const rule = String(rawIssue.ruleId || '');
        // Import-related issues
        if (rule.startsWith('import/')) {
            return {
                primary: 'import',
                secondary: rule.replace('import/', ''),
                priority: 2,
            };
        }
        // TypeScript-related issues
        if (rule.startsWith('@typescript-eslint/')) {
            return {
                primary: 'typescript',
                secondary: rule.replace('@typescript-eslint/', ''),
                priority: rule.includes('no-explicit-any') ? 3 : 1,
            };
        }
        // React-related issues
        if (rule.startsWith('react') || rule.startsWith('react-hooks')) {
            return {
                primary: 'react',
                secondary: rule.replace(/^react(-hooks)?\//, ''),
                priority: rule.includes('exhaustive-deps') ? 2 : 1,
            };
        }
        // Domain-specific issues
        if (domainContext.requiresSpecialHandling) {
            return {
                primary: 'domain',
                secondary: domainContext.isAstrologicalCalculation
                    ? 'astrological'
                    : domainContext.isCampaignSystem
                        ? 'campaign'
                        : domainContext.isTestFile
                            ? 'test'
                            : 'script',
                priority: 4,
            };
        }
        // Style and formatting issues
        return {
            primary: 'style',
            secondary: rule,
            priority: 4,
        };
    }
    /**
     * Determine resolution strategy for an issue
     */
    determineResolutionStrategy(rawIssue, category, domainContext) {
        const rule = String(rawIssue.ruleId || '');
        const hasAutoFix = Boolean(rawIssue.fix);
        // Auto-fixable issues with low risk
        if (hasAutoFix && this.isLowRiskAutoFix(rule)) {
            return {
                type: 'auto-fix',
                confidence: 0.9,
                riskLevel: 'low',
                requiredValidation: [
                    { type: 'build', description: 'Verify build still passes', automated: true },
                ],
                estimatedEffort: 0.1,
                dependencies: [],
            };
        }
        // Import issues - usually safe to auto-fix
        if (category.primary === 'import') {
            return {
                type: hasAutoFix ? 'auto-fix' : 'manual-review',
                confidence: hasAutoFix ? 0.8 : 0.6,
                riskLevel: 'medium',
                requiredValidation: [
                    { type: 'build', description: 'Verify imports resolve correctly', automated: true },
                    { type: 'type-check', description: 'Verify TypeScript compilation', automated: true },
                ],
                estimatedEffort: hasAutoFix ? 0.2 : 1.0,
                dependencies: [],
            };
        }
        // TypeScript issues - require careful handling
        if (category.primary === 'typescript') {
            const isExplicitAny = rule.includes('no-explicit-any');
            return {
                type: isExplicitAny ? 'manual-review' : 'auto-fix',
                confidence: isExplicitAny ? 0.4 : 0.7,
                riskLevel: isExplicitAny ? 'high' : 'medium',
                requiredValidation: [
                    { type: 'type-check', description: 'Verify TypeScript compilation', automated: true },
                    { type: 'test', description: 'Run relevant tests', automated: true },
                ],
                estimatedEffort: isExplicitAny ? 5.0 : 1.0,
                dependencies: [],
            };
        }
        // React issues - moderate risk
        if (category.primary === 'react') {
            const isExhaustiveDeps = rule.includes('exhaustive-deps');
            return {
                type: isExhaustiveDeps ? 'manual-review' : 'auto-fix',
                confidence: isExhaustiveDeps ? 0.5 : 0.8,
                riskLevel: isExhaustiveDeps ? 'high' : 'medium',
                requiredValidation: [
                    { type: 'build', description: 'Verify React components render', automated: true },
                    { type: 'test', description: 'Run component tests', automated: true },
                ],
                estimatedEffort: isExhaustiveDeps ? 3.0 : 0.5,
                dependencies: [],
            };
        }
        // Domain-specific issues - require special handling
        if (domainContext.requiresSpecialHandling) {
            return {
                type: 'manual-review',
                confidence: 0.3,
                riskLevel: 'high',
                requiredValidation: [
                    { type: 'manual-review', description: 'Domain expert review required', automated: false },
                    { type: 'test', description: 'Run domain-specific tests', automated: true },
                ],
                estimatedEffort: 10.0,
                dependencies: [],
            };
        }
        // Default strategy for other issues
        return {
            type: hasAutoFix ? 'auto-fix' : 'rule-adjustment',
            confidence: 0.6,
            riskLevel: 'low',
            requiredValidation: [{ type: 'build', description: 'Verify build passes', automated: true }],
            estimatedEffort: hasAutoFix ? 0.5 : 2.0,
            dependencies: [],
        };
    }
    /**
     * Check if a rule is safe for auto-fixing
     */
    isLowRiskAutoFix(rule) {
        const lowRiskRules = [
            'import/order',
            'import/newline-after-import',
            'semi',
            'quotes',
            'comma-dangle',
            'trailing-comma',
            'indent',
            'no-trailing-spaces',
            'eol-last',
        ];
        return lowRiskRules.some(lowRiskRule => rule.includes(lowRiskRule));
    }
    /**
     * Categorize all analyzed issues
     */
    categorizeIssues(issues) {
        const categorized = {
            total: issues.length,
            errors: issues.filter(i => i.severity === 'error').length,
            warnings: issues.filter(i => i.severity === 'warning').length,
            byCategory: {},
            byPriority: {},
            byFile: {},
            autoFixable: issues.filter(i => i.autoFixable),
            requiresManualReview: issues.filter(i => i.resolutionStrategy.type === 'manual-review'),
        };
        // Group by category
        for (const issue of issues) {
            const categoryKey = issue.category.primary;
            if (!categorized.byCategory[categoryKey]) {
                categorized.byCategory[categoryKey] = [];
            }
            categorized.byCategory[categoryKey].push(issue);
        }
        // Group by priority
        for (const issue of issues) {
            const priority = issue.category.priority;
            if (!categorized.byPriority[priority]) {
                categorized.byPriority[priority] = [];
            }
            categorized.byPriority[priority].push(issue);
        }
        // Group by file
        for (const issue of issues) {
            if (!categorized.byFile[issue.file]) {
                categorized.byFile[issue.file] = [];
            }
            categorized.byFile[issue.file].push(issue);
        }
        return categorized;
    }
    /**
     * Assess risk of resolution plan
     */
    assessResolutionRisk(categorized, phases) {
        const factors = [];
        const mitigations = [];
        // Check for high-risk factors
        if (categorized.byCategory['typescript'].length > 50) {
            void factors.push('High number of TypeScript issues');
            mitigations.push('Implement gradual TypeScript fixes with validation');
        }
        if (categorized.byCategory['domain'].length > 0) {
            void factors.push('Domain-specific issues require expert knowledge');
            mitigations.push('Manual review by domain experts required');
        }
        if (categorized.requiresManualReview.length > categorized.autoFixable.length) {
            void factors.push('More manual fixes than automated fixes');
            mitigations.push('Prioritize automated fixes first to reduce workload');
        }
        // Determine overall risk
        const highRiskPhases = phases.filter(p => p.riskLevel === 'high').length;
        const overall = highRiskPhases > 2 ? 'high' : highRiskPhases > 0 ? 'medium' : 'low';
        return { overall, factors, mitigations };
    }
    /**
     * Calculate success probability based on issue complexity
     */
    calculateSuccessProbability(categorized) {
        let baseScore = 0.8; // Start with 80% confidence
        // Reduce confidence for complex issues
        const complexIssues = categorized.requiresManualReview.length;
        const totalIssues = categorized.total;
        if (totalIssues > 0) {
            const complexityRatio = complexIssues / totalIssues;
            baseScore -= complexityRatio * 0.3; // Reduce up to 30% for complexity
        }
        // Increase confidence for auto-fixable issues
        const autoFixRatio = categorized.autoFixable.length / totalIssues;
        baseScore += autoFixRatio * 0.1; // Increase up to 10% for auto-fixes
        return Math.max(0.3, Math.min(0.95, baseScore)); // Clamp between 30% and 95%
    }
    /**
     * Log analysis summary
     */
    logAnalysisSummary(categorized) {
        void LoggingService_1.log.info('\nðŸ“Š LINTING ANALYSIS SUMMARY');
        LoggingService_1.log.info('============================');
        void LoggingService_1.log.info(`Total Issues: ${categorized.total}`);
        void LoggingService_1.log.info(`Errors: ${categorized.errors}`);
        void LoggingService_1.log.info(`Warnings: ${categorized.warnings}`);
        void LoggingService_1.log.info(`Auto-fixable: ${categorized.autoFixable.length}`);
        void LoggingService_1.log.info(`Manual Review Required: ${categorized.requiresManualReview.length}`);
        void LoggingService_1.log.info('\nðŸ“‹ BY CATEGORY:');
        Object.entries(categorized.byCategory).forEach(([category, issues]) => {
            void LoggingService_1.log.info(`  ${category}: ${issues.length} issues`);
        });
        void LoggingService_1.log.info('\nðŸŽ¯ BY PRIORITY:');
        Object.entries(categorized.byPriority).forEach(([priority, issues]) => {
            LoggingService_1.log.info(`  Priority ${priority}: ${issues.length} issues`);
        });
        LoggingService_1.log.info('============================\n');
    }
}
exports.LintingErrorAnalyzer = LintingErrorAnalyzer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2xpbnRpbmcvTGludGluZ0Vycm9yQW5hbHl6ZXIudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILGlEQUF5QztBQUN6QywyQ0FBNkI7QUFFN0IsOERBQWdEO0FBK0VoRDs7R0FFRztBQUNILE1BQWEsb0JBQW9CO0lBQ3ZCLGFBQWEsQ0FBUztJQUN0QixnQkFBZ0IsQ0FBUztJQUN6QixjQUFjLENBQTJCO0lBRWpELFlBQVksZ0JBQXdCLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDL0MsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDbkMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLG1CQUFtQixDQUFDLENBQUM7UUFFdEUsdUNBQXVDO1FBQ3ZDLElBQUksQ0FBQyxjQUFjLEdBQUc7WUFDcEIsWUFBWSxFQUFFO2dCQUNaLGtCQUFrQjtnQkFDbEIsbUJBQW1CO2dCQUNuQixtQkFBbUI7Z0JBQ25CLDJCQUEyQjtnQkFDM0IsY0FBYztnQkFDZCxZQUFZO2FBQ2I7WUFDRCxRQUFRLEVBQUUsQ0FBQyx3QkFBd0IsRUFBRSxtQkFBbUIsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDO1lBQ2pGLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsV0FBVyxDQUFDO1lBQzNDLE1BQU0sRUFBRSxDQUFDLGFBQWEsRUFBRSxZQUFZLEVBQUUsV0FBVyxDQUFDO1NBQ25ELENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsZ0JBQWdCO1FBQ3BCLEtBQUssb0JBQUcsQ0FBQyxJQUFJLENBQUMscURBQXFELENBQUMsQ0FBQztRQUVyRSxJQUFJO1lBQ0YsK0JBQStCO1lBQy9CLE1BQU0s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QUM3QyxDQUFDO0NBQ0Y7QUE3akJELG9EQTZqQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2xpbnRpbmcvTGludGluZ0Vycm9yQW5hbHl6ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaW50aW5nRXJyb3JBbmFseXplciAtIEF1dG9tYXRlZCBsaW50aW5nIGVycm9yIGFuYWx5c2lzIGFuZCBjYXRlZ29yaXphdGlvbiBzeXN0ZW1cbiAqXG4gKiBUaGlzIGNsYXNzIGltcGxlbWVudHMgY29tcHJlaGVuc2l2ZSBlcnJvciBhbmFseXNpcywgY2F0ZWdvcml6YXRpb24sIGFuZCByZXNvbHV0aW9uXG4gKiBzdHJhdGVneSBnZW5lcmF0aW9uIGZvciBFU0xpbnQgaXNzdWVzIGFjcm9zcyB0aGUgV2hhdFRvRWF0TmV4dCBjb2RlYmFzZS5cbiAqL1xuXG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgbG9nIH0gZnJvbSAnQC9zZXJ2aWNlcy9Mb2dnaW5nU2VydmljZSc7XG5cbi8vIENvcmUgaW50ZXJmYWNlcyBmb3IgZXJyb3IgYW5hbHlzaXNcbmV4cG9ydCBpbnRlcmZhY2UgTGludGluZ0lzc3VlIHtcbiAgaWQ6IHN0cmluZztcbiAgZmlsZTogc3RyaW5nO1xuICBsaW5lOiBudW1iZXI7XG4gIGNvbHVtbjogbnVtYmVyO1xuICBydWxlOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgc2V2ZXJpdHk6ICdlcnJvcicgfCAnd2FybmluZyc7XG4gIGNhdGVnb3J5OiBJc3N1ZUNhdGVnb3J5O1xuICBhdXRvRml4YWJsZTogYm9vbGVhbjtcbiAgZG9tYWluQ29udGV4dD86IERvbWFpbkNvbnRleHQ7XG4gIHJlc29sdXRpb25TdHJhdGVneTogUmVzb2x1dGlvblN0cmF0ZWd5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElzc3VlQ2F0ZWdvcnkge1xuICBwcmltYXJ5OiAnaW1wb3J0JyB8ICd0eXBlc2NyaXB0JyB8ICdyZWFjdCcgfCAnc3R5bGUnIHwgJ2RvbWFpbic7XG4gIHNlY29uZGFyeTogc3RyaW5nO1xuICBwcmlvcml0eTogMSB8IDIgfCAzIHwgNDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEb21haW5Db250ZXh0IHtcbiAgaXNBc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbjogYm9vbGVhbjtcbiAgaXNDYW1wYWlnblN5c3RlbTogYm9vbGVhbjtcbiAgaXNUZXN0RmlsZTogYm9vbGVhbjtcbiAgaXNTY3JpcHRGaWxlOiBib29sZWFuO1xuICByZXF1aXJlc1NwZWNpYWxIYW5kbGluZzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNvbHV0aW9uU3RyYXRlZ3kge1xuICB0eXBlOiAnYXV0by1maXgnIHwgJ21hbnVhbC1yZXZpZXcnIHwgJ3J1bGUtYWRqdXN0bWVudCcgfCAnaWdub3JlJztcbiAgY29uZmlkZW5jZTogbnVtYmVyOyAvLyAwLTFcbiAgcmlza0xldmVsOiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICByZXF1aXJlZFZhbGlkYXRpb246IFZhbGlkYXRpb25SZXF1aXJlbWVudFtdO1xuICBlc3RpbWF0ZWRFZmZvcnQ6IG51bWJlcjsgLy8gbWludXRlc1xuICBkZXBlbmRlbmNpZXM6IHN0cmluZ1tdOyAvLyBPdGhlciBpc3N1ZXMgdGhhdCBtdXN0IGJlIHJlc29sdmVkIGZpcnN0XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlcXVpcmVtZW50IHtcbiAgdHlwZTogJ2J1aWxkJyB8ICd0ZXN0JyB8ICd0eXBlLWNoZWNrJyB8ICdtYW51YWwtcmV2aWV3JztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYXV0b21hdGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhdGVnb3JpemVkRXJyb3JzIHtcbiAgdG90YWw6IG51bWJlcjtcbiAgZXJyb3JzOiBudW1iZXI7XG4gIHdhcm5pbmdzOiBudW1iZXI7XG4gIGJ5Q2F0ZWdvcnk6IFJlY29yZDxzdHJpbmcsIExpbnRpbmdJc3N1ZVtdPjtcbiAgYnlQcmlvcml0eTogUmVjb3JkPG51bWJlciwgTGludGluZ0lzc3VlW10+O1xuICBieUZpbGU6IFJlY29yZDxzdHJpbmcsIExpbnRpbmdJc3N1ZVtdPjtcbiAgYXV0b0ZpeGFibGU6IExpbnRpbmdJc3N1ZVtdO1xuICByZXF1aXJlc01hbnVhbFJldmlldzogTGludGluZ0lzc3VlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzb2x1dGlvblBsYW4ge1xuICBwaGFzZXM6IFJlc29sdXRpb25QaGFzZVtdO1xuICB0b3RhbEVzdGltYXRlZFRpbWU6IG51bWJlcjtcbiAgcmlza0Fzc2Vzc21lbnQ6IFJpc2tBc3Nlc3NtZW50O1xuICBzdWNjZXNzUHJvYmFiaWxpdHk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNvbHV0aW9uUGhhc2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGlzc3VlczogTGludGluZ0lzc3VlW107XG4gIGVzdGltYXRlZFRpbWU6IG51bWJlcjtcbiAgcmlza0xldmVsOiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICBkZXBlbmRlbmNpZXM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJpc2tBc3Nlc3NtZW50IHtcbiAgb3ZlcmFsbDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgZmFjdG9yczogc3RyaW5nW107XG4gIG1pdGlnYXRpb25zOiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBNYWluIExpbnRpbmdFcnJvckFuYWx5emVyIGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW50aW5nRXJyb3JBbmFseXplciB7XG4gIHByaXZhdGUgd29ya3NwYWNlUm9vdDogc3RyaW5nO1xuICBwcml2YXRlIGVzbGludENvbmZpZ1BhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBkb21haW5QYXR0ZXJuczogUmVjb3JkPHN0cmluZywgUmVnRXhwW10+O1xuXG4gIGNvbnN0cnVjdG9yKHdvcmtzcGFjZVJvb3Q6IHN0cmluZyA9IHByb2Nlc3MuY3dkKCkpIHtcbiAgICB0aGlzLndvcmtzcGFjZVJvb3QgPSB3b3Jrc3BhY2VSb290O1xuICAgIHRoaXMuZXNsaW50Q29uZmlnUGF0aCA9IHBhdGguam9pbih3b3Jrc3BhY2VSb290LCAnZXNsaW50LmNvbmZpZy5janMnKTtcblxuICAgIC8vIERlZmluZSBkb21haW4tc3BlY2lmaWMgZmlsZSBwYXR0ZXJuc1xuICAgIHRoaXMuZG9tYWluUGF0dGVybnMgPSB7XG4gICAgICBhc3Ryb2xvZ2ljYWw6IFtcbiAgICAgICAgL1xcL2NhbGN1bGF0aW9uc1xcLy8sXG4gICAgICAgIC9cXC9kYXRhXFwvcGxhbmV0c1xcLy8sXG4gICAgICAgIC9yZWxpYWJsZUFzdHJvbm9teS8sXG4gICAgICAgIC9wbGFuZXRhcnlDb25zaXN0ZW5jeUNoZWNrLyxcbiAgICAgICAgL0FzdHJvbG9naWNhbC8sXG4gICAgICAgIC9BbGNoZW1pY2FsLyxcbiAgICAgIF0sXG4gICAgICBjYW1wYWlnbjogWy9cXC9zZXJ2aWNlc1xcL2NhbXBhaWduXFwvLywgL1xcL3R5cGVzXFwvY2FtcGFpZ24vLCAvQ2FtcGFpZ24vLCAvUHJvZ3Jlc3MvXSxcbiAgICAgIHRlc3Q6IFsvXFwudGVzdFxcLi8sIC9cXC5zcGVjXFwuLywgL19fdGVzdHNfXy9dLFxuICAgICAgc2NyaXB0OiBbL1xcL3NjcmlwdHNcXC8vLCAvXFwuY29uZmlnXFwuLywgL1xcLnNldHVwXFwuL10sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGFsbCBsaW50aW5nIGlzc3VlcyBpbiB0aGUgY29kZWJhc2VcbiAgICovXG4gIGFzeW5jIGFuYWx5emVBbGxJc3N1ZXMoKTogUHJvbWlzZTxDYXRlZ29yaXplZEVycm9ycz4ge1xuICAgIHZvaWQgbG9nLmluZm8oJ/CflI0gU3RhcnRpbmcgY29tcHJlaGVuc2l2ZSBsaW50aW5nIGVycm9yIGFuYWx5c2lzLi4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUnVuIEVTTGludCB0byBnZXQgYWxsIGlzc3Vlc1xuICAgICAgY29uc3QgZXNsaW50T3V0cHV0ID0gYXdhaXQgdGhpcy5ydW5FU0xpbnQoKTtcbiAgICAgIGNvbnN0IHJhd0lzc3VlcyA9IHRoaXMucGFyc2VFU0xpbnRPdXRwdXQoZXNsaW50T3V0cHV0KTtcblxuICAgICAgdm9pZCBsb2cuaW5mbyhg8J+TiiBGb3VuZCAke3Jhd0lzc3Vlcy5sZW5ndGh9IHRvdGFsIGxpbnRpbmcgaXNzdWVzYCk7XG5cbiAgICAgIC8vIENhdGVnb3JpemUgYW5kIGFuYWx5emUgZWFjaCBpc3N1ZVxuICAgICAgY29uc3QgYW5hbHl6ZWRJc3N1ZXMgPSByYXdJc3N1ZXMubWFwKGlzc3VlID0+IHRoaXMuYW5hbHl6ZUlzc3VlKGlzc3VlKSk7XG5cbiAgICAgIC8vIENhdGVnb3JpemUgaXNzdWVzXG4gICAgICBjb25zdCBjYXRlZ29yaXplZCA9IHRoaXMuY2F0ZWdvcml6ZUlzc3VlcyhhbmFseXplZElzc3Vlcyk7XG5cbiAgICAgIHZvaWQgbG9nLmluZm8oJ+KchSBMaW50aW5nIGVycm9yIGFuYWx5c2lzIGNvbXBsZXRlJyk7XG4gICAgICB2b2lkIHRoaXMubG9nQW5hbHlzaXNTdW1tYXJ5KGNhdGVnb3JpemVkKTtcblxuICAgICAgcmV0dXJuIGNhdGVnb3JpemVkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZHVyaW5nIGxpbnRpbmcgYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJlc29sdXRpb24gc3RyYXRlZ2llcyBmb3IgY2F0ZWdvcml6ZWQgZXJyb3JzXG4gICAqL1xuICBnZW5lcmF0ZVJlc29sdXRpb25QbGFuKGNhdGVnb3JpemVkRXJyb3JzOiBDYXRlZ29yaXplZEVycm9ycyk6IFJlc29sdXRpb25QbGFuIHtcbiAgICB2b2lkIGxvZy5pbmZvKCfwn46vIEdlbmVyYXRpbmcgcmVzb2x1dGlvbiBwbGFuLi4uJyk7XG5cbiAgICBjb25zdCBwaGFzZXM6IFJlc29sdXRpb25QaGFzZVtdID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG5cbiAgICAvLyBQaGFzZSAxOiBBdXRvLWZpeGFibGUgaXNzdWVzIChsb3cgcmlzaylcbiAgICBpZiAoY2F0ZWdvcml6ZWRFcnJvcnMuYXV0b0ZpeGFibGUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYXV0b0ZpeFBoYXNlOiBSZXNvbHV0aW9uUGhhc2UgPSB7XG4gICAgICAgIGlkOiAnYXV0by1maXgnLFxuICAgICAgICBuYW1lOiAnQXV0b21hdGVkIEZpeGVzJyxcbiAgICAgICAgaXNzdWVzOiBjYXRlZ29yaXplZEVycm9ycy5hdXRvRml4YWJsZSxcbiAgICAgICAgZXN0aW1hdGVkVGltZTogTWF0aC5jZWlsKGNhdGVnb3JpemVkRXJyb3JzLmF1dG9GaXhhYmxlLmxlbmd0aCAqIDAuMSksIC8vIDAuMSBtaW4gcGVyIGlzc3VlXG4gICAgICAgIHJpc2tMZXZlbDogJ2xvdycsXG4gICAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICB9O1xuICAgICAgdm9pZCBwaGFzZXMucHVzaChhdXRvRml4UGhhc2UpO1xuICAgICAgdG90YWxUaW1lICs9IGF1dG9GaXhQaGFzZS5lc3RpbWF0ZWRUaW1lO1xuICAgIH1cblxuICAgIC8vIFBoYXNlIDI6IEltcG9ydCBhbmQgc3R5bGUgaXNzdWVzIChtZWRpdW0gcmlzaylcbiAgICBjb25zdCBpbXBvcnRTdHlsZUlzc3VlcyA9IFtcbiAgICAgIC4uLihjYXRlZ29yaXplZEVycm9ycy5ieUNhdGVnb3J5WydpbXBvcnQnXSB8fCBbXSksXG4gICAgICAuLi4oY2F0ZWdvcml6ZWRFcnJvcnMuYnlDYXRlZ29yeVsnc3R5bGUnXSB8fCBbXSksXG4gICAgXS5maWx0ZXIoaXNzdWUgPT4gaXNzdWUucmVzb2x1dGlvblN0cmF0ZWd5LnR5cGUgIT09ICdhdXRvLWZpeCcpO1xuXG4gICAgaWYgKGltcG9ydFN0eWxlSXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGltcG9ydFN0eWxlUGhhc2U6IFJlc29sdXRpb25QaGFzZSA9IHtcbiAgICAgICAgaWQ6ICdpbXBvcnQtc3R5bGUnLFxuICAgICAgICBuYW1lOiAnSW1wb3J0IGFuZCBTdHlsZSBGaXhlcycsXG4gICAgICAgIGlzc3VlczogaW1wb3J0U3R5bGVJc3N1ZXMsXG4gICAgICAgIGVzdGltYXRlZFRpbWU6IE1hdGguY2VpbChpbXBvcnRTdHlsZUlzc3Vlcy5sZW5ndGggKiAwLjUpLCAvLyAwLjUgbWluIHBlciBpc3N1ZVxuICAgICAgICByaXNrTGV2ZWw6ICdtZWRpdW0nLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYXV0by1maXgnXSxcbiAgICAgIH07XG4gICAgICB2b2lkIHBoYXNlcy5wdXNoKGltcG9ydFN0eWxlUGhhc2UpO1xuICAgICAgdG90YWxUaW1lICs9IGltcG9ydFN0eWxlUGhhc2UuZXN0aW1hdGVkVGltZTtcbiAgICB9XG5cbiAgICAvLyBQaGFzZSAzOiBUeXBlU2NyaXB0IGlzc3VlcyAoaGlnaCByaXNrKVxuICAgIGNvbnN0IHR5cGVzY3JpcHRJc3N1ZXMgPSBjYXRlZ29yaXplZEVycm9ycy5ieUNhdGVnb3J5Wyd0eXBlc2NyaXB0J10gfHwgW107XG4gICAgaWYgKHR5cGVzY3JpcHRJc3N1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdHlwZXNjcmlwdFBoYXNlOiBSZXNvbHV0aW9uUGhhc2UgPSB7XG4gICAgICAgIGlkOiAndHlwZXNjcmlwdCcsXG4gICAgICAgIG5hbWU6ICdUeXBlU2NyaXB0IEZpeGVzJyxcbiAgICAgICAgaXNzdWVzOiB0eXBlc2NyaXB0SXNzdWVzLFxuICAgICAgICBlc3RpbWF0ZWRUaW1lOiBNYXRoLmNlaWwodHlwZXNjcmlwdElzc3Vlcy5sZW5ndGggKiAyKSwgLy8gMiBtaW4gcGVyIGlzc3VlXG4gICAgICAgIHJpc2tMZXZlbDogJ2hpZ2gnLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFsnYXV0by1maXgnLCAnaW1wb3J0LXN0eWxlJ10sXG4gICAgICB9O1xuICAgICAgdm9pZCBwaGFzZXMucHVzaCh0eXBlc2NyaXB0UGhhc2UpO1xuICAgICAgdG90YWxUaW1lICs9IHR5cGVzY3JpcHRQaGFzZS5lc3RpbWF0ZWRUaW1lO1xuICAgIH1cblxuICAgIC8vIFBoYXNlIDQ6IFJlYWN0IGlzc3VlcyAobWVkaXVtIHJpc2spXG4gICAgY29uc3QgcmVhY3RJc3N1ZXMgPSBjYXRlZ29yaXplZEVycm9ycy5ieUNhdGVnb3J5WydyZWFjdCddIHx8IFtdO1xuICAgIGlmIChyZWFjdElzc3Vlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZWFjdFBoYXNlOiBSZXNvbHV0aW9uUGhhc2UgPSB7XG4gICAgICAgIGlkOiAncmVhY3QnLFxuICAgICAgICBuYW1lOiAnUmVhY3QgRml4ZXMnLFxuICAgICAgICBpc3N1ZXM6IHJlYWN0SXNzdWVzLFxuICAgICAgICBlc3RpbWF0ZWRUaW1lOiBNYXRoLmNlaWwocmVhY3RJc3N1ZXMubGVuZ3RoICogMSksIC8vIDEgbWluIHBlciBpc3N1ZVxuICAgICAgICByaXNrTGV2ZWw6ICdtZWRpdW0nLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFsndHlwZXNjcmlwdCddLFxuICAgICAgfTtcbiAgICAgIHZvaWQgcGhhc2VzLnB1c2gocmVhY3RQaGFzZSk7XG4gICAgICB0b3RhbFRpbWUgKz0gcmVhY3RQaGFzZS5lc3RpbWF0ZWRUaW1lO1xuICAgIH1cblxuICAgIC8vIFBoYXNlIDU6IERvbWFpbi1zcGVjaWZpYyBpc3N1ZXMgKHZhcmllcyBieSBjb250ZXh0KVxuICAgIGNvbnN0IGRvbWFpbklzc3VlcyA9IGNhdGVnb3JpemVkRXJyb3JzLmJ5Q2F0ZWdvcnlbJ2RvbWFpbiddIHx8IFtdO1xuICAgIGlmIChkb21haW5Jc3N1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZG9tYWluUGhhc2U6IFJlc29sdXRpb25QaGFzZSA9IHtcbiAgICAgICAgaWQ6ICdkb21haW4nLFxuICAgICAgICBuYW1lOiAnRG9tYWluLVNwZWNpZmljIEZpeGVzJyxcbiAgICAgICAgaXNzdWVzOiBkb21haW5Jc3N1ZXMsXG4gICAgICAgIGVzdGltYXRlZFRpbWU6IE1hdGguY2VpbChkb21haW5Jc3N1ZXMubGVuZ3RoICogMyksIC8vIDMgbWluIHBlciBpc3N1ZSAocmVxdWlyZXMgZG9tYWluIGtub3dsZWRnZSlcbiAgICAgICAgcmlza0xldmVsOiAnaGlnaCcsXG4gICAgICAgIGRlcGVuZGVuY2llczogWyd0eXBlc2NyaXB0JywgJ3JlYWN0J10sXG4gICAgICB9O1xuICAgICAgdm9pZCBwaGFzZXMucHVzaChkb21haW5QaGFzZSk7XG4gICAgICB0b3RhbFRpbWUgKz0gZG9tYWluUGhhc2UuZXN0aW1hdGVkVGltZTtcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgcmlzayBhc3Nlc3NtZW50XG4gICAgY29uc3Qgcmlza0Fzc2Vzc21lbnQgPSB0aGlzLmFzc2Vzc1Jlc29sdXRpb25SaXNrKGNhdGVnb3JpemVkRXJyb3JzLCBwaGFzZXMpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHN1Y2Nlc3MgcHJvYmFiaWxpdHkgYmFzZWQgb24gaXNzdWUgdHlwZXMgYW5kIGNvbXBsZXhpdHlcbiAgICBjb25zdCBzdWNjZXNzUHJvYmFiaWxpdHkgPSB0aGlzLmNhbGN1bGF0ZVN1Y2Nlc3NQcm9iYWJpbGl0eShjYXRlZ29yaXplZEVycm9ycyk7XG5cbiAgICBjb25zdCBwbGFuOiBSZXNvbHV0aW9uUGxhbiA9IHtcbiAgICAgIHBoYXNlcyxcbiAgICAgIHRvdGFsRXN0aW1hdGVkVGltZTogdG90YWxUaW1lLFxuICAgICAgcmlza0Fzc2Vzc21lbnQsXG4gICAgICBzdWNjZXNzUHJvYmFiaWxpdHksXG4gICAgfTtcblxuICAgIHZvaWQgbG9nLmluZm8oXG4gICAgICBg8J+TiyBSZXNvbHV0aW9uIHBsYW4gZ2VuZXJhdGVkOiAke3BoYXNlcy5sZW5ndGh9IHBoYXNlcywgJHt0b3RhbFRpbWV9IG1pbnV0ZXMgZXN0aW1hdGVkYCxcbiAgICApO1xuXG4gICAgcmV0dXJuIHBsYW47XG4gIH1cblxuICAvKipcbiAgICogUnVuIEVTTGludCBhbmQgY2FwdHVyZSBvdXRwdXRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcnVuRVNMaW50KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBgbnB4IGVzbGludCAtLWNvbmZpZyAke3RoaXMuZXNsaW50Q29uZmlnUGF0aH0gc3JjIC0tZm9ybWF0IGpzb24gLS1tYXgtd2FybmluZ3M9MTAwMDBgO1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoY29tbWFuZCwge1xuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICBjd2Q6IHRoaXMud29ya3NwYWNlUm9vdCxcbiAgICAgICAgbWF4QnVmZmVyOiAxMCAqIDEwMjQgKiAxMDI0LCAvLyAxME1CIGJ1ZmZlclxuICAgICAgfSk7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAvLyBFU0xpbnQgcmV0dXJucyBub24temVybyBleGl0IGNvZGUgd2hlbiBpc3N1ZXMgYXJlIGZvdW5kXG4gICAgICBjb25zdCBlcnIgPSBlcnJvciBhcyB7IHN0ZG91dD86IHN0cmluZyB9O1xuICAgICAgaWYgKGVyci5zdGRvdXQpIHtcbiAgICAgICAgcmV0dXJuIGVyci5zdGRvdXQ7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgRVNMaW50IEpTT04gb3V0cHV0IGludG8gcmF3IGlzc3Vlc1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUVTTGludE91dHB1dChvdXRwdXQ6IHN0cmluZyk6IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBKU09OLnBhcnNlKG91dHB1dCkgYXMgQXJyYXk8e1xuICAgICAgICBmaWxlUGF0aDogc3RyaW5nO1xuICAgICAgICBtZXNzYWdlczogQXJyYXk8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+O1xuICAgICAgfT47XG4gICAgICBjb25zdCBpc3N1ZXM6IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PiA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGZpbGVSZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgZmlsZVJlc3VsdC5tZXNzYWdlcykge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgICBmaWxlUGF0aDogZmlsZVJlc3VsdC5maWxlUGF0aCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXNzdWVzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgRVNMaW50IG91dHB1dDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgaW5kaXZpZHVhbCBpc3N1ZSBhbmQgZGV0ZXJtaW5lIHJlc29sdXRpb24gc3RyYXRlZ3lcbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZUlzc3VlKHJhd0lzc3VlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IExpbnRpbmdJc3N1ZSB7XG4gICAgY29uc3QgZmlsZSA9IFN0cmluZyhyYXdJc3N1ZS5maWxlUGF0aCB8fCAnJylcbiAgICAgIC5yZXBsYWNlKHRoaXMud29ya3NwYWNlUm9vdCwgJycpXG4gICAgICAucmVwbGFjZSgvXlxcLy8sICcnKTtcbiAgICBjb25zdCBkb21haW5Db250ZXh0ID0gdGhpcy5kZXRlY3REb21haW5Db250ZXh0KGZpbGUpO1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaXplSXNzdWUocmF3SXNzdWUsIGRvbWFpbkNvbnRleHQpO1xuICAgIGNvbnN0IHJlc29sdXRpb25TdHJhdGVneSA9IHRoaXMuZGV0ZXJtaW5lUmVzb2x1dGlvblN0cmF0ZWd5KHJhd0lzc3VlLCBjYXRlZ29yeSwgZG9tYWluQ29udGV4dCk7XG5cbiAgICBjb25zdCBpc3N1ZTogTGludGluZ0lzc3VlID0ge1xuICAgICAgaWQ6IGAke2ZpbGV9OiR7U3RyaW5nKHJhd0lzc3VlLmxpbmUpfToke1N0cmluZyhyYXdJc3N1ZS5jb2x1bW4pfToke1N0cmluZyhyYXdJc3N1ZS5ydWxlSWQpfWAsXG4gICAgICBmaWxlLFxuICAgICAgbGluZTogTnVtYmVyKHJhd0lzc3VlLmxpbmUgfHwgMCksXG4gICAgICBjb2x1bW46IE51bWJlcihyYXdJc3N1ZS5jb2x1bW4gfHwgMCksXG4gICAgICBydWxlOiBTdHJpbmcocmF3SXNzdWUucnVsZUlkIHx8ICd1bmtub3duJyksXG4gICAgICBtZXNzYWdlOiBTdHJpbmcocmF3SXNzdWUubWVzc2FnZSB8fCAnJyksXG4gICAgICBzZXZlcml0eTogTnVtYmVyKHJhd0lzc3VlLnNldmVyaXR5KSA9PT0gMiA/ICdlcnJvcicgOiAnd2FybmluZycsXG4gICAgICBjYXRlZ29yeSxcbiAgICAgIGF1dG9GaXhhYmxlOiBCb29sZWFuKChyYXdJc3N1ZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikuZml4KSxcbiAgICAgIGRvbWFpbkNvbnRleHQsXG4gICAgICByZXNvbHV0aW9uU3RyYXRlZ3ksXG4gICAgfTtcblxuICAgIHJldHVybiBpc3N1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgZG9tYWluIGNvbnRleHQgZm9yIGEgZmlsZVxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3REb21haW5Db250ZXh0KGZpbGVQYXRoOiBzdHJpbmcpOiBEb21haW5Db250ZXh0IHtcbiAgICBjb25zdCBjb250ZXh0OiBEb21haW5Db250ZXh0ID0ge1xuICAgICAgaXNBc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbjogZmFsc2UsXG4gICAgICBpc0NhbXBhaWduU3lzdGVtOiBmYWxzZSxcbiAgICAgIGlzVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgaXNTY3JpcHRGaWxlOiBmYWxzZSxcbiAgICAgIHJlcXVpcmVzU3BlY2lhbEhhbmRsaW5nOiBmYWxzZSxcbiAgICB9O1xuXG4gICAgLy8gQ2hlY2sgYXN0cm9sb2dpY2FsIHBhdHRlcm5zXG4gICAgY29udGV4dC5pc0FzdHJvbG9naWNhbENhbGN1bGF0aW9uID0gdGhpcy5kb21haW5QYXR0ZXJucy5hc3Ryb2xvZ2ljYWwuc29tZShwYXR0ZXJuID0+XG4gICAgICBwYXR0ZXJuLnRlc3QoZmlsZVBhdGgpLFxuICAgICk7XG5cbiAgICAvLyBDaGVjayBjYW1wYWlnbiBzeXN0ZW0gcGF0dGVybnNcbiAgICBjb250ZXh0LmlzQ2FtcGFpZ25TeXN0ZW0gPSB0aGlzLmRvbWFpblBhdHRlcm5zLmNhbXBhaWduLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoZmlsZVBhdGgpKTtcblxuICAgIC8vIENoZWNrIHRlc3QgZmlsZSBwYXR0ZXJuc1xuICAgIGNvbnRleHQuaXNUZXN0RmlsZSA9IHRoaXMuZG9tYWluUGF0dGVybnMudGVzdC5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGZpbGVQYXRoKSk7XG5cbiAgICAvLyBDaGVjayBzY3JpcHQgZmlsZSBwYXR0ZXJuc1xuICAgIGNvbnRleHQuaXNTY3JpcHRGaWxlID0gdGhpcy5kb21haW5QYXR0ZXJucy5zY3JpcHQuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChmaWxlUGF0aCkpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHNwZWNpYWwgaGFuZGxpbmcgaXMgcmVxdWlyZWRcbiAgICBjb250ZXh0LnJlcXVpcmVzU3BlY2lhbEhhbmRsaW5nID1cbiAgICAgIGNvbnRleHQuaXNBc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbiB8fFxuICAgICAgY29udGV4dC5pc0NhbXBhaWduU3lzdGVtIHx8XG4gICAgICBjb250ZXh0LmlzVGVzdEZpbGUgfHxcbiAgICAgIGNvbnRleHQuaXNTY3JpcHRGaWxlO1xuXG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2F0ZWdvcml6ZSBpbmRpdmlkdWFsIGlzc3VlXG4gICAqL1xuICBwcml2YXRlIGNhdGVnb3JpemVJc3N1ZShcbiAgICByYXdJc3N1ZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgZG9tYWluQ29udGV4dDogRG9tYWluQ29udGV4dCxcbiAgKTogSXNzdWVDYXRlZ29yeSB7XG4gICAgY29uc3QgcnVsZSA9IFN0cmluZyhyYXdJc3N1ZS5ydWxlSWQgfHwgJycpO1xuXG4gICAgLy8gSW1wb3J0LXJlbGF0ZWQgaXNzdWVzXG4gICAgaWYgKHJ1bGUuc3RhcnRzV2l0aCgnaW1wb3J0LycpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmltYXJ5OiAnaW1wb3J0JyxcbiAgICAgICAgc2Vjb25kYXJ5OiBydWxlLnJlcGxhY2UoJ2ltcG9ydC8nLCAnJyksXG4gICAgICAgIHByaW9yaXR5OiAyLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBUeXBlU2NyaXB0LXJlbGF0ZWQgaXNzdWVzXG4gICAgaWYgKHJ1bGUuc3RhcnRzV2l0aCgnQHR5cGVzY3JpcHQtZXNsaW50LycpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmltYXJ5OiAndHlwZXNjcmlwdCcsXG4gICAgICAgIHNlY29uZGFyeTogcnVsZS5yZXBsYWNlKCdAdHlwZXNjcmlwdC1lc2xpbnQvJywgJycpLFxuICAgICAgICBwcmlvcml0eTogcnVsZS5pbmNsdWRlcygnbm8tZXhwbGljaXQtYW55JykgPyAzIDogMSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gUmVhY3QtcmVsYXRlZCBpc3N1ZXNcbiAgICBpZiAocnVsZS5zdGFydHNXaXRoKCdyZWFjdCcpIHx8IHJ1bGUuc3RhcnRzV2l0aCgncmVhY3QtaG9va3MnKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJpbWFyeTogJ3JlYWN0JyxcbiAgICAgICAgc2Vjb25kYXJ5OiBydWxlLnJlcGxhY2UoL15yZWFjdCgtaG9va3MpP1xcLy8sICcnKSxcbiAgICAgICAgcHJpb3JpdHk6IHJ1bGUuaW5jbHVkZXMoJ2V4aGF1c3RpdmUtZGVwcycpID8gMiA6IDEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERvbWFpbi1zcGVjaWZpYyBpc3N1ZXNcbiAgICBpZiAoZG9tYWluQ29udGV4dC5yZXF1aXJlc1NwZWNpYWxIYW5kbGluZykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJpbWFyeTogJ2RvbWFpbicsXG4gICAgICAgIHNlY29uZGFyeTogZG9tYWluQ29udGV4dC5pc0FzdHJvbG9naWNhbENhbGN1bGF0aW9uXG4gICAgICAgICAgPyAnYXN0cm9sb2dpY2FsJ1xuICAgICAgICAgIDogZG9tYWluQ29udGV4dC5pc0NhbXBhaWduU3lzdGVtXG4gICAgICAgICAgICA/ICdjYW1wYWlnbidcbiAgICAgICAgICAgIDogZG9tYWluQ29udGV4dC5pc1Rlc3RGaWxlXG4gICAgICAgICAgICAgID8gJ3Rlc3QnXG4gICAgICAgICAgICAgIDogJ3NjcmlwdCcsXG4gICAgICAgIHByaW9yaXR5OiA0LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBTdHlsZSBhbmQgZm9ybWF0dGluZyBpc3N1ZXNcbiAgICByZXR1cm4ge1xuICAgICAgcHJpbWFyeTogJ3N0eWxlJyxcbiAgICAgIHNlY29uZGFyeTogcnVsZSxcbiAgICAgIHByaW9yaXR5OiA0LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHJlc29sdXRpb24gc3RyYXRlZ3kgZm9yIGFuIGlzc3VlXG4gICAqL1xuICBwcml2YXRlIGRldGVybWluZVJlc29sdXRpb25TdHJhdGVneShcbiAgICByYXdJc3N1ZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgY2F0ZWdvcnk6IElzc3VlQ2F0ZWdvcnksXG4gICAgZG9tYWluQ29udGV4dDogRG9tYWluQ29udGV4dCxcbiAgKTogUmVzb2x1dGlvblN0cmF0ZWd5IHtcbiAgICBjb25zdCBydWxlID0gU3RyaW5nKHJhd0lzc3VlLnJ1bGVJZCB8fCAnJyk7XG4gICAgY29uc3QgaGFzQXV0b0ZpeCA9IEJvb2xlYW4oKHJhd0lzc3VlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5maXgpO1xuXG4gICAgLy8gQXV0by1maXhhYmxlIGlzc3VlcyB3aXRoIGxvdyByaXNrXG4gICAgaWYgKGhhc0F1dG9GaXggJiYgdGhpcy5pc0xvd1Jpc2tBdXRvRml4KHJ1bGUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXV0by1maXgnLFxuICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgIHJpc2tMZXZlbDogJ2xvdycsXG4gICAgICAgIHJlcXVpcmVkVmFsaWRhdGlvbjogW1xuICAgICAgICAgIHsgdHlwZTogJ2J1aWxkJywgZGVzY3JpcHRpb246ICdWZXJpZnkgYnVpbGQgc3RpbGwgcGFzc2VzJywgYXV0b21hdGVkOiB0cnVlIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGVzdGltYXRlZEVmZm9ydDogMC4xLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFtdLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJbXBvcnQgaXNzdWVzIC0gdXN1YWxseSBzYWZlIHRvIGF1dG8tZml4XG4gICAgaWYgKGNhdGVnb3J5LnByaW1hcnkgPT09ICdpbXBvcnQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBoYXNBdXRvRml4ID8gJ2F1dG8tZml4JyA6ICdtYW51YWwtcmV2aWV3JyxcbiAgICAgICAgY29uZmlkZW5jZTogaGFzQXV0b0ZpeCA/IDAuOCA6IDAuNixcbiAgICAgICAgcmlza0xldmVsOiAnbWVkaXVtJyxcbiAgICAgICAgcmVxdWlyZWRWYWxpZGF0aW9uOiBbXG4gICAgICAgICAgeyB0eXBlOiAnYnVpbGQnLCBkZXNjcmlwdGlvbjogJ1ZlcmlmeSBpbXBvcnRzIHJlc29sdmUgY29ycmVjdGx5JywgYXV0b21hdGVkOiB0cnVlIH0sXG4gICAgICAgICAgeyB0eXBlOiAndHlwZS1jaGVjaycsIGRlc2NyaXB0aW9uOiAnVmVyaWZ5IFR5cGVTY3JpcHQgY29tcGlsYXRpb24nLCBhdXRvbWF0ZWQ6IHRydWUgfSxcbiAgICAgICAgXSxcbiAgICAgICAgZXN0aW1hdGVkRWZmb3J0OiBoYXNBdXRvRml4ID8gMC4yIDogMS4wLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFtdLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBUeXBlU2NyaXB0IGlzc3VlcyAtIHJlcXVpcmUgY2FyZWZ1bCBoYW5kbGluZ1xuICAgIGlmIChjYXRlZ29yeS5wcmltYXJ5ID09PSAndHlwZXNjcmlwdCcpIHtcbiAgICAgIGNvbnN0IGlzRXhwbGljaXRBbnkgPSBydWxlLmluY2x1ZGVzKCduby1leHBsaWNpdC1hbnknKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGlzRXhwbGljaXRBbnkgPyAnbWFudWFsLXJldmlldycgOiAnYXV0by1maXgnLFxuICAgICAgICBjb25maWRlbmNlOiBpc0V4cGxpY2l0QW55ID8gMC40IDogMC43LFxuICAgICAgICByaXNrTGV2ZWw6IGlzRXhwbGljaXRBbnkgPyAnaGlnaCcgOiAnbWVkaXVtJyxcbiAgICAgICAgcmVxdWlyZWRWYWxpZGF0aW9uOiBbXG4gICAgICAgICAgeyB0eXBlOiAndHlwZS1jaGVjaycsIGRlc2NyaXB0aW9uOiAnVmVyaWZ5IFR5cGVTY3JpcHQgY29tcGlsYXRpb24nLCBhdXRvbWF0ZWQ6IHRydWUgfSxcbiAgICAgICAgICB7IHR5cGU6ICd0ZXN0JywgZGVzY3JpcHRpb246ICdSdW4gcmVsZXZhbnQgdGVzdHMnLCBhdXRvbWF0ZWQ6IHRydWUgfSxcbiAgICAgICAgXSxcbiAgICAgICAgZXN0aW1hdGVkRWZmb3J0OiBpc0V4cGxpY2l0QW55ID8gNS4wIDogMS4wLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFtdLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBSZWFjdCBpc3N1ZXMgLSBtb2RlcmF0ZSByaXNrXG4gICAgaWYgKGNhdGVnb3J5LnByaW1hcnkgPT09ICdyZWFjdCcpIHtcbiAgICAgIGNvbnN0IGlzRXhoYXVzdGl2ZURlcHMgPSBydWxlLmluY2x1ZGVzKCdleGhhdXN0aXZlLWRlcHMnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGlzRXhoYXVzdGl2ZURlcHMgPyAnbWFudWFsLXJldmlldycgOiAnYXV0by1maXgnLFxuICAgICAgICBjb25maWRlbmNlOiBpc0V4aGF1c3RpdmVEZXBzID8gMC41IDogMC44LFxuICAgICAgICByaXNrTGV2ZWw6IGlzRXhoYXVzdGl2ZURlcHMgPyAnaGlnaCcgOiAnbWVkaXVtJyxcbiAgICAgICAgcmVxdWlyZWRWYWxpZGF0aW9uOiBbXG4gICAgICAgICAgeyB0eXBlOiAnYnVpbGQnLCBkZXNjcmlwdGlvbjogJ1ZlcmlmeSBSZWFjdCBjb21wb25lbnRzIHJlbmRlcicsIGF1dG9tYXRlZDogdHJ1ZSB9LFxuICAgICAgICAgIHsgdHlwZTogJ3Rlc3QnLCBkZXNjcmlwdGlvbjogJ1J1biBjb21wb25lbnQgdGVzdHMnLCBhdXRvbWF0ZWQ6IHRydWUgfSxcbiAgICAgICAgXSxcbiAgICAgICAgZXN0aW1hdGVkRWZmb3J0OiBpc0V4aGF1c3RpdmVEZXBzID8gMy4wIDogMC41LFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFtdLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBEb21haW4tc3BlY2lmaWMgaXNzdWVzIC0gcmVxdWlyZSBzcGVjaWFsIGhhbmRsaW5nXG4gICAgaWYgKGRvbWFpbkNvbnRleHQucmVxdWlyZXNTcGVjaWFsSGFuZGxpbmcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdtYW51YWwtcmV2aWV3JyxcbiAgICAgICAgY29uZmlkZW5jZTogMC4zLFxuICAgICAgICByaXNrTGV2ZWw6ICdoaWdoJyxcbiAgICAgICAgcmVxdWlyZWRWYWxpZGF0aW9uOiBbXG4gICAgICAgICAgeyB0eXBlOiAnbWFudWFsLXJldmlldycsIGRlc2NyaXB0aW9uOiAnRG9tYWluIGV4cGVydCByZXZpZXcgcmVxdWlyZWQnLCBhdXRvbWF0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgeyB0eXBlOiAndGVzdCcsIGRlc2NyaXB0aW9uOiAnUnVuIGRvbWFpbi1zcGVjaWZpYyB0ZXN0cycsIGF1dG9tYXRlZDogdHJ1ZSB9LFxuICAgICAgICBdLFxuICAgICAgICBlc3RpbWF0ZWRFZmZvcnQ6IDEwLjAsXG4gICAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERlZmF1bHQgc3RyYXRlZ3kgZm9yIG90aGVyIGlzc3Vlc1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBoYXNBdXRvRml4ID8gJ2F1dG8tZml4JyA6ICdydWxlLWFkanVzdG1lbnQnLFxuICAgICAgY29uZmlkZW5jZTogMC42LFxuICAgICAgcmlza0xldmVsOiAnbG93JyxcbiAgICAgIHJlcXVpcmVkVmFsaWRhdGlvbjogW3sgdHlwZTogJ2J1aWxkJywgZGVzY3JpcHRpb246ICdWZXJpZnkgYnVpbGQgcGFzc2VzJywgYXV0b21hdGVkOiB0cnVlIH1dLFxuICAgICAgZXN0aW1hdGVkRWZmb3J0OiBoYXNBdXRvRml4ID8gMC41IDogMi4wLFxuICAgICAgZGVwZW5kZW5jaWVzOiBbXSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcnVsZSBpcyBzYWZlIGZvciBhdXRvLWZpeGluZ1xuICAgKi9cbiAgcHJpdmF0ZSBpc0xvd1Jpc2tBdXRvRml4KHJ1bGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGxvd1Jpc2tSdWxlcyA9IFtcbiAgICAgICdpbXBvcnQvb3JkZXInLFxuICAgICAgJ2ltcG9ydC9uZXdsaW5lLWFmdGVyLWltcG9ydCcsXG4gICAgICAnc2VtaScsXG4gICAgICAncXVvdGVzJyxcbiAgICAgICdjb21tYS1kYW5nbGUnLFxuICAgICAgJ3RyYWlsaW5nLWNvbW1hJyxcbiAgICAgICdpbmRlbnQnLFxuICAgICAgJ25vLXRyYWlsaW5nLXNwYWNlcycsXG4gICAgICAnZW9sLWxhc3QnLFxuICAgIF07XG5cbiAgICByZXR1cm4gbG93Umlza1J1bGVzLnNvbWUobG93Umlza1J1bGUgPT4gcnVsZS5pbmNsdWRlcyhsb3dSaXNrUnVsZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhdGVnb3JpemUgYWxsIGFuYWx5emVkIGlzc3Vlc1xuICAgKi9cbiAgcHJpdmF0ZSBjYXRlZ29yaXplSXNzdWVzKGlzc3VlczogTGludGluZ0lzc3VlW10pOiBDYXRlZ29yaXplZEVycm9ycyB7XG4gICAgY29uc3QgY2F0ZWdvcml6ZWQ6IENhdGVnb3JpemVkRXJyb3JzID0ge1xuICAgICAgdG90YWw6IGlzc3Vlcy5sZW5ndGgsXG4gICAgICBlcnJvcnM6IGlzc3Vlcy5maWx0ZXIoaSA9PiBpLnNldmVyaXR5ID09PSAnZXJyb3InKS5sZW5ndGgsXG4gICAgICB3YXJuaW5nczogaXNzdWVzLmZpbHRlcihpID0+IGkuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJykubGVuZ3RoLFxuICAgICAgYnlDYXRlZ29yeToge30sXG4gICAgICBieVByaW9yaXR5OiB7fSxcbiAgICAgIGJ5RmlsZToge30sXG4gICAgICBhdXRvRml4YWJsZTogaXNzdWVzLmZpbHRlcihpID0+IGkuYXV0b0ZpeGFibGUpLFxuICAgICAgcmVxdWlyZXNNYW51YWxSZXZpZXc6IGlzc3Vlcy5maWx0ZXIoaSA9PiBpLnJlc29sdXRpb25TdHJhdGVneS50eXBlID09PSAnbWFudWFsLXJldmlldycpLFxuICAgIH07XG5cbiAgICAvLyBHcm91cCBieSBjYXRlZ29yeVxuICAgIGZvciAoY29uc3QgaXNzdWUgb2YgaXNzdWVzKSB7XG4gICAgICBjb25zdCBjYXRlZ29yeUtleSA9IGlzc3VlLmNhdGVnb3J5LnByaW1hcnk7XG4gICAgICBpZiAoIWNhdGVnb3JpemVkLmJ5Q2F0ZWdvcnlbY2F0ZWdvcnlLZXldKSB7XG4gICAgICAgIGNhdGVnb3JpemVkLmJ5Q2F0ZWdvcnlbY2F0ZWdvcnlLZXldID0gW107XG4gICAgICB9XG4gICAgICBjYXRlZ29yaXplZC5ieUNhdGVnb3J5W2NhdGVnb3J5S2V5XS5wdXNoKGlzc3VlKTtcbiAgICB9XG5cbiAgICAvLyBHcm91cCBieSBwcmlvcml0eVxuICAgIGZvciAoY29uc3QgaXNzdWUgb2YgaXNzdWVzKSB7XG4gICAgICBjb25zdCBwcmlvcml0eSA9IGlzc3VlLmNhdGVnb3J5LnByaW9yaXR5O1xuICAgICAgaWYgKCFjYXRlZ29yaXplZC5ieVByaW9yaXR5W3ByaW9yaXR5XSkge1xuICAgICAgICBjYXRlZ29yaXplZC5ieVByaW9yaXR5W3ByaW9yaXR5XSA9IFtdO1xuICAgICAgfVxuICAgICAgY2F0ZWdvcml6ZWQuYnlQcmlvcml0eVtwcmlvcml0eV0ucHVzaChpc3N1ZSk7XG4gICAgfVxuXG4gICAgLy8gR3JvdXAgYnkgZmlsZVxuICAgIGZvciAoY29uc3QgaXNzdWUgb2YgaXNzdWVzKSB7XG4gICAgICBpZiAoIWNhdGVnb3JpemVkLmJ5RmlsZVtpc3N1ZS5maWxlXSkge1xuICAgICAgICBjYXRlZ29yaXplZC5ieUZpbGVbaXNzdWUuZmlsZV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGNhdGVnb3JpemVkLmJ5RmlsZVtpc3N1ZS5maWxlXS5wdXNoKGlzc3VlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2F0ZWdvcml6ZWQ7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXNzIHJpc2sgb2YgcmVzb2x1dGlvbiBwbGFuXG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc1Jlc29sdXRpb25SaXNrKFxuICAgIGNhdGVnb3JpemVkOiBDYXRlZ29yaXplZEVycm9ycyxcbiAgICBwaGFzZXM6IFJlc29sdXRpb25QaGFzZVtdLFxuICApOiBSaXNrQXNzZXNzbWVudCB7XG4gICAgY29uc3QgZmFjdG9yczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBtaXRpZ2F0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIENoZWNrIGZvciBoaWdoLXJpc2sgZmFjdG9yc1xuICAgIGlmIChjYXRlZ29yaXplZC5ieUNhdGVnb3J5Wyd0eXBlc2NyaXB0J10ubGVuZ3RoID4gNTApIHtcbiAgICAgIHZvaWQgZmFjdG9ycy5wdXNoKCdIaWdoIG51bWJlciBvZiBUeXBlU2NyaXB0IGlzc3VlcycpO1xuICAgICAgbWl0aWdhdGlvbnMucHVzaCgnSW1wbGVtZW50IGdyYWR1YWwgVHlwZVNjcmlwdCBmaXhlcyB3aXRoIHZhbGlkYXRpb24nKTtcbiAgICB9XG5cbiAgICBpZiAoY2F0ZWdvcml6ZWQuYnlDYXRlZ29yeVsnZG9tYWluJ10ubGVuZ3RoID4gMCkge1xuICAgICAgdm9pZCBmYWN0b3JzLnB1c2goJ0RvbWFpbi1zcGVjaWZpYyBpc3N1ZXMgcmVxdWlyZSBleHBlcnQga25vd2xlZGdlJyk7XG4gICAgICBtaXRpZ2F0aW9ucy5wdXNoKCdNYW51YWwgcmV2aWV3IGJ5IGRvbWFpbiBleHBlcnRzIHJlcXVpcmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKGNhdGVnb3JpemVkLnJlcXVpcmVzTWFudWFsUmV2aWV3Lmxlbmd0aCA+IGNhdGVnb3JpemVkLmF1dG9GaXhhYmxlLmxlbmd0aCkge1xuICAgICAgdm9pZCBmYWN0b3JzLnB1c2goJ01vcmUgbWFudWFsIGZpeGVzIHRoYW4gYXV0b21hdGVkIGZpeGVzJyk7XG4gICAgICBtaXRpZ2F0aW9ucy5wdXNoKCdQcmlvcml0aXplIGF1dG9tYXRlZCBmaXhlcyBmaXJzdCB0byByZWR1Y2Ugd29ya2xvYWQnKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgb3ZlcmFsbCByaXNrXG4gICAgY29uc3QgaGlnaFJpc2tQaGFzZXMgPSBwaGFzZXMuZmlsdGVyKHAgPT4gcC5yaXNrTGV2ZWwgPT09ICdoaWdoJykubGVuZ3RoO1xuICAgIGNvbnN0IG92ZXJhbGwgPSBoaWdoUmlza1BoYXNlcyA+IDIgPyAnaGlnaCcgOiBoaWdoUmlza1BoYXNlcyA+IDAgPyAnbWVkaXVtJyA6ICdsb3cnO1xuXG4gICAgcmV0dXJuIHsgb3ZlcmFsbCwgZmFjdG9ycywgbWl0aWdhdGlvbnMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgc3VjY2VzcyBwcm9iYWJpbGl0eSBiYXNlZCBvbiBpc3N1ZSBjb21wbGV4aXR5XG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVN1Y2Nlc3NQcm9iYWJpbGl0eShjYXRlZ29yaXplZDogQ2F0ZWdvcml6ZWRFcnJvcnMpOiBudW1iZXIge1xuICAgIGxldCBiYXNlU2NvcmUgPSAwLjg7IC8vIFN0YXJ0IHdpdGggODAlIGNvbmZpZGVuY2VcblxuICAgIC8vIFJlZHVjZSBjb25maWRlbmNlIGZvciBjb21wbGV4IGlzc3Vlc1xuICAgIGNvbnN0IGNvbXBsZXhJc3N1ZXMgPSBjYXRlZ29yaXplZC5yZXF1aXJlc01hbnVhbFJldmlldy5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxJc3N1ZXMgPSBjYXRlZ29yaXplZC50b3RhbDtcblxuICAgIGlmICh0b3RhbElzc3VlcyA+IDApIHtcbiAgICAgIGNvbnN0IGNvbXBsZXhpdHlSYXRpbyA9IGNvbXBsZXhJc3N1ZXMgLyB0b3RhbElzc3VlcztcbiAgICAgIGJhc2VTY29yZSAtPSBjb21wbGV4aXR5UmF0aW8gKiAwLjM7IC8vIFJlZHVjZSB1cCB0byAzMCUgZm9yIGNvbXBsZXhpdHlcbiAgICB9XG5cbiAgICAvLyBJbmNyZWFzZSBjb25maWRlbmNlIGZvciBhdXRvLWZpeGFibGUgaXNzdWVzXG4gICAgY29uc3QgYXV0b0ZpeFJhdGlvID0gY2F0ZWdvcml6ZWQuYXV0b0ZpeGFibGUubGVuZ3RoIC8gdG90YWxJc3N1ZXM7XG4gICAgYmFzZVNjb3JlICs9IGF1dG9GaXhSYXRpbyAqIDAuMTsgLy8gSW5jcmVhc2UgdXAgdG8gMTAlIGZvciBhdXRvLWZpeGVzXG5cbiAgICByZXR1cm4gTWF0aC5tYXgoMC4zLCBNYXRoLm1pbigwLjk1LCBiYXNlU2NvcmUpKTsgLy8gQ2xhbXAgYmV0d2VlbiAzMCUgYW5kIDk1JVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBhbmFseXNpcyBzdW1tYXJ5XG4gICAqL1xuICBwcml2YXRlIGxvZ0FuYWx5c2lzU3VtbWFyeShjYXRlZ29yaXplZDogQ2F0ZWdvcml6ZWRFcnJvcnMpOiB2b2lkIHtcbiAgICB2b2lkIGxvZy5pbmZvKCdcXG7wn5OKIExJTlRJTkcgQU5BTFlTSVMgU1VNTUFSWScpO1xuICAgIGxvZy5pbmZvKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgdm9pZCBsb2cuaW5mbyhgVG90YWwgSXNzdWVzOiAke2NhdGVnb3JpemVkLnRvdGFsfWApO1xuICAgIHZvaWQgbG9nLmluZm8oYEVycm9yczogJHtjYXRlZ29yaXplZC5lcnJvcnN9YCk7XG4gICAgdm9pZCBsb2cuaW5mbyhgV2FybmluZ3M6ICR7Y2F0ZWdvcml6ZWQud2FybmluZ3N9YCk7XG4gICAgdm9pZCBsb2cuaW5mbyhgQXV0by1maXhhYmxlOiAke2NhdGVnb3JpemVkLmF1dG9GaXhhYmxlLmxlbmd0aH1gKTtcbiAgICB2b2lkIGxvZy5pbmZvKGBNYW51YWwgUmV2aWV3IFJlcXVpcmVkOiAke2NhdGVnb3JpemVkLnJlcXVpcmVzTWFudWFsUmV2aWV3Lmxlbmd0aH1gKTtcblxuICAgIHZvaWQgbG9nLmluZm8oJ1xcbvCfk4sgQlkgQ0FURUdPUlk6Jyk7XG4gICAgT2JqZWN0LmVudHJpZXMoY2F0ZWdvcml6ZWQuYnlDYXRlZ29yeSkuZm9yRWFjaCgoW2NhdGVnb3J5LCBpc3N1ZXNdKSA9PiB7XG4gICAgICB2b2lkIGxvZy5pbmZvKGAgICR7Y2F0ZWdvcnl9OiAke2lzc3Vlcy5sZW5ndGh9IGlzc3Vlc2ApO1xuICAgIH0pO1xuXG4gICAgdm9pZCBsb2cuaW5mbygnXFxu8J+OryBCWSBQUklPUklUWTonKTtcbiAgICBPYmplY3QuZW50cmllcyhjYXRlZ29yaXplZC5ieVByaW9yaXR5KS5mb3JFYWNoKChbcHJpb3JpdHksIGlzc3Vlc10pID0+IHtcbiAgICAgIGxvZy5pbmZvKGAgIFByaW9yaXR5ICR7cHJpb3JpdHl9OiAke2lzc3Vlcy5sZW5ndGh9IGlzc3Vlc2ApO1xuICAgIH0pO1xuXG4gICAgbG9nLmluZm8oJz09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4nKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9