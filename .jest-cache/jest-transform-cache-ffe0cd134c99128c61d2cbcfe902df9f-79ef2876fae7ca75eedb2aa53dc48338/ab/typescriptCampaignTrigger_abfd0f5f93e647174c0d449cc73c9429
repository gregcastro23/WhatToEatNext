b3abaf9d4af160234553777a17baa939
"use strict";
/**
 * TypeScript Campaign Trigger Utilities
 *
 * This module provides comprehensive TypeScript error monitoring and campaign
 * system integration for automated error reduction and code quality improvement.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkCampaignTriggerConditions = exports.getCurrentTypeScriptErrorCount = exports.analyzeTypeScriptErrors = exports.SafetyLevel = exports.ErrorSeverity = exports.ErrorCategory = exports.CampaignMode = void 0;
const child_process_1 = require("child_process");
const logger_1 = require("./logger");
var CampaignMode;
(function (CampaignMode) {
    CampaignMode["EMERGENCY"] = "EMERGENCY";
    CampaignMode["AGGRESSIVE"] = "AGGRESSIVE";
    CampaignMode["STANDARD"] = "STANDARD";
    CampaignMode["MONITORING"] = "MONITORING";
})(CampaignMode || (exports.CampaignMode = CampaignMode = {}));
var ErrorCategory;
(function (ErrorCategory) {
    ErrorCategory["TS2352"] = "TS2352";
    ErrorCategory["TS2304"] = "TS2304";
    ErrorCategory["TS2345"] = "TS2345";
    ErrorCategory["TS2698"] = "TS2698";
    ErrorCategory["TS2362"] = "TS2362";
    ErrorCategory["OTHER"] = "OTHER";
})(ErrorCategory || (exports.ErrorCategory = ErrorCategory = {}));
var ErrorSeverity;
(function (ErrorSeverity) {
    ErrorSeverity["HIGH"] = "HIGH";
    ErrorSeverity["MEDIUM"] = "MEDIUM";
    ErrorSeverity["LOW"] = "LOW";
})(ErrorSeverity || (exports.ErrorSeverity = ErrorSeverity = {}));
var SafetyLevel;
(function (SafetyLevel) {
    SafetyLevel["MAXIMUM"] = "MAXIMUM";
    SafetyLevel["HIGH"] = "HIGH";
    SafetyLevel["MEDIUM"] = "MEDIUM";
})(SafetyLevel || (exports.SafetyLevel = SafetyLevel = {}));
// Configuration constants
const ERROR_THRESHOLDS = {
    CRITICAL: 500,
    HIGH: 200,
    MEDIUM: 100,
    MONITORING: 50, // Proactive monitoring only
};
const CATEGORY_SUCCESS_RATES = {
    [ErrorCategory.TS2352]: 0.92,
    [ErrorCategory.TS2304]: 0.95,
    [ErrorCategory.TS2345]: 0.88,
    [ErrorCategory.TS2698]: 0.85,
    [ErrorCategory.TS2362]: 0.9,
    [ErrorCategory.OTHER]: 0.7,
};
const CATEGORY_PRIORITY_WEIGHTS = {
    [ErrorCategory.TS2352]: 0.95,
    [ErrorCategory.TS2304]: 0.95,
    [ErrorCategory.TS2345]: 0.88,
    [ErrorCategory.TS2698]: 0.85,
    [ErrorCategory.TS2362]: 0.9,
    [ErrorCategory.OTHER]: 0.7,
};
/**
 * Main function to analyze TypeScript errors and determine campaign trigger
 */
async function analyzeTypeScriptErrors() {
    const startTime = Date.now();
    try {
        logger_1.logger.info('Starting TypeScript error analysis for campaign trigger evaluation');
        // 1. Get current TypeScript error count and details
        const errorAnalysis = await getTypeScriptErrorAnalysis();
        // 2. Determine if campaign should be triggered
        const shouldTrigger = shouldTriggerCampaign(errorAnalysis.totalErrors);
        // 3. Determine campaign mode based on error count
        const campaignMode = determineCampaignMode(errorAnalysis.totalErrors);
        // 4. Generate fix recommendations
        const recommendations = generateFixRecommendations(errorAnalysis);
        // 5. Create batch processing schedule
        const batchSchedule = createBatchSchedule(recommendations, campaignMode);
        // 6. Calculate estimated duration
        const estimatedDuration = calculateTotalEstimatedDuration(batchSchedule);
        // 7. Determine safety level
        const safetyLevel = determineSafetyLevel(campaignMode);
        const duration = Date.now() - startTime;
        logger_1.logger.info(`TypeScript error analysis completed in ${duration}ms: ${errorAnalysis.totalErrors} errors found`);
        return {
            shouldTrigger,
            campaignMode,
            errorAnalysis,
            recommendations,
            batchSchedule,
            estimatedDuration,
            safetyLevel,
        };
    }
    catch (error) {
        logger_1.logger.error('TypeScript error analysis failed:', error);
        // Return safe defaults
        return {
            shouldTrigger: false,
            campaignMode: CampaignMode.MONITORING,
            errorAnalysis: {
                totalErrors: -1,
                errorsByCategory: {},
                errorsByFile: {},
                highImpactFiles: [],
                priorityRanking: [],
                campaignRecommendations: [],
            },
            recommendations: [],
            batchSchedule: {
                batches: [],
                totalEstimatedTime: 0,
                safetyProtocols: [],
            },
            estimatedDuration: 0,
            safetyLevel: SafetyLevel.MAXIMUM,
        };
    }
}
exports.analyzeTypeScriptErrors = analyzeTypeScriptErrors;
/**
 * Get comprehensive TypeScript error analysis
 */
async function getTypeScriptErrorAnalysis() {
    try {
        // Get TypeScript errors using tsc command
        const errorOutput = await getTypeScriptErrors();
        // Parse errors into structured format
        const errors = parseTypeScriptErrors(errorOutput);
        // Categorize errors
        const errorsByCategory = categorizeErrors(errors);
        // Group errors by file
        const errorsByFile = groupErrorsByFile(errors);
        // Identify high-impact files
        const highImpactFiles = identifyHighImpactFiles(errorsByFile);
        // Create priority ranking
        const priorityRanking = createPriorityRanking(errors);
        // Generate campaign recommendations
        const campaignRecommendations = generateCampaignRecommendations(errors.length, errorsByCategory);
        return {
            totalErrors: errors.length,
            errorsByCategory,
            errorsByFile,
            highImpactFiles,
            priorityRanking,
            campaignRecommendations,
        };
    }
    catch (error) {
        logger_1.logger.error('Error getting TypeScript error analysis:', error);
        throw error;
    }
}
/**
 * Get TypeScript errors from compilation
 */
async function getTypeScriptErrors() {
    try {
        // Run TypeScript compiler to get errors
        const output = (0, child_process_1.execSync)('yarn tsc --noEmit --skipLibCheck 2>&1', {
            encoding: 'utf8',
            stdio: 'pipe',
        });
        return output;
    }
    catch (error) {
        // tsc returns non-zero exit code when there are errors, which is expected
        if (error.stdout) {
            return error.stdout;
        }
        // If there's no stdout, this might be a real failure
        if (error.stderr || error.message) {
            throw new Error(`TypeScript compilation failed: ${error.stderr || error.message}`);
        }
        // If there's no stdout or stderr, assume no errors
        return '';
    }
}
/**
 * Parse TypeScript error output into structured format
 */
function parseTypeScriptErrors(errorOutput) {
    const errors = [];
    if (!errorOutput.trim()) {
        return errors;
    }
    const lines = errorOutput.split('\n');
    for (const line of lines) {
        // Match TypeScript error format: file(line,col): error TSxxxx: message
        const match = line.match(/^(.+?)\((\d+),(\d+)\):\s*error\s+(TS\d+):\s*(.+)$/);
        if (match) {
            const [, filePath, lineStr, colStr, code, message] = match;
            const lineNum = parseInt(lineStr, 10);
            const colNum = parseInt(colStr, 10);
            const category = categorizeErrorCode(code);
            const severity = determineSeverity(category);
            const priority = calculatePriority(category, severity);
            errors.push({
                filePath: filePath.trim(),
                line: lineNum,
                column: colNum,
                code,
                message: message.trim(),
                category,
                priority,
                severity,
            });
        }
    }
    return errors;
}
/**
 * Categorize error by TypeScript error code
 */
function categorizeErrorCode(code) {
    switch (code) {
        case 'TS2352':
            return ErrorCategory.TS2352;
        case 'TS2304':
            return ErrorCategory.TS2304;
        case 'TS2345':
            return ErrorCategory.TS2345;
        case 'TS2698':
            return ErrorCategory.TS2698;
        case 'TS2362':
            return ErrorCategory.TS2362;
        default:
            return ErrorCategory.OTHER;
    }
}
/**
 * Determine error severity based on category
 */
function determineSeverity(category) {
    switch (category) {
        case ErrorCategory.TS2352:
        case ErrorCategory.TS2304:
            return ErrorSeverity.HIGH;
        case ErrorCategory.TS2345:
        case ErrorCategory.TS2698:
        case ErrorCategory.TS2362:
            return ErrorSeverity.MEDIUM;
        default:
            return ErrorSeverity.LOW;
    }
}
/**
 * Calculate priority score for error
 */
function calculatePriority(category, severity) {
    const categoryWeight = CATEGORY_PRIORITY_WEIGHTS[category] || 0.5;
    const severityWeight = severity === ErrorSeverity.HIGH
        ? 1.0
        : severity === ErrorSeverity.MEDIUM
            ? 0.7
            : 0.4;
    return categoryWeight * severityWeight;
}
/**
 * Categorize errors by type
 */
function categorizeErrors(errors) {
    const categorized = {};
    for (const error of errors) {
        const category = error.category;
        if (!categorized[category]) {
            categorized[category] = [];
        }
        categorized[category].push(error);
    }
    return categorized;
}
/**
 * Group errors by file path
 */
function groupErrorsByFile(errors) {
    const grouped = {};
    for (const error of errors) {
        const filePath = error.filePath;
        if (!grouped[filePath]) {
            grouped[filePath] = [];
        }
        grouped[filePath].push(error);
    }
    return grouped;
}
/**
 * Identify high-impact files with many errors
 */
function identifyHighImpactFiles(errorsByFile) {
    const highImpactFiles = [];
    for (const [filePath, errors] of Object.entries(errorsByFile)) {
        if (errors.length >= 5) {
            // Files with 5+ errors are high impact
            const categories = [...new Set(errors.map(e => e.category))];
            const averagePriority = errors.reduce((sum, e) => sum + e.priority, 0) / errors.length;
            highImpactFiles.push({
                filePath,
                errorCount: errors.length,
                categories,
                averagePriority,
            });
        }
    }
    // Sort by error count descending
    return highImpactFiles.sort((a, b) => b.errorCount - a.errorCount);
}
/**
 * Create priority ranking of errors
 */
function createPriorityRanking(errors) {
    return [...errors].sort((a, b) => b.priority - a.priority);
}
/**
 * Generate campaign recommendations based on error analysis
 */
function generateCampaignRecommendations(totalErrors, errorsByCategory) {
    const recommendations = [];
    if (totalErrors >= ERROR_THRESHOLDS.CRITICAL) {
        recommendations.push({
            mode: CampaignMode.EMERGENCY,
            phases: [
                'typescript-error-elimination',
                'build-stabilization',
                'safety-validation',
            ],
            estimatedDuration: Math.ceil(totalErrors * 0.5),
            safetyLevel: SafetyLevel.MAXIMUM,
            description: `Emergency campaign for ${totalErrors} critical errors`,
        });
    }
    else if (totalErrors >= ERROR_THRESHOLDS.HIGH) {
        recommendations.push({
            mode: CampaignMode.AGGRESSIVE,
            phases: ['typescript-error-elimination', 'targeted-fixes'],
            estimatedDuration: Math.ceil(totalErrors * 0.3),
            safetyLevel: SafetyLevel.HIGH,
            description: `Aggressive campaign for ${totalErrors} high-priority errors`,
        });
    }
    else if (totalErrors >= ERROR_THRESHOLDS.MEDIUM) {
        recommendations.push({
            mode: CampaignMode.STANDARD,
            phases: ['targeted-error-reduction'],
            estimatedDuration: Math.ceil(totalErrors * 0.2),
            safetyLevel: SafetyLevel.MEDIUM,
            description: `Standard campaign for ${totalErrors} errors`,
        });
    }
    return recommendations;
}
/**
 * Determine if campaign should be triggered
 */
function shouldTriggerCampaign(errorCount) {
    return errorCount >= ERROR_THRESHOLDS.MEDIUM;
}
/**
 * Determine campaign mode based on error count
 */
function determineCampaignMode(errorCount) {
    if (errorCount >= ERROR_THRESHOLDS.CRITICAL) {
        return CampaignMode.EMERGENCY;
    }
    else if (errorCount >= ERROR_THRESHOLDS.HIGH) {
        return CampaignMode.AGGRESSIVE;
    }
    else if (errorCount >= ERROR_THRESHOLDS.MEDIUM) {
        return CampaignMode.STANDARD;
    }
    else {
        return CampaignMode.MONITORING;
    }
}
/**
 * Generate fix recommendations for each error category
 */
function generateFixRecommendations(analysis) {
    const recommendations = [];
    for (const [category, errors] of Object.entries(analysis.errorsByCategory)) {
        if (errors.length > 0) {
            const errorCategory = category;
            const successRate = CATEGORY_SUCCESS_RATES[errorCategory] || 0.7;
            const estimatedEffort = calculateEstimatedEffort(errors);
            const batchSize = determineBatchSize(errors.length, errorCategory);
            const priority = calculateCategoryPriority(errorCategory, errors.length);
            recommendations.push({
                category: errorCategory,
                errorCount: errors.length,
                fixStrategy: getFixStrategy(errorCategory),
                estimatedEffort,
                batchSize,
                priority,
                successRate,
            });
        }
    }
    return recommendations.sort((a, b) => b.priority - a.priority);
}
/**
 * Calculate estimated effort for fixing errors
 */
function calculateEstimatedEffort(errors) {
    // Base time per error in minutes
    const baseTimePerError = 0.5; // 30 seconds
    // Adjust based on complexity
    let totalTime = 0;
    for (const error of errors) {
        let multiplier = 1.0;
        switch (error.category) {
            case ErrorCategory.TS2352:
            case ErrorCategory.TS2304:
                multiplier = 0.8; // Easier to fix
                break;
            case ErrorCategory.TS2345:
            case ErrorCategory.TS2698:
                multiplier = 1.2; // Moderate complexity
                break;
            case ErrorCategory.TS2362:
                multiplier = 1.0; // Standard complexity
                break;
            default:
                multiplier = 1.5; // More complex
                break;
        }
        totalTime += baseTimePerError * multiplier;
    }
    return Math.ceil(totalTime);
}
/**
 * Determine optimal batch size for error category
 */
function determineBatchSize(errorCount, category) {
    // Base batch sizes by category
    const baseBatchSizes = {
        [ErrorCategory.TS2352]: 25,
        [ErrorCategory.TS2304]: 20,
        [ErrorCategory.TS2345]: 15,
        [ErrorCategory.TS2698]: 15,
        [ErrorCategory.TS2362]: 20,
        [ErrorCategory.OTHER]: 10,
    };
    const baseBatchSize = baseBatchSizes[category] || 10;
    // Adjust based on total error count
    if (errorCount < 10) {
        return Math.min(baseBatchSize, errorCount);
    }
    else if (errorCount > 100) {
        return Math.max(5, Math.floor(baseBatchSize * 0.5)); // Smaller batches for large counts
    }
    return baseBatchSize;
}
/**
 * Calculate priority for error category
 */
function calculateCategoryPriority(category, errorCount) {
    const categoryWeight = CATEGORY_PRIORITY_WEIGHTS[category] || 0.5;
    const countWeight = Math.min(1.0, errorCount / 50); // Normalize count impact
    return categoryWeight * 0.7 + countWeight * 0.3;
}
/**
 * Get fix strategy description for error category
 */
function getFixStrategy(category) {
    const strategies = {
        [ErrorCategory.TS2352]: 'Enhanced Error Fixer patterns for type conversion',
        [ErrorCategory.TS2304]: 'Import resolution and declaration fixes',
        [ErrorCategory.TS2345]: 'Parameter type alignment and interface updates',
        [ErrorCategory.TS2698]: 'Object and array spread syntax corrections',
        [ErrorCategory.TS2362]: 'Type assertion and arithmetic operation fixes',
        [ErrorCategory.OTHER]: 'Manual review and custom solution development',
    };
    return strategies[category] || 'Custom fix strategy required';
}
/**
 * Create batch processing schedule
 */
function createBatchSchedule(recommendations, mode) {
    const batches = [];
    const safetyProtocols = [];
    let totalEstimatedTime = 0;
    let currentTime = new Date();
    // Add safety protocols based on campaign mode
    safetyProtocols.push(...getSafetyProtocols(mode));
    for (const recommendation of recommendations) {
        const batch = {
            id: generateBatchId(),
            category: recommendation.category,
            files: [],
            batchSize: recommendation.batchSize,
            estimatedDuration: recommendation.estimatedEffort,
            safetyLevel: determineSafetyLevel(mode),
            scheduledTime: new Date(currentTime),
        };
        batches.push(batch);
        totalEstimatedTime += batch.estimatedDuration;
        // Schedule next batch with buffer time
        currentTime = new Date(currentTime.getTime() +
            batch.estimatedDuration * 60 * 1000 +
            2 * 60 * 1000); // Add 2 minute buffer
    }
    return {
        batches,
        totalEstimatedTime,
        safetyProtocols,
    };
}
/**
 * Get safety protocols for campaign mode
 */
function getSafetyProtocols(mode) {
    const protocols = [];
    switch (mode) {
        case CampaignMode.EMERGENCY:
            protocols.push({
                name: 'Emergency Safety Protocol',
                description: 'Maximum safety with validation after every file',
                triggers: ['BUILD_FAILURE', 'ERROR_INCREASE', 'CORRUPTION_DETECTED'],
                actions: ['IMMEDIATE_ROLLBACK', 'ALERT_TEAM', 'PAUSE_CAMPAIGN'],
            });
            break;
        case CampaignMode.AGGRESSIVE:
            protocols.push({
                name: 'Aggressive Safety Protocol',
                description: 'High safety with frequent validation checkpoints',
                triggers: ['BUILD_FAILURE', 'MAJOR_ERROR_INCREASE'],
                actions: ['AUTOMATIC_ROLLBACK', 'REDUCE_BATCH_SIZE'],
            });
            break;
        case CampaignMode.STANDARD:
            protocols.push({
                name: 'Standard Safety Protocol',
                description: 'Standard safety with build validation',
                triggers: ['BUILD_FAILURE'],
                actions: ['ROLLBACK_BATCH', 'NOTIFY_DEVELOPER'],
            });
            break;
    }
    return protocols;
}
/**
 * Calculate total estimated duration
 */
function calculateTotalEstimatedDuration(schedule) {
    return schedule.totalEstimatedTime;
}
/**
 * Determine safety level based on campaign mode
 */
function determineSafetyLevel(mode) {
    switch (mode) {
        case CampaignMode.EMERGENCY:
            return SafetyLevel.MAXIMUM;
        case CampaignMode.AGGRESSIVE:
            return SafetyLevel.HIGH;
        default:
            return SafetyLevel.MEDIUM;
    }
}
/**
 * Generate unique batch ID
 */
function generateBatchId() {
    return `batch_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
}
/**
 * Get current TypeScript error count (simple version)
 */
async function getCurrentTypeScriptErrorCount() {
    try {
        const errorOutput = await getTypeScriptErrors();
        const errors = parseTypeScriptErrors(errorOutput);
        return errors.length;
    }
    catch (error) {
        logger_1.logger.error('Failed to get TypeScript error count:', error);
        return -1;
    }
}
exports.getCurrentTypeScriptErrorCount = getCurrentTypeScriptErrorCount;
/**
 * Check if campaign trigger conditions are met
 */
async function checkCampaignTriggerConditions() {
    try {
        const errorCount = await getCurrentTypeScriptErrorCount();
        return shouldTriggerCampaign(errorCount);
    }
    catch (error) {
        logger_1.logger.error('Failed to check campaign trigger conditions:', error);
        return false;
    }
}
exports.checkCampaignTriggerConditions = checkCampaignTriggerConditions;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy90eXBlc2NyaXB0Q2FtcGFpZ25UcmlnZ2VyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7O0FBRUgsaURBQXlDO0FBQ3pDLHFDQUFrQztBQWlGbEMsSUFBWSxZQUtYO0FBTEQsV0FBWSxZQUFZO0lBQ3RCLHVDQUF1QixDQUFBO0lBQ3ZCLHlDQUF5QixDQUFBO0lBQ3pCLHFDQUFxQixDQUFBO0lBQ3JCLHlDQUF5QixDQUFBO0FBQzNCLENBQUMsRUFMVyxZQUFZLDRCQUFaLFlBQVksUUFLdkI7QUFFRCxJQUFZLGFBT1g7QUFQRCxXQUFZLGFBQWE7SUFDdkIsa0NBQWlCLENBQUE7SUFDakIsa0NBQWlCLENBQUE7SUFDakIsa0NBQWlCLENBQUE7SUFDakIsa0NBQWlCLENBQUE7SUFDakIsa0NBQWlCLENBQUE7SUFDakIsZ0NBQWUsQ0FBQTtBQUNqQixDQUFDLEVBUFcsYUFBYSw2QkFBYixhQUFhLFFBT3hCO0FBRUQsSUFBWSxhQUlYO0FBSkQsV0FBWSxhQUFhO0lBQ3ZCLDhCQUFhLENBQUE7SUFDYixrQ0FBaUIsQ0FBQTtJQUNqQiw0QkFBVyxDQUFBO0FBQ2IsQ0FBQyxFQUpXLGFBQWEsNkJBQWIsYUFBYSxRQUl4QjtBQUVELElBQVksV0FJWDtBQUpELFdBQVksV0FBVztJQUNyQixrQ0FBbUIsQ0FBQTtJQUNuQiw0QkFBYSxDQUFBO0lBQ2IsZ0NBQWlCLENBQUE7QUFDbkIsQ0FBQyxFQUpXLFdBQVcsMkJBQVgsV0FBVyxRQUl0QjtBQUVELDBCQUEwQjtBQUMxQixNQUFNLGdCQUFnQixHQUFHO0lBQ3ZCLFFBQVEsRUFBRSxHQUFHO0lBQ2IsSUFBSSxFQUFFLEdBQUc7SUFDVCxNQUFNLEVBQUUsR0FBRztJQUNYLFVBQVUsRUFBRSxFQUFFLEVBQUUsNEJBQTRCO0NBQzdDLENBQUM7QUFFRixNQUFNLHNCQUFzQixHQUFHO0lBQzdCLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUk7SUFDNUIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSTtJQUM1QixDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJO0lBQzVCLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUk7SUFDNUIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRztJQUMzQixDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHO0NBQzNCLENBQUM7QUFFRixNQUFNLHlCQUF5QixHQUFHO0lBQ2hDLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUk7SUFDNUIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSTtJQUM1QixDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJO0lBQzVCLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUk7SUFDNUIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRztJQUMzQixDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHO0NBQzNCLENBQUM7QUFFRjs7R0FFRztBQUNJLEtBQUssVUFBVSx1QkFBdUI7SUFDM0MsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBRTdCLElBQUk7UUFDRixlQUFNLENBQUMsSUFBSSxDQUNULG9FQUFvRSxDQUNyRSxDQUFDO1FBRUYsb0RBQW9EO1FBQ3BELE1BQU0sYUFBYSxHQUFHLE1BQU0sMEJBQTBCLEVBQUUsQ0FBQztRQUV6RCwrQ0FBK0M7UUFDL0MsTUFBTSxhQUFhLEdBQUcscUJBQXFCLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRXZFLGtEQUFrRDtRQUNsRCxNQUFNLFlBQVksR0FBRyxxQkFBcUIsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFdEUsa0NBQWtDO1FBQ2xDLE1BQU0sZUFBZSxHQUFHLDBCQUEwQixDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRWxFLHNDQUFzQztRQUN0QyxNQUFNLGFBQWEsR0FBRyxtQkFBbUIsQ0FBQyxlQUFlLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFFekUsa0NBQWtDO1FBQ2xDLE1BQU0saUJBQWlCLEdBQUcsK0JBQStCLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFekUsNEJBQTRCO1FBQzVCLE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRXZELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUM7UUFDeEMsZUFBTSxDQUFDLElBQUksQ0FDVCwwQ0FBMEMsUUFBUSxPQUFPLGFBQWEsQ0FBQyxXQUFXLGVBQWUsQ0FDbEcsQ0FBQztRQUVGLE9BQU87WUFDTCxhQUFhO1lBQ2IsWUFBWTtZQUNaLGFBQWE7WUFDYixlQUFlO1lBQ2YsYUFBYTtZQUNiLGlCQUFpQjtZQUNqQixXQUFXO1NBQ1osQ0FBQztLQUNIO0lBQUMsT0FBTyxLQUFLLEVBQUU7UUFDZCxlQUFNLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXpELHVCQUF1QjtRQUN2QixPQUFPO1lBQ0wsYUFBYSxFQUFFLEtBQUs7WUFDcEIsWUFBWSxFQUFFLFlBQVksQ0FBQyxVQUFVO1lBQ3JDLGFBQWEsRUFBRTtnQkFDYixXQUFXLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLGdCQUFnQixFQUFFLEVBQUU7Z0JBQ3BCLFlBQVksRUFBRSxFQUFFO2dCQUNoQixlQUFlLEVBQUUsRUFBRTtnQkFDbkIsZUFBZSxFQUFFLEVBQUU7Z0JBQ25CLHVCQUF1QixFQUFFLEVBQUU7YUFDNUI7WUFDRCxlQUFlLEVBQUUsRUFBRTtZQUNuQixhQUFhLEVBQUU7Z0JBQ2IsT0FBTyxFQUFFLEVBQUU7Z0JBQ1gsa0JBQWtCLEVBQUUsQ0FBQztnQkFDckIsZUFBZSxFQUFFLEVBQUU7YUFDcEI7WUFDRCxpQkFBaUIsRUFBRSxDQUFDO1lBQ3BCLFdBQVcsRUFBRSxXQUFXLENBQUMsT0FBTztTQUNqQyxDQUFDO0tBQ0g7QUFDSCxDQUFDO0FBcEVELDBEQW9FQztBQUVEOztHQUVHO0FBQ0gsS0FBSyxVQUFVLDBCQUEwQjtJQUN2QyxJQUFJO1FBQ0YsMENBQTBDO1FBQzFDLE1BQU0sV0FBVyxHQUFHLE1BQU0sbUJBQW1CLEVBQUUsQ0FBQztRQUVoRCxzQ0FBc0M7UUFDdEMsTUFBTSxNQUFNLEdBQUcscUJBQXFCLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFbEQsb0JBQW9CO1FBQ3BCLE1BQU0sZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFbEQsdUJBQXVCO1FBQ3ZCLE1BQU0sWUFBWSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRS9DLDZCQUE2QjtRQUM3QixNQUFNLGVBQWUsR0FBRyx1QkFBdUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUU5RCwwQkFBMEI7UUFDMUIsTUFBTSxlQUFlLEdBQUcscUJBQXFCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFdEQsb0NBQW9DO1FBQ3BDLE1BQU0sdUJBQXVCLEdBQUcsK0JBQStCLENBQzdELE1BQU0sQ0FBQyxNQUFNLEVBQ2IsZ0JBQWdCLENBQ2pCLENBQUM7UUFFRixPQUFPO1lBQ0wsV0FBVyxFQUFFLE1BQU0sQ0FBQyxNQUFNO1lBQzFCLGdCQUFnQjtZQUNoQixZQUFZO1lBQ1osZUFBZTtZQUNmLGVBQWU7WUFDZix1QkFBdUI7U0FDeEIsQ0FBQztLQUNIO0lBQUMsT0FBTyxLQUFLLEVBQUU7UUFDZCxlQUFNLENBQUMsS0FBSyxDQUFDLDBDQUEwQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sS0FBSyxDQUFDO0tBQ2I7QUFDSCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxLQUFLLFVBQVUsbUJBQW1CO0lBQ2hDLElBQUk7UUFDRix3Q0FBd0M7UUFDeEMsTUFBTSxNQUFNLEdBQUcsSUFBQSx3QkFBUSxFQUFDLHVDQUF1QyxFQUFFO1lBQy9ELFFBQVEsRUFBRSxNQUFNO1lBQ2hCLEtBQUssRUFBRSxNQUFNO1NBQ2QsQ0FBQyxDQUFDO1FBRUgsT0FBTyxNQUFNLENBQUM7S0FDZjtJQUFDLE9BQU8sS0FBVSxFQUFFO1FBQ25CLDBFQUEwRTtRQUMxRSxJQUFJLEtBQUssQ0FBQyxNQUFNLEVBQUU7WUFDaEIsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDO1NBQ3JCO1FBRUQscURBQXFEO1FBQ3JELElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO1lBQ2pDLE1BQU0sSUFBSSxLQUFLLENBQ2Isa0NBQWtDLEtBQUssQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUNsRSxDQUFDO1NBQ0g7UUFFRCxtREFBbUQ7UUFDbkQsT0FBTyxFQUFFLENBQUM7S0FDWDtBQUNILENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMscUJBQXFCLENBQUMsV0FBbUI7SUFDaEQsTUFBTSxNQUFNLEdBQXNCLEVBQUUsQ0FBQztJQUVyQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxFQUFFO1FBQ3ZCLE9BQU8sTUFBTSxDQUFDO0tBQ2Y7SUFFRCxNQUFNLEtBQUssR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXRDLEtBQUssTUFBTSxJQUFJLElBQUksS0FBSyxFQUFFO1FBQ3hCLHVFQUF1RTtRQUN2RSxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUN0QixtREFBbUQsQ0FDcEQsQ0FBQztRQUVGLElBQUksS0FBSyxFQUFFO1lBQ1QsTUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUMzRCxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3RDLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFcEMsTUFBTSxRQUFRLEdBQUcsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDM0MsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0MsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRXZELE1BQU0sQ0FBQyxJQUFJLENBQUM7Z0JBQ1YsUUFBUSxFQUFFLFFBQVEsQ0FBQyxJQUFJLEVBQUU7Z0JBQ3pCLElBQUksRUFBRSxPQUFPO2dCQUNiLE1BQU0sRUFBRSxNQUFNO2dCQUNkLElBQUk7Z0JBQ0osT0FBTyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUU7Z0JBQ3ZCLFFBQVE7Z0JBQ1IsUUFBUTtnQkFDUixRQUFRO2FBQ1QsQ0FBQyxDQUFDO1NBQ0o7S0FDRjtJQUVELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsbUJBQW1CLENBQUMsSUFBWTtJQUN2QyxRQUFRLElBQUksRUFBRTtRQUNaLEtBQUssUUFBUTtZQUNYLE9BQU8sYUFBYSxDQUFDLE1BQU0sQ0FBQztRQUM5QixLQUFLLFFBQVE7WUFDWCxPQUFPLGFBQWEsQ0FBQyxNQUFNLENBQUM7UUFDOUIsS0FBSyxRQUFRO1lBQ1gsT0FBTyxhQUFhLENBQUMsTUFBTSxDQUFDO1FBQzlCLEtBQUssUUFBUTtZQUNYLE9BQU8sYUFBYSxDQUFDLE1BQU0sQ0FBQztRQUM5QixLQUFLLFFBQVE7WUFDWCxPQUFPLGFBQWEsQ0FBQyxNQUFNLENBQUM7UUFDOUI7WUFDRSxPQUFPLGFBQWEsQ0FBQyxLQUFLLENBQUM7S0FDOUI7QUFDSCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLGlCQUFpQixDQUFDLFFBQXVCO0lBQ2hELFFBQVEsUUFBUSxFQUFFO1FBQ2hCLEtBQUssYUFBYSxDQUFDLE1BQU0sQ0FBQztRQUMxQixLQUFLLGFBQWEsQ0FBQyxNQUFNO1lBQ3ZCLE9BQU8sYUFBYSxDQUFDLElBQUksQ0FBQztRQUM1QixLQUFLLGFBQWEsQ0FBQyxNQUFNLENBQUM7UUFDMUIsS0FBSyxhQUFhLENBQUMsTUFBTSxDQUFDO1FBQzFCLEtBQUssYUFBYSxDQUFDLE1BQU07WUFDdkIsT0FBTyxhQUFhLENBQUMsTUFBTSxDQUFDO1FBQzlCO1lBQ0UsT0FBTyxhQUFhLENBQUMsR0FBRyxDQUFDO0tBQzVCO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxpQkFBaUIsQ0FDeEIsUUFBdUIsRUFDdkIsUUFBdUI7SUFFdkIsTUFBTSxjQUFjLEdBQUcseUJBQXlCLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxDQUFDO0lBQ2xFLE1BQU0sY0FBYyxHQUNsQixRQUFRLEtBQUssYUFBYSxDQUFDLElBQUk7UUFDN0IsQ0FBQyxDQUFDLEdBQUc7UUFDTCxDQUFDLENBQUMsUUFBUSxLQUFLLGFBQWEsQ0FBQyxNQUFNO1lBQ2pDLENBQUMsQ0FBQyxHQUFHO1lBQ0wsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUVaLE9BQU8sY0FBYyxHQUFHLGNBQWMsQ0FBQztBQUN6QyxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLGdCQUFnQixDQUN2QixNQUF5QjtJQUV6QixNQUFNLFdBQVcsR0FBc0MsRUFBRSxDQUFDO0lBRTFELEtBQUssTUFBTSxLQUFLLElBQUksTUFBTSxFQUFFO1FBQzFCLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDaEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUMxQixXQUFXLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO1NBQzVCO1FBQ0QsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNuQztJQUVELE9BQU8sV0FBVyxDQUFDO0FBQ3JCLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsaUJBQWlCLENBQ3hCLE1BQXlCO0lBRXpCLE1BQU0sT0FBTyxHQUFzQyxFQUFFLENBQUM7SUFFdEQsS0FBSyxNQUFNLEtBQUssSUFBSSxNQUFNLEVBQUU7UUFDMUIsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUNoQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3RCLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7U0FDeEI7UUFDRCxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQy9CO0lBRUQsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyx1QkFBdUIsQ0FDOUIsWUFBK0M7SUFFL0MsTUFBTSxlQUFlLEdBQXFCLEVBQUUsQ0FBQztJQUU3QyxLQUFLLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRTtRQUM3RCxJQUFJLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQ3RCLHVDQUF1QztZQUN2QyxNQUFNLFVBQVUsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0QsTUFBTSxlQUFlLEdBQ25CLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1lBRWpFLGVBQWUsQ0FBQyxJQUFJLENBQUM7Z0JBQ25CLFFBQVE7Z0JBQ1IsVUFBVSxFQUFFLE1BQU0sQ0FBQyxNQUFNO2dCQUN6QixVQUFVO2dCQUNWLGVBQWU7YUFDaEIsQ0FBQyxDQUFDO1NBQ0o7S0FDRjtJQUVELGlDQUFpQztJQUNqQyxPQUFPLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNyRSxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLHFCQUFxQixDQUFDLE1BQXlCO0lBQ3RELE9BQU8sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdELENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsK0JBQStCLENBQ3RDLFdBQW1CLEVBQ25CLGdCQUFtRDtJQUVuRCxNQUFNLGVBQWUsR0FBNkIsRUFBRSxDQUFDO0lBRXJELElBQUksV0FBVyxJQUFJLGdCQUFnQixDQUFDLFFBQVEsRUFBRTtRQUM1QyxlQUFlLENBQUMsSUFBSSxDQUFDO1lBQ25CLElBQUksRUFBRSxZQUFZLENBQUMsU0FBUztZQUM1QixNQUFNLEVBQUU7Z0JBQ04sOEJBQThCO2dCQUM5QixxQkFBcUI7Z0JBQ3JCLG1CQUFtQjthQUNwQjtZQUNELGlCQUFpQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQztZQUMvQyxXQUFXLEVBQUUsV0FBVyxDQUFDLE9BQU87WUFDaEMsV0FBVyxFQUFFLDBCQUEwQixXQUFXLGtCQUFrQjtTQUNyRSxDQUFDLENBQUM7S0FDSjtTQUFNLElBQUksV0FBVyxJQUFJLGdCQUFnQixDQUFDLElBQUksRUFBRTtRQUMvQyxlQUFlLENBQUMsSUFBSSxDQUFDO1lBQ25CLElBQUksRUFBRSxZQUFZLENBQUMsVUFBVTtZQUM3QixNQUFNLEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxnQkFBZ0IsQ0FBQztZQUMxRCxpQkFBaUIsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUM7WUFDL0MsV0FBVyxFQUFFLFdBQVcsQ0FBQyxJQUFJO1lBQzdCLFdBQVcsRUFBRSwyQkFBMkIsV0FBVyx1QkFBdUI7U0FDM0UsQ0FBQyxDQUFDO0tBQ0o7U0FBTSxJQUFJLFdBQVcsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7UUFDakQsZUFBZSxDQUFDLElBQUksQ0FBQztZQUNuQixJQUFJLEVBQUUsWUFBWSxDQUFDLFFBQVE7WUFDM0IsTUFBTSxFQUFFLENBQUMsMEJBQTBCLENBQUM7WUFDcEMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO1lBQy9DLFdBQVcsRUFBRSxXQUFXLENBQUMsTUFBTTtZQUMvQixXQUFXLEVBQUUseUJBQXlCLFdBQVcsU0FBUztTQUMzRCxDQUFDLENBQUM7S0FDSjtJQUVELE9BQU8sZUFBZSxDQUFDO0FBQ3pCLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMscUJBQXFCLENBQUMsVUFBa0I7SUFDL0MsT0FBTyxVQUFVLElBQUksZ0JBQWdCLENBQUMsTUFBTSxDQUFDO0FBQy9DLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMscUJBQXFCLENBQUMsVUFBa0I7SUFDL0MsSUFBSSxVQUFVLElBQUksZ0JBQWdCLENBQUMsUUFBUSxFQUFFO1FBQzNDLE9BQU8sWUFBWSxDQUFDLFNBQVMsQ0FBQztLQUMvQjtTQUFNLElBQUksVUFBVSxJQUFJLGdCQUFnQixDQUFDLElBQUksRUFBRTtRQUM5QyxPQUFPLFlBQVksQ0FBQyxVQUFVLENBQUM7S0FDaEM7U0FBTSxJQUFJLFVBQVUsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7UUFDaEQsT0FBTyxZQUFZLENBQUMsUUFBUSxDQUFDO0tBQzlCO1NBQU07UUFDTCxPQUFPLFlBQVksQ0FBQyxVQUFVLENBQUM7S0FDaEM7QUFDSCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLDBCQUEwQixDQUNqQyxRQUE2QjtJQUU3QixNQUFNLGVBQWUsR0FBd0IsRUFBRSxDQUFDO0lBRWhELEtBQUssTUFBTSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1FBQzFFLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDckIsTUFBTSxhQUFhLEdBQUcsUUFBeUIsQ0FBQztZQUNoRCxNQUFNLFdBQVcsR0FBRyxzQkFBc0IsQ0FBQyxhQUFhLENBQUMsSUFBSSxHQUFHLENBQUM7WUFDakUsTUFBTSxlQUFlLEdBQUcsd0JBQXdCLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDekQsTUFBTSxTQUFTLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FBQztZQUNuRSxNQUFNLFFBQVEsR0FBRyx5QkFBeUIsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXpFLGVBQWUsQ0FBQyxJQUFJLENBQUM7Z0JBQ25CLFFBQVEsRUFBRSxhQUFhO2dCQUN2QixVQUFVLEVBQUUsTUFBTSxDQUFDLE1BQU07Z0JBQ3pCLFdBQVcsRUFBRSxjQUFjLENBQUMsYUFBYSxDQUFDO2dCQUMxQyxlQUFlO2dCQUNmLFNBQVM7Z0JBQ1QsUUFBUTtnQkFDUixXQUFXO2FBQ1osQ0FBQyxDQUFDO1NBQ0o7S0FDRjtJQUVELE9BQU8sZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pFLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsd0JBQXdCLENBQUMsTUFBeUI7SUFDekQsaUNBQWlDO0lBQ2pDLE1BQU0sZ0JBQWdCLEdBQUcsR0FBRyxDQUFDLENBQUMsYUFBYTtJQUUzQyw2QkFBNkI7SUFDN0IsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLEtBQUssTUFBTSxLQUFLLElBQUksTUFBTSxFQUFFO1FBQzFCLElBQUksVUFBVSxHQUFHLEdBQUcsQ0FBQztRQUVyQixRQUFRLEtBQUssQ0FBQyxRQUFRLEVBQUU7WUFDdEIsS0FBSyxhQUFhLENBQUMsTUFBTSxDQUFDO1lBQzFCLEtBQUssYUFBYSxDQUFDLE1BQU07Z0JBQ3ZCLFVBQVUsR0FBRyxHQUFHLENBQUMsQ0FBQyxnQkFBZ0I7Z0JBQ2xDLE1BQU07WUFDUixLQUFLLGFBQWEsQ0FBQyxNQUFNLENBQUM7WUFDMUIsS0FBSyxhQUFhLENBQUMsTUFBTTtnQkFDdkIsVUFBVSxHQUFHLEdBQUcsQ0FBQyxDQUFDLHNCQUFzQjtnQkFDeEMsTUFBTTtZQUNSLEtBQUssYUFBYSxDQUFDLE1BQU07Z0JBQ3ZCLFVBQVUsR0FBRyxHQUFHLENBQUMsQ0FBQyxzQkFBc0I7Z0JBQ3hDLE1BQU07WUFDUjtnQkFDRSxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsZUFBZTtnQkFDakMsTUFBTTtTQUNUO1FBRUQsU0FBUyxJQUFJLGdCQUFnQixHQUFHLFVBQVUsQ0FBQztLQUM1QztJQUVELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM5QixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLGtCQUFrQixDQUN6QixVQUFrQixFQUNsQixRQUF1QjtJQUV2QiwrQkFBK0I7SUFDL0IsTUFBTSxjQUFjLEdBQUc7UUFDckIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRTtRQUMxQixDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO1FBQzFCLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7UUFDMUIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRTtRQUMxQixDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO1FBQzFCLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUU7S0FDMUIsQ0FBQztJQUVGLE1BQU0sYUFBYSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7SUFFckQsb0NBQW9DO0lBQ3BDLElBQUksVUFBVSxHQUFHLEVBQUUsRUFBRTtRQUNuQixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0tBQzVDO1NBQU0sSUFBSSxVQUFVLEdBQUcsR0FBRyxFQUFFO1FBQzNCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLG1DQUFtQztLQUN6RjtJQUVELE9BQU8sYUFBYSxDQUFDO0FBQ3ZCLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMseUJBQXlCLENBQ2hDLFFBQXVCLEVBQ3ZCLFVBQWtCO0lBRWxCLE1BQU0sY0FBYyxHQUFHLHlCQUF5QixDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsQ0FBQztJQUNsRSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyx5QkFBeUI7SUFFN0UsT0FBTyxjQUFjLEdBQUcsR0FBRyxHQUFHLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFDbEQsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxjQUFjLENBQUMsUUFBdUI7SUFDN0MsTUFBTSxVQUFVLEdBQUc7UUFDakIsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsbURBQW1EO1FBQzNFLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLHlDQUF5QztRQUNqRSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxnREFBZ0Q7UUFDeEUsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUUsNENBQTRDO1FBQ3BFLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLCtDQUErQztRQUN2RSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSwrQ0FBK0M7S0FDdkUsQ0FBQztJQUVGLE9BQU8sVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLDhCQUE4QixDQUFDO0FBQ2hFLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsbUJBQW1CLENBQzFCLGVBQW9DLEVBQ3BDLElBQWtCO0lBRWxCLE1BQU0sT0FBTyxHQUFzQixFQUFFLENBQUM7SUFDdEMsTUFBTSxlQUFlLEdBQXFCLEVBQUUsQ0FBQztJQUM3QyxJQUFJLGtCQUFrQixHQUFHLENBQUMsQ0FBQztJQUMzQixJQUFJLFdBQVcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO0lBRTdCLDhDQUE4QztJQUM5QyxlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUVsRCxLQUFLLE1BQU0sY0FBYyxJQUFJLGVBQWUsRUFBRTtRQUM1QyxNQUFNLEtBQUssR0FBb0I7WUFDN0IsRUFBRSxFQUFFLGVBQWUsRUFBRTtZQUNyQixRQUFRLEVBQUUsY0FBYyxDQUFDLFFBQVE7WUFDakMsS0FBSyxFQUFFLEVBQUU7WUFDVCxTQUFTLEVBQUUsY0FBYyxDQUFDLFNBQVM7WUFDbkMsaUJBQWlCLEVBQUUsY0FBYyxDQUFDLGVBQWU7WUFDakQsV0FBVyxFQUFFLG9CQUFvQixDQUFDLElBQUksQ0FBQztZQUN2QyxhQUFhLEVBQUUsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDO1NBQ3JDLENBQUM7UUFFRixPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BCLGtCQUFrQixJQUFJLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztRQUU5Qyx1Q0FBdUM7UUFDdkMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUNwQixXQUFXLENBQUMsT0FBTyxFQUFFO1lBQ25CLEtBQUssQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLEdBQUcsSUFBSTtZQUNuQyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FDaEIsQ0FBQyxDQUFDLHNCQUFzQjtLQUMxQjtJQUVELE9BQU87UUFDTCxPQUFPO1FBQ1Asa0JBQWtCO1FBQ2xCLGVBQWU7S0FDaEIsQ0FBQztBQUNKLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsa0JBQWtCLENBQUMsSUFBa0I7SUFDNUMsTUFBTSxTQUFTLEdBQXFCLEVBQUUsQ0FBQztJQUV2QyxRQUFRLElBQUksRUFBRTtRQUNaLEtBQUssWUFBWSxDQUFDLFNBQVM7WUFDekIsU0FBUyxDQUFDLElBQUksQ0FBQztnQkFDYixJQUFJLEVBQUUsMkJBQTJCO2dCQUNqQyxXQUFXLEVBQUUsaURBQWlEO2dCQUM5RCxRQUFRLEVBQUUsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUscUJBQXFCLENBQUM7Z0JBQ3BFLE9BQU8sRUFBRSxDQUFDLG9CQUFvQixFQUFFLFlBQVksRUFBRSxnQkFBZ0IsQ0FBQzthQUNoRSxDQUFDLENBQUM7WUFDSCxNQUFNO1FBRVIsS0FBSyxZQUFZLENBQUMsVUFBVTtZQUMxQixTQUFTLENBQUMsSUFBSSxDQUFDO2dCQUNiLElBQUksRUFBRSw0QkFBNEI7Z0JBQ2xDLFdBQVcsRUFBRSxrREFBa0Q7Z0JBQy9ELFFBQVEsRUFBRSxDQUFDLGVBQWUsRUFBRSxzQkFBc0IsQ0FBQztnQkFDbkQsT0FBTyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsbUJBQW1CLENBQUM7YUFDckQsQ0FBQyxDQUFDO1lBQ0gsTUFBTTtRQUVSLEtBQUssWUFBWSxDQUFDLFFBQVE7WUFDeEIsU0FBUyxDQUFDLElBQUksQ0FBQztnQkFDYixJQUFJLEVBQUUsMEJBQTBCO2dCQUNoQyxXQUFXLEVBQUUsdUNBQXVDO2dCQUNwRCxRQUFRLEVBQUUsQ0FBQyxlQUFlLENBQUM7Z0JBQzNCLE9BQU8sRUFBRSxDQUFDLGdCQUFnQixFQUFFLGtCQUFrQixDQUFDO2FBQ2hELENBQUMsQ0FBQztZQUNILE1BQU07S0FDVDtJQUVELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsK0JBQStCLENBQUMsUUFBdUI7SUFDOUQsT0FBTyxRQUFRLENBQUMsa0JBQWtCLENBQUM7QUFDckMsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxvQkFBb0IsQ0FBQyxJQUFrQjtJQUM5QyxRQUFRLElBQUksRUFBRTtRQUNaLEtBQUssWUFBWSxDQUFDLFNBQVM7WUFDekIsT0FBTyxXQUFXLENBQUMsT0FBTyxDQUFDO1FBQzdCLEtBQUssWUFBWSxDQUFDLFVBQVU7WUFDMUIsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDO1FBQzFCO1lBQ0UsT0FBTyxXQUFXLENBQUMsTUFBTSxDQUFDO0tBQzdCO0FBQ0gsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBUyxlQUFlO0lBQ3RCLE9BQU8sU0FBUyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDMUUsQ0FBQztBQUVEOztHQUVHO0FBQ0ksS0FBSyxVQUFVLDhCQUE4QjtJQUNsRCxJQUFJO1FBQ0YsTUFBTSxXQUFXLEdBQUcsTUFBTSxtQkFBbUIsRUFBRSxDQUFDO1FBQ2hELE1BQU0sTUFBTSxHQUFHLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2xELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQztLQUN0QjtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2QsZUFBTSxDQUFDLEtBQUssQ0FBQyx1Q0FBdUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUM3RCxPQUFPLENBQUMsQ0FBQyxDQUFDO0tBQ1g7QUFDSCxDQUFDO0FBVEQsd0VBU0M7QUFFRDs7R0FFRztBQUNJLEtBQUssVUFBVSw4QkFBOEI7SUFDbEQsSUFBSTtRQUNGLE1BQU0sVUFBVSxHQUFHLE1BQU0sOEJBQThCLEVBQUUsQ0FBQztRQUMxRCxPQUFPLHFCQUFxQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQzFDO0lBQUMsT0FBTyxLQUFLLEVBQUU7UUFDZCxlQUFNLENBQUMsS0FBSyxDQUFDLDhDQUE4QyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3BFLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7QUFDSCxDQUFDO0FBUkQsd0VBUUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy90eXBlc2NyaXB0Q2FtcGFpZ25UcmlnZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVHlwZVNjcmlwdCBDYW1wYWlnbiBUcmlnZ2VyIFV0aWxpdGllc1xuICpcbiAqIFRoaXMgbW9kdWxlIHByb3ZpZGVzIGNvbXByZWhlbnNpdmUgVHlwZVNjcmlwdCBlcnJvciBtb25pdG9yaW5nIGFuZCBjYW1wYWlnblxuICogc3lzdGVtIGludGVncmF0aW9uIGZvciBhdXRvbWF0ZWQgZXJyb3IgcmVkdWN0aW9uIGFuZCBjb2RlIHF1YWxpdHkgaW1wcm92ZW1lbnQuXG4gKi9cblxuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcblxuLy8gQ2FtcGFpZ24gdHJpZ2dlciBpbnRlcmZhY2VzXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduVHJpZ2dlclJlc3VsdCB7XG4gIHNob3VsZFRyaWdnZXI6IGJvb2xlYW47XG4gIGNhbXBhaWduTW9kZTogQ2FtcGFpZ25Nb2RlO1xuICBlcnJvckFuYWx5c2lzOiBFcnJvckFuYWx5c2lzUmVzdWx0O1xuICByZWNvbW1lbmRhdGlvbnM6IEZpeFJlY29tbWVuZGF0aW9uW107XG4gIGJhdGNoU2NoZWR1bGU6IEJhdGNoU2NoZWR1bGU7XG4gIGVzdGltYXRlZER1cmF0aW9uOiBudW1iZXI7XG4gIHNhZmV0eUxldmVsOiBTYWZldHlMZXZlbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckFuYWx5c2lzUmVzdWx0IHtcbiAgdG90YWxFcnJvcnM6IG51bWJlcjtcbiAgZXJyb3JzQnlDYXRlZ29yeTogUmVjb3JkPHN0cmluZywgVHlwZVNjcmlwdEVycm9yW10+O1xuICBlcnJvcnNCeUZpbGU6IFJlY29yZDxzdHJpbmcsIFR5cGVTY3JpcHRFcnJvcltdPjtcbiAgaGlnaEltcGFjdEZpbGVzOiBIaWdoSW1wYWN0RmlsZVtdO1xuICBwcmlvcml0eVJhbmtpbmc6IFR5cGVTY3JpcHRFcnJvcltdO1xuICBjYW1wYWlnblJlY29tbWVuZGF0aW9uczogQ2FtcGFpZ25SZWNvbW1lbmRhdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVTY3JpcHRFcnJvciB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIGxpbmU6IG51bWJlcjtcbiAgY29sdW1uOiBudW1iZXI7XG4gIGNvZGU6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeTtcbiAgcHJpb3JpdHk6IG51bWJlcjtcbiAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlnaEltcGFjdEZpbGUge1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBlcnJvckNvdW50OiBudW1iZXI7XG4gIGNhdGVnb3JpZXM6IEVycm9yQ2F0ZWdvcnlbXTtcbiAgYXZlcmFnZVByaW9yaXR5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRml4UmVjb21tZW5kYXRpb24ge1xuICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeTtcbiAgZXJyb3JDb3VudDogbnVtYmVyO1xuICBmaXhTdHJhdGVneTogc3RyaW5nO1xuICBlc3RpbWF0ZWRFZmZvcnQ6IG51bWJlcjsgLy8gbWludXRlc1xuICBiYXRjaFNpemU6IG51bWJlcjtcbiAgcHJpb3JpdHk6IG51bWJlcjtcbiAgc3VjY2Vzc1JhdGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYW1wYWlnblJlY29tbWVuZGF0aW9uIHtcbiAgbW9kZTogQ2FtcGFpZ25Nb2RlO1xuICBwaGFzZXM6IHN0cmluZ1tdO1xuICBlc3RpbWF0ZWREdXJhdGlvbjogbnVtYmVyO1xuICBzYWZldHlMZXZlbDogU2FmZXR5TGV2ZWw7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hTY2hlZHVsZSB7XG4gIGJhdGNoZXM6IFByb2Nlc3NpbmdCYXRjaFtdO1xuICB0b3RhbEVzdGltYXRlZFRpbWU6IG51bWJlcjtcbiAgc2FmZXR5UHJvdG9jb2xzOiBTYWZldHlQcm90b2NvbFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2Nlc3NpbmdCYXRjaCB7XG4gIGlkOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5O1xuICBmaWxlczogc3RyaW5nW107XG4gIGJhdGNoU2l6ZTogbnVtYmVyO1xuICBlc3RpbWF0ZWREdXJhdGlvbjogbnVtYmVyO1xuICBzYWZldHlMZXZlbDogU2FmZXR5TGV2ZWw7XG4gIHNjaGVkdWxlZFRpbWU6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FmZXR5UHJvdG9jb2wge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHRyaWdnZXJzOiBzdHJpbmdbXTtcbiAgYWN0aW9uczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBlbnVtIENhbXBhaWduTW9kZSB7XG4gIEVNRVJHRU5DWSA9ICdFTUVSR0VOQ1knLFxuICBBR0dSRVNTSVZFID0gJ0FHR1JFU1NJVkUnLFxuICBTVEFOREFSRCA9ICdTVEFOREFSRCcsXG4gIE1PTklUT1JJTkcgPSAnTU9OSVRPUklORycsXG59XG5cbmV4cG9ydCBlbnVtIEVycm9yQ2F0ZWdvcnkge1xuICBUUzIzNTIgPSAnVFMyMzUyJywgLy8gVHlwZSBjb252ZXJzaW9uIGVycm9yc1xuICBUUzIzMDQgPSAnVFMyMzA0JywgLy8gQ2Fubm90IGZpbmQgbmFtZSBlcnJvcnNcbiAgVFMyMzQ1ID0gJ1RTMjM0NScsIC8vIEFyZ3VtZW50IHR5cGUgbWlzbWF0Y2hcbiAgVFMyNjk4ID0gJ1RTMjY5OCcsIC8vIFNwcmVhZCBzeW50YXggZXJyb3JzXG4gIFRTMjM2MiA9ICdUUzIzNjInLCAvLyBBcml0aG1ldGljIG9wZXJhdGlvbiBlcnJvcnNcbiAgT1RIRVIgPSAnT1RIRVInLFxufVxuXG5leHBvcnQgZW51bSBFcnJvclNldmVyaXR5IHtcbiAgSElHSCA9ICdISUdIJyxcbiAgTUVESVVNID0gJ01FRElVTScsXG4gIExPVyA9ICdMT1cnLFxufVxuXG5leHBvcnQgZW51bSBTYWZldHlMZXZlbCB7XG4gIE1BWElNVU0gPSAnTUFYSU1VTScsXG4gIEhJR0ggPSAnSElHSCcsXG4gIE1FRElVTSA9ICdNRURJVU0nLFxufVxuXG4vLyBDb25maWd1cmF0aW9uIGNvbnN0YW50c1xuY29uc3QgRVJST1JfVEhSRVNIT0xEUyA9IHtcbiAgQ1JJVElDQUw6IDUwMCwgLy8gRW1lcmdlbmN5IGNhbXBhaWduIG1vZGVcbiAgSElHSDogMjAwLCAvLyBBZ2dyZXNzaXZlIGNhbXBhaWduIG1vZGVcbiAgTUVESVVNOiAxMDAsIC8vIFN0YW5kYXJkIGNhbXBhaWduIG1vZGVcbiAgTU9OSVRPUklORzogNTAsIC8vIFByb2FjdGl2ZSBtb25pdG9yaW5nIG9ubHlcbn07XG5cbmNvbnN0IENBVEVHT1JZX1NVQ0NFU1NfUkFURVMgPSB7XG4gIFtFcnJvckNhdGVnb3J5LlRTMjM1Ml06IDAuOTIsXG4gIFtFcnJvckNhdGVnb3J5LlRTMjMwNF06IDAuOTUsXG4gIFtFcnJvckNhdGVnb3J5LlRTMjM0NV06IDAuODgsXG4gIFtFcnJvckNhdGVnb3J5LlRTMjY5OF06IDAuODUsXG4gIFtFcnJvckNhdGVnb3J5LlRTMjM2Ml06IDAuOSxcbiAgW0Vycm9yQ2F0ZWdvcnkuT1RIRVJdOiAwLjcsXG59O1xuXG5jb25zdCBDQVRFR09SWV9QUklPUklUWV9XRUlHSFRTID0ge1xuICBbRXJyb3JDYXRlZ29yeS5UUzIzNTJdOiAwLjk1LFxuICBbRXJyb3JDYXRlZ29yeS5UUzIzMDRdOiAwLjk1LFxuICBbRXJyb3JDYXRlZ29yeS5UUzIzNDVdOiAwLjg4LFxuICBbRXJyb3JDYXRlZ29yeS5UUzI2OThdOiAwLjg1LFxuICBbRXJyb3JDYXRlZ29yeS5UUzIzNjJdOiAwLjksXG4gIFtFcnJvckNhdGVnb3J5Lk9USEVSXTogMC43LFxufTtcblxuLyoqXG4gKiBNYWluIGZ1bmN0aW9uIHRvIGFuYWx5emUgVHlwZVNjcmlwdCBlcnJvcnMgYW5kIGRldGVybWluZSBjYW1wYWlnbiB0cmlnZ2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhbmFseXplVHlwZVNjcmlwdEVycm9ycygpOiBQcm9taXNlPENhbXBhaWduVHJpZ2dlclJlc3VsdD4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gIHRyeSB7XG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICAnU3RhcnRpbmcgVHlwZVNjcmlwdCBlcnJvciBhbmFseXNpcyBmb3IgY2FtcGFpZ24gdHJpZ2dlciBldmFsdWF0aW9uJ1xuICAgICk7XG5cbiAgICAvLyAxLiBHZXQgY3VycmVudCBUeXBlU2NyaXB0IGVycm9yIGNvdW50IGFuZCBkZXRhaWxzXG4gICAgY29uc3QgZXJyb3JBbmFseXNpcyA9IGF3YWl0IGdldFR5cGVTY3JpcHRFcnJvckFuYWx5c2lzKCk7XG5cbiAgICAvLyAyLiBEZXRlcm1pbmUgaWYgY2FtcGFpZ24gc2hvdWxkIGJlIHRyaWdnZXJlZFxuICAgIGNvbnN0IHNob3VsZFRyaWdnZXIgPSBzaG91bGRUcmlnZ2VyQ2FtcGFpZ24oZXJyb3JBbmFseXNpcy50b3RhbEVycm9ycyk7XG5cbiAgICAvLyAzLiBEZXRlcm1pbmUgY2FtcGFpZ24gbW9kZSBiYXNlZCBvbiBlcnJvciBjb3VudFxuICAgIGNvbnN0IGNhbXBhaWduTW9kZSA9IGRldGVybWluZUNhbXBhaWduTW9kZShlcnJvckFuYWx5c2lzLnRvdGFsRXJyb3JzKTtcblxuICAgIC8vIDQuIEdlbmVyYXRlIGZpeCByZWNvbW1lbmRhdGlvbnNcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBnZW5lcmF0ZUZpeFJlY29tbWVuZGF0aW9ucyhlcnJvckFuYWx5c2lzKTtcblxuICAgIC8vIDUuIENyZWF0ZSBiYXRjaCBwcm9jZXNzaW5nIHNjaGVkdWxlXG4gICAgY29uc3QgYmF0Y2hTY2hlZHVsZSA9IGNyZWF0ZUJhdGNoU2NoZWR1bGUocmVjb21tZW5kYXRpb25zLCBjYW1wYWlnbk1vZGUpO1xuXG4gICAgLy8gNi4gQ2FsY3VsYXRlIGVzdGltYXRlZCBkdXJhdGlvblxuICAgIGNvbnN0IGVzdGltYXRlZER1cmF0aW9uID0gY2FsY3VsYXRlVG90YWxFc3RpbWF0ZWREdXJhdGlvbihiYXRjaFNjaGVkdWxlKTtcblxuICAgIC8vIDcuIERldGVybWluZSBzYWZldHkgbGV2ZWxcbiAgICBjb25zdCBzYWZldHlMZXZlbCA9IGRldGVybWluZVNhZmV0eUxldmVsKGNhbXBhaWduTW9kZSk7XG5cbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICBgVHlwZVNjcmlwdCBlcnJvciBhbmFseXNpcyBjb21wbGV0ZWQgaW4gJHtkdXJhdGlvbn1tczogJHtlcnJvckFuYWx5c2lzLnRvdGFsRXJyb3JzfSBlcnJvcnMgZm91bmRgXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzaG91bGRUcmlnZ2VyLFxuICAgICAgY2FtcGFpZ25Nb2RlLFxuICAgICAgZXJyb3JBbmFseXNpcyxcbiAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgIGJhdGNoU2NoZWR1bGUsXG4gICAgICBlc3RpbWF0ZWREdXJhdGlvbixcbiAgICAgIHNhZmV0eUxldmVsLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdUeXBlU2NyaXB0IGVycm9yIGFuYWx5c2lzIGZhaWxlZDonLCBlcnJvcik7XG5cbiAgICAvLyBSZXR1cm4gc2FmZSBkZWZhdWx0c1xuICAgIHJldHVybiB7XG4gICAgICBzaG91bGRUcmlnZ2VyOiBmYWxzZSxcbiAgICAgIGNhbXBhaWduTW9kZTogQ2FtcGFpZ25Nb2RlLk1PTklUT1JJTkcsXG4gICAgICBlcnJvckFuYWx5c2lzOiB7XG4gICAgICAgIHRvdGFsRXJyb3JzOiAtMSxcbiAgICAgICAgZXJyb3JzQnlDYXRlZ29yeToge30sXG4gICAgICAgIGVycm9yc0J5RmlsZToge30sXG4gICAgICAgIGhpZ2hJbXBhY3RGaWxlczogW10sXG4gICAgICAgIHByaW9yaXR5UmFua2luZzogW10sXG4gICAgICAgIGNhbXBhaWduUmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgICAgYmF0Y2hTY2hlZHVsZToge1xuICAgICAgICBiYXRjaGVzOiBbXSxcbiAgICAgICAgdG90YWxFc3RpbWF0ZWRUaW1lOiAwLFxuICAgICAgICBzYWZldHlQcm90b2NvbHM6IFtdLFxuICAgICAgfSxcbiAgICAgIGVzdGltYXRlZER1cmF0aW9uOiAwLFxuICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLk1BWElNVU0sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBjb21wcmVoZW5zaXZlIFR5cGVTY3JpcHQgZXJyb3IgYW5hbHlzaXNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0VHlwZVNjcmlwdEVycm9yQW5hbHlzaXMoKTogUHJvbWlzZTxFcnJvckFuYWx5c2lzUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IFR5cGVTY3JpcHQgZXJyb3JzIHVzaW5nIHRzYyBjb21tYW5kXG4gICAgY29uc3QgZXJyb3JPdXRwdXQgPSBhd2FpdCBnZXRUeXBlU2NyaXB0RXJyb3JzKCk7XG5cbiAgICAvLyBQYXJzZSBlcnJvcnMgaW50byBzdHJ1Y3R1cmVkIGZvcm1hdFxuICAgIGNvbnN0IGVycm9ycyA9IHBhcnNlVHlwZVNjcmlwdEVycm9ycyhlcnJvck91dHB1dCk7XG5cbiAgICAvLyBDYXRlZ29yaXplIGVycm9yc1xuICAgIGNvbnN0IGVycm9yc0J5Q2F0ZWdvcnkgPSBjYXRlZ29yaXplRXJyb3JzKGVycm9ycyk7XG5cbiAgICAvLyBHcm91cCBlcnJvcnMgYnkgZmlsZVxuICAgIGNvbnN0IGVycm9yc0J5RmlsZSA9IGdyb3VwRXJyb3JzQnlGaWxlKGVycm9ycyk7XG5cbiAgICAvLyBJZGVudGlmeSBoaWdoLWltcGFjdCBmaWxlc1xuICAgIGNvbnN0IGhpZ2hJbXBhY3RGaWxlcyA9IGlkZW50aWZ5SGlnaEltcGFjdEZpbGVzKGVycm9yc0J5RmlsZSk7XG5cbiAgICAvLyBDcmVhdGUgcHJpb3JpdHkgcmFua2luZ1xuICAgIGNvbnN0IHByaW9yaXR5UmFua2luZyA9IGNyZWF0ZVByaW9yaXR5UmFua2luZyhlcnJvcnMpO1xuXG4gICAgLy8gR2VuZXJhdGUgY2FtcGFpZ24gcmVjb21tZW5kYXRpb25zXG4gICAgY29uc3QgY2FtcGFpZ25SZWNvbW1lbmRhdGlvbnMgPSBnZW5lcmF0ZUNhbXBhaWduUmVjb21tZW5kYXRpb25zKFxuICAgICAgZXJyb3JzLmxlbmd0aCxcbiAgICAgIGVycm9yc0J5Q2F0ZWdvcnlcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRXJyb3JzOiBlcnJvcnMubGVuZ3RoLFxuICAgICAgZXJyb3JzQnlDYXRlZ29yeSxcbiAgICAgIGVycm9yc0J5RmlsZSxcbiAgICAgIGhpZ2hJbXBhY3RGaWxlcyxcbiAgICAgIHByaW9yaXR5UmFua2luZyxcbiAgICAgIGNhbXBhaWduUmVjb21tZW5kYXRpb25zLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBnZXR0aW5nIFR5cGVTY3JpcHQgZXJyb3IgYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogR2V0IFR5cGVTY3JpcHQgZXJyb3JzIGZyb20gY29tcGlsYXRpb25cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0VHlwZVNjcmlwdEVycm9ycygpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIFJ1biBUeXBlU2NyaXB0IGNvbXBpbGVyIHRvIGdldCBlcnJvcnNcbiAgICBjb25zdCBvdXRwdXQgPSBleGVjU3luYygneWFybiB0c2MgLS1ub0VtaXQgLS1za2lwTGliQ2hlY2sgMj4mMScsIHtcbiAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICBzdGRpbzogJ3BpcGUnLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIC8vIHRzYyByZXR1cm5zIG5vbi16ZXJvIGV4aXQgY29kZSB3aGVuIHRoZXJlIGFyZSBlcnJvcnMsIHdoaWNoIGlzIGV4cGVjdGVkXG4gICAgaWYgKGVycm9yLnN0ZG91dCkge1xuICAgICAgcmV0dXJuIGVycm9yLnN0ZG91dDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIG5vIHN0ZG91dCwgdGhpcyBtaWdodCBiZSBhIHJlYWwgZmFpbHVyZVxuICAgIGlmIChlcnJvci5zdGRlcnIgfHwgZXJyb3IubWVzc2FnZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBmYWlsZWQ6ICR7ZXJyb3Iuc3RkZXJyIHx8IGVycm9yLm1lc3NhZ2V9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIG5vIHN0ZG91dCBvciBzdGRlcnIsIGFzc3VtZSBubyBlcnJvcnNcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBUeXBlU2NyaXB0IGVycm9yIG91dHB1dCBpbnRvIHN0cnVjdHVyZWQgZm9ybWF0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlVHlwZVNjcmlwdEVycm9ycyhlcnJvck91dHB1dDogc3RyaW5nKTogVHlwZVNjcmlwdEVycm9yW10ge1xuICBjb25zdCBlcnJvcnM6IFR5cGVTY3JpcHRFcnJvcltdID0gW107XG5cbiAgaWYgKCFlcnJvck91dHB1dC50cmltKCkpIHtcbiAgICByZXR1cm4gZXJyb3JzO1xuICB9XG5cbiAgY29uc3QgbGluZXMgPSBlcnJvck91dHB1dC5zcGxpdCgnXFxuJyk7XG5cbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgLy8gTWF0Y2ggVHlwZVNjcmlwdCBlcnJvciBmb3JtYXQ6IGZpbGUobGluZSxjb2wpOiBlcnJvciBUU3h4eHg6IG1lc3NhZ2VcbiAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goXG4gICAgICAvXiguKz8pXFwoKFxcZCspLChcXGQrKVxcKTpcXHMqZXJyb3JcXHMrKFRTXFxkKyk6XFxzKiguKykkL1xuICAgICk7XG5cbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IFssIGZpbGVQYXRoLCBsaW5lU3RyLCBjb2xTdHIsIGNvZGUsIG1lc3NhZ2VdID0gbWF0Y2g7XG4gICAgICBjb25zdCBsaW5lTnVtID0gcGFyc2VJbnQobGluZVN0ciwgMTApO1xuICAgICAgY29uc3QgY29sTnVtID0gcGFyc2VJbnQoY29sU3RyLCAxMCk7XG5cbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gY2F0ZWdvcml6ZUVycm9yQ29kZShjb2RlKTtcbiAgICAgIGNvbnN0IHNldmVyaXR5ID0gZGV0ZXJtaW5lU2V2ZXJpdHkoY2F0ZWdvcnkpO1xuICAgICAgY29uc3QgcHJpb3JpdHkgPSBjYWxjdWxhdGVQcmlvcml0eShjYXRlZ29yeSwgc2V2ZXJpdHkpO1xuXG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIGZpbGVQYXRoOiBmaWxlUGF0aC50cmltKCksXG4gICAgICAgIGxpbmU6IGxpbmVOdW0sXG4gICAgICAgIGNvbHVtbjogY29sTnVtLFxuICAgICAgICBjb2RlLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLnRyaW0oKSxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBzZXZlcml0eSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlcnJvcnM7XG59XG5cbi8qKlxuICogQ2F0ZWdvcml6ZSBlcnJvciBieSBUeXBlU2NyaXB0IGVycm9yIGNvZGVcbiAqL1xuZnVuY3Rpb24gY2F0ZWdvcml6ZUVycm9yQ29kZShjb2RlOiBzdHJpbmcpOiBFcnJvckNhdGVnb3J5IHtcbiAgc3dpdGNoIChjb2RlKSB7XG4gICAgY2FzZSAnVFMyMzUyJzpcbiAgICAgIHJldHVybiBFcnJvckNhdGVnb3J5LlRTMjM1MjtcbiAgICBjYXNlICdUUzIzMDQnOlxuICAgICAgcmV0dXJuIEVycm9yQ2F0ZWdvcnkuVFMyMzA0O1xuICAgIGNhc2UgJ1RTMjM0NSc6XG4gICAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5UUzIzNDU7XG4gICAgY2FzZSAnVFMyNjk4JzpcbiAgICAgIHJldHVybiBFcnJvckNhdGVnb3J5LlRTMjY5ODtcbiAgICBjYXNlICdUUzIzNjInOlxuICAgICAgcmV0dXJuIEVycm9yQ2F0ZWdvcnkuVFMyMzYyO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5PVEhFUjtcbiAgfVxufVxuXG4vKipcbiAqIERldGVybWluZSBlcnJvciBzZXZlcml0eSBiYXNlZCBvbiBjYXRlZ29yeVxuICovXG5mdW5jdGlvbiBkZXRlcm1pbmVTZXZlcml0eShjYXRlZ29yeTogRXJyb3JDYXRlZ29yeSk6IEVycm9yU2V2ZXJpdHkge1xuICBzd2l0Y2ggKGNhdGVnb3J5KSB7XG4gICAgY2FzZSBFcnJvckNhdGVnb3J5LlRTMjM1MjpcbiAgICBjYXNlIEVycm9yQ2F0ZWdvcnkuVFMyMzA0OlxuICAgICAgcmV0dXJuIEVycm9yU2V2ZXJpdHkuSElHSDtcbiAgICBjYXNlIEVycm9yQ2F0ZWdvcnkuVFMyMzQ1OlxuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5UUzI2OTg6XG4gICAgY2FzZSBFcnJvckNhdGVnb3J5LlRTMjM2MjpcbiAgICAgIHJldHVybiBFcnJvclNldmVyaXR5Lk1FRElVTTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEVycm9yU2V2ZXJpdHkuTE9XO1xuICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHByaW9yaXR5IHNjb3JlIGZvciBlcnJvclxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVQcmlvcml0eShcbiAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnksXG4gIHNldmVyaXR5OiBFcnJvclNldmVyaXR5XG4pOiBudW1iZXIge1xuICBjb25zdCBjYXRlZ29yeVdlaWdodCA9IENBVEVHT1JZX1BSSU9SSVRZX1dFSUdIVFNbY2F0ZWdvcnldIHx8IDAuNTtcbiAgY29uc3Qgc2V2ZXJpdHlXZWlnaHQgPVxuICAgIHNldmVyaXR5ID09PSBFcnJvclNldmVyaXR5LkhJR0hcbiAgICAgID8gMS4wXG4gICAgICA6IHNldmVyaXR5ID09PSBFcnJvclNldmVyaXR5Lk1FRElVTVxuICAgICAgICA/IDAuN1xuICAgICAgICA6IDAuNDtcblxuICByZXR1cm4gY2F0ZWdvcnlXZWlnaHQgKiBzZXZlcml0eVdlaWdodDtcbn1cblxuLyoqXG4gKiBDYXRlZ29yaXplIGVycm9ycyBieSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNhdGVnb3JpemVFcnJvcnMoXG4gIGVycm9yczogVHlwZVNjcmlwdEVycm9yW11cbik6IFJlY29yZDxzdHJpbmcsIFR5cGVTY3JpcHRFcnJvcltdPiB7XG4gIGNvbnN0IGNhdGVnb3JpemVkOiBSZWNvcmQ8c3RyaW5nLCBUeXBlU2NyaXB0RXJyb3JbXT4gPSB7fTtcblxuICBmb3IgKGNvbnN0IGVycm9yIG9mIGVycm9ycykge1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gZXJyb3IuY2F0ZWdvcnk7XG4gICAgaWYgKCFjYXRlZ29yaXplZFtjYXRlZ29yeV0pIHtcbiAgICAgIGNhdGVnb3JpemVkW2NhdGVnb3J5XSA9IFtdO1xuICAgIH1cbiAgICBjYXRlZ29yaXplZFtjYXRlZ29yeV0ucHVzaChlcnJvcik7XG4gIH1cblxuICByZXR1cm4gY2F0ZWdvcml6ZWQ7XG59XG5cbi8qKlxuICogR3JvdXAgZXJyb3JzIGJ5IGZpbGUgcGF0aFxuICovXG5mdW5jdGlvbiBncm91cEVycm9yc0J5RmlsZShcbiAgZXJyb3JzOiBUeXBlU2NyaXB0RXJyb3JbXVxuKTogUmVjb3JkPHN0cmluZywgVHlwZVNjcmlwdEVycm9yW10+IHtcbiAgY29uc3QgZ3JvdXBlZDogUmVjb3JkPHN0cmluZywgVHlwZVNjcmlwdEVycm9yW10+ID0ge307XG5cbiAgZm9yIChjb25zdCBlcnJvciBvZiBlcnJvcnMpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGVycm9yLmZpbGVQYXRoO1xuICAgIGlmICghZ3JvdXBlZFtmaWxlUGF0aF0pIHtcbiAgICAgIGdyb3VwZWRbZmlsZVBhdGhdID0gW107XG4gICAgfVxuICAgIGdyb3VwZWRbZmlsZVBhdGhdLnB1c2goZXJyb3IpO1xuICB9XG5cbiAgcmV0dXJuIGdyb3VwZWQ7XG59XG5cbi8qKlxuICogSWRlbnRpZnkgaGlnaC1pbXBhY3QgZmlsZXMgd2l0aCBtYW55IGVycm9yc1xuICovXG5mdW5jdGlvbiBpZGVudGlmeUhpZ2hJbXBhY3RGaWxlcyhcbiAgZXJyb3JzQnlGaWxlOiBSZWNvcmQ8c3RyaW5nLCBUeXBlU2NyaXB0RXJyb3JbXT5cbik6IEhpZ2hJbXBhY3RGaWxlW10ge1xuICBjb25zdCBoaWdoSW1wYWN0RmlsZXM6IEhpZ2hJbXBhY3RGaWxlW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IFtmaWxlUGF0aCwgZXJyb3JzXSBvZiBPYmplY3QuZW50cmllcyhlcnJvcnNCeUZpbGUpKSB7XG4gICAgaWYgKGVycm9ycy5sZW5ndGggPj0gNSkge1xuICAgICAgLy8gRmlsZXMgd2l0aCA1KyBlcnJvcnMgYXJlIGhpZ2ggaW1wYWN0XG4gICAgICBjb25zdCBjYXRlZ29yaWVzID0gWy4uLm5ldyBTZXQoZXJyb3JzLm1hcChlID0+IGUuY2F0ZWdvcnkpKV07XG4gICAgICBjb25zdCBhdmVyYWdlUHJpb3JpdHkgPVxuICAgICAgICBlcnJvcnMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIGUucHJpb3JpdHksIDApIC8gZXJyb3JzLmxlbmd0aDtcblxuICAgICAgaGlnaEltcGFjdEZpbGVzLnB1c2goe1xuICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgZXJyb3JDb3VudDogZXJyb3JzLmxlbmd0aCxcbiAgICAgICAgY2F0ZWdvcmllcyxcbiAgICAgICAgYXZlcmFnZVByaW9yaXR5LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU29ydCBieSBlcnJvciBjb3VudCBkZXNjZW5kaW5nXG4gIHJldHVybiBoaWdoSW1wYWN0RmlsZXMuc29ydCgoYSwgYikgPT4gYi5lcnJvckNvdW50IC0gYS5lcnJvckNvdW50KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcHJpb3JpdHkgcmFua2luZyBvZiBlcnJvcnNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHJpb3JpdHlSYW5raW5nKGVycm9yczogVHlwZVNjcmlwdEVycm9yW10pOiBUeXBlU2NyaXB0RXJyb3JbXSB7XG4gIHJldHVybiBbLi4uZXJyb3JzXS5zb3J0KChhLCBiKSA9PiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgY2FtcGFpZ24gcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGVycm9yIGFuYWx5c2lzXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlQ2FtcGFpZ25SZWNvbW1lbmRhdGlvbnMoXG4gIHRvdGFsRXJyb3JzOiBudW1iZXIsXG4gIGVycm9yc0J5Q2F0ZWdvcnk6IFJlY29yZDxzdHJpbmcsIFR5cGVTY3JpcHRFcnJvcltdPlxuKTogQ2FtcGFpZ25SZWNvbW1lbmRhdGlvbltdIHtcbiAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBDYW1wYWlnblJlY29tbWVuZGF0aW9uW10gPSBbXTtcblxuICBpZiAodG90YWxFcnJvcnMgPj0gRVJST1JfVEhSRVNIT0xEUy5DUklUSUNBTCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgIG1vZGU6IENhbXBhaWduTW9kZS5FTUVSR0VOQ1ksXG4gICAgICBwaGFzZXM6IFtcbiAgICAgICAgJ3R5cGVzY3JpcHQtZXJyb3ItZWxpbWluYXRpb24nLFxuICAgICAgICAnYnVpbGQtc3RhYmlsaXphdGlvbicsXG4gICAgICAgICdzYWZldHktdmFsaWRhdGlvbicsXG4gICAgICBdLFxuICAgICAgZXN0aW1hdGVkRHVyYXRpb246IE1hdGguY2VpbCh0b3RhbEVycm9ycyAqIDAuNSksIC8vIDMwIHNlY29uZHMgcGVyIGVycm9yXG4gICAgICBzYWZldHlMZXZlbDogU2FmZXR5TGV2ZWwuTUFYSU1VTSxcbiAgICAgIGRlc2NyaXB0aW9uOiBgRW1lcmdlbmN5IGNhbXBhaWduIGZvciAke3RvdGFsRXJyb3JzfSBjcml0aWNhbCBlcnJvcnNgLFxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHRvdGFsRXJyb3JzID49IEVSUk9SX1RIUkVTSE9MRFMuSElHSCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgIG1vZGU6IENhbXBhaWduTW9kZS5BR0dSRVNTSVZFLFxuICAgICAgcGhhc2VzOiBbJ3R5cGVzY3JpcHQtZXJyb3ItZWxpbWluYXRpb24nLCAndGFyZ2V0ZWQtZml4ZXMnXSxcbiAgICAgIGVzdGltYXRlZER1cmF0aW9uOiBNYXRoLmNlaWwodG90YWxFcnJvcnMgKiAwLjMpLCAvLyAxOCBzZWNvbmRzIHBlciBlcnJvclxuICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLkhJR0gsXG4gICAgICBkZXNjcmlwdGlvbjogYEFnZ3Jlc3NpdmUgY2FtcGFpZ24gZm9yICR7dG90YWxFcnJvcnN9IGhpZ2gtcHJpb3JpdHkgZXJyb3JzYCxcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0b3RhbEVycm9ycyA+PSBFUlJPUl9USFJFU0hPTERTLk1FRElVTSkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgIG1vZGU6IENhbXBhaWduTW9kZS5TVEFOREFSRCxcbiAgICAgIHBoYXNlczogWyd0YXJnZXRlZC1lcnJvci1yZWR1Y3Rpb24nXSxcbiAgICAgIGVzdGltYXRlZER1cmF0aW9uOiBNYXRoLmNlaWwodG90YWxFcnJvcnMgKiAwLjIpLCAvLyAxMiBzZWNvbmRzIHBlciBlcnJvclxuICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLk1FRElVTSxcbiAgICAgIGRlc2NyaXB0aW9uOiBgU3RhbmRhcmQgY2FtcGFpZ24gZm9yICR7dG90YWxFcnJvcnN9IGVycm9yc2AsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBjYW1wYWlnbiBzaG91bGQgYmUgdHJpZ2dlcmVkXG4gKi9cbmZ1bmN0aW9uIHNob3VsZFRyaWdnZXJDYW1wYWlnbihlcnJvckNvdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGVycm9yQ291bnQgPj0gRVJST1JfVEhSRVNIT0xEUy5NRURJVU07XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGNhbXBhaWduIG1vZGUgYmFzZWQgb24gZXJyb3IgY291bnRcbiAqL1xuZnVuY3Rpb24gZGV0ZXJtaW5lQ2FtcGFpZ25Nb2RlKGVycm9yQ291bnQ6IG51bWJlcik6IENhbXBhaWduTW9kZSB7XG4gIGlmIChlcnJvckNvdW50ID49IEVSUk9SX1RIUkVTSE9MRFMuQ1JJVElDQUwpIHtcbiAgICByZXR1cm4gQ2FtcGFpZ25Nb2RlLkVNRVJHRU5DWTtcbiAgfSBlbHNlIGlmIChlcnJvckNvdW50ID49IEVSUk9SX1RIUkVTSE9MRFMuSElHSCkge1xuICAgIHJldHVybiBDYW1wYWlnbk1vZGUuQUdHUkVTU0lWRTtcbiAgfSBlbHNlIGlmIChlcnJvckNvdW50ID49IEVSUk9SX1RIUkVTSE9MRFMuTUVESVVNKSB7XG4gICAgcmV0dXJuIENhbXBhaWduTW9kZS5TVEFOREFSRDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gQ2FtcGFpZ25Nb2RlLk1PTklUT1JJTkc7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBmaXggcmVjb21tZW5kYXRpb25zIGZvciBlYWNoIGVycm9yIGNhdGVnb3J5XG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlRml4UmVjb21tZW5kYXRpb25zKFxuICBhbmFseXNpczogRXJyb3JBbmFseXNpc1Jlc3VsdFxuKTogRml4UmVjb21tZW5kYXRpb25bXSB7XG4gIGNvbnN0IHJlY29tbWVuZGF0aW9uczogRml4UmVjb21tZW5kYXRpb25bXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgW2NhdGVnb3J5LCBlcnJvcnNdIG9mIE9iamVjdC5lbnRyaWVzKGFuYWx5c2lzLmVycm9yc0J5Q2F0ZWdvcnkpKSB7XG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBlcnJvckNhdGVnb3J5ID0gY2F0ZWdvcnkgYXMgRXJyb3JDYXRlZ29yeTtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gQ0FURUdPUllfU1VDQ0VTU19SQVRFU1tlcnJvckNhdGVnb3J5XSB8fCAwLjc7XG4gICAgICBjb25zdCBlc3RpbWF0ZWRFZmZvcnQgPSBjYWxjdWxhdGVFc3RpbWF0ZWRFZmZvcnQoZXJyb3JzKTtcbiAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IGRldGVybWluZUJhdGNoU2l6ZShlcnJvcnMubGVuZ3RoLCBlcnJvckNhdGVnb3J5KTtcbiAgICAgIGNvbnN0IHByaW9yaXR5ID0gY2FsY3VsYXRlQ2F0ZWdvcnlQcmlvcml0eShlcnJvckNhdGVnb3J5LCBlcnJvcnMubGVuZ3RoKTtcblxuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogZXJyb3JDYXRlZ29yeSxcbiAgICAgICAgZXJyb3JDb3VudDogZXJyb3JzLmxlbmd0aCxcbiAgICAgICAgZml4U3RyYXRlZ3k6IGdldEZpeFN0cmF0ZWd5KGVycm9yQ2F0ZWdvcnkpLFxuICAgICAgICBlc3RpbWF0ZWRFZmZvcnQsXG4gICAgICAgIGJhdGNoU2l6ZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIHN1Y2Nlc3NSYXRlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucy5zb3J0KChhLCBiKSA9PiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIGVzdGltYXRlZCBlZmZvcnQgZm9yIGZpeGluZyBlcnJvcnNcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlRXN0aW1hdGVkRWZmb3J0KGVycm9yczogVHlwZVNjcmlwdEVycm9yW10pOiBudW1iZXIge1xuICAvLyBCYXNlIHRpbWUgcGVyIGVycm9yIGluIG1pbnV0ZXNcbiAgY29uc3QgYmFzZVRpbWVQZXJFcnJvciA9IDAuNTsgLy8gMzAgc2Vjb25kc1xuXG4gIC8vIEFkanVzdCBiYXNlZCBvbiBjb21wbGV4aXR5XG4gIGxldCB0b3RhbFRpbWUgPSAwO1xuICBmb3IgKGNvbnN0IGVycm9yIG9mIGVycm9ycykge1xuICAgIGxldCBtdWx0aXBsaWVyID0gMS4wO1xuXG4gICAgc3dpdGNoIChlcnJvci5jYXRlZ29yeSkge1xuICAgICAgY2FzZSBFcnJvckNhdGVnb3J5LlRTMjM1MjpcbiAgICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5UUzIzMDQ6XG4gICAgICAgIG11bHRpcGxpZXIgPSAwLjg7IC8vIEVhc2llciB0byBmaXhcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEVycm9yQ2F0ZWdvcnkuVFMyMzQ1OlxuICAgICAgY2FzZSBFcnJvckNhdGVnb3J5LlRTMjY5ODpcbiAgICAgICAgbXVsdGlwbGllciA9IDEuMjsgLy8gTW9kZXJhdGUgY29tcGxleGl0eVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5UUzIzNjI6XG4gICAgICAgIG11bHRpcGxpZXIgPSAxLjA7IC8vIFN0YW5kYXJkIGNvbXBsZXhpdHlcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBtdWx0aXBsaWVyID0gMS41OyAvLyBNb3JlIGNvbXBsZXhcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdG90YWxUaW1lICs9IGJhc2VUaW1lUGVyRXJyb3IgKiBtdWx0aXBsaWVyO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguY2VpbCh0b3RhbFRpbWUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBvcHRpbWFsIGJhdGNoIHNpemUgZm9yIGVycm9yIGNhdGVnb3J5XG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZUJhdGNoU2l6ZShcbiAgZXJyb3JDb3VudDogbnVtYmVyLFxuICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeVxuKTogbnVtYmVyIHtcbiAgLy8gQmFzZSBiYXRjaCBzaXplcyBieSBjYXRlZ29yeVxuICBjb25zdCBiYXNlQmF0Y2hTaXplcyA9IHtcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzIzNTJdOiAyNSxcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzIzMDRdOiAyMCxcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzIzNDVdOiAxNSxcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzI2OThdOiAxNSxcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzIzNjJdOiAyMCxcbiAgICBbRXJyb3JDYXRlZ29yeS5PVEhFUl06IDEwLFxuICB9O1xuXG4gIGNvbnN0IGJhc2VCYXRjaFNpemUgPSBiYXNlQmF0Y2hTaXplc1tjYXRlZ29yeV0gfHwgMTA7XG5cbiAgLy8gQWRqdXN0IGJhc2VkIG9uIHRvdGFsIGVycm9yIGNvdW50XG4gIGlmIChlcnJvckNvdW50IDwgMTApIHtcbiAgICByZXR1cm4gTWF0aC5taW4oYmFzZUJhdGNoU2l6ZSwgZXJyb3JDb3VudCk7XG4gIH0gZWxzZSBpZiAoZXJyb3JDb3VudCA+IDEwMCkge1xuICAgIHJldHVybiBNYXRoLm1heCg1LCBNYXRoLmZsb29yKGJhc2VCYXRjaFNpemUgKiAwLjUpKTsgLy8gU21hbGxlciBiYXRjaGVzIGZvciBsYXJnZSBjb3VudHNcbiAgfVxuXG4gIHJldHVybiBiYXNlQmF0Y2hTaXplO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBwcmlvcml0eSBmb3IgZXJyb3IgY2F0ZWdvcnlcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQ2F0ZWdvcnlQcmlvcml0eShcbiAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnksXG4gIGVycm9yQ291bnQ6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgY29uc3QgY2F0ZWdvcnlXZWlnaHQgPSBDQVRFR09SWV9QUklPUklUWV9XRUlHSFRTW2NhdGVnb3J5XSB8fCAwLjU7XG4gIGNvbnN0IGNvdW50V2VpZ2h0ID0gTWF0aC5taW4oMS4wLCBlcnJvckNvdW50IC8gNTApOyAvLyBOb3JtYWxpemUgY291bnQgaW1wYWN0XG5cbiAgcmV0dXJuIGNhdGVnb3J5V2VpZ2h0ICogMC43ICsgY291bnRXZWlnaHQgKiAwLjM7XG59XG5cbi8qKlxuICogR2V0IGZpeCBzdHJhdGVneSBkZXNjcmlwdGlvbiBmb3IgZXJyb3IgY2F0ZWdvcnlcbiAqL1xuZnVuY3Rpb24gZ2V0Rml4U3RyYXRlZ3koY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkpOiBzdHJpbmcge1xuICBjb25zdCBzdHJhdGVnaWVzID0ge1xuICAgIFtFcnJvckNhdGVnb3J5LlRTMjM1Ml06ICdFbmhhbmNlZCBFcnJvciBGaXhlciBwYXR0ZXJucyBmb3IgdHlwZSBjb252ZXJzaW9uJyxcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzIzMDRdOiAnSW1wb3J0IHJlc29sdXRpb24gYW5kIGRlY2xhcmF0aW9uIGZpeGVzJyxcbiAgICBbRXJyb3JDYXRlZ29yeS5UUzIzNDVdOiAnUGFyYW1ldGVyIHR5cGUgYWxpZ25tZW50IGFuZCBpbnRlcmZhY2UgdXBkYXRlcycsXG4gICAgW0Vycm9yQ2F0ZWdvcnkuVFMyNjk4XTogJ09iamVjdCBhbmQgYXJyYXkgc3ByZWFkIHN5bnRheCBjb3JyZWN0aW9ucycsXG4gICAgW0Vycm9yQ2F0ZWdvcnkuVFMyMzYyXTogJ1R5cGUgYXNzZXJ0aW9uIGFuZCBhcml0aG1ldGljIG9wZXJhdGlvbiBmaXhlcycsXG4gICAgW0Vycm9yQ2F0ZWdvcnkuT1RIRVJdOiAnTWFudWFsIHJldmlldyBhbmQgY3VzdG9tIHNvbHV0aW9uIGRldmVsb3BtZW50JyxcbiAgfTtcblxuICByZXR1cm4gc3RyYXRlZ2llc1tjYXRlZ29yeV0gfHwgJ0N1c3RvbSBmaXggc3RyYXRlZ3kgcmVxdWlyZWQnO1xufVxuXG4vKipcbiAqIENyZWF0ZSBiYXRjaCBwcm9jZXNzaW5nIHNjaGVkdWxlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJhdGNoU2NoZWR1bGUoXG4gIHJlY29tbWVuZGF0aW9uczogRml4UmVjb21tZW5kYXRpb25bXSxcbiAgbW9kZTogQ2FtcGFpZ25Nb2RlXG4pOiBCYXRjaFNjaGVkdWxlIHtcbiAgY29uc3QgYmF0Y2hlczogUHJvY2Vzc2luZ0JhdGNoW10gPSBbXTtcbiAgY29uc3Qgc2FmZXR5UHJvdG9jb2xzOiBTYWZldHlQcm90b2NvbFtdID0gW107XG4gIGxldCB0b3RhbEVzdGltYXRlZFRpbWUgPSAwO1xuICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpO1xuXG4gIC8vIEFkZCBzYWZldHkgcHJvdG9jb2xzIGJhc2VkIG9uIGNhbXBhaWduIG1vZGVcbiAgc2FmZXR5UHJvdG9jb2xzLnB1c2goLi4uZ2V0U2FmZXR5UHJvdG9jb2xzKG1vZGUpKTtcblxuICBmb3IgKGNvbnN0IHJlY29tbWVuZGF0aW9uIG9mIHJlY29tbWVuZGF0aW9ucykge1xuICAgIGNvbnN0IGJhdGNoOiBQcm9jZXNzaW5nQmF0Y2ggPSB7XG4gICAgICBpZDogZ2VuZXJhdGVCYXRjaElkKCksXG4gICAgICBjYXRlZ29yeTogcmVjb21tZW5kYXRpb24uY2F0ZWdvcnksXG4gICAgICBmaWxlczogW10sIC8vIFdvdWxkIGJlIHBvcHVsYXRlZCB3aXRoIGFjdHVhbCBmaWxlIHBhdGhzXG4gICAgICBiYXRjaFNpemU6IHJlY29tbWVuZGF0aW9uLmJhdGNoU2l6ZSxcbiAgICAgIGVzdGltYXRlZER1cmF0aW9uOiByZWNvbW1lbmRhdGlvbi5lc3RpbWF0ZWRFZmZvcnQsXG4gICAgICBzYWZldHlMZXZlbDogZGV0ZXJtaW5lU2FmZXR5TGV2ZWwobW9kZSksXG4gICAgICBzY2hlZHVsZWRUaW1lOiBuZXcgRGF0ZShjdXJyZW50VGltZSksXG4gICAgfTtcblxuICAgIGJhdGNoZXMucHVzaChiYXRjaCk7XG4gICAgdG90YWxFc3RpbWF0ZWRUaW1lICs9IGJhdGNoLmVzdGltYXRlZER1cmF0aW9uO1xuXG4gICAgLy8gU2NoZWR1bGUgbmV4dCBiYXRjaCB3aXRoIGJ1ZmZlciB0aW1lXG4gICAgY3VycmVudFRpbWUgPSBuZXcgRGF0ZShcbiAgICAgIGN1cnJlbnRUaW1lLmdldFRpbWUoKSArXG4gICAgICAgIGJhdGNoLmVzdGltYXRlZER1cmF0aW9uICogNjAgKiAxMDAwICtcbiAgICAgICAgMiAqIDYwICogMTAwMFxuICAgICk7IC8vIEFkZCAyIG1pbnV0ZSBidWZmZXJcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYmF0Y2hlcyxcbiAgICB0b3RhbEVzdGltYXRlZFRpbWUsXG4gICAgc2FmZXR5UHJvdG9jb2xzLFxuICB9O1xufVxuXG4vKipcbiAqIEdldCBzYWZldHkgcHJvdG9jb2xzIGZvciBjYW1wYWlnbiBtb2RlXG4gKi9cbmZ1bmN0aW9uIGdldFNhZmV0eVByb3RvY29scyhtb2RlOiBDYW1wYWlnbk1vZGUpOiBTYWZldHlQcm90b2NvbFtdIHtcbiAgY29uc3QgcHJvdG9jb2xzOiBTYWZldHlQcm90b2NvbFtdID0gW107XG5cbiAgc3dpdGNoIChtb2RlKSB7XG4gICAgY2FzZSBDYW1wYWlnbk1vZGUuRU1FUkdFTkNZOlxuICAgICAgcHJvdG9jb2xzLnB1c2goe1xuICAgICAgICBuYW1lOiAnRW1lcmdlbmN5IFNhZmV0eSBQcm90b2NvbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTWF4aW11bSBzYWZldHkgd2l0aCB2YWxpZGF0aW9uIGFmdGVyIGV2ZXJ5IGZpbGUnLFxuICAgICAgICB0cmlnZ2VyczogWydCVUlMRF9GQUlMVVJFJywgJ0VSUk9SX0lOQ1JFQVNFJywgJ0NPUlJVUFRJT05fREVURUNURUQnXSxcbiAgICAgICAgYWN0aW9uczogWydJTU1FRElBVEVfUk9MTEJBQ0snLCAnQUxFUlRfVEVBTScsICdQQVVTRV9DQU1QQUlHTiddLFxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgQ2FtcGFpZ25Nb2RlLkFHR1JFU1NJVkU6XG4gICAgICBwcm90b2NvbHMucHVzaCh7XG4gICAgICAgIG5hbWU6ICdBZ2dyZXNzaXZlIFNhZmV0eSBQcm90b2NvbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSGlnaCBzYWZldHkgd2l0aCBmcmVxdWVudCB2YWxpZGF0aW9uIGNoZWNrcG9pbnRzJyxcbiAgICAgICAgdHJpZ2dlcnM6IFsnQlVJTERfRkFJTFVSRScsICdNQUpPUl9FUlJPUl9JTkNSRUFTRSddLFxuICAgICAgICBhY3Rpb25zOiBbJ0FVVE9NQVRJQ19ST0xMQkFDSycsICdSRURVQ0VfQkFUQ0hfU0laRSddLFxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgQ2FtcGFpZ25Nb2RlLlNUQU5EQVJEOlxuICAgICAgcHJvdG9jb2xzLnB1c2goe1xuICAgICAgICBuYW1lOiAnU3RhbmRhcmQgU2FmZXR5IFByb3RvY29sJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdTdGFuZGFyZCBzYWZldHkgd2l0aCBidWlsZCB2YWxpZGF0aW9uJyxcbiAgICAgICAgdHJpZ2dlcnM6IFsnQlVJTERfRkFJTFVSRSddLFxuICAgICAgICBhY3Rpb25zOiBbJ1JPTExCQUNLX0JBVENIJywgJ05PVElGWV9ERVZFTE9QRVInXSxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gcHJvdG9jb2xzO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB0b3RhbCBlc3RpbWF0ZWQgZHVyYXRpb25cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxFc3RpbWF0ZWREdXJhdGlvbihzY2hlZHVsZTogQmF0Y2hTY2hlZHVsZSk6IG51bWJlciB7XG4gIHJldHVybiBzY2hlZHVsZS50b3RhbEVzdGltYXRlZFRpbWU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHNhZmV0eSBsZXZlbCBiYXNlZCBvbiBjYW1wYWlnbiBtb2RlXG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZVNhZmV0eUxldmVsKG1vZGU6IENhbXBhaWduTW9kZSk6IFNhZmV0eUxldmVsIHtcbiAgc3dpdGNoIChtb2RlKSB7XG4gICAgY2FzZSBDYW1wYWlnbk1vZGUuRU1FUkdFTkNZOlxuICAgICAgcmV0dXJuIFNhZmV0eUxldmVsLk1BWElNVU07XG4gICAgY2FzZSBDYW1wYWlnbk1vZGUuQUdHUkVTU0lWRTpcbiAgICAgIHJldHVybiBTYWZldHlMZXZlbC5ISUdIO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gU2FmZXR5TGV2ZWwuTUVESVVNO1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGUgdW5pcXVlIGJhdGNoIElEXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlQmF0Y2hJZCgpOiBzdHJpbmcge1xuICByZXR1cm4gYGJhdGNoXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCBUeXBlU2NyaXB0IGVycm9yIGNvdW50IChzaW1wbGUgdmVyc2lvbilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRUeXBlU2NyaXB0RXJyb3JDb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVycm9yT3V0cHV0ID0gYXdhaXQgZ2V0VHlwZVNjcmlwdEVycm9ycygpO1xuICAgIGNvbnN0IGVycm9ycyA9IHBhcnNlVHlwZVNjcmlwdEVycm9ycyhlcnJvck91dHB1dCk7XG4gICAgcmV0dXJuIGVycm9ycy5sZW5ndGg7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZ2V0IFR5cGVTY3JpcHQgZXJyb3IgY291bnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiAtMTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGNhbXBhaWduIHRyaWdnZXIgY29uZGl0aW9ucyBhcmUgbWV0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0NhbXBhaWduVHJpZ2dlckNvbmRpdGlvbnMoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZXJyb3JDb3VudCA9IGF3YWl0IGdldEN1cnJlbnRUeXBlU2NyaXB0RXJyb3JDb3VudCgpO1xuICAgIHJldHVybiBzaG91bGRUcmlnZ2VyQ2FtcGFpZ24oZXJyb3JDb3VudCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY2hlY2sgY2FtcGFpZ24gdHJpZ2dlciBjb25kaXRpb25zOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==