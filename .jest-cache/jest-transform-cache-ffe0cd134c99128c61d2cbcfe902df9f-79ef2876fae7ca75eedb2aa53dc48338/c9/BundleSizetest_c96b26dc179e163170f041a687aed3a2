1acf02a91a0d6d78818ee28bd135402b
"use strict";
/**
 * Performance Tests for Bundle Size Regression Testing
 * Perfect Codebase Campaign - Bundle Size Performance Testing
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('child_process');
jest.mock('fs');
const child_process_1 = require("child_process");
const fs = __importStar(require("fs"));
const campaign_1 = require("../../../../types/campaign");
const CampaignController_1 = require("../../CampaignController");
const ProgressTracker_1 = require("../../ProgressTracker");
const mockExecSync = child_process_1.execSync;
const mockFs = fs;
describe('Bundle Size Performance Tests', () => {
    let progressTracker;
    let campaignController;
    let mockConfig;
    beforeEach(() => {
        const safetySettings = {
            maxFilesPerBatch: 25,
            buildValidationFrequency: 5,
            testValidationFrequency: 10,
            corruptionDetectionEnabled: true,
            automaticRollbackEnabled: true,
            stashRetentionDays: 7,
        };
        mockConfig = {
            phases: [
                {
                    id: 'bundle-test-phase',
                    name: 'Bundle Test Phase',
                    description: 'Phase for bundle size testing',
                    tools: [
                        {
                            scriptPath: 'scripts/bundle/optimize-script.js',
                            parameters: { optimizeBundle: true },
                            batchSize: 50,
                            safetyLevel: campaign_1.SafetyLevel.MEDIUM,
                        },
                    ],
                    successCriteria: { buildTime: 10 },
                    safetyCheckpoints: [],
                },
            ],
            safetySettings,
            progressTargets: { typeScriptErrors: 0, lintingWarnings: 0, buildTime: 10, enterpriseSystems: 200 },
            toolConfiguration: {
                enhancedErrorFixer: 'scripts/typescript-fixes/fix-typescript-errors-enhanced-v3.js',
                explicitAnyFixer: 'scripts/typescript-fixes/fix-explicit-any-systematic.js',
                unusedVariablesFixer: 'scripts/typescript-fixes/fix-unused-variables-enhanced.js',
                consoleStatementFixer: 'scripts/lint-fixes/fix-console-statements-only.js',
            },
        };
        progressTracker = new ProgressTracker_1.ProgressTracker();
        campaignController = new CampaignController_1.CampaignController(mockConfig);
        // Reset mocks
        jest.clearAllMocks();
        // Default mock implementations
        mockExecSync.mockReturnValue('');
        mockFs.existsSync.mockReturnValue(true);
    });
    describe('Bundle Size Validation', () => {
        it('should validate bundle size under 420kB target', async () => {
            // Mock optimal bundle size
            mockFs.existsSync.mockImplementation(path => {
                return path === '.next' || path === 'dist';
            });
            mockExecSync.mockImplementation(command => {
                const cmd = command.toString();
                if (cmd.includes('du -sk .next')) {
                    return '300'; // 300kB
                }
                if (cmd.includes('du -sk dist')) {
                    return '100'; // 100kB
                }
                return '';
            });
            const bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(400); // 300 + 100 = 400kB
            expect(bundleSize).toBeLessThan(420); // Under 420kB target
        });
        it('should detect bundle size regression', async () => {
            // Mock bundle size that exceeds target
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    return '450'; // 450kB - exceeds 420kB target
                }
                return '';
            });
            const bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(450);
            expect(bundleSize).toBeGreaterThan(420); // Exceeds target
        });
        it('should handle missing build directories', async () => {
            mockFs.existsSync.mockReturnValue(false);
            const bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(0); // No build directories found
        });
        it('should track bundle size trends over campaign execution', async () => {
            const bundleSizes = [];
            let optimizationStep = 0;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    optimizationStep++;
                    // Simulate bundle size optimization over time
                    const baseSize = 500; // Start with large bundle
                    const optimization = Math.min(100, optimizationStep * 20); // Up to 100kB reduction
                    return Math.max(350, baseSize - optimization).toString();
                }
                return '';
            });
            // Collect bundle sizes over multiple measurements
            for (let i = 0; i < 6; i++) {
                const bundleSize = await progressTracker.getBundleSize();
                bundleSizes.push(bundleSize);
            }
            expect(bundleSizes.length).toBe(6);
            // Bundle size should decrease over time (optimization)
            const firstSize = bundleSizes[0];
            const lastSize = bundleSizes[bundleSizes.length - 1];
            expect(lastSize).toBeLessThan(firstSize);
            expect(lastSize).toBeLessThan(420); // Should reach target
        });
    });
    describe('Bundle Composition Analysis', () => {
        it('should analyze bundle composition across different build outputs', async () => {
            const buildOutputs = [
                { dir: '.next', expectedSize: 250 },
                { dir: 'dist', expectedSize: 120 },
                { dir: 'build', expectedSize: 50 },
            ];
            mockFs.existsSync.mockImplementation(path => {
                return buildOutputs.some(output => output.dir === path);
            });
            mockExecSync.mockImplementation(command => {
                const cmd = command.toString();
                for (const output of buildOutputs) {
                    if (cmd.includes(`du -sk ${output.dir}`)) {
                        return output.expectedSize.toString();
                    }
                }
                return '';
            });
            const bundleSize = await progressTracker.getBundleSize();
            const expectedTotal = buildOutputs.reduce((sum, output) => sum + output.expectedSize, 0);
            expect(bundleSize).toBe(expectedTotal); // 250 + 120 + 50 = 420kB
            expect(bundleSize).toBeLessThanOrEqual(420); // At target limit
        });
        it('should handle partial build outputs', async () => {
            // Only some build directories exist
            mockFs.existsSync.mockImplementation(path => {
                return path === '.next'; // Only .next exists
            });
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk .next')) {
                    return '380'; // 380kB
                }
                return '';
            });
            const bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(380);
            expect(bundleSize).toBeLessThan(420); // Under target
        });
        it('should detect bundle bloat in specific directories', async () => {
            const bloatedBuild = {
                '.next': 350,
                dist: 200,
                build: 50, // Normal size
            };
            mockFs.existsSync.mockImplementation(path => {
                return Object.keys(bloatedBuild).includes(path);
            });
            mockExecSync.mockImplementation(command => {
                const cmd = command.toString();
                for (const [dir, size] of Object.entries(bloatedBuild)) {
                    if (cmd.includes(`du -sk ${dir}`)) {
                        return size.toString();
                    }
                }
                return '';
            });
            const bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(600); // 350 + 200 + 50 = 600kB
            expect(bundleSize).toBeGreaterThan(420); // Exceeds target due to bloat
        });
    });
    describe('Bundle Optimization Performance', () => {
        it('should validate lazy loading impact on bundle size', async () => {
            let lazyLoadingEnabled = false;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    // Lazy loading should reduce main bundle size
                    return lazyLoadingEnabled ? '320' : '450';
                }
                return '';
            });
            // Before lazy loading
            let bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(450);
            expect(bundleSize).toBeGreaterThan(420); // Exceeds target
            // After enabling lazy loading
            lazyLoadingEnabled = true;
            bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(320);
            expect(bundleSize).toBeLessThan(420); // Under target
        });
        it('should validate tree shaking effectiveness', async () => {
            let treeShakingEnabled = false;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    // Tree shaking should remove unused code
                    return treeShakingEnabled ? '380' : '480';
                }
                return '';
            });
            // Before tree shaking
            let bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(480);
            expect(bundleSize).toBeGreaterThan(420); // Exceeds target
            // After enabling tree shaking
            treeShakingEnabled = true;
            bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(380);
            expect(bundleSize).toBeLessThan(420); // Under target
        });
        it('should validate code splitting impact', async () => {
            let codeSplittingEnabled = false;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    if (codeSplittingEnabled) {
                        // Code splitting creates multiple smaller bundles
                        // Main bundle should be smaller
                        return '280';
                    }
                    else {
                        // Single large bundle
                        return '440';
                    }
                }
                return '';
            });
            // Before code splitting
            let bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(440);
            expect(bundleSize).toBeGreaterThan(420); // Exceeds target
            // After enabling code splitting
            codeSplittingEnabled = true;
            bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(280);
            expect(bundleSize).toBeLessThan(420); // Well under target
        });
        it('should validate compression effectiveness', async () => {
            let compressionEnabled = false;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    // Compression should reduce bundle size significantly
                    return compressionEnabled ? '300' : '500';
                }
                return '';
            });
            // Before compression
            let bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(500);
            expect(bundleSize).toBeGreaterThan(420); // Exceeds target
            // After enabling compression
            compressionEnabled = true;
            bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(300);
            expect(bundleSize).toBeLessThan(420); // Well under target
        });
    });
    describe('Bundle Size Regression Testing', () => {
        it('should detect bundle size regression during campaign', async () => {
            const phase = mockConfig.phases[0];
            let executionCount = 0;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    executionCount++;
                    // Simulate bundle size regression over time
                    const baseSize = 350;
                    const regression = executionCount * 25; // 25kB increase per execution
                    return (baseSize + regression).toString();
                }
                return '';
            });
            const bundleSizes = [];
            // Execute phase multiple times to simulate regression
            for (let i = 0; i < 4; i++) {
                await campaignController.executePhase(phase);
                const bundleSize = await progressTracker.getBundleSize();
                bundleSizes.push(bundleSize);
            }
            expect(bundleSizes.length).toBe(4);
            // Should detect increasing bundle size (regression)
            const firstSize = bundleSizes[0];
            const lastSize = bundleSizes[bundleSizes.length - 1];
            expect(lastSize).toBeGreaterThan(firstSize);
            expect(lastSize).toBeGreaterThan(420); // Should exceed target
        });
        it('should validate bundle size improvements during optimization', async () => {
            const phase = mockConfig.phases[0];
            let optimizationStep = 0;
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    optimizationStep++;
                    // Simulate bundle size optimization
                    const baseSize = 500;
                    const optimization = optimizationStep * 30; // 30kB reduction per step
                    return Math.max(320, baseSize - optimization).toString();
                }
                return '';
            });
            const bundleSizes = [];
            // Execute optimization phases
            for (let i = 0; i < 5; i++) {
                await campaignController.executePhase(phase);
                const bundleSize = await progressTracker.getBundleSize();
                bundleSizes.push(bundleSize);
            }
            expect(bundleSizes.length).toBe(5);
            // Should show decreasing bundle size (optimization)
            const firstSize = bundleSizes[0];
            const lastSize = bundleSizes[bundleSizes.length - 1];
            expect(lastSize).toBeLessThan(firstSize);
            expect(lastSize).toBeLessThan(420); // Should be under target
        });
        it('should track bundle size across different optimization strategies', async () => {
            const optimizationStrategies = [
                { name: 'baseline', expectedSize: 480 },
                { name: 'minification', expectedSize: 420 },
                { name: 'tree-shaking', expectedSize: 380 },
                { name: 'code-splitting', expectedSize: 340 },
                { name: 'compression', expectedSize: 300 },
            ];
            const results = [];
            for (const strategy of optimizationStrategies) {
                mockFs.existsSync.mockReturnValue(true);
                mockExecSync.mockImplementation(command => {
                    if (command.toString().includes('du -sk')) {
                        return strategy.expectedSize.toString();
                    }
                    return '';
                });
                const bundleSize = await progressTracker.getBundleSize();
                results.push({
                    strategy: strategy.name,
                    size: bundleSize,
                    underTarget: bundleSize < 420,
                });
            }
            expect(results.length).toBe(5);
            // Baseline should exceed target
            expect(results[0].underTarget).toBe(false);
            expect(results[0].size).toBe(480);
            // Progressive optimization should reduce bundle size
            for (let i = 1; i < results.length; i++) {
                expect(results[i].size).toBeLessThan(results[i - 1].size);
            }
            // Final optimizations should be under target
            expect(results[results.length - 1].underTarget).toBe(true);
            expect(results[results.length - 1].size).toBe(300);
        });
    });
    describe('Bundle Size Performance Benchmarks', () => {
        it('should benchmark bundle analysis performance', async () => {
            const analysisTimes = [];
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    const startTime = Date.now();
                    // Simulate bundle analysis time
                    const delay = 20 + Math.random() * 30; // 20-50ms
                    const endTime = startTime + delay;
                    while (Date.now() < endTime) {
                        // Busy wait
                    }
                    analysisTimes.push(Date.now() - startTime);
                    return '400';
                }
                return '';
            });
            // Perform multiple bundle size analyses
            for (let i = 0; i < 10; i++) {
                await progressTracker.getBundleSize();
            }
            expect(analysisTimes.length).toBe(10);
            expect(analysisTimes.every(time => time > 0)).toBe(true);
            // Average analysis time should be reasonable
            const averageTime = analysisTimes.reduce((sum, time) => sum + time, 0) / analysisTimes.length;
            expect(averageTime).toBeLessThan(100); // Should be under 100ms
        });
        it('should handle large bundle analysis efficiently', async () => {
            // Mock very large bundle
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    // Simulate longer analysis time for large bundle
                    const delay = 50; // 50ms for large bundle
                    const endTime = Date.now() + delay;
                    while (Date.now() < endTime) {
                        // Busy wait
                    }
                    return '2000'; // 2MB bundle - very large
                }
                return '';
            });
            const startTime = Date.now();
            const bundleSize = await progressTracker.getBundleSize();
            const analysisTime = Date.now() - startTime;
            expect(bundleSize).toBe(2000);
            expect(bundleSize).toBeGreaterThan(420); // Significantly exceeds target
            expect(analysisTime).toBeLessThan(200); // Should still be reasonably fast
        });
        it('should benchmark concurrent bundle analyses', async () => {
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    // Simulate concurrent analysis
                    const delay = 30 + Math.random() * 20; // 30-50ms
                    const endTime = Date.now() + delay;
                    while (Date.now() < endTime) {
                        // Busy wait
                    }
                    return '400';
                }
                return '';
            });
            // Run concurrent bundle size analyses
            const promises = Array.from({ length: 5 }, () => progressTracker.getBundleSize());
            const startTime = Date.now();
            const results = await Promise.all(promises);
            const totalTime = Date.now() - startTime;
            expect(results.length).toBe(5);
            expect(results.every(size => size === 400)).toBe(true);
            expect(totalTime).toBeLessThan(500); // Should complete efficiently
        });
    });
    describe('Bundle Size Monitoring Integration', () => {
        it('should integrate bundle size monitoring with campaign execution', async () => {
            const phase = mockConfig.phases[0];
            mockFs.existsSync.mockReturnValue(true);
            mockExecSync.mockImplementation(command => {
                if (command.toString().includes('du -sk')) {
                    return '390'; // Under target
                }
                return '';
            });
            // Mock campaign execution with bundle monitoring
            jest.spyOn(campaignController, 'getCurrentMetrics').mockImplementation(async () => {
                const bundleSize = await progressTracker.getBundleSize();
                return {
                    typeScriptErrors: { current: 86, target: 0, reduction: 0, percentage: 0 },
                    lintingWarnings: { current: 4506, target: 0, reduction: 0, percentage: 0 },
                    buildPerformance: { currentTime: 8.5, targetTime: 10, cacheHitRate: 0.8, memoryUsage: 45 },
                    enterpriseSystems: { current: 0, target: 200, transformedExports: 0 },
                    bundleSize: bundleSize, // Additional bundle size tracking
                };
            });
            const result = await campaignController.executePhase(phase);
            expect(result.success).toBe(true);
            // Verify bundle size is monitored
            const bundleSize = await progressTracker.getBundleSize();
            expect(bundleSize).toBe(390);
            expect(bundleSize).toBeLessThan(420);
        });
        it('should alert on bundle size threshold violations', async () => {
            const thresholds = {
                warning: 400,
                critical: 420, // 420kB critical threshold
            };
            const testSizes = [350, 410, 450]; // Under warning, over warning, over critical
            const alerts = [];
            for (const testSize of testSizes) {
                mockFs.existsSync.mockReturnValue(true);
                mockExecSync.mockImplementation(command => {
                    if (command.toString().includes('du -sk')) {
                        return testSize.toString();
                    }
                    return '';
                });
                const bundleSize = await progressTracker.getBundleSize();
                if (bundleSize > thresholds.critical) {
                    alerts.push({ size: bundleSize, level: 'critical' });
                }
                else if (bundleSize > thresholds.warning) {
                    alerts.push({ size: bundleSize, level: 'warning' });
                }
            }
            expect(alerts.length).toBe(2); // Should have warning and critical alerts
            expect(alerts[0].level).toBe('warning');
            expect(alerts[0].size).toBe(410);
            expect(alerts[1].level).toBe('critical');
            expect(alerts[1].size).toBe(450);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5jb25zb2xpZGF0aW9uLWJhY2t1cHMtMjAyNS0wOC0yM1QxNy01NC0xMC0wOTJaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9fX3Rlc3RzX18vcGVyZm9ybWFuY2UvQnVuZGxlU2l6ZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTSCxvQkFBb0I7QUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBVGhCLGlEQUF5QztBQUN6Qyx1Q0FBeUI7QUFFekIseURBQXlGO0FBQ3pGLGlFQUE4RDtBQUM5RCwyREFBd0Q7QUFNeEQsTUFBTSxZQUFZLEdBQUcsd0JBQWdELENBQUM7QUFDdEUsTUFBTSxNQUFNLEdBQUcsRUFBNEIsQ0FBQztBQUU1QyxRQUFRLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO0lBQzdDLElBQUksZUFBZ0MsQ0FBQztJQUNyQyxJQUFJLGtCQUFzQyxDQUFDO0lBQzNDLElBQUksVUFBMEIsQ0FBQztJQUUvQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsTUFBTSxjQUFjLEdBQW1CO1lBQ3JDLGdCQUFnQixFQUFFLEVBQUU7WUFDcEIsd0JBQXdCLEVBQUUsQ0FBQztZQUMzQix1QkFBdUIsRUFBRSxFQUFFO1lBQzNCLDBCQUEwQixFQUFFLElBQUk7WUFDaEMsd0JBQXdCLEVBQUUsSUFBSTtZQUM5QixrQkFBa0IsRUFBRSxDQUFDO1NBQ3RCLENBQUM7UUFFRixVQUFVLEdBQUc7WUFDWCxNQUFNLEVBQUU7Z0JBQ047b0JBQ0UsRUFBRSxFQUFFLG1CQUFtQjtvQkFDdkIsSUFBSSxFQUFFLG1CQUFtQjtvQkFDekIsV0FBVyxFQUFFLCtCQUErQjtvQkFDNUMsS0FBSyxFQUFFO3dCQUNMOzRCQUNFLFVBQVUsRUFBRSxtQ0FBbUM7NEJBQy9DLFVBQVUs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Q0FBQyxDQUFDLENBQUMsMENBQTBDO1lBQ3pFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvLmNvbnNvbGlkYXRpb24tYmFja3Vwcy0yMDI1LTA4LTIzVDE3LTU0LTEwLTA5Mlovc3JjL3NlcnZpY2VzL2NhbXBhaWduL19fdGVzdHNfXy9wZXJmb3JtYW5jZS9CdW5kbGVTaXplLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQZXJmb3JtYW5jZSBUZXN0cyBmb3IgQnVuZGxlIFNpemUgUmVncmVzc2lvbiBUZXN0aW5nXG4gKiBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIC0gQnVuZGxlIFNpemUgUGVyZm9ybWFuY2UgVGVzdGluZ1xuICovXG5cbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5cbmltcG9ydCB7IENhbXBhaWduQ29uZmlnLCBTYWZldHlTZXR0aW5ncywgU2FmZXR5TGV2ZWwgfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcy9jYW1wYWlnbic7XG5pbXBvcnQgeyBDYW1wYWlnbkNvbnRyb2xsZXIgfSBmcm9tICcuLi8uLi9DYW1wYWlnbkNvbnRyb2xsZXInO1xuaW1wb3J0IHsgUHJvZ3Jlc3NUcmFja2VyIH0gZnJvbSAnLi4vLi4vUHJvZ3Jlc3NUcmFja2VyJztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnY2hpbGRfcHJvY2VzcycpO1xuamVzdC5tb2NrKCdmcycpO1xuXG5jb25zdCBtb2NrRXhlY1N5bmMgPSBleGVjU3luYyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBleGVjU3luYz47XG5jb25zdCBtb2NrRnMgPSBmcyBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZnM+O1xuXG5kZXNjcmliZSgnQnVuZGxlIFNpemUgUGVyZm9ybWFuY2UgVGVzdHMnLCAoKSA9PiB7XG4gIGxldCBwcm9ncmVzc1RyYWNrZXI6IFByb2dyZXNzVHJhY2tlcjtcbiAgbGV0IGNhbXBhaWduQ29udHJvbGxlcjogQ2FtcGFpZ25Db250cm9sbGVyO1xuICBsZXQgbW9ja0NvbmZpZzogQ2FtcGFpZ25Db25maWc7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY29uc3Qgc2FmZXR5U2V0dGluZ3M6IFNhZmV0eVNldHRpbmdzID0ge1xuICAgICAgbWF4RmlsZXNQZXJCYXRjaDogMjUsXG4gICAgICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDUsXG4gICAgICB0ZXN0VmFsaWRhdGlvbkZyZXF1ZW5jeTogMTAsXG4gICAgICBjb3JydXB0aW9uRGV0ZWN0aW9uRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGF1dG9tYXRpY1JvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgIHN0YXNoUmV0ZW50aW9uRGF5czogNyxcbiAgICB9O1xuXG4gICAgbW9ja0NvbmZpZyA9IHtcbiAgICAgIHBoYXNlczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdidW5kbGUtdGVzdC1waGFzZScsXG4gICAgICAgICAgbmFtZTogJ0J1bmRsZSBUZXN0IFBoYXNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1BoYXNlIGZvciBidW5kbGUgc2l6ZSB0ZXN0aW5nJyxcbiAgICAgICAgICB0b29sczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JpcHRQYXRoOiAnc2NyaXB0cy9idW5kbGUvb3B0aW1pemUtc2NyaXB0LmpzJyxcbiAgICAgICAgICAgICAgcGFyYW1ldGVyczogeyBvcHRpbWl6ZUJ1bmRsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICBiYXRjaFNpemU6IDUwLFxuICAgICAgICAgICAgICBzYWZldHlMZXZlbDogU2FmZXR5TGV2ZWwuTUVESVVNLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHN1Y2Nlc3NDcml0ZXJpYTogeyBidWlsZFRpbWU6IDEwIH0sXG4gICAgICAgICAgc2FmZXR5Q2hlY2twb2ludHM6IFtdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHNhZmV0eVNldHRpbmdzLFxuICAgICAgcHJvZ3Jlc3NUYXJnZXRzOiB7IHR5cGVTY3JpcHRFcnJvcnM6IDAsIGxpbnRpbmdXYXJuaW5nczogMCwgYnVpbGRUaW1lOiAxMCwgZW50ZXJwcmlzZVN5c3RlbXM6IDIwMCB9LFxuICAgICAgdG9vbENvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgZW5oYW5jZWRFcnJvckZpeGVyOiAnc2NyaXB0cy90eXBlc2NyaXB0LWZpeGVzL2ZpeC10eXBlc2NyaXB0LWVycm9ycy1lbmhhbmNlZC12My5qcycsXG4gICAgICAgIGV4cGxpY2l0QW55Rml4ZXI6ICdzY3JpcHRzL3R5cGVzY3JpcHQtZml4ZXMvZml4LWV4cGxpY2l0LWFueS1zeXN0ZW1hdGljLmpzJyxcbiAgICAgICAgdW51c2VkVmFyaWFibGVzRml4ZXI6ICdzY3JpcHRzL3R5cGVzY3JpcHQtZml4ZXMvZml4LXVudXNlZC12YXJpYWJsZXMtZW5oYW5jZWQuanMnLFxuICAgICAgICBjb25zb2xlU3RhdGVtZW50Rml4ZXI6ICdzY3JpcHRzL2xpbnQtZml4ZXMvZml4LWNvbnNvbGUtc3RhdGVtZW50cy1vbmx5LmpzJyxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHByb2dyZXNzVHJhY2tlciA9IG5ldyBQcm9ncmVzc1RyYWNrZXIoKTtcbiAgICBjYW1wYWlnbkNvbnRyb2xsZXIgPSBuZXcgQ2FtcGFpZ25Db250cm9sbGVyKG1vY2tDb25maWcpO1xuXG4gICAgLy8gUmVzZXQgbW9ja3NcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIERlZmF1bHQgbW9jayBpbXBsZW1lbnRhdGlvbnNcbiAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCcnKTtcbiAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCdW5kbGUgU2l6ZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYnVuZGxlIHNpemUgdW5kZXIgNDIwa0IgdGFyZ2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBvcHRpbWFsIGJ1bmRsZSBzaXplXG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrSW1wbGVtZW50YXRpb24ocGF0aCA9PiB7XG4gICAgICAgIHJldHVybiBwYXRoID09PSAnLm5leHQnIHx8IHBhdGggPT09ICdkaXN0JztcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICBjb25zdCBjbWQgPSBjb21tYW5kLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmIChjbWQuaW5jbHVkZXMoJ2R1IC1zayAubmV4dCcpKSB7XG4gICAgICAgICAgcmV0dXJuICczMDAnOyAvLyAzMDBrQlxuICAgICAgICB9XG4gICAgICAgIGlmIChjbWQuaW5jbHVkZXMoJ2R1IC1zayBkaXN0JykpIHtcbiAgICAgICAgICByZXR1cm4gJzEwMCc7IC8vIDEwMGtCXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuXG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZSg0MDApOyAvLyAzMDAgKyAxMDAgPSA0MDBrQlxuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmVMZXNzVGhhbig0MjApOyAvLyBVbmRlciA0MjBrQiB0YXJnZXRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGJ1bmRsZSBzaXplIHJlZ3Jlc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGJ1bmRsZSBzaXplIHRoYXQgZXhjZWVkcyB0YXJnZXRcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgcmV0dXJuICc0NTAnOyAvLyA0NTBrQiAtIGV4Y2VlZHMgNDIwa0IgdGFyZ2V0XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuXG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZSg0NTApO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmVHcmVhdGVyVGhhbig0MjApOyAvLyBFeGNlZWRzIHRhcmdldFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBidWlsZCBkaXJlY3RvcmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG5cbiAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuXG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZSgwKTsgLy8gTm8gYnVpbGQgZGlyZWN0b3JpZXMgZm91bmRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgYnVuZGxlIHNpemUgdHJlbmRzIG92ZXIgY2FtcGFpZ24gZXhlY3V0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVuZGxlU2l6ZXM6IG51bWJlcltdID0gW107XG4gICAgICBsZXQgb3B0aW1pemF0aW9uU3RlcCA9IDA7XG5cbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgb3B0aW1pemF0aW9uU3RlcCsrO1xuICAgICAgICAgIC8vIFNpbXVsYXRlIGJ1bmRsZSBzaXplIG9wdGltaXphdGlvbiBvdmVyIHRpbWVcbiAgICAgICAgICBjb25zdCBiYXNlU2l6ZSA9IDUwMDsgLy8gU3RhcnQgd2l0aCBsYXJnZSBidW5kbGVcbiAgICAgICAgICBjb25zdCBvcHRpbWl6YXRpb24gPSBNYXRoLm1pbigxMDAsIG9wdGltaXphdGlvblN0ZXAgKiAyMCk7IC8vIFVwIHRvIDEwMGtCIHJlZHVjdGlvblxuICAgICAgICAgIHJldHVybiBNYXRoLm1heCgzNTAsIGJhc2VTaXplIC0gb3B0aW1pemF0aW9uKS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb2xsZWN0IGJ1bmRsZSBzaXplcyBvdmVyIG11bHRpcGxlIG1lYXN1cmVtZW50c1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgY29uc3QgYnVuZGxlU2l6ZSA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZXRCdW5kbGVTaXplKCk7XG4gICAgICAgIGJ1bmRsZVNpemVzLnB1c2goYnVuZGxlU2l6ZSk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChidW5kbGVTaXplcy5sZW5ndGgpLnRvQmUoNik7XG5cbiAgICAgIC8vIEJ1bmRsZSBzaXplIHNob3VsZCBkZWNyZWFzZSBvdmVyIHRpbWUgKG9wdGltaXphdGlvbilcbiAgICAgIGNvbnN0IGZpcnN0U2l6ZSA9IGJ1bmRsZVNpemVzWzBdO1xuICAgICAgY29uc3QgbGFzdFNpemUgPSBidW5kbGVTaXplc1tidW5kbGVTaXplcy5sZW5ndGggLSAxXTtcbiAgICAgIGV4cGVjdChsYXN0U2l6ZSkudG9CZUxlc3NUaGFuKGZpcnN0U2l6ZSk7XG4gICAgICBleHBlY3QobGFzdFNpemUpLnRvQmVMZXNzVGhhbig0MjApOyAvLyBTaG91bGQgcmVhY2ggdGFyZ2V0XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCdW5kbGUgQ29tcG9zaXRpb24gQW5hbHlzaXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbmFseXplIGJ1bmRsZSBjb21wb3NpdGlvbiBhY3Jvc3MgZGlmZmVyZW50IGJ1aWxkIG91dHB1dHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBidWlsZE91dHB1dHMgPSBbXG4gICAgICAgIHsgZGlyOiAnLm5leHQnLCBleHBlY3RlZFNpemU6IDI1MCB9LFxuICAgICAgICB7IGRpcjogJ2Rpc3QnLCBleHBlY3RlZFNpemU6IDEyMCB9LFxuICAgICAgICB7IGRpcjogJ2J1aWxkJywgZXhwZWN0ZWRTaXplOiA1MCB9LFxuICAgICAgXTtcblxuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKHBhdGggPT4ge1xuICAgICAgICByZXR1cm4gYnVpbGRPdXRwdXRzLnNvbWUob3V0cHV0ID0+IG91dHB1dC5kaXIgPT09IHBhdGgpO1xuICAgICAgfSk7XG5cbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGNvbnN0IGNtZCA9IGNvbW1hbmQudG9TdHJpbmcoKTtcbiAgICAgICAgZm9yIChjb25zdCBvdXRwdXQgb2YgYnVpbGRPdXRwdXRzKSB7XG4gICAgICAgICAgaWYgKGNtZC5pbmNsdWRlcyhgZHUgLXNrICR7b3V0cHV0LmRpcn1gKSkge1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dC5leHBlY3RlZFNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuXG4gICAgICBjb25zdCBleHBlY3RlZFRvdGFsID0gYnVpbGRPdXRwdXRzLnJlZHVjZSgoc3VtLCBvdXRwdXQpID0+IHN1bSArIG91dHB1dC5leHBlY3RlZFNpemUsIDApO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmUoZXhwZWN0ZWRUb3RhbCk7IC8vIDI1MCArIDEyMCArIDUwID0gNDIwa0JcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlTGVzc1RoYW5PckVxdWFsKDQyMCk7IC8vIEF0IHRhcmdldCBsaW1pdFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGFydGlhbCBidWlsZCBvdXRwdXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gT25seSBzb21lIGJ1aWxkIGRpcmVjdG9yaWVzIGV4aXN0XG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrSW1wbGVtZW50YXRpb24ocGF0aCA9PiB7XG4gICAgICAgIHJldHVybiBwYXRoID09PSAnLm5leHQnOyAvLyBPbmx5IC5uZXh0IGV4aXN0c1xuICAgICAgfSk7XG5cbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zayAubmV4dCcpKSB7XG4gICAgICAgICAgcmV0dXJuICczODAnOyAvLyAzODBrQlxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcblxuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmUoMzgwKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlTGVzc1RoYW4oNDIwKTsgLy8gVW5kZXIgdGFyZ2V0XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBidW5kbGUgYmxvYXQgaW4gc3BlY2lmaWMgZGlyZWN0b3JpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBibG9hdGVkQnVpbGQgPSB7XG4gICAgICAgICcubmV4dCc6IDM1MCwgLy8gTm9ybWFsIHNpemVcbiAgICAgICAgZGlzdDogMjAwLCAvLyBCbG9hdGVkIC0gc2hvdWxkIGJlIH4xMjBrQlxuICAgICAgICBidWlsZDogNTAsIC8vIE5vcm1hbCBzaXplXG4gICAgICB9O1xuXG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrSW1wbGVtZW50YXRpb24ocGF0aCA9PiB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhibG9hdGVkQnVpbGQpLmluY2x1ZGVzKHBhdGggYXMgc3RyaW5nKTtcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICBjb25zdCBjbWQgPSBjb21tYW5kLnRvU3RyaW5nKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2Rpciwgc2l6ZV0gb2YgT2JqZWN0LmVudHJpZXMoYmxvYXRlZEJ1aWxkKSkge1xuICAgICAgICAgIGlmIChjbWQuaW5jbHVkZXMoYGR1IC1zayAke2Rpcn1gKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuXG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZSg2MDApOyAvLyAzNTAgKyAyMDAgKyA1MCA9IDYwMGtCXG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDQyMCk7IC8vIEV4Y2VlZHMgdGFyZ2V0IGR1ZSB0byBibG9hdFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVuZGxlIE9wdGltaXphdGlvbiBQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGxhenkgbG9hZGluZyBpbXBhY3Qgb24gYnVuZGxlIHNpemUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgbGF6eUxvYWRpbmdFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgLy8gTGF6eSBsb2FkaW5nIHNob3VsZCByZWR1Y2UgbWFpbiBidW5kbGUgc2l6ZVxuICAgICAgICAgIHJldHVybiBsYXp5TG9hZGluZ0VuYWJsZWQgPyAnMzIwJyA6ICc0NTAnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBCZWZvcmUgbGF6eSBsb2FkaW5nXG4gICAgICBsZXQgYnVuZGxlU2l6ZSA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZXRCdW5kbGVTaXplKCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZSg0NTApO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmVHcmVhdGVyVGhhbig0MjApOyAvLyBFeGNlZWRzIHRhcmdldFxuXG4gICAgICAvLyBBZnRlciBlbmFibGluZyBsYXp5IGxvYWRpbmdcbiAgICAgIGxhenlMb2FkaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlKDMyMCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZUxlc3NUaGFuKDQyMCk7IC8vIFVuZGVyIHRhcmdldFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB0cmVlIHNoYWtpbmcgZWZmZWN0aXZlbmVzcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB0cmVlU2hha2luZ0VuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbihjb21tYW5kID0+IHtcbiAgICAgICAgaWYgKGNvbW1hbmQudG9TdHJpbmcoKS5pbmNsdWRlcygnZHUgLXNrJykpIHtcbiAgICAgICAgICAvLyBUcmVlIHNoYWtpbmcgc2hvdWxkIHJlbW92ZSB1bnVzZWQgY29kZVxuICAgICAgICAgIHJldHVybiB0cmVlU2hha2luZ0VuYWJsZWQgPyAnMzgwJyA6ICc0ODAnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBCZWZvcmUgdHJlZSBzaGFraW5nXG4gICAgICBsZXQgYnVuZGxlU2l6ZSA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZXRCdW5kbGVTaXplKCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZSg0ODApO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmVHcmVhdGVyVGhhbig0MjApOyAvLyBFeGNlZWRzIHRhcmdldFxuXG4gICAgICAvLyBBZnRlciBlbmFibGluZyB0cmVlIHNoYWtpbmdcbiAgICAgIHRyZWVTaGFraW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlKDM4MCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZUxlc3NUaGFuKDQyMCk7IC8vIFVuZGVyIHRhcmdldFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb2RlIHNwbGl0dGluZyBpbXBhY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY29kZVNwbGl0dGluZ0VuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbihjb21tYW5kID0+IHtcbiAgICAgICAgaWYgKGNvbW1hbmQudG9TdHJpbmcoKS5pbmNsdWRlcygnZHUgLXNrJykpIHtcbiAgICAgICAgICBpZiAoY29kZVNwbGl0dGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIENvZGUgc3BsaXR0aW5nIGNyZWF0ZXMgbXVsdGlwbGUgc21hbGxlciBidW5kbGVzXG4gICAgICAgICAgICAvLyBNYWluIGJ1bmRsZSBzaG91bGQgYmUgc21hbGxlclxuICAgICAgICAgICAgcmV0dXJuICcyODAnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaW5nbGUgbGFyZ2UgYnVuZGxlXG4gICAgICAgICAgICByZXR1cm4gJzQ0MCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBCZWZvcmUgY29kZSBzcGxpdHRpbmdcbiAgICAgIGxldCBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlKDQ0MCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDQyMCk7IC8vIEV4Y2VlZHMgdGFyZ2V0XG5cbiAgICAgIC8vIEFmdGVyIGVuYWJsaW5nIGNvZGUgc3BsaXR0aW5nXG4gICAgICBjb2RlU3BsaXR0aW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlKDI4MCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZUxlc3NUaGFuKDQyMCk7IC8vIFdlbGwgdW5kZXIgdGFyZ2V0XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvbXByZXNzaW9uIGVmZmVjdGl2ZW5lc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY29tcHJlc3Npb25FbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgLy8gQ29tcHJlc3Npb24gc2hvdWxkIHJlZHVjZSBidW5kbGUgc2l6ZSBzaWduaWZpY2FudGx5XG4gICAgICAgICAgcmV0dXJuIGNvbXByZXNzaW9uRW5hYmxlZCA/ICczMDAnIDogJzUwMCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEJlZm9yZSBjb21wcmVzc2lvblxuICAgICAgbGV0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlR3JlYXRlclRoYW4oNDIwKTsgLy8gRXhjZWVkcyB0YXJnZXRcblxuICAgICAgLy8gQWZ0ZXIgZW5hYmxpbmcgY29tcHJlc3Npb25cbiAgICAgIGNvbXByZXNzaW9uRW5hYmxlZCA9IHRydWU7XG4gICAgICBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlKDMwMCk7XG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZSkudG9CZUxlc3NUaGFuKDQyMCk7IC8vIFdlbGwgdW5kZXIgdGFyZ2V0XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCdW5kbGUgU2l6ZSBSZWdyZXNzaW9uIFRlc3RpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgYnVuZGxlIHNpemUgcmVncmVzc2lvbiBkdXJpbmcgY2FtcGFpZ24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwaGFzZSA9IG1vY2tDb25maWcucGhhc2VzWzBdO1xuICAgICAgbGV0IGV4ZWN1dGlvbkNvdW50ID0gMDtcblxuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbihjb21tYW5kID0+IHtcbiAgICAgICAgaWYgKGNvbW1hbmQudG9TdHJpbmcoKS5pbmNsdWRlcygnZHUgLXNrJykpIHtcbiAgICAgICAgICBleGVjdXRpb25Db3VudCsrO1xuICAgICAgICAgIC8vIFNpbXVsYXRlIGJ1bmRsZSBzaXplIHJlZ3Jlc3Npb24gb3ZlciB0aW1lXG4gICAgICAgICAgY29uc3QgYmFzZVNpemUgPSAzNTA7XG4gICAgICAgICAgY29uc3QgcmVncmVzc2lvbiA9IGV4ZWN1dGlvbkNvdW50ICogMjU7IC8vIDI1a0IgaW5jcmVhc2UgcGVyIGV4ZWN1dGlvblxuICAgICAgICAgIHJldHVybiAoYmFzZVNpemUgKyByZWdyZXNzaW9uKS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBidW5kbGVTaXplczogbnVtYmVyW10gPSBbXTtcblxuICAgICAgLy8gRXhlY3V0ZSBwaGFzZSBtdWx0aXBsZSB0aW1lcyB0byBzaW11bGF0ZSByZWdyZXNzaW9uXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICBhd2FpdCBjYW1wYWlnbkNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKHBoYXNlKTtcbiAgICAgICAgY29uc3QgYnVuZGxlU2l6ZSA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZXRCdW5kbGVTaXplKCk7XG4gICAgICAgIGJ1bmRsZVNpemVzLnB1c2goYnVuZGxlU2l6ZSk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChidW5kbGVTaXplcy5sZW5ndGgpLnRvQmUoNCk7XG5cbiAgICAgIC8vIFNob3VsZCBkZXRlY3QgaW5jcmVhc2luZyBidW5kbGUgc2l6ZSAocmVncmVzc2lvbilcbiAgICAgIGNvbnN0IGZpcnN0U2l6ZSA9IGJ1bmRsZVNpemVzWzBdO1xuICAgICAgY29uc3QgbGFzdFNpemUgPSBidW5kbGVTaXplc1tidW5kbGVTaXplcy5sZW5ndGggLSAxXTtcbiAgICAgIGV4cGVjdChsYXN0U2l6ZSkudG9CZUdyZWF0ZXJUaGFuKGZpcnN0U2l6ZSk7XG4gICAgICBleHBlY3QobGFzdFNpemUpLnRvQmVHcmVhdGVyVGhhbig0MjApOyAvLyBTaG91bGQgZXhjZWVkIHRhcmdldFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBidW5kbGUgc2l6ZSBpbXByb3ZlbWVudHMgZHVyaW5nIG9wdGltaXphdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBoYXNlID0gbW9ja0NvbmZpZy5waGFzZXNbMF07XG4gICAgICBsZXQgb3B0aW1pemF0aW9uU3RlcCA9IDA7XG5cbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oY29tbWFuZCA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgb3B0aW1pemF0aW9uU3RlcCsrO1xuICAgICAgICAgIC8vIFNpbXVsYXRlIGJ1bmRsZSBzaXplIG9wdGltaXphdGlvblxuICAgICAgICAgIGNvbnN0IGJhc2VTaXplID0gNTAwO1xuICAgICAgICAgIGNvbnN0IG9wdGltaXphdGlvbiA9IG9wdGltaXphdGlvblN0ZXAgKiAzMDsgLy8gMzBrQiByZWR1Y3Rpb24gcGVyIHN0ZXBcbiAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMzIwLCBiYXNlU2l6ZSAtIG9wdGltaXphdGlvbikudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYnVuZGxlU2l6ZXM6IG51bWJlcltdID0gW107XG5cbiAgICAgIC8vIEV4ZWN1dGUgb3B0aW1pemF0aW9uIHBoYXNlc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLmV4ZWN1dGVQaGFzZShwaGFzZSk7XG4gICAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuICAgICAgICBidW5kbGVTaXplcy5wdXNoKGJ1bmRsZVNpemUpO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoYnVuZGxlU2l6ZXMubGVuZ3RoKS50b0JlKDUpO1xuXG4gICAgICAvLyBTaG91bGQgc2hvdyBkZWNyZWFzaW5nIGJ1bmRsZSBzaXplIChvcHRpbWl6YXRpb24pXG4gICAgICBjb25zdCBmaXJzdFNpemUgPSBidW5kbGVTaXplc1swXTtcbiAgICAgIGNvbnN0IGxhc3RTaXplID0gYnVuZGxlU2l6ZXNbYnVuZGxlU2l6ZXMubGVuZ3RoIC0gMV07XG4gICAgICBleHBlY3QobGFzdFNpemUpLnRvQmVMZXNzVGhhbihmaXJzdFNpemUpO1xuICAgICAgZXhwZWN0KGxhc3RTaXplKS50b0JlTGVzc1RoYW4oNDIwKTsgLy8gU2hvdWxkIGJlIHVuZGVyIHRhcmdldFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBidW5kbGUgc2l6ZSBhY3Jvc3MgZGlmZmVyZW50IG9wdGltaXphdGlvbiBzdHJhdGVnaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW1pemF0aW9uU3RyYXRlZ2llcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnYmFzZWxpbmUnLCBleHBlY3RlZFNpemU6IDQ4MCB9LFxuICAgICAgICB7IG5hbWU6ICdtaW5pZmljYXRpb24nLCBleHBlY3RlZFNpemU6IDQyMCB9LFxuICAgICAgICB7IG5hbWU6ICd0cmVlLXNoYWtpbmcnLCBleHBlY3RlZFNpemU6IDM4MCB9LFxuICAgICAgICB7IG5hbWU6ICdjb2RlLXNwbGl0dGluZycsIGV4cGVjdGVkU2l6ZTogMzQwIH0sXG4gICAgICAgIHsgbmFtZTogJ2NvbXByZXNzaW9uJywgZXhwZWN0ZWRTaXplOiAzMDAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdHM6IEFycmF5PHsgc3RyYXRlZ3k6IHN0cmluZzsgc2l6ZTogbnVtYmVyOyB1bmRlclRhcmdldDogYm9vbGVhbiB9PiA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IHN0cmF0ZWd5IG9mIG9wdGltaXphdGlvblN0cmF0ZWdpZXMpIHtcbiAgICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyYXRlZ3kuZXhwZWN0ZWRTaXplLnRvU3RyaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnVuZGxlU2l6ZSA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZXRCdW5kbGVTaXplKCk7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgc3RyYXRlZ3k6IHN0cmF0ZWd5Lm5hbWUsXG4gICAgICAgICAgc2l6ZTogYnVuZGxlU2l6ZSxcbiAgICAgICAgICB1bmRlclRhcmdldDogYnVuZGxlU2l6ZSA8IDQyMCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChyZXN1bHRzLmxlbmd0aCkudG9CZSg1KTtcblxuICAgICAgLy8gQmFzZWxpbmUgc2hvdWxkIGV4Y2VlZCB0YXJnZXRcbiAgICAgIGV4cGVjdChyZXN1bHRzWzBdLnVuZGVyVGFyZ2V0KS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzWzBdLnNpemUpLnRvQmUoNDgwKTtcblxuICAgICAgLy8gUHJvZ3Jlc3NpdmUgb3B0aW1pemF0aW9uIHNob3VsZCByZWR1Y2UgYnVuZGxlIHNpemVcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBleHBlY3QocmVzdWx0c1tpXS5zaXplKS50b0JlTGVzc1RoYW4ocmVzdWx0c1tpIC0gMV0uc2l6ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmFsIG9wdGltaXphdGlvbnMgc2hvdWxkIGJlIHVuZGVyIHRhcmdldFxuICAgICAgZXhwZWN0KHJlc3VsdHNbcmVzdWx0cy5sZW5ndGggLSAxXS51bmRlclRhcmdldCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzW3Jlc3VsdHMubGVuZ3RoIC0gMV0uc2l6ZSkudG9CZSgzMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVuZGxlIFNpemUgUGVyZm9ybWFuY2UgQmVuY2htYXJrcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlbmNobWFyayBidW5kbGUgYW5hbHlzaXMgcGVyZm9ybWFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbmFseXNpc1RpbWVzOiBudW1iZXJbXSA9IFtdO1xuXG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICBpZiAoY29tbWFuZC50b1N0cmluZygpLmluY2x1ZGVzKCdkdSAtc2snKSkge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgYnVuZGxlIGFuYWx5c2lzIHRpbWVcbiAgICAgICAgICBjb25zdCBkZWxheSA9IDIwICsgTWF0aC5yYW5kb20oKSAqIDMwOyAvLyAyMC01MG1zXG4gICAgICAgICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArIGRlbGF5O1xuICAgICAgICAgIHdoaWxlIChEYXRlLm5vdygpIDwgZW5kVGltZSkge1xuICAgICAgICAgICAgLy8gQnVzeSB3YWl0XG4gICAgICAgICAgfVxuICAgICAgICAgIGFuYWx5c2lzVGltZXMucHVzaChEYXRlLm5vdygpIC0gc3RhcnRUaW1lKTtcbiAgICAgICAgICByZXR1cm4gJzQwMCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFBlcmZvcm0gbXVsdGlwbGUgYnVuZGxlIHNpemUgYW5hbHlzZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoYW5hbHlzaXNUaW1lcy5sZW5ndGgpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzVGltZXMuZXZlcnkodGltZSA9PiB0aW1lID4gMCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIEF2ZXJhZ2UgYW5hbHlzaXMgdGltZSBzaG91bGQgYmUgcmVhc29uYWJsZVxuICAgICAgY29uc3QgYXZlcmFnZVRpbWUgPSBhbmFseXNpc1RpbWVzLnJlZHVjZSgoc3VtLCB0aW1lKSA9PiBzdW0gKyB0aW1lLCAwKSAvIGFuYWx5c2lzVGltZXMubGVuZ3RoO1xuICAgICAgZXhwZWN0KGF2ZXJhZ2VUaW1lKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGJlIHVuZGVyIDEwMG1zXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBidW5kbGUgYW5hbHlzaXMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHZlcnkgbGFyZ2UgYnVuZGxlXG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICBpZiAoY29tbWFuZC50b1N0cmluZygpLmluY2x1ZGVzKCdkdSAtc2snKSkge1xuICAgICAgICAgIC8vIFNpbXVsYXRlIGxvbmdlciBhbmFseXNpcyB0aW1lIGZvciBsYXJnZSBidW5kbGVcbiAgICAgICAgICBjb25zdCBkZWxheSA9IDUwOyAvLyA1MG1zIGZvciBsYXJnZSBidW5kbGVcbiAgICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKSArIGRlbGF5O1xuICAgICAgICAgIHdoaWxlIChEYXRlLm5vdygpIDwgZW5kVGltZSkge1xuICAgICAgICAgICAgLy8gQnVzeSB3YWl0XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAnMjAwMCc7IC8vIDJNQiBidW5kbGUgLSB2ZXJ5IGxhcmdlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgIGNvbnN0IGFuYWx5c2lzVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlKDIwMDApO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmVHcmVhdGVyVGhhbig0MjApOyAvLyBTaWduaWZpY2FudGx5IGV4Y2VlZHMgdGFyZ2V0XG4gICAgICBleHBlY3QoYW5hbHlzaXNUaW1lKS50b0JlTGVzc1RoYW4oMjAwKTsgLy8gU2hvdWxkIHN0aWxsIGJlIHJlYXNvbmFibHkgZmFzdFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBiZW5jaG1hcmsgY29uY3VycmVudCBidW5kbGUgYW5hbHlzZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICBpZiAoY29tbWFuZC50b1N0cmluZygpLmluY2x1ZGVzKCdkdSAtc2snKSkge1xuICAgICAgICAgIC8vIFNpbXVsYXRlIGNvbmN1cnJlbnQgYW5hbHlzaXNcbiAgICAgICAgICBjb25zdCBkZWxheSA9IDMwICsgTWF0aC5yYW5kb20oKSAqIDIwOyAvLyAzMC01MG1zXG4gICAgICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCkgKyBkZWxheTtcbiAgICAgICAgICB3aGlsZSAoRGF0ZS5ub3coKSA8IGVuZFRpbWUpIHtcbiAgICAgICAgICAgIC8vIEJ1c3kgd2FpdFxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gJzQwMCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJ1biBjb25jdXJyZW50IGJ1bmRsZSBzaXplIGFuYWx5c2VzXG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUgfSwgKCkgPT4gcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKSk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgY29uc3QgdG90YWxUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMubGVuZ3RoKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZXZlcnkoc2l6ZSA9PiBzaXplID09PSA0MDApKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHRvdGFsVGltZSkudG9CZUxlc3NUaGFuKDUwMCk7IC8vIFNob3VsZCBjb21wbGV0ZSBlZmZpY2llbnRseVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVuZGxlIFNpemUgTW9uaXRvcmluZyBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGludGVncmF0ZSBidW5kbGUgc2l6ZSBtb25pdG9yaW5nIHdpdGggY2FtcGFpZ24gZXhlY3V0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGhhc2UgPSBtb2NrQ29uZmlnLnBoYXNlc1swXTtcblxuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbihjb21tYW5kID0+IHtcbiAgICAgICAgaWYgKGNvbW1hbmQudG9TdHJpbmcoKS5pbmNsdWRlcygnZHUgLXNrJykpIHtcbiAgICAgICAgICByZXR1cm4gJzM5MCc7IC8vIFVuZGVyIHRhcmdldFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGNhbXBhaWduIGV4ZWN1dGlvbiB3aXRoIGJ1bmRsZSBtb25pdG9yaW5nXG4gICAgICBqZXN0LnNweU9uKGNhbXBhaWduQ29udHJvbGxlciBhcyB1bmtub3duLCAnZ2V0Q3VycmVudE1ldHJpY3MnKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDg2LCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogMCwgcGVyY2VudGFnZTogMCB9LFxuICAgICAgICAgIGxpbnRpbmdXYXJuaW5nczogeyBjdXJyZW50OiA0NTA2LCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogMCwgcGVyY2VudGFnZTogMCB9LFxuICAgICAgICAgIGJ1aWxkUGVyZm9ybWFuY2U6IHsgY3VycmVudFRpbWU6IDguNSwgdGFyZ2V0VGltZTogMTAsIGNhY2hlSGl0UmF0ZTogMC44LCBtZW1vcnlVc2FnZTogNDUgfSxcbiAgICAgICAgICBlbnRlcnByaXNlU3lzdGVtczogeyBjdXJyZW50OiAwLCB0YXJnZXQ6IDIwMCwgdHJhbnNmb3JtZWRFeHBvcnRzOiAwIH0sXG4gICAgICAgICAgYnVuZGxlU2l6ZTogYnVuZGxlU2l6ZSwgLy8gQWRkaXRpb25hbCBidW5kbGUgc2l6ZSB0cmFja2luZ1xuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFZlcmlmeSBidW5kbGUgc2l6ZSBpcyBtb25pdG9yZWRcbiAgICAgIGNvbnN0IGJ1bmRsZVNpemUgPSBhd2FpdCBwcm9ncmVzc1RyYWNrZXIuZ2V0QnVuZGxlU2l6ZSgpO1xuICAgICAgZXhwZWN0KGJ1bmRsZVNpemUpLnRvQmUoMzkwKTtcbiAgICAgIGV4cGVjdChidW5kbGVTaXplKS50b0JlTGVzc1RoYW4oNDIwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxlcnQgb24gYnVuZGxlIHNpemUgdGhyZXNob2xkIHZpb2xhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0aHJlc2hvbGRzID0ge1xuICAgICAgICB3YXJuaW5nOiA0MDAsIC8vIDQwMGtCIHdhcm5pbmcgdGhyZXNob2xkXG4gICAgICAgIGNyaXRpY2FsOiA0MjAsIC8vIDQyMGtCIGNyaXRpY2FsIHRocmVzaG9sZFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdGVzdFNpemVzID0gWzM1MCwgNDEwLCA0NTBdOyAvLyBVbmRlciB3YXJuaW5nLCBvdmVyIHdhcm5pbmcsIG92ZXIgY3JpdGljYWxcbiAgICAgIGNvbnN0IGFsZXJ0czogQXJyYXk8eyBzaXplOiBudW1iZXI7IGxldmVsOiBzdHJpbmcgfT4gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCB0ZXN0U2l6ZSBvZiB0ZXN0U2l6ZXMpIHtcbiAgICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKGNvbW1hbmQgPT4ge1xuICAgICAgICAgIGlmIChjb21tYW5kLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1IC1zaycpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGVzdFNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBidW5kbGVTaXplID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldEJ1bmRsZVNpemUoKTtcblxuICAgICAgICBpZiAoYnVuZGxlU2l6ZSA+IHRocmVzaG9sZHMuY3JpdGljYWwpIHtcbiAgICAgICAgICBhbGVydHMucHVzaCh7IHNpemU6IGJ1bmRsZVNpemUsIGxldmVsOiAnY3JpdGljYWwnIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1bmRsZVNpemUgPiB0aHJlc2hvbGRzLndhcm5pbmcpIHtcbiAgICAgICAgICBhbGVydHMucHVzaCh7IHNpemU6IGJ1bmRsZVNpemUsIGxldmVsOiAnd2FybmluZycgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGFsZXJ0cy5sZW5ndGgpLnRvQmUoMik7IC8vIFNob3VsZCBoYXZlIHdhcm5pbmcgYW5kIGNyaXRpY2FsIGFsZXJ0c1xuICAgICAgZXhwZWN0KGFsZXJ0c1swXS5sZXZlbCkudG9CZSgnd2FybmluZycpO1xuICAgICAgZXhwZWN0KGFsZXJ0c1swXS5zaXplKS50b0JlKDQxMCk7XG4gICAgICBleHBlY3QoYWxlcnRzWzFdLmxldmVsKS50b0JlKCdjcml0aWNhbCcpO1xuICAgICAgZXhwZWN0KGFsZXJ0c1sxXS5zaXplKS50b0JlKDQ1MCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=