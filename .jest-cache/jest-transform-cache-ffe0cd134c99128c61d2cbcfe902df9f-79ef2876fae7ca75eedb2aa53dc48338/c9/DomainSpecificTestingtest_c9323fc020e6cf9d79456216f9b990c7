ec53713e728eabbd9161eb8190ede28d
"use strict";
/**
 * Domain-Specific Testing
 * Tests for astrological code analysis and preservation, recipe/ingredient type suggestions,
 * campaign system flexibility preservation, and service layer interface suggestions
 */
Object.defineProperty(exports, "__esModule", { value: true });
const AnyTypeClassifier_1 = require("../AnyTypeClassifier");
const DomainContextAnalyzer_1 = require("../DomainContextAnalyzer");
const SafeTypeReplacer_1 = require("../SafeTypeReplacer");
const types_1 = require("../types");
describe('Domain-Specific Testing', () => {
    let classifier;
    let analyzer;
    let replacer;
    beforeEach(() => {
        classifier = new AnyTypeClassifier_1.AnyTypeClassifier();
        analyzer = new DomainContextAnalyzer_1.DomainContextAnalyzer();
        replacer = new SafeTypeReplacer_1.SafeTypeReplacer();
    });
    const createDomainContext = (codeSnippet, filePath, domain, surroundingLines = [], hasComment = false, comment) => ({
        filePath,
        lineNumber: 1,
        codeSnippet,
        surroundingLines,
        hasExistingComment: hasComment,
        existingComment: comment,
        isInTestFile: filePath.includes('.test.') || filePath.includes('.spec.'),
        domainContext: {
            domain,
            intentionalityHints: [],
            suggestedTypes: [],
            preservationReasons: []
        }
    });
    describe('Astrological Code Analysis and Preservation', () => {
        describe('Planetary Position Data Preservation', () => {
            test('should preserve planetary position API responses', async () => {
                const context = createDomainContext('const planetaryPositions: any = await getReliablePlanetaryPositions();', 'src/calculations/planetary/positions.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { getReliablePlanetaryPositions } from "@/utils/reliableAstronomy";',
                    'export async function calculateCurrentPositions() {'
                ]);
                const domainAnalysis = await analyzer.analyzeDomain(context);
                expect(domainAnalysis.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
                expect(domainAnalysis.preservationReasons).toContain('Astrological calculations require compatibility with external astronomical libraries');
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('planetary position data');
            });
            test('should preserve ephemeris data from external sources', async () => {
                const context = createDomainContext('const ephemerisData: any = astronomyEngine.getEphemeris(date);', 'src/calculations/ephemeris/calculator.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { astronomyEngine } from "astronomy-engine";',
                    'function calculateTransits(startDate: Date, endDate: Date) {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('external astronomical data');
                expect(classification.requiresDocumentation).toBe(true);
            });
            test('should preserve Swiss Ephemeris compatibility', async () => {
                const context = createDomainContext('const swissData: any = swisseph.calc_ut(julianDay, planet);', 'src/calculations/swiss-ephemeris/wrapper.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import * as swisseph from "swisseph";',
                    'export function calculatePlanetPosition(planet: number, date: Date): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('Swiss Ephemeris');
            });
            test('should preserve NASA JPL Horizons API responses', async () => {
                const context = createDomainContext('const horizonsResponse: any = await nasaJplApi.getHorizonsData(params);', 'src/services/astronomy/nasa-jpl.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'class NasaJplService {',
                    '  async fetchPlanetaryData(params: HorizonsParams): Promise<any> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('NASA JPL');
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
            });
        });
        describe('Elemental Properties Preservation', () => {
            test('should preserve dynamic elemental calculations', async () => {
                const context = createDomainContext('const elementalBalance: any = calculateElementalHarmony(ingredients);', 'src/calculations/elemental/harmony.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { ElementalProperties } from "@/types";',
                    'function calculateCompatibility(source: ElementalProperties, target: ElementalProperties): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('elemental');
            });
            test('should suggest specific types for elemental properties when possible', async () => {
                const context = createDomainContext('const fireValue: any = ingredient.fire;', 'src/calculations/elemental/properties.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'interface ElementalProperties {',
                    '  fire: number;',
                    '  water: number;'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('number');
            });
            test('should preserve complex elemental compatibility matrices', async () => {
                const context = createDomainContext('const compatibilityMatrix: Record<string, any> = buildElementalMatrix();', 'src/calculations/elemental/compatibility.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function buildElementalMatrix(): Record<string, any> {',
                    '  return { Fire: { Fire: 0.9, Water: 0.7 } };'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('dynamic');
            });
        });
        describe('Transit and Timing Calculations', () => {
            test('should preserve transit date validation logic', async () => {
                const context = createDomainContext('const transitData: any = validateTransitDate(planet, date, sign);', 'src/utils/planetaryConsistencyCheck.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'export function validateTransitDate(planet: string, date: Date, sign: string): any {',
                    '  const planetData = require(`@/data/planets/${planet.toLowerCase()}`);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('transit date');
            });
            test('should preserve retrograde motion calculations', async () => {
                const context = createDomainContext('const retrogradeData: any = calculateRetrogradePhases(planet, year);', 'src/calculations/retrograde/motion.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function calculateRetrogradePhases(planet: string, year: number): any {',
                    '  const phases = getRetrogradePhases(planet, year);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('retrograde');
            });
        });
        describe('Astrological Chart Calculations', () => {
            test('should preserve house system calculations', async () => {
                const context = createDomainContext('const houseData: any = calculateHouses(latitude, longitude, time);', 'src/calculations/houses/systems.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { HouseSystem } from "@/types/astrology";',
                    'export function calculateHouses(lat: number, lon: number, time: Date): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('house');
            });
            test('should preserve aspect calculations', async () => {
                const context = createDomainContext('const aspects: any[] = calculateAspects(planetPositions);', 'src/calculations/aspects/calculator.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function calculateAspects(positions: PlanetaryPosition[]): any[] {',
                    '  const aspects = [];'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
            });
        });
    });
    describe('Recipe/Ingredient Type Suggestions', () => {
        describe('Ingredient Data Type Suggestions', () => {
            test('should suggest Ingredient interface for ingredient data', async () => {
                const context = createDomainContext('const ingredient: any = getIngredientData(name);', 'src/data/ingredients/processor.ts', types_1.CodeDomain.RECIPE, [
                    'import { Ingredient } from "@/types";',
                    'export function processIngredient(name: string): Ingredient {'
                ]);
                const domainAnalysis = await analyzer.analyzeDomain(context);
                expect(domainAnalysis.suggestedTypes).toContain('Ingredient');
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('Ingredient');
            });
            test('should suggest specific ingredient subtypes', async () => {
                const contexts = [
                    createDomainContext('const spice: any = getSpiceProperties(name);', 'src/data/ingredients/spices.ts', types_1.CodeDomain.RECIPE),
                    createDomainContext('const herb: any = getHerbData(name);', 'src/data/ingredients/herbs.ts', types_1.CodeDomain.RECIPE),
                    createDomainContext('const vegetable: any = getVegetableInfo(name);', 'src/data/ingredients/vegetables.ts', types_1.CodeDomain.RECIPE)
                ];
                for (const context of contexts) {
                    const domainAnalysis = await analyzer.analyzeDomain(context);
                    const classification = await classifier.classify(context);
                    expect(classification.isIntentional).toBe(false);
                    expect(domainAnalysis.suggestedTypes.length).toBeGreaterThan(0);
                    if (context.filePath.includes('spices')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Spice');
                    }
                    else if (context.filePath.includes('herbs')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Herb');
                    }
                    else if (context.filePath.includes('vegetables')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Vegetable');
                    }
                }
            });
            test('should suggest array types for ingredient collections', async () => {
                const context = createDomainContext('const ingredients: any[] = getAllIngredients();', 'src/data/ingredients/collection.ts', types_1.CodeDomain.RECIPE, [
                    'export function getAllIngredients(): Ingredient[] {',
                    '  return ingredientDatabase.getAll();'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
                expect(classification.suggestedReplacement).toBe('Ingredient[]');
            });
            test('should suggest nutritional info types', async () => {
                const context = createDomainContext('const nutrition: any = getNutritionalData(ingredient);', 'src/data/nutrition/calculator.ts', types_1.CodeDomain.RECIPE, [
                    'import { NutritionalInfo } from "@/types";',
                    'function calculateNutrition(ingredient: Ingredient): NutritionalInfo {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('NutritionalInfo');
            });
        });
        describe('Recipe Data Type Suggestions', () => {
            test('should suggest Recipe interface for recipe data', async () => {
                const context = createDomainContext('const recipe: any = buildRecipe(ingredients, instructions);', 'src/data/recipes/builder.ts', types_1.CodeDomain.RECIPE, [
                    'import { Recipe, Ingredient, CookingInstruction } from "@/types";',
                    'export function buildRecipe(ingredients: Ingredient[], instructions: CookingInstruction[]): Recipe {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('Recipe');
            });
            test('should suggest cooking method types', async () => {
                const context = createDomainContext('const method: any = selectCookingMethod(ingredients);', 'src/data/cooking/methods.ts', types_1.CodeDomain.RECIPE, [
                    'import { CookingMethod } from "@/types";',
                    'export function selectOptimalMethod(ingredients: Ingredient[]): CookingMethod {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CookingMethod');
            });
            test('should suggest cuisine type for cultural data', async () => {
                const context = createDomainContext('const cuisine: any = identifyCuisineType(recipe);', 'src/data/cuisines/classifier.ts', types_1.CodeDomain.RECIPE, [
                    'import { CuisineType } from "@/types";',
                    'function classifyCuisine(recipe: Recipe): CuisineType {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CuisineType');
            });
        });
        describe('External Food API Preservation', () => {
            test('should preserve Spoonacular API responses', async () => {
                const context = createDomainContext('const spoonacularData: any = await spoonacularApi.getRecipe(id);', 'src/services/external/spoonacular.ts', types_1.CodeDomain.RECIPE, [
                    'class SpoonacularService {',
                    '  async fetchRecipeData(recipeId: number): Promise<any> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('API');
            });
            test('should preserve USDA Food Data Central responses', async () => {
                const context = createDomainContext('const usdaResponse: any = await usdaApi.getFoodData(fdcId);', 'src/services/external/usda.ts', types_1.CodeDomain.RECIPE, [
                    'async function fetchNutritionalData(fdcId: string): Promise<any> {',
                    '  const response = await fetch(`https://api.nal.usda.gov/fdc/v1/food/${fdcId}`);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('USDA');
            });
        });
        describe('Elemental Properties in Recipe Context', () => {
            test('should suggest ElementalProperties for ingredient elements', async () => {
                const context = createDomainContext('const elements: any = ingredient.elementalProperties;', 'src/data/ingredients/elemental.ts', types_1.CodeDomain.RECIPE, [
                    'interface Ingredient {',
                    '  elementalProperties: ElementalProperties;',
                    '}'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ElementalProperties');
            });
            test('should preserve dynamic elemental calculations in recipes', async () => {
                const context = createDomainContext('const harmony: any = calculateRecipeHarmony(recipe);', 'src/calculations/recipe/harmony.ts', types_1.CodeDomain.RECIPE, [
                    'function calculateRecipeHarmony(recipe: Recipe): any {',
                    '  return recipe.ingredients.reduce((harmony, ingredient) => {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('harmony');
            });
        });
    });
    describe('Campaign System Flexibility Preservation', () => {
        describe('Dynamic Configuration Preservation', () => {
            test('should preserve campaign configuration flexibility', async () => {
                const context = createDomainContext('const campaignConfig: any = loadDynamicConfig(environment);', 'src/services/campaign/ConfigLoader.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class ConfigLoader {',
                    '  loadDynamicConfig(env: string): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.DYNAMIC_CONFIG);
                expect(classification.reasoning).toContain('dynamic');
            });
            test('should preserve adaptive strategy configurations', async () => {
                const context = createDomainContext('const adaptiveSettings: any = calculateOptimalSettings(metrics);', 'src/services/campaign/AdaptiveStrategy.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class AdaptiveStrategy {',
                    '  calculateOptimalSettings(metrics: ProgressMetrics): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('adaptive');
            });
            test('should preserve intelligence system configurations', async () => {
                const context = createDomainContext('const intelligenceConfig: any = buildIntelligenceSystem(params);', 'src/services/campaign/IntelligenceSystem.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class IntelligenceSystem {',
                    '  buildIntelligenceSystem(params: IntelligenceParams): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('intelligence');
            });
        });
        describe('Metrics and Progress Tracking', () => {
            test('should suggest specific types for well-defined metrics', async () => {
                const context = createDomainContext('const progress: any = calculateProgress();', 'src/services/campaign/ProgressTracker.ts', types_1.CodeDomain.CAMPAIGN, [
                    'import { ProgressMetrics } from "@/types";',
                    'function calculateProgress(): ProgressMetrics {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ProgressMetrics');
            });
            test('should preserve dynamic metrics calculations', async () => {
                const context = createDomainContext('const dynamicMetrics: any = aggregateMetrics(sources);', 'src/services/campaign/MetricsAggregator.ts', types_1.CodeDomain.CAMPAIGN, [
                    'function aggregateMetrics(sources: MetricsSource[]): any {',
                    '  return sources.reduce((agg, source) => ({ ...agg, ...source.getMetrics() }), {});'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('dynamic');
            });
            test('should suggest TypeScriptError for error analysis', async () => {
                const context = createDomainContext('const errors: any[] = analyzeTypeScriptErrors();', 'src/services/campaign/TypeScriptErrorAnalyzer.ts', types_1.CodeDomain.CAMPAIGN, [
                    'import { TypeScriptError } from "@/types";',
                    'function analyzeTypeScriptErrors(): TypeScriptError[] {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('TypeScriptError[]');
            });
        });
        describe('Tool Integration Flexibility', () => {
            test('should preserve tool integration configurations', async () => {
                const context = createDomainContext('const toolConfig: any = integrateExternalTool(toolName, settings);', 'src/services/campaign/ToolIntegration.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class ToolIntegration {',
                    '  integrateExternalTool(name: string, settings: any): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('tool integration');
            });
            test('should preserve validation framework flexibility', async () => {
                const context = createDomainContext('const validationResult: any = runValidation(rules, data);', 'src/services/campaign/ValidationFramework.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class ValidationFramework {',
                    '  runValidation(rules: ValidationRule[], data: any): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('validation');
            });
        });
        describe('Safety Protocol Flexibility', () => {
            test('should preserve safety event handling', async () => {
                const context = createDomainContext('const safetyEvent: any = createSafetyEvent(type, data);', 'src/services/campaign/SafetyProtocol.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class SafetyProtocol {',
                    '  createSafetyEvent(type: SafetyEventType, data: any): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('safety');
            });
            test('should preserve rollback mechanism flexibility', async () => {
                const context = createDomainContext('const rollbackData: any = prepareRollback(changes);', 'src/services/campaign/RollbackManager.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class RollbackManager {',
                    '  prepareRollback(changes: FileChange[]): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('rollback');
            });
        });
    });
    describe('Service Layer Interface Suggestions', () => {
        describe('API Service Interface Suggestions', () => {
            test('should suggest ApiResponse for API service responses', async () => {
                const context = createDomainContext('const response: any = await this.httpClient.get(endpoint);', 'src/services/api/BaseApiService.ts', types_1.CodeDomain.SERVICE, [
                    'export class BaseApiService {',
                    '  async get<T>(endpoint: string): Promise<ApiResponse<T>> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ApiResponse<T>');
            });
            test('should suggest specific service interfaces', async () => {
                const contexts = [
                    createDomainContext('const service: any = new RecommendationService();', 'src/services/RecommendationService.ts', types_1.CodeDomain.SERVICE),
                    createDomainContext('const astroService: any = new AstrologicalService();', 'src/services/AstrologicalService.ts', types_1.CodeDomain.SERVICE),
                    createDomainContext('const recipeService: any = new RecipeService();', 'src/services/RecipeService.ts', types_1.CodeDomain.SERVICE)
                ];
                for (const context of contexts) {
                    const classification = await classifier.classify(context);
                    expect(classification.isIntentional).toBe(false);
                    if (context.filePath.includes('Recommendation')) {
                        expect(classification.suggestedReplacement).toBe('RecommendationService');
                    }
                    else if (context.filePath.includes('Astrological')) {
                        expect(classification.suggestedReplacement).toBe('AstrologicalService');
                    }
                    else if (context.filePath.includes('Recipe')) {
                        expect(classification.suggestedReplacement).toBe('RecipeService');
                    }
                }
            });
            test('should preserve external service integration flexibility', async () => {
                const context = createDomainContext('const externalService: any = createExternalServiceClient(config);', 'src/services/external/ExternalServiceFactory.ts', types_1.CodeDomain.SERVICE, [
                    'export class ExternalServiceFactory {',
                    '  createExternalServiceClient(config: ServiceConfig): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('external service');
            });
        });
        describe('Data Transformation Service Suggestions', () => {
            test('should suggest specific transformer interfaces', async () => {
                const context = createDomainContext('const transformer: any = new DataTransformer();', 'src/services/data/DataTransformer.ts', types_1.CodeDomain.SERVICE, [
                    'export class DataTransformer {',
                    '  transform<T, U>(data: T): U {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('DataTransformer');
            });
            test('should suggest mapper interfaces for data mapping', async () => {
                const context = createDomainContext('const mapper: any = createMapper(sourceSchema, targetSchema);', 'src/services/data/SchemaMapper.ts', types_1.CodeDomain.SERVICE, [
                    'export function createMapper(source: Schema, target: Schema): any {',
                    '  return new SchemaMapper(source, target);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('SchemaMapper');
            });
        });
        describe('Caching Service Interface Suggestions', () => {
            test('should suggest cache interface types', async () => {
                const context = createDomainContext('const cache: any = new CacheService();', 'src/services/cache/CacheService.ts', types_1.CodeDomain.SERVICE, [
                    'export class CacheService {',
                    '  get<T>(key: string): Promise<T | null> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CacheService');
            });
            test('should suggest cache entry types', async () => {
                const context = createDomainContext('const entry: any = cache.get(key);', 'src/services/cache/CacheManager.ts', types_1.CodeDomain.SERVICE, [
                    'class CacheManager {',
                    '  async getCacheEntry(key: string): Promise<CacheEntry | null> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CacheEntry | null');
            });
        });
        describe('Validation Service Interface Suggestions', () => {
            test('should suggest validation result interfaces', async () => {
                const context = createDomainContext('const result: any = validator.validate(data);', 'src/services/validation/ValidationService.ts', types_1.CodeDomain.SERVICE, [
                    'export class ValidationService {',
                    '  validate(data: unknown): ValidationResult {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ValidationResult');
            });
            test('should suggest schema validation interfaces', async () => {
                const context = createDomainContext('const schema: any = buildValidationSchema(rules);', 'src/services/validation/SchemaBuilder.ts', types_1.CodeDomain.SERVICE, [
                    'import { ValidationSchema } from "@/types";',
                    'function buildValidationSchema(rules: ValidationRule[]): ValidationSchema {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ValidationSchema');
            });
        });
        describe('Service Error Handling', () => {
            test('should preserve service error handling flexibility', async () => {
                const context = createDomainContext('const error: any = new ServiceError(message, code);', 'src/services/errors/ServiceError.ts', types_1.CodeDomain.SERVICE, [
                    'export class ServiceError extends Error {',
                    '  constructor(message: string, code: string, details?: any) {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('error');
            });
            test('should suggest specific error types when available', async () => {
                const context = createDomainContext('const apiError: any = handleApiError(response);', 'src/services/errors/ApiErrorHandler.ts', types_1.CodeDomain.SERVICE, [
                    'import { ApiError } from "@/types";',
                    'function handleApiError(response: Response): ApiError {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ApiError');
            });
        });
    });
    describe('Cross-Domain Integration', () => {
        test('should handle mixed domain contexts appropriately', async () => {
            // Test a service that integrates astrological calculations with recipe recommendations
            const context = createDomainContext('const recommendation: any = await astroRecipeService.getRecommendation(userChart, preferences);', 'src/services/AstrologicalRecipeService.ts', types_1.CodeDomain.SERVICE, [
                'export class AstrologicalRecipeService {',
                '  async getRecommendation(chart: AstrologyChart, prefs: UserPreferences): Promise<RecipeRecommendation> {'
            ]);
            const classification = await classifier.classify(context);
            expect(classification.isIntentional).toBe(false);
            expect(classification.suggestedReplacement).toBe('RecipeRecommendation');
        });
        test('should preserve campaign system integration with domain services', async () => {
            const context = createDomainContext('const campaignData: any = integrateDomainServices(services);', 'src/services/campaign/DomainIntegration.ts', types_1.CodeDomain.CAMPAIGN, [
                'class DomainIntegration {',
                '  integrateDomainServices(services: DomainService[]): any {'
            ]);
            const classification = await classifier.classify(context);
            expect(classification.isIntentional).toBe(true);
            expect(classification.reasoning).toContain('integration');
        });
    });
    describe('Type Replacement Integration', () => {
        test('should apply domain-specific replacements correctly', async () => {
            const replacements = [
                {
                    original: 'any',
                    replacement: 'Ingredient',
                    filePath: 'src/data/ingredients/processor.ts',
                    lineNumber: 1,
                    confidence: 0.9,
                    validationRequired: true
                },
                {
                    original: 'any',
                    replacement: 'PlanetaryPosition',
                    filePath: 'src/calculations/planetary/positions.ts',
                    lineNumber: 1,
                    confidence: 0.8,
                    validationRequired: true
                },
                {
                    original: 'any',
                    replacement: 'ProgressMetrics',
                    filePath: 'src/services/campaign/ProgressTracker.ts',
                    lineNumber: 1,
                    confidence: 0.9,
                    validationRequired: true
                }
            ];
            // Mock file system for domain-specific content
            jest.spyOn(require('fs'), 'readFileSync').mockImplementation((path) => {
                if (path.includes('ingredients'))
                    return 'const ingredient: any = getData();';
                if (path.includes('planetary'))
                    return 'const position: any = calculate();';
                if (path.includes('campaign'))
                    return 'const metrics: any = getProgress();';
                return 'backup content';
            });
            jest.spyOn(require('fs'), 'writeFileSync').mockImplementation(() => undefined);
            jest.spyOn(require('fs'), 'existsSync').mockReturnValue(true);
            // Mock successful compilation
            jest.spyOn(require('child_process'), 'execSync').mockReturnValue('');
            const results = await Promise.all(replacements.map(replacement => replacer.applyReplacement(replacement)));
            results.forEach(result => {
                expect(result.success).toBe(true);
                expect(result.appliedReplacements).toHaveLength(1);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL19fdGVzdHNfXy9Eb21haW5TcGVjaWZpY1Rlc3RpbmcudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7QUFFSCw0REFBeUQ7QUFDekQsb0VBQWlFO0FBQ2pFLDBEQUF1RDtBQUN2RCxvQ0FLa0I7QUFFbEIsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUN2QyxJQUFJLFVBQTZCLENBQUM7SUFDbEMsSUFBSSxRQUErQixDQUFDO0lBQ3BDLElBQUksUUFBMEIsQ0FBQztJQUUvQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsVUFBVSxHQUFHLElBQUkscUNBQWlCLEVBQUUsQ0FBQztRQUNyQyxRQUFRLEdBQUcsSUFBSSw2Q0FBcUIsRUFBRSxDQUFDO1FBQ3ZDLFFBQVEsR0FBRyxJQUFJLG1DQUFnQixFQUFFLENBQUM7SUFDcEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLG1CQUFtQixHQUFHLENBQzFCLFdBQW1CLEVBQ25CLFFBQWdCLEVBQ2hCLE1BQWtCLEVBQ2xCLG1CQUE2QixFQUFFLEVBQy9CLFVBQVUsR0FBRyxLQUFLLEVBQ2xCLE9BQWdCLEVBQ08sRUFBRSxDQUFDLENBQUM7UUFDM0IsUUFBUTtRQUNSLFVBQVUsRUFBRSxDQUFDO1FBQ2IsV0FBVztRQUNYLGdCQUFnQjtRQUNoQixrQkFBa0IsRUFBRSxVQUFVO1FBQzlCLGVBQWUsRUFBRSxPQUFPO1FBQ3hCLFlBQVksRUFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQ3hFLGFBQWEsRUFBRTtZQUNiLE1BQU07WUFDTixtQkFBbUIsRUFBRSxFQUFFO1lBQ3ZCLGNBQWMsRUFBRSxF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Z0JBQWdCLENBQUM7WUFDMUIsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMvRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFOUQsOEJBQThCO1lBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUVyRSxNQUFNLE9BQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQy9CLFlBQVksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FDeEUsQ0FBQztZQUVGLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQ3ZCLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9iYWNrdXBzL2ZpcnN0LXdhdmUtMjAyNS0wOC0xMVQwNS0xOS0yNi04MTNaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vRG9tYWluU3BlY2lmaWNUZXN0aW5nLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEb21haW4tU3BlY2lmaWMgVGVzdGluZ1xuICogVGVzdHMgZm9yIGFzdHJvbG9naWNhbCBjb2RlIGFuYWx5c2lzIGFuZCBwcmVzZXJ2YXRpb24sIHJlY2lwZS9pbmdyZWRpZW50IHR5cGUgc3VnZ2VzdGlvbnMsXG4gKiBjYW1wYWlnbiBzeXN0ZW0gZmxleGliaWxpdHkgcHJlc2VydmF0aW9uLCBhbmQgc2VydmljZSBsYXllciBpbnRlcmZhY2Ugc3VnZ2VzdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBBbnlUeXBlQ2xhc3NpZmllciB9IGZyb20gJy4uL0FueVR5cGVDbGFzc2lmaWVyJztcbmltcG9ydCB7IERvbWFpbkNvbnRleHRBbmFseXplciB9IGZyb20gJy4uL0RvbWFpbkNvbnRleHRBbmFseXplcic7XG5pbXBvcnQgeyBTYWZlVHlwZVJlcGxhY2VyIH0gZnJvbSAnLi4vU2FmZVR5cGVSZXBsYWNlcic7XG5pbXBvcnQge1xuICAgIEFueVR5cGVDYXRlZ29yeSxcbiAgICBDbGFzc2lmaWNhdGlvbkNvbnRleHQsXG4gICAgQ29kZURvbWFpbixcbiAgICBUeXBlUmVwbGFjZW1lbnRcbn0gZnJvbSAnLi4vdHlwZXMnO1xuXG5kZXNjcmliZSgnRG9tYWluLVNwZWNpZmljIFRlc3RpbmcnLCAoKSA9PiB7XG4gIGxldCBjbGFzc2lmaWVyOiBBbnlUeXBlQ2xhc3NpZmllcjtcbiAgbGV0IGFuYWx5emVyOiBEb21haW5Db250ZXh0QW5hbHl6ZXI7XG4gIGxldCByZXBsYWNlcjogU2FmZVR5cGVSZXBsYWNlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBjbGFzc2lmaWVyID0gbmV3IEFueVR5cGVDbGFzc2lmaWVyKCk7XG4gICAgYW5hbHl6ZXIgPSBuZXcgRG9tYWluQ29udGV4dEFuYWx5emVyKCk7XG4gICAgcmVwbGFjZXIgPSBuZXcgU2FmZVR5cGVSZXBsYWNlcigpO1xuICB9KTtcblxuICBjb25zdCBjcmVhdGVEb21haW5Db250ZXh0ID0gKFxuICAgIGNvZGVTbmlwcGV0OiBzdHJpbmcsXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICBkb21haW46IENvZGVEb21haW4sXG4gICAgc3Vycm91bmRpbmdMaW5lczogc3RyaW5nW10gPSBbXSxcbiAgICBoYXNDb21tZW50ID0gZmFsc2UsXG4gICAgY29tbWVudD86IHN0cmluZ1xuICApOiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPT4gKHtcbiAgICBmaWxlUGF0aCxcbiAgICBsaW5lTnVtYmVyOiAxLFxuICAgIGNvZGVTbmlwcGV0LFxuICAgIHN1cnJvdW5kaW5nTGluZXMsXG4gICAgaGFzRXhpc3RpbmdDb21tZW50OiBoYXNDb21tZW50LFxuICAgIGV4aXN0aW5nQ29tbWVudDogY29tbWVudCxcbiAgICBpc0luVGVzdEZpbGU6IGZpbGVQYXRoLmluY2x1ZGVzKCcudGVzdC4nKSB8fCBmaWxlUGF0aC5pbmNsdWRlcygnLnNwZWMuJyksXG4gICAgZG9tYWluQ29udGV4dDoge1xuICAgICAgZG9tYWluLFxuICAgICAgaW50ZW50aW9uYWxpdHlIaW50czogW10sXG4gICAgICBzdWdnZXN0ZWRUeXBlczogW10sXG4gICAgICBwcmVzZXJ2YXRpb25SZWFzb25zOiBbXVxuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FzdHJvbG9naWNhbCBDb2RlIEFuYWx5c2lzIGFuZCBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ1BsYW5ldGFyeSBQb3NpdGlvbiBEYXRhIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBwbGFuZXRhcnkgcG9zaXRpb24gQVBJIHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHBsYW5ldGFyeVBvc2l0aW9uczogYW55ID0gYXdhaXQgZ2V0UmVsaWFibGVQbGFuZXRhcnlQb3NpdGlvbnMoKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL3BsYW5ldGFyeS9wb3NpdGlvbnMudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBnZXRSZWxpYWJsZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gXCJAL3V0aWxzL3JlbGlhYmxlQXN0cm9ub215XCI7JyxcbiAgICAgICAgICAgICdleHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXRlQ3VycmVudFBvc2l0aW9ucygpIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGRvbWFpbkFuYWx5c2lzID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLmRvbWFpbikudG9CZShDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCk7XG4gICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5wcmVzZXJ2YXRpb25SZWFzb25zKS50b0NvbnRhaW4oXG4gICAgICAgICAgJ0FzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMgcmVxdWlyZSBjb21wYXRpYmlsaXR5IHdpdGggZXh0ZXJuYWwgYXN0cm9ub21pY2FsIGxpYnJhcmllcydcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbigncGxhbmV0YXJ5IHBvc2l0aW9uIGRhdGEnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgZXBoZW1lcmlzIGRhdGEgZnJvbSBleHRlcm5hbCBzb3VyY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZXBoZW1lcmlzRGF0YTogYW55ID0gYXN0cm9ub215RW5naW5lLmdldEVwaGVtZXJpcyhkYXRlKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2VwaGVtZXJpcy9jYWxjdWxhdG9yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgYXN0cm9ub215RW5naW5lIH0gZnJvbSBcImFzdHJvbm9teS1lbmdpbmVcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZVRyYW5zaXRzKHN0YXJ0RGF0ZTogRGF0ZSwgZW5kRGF0ZTogRGF0ZSkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdleHRlcm5hbCBhc3Ryb25vbWljYWwgZGF0YScpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVxdWlyZXNEb2N1bWVudGF0aW9uKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBTd2lzcyBFcGhlbWVyaXMgY29tcGF0aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHN3aXNzRGF0YTogYW55ID0gc3dpc3NlcGguY2FsY191dChqdWxpYW5EYXksIHBsYW5ldCk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9zd2lzcy1lcGhlbWVyaXMvd3JhcHBlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCAqIGFzIHN3aXNzZXBoIGZyb20gXCJzd2lzc2VwaFwiOycsXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBsYW5ldFBvc2l0aW9uKHBsYW5ldDogbnVtYmVyLCBkYXRlOiBEYXRlKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdTd2lzcyBFcGhlbWVyaXMnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgTkFTQSBKUEwgSG9yaXpvbnMgQVBJIHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGhvcml6b25zUmVzcG9uc2U6IGFueSA9IGF3YWl0IG5hc2FKcGxBcGkuZ2V0SG9yaXpvbnNEYXRhKHBhcmFtcyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2FzdHJvbm9teS9uYXNhLWpwbC50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2NsYXNzIE5hc2FKcGxTZXJ2aWNlIHsnLFxuICAgICAgICAgICAgJyAgYXN5bmMgZmV0Y2hQbGFuZXRhcnlEYXRhKHBhcmFtczogSG9yaXpvbnNQYXJhbXMpOiBQcm9taXNlPGFueT4geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdOQVNBIEpQTCcpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdFbGVtZW50YWwgUHJvcGVydGllcyBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgZHluYW1pYyBlbGVtZW50YWwgY2FsY3VsYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZWxlbWVudGFsQmFsYW5jZTogYW55ID0gY2FsY3VsYXRlRWxlbWVudGFsSGFybW9ueShpbmdyZWRpZW50cyk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9lbGVtZW50YWwvaGFybW9ueS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IEVsZW1lbnRhbFByb3BlcnRpZXMgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlQ29tcGF0aWJpbGl0eShzb3VyY2U6IEVsZW1lbnRhbFByb3BlcnRpZXMsIHRhcmdldDogRWxlbWVudGFsUHJvcGVydGllcyk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2VsZW1lbnRhbCcpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHNwZWNpZmljIHR5cGVzIGZvciBlbGVtZW50YWwgcHJvcGVydGllcyB3aGVuIHBvc3NpYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZmlyZVZhbHVlOiBhbnkgPSBpbmdyZWRpZW50LmZpcmU7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9lbGVtZW50YWwvcHJvcGVydGllcy50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ludGVyZmFjZSBFbGVtZW50YWxQcm9wZXJ0aWVzIHsnLFxuICAgICAgICAgICAgJyAgZmlyZTogbnVtYmVyOycsXG4gICAgICAgICAgICAnICB3YXRlcjogbnVtYmVyOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnbnVtYmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGNvbXBsZXggZWxlbWVudGFsIGNvbXBhdGliaWxpdHkgbWF0cmljZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBjb21wYXRpYmlsaXR5TWF0cml4OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gYnVpbGRFbGVtZW50YWxNYXRyaXgoKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2VsZW1lbnRhbC9jb21wYXRpYmlsaXR5LnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gYnVpbGRFbGVtZW50YWxNYXRyaXgoKTogUmVjb3JkPHN0cmluZywgYW55PiB7JyxcbiAgICAgICAgICAgICcgIHJldHVybiB7IEZpcmU6IHsgRmlyZTogMC45LCBXYXRlcjogMC43IH0gfTsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZHluYW1pYycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnVHJhbnNpdCBhbmQgVGltaW5nIENhbGN1bGF0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSB0cmFuc2l0IGRhdGUgdmFsaWRhdGlvbiBsb2dpYycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHRyYW5zaXREYXRhOiBhbnkgPSB2YWxpZGF0ZVRyYW5zaXREYXRlKHBsYW5ldCwgZGF0ZSwgc2lnbik7JyxcbiAgICAgICAgICAnc3JjL3V0aWxzL3BsYW5ldGFyeUNvbnNpc3RlbmN5Q2hlY2sudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUcmFuc2l0RGF0ZShwbGFuZXQ6IHN0cmluZywgZGF0ZTogRGF0ZSwgc2lnbjogc3RyaW5nKTogYW55IHsnLFxuICAgICAgICAgICAgJyAgY29uc3QgcGxhbmV0RGF0YSA9IHJlcXVpcmUoYEAvZGF0YS9wbGFuZXRzLyR7cGxhbmV0LnRvTG93ZXJDYXNlKCl9YCk7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3RyYW5zaXQgZGF0ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSByZXRyb2dyYWRlIG1vdGlvbiBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCByZXRyb2dyYWRlRGF0YTogYW55ID0gY2FsY3VsYXRlUmV0cm9ncmFkZVBoYXNlcyhwbGFuZXQsIHllYXIpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvcmV0cm9ncmFkZS9tb3Rpb24udHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVSZXRyb2dyYWRlUGhhc2VzKHBsYW5ldDogc3RyaW5nLCB5ZWFyOiBudW1iZXIpOiBhbnkgeycsXG4gICAgICAgICAgICAnICBjb25zdCBwaGFzZXMgPSBnZXRSZXRyb2dyYWRlUGhhc2VzKHBsYW5ldCwgeWVhcik7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3JldHJvZ3JhZGUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0FzdHJvbG9naWNhbCBDaGFydCBDYWxjdWxhdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgaG91c2Ugc3lzdGVtIGNhbGN1bGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGhvdXNlRGF0YTogYW55ID0gY2FsY3VsYXRlSG91c2VzKGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpbWUpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvaG91c2VzL3N5c3RlbXMudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBIb3VzZVN5c3RlbSB9IGZyb20gXCJAL3R5cGVzL2FzdHJvbG9neVwiOycsXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUhvdXNlcyhsYXQ6IG51bWJlciwgbG9uOiBudW1iZXIsIHRpbWU6IERhdGUpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdob3VzZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBhc3BlY3QgY2FsY3VsYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgYXNwZWN0czogYW55W10gPSBjYWxjdWxhdGVBc3BlY3RzKHBsYW5ldFBvc2l0aW9ucyk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9hc3BlY3RzL2NhbGN1bGF0b3IudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVBc3BlY3RzKHBvc2l0aW9uczogUGxhbmV0YXJ5UG9zaXRpb25bXSk6IGFueVtdIHsnLFxuICAgICAgICAgICAgJyAgY29uc3QgYXNwZWN0cyA9IFtdOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5BUlJBWV9UWVBFKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVjaXBlL0luZ3JlZGllbnQgVHlwZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnSW5ncmVkaWVudCBEYXRhIFR5cGUgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBJbmdyZWRpZW50IGludGVyZmFjZSBmb3IgaW5ncmVkaWVudCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgaW5ncmVkaWVudDogYW55ID0gZ2V0SW5ncmVkaWVudERhdGEobmFtZSk7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvaW5ncmVkaWVudHMvcHJvY2Vzc29yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgSW5ncmVkaWVudCB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gcHJvY2Vzc0luZ3JlZGllbnQobmFtZTogc3RyaW5nKTogSW5ncmVkaWVudCB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBkb21haW5BbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdJbmdyZWRpZW50Jyk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnSW5ncmVkaWVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHNwZWNpZmljIGluZ3JlZGllbnQgc3VidHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHRzID0gW1xuICAgICAgICAgIGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgICAnY29uc3Qgc3BpY2U6IGFueSA9IGdldFNwaWNlUHJvcGVydGllcyhuYW1lKTsnLFxuICAgICAgICAgICAgJ3NyYy9kYXRhL2luZ3JlZGllbnRzL3NwaWNlcy50cycsXG4gICAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRVxuICAgICAgICAgICksXG4gICAgICAgICAgY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAgICdjb25zdCBoZXJiOiBhbnkgPSBnZXRIZXJiRGF0YShuYW1lKTsnLFxuICAgICAgICAgICAgJ3NyYy9kYXRhL2luZ3JlZGllbnRzL2hlcmJzLnRzJyxcbiAgICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFXG4gICAgICAgICAgKSxcbiAgICAgICAgICBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICAgJ2NvbnN0IHZlZ2V0YWJsZTogYW55ID0gZ2V0VmVnZXRhYmxlSW5mbyhuYW1lKTsnLFxuICAgICAgICAgICAgJ3NyYy9kYXRhL2luZ3JlZGllbnRzL3ZlZ2V0YWJsZXMudHMnLFxuICAgICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEVcbiAgICAgICAgICApXG4gICAgICAgIF07XG5cbiAgICAgICAgZm9yIChjb25zdCBjb250ZXh0IG9mIGNvbnRleHRzKSB7XG4gICAgICAgICAgY29uc3QgZG9tYWluQW5hbHlzaXMgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcblxuICAgICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMuc3VnZ2VzdGVkVHlwZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5maWxlUGF0aC5pbmNsdWRlcygnc3BpY2VzJykpIHtcbiAgICAgICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdTcGljZScpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5maWxlUGF0aC5pbmNsdWRlcygnaGVyYnMnKSkge1xuICAgICAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLnN1Z2dlc3RlZFR5cGVzKS50b0NvbnRhaW4oJ0hlcmInKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQuZmlsZVBhdGguaW5jbHVkZXMoJ3ZlZ2V0YWJsZXMnKSkge1xuICAgICAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLnN1Z2dlc3RlZFR5cGVzKS50b0NvbnRhaW4oJ1ZlZ2V0YWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IGFycmF5IHR5cGVzIGZvciBpbmdyZWRpZW50IGNvbGxlY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgaW5ncmVkaWVudHM6IGFueVtdID0gZ2V0QWxsSW5ncmVkaWVudHMoKTsnLFxuICAgICAgICAgICdzcmMvZGF0YS9pbmdyZWRpZW50cy9jb2xsZWN0aW9uLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIGdldEFsbEluZ3JlZGllbnRzKCk6IEluZ3JlZGllbnRbXSB7JyxcbiAgICAgICAgICAgICcgIHJldHVybiBpbmdyZWRpZW50RGF0YWJhc2UuZ2V0QWxsKCk7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5BUlJBWV9UWVBFKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdJbmdyZWRpZW50W10nKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBudXRyaXRpb25hbCBpbmZvIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgbnV0cml0aW9uOiBhbnkgPSBnZXROdXRyaXRpb25hbERhdGEoaW5ncmVkaWVudCk7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvbnV0cml0aW9uL2NhbGN1bGF0b3IudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBOdXRyaXRpb25hbEluZm8gfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlTnV0cml0aW9uKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpOiBOdXRyaXRpb25hbEluZm8geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnTnV0cml0aW9uYWxJbmZvJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdSZWNpcGUgRGF0YSBUeXBlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgUmVjaXBlIGludGVyZmFjZSBmb3IgcmVjaXBlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCByZWNpcGU6IGFueSA9IGJ1aWxkUmVjaXBlKGluZ3JlZGllbnRzLCBpbnN0cnVjdGlvbnMpOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL3JlY2lwZXMvYnVpbGRlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IFJlY2lwZSwgSW5ncmVkaWVudCwgQ29va2luZ0luc3RydWN0aW9uIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBidWlsZFJlY2lwZShpbmdyZWRpZW50czogSW5ncmVkaWVudFtdLCBpbnN0cnVjdGlvbnM6IENvb2tpbmdJbnN0cnVjdGlvbltdKTogUmVjaXBlIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1JlY2lwZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IGNvb2tpbmcgbWV0aG9kIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgbWV0aG9kOiBhbnkgPSBzZWxlY3RDb29raW5nTWV0aG9kKGluZ3JlZGllbnRzKTsnLFxuICAgICAgICAgICdzcmMvZGF0YS9jb29raW5nL21ldGhvZHMudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBDb29raW5nTWV0aG9kIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBzZWxlY3RPcHRpbWFsTWV0aG9kKGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10pOiBDb29raW5nTWV0aG9kIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0Nvb2tpbmdNZXRob2QnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBjdWlzaW5lIHR5cGUgZm9yIGN1bHR1cmFsIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBjdWlzaW5lOiBhbnkgPSBpZGVudGlmeUN1aXNpbmVUeXBlKHJlY2lwZSk7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvY3Vpc2luZXMvY2xhc3NpZmllci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IEN1aXNpbmVUeXBlIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNsYXNzaWZ5Q3Vpc2luZShyZWNpcGU6IFJlY2lwZSk6IEN1aXNpbmVUeXBlIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0N1aXNpbmVUeXBlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdFeHRlcm5hbCBGb29kIEFQSSBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgU3Bvb25hY3VsYXIgQVBJIHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHNwb29uYWN1bGFyRGF0YTogYW55ID0gYXdhaXQgc3Bvb25hY3VsYXJBcGkuZ2V0UmVjaXBlKGlkKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvZXh0ZXJuYWwvc3Bvb25hY3VsYXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBTcG9vbmFjdWxhclNlcnZpY2UgeycsXG4gICAgICAgICAgICAnICBhc3luYyBmZXRjaFJlY2lwZURhdGEocmVjaXBlSWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignQVBJJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIFVTREEgRm9vZCBEYXRhIENlbnRyYWwgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgdXNkYVJlc3BvbnNlOiBhbnkgPSBhd2FpdCB1c2RhQXBpLmdldEZvb2REYXRhKGZkY0lkKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvZXh0ZXJuYWwvdXNkYS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2FzeW5jIGZ1bmN0aW9uIGZldGNoTnV0cml0aW9uYWxEYXRhKGZkY0lkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4geycsXG4gICAgICAgICAgICAnICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5uYWwudXNkYS5nb3YvZmRjL3YxL2Zvb2QvJHtmZGNJZH1gKTsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignVVNEQScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRWxlbWVudGFsIFByb3BlcnRpZXMgaW4gUmVjaXBlIENvbnRleHQnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBFbGVtZW50YWxQcm9wZXJ0aWVzIGZvciBpbmdyZWRpZW50IGVsZW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZWxlbWVudHM6IGFueSA9IGluZ3JlZGllbnQuZWxlbWVudGFsUHJvcGVydGllczsnLFxuICAgICAgICAgICdzcmMvZGF0YS9pbmdyZWRpZW50cy9lbGVtZW50YWwudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbnRlcmZhY2UgSW5ncmVkaWVudCB7JyxcbiAgICAgICAgICAgICcgIGVsZW1lbnRhbFByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXM7JyxcbiAgICAgICAgICAgICd9J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdFbGVtZW50YWxQcm9wZXJ0aWVzJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGR5bmFtaWMgZWxlbWVudGFsIGNhbGN1bGF0aW9ucyBpbiByZWNpcGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgaGFybW9ueTogYW55ID0gY2FsY3VsYXRlUmVjaXBlSGFybW9ueShyZWNpcGUpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvcmVjaXBlL2hhcm1vbnkudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVSZWNpcGVIYXJtb255KHJlY2lwZTogUmVjaXBlKTogYW55IHsnLFxuICAgICAgICAgICAgJyAgcmV0dXJuIHJlY2lwZS5pbmdyZWRpZW50cy5yZWR1Y2UoKGhhcm1vbnksIGluZ3JlZGllbnQpID0+IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignaGFybW9ueScpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW1wYWlnbiBTeXN0ZW0gRmxleGliaWxpdHkgUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdEeW5hbWljIENvbmZpZ3VyYXRpb24gUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGNhbXBhaWduIGNvbmZpZ3VyYXRpb24gZmxleGliaWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBjYW1wYWlnbkNvbmZpZzogYW55ID0gbG9hZER5bmFtaWNDb25maWcoZW52aXJvbm1lbnQpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Db25maWdMb2FkZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBDb25maWdMb2FkZXIgeycsXG4gICAgICAgICAgICAnICBsb2FkRHluYW1pY0NvbmZpZyhlbnY6IHN0cmluZyk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdkeW5hbWljJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGFkYXB0aXZlIHN0cmF0ZWd5IGNvbmZpZ3VyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgYWRhcHRpdmVTZXR0aW5nczogYW55ID0gY2FsY3VsYXRlT3B0aW1hbFNldHRpbmdzKG1ldHJpY3MpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9BZGFwdGl2ZVN0cmF0ZWd5LnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBBZGFwdGl2ZVN0cmF0ZWd5IHsnLFxuICAgICAgICAgICAgJyAgY2FsY3VsYXRlT3B0aW1hbFNldHRpbmdzKG1ldHJpY3M6IFByb2dyZXNzTWV0cmljcyk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2FkYXB0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGludGVsbGlnZW5jZSBzeXN0ZW0gY29uZmlndXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBpbnRlbGxpZ2VuY2VDb25maWc6IGFueSA9IGJ1aWxkSW50ZWxsaWdlbmNlU3lzdGVtKHBhcmFtcyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL0ludGVsbGlnZW5jZVN5c3RlbS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIEludGVsbGlnZW5jZVN5c3RlbSB7JyxcbiAgICAgICAgICAgICcgIGJ1aWxkSW50ZWxsaWdlbmNlU3lzdGVtKHBhcmFtczogSW50ZWxsaWdlbmNlUGFyYW1zKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignaW50ZWxsaWdlbmNlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdNZXRyaWNzIGFuZCBQcm9ncmVzcyBUcmFja2luZycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHNwZWNpZmljIHR5cGVzIGZvciB3ZWxsLWRlZmluZWQgbWV0cmljcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHByb2dyZXNzOiBhbnkgPSBjYWxjdWxhdGVQcm9ncmVzcygpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Qcm9ncmVzc1RyYWNrZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IFByb2dyZXNzTWV0cmljcyB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVQcm9ncmVzcygpOiBQcm9ncmVzc01ldHJpY3MgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnUHJvZ3Jlc3NNZXRyaWNzJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGR5bmFtaWMgbWV0cmljcyBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBkeW5hbWljTWV0cmljczogYW55ID0gYWdncmVnYXRlTWV0cmljcyhzb3VyY2VzKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vTWV0cmljc0FnZ3JlZ2F0b3IudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2Z1bmN0aW9uIGFnZ3JlZ2F0ZU1ldHJpY3Moc291cmNlczogTWV0cmljc1NvdXJjZVtdKTogYW55IHsnLFxuICAgICAgICAgICAgJyAgcmV0dXJuIHNvdXJjZXMucmVkdWNlKChhZ2csIHNvdXJjZSkgPT4gKHsgLi4uYWdnLCAuLi5zb3VyY2UuZ2V0TWV0cmljcygpIH0pLCB7fSk7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2R5bmFtaWMnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBUeXBlU2NyaXB0RXJyb3IgZm9yIGVycm9yIGFuYWx5c2lzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZXJyb3JzOiBhbnlbXSA9IGFuYWx5emVUeXBlU2NyaXB0RXJyb3JzKCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1R5cGVTY3JpcHRFcnJvckFuYWx5emVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBUeXBlU2NyaXB0RXJyb3IgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gYW5hbHl6ZVR5cGVTY3JpcHRFcnJvcnMoKTogVHlwZVNjcmlwdEVycm9yW10geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnVHlwZVNjcmlwdEVycm9yW10nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1Rvb2wgSW50ZWdyYXRpb24gRmxleGliaWxpdHknLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgdG9vbCBpbnRlZ3JhdGlvbiBjb25maWd1cmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHRvb2xDb25maWc6IGFueSA9IGludGVncmF0ZUV4dGVybmFsVG9vbCh0b29sTmFtZSwgc2V0dGluZ3MpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Ub29sSW50ZWdyYXRpb24udHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2NsYXNzIFRvb2xJbnRlZ3JhdGlvbiB7JyxcbiAgICAgICAgICAgICcgIGludGVncmF0ZUV4dGVybmFsVG9vbChuYW1lOiBzdHJpbmcsIHNldHRpbmdzOiBhbnkpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCd0b29sIGludGVncmF0aW9uJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHZhbGlkYXRpb24gZnJhbWV3b3JrIGZsZXhpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgdmFsaWRhdGlvblJlc3VsdDogYW55ID0gcnVuVmFsaWRhdGlvbihydWxlcywgZGF0YSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1ZhbGlkYXRpb25GcmFtZXdvcmsudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRnJhbWV3b3JrIHsnLFxuICAgICAgICAgICAgJyAgcnVuVmFsaWRhdGlvbihydWxlczogVmFsaWRhdGlvblJ1bGVbXSwgZGF0YTogYW55KTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbigndmFsaWRhdGlvbicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnU2FmZXR5IFByb3RvY29sIEZsZXhpYmlsaXR5JywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHNhZmV0eSBldmVudCBoYW5kbGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHNhZmV0eUV2ZW50OiBhbnkgPSBjcmVhdGVTYWZldHlFdmVudCh0eXBlLCBkYXRhKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vU2FmZXR5UHJvdG9jb2wudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2NsYXNzIFNhZmV0eVByb3RvY29sIHsnLFxuICAgICAgICAgICAgJyAgY3JlYXRlU2FmZXR5RXZlbnQodHlwZTogU2FmZXR5RXZlbnRUeXBlLCBkYXRhOiBhbnkpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdzYWZldHknKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgcm9sbGJhY2sgbWVjaGFuaXNtIGZsZXhpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3Qgcm9sbGJhY2tEYXRhOiBhbnkgPSBwcmVwYXJlUm9sbGJhY2soY2hhbmdlcyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1JvbGxiYWNrTWFuYWdlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIFJvbGxiYWNrTWFuYWdlciB7JyxcbiAgICAgICAgICAgICcgIHByZXBhcmVSb2xsYmFjayhjaGFuZ2VzOiBGaWxlQ2hhbmdlW10pOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdyb2xsYmFjaycpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZXJ2aWNlIExheWVyIEludGVyZmFjZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnQVBJIFNlcnZpY2UgSW50ZXJmYWNlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgQXBpUmVzcG9uc2UgZm9yIEFQSSBzZXJ2aWNlIHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCB0aGlzLmh0dHBDbGllbnQuZ2V0KGVuZHBvaW50KTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvYXBpL0Jhc2VBcGlTZXJ2aWNlLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBCYXNlQXBpU2VydmljZSB7JyxcbiAgICAgICAgICAgICcgIGFzeW5jIGdldDxUPihlbmRwb2ludDogc3RyaW5nKTogUHJvbWlzZTxBcGlSZXNwb25zZTxUPj4geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQXBpUmVzcG9uc2U8VD4nKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyBzZXJ2aWNlIGludGVyZmFjZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHRzID0gW1xuICAgICAgICAgIGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgICAnY29uc3Qgc2VydmljZTogYW55ID0gbmV3IFJlY29tbWVuZGF0aW9uU2VydmljZSgpOycsXG4gICAgICAgICAgICAnc3JjL3NlcnZpY2VzL1JlY29tbWVuZGF0aW9uU2VydmljZS50cycsXG4gICAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0VcbiAgICAgICAgICApLFxuICAgICAgICAgIGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgICAnY29uc3QgYXN0cm9TZXJ2aWNlOiBhbnkgPSBuZXcgQXN0cm9sb2dpY2FsU2VydmljZSgpOycsXG4gICAgICAgICAgICAnc3JjL3NlcnZpY2VzL0FzdHJvbG9naWNhbFNlcnZpY2UudHMnLFxuICAgICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFXG4gICAgICAgICAgKSxcbiAgICAgICAgICBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICAgJ2NvbnN0IHJlY2lwZVNlcnZpY2U6IGFueSA9IG5ldyBSZWNpcGVTZXJ2aWNlKCk7JyxcbiAgICAgICAgICAgICdzcmMvc2VydmljZXMvUmVjaXBlU2VydmljZS50cycsXG4gICAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0VcbiAgICAgICAgICApXG4gICAgICAgIF07XG5cbiAgICAgICAgZm9yIChjb25zdCBjb250ZXh0IG9mIGNvbnRleHRzKSB7XG4gICAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcblxuICAgICAgICAgIGlmIChjb250ZXh0LmZpbGVQYXRoLmluY2x1ZGVzKCdSZWNvbW1lbmRhdGlvbicpKSB7XG4gICAgICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1JlY29tbWVuZGF0aW9uU2VydmljZScpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5maWxlUGF0aC5pbmNsdWRlcygnQXN0cm9sb2dpY2FsJykpIHtcbiAgICAgICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQXN0cm9sb2dpY2FsU2VydmljZScpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5maWxlUGF0aC5pbmNsdWRlcygnUmVjaXBlJykpIHtcbiAgICAgICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnUmVjaXBlU2VydmljZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBleHRlcm5hbCBzZXJ2aWNlIGludGVncmF0aW9uIGZsZXhpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZXh0ZXJuYWxTZXJ2aWNlOiBhbnkgPSBjcmVhdGVFeHRlcm5hbFNlcnZpY2VDbGllbnQoY29uZmlnKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvZXh0ZXJuYWwvRXh0ZXJuYWxTZXJ2aWNlRmFjdG9yeS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgRXh0ZXJuYWxTZXJ2aWNlRmFjdG9yeSB7JyxcbiAgICAgICAgICAgICcgIGNyZWF0ZUV4dGVybmFsU2VydmljZUNsaWVudChjb25maWc6IFNlcnZpY2VDb25maWcpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdleHRlcm5hbCBzZXJ2aWNlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdEYXRhIFRyYW5zZm9ybWF0aW9uIFNlcnZpY2UgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyB0cmFuc2Zvcm1lciBpbnRlcmZhY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgdHJhbnNmb3JtZXI6IGFueSA9IG5ldyBEYXRhVHJhbnNmb3JtZXIoKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvZGF0YS9EYXRhVHJhbnNmb3JtZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIERhdGFUcmFuc2Zvcm1lciB7JyxcbiAgICAgICAgICAgICcgIHRyYW5zZm9ybTxULCBVPihkYXRhOiBUKTogVSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdEYXRhVHJhbnNmb3JtZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBtYXBwZXIgaW50ZXJmYWNlcyBmb3IgZGF0YSBtYXBwaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgbWFwcGVyOiBhbnkgPSBjcmVhdGVNYXBwZXIoc291cmNlU2NoZW1hLCB0YXJnZXRTY2hlbWEpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9kYXRhL1NjaGVtYU1hcHBlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gY3JlYXRlTWFwcGVyKHNvdXJjZTogU2NoZW1hLCB0YXJnZXQ6IFNjaGVtYSk6IGFueSB7JyxcbiAgICAgICAgICAgICcgIHJldHVybiBuZXcgU2NoZW1hTWFwcGVyKHNvdXJjZSwgdGFyZ2V0KTsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1NjaGVtYU1hcHBlcicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnQ2FjaGluZyBTZXJ2aWNlIEludGVyZmFjZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IGNhY2hlIGludGVyZmFjZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGNhY2hlOiBhbnkgPSBuZXcgQ2FjaGVTZXJ2aWNlKCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhY2hlL0NhY2hlU2VydmljZS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgQ2FjaGVTZXJ2aWNlIHsnLFxuICAgICAgICAgICAgJyAgZ2V0PFQ+KGtleTogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQ2FjaGVTZXJ2aWNlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgY2FjaGUgZW50cnkgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBlbnRyeTogYW55ID0gY2FjaGUuZ2V0KGtleSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhY2hlL0NhY2hlTWFuYWdlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBDYWNoZU1hbmFnZXIgeycsXG4gICAgICAgICAgICAnICBhc3luYyBnZXRDYWNoZUVudHJ5KGtleTogc3RyaW5nKTogUHJvbWlzZTxDYWNoZUVudHJ5IHwgbnVsbD4geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQ2FjaGVFbnRyeSB8IG51bGwnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24gU2VydmljZSBJbnRlcmZhY2UgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCB2YWxpZGF0aW9uIHJlc3VsdCBpbnRlcmZhY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcmVzdWx0OiBhbnkgPSB2YWxpZGF0b3IudmFsaWRhdGUoZGF0YSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL3ZhbGlkYXRpb24vVmFsaWRhdGlvblNlcnZpY2UudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25TZXJ2aWNlIHsnLFxuICAgICAgICAgICAgJyAgdmFsaWRhdGUoZGF0YTogdW5rbm93bik6IFZhbGlkYXRpb25SZXN1bHQgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnVmFsaWRhdGlvblJlc3VsdCcpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHNjaGVtYSB2YWxpZGF0aW9uIGludGVyZmFjZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBzY2hlbWE6IGFueSA9IGJ1aWxkVmFsaWRhdGlvblNjaGVtYShydWxlcyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL3ZhbGlkYXRpb24vU2NoZW1hQnVpbGRlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBWYWxpZGF0aW9uU2NoZW1hIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGJ1aWxkVmFsaWRhdGlvblNjaGVtYShydWxlczogVmFsaWRhdGlvblJ1bGVbXSk6IFZhbGlkYXRpb25TY2hlbWEgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnVmFsaWRhdGlvblNjaGVtYScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnU2VydmljZSBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBzZXJ2aWNlIGVycm9yIGhhbmRsaW5nIGZsZXhpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgZXJyb3I6IGFueSA9IG5ldyBTZXJ2aWNlRXJyb3IobWVzc2FnZSwgY29kZSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2Vycm9ycy9TZXJ2aWNlRXJyb3IudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIFNlcnZpY2VFcnJvciBleHRlbmRzIEVycm9yIHsnLFxuICAgICAgICAgICAgJyAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcsIGRldGFpbHM/OiBhbnkpIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZXJyb3InKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyBlcnJvciB0eXBlcyB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGFwaUVycm9yOiBhbnkgPSBoYW5kbGVBcGlFcnJvcihyZXNwb25zZSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2Vycm9ycy9BcGlFcnJvckhhbmRsZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgQXBpRXJyb3IgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gaGFuZGxlQXBpRXJyb3IocmVzcG9uc2U6IFJlc3BvbnNlKTogQXBpRXJyb3IgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQXBpRXJyb3InKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ3Jvc3MtRG9tYWluIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWl4ZWQgZG9tYWluIGNvbnRleHRzIGFwcHJvcHJpYXRlbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IGEgc2VydmljZSB0aGF0IGludGVncmF0ZXMgYXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyB3aXRoIHJlY2lwZSByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAnY29uc3QgcmVjb21tZW5kYXRpb246IGFueSA9IGF3YWl0IGFzdHJvUmVjaXBlU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbih1c2VyQ2hhcnQsIHByZWZlcmVuY2VzKTsnLFxuICAgICAgICAnc3JjL3NlcnZpY2VzL0FzdHJvbG9naWNhbFJlY2lwZVNlcnZpY2UudHMnLFxuICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgIFtcbiAgICAgICAgICAnZXhwb3J0IGNsYXNzIEFzdHJvbG9naWNhbFJlY2lwZVNlcnZpY2UgeycsXG4gICAgICAgICAgJyAgYXN5bmMgZ2V0UmVjb21tZW5kYXRpb24oY2hhcnQ6IEFzdHJvbG9neUNoYXJ0LCBwcmVmczogVXNlclByZWZlcmVuY2VzKTogUHJvbWlzZTxSZWNpcGVSZWNvbW1lbmRhdGlvbj4geydcbiAgICAgICAgXVxuICAgICAgKTtcblxuICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdSZWNpcGVSZWNvbW1lbmRhdGlvbicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGNhbXBhaWduIHN5c3RlbSBpbnRlZ3JhdGlvbiB3aXRoIGRvbWFpbiBzZXJ2aWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAnY29uc3QgY2FtcGFpZ25EYXRhOiBhbnkgPSBpbnRlZ3JhdGVEb21haW5TZXJ2aWNlcyhzZXJ2aWNlcyk7JyxcbiAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Eb21haW5JbnRlZ3JhdGlvbi50cycsXG4gICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgIFtcbiAgICAgICAgICAnY2xhc3MgRG9tYWluSW50ZWdyYXRpb24geycsXG4gICAgICAgICAgJyAgaW50ZWdyYXRlRG9tYWluU2VydmljZXMoc2VydmljZXM6IERvbWFpblNlcnZpY2VbXSk6IGFueSB7J1xuICAgICAgICBdXG4gICAgICApO1xuXG4gICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignaW50ZWdyYXRpb24nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1R5cGUgUmVwbGFjZW1lbnQgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGFwcGx5IGRvbWFpbi1zcGVjaWZpYyByZXBsYWNlbWVudHMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnRzOiBUeXBlUmVwbGFjZW1lbnRbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIG9yaWdpbmFsOiAnYW55JyxcbiAgICAgICAgICByZXBsYWNlbWVudDogJ0luZ3JlZGllbnQnLFxuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL2RhdGEvaW5ncmVkaWVudHMvcHJvY2Vzc29yLnRzJyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiAxLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgICAgICB2YWxpZGF0aW9uUmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9yaWdpbmFsOiAnYW55JyxcbiAgICAgICAgICByZXBsYWNlbWVudDogJ1BsYW5ldGFyeVBvc2l0aW9uJyxcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5L3Bvc2l0aW9ucy50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMSxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjgsXG4gICAgICAgICAgdmFsaWRhdGlvblJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBvcmlnaW5hbDogJ2FueScsXG4gICAgICAgICAgcmVwbGFjZW1lbnQ6ICdQcm9ncmVzc01ldHJpY3MnLFxuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1Byb2dyZXNzVHJhY2tlci50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMSxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgICAgdmFsaWRhdGlvblJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIC8vIE1vY2sgZmlsZSBzeXN0ZW0gZm9yIGRvbWFpbi1zcGVjaWZpYyBjb250ZW50XG4gICAgICBqZXN0LnNweU9uKHJlcXVpcmUoJ2ZzJyksICdyZWFkRmlsZVN5bmMnKS5tb2NrSW1wbGVtZW50YXRpb24oKHBhdGg6IGFueSkgPT4ge1xuICAgICAgICBpZiAocGF0aC5pbmNsdWRlcygnaW5ncmVkaWVudHMnKSkgcmV0dXJuICdjb25zdCBpbmdyZWRpZW50OiBhbnkgPSBnZXREYXRhKCk7JztcbiAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoJ3BsYW5ldGFyeScpKSByZXR1cm4gJ2NvbnN0IHBvc2l0aW9uOiBhbnkgPSBjYWxjdWxhdGUoKTsnO1xuICAgICAgICBpZiAocGF0aC5pbmNsdWRlcygnY2FtcGFpZ24nKSkgcmV0dXJuICdjb25zdCBtZXRyaWNzOiBhbnkgPSBnZXRQcm9ncmVzcygpOyc7XG4gICAgICAgIHJldHVybiAnYmFja3VwIGNvbnRlbnQnO1xuICAgICAgfSk7XG5cbiAgICAgIGplc3Quc3B5T24ocmVxdWlyZSgnZnMnKSwgJ3dyaXRlRmlsZVN5bmMnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgIGplc3Quc3B5T24ocmVxdWlyZSgnZnMnKSwgJ2V4aXN0c1N5bmMnKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG5cbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBjb21waWxhdGlvblxuICAgICAgamVzdC5zcHlPbihyZXF1aXJlKCdjaGlsZF9wcm9jZXNzJyksICdleGVjU3luYycpLm1vY2tSZXR1cm5WYWx1ZSgnJyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcmVwbGFjZW1lbnRzLm1hcChyZXBsYWNlbWVudCA9PiByZXBsYWNlci5hcHBseVJlcGxhY2VtZW50KHJlcGxhY2VtZW50KSlcbiAgICAgICk7XG5cbiAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuYXBwbGllZFJlcGxhY2VtZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=