a0b1b4f23d11ab6e5d3347e3f97c2e90
"use strict";
/**
 * Documentation Quality Assurance System
 *
 * Implements comment quality checking, validation of documentation completeness,
 * and reporting system for undocumented intentional any types.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.DocumentationQualityAssurance = void 0;
const fs = __importStar(require("fs/promises"));
const path_1 = __importDefault(require("path"));
const types_1 = require("./types");
class DocumentationQualityAssurance {
    config;
    qualityCache = new Map();
    constructor(config) {
        this.config = {
            sourceDirectories: ['src'],
            excludePatterns: [
                'node_modules/**',
                'dist/**',
                'build/**',
                '**/*.test.ts',
                '**/*.test.tsx',
                '**/*.spec.ts',
                '**/*.spec.tsx'
            ],
            minimumCommentLength: 20,
            requiredKeywords: ['intentionally', 'deliberately', 'required', 'needed'],
            qualityThresholds: {
                excellent: 90,
                good: 70,
                fair: 50
            },
            ...config
        };
    }
    /**
     * Perform comprehensive quality assurance scan
     */
    async performQualityAssurance() {
        const files = await this.findTypeScriptFiles();
        const undocumentedTypes = [];
        const qualityBreakdown = {
            poor: 0,
            fair: 0,
            good: 0,
            excellent: 0
        };
        let totalAnyTypes = 0;
        let documentedTypes = 0;
        let totalQualityScore = 0;
        for (const filePath of files) {
            try {
                const anyTypes = await this.findAnyTypesInFile(filePath);
                totalAnyTypes += anyTypes.length;
                for (const anyType of anyTypes) {
                    const validation = await this.validateDocumentationQuality(anyType);
                    if (validation.hasComment) {
                        documentedTypes++;
                        qualityBreakdown[validation.commentQuality]++;
                        totalQualityScore += this.getQualityScore(validation.commentQuality);
                    }
                    else {
                        undocumentedTypes.push({
                            filePath: anyType.filePath,
                            lineNumber: anyType.lineNumber,
                            codeSnippet: anyType.codeSnippet,
                            category: this.categorizeAnyType(anyType.codeSnippet),
                            domain: this.determineDomain(anyType.filePath),
                            severity: this.assessSeverity(anyType)
                        });
                    }
                }
            }
            catch (error) {
                console.warn(`Error processing file ${filePath}:`, error);
            }
        }
        const averageQualityScore = totalAnyTypes > 0 ? totalQualityScore / documentedTypes : 0;
        const documentationCoverage = totalAnyTypes > 0 ? (documentedTypes / totalAnyTypes) * 100 : 100;
        return {
            totalIntentionalAnyTypes: totalAnyTypes,
            documentedTypes,
            undocumentedTypes: undocumentedTypes.length,
            documentationCoverage,
            qualityBreakdown,
            undocumentedFiles: [...new Set(undocumentedTypes.map(t => t.filePath))],
            recommendations: this.generateRecommendations(documentationCoverage, qualityBreakdown, undocumentedTypes)
        };
    }
    /**
     * Validate documentation quality for a specific context
     */
    async validateDocumentationQuality(context) {
        const cacheKey = `${context.filePath}:${context.lineNumber}`;
        if (this.qualityCache.has(cacheKey)) {
            return this.qualityCache.get(cacheKey);
        }
        const fileContent = await fs.readFile(context.filePath, 'utf-8');
        const lines = fileContent.split('\n');
        const lineIndex = context.lineNumber - 1;
        // Check for comments in surrounding lines
        const { comment, hasComment } = this.extractComment(lines, lineIndex);
        // Check for ESLint disable comment
        const hasEslintDisable = this.hasEslintDisableComment(lines, lineIndex);
        const eslintDisableHasExplanation = hasEslintDisable &&
            this.eslintDisableHasExplanation(lines, lineIndex);
        // Assess comment quality
        const commentQuality = this.assessCommentQuality(comment);
        // Check completeness
        const isComplete = hasComment &&
            commentQuality !== 'poor' &&
            hasEslintDisable &&
            eslintDisableHasExplanation;
        // Generate suggestions
        const suggestions = this.generateQualityImprovementSuggestions(comment, hasComment, commentQuality, hasEslintDisable, eslintDisableHasExplanation, context);
        const validation = {
            hasComment,
            commentQuality,
            hasEslintDisable,
            eslintDisableHasExplanation,
            isComplete,
            suggestions
        };
        this.qualityCache.set(cacheKey, validation);
        return validation;
    }
    /**
     * Generate detailed quality improvement report
     */
    async generateQualityReport() {
        const files = await this.findTypeScriptFiles();
        let totalFiles = 0;
        let filesWithAnyTypes = 0;
        let totalAnyTypes = 0;
        let documentedAnyTypes = 0;
        const qualityDistribution = {
            poor: 0,
            fair: 0,
            good: 0,
            excellent: 0
        };
        let totalQualityScore = 0;
        for (const filePath of files) {
            totalFiles++;
            try {
                const anyTypes = await this.findAnyTypesInFile(filePath);
                if (anyTypes.length > 0) {
                    filesWithAnyTypes++;
                    totalAnyTypes += anyTypes.length;
                    for (const anyType of anyTypes) {
                        const validation = await this.validateDocumentationQuality(anyType);
                        if (validation.hasComment) {
                            documentedAnyTypes++;
                            qualityDistribution[validation.commentQuality]++;
                            totalQualityScore += this.getQualityScore(validation.commentQuality);
                        }
                    }
                }
            }
            catch (error) {
                console.warn(`Error processing file ${filePath}:`, error);
            }
        }
        const averageQualityScore = documentedAnyTypes > 0 ? totalQualityScore / documentedAnyTypes : 0;
        const compliancePercentage = totalAnyTypes > 0 ? (documentedAnyTypes / totalAnyTypes) * 100 : 100;
        return {
            totalFiles,
            filesWithAnyTypes,
            totalAnyTypes,
            documentedAnyTypes,
            undocumentedAnyTypes: totalAnyTypes - documentedAnyTypes,
            qualityDistribution,
            averageQualityScore,
            compliancePercentage
        };
    }
    /**
     * Find all TypeScript files in source directories
     */
    async findTypeScriptFiles() {
        const files = [];
        for (const dir of this.config.sourceDirectories) {
            const dirFiles = await this.findFilesRecursively(dir, ['.ts', '.tsx']);
            files.push(...dirFiles);
        }
        // Filter out excluded patterns
        return files.filter(file => {
            return !this.config.excludePatterns.some(pattern => {
                const regex = new RegExp(pattern.replace(/\*\*/g, '.*').replace(/\*/g, '[^/]*'));
                return regex.test(file);
            });
        });
    }
    /**
     * Recursively find files with specific extensions
     */
    async findFilesRecursively(dir, extensions) {
        const files = [];
        try {
            const entries = await fs.readdir(dir, { withFileTypes: true });
            for (const entry of entries) {
                const fullPath = path_1.default.join(dir, entry.name);
                if (entry.isDirectory()) {
                    const subFiles = await this.findFilesRecursively(fullPath, extensions);
                    files.push(...subFiles);
                }
                else if (entry.isFile()) {
                    const ext = path_1.default.extname(entry.name);
                    if (extensions.includes(ext)) {
                        files.push(fullPath);
                    }
                }
            }
        }
        catch (error) {
            // Directory might not exist or be accessible
            console.warn(`Could not read directory ${dir}:`, error);
        }
        return files;
    }
    /**
     * Find any types in a specific file
     */
    async findAnyTypesInFile(filePath) {
        const content = await fs.readFile(filePath, 'utf-8');
        const lines = content.split('\n');
        const anyTypes = [];
        // Patterns to match any types
        const anyPatterns = [
            /:\s*any\b/g,
            /:\s*any\[\]/g,
            /:\s*Record<[^,]+,\s*any>/g,
            /\bas\s+any\b/g,
            /<any>/g,
            /Array<any>/g, // Array<any>
        ];
        lines.forEach((line, index) => {
            anyPatterns.forEach(pattern => {
                const matches = line.matchAll(pattern);
                for (const match of matches) {
                    if (match.index !== undefined) {
                        const context = {
                            filePath,
                            lineNumber: index + 1,
                            codeSnippet: line.trim(),
                            surroundingLines: this.getSurroundingLines(lines, index),
                            hasExistingComment: this.hasCommentNearLine(lines, index),
                            existingComment: this.extractComment(lines, index).comment,
                            isInTestFile: this.isTestFile(filePath),
                            domainContext: {
                                domain: this.determineDomain(filePath),
                                intentionalityHints: [],
                                suggestedTypes: [],
                                preservationReasons: []
                            }
                        };
                        anyTypes.push(context);
                    }
                }
            });
        });
        return anyTypes;
    }
    /**
     * Extract comment from surrounding lines
     */
    extractComment(lines, lineIndex) {
        // Check previous lines for comments
        for (let i = Math.max(0, lineIndex - 3); i < lineIndex; i++) {
            const line = lines[i]?.trim();
            if (line && line.startsWith('//')) {
                return {
                    comment: line.replace(/^\/\/\s*/, ''),
                    hasComment: true
                };
            }
            if (line && line.startsWith('/*')) {
                // Handle multi-line comments
                let comment = line.replace(/^\/\*\s*/, '');
                let j = i;
                while (j < lines.length && !lines[j].includes('*/')) {
                    j++;
                    if (j < lines.length) {
                        comment += ' ' + lines[j].trim();
                    }
                }
                comment = comment.replace(/\*\/.*$/, '');
                return {
                    comment: comment.trim(),
                    hasComment: true
                };
            }
        }
        return { comment: '', hasComment: false };
    }
    /**
     * Check if there's a comment near the line
     */
    hasCommentNearLine(lines, lineIndex) {
        for (let i = Math.max(0, lineIndex - 2); i <= Math.min(lines.length - 1, lineIndex + 1); i++) {
            const line = lines[i]?.trim();
            if (line && (line.startsWith('//') || line.startsWith('/*'))) {
                return true;
            }
        }
        return false;
    }
    /**
     * Get surrounding lines for context
     */
    getSurroundingLines(lines, lineIndex) {
        const start = Math.max(0, lineIndex - 2);
        const end = Math.min(lines.length, lineIndex + 3);
        return lines.slice(start, end);
    }
    /**
     * Check if ESLint disable comment exists
     */
    hasEslintDisableComment(lines, lineIndex) {
        for (let i = Math.max(0, lineIndex - 2); i <= lineIndex; i++) {
            if (lines[i] && lines[i].includes('eslint-disable') &&
                lines[i].includes('no-explicit-any')) {
                return true;
            }
        }
        return false;
    }
    /**
     * Check if ESLint disable comment has explanation
     */
    eslintDisableHasExplanation(lines, lineIndex) {
        for (let i = Math.max(0, lineIndex - 2); i <= lineIndex; i++) {
            const line = lines[i];
            if (line && line.includes('eslint-disable') && line.includes('no-explicit-any')) {
                const parts = line.split('eslint-disable-next-line');
                return parts.length > 1 && parts[1].trim().length > '@typescript-eslint/no-explicit-any'.length;
            }
        }
        return false;
    }
    /**
     * Assess comment quality
     */
    assessCommentQuality(comment) {
        if (!comment || comment.trim().length < this.config.minimumCommentLength) {
            return 'poor';
        }
        const lowerComment = comment.toLowerCase();
        let score = 0;
        // Check for required keywords
        const hasRequiredKeyword = this.config.requiredKeywords.some(keyword => lowerComment.includes(keyword.toLowerCase()));
        if (hasRequiredKeyword)
            score += 30;
        // Check for explanation
        if (lowerComment.includes('because') || lowerComment.includes('for') ||
            lowerComment.includes('due to') || lowerComment.includes('requires')) {
            score += 25;
        }
        // Check for domain-specific context
        if (lowerComment.includes('api') || lowerComment.includes('external') ||
            lowerComment.includes('dynamic') || lowerComment.includes('flexible') ||
            lowerComment.includes('legacy') || lowerComment.includes('compatibility')) {
            score += 20;
        }
        // Check length and detail
        if (comment.length > 50)
            score += 15;
        if (comment.length > 100)
            score += 10;
        if (score >= this.config.qualityThresholds.excellent)
            return 'excellent';
        if (score >= this.config.qualityThresholds.good)
            return 'good';
        if (score >= this.config.qualityThresholds.fair)
            return 'fair';
        return 'poor';
    }
    /**
     * Get numeric quality score
     */
    getQualityScore(quality) {
        const scores = { poor: 25, fair: 50, good: 75, excellent: 100 };
        return scores[quality];
    }
    /**
     * Categorize any type based on code snippet
     */
    categorizeAnyType(codeSnippet) {
        const lower = codeSnippet.toLowerCase();
        if (lower.includes('catch') || lower.includes('error')) {
            return types_1.AnyTypeCategory.ERROR_HANDLING;
        }
        if (lower.includes('api') || lower.includes('response') || lower.includes('fetch')) {
            return types_1.AnyTypeCategory.EXTERNAL_API;
        }
        if (lower.includes('mock') || lower.includes('jest') || lower.includes('test')) {
            return types_1.AnyTypeCategory.TEST_MOCK;
        }
        if (lower.includes('config') || lower.includes('options') || lower.includes('params')) {
            return types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        if (lower.includes('any[]')) {
            return types_1.AnyTypeCategory.ARRAY_TYPE;
        }
        if (lower.includes('record') || lower.includes('object')) {
            return types_1.AnyTypeCategory.RECORD_TYPE;
        }
        if (lower.includes('function') || lower.includes('=>') || lower.includes('param')) {
            return types_1.AnyTypeCategory.FUNCTION_PARAM;
        }
        if (lower.includes('return') || lower.includes(':')) {
            return types_1.AnyTypeCategory.RETURN_TYPE;
        }
        return types_1.AnyTypeCategory.LEGACY_COMPATIBILITY;
    }
    /**
     * Determine code domain from file path
     */
    determineDomain(filePath) {
        const lower = filePath.toLowerCase();
        // Check for test files first (they often contain other keywords)
        if (lower.includes('test') || lower.includes('spec')) {
            return types_1.CodeDomain.TEST;
        }
        if (lower.includes('astro') || lower.includes('planet') || lower.includes('lunar')) {
            return types_1.CodeDomain.ASTROLOGICAL;
        }
        if (lower.includes('recipe') || lower.includes('ingredient') || lower.includes('food')) {
            return types_1.CodeDomain.RECIPE;
        }
        if (lower.includes('campaign') || lower.includes('automation')) {
            return types_1.CodeDomain.CAMPAIGN;
        }
        if (lower.includes('intelligence') || lower.includes('ai') || lower.includes('ml')) {
            return types_1.CodeDomain.INTELLIGENCE;
        }
        if (lower.includes('service') || lower.includes('api')) {
            return types_1.CodeDomain.SERVICE;
        }
        if (lower.includes('component') || lower.includes('tsx')) {
            return types_1.CodeDomain.COMPONENT;
        }
        return types_1.CodeDomain.UTILITY;
    }
    /**
     * Assess severity of undocumented any type
     */
    assessSeverity(context) {
        const { codeSnippet, filePath, isInTestFile } = context;
        // Test files are lower priority
        if (isInTestFile)
            return 'low';
        // Critical files or patterns
        if (filePath.includes('service') || filePath.includes('api')) {
            return 'high';
        }
        // Function parameters and return types are medium priority
        if (codeSnippet.includes('function') || codeSnippet.includes('=>')) {
            return 'medium';
        }
        // Array and Record types are medium priority
        if (codeSnippet.includes('any[]') || codeSnippet.includes('Record')) {
            return 'medium';
        }
        return 'low';
    }
    /**
     * Check if file is a test file
     */
    isTestFile(filePath) {
        return /\.(test|spec)\.(ts|tsx)$/.test(filePath);
    }
    /**
     * Generate quality improvement suggestions
     */
    generateQualityImprovementSuggestions(comment, hasComment, commentQuality, hasEslintDisable, eslintDisableHasExplanation, context) {
        const suggestions = [];
        if (!hasComment) {
            suggestions.push('Add explanatory comment indicating intentional use of any type');
            suggestions.push(`Consider using template: "// Intentionally any: ${this.suggestCommentTemplate(context)}"`);
        }
        else {
            switch (commentQuality) {
                case 'poor':
                    suggestions.push('Improve comment quality with more detailed explanation');
                    suggestions.push('Include keywords like "intentionally", "deliberately", or "required"');
                    suggestions.push(`Minimum comment length should be ${this.config.minimumCommentLength} characters`);
                    break;
                case 'fair':
                    suggestions.push('Consider adding more context about why any type is necessary');
                    suggestions.push('Explain the specific use case or external dependency');
                    break;
                case 'good':
                    suggestions.push('Comment quality is good, consider adding domain-specific context');
                    break;
                case 'excellent':
                    // No suggestions needed
                    break;
            }
        }
        if (!hasEslintDisable) {
            suggestions.push('Add ESLint disable comment: // eslint-disable-next-line @typescript-eslint/no-explicit-any');
        }
        else if (!eslintDisableHasExplanation) {
            suggestions.push('Add explanation to ESLint disable comment');
        }
        if (suggestions.length === 0) {
            suggestions.push('Documentation is complete and meets quality standards');
        }
        return suggestions;
    }
    /**
     * Suggest comment template based on context
     */
    suggestCommentTemplate(context) {
        const { domainContext, codeSnippet } = context;
        switch (domainContext.domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
                return 'External astrological API response with dynamic structure';
            case types_1.CodeDomain.RECIPE:
                return 'External recipe API with flexible ingredient data';
            case types_1.CodeDomain.CAMPAIGN:
                return 'Campaign system requires flexible configuration for dynamic behavior';
            case types_1.CodeDomain.SERVICE:
                return 'External API response with unknown structure';
            case types_1.CodeDomain.TEST:
                return 'Test mock requires flexible typing for comprehensive testing';
            default:
                if (codeSnippet.includes('catch') || codeSnippet.includes('error')) {
                    return 'Error handling requires flexible typing for unknown error structures';
                }
                return 'Requires flexible typing for specific use case';
        }
    }
    /**
     * Generate recommendations based on analysis results
     */
    generateRecommendations(coverage, qualityBreakdown, undocumentedTypes) {
        const recommendations = [];
        if (coverage < 50) {
            recommendations.push('CRITICAL: Less than 50% of any types are documented. Immediate action required.');
        }
        else if (coverage < 80) {
            recommendations.push('WARNING: Documentation coverage is below 80%. Consider systematic documentation effort.');
        }
        else if (coverage < 95) {
            recommendations.push('GOOD: Documentation coverage is above 80%. Focus on remaining undocumented types.');
        }
        else {
            recommendations.push('EXCELLENT: Documentation coverage is above 95%. Maintain current standards.');
        }
        // Quality-based recommendations
        const totalQuality = Object.values(qualityBreakdown).reduce((sum, count) => sum + count, 0);
        if (totalQuality > 0) {
            const poorPercentage = (qualityBreakdown.poor / totalQuality) * 100;
            if (poorPercentage > 20) {
                recommendations.push('Focus on improving comment quality - over 20% are rated as poor quality.');
            }
        }
        // File-specific recommendations
        const criticalFiles = undocumentedTypes
            .filter(t => t.severity === 'critical' || t.severity === 'high')
            .map(t => t.filePath);
        if (criticalFiles.length > 0) {
            recommendations.push(`Priority files needing documentation: ${[...new Set(criticalFiles)].slice(0, 5).join(', ')}`);
        }
        // General recommendations
        recommendations.push('Use domain-specific documentation templates for consistency');
        recommendations.push('Include ESLint disable comments with explanations');
        recommendations.push('Regular quality assurance scans to maintain documentation standards');
        return recommendations;
    }
}
exports.DocumentationQualityAssurance = DocumentationQualityAssurance;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL0RvY3VtZW50YXRpb25RdWFsaXR5QXNzdXJhbmNlLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxnREFBa0M7QUFDbEMsZ0RBQXdCO0FBQ3hCLG1DQU1pQjtBQWtDakIsTUFBYSw2QkFBNkI7SUFDaEMsTUFBTSxDQUF5QjtJQUMvQixZQUFZLEdBQXlDLElBQUksR0FBRyxFQUFFLENBQUM7SUFFdkUsWUFBWSxNQUF3QztRQUNsRCxJQUFJLENBQUMsTUFBTSxHQUFHO1lBQ1osaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDMUIsZUFBZSxFQUFFO2dCQUNmLGlCQUFpQjtnQkFDakIsU0FBUztnQkFDVCxVQUFVO2dCQUNWLGNBQWM7Z0JBQ2QsZUFBZTtnQkFDZixjQUFjO2dCQUNkLGVBQWU7YUFDaEI7WUFDRCxvQkFBb0IsRUFBRSxFQUFFO1lBQ3hCLGdCQUFnQixFQUFFLENBQUMsZUFBZSxFQUFFLGNBQWMsRUFBRSxVQUFVLEVBQUUsUUFBUSxDQUFDO1lBQ3pFLGlCQUFpQixFQUFFO2dCQUNqQixTQUFTLEVBQUUsRUFBRTtnQkFDYixJQUFJLEVBQUUsRUFBRTtnQkFDUixJQUFJLEVBQUUsRUFBRTthQUNUO1lBQ0QsR0FBRyxNQUFNO1NBQ1YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyx1QkFBdUI7UUFDM0IsTUFBTSxLQUFLLEdBQUcsTUFBTSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMvQyxNQUFNLGlCQUFpQixHQUEwQixFQUFFLENBQUM7UUFDcEQsTUFBTSxnQkFBZ0IsR0FBMkI7WUFDL0MsSUFBSSxFQUFFLENBQUM7WUFDUCxJ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QUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDckg7UUFFRCwwQkFBMEI7UUFDMUIsZUFBZSxDQUFDLElBQUksQ0FBQyw2REFBNkQsQ0FBQyxDQUFDO1FBQ3BGLGVBQWUsQ0FBQyxJQUFJLENBQUMsbURBQW1ELENBQUMsQ0FBQztRQUMxRSxlQUFlLENBQUMsSUFBSSxDQUFDLHFFQUFxRSxDQUFDLENBQUM7UUFFNUYsT0FBTyxlQUFlLENBQUM7SUFDekIsQ0FBQztDQUNGO0FBeG9CRCxzRUF3b0JDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9iYWNrdXBzL2ZpcnN0LXdhdmUtMjAyNS0wOC0xMVQwNS0xOS0yNi04MTNaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9Eb2N1bWVudGF0aW9uUXVhbGl0eUFzc3VyYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERvY3VtZW50YXRpb24gUXVhbGl0eSBBc3N1cmFuY2UgU3lzdGVtXG4gKlxuICogSW1wbGVtZW50cyBjb21tZW50IHF1YWxpdHkgY2hlY2tpbmcsIHZhbGlkYXRpb24gb2YgZG9jdW1lbnRhdGlvbiBjb21wbGV0ZW5lc3MsXG4gKiBhbmQgcmVwb3J0aW5nIHN5c3RlbSBmb3IgdW5kb2N1bWVudGVkIGludGVudGlvbmFsIGFueSB0eXBlcy5cbiAqL1xuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7XG4gICAgQW55VHlwZUNhdGVnb3J5LFxuICAgIENsYXNzaWZpY2F0aW9uQ29udGV4dCxcbiAgICBDb2RlRG9tYWluLFxuICAgIERvY3VtZW50YXRpb25SZXBvcnQsXG4gICAgRG9jdW1lbnRhdGlvblZhbGlkYXRpb25cbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVhbGl0eUFzc3VyYW5jZUNvbmZpZyB7XG4gIHNvdXJjZURpcmVjdG9yaWVzOiBzdHJpbmdbXTtcbiAgZXhjbHVkZVBhdHRlcm5zOiBzdHJpbmdbXTtcbiAgbWluaW11bUNvbW1lbnRMZW5ndGg6IG51bWJlcjtcbiAgcmVxdWlyZWRLZXl3b3Jkczogc3RyaW5nW107XG4gIHF1YWxpdHlUaHJlc2hvbGRzOiB7XG4gICAgZXhjZWxsZW50OiBudW1iZXI7XG4gICAgZ29vZDogbnVtYmVyO1xuICAgIGZhaXI6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVbmRvY3VtZW50ZWRBbnlUeXBlIHtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgbGluZU51bWJlcjogbnVtYmVyO1xuICBjb2RlU25pcHBldDogc3RyaW5nO1xuICBjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5O1xuICBkb21haW46IENvZGVEb21haW47XG4gIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWFsaXR5TWV0cmljcyB7XG4gIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgZmlsZXNXaXRoQW55VHlwZXM6IG51bWJlcjtcbiAgdG90YWxBbnlUeXBlczogbnVtYmVyO1xuICBkb2N1bWVudGVkQW55VHlwZXM6IG51bWJlcjtcbiAgdW5kb2N1bWVudGVkQW55VHlwZXM6IG51bWJlcjtcbiAgcXVhbGl0eURpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgYXZlcmFnZVF1YWxpdHlTY29yZTogbnVtYmVyO1xuICBjb21wbGlhbmNlUGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRhdGlvblF1YWxpdHlBc3N1cmFuY2Uge1xuICBwcml2YXRlIGNvbmZpZzogUXVhbGl0eUFzc3VyYW5jZUNvbmZpZztcbiAgcHJpdmF0ZSBxdWFsaXR5Q2FjaGU6IE1hcDxzdHJpbmcsIERvY3VtZW50YXRpb25WYWxpZGF0aW9uPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc/OiBQYXJ0aWFsPFF1YWxpdHlBc3N1cmFuY2VDb25maWc+KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBzb3VyY2VEaXJlY3RvcmllczogWydzcmMnXSxcbiAgICAgIGV4Y2x1ZGVQYXR0ZXJuczogW1xuICAgICAgICAnbm9kZV9tb2R1bGVzLyoqJyxcbiAgICAgICAgJ2Rpc3QvKionLFxuICAgICAgICAnYnVpbGQvKionLFxuICAgICAgICAnKiovKi50ZXN0LnRzJyxcbiAgICAgICAgJyoqLyoudGVzdC50c3gnLFxuICAgICAgICAnKiovKi5zcGVjLnRzJyxcbiAgICAgICAgJyoqLyouc3BlYy50c3gnXG4gICAgICBdLFxuICAgICAgbWluaW11bUNvbW1lbnRMZW5ndGg6IDIwLFxuICAgICAgcmVxdWlyZWRLZXl3b3JkczogWydpbnRlbnRpb25hbGx5JywgJ2RlbGliZXJhdGVseScsICdyZXF1aXJlZCcsICduZWVkZWQnXSxcbiAgICAgIHF1YWxpdHlUaHJlc2hvbGRzOiB7XG4gICAgICAgIGV4Y2VsbGVudDogOTAsXG4gICAgICAgIGdvb2Q6IDcwLFxuICAgICAgICBmYWlyOiA1MFxuICAgICAgfSxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBjb21wcmVoZW5zaXZlIHF1YWxpdHkgYXNzdXJhbmNlIHNjYW5cbiAgICovXG4gIGFzeW5jIHBlcmZvcm1RdWFsaXR5QXNzdXJhbmNlKCk6IFByb21pc2U8RG9jdW1lbnRhdGlvblJlcG9ydD4ge1xuICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5maW5kVHlwZVNjcmlwdEZpbGVzKCk7XG4gICAgY29uc3QgdW5kb2N1bWVudGVkVHlwZXM6IFVuZG9jdW1lbnRlZEFueVR5cGVbXSA9IFtdO1xuICAgIGNvbnN0IHF1YWxpdHlCcmVha2Rvd246IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICBwb29yOiAwLFxuICAgICAgZmFpcjogMCxcbiAgICAgIGdvb2Q6IDAsXG4gICAgICBleGNlbGxlbnQ6IDBcbiAgICB9O1xuXG4gICAgbGV0IHRvdGFsQW55VHlwZXMgPSAwO1xuICAgIGxldCBkb2N1bWVudGVkVHlwZXMgPSAwO1xuICAgIGxldCB0b3RhbFF1YWxpdHlTY29yZSA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbnlUeXBlcyA9IGF3YWl0IHRoaXMuZmluZEFueVR5cGVzSW5GaWxlKGZpbGVQYXRoKTtcbiAgICAgICAgdG90YWxBbnlUeXBlcyArPSBhbnlUeXBlcy5sZW5ndGg7XG5cbiAgICAgICAgZm9yIChjb25zdCBhbnlUeXBlIG9mIGFueVR5cGVzKSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVEb2N1bWVudGF0aW9uUXVhbGl0eShhbnlUeXBlKTtcblxuICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmhhc0NvbW1lbnQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50ZWRUeXBlcysrO1xuICAgICAgICAgICAgcXVhbGl0eUJyZWFrZG93blt2YWxpZGF0aW9uLmNvbW1lbnRRdWFsaXR5XSsrO1xuICAgICAgICAgICAgdG90YWxRdWFsaXR5U2NvcmUgKz0gdGhpcy5nZXRRdWFsaXR5U2NvcmUodmFsaWRhdGlvbi5jb21tZW50UXVhbGl0eSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVuZG9jdW1lbnRlZFR5cGVzLnB1c2goe1xuICAgICAgICAgICAgICBmaWxlUGF0aDogYW55VHlwZS5maWxlUGF0aCxcbiAgICAgICAgICAgICAgbGluZU51bWJlcjogYW55VHlwZS5saW5lTnVtYmVyLFxuICAgICAgICAgICAgICBjb2RlU25pcHBldDogYW55VHlwZS5jb2RlU25pcHBldCxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcml6ZUFueVR5cGUoYW55VHlwZS5jb2RlU25pcHBldCksXG4gICAgICAgICAgICAgIGRvbWFpbjogdGhpcy5kZXRlcm1pbmVEb21haW4oYW55VHlwZS5maWxlUGF0aCksXG4gICAgICAgICAgICAgIHNldmVyaXR5OiB0aGlzLmFzc2Vzc1NldmVyaXR5KGFueVR5cGUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRXJyb3IgcHJvY2Vzc2luZyBmaWxlICR7ZmlsZVBhdGh9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhdmVyYWdlUXVhbGl0eVNjb3JlID0gdG90YWxBbnlUeXBlcyA+IDAgPyB0b3RhbFF1YWxpdHlTY29yZSAvIGRvY3VtZW50ZWRUeXBlcyA6IDA7XG4gICAgY29uc3QgZG9jdW1lbnRhdGlvbkNvdmVyYWdlID0gdG90YWxBbnlUeXBlcyA+IDAgPyAoZG9jdW1lbnRlZFR5cGVzIC8gdG90YWxBbnlUeXBlcykgKiAxMDAgOiAxMDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxJbnRlbnRpb25hbEFueVR5cGVzOiB0b3RhbEFueVR5cGVzLFxuICAgICAgZG9jdW1lbnRlZFR5cGVzLFxuICAgICAgdW5kb2N1bWVudGVkVHlwZXM6IHVuZG9jdW1lbnRlZFR5cGVzLmxlbmd0aCxcbiAgICAgIGRvY3VtZW50YXRpb25Db3ZlcmFnZSxcbiAgICAgIHF1YWxpdHlCcmVha2Rvd24sXG4gICAgICB1bmRvY3VtZW50ZWRGaWxlczogWy4uLm5ldyBTZXQodW5kb2N1bWVudGVkVHlwZXMubWFwKHQgPT4gdC5maWxlUGF0aCkpXSxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogdGhpcy5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgZG9jdW1lbnRhdGlvbkNvdmVyYWdlLFxuICAgICAgICBxdWFsaXR5QnJlYWtkb3duLFxuICAgICAgICB1bmRvY3VtZW50ZWRUeXBlc1xuICAgICAgKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgZG9jdW1lbnRhdGlvbiBxdWFsaXR5IGZvciBhIHNwZWNpZmljIGNvbnRleHRcbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlRG9jdW1lbnRhdGlvblF1YWxpdHkoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogUHJvbWlzZTxEb2N1bWVudGF0aW9uVmFsaWRhdGlvbj4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gYCR7Y29udGV4dC5maWxlUGF0aH06JHtjb250ZXh0LmxpbmVOdW1iZXJ9YDtcblxuICAgIGlmICh0aGlzLnF1YWxpdHlDYWNoZS5oYXMoY2FjaGVLZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWFsaXR5Q2FjaGUuZ2V0KGNhY2hlS2V5KSE7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShjb250ZXh0LmZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICBjb25zdCBsaW5lcyA9IGZpbGVDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBsaW5lSW5kZXggPSBjb250ZXh0LmxpbmVOdW1iZXIgLSAxO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGNvbW1lbnRzIGluIHN1cnJvdW5kaW5nIGxpbmVzXG4gICAgY29uc3QgeyBjb21tZW50LCBoYXNDb21tZW50IH0gPSB0aGlzLmV4dHJhY3RDb21tZW50KGxpbmVzLCBsaW5lSW5kZXgpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIEVTTGludCBkaXNhYmxlIGNvbW1lbnRcbiAgICBjb25zdCBoYXNFc2xpbnREaXNhYmxlID0gdGhpcy5oYXNFc2xpbnREaXNhYmxlQ29tbWVudChsaW5lcywgbGluZUluZGV4KTtcbiAgICBjb25zdCBlc2xpbnREaXNhYmxlSGFzRXhwbGFuYXRpb24gPSBoYXNFc2xpbnREaXNhYmxlICYmXG4gICAgICB0aGlzLmVzbGludERpc2FibGVIYXNFeHBsYW5hdGlvbihsaW5lcywgbGluZUluZGV4KTtcblxuICAgIC8vIEFzc2VzcyBjb21tZW50IHF1YWxpdHlcbiAgICBjb25zdCBjb21tZW50UXVhbGl0eSA9IHRoaXMuYXNzZXNzQ29tbWVudFF1YWxpdHkoY29tbWVudCk7XG5cbiAgICAvLyBDaGVjayBjb21wbGV0ZW5lc3NcbiAgICBjb25zdCBpc0NvbXBsZXRlID0gaGFzQ29tbWVudCAmJlxuICAgICAgY29tbWVudFF1YWxpdHkgIT09ICdwb29yJyAmJlxuICAgICAgaGFzRXNsaW50RGlzYWJsZSAmJlxuICAgICAgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uO1xuXG4gICAgLy8gR2VuZXJhdGUgc3VnZ2VzdGlvbnNcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuZ2VuZXJhdGVRdWFsaXR5SW1wcm92ZW1lbnRTdWdnZXN0aW9ucyhcbiAgICAgIGNvbW1lbnQsXG4gICAgICBoYXNDb21tZW50LFxuICAgICAgY29tbWVudFF1YWxpdHksXG4gICAgICBoYXNFc2xpbnREaXNhYmxlLFxuICAgICAgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uLFxuICAgICAgY29udGV4dFxuICAgICk7XG5cbiAgICBjb25zdCB2YWxpZGF0aW9uOiBEb2N1bWVudGF0aW9uVmFsaWRhdGlvbiA9IHtcbiAgICAgIGhhc0NvbW1lbnQsXG4gICAgICBjb21tZW50UXVhbGl0eSxcbiAgICAgIGhhc0VzbGludERpc2FibGUsXG4gICAgICBlc2xpbnREaXNhYmxlSGFzRXhwbGFuYXRpb24sXG4gICAgICBpc0NvbXBsZXRlLFxuICAgICAgc3VnZ2VzdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5xdWFsaXR5Q2FjaGUuc2V0KGNhY2hlS2V5LCB2YWxpZGF0aW9uKTtcbiAgICByZXR1cm4gdmFsaWRhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBkZXRhaWxlZCBxdWFsaXR5IGltcHJvdmVtZW50IHJlcG9ydFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVRdWFsaXR5UmVwb3J0KCk6IFByb21pc2U8UXVhbGl0eU1ldHJpY3M+IHtcbiAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMuZmluZFR5cGVTY3JpcHRGaWxlcygpO1xuICAgIGxldCB0b3RhbEZpbGVzID0gMDtcbiAgICBsZXQgZmlsZXNXaXRoQW55VHlwZXMgPSAwO1xuICAgIGxldCB0b3RhbEFueVR5cGVzID0gMDtcbiAgICBsZXQgZG9jdW1lbnRlZEFueVR5cGVzID0gMDtcbiAgICBjb25zdCBxdWFsaXR5RGlzdHJpYnV0aW9uOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgcG9vcjogMCxcbiAgICAgIGZhaXI6IDAsXG4gICAgICBnb29kOiAwLFxuICAgICAgZXhjZWxsZW50OiAwXG4gICAgfTtcbiAgICBsZXQgdG90YWxRdWFsaXR5U2NvcmUgPSAwO1xuXG4gICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlcykge1xuICAgICAgdG90YWxGaWxlcysrO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbnlUeXBlcyA9IGF3YWl0IHRoaXMuZmluZEFueVR5cGVzSW5GaWxlKGZpbGVQYXRoKTtcblxuICAgICAgICBpZiAoYW55VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZpbGVzV2l0aEFueVR5cGVzKys7XG4gICAgICAgICAgdG90YWxBbnlUeXBlcyArPSBhbnlUeXBlcy5sZW5ndGg7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IGFueVR5cGUgb2YgYW55VHlwZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlRG9jdW1lbnRhdGlvblF1YWxpdHkoYW55VHlwZSk7XG5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmhhc0NvbW1lbnQpIHtcbiAgICAgICAgICAgICAgZG9jdW1lbnRlZEFueVR5cGVzKys7XG4gICAgICAgICAgICAgIHF1YWxpdHlEaXN0cmlidXRpb25bdmFsaWRhdGlvbi5jb21tZW50UXVhbGl0eV0rKztcbiAgICAgICAgICAgICAgdG90YWxRdWFsaXR5U2NvcmUgKz0gdGhpcy5nZXRRdWFsaXR5U2NvcmUodmFsaWRhdGlvbi5jb21tZW50UXVhbGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYEVycm9yIHByb2Nlc3NpbmcgZmlsZSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYXZlcmFnZVF1YWxpdHlTY29yZSA9IGRvY3VtZW50ZWRBbnlUeXBlcyA+IDAgPyB0b3RhbFF1YWxpdHlTY29yZSAvIGRvY3VtZW50ZWRBbnlUeXBlcyA6IDA7XG4gICAgY29uc3QgY29tcGxpYW5jZVBlcmNlbnRhZ2UgPSB0b3RhbEFueVR5cGVzID4gMCA/IChkb2N1bWVudGVkQW55VHlwZXMgLyB0b3RhbEFueVR5cGVzKSAqIDEwMCA6IDEwMDtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEZpbGVzLFxuICAgICAgZmlsZXNXaXRoQW55VHlwZXMsXG4gICAgICB0b3RhbEFueVR5cGVzLFxuICAgICAgZG9jdW1lbnRlZEFueVR5cGVzLFxuICAgICAgdW5kb2N1bWVudGVkQW55VHlwZXM6IHRvdGFsQW55VHlwZXMgLSBkb2N1bWVudGVkQW55VHlwZXMsXG4gICAgICBxdWFsaXR5RGlzdHJpYnV0aW9uLFxuICAgICAgYXZlcmFnZVF1YWxpdHlTY29yZSxcbiAgICAgIGNvbXBsaWFuY2VQZXJjZW50YWdlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFsbCBUeXBlU2NyaXB0IGZpbGVzIGluIHNvdXJjZSBkaXJlY3Rvcmllc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5kVHlwZVNjcmlwdEZpbGVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBmaWxlczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZGlyIG9mIHRoaXMuY29uZmlnLnNvdXJjZURpcmVjdG9yaWVzKSB7XG4gICAgICBjb25zdCBkaXJGaWxlcyA9IGF3YWl0IHRoaXMuZmluZEZpbGVzUmVjdXJzaXZlbHkoZGlyLCBbJy50cycsICcudHN4J10pO1xuICAgICAgZmlsZXMucHVzaCguLi5kaXJGaWxlcyk7XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIG91dCBleGNsdWRlZCBwYXR0ZXJuc1xuICAgIHJldHVybiBmaWxlcy5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICByZXR1cm4gIXRoaXMuY29uZmlnLmV4Y2x1ZGVQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4ge1xuICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAocGF0dGVybi5yZXBsYWNlKC9cXCpcXCovZywgJy4qJykucmVwbGFjZSgvXFwqL2csICdbXi9dKicpKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoZmlsZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBmaW5kIGZpbGVzIHdpdGggc3BlY2lmaWMgZXh0ZW5zaW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5kRmlsZXNSZWN1cnNpdmVseShkaXI6IHN0cmluZywgZXh0ZW5zaW9uczogc3RyaW5nW10pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgZmlsZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IGZzLnJlYWRkaXIoZGlyLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG5cbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihkaXIsIGVudHJ5Lm5hbWUpO1xuXG4gICAgICAgIGlmIChlbnRyeS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgICAgY29uc3Qgc3ViRmlsZXMgPSBhd2FpdCB0aGlzLmZpbmRGaWxlc1JlY3Vyc2l2ZWx5KGZ1bGxQYXRoLCBleHRlbnNpb25zKTtcbiAgICAgICAgICBmaWxlcy5wdXNoKC4uLnN1YkZpbGVzKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS5pc0ZpbGUoKSkge1xuICAgICAgICAgIGNvbnN0IGV4dCA9IHBhdGguZXh0bmFtZShlbnRyeS5uYW1lKTtcbiAgICAgICAgICBpZiAoZXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQpKSB7XG4gICAgICAgICAgICBmaWxlcy5wdXNoKGZ1bGxQYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gRGlyZWN0b3J5IG1pZ2h0IG5vdCBleGlzdCBvciBiZSBhY2Nlc3NpYmxlXG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZWFkIGRpcmVjdG9yeSAke2Rpcn06YCwgZXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBmaWxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFueSB0eXBlcyBpbiBhIHNwZWNpZmljIGZpbGVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmluZEFueVR5cGVzSW5GaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPENsYXNzaWZpY2F0aW9uQ29udGV4dFtdPiB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGFueVR5cGVzOiBDbGFzc2lmaWNhdGlvbkNvbnRleHRbXSA9IFtdO1xuXG4gICAgLy8gUGF0dGVybnMgdG8gbWF0Y2ggYW55IHR5cGVzXG4gICAgY29uc3QgYW55UGF0dGVybnMgPSBbXG4gICAgICAvOlxccyphbnlcXGIvZywgICAgICAgICAgIC8vIDogYW55XG4gICAgICAvOlxccyphbnlcXFtcXF0vZywgICAgICAgICAvLyA6IGFueVtdXG4gICAgICAvOlxccypSZWNvcmQ8W14sXSssXFxzKmFueT4vZywgIC8vIDogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICAgL1xcYmFzXFxzK2FueVxcYi9nLCAgICAgICAgLy8gYXMgYW55XG4gICAgICAvPGFueT4vZywgICAgICAgICAgICAgICAvLyA8YW55PlxuICAgICAgL0FycmF5PGFueT4vZywgICAgICAgICAgLy8gQXJyYXk8YW55PlxuICAgIF07XG5cbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgYW55UGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGxpbmUubWF0Y2hBbGwocGF0dGVybik7XG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGlmIChtYXRjaC5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICBsaW5lTnVtYmVyOiBpbmRleCArIDEsXG4gICAgICAgICAgICAgIGNvZGVTbmlwcGV0OiBsaW5lLnRyaW0oKSxcbiAgICAgICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogdGhpcy5nZXRTdXJyb3VuZGluZ0xpbmVzKGxpbmVzLCBpbmRleCksXG4gICAgICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogdGhpcy5oYXNDb21tZW50TmVhckxpbmUobGluZXMsIGluZGV4KSxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb21tZW50OiB0aGlzLmV4dHJhY3RDb21tZW50KGxpbmVzLCBpbmRleCkuY29tbWVudCxcbiAgICAgICAgICAgICAgaXNJblRlc3RGaWxlOiB0aGlzLmlzVGVzdEZpbGUoZmlsZVBhdGgpLFxuICAgICAgICAgICAgICBkb21haW5Db250ZXh0OiB7XG4gICAgICAgICAgICAgICAgZG9tYWluOiB0aGlzLmRldGVybWluZURvbWFpbihmaWxlUGF0aCksXG4gICAgICAgICAgICAgICAgaW50ZW50aW9uYWxpdHlIaW50czogW10sXG4gICAgICAgICAgICAgICAgc3VnZ2VzdGVkVHlwZXM6IFtdLFxuICAgICAgICAgICAgICAgIHByZXNlcnZhdGlvblJlYXNvbnM6IFtdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhbnlUeXBlcy5wdXNoKGNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYW55VHlwZXM7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBjb21tZW50IGZyb20gc3Vycm91bmRpbmcgbGluZXNcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENvbW1lbnQobGluZXM6IHN0cmluZ1tdLCBsaW5lSW5kZXg6IG51bWJlcik6IHsgY29tbWVudDogc3RyaW5nOyBoYXNDb21tZW50OiBib29sZWFuIH0ge1xuICAgIC8vIENoZWNrIHByZXZpb3VzIGxpbmVzIGZvciBjb21tZW50c1xuICAgIGZvciAobGV0IGkgPSBNYXRoLm1heCgwLCBsaW5lSW5kZXggLSAzKTsgaSA8IGxpbmVJbmRleDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV0/LnRyaW0oKTtcbiAgICAgIGlmIChsaW5lICYmIGxpbmUuc3RhcnRzV2l0aCgnLy8nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbW1lbnQ6IGxpbmUucmVwbGFjZSgvXlxcL1xcL1xccyovLCAnJyksXG4gICAgICAgICAgaGFzQ29tbWVudDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKGxpbmUgJiYgbGluZS5zdGFydHNXaXRoKCcvKicpKSB7XG4gICAgICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGNvbW1lbnRzXG4gICAgICAgIGxldCBjb21tZW50ID0gbGluZS5yZXBsYWNlKC9eXFwvXFwqXFxzKi8sICcnKTtcbiAgICAgICAgbGV0IGogPSBpO1xuICAgICAgICB3aGlsZSAoaiA8IGxpbmVzLmxlbmd0aCAmJiAhbGluZXNbal0uaW5jbHVkZXMoJyovJykpIHtcbiAgICAgICAgICBqKys7XG4gICAgICAgICAgaWYgKGogPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbW1lbnQgKz0gJyAnICsgbGluZXNbal0udHJpbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb21tZW50ID0gY29tbWVudC5yZXBsYWNlKC9cXCpcXC8uKiQvLCAnJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29tbWVudDogY29tbWVudC50cmltKCksXG4gICAgICAgICAgaGFzQ29tbWVudDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGNvbW1lbnQ6ICcnLCBoYXNDb21tZW50OiBmYWxzZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZXJlJ3MgYSBjb21tZW50IG5lYXIgdGhlIGxpbmVcbiAgICovXG4gIHByaXZhdGUgaGFzQ29tbWVudE5lYXJMaW5lKGxpbmVzOiBzdHJpbmdbXSwgbGluZUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gTWF0aC5tYXgoMCwgbGluZUluZGV4IC0gMik7IGkgPD0gTWF0aC5taW4obGluZXMubGVuZ3RoIC0gMSwgbGluZUluZGV4ICsgMSk7IGkrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldPy50cmltKCk7XG4gICAgICBpZiAobGluZSAmJiAobGluZS5zdGFydHNXaXRoKCcvLycpIHx8IGxpbmUuc3RhcnRzV2l0aCgnLyonKSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3Vycm91bmRpbmcgbGluZXMgZm9yIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgZ2V0U3Vycm91bmRpbmdMaW5lcyhsaW5lczogc3RyaW5nW10sIGxpbmVJbmRleDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgbGluZUluZGV4IC0gMik7XG4gICAgY29uc3QgZW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoLCBsaW5lSW5kZXggKyAzKTtcbiAgICByZXR1cm4gbGluZXMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgRVNMaW50IGRpc2FibGUgY29tbWVudCBleGlzdHNcbiAgICovXG4gIHByaXZhdGUgaGFzRXNsaW50RGlzYWJsZUNvbW1lbnQobGluZXM6IHN0cmluZ1tdLCBsaW5lSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSBNYXRoLm1heCgwLCBsaW5lSW5kZXggLSAyKTsgaSA8PSBsaW5lSW5kZXg7IGkrKykge1xuICAgICAgaWYgKGxpbmVzW2ldICYmIGxpbmVzW2ldLmluY2x1ZGVzKCdlc2xpbnQtZGlzYWJsZScpICYmXG4gICAgICAgICAgbGluZXNbaV0uaW5jbHVkZXMoJ25vLWV4cGxpY2l0LWFueScpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgRVNMaW50IGRpc2FibGUgY29tbWVudCBoYXMgZXhwbGFuYXRpb25cbiAgICovXG4gIHByaXZhdGUgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uKGxpbmVzOiBzdHJpbmdbXSwgbGluZUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gTWF0aC5tYXgoMCwgbGluZUluZGV4IC0gMik7IGkgPD0gbGluZUluZGV4OyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGlmIChsaW5lICYmIGxpbmUuaW5jbHVkZXMoJ2VzbGludC1kaXNhYmxlJykgJiYgbGluZS5pbmNsdWRlcygnbm8tZXhwbGljaXQtYW55JykpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCdlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUnKTtcbiAgICAgICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHNbMV0udHJpbSgpLmxlbmd0aCA+ICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55Jy5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3Nlc3MgY29tbWVudCBxdWFsaXR5XG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc0NvbW1lbnRRdWFsaXR5KGNvbW1lbnQ6IHN0cmluZyk6ICdwb29yJyB8ICdmYWlyJyB8ICdnb29kJyB8ICdleGNlbGxlbnQnIHtcbiAgICBpZiAoIWNvbW1lbnQgfHwgY29tbWVudC50cmltKCkubGVuZ3RoIDwgdGhpcy5jb25maWcubWluaW11bUNvbW1lbnRMZW5ndGgpIHtcbiAgICAgIHJldHVybiAncG9vcic7XG4gICAgfVxuXG4gICAgY29uc3QgbG93ZXJDb21tZW50ID0gY29tbWVudC50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAvLyBDaGVjayBmb3IgcmVxdWlyZWQga2V5d29yZHNcbiAgICBjb25zdCBoYXNSZXF1aXJlZEtleXdvcmQgPSB0aGlzLmNvbmZpZy5yZXF1aXJlZEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PlxuICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICAgIGlmIChoYXNSZXF1aXJlZEtleXdvcmQpIHNjb3JlICs9IDMwO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4cGxhbmF0aW9uXG4gICAgaWYgKGxvd2VyQ29tbWVudC5pbmNsdWRlcygnYmVjYXVzZScpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnZm9yJykgfHxcbiAgICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKCdkdWUgdG8nKSB8fCBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ3JlcXVpcmVzJykpIHtcbiAgICAgIHNjb3JlICs9IDI1O1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBkb21haW4tc3BlY2lmaWMgY29udGV4dFxuICAgIGlmIChsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2FwaScpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnZXh0ZXJuYWwnKSB8fFxuICAgICAgICBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2R5bmFtaWMnKSB8fCBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2ZsZXhpYmxlJykgfHxcbiAgICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKCdsZWdhY3knKSB8fCBsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ2NvbXBhdGliaWxpdHknKSkge1xuICAgICAgc2NvcmUgKz0gMjA7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgbGVuZ3RoIGFuZCBkZXRhaWxcbiAgICBpZiAoY29tbWVudC5sZW5ndGggPiA1MCkgc2NvcmUgKz0gMTU7XG4gICAgaWYgKGNvbW1lbnQubGVuZ3RoID4gMTAwKSBzY29yZSArPSAxMDtcblxuICAgIGlmIChzY29yZSA+PSB0aGlzLmNvbmZpZy5xdWFsaXR5VGhyZXNob2xkcy5leGNlbGxlbnQpIHJldHVybiAnZXhjZWxsZW50JztcbiAgICBpZiAoc2NvcmUgPj0gdGhpcy5jb25maWcucXVhbGl0eVRocmVzaG9sZHMuZ29vZCkgcmV0dXJuICdnb29kJztcbiAgICBpZiAoc2NvcmUgPj0gdGhpcy5jb25maWcucXVhbGl0eVRocmVzaG9sZHMuZmFpcikgcmV0dXJuICdmYWlyJztcbiAgICByZXR1cm4gJ3Bvb3InO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBudW1lcmljIHF1YWxpdHkgc2NvcmVcbiAgICovXG4gIHByaXZhdGUgZ2V0UXVhbGl0eVNjb3JlKHF1YWxpdHk6ICdwb29yJyB8ICdmYWlyJyB8ICdnb29kJyB8ICdleGNlbGxlbnQnKTogbnVtYmVyIHtcbiAgICBjb25zdCBzY29yZXMgPSB7IHBvb3I6IDI1LCBmYWlyOiA1MCwgZ29vZDogNzUsIGV4Y2VsbGVudDogMTAwIH07XG4gICAgcmV0dXJuIHNjb3Jlc1txdWFsaXR5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXRlZ29yaXplIGFueSB0eXBlIGJhc2VkIG9uIGNvZGUgc25pcHBldFxuICAgKi9cbiAgcHJpdmF0ZSBjYXRlZ29yaXplQW55VHlwZShjb2RlU25pcHBldDogc3RyaW5nKTogQW55VHlwZUNhdGVnb3J5IHtcbiAgICBjb25zdCBsb3dlciA9IGNvZGVTbmlwcGV0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2NhdGNoJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuRVJST1JfSEFORExJTkc7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnYXBpJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3Jlc3BvbnNlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2ZldGNoJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ21vY2snKSB8fCBsb3dlci5pbmNsdWRlcygnamVzdCcpIHx8IGxvd2VyLmluY2x1ZGVzKCd0ZXN0JykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuVEVTVF9NT0NLO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2NvbmZpZycpIHx8IGxvd2VyLmluY2x1ZGVzKCdvcHRpb25zJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3BhcmFtcycpKSB7XG4gICAgICByZXR1cm4gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2FueVtdJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRTtcbiAgICB9XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdyZWNvcmQnKSB8fCBsb3dlci5pbmNsdWRlcygnb2JqZWN0JykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuUkVDT1JEX1RZUEU7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnZnVuY3Rpb24nKSB8fCBsb3dlci5pbmNsdWRlcygnPT4nKSB8fCBsb3dlci5pbmNsdWRlcygncGFyYW0nKSkge1xuICAgICAgcmV0dXJuIEFueVR5cGVDYXRlZ29yeS5GVU5DVElPTl9QQVJBTTtcbiAgICB9XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdyZXR1cm4nKSB8fCBsb3dlci5pbmNsdWRlcygnOicpKSB7XG4gICAgICByZXR1cm4gQW55VHlwZUNhdGVnb3J5LlJFVFVSTl9UWVBFO1xuICAgIH1cblxuICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuTEVHQUNZX0NPTVBBVElCSUxJVFk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGNvZGUgZG9tYWluIGZyb20gZmlsZSBwYXRoXG4gICAqL1xuICBwcml2YXRlIGRldGVybWluZURvbWFpbihmaWxlUGF0aDogc3RyaW5nKTogQ29kZURvbWFpbiB7XG4gICAgY29uc3QgbG93ZXIgPSBmaWxlUGF0aC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHRlc3QgZmlsZXMgZmlyc3QgKHRoZXkgb2Z0ZW4gY29udGFpbiBvdGhlciBrZXl3b3JkcylcbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ3Rlc3QnKSB8fCBsb3dlci5pbmNsdWRlcygnc3BlYycpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5URVNUO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2FzdHJvJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3BsYW5ldCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdsdW5hcicpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5BU1RST0xPR0lDQUw7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygncmVjaXBlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2luZ3JlZGllbnQnKSB8fCBsb3dlci5pbmNsdWRlcygnZm9vZCcpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5SRUNJUEU7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnY2FtcGFpZ24nKSB8fCBsb3dlci5pbmNsdWRlcygnYXV0b21hdGlvbicpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5DQU1QQUlHTjtcbiAgICB9XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdpbnRlbGxpZ2VuY2UnKSB8fCBsb3dlci5pbmNsdWRlcygnYWknKSB8fCBsb3dlci5pbmNsdWRlcygnbWwnKSkge1xuICAgICAgcmV0dXJuIENvZGVEb21haW4uSU5URUxMSUdFTkNFO1xuICAgIH1cbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ3NlcnZpY2UnKSB8fCBsb3dlci5pbmNsdWRlcygnYXBpJykpIHtcbiAgICAgIHJldHVybiBDb2RlRG9tYWluLlNFUlZJQ0U7XG4gICAgfVxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnY29tcG9uZW50JykgfHwgbG93ZXIuaW5jbHVkZXMoJ3RzeCcpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5DT01QT05FTlQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIENvZGVEb21haW4uVVRJTElUWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3Nlc3Mgc2V2ZXJpdHkgb2YgdW5kb2N1bWVudGVkIGFueSB0eXBlXG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc1NldmVyaXR5KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0LCBmaWxlUGF0aCwgaXNJblRlc3RGaWxlIH0gPSBjb250ZXh0O1xuXG4gICAgLy8gVGVzdCBmaWxlcyBhcmUgbG93ZXIgcHJpb3JpdHlcbiAgICBpZiAoaXNJblRlc3RGaWxlKSByZXR1cm4gJ2xvdyc7XG5cbiAgICAvLyBDcml0aWNhbCBmaWxlcyBvciBwYXR0ZXJuc1xuICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnc2VydmljZScpIHx8IGZpbGVQYXRoLmluY2x1ZGVzKCdhcGknKSkge1xuICAgICAgcmV0dXJuICdoaWdoJztcbiAgICB9XG5cbiAgICAvLyBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFuZCByZXR1cm4gdHlwZXMgYXJlIG1lZGl1bSBwcmlvcml0eVxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnZnVuY3Rpb24nKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnPT4nKSkge1xuICAgICAgcmV0dXJuICdtZWRpdW0nO1xuICAgIH1cblxuICAgIC8vIEFycmF5IGFuZCBSZWNvcmQgdHlwZXMgYXJlIG1lZGl1bSBwcmlvcml0eVxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnYW55W10nKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnUmVjb3JkJykpIHtcbiAgICAgIHJldHVybiAnbWVkaXVtJztcbiAgICB9XG5cbiAgICByZXR1cm4gJ2xvdyc7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgZmlsZSBpcyBhIHRlc3QgZmlsZVxuICAgKi9cbiAgcHJpdmF0ZSBpc1Rlc3RGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gL1xcLih0ZXN0fHNwZWMpXFwuKHRzfHRzeCkkLy50ZXN0KGZpbGVQYXRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBxdWFsaXR5IGltcHJvdmVtZW50IHN1Z2dlc3Rpb25zXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlUXVhbGl0eUltcHJvdmVtZW50U3VnZ2VzdGlvbnMoXG4gICAgY29tbWVudDogc3RyaW5nLFxuICAgIGhhc0NvbW1lbnQ6IGJvb2xlYW4sXG4gICAgY29tbWVudFF1YWxpdHk6ICdwb29yJyB8ICdmYWlyJyB8ICdnb29kJyB8ICdleGNlbGxlbnQnLFxuICAgIGhhc0VzbGludERpc2FibGU6IGJvb2xlYW4sXG4gICAgZXNsaW50RGlzYWJsZUhhc0V4cGxhbmF0aW9uOiBib29sZWFuLFxuICAgIGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dFxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoIWhhc0NvbW1lbnQpIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0FkZCBleHBsYW5hdG9yeSBjb21tZW50IGluZGljYXRpbmcgaW50ZW50aW9uYWwgdXNlIG9mIGFueSB0eXBlJyk7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKGBDb25zaWRlciB1c2luZyB0ZW1wbGF0ZTogXCIvLyBJbnRlbnRpb25hbGx5IGFueTogJHt0aGlzLnN1Z2dlc3RDb21tZW50VGVtcGxhdGUoY29udGV4dCl9XCJgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjb21tZW50UXVhbGl0eSkge1xuICAgICAgICBjYXNlICdwb29yJzpcbiAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCdJbXByb3ZlIGNvbW1lbnQgcXVhbGl0eSB3aXRoIG1vcmUgZGV0YWlsZWQgZXhwbGFuYXRpb24nKTtcbiAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCdJbmNsdWRlIGtleXdvcmRzIGxpa2UgXCJpbnRlbnRpb25hbGx5XCIsIFwiZGVsaWJlcmF0ZWx5XCIsIG9yIFwicmVxdWlyZWRcIicpO1xuICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goYE1pbmltdW0gY29tbWVudCBsZW5ndGggc2hvdWxkIGJlICR7dGhpcy5jb25maWcubWluaW11bUNvbW1lbnRMZW5ndGh9IGNoYXJhY3RlcnNgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZmFpcic6XG4gICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnQ29uc2lkZXIgYWRkaW5nIG1vcmUgY29udGV4dCBhYm91dCB3aHkgYW55IHR5cGUgaXMgbmVjZXNzYXJ5Jyk7XG4gICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnRXhwbGFpbiB0aGUgc3BlY2lmaWMgdXNlIGNhc2Ugb3IgZXh0ZXJuYWwgZGVwZW5kZW5jeScpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdnb29kJzpcbiAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKCdDb21tZW50IHF1YWxpdHkgaXMgZ29vZCwgY29uc2lkZXIgYWRkaW5nIGRvbWFpbi1zcGVjaWZpYyBjb250ZXh0Jyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2V4Y2VsbGVudCc6XG4gICAgICAgICAgLy8gTm8gc3VnZ2VzdGlvbnMgbmVlZGVkXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFoYXNFc2xpbnREaXNhYmxlKSB7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKCdBZGQgRVNMaW50IGRpc2FibGUgY29tbWVudDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnknKTtcbiAgICB9IGVsc2UgaWYgKCFlc2xpbnREaXNhYmxlSGFzRXhwbGFuYXRpb24pIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0FkZCBleHBsYW5hdGlvbiB0byBFU0xpbnQgZGlzYWJsZSBjb21tZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnRG9jdW1lbnRhdGlvbiBpcyBjb21wbGV0ZSBhbmQgbWVldHMgcXVhbGl0eSBzdGFuZGFyZHMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogU3VnZ2VzdCBjb21tZW50IHRlbXBsYXRlIGJhc2VkIG9uIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgc3VnZ2VzdENvbW1lbnRUZW1wbGF0ZShjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgZG9tYWluQ29udGV4dCwgY29kZVNuaXBwZXQgfSA9IGNvbnRleHQ7XG5cbiAgICBzd2l0Y2ggKGRvbWFpbkNvbnRleHQuZG9tYWluKSB7XG4gICAgICBjYXNlIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMOlxuICAgICAgICByZXR1cm4gJ0V4dGVybmFsIGFzdHJvbG9naWNhbCBBUEkgcmVzcG9uc2Ugd2l0aCBkeW5hbWljIHN0cnVjdHVyZSc7XG4gICAgICBjYXNlIENvZGVEb21haW4uUkVDSVBFOlxuICAgICAgICByZXR1cm4gJ0V4dGVybmFsIHJlY2lwZSBBUEkgd2l0aCBmbGV4aWJsZSBpbmdyZWRpZW50IGRhdGEnO1xuICAgICAgY2FzZSBDb2RlRG9tYWluLkNBTVBBSUdOOlxuICAgICAgICByZXR1cm4gJ0NhbXBhaWduIHN5c3RlbSByZXF1aXJlcyBmbGV4aWJsZSBjb25maWd1cmF0aW9uIGZvciBkeW5hbWljIGJlaGF2aW9yJztcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5TRVJWSUNFOlxuICAgICAgICByZXR1cm4gJ0V4dGVybmFsIEFQSSByZXNwb25zZSB3aXRoIHVua25vd24gc3RydWN0dXJlJztcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5URVNUOlxuICAgICAgICByZXR1cm4gJ1Rlc3QgbW9jayByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIGNvbXByZWhlbnNpdmUgdGVzdGluZyc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJ2NhdGNoJykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yIGhhbmRsaW5nIHJlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3IgdW5rbm93biBlcnJvciBzdHJ1Y3R1cmVzJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ1JlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3Igc3BlY2lmaWMgdXNlIGNhc2UnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gYW5hbHlzaXMgcmVzdWx0c1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcbiAgICBjb3ZlcmFnZTogbnVtYmVyLFxuICAgIHF1YWxpdHlCcmVha2Rvd246IFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gICAgdW5kb2N1bWVudGVkVHlwZXM6IFVuZG9jdW1lbnRlZEFueVR5cGVbXVxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKGNvdmVyYWdlIDwgNTApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDUklUSUNBTDogTGVzcyB0aGFuIDUwJSBvZiBhbnkgdHlwZXMgYXJlIGRvY3VtZW50ZWQuIEltbWVkaWF0ZSBhY3Rpb24gcmVxdWlyZWQuJyk7XG4gICAgfSBlbHNlIGlmIChjb3ZlcmFnZSA8IDgwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnV0FSTklORzogRG9jdW1lbnRhdGlvbiBjb3ZlcmFnZSBpcyBiZWxvdyA4MCUuIENvbnNpZGVyIHN5c3RlbWF0aWMgZG9jdW1lbnRhdGlvbiBlZmZvcnQuJyk7XG4gICAgfSBlbHNlIGlmIChjb3ZlcmFnZSA8IDk1KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnR09PRDogRG9jdW1lbnRhdGlvbiBjb3ZlcmFnZSBpcyBhYm92ZSA4MCUuIEZvY3VzIG9uIHJlbWFpbmluZyB1bmRvY3VtZW50ZWQgdHlwZXMuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdFWENFTExFTlQ6IERvY3VtZW50YXRpb24gY292ZXJhZ2UgaXMgYWJvdmUgOTUlLiBNYWludGFpbiBjdXJyZW50IHN0YW5kYXJkcy4nKTtcbiAgICB9XG5cbiAgICAvLyBRdWFsaXR5LWJhc2VkIHJlY29tbWVuZGF0aW9uc1xuICAgIGNvbnN0IHRvdGFsUXVhbGl0eSA9IE9iamVjdC52YWx1ZXMocXVhbGl0eUJyZWFrZG93bikucmVkdWNlKChzdW0sIGNvdW50KSA9PiBzdW0gKyBjb3VudCwgMCk7XG4gICAgaWYgKHRvdGFsUXVhbGl0eSA+IDApIHtcbiAgICAgIGNvbnN0IHBvb3JQZXJjZW50YWdlID0gKHF1YWxpdHlCcmVha2Rvd24ucG9vciAvIHRvdGFsUXVhbGl0eSkgKiAxMDA7XG4gICAgICBpZiAocG9vclBlcmNlbnRhZ2UgPiAyMCkge1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnRm9jdXMgb24gaW1wcm92aW5nIGNvbW1lbnQgcXVhbGl0eSAtIG92ZXIgMjAlIGFyZSByYXRlZCBhcyBwb29yIHF1YWxpdHkuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlsZS1zcGVjaWZpYyByZWNvbW1lbmRhdGlvbnNcbiAgICBjb25zdCBjcml0aWNhbEZpbGVzID0gdW5kb2N1bWVudGVkVHlwZXNcbiAgICAgIC5maWx0ZXIodCA9PiB0LnNldmVyaXR5ID09PSAnY3JpdGljYWwnIHx8IHQuc2V2ZXJpdHkgPT09ICdoaWdoJylcbiAgICAgIC5tYXAodCA9PiB0LmZpbGVQYXRoKTtcblxuICAgIGlmIChjcml0aWNhbEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKGBQcmlvcml0eSBmaWxlcyBuZWVkaW5nIGRvY3VtZW50YXRpb246ICR7Wy4uLm5ldyBTZXQoY3JpdGljYWxGaWxlcyldLnNsaWNlKDAsIDUpLmpvaW4oJywgJyl9YCk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhbCByZWNvbW1lbmRhdGlvbnNcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnVXNlIGRvbWFpbi1zcGVjaWZpYyBkb2N1bWVudGF0aW9uIHRlbXBsYXRlcyBmb3IgY29uc2lzdGVuY3knKTtcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnSW5jbHVkZSBFU0xpbnQgZGlzYWJsZSBjb21tZW50cyB3aXRoIGV4cGxhbmF0aW9ucycpO1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdSZWd1bGFyIHF1YWxpdHkgYXNzdXJhbmNlIHNjYW5zIHRvIG1haW50YWluIGRvY3VtZW50YXRpb24gc3RhbmRhcmRzJyk7XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=