13e5aff1d123a85f444a9ca6b96b6b53
"use strict";
/**
 * Zero-Error Achievement Dashboard
 *
 * Comprehensive monitoring system for achieving and maintaining
 * zero linting errors with real-time metrics, alerting, and
 * automated maintenance procedures.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ZeroErrorAchievementDashboard = void 0;
const child_process_1 = require("child_process");
const fs_1 = require("fs");
const path_1 = require("path");
const LintingAlertingSystem_1 = require("./LintingAlertingSystem");
const LintingValidationDashboard_1 = require("./LintingValidationDashboard");
class ZeroErrorAchievementDashboard {
    dashboardDir = '.kiro/dashboard';
    metricsDir = '.kiro/metrics';
    configFile = (0, path_1.join)(this.dashboardDir, 'zero-error-config.json');
    targetsFile = (0, path_1.join)(this.dashboardDir, 'zero-error-targets.json');
    trendsFile = (0, path_1.join)(this.dashboardDir, 'trend-analysis.json');
    qualityGatesFile = (0, path_1.join)(this.dashboardDir, 'quality-gates.json');
    validationDashboard;
    alertingSystem;
    maintenanceProcedures = new Map();
    constructor() {
        this.ensureDirectoriesExist();
        this.validationDashboard = new LintingValidationDashboard_1.LintingValidationDashboard();
        this.alertingSystem = new LintingAlertingSystem_1.LintingAlertingSystem();
        this.initializeMaintenanceProcedures();
        this.initializeQualityGates();
    }
    /**
     * Generate comprehensive zero-error achievement dashboard
     */
    async generateDashboard() {
        console.log('üéØ Generating Zero-Error Achievement Dashboard...\n');
        const startTime = Date.now();
        // Collect current metrics
        const validationResult = await this.validationDashboard.runComprehensiveValidation();
        // Analyze trends
        const trendAnalysis = await this.analyzeTrends(validationResult.metrics);
        // Update targets
        const targets = await this.updateTargets(validationResult.metrics);
        // Check quality gates
        const qualityGates = await this.checkQualityGates(validationResult.metrics);
        // Run maintenance procedures
        const maintenanceResults = await this.runScheduledMaintenance();
        // Generate comprehensive report
        await this.generateComprehensiveReport({
            validationResult,
            trendAnalysis,
            targets,
            qualityGates,
            maintenanceResults,
            generationTime: Date.now() - startTime,
        });
        // Process alerts
        if (validationResult.alerts.length > 0) {
            await this.alertingSystem.processAlerts(validationResult.alerts, validationResult.metrics);
        }
        console.log(`‚úÖ Dashboard generated in ${Date.now() - startTime}ms`);
    }
    /**
     * Real-time monitoring with continuous updates
     */
    async startRealTimeMonitoring(intervalMinutes = 5) {
        console.log(`üëÄ Starting real-time monitoring (${intervalMinutes} minute intervals)...\n`);
        let lastMetrics = null;
        const monitoringLoop = async () => {
            try {
                const validationResult = await this.validationDashboard.runComprehensiveValidation();
                const currentMetrics = validationResult.metrics;
                // Detect significant changes
                if (lastMetrics) {
                    const significantChanges = this.detectSignificantChanges(lastMetrics, currentMetrics);
                    if (significantChanges.length > 0) {
                        console.log(`\n‚ö†Ô∏è  [${new Date().toISOString()}] Significant changes detected:`);
                        for (const change of significantChanges) {
                            console.log(`   ${change}`);
                        }
                        // Trigger immediate dashboard update
                        await this.generateDashboard();
                    }
                }
                // Check for critical issues
                const criticalIssues = this.identifyCriticalIssues(currentMetrics);
                if (criticalIssues.length > 0) {
                    console.log(`\nüö® [${new Date().toISOString()}] CRITICAL ISSUES:`);
                    for (const issue of criticalIssues) {
                        console.log(`   ${issue}`);
                    }
                }
                // Update real-time status
                await this.updateRealTimeStatus(currentMetrics);
                lastMetrics = currentMetrics;
            }
            catch (error) {
                console.error(`‚ùå [${new Date().toISOString()}] Monitoring error:`, error);
            }
        };
        // Initial run
        await monitoringLoop();
        // Schedule periodic runs
        setInterval(monitoringLoop, intervalMinutes * 60 * 1000);
        console.log('‚úÖ Real-time monitoring started');
    }
    /**
     * Analyze trends in linting metrics
     */
    async analyzeTrends(currentMetrics) {
        const history = this.loadMetricsHistory();
        if (history.length < 3) {
            return []; // Need at least 3 data points for trend analysis
        }
        const trends = [];
        const metricsToAnalyze = [
            'totalIssues',
            'errors',
            'parserErrors',
            'explicitAnyErrors',
            'qualityScore',
        ];
        for (const metric of metricsToAnalyze) {
            const values = history.slice(-10).map(h => this.getMetricValue(h, metric));
            const trend = this.calculateTrend(values);
            trends.push({
                metric,
                trend: trend.direction,
                velocity: trend.velocity,
                projection: this.projectFuture(trend.velocity, this.getMetricValue(currentMetrics, metric)),
                confidence: trend.confidence,
            });
        }
        // Store trend analysis
        (0, fs_1.writeFileSync)(this.trendsFile, JSON.stringify(trends, null, 2));
        return trends;
    }
    /**
     * Update zero-error targets based on current progress
     */
    async updateTargets(currentMetrics) {
        const existingTargets = this.loadTargets();
        const updatedTargets = [];
        const defaultTargets = [
            {
                metric: 'parserErrors',
                targetValue: 0,
                deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
                priority: 'critical',
                strategy: 'Immediate syntax error fixes with TypeScript compiler validation',
            },
            {
                metric: 'explicitAnyErrors',
                targetValue: 0,
                deadline: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                priority: 'high',
                strategy: 'Systematic type inference and interface generation',
            },
            {
                metric: 'totalIssues',
                targetValue: 500,
                deadline: new Date(Date.now() + 90 * 24 * 60 * 60 * 1000),
                priority: 'medium',
                strategy: 'Comprehensive automated fixing with domain-specific preservation',
            },
            {
                metric: 'qualityScore',
                targetValue: 95,
                deadline: new Date(Date.now() + 60 * 24 * 60 * 60 * 1000),
                priority: 'high',
                strategy: 'Multi-phase quality improvement with performance optimization',
            },
        ];
        for (const defaultTarget of defaultTargets) {
            const currentValue = this.getMetricValue(currentMetrics, defaultTarget.metric);
            const existingTarget = existingTargets.find(t => t.metric === defaultTarget.metric);
            const progress = this.calculateProgress(currentValue, defaultTarget.targetValue, defaultTarget.metric);
            const estimatedCompletion = this.estimateCompletion(currentValue, defaultTarget.targetValue, defaultTarget.deadline);
            updatedTargets.push({
                ...defaultTarget,
                currentValue,
                progress,
                estimatedCompletion,
                ...(existingTarget && { deadline: existingTarget.deadline }), // Preserve custom deadlines
            });
        }
        // Store updated targets
        (0, fs_1.writeFileSync)(this.targetsFile, JSON.stringify(updatedTargets, null, 2));
        return updatedTargets;
    }
    /**
     * Check quality gates status
     */
    async checkQualityGates(currentMetrics) {
        const gates = [
            {
                id: 'no-parser-errors',
                name: 'Zero Parser Errors',
                condition: 'parserErrors === 0',
                threshold: 0,
                status: 'passing',
                blocksDeployment: true,
                lastCheck: new Date(),
            },
            {
                id: 'explicit-any-limit',
                name: 'Explicit Any Limit',
                condition: 'explicitAnyErrors <= 100',
                threshold: 100,
                status: 'passing',
                blocksDeployment: true,
                lastCheck: new Date(),
            },
            {
                id: 'quality-score-minimum',
                name: 'Minimum Quality Score',
                condition: 'qualityScore >= 80',
                threshold: 80,
                status: 'passing',
                blocksDeployment: false,
                lastCheck: new Date(),
            },
            {
                id: 'performance-threshold',
                name: 'Performance Threshold',
                condition: 'lintingDuration <= 30000',
                threshold: 30000,
                status: 'passing',
                blocksDeployment: false,
                lastCheck: new Date(),
            },
        ];
        // Evaluate each gate
        for (const gate of gates) {
            const metricValue = this.getMetricValue(currentMetrics, gate.condition.split(' ')[0]);
            switch (gate.id) {
                case 'no-parser-errors':
                    gate.status = currentMetrics.parserErrors === 0 ? 'passing' : 'failing';
                    break;
                case 'explicit-any-limit':
                    gate.status =
                        currentMetrics.explicitAnyErrors <= 100
                            ? 'passing'
                            : currentMetrics.explicitAnyErrors <= 150
                                ? 'warning'
                                : 'failing';
                    break;
                case 'quality-score-minimum':
                    gate.status =
                        currentMetrics.qualityScore >= 80
                            ? 'passing'
                            : currentMetrics.qualityScore >= 70
                                ? 'warning'
                                : 'failing';
                    break;
                case 'performance-threshold':
                    gate.status =
                        currentMetrics.performanceMetrics.lintingDuration <= 30000
                            ? 'passing'
                            : currentMetrics.performanceMetrics.lintingDuration <= 45000
                                ? 'warning'
                                : 'failing';
                    break;
            }
        }
        // Store quality gates status
        (0, fs_1.writeFileSync)(this.qualityGatesFile, JSON.stringify(gates, null, 2));
        return gates;
    }
    /**
     * Run scheduled maintenance procedures
     */
    async runScheduledMaintenance() {
        const results = new Map();
        const now = new Date();
        for (const [id, procedure] of this.maintenanceProcedures) {
            if (procedure.automated && now >= procedure.nextRun) {
                console.log(`üîß Running maintenance: ${procedure.name}...`);
                try {
                    const result = await procedure.procedure();
                    results.set(id, result);
                    // Update next run time
                    procedure.lastRun = now;
                    procedure.nextRun = this.calculateNextRun(now, procedure.frequency);
                    console.log(`   ${result.success ? '‚úÖ' : '‚ùå'} ${procedure.name} (${result.duration}ms)`);
                }
                catch (error) {
                    console.error(`   ‚ùå ${procedure.name} failed:`, error);
                    results.set(id, {
                        success: false,
                        duration: 0,
                        issues: [error.toString()],
                        improvements: [],
                        nextActions: ['Investigate maintenance procedure failure'],
                    });
                }
            }
        }
        return results;
    }
    /**
     * Generate comprehensive dashboard report
     */
    async generateComprehensiveReport(data) {
        const reportPath = (0, path_1.join)(this.dashboardDir, 'zero-error-achievement-dashboard.md');
        const report = `# üéØ Zero-Error Achievement Dashboard

Generated: ${new Date().toISOString()}  
Generation Time: ${data.generationTime}ms

## üìä Executive Summary

- **Overall Status**: ${this.getOverallStatus(data.validationResult, data.qualityGates)}
- **Quality Score**: ${data.validationResult.metrics.qualityScore}/100 ${this.getScoreIcon(data.validationResult.metrics.qualityScore)}
- **Zero-Error Progress**: ${this.calculateOverallProgress(data.targets)}%
- **Quality Gates**: ${data.qualityGates.filter(g => g.status === 'passing').length}/${data.qualityGates.length} passing
- **Critical Issues**: ${this.identifyCriticalIssues(data.validationResult.metrics).length}

## üéØ Zero-Error Targets

${data.targets
            .map(target => `
### ${target.metric.charAt(0).toUpperCase() + target.metric.slice(1)}
- **Current**: ${target.currentValue}
- **Target**: ${target.targetValue}
- **Progress**: ${target.progress}% ${this.getProgressBar(target.progress)}
- **Priority**: ${target.priority.toUpperCase()} ${this.getPriorityIcon(target.priority)}
- **Deadline**: ${target.deadline.toLocaleDateString()}
- **Est. Completion**: ${target.estimatedCompletion.toLocaleDateString()}
- **Strategy**: ${target.strategy}
`)
            .join('')}

## üìà Trend Analysis

${data.trendAnalysis.length === 0
            ? 'Insufficient data for trend analysis (need 3+ data points)'
            : data.trendAnalysis
                .map(trend => `
### ${trend.metric}
- **Trend**: ${trend.trend.toUpperCase()} ${this.getTrendIcon(trend.trend)}
- **Velocity**: ${trend.velocity.toFixed(2)} per day
- **7-day projection**: ${trend.projection.sevenDays.toFixed(0)}
- **30-day projection**: ${trend.projection.thirtyDays.toFixed(0)}
- **Confidence**: ${(trend.confidence * 100).toFixed(0)}%
`)
                .join('')}

## üö¶ Quality Gates

${data.qualityGates
            .map(gate => `
### ${gate.name}
- **Status**: ${gate.status.toUpperCase()} ${this.getGateStatusIcon(gate.status)}
- **Condition**: \`${gate.condition}\`
- **Blocks Deployment**: ${gate.blocksDeployment ? 'üö´ YES' : '‚úÖ NO'}
- **Last Check**: ${gate.lastCheck.toLocaleString()}
`)
            .join('')}

## üîç Current Metrics Breakdown

### Critical Issues
- **Parser Errors**: ${data.validationResult.metrics.parserErrors} ${data.validationResult.metrics.parserErrors === 0 ? '‚úÖ' : 'üö®'}
- **TypeScript Errors**: ${data.validationResult.metrics.errors}
- **Explicit Any Errors**: ${data.validationResult.metrics.explicitAnyErrors} ${data.validationResult.metrics.explicitAnyErrors < 100 ? '‚úÖ' : '‚ö°'}

### Code Quality
- **Import Order Issues**: ${data.validationResult.metrics.importOrderIssues}
- **Unused Variables**: ${data.validationResult.metrics.unusedVariables}
- **React Hooks Issues**: ${data.validationResult.metrics.reactHooksIssues}
- **Console Statements**: ${data.validationResult.metrics.consoleStatements}

### Domain-Specific
- **Astrological Calculations**: ${data.validationResult.metrics.domainSpecificIssues.astrologicalCalculations}
- **Campaign System**: ${data.validationResult.metrics.domainSpecificIssues.campaignSystem}
- **Test Files**: ${data.validationResult.metrics.domainSpecificIssues.testFiles}

### Performance
- **Linting Duration**: ${data.validationResult.metrics.performanceMetrics.lintingDuration}ms
- **Cache Hit Rate**: ${(data.validationResult.metrics.performanceMetrics.cacheHitRate * 100).toFixed(1)}%
- **Memory Usage**: ${data.validationResult.metrics.performanceMetrics.memoryUsage.toFixed(1)}MB
- **Files Processed**: ${data.validationResult.metrics.performanceMetrics.filesProcessed}

## üö® Active Alerts

${data.validationResult.alerts.length === 0
            ? '‚úÖ No active alerts'
            : data.validationResult.alerts
                .map(alert => `- **${alert.severity.toUpperCase()}**: ${alert.message} (${alert.currentValue}/${alert.threshold})`)
                .join('\n')}

## üîß Maintenance Status

${data.maintenanceResults.size === 0
            ? 'No maintenance procedures run this cycle'
            : Array.from(data.maintenanceResults.entries())
                .map(([id, result]) => `
### ${this.maintenanceProcedures.get(id)?.name || id}
- **Status**: ${result.success ? '‚úÖ SUCCESS' : '‚ùå FAILED'}
- **Duration**: ${result.duration}ms
- **Issues**: ${result.issues.length === 0 ? 'None' : result.issues.join(', ')}
- **Improvements**: ${result.improvements.length === 0 ? 'None' : result.improvements.join(', ')}
`)
                .join('')}

## üí° Immediate Actions Required

${this.generateImmediateActions(data.validationResult.metrics, data.targets, data.qualityGates)}

## üìã Next Steps (Priority Order)

${this.generateNextSteps(data.validationResult.metrics, data.targets, data.trendAnalysis)}

## üéØ Success Metrics Dashboard

### Current vs Target
- **Parser Errors**: ${data.validationResult.metrics.parserErrors}/0 (${data.validationResult.metrics.parserErrors === 0 ? '‚úÖ ACHIEVED' : 'üéØ IN PROGRESS'})
- **Explicit Any**: ${data.validationResult.metrics.explicitAnyErrors}/0 (${Math.round((1 - data.validationResult.metrics.explicitAnyErrors / Math.max(data.validationResult.metrics.explicitAnyErrors, 1000)) * 100)}% progress)
- **Quality Score**: ${data.validationResult.metrics.qualityScore}/95 (${Math.round((data.validationResult.metrics.qualityScore / 95) * 100)}% progress)
- **Total Issues**: ${data.validationResult.metrics.totalIssues}/500 (${Math.round((1 - data.validationResult.metrics.totalIssues / Math.max(data.validationResult.metrics.totalIssues, 10000)) * 100)}% progress)

### Performance Metrics
- **Linting Speed**: ${data.validationResult.metrics.performanceMetrics.lintingDuration}ms (target: <15s)
- **Cache Efficiency**: ${(data.validationResult.metrics.performanceMetrics.cacheHitRate * 100).toFixed(1)}% (target: >85%)
- **Memory Usage**: ${data.validationResult.metrics.performanceMetrics.memoryUsage.toFixed(1)}MB (target: <256MB)

---

## üîÑ Automated Actions Available

- **Fix Parser Errors**: \`yarn tsc --noEmit && yarn lint:fix\`
- **Explicit Any Campaign**: \`yarn lint:campaign explicit-any\`
- **Import Organization**: \`yarn lint:fix --rule "import/order"\`
- **Performance Optimization**: \`yarn lint:fast --cache\`
- **Comprehensive Cleanup**: \`yarn lint:workflow-auto\`

## üìä Historical Context

This dashboard tracks progress toward zero linting errors with enhanced ESLint configuration including:
- React 19 & Next.js 15 compatibility
- Enhanced TypeScript strict rules
- Domain-specific configurations for astrological calculations
- Performance optimizations (60-80% improvement)
- Comprehensive safety protocols

**Configuration Status**: ‚úÖ Enhanced (January 2025)  
**Performance**: ‚úÖ Optimized (60-80% faster)  
**Domain Rules**: ‚úÖ Implemented (Astrological + Campaign)  
**Safety Protocols**: ‚úÖ Enhanced (Backup + Rollback)

---

*Dashboard auto-generated by Zero-Error Achievement System*  
*Next update: ${new Date(Date.now() + 5 * 60 * 1000).toISOString()}*
`;
        (0, fs_1.writeFileSync)(reportPath, report, 'utf8');
        // Also generate JSON version for programmatic access
        const jsonReport = {
            timestamp: new Date().toISOString(),
            generationTime: data.generationTime,
            summary: {
                overallStatus: this.getOverallStatus(data.validationResult, data.qualityGates),
                qualityScore: data.validationResult.metrics.qualityScore,
                zeroErrorProgress: this.calculateOverallProgress(data.targets),
                qualityGatesPassing: data.qualityGates.filter(g => g.status === 'passing').length,
                totalQualityGates: data.qualityGates.length,
                criticalIssues: this.identifyCriticalIssues(data.validationResult.metrics).length,
            },
            metrics: data.validationResult.metrics,
            targets: data.targets,
            trends: data.trendAnalysis,
            qualityGates: data.qualityGates,
            alerts: data.validationResult.alerts,
            maintenance: Object.fromEntries(data.maintenanceResults),
        };
        (0, fs_1.writeFileSync)((0, path_1.join)(this.dashboardDir, 'zero-error-achievement-dashboard.json'), JSON.stringify(jsonReport, null, 2));
        console.log(`üìä Dashboard report generated: ${reportPath}`);
    }
    /**
     * Initialize maintenance procedures
     */
    initializeMaintenanceProcedures() {
        // Daily procedures
        this.maintenanceProcedures.set('daily-health-check', {
            id: 'daily-health-check',
            name: 'Daily Health Check',
            description: 'Quick validation of parser errors and critical issues',
            frequency: 'daily',
            lastRun: null,
            nextRun: new Date(),
            automated: true,
            procedure: async () => {
                const startTime = Date.now();
                const issues = [];
                const improvements = [];
                try {
                    // Check for parser errors
                    const tscOutput = (0, child_process_1.execSync)('yarn tsc --noEmit --skipLibCheck 2>&1 || true', {
                        encoding: 'utf8',
                    });
                    const parserErrors = (tscOutput.match(/error TS/g) || []).length;
                    if (parserErrors > 0) {
                        issues.push(`${parserErrors} parser errors detected`);
                    }
                    else {
                        improvements.push('Zero parser errors maintained');
                    }
                    // Quick lint check
                    const lintOutput = (0, child_process_1.execSync)('yarn lint:summary 2>&1 || true', { encoding: 'utf8' });
                    if (lintOutput.includes('error')) {
                        issues.push('Linting errors detected in summary check');
                    }
                    return {
                        success: issues.length === 0,
                        duration: Date.now() - startTime,
                        issues,
                        improvements,
                        nextActions: issues.length > 0 ? ['Run comprehensive validation', 'Fix critical issues'] : [],
                    };
                }
                catch (error) {
                    return {
                        success: false,
                        duration: Date.now() - startTime,
                        issues: [error.toString()],
                        improvements: [],
                        nextActions: ['Investigate health check failure'],
                    };
                }
            },
        });
        // Weekly procedures
        this.maintenanceProcedures.set('weekly-cache-optimization', {
            id: 'weekly-cache-optimization',
            name: 'Weekly Cache Optimization',
            description: 'Clear and rebuild ESLint cache for optimal performance',
            frequency: 'weekly',
            lastRun: null,
            nextRun: new Date(),
            automated: true,
            procedure: async () => {
                const startTime = Date.now();
                const issues = [];
                const improvements = [];
                try {
                    // Clear cache
                    (0, child_process_1.execSync)('rm -rf .eslintcache .eslint-ts-cache/', { stdio: 'pipe' });
                    improvements.push('ESLint cache cleared');
                    // Rebuild cache
                    (0, child_process_1.execSync)('yarn lint:fast --quiet', { stdio: 'pipe' });
                    improvements.push('ESLint cache rebuilt');
                    return {
                        success: true,
                        duration: Date.now() - startTime,
                        issues,
                        improvements,
                        nextActions: [],
                    };
                }
                catch (error) {
                    issues.push(`Cache optimization failed: ${error}`);
                    return {
                        success: false,
                        duration: Date.now() - startTime,
                        issues,
                        improvements,
                        nextActions: ['Manual cache cleanup required'],
                    };
                }
            },
        });
        // Monthly procedures
        this.maintenanceProcedures.set('monthly-metrics-cleanup', {
            id: 'monthly-metrics-cleanup',
            name: 'Monthly Metrics Cleanup',
            description: 'Clean old metrics and optimize storage',
            frequency: 'monthly',
            lastRun: null,
            nextRun: new Date(),
            automated: true,
            procedure: async () => {
                const startTime = Date.now();
                const issues = [];
                const improvements = [];
                try {
                    // Clean metrics history (keep last 100 entries)
                    const metricsFile = (0, path_1.join)(this.metricsDir, 'linting-metrics-history.json');
                    if ((0, fs_1.existsSync)(metricsFile)) {
                        const history = JSON.parse((0, fs_1.readFileSync)(metricsFile, 'utf8'));
                        if (history.length > 100) {
                            const trimmed = history.slice(-100);
                            (0, fs_1.writeFileSync)(metricsFile, JSON.stringify(trimmed, null, 2));
                            improvements.push(`Trimmed metrics history to 100 entries (was ${history.length})`);
                        }
                    }
                    // Clean alert history
                    const alertsFile = (0, path_1.join)(this.metricsDir, 'alerting-history.json');
                    if ((0, fs_1.existsSync)(alertsFile)) {
                        const alertHistory = JSON.parse((0, fs_1.readFileSync)(alertsFile, 'utf8'));
                        if (alertHistory.alerts && alertHistory.alerts.length > 500) {
                            alertHistory.alerts = alertHistory.alerts.slice(-500);
                            (0, fs_1.writeFileSync)(alertsFile, JSON.stringify(alertHistory, null, 2));
                            improvements.push('Trimmed alert history to 500 entries');
                        }
                    }
                    return {
                        success: true,
                        duration: Date.now() - startTime,
                        issues,
                        improvements,
                        nextActions: [],
                    };
                }
                catch (error) {
                    issues.push(`Metrics cleanup failed: ${error}`);
                    return {
                        success: false,
                        duration: Date.now() - startTime,
                        issues,
                        improvements,
                        nextActions: ['Manual metrics cleanup required'],
                    };
                }
            },
        });
    }
    /**
     * Initialize quality gates
     */
    initializeQualityGates() {
        if (!(0, fs_1.existsSync)(this.qualityGatesFile)) {
            const defaultGates = [
                {
                    id: 'no-parser-errors',
                    name: 'Zero Parser Errors',
                    condition: 'parserErrors === 0',
                    threshold: 0,
                    status: 'passing',
                    blocksDeployment: true,
                    lastCheck: new Date(),
                },
                {
                    id: 'explicit-any-limit',
                    name: 'Explicit Any Limit',
                    condition: 'explicitAnyErrors <= 100',
                    threshold: 100,
                    status: 'passing',
                    blocksDeployment: true,
                    lastCheck: new Date(),
                },
                {
                    id: 'quality-score-minimum',
                    name: 'Minimum Quality Score',
                    condition: 'qualityScore >= 80',
                    threshold: 80,
                    status: 'passing',
                    blocksDeployment: false,
                    lastCheck: new Date(),
                },
            ];
            (0, fs_1.writeFileSync)(this.qualityGatesFile, JSON.stringify(defaultGates, null, 2));
        }
    }
    // Helper methods
    ensureDirectoriesExist() {
        const dirs = [this.dashboardDir, this.metricsDir];
        for (const dir of dirs) {
            if (!(0, fs_1.existsSync)(dir)) {
                (0, fs_1.mkdirSync)(dir, { recursive: true });
            }
        }
    }
    loadTargets() {
        try {
            if ((0, fs_1.existsSync)(this.targetsFile)) {
                return JSON.parse((0, fs_1.readFileSync)(this.targetsFile, 'utf8'));
            }
        }
        catch (error) {
            console.warn('Error loading targets:', error);
        }
        return [];
    }
    loadMetricsHistory() {
        try {
            const historyFile = (0, path_1.join)(this.metricsDir, 'linting-metrics-history.json');
            if ((0, fs_1.existsSync)(historyFile)) {
                return JSON.parse((0, fs_1.readFileSync)(historyFile, 'utf8'));
            }
        }
        catch (error) {
            console.warn('Error loading metrics history:', error);
        }
        return [];
    }
    getMetricValue(metrics, metricPath) {
        const parts = metricPath.split('.');
        let value = metrics;
        for (const part of parts) {
            value = value?.[part];
        }
        return typeof value === 'number' ? value : 0;
    }
    calculateProgress(current, target, metric) {
        if (metric === 'qualityScore') {
            return Math.min(100, (current / target) * 100);
        }
        else {
            // For error metrics, progress is reduction toward target
            if (current <= target)
                return 100;
            const maxValue = Math.max(current, target * 10); // Assume 10x target as baseline
            return Math.max(0, ((maxValue - current) / (maxValue - target)) * 100);
        }
    }
    estimateCompletion(current, target, deadline) {
        // Simple linear projection based on deadline
        const progress = this.calculateProgress(current, target, 'generic');
        if (progress >= 100)
            return new Date(); // Already achieved
        const remainingProgress = 100 - progress;
        const timeToDeadline = deadline.getTime() - Date.now();
        const estimatedTime = (timeToDeadline * remainingProgress) / 100;
        return new Date(Date.now() + estimatedTime);
    }
    calculateTrend(values) {
        if (values.length < 2) {
            return { direction: 'stable', velocity: 0, confidence: 0 };
        }
        // Simple linear regression
        const n = values.length;
        const x = Array.from({ length: n }, (_, i) => i);
        const sumX = x.reduce((a, b) => a + b, 0);
        const sumY = values.reduce((a, b) => a + b, 0);
        const sumXY = x.reduce((sum, xi, i) => sum + xi * values[i], 0);
        const sumXX = x.reduce((sum, xi) => sum + xi * xi, 0);
        const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);
        const confidence = Math.min(1, n / 10); // Higher confidence with more data points
        let direction;
        if (Math.abs(slope) < 0.1) {
            direction = 'stable';
        }
        else if (slope < 0) {
            direction = 'improving'; // Negative slope means decreasing errors
        }
        else {
            direction = 'degrading';
        }
        return { direction, velocity: slope, confidence };
    }
    projectFuture(velocity, currentValue) {
        return {
            sevenDays: Math.max(0, currentValue + velocity * 7),
            thirtyDays: Math.max(0, currentValue + velocity * 30),
            ninetyDays: Math.max(0, currentValue + velocity * 90),
        };
    }
    calculateNextRun(lastRun, frequency) {
        const next = new Date(lastRun);
        switch (frequency) {
            case 'daily':
                next.setDate(next.getDate() + 1);
                break;
            case 'weekly':
                next.setDate(next.getDate() + 7);
                break;
            case 'monthly':
                next.setMonth(next.getMonth() + 1);
                break;
            case 'quarterly':
                next.setMonth(next.getMonth() + 3);
                break;
        }
        return next;
    }
    detectSignificantChanges(previous, current) {
        const changes = [];
        const threshold = 0.1; // 10% change threshold
        const metricsToCheck = [
            { key: 'totalIssues', name: 'Total Issues' },
            { key: 'parserErrors', name: 'Parser Errors' },
            { key: 'explicitAnyErrors', name: 'Explicit Any Errors' },
            { key: 'qualityScore', name: 'Quality Score' },
        ];
        for (const metric of metricsToCheck) {
            const prevValue = this.getMetricValue(previous, metric.key);
            const currValue = this.getMetricValue(current, metric.key);
            if (prevValue > 0) {
                const changePercent = Math.abs((currValue - prevValue) / prevValue);
                if (changePercent > threshold) {
                    const direction = currValue > prevValue ? 'increased' : 'decreased';
                    changes.push(`${metric.name} ${direction} by ${(changePercent * 100).toFixed(1)}% (${prevValue} ‚Üí ${currValue})`);
                }
            }
            else if (currValue > 0) {
                changes.push(`${metric.name} appeared: ${currValue}`);
            }
        }
        return changes;
    }
    identifyCriticalIssues(metrics) {
        const issues = [];
        if (metrics.parserErrors > 0) {
            issues.push(`${metrics.parserErrors} parser errors blocking analysis`);
        }
        if (metrics.explicitAnyErrors > 200) {
            issues.push(`${metrics.explicitAnyErrors} explicit any errors (critical threshold exceeded)`);
        }
        if (metrics.performanceMetrics.lintingDuration > 60000) {
            issues.push(`Linting duration ${metrics.performanceMetrics.lintingDuration}ms (critical performance issue)`);
        }
        if (metrics.qualityScore < 50) {
            issues.push(`Quality score ${metrics.qualityScore}/100 (critically low)`);
        }
        return issues;
    }
    async updateRealTimeStatus(metrics) {
        const statusFile = (0, path_1.join)(this.dashboardDir, 'real-time-status.json');
        const status = {
            timestamp: new Date().toISOString(),
            status: this.getOverallStatusSimple(metrics),
            qualityScore: metrics.qualityScore,
            totalIssues: metrics.totalIssues,
            parserErrors: metrics.parserErrors,
            explicitAnyErrors: metrics.explicitAnyErrors,
            criticalIssues: this.identifyCriticalIssues(metrics).length,
        };
        (0, fs_1.writeFileSync)(statusFile, JSON.stringify(status, null, 2));
    }
    // UI Helper methods
    getOverallStatus(validationResult, qualityGates) {
        const failingGates = qualityGates.filter(g => g.status === 'failing' && g.blocksDeployment);
        if (failingGates.length > 0)
            return 'üö® CRITICAL';
        const warningGates = qualityGates.filter(g => g.status === 'warning');
        if (warningGates.length > 0)
            return '‚ö†Ô∏è WARNING';
        if (validationResult.metrics.qualityScore >= 90)
            return '‚úÖ EXCELLENT';
        if (validationResult.metrics.qualityScore >= 80)
            return 'üëç GOOD';
        return 'üìà IMPROVING';
    }
    getOverallStatusSimple(metrics) {
        if (metrics.parserErrors > 0)
            return 'critical';
        if (metrics.explicitAnyErrors > 200)
            return 'warning';
        if (metrics.qualityScore >= 90)
            return 'excellent';
        if (metrics.qualityScore >= 80)
            return 'good';
        return 'improving';
    }
    calculateOverallProgress(targets) {
        if (targets.length === 0)
            return 0;
        const totalProgress = targets.reduce((sum, target) => sum + target.progress, 0);
        return Math.round(totalProgress / targets.length);
    }
    getScoreIcon(score) {
        if (score >= 95)
            return 'üèÜ';
        if (score >= 90)
            return 'ü•á';
        if (score >= 80)
            return 'ü•à';
        if (score >= 70)
            return 'ü•â';
        return 'üìä';
    }
    getProgressBar(progress) {
        const filled = Math.round(progress / 10);
        const empty = 10 - filled;
        return '‚ñà'.repeat(filled) + '‚ñë'.repeat(empty);
    }
    getPriorityIcon(priority) {
        switch (priority) {
            case 'critical':
                return 'üö®';
            case 'high':
                return '‚ö°';
            case 'medium':
                return 'üìã';
            case 'low':
                return 'üìù';
            default:
                return 'üìã';
        }
    }
    getTrendIcon(trend) {
        switch (trend) {
            case 'improving':
                return 'üìà';
            case 'stable':
                return '‚û°Ô∏è';
            case 'degrading':
                return 'üìâ';
            default:
                return '‚û°Ô∏è';
        }
    }
    getGateStatusIcon(status) {
        switch (status) {
            case 'passing':
                return '‚úÖ';
            case 'warning':
                return '‚ö†Ô∏è';
            case 'failing':
                return '‚ùå';
            default:
                return '‚ùì';
        }
    }
    generateImmediateActions(metrics, targets, qualityGates) {
        const actions = [];
        if (metrics.parserErrors > 0) {
            actions.push('1. üö® **URGENT**: Fix parser errors immediately');
            actions.push('   - Run: `yarn tsc --noEmit` to identify syntax errors');
            actions.push('   - Focus on: src/utils/recommendationEngine.ts and other failing files');
        }
        const failingGates = qualityGates.filter(g => g.status === 'failing' && g.blocksDeployment);
        if (failingGates.length > 0) {
            actions.push(`2. üö´ **BLOCKING**: ${failingGates.length} quality gates failing`);
            for (const gate of failingGates) {
                actions.push(`   - ${gate.name}: ${gate.condition}`);
            }
        }
        if (metrics.explicitAnyErrors > 100) {
            actions.push('3. ‚ö° **HIGH PRIORITY**: Reduce explicit any errors');
            actions.push('   - Run: `yarn lint:campaign explicit-any`');
            actions.push('   - Target: Systematic type inference and interface generation');
        }
        if (actions.length === 0) {
            actions.push('‚úÖ No immediate critical actions required');
            actions.push('Continue with systematic improvement using `yarn lint:workflow-auto`');
        }
        return actions.join('\n');
    }
    generateNextSteps(metrics, targets, trends) {
        const steps = [];
        // Sort targets by priority and progress
        const sortedTargets = targets.sort((a, b) => {
            const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
            return priorityOrder[a.priority] - priorityOrder[b.priority] || a.progress - b.progress;
        });
        for (let i = 0; i < Math.min(5, sortedTargets.length); i++) {
            const target = sortedTargets[i];
            steps.push(`${i + 1}. **${target.metric}**: ${target.strategy}`);
            steps.push(`   - Progress: ${target.progress}% (${target.currentValue} ‚Üí ${target.targetValue})`);
            steps.push(`   - Deadline: ${target.deadline.toLocaleDateString()}`);
        }
        // Add trend-based recommendations
        const degradingTrends = trends.filter(t => t.trend === 'degrading' && t.confidence > 0.5);
        if (degradingTrends.length > 0) {
            steps.push('');
            steps.push('**Trend Alerts**:');
            for (const trend of degradingTrends) {
                steps.push(`- ${trend.metric} is degrading (${trend.velocity.toFixed(2)}/day) - investigate recent changes`);
            }
        }
        return steps.join('\n');
    }
}
exports.ZeroErrorAchievementDashboard = ZeroErrorAchievementDashboard;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2xpbnRpbmcvWmVyb0Vycm9yQWNoaWV2ZW1lbnREYXNoYm9hcmQudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7R0FNRzs7O0FBRUgsaURBQXlDO0FBQ3pDLDJCQUF3RTtBQUN4RSwrQkFBNEI7QUFFNUIsbUVBQWdFO0FBQ2hFLDZFQUtzQztBQXNEdEMsTUFBYSw2QkFBNkI7SUFDdkIsWUFBWSxHQUFHLGlCQUFpQixDQUFDO0lBQ2pDLFVBQVUsR0FBRyxlQUFlLENBQUM7SUFDN0IsVUFBVSxHQUFHLElBQUEsV0FBSSxFQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztJQUMvRCxXQUFXLEdBQUcsSUFBQSxXQUFJLEVBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO0lBQ2pFLFVBQVUsR0FBRyxJQUFBLFdBQUksRUFBQyxJQUFJLENBQUMsWUFBWSxFQUFFLHFCQUFxQixDQUFDLENBQUM7SUFDNUQsZ0JBQWdCLEdBQUcsSUFBQSxXQUFJLEVBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0lBRTFFLG1CQUFtQixDQUE2QjtJQUNoRCxjQUFjLENBQXdCO0lBQ3RDLHFCQUFxQixHQUFzQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBRTdFO1FBQ0UsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksdURBQTBCLEVBQUUsQ0FBQztRQUM1RCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksNkNBQXFCLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUMsK0JBQStCLEVBQUUsQ0FBQztRQUN2QyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENB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Q2hDLEtBQUssTUFBTSxLQUFLLElBQUksZUFBZSxFQUFFO2dCQUNuQyxLQUFLLENBQUMsSUFBSSxDQUNSLEtBQUssS0FBSyxDQUFDLE1BQU0sa0JBQWtCLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxvQ0FBb0MsQ0FDakcsQ0FBQzthQUNIO1NBQ0Y7UUFFRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUIsQ0FBQztDQUNGO0FBcGxDRCxzRUFvbENDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9iYWNrdXBzL2ZpcnN0LXdhdmUtMjAyNS0wOC0xMVQwNS0xOS0yNi04MTNaL3NyYy9zZXJ2aWNlcy9saW50aW5nL1plcm9FcnJvckFjaGlldmVtZW50RGFzaGJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogWmVyby1FcnJvciBBY2hpZXZlbWVudCBEYXNoYm9hcmRcbiAqXG4gKiBDb21wcmVoZW5zaXZlIG1vbml0b3Jpbmcgc3lzdGVtIGZvciBhY2hpZXZpbmcgYW5kIG1haW50YWluaW5nXG4gKiB6ZXJvIGxpbnRpbmcgZXJyb3JzIHdpdGggcmVhbC10aW1lIG1ldHJpY3MsIGFsZXJ0aW5nLCBhbmRcbiAqIGF1dG9tYXRlZCBtYWludGVuYW5jZSBwcm9jZWR1cmVzLlxuICovXG5cbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyB3cml0ZUZpbGVTeW5jLCByZWFkRmlsZVN5bmMsIGV4aXN0c1N5bmMsIG1rZGlyU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgTGludGluZ0FsZXJ0aW5nU3lzdGVtIH0gZnJvbSAnLi9MaW50aW5nQWxlcnRpbmdTeXN0ZW0nO1xuaW1wb3J0IHtcbiAgTGludGluZ1ZhbGlkYXRpb25EYXNoYm9hcmQsXG4gIExpbnRpbmdNZXRyaWNzLFxuICBBbGVydCxcbiAgVmFsaWRhdGlvblJlc3VsdCxcbn0gZnJvbSAnLi9MaW50aW5nVmFsaWRhdGlvbkRhc2hib2FyZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgWmVyb0Vycm9yVGFyZ2V0IHtcbiAgbWV0cmljOiBzdHJpbmc7XG4gIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICB0YXJnZXRWYWx1ZTogbnVtYmVyO1xuICBkZWFkbGluZTogRGF0ZTtcbiAgcHJpb3JpdHk6ICdjcml0aWNhbCcgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICBzdHJhdGVneTogc3RyaW5nO1xuICBwcm9ncmVzczogbnVtYmVyOyAvLyAwLTEwMCVcbiAgZXN0aW1hdGVkQ29tcGxldGlvbjogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYWludGVuYW5jZVByb2NlZHVyZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZnJlcXVlbmN5OiAnZGFpbHknIHwgJ3dlZWtseScgfCAnbW9udGhseScgfCAncXVhcnRlcmx5JztcbiAgbGFzdFJ1bjogRGF0ZSB8IG51bGw7XG4gIG5leHRSdW46IERhdGU7XG4gIGF1dG9tYXRlZDogYm9vbGVhbjtcbiAgcHJvY2VkdXJlOiAoKSA9PiBQcm9taXNlPE1haW50ZW5hbmNlUmVzdWx0Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYWludGVuYW5jZVJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIGlzc3Vlczogc3RyaW5nW107XG4gIGltcHJvdmVtZW50czogc3RyaW5nW107XG4gIG5leHRBY3Rpb25zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmVuZEFuYWx5c2lzIHtcbiAgbWV0cmljOiBzdHJpbmc7XG4gIHRyZW5kOiAnaW1wcm92aW5nJyB8ICdzdGFibGUnIHwgJ2RlZ3JhZGluZyc7XG4gIHZlbG9jaXR5OiBudW1iZXI7IC8vIGNoYW5nZSBwZXIgZGF5XG4gIHByb2plY3Rpb246IHtcbiAgICBzZXZlbkRheXM6IG51bWJlcjtcbiAgICB0aGlydHlEYXlzOiBudW1iZXI7XG4gICAgbmluZXR5RGF5czogbnVtYmVyO1xuICB9O1xuICBjb25maWRlbmNlOiBudW1iZXI7IC8vIDAtMVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1YWxpdHlHYXRlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBjb25kaXRpb246IHN0cmluZztcbiAgdGhyZXNob2xkOiBudW1iZXI7XG4gIHN0YXR1czogJ3Bhc3NpbmcnIHwgJ2ZhaWxpbmcnIHwgJ3dhcm5pbmcnO1xuICBibG9ja3NEZXBsb3ltZW50OiBib29sZWFuO1xuICBsYXN0Q2hlY2s6IERhdGU7XG59XG5cbmV4cG9ydCBjbGFzcyBaZXJvRXJyb3JBY2hpZXZlbWVudERhc2hib2FyZCB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZGFzaGJvYXJkRGlyID0gJy5raXJvL2Rhc2hib2FyZCc7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWV0cmljc0RpciA9ICcua2lyby9tZXRyaWNzJztcbiAgcHJpdmF0ZSByZWFkb25seSBjb25maWdGaWxlID0gam9pbih0aGlzLmRhc2hib2FyZERpciwgJ3plcm8tZXJyb3ItY29uZmlnLmpzb24nKTtcbiAgcHJpdmF0ZSByZWFkb25seSB0YXJnZXRzRmlsZSA9IGpvaW4odGhpcy5kYXNoYm9hcmREaXIsICd6ZXJvLWVycm9yLXRhcmdldHMuanNvbicpO1xuICBwcml2YXRlIHJlYWRvbmx5IHRyZW5kc0ZpbGUgPSBqb2luKHRoaXMuZGFzaGJvYXJkRGlyLCAndHJlbmQtYW5hbHlzaXMuanNvbicpO1xuICBwcml2YXRlIHJlYWRvbmx5IHF1YWxpdHlHYXRlc0ZpbGUgPSBqb2luKHRoaXMuZGFzaGJvYXJkRGlyLCAncXVhbGl0eS1nYXRlcy5qc29uJyk7XG5cbiAgcHJpdmF0ZSB2YWxpZGF0aW9uRGFzaGJvYXJkOiBMaW50aW5nVmFsaWRhdGlvbkRhc2hib2FyZDtcbiAgcHJpdmF0ZSBhbGVydGluZ1N5c3RlbTogTGludGluZ0FsZXJ0aW5nU3lzdGVtO1xuICBwcml2YXRlIG1haW50ZW5hbmNlUHJvY2VkdXJlczogTWFwPHN0cmluZywgTWFpbnRlbmFuY2VQcm9jZWR1cmU+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZW5zdXJlRGlyZWN0b3JpZXNFeGlzdCgpO1xuICAgIHRoaXMudmFsaWRhdGlvbkRhc2hib2FyZCA9IG5ldyBMaW50aW5nVmFsaWRhdGlvbkRhc2hib2FyZCgpO1xuICAgIHRoaXMuYWxlcnRpbmdTeXN0ZW0gPSBuZXcgTGludGluZ0FsZXJ0aW5nU3lzdGVtKCk7XG4gICAgdGhpcy5pbml0aWFsaXplTWFpbnRlbmFuY2VQcm9jZWR1cmVzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplUXVhbGl0eUdhdGVzKCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSB6ZXJvLWVycm9yIGFjaGlldmVtZW50IGRhc2hib2FyZFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVEYXNoYm9hcmQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ/Cfjq8gR2VuZXJhdGluZyBaZXJvLUVycm9yIEFjaGlldmVtZW50IERhc2hib2FyZC4uLlxcbicpO1xuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIENvbGxlY3QgY3VycmVudCBtZXRyaWNzXG4gICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRhdGlvbkRhc2hib2FyZC5ydW5Db21wcmVoZW5zaXZlVmFsaWRhdGlvbigpO1xuXG4gICAgLy8gQW5hbHl6ZSB0cmVuZHNcbiAgICBjb25zdCB0cmVuZEFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplVHJlbmRzKHZhbGlkYXRpb25SZXN1bHQubWV0cmljcyk7XG5cbiAgICAvLyBVcGRhdGUgdGFyZ2V0c1xuICAgIGNvbnN0IHRhcmdldHMgPSBhd2FpdCB0aGlzLnVwZGF0ZVRhcmdldHModmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzKTtcblxuICAgIC8vIENoZWNrIHF1YWxpdHkgZ2F0ZXNcbiAgICBjb25zdCBxdWFsaXR5R2F0ZXMgPSBhd2FpdCB0aGlzLmNoZWNrUXVhbGl0eUdhdGVzKHZhbGlkYXRpb25SZXN1bHQubWV0cmljcyk7XG5cbiAgICAvLyBSdW4gbWFpbnRlbmFuY2UgcHJvY2VkdXJlc1xuICAgIGNvbnN0IG1haW50ZW5hbmNlUmVzdWx0cyA9IGF3YWl0IHRoaXMucnVuU2NoZWR1bGVkTWFpbnRlbmFuY2UoKTtcblxuICAgIC8vIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcmVwb3J0XG4gICAgYXdhaXQgdGhpcy5nZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQoe1xuICAgICAgdmFsaWRhdGlvblJlc3VsdCxcbiAgICAgIHRyZW5kQW5hbHlzaXMsXG4gICAgICB0YXJnZXRzLFxuICAgICAgcXVhbGl0eUdhdGVzLFxuICAgICAgbWFpbnRlbmFuY2VSZXN1bHRzLFxuICAgICAgZ2VuZXJhdGlvblRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgfSk7XG5cbiAgICAvLyBQcm9jZXNzIGFsZXJ0c1xuICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmFsZXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmFsZXJ0aW5nU3lzdGVtLnByb2Nlc3NBbGVydHModmFsaWRhdGlvblJlc3VsdC5hbGVydHMsIHZhbGlkYXRpb25SZXN1bHQubWV0cmljcyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYOKchSBEYXNoYm9hcmQgZ2VuZXJhdGVkIGluICR7RGF0ZS5ub3coKSAtIHN0YXJ0VGltZX1tc2ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWwtdGltZSBtb25pdG9yaW5nIHdpdGggY29udGludW91cyB1cGRhdGVzXG4gICAqL1xuICBhc3luYyBzdGFydFJlYWxUaW1lTW9uaXRvcmluZyhpbnRlcnZhbE1pbnV0ZXM6IG51bWJlciA9IDUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZyhg8J+RgCBTdGFydGluZyByZWFsLXRpbWUgbW9uaXRvcmluZyAoJHtpbnRlcnZhbE1pbnV0ZXN9IG1pbnV0ZSBpbnRlcnZhbHMpLi4uXFxuYCk7XG5cbiAgICBsZXQgbGFzdE1ldHJpY3M6IExpbnRpbmdNZXRyaWNzIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdCBtb25pdG9yaW5nTG9vcCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnZhbGlkYXRpb25EYXNoYm9hcmQucnVuQ29tcHJlaGVuc2l2ZVZhbGlkYXRpb24oKTtcbiAgICAgICAgY29uc3QgY3VycmVudE1ldHJpY3MgPSB2YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3M7XG5cbiAgICAgICAgLy8gRGV0ZWN0IHNpZ25pZmljYW50IGNoYW5nZXNcbiAgICAgICAgaWYgKGxhc3RNZXRyaWNzKSB7XG4gICAgICAgICAgY29uc3Qgc2lnbmlmaWNhbnRDaGFuZ2VzID0gdGhpcy5kZXRlY3RTaWduaWZpY2FudENoYW5nZXMobGFzdE1ldHJpY3MsIGN1cnJlbnRNZXRyaWNzKTtcblxuICAgICAgICAgIGlmIChzaWduaWZpY2FudENoYW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFxcbuKaoO+4jyAgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gU2lnbmlmaWNhbnQgY2hhbmdlcyBkZXRlY3RlZDpgKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIHNpZ25pZmljYW50Q2hhbmdlcykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAgJHtjaGFuZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgaW1tZWRpYXRlIGRhc2hib2FyZCB1cGRhdGVcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVEYXNoYm9hcmQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgY3JpdGljYWwgaXNzdWVzXG4gICAgICAgIGNvbnN0IGNyaXRpY2FsSXNzdWVzID0gdGhpcy5pZGVudGlmeUNyaXRpY2FsSXNzdWVzKGN1cnJlbnRNZXRyaWNzKTtcbiAgICAgICAgaWYgKGNyaXRpY2FsSXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXFxu8J+aqCBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBDUklUSUNBTCBJU1NVRVM6YCk7XG4gICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBjcml0aWNhbElzc3Vlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCAgICR7aXNzdWV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHJlYWwtdGltZSBzdGF0dXNcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVSZWFsVGltZVN0YXR1cyhjdXJyZW50TWV0cmljcyk7XG5cbiAgICAgICAgbGFzdE1ldHJpY3MgPSBjdXJyZW50TWV0cmljcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBNb25pdG9yaW5nIGVycm9yOmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gSW5pdGlhbCBydW5cbiAgICBhd2FpdCBtb25pdG9yaW5nTG9vcCgpO1xuXG4gICAgLy8gU2NoZWR1bGUgcGVyaW9kaWMgcnVuc1xuICAgIHNldEludGVydmFsKG1vbml0b3JpbmdMb29wLCBpbnRlcnZhbE1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBSZWFsLXRpbWUgbW9uaXRvcmluZyBzdGFydGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSB0cmVuZHMgaW4gbGludGluZyBtZXRyaWNzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVUcmVuZHMoY3VycmVudE1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogUHJvbWlzZTxUcmVuZEFuYWx5c2lzW10+IHtcbiAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5sb2FkTWV0cmljc0hpc3RvcnkoKTtcblxuICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA8IDMpIHtcbiAgICAgIHJldHVybiBbXTsgLy8gTmVlZCBhdCBsZWFzdCAzIGRhdGEgcG9pbnRzIGZvciB0cmVuZCBhbmFseXNpc1xuICAgIH1cblxuICAgIGNvbnN0IHRyZW5kczogVHJlbmRBbmFseXNpc1tdID0gW107XG4gICAgY29uc3QgbWV0cmljc1RvQW5hbHl6ZSA9IFtcbiAgICAgICd0b3RhbElzc3VlcycsXG4gICAgICAnZXJyb3JzJyxcbiAgICAgICdwYXJzZXJFcnJvcnMnLFxuICAgICAgJ2V4cGxpY2l0QW55RXJyb3JzJyxcbiAgICAgICdxdWFsaXR5U2NvcmUnLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IG1ldHJpYyBvZiBtZXRyaWNzVG9BbmFseXplKSB7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBoaXN0b3J5LnNsaWNlKC0xMCkubWFwKGggPT4gdGhpcy5nZXRNZXRyaWNWYWx1ZShoLCBtZXRyaWMpKTtcbiAgICAgIGNvbnN0IHRyZW5kID0gdGhpcy5jYWxjdWxhdGVUcmVuZCh2YWx1ZXMpO1xuXG4gICAgICB0cmVuZHMucHVzaCh7XG4gICAgICAgIG1ldHJpYyxcbiAgICAgICAgdHJlbmQ6IHRyZW5kLmRpcmVjdGlvbixcbiAgICAgICAgdmVsb2NpdHk6IHRyZW5kLnZlbG9jaXR5LFxuICAgICAgICBwcm9qZWN0aW9uOiB0aGlzLnByb2plY3RGdXR1cmUodHJlbmQudmVsb2NpdHksIHRoaXMuZ2V0TWV0cmljVmFsdWUoY3VycmVudE1ldHJpY3MsIG1ldHJpYykpLFxuICAgICAgICBjb25maWRlbmNlOiB0cmVuZC5jb25maWRlbmNlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgdHJlbmQgYW5hbHlzaXNcbiAgICB3cml0ZUZpbGVTeW5jKHRoaXMudHJlbmRzRmlsZSwgSlNPTi5zdHJpbmdpZnkodHJlbmRzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdHJlbmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB6ZXJvLWVycm9yIHRhcmdldHMgYmFzZWQgb24gY3VycmVudCBwcm9ncmVzc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVUYXJnZXRzKGN1cnJlbnRNZXRyaWNzOiBMaW50aW5nTWV0cmljcyk6IFByb21pc2U8WmVyb0Vycm9yVGFyZ2V0W10+IHtcbiAgICBjb25zdCBleGlzdGluZ1RhcmdldHMgPSB0aGlzLmxvYWRUYXJnZXRzKCk7XG4gICAgY29uc3QgdXBkYXRlZFRhcmdldHM6IFplcm9FcnJvclRhcmdldFtdID0gW107XG5cbiAgICBjb25zdCBkZWZhdWx0VGFyZ2V0cyA9IFtcbiAgICAgIHtcbiAgICAgICAgbWV0cmljOiAncGFyc2VyRXJyb3JzJyxcbiAgICAgICAgdGFyZ2V0VmFsdWU6IDAsXG4gICAgICAgIGRlYWRsaW5lOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyAxIHdlZWtcbiAgICAgICAgcHJpb3JpdHk6ICdjcml0aWNhbCcgYXMgY29uc3QsXG4gICAgICAgIHN0cmF0ZWd5OiAnSW1tZWRpYXRlIHN5bnRheCBlcnJvciBmaXhlcyB3aXRoIFR5cGVTY3JpcHQgY29tcGlsZXIgdmFsaWRhdGlvbicsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBtZXRyaWM6ICdleHBsaWNpdEFueUVycm9ycycsXG4gICAgICAgIHRhcmdldFZhbHVlOiAwLFxuICAgICAgICBkZWFkbGluZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksIC8vIDEgbW9udGhcbiAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyBhcyBjb25zdCxcbiAgICAgICAgc3RyYXRlZ3k6ICdTeXN0ZW1hdGljIHR5cGUgaW5mZXJlbmNlIGFuZCBpbnRlcmZhY2UgZ2VuZXJhdGlvbicsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBtZXRyaWM6ICd0b3RhbElzc3VlcycsXG4gICAgICAgIHRhcmdldFZhbHVlOiA1MDAsXG4gICAgICAgIGRlYWRsaW5lOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgOTAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMyBtb250aHNcbiAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nIGFzIGNvbnN0LFxuICAgICAgICBzdHJhdGVneTogJ0NvbXByZWhlbnNpdmUgYXV0b21hdGVkIGZpeGluZyB3aXRoIGRvbWFpbi1zcGVjaWZpYyBwcmVzZXJ2YXRpb24nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbWV0cmljOiAncXVhbGl0eVNjb3JlJyxcbiAgICAgICAgdGFyZ2V0VmFsdWU6IDk1LFxuICAgICAgICBkZWFkbGluZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDYwICogMjQgKiA2MCAqIDYwICogMTAwMCksIC8vIDIgbW9udGhzXG4gICAgICAgIHByaW9yaXR5OiAnaGlnaCcgYXMgY29uc3QsXG4gICAgICAgIHN0cmF0ZWd5OiAnTXVsdGktcGhhc2UgcXVhbGl0eSBpbXByb3ZlbWVudCB3aXRoIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbicsXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IGRlZmF1bHRUYXJnZXQgb2YgZGVmYXVsdFRhcmdldHMpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0TWV0cmljVmFsdWUoY3VycmVudE1ldHJpY3MsIGRlZmF1bHRUYXJnZXQubWV0cmljKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nVGFyZ2V0ID0gZXhpc3RpbmdUYXJnZXRzLmZpbmQodCA9PiB0Lm1ldHJpYyA9PT0gZGVmYXVsdFRhcmdldC5tZXRyaWMpO1xuXG4gICAgICBjb25zdCBwcm9ncmVzcyA9IHRoaXMuY2FsY3VsYXRlUHJvZ3Jlc3MoXG4gICAgICAgIGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgZGVmYXVsdFRhcmdldC50YXJnZXRWYWx1ZSxcbiAgICAgICAgZGVmYXVsdFRhcmdldC5tZXRyaWMsXG4gICAgICApO1xuICAgICAgY29uc3QgZXN0aW1hdGVkQ29tcGxldGlvbiA9IHRoaXMuZXN0aW1hdGVDb21wbGV0aW9uKFxuICAgICAgICBjdXJyZW50VmFsdWUsXG4gICAgICAgIGRlZmF1bHRUYXJnZXQudGFyZ2V0VmFsdWUsXG4gICAgICAgIGRlZmF1bHRUYXJnZXQuZGVhZGxpbmUsXG4gICAgICApO1xuXG4gICAgICB1cGRhdGVkVGFyZ2V0cy5wdXNoKHtcbiAgICAgICAgLi4uZGVmYXVsdFRhcmdldCxcbiAgICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgICBwcm9ncmVzcyxcbiAgICAgICAgZXN0aW1hdGVkQ29tcGxldGlvbixcbiAgICAgICAgLi4uKGV4aXN0aW5nVGFyZ2V0ICYmIHsgZGVhZGxpbmU6IGV4aXN0aW5nVGFyZ2V0LmRlYWRsaW5lIH0pLCAvLyBQcmVzZXJ2ZSBjdXN0b20gZGVhZGxpbmVzXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSB1cGRhdGVkIHRhcmdldHNcbiAgICB3cml0ZUZpbGVTeW5jKHRoaXMudGFyZ2V0c0ZpbGUsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRUYXJnZXRzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXBkYXRlZFRhcmdldHM7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgcXVhbGl0eSBnYXRlcyBzdGF0dXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tRdWFsaXR5R2F0ZXMoY3VycmVudE1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogUHJvbWlzZTxRdWFsaXR5R2F0ZVtdPiB7XG4gICAgY29uc3QgZ2F0ZXM6IFF1YWxpdHlHYXRlW10gPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnbm8tcGFyc2VyLWVycm9ycycsXG4gICAgICAgIG5hbWU6ICdaZXJvIFBhcnNlciBFcnJvcnMnLFxuICAgICAgICBjb25kaXRpb246ICdwYXJzZXJFcnJvcnMgPT09IDAnLFxuICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgIHN0YXR1czogJ3Bhc3NpbmcnLFxuICAgICAgICBibG9ja3NEZXBsb3ltZW50OiB0cnVlLFxuICAgICAgICBsYXN0Q2hlY2s6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ2V4cGxpY2l0LWFueS1saW1pdCcsXG4gICAgICAgIG5hbWU6ICdFeHBsaWNpdCBBbnkgTGltaXQnLFxuICAgICAgICBjb25kaXRpb246ICdleHBsaWNpdEFueUVycm9ycyA8PSAxMDAnLFxuICAgICAgICB0aHJlc2hvbGQ6IDEwMCxcbiAgICAgICAgc3RhdHVzOiAncGFzc2luZycsXG4gICAgICAgIGJsb2Nrc0RlcGxveW1lbnQ6IHRydWUsXG4gICAgICAgIGxhc3RDaGVjazogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAncXVhbGl0eS1zY29yZS1taW5pbXVtJyxcbiAgICAgICAgbmFtZTogJ01pbmltdW0gUXVhbGl0eSBTY29yZScsXG4gICAgICAgIGNvbmRpdGlvbjogJ3F1YWxpdHlTY29yZSA+PSA4MCcsXG4gICAgICAgIHRocmVzaG9sZDogODAsXG4gICAgICAgIHN0YXR1czogJ3Bhc3NpbmcnLFxuICAgICAgICBibG9ja3NEZXBsb3ltZW50OiBmYWxzZSxcbiAgICAgICAgbGFzdENoZWNrOiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdwZXJmb3JtYW5jZS10aHJlc2hvbGQnLFxuICAgICAgICBuYW1lOiAnUGVyZm9ybWFuY2UgVGhyZXNob2xkJyxcbiAgICAgICAgY29uZGl0aW9uOiAnbGludGluZ0R1cmF0aW9uIDw9IDMwMDAwJyxcbiAgICAgICAgdGhyZXNob2xkOiAzMDAwMCxcbiAgICAgICAgc3RhdHVzOiAncGFzc2luZycsXG4gICAgICAgIGJsb2Nrc0RlcGxveW1lbnQ6IGZhbHNlLFxuICAgICAgICBsYXN0Q2hlY2s6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIF07XG5cbiAgICAvLyBFdmFsdWF0ZSBlYWNoIGdhdGVcbiAgICBmb3IgKGNvbnN0IGdhdGUgb2YgZ2F0ZXMpIHtcbiAgICAgIGNvbnN0IG1ldHJpY1ZhbHVlID0gdGhpcy5nZXRNZXRyaWNWYWx1ZShjdXJyZW50TWV0cmljcywgZ2F0ZS5jb25kaXRpb24uc3BsaXQoJyAnKVswXSk7XG5cbiAgICAgIHN3aXRjaCAoZ2F0ZS5pZCkge1xuICAgICAgICBjYXNlICduby1wYXJzZXItZXJyb3JzJzpcbiAgICAgICAgICBnYXRlLnN0YXR1cyA9IGN1cnJlbnRNZXRyaWNzLnBhcnNlckVycm9ycyA9PT0gMCA/ICdwYXNzaW5nJyA6ICdmYWlsaW5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZXhwbGljaXQtYW55LWxpbWl0JzpcbiAgICAgICAgICBnYXRlLnN0YXR1cyA9XG4gICAgICAgICAgICBjdXJyZW50TWV0cmljcy5leHBsaWNpdEFueUVycm9ycyA8PSAxMDBcbiAgICAgICAgICAgICAgPyAncGFzc2luZydcbiAgICAgICAgICAgICAgOiBjdXJyZW50TWV0cmljcy5leHBsaWNpdEFueUVycm9ycyA8PSAxNTBcbiAgICAgICAgICAgICAgICA/ICd3YXJuaW5nJ1xuICAgICAgICAgICAgICAgIDogJ2ZhaWxpbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdxdWFsaXR5LXNjb3JlLW1pbmltdW0nOlxuICAgICAgICAgIGdhdGUuc3RhdHVzID1cbiAgICAgICAgICAgIGN1cnJlbnRNZXRyaWNzLnF1YWxpdHlTY29yZSA+PSA4MFxuICAgICAgICAgICAgICA/ICdwYXNzaW5nJ1xuICAgICAgICAgICAgICA6IGN1cnJlbnRNZXRyaWNzLnF1YWxpdHlTY29yZSA+PSA3MFxuICAgICAgICAgICAgICAgID8gJ3dhcm5pbmcnXG4gICAgICAgICAgICAgICAgOiAnZmFpbGluZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BlcmZvcm1hbmNlLXRocmVzaG9sZCc6XG4gICAgICAgICAgZ2F0ZS5zdGF0dXMgPVxuICAgICAgICAgICAgY3VycmVudE1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmxpbnRpbmdEdXJhdGlvbiA8PSAzMDAwMFxuICAgICAgICAgICAgICA/ICdwYXNzaW5nJ1xuICAgICAgICAgICAgICA6IGN1cnJlbnRNZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nRHVyYXRpb24gPD0gNDUwMDBcbiAgICAgICAgICAgICAgICA/ICd3YXJuaW5nJ1xuICAgICAgICAgICAgICAgIDogJ2ZhaWxpbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3JlIHF1YWxpdHkgZ2F0ZXMgc3RhdHVzXG4gICAgd3JpdGVGaWxlU3luYyh0aGlzLnF1YWxpdHlHYXRlc0ZpbGUsIEpTT04uc3RyaW5naWZ5KGdhdGVzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gZ2F0ZXM7XG4gIH1cblxuICAvKipcbiAgICogUnVuIHNjaGVkdWxlZCBtYWludGVuYW5jZSBwcm9jZWR1cmVzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJ1blNjaGVkdWxlZE1haW50ZW5hbmNlKCk6IFByb21pc2U8TWFwPHN0cmluZywgTWFpbnRlbmFuY2VSZXN1bHQ+PiB7XG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBNYXA8c3RyaW5nLCBNYWludGVuYW5jZVJlc3VsdD4oKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4gICAgZm9yIChjb25zdCBbaWQsIHByb2NlZHVyZV0gb2YgdGhpcy5tYWludGVuYW5jZVByb2NlZHVyZXMpIHtcbiAgICAgIGlmIChwcm9jZWR1cmUuYXV0b21hdGVkICYmIG5vdyA+PSBwcm9jZWR1cmUubmV4dFJ1bikge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UpyBSdW5uaW5nIG1haW50ZW5hbmNlOiAke3Byb2NlZHVyZS5uYW1lfS4uLmApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvY2VkdXJlLnByb2NlZHVyZSgpO1xuICAgICAgICAgIHJlc3VsdHMuc2V0KGlkLCByZXN1bHQpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIG5leHQgcnVuIHRpbWVcbiAgICAgICAgICBwcm9jZWR1cmUubGFzdFJ1biA9IG5vdztcbiAgICAgICAgICBwcm9jZWR1cmUubmV4dFJ1biA9IHRoaXMuY2FsY3VsYXRlTmV4dFJ1bihub3csIHByb2NlZHVyZS5mcmVxdWVuY3kpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgICAgJHtyZXN1bHQuc3VjY2VzcyA/ICfinIUnIDogJ+KdjCd9ICR7cHJvY2VkdXJlLm5hbWV9ICgke3Jlc3VsdC5kdXJhdGlvbn1tcylgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgICAg4p2MICR7cHJvY2VkdXJlLm5hbWV9IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgcmVzdWx0cy5zZXQoaWQsIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICBpc3N1ZXM6IFsoZXJyb3IgYXMgRXJyb3IpLnRvU3RyaW5nKCldLFxuICAgICAgICAgICAgaW1wcm92ZW1lbnRzOiBbXSxcbiAgICAgICAgICAgIG5leHRBY3Rpb25zOiBbJ0ludmVzdGlnYXRlIG1haW50ZW5hbmNlIHByb2NlZHVyZSBmYWlsdXJlJ10sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIGRhc2hib2FyZCByZXBvcnRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0KGRhdGE6IHtcbiAgICB2YWxpZGF0aW9uUmVzdWx0OiBWYWxpZGF0aW9uUmVzdWx0O1xuICAgIHRyZW5kQW5hbHlzaXM6IFRyZW5kQW5hbHlzaXNbXTtcbiAgICB0YXJnZXRzOiBaZXJvRXJyb3JUYXJnZXRbXTtcbiAgICBxdWFsaXR5R2F0ZXM6IFF1YWxpdHlHYXRlW107XG4gICAgbWFpbnRlbmFuY2VSZXN1bHRzOiBNYXA8c3RyaW5nLCBNYWludGVuYW5jZVJlc3VsdD47XG4gICAgZ2VuZXJhdGlvblRpbWU6IG51bWJlcjtcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHJlcG9ydFBhdGggPSBqb2luKHRoaXMuZGFzaGJvYXJkRGlyLCAnemVyby1lcnJvci1hY2hpZXZlbWVudC1kYXNoYm9hcmQubWQnKTtcblxuICAgIGNvbnN0IHJlcG9ydCA9IGAjIPCfjq8gWmVyby1FcnJvciBBY2hpZXZlbWVudCBEYXNoYm9hcmRcblxuR2VuZXJhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX0gIFxuR2VuZXJhdGlvbiBUaW1lOiAke2RhdGEuZ2VuZXJhdGlvblRpbWV9bXNcblxuIyMg8J+TiiBFeGVjdXRpdmUgU3VtbWFyeVxuXG4tICoqT3ZlcmFsbCBTdGF0dXMqKjogJHt0aGlzLmdldE92ZXJhbGxTdGF0dXMoZGF0YS52YWxpZGF0aW9uUmVzdWx0LCBkYXRhLnF1YWxpdHlHYXRlcyl9XG4tICoqUXVhbGl0eSBTY29yZSoqOiAke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnF1YWxpdHlTY29yZX0vMTAwICR7dGhpcy5nZXRTY29yZUljb24oZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MucXVhbGl0eVNjb3JlKX1cbi0gKipaZXJvLUVycm9yIFByb2dyZXNzKio6ICR7dGhpcy5jYWxjdWxhdGVPdmVyYWxsUHJvZ3Jlc3MoZGF0YS50YXJnZXRzKX0lXG4tICoqUXVhbGl0eSBHYXRlcyoqOiAke2RhdGEucXVhbGl0eUdhdGVzLmZpbHRlcihnID0+IGcuc3RhdHVzID09PSAncGFzc2luZycpLmxlbmd0aH0vJHtkYXRhLnF1YWxpdHlHYXRlcy5sZW5ndGh9IHBhc3Npbmdcbi0gKipDcml0aWNhbCBJc3N1ZXMqKjogJHt0aGlzLmlkZW50aWZ5Q3JpdGljYWxJc3N1ZXMoZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MpLmxlbmd0aH1cblxuIyMg8J+OryBaZXJvLUVycm9yIFRhcmdldHNcblxuJHtkYXRhLnRhcmdldHNcbiAgLm1hcChcbiAgICB0YXJnZXQgPT4gYFxuIyMjICR7dGFyZ2V0Lm1ldHJpYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRhcmdldC5tZXRyaWMuc2xpY2UoMSl9XG4tICoqQ3VycmVudCoqOiAke3RhcmdldC5jdXJyZW50VmFsdWV9XG4tICoqVGFyZ2V0Kio6ICR7dGFyZ2V0LnRhcmdldFZhbHVlfVxuLSAqKlByb2dyZXNzKio6ICR7dGFyZ2V0LnByb2dyZXNzfSUgJHt0aGlzLmdldFByb2dyZXNzQmFyKHRhcmdldC5wcm9ncmVzcyl9XG4tICoqUHJpb3JpdHkqKjogJHt0YXJnZXQucHJpb3JpdHkudG9VcHBlckNhc2UoKX0gJHt0aGlzLmdldFByaW9yaXR5SWNvbih0YXJnZXQucHJpb3JpdHkpfVxuLSAqKkRlYWRsaW5lKio6ICR7dGFyZ2V0LmRlYWRsaW5lLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuLSAqKkVzdC4gQ29tcGxldGlvbioqOiAke3RhcmdldC5lc3RpbWF0ZWRDb21wbGV0aW9uLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuLSAqKlN0cmF0ZWd5Kio6ICR7dGFyZ2V0LnN0cmF0ZWd5fVxuYCxcbiAgKVxuICAuam9pbignJyl9XG5cbiMjIPCfk4ggVHJlbmQgQW5hbHlzaXNcblxuJHtcbiAgZGF0YS50cmVuZEFuYWx5c2lzLmxlbmd0aCA9PT0gMFxuICAgID8gJ0luc3VmZmljaWVudCBkYXRhIGZvciB0cmVuZCBhbmFseXNpcyAobmVlZCAzKyBkYXRhIHBvaW50cyknXG4gICAgOiBkYXRhLnRyZW5kQW5hbHlzaXNcbiAgICAgICAgLm1hcChcbiAgICAgICAgICB0cmVuZCA9PiBgXG4jIyMgJHt0cmVuZC5tZXRyaWN9XG4tICoqVHJlbmQqKjogJHt0cmVuZC50cmVuZC50b1VwcGVyQ2FzZSgpfSAke3RoaXMuZ2V0VHJlbmRJY29uKHRyZW5kLnRyZW5kKX1cbi0gKipWZWxvY2l0eSoqOiAke3RyZW5kLnZlbG9jaXR5LnRvRml4ZWQoMil9IHBlciBkYXlcbi0gKio3LWRheSBwcm9qZWN0aW9uKio6ICR7dHJlbmQucHJvamVjdGlvbi5zZXZlbkRheXMudG9GaXhlZCgwKX1cbi0gKiozMC1kYXkgcHJvamVjdGlvbioqOiAke3RyZW5kLnByb2plY3Rpb24udGhpcnR5RGF5cy50b0ZpeGVkKDApfVxuLSAqKkNvbmZpZGVuY2UqKjogJHsodHJlbmQuY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgwKX0lXG5gLFxuICAgICAgICApXG4gICAgICAgIC5qb2luKCcnKVxufVxuXG4jIyDwn5qmIFF1YWxpdHkgR2F0ZXNcblxuJHtkYXRhLnF1YWxpdHlHYXRlc1xuICAubWFwKFxuICAgIGdhdGUgPT4gYFxuIyMjICR7Z2F0ZS5uYW1lfVxuLSAqKlN0YXR1cyoqOiAke2dhdGUuc3RhdHVzLnRvVXBwZXJDYXNlKCl9ICR7dGhpcy5nZXRHYXRlU3RhdHVzSWNvbihnYXRlLnN0YXR1cyl9XG4tICoqQ29uZGl0aW9uKio6IFxcYCR7Z2F0ZS5jb25kaXRpb259XFxgXG4tICoqQmxvY2tzIERlcGxveW1lbnQqKjogJHtnYXRlLmJsb2Nrc0RlcGxveW1lbnQgPyAn8J+aqyBZRVMnIDogJ+KchSBOTyd9XG4tICoqTGFzdCBDaGVjayoqOiAke2dhdGUubGFzdENoZWNrLnRvTG9jYWxlU3RyaW5nKCl9XG5gLFxuICApXG4gIC5qb2luKCcnKX1cblxuIyMg8J+UjSBDdXJyZW50IE1ldHJpY3MgQnJlYWtkb3duXG5cbiMjIyBDcml0aWNhbCBJc3N1ZXNcbi0gKipQYXJzZXIgRXJyb3JzKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MucGFyc2VyRXJyb3JzfSAke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnBhcnNlckVycm9ycyA9PT0gMCA/ICfinIUnIDogJ/CfmqgnfVxuLSAqKlR5cGVTY3JpcHQgRXJyb3JzKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MuZXJyb3JzfVxuLSAqKkV4cGxpY2l0IEFueSBFcnJvcnMqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5leHBsaWNpdEFueUVycm9yc30gJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5leHBsaWNpdEFueUVycm9ycyA8IDEwMCA/ICfinIUnIDogJ+KaoSd9XG5cbiMjIyBDb2RlIFF1YWxpdHlcbi0gKipJbXBvcnQgT3JkZXIgSXNzdWVzKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MuaW1wb3J0T3JkZXJJc3N1ZXN9XG4tICoqVW51c2VkIFZhcmlhYmxlcyoqOiAke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnVudXNlZFZhcmlhYmxlc31cbi0gKipSZWFjdCBIb29rcyBJc3N1ZXMqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5yZWFjdEhvb2tzSXNzdWVzfVxuLSAqKkNvbnNvbGUgU3RhdGVtZW50cyoqOiAke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLmNvbnNvbGVTdGF0ZW1lbnRzfVxuXG4jIyMgRG9tYWluLVNwZWNpZmljXG4tICoqQXN0cm9sb2dpY2FsIENhbGN1bGF0aW9ucyoqOiAke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLmRvbWFpblNwZWNpZmljSXNzdWVzLmFzdHJvbG9naWNhbENhbGN1bGF0aW9uc31cbi0gKipDYW1wYWlnbiBTeXN0ZW0qKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5kb21haW5TcGVjaWZpY0lzc3Vlcy5jYW1wYWlnblN5c3RlbX1cbi0gKipUZXN0IEZpbGVzKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MuZG9tYWluU3BlY2lmaWNJc3N1ZXMudGVzdEZpbGVzfVxuXG4jIyMgUGVyZm9ybWFuY2Vcbi0gKipMaW50aW5nIER1cmF0aW9uKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmxpbnRpbmdEdXJhdGlvbn1tc1xuLSAqKkNhY2hlIEhpdCBSYXRlKio6ICR7KGRhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5jYWNoZUhpdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxuLSAqKk1lbW9yeSBVc2FnZSoqOiAke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5tZW1vcnlVc2FnZS50b0ZpeGVkKDEpfU1CXG4tICoqRmlsZXMgUHJvY2Vzc2VkKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmZpbGVzUHJvY2Vzc2VkfVxuXG4jIyDwn5qoIEFjdGl2ZSBBbGVydHNcblxuJHtcbiAgZGF0YS52YWxpZGF0aW9uUmVzdWx0LmFsZXJ0cy5sZW5ndGggPT09IDBcbiAgICA/ICfinIUgTm8gYWN0aXZlIGFsZXJ0cydcbiAgICA6IGRhdGEudmFsaWRhdGlvblJlc3VsdC5hbGVydHNcbiAgICAgICAgLm1hcChcbiAgICAgICAgICBhbGVydCA9PlxuICAgICAgICAgICAgYC0gKioke2FsZXJ0LnNldmVyaXR5LnRvVXBwZXJDYXNlKCl9Kio6ICR7YWxlcnQubWVzc2FnZX0gKCR7YWxlcnQuY3VycmVudFZhbHVlfS8ke2FsZXJ0LnRocmVzaG9sZH0pYCxcbiAgICAgICAgKVxuICAgICAgICAuam9pbignXFxuJylcbn1cblxuIyMg8J+UpyBNYWludGVuYW5jZSBTdGF0dXNcblxuJHtcbiAgZGF0YS5tYWludGVuYW5jZVJlc3VsdHMuc2l6ZSA9PT0gMFxuICAgID8gJ05vIG1haW50ZW5hbmNlIHByb2NlZHVyZXMgcnVuIHRoaXMgY3ljbGUnXG4gICAgOiBBcnJheS5mcm9tKGRhdGEubWFpbnRlbmFuY2VSZXN1bHRzLmVudHJpZXMoKSlcbiAgICAgICAgLm1hcChcbiAgICAgICAgICAoW2lkLCByZXN1bHRdKSA9PiBgXG4jIyMgJHt0aGlzLm1haW50ZW5hbmNlUHJvY2VkdXJlcy5nZXQoaWQpPy5uYW1lIHx8IGlkfVxuLSAqKlN0YXR1cyoqOiAke3Jlc3VsdC5zdWNjZXNzID8gJ+KchSBTVUNDRVNTJyA6ICfinYwgRkFJTEVEJ31cbi0gKipEdXJhdGlvbioqOiAke3Jlc3VsdC5kdXJhdGlvbn1tc1xuLSAqKklzc3VlcyoqOiAke3Jlc3VsdC5pc3N1ZXMubGVuZ3RoID09PSAwID8gJ05vbmUnIDogcmVzdWx0Lmlzc3Vlcy5qb2luKCcsICcpfVxuLSAqKkltcHJvdmVtZW50cyoqOiAke3Jlc3VsdC5pbXByb3ZlbWVudHMubGVuZ3RoID09PSAwID8gJ05vbmUnIDogcmVzdWx0LmltcHJvdmVtZW50cy5qb2luKCcsICcpfVxuYCxcbiAgICAgICAgKVxuICAgICAgICAuam9pbignJylcbn1cblxuIyMg8J+SoSBJbW1lZGlhdGUgQWN0aW9ucyBSZXF1aXJlZFxuXG4ke3RoaXMuZ2VuZXJhdGVJbW1lZGlhdGVBY3Rpb25zKGRhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLCBkYXRhLnRhcmdldHMsIGRhdGEucXVhbGl0eUdhdGVzKX1cblxuIyMg8J+TiyBOZXh0IFN0ZXBzIChQcmlvcml0eSBPcmRlcilcblxuJHt0aGlzLmdlbmVyYXRlTmV4dFN0ZXBzKGRhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLCBkYXRhLnRhcmdldHMsIGRhdGEudHJlbmRBbmFseXNpcyl9XG5cbiMjIPCfjq8gU3VjY2VzcyBNZXRyaWNzIERhc2hib2FyZFxuXG4jIyMgQ3VycmVudCB2cyBUYXJnZXRcbi0gKipQYXJzZXIgRXJyb3JzKio6ICR7ZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MucGFyc2VyRXJyb3JzfS8wICgke2RhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnBhcnNlckVycm9ycyA9PT0gMCA/ICfinIUgQUNISUVWRUQnIDogJ/Cfjq8gSU4gUFJPR1JFU1MnfSlcbi0gKipFeHBsaWNpdCBBbnkqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5leHBsaWNpdEFueUVycm9yc30vMCAoJHtNYXRoLnJvdW5kKCgxIC0gZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgLyBNYXRoLm1heChkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5leHBsaWNpdEFueUVycm9ycywgMTAwMCkpICogMTAwKX0lIHByb2dyZXNzKVxuLSAqKlF1YWxpdHkgU2NvcmUqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5xdWFsaXR5U2NvcmV9Lzk1ICgke01hdGgucm91bmQoKGRhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnF1YWxpdHlTY29yZSAvIDk1KSAqIDEwMCl9JSBwcm9ncmVzcylcbi0gKipUb3RhbCBJc3N1ZXMqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy50b3RhbElzc3Vlc30vNTAwICgke01hdGgucm91bmQoKDEgLSBkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy50b3RhbElzc3VlcyAvIE1hdGgubWF4KGRhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnRvdGFsSXNzdWVzLCAxMDAwMCkpICogMTAwKX0lIHByb2dyZXNzKVxuXG4jIyMgUGVyZm9ybWFuY2UgTWV0cmljc1xuLSAqKkxpbnRpbmcgU3BlZWQqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MubGludGluZ0R1cmF0aW9ufW1zICh0YXJnZXQ6IDwxNXMpXG4tICoqQ2FjaGUgRWZmaWNpZW5jeSoqOiAkeyhkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuY2FjaGVIaXRSYXRlICogMTAwKS50b0ZpeGVkKDEpfSUgKHRhcmdldDogPjg1JSlcbi0gKipNZW1vcnkgVXNhZ2UqKjogJHtkYXRhLnZhbGlkYXRpb25SZXN1bHQubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MubWVtb3J5VXNhZ2UudG9GaXhlZCgxKX1NQiAodGFyZ2V0OiA8MjU2TUIpXG5cbi0tLVxuXG4jIyDwn5SEIEF1dG9tYXRlZCBBY3Rpb25zIEF2YWlsYWJsZVxuXG4tICoqRml4IFBhcnNlciBFcnJvcnMqKjogXFxgeWFybiB0c2MgLS1ub0VtaXQgJiYgeWFybiBsaW50OmZpeFxcYFxuLSAqKkV4cGxpY2l0IEFueSBDYW1wYWlnbioqOiBcXGB5YXJuIGxpbnQ6Y2FtcGFpZ24gZXhwbGljaXQtYW55XFxgXG4tICoqSW1wb3J0IE9yZ2FuaXphdGlvbioqOiBcXGB5YXJuIGxpbnQ6Zml4IC0tcnVsZSBcImltcG9ydC9vcmRlclwiXFxgXG4tICoqUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uKio6IFxcYHlhcm4gbGludDpmYXN0IC0tY2FjaGVcXGBcbi0gKipDb21wcmVoZW5zaXZlIENsZWFudXAqKjogXFxgeWFybiBsaW50OndvcmtmbG93LWF1dG9cXGBcblxuIyMg8J+TiiBIaXN0b3JpY2FsIENvbnRleHRcblxuVGhpcyBkYXNoYm9hcmQgdHJhY2tzIHByb2dyZXNzIHRvd2FyZCB6ZXJvIGxpbnRpbmcgZXJyb3JzIHdpdGggZW5oYW5jZWQgRVNMaW50IGNvbmZpZ3VyYXRpb24gaW5jbHVkaW5nOlxuLSBSZWFjdCAxOSAmIE5leHQuanMgMTUgY29tcGF0aWJpbGl0eVxuLSBFbmhhbmNlZCBUeXBlU2NyaXB0IHN0cmljdCBydWxlc1xuLSBEb21haW4tc3BlY2lmaWMgY29uZmlndXJhdGlvbnMgZm9yIGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnNcbi0gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9ucyAoNjAtODAlIGltcHJvdmVtZW50KVxuLSBDb21wcmVoZW5zaXZlIHNhZmV0eSBwcm90b2NvbHNcblxuKipDb25maWd1cmF0aW9uIFN0YXR1cyoqOiDinIUgRW5oYW5jZWQgKEphbnVhcnkgMjAyNSkgIFxuKipQZXJmb3JtYW5jZSoqOiDinIUgT3B0aW1pemVkICg2MC04MCUgZmFzdGVyKSAgXG4qKkRvbWFpbiBSdWxlcyoqOiDinIUgSW1wbGVtZW50ZWQgKEFzdHJvbG9naWNhbCArIENhbXBhaWduKSAgXG4qKlNhZmV0eSBQcm90b2NvbHMqKjog4pyFIEVuaGFuY2VkIChCYWNrdXAgKyBSb2xsYmFjaylcblxuLS0tXG5cbipEYXNoYm9hcmQgYXV0by1nZW5lcmF0ZWQgYnkgWmVyby1FcnJvciBBY2hpZXZlbWVudCBTeXN0ZW0qICBcbipOZXh0IHVwZGF0ZTogJHtuZXcgRGF0ZShEYXRlLm5vdygpICsgNSAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKX0qXG5gO1xuXG4gICAgd3JpdGVGaWxlU3luYyhyZXBvcnRQYXRoLCByZXBvcnQsICd1dGY4Jyk7XG5cbiAgICAvLyBBbHNvIGdlbmVyYXRlIEpTT04gdmVyc2lvbiBmb3IgcHJvZ3JhbW1hdGljIGFjY2Vzc1xuICAgIGNvbnN0IGpzb25SZXBvcnQgPSB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGdlbmVyYXRpb25UaW1lOiBkYXRhLmdlbmVyYXRpb25UaW1lLFxuICAgICAgc3VtbWFyeToge1xuICAgICAgICBvdmVyYWxsU3RhdHVzOiB0aGlzLmdldE92ZXJhbGxTdGF0dXMoZGF0YS52YWxpZGF0aW9uUmVzdWx0LCBkYXRhLnF1YWxpdHlHYXRlcyksXG4gICAgICAgIHF1YWxpdHlTY29yZTogZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MucXVhbGl0eVNjb3JlLFxuICAgICAgICB6ZXJvRXJyb3JQcm9ncmVzczogdGhpcy5jYWxjdWxhdGVPdmVyYWxsUHJvZ3Jlc3MoZGF0YS50YXJnZXRzKSxcbiAgICAgICAgcXVhbGl0eUdhdGVzUGFzc2luZzogZGF0YS5xdWFsaXR5R2F0ZXMuZmlsdGVyKGcgPT4gZy5zdGF0dXMgPT09ICdwYXNzaW5nJykubGVuZ3RoLFxuICAgICAgICB0b3RhbFF1YWxpdHlHYXRlczogZGF0YS5xdWFsaXR5R2F0ZXMubGVuZ3RoLFxuICAgICAgICBjcml0aWNhbElzc3VlczogdGhpcy5pZGVudGlmeUNyaXRpY2FsSXNzdWVzKGRhdGEudmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzKS5sZW5ndGgsXG4gICAgICB9LFxuICAgICAgbWV0cmljczogZGF0YS52YWxpZGF0aW9uUmVzdWx0Lm1ldHJpY3MsXG4gICAgICB0YXJnZXRzOiBkYXRhLnRhcmdldHMsXG4gICAgICB0cmVuZHM6IGRhdGEudHJlbmRBbmFseXNpcyxcbiAgICAgIHF1YWxpdHlHYXRlczogZGF0YS5xdWFsaXR5R2F0ZXMsXG4gICAgICBhbGVydHM6IGRhdGEudmFsaWRhdGlvblJlc3VsdC5hbGVydHMsXG4gICAgICBtYWludGVuYW5jZTogT2JqZWN0LmZyb21FbnRyaWVzKGRhdGEubWFpbnRlbmFuY2VSZXN1bHRzKSxcbiAgICB9O1xuXG4gICAgd3JpdGVGaWxlU3luYyhcbiAgICAgIGpvaW4odGhpcy5kYXNoYm9hcmREaXIsICd6ZXJvLWVycm9yLWFjaGlldmVtZW50LWRhc2hib2FyZC5qc29uJyksXG4gICAgICBKU09OLnN0cmluZ2lmeShqc29uUmVwb3J0LCBudWxsLCAyKSxcbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coYPCfk4ogRGFzaGJvYXJkIHJlcG9ydCBnZW5lcmF0ZWQ6ICR7cmVwb3J0UGF0aH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1haW50ZW5hbmNlIHByb2NlZHVyZXNcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1haW50ZW5hbmNlUHJvY2VkdXJlcygpOiB2b2lkIHtcbiAgICAvLyBEYWlseSBwcm9jZWR1cmVzXG4gICAgdGhpcy5tYWludGVuYW5jZVByb2NlZHVyZXMuc2V0KCdkYWlseS1oZWFsdGgtY2hlY2snLCB7XG4gICAgICBpZDogJ2RhaWx5LWhlYWx0aC1jaGVjaycsXG4gICAgICBuYW1lOiAnRGFpbHkgSGVhbHRoIENoZWNrJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVpY2sgdmFsaWRhdGlvbiBvZiBwYXJzZXIgZXJyb3JzIGFuZCBjcml0aWNhbCBpc3N1ZXMnLFxuICAgICAgZnJlcXVlbmN5OiAnZGFpbHknLFxuICAgICAgbGFzdFJ1bjogbnVsbCxcbiAgICAgIG5leHRSdW46IG5ldyBEYXRlKCksXG4gICAgICBhdXRvbWF0ZWQ6IHRydWUsXG4gICAgICBwcm9jZWR1cmU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBpbXByb3ZlbWVudHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDaGVjayBmb3IgcGFyc2VyIGVycm9yc1xuICAgICAgICAgIGNvbnN0IHRzY091dHB1dCA9IGV4ZWNTeW5jKCd5YXJuIHRzYyAtLW5vRW1pdCAtLXNraXBMaWJDaGVjayAyPiYxIHx8IHRydWUnLCB7XG4gICAgICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHBhcnNlckVycm9ycyA9ICh0c2NPdXRwdXQubWF0Y2goL2Vycm9yIFRTL2cpIHx8IFtdKS5sZW5ndGg7XG5cbiAgICAgICAgICBpZiAocGFyc2VyRXJyb3JzID4gMCkge1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goYCR7cGFyc2VyRXJyb3JzfSBwYXJzZXIgZXJyb3JzIGRldGVjdGVkYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGltcHJvdmVtZW50cy5wdXNoKCdaZXJvIHBhcnNlciBlcnJvcnMgbWFpbnRhaW5lZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFF1aWNrIGxpbnQgY2hlY2tcbiAgICAgICAgICBjb25zdCBsaW50T3V0cHV0ID0gZXhlY1N5bmMoJ3lhcm4gbGludDpzdW1tYXJ5IDI+JjEgfHwgdHJ1ZScsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KTtcbiAgICAgICAgICBpZiAobGludE91dHB1dC5pbmNsdWRlcygnZXJyb3InKSkge1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goJ0xpbnRpbmcgZXJyb3JzIGRldGVjdGVkIGluIHN1bW1hcnkgY2hlY2snKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogaXNzdWVzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgICAgaXNzdWVzLFxuICAgICAgICAgICAgaW1wcm92ZW1lbnRzLFxuICAgICAgICAgICAgbmV4dEFjdGlvbnM6XG4gICAgICAgICAgICAgIGlzc3Vlcy5sZW5ndGggPiAwID8gWydSdW4gY29tcHJlaGVuc2l2ZSB2YWxpZGF0aW9uJywgJ0ZpeCBjcml0aWNhbCBpc3N1ZXMnXSA6IFtdLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgICBpc3N1ZXM6IFsoZXJyb3IgYXMgRXJyb3IpLnRvU3RyaW5nKCldLFxuICAgICAgICAgICAgaW1wcm92ZW1lbnRzOiBbXSxcbiAgICAgICAgICAgIG5leHRBY3Rpb25zOiBbJ0ludmVzdGlnYXRlIGhlYWx0aCBjaGVjayBmYWlsdXJlJ10sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFdlZWtseSBwcm9jZWR1cmVzXG4gICAgdGhpcy5tYWludGVuYW5jZVByb2NlZHVyZXMuc2V0KCd3ZWVrbHktY2FjaGUtb3B0aW1pemF0aW9uJywge1xuICAgICAgaWQ6ICd3ZWVrbHktY2FjaGUtb3B0aW1pemF0aW9uJyxcbiAgICAgIG5hbWU6ICdXZWVrbHkgQ2FjaGUgT3B0aW1pemF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2xlYXIgYW5kIHJlYnVpbGQgRVNMaW50IGNhY2hlIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlJyxcbiAgICAgIGZyZXF1ZW5jeTogJ3dlZWtseScsXG4gICAgICBsYXN0UnVuOiBudWxsLFxuICAgICAgbmV4dFJ1bjogbmV3IERhdGUoKSxcbiAgICAgIGF1dG9tYXRlZDogdHJ1ZSxcbiAgICAgIHByb2NlZHVyZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IGltcHJvdmVtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIENsZWFyIGNhY2hlXG4gICAgICAgICAgZXhlY1N5bmMoJ3JtIC1yZiAuZXNsaW50Y2FjaGUgLmVzbGludC10cy1jYWNoZS8nLCB7IHN0ZGlvOiAncGlwZScgfSk7XG4gICAgICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ0VTTGludCBjYWNoZSBjbGVhcmVkJyk7XG5cbiAgICAgICAgICAvLyBSZWJ1aWxkIGNhY2hlXG4gICAgICAgICAgZXhlY1N5bmMoJ3lhcm4gbGludDpmYXN0IC0tcXVpZXQnLCB7IHN0ZGlvOiAncGlwZScgfSk7XG4gICAgICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ0VTTGludCBjYWNoZSByZWJ1aWx0Jyk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgICAgaXNzdWVzLFxuICAgICAgICAgICAgaW1wcm92ZW1lbnRzLFxuICAgICAgICAgICAgbmV4dEFjdGlvbnM6IFtdLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaXNzdWVzLnB1c2goYENhY2hlIG9wdGltaXphdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgICBpc3N1ZXMsXG4gICAgICAgICAgICBpbXByb3ZlbWVudHMsXG4gICAgICAgICAgICBuZXh0QWN0aW9uczogWydNYW51YWwgY2FjaGUgY2xlYW51cCByZXF1aXJlZCddLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBNb250aGx5IHByb2NlZHVyZXNcbiAgICB0aGlzLm1haW50ZW5hbmNlUHJvY2VkdXJlcy5zZXQoJ21vbnRobHktbWV0cmljcy1jbGVhbnVwJywge1xuICAgICAgaWQ6ICdtb250aGx5LW1ldHJpY3MtY2xlYW51cCcsXG4gICAgICBuYW1lOiAnTW9udGhseSBNZXRyaWNzIENsZWFudXAnLFxuICAgICAgZGVzY3JpcHRpb246ICdDbGVhbiBvbGQgbWV0cmljcyBhbmQgb3B0aW1pemUgc3RvcmFnZScsXG4gICAgICBmcmVxdWVuY3k6ICdtb250aGx5JyxcbiAgICAgIGxhc3RSdW46IG51bGwsXG4gICAgICBuZXh0UnVuOiBuZXcgRGF0ZSgpLFxuICAgICAgYXV0b21hdGVkOiB0cnVlLFxuICAgICAgcHJvY2VkdXJlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgaW1wcm92ZW1lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQ2xlYW4gbWV0cmljcyBoaXN0b3J5IChrZWVwIGxhc3QgMTAwIGVudHJpZXMpXG4gICAgICAgICAgY29uc3QgbWV0cmljc0ZpbGUgPSBqb2luKHRoaXMubWV0cmljc0RpciwgJ2xpbnRpbmctbWV0cmljcy1oaXN0b3J5Lmpzb24nKTtcbiAgICAgICAgICBpZiAoZXhpc3RzU3luYyhtZXRyaWNzRmlsZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGhpc3RvcnkgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhtZXRyaWNzRmlsZSwgJ3V0ZjgnKSk7XG4gICAgICAgICAgICBpZiAoaGlzdG9yeS5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgICAgICAgY29uc3QgdHJpbW1lZCA9IGhpc3Rvcnkuc2xpY2UoLTEwMCk7XG4gICAgICAgICAgICAgIHdyaXRlRmlsZVN5bmMobWV0cmljc0ZpbGUsIEpTT04uc3RyaW5naWZ5KHRyaW1tZWQsIG51bGwsIDIpKTtcbiAgICAgICAgICAgICAgaW1wcm92ZW1lbnRzLnB1c2goYFRyaW1tZWQgbWV0cmljcyBoaXN0b3J5IHRvIDEwMCBlbnRyaWVzICh3YXMgJHtoaXN0b3J5Lmxlbmd0aH0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2xlYW4gYWxlcnQgaGlzdG9yeVxuICAgICAgICAgIGNvbnN0IGFsZXJ0c0ZpbGUgPSBqb2luKHRoaXMubWV0cmljc0RpciwgJ2FsZXJ0aW5nLWhpc3RvcnkuanNvbicpO1xuICAgICAgICAgIGlmIChleGlzdHNTeW5jKGFsZXJ0c0ZpbGUpKSB7XG4gICAgICAgICAgICBjb25zdCBhbGVydEhpc3RvcnkgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhhbGVydHNGaWxlLCAndXRmOCcpKTtcbiAgICAgICAgICAgIGlmIChhbGVydEhpc3RvcnkuYWxlcnRzICYmIGFsZXJ0SGlzdG9yeS5hbGVydHMubGVuZ3RoID4gNTAwKSB7XG4gICAgICAgICAgICAgIGFsZXJ0SGlzdG9yeS5hbGVydHMgPSBhbGVydEhpc3RvcnkuYWxlcnRzLnNsaWNlKC01MDApO1xuICAgICAgICAgICAgICB3cml0ZUZpbGVTeW5jKGFsZXJ0c0ZpbGUsIEpTT04uc3RyaW5naWZ5KGFsZXJ0SGlzdG9yeSwgbnVsbCwgMikpO1xuICAgICAgICAgICAgICBpbXByb3ZlbWVudHMucHVzaCgnVHJpbW1lZCBhbGVydCBoaXN0b3J5IHRvIDUwMCBlbnRyaWVzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgICAgIGlzc3VlcyxcbiAgICAgICAgICAgIGltcHJvdmVtZW50cyxcbiAgICAgICAgICAgIG5leHRBY3Rpb25zOiBbXSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKGBNZXRyaWNzIGNsZWFudXAgZmFpbGVkOiAke2Vycm9yfWApO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgICAgaXNzdWVzLFxuICAgICAgICAgICAgaW1wcm92ZW1lbnRzLFxuICAgICAgICAgICAgbmV4dEFjdGlvbnM6IFsnTWFudWFsIG1ldHJpY3MgY2xlYW51cCByZXF1aXJlZCddLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBxdWFsaXR5IGdhdGVzXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVRdWFsaXR5R2F0ZXMoKTogdm9pZCB7XG4gICAgaWYgKCFleGlzdHNTeW5jKHRoaXMucXVhbGl0eUdhdGVzRmlsZSkpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRHYXRlczogUXVhbGl0eUdhdGVbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbm8tcGFyc2VyLWVycm9ycycsXG4gICAgICAgICAgbmFtZTogJ1plcm8gUGFyc2VyIEVycm9ycycsXG4gICAgICAgICAgY29uZGl0aW9uOiAncGFyc2VyRXJyb3JzID09PSAwJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICAgICAgc3RhdHVzOiAncGFzc2luZycsXG4gICAgICAgICAgYmxvY2tzRGVwbG95bWVudDogdHJ1ZSxcbiAgICAgICAgICBsYXN0Q2hlY2s6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2V4cGxpY2l0LWFueS1saW1pdCcsXG4gICAgICAgICAgbmFtZTogJ0V4cGxpY2l0IEFueSBMaW1pdCcsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZXhwbGljaXRBbnlFcnJvcnMgPD0gMTAwJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDEwMCxcbiAgICAgICAgICBzdGF0dXM6ICdwYXNzaW5nJyxcbiAgICAgICAgICBibG9ja3NEZXBsb3ltZW50OiB0cnVlLFxuICAgICAgICAgIGxhc3RDaGVjazogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncXVhbGl0eS1zY29yZS1taW5pbXVtJyxcbiAgICAgICAgICBuYW1lOiAnTWluaW11bSBRdWFsaXR5IFNjb3JlJyxcbiAgICAgICAgICBjb25kaXRpb246ICdxdWFsaXR5U2NvcmUgPj0gODAnLFxuICAgICAgICAgIHRocmVzaG9sZDogODAsXG4gICAgICAgICAgc3RhdHVzOiAncGFzc2luZycsXG4gICAgICAgICAgYmxvY2tzRGVwbG95bWVudDogZmFsc2UsXG4gICAgICAgICAgbGFzdENoZWNrOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgd3JpdGVGaWxlU3luYyh0aGlzLnF1YWxpdHlHYXRlc0ZpbGUsIEpTT04uc3RyaW5naWZ5KGRlZmF1bHRHYXRlcywgbnVsbCwgMikpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzXG4gIHByaXZhdGUgZW5zdXJlRGlyZWN0b3JpZXNFeGlzdCgpOiB2b2lkIHtcbiAgICBjb25zdCBkaXJzID0gW3RoaXMuZGFzaGJvYXJkRGlyLCB0aGlzLm1ldHJpY3NEaXJdO1xuICAgIGZvciAoY29uc3QgZGlyIG9mIGRpcnMpIHtcbiAgICAgIGlmICghZXhpc3RzU3luYyhkaXIpKSB7XG4gICAgICAgIG1rZGlyU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZFRhcmdldHMoKTogWmVyb0Vycm9yVGFyZ2V0W10ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoZXhpc3RzU3luYyh0aGlzLnRhcmdldHNGaWxlKSkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmModGhpcy50YXJnZXRzRmlsZSwgJ3V0ZjgnKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgbG9hZGluZyB0YXJnZXRzOicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2FkTWV0cmljc0hpc3RvcnkoKTogTGludGluZ01ldHJpY3NbXSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhpc3RvcnlGaWxlID0gam9pbih0aGlzLm1ldHJpY3NEaXIsICdsaW50aW5nLW1ldHJpY3MtaGlzdG9yeS5qc29uJyk7XG4gICAgICBpZiAoZXhpc3RzU3luYyhoaXN0b3J5RmlsZSkpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVhZEZpbGVTeW5jKGhpc3RvcnlGaWxlLCAndXRmOCcpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdFcnJvciBsb2FkaW5nIG1ldHJpY3MgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TWV0cmljVmFsdWUobWV0cmljczogTGludGluZ01ldHJpY3MsIG1ldHJpY1BhdGg6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgcGFydHMgPSBtZXRyaWNQYXRoLnNwbGl0KCcuJyk7XG4gICAgbGV0IHZhbHVlOiBhbnkgPSBtZXRyaWNzO1xuXG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlPy5bcGFydF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyB2YWx1ZSA6IDA7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVByb2dyZXNzKGN1cnJlbnQ6IG51bWJlciwgdGFyZ2V0OiBudW1iZXIsIG1ldHJpYzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAobWV0cmljID09PSAncXVhbGl0eVNjb3JlJykge1xuICAgICAgcmV0dXJuIE1hdGgubWluKDEwMCwgKGN1cnJlbnQgLyB0YXJnZXQpICogMTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIGVycm9yIG1ldHJpY3MsIHByb2dyZXNzIGlzIHJlZHVjdGlvbiB0b3dhcmQgdGFyZ2V0XG4gICAgICBpZiAoY3VycmVudCA8PSB0YXJnZXQpIHJldHVybiAxMDA7XG4gICAgICBjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KGN1cnJlbnQsIHRhcmdldCAqIDEwKTsgLy8gQXNzdW1lIDEweCB0YXJnZXQgYXMgYmFzZWxpbmVcbiAgICAgIHJldHVybiBNYXRoLm1heCgwLCAoKG1heFZhbHVlIC0gY3VycmVudCkgLyAobWF4VmFsdWUgLSB0YXJnZXQpKSAqIDEwMCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlc3RpbWF0ZUNvbXBsZXRpb24oY3VycmVudDogbnVtYmVyLCB0YXJnZXQ6IG51bWJlciwgZGVhZGxpbmU6IERhdGUpOiBEYXRlIHtcbiAgICAvLyBTaW1wbGUgbGluZWFyIHByb2plY3Rpb24gYmFzZWQgb24gZGVhZGxpbmVcbiAgICBjb25zdCBwcm9ncmVzcyA9IHRoaXMuY2FsY3VsYXRlUHJvZ3Jlc3MoY3VycmVudCwgdGFyZ2V0LCAnZ2VuZXJpYycpO1xuICAgIGlmIChwcm9ncmVzcyA+PSAxMDApIHJldHVybiBuZXcgRGF0ZSgpOyAvLyBBbHJlYWR5IGFjaGlldmVkXG5cbiAgICBjb25zdCByZW1haW5pbmdQcm9ncmVzcyA9IDEwMCAtIHByb2dyZXNzO1xuICAgIGNvbnN0IHRpbWVUb0RlYWRsaW5lID0gZGVhZGxpbmUuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlc3RpbWF0ZWRUaW1lID0gKHRpbWVUb0RlYWRsaW5lICogcmVtYWluaW5nUHJvZ3Jlc3MpIC8gMTAwO1xuXG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUubm93KCkgKyBlc3RpbWF0ZWRUaW1lKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlVHJlbmQodmFsdWVzOiBudW1iZXJbXSk6IHtcbiAgICBkaXJlY3Rpb246ICdpbXByb3ZpbmcnIHwgJ3N0YWJsZScgfCAnZGVncmFkaW5nJztcbiAgICB2ZWxvY2l0eTogbnVtYmVyO1xuICAgIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgfSB7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPCAyKSB7XG4gICAgICByZXR1cm4geyBkaXJlY3Rpb246ICdzdGFibGUnLCB2ZWxvY2l0eTogMCwgY29uZmlkZW5jZTogMCB9O1xuICAgIH1cblxuICAgIC8vIFNpbXBsZSBsaW5lYXIgcmVncmVzc2lvblxuICAgIGNvbnN0IG4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGNvbnN0IHggPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuIH0sIChfLCBpKSA9PiBpKTtcbiAgICBjb25zdCBzdW1YID0geC5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICBjb25zdCBzdW1ZID0gdmFsdWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICAgIGNvbnN0IHN1bVhZID0geC5yZWR1Y2UoKHN1bSwgeGksIGkpID0+IHN1bSArIHhpICogdmFsdWVzW2ldLCAwKTtcbiAgICBjb25zdCBzdW1YWCA9IHgucmVkdWNlKChzdW0sIHhpKSA9PiBzdW0gKyB4aSAqIHhpLCAwKTtcblxuICAgIGNvbnN0IHNsb3BlID0gKG4gKiBzdW1YWSAtIHN1bVggKiBzdW1ZKSAvIChuICogc3VtWFggLSBzdW1YICogc3VtWCk7XG4gICAgY29uc3QgY29uZmlkZW5jZSA9IE1hdGgubWluKDEsIG4gLyAxMCk7IC8vIEhpZ2hlciBjb25maWRlbmNlIHdpdGggbW9yZSBkYXRhIHBvaW50c1xuXG4gICAgbGV0IGRpcmVjdGlvbjogJ2ltcHJvdmluZycgfCAnc3RhYmxlJyB8ICdkZWdyYWRpbmcnO1xuICAgIGlmIChNYXRoLmFicyhzbG9wZSkgPCAwLjEpIHtcbiAgICAgIGRpcmVjdGlvbiA9ICdzdGFibGUnO1xuICAgIH0gZWxzZSBpZiAoc2xvcGUgPCAwKSB7XG4gICAgICBkaXJlY3Rpb24gPSAnaW1wcm92aW5nJzsgLy8gTmVnYXRpdmUgc2xvcGUgbWVhbnMgZGVjcmVhc2luZyBlcnJvcnNcbiAgICB9IGVsc2Uge1xuICAgICAgZGlyZWN0aW9uID0gJ2RlZ3JhZGluZyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGlyZWN0aW9uLCB2ZWxvY2l0eTogc2xvcGUsIGNvbmZpZGVuY2UgfTtcbiAgfVxuXG4gIHByaXZhdGUgcHJvamVjdEZ1dHVyZShcbiAgICB2ZWxvY2l0eTogbnVtYmVyLFxuICAgIGN1cnJlbnRWYWx1ZTogbnVtYmVyLFxuICApOiB7IHNldmVuRGF5czogbnVtYmVyOyB0aGlydHlEYXlzOiBudW1iZXI7IG5pbmV0eURheXM6IG51bWJlciB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V2ZW5EYXlzOiBNYXRoLm1heCgwLCBjdXJyZW50VmFsdWUgKyB2ZWxvY2l0eSAqIDcpLFxuICAgICAgdGhpcnR5RGF5czogTWF0aC5tYXgoMCwgY3VycmVudFZhbHVlICsgdmVsb2NpdHkgKiAzMCksXG4gICAgICBuaW5ldHlEYXlzOiBNYXRoLm1heCgwLCBjdXJyZW50VmFsdWUgKyB2ZWxvY2l0eSAqIDkwKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVOZXh0UnVuKGxhc3RSdW46IERhdGUsIGZyZXF1ZW5jeTogc3RyaW5nKTogRGF0ZSB7XG4gICAgY29uc3QgbmV4dCA9IG5ldyBEYXRlKGxhc3RSdW4pO1xuICAgIHN3aXRjaCAoZnJlcXVlbmN5KSB7XG4gICAgICBjYXNlICdkYWlseSc6XG4gICAgICAgIG5leHQuc2V0RGF0ZShuZXh0LmdldERhdGUoKSArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dlZWtseSc6XG4gICAgICAgIG5leHQuc2V0RGF0ZShuZXh0LmdldERhdGUoKSArIDcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21vbnRobHknOlxuICAgICAgICBuZXh0LnNldE1vbnRoKG5leHQuZ2V0TW9udGgoKSArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3F1YXJ0ZXJseSc6XG4gICAgICAgIG5leHQuc2V0TW9udGgobmV4dC5nZXRNb250aCgpICsgMyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0U2lnbmlmaWNhbnRDaGFuZ2VzKHByZXZpb3VzOiBMaW50aW5nTWV0cmljcywgY3VycmVudDogTGludGluZ01ldHJpY3MpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY2hhbmdlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAwLjE7IC8vIDEwJSBjaGFuZ2UgdGhyZXNob2xkXG5cbiAgICBjb25zdCBtZXRyaWNzVG9DaGVjayA9IFtcbiAgICAgIHsga2V5OiAndG90YWxJc3N1ZXMnLCBuYW1lOiAnVG90YWwgSXNzdWVzJyB9LFxuICAgICAgeyBrZXk6ICdwYXJzZXJFcnJvcnMnLCBuYW1lOiAnUGFyc2VyIEVycm9ycycgfSxcbiAgICAgIHsga2V5OiAnZXhwbGljaXRBbnlFcnJvcnMnLCBuYW1lOiAnRXhwbGljaXQgQW55IEVycm9ycycgfSxcbiAgICAgIHsga2V5OiAncXVhbGl0eVNjb3JlJywgbmFtZTogJ1F1YWxpdHkgU2NvcmUnIH0sXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgbWV0cmljIG9mIG1ldHJpY3NUb0NoZWNrKSB7XG4gICAgICBjb25zdCBwcmV2VmFsdWUgPSB0aGlzLmdldE1ldHJpY1ZhbHVlKHByZXZpb3VzLCBtZXRyaWMua2V5KTtcbiAgICAgIGNvbnN0IGN1cnJWYWx1ZSA9IHRoaXMuZ2V0TWV0cmljVmFsdWUoY3VycmVudCwgbWV0cmljLmtleSk7XG5cbiAgICAgIGlmIChwcmV2VmFsdWUgPiAwKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZVBlcmNlbnQgPSBNYXRoLmFicygoY3VyclZhbHVlIC0gcHJldlZhbHVlKSAvIHByZXZWYWx1ZSk7XG4gICAgICAgIGlmIChjaGFuZ2VQZXJjZW50ID4gdGhyZXNob2xkKSB7XG4gICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gY3VyclZhbHVlID4gcHJldlZhbHVlID8gJ2luY3JlYXNlZCcgOiAnZGVjcmVhc2VkJztcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goXG4gICAgICAgICAgICBgJHttZXRyaWMubmFtZX0gJHtkaXJlY3Rpb259IGJ5ICR7KGNoYW5nZVBlcmNlbnQgKiAxMDApLnRvRml4ZWQoMSl9JSAoJHtwcmV2VmFsdWV9IOKGkiAke2N1cnJWYWx1ZX0pYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGN1cnJWYWx1ZSA+IDApIHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKGAke21ldHJpYy5uYW1lfSBhcHBlYXJlZDogJHtjdXJyVmFsdWV9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cblxuICBwcml2YXRlIGlkZW50aWZ5Q3JpdGljYWxJc3N1ZXMobWV0cmljczogTGludGluZ01ldHJpY3MpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKG1ldHJpY3MucGFyc2VyRXJyb3JzID4gMCkge1xuICAgICAgaXNzdWVzLnB1c2goYCR7bWV0cmljcy5wYXJzZXJFcnJvcnN9IHBhcnNlciBlcnJvcnMgYmxvY2tpbmcgYW5hbHlzaXNgKTtcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5leHBsaWNpdEFueUVycm9ycyA+IDIwMCkge1xuICAgICAgaXNzdWVzLnB1c2goYCR7bWV0cmljcy5leHBsaWNpdEFueUVycm9yc30gZXhwbGljaXQgYW55IGVycm9ycyAoY3JpdGljYWwgdGhyZXNob2xkIGV4Y2VlZGVkKWApO1xuICAgIH1cblxuICAgIGlmIChtZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nRHVyYXRpb24gPiA2MDAwMCkge1xuICAgICAgaXNzdWVzLnB1c2goXG4gICAgICAgIGBMaW50aW5nIGR1cmF0aW9uICR7bWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MubGludGluZ0R1cmF0aW9ufW1zIChjcml0aWNhbCBwZXJmb3JtYW5jZSBpc3N1ZSlgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAobWV0cmljcy5xdWFsaXR5U2NvcmUgPCA1MCkge1xuICAgICAgaXNzdWVzLnB1c2goYFF1YWxpdHkgc2NvcmUgJHttZXRyaWNzLnF1YWxpdHlTY29yZX0vMTAwIChjcml0aWNhbGx5IGxvdylgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVSZWFsVGltZVN0YXR1cyhtZXRyaWNzOiBMaW50aW5nTWV0cmljcyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXR1c0ZpbGUgPSBqb2luKHRoaXMuZGFzaGJvYXJkRGlyLCAncmVhbC10aW1lLXN0YXR1cy5qc29uJyk7XG4gICAgY29uc3Qgc3RhdHVzID0ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHRoaXMuZ2V0T3ZlcmFsbFN0YXR1c1NpbXBsZShtZXRyaWNzKSxcbiAgICAgIHF1YWxpdHlTY29yZTogbWV0cmljcy5xdWFsaXR5U2NvcmUsXG4gICAgICB0b3RhbElzc3VlczogbWV0cmljcy50b3RhbElzc3VlcyxcbiAgICAgIHBhcnNlckVycm9yczogbWV0cmljcy5wYXJzZXJFcnJvcnMsXG4gICAgICBleHBsaWNpdEFueUVycm9yczogbWV0cmljcy5leHBsaWNpdEFueUVycm9ycyxcbiAgICAgIGNyaXRpY2FsSXNzdWVzOiB0aGlzLmlkZW50aWZ5Q3JpdGljYWxJc3N1ZXMobWV0cmljcykubGVuZ3RoLFxuICAgIH07XG5cbiAgICB3cml0ZUZpbGVTeW5jKHN0YXR1c0ZpbGUsIEpTT04uc3RyaW5naWZ5KHN0YXR1cywgbnVsbCwgMikpO1xuICB9XG5cbiAgLy8gVUkgSGVscGVyIG1ldGhvZHNcbiAgcHJpdmF0ZSBnZXRPdmVyYWxsU3RhdHVzKFxuICAgIHZhbGlkYXRpb25SZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHQsXG4gICAgcXVhbGl0eUdhdGVzOiBRdWFsaXR5R2F0ZVtdLFxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGZhaWxpbmdHYXRlcyA9IHF1YWxpdHlHYXRlcy5maWx0ZXIoZyA9PiBnLnN0YXR1cyA9PT0gJ2ZhaWxpbmcnICYmIGcuYmxvY2tzRGVwbG95bWVudCk7XG4gICAgaWYgKGZhaWxpbmdHYXRlcy5sZW5ndGggPiAwKSByZXR1cm4gJ/CfmqggQ1JJVElDQUwnO1xuXG4gICAgY29uc3Qgd2FybmluZ0dhdGVzID0gcXVhbGl0eUdhdGVzLmZpbHRlcihnID0+IGcuc3RhdHVzID09PSAnd2FybmluZycpO1xuICAgIGlmICh3YXJuaW5nR2F0ZXMubGVuZ3RoID4gMCkgcmV0dXJuICfimqDvuI8gV0FSTklORyc7XG5cbiAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnF1YWxpdHlTY29yZSA+PSA5MCkgcmV0dXJuICfinIUgRVhDRUxMRU5UJztcbiAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5tZXRyaWNzLnF1YWxpdHlTY29yZSA+PSA4MCkgcmV0dXJuICfwn5GNIEdPT0QnO1xuICAgIHJldHVybiAn8J+TiCBJTVBST1ZJTkcnO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRPdmVyYWxsU3RhdHVzU2ltcGxlKG1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogc3RyaW5nIHtcbiAgICBpZiAobWV0cmljcy5wYXJzZXJFcnJvcnMgPiAwKSByZXR1cm4gJ2NyaXRpY2FsJztcbiAgICBpZiAobWV0cmljcy5leHBsaWNpdEFueUVycm9ycyA+IDIwMCkgcmV0dXJuICd3YXJuaW5nJztcbiAgICBpZiAobWV0cmljcy5xdWFsaXR5U2NvcmUgPj0gOTApIHJldHVybiAnZXhjZWxsZW50JztcbiAgICBpZiAobWV0cmljcy5xdWFsaXR5U2NvcmUgPj0gODApIHJldHVybiAnZ29vZCc7XG4gICAgcmV0dXJuICdpbXByb3ZpbmcnO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVPdmVyYWxsUHJvZ3Jlc3ModGFyZ2V0czogWmVyb0Vycm9yVGFyZ2V0W10pOiBudW1iZXIge1xuICAgIGlmICh0YXJnZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG4gICAgY29uc3QgdG90YWxQcm9ncmVzcyA9IHRhcmdldHMucmVkdWNlKChzdW0sIHRhcmdldCkgPT4gc3VtICsgdGFyZ2V0LnByb2dyZXNzLCAwKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0b3RhbFByb2dyZXNzIC8gdGFyZ2V0cy5sZW5ndGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTY29yZUljb24oc2NvcmU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKHNjb3JlID49IDk1KSByZXR1cm4gJ/Cfj4YnO1xuICAgIGlmIChzY29yZSA+PSA5MCkgcmV0dXJuICfwn6WHJztcbiAgICBpZiAoc2NvcmUgPj0gODApIHJldHVybiAn8J+liCc7XG4gICAgaWYgKHNjb3JlID49IDcwKSByZXR1cm4gJ/CfpYknO1xuICAgIHJldHVybiAn8J+Tiic7XG4gIH1cblxuICBwcml2YXRlIGdldFByb2dyZXNzQmFyKHByb2dyZXNzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGZpbGxlZCA9IE1hdGgucm91bmQocHJvZ3Jlc3MgLyAxMCk7XG4gICAgY29uc3QgZW1wdHkgPSAxMCAtIGZpbGxlZDtcbiAgICByZXR1cm4gJ+KWiCcucmVwZWF0KGZpbGxlZCkgKyAn4paRJy5yZXBlYXQoZW1wdHkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRQcmlvcml0eUljb24ocHJpb3JpdHk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChwcmlvcml0eSkge1xuICAgICAgY2FzZSAnY3JpdGljYWwnOlxuICAgICAgICByZXR1cm4gJ/CfmqgnO1xuICAgICAgY2FzZSAnaGlnaCc6XG4gICAgICAgIHJldHVybiAn4pqhJztcbiAgICAgIGNhc2UgJ21lZGl1bSc6XG4gICAgICAgIHJldHVybiAn8J+Tiyc7XG4gICAgICBjYXNlICdsb3cnOlxuICAgICAgICByZXR1cm4gJ/Cfk50nO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICfwn5OLJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFRyZW5kSWNvbih0cmVuZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRyZW5kKSB7XG4gICAgICBjYXNlICdpbXByb3ZpbmcnOlxuICAgICAgICByZXR1cm4gJ/Cfk4gnO1xuICAgICAgY2FzZSAnc3RhYmxlJzpcbiAgICAgICAgcmV0dXJuICfinqHvuI8nO1xuICAgICAgY2FzZSAnZGVncmFkaW5nJzpcbiAgICAgICAgcmV0dXJuICfwn5OJJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAn4p6h77iPJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEdhdGVTdGF0dXNJY29uKHN0YXR1czogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSAncGFzc2luZyc6XG4gICAgICAgIHJldHVybiAn4pyFJztcbiAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICByZXR1cm4gJ+KaoO+4jyc7XG4gICAgICBjYXNlICdmYWlsaW5nJzpcbiAgICAgICAgcmV0dXJuICfinYwnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICfinZMnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVJbW1lZGlhdGVBY3Rpb25zKFxuICAgIG1ldHJpY3M6IExpbnRpbmdNZXRyaWNzLFxuICAgIHRhcmdldHM6IFplcm9FcnJvclRhcmdldFtdLFxuICAgIHF1YWxpdHlHYXRlczogUXVhbGl0eUdhdGVbXSxcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBhY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKG1ldHJpY3MucGFyc2VyRXJyb3JzID4gMCkge1xuICAgICAgYWN0aW9ucy5wdXNoKCcxLiDwn5qoICoqVVJHRU5UKio6IEZpeCBwYXJzZXIgZXJyb3JzIGltbWVkaWF0ZWx5Jyk7XG4gICAgICBhY3Rpb25zLnB1c2goJyAgIC0gUnVuOiBgeWFybiB0c2MgLS1ub0VtaXRgIHRvIGlkZW50aWZ5IHN5bnRheCBlcnJvcnMnKTtcbiAgICAgIGFjdGlvbnMucHVzaCgnICAgLSBGb2N1cyBvbjogc3JjL3V0aWxzL3JlY29tbWVuZGF0aW9uRW5naW5lLnRzIGFuZCBvdGhlciBmYWlsaW5nIGZpbGVzJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZmFpbGluZ0dhdGVzID0gcXVhbGl0eUdhdGVzLmZpbHRlcihnID0+IGcuc3RhdHVzID09PSAnZmFpbGluZycgJiYgZy5ibG9ja3NEZXBsb3ltZW50KTtcbiAgICBpZiAoZmFpbGluZ0dhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFjdGlvbnMucHVzaChgMi4g8J+aqyAqKkJMT0NLSU5HKio6ICR7ZmFpbGluZ0dhdGVzLmxlbmd0aH0gcXVhbGl0eSBnYXRlcyBmYWlsaW5nYCk7XG4gICAgICBmb3IgKGNvbnN0IGdhdGUgb2YgZmFpbGluZ0dhdGVzKSB7XG4gICAgICAgIGFjdGlvbnMucHVzaChgICAgLSAke2dhdGUubmFtZX06ICR7Z2F0ZS5jb25kaXRpb259YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgPiAxMDApIHtcbiAgICAgIGFjdGlvbnMucHVzaCgnMy4g4pqhICoqSElHSCBQUklPUklUWSoqOiBSZWR1Y2UgZXhwbGljaXQgYW55IGVycm9ycycpO1xuICAgICAgYWN0aW9ucy5wdXNoKCcgICAtIFJ1bjogYHlhcm4gbGludDpjYW1wYWlnbiBleHBsaWNpdC1hbnlgJyk7XG4gICAgICBhY3Rpb25zLnB1c2goJyAgIC0gVGFyZ2V0OiBTeXN0ZW1hdGljIHR5cGUgaW5mZXJlbmNlIGFuZCBpbnRlcmZhY2UgZ2VuZXJhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWN0aW9ucy5wdXNoKCfinIUgTm8gaW1tZWRpYXRlIGNyaXRpY2FsIGFjdGlvbnMgcmVxdWlyZWQnKTtcbiAgICAgIGFjdGlvbnMucHVzaCgnQ29udGludWUgd2l0aCBzeXN0ZW1hdGljIGltcHJvdmVtZW50IHVzaW5nIGB5YXJuIGxpbnQ6d29ya2Zsb3ctYXV0b2AnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9ucy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVOZXh0U3RlcHMoXG4gICAgbWV0cmljczogTGludGluZ01ldHJpY3MsXG4gICAgdGFyZ2V0czogWmVyb0Vycm9yVGFyZ2V0W10sXG4gICAgdHJlbmRzOiBUcmVuZEFuYWx5c2lzW10sXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3Qgc3RlcHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBTb3J0IHRhcmdldHMgYnkgcHJpb3JpdHkgYW5kIHByb2dyZXNzXG4gICAgY29uc3Qgc29ydGVkVGFyZ2V0cyA9IHRhcmdldHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgcHJpb3JpdHlPcmRlciA9IHsgY3JpdGljYWw6IDAsIGhpZ2g6IDEsIG1lZGl1bTogMiwgbG93OiAzIH07XG4gICAgICByZXR1cm4gcHJpb3JpdHlPcmRlclthLnByaW9yaXR5XSAtIHByaW9yaXR5T3JkZXJbYi5wcmlvcml0eV0gfHwgYS5wcm9ncmVzcyAtIGIucHJvZ3Jlc3M7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKDUsIHNvcnRlZFRhcmdldHMubGVuZ3RoKTsgaSsrKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBzb3J0ZWRUYXJnZXRzW2ldO1xuICAgICAgc3RlcHMucHVzaChgJHtpICsgMX0uICoqJHt0YXJnZXQubWV0cmljfSoqOiAke3RhcmdldC5zdHJhdGVneX1gKTtcbiAgICAgIHN0ZXBzLnB1c2goXG4gICAgICAgIGAgICAtIFByb2dyZXNzOiAke3RhcmdldC5wcm9ncmVzc30lICgke3RhcmdldC5jdXJyZW50VmFsdWV9IOKGkiAke3RhcmdldC50YXJnZXRWYWx1ZX0pYCxcbiAgICAgICk7XG4gICAgICBzdGVwcy5wdXNoKGAgICAtIERlYWRsaW5lOiAke3RhcmdldC5kZWFkbGluZS50b0xvY2FsZURhdGVTdHJpbmcoKX1gKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdHJlbmQtYmFzZWQgcmVjb21tZW5kYXRpb25zXG4gICAgY29uc3QgZGVncmFkaW5nVHJlbmRzID0gdHJlbmRzLmZpbHRlcih0ID0+IHQudHJlbmQgPT09ICdkZWdyYWRpbmcnICYmIHQuY29uZmlkZW5jZSA+IDAuNSk7XG4gICAgaWYgKGRlZ3JhZGluZ1RyZW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICBzdGVwcy5wdXNoKCcnKTtcbiAgICAgIHN0ZXBzLnB1c2goJyoqVHJlbmQgQWxlcnRzKio6Jyk7XG4gICAgICBmb3IgKGNvbnN0IHRyZW5kIG9mIGRlZ3JhZGluZ1RyZW5kcykge1xuICAgICAgICBzdGVwcy5wdXNoKFxuICAgICAgICAgIGAtICR7dHJlbmQubWV0cmljfSBpcyBkZWdyYWRpbmcgKCR7dHJlbmQudmVsb2NpdHkudG9GaXhlZCgyKX0vZGF5KSAtIGludmVzdGlnYXRlIHJlY2VudCBjaGFuZ2VzYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RlcHMuam9pbignXFxuJyk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==