aefd622c5b949684c8fb5acbd592a5ed
"use strict";
/**
 * Algorithm Performance Validator Tests
 * Perfect Codebase Campaign - Phase 4 Implementation Tests
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock external dependencies
jest.mock('fs');
const AlgorithmPerformanceValidator_1 = require("./AlgorithmPerformanceValidator");
const fs = __importStar(require("fs"));
const mockFs = fs;
describe('AlgorithmPerformanceValidator', () => {
    let validator;
    beforeEach(() => {
        validator = new AlgorithmPerformanceValidator_1.AlgorithmPerformanceValidator();
        jest.clearAllMocks();
    });
    describe('runPerformanceBenchmarks', () => {
        it('should run comprehensive performance benchmarks', async () => {
            const benchmarks = await validator.runPerformanceBenchmarks();
            expect(benchmarks.length).toBeGreaterThan(0);
            // Check that all categories are represented
            const categories = benchmarks.map(b => b.category);
            expect(categories).toContain('algorithm');
            expect(categories).toContain('cache');
            expect(categories).toContain('database');
            expect(categories).toContain('api');
            expect(categories).toContain('ui');
            // Check benchmark structure
            const firstBenchmark = benchmarks[0];
            expect(firstBenchmark).toHaveProperty('name');
            expect(firstBenchmark).toHaveProperty('category');
            expect(firstBenchmark).toHaveProperty('baseline');
            expect(firstBenchmark).toHaveProperty('current');
            expect(firstBenchmark).toHaveProperty('improvement');
            expect(firstBenchmark).toHaveProperty('target');
            expect(firstBenchmark).toHaveProperty('status');
            expect(firstBenchmark).toHaveProperty('samples');
            expect(firstBenchmark).toHaveProperty('timestamp');
            // Check that samples are arrays of numbers
            expect(Array.isArray(firstBenchmark.samples)).toBe(true);
            expect(firstBenchmark.samples.length).toBeGreaterThan(0);
            expect(typeof firstBenchmark.samples[0]).toBe('number');
        });
        it('should calculate performance improvements correctly', async () => {
            const benchmarks = await validator.runPerformanceBenchmarks();
            for (const benchmark of benchmarks) {
                expect(benchmark.improvement).toBeGreaterThanOrEqual(0);
                expect(benchmark.improvement).toBeLessThanOrEqual(1);
                // Improvement should be calculated as (baseline - current) / baseline
                const expectedImprovement = Math.max(0, (benchmark.baseline - benchmark.current) / benchmark.baseline);
                expect(Math.abs(benchmark.improvement - expectedImprovement)).toBeLessThan(0.001);
            }
        });
        it('should set correct benchmark status', async () => {
            const benchmarks = await validator.runPerformanceBenchmarks();
            for (const benchmark of benchmarks) {
                if (benchmark.current <= benchmark.target) {
                    expect(benchmark.status).toBe('passing');
                }
                else if (benchmark.current <= benchmark.baseline) {
                    expect(benchmark.status).toBe('degraded');
                }
                else {
                    expect(benchmark.status).toBe('failing');
                }
            }
        });
    });
    describe('validateCachePerformance', () => {
        it('should validate 3-tier caching system', async () => {
            const cacheMetrics = await validator.validateCachePerformance();
            expect(cacheMetrics).toHaveProperty('tier1');
            expect(cacheMetrics).toHaveProperty('tier2');
            expect(cacheMetrics).toHaveProperty('tier3');
            expect(cacheMetrics).toHaveProperty('overall');
            // Check tier 1 (memory cache)
            expect(cacheMetrics.tier1.name).toBe('memory');
            expect(cacheMetrics.tier1.hitRate).toBeGreaterThanOrEqual(0);
            expect(cacheMetrics.tier1.hitRate).toBeLessThanOrEqual(1);
            expect(cacheMetrics.tier1.avgResponseTime).toBeGreaterThan(0);
            // Check tier 2 (Redis cache)
            expect(cacheMetrics.tier2.name).toBe('redis');
            expect(cacheMetrics.tier2.hitRate).toBeGreaterThanOrEqual(0);
            expect(cacheMetrics.tier2.hitRate).toBeLessThanOrEqual(1);
            expect(cacheMetrics.tier2.avgResponseTime).toBeGreaterThan(0);
            // Check tier 3 (database cache)
            expect(cacheMetrics.tier3.name).toBe('database');
            expect(cacheMetrics.tier3.hitRate).toBeGreaterThanOrEqual(0);
            expect(cacheMetrics.tier3.hitRate).toBeLessThanOrEqual(1);
            expect(cacheMetrics.tier3.avgResponseTime).toBeGreaterThan(0);
            // Check overall metrics
            expect(cacheMetrics.overall.hitRate).toBeGreaterThanOrEqual(0);
            expect(cacheMetrics.overall.hitRate).toBeLessThanOrEqual(1);
            expect(cacheMetrics.overall.avgResponseTime).toBeGreaterThan(0);
            expect(cacheMetrics.overall.efficiency).toBeGreaterThanOrEqual(0);
            expect(cacheMetrics.overall.efficiency).toBeLessThanOrEqual(100);
        });
        it('should generate cache performance alerts when hit rate is low', async () => {
            // Mock low cache performance
            const mockValidateMemoryCache = jest.spyOn(validator, 'validateMemoryCache');
            mockValidateMemoryCache.mockResolvedValue({
                name: 'memory',
                hitRate: 0.5,
                avgResponseTime: 5,
                size: 50,
                maxSize: 100
            });
            await validator.validateCachePerformance();
            const alerts = validator.getCurrentAlerts();
            const cacheAlert = alerts.find(alert => alert.type === 'cache_miss');
            expect(cacheAlert).toBeDefined();
            expect(cacheAlert === null || cacheAlert === void 0 ? void 0 : cacheAlert.message).toContain('hit rate');
            mockValidateMemoryCache.mockRestore();
        });
    });
    describe('detectPerformanceRegressions', () => {
        it('should detect performance regressions', async () => {
            // First, run benchmarks to establish baseline
            await validator.runPerformanceBenchmarks();
            // Mock degraded performance for second run
            const mockRunAlgorithmBenchmark = jest.spyOn(validator, 'runAlgorithmBenchmark');
            mockRunAlgorithmBenchmark.mockResolvedValue([200, 210, 205, 195, 200]); // Slower performance
            // Run benchmarks again
            await validator.runPerformanceBenchmarks();
            const regressionTests = await validator.detectPerformanceRegressions();
            expect(regressionTests.length).toBeGreaterThan(0);
            const regressionTest = regressionTests[0];
            expect(regressionTest).toHaveProperty('testName');
            expect(regressionTest).toHaveProperty('category');
            expect(regressionTest).toHaveProperty('previousPerformance');
            expect(regressionTest).toHaveProperty('currentPerformance');
            expect(regressionTest).toHaveProperty('regressionDetected');
            expect(regressionTest).toHaveProperty('regressionPercentage');
            expect(regressionTest).toHaveProperty('threshold');
            expect(regressionTest).toHaveProperty('recommendations');
            mockRunAlgorithmBenchmark.mockRestore();
        });
        it('should not detect regression when performance improves', async () => {
            // First, run benchmarks to establish baseline
            await validator.runPerformanceBenchmarks();
            // Mock improved performance for all benchmark types
            const mockRunAlgorithmBenchmark = jest.spyOn(validator, 'runAlgorithmBenchmark');
            const mockRunCacheBenchmark = jest.spyOn(validator, 'runCacheBenchmark');
            const mockRunDatabaseBenchmark = jest.spyOn(validator, 'runDatabaseBenchmark');
            const mockRunApiBenchmark = jest.spyOn(validator, 'runApiBenchmark');
            const mockRunUiBenchmark = jest.spyOn(validator, 'runUiBenchmark');
            mockRunAlgorithmBenchmark.mockResolvedValue([30, 35, 32, 28, 30]); // Better performance
            mockRunCacheBenchmark.mockResolvedValue([2, 2.5, 2.2, 1.8, 2]); // Better performance
            mockRunDatabaseBenchmark.mockResolvedValue([80, 85, 82, 78, 80]); // Better performance
            mockRunApiBenchmark.mockResolvedValue([150, 155, 152, 148, 150]); // Better performance
            mockRunUiBenchmark.mockResolvedValue([20, 25, 22, 18, 20]); // Better performance
            // Run benchmarks again
            await validator.runPerformanceBenchmarks();
            const regressionTests = await validator.detectPerformanceRegressions();
            // Should have tests but no regressions detected (or very few due to randomness)
            const regressionsDetected = regressionTests.filter(t => t.regressionDetected);
            expect(regressionsDetected.length).toBeLessThanOrEqual(2); // Allow for some randomness in mock data
            mockRunAlgorithmBenchmark.mockRestore();
            mockRunCacheBenchmark.mockRestore();
            mockRunDatabaseBenchmark.mockRestore();
            mockRunApiBenchmark.mockRestore();
            mockRunUiBenchmark.mockRestore();
        });
        it('should generate alerts for detected regressions', async () => {
            // First, run benchmarks
            await validator.runPerformanceBenchmarks();
            // Mock significantly degraded performance
            const mockRunAlgorithmBenchmark = jest.spyOn(validator, 'runAlgorithmBenchmark');
            mockRunAlgorithmBenchmark.mockResolvedValue([300, 310, 305, 295, 300]); // Much slower
            // Run benchmarks again
            await validator.runPerformanceBenchmarks();
            await validator.detectPerformanceRegressions();
            const alerts = validator.getCurrentAlerts();
            const regressionAlert = alerts.find(alert => alert.type === 'regression');
            expect(regressionAlert).toBeDefined();
            expect(regressionAlert === null || regressionAlert === void 0 ? void 0 : regressionAlert.message).toContain('regression detected');
            mockRunAlgorithmBenchmark.mockRestore();
        });
    });
    describe('validateImprovementMaintenance', () => {
        it('should validate 50% improvement maintenance', async () => {
            // Run benchmarks to populate history
            await validator.runPerformanceBenchmarks();
            const improvementMaintained = await validator.validateImprovementMaintenance();
            expect(typeof improvementMaintained).toBe('boolean');
        });
        it('should return false when no benchmark history exists', async () => {
            const improvementMaintained = await validator.validateImprovementMaintenance();
            expect(improvementMaintained).toBe(false);
        });
        it('should generate alert when improvement is below target', async () => {
            // Mock poor performance benchmarks
            const mockBenchmarkAlgorithms = jest.spyOn(validator, 'benchmarkAlgorithms');
            mockBenchmarkAlgorithms.mockResolvedValue([
                {
                    name: 'test_algorithm',
                    category: 'algorithm',
                    baseline: 100,
                    current: 95,
                    improvement: 0.05,
                    target: 50,
                    status: 'failing',
                    samples: [95],
                    timestamp: new Date()
                }
            ]);
            await validator.runPerformanceBenchmarks();
            await validator.validateImprovementMaintenance();
            const alerts = validator.getCurrentAlerts();
            const improvementAlert = alerts.find(alert => alert.type === 'slow_algorithm');
            expect(improvementAlert).toBeDefined();
            expect(improvementAlert === null || improvementAlert === void 0 ? void 0 : improvementAlert.message).toContain('improvement below target');
            mockBenchmarkAlgorithms.mockRestore();
        });
    });
    describe('generatePerformanceReport', () => {
        it('should generate comprehensive performance report', async () => {
            const report = await validator.generatePerformanceReport();
            expect(report).toHaveProperty('timestamp');
            expect(report).toHaveProperty('benchmarks');
            expect(report).toHaveProperty('cacheMetrics');
            expect(report).toHaveProperty('regressionTests');
            expect(report).toHaveProperty('overallScore');
            expect(report).toHaveProperty('improvementMaintained');
            expect(report).toHaveProperty('recommendations');
            expect(report).toHaveProperty('alerts');
            expect(report.timestamp).toBeInstanceOf(Date);
            expect(Array.isArray(report.benchmarks)).toBe(true);
            expect(Array.isArray(report.regressionTests)).toBe(true);
            expect(Array.isArray(report.recommendations)).toBe(true);
            expect(Array.isArray(report.alerts)).toBe(true);
            expect(typeof report.overallScore).toBe('number');
            expect(report.overallScore).toBeGreaterThanOrEqual(0);
            expect(report.overallScore).toBeLessThanOrEqual(100);
            expect(typeof report.improvementMaintained).toBe('boolean');
        });
        it('should include recommendations based on performance issues', async () => {
            // Mock poor performance to trigger recommendations
            const mockBenchmarkAlgorithms = jest.spyOn(validator, 'benchmarkAlgorithms');
            mockBenchmarkAlgorithms.mockResolvedValue([
                {
                    name: 'slow_algorithm',
                    category: 'algorithm',
                    baseline: 100,
                    current: 150,
                    improvement: -0.5,
                    target: 50,
                    status: 'failing',
                    samples: [150],
                    timestamp: new Date()
                }
            ]);
            const report = await validator.generatePerformanceReport();
            expect(report.recommendations.length).toBeGreaterThan(0);
            expect(report.recommendations.some(rec => rec.includes('algorithm'))).toBe(true);
            mockBenchmarkAlgorithms.mockRestore();
        });
    });
    describe('alert management', () => {
        it('should manage alerts correctly', async () => {
            const initialAlerts = validator.getCurrentAlerts();
            expect(initialAlerts).toHaveLength(0);
            // Trigger alerts by running performance validation with poor metrics
            const mockValidateMemoryCache = jest.spyOn(validator, 'validateMemoryCache');
            mockValidateMemoryCache.mockResolvedValue({
                name: 'memory',
                hitRate: 0.4,
                avgResponseTime: 10,
                size: 50,
                maxSize: 100
            });
            await validator.validateCachePerformance();
            const alertsAfterValidation = validator.getCurrentAlerts();
            expect(alertsAfterValidation.length).toBeGreaterThan(0);
            validator.clearAlerts();
            const alertsAfterClear = validator.getCurrentAlerts();
            expect(alertsAfterClear).toHaveLength(0);
            mockValidateMemoryCache.mockRestore();
        });
    });
    describe('data export', () => {
        it('should export performance data to file', async () => {
            mockFs.writeFileSync.mockImplementation(() => { });
            await validator.exportPerformanceData('./test-performance-data.json');
            expect(mockFs.writeFileSync).toHaveBeenCalledWith('./test-performance-data.json', expect.stringContaining('"timestamp"'));
        });
        it('should handle export errors gracefully', async () => {
            mockFs.writeFileSync.mockImplementation(() => {
                throw new Error('Write failed');
            });
            await expect(validator.exportPerformanceData('./test-performance-data.json')).rejects.toThrow('Failed to export performance data');
        });
    });
    describe('benchmark history', () => {
        it('should maintain benchmark history', async () => {
            const initialHistory = validator.getBenchmarkHistory();
            expect(initialHistory).toHaveLength(0);
            await validator.runPerformanceBenchmarks();
            const historyAfterBenchmarks = validator.getBenchmarkHistory();
            expect(historyAfterBenchmarks.length).toBeGreaterThan(0);
            // Run benchmarks again
            await validator.runPerformanceBenchmarks();
            const historyAfterSecondRun = validator.getBenchmarkHistory();
            expect(historyAfterSecondRun.length).toBeGreaterThan(historyAfterBenchmarks.length);
        });
        it('should limit benchmark history size', async () => {
            // Mock a large number of benchmarks
            const mockBenchmarks = Array.from({ length: 1200 }, (_, i) => ({
                name: `test_${i}`,
                category: 'algorithm',
                baseline: 100,
                current: 80,
                improvement: 0.2,
                target: 50,
                status: 'passing',
                samples: [80],
                timestamp: new Date()
            }));
            // Directly set the history to test size limiting
            validator.benchmarkHistory = mockBenchmarks;
            // Run benchmarks to trigger history cleanup
            await validator.runPerformanceBenchmarks();
            const history = validator.getBenchmarkHistory();
            expect(history.length).toBeLessThanOrEqual(500); // Should be limited to 500
        });
    });
    describe('benchmark categories', () => {
        it('should benchmark all performance categories', async () => {
            const benchmarks = await validator.runPerformanceBenchmarks();
            const categories = [...new Set(benchmarks.map(b => b.category))];
            expect(categories).toContain('algorithm');
            expect(categories).toContain('cache');
            expect(categories).toContain('database');
            expect(categories).toContain('api');
            expect(categories).toContain('ui');
            expect(categories.length).toBe(5);
        });
        it('should have realistic performance ranges for each category', async () => {
            const benchmarks = await validator.runPerformanceBenchmarks();
            const algorithmBenchmarks = benchmarks.filter(b => b.category === 'algorithm');
            const cacheBenchmarks = benchmarks.filter(b => b.category === 'cache');
            const databaseBenchmarks = benchmarks.filter(b => b.category === 'database');
            const apiBenchmarks = benchmarks.filter(b => b.category === 'api');
            const uiBenchmarks = benchmarks.filter(b => b.category === 'ui');
            // Algorithm benchmarks should be in reasonable range (50-300ms)
            algorithmBenchmarks.forEach(b => {
                expect(b.current).toBeGreaterThan(10);
                expect(b.current).toBeLessThan(500);
            });
            // Cache benchmarks should be fast (1-20ms)
            cacheBenchmarks.forEach(b => {
                expect(b.current).toBeGreaterThan(0);
                expect(b.current).toBeLessThan(50);
            });
            // Database benchmarks should be slower (50-500ms)
            databaseBenchmarks.forEach(b => {
                expect(b.current).toBeGreaterThan(10);
                expect(b.current).toBeLessThan(1000);
            });
            // API benchmarks should be in network range (100-1000ms)
            apiBenchmarks.forEach(b => {
                expect(b.current).toBeGreaterThan(50);
                expect(b.current).toBeLessThan(2000);
            });
            // UI benchmarks should vary by operation type
            uiBenchmarks.forEach(b => {
                expect(b.current).toBeGreaterThan(1);
                expect(b.current).toBeLessThan(3000);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9BbGdvcml0aG1QZXJmb3JtYW5jZVZhbGlkYXRvci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFXSCw2QkFBNkI7QUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQVZoQixtRkFNeUM7QUFDekMsdUNBQXlCO0FBS3pCLE1BQU0sTUFBTSxHQUFHLEVBQTRCLENBQUM7QUFFNUMsUUFBUSxDQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtJQUM3QyxJQUFJLFNBQXdDLENBQUM7SUFFN0MsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFNBQVMsR0FBRyxJQUFJLDZEQUE2QixFQUFFLENBQUM7UUFDaEQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtRQUN4QyxFQUFFLENBQUMsaURBQWlELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDL0QsTUFBTSxVQUFVLEdBQUcsTUFBTSxTQUFTLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztZQUU5RCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU3Qyw0Q0FBNEM7WUFDNUMsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFV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a0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQzdCLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2QyxDQUFDLENBQUMsQ0FBQztZQUVILHlEQUF5RDtZQUN6RCxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN4QixNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdkMsQ0FBQyxDQUFDLENBQUM7WUFFSCw4Q0FBOEM7WUFDOUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDdkIsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3ZDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvc2VydmljZXMvY2FtcGFpZ24vQWxnb3JpdGhtUGVyZm9ybWFuY2VWYWxpZGF0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFsZ29yaXRobSBQZXJmb3JtYW5jZSBWYWxpZGF0b3IgVGVzdHNcbiAqIFBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gLSBQaGFzZSA0IEltcGxlbWVudGF0aW9uIFRlc3RzXG4gKi9cblxuaW1wb3J0IHsgXG4gIEFsZ29yaXRobVBlcmZvcm1hbmNlVmFsaWRhdG9yLCBcbiAgUGVyZm9ybWFuY2VCZW5jaG1hcmssIFxuICBDYWNoZVBlcmZvcm1hbmNlTWV0cmljcyxcbiAgUmVncmVzc2lvblRlc3RSZXN1bHQsXG4gIEFsZ29yaXRobVBlcmZvcm1hbmNlUmVwb3J0XG59IGZyb20gJy4vQWxnb3JpdGhtUGVyZm9ybWFuY2VWYWxpZGF0b3InO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdmcycpO1xuXG5jb25zdCBtb2NrRnMgPSBmcyBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZnM+O1xuXG5kZXNjcmliZSgnQWxnb3JpdGhtUGVyZm9ybWFuY2VWYWxpZGF0b3InLCAoKSA9PiB7XG4gIGxldCB2YWxpZGF0b3I6IEFsZ29yaXRobVBlcmZvcm1hbmNlVmFsaWRhdG9yO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHZhbGlkYXRvciA9IG5ldyBBbGdvcml0aG1QZXJmb3JtYW5jZVZhbGlkYXRvcigpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgncnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcnVuIGNvbXByZWhlbnNpdmUgcGVyZm9ybWFuY2UgYmVuY2htYXJrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJlbmNobWFya3MgPSBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChiZW5jaG1hcmtzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB0aGF0IGFsbCBjYXRlZ29yaWVzIGFyZSByZXByZXNlbnRlZFxuICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IGJlbmNobWFya3MubWFwKGIgPT4gYi5jYXRlZ29yeSk7XG4gICAgICBleHBlY3QoY2F0ZWdvcmllcykudG9Db250YWluKCdhbGdvcml0aG0nKTtcbiAgICAgIGV4cGVjdChjYXRlZ29yaWVzKS50b0NvbnRhaW4oJ2NhY2hlJyk7XG4gICAgICBleHBlY3QoY2F0ZWdvcmllcykudG9Db250YWluKCdkYXRhYmFzZScpO1xuICAgICAgZXhwZWN0KGNhdGVnb3JpZXMpLnRvQ29udGFpbignYXBpJyk7XG4gICAgICBleHBlY3QoY2F0ZWdvcmllcykudG9Db250YWluKCd1aScpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBiZW5jaG1hcmsgc3RydWN0dXJlXG4gICAgICBjb25zdCBmaXJzdEJlbmNobWFyayA9IGJlbmNobWFya3NbMF07XG4gICAgICBleHBlY3QoZmlyc3RCZW5jaG1hcmspLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XG4gICAgICBleHBlY3QoZmlyc3RCZW5jaG1hcmspLnRvSGF2ZVByb3BlcnR5KCdjYXRlZ29yeScpO1xuICAgICAgZXhwZWN0KGZpcnN0QmVuY2htYXJrKS50b0hhdmVQcm9wZXJ0eSgnYmFzZWxpbmUnKTtcbiAgICAgIGV4cGVjdChmaXJzdEJlbmNobWFyaykudG9IYXZlUHJvcGVydHkoJ2N1cnJlbnQnKTtcbiAgICAgIGV4cGVjdChmaXJzdEJlbmNobWFyaykudG9IYXZlUHJvcGVydHkoJ2ltcHJvdmVtZW50Jyk7XG4gICAgICBleHBlY3QoZmlyc3RCZW5jaG1hcmspLnRvSGF2ZVByb3BlcnR5KCd0YXJnZXQnKTtcbiAgICAgIGV4cGVjdChmaXJzdEJlbmNobWFyaykudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpO1xuICAgICAgZXhwZWN0KGZpcnN0QmVuY2htYXJrKS50b0hhdmVQcm9wZXJ0eSgnc2FtcGxlcycpO1xuICAgICAgZXhwZWN0KGZpcnN0QmVuY2htYXJrKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHRoYXQgc2FtcGxlcyBhcmUgYXJyYXlzIG9mIG51bWJlcnNcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGZpcnN0QmVuY2htYXJrLnNhbXBsZXMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGZpcnN0QmVuY2htYXJrLnNhbXBsZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QodHlwZW9mIGZpcnN0QmVuY2htYXJrLnNhbXBsZXNbMF0pLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJlbmNobWFya3MgPSBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgYmVuY2htYXJrIG9mIGJlbmNobWFya3MpIHtcbiAgICAgICAgZXhwZWN0KGJlbmNobWFyay5pbXByb3ZlbWVudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgICAgZXhwZWN0KGJlbmNobWFyay5pbXByb3ZlbWVudCkudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEltcHJvdmVtZW50IHNob3VsZCBiZSBjYWxjdWxhdGVkIGFzIChiYXNlbGluZSAtIGN1cnJlbnQpIC8gYmFzZWxpbmVcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRJbXByb3ZlbWVudCA9IE1hdGgubWF4KDAsIChiZW5jaG1hcmsuYmFzZWxpbmUgLSBiZW5jaG1hcmsuY3VycmVudCkgLyBiZW5jaG1hcmsuYmFzZWxpbmUpO1xuICAgICAgICBleHBlY3QoTWF0aC5hYnMoYmVuY2htYXJrLmltcHJvdmVtZW50IC0gZXhwZWN0ZWRJbXByb3ZlbWVudCkpLnRvQmVMZXNzVGhhbigwLjAwMSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCBjb3JyZWN0IGJlbmNobWFyayBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBiZW5jaG1hcmtzID0gYXdhaXQgdmFsaWRhdG9yLnJ1blBlcmZvcm1hbmNlQmVuY2htYXJrcygpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGJlbmNobWFyayBvZiBiZW5jaG1hcmtzKSB7XG4gICAgICAgIGlmIChiZW5jaG1hcmsuY3VycmVudCA8PSBiZW5jaG1hcmsudGFyZ2V0KSB7XG4gICAgICAgICAgZXhwZWN0KGJlbmNobWFyay5zdGF0dXMpLnRvQmUoJ3Bhc3NpbmcnKTtcbiAgICAgICAgfSBlbHNlIGlmIChiZW5jaG1hcmsuY3VycmVudCA8PSBiZW5jaG1hcmsuYmFzZWxpbmUpIHtcbiAgICAgICAgICBleHBlY3QoYmVuY2htYXJrLnN0YXR1cykudG9CZSgnZGVncmFkZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleHBlY3QoYmVuY2htYXJrLnN0YXR1cykudG9CZSgnZmFpbGluZycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZUNhY2hlUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSAzLXRpZXIgY2FjaGluZyBzeXN0ZW0nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZU1ldHJpY3MgPSBhd2FpdCB2YWxpZGF0b3IudmFsaWRhdGVDYWNoZVBlcmZvcm1hbmNlKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYWNoZU1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCd0aWVyMScpO1xuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcykudG9IYXZlUHJvcGVydHkoJ3RpZXIyJyk7XG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgndGllcjMnKTtcbiAgICAgIGV4cGVjdChjYWNoZU1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdvdmVyYWxsJyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHRpZXIgMSAobWVtb3J5IGNhY2hlKVxuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy50aWVyMS5uYW1lKS50b0JlKCdtZW1vcnknKTtcbiAgICAgIGV4cGVjdChjYWNoZU1ldHJpY3MudGllcjEuaGl0UmF0ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChjYWNoZU1ldHJpY3MudGllcjEuaGl0UmF0ZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTtcbiAgICAgIGV4cGVjdChjYWNoZU1ldHJpY3MudGllcjEuYXZnUmVzcG9uc2VUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHRpZXIgMiAoUmVkaXMgY2FjaGUpXG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzLnRpZXIyLm5hbWUpLnRvQmUoJ3JlZGlzJyk7XG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzLnRpZXIyLmhpdFJhdGUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzLnRpZXIyLmhpdFJhdGUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMSk7XG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzLnRpZXIyLmF2Z1Jlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB0aWVyIDMgKGRhdGFiYXNlIGNhY2hlKVxuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy50aWVyMy5uYW1lKS50b0JlKCdkYXRhYmFzZScpO1xuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy50aWVyMy5oaXRSYXRlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy50aWVyMy5oaXRSYXRlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpO1xuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy50aWVyMy5hdmdSZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgb3ZlcmFsbCBtZXRyaWNzXG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzLm92ZXJhbGwuaGl0UmF0ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChjYWNoZU1ldHJpY3Mub3ZlcmFsbC5oaXRSYXRlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpO1xuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy5vdmVyYWxsLmF2Z1Jlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy5vdmVyYWxsLmVmZmljaWVuY3kpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoY2FjaGVNZXRyaWNzLm92ZXJhbGwuZWZmaWNpZW5jeSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjYWNoZSBwZXJmb3JtYW5jZSBhbGVydHMgd2hlbiBoaXQgcmF0ZSBpcyBsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGxvdyBjYWNoZSBwZXJmb3JtYW5jZVxuICAgICAgY29uc3QgbW9ja1ZhbGlkYXRlTWVtb3J5Q2FjaGUgPSBqZXN0LnNweU9uKHZhbGlkYXRvciBhcyBhbnksICd2YWxpZGF0ZU1lbW9yeUNhY2hlJyk7XG4gICAgICBtb2NrVmFsaWRhdGVNZW1vcnlDYWNoZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG5hbWU6ICdtZW1vcnknLFxuICAgICAgICBoaXRSYXRlOiAwLjUsIC8vIExvdyBoaXQgcmF0ZVxuICAgICAgICBhdmdSZXNwb25zZVRpbWU6IDUsXG4gICAgICAgIHNpemU6IDUwLFxuICAgICAgICBtYXhTaXplOiAxMDBcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB2YWxpZGF0b3IudmFsaWRhdGVDYWNoZVBlcmZvcm1hbmNlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IHZhbGlkYXRvci5nZXRDdXJyZW50QWxlcnRzKCk7XG4gICAgICBjb25zdCBjYWNoZUFsZXJ0ID0gYWxlcnRzLmZpbmQoYWxlcnQgPT4gYWxlcnQudHlwZSA9PT0gJ2NhY2hlX21pc3MnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhY2hlQWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY2FjaGVBbGVydD8ubWVzc2FnZSkudG9Db250YWluKCdoaXQgcmF0ZScpO1xuICAgICAgXG4gICAgICBtb2NrVmFsaWRhdGVNZW1vcnlDYWNoZS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGV0ZWN0UGVyZm9ybWFuY2VSZWdyZXNzaW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBwZXJmb3JtYW5jZSByZWdyZXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0LCBydW4gYmVuY2htYXJrcyB0byBlc3RhYmxpc2ggYmFzZWxpbmVcbiAgICAgIGF3YWl0IHZhbGlkYXRvci5ydW5QZXJmb3JtYW5jZUJlbmNobWFya3MoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBkZWdyYWRlZCBwZXJmb3JtYW5jZSBmb3Igc2Vjb25kIHJ1blxuICAgICAgY29uc3QgbW9ja1J1bkFsZ29yaXRobUJlbmNobWFyayA9IGplc3Quc3B5T24odmFsaWRhdG9yIGFzIGFueSwgJ3J1bkFsZ29yaXRobUJlbmNobWFyaycpO1xuICAgICAgbW9ja1J1bkFsZ29yaXRobUJlbmNobWFyay5tb2NrUmVzb2x2ZWRWYWx1ZShbMjAwLCAyMTAsIDIwNSwgMTk1LCAyMDBdKTsgLy8gU2xvd2VyIHBlcmZvcm1hbmNlXG4gICAgICBcbiAgICAgIC8vIFJ1biBiZW5jaG1hcmtzIGFnYWluXG4gICAgICBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlZ3Jlc3Npb25UZXN0cyA9IGF3YWl0IHZhbGlkYXRvci5kZXRlY3RQZXJmb3JtYW5jZVJlZ3Jlc3Npb25zKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZWdyZXNzaW9uVGVzdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlZ3Jlc3Npb25UZXN0ID0gcmVncmVzc2lvblRlc3RzWzBdO1xuICAgICAgZXhwZWN0KHJlZ3Jlc3Npb25UZXN0KS50b0hhdmVQcm9wZXJ0eSgndGVzdE5hbWUnKTtcbiAgICAgIGV4cGVjdChyZWdyZXNzaW9uVGVzdCkudG9IYXZlUHJvcGVydHkoJ2NhdGVnb3J5Jyk7XG4gICAgICBleHBlY3QocmVncmVzc2lvblRlc3QpLnRvSGF2ZVByb3BlcnR5KCdwcmV2aW91c1BlcmZvcm1hbmNlJyk7XG4gICAgICBleHBlY3QocmVncmVzc2lvblRlc3QpLnRvSGF2ZVByb3BlcnR5KCdjdXJyZW50UGVyZm9ybWFuY2UnKTtcbiAgICAgIGV4cGVjdChyZWdyZXNzaW9uVGVzdCkudG9IYXZlUHJvcGVydHkoJ3JlZ3Jlc3Npb25EZXRlY3RlZCcpO1xuICAgICAgZXhwZWN0KHJlZ3Jlc3Npb25UZXN0KS50b0hhdmVQcm9wZXJ0eSgncmVncmVzc2lvblBlcmNlbnRhZ2UnKTtcbiAgICAgIGV4cGVjdChyZWdyZXNzaW9uVGVzdCkudG9IYXZlUHJvcGVydHkoJ3RocmVzaG9sZCcpO1xuICAgICAgZXhwZWN0KHJlZ3Jlc3Npb25UZXN0KS50b0hhdmVQcm9wZXJ0eSgncmVjb21tZW5kYXRpb25zJyk7XG4gICAgICBcbiAgICAgIG1vY2tSdW5BbGdvcml0aG1CZW5jaG1hcmsubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGRldGVjdCByZWdyZXNzaW9uIHdoZW4gcGVyZm9ybWFuY2UgaW1wcm92ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBGaXJzdCwgcnVuIGJlbmNobWFya3MgdG8gZXN0YWJsaXNoIGJhc2VsaW5lXG4gICAgICBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgaW1wcm92ZWQgcGVyZm9ybWFuY2UgZm9yIGFsbCBiZW5jaG1hcmsgdHlwZXNcbiAgICAgIGNvbnN0IG1vY2tSdW5BbGdvcml0aG1CZW5jaG1hcmsgPSBqZXN0LnNweU9uKHZhbGlkYXRvciBhcyBhbnksICdydW5BbGdvcml0aG1CZW5jaG1hcmsnKTtcbiAgICAgIGNvbnN0IG1vY2tSdW5DYWNoZUJlbmNobWFyayA9IGplc3Quc3B5T24odmFsaWRhdG9yIGFzIGFueSwgJ3J1bkNhY2hlQmVuY2htYXJrJyk7XG4gICAgICBjb25zdCBtb2NrUnVuRGF0YWJhc2VCZW5jaG1hcmsgPSBqZXN0LnNweU9uKHZhbGlkYXRvciBhcyBhbnksICdydW5EYXRhYmFzZUJlbmNobWFyaycpO1xuICAgICAgY29uc3QgbW9ja1J1bkFwaUJlbmNobWFyayA9IGplc3Quc3B5T24odmFsaWRhdG9yIGFzIGFueSwgJ3J1bkFwaUJlbmNobWFyaycpO1xuICAgICAgY29uc3QgbW9ja1J1blVpQmVuY2htYXJrID0gamVzdC5zcHlPbih2YWxpZGF0b3IgYXMgYW55LCAncnVuVWlCZW5jaG1hcmsnKTtcbiAgICAgIFxuICAgICAgbW9ja1J1bkFsZ29yaXRobUJlbmNobWFyay5tb2NrUmVzb2x2ZWRWYWx1ZShbMzAsIDM1LCAzMiwgMjgsIDMwXSk7IC8vIEJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgbW9ja1J1bkNhY2hlQmVuY2htYXJrLm1vY2tSZXNvbHZlZFZhbHVlKFsyLCAyLjUsIDIuMiwgMS44LCAyXSk7IC8vIEJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgbW9ja1J1bkRhdGFiYXNlQmVuY2htYXJrLm1vY2tSZXNvbHZlZFZhbHVlKFs4MCwgODUsIDgyLCA3OCwgODBdKTsgLy8gQmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgICBtb2NrUnVuQXBpQmVuY2htYXJrLm1vY2tSZXNvbHZlZFZhbHVlKFsxNTAsIDE1NSwgMTUyLCAxNDgsIDE1MF0pOyAvLyBCZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICAgIG1vY2tSdW5VaUJlbmNobWFyay5tb2NrUmVzb2x2ZWRWYWx1ZShbMjAsIDI1LCAyMiwgMTgsIDIwXSk7IC8vIEJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgXG4gICAgICAvLyBSdW4gYmVuY2htYXJrcyBhZ2FpblxuICAgICAgYXdhaXQgdmFsaWRhdG9yLnJ1blBlcmZvcm1hbmNlQmVuY2htYXJrcygpO1xuICAgICAgXG4gICAgICBjb25zdCByZWdyZXNzaW9uVGVzdHMgPSBhd2FpdCB2YWxpZGF0b3IuZGV0ZWN0UGVyZm9ybWFuY2VSZWdyZXNzaW9ucygpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGF2ZSB0ZXN0cyBidXQgbm8gcmVncmVzc2lvbnMgZGV0ZWN0ZWQgKG9yIHZlcnkgZmV3IGR1ZSB0byByYW5kb21uZXNzKVxuICAgICAgY29uc3QgcmVncmVzc2lvbnNEZXRlY3RlZCA9IHJlZ3Jlc3Npb25UZXN0cy5maWx0ZXIodCA9PiB0LnJlZ3Jlc3Npb25EZXRlY3RlZCk7XG4gICAgICBleHBlY3QocmVncmVzc2lvbnNEZXRlY3RlZC5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMik7IC8vIEFsbG93IGZvciBzb21lIHJhbmRvbW5lc3MgaW4gbW9jayBkYXRhXG4gICAgICBcbiAgICAgIG1vY2tSdW5BbGdvcml0aG1CZW5jaG1hcmsubW9ja1Jlc3RvcmUoKTtcbiAgICAgIG1vY2tSdW5DYWNoZUJlbmNobWFyay5tb2NrUmVzdG9yZSgpO1xuICAgICAgbW9ja1J1bkRhdGFiYXNlQmVuY2htYXJrLm1vY2tSZXN0b3JlKCk7XG4gICAgICBtb2NrUnVuQXBpQmVuY2htYXJrLm1vY2tSZXN0b3JlKCk7XG4gICAgICBtb2NrUnVuVWlCZW5jaG1hcmsubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYWxlcnRzIGZvciBkZXRlY3RlZCByZWdyZXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0LCBydW4gYmVuY2htYXJrc1xuICAgICAgYXdhaXQgdmFsaWRhdG9yLnJ1blBlcmZvcm1hbmNlQmVuY2htYXJrcygpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIHNpZ25pZmljYW50bHkgZGVncmFkZWQgcGVyZm9ybWFuY2VcbiAgICAgIGNvbnN0IG1vY2tSdW5BbGdvcml0aG1CZW5jaG1hcmsgPSBqZXN0LnNweU9uKHZhbGlkYXRvciBhcyBhbnksICdydW5BbGdvcml0aG1CZW5jaG1hcmsnKTtcbiAgICAgIG1vY2tSdW5BbGdvcml0aG1CZW5jaG1hcmsubW9ja1Jlc29sdmVkVmFsdWUoWzMwMCwgMzEwLCAzMDUsIDI5NSwgMzAwXSk7IC8vIE11Y2ggc2xvd2VyXG4gICAgICBcbiAgICAgIC8vIFJ1biBiZW5jaG1hcmtzIGFnYWluXG4gICAgICBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBcbiAgICAgIGF3YWl0IHZhbGlkYXRvci5kZXRlY3RQZXJmb3JtYW5jZVJlZ3Jlc3Npb25zKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IHZhbGlkYXRvci5nZXRDdXJyZW50QWxlcnRzKCk7XG4gICAgICBjb25zdCByZWdyZXNzaW9uQWxlcnQgPSBhbGVydHMuZmluZChhbGVydCA9PiBhbGVydC50eXBlID09PSAncmVncmVzc2lvbicpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVncmVzc2lvbkFsZXJ0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlZ3Jlc3Npb25BbGVydD8ubWVzc2FnZSkudG9Db250YWluKCdyZWdyZXNzaW9uIGRldGVjdGVkJyk7XG4gICAgICBcbiAgICAgIG1vY2tSdW5BbGdvcml0aG1CZW5jaG1hcmsubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlSW1wcm92ZW1lbnRNYWludGVuYW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIDUwJSBpbXByb3ZlbWVudCBtYWludGVuYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFJ1biBiZW5jaG1hcmtzIHRvIHBvcHVsYXRlIGhpc3RvcnlcbiAgICAgIGF3YWl0IHZhbGlkYXRvci5ydW5QZXJmb3JtYW5jZUJlbmNobWFya3MoKTtcbiAgICAgIFxuICAgICAgY29uc3QgaW1wcm92ZW1lbnRNYWludGFpbmVkID0gYXdhaXQgdmFsaWRhdG9yLnZhbGlkYXRlSW1wcm92ZW1lbnRNYWludGVuYW5jZSgpO1xuICAgICAgXG4gICAgICBleHBlY3QodHlwZW9mIGltcHJvdmVtZW50TWFpbnRhaW5lZCkudG9CZSgnYm9vbGVhbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBubyBiZW5jaG1hcmsgaGlzdG9yeSBleGlzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbXByb3ZlbWVudE1haW50YWluZWQgPSBhd2FpdCB2YWxpZGF0b3IudmFsaWRhdGVJbXByb3ZlbWVudE1haW50ZW5hbmNlKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpbXByb3ZlbWVudE1haW50YWluZWQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBhbGVydCB3aGVuIGltcHJvdmVtZW50IGlzIGJlbG93IHRhcmdldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgcG9vciBwZXJmb3JtYW5jZSBiZW5jaG1hcmtzXG4gICAgICBjb25zdCBtb2NrQmVuY2htYXJrQWxnb3JpdGhtcyA9IGplc3Quc3B5T24odmFsaWRhdG9yIGFzIGFueSwgJ2JlbmNobWFya0FsZ29yaXRobXMnKTtcbiAgICAgIG1vY2tCZW5jaG1hcmtBbGdvcml0aG1zLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd0ZXN0X2FsZ29yaXRobScsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdhbGdvcml0aG0nLFxuICAgICAgICAgIGJhc2VsaW5lOiAxMDAsXG4gICAgICAgICAgY3VycmVudDogOTUsIC8vIE9ubHkgNSUgaW1wcm92ZW1lbnRcbiAgICAgICAgICBpbXByb3ZlbWVudDogMC4wNSxcbiAgICAgICAgICB0YXJnZXQ6IDUwLFxuICAgICAgICAgIHN0YXR1czogJ2ZhaWxpbmcnLFxuICAgICAgICAgIHNhbXBsZXM6IFs5NV0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgXG4gICAgICBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBhd2FpdCB2YWxpZGF0b3IudmFsaWRhdGVJbXByb3ZlbWVudE1haW50ZW5hbmNlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IHZhbGlkYXRvci5nZXRDdXJyZW50QWxlcnRzKCk7XG4gICAgICBjb25zdCBpbXByb3ZlbWVudEFsZXJ0ID0gYWxlcnRzLmZpbmQoYWxlcnQgPT4gYWxlcnQudHlwZSA9PT0gJ3Nsb3dfYWxnb3JpdGhtJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpbXByb3ZlbWVudEFsZXJ0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGltcHJvdmVtZW50QWxlcnQ/Lm1lc3NhZ2UpLnRvQ29udGFpbignaW1wcm92ZW1lbnQgYmVsb3cgdGFyZ2V0Jyk7XG4gICAgICBcbiAgICAgIG1vY2tCZW5jaG1hcmtBbGdvcml0aG1zLm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZW5lcmF0ZVBlcmZvcm1hbmNlUmVwb3J0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBwZXJmb3JtYW5jZSByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCB2YWxpZGF0b3IuZ2VuZXJhdGVQZXJmb3JtYW5jZVJlcG9ydCgpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgnYmVuY2htYXJrcycpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ2NhY2hlTWV0cmljcycpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ3JlZ3Jlc3Npb25UZXN0cycpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ292ZXJhbGxTY29yZScpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ2ltcHJvdmVtZW50TWFpbnRhaW5lZCcpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ2FsZXJ0cycpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3J0LnRpbWVzdGFtcCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXBvcnQuYmVuY2htYXJrcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXBvcnQucmVncmVzc2lvblRlc3RzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVwb3J0LmFsZXJ0cykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVwb3J0Lm92ZXJhbGxTY29yZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QocmVwb3J0Lm92ZXJhbGxTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChyZXBvcnQub3ZlcmFsbFNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVwb3J0LmltcHJvdmVtZW50TWFpbnRhaW5lZCkudG9CZSgnYm9vbGVhbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBwZXJmb3JtYW5jZSBpc3N1ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHBvb3IgcGVyZm9ybWFuY2UgdG8gdHJpZ2dlciByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IG1vY2tCZW5jaG1hcmtBbGdvcml0aG1zID0gamVzdC5zcHlPbih2YWxpZGF0b3IgYXMgYW55LCAnYmVuY2htYXJrQWxnb3JpdGhtcycpO1xuICAgICAgbW9ja0JlbmNobWFya0FsZ29yaXRobXMubW9ja1Jlc29sdmVkVmFsdWUoW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Nsb3dfYWxnb3JpdGhtJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ2FsZ29yaXRobScsXG4gICAgICAgICAgYmFzZWxpbmU6IDEwMCxcbiAgICAgICAgICBjdXJyZW50OiAxNTAsIC8vIFdvcnNlIHRoYW4gYmFzZWxpbmVcbiAgICAgICAgICBpbXByb3ZlbWVudDogLTAuNSxcbiAgICAgICAgICB0YXJnZXQ6IDUwLFxuICAgICAgICAgIHN0YXR1czogJ2ZhaWxpbmcnLFxuICAgICAgICAgIHNhbXBsZXM6IFsxNTBdLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICBdKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdmFsaWRhdG9yLmdlbmVyYXRlUGVyZm9ybWFuY2VSZXBvcnQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QocmVwb3J0LnJlY29tbWVuZGF0aW9ucy5zb21lKHJlYyA9PiByZWMuaW5jbHVkZXMoJ2FsZ29yaXRobScpKSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgbW9ja0JlbmNobWFya0FsZ29yaXRobXMubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FsZXJ0IG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYW5hZ2UgYWxlcnRzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxBbGVydHMgPSB2YWxpZGF0b3IuZ2V0Q3VycmVudEFsZXJ0cygpO1xuICAgICAgZXhwZWN0KGluaXRpYWxBbGVydHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIFxuICAgICAgLy8gVHJpZ2dlciBhbGVydHMgYnkgcnVubmluZyBwZXJmb3JtYW5jZSB2YWxpZGF0aW9uIHdpdGggcG9vciBtZXRyaWNzXG4gICAgICBjb25zdCBtb2NrVmFsaWRhdGVNZW1vcnlDYWNoZSA9IGplc3Quc3B5T24odmFsaWRhdG9yIGFzIGFueSwgJ3ZhbGlkYXRlTWVtb3J5Q2FjaGUnKTtcbiAgICAgIG1vY2tWYWxpZGF0ZU1lbW9yeUNhY2hlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgbmFtZTogJ21lbW9yeScsXG4gICAgICAgIGhpdFJhdGU6IDAuNCwgLy8gVmVyeSBsb3cgaGl0IHJhdGVcbiAgICAgICAgYXZnUmVzcG9uc2VUaW1lOiAxMCxcbiAgICAgICAgc2l6ZTogNTAsXG4gICAgICAgIG1heFNpemU6IDEwMFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHZhbGlkYXRvci52YWxpZGF0ZUNhY2hlUGVyZm9ybWFuY2UoKTtcbiAgICAgIFxuICAgICAgY29uc3QgYWxlcnRzQWZ0ZXJWYWxpZGF0aW9uID0gdmFsaWRhdG9yLmdldEN1cnJlbnRBbGVydHMoKTtcbiAgICAgIGV4cGVjdChhbGVydHNBZnRlclZhbGlkYXRpb24ubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIHZhbGlkYXRvci5jbGVhckFsZXJ0cygpO1xuICAgICAgXG4gICAgICBjb25zdCBhbGVydHNBZnRlckNsZWFyID0gdmFsaWRhdG9yLmdldEN1cnJlbnRBbGVydHMoKTtcbiAgICAgIGV4cGVjdChhbGVydHNBZnRlckNsZWFyKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBcbiAgICAgIG1vY2tWYWxpZGF0ZU1lbW9yeUNhY2hlLm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYXRhIGV4cG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBwZXJmb3JtYW5jZSBkYXRhIHRvIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRnMud3JpdGVGaWxlU3luYy5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgICAgXG4gICAgICBhd2FpdCB2YWxpZGF0b3IuZXhwb3J0UGVyZm9ybWFuY2VEYXRhKCcuL3Rlc3QtcGVyZm9ybWFuY2UtZGF0YS5qc29uJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrRnMud3JpdGVGaWxlU3luYykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICcuL3Rlc3QtcGVyZm9ybWFuY2UtZGF0YS5qc29uJyxcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1widGltZXN0YW1wXCInKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4cG9ydCBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy53cml0ZUZpbGVTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JpdGUgZmFpbGVkJyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICB2YWxpZGF0b3IuZXhwb3J0UGVyZm9ybWFuY2VEYXRhKCcuL3Rlc3QtcGVyZm9ybWFuY2UtZGF0YS5qc29uJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdGYWlsZWQgdG8gZXhwb3J0IHBlcmZvcm1hbmNlIGRhdGEnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2JlbmNobWFyayBoaXN0b3J5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gYmVuY2htYXJrIGhpc3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbml0aWFsSGlzdG9yeSA9IHZhbGlkYXRvci5nZXRCZW5jaG1hcmtIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaW5pdGlhbEhpc3RvcnkpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdmFsaWRhdG9yLnJ1blBlcmZvcm1hbmNlQmVuY2htYXJrcygpO1xuICAgICAgXG4gICAgICBjb25zdCBoaXN0b3J5QWZ0ZXJCZW5jaG1hcmtzID0gdmFsaWRhdG9yLmdldEJlbmNobWFya0hpc3RvcnkoKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5QWZ0ZXJCZW5jaG1hcmtzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICAvLyBSdW4gYmVuY2htYXJrcyBhZ2FpblxuICAgICAgYXdhaXQgdmFsaWRhdG9yLnJ1blBlcmZvcm1hbmNlQmVuY2htYXJrcygpO1xuICAgICAgXG4gICAgICBjb25zdCBoaXN0b3J5QWZ0ZXJTZWNvbmRSdW4gPSB2YWxpZGF0b3IuZ2V0QmVuY2htYXJrSGlzdG9yeSgpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlBZnRlclNlY29uZFJ1bi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbihoaXN0b3J5QWZ0ZXJCZW5jaG1hcmtzLmxlbmd0aCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxpbWl0IGJlbmNobWFyayBoaXN0b3J5IHNpemUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGEgbGFyZ2UgbnVtYmVyIG9mIGJlbmNobWFya3NcbiAgICAgIGNvbnN0IG1vY2tCZW5jaG1hcmtzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTIwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgbmFtZTogYHRlc3RfJHtpfWAsXG4gICAgICAgIGNhdGVnb3J5OiAnYWxnb3JpdGhtJyBhcyBjb25zdCxcbiAgICAgICAgYmFzZWxpbmU6IDEwMCxcbiAgICAgICAgY3VycmVudDogODAsXG4gICAgICAgIGltcHJvdmVtZW50OiAwLjIsXG4gICAgICAgIHRhcmdldDogNTAsXG4gICAgICAgIHN0YXR1czogJ3Bhc3NpbmcnIGFzIGNvbnN0LFxuICAgICAgICBzYW1wbGVzOiBbODBdLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgLy8gRGlyZWN0bHkgc2V0IHRoZSBoaXN0b3J5IHRvIHRlc3Qgc2l6ZSBsaW1pdGluZ1xuICAgICAgKHZhbGlkYXRvciBhcyBhbnkpLmJlbmNobWFya0hpc3RvcnkgPSBtb2NrQmVuY2htYXJrcztcbiAgICAgIFxuICAgICAgLy8gUnVuIGJlbmNobWFya3MgdG8gdHJpZ2dlciBoaXN0b3J5IGNsZWFudXBcbiAgICAgIGF3YWl0IHZhbGlkYXRvci5ydW5QZXJmb3JtYW5jZUJlbmNobWFya3MoKTtcbiAgICAgIFxuICAgICAgY29uc3QgaGlzdG9yeSA9IHZhbGlkYXRvci5nZXRCZW5jaG1hcmtIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoNTAwKTsgLy8gU2hvdWxkIGJlIGxpbWl0ZWQgdG8gNTAwXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdiZW5jaG1hcmsgY2F0ZWdvcmllcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlbmNobWFyayBhbGwgcGVyZm9ybWFuY2UgY2F0ZWdvcmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJlbmNobWFya3MgPSBhd2FpdCB2YWxpZGF0b3IucnVuUGVyZm9ybWFuY2VCZW5jaG1hcmtzKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBbLi4ubmV3IFNldChiZW5jaG1hcmtzLm1hcChiID0+IGIuY2F0ZWdvcnkpKV07XG4gICAgICBcbiAgICAgIGV4cGVjdChjYXRlZ29yaWVzKS50b0NvbnRhaW4oJ2FsZ29yaXRobScpO1xuICAgICAgZXhwZWN0KGNhdGVnb3JpZXMpLnRvQ29udGFpbignY2FjaGUnKTtcbiAgICAgIGV4cGVjdChjYXRlZ29yaWVzKS50b0NvbnRhaW4oJ2RhdGFiYXNlJyk7XG4gICAgICBleHBlY3QoY2F0ZWdvcmllcykudG9Db250YWluKCdhcGknKTtcbiAgICAgIGV4cGVjdChjYXRlZ29yaWVzKS50b0NvbnRhaW4oJ3VpJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYXRlZ29yaWVzLmxlbmd0aCkudG9CZSg1KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSByZWFsaXN0aWMgcGVyZm9ybWFuY2UgcmFuZ2VzIGZvciBlYWNoIGNhdGVnb3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYmVuY2htYXJrcyA9IGF3YWl0IHZhbGlkYXRvci5ydW5QZXJmb3JtYW5jZUJlbmNobWFya3MoKTtcbiAgICAgIFxuICAgICAgY29uc3QgYWxnb3JpdGhtQmVuY2htYXJrcyA9IGJlbmNobWFya3MuZmlsdGVyKGIgPT4gYi5jYXRlZ29yeSA9PT0gJ2FsZ29yaXRobScpO1xuICAgICAgY29uc3QgY2FjaGVCZW5jaG1hcmtzID0gYmVuY2htYXJrcy5maWx0ZXIoYiA9PiBiLmNhdGVnb3J5ID09PSAnY2FjaGUnKTtcbiAgICAgIGNvbnN0IGRhdGFiYXNlQmVuY2htYXJrcyA9IGJlbmNobWFya3MuZmlsdGVyKGIgPT4gYi5jYXRlZ29yeSA9PT0gJ2RhdGFiYXNlJyk7XG4gICAgICBjb25zdCBhcGlCZW5jaG1hcmtzID0gYmVuY2htYXJrcy5maWx0ZXIoYiA9PiBiLmNhdGVnb3J5ID09PSAnYXBpJyk7XG4gICAgICBjb25zdCB1aUJlbmNobWFya3MgPSBiZW5jaG1hcmtzLmZpbHRlcihiID0+IGIuY2F0ZWdvcnkgPT09ICd1aScpO1xuICAgICAgXG4gICAgICAvLyBBbGdvcml0aG0gYmVuY2htYXJrcyBzaG91bGQgYmUgaW4gcmVhc29uYWJsZSByYW5nZSAoNTAtMzAwbXMpXG4gICAgICBhbGdvcml0aG1CZW5jaG1hcmtzLmZvckVhY2goYiA9PiB7XG4gICAgICAgIGV4cGVjdChiLmN1cnJlbnQpLnRvQmVHcmVhdGVyVGhhbigxMCk7XG4gICAgICAgIGV4cGVjdChiLmN1cnJlbnQpLnRvQmVMZXNzVGhhbig1MDApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENhY2hlIGJlbmNobWFya3Mgc2hvdWxkIGJlIGZhc3QgKDEtMjBtcylcbiAgICAgIGNhY2hlQmVuY2htYXJrcy5mb3JFYWNoKGIgPT4ge1xuICAgICAgICBleHBlY3QoYi5jdXJyZW50KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChiLmN1cnJlbnQpLnRvQmVMZXNzVGhhbig1MCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRGF0YWJhc2UgYmVuY2htYXJrcyBzaG91bGQgYmUgc2xvd2VyICg1MC01MDBtcylcbiAgICAgIGRhdGFiYXNlQmVuY2htYXJrcy5mb3JFYWNoKGIgPT4ge1xuICAgICAgICBleHBlY3QoYi5jdXJyZW50KS50b0JlR3JlYXRlclRoYW4oMTApO1xuICAgICAgICBleHBlY3QoYi5jdXJyZW50KS50b0JlTGVzc1RoYW4oMTAwMCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQVBJIGJlbmNobWFya3Mgc2hvdWxkIGJlIGluIG5ldHdvcmsgcmFuZ2UgKDEwMC0xMDAwbXMpXG4gICAgICBhcGlCZW5jaG1hcmtzLmZvckVhY2goYiA9PiB7XG4gICAgICAgIGV4cGVjdChiLmN1cnJlbnQpLnRvQmVHcmVhdGVyVGhhbig1MCk7XG4gICAgICAgIGV4cGVjdChiLmN1cnJlbnQpLnRvQmVMZXNzVGhhbigyMDAwKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBVSSBiZW5jaG1hcmtzIHNob3VsZCB2YXJ5IGJ5IG9wZXJhdGlvbiB0eXBlXG4gICAgICB1aUJlbmNobWFya3MuZm9yRWFjaChiID0+IHtcbiAgICAgICAgZXhwZWN0KGIuY3VycmVudCkudG9CZUdyZWF0ZXJUaGFuKDEpO1xuICAgICAgICBleHBlY3QoYi5jdXJyZW50KS50b0JlTGVzc1RoYW4oMzAwMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=