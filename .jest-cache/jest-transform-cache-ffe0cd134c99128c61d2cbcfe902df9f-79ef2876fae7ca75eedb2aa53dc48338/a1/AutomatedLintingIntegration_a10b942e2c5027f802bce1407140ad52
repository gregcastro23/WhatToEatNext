57fbc6067d15d5583353b0382de3027f
"use strict";
/**
 * AutomatedLintingIntegration - Integration service for automated linting with safety protocols
 *
 * This service orchestrates the complete automated linting workflow, integrating
 * error analysis, resolution strategy generation, and automated fixing with comprehensive
 * safety protocols and validation mechanisms.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AutomatedLintingIntegration = void 0;
const LoggingService_1 = require("@/services/LoggingService");
const AutomatedLintingFixer_1 = require("./AutomatedLintingFixer");
const LintingAnalysisService_1 = require("./LintingAnalysisService");
/**
 * Main AutomatedLintingIntegration class
 */
class AutomatedLintingIntegration {
    analysisService;
    automatedFixer;
    workspaceRoot;
    constructor(workspaceRoot = process.cwd()) {
        this.workspaceRoot = workspaceRoot;
        this.analysisService = new LintingAnalysisService_1.LintingAnalysisService(workspaceRoot);
        this.automatedFixer = new AutomatedLintingFixer_1.AutomatedLintingFixer(workspaceRoot);
    }
    /**
     * Execute complete automated linting workflow
     */
    async executeAutomatedWorkflow(options = {}) {
        const workflowStart = Date.now();
        LoggingService_1.log.info('üöÄ Starting automated linting workflow...');
        try {
            // Step 1: Comprehensive Analysis
            LoggingService_1.log.info('üìä Phase 1: Comprehensive Linting Analysis');
            const analysisStart = Date.now();
            const analysis = await this.analysisService.performComprehensiveAnalysis({
                includeFileAnalysis: true,
                generateStrategies: true,
                ...options.analysisOptions,
            });
            const analysisTime = Date.now() - analysisStart;
            LoggingService_1.log.info(`‚úÖ Analysis complete in ${analysisTime}ms`);
            // Step 2: Configure Safety Protocols
            LoggingService_1.log.info('üõ°Ô∏è Phase 2: Configuring Safety Protocols');
            const safetyProtocols = this.configureSafetyProtocols(analysis, options);
            // Reinitialize fixer with configured safety protocols
            this.automatedFixer = new AutomatedLintingFixer_1.AutomatedLintingFixer(this.workspaceRoot, safetyProtocols);
            // Step 3: Automated Fixing
            LoggingService_1.log.info('üîß Phase 3: Automated Error Resolution');
            const fixingStart = Date.now();
            const fixResults = await this.executeAutomatedFixes(analysis, options);
            const fixingTime = Date.now() - fixingStart;
            LoggingService_1.log.info(`‚úÖ Automated fixes complete in ${fixingTime}ms`);
            // Step 4: Generate Summary and Recommendations
            LoggingService_1.log.info('üìã Phase 4: Generating Summary and Recommendations');
            const summary = this.generateWorkflowSummary(analysis, fixResults, workflowStart);
            const recommendations = this.generateWorkflowRecommendations(analysis, fixResults, summary);
            // Step 5: Calculate Metrics
            const metrics = this.calculateWorkflowMetrics(analysisTime, fixingTime, workflowStart, analysis, fixResults);
            const result = {
                analysis,
                fixResults,
                summary,
                recommendations,
                metrics,
            };
            LoggingService_1.log.info('üéâ Automated linting workflow complete!');
            this.logWorkflowResults(result);
            return result;
        }
        catch (error) {
            console.error('‚ùå Automated linting workflow failed:', error);
            throw error;
        }
    }
    /**
     * Execute quick automated fixes for immediate wins
     */
    async executeQuickFixes(options = {}) {
        LoggingService_1.log.info('‚ö° Executing quick automated fixes...');
        try {
            // Quick analysis to identify auto-fixable issues
            const quickAnalysis = await this.analysisService.performQuickAnalysis();
            // Configure conservative safety protocols for quick fixes
            const safetyProtocols = {
                enableRollback: true,
                validateBeforeFix: true,
                validateAfterFix: true,
                maxFailuresBeforeStop: 3,
                requireManualApproval: false,
                preservePatterns: [
                    '**/calculations/**',
                    '**/data/planets/**',
                    '**/*astrological*',
                    '**/*campaign*',
                ],
            };
            const quickFixer = new AutomatedLintingFixer_1.AutomatedLintingFixer(this.workspaceRoot, safetyProtocols);
            // Focus only on quick wins (auto-fixable, low risk)
            const quickWinIssues = quickAnalysis.quickWins;
            const categorizedQuickWins = {
                total: quickWinIssues.length,
                errors: quickWinIssues.filter(i => i.severity === 'error').length,
                warnings: quickWinIssues.filter(i => i.severity === 'warning').length,
                byCategory: this.groupIssuesByCategory(quickWinIssues),
                byPriority: this.groupIssuesByPriority(quickWinIssues),
                byFile: this.groupIssuesByFile(quickWinIssues),
                autoFixable: quickWinIssues,
                requiresManualReview: [],
            };
            const batchOptions = {
                batchSize: 5,
                maxConcurrentBatches: 1,
                validateAfterEachBatch: true,
                continueOnError: false,
                createBackups: true,
                dryRun: options.dryRun || false,
            };
            const result = await quickFixer.applyAutomatedFixes(categorizedQuickWins, batchOptions);
            LoggingService_1.log.info(`‚ö° Quick fixes complete: ${result.fixedIssues} issues fixed`);
            return result;
        }
        catch (error) {
            console.error('‚ùå Quick fixes failed:', error);
            throw error;
        }
    }
    /**
     * Execute specialized unused variable cleanup
     */
    async executeUnusedVariableCleanup(options = {}) {
        LoggingService_1.log.info('üßπ Executing unused variable cleanup...');
        try {
            // Analyze for unused variable issues
            const analysis = await this.analysisService.performComprehensiveAnalysis({
                focusAreas: ['typescript'],
                generateStrategies: false,
            });
            const unusedVarIssues = Object.values(analysis.categorizedErrors.byCategory)
                .flat()
                .filter(issue => issue.rule.includes('no-unused-vars') || issue.rule.includes('unused-vars'));
            if (unusedVarIssues.length === 0) {
                LoggingService_1.log.info('‚úÖ No unused variable issues found');
                return {
                    success: true,
                    fixedIssues: 0,
                    failedIssues: 0,
                    processedFiles: [],
                    errors: [],
                    validationResults: [],
                    metrics: {
                        startTime: new Date(),
                        endTime: new Date(),
                        totalTime: 0,
                        filesProcessed: 0,
                        issuesAttempted: 0,
                        issuesFixed: 0,
                        issuesFailed: 0,
                        validationTime: 0,
                        rollbacksPerformed: 0,
                    },
                };
            }
            const safetyProtocols = {
                enableRollback: true,
                validateBeforeFix: true,
                validateAfterFix: true,
                maxFailuresBeforeStop: 5,
                requireManualApproval: false,
                preservePatterns: ['**/calculations/**', '**/data/planets/**', '**/*astrological*'],
            };
            const fixer = new AutomatedLintingFixer_1.AutomatedLintingFixer(this.workspaceRoot, safetyProtocols);
            const result = await fixer.handleUnusedVariables(unusedVarIssues, {
                prefixWithUnderscore: options.prefixWithUnderscore ?? true,
                removeCompletely: options.removeCompletely ?? false,
                skipDomainFiles: options.skipDomainFiles ?? true,
                skipTestFiles: options.skipTestFiles ?? false,
                preservePatterns: ['**/calculations/**', '**/data/planets/**', '**/*astrological*'],
            });
            LoggingService_1.log.info(`üßπ Unused variable cleanup complete: ${result.fixedIssues} variables handled`);
            return result;
        }
        catch (error) {
            console.error('‚ùå Unused variable cleanup failed:', error);
            throw error;
        }
    }
    /**
     * Execute import optimization workflow
     */
    async executeImportOptimization(options = {}) {
        LoggingService_1.log.info('üì¶ Executing import optimization...');
        try {
            // Analyze for import-related issues
            const analysis = await this.analysisService.performComprehensiveAnalysis({
                focusAreas: ['import'],
                generateStrategies: false,
            });
            const importIssues = analysis.categorizedErrors.byCategory['import'] || [];
            if (importIssues.length === 0) {
                LoggingService_1.log.info('‚úÖ No import issues found');
                return this.createEmptyFixResult();
            }
            const safetyProtocols = {
                enableRollback: true,
                validateBeforeFix: true,
                validateAfterFix: true,
                maxFailuresBeforeStop: 5,
                requireManualApproval: false,
                preservePatterns: ['**/calculations/**', '**/data/planets/**'],
            };
            const fixer = new AutomatedLintingFixer_1.AutomatedLintingFixer(this.workspaceRoot, safetyProtocols);
            const result = await fixer.optimizeImports(importIssues, {
                removeDuplicates: options.removeDuplicates ?? true,
                organizeImports: options.organizeImports ?? true,
                removeUnused: options.removeUnused ?? true,
                preserveComments: true,
                sortImports: options.sortImports ?? true,
            });
            LoggingService_1.log.info(`üì¶ Import optimization complete: ${result.fixedIssues} imports optimized`);
            return result;
        }
        catch (error) {
            console.error('‚ùå Import optimization failed:', error);
            throw error;
        }
    }
    // Private helper methods
    configureSafetyProtocols(analysis, options) {
        const automationLevel = options.automationLevel || 'moderate';
        const riskTolerance = options.analysisOptions?.riskTolerance || 'moderate';
        let maxFailures = 5;
        let requireManualApproval = false;
        // Adjust based on automation level
        switch (automationLevel) {
            case 'conservative':
                maxFailures = 2;
                requireManualApproval = analysis.summary.criticalIssuesCount > 0;
                break;
            case 'aggressive':
                maxFailures = 10;
                requireManualApproval = false;
                break;
            default: // moderate
                maxFailures = 5;
                requireManualApproval = analysis.summary.criticalIssuesCount > 5;
        }
        // Adjust based on risk assessment
        if (analysis.summary.overallRiskLevel === 'critical') {
            maxFailures = Math.min(maxFailures, 2);
            requireManualApproval = true;
        }
        else if (analysis.summary.overallRiskLevel === 'high') {
            maxFailures = Math.min(maxFailures, 3);
        }
        return {
            enableRollback: true,
            validateBeforeFix: true,
            validateAfterFix: true,
            maxFailuresBeforeStop: maxFailures,
            requireManualApproval,
            preservePatterns: [
                '**/calculations/**',
                '**/data/planets/**',
                '**/*astrological*',
                '**/*campaign*',
                '**/test*/**',
            ],
            ...options.safetyProtocols,
        };
    }
    async executeAutomatedFixes(analysis, options) {
        const batchOptions = {
            batchSize: 10,
            maxConcurrentBatches: 1,
            validateAfterEachBatch: true,
            continueOnError: false,
            createBackups: true,
            dryRun: options.dryRun || false,
            ...options.batchProcessingOptions,
        };
        // Main automated fixes
        const automated = await this.automatedFixer.applyAutomatedFixes(analysis.categorizedErrors, batchOptions);
        const fixResults = {
            automated,
        };
        // Specialized fixes if main automation was successful
        if (automated.success && !options.dryRun) {
            // Unused variables cleanup
            const unusedVarIssues = Object.values(analysis.categorizedErrors.byCategory)
                .flat()
                .filter(issue => issue.rule.includes('no-unused-vars'));
            if (unusedVarIssues.length > 0) {
                LoggingService_1.log.info('üßπ Running specialized unused variable cleanup...');
                fixResults.unusedVariables = await this.automatedFixer.handleUnusedVariables(unusedVarIssues, {
                    prefixWithUnderscore: true,
                    skipDomainFiles: true,
                    skipTestFiles: false,
                });
            }
            // Import optimization
            const importIssues = analysis.categorizedErrors.byCategory['import'] || [];
            if (importIssues.length > 0) {
                LoggingService_1.log.info('üì¶ Running specialized import optimization...');
                fixResults.imports = await this.automatedFixer.optimizeImports(importIssues, {
                    removeDuplicates: true,
                    organizeImports: true,
                    sortImports: true,
                });
            }
            // Type annotation improvements (conservative approach)
            const typeIssues = Object.values(analysis.categorizedErrors.byCategory)
                .flat()
                .filter(issue => issue.rule.includes('no-explicit-any'));
            if (typeIssues.length > 0 && options.automationLevel !== 'conservative') {
                LoggingService_1.log.info('üè∑Ô∏è Running type annotation improvements...');
                fixResults.typeAnnotations = await this.automatedFixer.improveTypeAnnotations(typeIssues, {
                    maxComplexity: 'simple',
                    preserveExplicitAny: ['**/calculations/**', '**/data/planets/**'],
                });
            }
        }
        return fixResults;
    }
    generateWorkflowSummary(analysis, fixResults, workflowStart) {
        const totalFixed = fixResults.automated.fixedIssues +
            (fixResults.unusedVariables?.fixedIssues || 0) +
            (fixResults.imports?.fixedIssues || 0) +
            (fixResults.typeAnnotations?.fixedIssues || 0);
        const totalFailed = fixResults.automated.failedIssues +
            (fixResults.unusedVariables?.failedIssues || 0) +
            (fixResults.imports?.failedIssues || 0) +
            (fixResults.typeAnnotations?.failedIssues || 0);
        const totalAttempted = totalFixed + totalFailed;
        const automationSuccessRate = totalAttempted > 0 ? totalFixed / totalAttempted : 0;
        const safetyEventsTriggered = fixResults.automated.errors.length +
            (fixResults.unusedVariables?.errors.length || 0) +
            (fixResults.imports?.errors.length || 0) +
            (fixResults.typeAnnotations?.errors.length || 0);
        const rollbacksPerformed = fixResults.automated.metrics.rollbacksPerformed +
            (fixResults.unusedVariables?.metrics.rollbacksPerformed || 0) +
            (fixResults.imports?.metrics.rollbacksPerformed || 0) +
            (fixResults.typeAnnotations?.metrics.rollbacksPerformed || 0);
        return {
            totalIssuesAnalyzed: analysis.summary.totalIssues,
            totalIssuesFixed: totalFixed,
            totalIssuesFailed: totalFailed,
            automationSuccessRate,
            timeToCompletion: Date.now() - workflowStart,
            safetyEventsTriggered,
            rollbacksPerformed,
            overallSuccess: fixResults.automated.success && automationSuccessRate > 0.7,
        };
    }
    generateWorkflowRecommendations(analysis, fixResults, summary) {
        const recommendations = [];
        // Immediate actions based on results
        if (summary.rollbacksPerformed > 0) {
            recommendations.push({
                type: 'immediate',
                priority: 'high',
                title: 'Review Rollback Events',
                description: `${summary.rollbacksPerformed} rollbacks occurred during automation`,
                actionItems: [
                    'Review rollback logs for patterns',
                    'Identify problematic rules or files',
                    'Adjust safety protocols if needed',
                ],
                estimatedImpact: 'high',
                automatable: false,
            });
        }
        if (summary.automationSuccessRate < 0.5) {
            recommendations.push({
                type: 'immediate',
                priority: 'critical',
                title: 'Low Automation Success Rate',
                description: `Only ${Math.round(summary.automationSuccessRate * 100)}% of fixes succeeded`,
                actionItems: [
                    'Review failed fixes for common patterns',
                    'Adjust automation confidence thresholds',
                    'Consider manual review for complex issues',
                ],
                estimatedImpact: 'high',
                automatable: false,
            });
        }
        // Short-term improvements
        if (analysis.summary.domainSpecificCount > 0) {
            recommendations.push({
                type: 'short-term',
                priority: 'medium',
                title: 'Domain-Specific Rule Configuration',
                description: `${analysis.summary.domainSpecificCount} domain-specific issues need attention`,
                actionItems: [
                    'Create domain-specific ESLint rule configurations',
                    'Document domain-specific patterns and exceptions',
                    'Train team on domain-specific linting practices',
                ],
                estimatedImpact: 'medium',
                automatable: true,
            });
        }
        // Long-term process improvements
        if (summary.totalIssuesAnalyzed > 100) {
            recommendations.push({
                type: 'long-term',
                priority: 'medium',
                title: 'Implement Continuous Linting',
                description: 'Large number of issues suggests need for continuous quality monitoring',
                actionItems: [
                    'Set up pre-commit hooks for linting',
                    'Implement CI/CD linting gates',
                    'Schedule regular automated linting campaigns',
                    'Create quality metrics dashboard',
                ],
                estimatedImpact: 'high',
                automatable: true,
            });
        }
        // Process improvement recommendations
        if (summary.automationSuccessRate > 0.8) {
            recommendations.push({
                type: 'process-improvement',
                priority: 'low',
                title: 'Increase Automation Aggressiveness',
                description: 'High success rate suggests automation can be more aggressive',
                actionItems: [
                    'Increase batch sizes for faster processing',
                    'Reduce validation frequency for low-risk changes',
                    'Enable more auto-fix rules',
                    'Consider automated deployment of fixes',
                ],
                estimatedImpact: 'medium',
                automatable: true,
            });
        }
        return recommendations;
    }
    calculateWorkflowMetrics(analysisTime, fixingTime, workflowStart, analysis, fixResults) {
        const totalWorkflowTime = Date.now() - workflowStart;
        const validationTime = fixResults.automated.metrics.validationTime;
        const totalFixed = fixResults.automated.fixedIssues +
            (fixResults.unusedVariables?.fixedIssues || 0) +
            (fixResults.imports?.fixedIssues || 0) +
            (fixResults.typeAnnotations?.fixedIssues || 0);
        const issuesPerMinute = totalFixed / (totalWorkflowTime / 60000);
        const automationEfficiency = totalFixed / analysis.summary.totalIssues;
        const safetyEvents = fixResults.automated.errors.length;
        const safetyProtocolEffectiveness = safetyEvents > 0 ? fixResults.automated.metrics.rollbacksPerformed / safetyEvents : 1;
        const qualityImprovement = (totalFixed / analysis.summary.totalIssues) * 100;
        return {
            analysisTime,
            fixingTime,
            validationTime,
            totalWorkflowTime,
            issuesPerMinute,
            automationEfficiency,
            safetyProtocolEffectiveness,
            qualityImprovement,
        };
    }
    logWorkflowResults(result) {
        LoggingService_1.log.info('\nüéØ AUTOMATED LINTING WORKFLOW RESULTS');
        LoggingService_1.log.info('=====================================');
        LoggingService_1.log.info(`üìä Issues Analyzed: ${result.summary.totalIssuesAnalyzed}`);
        LoggingService_1.log.info(`‚úÖ Issues Fixed: ${result.summary.totalIssuesFixed}`);
        LoggingService_1.log.info(`‚ùå Issues Failed: ${result.summary.totalIssuesFailed}`);
        LoggingService_1.log.info(`üìà Success Rate: ${Math.round(result.summary.automationSuccessRate * 100)}%`);
        LoggingService_1.log.info(`‚è±Ô∏è Total Time: ${Math.round(result.summary.timeToCompletion / 1000)}s`);
        LoggingService_1.log.info(`üõ°Ô∏è Safety Events: ${result.summary.safetyEventsTriggered}`);
        LoggingService_1.log.info(`üîÑ Rollbacks: ${result.summary.rollbacksPerformed}`);
        LoggingService_1.log.info(`üéöÔ∏è Overall Success: ${result.summary.overallSuccess ? 'YES' : 'NO'}`);
        LoggingService_1.log.info('\nüìã TOP RECOMMENDATIONS:');
        result.recommendations
            .filter(r => r.priority === 'critical' || r.priority === 'high')
            .slice(0, 3)
            .forEach((rec, index) => {
            LoggingService_1.log.info(`${index + 1}. ${rec.title} (${rec.priority.toUpperCase()})`);
            LoggingService_1.log.info(`   ${rec.description}`);
        });
        LoggingService_1.log.info('\nüìà WORKFLOW METRICS:');
        LoggingService_1.log.info(`‚ö° Issues/Minute: ${Math.round(result.metrics.issuesPerMinute * 100) / 100}`);
        LoggingService_1.log.info(`üéØ Automation Efficiency: ${Math.round(result.metrics.automationEfficiency * 100)}%`);
        LoggingService_1.log.info(`üõ°Ô∏è Safety Effectiveness: ${Math.round(result.metrics.safetyProtocolEffectiveness * 100)}%`);
        LoggingService_1.log.info(`üìä Quality Improvement: ${Math.round(result.metrics.qualityImprovement)}%`);
        LoggingService_1.log.info('=====================================\n');
    }
    groupIssuesByCategory(issues) {
        const grouped = {};
        for (const issue of issues) {
            const category = issue.category.primary;
            if (!grouped[category])
                grouped[category] = [];
            grouped[category].push(issue);
        }
        return grouped;
    }
    groupIssuesByPriority(issues) {
        const grouped = {};
        for (const issue of issues) {
            const priority = issue.category.priority;
            if (!grouped[priority])
                grouped[priority] = [];
            grouped[priority].push(issue);
        }
        return grouped;
    }
    groupIssuesByFile(issues) {
        const grouped = {};
        for (const issue of issues) {
            if (!grouped[issue.file])
                grouped[issue.file] = [];
            grouped[issue.file].push(issue);
        }
        return grouped;
    }
    createEmptyFixResult() {
        return {
            success: true,
            fixedIssues: 0,
            failedIssues: 0,
            processedFiles: [],
            errors: [],
            validationResults: [],
            metrics: {
                startTime: new Date(),
                endTime: new Date(),
                totalTime: 0,
                filesProcessed: 0,
                issuesAttempted: 0,
                issuesFixed: 0,
                issuesFailed: 0,
                validationTime: 0,
                rollbacksPerformed: 0,
            },
        };
    }
}
exports.AutomatedLintingIntegration = AutomatedLintingIntegration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2xpbnRpbmcvQXV0b21hdGVkTGludGluZ0ludGVncmF0aW9uLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7O0dBTUc7OztBQUVILDhEQUFnRDtBQUVoRCxtRUFLaUM7QUFDakMscUVBQStGO0FBOEQvRjs7R0FFRztBQUNILE1BQWEsMkJBQTJCO0lBQzlCLGVBQWUsQ0FBeUI7SUFDeEMsY0FBYyxDQUF3QjtJQUN0QyxhQUFhLENBQVM7SUFFOUIsWUFBWSxnQkFBd0IsT0FBTyxDQUFDLEdBQUcsRUFBRTtRQUMvQyxJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztRQUNuQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksK0NBQXNCLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLDZDQUFxQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyx3QkFBd0IsQ0FDNUIsVUFBMkMsRUFBRTtRQUU3QyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDakMsb0JBQUcsQ0FBQyxJQUFJLENBQUMsMkNBQTJDLENBQUMsQ0FBQztRQUV0RCxJQUFJO1lBQ0YsaUNBQWlDO1lBQ2pDLG9CQUFHLENBQUMsSUFBSSxDQUFDLDRDQUE0QyxDQUFDLENBQUM7WUFDdkQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBRWpDLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyw0QkFBNEIsQ0FBQztnQkFDdkUsbUJBQW1CLEVBQUUsSUFBSTtnQkFDekIsa0JBQWtCLEVBQUUsSUFBSTtnQkFDeEIsR0FBRyxPQUFPLENBQUMsZUFBZTthQUMzQixDQUFDLENBQUM7WUFF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QUUsQ0FBQztZQUNkLFlBQVksRUFBRSxDQUFDO1lBQ2YsY0FBYyxFQUFFLEVBQUU7WUFDbEIsTUFBTSxFQUFFLEVBQUU7WUFDVixpQkFBaUIsRUFBRSxFQUFFO1lBQ3JCLE9BQU8sRUFBRTtnQkFDUCxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7Z0JBQ3JCLE9BQU8sRUFBRSxJQUFJLElBQUksRUFBRTtnQkFDbkIsU0FBUyxFQUFFLENBQUM7Z0JBQ1osY0FBYyxFQUFFLENBQUM7Z0JBQ2pCLGVBQWUsRUFBRSxDQUFDO2dCQUNsQixXQUFXLEVBQUUsQ0FBQztnQkFDZCxZQUFZLEVBQUUsQ0FBQztnQkFDZixjQUFjLEVBQUUsQ0FBQztnQkFDakIsa0JBQWtCLEVBQUUsQ0FBQzthQUN0QjtTQUNGLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFocEJELGtFQWdwQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2xpbnRpbmcvQXV0b21hdGVkTGludGluZ0ludGVncmF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0b21hdGVkTGludGluZ0ludGVncmF0aW9uIC0gSW50ZWdyYXRpb24gc2VydmljZSBmb3IgYXV0b21hdGVkIGxpbnRpbmcgd2l0aCBzYWZldHkgcHJvdG9jb2xzXG4gKlxuICogVGhpcyBzZXJ2aWNlIG9yY2hlc3RyYXRlcyB0aGUgY29tcGxldGUgYXV0b21hdGVkIGxpbnRpbmcgd29ya2Zsb3csIGludGVncmF0aW5nXG4gKiBlcnJvciBhbmFseXNpcywgcmVzb2x1dGlvbiBzdHJhdGVneSBnZW5lcmF0aW9uLCBhbmQgYXV0b21hdGVkIGZpeGluZyB3aXRoIGNvbXByZWhlbnNpdmVcbiAqIHNhZmV0eSBwcm90b2NvbHMgYW5kIHZhbGlkYXRpb24gbWVjaGFuaXNtcy5cbiAqL1xuXG5pbXBvcnQgeyBsb2cgfSBmcm9tICdAL3NlcnZpY2VzL0xvZ2dpbmdTZXJ2aWNlJztcblxuaW1wb3J0IHtcbiAgQXV0b21hdGVkTGludGluZ0ZpeGVyLFxuICBBdXRvbWF0ZWRGaXhSZXN1bHQsXG4gIEJhdGNoUHJvY2Vzc2luZ09wdGlvbnMsXG4gIFNhZmV0eVByb3RvY29scyxcbn0gZnJvbSAnLi9BdXRvbWF0ZWRMaW50aW5nRml4ZXInO1xuaW1wb3J0IHsgTGludGluZ0FuYWx5c2lzU2VydmljZSwgQ29tcHJlaGVuc2l2ZUFuYWx5c2lzUmVzdWx0IH0gZnJvbSAnLi9MaW50aW5nQW5hbHlzaXNTZXJ2aWNlJztcbmltcG9ydCB7IExpbnRpbmdJc3N1ZSwgQ2F0ZWdvcml6ZWRFcnJvcnMgfSBmcm9tICcuL0xpbnRpbmdFcnJvckFuYWx5emVyJztcbmltcG9ydCB7IFJlc29sdXRpb25TdHJhdGVneSB9IGZyb20gJy4vUmVzb2x1dGlvblN0cmF0ZWd5R2VuZXJhdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBBdXRvbWF0ZWRMaW50aW5nV29ya2Zsb3dPcHRpb25zIHtcbiAgYW5hbHlzaXNPcHRpb25zPzoge1xuICAgIGluY2x1ZGVGaWxlQW5hbHlzaXM/OiBib29sZWFuO1xuICAgIGdlbmVyYXRlU3RyYXRlZ2llcz86IGJvb2xlYW47XG4gICAgZm9jdXNBcmVhcz86ICgnaW1wb3J0JyB8ICd0eXBlc2NyaXB0JyB8ICdyZWFjdCcgfCAnc3R5bGUnIHwgJ2RvbWFpbicpW107XG4gICAgcmlza1RvbGVyYW5jZT86ICdjb25zZXJ2YXRpdmUnIHwgJ21vZGVyYXRlJyB8ICdhZ2dyZXNzaXZlJztcbiAgfTtcbiAgYmF0Y2hQcm9jZXNzaW5nT3B0aW9ucz86IFBhcnRpYWw8QmF0Y2hQcm9jZXNzaW5nT3B0aW9ucz47XG4gIHNhZmV0eVByb3RvY29scz86IFBhcnRpYWw8U2FmZXR5UHJvdG9jb2xzPjtcbiAgYXV0b21hdGlvbkxldmVsPzogJ2NvbnNlcnZhdGl2ZScgfCAnbW9kZXJhdGUnIHwgJ2FnZ3Jlc3NpdmUnO1xuICBkcnlSdW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dG9tYXRlZExpbnRpbmdXb3JrZmxvd1Jlc3VsdCB7XG4gIGFuYWx5c2lzOiBDb21wcmVoZW5zaXZlQW5hbHlzaXNSZXN1bHQ7XG4gIGZpeFJlc3VsdHM6IHtcbiAgICBhdXRvbWF0ZWQ6IEF1dG9tYXRlZEZpeFJlc3VsdDtcbiAgICB1bnVzZWRWYXJpYWJsZXM/OiBBdXRvbWF0ZWRGaXhSZXN1bHQ7XG4gICAgaW1wb3J0cz86IEF1dG9tYXRlZEZpeFJlc3VsdDtcbiAgICB0eXBlQW5ub3RhdGlvbnM/OiBBdXRvbWF0ZWRGaXhSZXN1bHQ7XG4gIH07XG4gIHN1bW1hcnk6IFdvcmtmbG93U3VtbWFyeTtcbiAgcmVjb21tZW5kYXRpb25zOiBXb3JrZmxvd1JlY29tbWVuZGF0aW9uW107XG4gIG1ldHJpY3M6IFdvcmtmbG93TWV0cmljcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3JrZmxvd1N1bW1hcnkge1xuICB0b3RhbElzc3Vlc0FuYWx5emVkOiBudW1iZXI7XG4gIHRvdGFsSXNzdWVzRml4ZWQ6IG51bWJlcjtcbiAgdG90YWxJc3N1ZXNGYWlsZWQ6IG51bWJlcjtcbiAgYXV0b21hdGlvblN1Y2Nlc3NSYXRlOiBudW1iZXI7XG4gIHRpbWVUb0NvbXBsZXRpb246IG51bWJlcjtcbiAgc2FmZXR5RXZlbnRzVHJpZ2dlcmVkOiBudW1iZXI7XG4gIHJvbGxiYWNrc1BlcmZvcm1lZDogbnVtYmVyO1xuICBvdmVyYWxsU3VjY2VzczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3JrZmxvd1JlY29tbWVuZGF0aW9uIHtcbiAgdHlwZTogJ2ltbWVkaWF0ZScgfCAnc2hvcnQtdGVybScgfCAnbG9uZy10ZXJtJyB8ICdwcm9jZXNzLWltcHJvdmVtZW50JztcbiAgcHJpb3JpdHk6ICdjcml0aWNhbCcgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBhY3Rpb25JdGVtczogc3RyaW5nW107XG4gIGVzdGltYXRlZEltcGFjdDogJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93JztcbiAgYXV0b21hdGFibGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV29ya2Zsb3dNZXRyaWNzIHtcbiAgYW5hbHlzaXNUaW1lOiBudW1iZXI7XG4gIGZpeGluZ1RpbWU6IG51bWJlcjtcbiAgdmFsaWRhdGlvblRpbWU6IG51bWJlcjtcbiAgdG90YWxXb3JrZmxvd1RpbWU6IG51bWJlcjtcbiAgaXNzdWVzUGVyTWludXRlOiBudW1iZXI7XG4gIGF1dG9tYXRpb25FZmZpY2llbmN5OiBudW1iZXI7XG4gIHNhZmV0eVByb3RvY29sRWZmZWN0aXZlbmVzczogbnVtYmVyO1xuICBxdWFsaXR5SW1wcm92ZW1lbnQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBNYWluIEF1dG9tYXRlZExpbnRpbmdJbnRlZ3JhdGlvbiBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgQXV0b21hdGVkTGludGluZ0ludGVncmF0aW9uIHtcbiAgcHJpdmF0ZSBhbmFseXNpc1NlcnZpY2U6IExpbnRpbmdBbmFseXNpc1NlcnZpY2U7XG4gIHByaXZhdGUgYXV0b21hdGVkRml4ZXI6IEF1dG9tYXRlZExpbnRpbmdGaXhlcjtcbiAgcHJpdmF0ZSB3b3Jrc3BhY2VSb290OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Iod29ya3NwYWNlUm9vdDogc3RyaW5nID0gcHJvY2Vzcy5jd2QoKSkge1xuICAgIHRoaXMud29ya3NwYWNlUm9vdCA9IHdvcmtzcGFjZVJvb3Q7XG4gICAgdGhpcy5hbmFseXNpc1NlcnZpY2UgPSBuZXcgTGludGluZ0FuYWx5c2lzU2VydmljZSh3b3Jrc3BhY2VSb290KTtcbiAgICB0aGlzLmF1dG9tYXRlZEZpeGVyID0gbmV3IEF1dG9tYXRlZExpbnRpbmdGaXhlcih3b3Jrc3BhY2VSb290KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGNvbXBsZXRlIGF1dG9tYXRlZCBsaW50aW5nIHdvcmtmbG93XG4gICAqL1xuICBhc3luYyBleGVjdXRlQXV0b21hdGVkV29ya2Zsb3coXG4gICAgb3B0aW9uczogQXV0b21hdGVkTGludGluZ1dvcmtmbG93T3B0aW9ucyA9IHt9LFxuICApOiBQcm9taXNlPEF1dG9tYXRlZExpbnRpbmdXb3JrZmxvd1Jlc3VsdD4ge1xuICAgIGNvbnN0IHdvcmtmbG93U3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIGxvZy5pbmZvKCfwn5qAIFN0YXJ0aW5nIGF1dG9tYXRlZCBsaW50aW5nIHdvcmtmbG93Li4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gU3RlcCAxOiBDb21wcmVoZW5zaXZlIEFuYWx5c2lzXG4gICAgICBsb2cuaW5mbygn8J+TiiBQaGFzZSAxOiBDb21wcmVoZW5zaXZlIExpbnRpbmcgQW5hbHlzaXMnKTtcbiAgICAgIGNvbnN0IGFuYWx5c2lzU3RhcnQgPSBEYXRlLm5vdygpO1xuXG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHlzaXNTZXJ2aWNlLnBlcmZvcm1Db21wcmVoZW5zaXZlQW5hbHlzaXMoe1xuICAgICAgICBpbmNsdWRlRmlsZUFuYWx5c2lzOiB0cnVlLFxuICAgICAgICBnZW5lcmF0ZVN0cmF0ZWdpZXM6IHRydWUsXG4gICAgICAgIC4uLm9wdGlvbnMuYW5hbHlzaXNPcHRpb25zLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFuYWx5c2lzVGltZSA9IERhdGUubm93KCkgLSBhbmFseXNpc1N0YXJ0O1xuICAgICAgbG9nLmluZm8oYOKchSBBbmFseXNpcyBjb21wbGV0ZSBpbiAke2FuYWx5c2lzVGltZX1tc2ApO1xuXG4gICAgICAvLyBTdGVwIDI6IENvbmZpZ3VyZSBTYWZldHkgUHJvdG9jb2xzXG4gICAgICBsb2cuaW5mbygn8J+boe+4jyBQaGFzZSAyOiBDb25maWd1cmluZyBTYWZldHkgUHJvdG9jb2xzJyk7XG4gICAgICBjb25zdCBzYWZldHlQcm90b2NvbHMgPSB0aGlzLmNvbmZpZ3VyZVNhZmV0eVByb3RvY29scyhhbmFseXNpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFJlaW5pdGlhbGl6ZSBmaXhlciB3aXRoIGNvbmZpZ3VyZWQgc2FmZXR5IHByb3RvY29sc1xuICAgICAgdGhpcy5hdXRvbWF0ZWRGaXhlciA9IG5ldyBBdXRvbWF0ZWRMaW50aW5nRml4ZXIodGhpcy53b3Jrc3BhY2VSb290LCBzYWZldHlQcm90b2NvbHMpO1xuXG4gICAgICAvLyBTdGVwIDM6IEF1dG9tYXRlZCBGaXhpbmdcbiAgICAgIGxvZy5pbmZvKCfwn5SnIFBoYXNlIDM6IEF1dG9tYXRlZCBFcnJvciBSZXNvbHV0aW9uJyk7XG4gICAgICBjb25zdCBmaXhpbmdTdGFydCA9IERhdGUubm93KCk7XG5cbiAgICAgIGNvbnN0IGZpeFJlc3VsdHMgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdXRvbWF0ZWRGaXhlcyhhbmFseXNpcywgb3B0aW9ucyk7XG5cbiAgICAgIGNvbnN0IGZpeGluZ1RpbWUgPSBEYXRlLm5vdygpIC0gZml4aW5nU3RhcnQ7XG4gICAgICBsb2cuaW5mbyhg4pyFIEF1dG9tYXRlZCBmaXhlcyBjb21wbGV0ZSBpbiAke2ZpeGluZ1RpbWV9bXNgKTtcblxuICAgICAgLy8gU3RlcCA0OiBHZW5lcmF0ZSBTdW1tYXJ5IGFuZCBSZWNvbW1lbmRhdGlvbnNcbiAgICAgIGxvZy5pbmZvKCfwn5OLIFBoYXNlIDQ6IEdlbmVyYXRpbmcgU3VtbWFyeSBhbmQgUmVjb21tZW5kYXRpb25zJyk7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gdGhpcy5nZW5lcmF0ZVdvcmtmbG93U3VtbWFyeShhbmFseXNpcywgZml4UmVzdWx0cywgd29ya2Zsb3dTdGFydCk7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB0aGlzLmdlbmVyYXRlV29ya2Zsb3dSZWNvbW1lbmRhdGlvbnMoYW5hbHlzaXMsIGZpeFJlc3VsdHMsIHN1bW1hcnkpO1xuXG4gICAgICAvLyBTdGVwIDU6IENhbGN1bGF0ZSBNZXRyaWNzXG4gICAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5jYWxjdWxhdGVXb3JrZmxvd01ldHJpY3MoXG4gICAgICAgIGFuYWx5c2lzVGltZSxcbiAgICAgICAgZml4aW5nVGltZSxcbiAgICAgICAgd29ya2Zsb3dTdGFydCxcbiAgICAgICAgYW5hbHlzaXMsXG4gICAgICAgIGZpeFJlc3VsdHMsXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHQ6IEF1dG9tYXRlZExpbnRpbmdXb3JrZmxvd1Jlc3VsdCA9IHtcbiAgICAgICAgYW5hbHlzaXMsXG4gICAgICAgIGZpeFJlc3VsdHMsXG4gICAgICAgIHN1bW1hcnksXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgbWV0cmljcyxcbiAgICAgIH07XG5cbiAgICAgIGxvZy5pbmZvKCfwn46JIEF1dG9tYXRlZCBsaW50aW5nIHdvcmtmbG93IGNvbXBsZXRlIScpO1xuICAgICAgdGhpcy5sb2dXb3JrZmxvd1Jlc3VsdHMocmVzdWx0KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEF1dG9tYXRlZCBsaW50aW5nIHdvcmtmbG93IGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBxdWljayBhdXRvbWF0ZWQgZml4ZXMgZm9yIGltbWVkaWF0ZSB3aW5zXG4gICAqL1xuICBhc3luYyBleGVjdXRlUXVpY2tGaXhlcyhcbiAgICBvcHRpb25zOiBQYXJ0aWFsPEF1dG9tYXRlZExpbnRpbmdXb3JrZmxvd09wdGlvbnM+ID0ge30sXG4gICk6IFByb21pc2U8QXV0b21hdGVkRml4UmVzdWx0PiB7XG4gICAgbG9nLmluZm8oJ+KaoSBFeGVjdXRpbmcgcXVpY2sgYXV0b21hdGVkIGZpeGVzLi4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUXVpY2sgYW5hbHlzaXMgdG8gaWRlbnRpZnkgYXV0by1maXhhYmxlIGlzc3Vlc1xuICAgICAgY29uc3QgcXVpY2tBbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHlzaXNTZXJ2aWNlLnBlcmZvcm1RdWlja0FuYWx5c2lzKCk7XG5cbiAgICAgIC8vIENvbmZpZ3VyZSBjb25zZXJ2YXRpdmUgc2FmZXR5IHByb3RvY29scyBmb3IgcXVpY2sgZml4ZXNcbiAgICAgIGNvbnN0IHNhZmV0eVByb3RvY29sczogU2FmZXR5UHJvdG9jb2xzID0ge1xuICAgICAgICBlbmFibGVSb2xsYmFjazogdHJ1ZSxcbiAgICAgICAgdmFsaWRhdGVCZWZvcmVGaXg6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlQWZ0ZXJGaXg6IHRydWUsXG4gICAgICAgIG1heEZhaWx1cmVzQmVmb3JlU3RvcDogMyxcbiAgICAgICAgcmVxdWlyZU1hbnVhbEFwcHJvdmFsOiBmYWxzZSxcbiAgICAgICAgcHJlc2VydmVQYXR0ZXJuczogW1xuICAgICAgICAgICcqKi9jYWxjdWxhdGlvbnMvKionLFxuICAgICAgICAgICcqKi9kYXRhL3BsYW5ldHMvKionLFxuICAgICAgICAgICcqKi8qYXN0cm9sb2dpY2FsKicsXG4gICAgICAgICAgJyoqLypjYW1wYWlnbionLFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcXVpY2tGaXhlciA9IG5ldyBBdXRvbWF0ZWRMaW50aW5nRml4ZXIodGhpcy53b3Jrc3BhY2VSb290LCBzYWZldHlQcm90b2NvbHMpO1xuXG4gICAgICAvLyBGb2N1cyBvbmx5IG9uIHF1aWNrIHdpbnMgKGF1dG8tZml4YWJsZSwgbG93IHJpc2spXG4gICAgICBjb25zdCBxdWlja1dpbklzc3VlcyA9IHF1aWNrQW5hbHlzaXMucXVpY2tXaW5zO1xuICAgICAgY29uc3QgY2F0ZWdvcml6ZWRRdWlja1dpbnM6IENhdGVnb3JpemVkRXJyb3JzID0ge1xuICAgICAgICB0b3RhbDogcXVpY2tXaW5Jc3N1ZXMubGVuZ3RoLFxuICAgICAgICBlcnJvcnM6IHF1aWNrV2luSXNzdWVzLmZpbHRlcihpID0+IGkuc2V2ZXJpdHkgPT09ICdlcnJvcicpLmxlbmd0aCxcbiAgICAgICAgd2FybmluZ3M6IHF1aWNrV2luSXNzdWVzLmZpbHRlcihpID0+IGkuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJykubGVuZ3RoLFxuICAgICAgICBieUNhdGVnb3J5OiB0aGlzLmdyb3VwSXNzdWVzQnlDYXRlZ29yeShxdWlja1dpbklzc3VlcyksXG4gICAgICAgIGJ5UHJpb3JpdHk6IHRoaXMuZ3JvdXBJc3N1ZXNCeVByaW9yaXR5KHF1aWNrV2luSXNzdWVzKSxcbiAgICAgICAgYnlGaWxlOiB0aGlzLmdyb3VwSXNzdWVzQnlGaWxlKHF1aWNrV2luSXNzdWVzKSxcbiAgICAgICAgYXV0b0ZpeGFibGU6IHF1aWNrV2luSXNzdWVzLFxuICAgICAgICByZXF1aXJlc01hbnVhbFJldmlldzogW10sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBiYXRjaE9wdGlvbnM6IEJhdGNoUHJvY2Vzc2luZ09wdGlvbnMgPSB7XG4gICAgICAgIGJhdGNoU2l6ZTogNSxcbiAgICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IDEsXG4gICAgICAgIHZhbGlkYXRlQWZ0ZXJFYWNoQmF0Y2g6IHRydWUsXG4gICAgICAgIGNvbnRpbnVlT25FcnJvcjogZmFsc2UsXG4gICAgICAgIGNyZWF0ZUJhY2t1cHM6IHRydWUsXG4gICAgICAgIGRyeVJ1bjogb3B0aW9ucy5kcnlSdW4gfHwgZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWlja0ZpeGVyLmFwcGx5QXV0b21hdGVkRml4ZXMoY2F0ZWdvcml6ZWRRdWlja1dpbnMsIGJhdGNoT3B0aW9ucyk7XG5cbiAgICAgIGxvZy5pbmZvKGDimqEgUXVpY2sgZml4ZXMgY29tcGxldGU6ICR7cmVzdWx0LmZpeGVkSXNzdWVzfSBpc3N1ZXMgZml4ZWRgKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBRdWljayBmaXhlcyBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgc3BlY2lhbGl6ZWQgdW51c2VkIHZhcmlhYmxlIGNsZWFudXBcbiAgICovXG4gIGFzeW5jIGV4ZWN1dGVVbnVzZWRWYXJpYWJsZUNsZWFudXAoXG4gICAgb3B0aW9uczoge1xuICAgICAgcHJlZml4V2l0aFVuZGVyc2NvcmU/OiBib29sZWFuO1xuICAgICAgcmVtb3ZlQ29tcGxldGVseT86IGJvb2xlYW47XG4gICAgICBza2lwRG9tYWluRmlsZXM/OiBib29sZWFuO1xuICAgICAgc2tpcFRlc3RGaWxlcz86IGJvb2xlYW47XG4gICAgICBkcnlSdW4/OiBib29sZWFuO1xuICAgIH0gPSB7fSxcbiAgKTogUHJvbWlzZTxBdXRvbWF0ZWRGaXhSZXN1bHQ+IHtcbiAgICBsb2cuaW5mbygn8J+nuSBFeGVjdXRpbmcgdW51c2VkIHZhcmlhYmxlIGNsZWFudXAuLi4nKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBBbmFseXplIGZvciB1bnVzZWQgdmFyaWFibGUgaXNzdWVzXG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHlzaXNTZXJ2aWNlLnBlcmZvcm1Db21wcmVoZW5zaXZlQW5hbHlzaXMoe1xuICAgICAgICBmb2N1c0FyZWFzOiBbJ3R5cGVzY3JpcHQnXSxcbiAgICAgICAgZ2VuZXJhdGVTdHJhdGVnaWVzOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1bnVzZWRWYXJJc3N1ZXMgPSBPYmplY3QudmFsdWVzKGFuYWx5c2lzLmNhdGVnb3JpemVkRXJyb3JzLmJ5Q2F0ZWdvcnkpXG4gICAgICAgIC5mbGF0KClcbiAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICBpc3N1ZSA9PiBpc3N1ZS5ydWxlLmluY2x1ZGVzKCduby11bnVzZWQtdmFycycpIHx8IGlzc3VlLnJ1bGUuaW5jbHVkZXMoJ3VudXNlZC12YXJzJyksXG4gICAgICAgICk7XG5cbiAgICAgIGlmICh1bnVzZWRWYXJJc3N1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZy5pbmZvKCfinIUgTm8gdW51c2VkIHZhcmlhYmxlIGlzc3VlcyBmb3VuZCcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZml4ZWRJc3N1ZXM6IDAsXG4gICAgICAgICAgZmFpbGVkSXNzdWVzOiAwLFxuICAgICAgICAgIHByb2Nlc3NlZEZpbGVzOiBbXSxcbiAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgIHZhbGlkYXRpb25SZXN1bHRzOiBbXSxcbiAgICAgICAgICBtZXRyaWNzOiB7XG4gICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdG90YWxUaW1lOiAwLFxuICAgICAgICAgICAgZmlsZXNQcm9jZXNzZWQ6IDAsXG4gICAgICAgICAgICBpc3N1ZXNBdHRlbXB0ZWQ6IDAsXG4gICAgICAgICAgICBpc3N1ZXNGaXhlZDogMCxcbiAgICAgICAgICAgIGlzc3Vlc0ZhaWxlZDogMCxcbiAgICAgICAgICAgIHZhbGlkYXRpb25UaW1lOiAwLFxuICAgICAgICAgICAgcm9sbGJhY2tzUGVyZm9ybWVkOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNhZmV0eVByb3RvY29sczogU2FmZXR5UHJvdG9jb2xzID0ge1xuICAgICAgICBlbmFibGVSb2xsYmFjazogdHJ1ZSxcbiAgICAgICAgdmFsaWRhdGVCZWZvcmVGaXg6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlQWZ0ZXJGaXg6IHRydWUsXG4gICAgICAgIG1heEZhaWx1cmVzQmVmb3JlU3RvcDogNSxcbiAgICAgICAgcmVxdWlyZU1hbnVhbEFwcHJvdmFsOiBmYWxzZSxcbiAgICAgICAgcHJlc2VydmVQYXR0ZXJuczogWycqKi9jYWxjdWxhdGlvbnMvKionLCAnKiovZGF0YS9wbGFuZXRzLyoqJywgJyoqLyphc3Ryb2xvZ2ljYWwqJ10sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBmaXhlciA9IG5ldyBBdXRvbWF0ZWRMaW50aW5nRml4ZXIodGhpcy53b3Jrc3BhY2VSb290LCBzYWZldHlQcm90b2NvbHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmaXhlci5oYW5kbGVVbnVzZWRWYXJpYWJsZXModW51c2VkVmFySXNzdWVzLCB7XG4gICAgICAgIHByZWZpeFdpdGhVbmRlcnNjb3JlOiBvcHRpb25zLnByZWZpeFdpdGhVbmRlcnNjb3JlID8/IHRydWUsXG4gICAgICAgIHJlbW92ZUNvbXBsZXRlbHk6IG9wdGlvbnMucmVtb3ZlQ29tcGxldGVseSA/PyBmYWxzZSxcbiAgICAgICAgc2tpcERvbWFpbkZpbGVzOiBvcHRpb25zLnNraXBEb21haW5GaWxlcyA/PyB0cnVlLFxuICAgICAgICBza2lwVGVzdEZpbGVzOiBvcHRpb25zLnNraXBUZXN0RmlsZXMgPz8gZmFsc2UsXG4gICAgICAgIHByZXNlcnZlUGF0dGVybnM6IFsnKiovY2FsY3VsYXRpb25zLyoqJywgJyoqL2RhdGEvcGxhbmV0cy8qKicsICcqKi8qYXN0cm9sb2dpY2FsKiddLFxuICAgICAgfSk7XG5cbiAgICAgIGxvZy5pbmZvKGDwn6e5IFVudXNlZCB2YXJpYWJsZSBjbGVhbnVwIGNvbXBsZXRlOiAke3Jlc3VsdC5maXhlZElzc3Vlc30gdmFyaWFibGVzIGhhbmRsZWRgKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBVbnVzZWQgdmFyaWFibGUgY2xlYW51cCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgaW1wb3J0IG9wdGltaXphdGlvbiB3b3JrZmxvd1xuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZUltcG9ydE9wdGltaXphdGlvbihcbiAgICBvcHRpb25zOiB7XG4gICAgICByZW1vdmVEdXBsaWNhdGVzPzogYm9vbGVhbjtcbiAgICAgIG9yZ2FuaXplSW1wb3J0cz86IGJvb2xlYW47XG4gICAgICByZW1vdmVVbnVzZWQ/OiBib29sZWFuO1xuICAgICAgc29ydEltcG9ydHM/OiBib29sZWFuO1xuICAgICAgZHJ5UnVuPzogYm9vbGVhbjtcbiAgICB9ID0ge30sXG4gICk6IFByb21pc2U8QXV0b21hdGVkRml4UmVzdWx0PiB7XG4gICAgbG9nLmluZm8oJ/Cfk6YgRXhlY3V0aW5nIGltcG9ydCBvcHRpbWl6YXRpb24uLi4nKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBBbmFseXplIGZvciBpbXBvcnQtcmVsYXRlZCBpc3N1ZXNcbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXNpc1NlcnZpY2UucGVyZm9ybUNvbXByZWhlbnNpdmVBbmFseXNpcyh7XG4gICAgICAgIGZvY3VzQXJlYXM6IFsnaW1wb3J0J10sXG4gICAgICAgIGdlbmVyYXRlU3RyYXRlZ2llczogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgaW1wb3J0SXNzdWVzID0gYW5hbHlzaXMuY2F0ZWdvcml6ZWRFcnJvcnMuYnlDYXRlZ29yeVsnaW1wb3J0J10gfHwgW107XG5cbiAgICAgIGlmIChpbXBvcnRJc3N1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZy5pbmZvKCfinIUgTm8gaW1wb3J0IGlzc3VlcyBmb3VuZCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbXB0eUZpeFJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzYWZldHlQcm90b2NvbHM6IFNhZmV0eVByb3RvY29scyA9IHtcbiAgICAgICAgZW5hYmxlUm9sbGJhY2s6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlQmVmb3JlRml4OiB0cnVlLFxuICAgICAgICB2YWxpZGF0ZUFmdGVyRml4OiB0cnVlLFxuICAgICAgICBtYXhGYWlsdXJlc0JlZm9yZVN0b3A6IDUsXG4gICAgICAgIHJlcXVpcmVNYW51YWxBcHByb3ZhbDogZmFsc2UsXG4gICAgICAgIHByZXNlcnZlUGF0dGVybnM6IFsnKiovY2FsY3VsYXRpb25zLyoqJywgJyoqL2RhdGEvcGxhbmV0cy8qKiddLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZml4ZXIgPSBuZXcgQXV0b21hdGVkTGludGluZ0ZpeGVyKHRoaXMud29ya3NwYWNlUm9vdCwgc2FmZXR5UHJvdG9jb2xzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZml4ZXIub3B0aW1pemVJbXBvcnRzKGltcG9ydElzc3Vlcywge1xuICAgICAgICByZW1vdmVEdXBsaWNhdGVzOiBvcHRpb25zLnJlbW92ZUR1cGxpY2F0ZXMgPz8gdHJ1ZSxcbiAgICAgICAgb3JnYW5pemVJbXBvcnRzOiBvcHRpb25zLm9yZ2FuaXplSW1wb3J0cyA/PyB0cnVlLFxuICAgICAgICByZW1vdmVVbnVzZWQ6IG9wdGlvbnMucmVtb3ZlVW51c2VkID8/IHRydWUsXG4gICAgICAgIHByZXNlcnZlQ29tbWVudHM6IHRydWUsXG4gICAgICAgIHNvcnRJbXBvcnRzOiBvcHRpb25zLnNvcnRJbXBvcnRzID8/IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgbG9nLmluZm8oYPCfk6YgSW1wb3J0IG9wdGltaXphdGlvbiBjb21wbGV0ZTogJHtyZXN1bHQuZml4ZWRJc3N1ZXN9IGltcG9ydHMgb3B0aW1pemVkYCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgSW1wb3J0IG9wdGltaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuXG4gIHByaXZhdGUgY29uZmlndXJlU2FmZXR5UHJvdG9jb2xzKFxuICAgIGFuYWx5c2lzOiBDb21wcmVoZW5zaXZlQW5hbHlzaXNSZXN1bHQsXG4gICAgb3B0aW9uczogQXV0b21hdGVkTGludGluZ1dvcmtmbG93T3B0aW9ucyxcbiAgKTogU2FmZXR5UHJvdG9jb2xzIHtcbiAgICBjb25zdCBhdXRvbWF0aW9uTGV2ZWwgPSBvcHRpb25zLmF1dG9tYXRpb25MZXZlbCB8fCAnbW9kZXJhdGUnO1xuICAgIGNvbnN0IHJpc2tUb2xlcmFuY2UgPSBvcHRpb25zLmFuYWx5c2lzT3B0aW9ucz8ucmlza1RvbGVyYW5jZSB8fCAnbW9kZXJhdGUnO1xuXG4gICAgbGV0IG1heEZhaWx1cmVzID0gNTtcbiAgICBsZXQgcmVxdWlyZU1hbnVhbEFwcHJvdmFsID0gZmFsc2U7XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gYXV0b21hdGlvbiBsZXZlbFxuICAgIHN3aXRjaCAoYXV0b21hdGlvbkxldmVsKSB7XG4gICAgICBjYXNlICdjb25zZXJ2YXRpdmUnOlxuICAgICAgICBtYXhGYWlsdXJlcyA9IDI7XG4gICAgICAgIHJlcXVpcmVNYW51YWxBcHByb3ZhbCA9IGFuYWx5c2lzLnN1bW1hcnkuY3JpdGljYWxJc3N1ZXNDb3VudCA+IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYWdncmVzc2l2ZSc6XG4gICAgICAgIG1heEZhaWx1cmVzID0gMTA7XG4gICAgICAgIHJlcXVpcmVNYW51YWxBcHByb3ZhbCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vIG1vZGVyYXRlXG4gICAgICAgIG1heEZhaWx1cmVzID0gNTtcbiAgICAgICAgcmVxdWlyZU1hbnVhbEFwcHJvdmFsID0gYW5hbHlzaXMuc3VtbWFyeS5jcml0aWNhbElzc3Vlc0NvdW50ID4gNTtcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gcmlzayBhc3Nlc3NtZW50XG4gICAgaWYgKGFuYWx5c2lzLnN1bW1hcnkub3ZlcmFsbFJpc2tMZXZlbCA9PT0gJ2NyaXRpY2FsJykge1xuICAgICAgbWF4RmFpbHVyZXMgPSBNYXRoLm1pbihtYXhGYWlsdXJlcywgMik7XG4gICAgICByZXF1aXJlTWFudWFsQXBwcm92YWwgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoYW5hbHlzaXMuc3VtbWFyeS5vdmVyYWxsUmlza0xldmVsID09PSAnaGlnaCcpIHtcbiAgICAgIG1heEZhaWx1cmVzID0gTWF0aC5taW4obWF4RmFpbHVyZXMsIDMpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVSb2xsYmFjazogdHJ1ZSxcbiAgICAgIHZhbGlkYXRlQmVmb3JlRml4OiB0cnVlLFxuICAgICAgdmFsaWRhdGVBZnRlckZpeDogdHJ1ZSxcbiAgICAgIG1heEZhaWx1cmVzQmVmb3JlU3RvcDogbWF4RmFpbHVyZXMsXG4gICAgICByZXF1aXJlTWFudWFsQXBwcm92YWwsXG4gICAgICBwcmVzZXJ2ZVBhdHRlcm5zOiBbXG4gICAgICAgICcqKi9jYWxjdWxhdGlvbnMvKionLFxuICAgICAgICAnKiovZGF0YS9wbGFuZXRzLyoqJyxcbiAgICAgICAgJyoqLyphc3Ryb2xvZ2ljYWwqJyxcbiAgICAgICAgJyoqLypjYW1wYWlnbionLFxuICAgICAgICAnKiovdGVzdCovKionLFxuICAgICAgXSxcbiAgICAgIC4uLm9wdGlvbnMuc2FmZXR5UHJvdG9jb2xzLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVBdXRvbWF0ZWRGaXhlcyhcbiAgICBhbmFseXNpczogQ29tcHJlaGVuc2l2ZUFuYWx5c2lzUmVzdWx0LFxuICAgIG9wdGlvbnM6IEF1dG9tYXRlZExpbnRpbmdXb3JrZmxvd09wdGlvbnMsXG4gICk6IFByb21pc2U8QXV0b21hdGVkTGludGluZ1dvcmtmbG93UmVzdWx0WydmaXhSZXN1bHRzJ10+IHtcbiAgICBjb25zdCBiYXRjaE9wdGlvbnM6IEJhdGNoUHJvY2Vzc2luZ09wdGlvbnMgPSB7XG4gICAgICBiYXRjaFNpemU6IDEwLFxuICAgICAgbWF4Q29uY3VycmVudEJhdGNoZXM6IDEsXG4gICAgICB2YWxpZGF0ZUFmdGVyRWFjaEJhdGNoOiB0cnVlLFxuICAgICAgY29udGludWVPbkVycm9yOiBmYWxzZSxcbiAgICAgIGNyZWF0ZUJhY2t1cHM6IHRydWUsXG4gICAgICBkcnlSdW46IG9wdGlvbnMuZHJ5UnVuIHx8IGZhbHNlLFxuICAgICAgLi4ub3B0aW9ucy5iYXRjaFByb2Nlc3NpbmdPcHRpb25zLFxuICAgIH07XG5cbiAgICAvLyBNYWluIGF1dG9tYXRlZCBmaXhlc1xuICAgIGNvbnN0IGF1dG9tYXRlZCA9IGF3YWl0IHRoaXMuYXV0b21hdGVkRml4ZXIuYXBwbHlBdXRvbWF0ZWRGaXhlcyhcbiAgICAgIGFuYWx5c2lzLmNhdGVnb3JpemVkRXJyb3JzLFxuICAgICAgYmF0Y2hPcHRpb25zLFxuICAgICk7XG5cbiAgICBjb25zdCBmaXhSZXN1bHRzOiBBdXRvbWF0ZWRMaW50aW5nV29ya2Zsb3dSZXN1bHRbJ2ZpeFJlc3VsdHMnXSA9IHtcbiAgICAgIGF1dG9tYXRlZCxcbiAgICB9O1xuXG4gICAgLy8gU3BlY2lhbGl6ZWQgZml4ZXMgaWYgbWFpbiBhdXRvbWF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAgaWYgKGF1dG9tYXRlZC5zdWNjZXNzICYmICFvcHRpb25zLmRyeVJ1bikge1xuICAgICAgLy8gVW51c2VkIHZhcmlhYmxlcyBjbGVhbnVwXG4gICAgICBjb25zdCB1bnVzZWRWYXJJc3N1ZXMgPSBPYmplY3QudmFsdWVzKGFuYWx5c2lzLmNhdGVnb3JpemVkRXJyb3JzLmJ5Q2F0ZWdvcnkpXG4gICAgICAgIC5mbGF0KClcbiAgICAgICAgLmZpbHRlcihpc3N1ZSA9PiBpc3N1ZS5ydWxlLmluY2x1ZGVzKCduby11bnVzZWQtdmFycycpKTtcblxuICAgICAgaWYgKHVudXNlZFZhcklzc3Vlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxvZy5pbmZvKCfwn6e5IFJ1bm5pbmcgc3BlY2lhbGl6ZWQgdW51c2VkIHZhcmlhYmxlIGNsZWFudXAuLi4nKTtcbiAgICAgICAgZml4UmVzdWx0cy51bnVzZWRWYXJpYWJsZXMgPSBhd2FpdCB0aGlzLmF1dG9tYXRlZEZpeGVyLmhhbmRsZVVudXNlZFZhcmlhYmxlcyhcbiAgICAgICAgICB1bnVzZWRWYXJJc3N1ZXMsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJlZml4V2l0aFVuZGVyc2NvcmU6IHRydWUsXG4gICAgICAgICAgICBza2lwRG9tYWluRmlsZXM6IHRydWUsXG4gICAgICAgICAgICBza2lwVGVzdEZpbGVzOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBJbXBvcnQgb3B0aW1pemF0aW9uXG4gICAgICBjb25zdCBpbXBvcnRJc3N1ZXMgPSBhbmFseXNpcy5jYXRlZ29yaXplZEVycm9ycy5ieUNhdGVnb3J5WydpbXBvcnQnXSB8fCBbXTtcbiAgICAgIGlmIChpbXBvcnRJc3N1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2cuaW5mbygn8J+TpiBSdW5uaW5nIHNwZWNpYWxpemVkIGltcG9ydCBvcHRpbWl6YXRpb24uLi4nKTtcbiAgICAgICAgZml4UmVzdWx0cy5pbXBvcnRzID0gYXdhaXQgdGhpcy5hdXRvbWF0ZWRGaXhlci5vcHRpbWl6ZUltcG9ydHMoaW1wb3J0SXNzdWVzLCB7XG4gICAgICAgICAgcmVtb3ZlRHVwbGljYXRlczogdHJ1ZSxcbiAgICAgICAgICBvcmdhbml6ZUltcG9ydHM6IHRydWUsXG4gICAgICAgICAgc29ydEltcG9ydHM6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBUeXBlIGFubm90YXRpb24gaW1wcm92ZW1lbnRzIChjb25zZXJ2YXRpdmUgYXBwcm9hY2gpXG4gICAgICBjb25zdCB0eXBlSXNzdWVzID0gT2JqZWN0LnZhbHVlcyhhbmFseXNpcy5jYXRlZ29yaXplZEVycm9ycy5ieUNhdGVnb3J5KVxuICAgICAgICAuZmxhdCgpXG4gICAgICAgIC5maWx0ZXIoaXNzdWUgPT4gaXNzdWUucnVsZS5pbmNsdWRlcygnbm8tZXhwbGljaXQtYW55JykpO1xuXG4gICAgICBpZiAodHlwZUlzc3Vlcy5sZW5ndGggPiAwICYmIG9wdGlvbnMuYXV0b21hdGlvbkxldmVsICE9PSAnY29uc2VydmF0aXZlJykge1xuICAgICAgICBsb2cuaW5mbygn8J+Pt++4jyBSdW5uaW5nIHR5cGUgYW5ub3RhdGlvbiBpbXByb3ZlbWVudHMuLi4nKTtcbiAgICAgICAgZml4UmVzdWx0cy50eXBlQW5ub3RhdGlvbnMgPSBhd2FpdCB0aGlzLmF1dG9tYXRlZEZpeGVyLmltcHJvdmVUeXBlQW5ub3RhdGlvbnModHlwZUlzc3Vlcywge1xuICAgICAgICAgIG1heENvbXBsZXhpdHk6ICdzaW1wbGUnLFxuICAgICAgICAgIHByZXNlcnZlRXhwbGljaXRBbnk6IFsnKiovY2FsY3VsYXRpb25zLyoqJywgJyoqL2RhdGEvcGxhbmV0cy8qKiddLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZml4UmVzdWx0cztcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVXb3JrZmxvd1N1bW1hcnkoXG4gICAgYW5hbHlzaXM6IENvbXByZWhlbnNpdmVBbmFseXNpc1Jlc3VsdCxcbiAgICBmaXhSZXN1bHRzOiBBdXRvbWF0ZWRMaW50aW5nV29ya2Zsb3dSZXN1bHRbJ2ZpeFJlc3VsdHMnXSxcbiAgICB3b3JrZmxvd1N0YXJ0OiBudW1iZXIsXG4gICk6IFdvcmtmbG93U3VtbWFyeSB7XG4gICAgY29uc3QgdG90YWxGaXhlZCA9XG4gICAgICBmaXhSZXN1bHRzLmF1dG9tYXRlZC5maXhlZElzc3VlcyArXG4gICAgICAoZml4UmVzdWx0cy51bnVzZWRWYXJpYWJsZXM/LmZpeGVkSXNzdWVzIHx8IDApICtcbiAgICAgIChmaXhSZXN1bHRzLmltcG9ydHM/LmZpeGVkSXNzdWVzIHx8IDApICtcbiAgICAgIChmaXhSZXN1bHRzLnR5cGVBbm5vdGF0aW9ucz8uZml4ZWRJc3N1ZXMgfHwgMCk7XG5cbiAgICBjb25zdCB0b3RhbEZhaWxlZCA9XG4gICAgICBmaXhSZXN1bHRzLmF1dG9tYXRlZC5mYWlsZWRJc3N1ZXMgK1xuICAgICAgKGZpeFJlc3VsdHMudW51c2VkVmFyaWFibGVzPy5mYWlsZWRJc3N1ZXMgfHwgMCkgK1xuICAgICAgKGZpeFJlc3VsdHMuaW1wb3J0cz8uZmFpbGVkSXNzdWVzIHx8IDApICtcbiAgICAgIChmaXhSZXN1bHRzLnR5cGVBbm5vdGF0aW9ucz8uZmFpbGVkSXNzdWVzIHx8IDApO1xuXG4gICAgY29uc3QgdG90YWxBdHRlbXB0ZWQgPSB0b3RhbEZpeGVkICsgdG90YWxGYWlsZWQ7XG4gICAgY29uc3QgYXV0b21hdGlvblN1Y2Nlc3NSYXRlID0gdG90YWxBdHRlbXB0ZWQgPiAwID8gdG90YWxGaXhlZCAvIHRvdGFsQXR0ZW1wdGVkIDogMDtcblxuICAgIGNvbnN0IHNhZmV0eUV2ZW50c1RyaWdnZXJlZCA9XG4gICAgICBmaXhSZXN1bHRzLmF1dG9tYXRlZC5lcnJvcnMubGVuZ3RoICtcbiAgICAgIChmaXhSZXN1bHRzLnVudXNlZFZhcmlhYmxlcz8uZXJyb3JzLmxlbmd0aCB8fCAwKSArXG4gICAgICAoZml4UmVzdWx0cy5pbXBvcnRzPy5lcnJvcnMubGVuZ3RoIHx8IDApICtcbiAgICAgIChmaXhSZXN1bHRzLnR5cGVBbm5vdGF0aW9ucz8uZXJyb3JzLmxlbmd0aCB8fCAwKTtcblxuICAgIGNvbnN0IHJvbGxiYWNrc1BlcmZvcm1lZCA9XG4gICAgICBmaXhSZXN1bHRzLmF1dG9tYXRlZC5tZXRyaWNzLnJvbGxiYWNrc1BlcmZvcm1lZCArXG4gICAgICAoZml4UmVzdWx0cy51bnVzZWRWYXJpYWJsZXM/Lm1ldHJpY3Mucm9sbGJhY2tzUGVyZm9ybWVkIHx8IDApICtcbiAgICAgIChmaXhSZXN1bHRzLmltcG9ydHM/Lm1ldHJpY3Mucm9sbGJhY2tzUGVyZm9ybWVkIHx8IDApICtcbiAgICAgIChmaXhSZXN1bHRzLnR5cGVBbm5vdGF0aW9ucz8ubWV0cmljcy5yb2xsYmFja3NQZXJmb3JtZWQgfHwgMCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxJc3N1ZXNBbmFseXplZDogYW5hbHlzaXMuc3VtbWFyeS50b3RhbElzc3VlcyxcbiAgICAgIHRvdGFsSXNzdWVzRml4ZWQ6IHRvdGFsRml4ZWQsXG4gICAgICB0b3RhbElzc3Vlc0ZhaWxlZDogdG90YWxGYWlsZWQsXG4gICAgICBhdXRvbWF0aW9uU3VjY2Vzc1JhdGUsXG4gICAgICB0aW1lVG9Db21wbGV0aW9uOiBEYXRlLm5vdygpIC0gd29ya2Zsb3dTdGFydCxcbiAgICAgIHNhZmV0eUV2ZW50c1RyaWdnZXJlZCxcbiAgICAgIHJvbGxiYWNrc1BlcmZvcm1lZCxcbiAgICAgIG92ZXJhbGxTdWNjZXNzOiBmaXhSZXN1bHRzLmF1dG9tYXRlZC5zdWNjZXNzICYmIGF1dG9tYXRpb25TdWNjZXNzUmF0ZSA+IDAuNyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVdvcmtmbG93UmVjb21tZW5kYXRpb25zKFxuICAgIGFuYWx5c2lzOiBDb21wcmVoZW5zaXZlQW5hbHlzaXNSZXN1bHQsXG4gICAgZml4UmVzdWx0czogQXV0b21hdGVkTGludGluZ1dvcmtmbG93UmVzdWx0WydmaXhSZXN1bHRzJ10sXG4gICAgc3VtbWFyeTogV29ya2Zsb3dTdW1tYXJ5LFxuICApOiBXb3JrZmxvd1JlY29tbWVuZGF0aW9uW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogV29ya2Zsb3dSZWNvbW1lbmRhdGlvbltdID0gW107XG5cbiAgICAvLyBJbW1lZGlhdGUgYWN0aW9ucyBiYXNlZCBvbiByZXN1bHRzXG4gICAgaWYgKHN1bW1hcnkucm9sbGJhY2tzUGVyZm9ybWVkID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaW1tZWRpYXRlJyxcbiAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgICAgdGl0bGU6ICdSZXZpZXcgUm9sbGJhY2sgRXZlbnRzJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGAke3N1bW1hcnkucm9sbGJhY2tzUGVyZm9ybWVkfSByb2xsYmFja3Mgb2NjdXJyZWQgZHVyaW5nIGF1dG9tYXRpb25gLFxuICAgICAgICBhY3Rpb25JdGVtczogW1xuICAgICAgICAgICdSZXZpZXcgcm9sbGJhY2sgbG9ncyBmb3IgcGF0dGVybnMnLFxuICAgICAgICAgICdJZGVudGlmeSBwcm9ibGVtYXRpYyBydWxlcyBvciBmaWxlcycsXG4gICAgICAgICAgJ0FkanVzdCBzYWZldHkgcHJvdG9jb2xzIGlmIG5lZWRlZCcsXG4gICAgICAgIF0sXG4gICAgICAgIGVzdGltYXRlZEltcGFjdDogJ2hpZ2gnLFxuICAgICAgICBhdXRvbWF0YWJsZTogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoc3VtbWFyeS5hdXRvbWF0aW9uU3VjY2Vzc1JhdGUgPCAwLjUpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2ltbWVkaWF0ZScsXG4gICAgICAgIHByaW9yaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICB0aXRsZTogJ0xvdyBBdXRvbWF0aW9uIFN1Y2Nlc3MgUmF0ZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgT25seSAke01hdGgucm91bmQoc3VtbWFyeS5hdXRvbWF0aW9uU3VjY2Vzc1JhdGUgKiAxMDApfSUgb2YgZml4ZXMgc3VjY2VlZGVkYCxcbiAgICAgICAgYWN0aW9uSXRlbXM6IFtcbiAgICAgICAgICAnUmV2aWV3IGZhaWxlZCBmaXhlcyBmb3IgY29tbW9uIHBhdHRlcm5zJyxcbiAgICAgICAgICAnQWRqdXN0IGF1dG9tYXRpb24gY29uZmlkZW5jZSB0aHJlc2hvbGRzJyxcbiAgICAgICAgICAnQ29uc2lkZXIgbWFudWFsIHJldmlldyBmb3IgY29tcGxleCBpc3N1ZXMnLFxuICAgICAgICBdLFxuICAgICAgICBlc3RpbWF0ZWRJbXBhY3Q6ICdoaWdoJyxcbiAgICAgICAgYXV0b21hdGFibGU6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2hvcnQtdGVybSBpbXByb3ZlbWVudHNcbiAgICBpZiAoYW5hbHlzaXMuc3VtbWFyeS5kb21haW5TcGVjaWZpY0NvdW50ID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiAnc2hvcnQtdGVybScsXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgdGl0bGU6ICdEb21haW4tU3BlY2lmaWMgUnVsZSBDb25maWd1cmF0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGAke2FuYWx5c2lzLnN1bW1hcnkuZG9tYWluU3BlY2lmaWNDb3VudH0gZG9tYWluLXNwZWNpZmljIGlzc3VlcyBuZWVkIGF0dGVudGlvbmAsXG4gICAgICAgIGFjdGlvbkl0ZW1zOiBbXG4gICAgICAgICAgJ0NyZWF0ZSBkb21haW4tc3BlY2lmaWMgRVNMaW50IHJ1bGUgY29uZmlndXJhdGlvbnMnLFxuICAgICAgICAgICdEb2N1bWVudCBkb21haW4tc3BlY2lmaWMgcGF0dGVybnMgYW5kIGV4Y2VwdGlvbnMnLFxuICAgICAgICAgICdUcmFpbiB0ZWFtIG9uIGRvbWFpbi1zcGVjaWZpYyBsaW50aW5nIHByYWN0aWNlcycsXG4gICAgICAgIF0sXG4gICAgICAgIGVzdGltYXRlZEltcGFjdDogJ21lZGl1bScsXG4gICAgICAgIGF1dG9tYXRhYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTG9uZy10ZXJtIHByb2Nlc3MgaW1wcm92ZW1lbnRzXG4gICAgaWYgKHN1bW1hcnkudG90YWxJc3N1ZXNBbmFseXplZCA+IDEwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiAnbG9uZy10ZXJtJyxcbiAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxuICAgICAgICB0aXRsZTogJ0ltcGxlbWVudCBDb250aW51b3VzIExpbnRpbmcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0xhcmdlIG51bWJlciBvZiBpc3N1ZXMgc3VnZ2VzdHMgbmVlZCBmb3IgY29udGludW91cyBxdWFsaXR5IG1vbml0b3JpbmcnLFxuICAgICAgICBhY3Rpb25JdGVtczogW1xuICAgICAgICAgICdTZXQgdXAgcHJlLWNvbW1pdCBob29rcyBmb3IgbGludGluZycsXG4gICAgICAgICAgJ0ltcGxlbWVudCBDSS9DRCBsaW50aW5nIGdhdGVzJyxcbiAgICAgICAgICAnU2NoZWR1bGUgcmVndWxhciBhdXRvbWF0ZWQgbGludGluZyBjYW1wYWlnbnMnLFxuICAgICAgICAgICdDcmVhdGUgcXVhbGl0eSBtZXRyaWNzIGRhc2hib2FyZCcsXG4gICAgICAgIF0sXG4gICAgICAgIGVzdGltYXRlZEltcGFjdDogJ2hpZ2gnLFxuICAgICAgICBhdXRvbWF0YWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgaW1wcm92ZW1lbnQgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKHN1bW1hcnkuYXV0b21hdGlvblN1Y2Nlc3NSYXRlID4gMC44KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdwcm9jZXNzLWltcHJvdmVtZW50JyxcbiAgICAgICAgcHJpb3JpdHk6ICdsb3cnLFxuICAgICAgICB0aXRsZTogJ0luY3JlYXNlIEF1dG9tYXRpb24gQWdncmVzc2l2ZW5lc3MnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0hpZ2ggc3VjY2VzcyByYXRlIHN1Z2dlc3RzIGF1dG9tYXRpb24gY2FuIGJlIG1vcmUgYWdncmVzc2l2ZScsXG4gICAgICAgIGFjdGlvbkl0ZW1zOiBbXG4gICAgICAgICAgJ0luY3JlYXNlIGJhdGNoIHNpemVzIGZvciBmYXN0ZXIgcHJvY2Vzc2luZycsXG4gICAgICAgICAgJ1JlZHVjZSB2YWxpZGF0aW9uIGZyZXF1ZW5jeSBmb3IgbG93LXJpc2sgY2hhbmdlcycsXG4gICAgICAgICAgJ0VuYWJsZSBtb3JlIGF1dG8tZml4IHJ1bGVzJyxcbiAgICAgICAgICAnQ29uc2lkZXIgYXV0b21hdGVkIGRlcGxveW1lbnQgb2YgZml4ZXMnLFxuICAgICAgICBdLFxuICAgICAgICBlc3RpbWF0ZWRJbXBhY3Q6ICdtZWRpdW0nLFxuICAgICAgICBhdXRvbWF0YWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVdvcmtmbG93TWV0cmljcyhcbiAgICBhbmFseXNpc1RpbWU6IG51bWJlcixcbiAgICBmaXhpbmdUaW1lOiBudW1iZXIsXG4gICAgd29ya2Zsb3dTdGFydDogbnVtYmVyLFxuICAgIGFuYWx5c2lzOiBDb21wcmVoZW5zaXZlQW5hbHlzaXNSZXN1bHQsXG4gICAgZml4UmVzdWx0czogQXV0b21hdGVkTGludGluZ1dvcmtmbG93UmVzdWx0WydmaXhSZXN1bHRzJ10sXG4gICk6IFdvcmtmbG93TWV0cmljcyB7XG4gICAgY29uc3QgdG90YWxXb3JrZmxvd1RpbWUgPSBEYXRlLm5vdygpIC0gd29ya2Zsb3dTdGFydDtcbiAgICBjb25zdCB2YWxpZGF0aW9uVGltZSA9IGZpeFJlc3VsdHMuYXV0b21hdGVkLm1ldHJpY3MudmFsaWRhdGlvblRpbWU7XG5cbiAgICBjb25zdCB0b3RhbEZpeGVkID1cbiAgICAgIGZpeFJlc3VsdHMuYXV0b21hdGVkLmZpeGVkSXNzdWVzICtcbiAgICAgIChmaXhSZXN1bHRzLnVudXNlZFZhcmlhYmxlcz8uZml4ZWRJc3N1ZXMgfHwgMCkgK1xuICAgICAgKGZpeFJlc3VsdHMuaW1wb3J0cz8uZml4ZWRJc3N1ZXMgfHwgMCkgK1xuICAgICAgKGZpeFJlc3VsdHMudHlwZUFubm90YXRpb25zPy5maXhlZElzc3VlcyB8fCAwKTtcblxuICAgIGNvbnN0IGlzc3Vlc1Blck1pbnV0ZSA9IHRvdGFsRml4ZWQgLyAodG90YWxXb3JrZmxvd1RpbWUgLyA2MDAwMCk7XG4gICAgY29uc3QgYXV0b21hdGlvbkVmZmljaWVuY3kgPSB0b3RhbEZpeGVkIC8gYW5hbHlzaXMuc3VtbWFyeS50b3RhbElzc3VlcztcblxuICAgIGNvbnN0IHNhZmV0eUV2ZW50cyA9IGZpeFJlc3VsdHMuYXV0b21hdGVkLmVycm9ycy5sZW5ndGg7XG4gICAgY29uc3Qgc2FmZXR5UHJvdG9jb2xFZmZlY3RpdmVuZXNzID1cbiAgICAgIHNhZmV0eUV2ZW50cyA+IDAgPyBmaXhSZXN1bHRzLmF1dG9tYXRlZC5tZXRyaWNzLnJvbGxiYWNrc1BlcmZvcm1lZCAvIHNhZmV0eUV2ZW50cyA6IDE7XG5cbiAgICBjb25zdCBxdWFsaXR5SW1wcm92ZW1lbnQgPSAodG90YWxGaXhlZCAvIGFuYWx5c2lzLnN1bW1hcnkudG90YWxJc3N1ZXMpICogMTAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFuYWx5c2lzVGltZSxcbiAgICAgIGZpeGluZ1RpbWUsXG4gICAgICB2YWxpZGF0aW9uVGltZSxcbiAgICAgIHRvdGFsV29ya2Zsb3dUaW1lLFxuICAgICAgaXNzdWVzUGVyTWludXRlLFxuICAgICAgYXV0b21hdGlvbkVmZmljaWVuY3ksXG4gICAgICBzYWZldHlQcm90b2NvbEVmZmVjdGl2ZW5lc3MsXG4gICAgICBxdWFsaXR5SW1wcm92ZW1lbnQsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgbG9nV29ya2Zsb3dSZXN1bHRzKHJlc3VsdDogQXV0b21hdGVkTGludGluZ1dvcmtmbG93UmVzdWx0KTogdm9pZCB7XG4gICAgbG9nLmluZm8oJ1xcbvCfjq8gQVVUT01BVEVEIExJTlRJTkcgV09SS0ZMT1cgUkVTVUxUUycpO1xuICAgIGxvZy5pbmZvKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgbG9nLmluZm8oYPCfk4ogSXNzdWVzIEFuYWx5emVkOiAke3Jlc3VsdC5zdW1tYXJ5LnRvdGFsSXNzdWVzQW5hbHl6ZWR9YCk7XG4gICAgbG9nLmluZm8oYOKchSBJc3N1ZXMgRml4ZWQ6ICR7cmVzdWx0LnN1bW1hcnkudG90YWxJc3N1ZXNGaXhlZH1gKTtcbiAgICBsb2cuaW5mbyhg4p2MIElzc3VlcyBGYWlsZWQ6ICR7cmVzdWx0LnN1bW1hcnkudG90YWxJc3N1ZXNGYWlsZWR9YCk7XG4gICAgbG9nLmluZm8oYPCfk4ggU3VjY2VzcyBSYXRlOiAke01hdGgucm91bmQocmVzdWx0LnN1bW1hcnkuYXV0b21hdGlvblN1Y2Nlc3NSYXRlICogMTAwKX0lYCk7XG4gICAgbG9nLmluZm8oYOKPse+4jyBUb3RhbCBUaW1lOiAke01hdGgucm91bmQocmVzdWx0LnN1bW1hcnkudGltZVRvQ29tcGxldGlvbiAvIDEwMDApfXNgKTtcbiAgICBsb2cuaW5mbyhg8J+boe+4jyBTYWZldHkgRXZlbnRzOiAke3Jlc3VsdC5zdW1tYXJ5LnNhZmV0eUV2ZW50c1RyaWdnZXJlZH1gKTtcbiAgICBsb2cuaW5mbyhg8J+UhCBSb2xsYmFja3M6ICR7cmVzdWx0LnN1bW1hcnkucm9sbGJhY2tzUGVyZm9ybWVkfWApO1xuICAgIGxvZy5pbmZvKGDwn46a77iPIE92ZXJhbGwgU3VjY2VzczogJHtyZXN1bHQuc3VtbWFyeS5vdmVyYWxsU3VjY2VzcyA/ICdZRVMnIDogJ05PJ31gKTtcblxuICAgIGxvZy5pbmZvKCdcXG7wn5OLIFRPUCBSRUNPTU1FTkRBVElPTlM6Jyk7XG4gICAgcmVzdWx0LnJlY29tbWVuZGF0aW9uc1xuICAgICAgLmZpbHRlcihyID0+IHIucHJpb3JpdHkgPT09ICdjcml0aWNhbCcgfHwgci5wcmlvcml0eSA9PT0gJ2hpZ2gnKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAuZm9yRWFjaCgocmVjLCBpbmRleCkgPT4ge1xuICAgICAgICBsb2cuaW5mbyhgJHtpbmRleCArIDF9LiAke3JlYy50aXRsZX0gKCR7cmVjLnByaW9yaXR5LnRvVXBwZXJDYXNlKCl9KWApO1xuICAgICAgICBsb2cuaW5mbyhgICAgJHtyZWMuZGVzY3JpcHRpb259YCk7XG4gICAgICB9KTtcblxuICAgIGxvZy5pbmZvKCdcXG7wn5OIIFdPUktGTE9XIE1FVFJJQ1M6Jyk7XG4gICAgbG9nLmluZm8oYOKaoSBJc3N1ZXMvTWludXRlOiAke01hdGgucm91bmQocmVzdWx0Lm1ldHJpY3MuaXNzdWVzUGVyTWludXRlICogMTAwKSAvIDEwMH1gKTtcbiAgICBsb2cuaW5mbyhg8J+OryBBdXRvbWF0aW9uIEVmZmljaWVuY3k6ICR7TWF0aC5yb3VuZChyZXN1bHQubWV0cmljcy5hdXRvbWF0aW9uRWZmaWNpZW5jeSAqIDEwMCl9JWApO1xuICAgIGxvZy5pbmZvKFxuICAgICAgYPCfm6HvuI8gU2FmZXR5IEVmZmVjdGl2ZW5lc3M6ICR7TWF0aC5yb3VuZChyZXN1bHQubWV0cmljcy5zYWZldHlQcm90b2NvbEVmZmVjdGl2ZW5lc3MgKiAxMDApfSVgLFxuICAgICk7XG4gICAgbG9nLmluZm8oYPCfk4ogUXVhbGl0eSBJbXByb3ZlbWVudDogJHtNYXRoLnJvdW5kKHJlc3VsdC5tZXRyaWNzLnF1YWxpdHlJbXByb3ZlbWVudCl9JWApO1xuICAgIGxvZy5pbmZvKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGdyb3VwSXNzdWVzQnlDYXRlZ29yeShpc3N1ZXM6IExpbnRpbmdJc3N1ZVtdKTogUmVjb3JkPHN0cmluZywgTGludGluZ0lzc3VlW10+IHtcbiAgICBjb25zdCBncm91cGVkOiBSZWNvcmQ8c3RyaW5nLCBMaW50aW5nSXNzdWVbXT4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGlzc3Vlcykge1xuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBpc3N1ZS5jYXRlZ29yeS5wcmltYXJ5O1xuICAgICAgaWYgKCFncm91cGVkW2NhdGVnb3J5XSkgZ3JvdXBlZFtjYXRlZ29yeV0gPSBbXTtcbiAgICAgIGdyb3VwZWRbY2F0ZWdvcnldLnB1c2goaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZ3JvdXBlZDtcbiAgfVxuXG4gIHByaXZhdGUgZ3JvdXBJc3N1ZXNCeVByaW9yaXR5KGlzc3VlczogTGludGluZ0lzc3VlW10pOiBSZWNvcmQ8bnVtYmVyLCBMaW50aW5nSXNzdWVbXT4ge1xuICAgIGNvbnN0IGdyb3VwZWQ6IFJlY29yZDxudW1iZXIsIExpbnRpbmdJc3N1ZVtdPiA9IHt9O1xuICAgIGZvciAoY29uc3QgaXNzdWUgb2YgaXNzdWVzKSB7XG4gICAgICBjb25zdCBwcmlvcml0eSA9IGlzc3VlLmNhdGVnb3J5LnByaW9yaXR5O1xuICAgICAgaWYgKCFncm91cGVkW3ByaW9yaXR5XSkgZ3JvdXBlZFtwcmlvcml0eV0gPSBbXTtcbiAgICAgIGdyb3VwZWRbcHJpb3JpdHldLnB1c2goaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZ3JvdXBlZDtcbiAgfVxuXG4gIHByaXZhdGUgZ3JvdXBJc3N1ZXNCeUZpbGUoaXNzdWVzOiBMaW50aW5nSXNzdWVbXSk6IFJlY29yZDxzdHJpbmcsIExpbnRpbmdJc3N1ZVtdPiB7XG4gICAgY29uc3QgZ3JvdXBlZDogUmVjb3JkPHN0cmluZywgTGludGluZ0lzc3VlW10+ID0ge307XG4gICAgZm9yIChjb25zdCBpc3N1ZSBvZiBpc3N1ZXMpIHtcbiAgICAgIGlmICghZ3JvdXBlZFtpc3N1ZS5maWxlXSkgZ3JvdXBlZFtpc3N1ZS5maWxlXSA9IFtdO1xuICAgICAgZ3JvdXBlZFtpc3N1ZS5maWxlXS5wdXNoKGlzc3VlKTtcbiAgICB9XG4gICAgcmV0dXJuIGdyb3VwZWQ7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUVtcHR5Rml4UmVzdWx0KCk6IEF1dG9tYXRlZEZpeFJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBmaXhlZElzc3VlczogMCxcbiAgICAgIGZhaWxlZElzc3VlczogMCxcbiAgICAgIHByb2Nlc3NlZEZpbGVzOiBbXSxcbiAgICAgIGVycm9yczogW10sXG4gICAgICB2YWxpZGF0aW9uUmVzdWx0czogW10sXG4gICAgICBtZXRyaWNzOiB7XG4gICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKSxcbiAgICAgICAgZW5kVGltZTogbmV3IERhdGUoKSxcbiAgICAgICAgdG90YWxUaW1lOiAwLFxuICAgICAgICBmaWxlc1Byb2Nlc3NlZDogMCxcbiAgICAgICAgaXNzdWVzQXR0ZW1wdGVkOiAwLFxuICAgICAgICBpc3N1ZXNGaXhlZDogMCxcbiAgICAgICAgaXNzdWVzRmFpbGVkOiAwLFxuICAgICAgICB2YWxpZGF0aW9uVGltZTogMCxcbiAgICAgICAgcm9sbGJhY2tzUGVyZm9ybWVkOiAwLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=