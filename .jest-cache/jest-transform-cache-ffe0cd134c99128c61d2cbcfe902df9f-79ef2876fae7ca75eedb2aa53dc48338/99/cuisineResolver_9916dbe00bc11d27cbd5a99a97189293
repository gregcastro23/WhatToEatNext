86d3c9b3ee372afca8f3cce6316f1837
"use strict";
/**
 * Cuisine Resolver Utilities
 *
 * Provides utility functions for resolving and working with cuisine types
 * using the new cuisine alias system.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCuisineSuggestions = exports.isSupportedCuisine = exports.getCuisineDisplayName = exports.filterPrimaryCuisines = exports.groupCuisinesByType = exports.areCuisinesRelated = exports.getCuisineVariants = exports.standardizeCuisine = void 0;
const cuisineAliases_1 = require("@/types/cuisineAliases");
/**
 * Resolves a cuisine name to its standardized primary cuisine type
 * @param cuisineName - The cuisine name to resolve
 * @returns The standardized primary cuisine type
 */
function standardizeCuisine(cuisineName) {
    const resolved = (0, cuisineAliases_1.resolveCuisineType)(cuisineName);
    // If the resolved type is a primary cuisine, return it
    if (typeof resolved === 'string' && !(0, cuisineAliases_1.isRegionalCuisine)(resolved)) {
        return resolved;
    }
    // If it's a regional cuisine, get its primary cuisine
    const primary = (0, cuisineAliases_1.getPrimaryCuisine)(cuisineName);
    if (primary) {
        return primary;
    }
    // Fallback to normalized name
    return (0, cuisineAliases_1.normalizeCuisineName)(cuisineName);
}
exports.standardizeCuisine = standardizeCuisine;
/**
 * Gets all regional variants for a primary cuisine type
 * @param primaryCuisine - The primary cuisine type
 * @returns Array of regional cuisine names
 */
function getCuisineVariants(primaryCuisine) {
    return (0, cuisineAliases_1.getRegionalCuisines)(primaryCuisine);
}
exports.getCuisineVariants = getCuisineVariants;
/**
 * Checks if two cuisine names belong to the same primary cuisine type
 * @param cuisine1 - First cuisine name
 * @param cuisine2 - Second cuisine name
 * @returns True if both cuisines belong to the same primary type
 */
function areCuisinesRelated(cuisine1, cuisine2) {
    const primary1 = standardizeCuisine(cuisine1);
    const primary2 = standardizeCuisine(cuisine2);
    return primary1 === primary2;
}
exports.areCuisinesRelated = areCuisinesRelated;
/**
 * Groups cuisine names by their primary cuisine type
 * @param cuisineNames - Array of cuisine names to group
 * @returns Object mapping primary cuisine types to arrays of regional variants
 */
function groupCuisinesByType(cuisineNames) {
    const groups = {};
    cuisineNames.forEach(cuisineName => {
        const primary = standardizeCuisine(cuisineName);
        if (!groups[primary]) {
            groups[primary] = [];
        }
        groups[primary].push(cuisineName);
    });
    return groups;
}
exports.groupCuisinesByType = groupCuisinesByType;
/**
 * Filters cuisine names to only include primary cuisine types
 * @param cuisineNames - Array of cuisine names to filter
 * @returns Array containing only primary cuisine types
 */
function filterPrimaryCuisines(cuisineNames) {
    return cuisineNames
        .map(cuisine => standardizeCuisine(cuisine))
        .filter((cuisine, index, array) => array.indexOf(cuisine) === index); // Remove duplicates
}
exports.filterPrimaryCuisines = filterPrimaryCuisines;
/**
 * Gets a display name for a cuisine, showing both regional and primary if applicable
 * @param cuisineName - The cuisine name
 * @returns Display name for the cuisine
 */
function getCuisineDisplayName(cuisineName) {
    // Check if it's a regional cuisine first
    if ((0, cuisineAliases_1.isRegionalCuisine)(cuisineName)) {
        const primary = (0, cuisineAliases_1.getPrimaryCuisine)(cuisineName);
        if (primary) {
            const normalized = (0, cuisineAliases_1.normalizeCuisineName)(cuisineName);
            return `${normalized} (${primary})`;
        }
    }
    // For primary cuisines or unknown cuisines, just normalize
    return (0, cuisineAliases_1.normalizeCuisineName)(cuisineName);
}
exports.getCuisineDisplayName = getCuisineDisplayName;
/**
 * Validates if a cuisine name is supported by the system
 * @param cuisineName - The cuisine name to validate
 * @returns True if the cuisine is supported
 */
function isSupportedCuisine(cuisineName) {
    // Check if it's a known regional cuisine
    if ((0, cuisineAliases_1.isRegionalCuisine)(cuisineName)) {
        return true;
    }
    // Check if it's a primary cuisine type
    const primaryCuisines = [
        'Chinese', 'Japanese', 'Korean', 'Indian', 'Thai', 'Vietnamese',
        'Italian', 'French', 'Greek', 'Spanish', 'Mexican', 'American',
        'African', 'Middle-Eastern', 'Mediterranean', 'Russian', 'Fusion'
    ];
    return primaryCuisines.includes(cuisineName);
}
exports.isSupportedCuisine = isSupportedCuisine;
/**
 * Gets cuisine suggestions based on partial input
 * @param partialName - Partial cuisine name
 * @returns Array of matching cuisine names
 */
function getCuisineSuggestions(partialName) {
    const normalized = partialName.toLowerCase();
    const allCuisines = Object.keys(cuisineAliases_1.CUISINE_ALIASES);
    const primaryCuisines = [
        'Chinese', 'Japanese', 'Korean', 'Indian', 'Thai', 'Vietnamese',
        'Italian', 'French', 'Greek', 'Spanish', 'Mexican', 'American',
        'African', 'Middle-Eastern', 'Mediterranean', 'Russian', 'Fusion'
    ];
    const suggestions = [
        ...allCuisines.filter(cuisine => cuisine.includes(normalized)),
        ...primaryCuisines.filter(cuisine => cuisine.toLowerCase().includes(normalized))
    ];
    return [...new Set(suggestions)]; // Remove duplicates
}
exports.getCuisineSuggestions = getCuisineSuggestions;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9jdWlzaW5lUmVzb2x2ZXIudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOzs7QUFFSCwyREFTZ0M7QUFFaEM7Ozs7R0FJRztBQUNILFNBQWdCLGtCQUFrQixDQUFDLFdBQW1CO0lBQ3BELE1BQU0sUUFBUSxHQUFHLElBQUEsbUNBQWtCLEVBQUMsV0FBVyxDQUFDLENBQUM7SUFFakQsdURBQXVEO0lBQ3ZELElBQUksT0FBTyxRQUFRLEtBQUssUUFBUSxJQUFJLENBQUMsSUFBQSxrQ0FBaUIsRUFBQyxRQUFRLENBQUMsRUFBRTtRQUNoRSxPQUFPLFFBQThCLENBQUM7S0FDdkM7SUFFRCxzREFBc0Q7SUFDdEQsTUFBTSxPQUFPLEdBQUcsSUFBQSxrQ0FBaUIsRUFBQyxXQUFXLENBQUMsQ0FBQztJQUMvQyxJQUFJLE9BQU8sRUFBRTtRQUNYLE9BQU8sT0FBTyxDQUFDO0tBQ2hCO0lBRUQsOEJBQThCO0lBQzlCLE9BQU8sSUFBQSxxQ0FBb0IsRUFBQyxXQUFXLENBQXVCLENBQUM7QUFDakUsQ0FBQztBQWhCRCxnREFnQkM7QUFFRDs7OztHQUlHO0FBQ0gsU0FBZ0Isa0JBQWtCLENBQUMsY0FBa0M7SUFDbkUsT0FBTyxJQUFBLG9DQUFtQixFQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzdDLENBQUM7QUFGRCxnREFFQztBQUVEOzs7OztHQUtHO0FBQ0gsU0FBZ0Isa0JBQWtCLENBQUMsUUFBZ0IsRUFBRSxRQUFnQjtJQUNuRSxNQUFNLFFBQVEsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM5QyxNQUFNLFFBQVEsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM5QyxPQUFPLFFBQVEsS0FBSyxRQUFRLENBQUM7QUFDL0IsQ0FBQztBQUpELGdEQUlDO0FBRUQ7Ozs7R0FJRztBQUNILFNBQWdCLG1CQUFtQixDQUFDLFlBQXNCO0lBQ3hELE1BQU0sTUFBTSxHQUF5QyxFQUEw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QUcsZUFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDakYsQ0FBQztJQUVGLE9BQU8sQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxvQkFBb0I7QUFDeEQsQ0FBQztBQWZELHNEQWVDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvdXRpbHMvY3Vpc2luZVJlc29sdmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3Vpc2luZSBSZXNvbHZlciBVdGlsaXRpZXNcbiAqIFxuICogUHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIHJlc29sdmluZyBhbmQgd29ya2luZyB3aXRoIGN1aXNpbmUgdHlwZXNcbiAqIHVzaW5nIHRoZSBuZXcgY3Vpc2luZSBhbGlhcyBzeXN0ZW0uXG4gKi9cblxuaW1wb3J0IHsgXG4gIHJlc29sdmVDdWlzaW5lVHlwZSwgXG4gIGdldFJlZ2lvbmFsQ3Vpc2luZXMsIFxuICBpc1JlZ2lvbmFsQ3Vpc2luZSwgXG4gIGdldFByaW1hcnlDdWlzaW5lLFxuICBub3JtYWxpemVDdWlzaW5lTmFtZSxcbiAgQ1VJU0lORV9BTElBU0VTLFxuICB0eXBlIFByaW1hcnlDdWlzaW5lVHlwZSxcbiAgdHlwZSBBbGxDdWlzaW5lVHlwZXNcbn0gZnJvbSAnQC90eXBlcy9jdWlzaW5lQWxpYXNlcyc7XG5cbi8qKlxuICogUmVzb2x2ZXMgYSBjdWlzaW5lIG5hbWUgdG8gaXRzIHN0YW5kYXJkaXplZCBwcmltYXJ5IGN1aXNpbmUgdHlwZVxuICogQHBhcmFtIGN1aXNpbmVOYW1lIC0gVGhlIGN1aXNpbmUgbmFtZSB0byByZXNvbHZlXG4gKiBAcmV0dXJucyBUaGUgc3RhbmRhcmRpemVkIHByaW1hcnkgY3Vpc2luZSB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFuZGFyZGl6ZUN1aXNpbmUoY3Vpc2luZU5hbWU6IHN0cmluZyk6IFByaW1hcnlDdWlzaW5lVHlwZSB7XG4gIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZUN1aXNpbmVUeXBlKGN1aXNpbmVOYW1lKTtcbiAgXG4gIC8vIElmIHRoZSByZXNvbHZlZCB0eXBlIGlzIGEgcHJpbWFyeSBjdWlzaW5lLCByZXR1cm4gaXRcbiAgaWYgKHR5cGVvZiByZXNvbHZlZCA9PT0gJ3N0cmluZycgJiYgIWlzUmVnaW9uYWxDdWlzaW5lKHJlc29sdmVkKSkge1xuICAgIHJldHVybiByZXNvbHZlZCBhcyBQcmltYXJ5Q3Vpc2luZVR5cGU7XG4gIH1cbiAgXG4gIC8vIElmIGl0J3MgYSByZWdpb25hbCBjdWlzaW5lLCBnZXQgaXRzIHByaW1hcnkgY3Vpc2luZVxuICBjb25zdCBwcmltYXJ5ID0gZ2V0UHJpbWFyeUN1aXNpbmUoY3Vpc2luZU5hbWUpO1xuICBpZiAocHJpbWFyeSkge1xuICAgIHJldHVybiBwcmltYXJ5O1xuICB9XG4gIFxuICAvLyBGYWxsYmFjayB0byBub3JtYWxpemVkIG5hbWVcbiAgcmV0dXJuIG5vcm1hbGl6ZUN1aXNpbmVOYW1lKGN1aXNpbmVOYW1lKSBhcyBQcmltYXJ5Q3Vpc2luZVR5cGU7XG59XG5cbi8qKlxuICogR2V0cyBhbGwgcmVnaW9uYWwgdmFyaWFudHMgZm9yIGEgcHJpbWFyeSBjdWlzaW5lIHR5cGVcbiAqIEBwYXJhbSBwcmltYXJ5Q3Vpc2luZSAtIFRoZSBwcmltYXJ5IGN1aXNpbmUgdHlwZVxuICogQHJldHVybnMgQXJyYXkgb2YgcmVnaW9uYWwgY3Vpc2luZSBuYW1lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3Vpc2luZVZhcmlhbnRzKHByaW1hcnlDdWlzaW5lOiBQcmltYXJ5Q3Vpc2luZVR5cGUpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBnZXRSZWdpb25hbEN1aXNpbmVzKHByaW1hcnlDdWlzaW5lKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdHdvIGN1aXNpbmUgbmFtZXMgYmVsb25nIHRvIHRoZSBzYW1lIHByaW1hcnkgY3Vpc2luZSB0eXBlXG4gKiBAcGFyYW0gY3Vpc2luZTEgLSBGaXJzdCBjdWlzaW5lIG5hbWVcbiAqIEBwYXJhbSBjdWlzaW5lMiAtIFNlY29uZCBjdWlzaW5lIG5hbWVcbiAqIEByZXR1cm5zIFRydWUgaWYgYm90aCBjdWlzaW5lcyBiZWxvbmcgdG8gdGhlIHNhbWUgcHJpbWFyeSB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVDdWlzaW5lc1JlbGF0ZWQoY3Vpc2luZTE6IHN0cmluZywgY3Vpc2luZTI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBwcmltYXJ5MSA9IHN0YW5kYXJkaXplQ3Vpc2luZShjdWlzaW5lMSk7XG4gIGNvbnN0IHByaW1hcnkyID0gc3RhbmRhcmRpemVDdWlzaW5lKGN1aXNpbmUyKTtcbiAgcmV0dXJuIHByaW1hcnkxID09PSBwcmltYXJ5Mjtcbn1cblxuLyoqXG4gKiBHcm91cHMgY3Vpc2luZSBuYW1lcyBieSB0aGVpciBwcmltYXJ5IGN1aXNpbmUgdHlwZVxuICogQHBhcmFtIGN1aXNpbmVOYW1lcyAtIEFycmF5IG9mIGN1aXNpbmUgbmFtZXMgdG8gZ3JvdXBcbiAqIEByZXR1cm5zIE9iamVjdCBtYXBwaW5nIHByaW1hcnkgY3Vpc2luZSB0eXBlcyB0byBhcnJheXMgb2YgcmVnaW9uYWwgdmFyaWFudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQ3Vpc2luZXNCeVR5cGUoY3Vpc2luZU5hbWVzOiBzdHJpbmdbXSk6IFJlY29yZDxQcmltYXJ5Q3Vpc2luZVR5cGUsIHN0cmluZ1tdPiB7XG4gIGNvbnN0IGdyb3VwczogUmVjb3JkPFByaW1hcnlDdWlzaW5lVHlwZSwgc3RyaW5nW10+ID0ge30gYXMgUmVjb3JkPFByaW1hcnlDdWlzaW5lVHlwZSwgc3RyaW5nW10+O1xuICBcbiAgY3Vpc2luZU5hbWVzLmZvckVhY2goY3Vpc2luZU5hbWUgPT4ge1xuICAgIGNvbnN0IHByaW1hcnkgPSBzdGFuZGFyZGl6ZUN1aXNpbmUoY3Vpc2luZU5hbWUpO1xuICAgIGlmICghZ3JvdXBzW3ByaW1hcnldKSB7XG4gICAgICBncm91cHNbcHJpbWFyeV0gPSBbXTtcbiAgICB9XG4gICAgZ3JvdXBzW3ByaW1hcnldLnB1c2goY3Vpc2luZU5hbWUpO1xuICB9KTtcbiAgXG4gIHJldHVybiBncm91cHM7XG59XG5cbi8qKlxuICogRmlsdGVycyBjdWlzaW5lIG5hbWVzIHRvIG9ubHkgaW5jbHVkZSBwcmltYXJ5IGN1aXNpbmUgdHlwZXNcbiAqIEBwYXJhbSBjdWlzaW5lTmFtZXMgLSBBcnJheSBvZiBjdWlzaW5lIG5hbWVzIHRvIGZpbHRlclxuICogQHJldHVybnMgQXJyYXkgY29udGFpbmluZyBvbmx5IHByaW1hcnkgY3Vpc2luZSB0eXBlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyUHJpbWFyeUN1aXNpbmVzKGN1aXNpbmVOYW1lczogc3RyaW5nW10pOiBQcmltYXJ5Q3Vpc2luZVR5cGVbXSB7XG4gIHJldHVybiBjdWlzaW5lTmFtZXNcbiAgICAubWFwKGN1aXNpbmUgPT4gc3RhbmRhcmRpemVDdWlzaW5lKGN1aXNpbmUpKVxuICAgIC5maWx0ZXIoKGN1aXNpbmUsIGluZGV4LCBhcnJheSkgPT4gYXJyYXkuaW5kZXhPZihjdWlzaW5lKSA9PT0gaW5kZXgpOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xufVxuXG4vKipcbiAqIEdldHMgYSBkaXNwbGF5IG5hbWUgZm9yIGEgY3Vpc2luZSwgc2hvd2luZyBib3RoIHJlZ2lvbmFsIGFuZCBwcmltYXJ5IGlmIGFwcGxpY2FibGVcbiAqIEBwYXJhbSBjdWlzaW5lTmFtZSAtIFRoZSBjdWlzaW5lIG5hbWVcbiAqIEByZXR1cm5zIERpc3BsYXkgbmFtZSBmb3IgdGhlIGN1aXNpbmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1aXNpbmVEaXNwbGF5TmFtZShjdWlzaW5lTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gQ2hlY2sgaWYgaXQncyBhIHJlZ2lvbmFsIGN1aXNpbmUgZmlyc3RcbiAgaWYgKGlzUmVnaW9uYWxDdWlzaW5lKGN1aXNpbmVOYW1lKSkge1xuICAgIGNvbnN0IHByaW1hcnkgPSBnZXRQcmltYXJ5Q3Vpc2luZShjdWlzaW5lTmFtZSk7XG4gICAgaWYgKHByaW1hcnkpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVDdWlzaW5lTmFtZShjdWlzaW5lTmFtZSk7XG4gICAgICByZXR1cm4gYCR7bm9ybWFsaXplZH0gKCR7cHJpbWFyeX0pYDtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEZvciBwcmltYXJ5IGN1aXNpbmVzIG9yIHVua25vd24gY3Vpc2luZXMsIGp1c3Qgbm9ybWFsaXplXG4gIHJldHVybiBub3JtYWxpemVDdWlzaW5lTmFtZShjdWlzaW5lTmFtZSk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIGEgY3Vpc2luZSBuYW1lIGlzIHN1cHBvcnRlZCBieSB0aGUgc3lzdGVtXG4gKiBAcGFyYW0gY3Vpc2luZU5hbWUgLSBUaGUgY3Vpc2luZSBuYW1lIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBjdWlzaW5lIGlzIHN1cHBvcnRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBwb3J0ZWRDdWlzaW5lKGN1aXNpbmVOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gQ2hlY2sgaWYgaXQncyBhIGtub3duIHJlZ2lvbmFsIGN1aXNpbmVcbiAgaWYgKGlzUmVnaW9uYWxDdWlzaW5lKGN1aXNpbmVOYW1lKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICAvLyBDaGVjayBpZiBpdCdzIGEgcHJpbWFyeSBjdWlzaW5lIHR5cGVcbiAgY29uc3QgcHJpbWFyeUN1aXNpbmVzOiBQcmltYXJ5Q3Vpc2luZVR5cGVbXSA9IFtcbiAgICAnQ2hpbmVzZScsICdKYXBhbmVzZScsICdLb3JlYW4nLCAnSW5kaWFuJywgJ1RoYWknLCAnVmlldG5hbWVzZScsXG4gICAgJ0l0YWxpYW4nLCAnRnJlbmNoJywgJ0dyZWVrJywgJ1NwYW5pc2gnLCAnTWV4aWNhbicsICdBbWVyaWNhbicsXG4gICAgJ0FmcmljYW4nLCAnTWlkZGxlLUVhc3Rlcm4nLCAnTWVkaXRlcnJhbmVhbicsICdSdXNzaWFuJywgJ0Z1c2lvbidcbiAgXTtcbiAgXG4gIHJldHVybiBwcmltYXJ5Q3Vpc2luZXMuaW5jbHVkZXMoY3Vpc2luZU5hbWUgYXMgUHJpbWFyeUN1aXNpbmVUeXBlKTtcbn1cblxuLyoqXG4gKiBHZXRzIGN1aXNpbmUgc3VnZ2VzdGlvbnMgYmFzZWQgb24gcGFydGlhbCBpbnB1dFxuICogQHBhcmFtIHBhcnRpYWxOYW1lIC0gUGFydGlhbCBjdWlzaW5lIG5hbWVcbiAqIEByZXR1cm5zIEFycmF5IG9mIG1hdGNoaW5nIGN1aXNpbmUgbmFtZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1aXNpbmVTdWdnZXN0aW9ucyhwYXJ0aWFsTmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBub3JtYWxpemVkID0gcGFydGlhbE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgYWxsQ3Vpc2luZXMgPSBPYmplY3Qua2V5cyhDVUlTSU5FX0FMSUFTRVMpO1xuICBjb25zdCBwcmltYXJ5Q3Vpc2luZXM6IFByaW1hcnlDdWlzaW5lVHlwZVtdID0gW1xuICAgICdDaGluZXNlJywgJ0phcGFuZXNlJywgJ0tvcmVhbicsICdJbmRpYW4nLCAnVGhhaScsICdWaWV0bmFtZXNlJyxcbiAgICAnSXRhbGlhbicsICdGcmVuY2gnLCAnR3JlZWsnLCAnU3BhbmlzaCcsICdNZXhpY2FuJywgJ0FtZXJpY2FuJyxcbiAgICAnQWZyaWNhbicsICdNaWRkbGUtRWFzdGVybicsICdNZWRpdGVycmFuZWFuJywgJ1J1c3NpYW4nLCAnRnVzaW9uJ1xuICBdO1xuICBcbiAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBbXG4gICAgLi4uYWxsQ3Vpc2luZXMuZmlsdGVyKGN1aXNpbmUgPT4gY3Vpc2luZS5pbmNsdWRlcyhub3JtYWxpemVkKSksXG4gICAgLi4ucHJpbWFyeUN1aXNpbmVzLmZpbHRlcihjdWlzaW5lID0+IGN1aXNpbmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhub3JtYWxpemVkKSlcbiAgXTtcbiAgXG4gIHJldHVybiBbLi4ubmV3IFNldChzdWdnZXN0aW9ucyldOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xufVxuXG4vLyBSZS1leHBvcnQgdHlwZXMgZm9yIGNvbnZlbmllbmNlXG5leHBvcnQgdHlwZSB7IFByaW1hcnlDdWlzaW5lVHlwZSwgQWxsQ3Vpc2luZVR5cGVzIH07ICJdLCJ2ZXJzaW9uIjozfQ==