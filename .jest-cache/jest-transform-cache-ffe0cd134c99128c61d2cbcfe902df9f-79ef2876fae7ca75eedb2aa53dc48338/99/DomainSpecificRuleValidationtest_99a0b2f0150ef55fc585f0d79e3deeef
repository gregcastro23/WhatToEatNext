037562f97e4ac121ca30421dc9df2937
"use strict";
/**
 * Domain-Specific Rule Validation Tests
 *
 * Comprehensive validation of ESLint domain-specific rules for:
 * - Astrological calculation files
 * - Campaign system files
 * - Test files
 * - Configuration files
 *
 * Requirements: 4.1, 4.2, 4.3, 4.4
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const eslint_1 = require("eslint");
const fs_1 = require("fs");
const path_1 = __importDefault(require("path"));
describe('Domain-Specific Rule Validation', () => {
    let eslint;
    beforeAll(async () => {
        eslint = new eslint_1.ESLint({
            configFile: path_1.default.resolve(__dirname, '../../..', 'eslint.config.cjs'),
            useEslintrc: false,
            cwd: path_1.default.resolve(__dirname, '../../..')
        });
    });
    describe('Astrological Calculation File Rules', () => {
        const astrologicalTestCode = `
// Test astrological calculation file
import { getReliablePlanetaryPositions } from '@/utils/reliableAstronomy';

// Mathematical constants should be preserved
const DEGREES_PER_SIGN = 30;
const RELIABLE_POSITIONS = {
  sun: { sign: 'aries', degree: 8.5, exactLongitude: 8.5, isRetrograde: false },
  moon: { sign: 'aries', degree: 1.57, exactLongitude: 1.57, isRetrograde: false }
};

// Planetary variables should be preserved
const planet = 'mars';
const degree = 22.63;
const sign = 'cancer';
const longitude = 112.63;

// Fallback values should be preserved
const FALLBACK_POSITION = { sign: 'aries', degree: 0, exactLongitude: 0, isRetrograde: false };

// Console debugging should be allowed
console.info('Calculating planetary positions');
console.debug('Position data:', { planet, degree, sign });

// Complex astronomical calculations
function calculatePlanetaryInfluence(planetPosition: any): number {
  const baseInfluence = planetPosition.degree / DEGREES_PER_SIGN;
  return planetPosition.isRetrograde ? baseInfluence * 0.8 : baseInfluence;
}

// Elemental properties structure
const elementalProperties = {
  Fire: 0.7,
  Water: 0.2,
  Earth: 0.1,
  Air: 0.0
};
`;
        it('should preserve mathematical constants and planetary variables', async () => {
            const results = await eslint.lintText(astrologicalTestCode, {
                filePath: 'src/calculations/test-planetary.ts'
            });
            const errors = results[0]?.messages || [];
            // Should not flag mathematical constants as unused
            const unusedConstantErrors = errors.filter(error => error.message.includes('DEGREES_PER_SIGN') &&
                error.message.includes('unused'));
            expect(unusedConstantErrors).toHaveLength(0);
            // Should not flag planetary variables as unused
            const unusedPlanetaryErrors = errors.filter(error => (error.message.includes('planet') ||
                error.message.includes('degree') ||
                error.message.includes('sign')) &&
                error.message.includes('unused'));
            expect(unusedPlanetaryErrors).toHaveLength(0);
            // Should not flag fallback values as unused
            const unusedFallbackErrors = errors.filter(error => error.message.includes('FALLBACK') &&
                error.message.includes('unused'));
            expect(unusedFallbackErrors).toHaveLength(0);
        });
        it('should allow console debugging in astrological calculations', async () => {
            const results = await eslint.lintText(astrologicalTestCode, {
                filePath: 'src/calculations/test-planetary.ts'
            });
            const errors = results[0]?.messages || [];
            // Should allow console.info and console.debug
            const consoleErrors = errors.filter(error => error.ruleId === 'no-console' &&
                (error.message.includes('info') || error.message.includes('debug')));
            expect(consoleErrors).toHaveLength(0);
        });
        it('should validate planetary position structure', async () => {
            const invalidPositionCode = `
const invalidPosition = {
  sign: 'aries',
  degree: 8.5
  // Missing exactLongitude and isRetrograde
};
`;
            const results = await eslint.lintText(invalidPositionCode, {
                filePath: 'src/calculations/test-invalid-position.ts'
            });
            const errors = results[0]?.messages || [];
            const structureErrors = errors.filter(error => error.ruleId === 'astrological/validate-planetary-position-structure');
            expect(structureErrors.length).toBeGreaterThan(0);
        });
        it('should validate elemental properties structure', async () => {
            const invalidElementalCode = `
const invalidElemental = {
  Fire: 0.7,
  Water: 0.2
  // Missing Earth and Air
};
`;
            const results = await eslint.lintText(invalidElementalCode, {
                filePath: 'src/calculations/test-invalid-elemental.ts'
            });
            const errors = results[0]?.messages || [];
            const elementalErrors = errors.filter(error => error.ruleId === 'astrological/validate-elemental-properties');
            expect(elementalErrors.length).toBeGreaterThan(0);
        });
        it('should preserve fallback values', async () => {
            const fallbackViolationCode = `
let FALLBACK_POSITION = null; // This should trigger an error
const RELIABLE_DATA = undefined; // This should trigger an error
`;
            const results = await eslint.lintText(fallbackViolationCode, {
                filePath: 'src/calculations/test-fallback-violation.ts'
            });
            const errors = results[0]?.messages || [];
            const fallbackErrors = errors.filter(error => error.ruleId === 'astrological/preserve-fallback-values');
            expect(fallbackErrors.length).toBeGreaterThan(0);
        });
    });
    describe('Campaign System File Rules', () => {
        const campaignTestCode = `
// Test campaign system file
import { CampaignController } from './CampaignController';

// Campaign system variables should be preserved
const campaign = 'typescript-error-elimination';
const progress = 75.5;
const metrics = { errors: 100, warnings: 500 };
const safety = 'MAXIMUM';

// Extensive logging should be allowed
console.log('Campaign started:', campaign);
console.info('Progress update:', progress);
console.warn('Safety protocol activated');
console.error('Campaign error detected');
console.debug('Detailed metrics:', metrics);

// Enterprise patterns should be allowed
const CAMPAIGN_CONFIG: any = {
  errorThreshold: 100,
  automationLevel: 'conservative',
  rollbackStrategy: 'git-stash'
};

// Complex error handling
function handleCampaignError(error: any): void {
  console.error('Campaign error:', error);
  if (error.critical) {
    process.exit(1); // Should be allowed in campaign emergency protocols
  }
}

// Dynamic imports for campaign tools
const loadCampaignTool = async (toolName: string) => {
  return await import(\`./tools/\${toolName}\`);
};
`;
        it('should allow enterprise patterns and extensive logging', async () => {
            const results = await eslint.lintText(campaignTestCode, {
                filePath: 'src/services/campaign/test-campaign.ts'
            });
            const errors = results[0]?.messages || [];
            // Should allow all console statements
            const consoleErrors = errors.filter(error => error.ruleId === 'no-console');
            expect(consoleErrors).toHaveLength(0);
            // Should allow explicit any for enterprise patterns
            const explicitAnyErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-explicit-any' &&
                error.severity === 2 // error level
            );
            expect(explicitAnyErrors).toHaveLength(0);
            // Should allow process.exit in emergency protocols
            const processExitErrors = errors.filter(error => error.ruleId === 'no-process-exit');
            expect(processExitErrors).toHaveLength(0);
            // Should allow dynamic imports
            const dynamicImportErrors = errors.filter(error => error.ruleId === 'import/no-dynamic-require');
            expect(dynamicImportErrors).toHaveLength(0);
        });
        it('should preserve campaign system variable patterns', async () => {
            const results = await eslint.lintText(campaignTestCode, {
                filePath: 'src/services/campaign/test-campaign.ts'
            });
            const errors = results[0]?.messages || [];
            // Should not flag campaign variables as unused
            const unusedCampaignErrors = errors.filter(error => (error.message.includes('campaign') ||
                error.message.includes('progress') ||
                error.message.includes('metrics') ||
                error.message.includes('safety')) &&
                error.message.includes('unused'));
            expect(unusedCampaignErrors).toHaveLength(0);
        });
    });
    describe('Test File Rules', () => {
        const testFileCode = `
// Test file
import { describe, it, expect, beforeEach, jest } from '@jest/globals';

describe('Test Suite', () => {
  let mockService: any; // Should be allowed
  let stubFunction: any; // Should be allowed
  const testData = { value: 123 };
  const UNUSED_CONSTANT = 'test'; // Should be allowed with UNUSED_ prefix

  beforeEach(() => {
    mockService = jest.fn();
    stubFunction = jest.fn();
    console.log('Test setup'); // Should be allowed
  });

  it('should allow test patterns', () => {
    const result = mockService();
    expect(result).toBeDefined();
    
    // Non-null assertions should be allowed in tests
    const value = testData.value!;
    expect(value).toBe(123);
    
    // Magic numbers should be allowed in tests
    expect(value).toBe(123);
    expect(mockService).toHaveBeenCalledTimes(1);
  });
});
`;
        it('should provide appropriate relaxations for mock variables', async () => {
            const results = await eslint.lintText(testFileCode, {
                filePath: 'src/__tests__/test-example.test.ts'
            });
            const errors = results[0]?.messages || [];
            // Should allow explicit any in tests
            const explicitAnyErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-explicit-any');
            expect(explicitAnyErrors).toHaveLength(0);
            // Should allow console statements in tests
            const consoleErrors = errors.filter(error => error.ruleId === 'no-console');
            expect(consoleErrors).toHaveLength(0);
            // Should allow non-null assertions in tests
            const nonNullErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-non-null-assertion');
            expect(nonNullErrors).toHaveLength(0);
            // Should allow magic numbers in tests
            const magicNumberErrors = errors.filter(error => error.ruleId === 'no-magic-numbers');
            expect(magicNumberErrors).toHaveLength(0);
            // Should not flag mock/stub variables as unused
            const unusedMockErrors = errors.filter(error => (error.message.includes('mock') || error.message.includes('stub')) &&
                error.message.includes('unused'));
            expect(unusedMockErrors).toHaveLength(0);
        });
    });
    describe('Configuration File Rules', () => {
        const configFileCode = `
// Configuration file
const path = require('path');
const fs = require('fs');

module.exports = {
  // Dynamic requires should be allowed
  plugins: [
    require('./custom-plugin'),
    require(\`./plugins/\${process.env.NODE_ENV}\`)
  ],
  
  // Console statements should be allowed
  setup() {
    console.log('Configuration loaded');
    console.warn('Development mode active');
  },
  
  // Explicit any should be allowed for config flexibility
  customConfig: {
    handler: (options: any) => {
      return options.transform ? options.transform(options.data) : options.data;
    }
  },
  
  // Build tool patterns
  webpack: (config: any) => {
    config.resolve.alias = {
      '@': path.resolve(__dirname, 'src')
    };
    return config;
  }
};
`;
        it('should optimize configuration file rules for dynamic requires and build tools', async () => {
            const results = await eslint.lintText(configFileCode, {
                filePath: 'next.config.js'
            });
            const errors = results[0]?.messages || [];
            // Should allow console statements in config files
            const consoleErrors = errors.filter(error => error.ruleId === 'no-console');
            expect(consoleErrors).toHaveLength(0);
            // Should allow explicit any in config files
            const explicitAnyErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-explicit-any');
            expect(explicitAnyErrors).toHaveLength(0);
            // Should allow dynamic requires in config files
            const dynamicRequireErrors = errors.filter(error => error.ruleId === 'import/no-dynamic-require');
            expect(dynamicRequireErrors).toHaveLength(0);
            // Should allow var-requires in config files
            const varRequiresErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-var-requires');
            expect(varRequiresErrors).toHaveLength(0);
        });
    });
    describe('Real File Validation', () => {
        it('should validate actual astrological calculation files', async () => {
            const astrologicalFiles = [
                'src/calculations/culinary/culinaryAstrology.ts',
                'src/utils/reliableAstronomy.ts',
                'src/utils/astrology/astrologicalValidation.ts'
            ];
            for (const filePath of astrologicalFiles) {
                try {
                    const fullPath = path_1.default.resolve(__dirname, '../../..', filePath);
                    await fs_1.promises.access(fullPath);
                    const results = await eslint.lintFile(fullPath);
                    const errors = results[0]?.messages || [];
                    // Check that astrological rules are being applied
                    const astrologicalRuleErrors = errors.filter(error => error.ruleId?.startsWith('astrological/'));
                    // Should have some astrological rule validations (or none if code is perfect)
                    expect(astrologicalRuleErrors.length).toBeGreaterThanOrEqual(0);
                    // Should not have excessive unused variable errors for planetary constants
                    const unusedPlanetaryErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-unused-vars' &&
                        (error.message.includes('planet') ||
                            error.message.includes('degree') ||
                            error.message.includes('FALLBACK')));
                    expect(unusedPlanetaryErrors.length).toBeLessThan(5);
                }
                catch (error) {
                    // File doesn't exist, skip validation
                    console.warn(`Skipping validation for non-existent file: ${filePath}`);
                }
            }
        });
        it('should validate actual campaign system files', async () => {
            const campaignFiles = [
                'src/services/campaign/CampaignController.ts',
                'src/services/campaign/ProgressTracker.ts',
                'src/types/campaign.ts'
            ];
            for (const filePath of campaignFiles) {
                try {
                    const fullPath = path_1.default.resolve(__dirname, '../../..', filePath);
                    await fs_1.promises.access(fullPath);
                    const results = await eslint.lintFile(fullPath);
                    const errors = results[0]?.messages || [];
                    // Should allow console statements in campaign files
                    const consoleErrors = errors.filter(error => error.ruleId === 'no-console');
                    expect(consoleErrors.length).toBeLessThan(10); // Some may be intentional warnings
                    // Should not have excessive explicit any errors (should be warnings, not errors)
                    const explicitAnyErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-explicit-any' &&
                        error.severity === 2);
                    expect(explicitAnyErrors.length).toBeLessThan(5);
                }
                catch (error) {
                    // File doesn't exist, skip validation
                    console.warn(`Skipping validation for non-existent file: ${filePath}`);
                }
            }
        });
        it('should validate actual test files', async () => {
            const testFiles = [
                'src/__tests__/linting/ESLintConfigurationValidation.test.ts',
                'src/__tests__/validation/ComprehensiveValidation.test.ts'
            ];
            for (const filePath of testFiles) {
                try {
                    const fullPath = path_1.default.resolve(__dirname, '../../..', filePath);
                    await fs_1.promises.access(fullPath);
                    const results = await eslint.lintFile(fullPath);
                    const errors = results[0]?.messages || [];
                    // Should allow explicit any in test files
                    const explicitAnyErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-explicit-any');
                    expect(explicitAnyErrors).toHaveLength(0);
                    // Should allow console statements in test files
                    const consoleErrors = errors.filter(error => error.ruleId === 'no-console');
                    expect(consoleErrors).toHaveLength(0);
                    // Should allow non-null assertions in test files
                    const nonNullErrors = errors.filter(error => error.ruleId === '@typescript-eslint/no-non-null-assertion');
                    expect(nonNullErrors).toHaveLength(0);
                }
                catch (error) {
                    // File doesn't exist, skip validation
                    console.warn(`Skipping validation for non-existent file: ${filePath}`);
                }
            }
        });
        it('should validate actual configuration files', async () => {
            const configFiles = [
                'next.config.js',
                'jest.config.js',
                'tailwind.config.js'
            ];
            for (const filePath of configFiles) {
                try {
                    const fullPath = path_1.default.resolve(__dirname, '../../..', filePath);
                    await fs_1.promises.access(fullPath);
                    const results = await eslint.lintFile(fullPath);
                    const errors = results[0]?.messages || [];
                    // Should allow console statements in config files
                    const consoleErrors = errors.filter(error => error.ruleId === 'no-console');
                    expect(consoleErrors).toHaveLength(0);
                    // Should allow dynamic requires in config files
                    const dynamicRequireErrors = errors.filter(error => error.ruleId === 'import/no-dynamic-require');
                    expect(dynamicRequireErrors).toHaveLength(0);
                }
                catch (error) {
                    // File doesn't exist, skip validation
                    console.warn(`Skipping validation for non-existent file: ${filePath}`);
                }
            }
        });
    });
    describe('Performance and Optimization', () => {
        it('should have reasonable performance for domain-specific rules', async () => {
            const testCode = `
import { getReliablePlanetaryPositions } from '@/utils/reliableAstronomy';

const DEGREES_PER_SIGN = 30;
const planet = 'mars';
const elementalProperties = { Fire: 0.7, Water: 0.2, Earth: 0.1, Air: 0.0 };

console.info('Test performance');
`;
            const startTime = Date.now();
            const results = await eslint.lintText(testCode, {
                filePath: 'src/calculations/performance-test.ts'
            });
            const endTime = Date.now();
            const duration = endTime - startTime;
            // Should complete within reasonable time (less than 1 second)
            expect(duration).toBeLessThan(1000);
            // Should still produce valid results
            expect(results).toBeDefined();
            expect(results[0]).toBeDefined();
        });
        it('should cache domain-specific rule results effectively', async () => {
            const testCode = `
const RELIABLE_POSITIONS = { sun: { sign: 'aries', degree: 8.5, exactLongitude: 8.5, isRetrograde: false } };
`;
            // First run
            const startTime1 = Date.now();
            await eslint.lintText(testCode, { filePath: 'src/calculations/cache-test-1.ts' });
            const duration1 = Date.now() - startTime1;
            // Second run (should be faster due to caching)
            const startTime2 = Date.now();
            await eslint.lintText(testCode, { filePath: 'src/calculations/cache-test-2.ts' });
            const duration2 = Date.now() - startTime2;
            // Second run should be faster or similar (caching effect)
            expect(duration2).toBeLessThanOrEqual(duration1 * 1.5);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vbGludGluZy9Eb21haW5TcGVjaWZpY1J1bGVWYWxpZGF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7O0dBVUc7Ozs7O0FBRUgsbUNBQWdDO0FBQ2hDLDJCQUFvQztBQUNwQyxnREFBd0I7QUFFeEIsUUFBUSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtJQUMvQyxJQUFJLE1BQWMsQ0FBQztJQUVuQixTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDO1lBQ2xCLFVBQVUsRUFBRSxjQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsbUJBQW1CLENBQUM7WUFDcEUsV0FBVyxFQUFFLEtBQUs7WUFDbEIsR0FBRyxFQUFFLGNBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLFVBQVUsQ0FBQztTQUN6QyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7UUFDbkQsTUFBTSxvQkFBb0IsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXFDaEMsQ0FBQztRQUVFLEVBQUUsQ0FBQyxnRUFBZ0UsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5RSxNQUFNLE9BQU8sR0FBRyxNQUFNLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLEVBQUU7Z0JBQzFELFFBQVEsRUFBRSxvQ0FBb0M7YUFDL0MsQ0FBQyxDQUFDO1lBRUgsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsSUFBSSxFQUFFLENBQUM7WUFFMUMsbURBQW1EO1lBQ25ELE1BQU0sb0JBQW9CLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUNqRCxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEs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QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL19fdGVzdHNfXy9saW50aW5nL0RvbWFpblNwZWNpZmljUnVsZVZhbGlkYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERvbWFpbi1TcGVjaWZpYyBSdWxlIFZhbGlkYXRpb24gVGVzdHNcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSB2YWxpZGF0aW9uIG9mIEVTTGludCBkb21haW4tc3BlY2lmaWMgcnVsZXMgZm9yOlxuICogLSBBc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb24gZmlsZXNcbiAqIC0gQ2FtcGFpZ24gc3lzdGVtIGZpbGVzICBcbiAqIC0gVGVzdCBmaWxlc1xuICogLSBDb25maWd1cmF0aW9uIGZpbGVzXG4gKiBcbiAqIFJlcXVpcmVtZW50czogNC4xLCA0LjIsIDQuMywgNC40XG4gKi9cblxuaW1wb3J0IHsgRVNMaW50IH0gZnJvbSAnZXNsaW50JztcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmRlc2NyaWJlKCdEb21haW4tU3BlY2lmaWMgUnVsZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICBsZXQgZXNsaW50OiBFU0xpbnQ7XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBlc2xpbnQgPSBuZXcgRVNMaW50KHtcbiAgICAgIGNvbmZpZ0ZpbGU6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8uLicsICdlc2xpbnQuY29uZmlnLmNqcycpLFxuICAgICAgdXNlRXNsaW50cmM6IGZhbHNlLFxuICAgICAgY3dkOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vLi4vLi4nKVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQXN0cm9sb2dpY2FsIENhbGN1bGF0aW9uIEZpbGUgUnVsZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgYXN0cm9sb2dpY2FsVGVzdENvZGUgPSBgXG4vLyBUZXN0IGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbiBmaWxlXG5pbXBvcnQgeyBnZXRSZWxpYWJsZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gJ0AvdXRpbHMvcmVsaWFibGVBc3Ryb25vbXknO1xuXG4vLyBNYXRoZW1hdGljYWwgY29uc3RhbnRzIHNob3VsZCBiZSBwcmVzZXJ2ZWRcbmNvbnN0IERFR1JFRVNfUEVSX1NJR04gPSAzMDtcbmNvbnN0IFJFTElBQkxFX1BPU0lUSU9OUyA9IHtcbiAgc3VuOiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogOC41LCBleGFjdExvbmdpdHVkZTogOC41LCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sXG4gIG1vb246IHsgc2lnbjogJ2FyaWVzJywgZGVncmVlOiAxLjU3LCBleGFjdExvbmdpdHVkZTogMS41NywgaXNSZXRyb2dyYWRlOiBmYWxzZSB9XG59O1xuXG4vLyBQbGFuZXRhcnkgdmFyaWFibGVzIHNob3VsZCBiZSBwcmVzZXJ2ZWRcbmNvbnN0IHBsYW5ldCA9ICdtYXJzJztcbmNvbnN0IGRlZ3JlZSA9IDIyLjYzO1xuY29uc3Qgc2lnbiA9ICdjYW5jZXInO1xuY29uc3QgbG9uZ2l0dWRlID0gMTEyLjYzO1xuXG4vLyBGYWxsYmFjayB2YWx1ZXMgc2hvdWxkIGJlIHByZXNlcnZlZFxuY29uc3QgRkFMTEJBQ0tfUE9TSVRJT04gPSB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogMCwgZXhhY3RMb25naXR1ZGU6IDAsIGlzUmV0cm9ncmFkZTogZmFsc2UgfTtcblxuLy8gQ29uc29sZSBkZWJ1Z2dpbmcgc2hvdWxkIGJlIGFsbG93ZWRcbmNvbnNvbGUuaW5mbygnQ2FsY3VsYXRpbmcgcGxhbmV0YXJ5IHBvc2l0aW9ucycpO1xuY29uc29sZS5kZWJ1ZygnUG9zaXRpb24gZGF0YTonLCB7IHBsYW5ldCwgZGVncmVlLCBzaWduIH0pO1xuXG4vLyBDb21wbGV4IGFzdHJvbm9taWNhbCBjYWxjdWxhdGlvbnNcbmZ1bmN0aW9uIGNhbGN1bGF0ZVBsYW5ldGFyeUluZmx1ZW5jZShwbGFuZXRQb3NpdGlvbjogYW55KTogbnVtYmVyIHtcbiAgY29uc3QgYmFzZUluZmx1ZW5jZSA9IHBsYW5ldFBvc2l0aW9uLmRlZ3JlZSAvIERFR1JFRVNfUEVSX1NJR047XG4gIHJldHVybiBwbGFuZXRQb3NpdGlvbi5pc1JldHJvZ3JhZGUgPyBiYXNlSW5mbHVlbmNlICogMC44IDogYmFzZUluZmx1ZW5jZTtcbn1cblxuLy8gRWxlbWVudGFsIHByb3BlcnRpZXMgc3RydWN0dXJlXG5jb25zdCBlbGVtZW50YWxQcm9wZXJ0aWVzID0ge1xuICBGaXJlOiAwLjcsXG4gIFdhdGVyOiAwLjIsXG4gIEVhcnRoOiAwLjEsXG4gIEFpcjogMC4wXG59O1xuYDtcblxuICAgIGl0KCdzaG91bGQgcHJlc2VydmUgbWF0aGVtYXRpY2FsIGNvbnN0YW50cyBhbmQgcGxhbmV0YXJ5IHZhcmlhYmxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlc2xpbnQubGludFRleHQoYXN0cm9sb2dpY2FsVGVzdENvZGUsIHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3Rlc3QtcGxhbmV0YXJ5LnRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgbm90IGZsYWcgbWF0aGVtYXRpY2FsIGNvbnN0YW50cyBhcyB1bnVzZWRcbiAgICAgIGNvbnN0IHVudXNlZENvbnN0YW50RXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnREVHUkVFU19QRVJfU0lHTicpICYmIFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd1bnVzZWQnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdCh1bnVzZWRDb25zdGFudEVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICAvLyBTaG91bGQgbm90IGZsYWcgcGxhbmV0YXJ5IHZhcmlhYmxlcyBhcyB1bnVzZWRcbiAgICAgIGNvbnN0IHVudXNlZFBsYW5ldGFyeUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdwbGFuZXQnKSB8fCBcbiAgICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2RlZ3JlZScpIHx8IFxuICAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnc2lnbicpKSAmJiBcbiAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndW51c2VkJylcbiAgICAgICk7XG4gICAgICBleHBlY3QodW51c2VkUGxhbmV0YXJ5RXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgZmxhZyBmYWxsYmFjayB2YWx1ZXMgYXMgdW51c2VkXG4gICAgICBjb25zdCB1bnVzZWRGYWxsYmFja0Vycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZBTExCQUNLJykgJiYgXG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3VudXNlZCcpXG4gICAgICApO1xuICAgICAgZXhwZWN0KHVudXNlZEZhbGxiYWNrRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGNvbnNvbGUgZGVidWdnaW5nIGluIGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZXNsaW50LmxpbnRUZXh0KGFzdHJvbG9naWNhbFRlc3RDb2RlLCB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL2NhbGN1bGF0aW9ucy90ZXN0LXBsYW5ldGFyeS50cydcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlcnJvcnMgPSByZXN1bHRzWzBdPy5tZXNzYWdlcyB8fCBbXTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGFsbG93IGNvbnNvbGUuaW5mbyBhbmQgY29uc29sZS5kZWJ1Z1xuICAgICAgY29uc3QgY29uc29sZUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgIGVycm9yLnJ1bGVJZCA9PT0gJ25vLWNvbnNvbGUnICYmIFxuICAgICAgICAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaW5mbycpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2RlYnVnJykpXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNvbnNvbGVFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcGxhbmV0YXJ5IHBvc2l0aW9uIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRQb3NpdGlvbkNvZGUgPSBgXG5jb25zdCBpbnZhbGlkUG9zaXRpb24gPSB7XG4gIHNpZ246ICdhcmllcycsXG4gIGRlZ3JlZTogOC41XG4gIC8vIE1pc3NpbmcgZXhhY3RMb25naXR1ZGUgYW5kIGlzUmV0cm9ncmFkZVxufTtcbmA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlc2xpbnQubGludFRleHQoaW52YWxpZFBvc2l0aW9uQ29kZSwge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvdGVzdC1pbnZhbGlkLXBvc2l0aW9uLnRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgY29uc3Qgc3RydWN0dXJlRXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgZXJyb3IucnVsZUlkID09PSAnYXN0cm9sb2dpY2FsL3ZhbGlkYXRlLXBsYW5ldGFyeS1wb3NpdGlvbi1zdHJ1Y3R1cmUnXG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RydWN0dXJlRXJyb3JzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBlbGVtZW50YWwgcHJvcGVydGllcyBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRWxlbWVudGFsQ29kZSA9IGBcbmNvbnN0IGludmFsaWRFbGVtZW50YWwgPSB7XG4gIEZpcmU6IDAuNyxcbiAgV2F0ZXI6IDAuMlxuICAvLyBNaXNzaW5nIEVhcnRoIGFuZCBBaXJcbn07XG5gO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZXNsaW50LmxpbnRUZXh0KGludmFsaWRFbGVtZW50YWxDb2RlLCB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL2NhbGN1bGF0aW9ucy90ZXN0LWludmFsaWQtZWxlbWVudGFsLnRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgY29uc3QgZWxlbWVudGFsRXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgZXJyb3IucnVsZUlkID09PSAnYXN0cm9sb2dpY2FsL3ZhbGlkYXRlLWVsZW1lbnRhbC1wcm9wZXJ0aWVzJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGVsZW1lbnRhbEVycm9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJlc2VydmUgZmFsbGJhY2sgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmFsbGJhY2tWaW9sYXRpb25Db2RlID0gYFxubGV0IEZBTExCQUNLX1BPU0lUSU9OID0gbnVsbDsgLy8gVGhpcyBzaG91bGQgdHJpZ2dlciBhbiBlcnJvclxuY29uc3QgUkVMSUFCTEVfREFUQSA9IHVuZGVmaW5lZDsgLy8gVGhpcyBzaG91bGQgdHJpZ2dlciBhbiBlcnJvclxuYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVzbGludC5saW50VGV4dChmYWxsYmFja1Zpb2xhdGlvbkNvZGUsIHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3Rlc3QtZmFsbGJhY2stdmlvbGF0aW9uLnRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgY29uc3QgZmFsbGJhY2tFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IFxuICAgICAgICBlcnJvci5ydWxlSWQgPT09ICdhc3Ryb2xvZ2ljYWwvcHJlc2VydmUtZmFsbGJhY2stdmFsdWVzJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZhbGxiYWNrRXJyb3JzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FtcGFpZ24gU3lzdGVtIEZpbGUgUnVsZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgY2FtcGFpZ25UZXN0Q29kZSA9IGBcbi8vIFRlc3QgY2FtcGFpZ24gc3lzdGVtIGZpbGVcbmltcG9ydCB7IENhbXBhaWduQ29udHJvbGxlciB9IGZyb20gJy4vQ2FtcGFpZ25Db250cm9sbGVyJztcblxuLy8gQ2FtcGFpZ24gc3lzdGVtIHZhcmlhYmxlcyBzaG91bGQgYmUgcHJlc2VydmVkXG5jb25zdCBjYW1wYWlnbiA9ICd0eXBlc2NyaXB0LWVycm9yLWVsaW1pbmF0aW9uJztcbmNvbnN0IHByb2dyZXNzID0gNzUuNTtcbmNvbnN0IG1ldHJpY3MgPSB7IGVycm9yczogMTAwLCB3YXJuaW5nczogNTAwIH07XG5jb25zdCBzYWZldHkgPSAnTUFYSU1VTSc7XG5cbi8vIEV4dGVuc2l2ZSBsb2dnaW5nIHNob3VsZCBiZSBhbGxvd2VkXG5jb25zb2xlLmxvZygnQ2FtcGFpZ24gc3RhcnRlZDonLCBjYW1wYWlnbik7XG5jb25zb2xlLmluZm8oJ1Byb2dyZXNzIHVwZGF0ZTonLCBwcm9ncmVzcyk7XG5jb25zb2xlLndhcm4oJ1NhZmV0eSBwcm90b2NvbCBhY3RpdmF0ZWQnKTtcbmNvbnNvbGUuZXJyb3IoJ0NhbXBhaWduIGVycm9yIGRldGVjdGVkJyk7XG5jb25zb2xlLmRlYnVnKCdEZXRhaWxlZCBtZXRyaWNzOicsIG1ldHJpY3MpO1xuXG4vLyBFbnRlcnByaXNlIHBhdHRlcm5zIHNob3VsZCBiZSBhbGxvd2VkXG5jb25zdCBDQU1QQUlHTl9DT05GSUc6IGFueSA9IHtcbiAgZXJyb3JUaHJlc2hvbGQ6IDEwMCxcbiAgYXV0b21hdGlvbkxldmVsOiAnY29uc2VydmF0aXZlJyxcbiAgcm9sbGJhY2tTdHJhdGVneTogJ2dpdC1zdGFzaCdcbn07XG5cbi8vIENvbXBsZXggZXJyb3IgaGFuZGxpbmdcbmZ1bmN0aW9uIGhhbmRsZUNhbXBhaWduRXJyb3IoZXJyb3I6IGFueSk6IHZvaWQge1xuICBjb25zb2xlLmVycm9yKCdDYW1wYWlnbiBlcnJvcjonLCBlcnJvcik7XG4gIGlmIChlcnJvci5jcml0aWNhbCkge1xuICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gU2hvdWxkIGJlIGFsbG93ZWQgaW4gY2FtcGFpZ24gZW1lcmdlbmN5IHByb3RvY29sc1xuICB9XG59XG5cbi8vIER5bmFtaWMgaW1wb3J0cyBmb3IgY2FtcGFpZ24gdG9vbHNcbmNvbnN0IGxvYWRDYW1wYWlnblRvb2wgPSBhc3luYyAodG9vbE5hbWU6IHN0cmluZykgPT4ge1xuICByZXR1cm4gYXdhaXQgaW1wb3J0KFxcYC4vdG9vbHMvXFwke3Rvb2xOYW1lfVxcYCk7XG59O1xuYDtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgZW50ZXJwcmlzZSBwYXR0ZXJucyBhbmQgZXh0ZW5zaXZlIGxvZ2dpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZXNsaW50LmxpbnRUZXh0KGNhbXBhaWduVGVzdENvZGUsIHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvc2VydmljZXMvY2FtcGFpZ24vdGVzdC1jYW1wYWlnbi50cydcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlcnJvcnMgPSByZXN1bHRzWzBdPy5tZXNzYWdlcyB8fCBbXTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGFsbG93IGFsbCBjb25zb2xlIHN0YXRlbWVudHNcbiAgICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IGVycm9yLnJ1bGVJZCA9PT0gJ25vLWNvbnNvbGUnKTtcbiAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBhbGxvdyBleHBsaWNpdCBhbnkgZm9yIGVudGVycHJpc2UgcGF0dGVybnNcbiAgICAgIGNvbnN0IGV4cGxpY2l0QW55RXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgZXJyb3IucnVsZUlkID09PSAnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScgJiYgXG4gICAgICAgIGVycm9yLnNldmVyaXR5ID09PSAyIC8vIGVycm9yIGxldmVsXG4gICAgICApO1xuICAgICAgZXhwZWN0KGV4cGxpY2l0QW55RXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBhbGxvdyBwcm9jZXNzLmV4aXQgaW4gZW1lcmdlbmN5IHByb3RvY29sc1xuICAgICAgY29uc3QgcHJvY2Vzc0V4aXRFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IGVycm9yLnJ1bGVJZCA9PT0gJ25vLXByb2Nlc3MtZXhpdCcpO1xuICAgICAgZXhwZWN0KHByb2Nlc3NFeGl0RXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBhbGxvdyBkeW5hbWljIGltcG9ydHNcbiAgICAgIGNvbnN0IGR5bmFtaWNJbXBvcnRFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IFxuICAgICAgICBlcnJvci5ydWxlSWQgPT09ICdpbXBvcnQvbm8tZHluYW1pYy1yZXF1aXJlJ1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChkeW5hbWljSW1wb3J0RXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXNlcnZlIGNhbXBhaWduIHN5c3RlbSB2YXJpYWJsZSBwYXR0ZXJucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlc2xpbnQubGludFRleHQoY2FtcGFpZ25UZXN0Q29kZSwge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi90ZXN0LWNhbXBhaWduLnRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgbm90IGZsYWcgY2FtcGFpZ24gdmFyaWFibGVzIGFzIHVudXNlZFxuICAgICAgY29uc3QgdW51c2VkQ2FtcGFpZ25FcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IFxuICAgICAgICAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnY2FtcGFpZ24nKSB8fCBcbiAgICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3Byb2dyZXNzJykgfHwgXG4gICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdtZXRyaWNzJykgfHwgXG4gICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdzYWZldHknKSkgJiYgXG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3VudXNlZCcpXG4gICAgICApO1xuICAgICAgZXhwZWN0KHVudXNlZENhbXBhaWduRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUZXN0IEZpbGUgUnVsZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgdGVzdEZpbGVDb2RlID0gYFxuLy8gVGVzdCBmaWxlXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuXG5kZXNjcmliZSgnVGVzdCBTdWl0ZScsICgpID0+IHtcbiAgbGV0IG1vY2tTZXJ2aWNlOiBhbnk7IC8vIFNob3VsZCBiZSBhbGxvd2VkXG4gIGxldCBzdHViRnVuY3Rpb246IGFueTsgLy8gU2hvdWxkIGJlIGFsbG93ZWRcbiAgY29uc3QgdGVzdERhdGEgPSB7IHZhbHVlOiAxMjMgfTtcbiAgY29uc3QgVU5VU0VEX0NPTlNUQU5UID0gJ3Rlc3QnOyAvLyBTaG91bGQgYmUgYWxsb3dlZCB3aXRoIFVOVVNFRF8gcHJlZml4XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja1NlcnZpY2UgPSBqZXN0LmZuKCk7XG4gICAgc3R1YkZ1bmN0aW9uID0gamVzdC5mbigpO1xuICAgIGNvbnNvbGUubG9nKCdUZXN0IHNldHVwJyk7IC8vIFNob3VsZCBiZSBhbGxvd2VkXG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgYWxsb3cgdGVzdCBwYXR0ZXJucycsICgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBtb2NrU2VydmljZSgpO1xuICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgXG4gICAgLy8gTm9uLW51bGwgYXNzZXJ0aW9ucyBzaG91bGQgYmUgYWxsb3dlZCBpbiB0ZXN0c1xuICAgIGNvbnN0IHZhbHVlID0gdGVzdERhdGEudmFsdWUhO1xuICAgIGV4cGVjdCh2YWx1ZSkudG9CZSgxMjMpO1xuICAgIFxuICAgIC8vIE1hZ2ljIG51bWJlcnMgc2hvdWxkIGJlIGFsbG93ZWQgaW4gdGVzdHNcbiAgICBleHBlY3QodmFsdWUpLnRvQmUoMTIzKTtcbiAgICBleHBlY3QobW9ja1NlcnZpY2UpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgfSk7XG59KTtcbmA7XG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgYXBwcm9wcmlhdGUgcmVsYXhhdGlvbnMgZm9yIG1vY2sgdmFyaWFibGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVzbGludC5saW50VGV4dCh0ZXN0RmlsZUNvZGUsIHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvX190ZXN0c19fL3Rlc3QtZXhhbXBsZS50ZXN0LnRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgYWxsb3cgZXhwbGljaXQgYW55IGluIHRlc3RzXG4gICAgICBjb25zdCBleHBsaWNpdEFueUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgIGVycm9yLnJ1bGVJZCA9PT0gJ0B0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnknXG4gICAgICApO1xuICAgICAgZXhwZWN0KGV4cGxpY2l0QW55RXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBhbGxvdyBjb25zb2xlIHN0YXRlbWVudHMgaW4gdGVzdHNcbiAgICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IGVycm9yLnJ1bGVJZCA9PT0gJ25vLWNvbnNvbGUnKTtcbiAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBhbGxvdyBub24tbnVsbCBhc3NlcnRpb25zIGluIHRlc3RzXG4gICAgICBjb25zdCBub25OdWxsRXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgZXJyb3IucnVsZUlkID09PSAnQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbidcbiAgICAgICk7XG4gICAgICBleHBlY3Qobm9uTnVsbEVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICAvLyBTaG91bGQgYWxsb3cgbWFnaWMgbnVtYmVycyBpbiB0ZXN0c1xuICAgICAgY29uc3QgbWFnaWNOdW1iZXJFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IGVycm9yLnJ1bGVJZCA9PT0gJ25vLW1hZ2ljLW51bWJlcnMnKTtcbiAgICAgIGV4cGVjdChtYWdpY051bWJlckVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICAvLyBTaG91bGQgbm90IGZsYWcgbW9jay9zdHViIHZhcmlhYmxlcyBhcyB1bnVzZWRcbiAgICAgIGNvbnN0IHVudXNlZE1vY2tFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IFxuICAgICAgICAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbW9jaycpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3N0dWInKSkgJiYgXG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3VudXNlZCcpXG4gICAgICApO1xuICAgICAgZXhwZWN0KHVudXNlZE1vY2tFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYXRpb24gRmlsZSBSdWxlcycsICgpID0+IHtcbiAgICBjb25zdCBjb25maWdGaWxlQ29kZSA9IGBcbi8vIENvbmZpZ3VyYXRpb24gZmlsZVxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIER5bmFtaWMgcmVxdWlyZXMgc2hvdWxkIGJlIGFsbG93ZWRcbiAgcGx1Z2luczogW1xuICAgIHJlcXVpcmUoJy4vY3VzdG9tLXBsdWdpbicpLFxuICAgIHJlcXVpcmUoXFxgLi9wbHVnaW5zL1xcJHtwcm9jZXNzLmVudi5OT0RFX0VOVn1cXGApXG4gIF0sXG4gIFxuICAvLyBDb25zb2xlIHN0YXRlbWVudHMgc2hvdWxkIGJlIGFsbG93ZWRcbiAgc2V0dXAoKSB7XG4gICAgY29uc29sZS5sb2coJ0NvbmZpZ3VyYXRpb24gbG9hZGVkJyk7XG4gICAgY29uc29sZS53YXJuKCdEZXZlbG9wbWVudCBtb2RlIGFjdGl2ZScpO1xuICB9LFxuICBcbiAgLy8gRXhwbGljaXQgYW55IHNob3VsZCBiZSBhbGxvd2VkIGZvciBjb25maWcgZmxleGliaWxpdHlcbiAgY3VzdG9tQ29uZmlnOiB7XG4gICAgaGFuZGxlcjogKG9wdGlvbnM6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIG9wdGlvbnMudHJhbnNmb3JtID8gb3B0aW9ucy50cmFuc2Zvcm0ob3B0aW9ucy5kYXRhKSA6IG9wdGlvbnMuZGF0YTtcbiAgICB9XG4gIH0sXG4gIFxuICAvLyBCdWlsZCB0b29sIHBhdHRlcm5zXG4gIHdlYnBhY2s6IChjb25maWc6IGFueSkgPT4ge1xuICAgIGNvbmZpZy5yZXNvbHZlLmFsaWFzID0ge1xuICAgICAgJ0AnOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnc3JjJylcbiAgICB9O1xuICAgIHJldHVybiBjb25maWc7XG4gIH1cbn07XG5gO1xuXG4gICAgaXQoJ3Nob3VsZCBvcHRpbWl6ZSBjb25maWd1cmF0aW9uIGZpbGUgcnVsZXMgZm9yIGR5bmFtaWMgcmVxdWlyZXMgYW5kIGJ1aWxkIHRvb2xzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVzbGludC5saW50VGV4dChjb25maWdGaWxlQ29kZSwge1xuICAgICAgICBmaWxlUGF0aDogJ25leHQuY29uZmlnLmpzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgYWxsb3cgY29uc29sZSBzdGF0ZW1lbnRzIGluIGNvbmZpZyBmaWxlc1xuICAgICAgY29uc3QgY29uc29sZUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gZXJyb3IucnVsZUlkID09PSAnbm8tY29uc29sZScpO1xuICAgICAgZXhwZWN0KGNvbnNvbGVFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcblxuICAgICAgLy8gU2hvdWxkIGFsbG93IGV4cGxpY2l0IGFueSBpbiBjb25maWcgZmlsZXNcbiAgICAgIGNvbnN0IGV4cGxpY2l0QW55RXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgZXJyb3IucnVsZUlkID09PSAnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSdcbiAgICAgICk7XG4gICAgICBleHBlY3QoZXhwbGljaXRBbnlFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcblxuICAgICAgLy8gU2hvdWxkIGFsbG93IGR5bmFtaWMgcmVxdWlyZXMgaW4gY29uZmlnIGZpbGVzXG4gICAgICBjb25zdCBkeW5hbWljUmVxdWlyZUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgIGVycm9yLnJ1bGVJZCA9PT0gJ2ltcG9ydC9uby1keW5hbWljLXJlcXVpcmUnXG4gICAgICApO1xuICAgICAgZXhwZWN0KGR5bmFtaWNSZXF1aXJlRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgIC8vIFNob3VsZCBhbGxvdyB2YXItcmVxdWlyZXMgaW4gY29uZmlnIGZpbGVzXG4gICAgICBjb25zdCB2YXJSZXF1aXJlc0Vycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgIGVycm9yLnJ1bGVJZCA9PT0gJ0B0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMnXG4gICAgICApO1xuICAgICAgZXhwZWN0KHZhclJlcXVpcmVzRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIEZpbGUgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGFjdHVhbCBhc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb24gZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhc3Ryb2xvZ2ljYWxGaWxlcyA9IFtcbiAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvY3VsaW5hcnkvY3VsaW5hcnlBc3Ryb2xvZ3kudHMnLFxuICAgICAgICAnc3JjL3V0aWxzL3JlbGlhYmxlQXN0cm9ub215LnRzJyxcbiAgICAgICAgJ3NyYy91dGlscy9hc3Ryb2xvZ3kvYXN0cm9sb2dpY2FsVmFsaWRhdGlvbi50cydcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgYXN0cm9sb2dpY2FsRmlsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8uLicsIGZpbGVQYXRoKTtcbiAgICAgICAgICBhd2FpdCBmcy5hY2Nlc3MoZnVsbFBhdGgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlc2xpbnQubGludEZpbGUoZnVsbFBhdGgpO1xuICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIHRoYXQgYXN0cm9sb2dpY2FsIHJ1bGVzIGFyZSBiZWluZyBhcHBsaWVkXG4gICAgICAgICAgY29uc3QgYXN0cm9sb2dpY2FsUnVsZUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgICAgICBlcnJvci5ydWxlSWQ/LnN0YXJ0c1dpdGgoJ2FzdHJvbG9naWNhbC8nKVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdWxkIGhhdmUgc29tZSBhc3Ryb2xvZ2ljYWwgcnVsZSB2YWxpZGF0aW9ucyAob3Igbm9uZSBpZiBjb2RlIGlzIHBlcmZlY3QpXG4gICAgICAgICAgZXhwZWN0KGFzdHJvbG9naWNhbFJ1bGVFcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNob3VsZCBub3QgaGF2ZSBleGNlc3NpdmUgdW51c2VkIHZhcmlhYmxlIGVycm9ycyBmb3IgcGxhbmV0YXJ5IGNvbnN0YW50c1xuICAgICAgICAgIGNvbnN0IHVudXNlZFBsYW5ldGFyeUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgICAgICBlcnJvci5ydWxlSWQgPT09ICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMnICYmXG4gICAgICAgICAgICAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncGxhbmV0JykgfHwgXG4gICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZGVncmVlJykgfHwgXG4gICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRkFMTEJBQ0snKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGV4cGVjdCh1bnVzZWRQbGFuZXRhcnlFcnJvcnMubGVuZ3RoKS50b0JlTGVzc1RoYW4oNSk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gRmlsZSBkb2Vzbid0IGV4aXN0LCBza2lwIHZhbGlkYXRpb25cbiAgICAgICAgICBjb25zb2xlLndhcm4oYFNraXBwaW5nIHZhbGlkYXRpb24gZm9yIG5vbi1leGlzdGVudCBmaWxlOiAke2ZpbGVQYXRofWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGFjdHVhbCBjYW1wYWlnbiBzeXN0ZW0gZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYW1wYWlnbkZpbGVzID0gW1xuICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL0NhbXBhaWduQ29udHJvbGxlci50cycsXG4gICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vUHJvZ3Jlc3NUcmFja2VyLnRzJyxcbiAgICAgICAgJ3NyYy90eXBlcy9jYW1wYWlnbi50cydcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgY2FtcGFpZ25GaWxlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uLy4uLy4uJywgZmlsZVBhdGgpO1xuICAgICAgICAgIGF3YWl0IGZzLmFjY2VzcyhmdWxsUGF0aCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVzbGludC5saW50RmlsZShmdWxsUGF0aCk7XG4gICAgICAgICAgY29uc3QgZXJyb3JzID0gcmVzdWx0c1swXT8ubWVzc2FnZXMgfHwgW107XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdWxkIGFsbG93IGNvbnNvbGUgc3RhdGVtZW50cyBpbiBjYW1wYWlnbiBmaWxlc1xuICAgICAgICAgIGNvbnN0IGNvbnNvbGVFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IGVycm9yLnJ1bGVJZCA9PT0gJ25vLWNvbnNvbGUnKTtcbiAgICAgICAgICBleHBlY3QoY29uc29sZUVycm9ycy5sZW5ndGgpLnRvQmVMZXNzVGhhbigxMCk7IC8vIFNvbWUgbWF5IGJlIGludGVudGlvbmFsIHdhcm5pbmdzXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdWxkIG5vdCBoYXZlIGV4Y2Vzc2l2ZSBleHBsaWNpdCBhbnkgZXJyb3JzIChzaG91bGQgYmUgd2FybmluZ3MsIG5vdCBlcnJvcnMpXG4gICAgICAgICAgY29uc3QgZXhwbGljaXRBbnlFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IFxuICAgICAgICAgICAgZXJyb3IucnVsZUlkID09PSAnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScgJiYgXG4gICAgICAgICAgICBlcnJvci5zZXZlcml0eSA9PT0gMlxuICAgICAgICAgICk7XG4gICAgICAgICAgZXhwZWN0KGV4cGxpY2l0QW55RXJyb3JzLmxlbmd0aCkudG9CZUxlc3NUaGFuKDUpO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEZpbGUgZG9lc24ndCBleGlzdCwgc2tpcCB2YWxpZGF0aW9uXG4gICAgICAgICAgY29uc29sZS53YXJuKGBTa2lwcGluZyB2YWxpZGF0aW9uIGZvciBub24tZXhpc3RlbnQgZmlsZTogJHtmaWxlUGF0aH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhY3R1YWwgdGVzdCBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RGaWxlcyA9IFtcbiAgICAgICAgJ3NyYy9fX3Rlc3RzX18vbGludGluZy9FU0xpbnRDb25maWd1cmF0aW9uVmFsaWRhdGlvbi50ZXN0LnRzJyxcbiAgICAgICAgJ3NyYy9fX3Rlc3RzX18vdmFsaWRhdGlvbi9Db21wcmVoZW5zaXZlVmFsaWRhdGlvbi50ZXN0LnRzJ1xuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiB0ZXN0RmlsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8uLicsIGZpbGVQYXRoKTtcbiAgICAgICAgICBhd2FpdCBmcy5hY2Nlc3MoZnVsbFBhdGgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlc2xpbnQubGludEZpbGUoZnVsbFBhdGgpO1xuICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNob3VsZCBhbGxvdyBleHBsaWNpdCBhbnkgaW4gdGVzdCBmaWxlc1xuICAgICAgICAgIGNvbnN0IGV4cGxpY2l0QW55RXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBcbiAgICAgICAgICAgIGVycm9yLnJ1bGVJZCA9PT0gJ0B0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnknXG4gICAgICAgICAgKTtcbiAgICAgICAgICBleHBlY3QoZXhwbGljaXRBbnlFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaG91bGQgYWxsb3cgY29uc29sZSBzdGF0ZW1lbnRzIGluIHRlc3QgZmlsZXNcbiAgICAgICAgICBjb25zdCBjb25zb2xlRXJyb3JzID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiBlcnJvci5ydWxlSWQgPT09ICduby1jb25zb2xlJyk7XG4gICAgICAgICAgZXhwZWN0KGNvbnNvbGVFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaG91bGQgYWxsb3cgbm9uLW51bGwgYXNzZXJ0aW9ucyBpbiB0ZXN0IGZpbGVzXG4gICAgICAgICAgY29uc3Qgbm9uTnVsbEVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gXG4gICAgICAgICAgICBlcnJvci5ydWxlSWQgPT09ICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgZXhwZWN0KG5vbk51bGxFcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBGaWxlIGRvZXNuJ3QgZXhpc3QsIHNraXAgdmFsaWRhdGlvblxuICAgICAgICAgIGNvbnNvbGUud2FybihgU2tpcHBpbmcgdmFsaWRhdGlvbiBmb3Igbm9uLWV4aXN0ZW50IGZpbGU6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYWN0dWFsIGNvbmZpZ3VyYXRpb24gZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWdGaWxlcyA9IFtcbiAgICAgICAgJ25leHQuY29uZmlnLmpzJyxcbiAgICAgICAgJ2plc3QuY29uZmlnLmpzJyxcbiAgICAgICAgJ3RhaWx3aW5kLmNvbmZpZy5qcydcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgY29uZmlnRmlsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8uLicsIGZpbGVQYXRoKTtcbiAgICAgICAgICBhd2FpdCBmcy5hY2Nlc3MoZnVsbFBhdGgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlc2xpbnQubGludEZpbGUoZnVsbFBhdGgpO1xuICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3VsdHNbMF0/Lm1lc3NhZ2VzIHx8IFtdO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNob3VsZCBhbGxvdyBjb25zb2xlIHN0YXRlbWVudHMgaW4gY29uZmlnIGZpbGVzXG4gICAgICAgICAgY29uc3QgY29uc29sZUVycm9ycyA9IGVycm9ycy5maWx0ZXIoZXJyb3IgPT4gZXJyb3IucnVsZUlkID09PSAnbm8tY29uc29sZScpO1xuICAgICAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdWxkIGFsbG93IGR5bmFtaWMgcmVxdWlyZXMgaW4gY29uZmlnIGZpbGVzXG4gICAgICAgICAgY29uc3QgZHluYW1pY1JlcXVpcmVFcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGVycm9yID0+IFxuICAgICAgICAgICAgZXJyb3IucnVsZUlkID09PSAnaW1wb3J0L25vLWR5bmFtaWMtcmVxdWlyZSdcbiAgICAgICAgICApO1xuICAgICAgICAgIGV4cGVjdChkeW5hbWljUmVxdWlyZUVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEZpbGUgZG9lc24ndCBleGlzdCwgc2tpcCB2YWxpZGF0aW9uXG4gICAgICAgICAgY29uc29sZS53YXJuKGBTa2lwcGluZyB2YWxpZGF0aW9uIGZvciBub24tZXhpc3RlbnQgZmlsZTogJHtmaWxlUGF0aH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIE9wdGltaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcmVhc29uYWJsZSBwZXJmb3JtYW5jZSBmb3IgZG9tYWluLXNwZWNpZmljIHJ1bGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdENvZGUgPSBgXG5pbXBvcnQgeyBnZXRSZWxpYWJsZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gJ0AvdXRpbHMvcmVsaWFibGVBc3Ryb25vbXknO1xuXG5jb25zdCBERUdSRUVTX1BFUl9TSUdOID0gMzA7XG5jb25zdCBwbGFuZXQgPSAnbWFycyc7XG5jb25zdCBlbGVtZW50YWxQcm9wZXJ0aWVzID0geyBGaXJlOiAwLjcsIFdhdGVyOiAwLjIsIEVhcnRoOiAwLjEsIEFpcjogMC4wIH07XG5cbmNvbnNvbGUuaW5mbygnVGVzdCBwZXJmb3JtYW5jZScpO1xuYDtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVzbGludC5saW50VGV4dCh0ZXN0Q29kZSwge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGVyZm9ybWFuY2UtdGVzdC50cydcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiByZWFzb25hYmxlIHRpbWUgKGxlc3MgdGhhbiAxIHNlY29uZClcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgc3RpbGwgcHJvZHVjZSB2YWxpZCByZXN1bHRzXG4gICAgICBleHBlY3QocmVzdWx0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzWzBdKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWNoZSBkb21haW4tc3BlY2lmaWMgcnVsZSByZXN1bHRzIGVmZmVjdGl2ZWx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdENvZGUgPSBgXG5jb25zdCBSRUxJQUJMRV9QT1NJVElPTlMgPSB7IHN1bjogeyBzaWduOiAnYXJpZXMnLCBkZWdyZWU6IDguNSwgZXhhY3RMb25naXR1ZGU6IDguNSwgaXNSZXRyb2dyYWRlOiBmYWxzZSB9IH07XG5gO1xuXG4gICAgICAvLyBGaXJzdCBydW5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZTEgPSBEYXRlLm5vdygpO1xuICAgICAgYXdhaXQgZXNsaW50LmxpbnRUZXh0KHRlc3RDb2RlLCB7IGZpbGVQYXRoOiAnc3JjL2NhbGN1bGF0aW9ucy9jYWNoZS10ZXN0LTEudHMnIH0pO1xuICAgICAgY29uc3QgZHVyYXRpb24xID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTE7XG5cbiAgICAgIC8vIFNlY29uZCBydW4gKHNob3VsZCBiZSBmYXN0ZXIgZHVlIHRvIGNhY2hpbmcpXG4gICAgICBjb25zdCBzdGFydFRpbWUyID0gRGF0ZS5ub3coKTtcbiAgICAgIGF3YWl0IGVzbGludC5saW50VGV4dCh0ZXN0Q29kZSwgeyBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvY2FjaGUtdGVzdC0yLnRzJyB9KTtcbiAgICAgIGNvbnN0IGR1cmF0aW9uMiA9IERhdGUubm93KCkgLSBzdGFydFRpbWUyO1xuXG4gICAgICAvLyBTZWNvbmQgcnVuIHNob3VsZCBiZSBmYXN0ZXIgb3Igc2ltaWxhciAoY2FjaGluZyBlZmZlY3QpXG4gICAgICBleHBlY3QoZHVyYXRpb24yKS50b0JlTGVzc1RoYW5PckVxdWFsKGR1cmF0aW9uMSAqIDEuNSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9