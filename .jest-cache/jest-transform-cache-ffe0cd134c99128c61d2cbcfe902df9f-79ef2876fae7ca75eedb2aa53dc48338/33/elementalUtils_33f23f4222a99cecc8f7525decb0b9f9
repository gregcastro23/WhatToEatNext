23758c412627dbfe51ab1028ce5cff33
"use strict";
// src/utils/elementalUtils.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateElementalAffinity = exports.fixRawIngredientMappings = exports.fixIngredientMappings = exports.fixIngredientMapping = exports.ensureLowercaseFormat = exports.getDefaultElementalProperties = exports.getCurrentElementalState = exports.enhanceOilProperties = exports.enhanceVegetableTransformations = exports.getStrengtheningElement = exports.getElementalRelationship = exports.getBalancingElement = exports.ensureCompleteElementalProperties = exports.getElementStrength = exports.getPrimaryElement = exports.normalizeElementalValues = exports.transformItemsWithPlanetaryPositions = exports.elementalFunctions = exports.elementalInteractions = exports.elements = exports.elementalUtils = exports.getMissingElements = exports.validateElementalRequirements = exports.standardizeRecipeElements = exports.normalizeProperties = exports.validateElementalProperties = void 0;
const elementalConstants_1 = require("@/constants/elementalConstants");
const planetaryFoodAssociations_1 = require("@/constants/planetaryFoodAssociations");
const ElementalCalculator_1 = require("@/services/ElementalCalculator");
const validation_1 = require("@/utils/validation");
const elementalMappings_1 = require("./elementalMappings");
Object.defineProperty(exports, "elements", { enumerable: true, get: function () { return elementalMappings_1.elements; } });
Object.defineProperty(exports, "elementalInteractions", { enumerable: true, get: function () { return elementalMappings_1.elementalInteractions; } });
Object.defineProperty(exports, "elementalFunctions", { enumerable: true, get: function () { return elementalMappings_1.elementalFunctions; } });
// Missing ELEMENTAL_CHARACTERISTICS constant
const ELEMENTAL_CHARACTERISTICS = {
    Fire: {
        cookingTechniques: ['grilling', 'roasting', 'searing', 'flambéing'],
        timeOfDay: ['morning', 'noon'],
        qualities: ['energetic', 'transformative', 'intense'],
        temperature: 'hot'
    },
    Water: {
        cookingTechniques: ['boiling', 'steaming', 'poaching', 'braising'],
        timeOfDay: ['evening', 'night'],
        qualities: ['flowing', 'cooling', 'nurturing'],
        temperature: 'cool'
    },
    Earth: {
        cookingTechniques: ['baking', 'slow-cooking', 'roasting', 'smoking'],
        timeOfDay: ['afternoon', 'evening'],
        qualities: ['grounding', 'stable', 'nourishing'],
        temperature: 'moderate'
    },
    Air: {
        cookingTechniques: ['whipping', 'frying', 'sautéing', 'dehydrating'],
        timeOfDay: ['morning', 'midday'],
        qualities: ['light', 'airy', 'quick'],
        temperature: 'variable'
    }
};
// AlchemicalProperty type imported from @/constants/planetaryElements
/**
 * Validates that elemental properties contain valid values
 * @param properties The elemental properties to validate
 * @returns True if properties are valid, false otherwise
 */
const validateElementalProperties = (properties) => {
    // If properties is null or undefined, return false immediately
    if (!properties) {
        console.warn('Warning: properties is null or undefined in validateElementalProperties');
        return false;
    }
    // Check if all required elements exist
    const requiredElements = ['Fire', 'Water', 'Earth', 'Air'];
    for (const element of requiredElements) {
        if (typeof properties[element] !== 'number') {
            console.warn(`Warning: properties.${element} is not a number in validateElementalProperties`);
            return false;
        }
        // Check if values are between 0 and 1
        if (properties[element] < 0 || properties[element] > 1) {
            (0, validation_1.logUnexpectedValue)('validateElementalProperties', {
                message: `Element value out of range: ${element} = ${properties[element]}`,
                element,
                value: properties[element],
            });
            return false;
        }
    }
    // Optionally check if properties sum to 1 (or close to it due to floating point)
    const sum = Object.values(properties).reduce((acc, val) => acc + val, 0);
    const isCloseToOne = Math.abs(sum - 1) < 0.01;
    if (!isCloseToOne) {
        (0, validation_1.logUnexpectedValue)('validateElementalProperties', {
            message: `Elemental properties do not sum to 1: ${sum}`,
            sum,
            properties,
        });
    }
    return true;
};
exports.validateElementalProperties = validateElementalProperties;
/**
 * Normalizes elemental properties to ensure they sum to 1
 * @param properties The elemental properties to normalize
 * @returns Normalized elemental properties
 */
const normalizeProperties = (properties) => {
    // Handle null or undefined
    if (!properties) {
        console.warn('Warning: properties is null or undefined in normalizeProperties');
        return { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES };
    }
    // Fill in any missing properties with defaults
    const completeProperties = {
        Fire: properties.Fire ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Fire,
        Water: properties.Water ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Water,
        Earth: properties.Earth ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Earth,
        Air: properties.Air ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Air,
    };
    const sum = Object.values(completeProperties).reduce((acc, val) => acc + val, 0);
    if (sum === 0) {
        // If sum is 0, return balanced default
        console.warn('Warning: properties sum is 0 in normalizeProperties');
        return { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES };
    }
    // Normalize each value
    return Object.entries(completeProperties).reduce((acc, [key, value]) => {
        if ((0, validation_1.isElementalPropertyKey)(key)) {
            acc[key] = value / sum;
        }
        else {
            // This shouldn't happen with the type-safety above, but just in case
            console.warn(`Warning: invalid key ${key} in normalizeProperties`);
        }
        return acc;
    }, { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES });
};
exports.normalizeProperties = normalizeProperties;
/**
 * Standardizes elemental properties for recipes, ensuring all recipes have
 * properly normalized elemental values
 * @param recipe The recipe to standardize
 * @returns Recipe with standardized elemental properties
 */
const standardizeRecipeElements = (recipe) => {
    // Handle null /undefined recipe
    if (!recipe) {
        console.warn('Warning: recipe is null or undefined in standardizeRecipeElements');
        return {
            elementalProperties: { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES }
        };
    }
    // If recipe doesn't have elemental properties, use current elemental state
    if (!recipe.elementalProperties) {
        const currentState = ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
        return {
            ...recipe,
            elementalProperties: currentState,
        };
    }
    // Normalize properties to ensure they sum to 1
    return {
        ...recipe,
        elementalProperties: (0, exports.normalizeProperties)(recipe.elementalProperties),
    };
};
exports.standardizeRecipeElements = standardizeRecipeElements;
const validateElementalRequirements = (properties) => {
    return (0, validation_1.isElementalProperties)(properties);
};
exports.validateElementalRequirements = validateElementalRequirements;
/**
 * Gets the elements that are missing or significantly lower than ideal balance in the provided properties
 * @param properties The elemental properties to check
 * @returns Array of elements that are missing or low
 */
function getMissingElements(properties) {
    if (!properties) {
        return ['Fire', 'Water', 'Earth', 'Air'];
    }
    const missing = [];
    const idealBalance = 0.25; // Each element should ideally be 25%
    const threshold = 0.15; // Consider missing if below 15%
    for (const element of ['Fire', 'Water', 'Earth', 'Air']) {
        const value = properties[element] || 0;
        if (value < threshold) {
            missing.push(element);
        }
    }
    return missing;
}
exports.getMissingElements = getMissingElements;
exports.elementalUtils = {
    validateProperties: exports.validateElementalRequirements,
    normalizeProperties: exports.normalizeProperties,
    standardizeRecipeElements: exports.standardizeRecipeElements,
    getMissingElements,
    calculateelementalState(recipe) {
        if (!recipe?.ingredients.length) {
            return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
        }
        // Create a safe default balance to start
        const balance = { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES };
        // Get total amount for percentage calculations
        const totalAmount = recipe.ingredients.reduce((sum, ing) => {
            const amount = ing.amount ?? 1; // Default to 1 if amount is missing
            return sum + amount;
        }, 0);
        // Handle the special case where there are no ingredients with amount
        if (totalAmount === 0) {
            return balance;
        }
        // Initialize balance with 0 values
        Object.keys(balance).forEach(el => {
            if ((0, validation_1.isElementalPropertyKey)(el)) {
                balance[el] = 0;
            }
        });
        // Process each ingredient
        recipe.ingredients.forEach(ing => {
            const amount = ing.amount ?? 1; // Default to 1 if amount is missing
            if (ing.elementalProperties) {
                // For each element in the ingredient
                Object.entries(ing.elementalProperties).forEach(([element, value]) => {
                    if ((0, validation_1.isElementalPropertyKey)(element)) {
                        balance[element] += (value * amount) / totalAmount;
                    }
                });
            }
        });
        // Normalize to ensure they sum to 1
        return (0, exports.normalizeProperties)(balance);
    },
    combineProperties(a, b, bWeight = 0.5) {
        const combinedProps = {};
        const aWeight = 1 - bWeight;
        Object.keys(a).forEach((key) => {
            const element = key;
            combinedProps[element] =
                a[element] * aWeight + (b[element] || 0) * bWeight;
        });
        return combinedProps;
    },
    getelementalState(recipe) {
        if (!recipe.ingredients.length) {
            return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
        }
        const combinedProperties = recipe.ingredients.reduce((acc, ingredient) => {
            const props = ingredient.elementalProperties ||
                ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
            return {
                Fire: acc.Fire + props.Fire,
                Water: acc.Water + props.Water,
                Earth: acc.Earth + props.Earth,
                Air: acc.Air + props.Air,
            };
        }, { Fire: 0, Water: 0, Earth: 0, Air: 0 });
        return (0, exports.normalizeProperties)(combinedProperties);
    },
    /**
     * Gets a complementary element that works well with the given element
     * All elements work well together in their own way
     * @param element The element to find a complement for
     * @returns The complementary element
     */
    getComplementaryElement(element) {
        // Each element complements all others, but we return one suggestion
        // based on traditional culinary pairings
        const complementary = {
            Fire: 'Fire',
            Water: 'Water',
            Earth: 'Earth',
            Air: 'Air', // Air reinforces itself
        };
        return complementary[element];
    },
    /**
     * Gets the elemental characteristics for a specific element
     * @param element The element to get characteristics for
     * @returns The elemental characteristics
     */
    getElementalCharacteristics(element) {
        return ELEMENTAL_CHARACTERISTICS[element];
    },
    /**
     * Gets a complete elemental profile that includes properties and characteristics
     * @param properties The elemental properties
     * @returns A complete elemental profile
     */
    getElementalProfile(properties) {
        // Find the dominant element
        const entries = Object.entries(properties);
        let dominantElement = 'Fire';
        let maxValue = 0;
        for (const [element, value] of entries) {
            if (value > maxValue) {
                dominantElement = element;
                maxValue = value;
            }
        }
        return {
            dominant: dominantElement,
            balance: properties,
            characteristics: [this.getElementalCharacteristics(dominantElement)],
        };
    },
    /**
     * Gets the suggested cooking techniques based on elemental properties
     * @param properties The elemental properties
     * @returns Array of recommended cooking techniques
     */
    getSuggestedCookingTechniques(properties) {
        const techniques = [];
        const threshold = 0.3; // Only consider elements above this threshold for recommendations
        if (properties.Fire > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Fire.cookingTechniques.slice(0, 2));
        }
        if (properties.Water > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Water.cookingTechniques.slice(0, 2));
        }
        if (properties.Earth > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Earth.cookingTechniques.slice(0, 2));
        }
        if (properties.Air > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Air.cookingTechniques.slice(0, 2));
        }
        // Return unique techniques or a default if none meet the threshold
        return techniques.length > 0
            ? Array.from(new Set(techniques))
            : ['Balanced cooking'];
    },
    /**
     * Gets the complementary ingredients based on elemental properties
     * @param properties The elemental properties
     * @returns Array of recommended complementary ingredients
     */
    getRecommendedTimeOfDay(properties) {
        const times = [];
        const threshold = 0.3; // Only consider elements above this threshold for recommendations
        const weightedTimes = [];
        // Add times based on the elemental balance, weighted by their values
        if (properties.Fire > threshold) {
            for (let i = 0; i < Math.ceil(properties.Fire * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Fire.timeOfDay);
            }
        }
        if (properties.Water > threshold) {
            for (let i = 0; i < Math.ceil(properties.Water * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Water.timeOfDay);
            }
        }
        if (properties.Earth > threshold) {
            for (let i = 0; i < Math.ceil(properties.Earth * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Earth.timeOfDay);
            }
        }
        if (properties.Air > threshold) {
            for (let i = 0; i < Math.ceil(properties.Air * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Air.timeOfDay);
            }
        }
        // Return unique times or a default if none meet the threshold
        return weightedTimes.length > 0
            ? Array.from(new Set(weightedTimes))
            : ['Any time'];
    },
    // Get the default elemental properties
    getDefaultElementalProperties() {
        return elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES;
    },
    // Export the default elemental properties constant for direct access
    DEFAULT_ELEMENTAL_PROPERTIES: elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES,
    /**
     * Gets the current elemental state from the ElementalCalculator service
     * Pattern OO-3: Utility Import Alignment - Standalone export for TS2614 compatibility
     */
    getCurrentElementalState() {
        return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
    },
    /**
     * Pattern OO-3: Utility Import Alignment - Format consistency helper
     * Ensures elemental property keys are in lowercase format
     */
    ensureLowercaseFormat(properties) {
        if (!properties || typeof properties !== 'object') {
            return properties;
        }
        const lowercaseProps = {};
        for (const [key, value] of Object.entries(properties)) {
            // Convert capitalized element names to lowercase
            const lowerKey = key.toLowerCase();
            lowercaseProps[lowerKey] = value;
        }
        return lowercaseProps;
    },
};
exports.default = exports.elementalUtils;
/**
 * Transform a list of elemental items based on planetary positions
 *
 * @param items Items to transform
 * @param planetaryPositions Current planetary positions
 * @param isDaytime Whether it is currently day
 * @param currentZodiac Current zodiac sign
 * @param lunarPhase Current lunar phase
 * @param elementalBoosts Optional elemental boosts to apply
 * @param planetaryBoosts Optional planetary boosts to apply
 * @returns Transformed alchemical items
 */
const ELEMENT_WEIGHTS = {
    Fire: 1.8,
    Water: 1.2,
    Earth: 0.9,
    Air: 1.5,
};
// Add this function if uniqueness score is needed
function _calculateUniqueness(elements, planetaryInfluence) {
    // Calculate variance of elemental properties
    const values = Object.values(elements);
    const mean = values.reduce((sum, val) => sum + val, 0) / values.length;
    const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) /
        values.length;
    // Combine with planetary influence
    return Math.min(1, variance * (1 + planetaryInfluence));
}
// Or modify the transformation to remove uniqueness score if not needed
function transformItemsWithPlanetaryPositions(items, planetaryPositions, isDaytime = true, currentZodiac, lunarPhase, tarotElementBoosts, tarotPlanetaryBoosts) {
    return items.map((item) => {
        const { boost: planetaryInfluence } = (0, planetaryFoodAssociations_1.calculatePlanetaryBoost)(item, planetaryPositions, currentZodiac, lunarPhase);
        // Scale elemental properties
        const scaledElements = Object.fromEntries(Object.entries(item.elementalProperties).map(([element, value]) => [
            element,
            value * (1 + (planetaryInfluence || 0)),
        ]));
        // Calculate alchemical properties from elemental properties
        // This follows the same relationships as in the alchemical system:
        // - Spirit is related to Fire (transformation) and Air (connection)
        // - Essence is related to Water (fluidity) and Fire (vitality)
        // - Matter is related to Earth (stability) and Water (cohesion)
        // - Substance is related to Air (structure) and Earth (form)
        const spirit = scaledElements.Fire * 0.6 + scaledElements.Air * 0.4;
        const essence = scaledElements.Water * 0.6 + scaledElements.Fire * 0.4;
        const matter = scaledElements.Earth * 0.7 + scaledElements.Water * 0.3;
        const substance = scaledElements.Air * 0.6 + scaledElements.Earth * 0.4;
        // Apply tarot boosts if available
        const boostedSpirit = spirit * (tarotPlanetaryBoosts?.Spirit || 1.0);
        const boostedEssence = essence * (tarotPlanetaryBoosts?.Essence || 1.0);
        const boostedMatter = matter * (tarotPlanetaryBoosts?.Matter || 1.0);
        const boostedSubstance = substance * (tarotPlanetaryBoosts?.Substance || 1.0);
        // Calculate energy metrics using the formulas from alchemicalCalculations.ts
        const fire = scaledElements.Fire;
        const water = scaledElements.Water;
        const air = scaledElements.Air;
        const earth = scaledElements.Earth;
        // Ensure we have non-zero values for denominator
        const safeValueForHeat = (val) => Math.max(val, 0.01);
        // Heat formula: (spirit^2 + fire^2) / ((substance || 1) + essence + matter + water + air + earth)^2
        const heat = (Math.pow(safeValueForHeat(boostedSpirit), 2) + Math.pow(safeValueForHeat(fire), 2)) /
            Math.pow(safeValueForHeat(boostedSubstance + boostedEssence + boostedMatter + water + air + earth), 2);
        // Entropy formula: (spirit^2 + substance^2 + fire^2 + air^2) / ((essence || 1) + matter + earth + water)^2
        const entropy = (Math.pow(safeValueForHeat(boostedSpirit), 2) + Math.pow(safeValueForHeat(boostedSubstance), 2) +
            Math.pow(safeValueForHeat(fire), 2) + Math.pow(safeValueForHeat(air), 2)) /
            Math.pow(safeValueForHeat(boostedEssence + boostedMatter + earth + water), 2);
        // Reactivity formula: (spirit^2 + substance^2 + essence^2 + fire^2 + air^2 + water^2) / ((matter || 1) + earth)^2
        const reactivity = (Math.pow(safeValueForHeat(boostedSpirit), 2) + Math.pow(safeValueForHeat(boostedSubstance), 2) +
            Math.pow(safeValueForHeat(boostedEssence), 2) + Math.pow(safeValueForHeat(fire), 2) +
            Math.pow(safeValueForHeat(air), 2) + Math.pow(safeValueForHeat(water), 2)) /
            Math.pow(safeValueForHeat(boostedMatter + earth), 2);
        // Greg's Energy formula with consistent scaling
        const rawGregsEnergy = heat - reactivity * entropy;
        const scaledGregsEnergy = (rawGregsEnergy + 1) / 2; // Convert from range (-1,1) to (0,1)
        const gregsEnergy = Math.max(0.1, Math.min(1.0, scaledGregsEnergy));
        // Normalize all energy values to ensure they're in the 0-1 range
        const normalizedHeat = Math.max(0.1, Math.min(1.0, heat));
        const normalizedEntropy = Math.max(0.1, Math.min(1.0, entropy));
        const normalizedReactivity = Math.max(0.1, Math.min(1.0, reactivity));
        // Calculate dominant element based on scaled elements
        const dominantElement = Object.entries(scaledElements).sort(([_keyA, valueA], [_keyB, valueB]) => valueB - valueA)[0][0];
        // Calculate dominant alchemical property
        const alchemicalProperties = {
            Spirit: boostedSpirit,
            Essence: boostedEssence,
            Matter: boostedMatter,
            Substance: boostedSubstance,
        };
        const dominantAlchemicalProperty = Object.entries(alchemicalProperties).sort(([_keyA, valueA], [_keyB, valueB]) => valueB - valueA)[0][0];
        // Extract dominant planets based on planetary positions if available
        let dominantPlanets = [];
        if (planetaryPositions) {
            // Get top 3 planets with highest values or dignity
            const planetEntries = Object.entries(planetaryPositions).filter(([planet, _]) => planet !== 'isDaytime' && planet !== 'currentZodiac');
            // Handle different position data formats
            dominantPlanets = planetEntries
                .sort(([_, valA], [__, valB]) => {
                // Sort by strength /dignity if available
                if (typeof valA === 'object' && typeof valB === 'object') {
                    const dataA = valA;
                    const dataB = valB;
                    const strengthA = Number(dataA.strength) || 0;
                    const strengthB = Number(dataB.strength) || 0;
                    return strengthB - strengthA;
                }
                // Default sort for simple numeric values
                return Number(valB) - Number(valA);
            })
                .slice(0, 3)
                .map(([planet, _]) => planet);
        }
        // Ensure we have planetary dignities data
        const planetaryDignities = {};
        // Handle NaN values or infinity for all properties
        const ensureSafeNumber = (val) => {
            if (isNaN(val) || !isFinite(val))
                return 0.2;
            return val;
        };
        // Apply safe arithmetic operations with proper type checking
        const safeValueForArithmetic = (val) => Math.max(val, 0.01);
        const safeAdd = (a, b) => safeValueForArithmetic(a) + safeValueForArithmetic(b);
        const safeMultiply = (a, b) => safeValueForArithmetic(a) * safeValueForArithmetic(b);
        return {
            id: item.id,
            name: item.name,
            elementalProperties: item.elementalProperties,
            transformedElementalProperties: scaledElements,
            alchemicalProperties: {
                Spirit: boostedSpirit,
                Essence: boostedEssence,
                Matter: boostedMatter,
                Substance: boostedSubstance,
            },
            heat: normalizedHeat,
            entropy: normalizedEntropy,
            reactivity: normalizedReactivity,
            gregsEnergy: gregsEnergy,
            dominantElement,
            dominantAlchemicalProperty,
            planetaryBoost: planetaryInfluence,
            dominantPlanets,
            planetaryDignities,
        };
    });
}
exports.transformItemsWithPlanetaryPositions = transformItemsWithPlanetaryPositions;
// New differentiation functions
const applyNonLinearScaling = (props) => ({
    Fire: Math.tanh(props.Fire * 2),
    Water: 1 - Math.exp(-props.Water * 3),
    Earth: props.Earth ** 1.5,
    Air: Math.sin((props.Air * Math.PI) / 2),
});
const calculateUniquenessScore = (item) => {
    const variance = Object.values(item.elementalProperties).reduce((acc, val) => acc + Math.abs(val - 0.5), 0);
    return Math.min(1, variance * 2);
};
// Add or update the normalizeElementalValues function
function normalizeElementalValues(values) {
    const total = Object.values(values).reduce((sum, val) => sum + val, 0);
    // If total is zero or close to zero, return default distribution
    if (total < 0.01) {
        return {
            Fire: 0.25,
            Water: 0.25,
            Earth: 0.25,
            Air: 0.25,
        };
    }
    // Normalize values to sum to 1.0
    return {
        Fire: values.Fire / total,
        Water: values.Water / total,
        Earth: values.Earth / total,
        Air: values.Air / total,
    };
}
exports.normalizeElementalValues = normalizeElementalValues;
// Get the primary element regardless of format
function getPrimaryElement(elementalAffinity) {
    const affinityData = elementalAffinity;
    return (affinityData.base || affinityData.element || 'Fire');
}
exports.getPrimaryElement = getPrimaryElement;
// Get element strength if available
function getElementStrength(elementalAffinity) {
    const affinityData = elementalAffinity;
    const strength = affinityData.strength;
    return typeof strength === 'number' ? strength : 1;
}
exports.getElementStrength = getElementStrength;
/**
 * Ensures all required elemental properties are present
 * @param properties The elemental properties to validate and complete
 * @returns Complete elemental properties
 */
const ensureCompleteElementalProperties = (properties) => {
    return {
        Fire: properties.Fire ?? 0.25,
        Water: properties.Water ?? 0.25,
        Earth: properties.Earth ?? 0.25,
        Air: properties.Air ?? 0.25,
    };
};
exports.ensureCompleteElementalProperties = ensureCompleteElementalProperties;
/**
 * WARNING: getBalancingElement is legacy and does not comply with current elemental logic principles (no opposing/balancing elements). Review usage and refactor/remove if not needed.
 */
function getBalancingElement(element) {
    // Elements work best with themselves - reinforcing the current energy
    return element;
}
exports.getBalancingElement = getBalancingElement;
/**
 * WARNING: getElementalRelationship is legacy and may not comply with current elemental logic principles.
 * All element combinations are harmonious; avoid using "opposing" or "controlling" logic.
 */
function getElementalRelationship(element1, element2) {
    if (element1 === element2) {
        return 'same';
    }
    // The generating cycle for 4-element system: Fire → Earth → Water → Air → Fire
    const generatingCycle = {
        Fire: 'Earth',
        Earth: 'Water',
        Water: 'Air',
        Air: 'Fire',
    };
    // The controlling cycle for 4-element system: Fire → Air → Earth → Water → Fire
    const controllingCycle = {
        Fire: 'Air',
        Air: 'Earth',
        Earth: 'Water',
        Water: 'Fire',
    };
    if (generatingCycle[element1] === element2) {
        return 'generating'; // element1 generates element2
    }
    else if (generatingCycle[element2] === element1) {
        return 'weakened-by'; // element2 generates element1
    }
    else if (controllingCycle[element1] === element2) {
        return 'controlling'; // element1 controls element2
    }
    else if (controllingCycle[element2] === element1) {
        return 'controlled-by'; // element2 controls element1
    }
    else {
        return 'neutral';
    }
}
exports.getElementalRelationship = getElementalRelationship;
/**
 * Gets the element that strengthens the provided element
 */
function getStrengtheningElement(element) {
    // The element that generates the provided element will strengthen it
    const strengthMap = {
        Fire: 'Air',
        Earth: 'Fire',
        Water: 'Earth',
        Air: 'Water', // Water strengthens Air
    };
    return strengthMap[element];
}
exports.getStrengtheningElement = getStrengtheningElement;
/**
 * Enhance vegetable transformations by adding thermodynamic effects to different cooking methods
 * @param vegetables The collection of vegetables to enhance
 * @returns Enhanced vegetables with complete transformation properties
 */
function enhanceVegetableTransformations(vegetables) {
    return Object.entries(vegetables).reduce((acc, [key, vegetable]) => {
        // Skip if not an object
        if (typeof vegetable !== 'object' || vegetable === null) {
            acc[key] = vegetable;
            return acc;
        }
        const enhanced = { ...vegetable };
        // Create transformation if it doesn't exist
        if (!enhanced.elementalTransformation) {
            // Get the dominant element
            const elementalProps = enhanced.elementalProperties || {
                Earth: 0.3,
                Water: 0.3,
                Air: 0.2,
                Fire: 0.2,
            };
            let dominantElement = 'Earth';
            let highestValue = 0;
            for (const [element, value] of Object.entries(elementalProps)) {
                if (typeof value === 'number' && value > highestValue) {
                    dominantElement = element;
                    highestValue = value;
                }
            }
            // Set default transformations based on dominant element
            enhanced.elementalTransformation = {
                whenCooked: { [dominantElement]: 0.1, Fire: 0.05 },
                whenDried: { Earth: 0.1, Air: 0.05 },
                whenFermented: { Water: 0.1, Air: 0.05 },
            };
        }
        // Add thermodynamic changes if they don't exist
        const transformation = enhanced.elementalTransformation;
        if (transformation &&
            !transformation.thermodynamicChanges) {
            transformation.thermodynamicChanges = {
                cooked: {
                    heat: 0.1,
                    entropy: 0.05,
                    reactivity: 0.05,
                },
                dried: {
                    heat: -0.05,
                    entropy: -0.1,
                    reactivity: -0.05,
                },
                fermented: {
                    entropy: 0.2,
                    reactivity: 0.15,
                    stabilityIndex: -0.1,
                },
                roasted: {
                    heat: 0.2,
                    entropy: 0.1,
                    energy: 0.15,
                },
                steamed: {
                    heat: 0.05,
                    moisture: 0.2,
                    reactivity: 0.05,
                },
            };
        }
        // Add elementalSignature if it doesn't exist
        if (!enhanced.elementalSignature && enhanced.elementalProperties) {
            enhanced.elementalSignature = Object.entries(enhanced.elementalProperties)
                .sort((a, b) => {
                // Apply Pattern KK-1: Explicit Type Assertion for arithmetic operations
                const valueA = Number(a[1]) || 0;
                const valueB = Number(b[1]) || 0;
                return valueB - valueA;
            })
                .map(([element, value]) => [element, Number(value)]);
        }
        // Add sensory profiles if they don't exist
        if (!enhanced.sensoryProfile) {
            // Default sensory profile based on vegetable subCategory
            const subCategory = enhanced.subCategory || 'vegetable';
            const profiles = {
                'leafy green': {
                    taste: {
                        bitter: 0.6,
                        sweet: 0.2,
                        umami: 0.1,
                        salty: 0.05,
                        sour: 0.05,
                        spicy: 0,
                    },
                    aroma: {
                        herbal: 0.5,
                        earthy: 0.3,
                        floral: 0.1,
                        fruity: 0.05,
                        woody: 0.05,
                        spicy: 0,
                    },
                    texture: {
                        crisp: 0.7,
                        tender: 0.2,
                        silky: 0.1,
                        chewy: 0,
                        creamy: 0,
                        crunchy: 0,
                    },
                },
                root: {
                    taste: {
                        sweet: 0.5,
                        earthy: 0.3,
                        bitter: 0.1,
                        umami: 0.1,
                        salty: 0,
                        spicy: 0,
                    },
                    aroma: {
                        earthy: 0.6,
                        woody: 0.2,
                        herbal: 0.1,
                        fruity: 0.1,
                        floral: 0,
                        spicy: 0,
                    },
                    texture: {
                        crunchy: 0.6,
                        chewy: 0.2,
                        tender: 0.2,
                        crisp: 0,
                        silky: 0,
                        creamy: 0,
                    },
                },
                allium: {
                    taste: {
                        pungent: 0.6,
                        sweet: 0.2,
                        umami: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        spicy: 0.7,
                        earthy: 0.2,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                        woody: 0,
                    },
                    texture: {
                        crunchy: 0.5,
                        chewy: 0.3,
                        tender: 0.2,
                        crisp: 0,
                        silky: 0,
                        creamy: 0,
                    },
                },
                cruciferous: {
                    taste: {
                        bitter: 0.5,
                        sweet: 0.2,
                        spicy: 0.2,
                        umami: 0.1,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.4,
                        sulfurous: 0.3,
                        woody: 0.2,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                    },
                    texture: {
                        crunchy: 0.7,
                        crisp: 0.2,
                        tender: 0.1,
                        chewy: 0,
                        silky: 0,
                        creamy: 0,
                    },
                },
                nightshade: {
                    taste: {
                        umami: 0.5,
                        sweet: 0.3,
                        sour: 0.1,
                        bitter: 0.1,
                        salty: 0,
                        spicy: 0,
                    },
                    aroma: {
                        fruity: 0.5,
                        earthy: 0.3,
                        herbal: 0.2,
                        floral: 0,
                        woody: 0,
                        spicy: 0,
                    },
                    texture: {
                        tender: 0.5,
                        juicy: 0.3,
                        chewy: 0.2,
                        crisp: 0,
                        crunchy: 0,
                        silky: 0,
                    },
                },
                squash: {
                    taste: {
                        sweet: 0.6,
                        earthy: 0.2,
                        nutty: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.4,
                        sweet: 0.4,
                        woody: 0.1,
                        herbal: 0.1,
                        floral: 0,
                        spicy: 0,
                    },
                    texture: {
                        tender: 0.4,
                        creamy: 0.3,
                        chewy: 0.2,
                        crisp: 0.1,
                        crunchy: 0,
                        silky: 0,
                    },
                },
                legume: {
                    taste: {
                        earthy: 0.5,
                        sweet: 0.3,
                        umami: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.6,
                        nutty: 0.3,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                        spicy: 0,
                    },
                    texture: {
                        tender: 0.4,
                        creamy: 0.3,
                        chewy: 0.3,
                        crisp: 0,
                        crunchy: 0,
                        silky: 0,
                    },
                },
                starchy: {
                    taste: {
                        sweet: 0.5,
                        earthy: 0.3,
                        umami: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.7,
                        nutty: 0.2,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                        spicy: 0,
                    },
                    texture: {
                        starchy: 0.6,
                        tender: 0.2,
                        creamy: 0.2,
                        crisp: 0,
                        crunchy: 0,
                        silky: 0,
                    },
                },
            };
            // Select appropriate profile or use default
            const profile = profiles[String(subCategory)] || {
                taste: {
                    sweet: 0.25,
                    bitter: 0.25,
                    umami: 0.25,
                    salty: 0.15,
                    sour: 0.1,
                    spicy: 0,
                },
                aroma: {
                    earthy: 0.3,
                    herbal: 0.3,
                    woody: 0.2,
                    fruity: 0.1,
                    floral: 0.1,
                    spicy: 0,
                },
                texture: {
                    tender: 0.3,
                    crunchy: 0.3,
                    crisp: 0.2,
                    chewy: 0.1,
                    creamy: 0.1,
                    silky: 0,
                },
            };
            enhanced.sensoryProfile = profile;
        }
        acc[key] = enhanced;
        return acc;
    }, {});
}
exports.enhanceVegetableTransformations = enhanceVegetableTransformations;
/**
 * Enhances oil properties with additional culinary, sensory, and transformation details
 * @param oils Record of oil ingredients
 * @returns Enhanced oil ingredients with complete properties
 */
function enhanceOilProperties(oils) {
    return Object.entries(oils).reduce((acc, [key, oil]) => {
        // Start with the original oil
        const enhancedOil = { ...oil };
        // Ensure basic properties exist
        enhancedOil.category = String(enhancedOil.category || 'oil');
        enhancedOil.elementalProperties = String(JSON.stringify(enhancedOil.elementalProperties || {
            Fire: 0.3,
            Water: 0.2,
            Earth: 0.3,
            Air: 0.2,
        }));
        enhancedOil.qualities = String(Array.isArray(enhancedOil.qualities)
            ? JSON.stringify(enhancedOil.qualities)
            : JSON.stringify([]));
        // Create default sensory profile if none exists
        if (!enhancedOil.sensoryProfile) {
            const oilType = key.toLowerCase();
            const isFruity = oilType.includes('olive') || oilType.includes('avocado');
            const isNutty = oilType.includes('nut') ||
                oilType.includes('sesame') ||
                oilType.includes('walnut') ||
                oilType.includes('almond') ||
                oilType.includes('peanut');
            const isFloral = oilType.includes('sunflower') || oilType.includes('safflower');
            const isNeutral = oilType.includes('vegetable') ||
                oilType.includes('canola') ||
                oilType.includes('grapeseed');
            const isTropical = oilType.includes('coconut') || oilType.includes('palm');
            enhancedOil.sensoryProfile = String(JSON.stringify({
                taste: {
                    sweet: isFruity || isTropical ? 0.6 : 0.2,
                    bitter: isNutty ? 0.4 : 0.1,
                    umami: isNutty ? 0.5 : 0.2,
                    rich: isNutty || isFruity ? 0.7 : 0.4,
                },
                aroma: {
                    fruity: isFruity ? 0.8 : 0.1,
                    nutty: isNutty ? 0.8 : 0.1,
                    floral: isFloral ? 0.7 : 0.1,
                    neutral: isNeutral ? 0.9 : 0.2,
                    tropical: isTropical ? 0.8 : 0.1,
                },
                texture: {
                    viscosity: isTropical || oilType.includes('olive') ? 0.7 : 0.5,
                    mouthfeel: isFruity || isNutty ? 0.8 : 0.5,
                    richness: isFruity || isNutty || isTropical ? 0.7 : 0.4,
                },
            }));
        }
        // Enhance culinary applications if present
        if (enhancedOil.culinaryApplications) {
            // Ensure all application types are properly structured
            Object.entries(enhancedOil.culinaryApplications).forEach(([appType, application]) => {
                if (application && typeof application === 'object') {
                    const appData = application;
                    enhancedOil.culinaryApplications[appType] = String(JSON.stringify({
                        ...application,
                        elementalEffect: appData.elementalEffect || {
                            Fire: appType === 'frying' ||
                                appType === 'cooking' ||
                                appType === 'highHeat'
                                ? 0.2
                                : 0.1,
                            Water: appType === 'dressing' || appType === 'marinade' ? 0.2 : 0.1,
                            Earth: appType === 'baking' || appType === 'roasting' ? 0.2 : 0.1,
                            Air: appType === 'emulsion' || appType === 'whipping' ? 0.2 : 0.1,
                        },
                        alchemicalEffect: appData.alchemicalEffect || {
                            spirit: appType === 'finishing' || appType === 'infusion' ? 0.2 : 0.1,
                            essence: appType === 'dressing' || appType === 'marinade' ? 0.2 : 0.1,
                            matter: appType === 'baking' || appType === 'cooking' ? 0.2 : 0.1,
                            substance: appType === 'frying' || appType === 'highHeat' ? 0.2 : 0.1,
                        },
                    }));
                }
            });
        }
        else {
            // Create default culinary applications based on smoke point and oil type
            const smokePointData = enhancedOil.smokePoint;
            const smokePoint = Number(smokePointData.fahrenheit) || 0;
            const isHighHeat = smokePoint > 400;
            const isMediumHeat = smokePoint > 325 && smokePoint <= 400;
            const isLowHeat = smokePoint <= 325;
            const isFinishing = key.toLowerCase().includes('olive') ||
                key.toLowerCase().includes('walnut') ||
                key.toLowerCase().includes('sesame') ||
                key.toLowerCase().includes('pumpkin');
            enhancedOil.culinaryApplications = String(JSON.stringify({
                ...(isHighHeat
                    ? {
                        frying: {
                            notes: ['Excellent for high-heat cooking'],
                            techniques: ['Deep frying', 'Stir-frying', 'Sautéing'],
                            elementalEffect: { Fire: 0.3, Earth: 0.1 },
                            alchemicalEffect: { substance: 0.3, matter: 0.2 },
                        },
                    }
                    : {}),
                ...(isMediumHeat
                    ? {
                        cooking: {
                            notes: ['Good for medium-heat cooking'],
                            techniques: ['Sautéing', 'Pan frying', 'Roasting'],
                            elementalEffect: { Fire: 0.2, Earth: 0.2 },
                            alchemicalEffect: { matter: 0.3, essence: 0.1 },
                        },
                    }
                    : {}),
                ...(isLowHeat || isFinishing
                    ? {
                        finishing: {
                            notes: ['Best used unheated or low heat'],
                            techniques: ['Drizzling', 'Dressings', 'Dips'],
                            elementalEffect: { Water: 0.3, Air: 0.2 },
                            alchemicalEffect: { spirit: 0.3, essence: 0.2 },
                        },
                    }
                    : {}),
                ...(enhancedOil.subCategory === 'baking' ||
                    key.toLowerCase().includes('coconut')
                    ? {
                        baking: {
                            notes: ['Suitable for baked goods'],
                            techniques: ['Cakes', 'Cookies', 'Breads'],
                            elementalEffect: { Earth: 0.3, Fire: 0.1 },
                            alchemicalEffect: { matter: 0.3, substance: 0.1 },
                        },
                    }
                    : {}),
            }));
        }
        // Add cooking transformations if they don't exist
        if (!enhancedOil.elementalTransformation) {
            enhancedOil.elementalTransformation = String(JSON.stringify({
                whenHeated: {
                    Fire: 0.2,
                    Air: 0.1,
                    Water: -0.1,
                    Earth: -0.05,
                },
                whenCooled: {
                    Water: 0.1,
                    Earth: 0.2,
                    Fire: -0.1,
                    Air: -0.05,
                },
                whenMixed: {
                    Air: 0.15,
                    Water: 0.1,
                    Fire: -0.05,
                    Earth: -0.05,
                },
                whenInfused: {
                    Air: 0.2,
                    Fire: 0.1,
                    Earth: -0.05,
                    Water: -0.05,
                },
            }));
        }
        // Add thermodynamic properties if they don't exist
        if (!enhancedOil.thermodynamicProperties) {
            // Base on smoke point if available
            const smokePointData = enhancedOil.smokePoint;
            const smokePoint = Number(smokePointData.fahrenheit) || 350;
            const normalizedSmokePoint = (smokePoint - 300) / 250; // Normalize between 300-550°F
            const heatValue = 0.5 + normalizedSmokePoint * 0.4; // Scale 0.5-0.9
            enhancedOil.thermodynamicProperties = String(JSON.stringify({
                heat: Math.min(Math.max(heatValue, 0.3), 0.9),
                entropy: 0.4,
                reactivity: 0.6,
                energy: 0.7,
            }));
        }
        // Add recommended cooking methods if they don't exist
        if (!enhancedOil.recommendedCookingMethods) {
            const smokePointData = enhancedOil.smokePoint;
            const smokePoint = Number(smokePointData.fahrenheit) || 0;
            const methods = [];
            if (smokePoint > 400) {
                methods.push({ name: 'deepFrying', potency: 0.9 });
                methods.push({ name: 'stirFrying', potency: 0.9 });
                methods.push({ name: 'sautéing', potency: 0.8 });
            }
            if (smokePoint > 350) {
                methods.push({ name: 'roasting', potency: 0.7 });
                methods.push({ name: 'baking', potency: 0.7 });
            }
            if (enhancedOil.subCategory === 'finishing' || smokePoint < 350) {
                methods.push({ name: 'dressing', potency: 0.9 });
                methods.push({ name: 'marinating', potency: 0.8 });
                methods.push({ name: 'drizzling', potency: 1.0 });
            }
            enhancedOil.recommendedCookingMethods = String(JSON.stringify(methods));
        }
        acc[key] = enhancedOil;
        return acc;
    }, {});
}
exports.enhanceOilProperties = enhanceOilProperties;
/**
 * Pattern OO-3: Utility Import Alignment - Standalone exports for TS2614 compatibility
 */
function getCurrentElementalState() {
    return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
}
exports.getCurrentElementalState = getCurrentElementalState;
function getDefaultElementalProperties() {
    return elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES;
}
exports.getDefaultElementalProperties = getDefaultElementalProperties;
function ensureLowercaseFormat(properties) {
    if (!properties || typeof properties !== 'object') {
        return properties;
    }
    const lowercaseProps = {};
    for (const [key, value] of Object.entries(properties)) {
        // Convert capitalized element names to lowercase
        const lowerKey = key.toLowerCase();
        lowercaseProps[lowerKey] = value;
    }
    return lowercaseProps;
}
exports.ensureLowercaseFormat = ensureLowercaseFormat;
/**
 * Ensures the returned object always matches the IngredientMapping interface at runtime.
 */
const fixIngredientMapping = (mapping, key) => {
    // Format key into a readable name if no name is provided
    const formattedName = key
        .split('_')
        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
        .join(' ');
    // Ensure all required elements exist in elementalProperties
    const elementalProperties = mapping.elementalProperties
        ? (0, exports.ensureCompleteElementalProperties)(mapping.elementalProperties)
        : elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES;
    // Add runtime type guard (minimal, since normalization is already enforced)
    const requiredKeys = ['name', 'category', 'elementalProperties'];
    for (const k of requiredKeys) {
        if (!(k in mapping)) {
            throw new Error(`fixIngredientMapping: Missing required key '${k}' for ingredient '${key}'`);
        }
    }
    // Ensure astrologicalProfile has minimal structure if present but empty
    if (mapping.astrologicalProfile && typeof mapping.astrologicalProfile === 'object' && Object.keys(mapping.astrologicalProfile).length === 0) {
        mapping.astrologicalProfile = {
            rulingPlanets: [],
            favorableZodiac: []
        };
    }
    return {
        ...mapping,
        name: mapping.name || formattedName,
        elementalProperties,
    };
};
exports.fixIngredientMapping = fixIngredientMapping;
/**
 * Normalizes all ingredient mappings and guarantees type safety for downstream usage.
 */
const fixIngredientMappings = (ingredients) => {
    const result = {};
    Object.entries(ingredients).forEach(([key, mapping]) => {
        result[key] = (0, exports.fixIngredientMapping)(mapping, key);
    });
    return result;
};
exports.fixIngredientMappings = fixIngredientMappings;
/**
 * Fixes ingredient mappings by ensuring all required properties are present
 * @param ingredients Raw ingredient mappings
 * @returns Fixed ingredient mappings
 */
function fixRawIngredientMappings(ingredients) {
    return Object.entries(ingredients).reduce((acc, [key, value]) => {
        // Skip null or undefined values
        if (!value)
            return acc;
        const valueData = value;
        // Ensure elemental properties are normalized
        const elementalProperties = (0, exports.normalizeProperties)(valueData.elementalProperties || {});
        // Create a standardized astrological profile if one doesn't exist
        const astroProfile = valueData.astrologicalProfile || {};
        // Determine base elemental affinity if not provided
        if (!astroProfile.elementalAffinity) {
            const strongestElement = Object.entries(elementalProperties)
                .sort(([, a], [, b]) => b - a)[0][0]
                .toLowerCase();
            astroProfile.elementalAffinity = {
                base: strongestElement,
            };
        }
        acc[key] = {
            ...value,
            name: valueData.name || key.replace(/_/g, ' '),
            category: valueData.category || 'ingredient',
            elementalProperties,
            astrologicalProfile: astroProfile,
        };
        return acc;
    }, {});
}
exports.fixRawIngredientMappings = fixRawIngredientMappings;
/**
 * Calculate the affinity between two elements based on the Five Elements theory
 * Returns a value between 0 and 1, where:
 * - 1.0: Same element (perfect affinity)
 * - 0.8: Element is generated by (child of) the other
 * - 0.6: Element generates (parent of) the other
 * - 0.4: Neutral relationship
 * - 0.2: Element is controlled by the other
 * - 0.0: Element controls the other (weakest affinity)
 */
function calculateElementalAffinity(element1, element2) {
    const relationship = getElementalRelationship(element1, element2);
    switch (relationship) {
        case 'same':
            return 1.0;
        case 'generating':
            return 0.8;
        case 'controlled-by':
            return 0.6;
        case 'neutral':
            return 0.4;
        case 'weakened-by':
            return 0.2;
        case 'controlling':
            return 0.0;
        default:
            return 0.4;
    }
}
exports.calculateElementalAffinity = calculateElementalAffinity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9lbGVtZW50YWxVdGlscy50cyIsIm1hcHBpbmdzIjoiO0FBQUEsOEJBQThCOzs7QUFHOUIsdUVBQThFO0FBRTlFLHFGQUcrQztBQUUvQyx3RUFBcUU7QUFhckUsbURBSTRCO0FBRzVCLDJEQUk2QjtBQXdjcEIseUZBM2NQLDRCQUFRLE9BMmNPO0FBQUUsc0dBMWNqQix5Q0FBcUIsT0EwY2lCO0FBQUUsbUdBemN4QyxzQ0FBa0IsT0F5Y3dDO0FBdGM1RCw2Q0FBNkM7QUFDN0MsTUFBTSx5QkFBeUIsR0FBRztJQUNoQyxJQUFJLEVBQUU7UUFDSixpQkFBaUIsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQztRQUNuRSxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDO1FBQzlCLFNBQVMsRUFBRSxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLENBQUM7UUFDckQsV0FBVyxFQUFFLEtBQUs7S0FDbkI7SUFDRCxLQUFLLEVBQUU7UUFDTCxpQkFBaUIsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQztRQUNsRSxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO1FBQy9CLFNBQVMsRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDO1FBQzlDLFdBQVcsRUFBRSxNQUFNO0tBQ3BCO0lBQ0QsS0FBSyxFQUFFO1FBQ0wsaUJBQWlCLEVBQUUsQ0FBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUM7UUFDcEUsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQztRQUNuQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLFlBQVksQ0FBQztRQUNoRCxXQUFXLEVBQUUsVUFBVTtLQUN4QjtJQUNELEdBQUcsRUFBRTtRQUNILGlC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WUFBWTtZQUM1QyxtQkFBbUI7WUFDbkIsbUJBQW1CLEVBQUUsWUFBWTtTQUNsQyxDQUFDO1FBRUYsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDVCxDQUFDO0FBckNELDREQXFDQztBQVVEOzs7Ozs7Ozs7R0FTRztBQUNILFNBQWdCLDBCQUEwQixDQUN4QyxRQUFpQixFQUNqQixRQUFpQjtJQUVqQixNQUFNLFlBQVksR0FBRyx3QkFBd0IsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFbEUsUUFBUSxZQUFZLEVBQUU7UUFDcEIsS0FBSyxNQUFNO1lBQ1QsT0FBTyxHQUFHLENBQUM7UUFDYixLQUFLLFlBQVk7WUFDZixPQUFPLEdBQUcsQ0FBQztRQUNiLEtBQUssZUFBZTtZQUNsQixPQUFPLEdBQUcsQ0FBQztRQUNiLEtBQUssU0FBUztZQUNaLE9BQU8sR0FBRyxDQUFDO1FBQ2IsS0FBSyxhQUFhO1lBQ2hCLE9BQU8sR0FBRyxDQUFDO1FBQ2IsS0FBSyxhQUFhO1lBQ2hCLE9BQU8sR0FBRyxDQUFDO1FBQ2I7WUFDRSxPQUFPLEdBQUcsQ0FBQztLQUNkO0FBQ0gsQ0FBQztBQXRCRCxnRUFzQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9lbGVtZW50YWxVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZWxlbWVudGFsVXRpbHMudHNcblxuaW1wb3J0IHsgQWxjaGVtaWNhbEl0ZW0gfSBmcm9tICdAL2NhbGN1bGF0aW9ucy9hbGNoZW1pY2FsVHJhbnNmb3JtYXRpb24nO1xuaW1wb3J0IHsgREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUyB9IGZyb20gJ0AvY29uc3RhbnRzL2VsZW1lbnRhbENvbnN0YW50cyc7XG5pbXBvcnQgeyBFbGVtZW50YWxDaGFyYWN0ZXIsIEFsY2hlbWljYWxQcm9wZXJ0eSB9IGZyb20gJ0AvY29uc3RhbnRzL3BsYW5ldGFyeUVsZW1lbnRzJztcbmltcG9ydCB7XG4gIEx1bmFyUGhhc2UsXG4gIGNhbGN1bGF0ZVBsYW5ldGFyeUJvb3N0LFxufSBmcm9tICdAL2NvbnN0YW50cy9wbGFuZXRhcnlGb29kQXNzb2NpYXRpb25zJztcbmltcG9ydCB0eXBlIHsgSW5ncmVkaWVudE1hcHBpbmcgfSBmcm9tICdAL2RhdGEvaW5ncmVkaWVudHMvdHlwZXMnO1xuaW1wb3J0IHsgRWxlbWVudGFsQ2FsY3VsYXRvciB9IGZyb20gJ0Avc2VydmljZXMvRWxlbWVudGFsQ2FsY3VsYXRvcic7XG5pbXBvcnQge1xuICBFbGVtZW50YWxJdGVtLFxufSBmcm9tICdAL3R5cGVzL2FsY2hlbXknO1xuaW1wb3J0IHR5cGUge1xuICBFbGVtZW50YWxQcm9wZXJ0aWVzLFxuICBSZWNpcGUsXG4gIEVsZW1lbnRhbEFmZmluaXR5LFxuICBFbGVtZW50YWxDaGFyYWN0ZXJpc3RpY3MsXG4gIEVsZW1lbnQsXG4gIEVsZW1lbnRhbFByb2ZpbGUsXG59IGZyb20gJ0AvdHlwZXMvYWxjaGVteSc7XG5pbXBvcnQgeyBjcmVhdGVBc3Ryb2xvZ2ljYWxCcmlkZ2UgfSBmcm9tICdAL3R5cGVzL2JyaWRnZXMvYXN0cm9sb2dpY2FsQnJpZGdlJztcbmltcG9ydCB7IFxuICBpc0VsZW1lbnRhbFByb3BlcnRpZXMsIFxuICBpc0VsZW1lbnRhbFByb3BlcnR5S2V5LCBcbiAgbG9nVW5leHBlY3RlZFZhbHVlIFxufSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRpb24nO1xuXG5cbmltcG9ydCB7XG4gIGVsZW1lbnRzLFxuICBlbGVtZW50YWxJbnRlcmFjdGlvbnMsXG4gIGVsZW1lbnRhbEZ1bmN0aW9ucyxcbn0gZnJvbSAnLi9lbGVtZW50YWxNYXBwaW5ncyc7XG5cbi8vIE1pc3NpbmcgRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUyBjb25zdGFudFxuY29uc3QgRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUyA9IHtcbiAgRmlyZToge1xuICAgIGNvb2tpbmdUZWNobmlxdWVzOiBbJ2dyaWxsaW5nJywgJ3JvYXN0aW5nJywgJ3NlYXJpbmcnLCAnZmxhbWLDqWluZyddLFxuICAgIHRpbWVPZkRheTogWydtb3JuaW5nJywgJ25vb24nXSxcbiAgICBxdWFsaXRpZXM6IFsnZW5lcmdldGljJywgJ3RyYW5zZm9ybWF0aXZlJywgJ2ludGVuc2UnXSxcbiAgICB0ZW1wZXJhdHVyZTogJ2hvdCdcbiAgfSxcbiAgV2F0ZXI6IHtcbiAgICBjb29raW5nVGVjaG5pcXVlczogWydib2lsaW5nJywgJ3N0ZWFtaW5nJywgJ3BvYWNoaW5nJywgJ2JyYWlzaW5nJ10sXG4gICAgdGltZU9mRGF5OiBbJ2V2ZW5pbmcnLCAnbmlnaHQnXSxcbiAgICBxdWFsaXRpZXM6IFsnZmxvd2luZycsICdjb29saW5nJywgJ251cnR1cmluZyddLFxuICAgIHRlbXBlcmF0dXJlOiAnY29vbCdcbiAgfSxcbiAgRWFydGg6IHtcbiAgICBjb29raW5nVGVjaG5pcXVlczogWydiYWtpbmcnLCAnc2xvdy1jb29raW5nJywgJ3JvYXN0aW5nJywgJ3Ntb2tpbmcnXSxcbiAgICB0aW1lT2ZEYXk6IFsnYWZ0ZXJub29uJywgJ2V2ZW5pbmcnXSxcbiAgICBxdWFsaXRpZXM6IFsnZ3JvdW5kaW5nJywgJ3N0YWJsZScsICdub3VyaXNoaW5nJ10sXG4gICAgdGVtcGVyYXR1cmU6ICdtb2RlcmF0ZSdcbiAgfSxcbiAgQWlyOiB7XG4gICAgY29va2luZ1RlY2huaXF1ZXM6IFsnd2hpcHBpbmcnLCAnZnJ5aW5nJywgJ3NhdXTDqWluZycsICdkZWh5ZHJhdGluZyddLFxuICAgIHRpbWVPZkRheTogWydtb3JuaW5nJywgJ21pZGRheSddLFxuICAgIHF1YWxpdGllczogWydsaWdodCcsICdhaXJ5JywgJ3F1aWNrJ10sXG4gICAgdGVtcGVyYXR1cmU6ICd2YXJpYWJsZSdcbiAgfVxufTtcblxuLy8gQWxjaGVtaWNhbFByb3BlcnR5IHR5cGUgaW1wb3J0ZWQgZnJvbSBAL2NvbnN0YW50cy9wbGFuZXRhcnlFbGVtZW50c1xuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGVsZW1lbnRhbCBwcm9wZXJ0aWVzIGNvbnRhaW4gdmFsaWQgdmFsdWVzXG4gKiBAcGFyYW0gcHJvcGVydGllcyBUaGUgZWxlbWVudGFsIHByb3BlcnRpZXMgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIFRydWUgaWYgcHJvcGVydGllcyBhcmUgdmFsaWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVFbGVtZW50YWxQcm9wZXJ0aWVzID0gKFxuICBwcm9wZXJ0aWVzOiBFbGVtZW50YWxQcm9wZXJ0aWVzXG4pOiBib29sZWFuID0+IHtcbiAgLy8gSWYgcHJvcGVydGllcyBpcyBudWxsIG9yIHVuZGVmaW5lZCwgcmV0dXJuIGZhbHNlIGltbWVkaWF0ZWx5XG4gIGlmICghcHJvcGVydGllcykge1xuICAgIGNvbnNvbGUud2FybignV2FybmluZzogcHJvcGVydGllcyBpcyBudWxsIG9yIHVuZGVmaW5lZCBpbiB2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXMnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBDaGVjayBpZiBhbGwgcmVxdWlyZWQgZWxlbWVudHMgZXhpc3RcbiAgY29uc3QgcmVxdWlyZWRFbGVtZW50cyA9IFsnRmlyZScsICdXYXRlcicsICdFYXJ0aCcsICdBaXInXTtcbiAgZm9yIChjb25zdCBlbGVtZW50IG9mIHJlcXVpcmVkRWxlbWVudHMpIHtcbiAgICBpZiAodHlwZW9mIHByb3BlcnRpZXNbZWxlbWVudF0gIT09ICdudW1iZXInKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFdhcm5pbmc6IHByb3BlcnRpZXMuJHtlbGVtZW50fSBpcyBub3QgYSBudW1iZXIgaW4gdmFsaWRhdGVFbGVtZW50YWxQcm9wZXJ0aWVzYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdmFsdWVzIGFyZSBiZXR3ZWVuIDAgYW5kIDFcbiAgICBpZiAocHJvcGVydGllc1tlbGVtZW50XSA8IDAgfHwgcHJvcGVydGllc1tlbGVtZW50XSA+IDEpIHtcbiAgICAgIGxvZ1VuZXhwZWN0ZWRWYWx1ZSgndmFsaWRhdGVFbGVtZW50YWxQcm9wZXJ0aWVzJywge1xuICAgICAgICBtZXNzYWdlOiBgRWxlbWVudCB2YWx1ZSBvdXQgb2YgcmFuZ2U6ICR7ZWxlbWVudH0gPSAke3Byb3BlcnRpZXNbZWxlbWVudF19YCxcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgdmFsdWU6IHByb3BlcnRpZXNbZWxlbWVudF0sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBPcHRpb25hbGx5IGNoZWNrIGlmIHByb3BlcnRpZXMgc3VtIHRvIDEgKG9yIGNsb3NlIHRvIGl0IGR1ZSB0byBmbG9hdGluZyBwb2ludClcbiAgY29uc3Qgc3VtID0gT2JqZWN0LnZhbHVlcyhwcm9wZXJ0aWVzKS5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwsIDApO1xuICBjb25zdCBpc0Nsb3NlVG9PbmUgPSBNYXRoLmFicyhzdW0gLSAxKSA8IDAuMDE7XG5cbiAgaWYgKCFpc0Nsb3NlVG9PbmUpIHtcbiAgICBsb2dVbmV4cGVjdGVkVmFsdWUoJ3ZhbGlkYXRlRWxlbWVudGFsUHJvcGVydGllcycsIHtcbiAgICAgIG1lc3NhZ2U6IGBFbGVtZW50YWwgcHJvcGVydGllcyBkbyBub3Qgc3VtIHRvIDE6ICR7c3VtfWAsXG4gICAgICBzdW0sXG4gICAgICBwcm9wZXJ0aWVzLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgZWxlbWVudGFsIHByb3BlcnRpZXMgdG8gZW5zdXJlIHRoZXkgc3VtIHRvIDFcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIFRoZSBlbGVtZW50YWwgcHJvcGVydGllcyB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIE5vcm1hbGl6ZWQgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVByb3BlcnRpZXMgPSAoXG4gIHByb3BlcnRpZXM6IFBhcnRpYWw8RWxlbWVudGFsUHJvcGVydGllcz5cbik6IEVsZW1lbnRhbFByb3BlcnRpZXMgPT4ge1xuICAvLyBIYW5kbGUgbnVsbCBvciB1bmRlZmluZWRcbiAgaWYgKCFwcm9wZXJ0aWVzKSB7XG4gICAgY29uc29sZS53YXJuKCdXYXJuaW5nOiBwcm9wZXJ0aWVzIGlzIG51bGwgb3IgdW5kZWZpbmVkIGluIG5vcm1hbGl6ZVByb3BlcnRpZXMnKTtcbiAgICByZXR1cm4geyAuLi5ERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTIH07XG4gIH1cblxuICAvLyBGaWxsIGluIGFueSBtaXNzaW5nIHByb3BlcnRpZXMgd2l0aCBkZWZhdWx0c1xuICBjb25zdCBjb21wbGV0ZVByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXMgPSB7XG4gICAgRmlyZTogcHJvcGVydGllcy5GaXJlID8/IERFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMuRmlyZSxcbiAgICBXYXRlcjogcHJvcGVydGllcy5XYXRlciA/PyBERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTLldhdGVyLFxuICAgIEVhcnRoOiBwcm9wZXJ0aWVzLkVhcnRoID8/IERFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMuRWFydGgsXG4gICAgQWlyOiBwcm9wZXJ0aWVzLkFpciA/PyBERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTLkFpcixcbiAgfTtcblxuICBjb25zdCBzdW0gPSBPYmplY3QudmFsdWVzKGNvbXBsZXRlUHJvcGVydGllcykucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICsgdmFsLCAwKTtcblxuICBpZiAoc3VtID09PSAwKSB7XG4gICAgLy8gSWYgc3VtIGlzIDAsIHJldHVybiBiYWxhbmNlZCBkZWZhdWx0XG4gICAgY29uc29sZS53YXJuKCdXYXJuaW5nOiBwcm9wZXJ0aWVzIHN1bSBpcyAwIGluIG5vcm1hbGl6ZVByb3BlcnRpZXMnKTtcbiAgICByZXR1cm4geyAuLi5ERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTIH07XG4gIH1cblxuICAvLyBOb3JtYWxpemUgZWFjaCB2YWx1ZVxuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY29tcGxldGVQcm9wZXJ0aWVzKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKGlzRWxlbWVudGFsUHJvcGVydHlLZXkoa2V5KSkge1xuICAgICAgYWNjW2tleV0gPSB2YWx1ZSAvc3VtO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGlzIHNob3VsZG4ndCBoYXBwZW4gd2l0aCB0aGUgdHlwZS1zYWZldHkgYWJvdmUsIGJ1dCBqdXN0IGluIGNhc2VcbiAgICAgIGNvbnNvbGUud2FybihgV2FybmluZzogaW52YWxpZCBrZXkgJHtrZXl9IGluIG5vcm1hbGl6ZVByb3BlcnRpZXNgKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgeyAuLi5ERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTIH0pO1xufTtcblxuLyoqXG4gKiBTdGFuZGFyZGl6ZXMgZWxlbWVudGFsIHByb3BlcnRpZXMgZm9yIHJlY2lwZXMsIGVuc3VyaW5nIGFsbCByZWNpcGVzIGhhdmVcbiAqIHByb3Blcmx5IG5vcm1hbGl6ZWQgZWxlbWVudGFsIHZhbHVlc1xuICogQHBhcmFtIHJlY2lwZSBUaGUgcmVjaXBlIHRvIHN0YW5kYXJkaXplXG4gKiBAcmV0dXJucyBSZWNpcGUgd2l0aCBzdGFuZGFyZGl6ZWQgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGNvbnN0IHN0YW5kYXJkaXplUmVjaXBlRWxlbWVudHMgPSA8XG4gIFQgZXh0ZW5kcyB7IGVsZW1lbnRhbFByb3BlcnRpZXM/OiBQYXJ0aWFsPEVsZW1lbnRhbFByb3BlcnRpZXM+IH1cbj4oXG4gIHJlY2lwZTogVCB8IG51bGwgfCB1bmRlZmluZWRcbik6IFQgJiB7IGVsZW1lbnRhbFByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXMgfSA9PiB7XG4gIC8vIEhhbmRsZSBudWxsIC91bmRlZmluZWQgcmVjaXBlXG4gIGlmICghcmVjaXBlKSB7XG4gICAgY29uc29sZS53YXJuKCdXYXJuaW5nOiByZWNpcGUgaXMgbnVsbCBvciB1bmRlZmluZWQgaW4gc3RhbmRhcmRpemVSZWNpcGVFbGVtZW50cycpO1xuICAgIHJldHVybiB7XG4gICAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiB7IC4uLkRFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMgfVxuICAgIH0gYXMgVCAmIHsgZWxlbWVudGFsUHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllcyB9O1xuICB9XG5cbiAgLy8gSWYgcmVjaXBlIGRvZXNuJ3QgaGF2ZSBlbGVtZW50YWwgcHJvcGVydGllcywgdXNlIGN1cnJlbnQgZWxlbWVudGFsIHN0YXRlXG4gIGlmICghcmVjaXBlLmVsZW1lbnRhbFByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBFbGVtZW50YWxDYWxjdWxhdG9yLmdldEN1cnJlbnRFbGVtZW50YWxTdGF0ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5yZWNpcGUsXG4gICAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiBjdXJyZW50U3RhdGUsXG4gICAgfTtcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBwcm9wZXJ0aWVzIHRvIGVuc3VyZSB0aGV5IHN1bSB0byAxXG4gIHJldHVybiB7XG4gICAgLi4ucmVjaXBlLFxuICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IG5vcm1hbGl6ZVByb3BlcnRpZXMocmVjaXBlLmVsZW1lbnRhbFByb3BlcnRpZXMpLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlRWxlbWVudGFsUmVxdWlyZW1lbnRzID0gKFxuICBwcm9wZXJ0aWVzOiB1bmtub3duXG4pOiBwcm9wZXJ0aWVzIGlzIEVsZW1lbnRhbFByb3BlcnRpZXMgPT4ge1xuICByZXR1cm4gaXNFbGVtZW50YWxQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBlbGVtZW50cyB0aGF0IGFyZSBtaXNzaW5nIG9yIHNpZ25pZmljYW50bHkgbG93ZXIgdGhhbiBpZGVhbCBiYWxhbmNlIGluIHRoZSBwcm92aWRlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0gcHJvcGVydGllcyBUaGUgZWxlbWVudGFsIHByb3BlcnRpZXMgdG8gY2hlY2tcbiAqIEByZXR1cm5zIEFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIG1pc3Npbmcgb3IgbG93XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaXNzaW5nRWxlbWVudHMoXG4gIHByb3BlcnRpZXM6IFBhcnRpYWw8RWxlbWVudGFsUHJvcGVydGllcz4gfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBFbGVtZW50W10ge1xuICBpZiAoIXByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gWydGaXJlJywgJ1dhdGVyJywgJ0VhcnRoJywgJ0FpciddO1xuICB9XG5cbiAgY29uc3QgbWlzc2luZzogRWxlbWVudFtdID0gW107XG4gIGNvbnN0IGlkZWFsQmFsYW5jZSA9IDAuMjU7IC8vIEVhY2ggZWxlbWVudCBzaG91bGQgaWRlYWxseSBiZSAyNSVcbiAgY29uc3QgdGhyZXNob2xkID0gMC4xNTsgLy8gQ29uc2lkZXIgbWlzc2luZyBpZiBiZWxvdyAxNSVcblxuICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgWydGaXJlJywgJ1dhdGVyJywgJ0VhcnRoJywgJ0FpciddIGFzIEVsZW1lbnRbXSkge1xuICAgIGNvbnN0IHZhbHVlID0gcHJvcGVydGllc1tlbGVtZW50XSB8fCAwO1xuICAgIGlmICh2YWx1ZSA8IHRocmVzaG9sZCkge1xuICAgICAgbWlzc2luZy5wdXNoKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtaXNzaW5nO1xufVxuXG5leHBvcnQgY29uc3QgZWxlbWVudGFsVXRpbHMgPSB7XG4gIHZhbGlkYXRlUHJvcGVydGllczogdmFsaWRhdGVFbGVtZW50YWxSZXF1aXJlbWVudHMsXG4gIG5vcm1hbGl6ZVByb3BlcnRpZXM6IG5vcm1hbGl6ZVByb3BlcnRpZXMsXG4gIHN0YW5kYXJkaXplUmVjaXBlRWxlbWVudHM6IHN0YW5kYXJkaXplUmVjaXBlRWxlbWVudHMsXG4gIGdldE1pc3NpbmdFbGVtZW50cyxcblxuICBjYWxjdWxhdGVlbGVtZW50YWxTdGF0ZShyZWNpcGU6IFJlY2lwZSB8IG51bGwgfCB1bmRlZmluZWQpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICBpZiAoIXJlY2lwZT8uaW5ncmVkaWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gRWxlbWVudGFsQ2FsY3VsYXRvci5nZXRDdXJyZW50RWxlbWVudGFsU3RhdGUoKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBzYWZlIGRlZmF1bHQgYmFsYW5jZSB0byBzdGFydFxuICAgIGNvbnN0IGJhbGFuY2U6IEVsZW1lbnRhbFByb3BlcnRpZXMgPSB7IC4uLkRFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMgfTtcbiAgICBcbiAgICAvLyBHZXQgdG90YWwgYW1vdW50IGZvciBwZXJjZW50YWdlIGNhbGN1bGF0aW9uc1xuICAgIGNvbnN0IHRvdGFsQW1vdW50ID0gcmVjaXBlLmluZ3JlZGllbnRzLnJlZHVjZSgoc3VtLCBpbmcpID0+IHtcbiAgICAgIGNvbnN0IGFtb3VudCA9IGluZy5hbW91bnQgPz8gMTsgLy8gRGVmYXVsdCB0byAxIGlmIGFtb3VudCBpcyBtaXNzaW5nXG4gICAgICByZXR1cm4gc3VtICsgYW1vdW50O1xuICAgIH0sIDApO1xuXG4gICAgLy8gSGFuZGxlIHRoZSBzcGVjaWFsIGNhc2Ugd2hlcmUgdGhlcmUgYXJlIG5vIGluZ3JlZGllbnRzIHdpdGggYW1vdW50XG4gICAgaWYgKHRvdGFsQW1vdW50ID09PSAwKSB7XG4gICAgICByZXR1cm4gYmFsYW5jZTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGJhbGFuY2Ugd2l0aCAwIHZhbHVlc1xuICAgIE9iamVjdC5rZXlzKGJhbGFuY2UpLmZvckVhY2goZWwgPT4ge1xuICAgICAgaWYgKGlzRWxlbWVudGFsUHJvcGVydHlLZXkoZWwpKSB7XG4gICAgICAgIGJhbGFuY2VbZWxdID0gMDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFByb2Nlc3MgZWFjaCBpbmdyZWRpZW50XG4gICAgcmVjaXBlLmluZ3JlZGllbnRzLmZvckVhY2goaW5nID0+IHtcbiAgICAgIGNvbnN0IGFtb3VudCA9IGluZy5hbW91bnQgPz8gMTsgLy8gRGVmYXVsdCB0byAxIGlmIGFtb3VudCBpcyBtaXNzaW5nXG4gICAgICBcbiAgICAgIGlmIChpbmcuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgICAgICAvLyBGb3IgZWFjaCBlbGVtZW50IGluIHRoZSBpbmdyZWRpZW50XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGluZy5lbGVtZW50YWxQcm9wZXJ0aWVzKS5mb3JFYWNoKChbZWxlbWVudCwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgaWYgKGlzRWxlbWVudGFsUHJvcGVydHlLZXkoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIGJhbGFuY2VbZWxlbWVudF0gKz0gKHZhbHVlICogYW1vdW50KSAvdG90YWxBbW91bnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE5vcm1hbGl6ZSB0byBlbnN1cmUgdGhleSBzdW0gdG8gMVxuICAgIHJldHVybiBub3JtYWxpemVQcm9wZXJ0aWVzKGJhbGFuY2UpO1xuICB9LFxuXG4gIGNvbWJpbmVQcm9wZXJ0aWVzKFxuICAgIGE6IEVsZW1lbnRhbFByb3BlcnRpZXMsXG4gICAgYjogRWxlbWVudGFsUHJvcGVydGllcyxcbiAgICBiV2VpZ2h0ID0gMC41XG4gICk6IEVsZW1lbnRhbFByb3BlcnRpZXMge1xuICAgIGNvbnN0IGNvbWJpbmVkUHJvcHMgPSB7fSBhcyBFbGVtZW50YWxQcm9wZXJ0aWVzO1xuICAgIGNvbnN0IGFXZWlnaHQgPSAxIC0gYldlaWdodDtcblxuICAgIE9iamVjdC5rZXlzKGEpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGtleSBhcyBrZXlvZiBFbGVtZW50YWxQcm9wZXJ0aWVzO1xuICAgICAgY29tYmluZWRQcm9wc1tlbGVtZW50XSA9XG4gICAgICAgIGFbZWxlbWVudF0gKiBhV2VpZ2h0ICsgKGJbZWxlbWVudF0gfHwgMCkgKiBiV2VpZ2h0O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbWJpbmVkUHJvcHM7XG4gIH0sXG5cbiAgZ2V0ZWxlbWVudGFsU3RhdGUocmVjaXBlOiBSZWNpcGUpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICBpZiAoIXJlY2lwZS5pbmdyZWRpZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBFbGVtZW50YWxDYWxjdWxhdG9yLmdldEN1cnJlbnRFbGVtZW50YWxTdGF0ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbWJpbmVkUHJvcGVydGllcyA9IHJlY2lwZS5pbmdyZWRpZW50cy5yZWR1Y2UoXG4gICAgICAoYWNjLCBpbmdyZWRpZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHByb3BzID1cbiAgICAgICAgICBpbmdyZWRpZW50LmVsZW1lbnRhbFByb3BlcnRpZXMgfHxcbiAgICAgICAgICBFbGVtZW50YWxDYWxjdWxhdG9yLmdldEN1cnJlbnRFbGVtZW50YWxTdGF0ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIEZpcmU6IGFjYy5GaXJlICsgcHJvcHMuRmlyZSxcbiAgICAgICAgICBXYXRlcjogYWNjLldhdGVyICsgcHJvcHMuV2F0ZXIsXG4gICAgICAgICAgRWFydGg6IGFjYy5FYXJ0aCArIHByb3BzLkVhcnRoLFxuICAgICAgICAgIEFpcjogYWNjLkFpciArIHByb3BzLkFpcixcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB7IEZpcmU6IDAsIFdhdGVyOiAwLCBFYXJ0aDogMCwgQWlyOiAwIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIG5vcm1hbGl6ZVByb3BlcnRpZXMoY29tYmluZWRQcm9wZXJ0aWVzKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIGNvbXBsZW1lbnRhcnkgZWxlbWVudCB0aGF0IHdvcmtzIHdlbGwgd2l0aCB0aGUgZ2l2ZW4gZWxlbWVudFxuICAgKiBBbGwgZWxlbWVudHMgd29yayB3ZWxsIHRvZ2V0aGVyIGluIHRoZWlyIG93biB3YXlcbiAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gZmluZCBhIGNvbXBsZW1lbnQgZm9yXG4gICAqIEByZXR1cm5zIFRoZSBjb21wbGVtZW50YXJ5IGVsZW1lbnRcbiAgICovXG4gIGdldENvbXBsZW1lbnRhcnlFbGVtZW50KFxuICAgIGVsZW1lbnQ6IGtleW9mIEVsZW1lbnRhbFByb3BlcnRpZXNcbiAgKToga2V5b2YgRWxlbWVudGFsUHJvcGVydGllcyB7XG4gICAgLy8gRWFjaCBlbGVtZW50IGNvbXBsZW1lbnRzIGFsbCBvdGhlcnMsIGJ1dCB3ZSByZXR1cm4gb25lIHN1Z2dlc3Rpb25cbiAgICAvLyBiYXNlZCBvbiB0cmFkaXRpb25hbCBjdWxpbmFyeSBwYWlyaW5nc1xuICAgIGNvbnN0IGNvbXBsZW1lbnRhcnk6IFJlY29yZDxcbiAgICAgIGtleW9mIEVsZW1lbnRhbFByb3BlcnRpZXMsXG4gICAgICBrZXlvZiBFbGVtZW50YWxQcm9wZXJ0aWVzXG4gICAgPiA9IHtcbiAgICAgIEZpcmU6ICdGaXJlJywgLy8gRmlyZSByZWluZm9yY2VzIGl0c2VsZlxuICAgICAgV2F0ZXI6ICdXYXRlcicsIC8vIFdhdGVyIHJlaW5mb3JjZXMgaXRzZWxmXG4gICAgICBFYXJ0aDogJ0VhcnRoJywgLy8gRWFydGggcmVpbmZvcmNlcyBpdHNlbGZcbiAgICAgIEFpcjogJ0FpcicsIC8vIEFpciByZWluZm9yY2VzIGl0c2VsZlxuICAgIH07XG4gICAgcmV0dXJuIGNvbXBsZW1lbnRhcnlbZWxlbWVudF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGVsZW1lbnRhbCBjaGFyYWN0ZXJpc3RpY3MgZm9yIGEgc3BlY2lmaWMgZWxlbWVudFxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBnZXQgY2hhcmFjdGVyaXN0aWNzIGZvclxuICAgKiBAcmV0dXJucyBUaGUgZWxlbWVudGFsIGNoYXJhY3RlcmlzdGljc1xuICAgKi9cbiAgZ2V0RWxlbWVudGFsQ2hhcmFjdGVyaXN0aWNzKGVsZW1lbnQ6IEVsZW1lbnQpOiBFbGVtZW50YWxDaGFyYWN0ZXJpc3RpY3Mge1xuICAgIHJldHVybiBFTEVNRU5UQUxfQ0hBUkFDVEVSSVNUSUNTW2VsZW1lbnRdIGFzIHVua25vd24gYXMgRWxlbWVudGFsQ2hhcmFjdGVyaXN0aWNzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgY29tcGxldGUgZWxlbWVudGFsIHByb2ZpbGUgdGhhdCBpbmNsdWRlcyBwcm9wZXJ0aWVzIGFuZCBjaGFyYWN0ZXJpc3RpY3NcbiAgICogQHBhcmFtIHByb3BlcnRpZXMgVGhlIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gICAqIEByZXR1cm5zIEEgY29tcGxldGUgZWxlbWVudGFsIHByb2ZpbGVcbiAgICovXG4gIGdldEVsZW1lbnRhbFByb2ZpbGUoXG4gICAgcHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllc1xuICApOiBQYXJ0aWFsPEVsZW1lbnRhbFByb2ZpbGU+IHtcbiAgICAvLyBGaW5kIHRoZSBkb21pbmFudCBlbGVtZW50XG4gICAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpIGFzIFtFbGVtZW50LCBudW1iZXJdW107XG4gICAgbGV0IGRvbWluYW50RWxlbWVudDogRWxlbWVudCA9ICdGaXJlJztcbiAgICBsZXQgbWF4VmFsdWUgPSAwO1xuXG4gICAgZm9yIChjb25zdCBbZWxlbWVudCwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICAgIGlmICh2YWx1ZSA+IG1heFZhbHVlKSB7XG4gICAgICAgIGRvbWluYW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIG1heFZhbHVlID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRvbWluYW50OiBkb21pbmFudEVsZW1lbnQgYXMgJ0ZpcmUnIHwgJ1dhdGVyJyB8ICdFYXJ0aCcgfCAnQWlyJyxcbiAgICAgIGJhbGFuY2U6IHByb3BlcnRpZXMsXG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IFt0aGlzLmdldEVsZW1lbnRhbENoYXJhY3RlcmlzdGljcyhkb21pbmFudEVsZW1lbnQgKV0sXG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgc3VnZ2VzdGVkIGNvb2tpbmcgdGVjaG5pcXVlcyBiYXNlZCBvbiBlbGVtZW50YWwgcHJvcGVydGllc1xuICAgKiBAcGFyYW0gcHJvcGVydGllcyBUaGUgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgICogQHJldHVybnMgQXJyYXkgb2YgcmVjb21tZW5kZWQgY29va2luZyB0ZWNobmlxdWVzXG4gICAqL1xuICBnZXRTdWdnZXN0ZWRDb29raW5nVGVjaG5pcXVlcyhwcm9wZXJ0aWVzOiBFbGVtZW50YWxQcm9wZXJ0aWVzKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRlY2huaXF1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdGhyZXNob2xkID0gMC4zOyAvLyBPbmx5IGNvbnNpZGVyIGVsZW1lbnRzIGFib3ZlIHRoaXMgdGhyZXNob2xkIGZvciByZWNvbW1lbmRhdGlvbnNcblxuICAgIGlmIChwcm9wZXJ0aWVzLkZpcmUgPiB0aHJlc2hvbGQpIHtcbiAgICAgIHRlY2huaXF1ZXMucHVzaChcbiAgICAgICAgLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5GaXJlLmNvb2tpbmdUZWNobmlxdWVzLnNsaWNlKDAsIDIpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0aWVzLldhdGVyID4gdGhyZXNob2xkKSB7XG4gICAgICB0ZWNobmlxdWVzLnB1c2goXG4gICAgICAgIC4uLkVMRU1FTlRBTF9DSEFSQUNURVJJU1RJQ1MuV2F0ZXIuY29va2luZ1RlY2huaXF1ZXMuc2xpY2UoMCwgMilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnRpZXMuRWFydGggPiB0aHJlc2hvbGQpIHtcbiAgICAgIHRlY2huaXF1ZXMucHVzaChcbiAgICAgICAgLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5FYXJ0aC5jb29raW5nVGVjaG5pcXVlcy5zbGljZSgwLCAyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydGllcy5BaXIgPiB0aHJlc2hvbGQpIHtcbiAgICAgIHRlY2huaXF1ZXMucHVzaChcbiAgICAgICAgLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5BaXIuY29va2luZ1RlY2huaXF1ZXMuc2xpY2UoMCwgMilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHVuaXF1ZSB0ZWNobmlxdWVzIG9yIGEgZGVmYXVsdCBpZiBub25lIG1lZXQgdGhlIHRocmVzaG9sZFxuICAgIHJldHVybiB0ZWNobmlxdWVzLmxlbmd0aCA+IDBcbiAgICAgID8gQXJyYXkuZnJvbShuZXcgU2V0KHRlY2huaXF1ZXMpKVxuICAgICAgOiBbJ0JhbGFuY2VkIGNvb2tpbmcnXTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY29tcGxlbWVudGFyeSBpbmdyZWRpZW50cyBiYXNlZCBvbiBlbGVtZW50YWwgcHJvcGVydGllc1xuICAgKiBAcGFyYW0gcHJvcGVydGllcyBUaGUgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgICogQHJldHVybnMgQXJyYXkgb2YgcmVjb21tZW5kZWQgY29tcGxlbWVudGFyeSBpbmdyZWRpZW50c1xuICAgKi9cbiAgZ2V0UmVjb21tZW5kZWRUaW1lT2ZEYXkocHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllcyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0aW1lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAwLjM7IC8vIE9ubHkgY29uc2lkZXIgZWxlbWVudHMgYWJvdmUgdGhpcyB0aHJlc2hvbGQgZm9yIHJlY29tbWVuZGF0aW9uc1xuICAgIGNvbnN0IHdlaWdodGVkVGltZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgdGltZXMgYmFzZWQgb24gdGhlIGVsZW1lbnRhbCBiYWxhbmNlLCB3ZWlnaHRlZCBieSB0aGVpciB2YWx1ZXNcbiAgICBpZiAocHJvcGVydGllcy5GaXJlID4gdGhyZXNob2xkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguY2VpbChwcm9wZXJ0aWVzLkZpcmUgKiAxMCk7IGkrKykge1xuICAgICAgICB3ZWlnaHRlZFRpbWVzLnB1c2goLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5GaXJlLnRpbWVPZkRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnRpZXMuV2F0ZXIgPiB0aHJlc2hvbGQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKHByb3BlcnRpZXMuV2F0ZXIgKiAxMCk7IGkrKykge1xuICAgICAgICB3ZWlnaHRlZFRpbWVzLnB1c2goLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5XYXRlci50aW1lT2ZEYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0aWVzLkVhcnRoID4gdGhyZXNob2xkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguY2VpbChwcm9wZXJ0aWVzLkVhcnRoICogMTApOyBpKyspIHtcbiAgICAgICAgd2VpZ2h0ZWRUaW1lcy5wdXNoKC4uLkVMRU1FTlRBTF9DSEFSQUNURVJJU1RJQ1MuRWFydGgudGltZU9mRGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvcGVydGllcy5BaXIgPiB0aHJlc2hvbGQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKHByb3BlcnRpZXMuQWlyICogMTApOyBpKyspIHtcbiAgICAgICAgd2VpZ2h0ZWRUaW1lcy5wdXNoKC4uLkVMRU1FTlRBTF9DSEFSQUNURVJJU1RJQ1MuQWlyLnRpbWVPZkRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHVuaXF1ZSB0aW1lcyBvciBhIGRlZmF1bHQgaWYgbm9uZSBtZWV0IHRoZSB0aHJlc2hvbGRcbiAgICByZXR1cm4gd2VpZ2h0ZWRUaW1lcy5sZW5ndGggPiAwXG4gICAgICA/IEFycmF5LmZyb20obmV3IFNldCh3ZWlnaHRlZFRpbWVzKSlcbiAgICAgIDogWydBbnkgdGltZSddO1xuICB9LFxuXG4gIC8vIEdldCB0aGUgZGVmYXVsdCBlbGVtZW50YWwgcHJvcGVydGllc1xuICBnZXREZWZhdWx0RWxlbWVudGFsUHJvcGVydGllcygpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICByZXR1cm4gREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUztcbiAgfSxcblxuICAvLyBFeHBvcnQgdGhlIGRlZmF1bHQgZWxlbWVudGFsIHByb3BlcnRpZXMgY29uc3RhbnQgZm9yIGRpcmVjdCBhY2Nlc3NcbiAgREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUyxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBlbGVtZW50YWwgc3RhdGUgZnJvbSB0aGUgRWxlbWVudGFsQ2FsY3VsYXRvciBzZXJ2aWNlXG4gICAqIFBhdHRlcm4gT08tMzogVXRpbGl0eSBJbXBvcnQgQWxpZ25tZW50IC0gU3RhbmRhbG9uZSBleHBvcnQgZm9yIFRTMjYxNCBjb21wYXRpYmlsaXR5XG4gICAqL1xuICBnZXRDdXJyZW50RWxlbWVudGFsU3RhdGUoKTogRWxlbWVudGFsUHJvcGVydGllcyB7XG4gICAgcmV0dXJuIEVsZW1lbnRhbENhbGN1bGF0b3IuZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBhdHRlcm4gT08tMzogVXRpbGl0eSBJbXBvcnQgQWxpZ25tZW50IC0gRm9ybWF0IGNvbnNpc3RlbmN5IGhlbHBlclxuICAgKiBFbnN1cmVzIGVsZW1lbnRhbCBwcm9wZXJ0eSBrZXlzIGFyZSBpbiBsb3dlcmNhc2UgZm9ybWF0XG4gICAqL1xuICBlbnN1cmVMb3dlcmNhc2VGb3JtYXQocHJvcGVydGllczogdW5rbm93bik6IGFueSB7XG4gICAgaWYgKCFwcm9wZXJ0aWVzIHx8IHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGxvd2VyY2FzZVByb3BzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICAvLyBDb252ZXJ0IGNhcGl0YWxpemVkIGVsZW1lbnQgbmFtZXMgdG8gbG93ZXJjYXNlXG4gICAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbG93ZXJjYXNlUHJvcHNbbG93ZXJLZXldID0gdmFsdWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBsb3dlcmNhc2VQcm9wcztcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGVsZW1lbnRhbFV0aWxzO1xuXG5leHBvcnQgeyBlbGVtZW50cywgZWxlbWVudGFsSW50ZXJhY3Rpb25zLCBlbGVtZW50YWxGdW5jdGlvbnMgfTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSBsaXN0IG9mIGVsZW1lbnRhbCBpdGVtcyBiYXNlZCBvbiBwbGFuZXRhcnkgcG9zaXRpb25zXG4gKlxuICogQHBhcmFtIGl0ZW1zIEl0ZW1zIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHBsYW5ldGFyeVBvc2l0aW9ucyBDdXJyZW50IHBsYW5ldGFyeSBwb3NpdGlvbnNcbiAqIEBwYXJhbSBpc0RheXRpbWUgV2hldGhlciBpdCBpcyBjdXJyZW50bHkgZGF5XG4gKiBAcGFyYW0gY3VycmVudFpvZGlhYyBDdXJyZW50IHpvZGlhYyBzaWduXG4gKiBAcGFyYW0gbHVuYXJQaGFzZSBDdXJyZW50IGx1bmFyIHBoYXNlXG4gKiBAcGFyYW0gZWxlbWVudGFsQm9vc3RzIE9wdGlvbmFsIGVsZW1lbnRhbCBib29zdHMgdG8gYXBwbHlcbiAqIEBwYXJhbSBwbGFuZXRhcnlCb29zdHMgT3B0aW9uYWwgcGxhbmV0YXJ5IGJvb3N0cyB0byBhcHBseVxuICogQHJldHVybnMgVHJhbnNmb3JtZWQgYWxjaGVtaWNhbCBpdGVtc1xuICovXG5jb25zdCBFTEVNRU5UX1dFSUdIVFMgPSB7XG4gIEZpcmU6IDEuOCxcbiAgV2F0ZXI6IDEuMixcbiAgRWFydGg6IDAuOSxcbiAgQWlyOiAxLjUsXG59O1xuXG4vLyBBZGQgdGhpcyBmdW5jdGlvbiBpZiB1bmlxdWVuZXNzIHNjb3JlIGlzIG5lZWRlZFxuZnVuY3Rpb24gX2NhbGN1bGF0ZVVuaXF1ZW5lc3MoXG4gIGVsZW1lbnRzOiBSZWNvcmQ8RWxlbWVudGFsQ2hhcmFjdGVyLCBudW1iZXI+LFxuICBwbGFuZXRhcnlJbmZsdWVuY2U6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgLy8gQ2FsY3VsYXRlIHZhcmlhbmNlIG9mIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXMoZWxlbWVudHMpO1xuICBjb25zdCBtZWFuID0gdmFsdWVzLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCwgMCkgLyB2YWx1ZXMubGVuZ3RoO1xuICBjb25zdCB2YXJpYW5jZSA9XG4gICAgdmFsdWVzLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIE1hdGgucG93KHZhbCAtIG1lYW4sIDIpLCAwKSAvXG4gICAgdmFsdWVzLmxlbmd0aDtcblxuICAvLyBDb21iaW5lIHdpdGggcGxhbmV0YXJ5IGluZmx1ZW5jZVxuICByZXR1cm4gTWF0aC5taW4oMSwgdmFyaWFuY2UgKiAoMSArIHBsYW5ldGFyeUluZmx1ZW5jZSkpO1xufVxuXG4vLyBPciBtb2RpZnkgdGhlIHRyYW5zZm9ybWF0aW9uIHRvIHJlbW92ZSB1bmlxdWVuZXNzIHNjb3JlIGlmIG5vdCBuZWVkZWRcbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1JdGVtc1dpdGhQbGFuZXRhcnlQb3NpdGlvbnMoXG4gIGl0ZW1zOiBFbGVtZW50YWxJdGVtW10sXG4gIHBsYW5ldGFyeVBvc2l0aW9uczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGlzRGF5dGltZSA9IHRydWUsXG4gIGN1cnJlbnRab2RpYWM/OiBzdHJpbmcsXG4gIGx1bmFyUGhhc2U/OiBMdW5hclBoYXNlLFxuICB0YXJvdEVsZW1lbnRCb29zdHM/OiBSZWNvcmQ8RWxlbWVudGFsQ2hhcmFjdGVyLCBudW1iZXI+LFxuICB0YXJvdFBsYW5ldGFyeUJvb3N0cz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbik6IEFsY2hlbWljYWxJdGVtW10ge1xuICByZXR1cm4gaXRlbXMubWFwKChpdGVtKSA9PiB7XG4gICAgY29uc3QgeyBib29zdDogcGxhbmV0YXJ5SW5mbHVlbmNlIH0gPSBjYWxjdWxhdGVQbGFuZXRhcnlCb29zdChcbiAgICAgIGl0ZW0sXG4gICAgICBwbGFuZXRhcnlQb3NpdGlvbnMsXG4gICAgICBjdXJyZW50Wm9kaWFjLFxuICAgICAgbHVuYXJQaGFzZVxuICAgICk7XG5cbiAgICAvLyBTY2FsZSBlbGVtZW50YWwgcHJvcGVydGllc1xuICAgIGNvbnN0IHNjYWxlZEVsZW1lbnRzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXMoaXRlbS5lbGVtZW50YWxQcm9wZXJ0aWVzKS5tYXAoKFtlbGVtZW50LCB2YWx1ZV0pID0+IFtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgdmFsdWUgKiAoMSArIChwbGFuZXRhcnlJbmZsdWVuY2UgfHwgMCkpLFxuICAgICAgXSlcbiAgICApIGFzIFJlY29yZDxFbGVtZW50YWxDaGFyYWN0ZXIsIG51bWJlcj47XG5cbiAgICAvLyBDYWxjdWxhdGUgYWxjaGVtaWNhbCBwcm9wZXJ0aWVzIGZyb20gZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgICAvLyBUaGlzIGZvbGxvd3MgdGhlIHNhbWUgcmVsYXRpb25zaGlwcyBhcyBpbiB0aGUgYWxjaGVtaWNhbCBzeXN0ZW06XG4gICAgLy8gLSBTcGlyaXQgaXMgcmVsYXRlZCB0byBGaXJlICh0cmFuc2Zvcm1hdGlvbikgYW5kIEFpciAoY29ubmVjdGlvbilcbiAgICAvLyAtIEVzc2VuY2UgaXMgcmVsYXRlZCB0byBXYXRlciAoZmx1aWRpdHkpIGFuZCBGaXJlICh2aXRhbGl0eSlcbiAgICAvLyAtIE1hdHRlciBpcyByZWxhdGVkIHRvIEVhcnRoIChzdGFiaWxpdHkpIGFuZCBXYXRlciAoY29oZXNpb24pXG4gICAgLy8gLSBTdWJzdGFuY2UgaXMgcmVsYXRlZCB0byBBaXIgKHN0cnVjdHVyZSkgYW5kIEVhcnRoIChmb3JtKVxuICAgIGNvbnN0IHNwaXJpdCA9IHNjYWxlZEVsZW1lbnRzLkZpcmUgKiAwLjYgKyBzY2FsZWRFbGVtZW50cy5BaXIgKiAwLjQ7XG4gICAgY29uc3QgZXNzZW5jZSA9IHNjYWxlZEVsZW1lbnRzLldhdGVyICogMC42ICsgc2NhbGVkRWxlbWVudHMuRmlyZSAqIDAuNDtcbiAgICBjb25zdCBtYXR0ZXIgPSBzY2FsZWRFbGVtZW50cy5FYXJ0aCAqIDAuNyArIHNjYWxlZEVsZW1lbnRzLldhdGVyICogMC4zO1xuICAgIGNvbnN0IHN1YnN0YW5jZSA9IHNjYWxlZEVsZW1lbnRzLkFpciAqIDAuNiArIHNjYWxlZEVsZW1lbnRzLkVhcnRoICogMC40O1xuXG4gICAgLy8gQXBwbHkgdGFyb3QgYm9vc3RzIGlmIGF2YWlsYWJsZVxuICAgIGNvbnN0IGJvb3N0ZWRTcGlyaXQgPSBzcGlyaXQgKiAodGFyb3RQbGFuZXRhcnlCb29zdHM/LlNwaXJpdCB8fCAxLjApO1xuICAgIGNvbnN0IGJvb3N0ZWRFc3NlbmNlID0gZXNzZW5jZSAqICh0YXJvdFBsYW5ldGFyeUJvb3N0cz8uRXNzZW5jZSB8fCAxLjApO1xuICAgIGNvbnN0IGJvb3N0ZWRNYXR0ZXIgPSBtYXR0ZXIgKiAodGFyb3RQbGFuZXRhcnlCb29zdHM/Lk1hdHRlciB8fCAxLjApO1xuICAgIGNvbnN0IGJvb3N0ZWRTdWJzdGFuY2UgPVxuICAgICAgc3Vic3RhbmNlICogKHRhcm90UGxhbmV0YXJ5Qm9vc3RzPy5TdWJzdGFuY2UgfHwgMS4wKTtcblxuICAgIC8vIENhbGN1bGF0ZSBlbmVyZ3kgbWV0cmljcyB1c2luZyB0aGUgZm9ybXVsYXMgZnJvbSBhbGNoZW1pY2FsQ2FsY3VsYXRpb25zLnRzXG4gICAgY29uc3QgZmlyZSA9IHNjYWxlZEVsZW1lbnRzLkZpcmU7XG4gICAgY29uc3Qgd2F0ZXIgPSBzY2FsZWRFbGVtZW50cy5XYXRlcjtcbiAgICBjb25zdCBhaXIgPSBzY2FsZWRFbGVtZW50cy5BaXI7XG4gICAgY29uc3QgZWFydGggPSBzY2FsZWRFbGVtZW50cy5FYXJ0aDtcblxuICAgIC8vIEVuc3VyZSB3ZSBoYXZlIG5vbi16ZXJvIHZhbHVlcyBmb3IgZGVub21pbmF0b3JcbiAgICBjb25zdCBzYWZlVmFsdWVGb3JIZWF0ID0gKHZhbDogbnVtYmVyKSA9PiBNYXRoLm1heCh2YWwsIDAuMDEpO1xuXG4gICAgLy8gSGVhdCBmb3JtdWxhOiAoc3Bpcml0XjIgKyBmaXJlXjIpIC8gKChzdWJzdGFuY2UgfHwgMSkgKyBlc3NlbmNlICsgbWF0dGVyICsgd2F0ZXIgKyBhaXIgKyBlYXJ0aCleMlxuICAgIGNvbnN0IGhlYXQgPVxuICAgICAgKE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZFNwaXJpdCksIDIpICsgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChmaXJlKSwgMikpIC8gXG4gICAgICBNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KGJvb3N0ZWRTdWJzdGFuY2UgKyBib29zdGVkRXNzZW5jZSArIGJvb3N0ZWRNYXR0ZXIgKyB3YXRlciArIGFpciArIGVhcnRoKSwgMik7XG5cbiAgICAvLyBFbnRyb3B5IGZvcm11bGE6IChzcGlyaXReMiArIHN1YnN0YW5jZV4yICsgZmlyZV4yICsgYWlyXjIpIC8gKChlc3NlbmNlIHx8IDEpICsgbWF0dGVyICsgZWFydGggKyB3YXRlcileMlxuICAgIGNvbnN0IGVudHJvcHkgPVxuICAgICAgKE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZFNwaXJpdCksIDIpICsgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChib29zdGVkU3Vic3RhbmNlKSwgMikgKyBcbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoZmlyZSksIDIpICsgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChhaXIpLCAyKSkgLyBcbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZEVzc2VuY2UgKyBib29zdGVkTWF0dGVyICsgZWFydGggKyB3YXRlciksIDIpO1xuXG4gICAgLy8gUmVhY3Rpdml0eSBmb3JtdWxhOiAoc3Bpcml0XjIgKyBzdWJzdGFuY2VeMiArIGVzc2VuY2VeMiArIGZpcmVeMiArIGFpcl4yICsgd2F0ZXJeMikgLyAoKG1hdHRlciB8fCAxKSArIGVhcnRoKV4yXG4gICAgY29uc3QgcmVhY3Rpdml0eSA9XG4gICAgICAoTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChib29zdGVkU3Bpcml0KSwgMikgKyBNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KGJvb3N0ZWRTdWJzdGFuY2UpLCAyKSArIFxuICAgICAgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChib29zdGVkRXNzZW5jZSksIDIpICsgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChmaXJlKSwgMikgKyBcbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYWlyKSwgMikgKyBNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KHdhdGVyKSwgMikpIC8gXG4gICAgICBNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KGJvb3N0ZWRNYXR0ZXIgKyBlYXJ0aCksIDIpO1xuXG4gICAgLy8gR3JlZydzIEVuZXJneSBmb3JtdWxhIHdpdGggY29uc2lzdGVudCBzY2FsaW5nXG4gICAgY29uc3QgcmF3R3JlZ3NFbmVyZ3kgPSBoZWF0IC0gcmVhY3Rpdml0eSAqIGVudHJvcHk7XG4gICAgY29uc3Qgc2NhbGVkR3JlZ3NFbmVyZ3kgPSAocmF3R3JlZ3NFbmVyZ3kgKyAxKSAvIDI7IC8vIENvbnZlcnQgZnJvbSByYW5nZSAoLTEsMSkgdG8gKDAsMSlcbiAgICBjb25zdCBncmVnc0VuZXJneSA9IE1hdGgubWF4KDAuMSwgTWF0aC5taW4oMS4wLCBzY2FsZWRHcmVnc0VuZXJneSkpO1xuXG4gICAgLy8gTm9ybWFsaXplIGFsbCBlbmVyZ3kgdmFsdWVzIHRvIGVuc3VyZSB0aGV5J3JlIGluIHRoZSAwLTEgcmFuZ2VcbiAgICBjb25zdCBub3JtYWxpemVkSGVhdCA9IE1hdGgubWF4KDAuMSwgTWF0aC5taW4oMS4wLCBoZWF0KSk7XG4gICAgY29uc3Qgbm9ybWFsaXplZEVudHJvcHkgPSBNYXRoLm1heCgwLjEsIE1hdGgubWluKDEuMCwgZW50cm9weSkpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRSZWFjdGl2aXR5ID0gTWF0aC5tYXgoMC4xLCBNYXRoLm1pbigxLjAsIHJlYWN0aXZpdHkpKTtcblxuICAgIC8vIENhbGN1bGF0ZSBkb21pbmFudCBlbGVtZW50IGJhc2VkIG9uIHNjYWxlZCBlbGVtZW50c1xuICAgIGNvbnN0IGRvbWluYW50RWxlbWVudCA9IE9iamVjdC5lbnRyaWVzKHNjYWxlZEVsZW1lbnRzKS5zb3J0KFxuICAgICAgKFtfa2V5QSwgdmFsdWVBXSwgW19rZXlCLCB2YWx1ZUJdKSA9PiB2YWx1ZUIgLSB2YWx1ZUFcbiAgICApWzBdWzBdIGFzIEVsZW1lbnRhbENoYXJhY3RlcjtcblxuICAgIC8vIENhbGN1bGF0ZSBkb21pbmFudCBhbGNoZW1pY2FsIHByb3BlcnR5XG4gICAgY29uc3QgYWxjaGVtaWNhbFByb3BlcnRpZXMgPSB7XG4gICAgICBTcGlyaXQ6IGJvb3N0ZWRTcGlyaXQsXG4gICAgICBFc3NlbmNlOiBib29zdGVkRXNzZW5jZSxcbiAgICAgIE1hdHRlcjogYm9vc3RlZE1hdHRlcixcbiAgICAgIFN1YnN0YW5jZTogYm9vc3RlZFN1YnN0YW5jZSxcbiAgICB9O1xuICAgIGNvbnN0IGRvbWluYW50QWxjaGVtaWNhbFByb3BlcnR5ID0gT2JqZWN0LmVudHJpZXMoXG4gICAgICBhbGNoZW1pY2FsUHJvcGVydGllc1xuICAgICkuc29ydChcbiAgICAgIChbX2tleUEsIHZhbHVlQV0sIFtfa2V5QiwgdmFsdWVCXSkgPT4gdmFsdWVCIC0gdmFsdWVBXG4gICAgKVswXVswXSBhcyBBbGNoZW1pY2FsUHJvcGVydHk7XG5cbiAgICAvLyBFeHRyYWN0IGRvbWluYW50IHBsYW5ldHMgYmFzZWQgb24gcGxhbmV0YXJ5IHBvc2l0aW9ucyBpZiBhdmFpbGFibGVcbiAgICBsZXQgZG9taW5hbnRQbGFuZXRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChwbGFuZXRhcnlQb3NpdGlvbnMpIHtcbiAgICAgIC8vIEdldCB0b3AgMyBwbGFuZXRzIHdpdGggaGlnaGVzdCB2YWx1ZXMgb3IgZGlnbml0eVxuICAgICAgY29uc3QgcGxhbmV0RW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBsYW5ldGFyeVBvc2l0aW9ucykuZmlsdGVyKFxuICAgICAgICAoW3BsYW5ldCwgX10pID0+IHBsYW5ldCAhPT0gJ2lzRGF5dGltZScgJiYgcGxhbmV0ICE9PSAnY3VycmVudFpvZGlhYydcbiAgICAgICk7XG5cbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcG9zaXRpb24gZGF0YSBmb3JtYXRzXG4gICAgICBkb21pbmFudFBsYW5ldHMgPSBwbGFuZXRFbnRyaWVzXG4gICAgICAgIC5zb3J0KChbXywgdmFsQV0sIFtfXywgdmFsQl0pID0+IHtcbiAgICAgICAgICAvLyBTb3J0IGJ5IHN0cmVuZ3RoIC9kaWduaXR5IGlmIGF2YWlsYWJsZVxuICAgICAgICAgIGlmICh0eXBlb2YgdmFsQSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbEIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhQSA9IHZhbEEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICAgICAgICBjb25zdCBkYXRhQiA9IHZhbEIgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICAgICAgICBjb25zdCBzdHJlbmd0aEEgPSBOdW1iZXIoZGF0YUEuc3RyZW5ndGgpIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBzdHJlbmd0aEIgPSBOdW1iZXIoZGF0YUIuc3RyZW5ndGgpIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gc3RyZW5ndGhCIC0gc3RyZW5ndGhBO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBEZWZhdWx0IHNvcnQgZm9yIHNpbXBsZSBudW1lcmljIHZhbHVlc1xuICAgICAgICAgIHJldHVybiBOdW1iZXIodmFsQikgLSBOdW1iZXIodmFsQSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgICAubWFwKChbcGxhbmV0LCBfXSkgPT4gcGxhbmV0KTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgd2UgaGF2ZSBwbGFuZXRhcnkgZGlnbml0aWVzIGRhdGFcbiAgICBjb25zdCBwbGFuZXRhcnlEaWduaXRpZXMgPSB7fTtcblxuICAgIC8vIEhhbmRsZSBOYU4gdmFsdWVzIG9yIGluZmluaXR5IGZvciBhbGwgcHJvcGVydGllc1xuICAgIGNvbnN0IGVuc3VyZVNhZmVOdW1iZXIgPSAodmFsOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgICAgaWYgKGlzTmFOKHZhbCkgfHwgIWlzRmluaXRlKHZhbCkpIHJldHVybiAwLjI7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH07XG5cbiAgICAvLyBBcHBseSBzYWZlIGFyaXRobWV0aWMgb3BlcmF0aW9ucyB3aXRoIHByb3BlciB0eXBlIGNoZWNraW5nXG4gICAgY29uc3Qgc2FmZVZhbHVlRm9yQXJpdGhtZXRpYyA9ICh2YWw6IG51bWJlcikgPT4gTWF0aC5tYXgodmFsLCAwLjAxKTtcbiAgICBjb25zdCBzYWZlQWRkID0gKGE6IG51bWJlciwgYjogbnVtYmVyKSA9PiBzYWZlVmFsdWVGb3JBcml0aG1ldGljKGEpICsgc2FmZVZhbHVlRm9yQXJpdGhtZXRpYyhiKTtcbiAgICBjb25zdCBzYWZlTXVsdGlwbHkgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpID0+IHNhZmVWYWx1ZUZvckFyaXRobWV0aWMoYSkgKiBzYWZlVmFsdWVGb3JBcml0aG1ldGljKGIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgZWxlbWVudGFsUHJvcGVydGllczogaXRlbS5lbGVtZW50YWxQcm9wZXJ0aWVzLFxuICAgICAgdHJhbnNmb3JtZWRFbGVtZW50YWxQcm9wZXJ0aWVzOiBzY2FsZWRFbGVtZW50cyxcbiAgICAgIGFsY2hlbWljYWxQcm9wZXJ0aWVzOiB7XG4gICAgICAgIFNwaXJpdDogYm9vc3RlZFNwaXJpdCxcbiAgICAgICAgRXNzZW5jZTogYm9vc3RlZEVzc2VuY2UsXG4gICAgICAgIE1hdHRlcjogYm9vc3RlZE1hdHRlcixcbiAgICAgICAgU3Vic3RhbmNlOiBib29zdGVkU3Vic3RhbmNlLFxuICAgICAgfSxcbiAgICAgIGhlYXQ6IG5vcm1hbGl6ZWRIZWF0LFxuICAgICAgZW50cm9weTogbm9ybWFsaXplZEVudHJvcHksXG4gICAgICByZWFjdGl2aXR5OiBub3JtYWxpemVkUmVhY3Rpdml0eSxcbiAgICAgIGdyZWdzRW5lcmd5OiBncmVnc0VuZXJneSxcbiAgICAgIGRvbWluYW50RWxlbWVudCxcbiAgICAgIGRvbWluYW50QWxjaGVtaWNhbFByb3BlcnR5LFxuICAgICAgcGxhbmV0YXJ5Qm9vc3Q6IHBsYW5ldGFyeUluZmx1ZW5jZSxcbiAgICAgIGRvbWluYW50UGxhbmV0cyxcbiAgICAgIHBsYW5ldGFyeURpZ25pdGllcyxcbiAgICB9IGFzIHVua25vd24gYXMgQWxjaGVtaWNhbEl0ZW07XG4gIH0pO1xufVxuXG4vLyBOZXcgZGlmZmVyZW50aWF0aW9uIGZ1bmN0aW9uc1xuY29uc3QgYXBwbHlOb25MaW5lYXJTY2FsaW5nID0gKFxuICBwcm9wczogRWxlbWVudGFsUHJvcGVydGllc1xuKTogRWxlbWVudGFsUHJvcGVydGllcyA9PiAoe1xuICBGaXJlOiBNYXRoLnRhbmgocHJvcHMuRmlyZSAqIDIpLFxuICBXYXRlcjogMSAtIE1hdGguZXhwKC1wcm9wcy5XYXRlciAqIDMpLFxuICBFYXJ0aDogcHJvcHMuRWFydGggKiogMS41LFxuICBBaXI6IE1hdGguc2luKChwcm9wcy5BaXIgKiBNYXRoLlBJKSAvIDIpLFxufSk7XG5cbmNvbnN0IGNhbGN1bGF0ZVVuaXF1ZW5lc3NTY29yZSA9IChpdGVtOiBFbGVtZW50YWxJdGVtKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdmFyaWFuY2UgPSBPYmplY3QudmFsdWVzKGl0ZW0uZWxlbWVudGFsUHJvcGVydGllcykucmVkdWNlKFxuICAgIChhY2M6IG51bWJlciwgdmFsOiBudW1iZXIpID0+IGFjYyArIE1hdGguYWJzKHZhbCAtIDAuNSksXG4gICAgMFxuICApO1xuICByZXR1cm4gTWF0aC5taW4oMSwgdmFyaWFuY2UgKiAyKTtcbn07XG5cbi8vIEFkZCBvciB1cGRhdGUgdGhlIG5vcm1hbGl6ZUVsZW1lbnRhbFZhbHVlcyBmdW5jdGlvblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUVsZW1lbnRhbFZhbHVlcyhcbiAgdmFsdWVzOiBSZWNvcmQ8RWxlbWVudGFsQ2hhcmFjdGVyLCBudW1iZXI+XG4pOiBSZWNvcmQ8RWxlbWVudGFsQ2hhcmFjdGVyLCBudW1iZXI+IHtcbiAgY29uc3QgdG90YWwgPSBPYmplY3QudmFsdWVzKHZhbHVlcykucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsLCAwKTtcblxuICAvLyBJZiB0b3RhbCBpcyB6ZXJvIG9yIGNsb3NlIHRvIHplcm8sIHJldHVybiBkZWZhdWx0IGRpc3RyaWJ1dGlvblxuICBpZiAodG90YWwgPCAwLjAxKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEZpcmU6IDAuMjUsXG4gICAgICBXYXRlcjogMC4yNSxcbiAgICAgIEVhcnRoOiAwLjI1LFxuICAgICAgQWlyOiAwLjI1LFxuICAgIH07XG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsdWVzIHRvIHN1bSB0byAxLjBcbiAgcmV0dXJuIHtcbiAgICBGaXJlOiB2YWx1ZXMuRmlyZSAvIHRvdGFsLFxuICAgIFdhdGVyOiB2YWx1ZXMuV2F0ZXIgLyB0b3RhbCxcbiAgICBFYXJ0aDogdmFsdWVzLkVhcnRoIC8gdG90YWwsXG4gICAgQWlyOiB2YWx1ZXMuQWlyIC8gdG90YWwsXG4gIH07XG59XG5cbi8vIEdldCB0aGUgcHJpbWFyeSBlbGVtZW50IHJlZ2FyZGxlc3Mgb2YgZm9ybWF0XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJpbWFyeUVsZW1lbnQoXG4gIGVsZW1lbnRhbEFmZmluaXR5OiBFbGVtZW50YWxBZmZpbml0eVxuKTogc3RyaW5nIHtcbiAgY29uc3QgYWZmaW5pdHlEYXRhID0gZWxlbWVudGFsQWZmaW5pdHkgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgcmV0dXJuIChcbiAgICBhZmZpbml0eURhdGEuYmFzZSB8fCBhZmZpbml0eURhdGEuZWxlbWVudCB8fCAnRmlyZSdcbiAgKSBhcyBzdHJpbmc7XG59XG5cbi8vIEdldCBlbGVtZW50IHN0cmVuZ3RoIGlmIGF2YWlsYWJsZVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTdHJlbmd0aChcbiAgZWxlbWVudGFsQWZmaW5pdHk6IEVsZW1lbnRhbEFmZmluaXR5XG4pOiBudW1iZXIge1xuICBjb25zdCBhZmZpbml0eURhdGEgPSBlbGVtZW50YWxBZmZpbml0eSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICBjb25zdCBzdHJlbmd0aCA9IGFmZmluaXR5RGF0YS5zdHJlbmd0aCBhcyBudW1iZXI7XG4gIHJldHVybiB0eXBlb2Ygc3RyZW5ndGggPT09ICdudW1iZXInID8gc3RyZW5ndGggOiAxO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgYWxsIHJlcXVpcmVkIGVsZW1lbnRhbCBwcm9wZXJ0aWVzIGFyZSBwcmVzZW50XG4gKiBAcGFyYW0gcHJvcGVydGllcyBUaGUgZWxlbWVudGFsIHByb3BlcnRpZXMgdG8gdmFsaWRhdGUgYW5kIGNvbXBsZXRlXG4gKiBAcmV0dXJucyBDb21wbGV0ZSBlbGVtZW50YWwgcHJvcGVydGllc1xuICovXG5leHBvcnQgY29uc3QgZW5zdXJlQ29tcGxldGVFbGVtZW50YWxQcm9wZXJ0aWVzID0gKFxuICBwcm9wZXJ0aWVzOiBQYXJ0aWFsPEVsZW1lbnRhbFByb3BlcnRpZXM+XG4pOiBFbGVtZW50YWxQcm9wZXJ0aWVzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBGaXJlOiBwcm9wZXJ0aWVzLkZpcmUgPz8gMC4yNSxcbiAgICBXYXRlcjogcHJvcGVydGllcy5XYXRlciA/PyAwLjI1LFxuICAgIEVhcnRoOiBwcm9wZXJ0aWVzLkVhcnRoID8/IDAuMjUsXG4gICAgQWlyOiBwcm9wZXJ0aWVzLkFpciA/PyAwLjI1LFxuICB9O1xufTtcblxuLyoqXG4gKiBXQVJOSU5HOiBnZXRCYWxhbmNpbmdFbGVtZW50IGlzIGxlZ2FjeSBhbmQgZG9lcyBub3QgY29tcGx5IHdpdGggY3VycmVudCBlbGVtZW50YWwgbG9naWMgcHJpbmNpcGxlcyAobm8gb3Bwb3NpbmcvYmFsYW5jaW5nIGVsZW1lbnRzKS4gUmV2aWV3IHVzYWdlIGFuZCByZWZhY3Rvci9yZW1vdmUgaWYgbm90IG5lZWRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJhbGFuY2luZ0VsZW1lbnQoZWxlbWVudCkge1xuICAvLyBFbGVtZW50cyB3b3JrIGJlc3Qgd2l0aCB0aGVtc2VsdmVzIC0gcmVpbmZvcmNpbmcgdGhlIGN1cnJlbnQgZW5lcmd5XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIFdBUk5JTkc6IGdldEVsZW1lbnRhbFJlbGF0aW9uc2hpcCBpcyBsZWdhY3kgYW5kIG1heSBub3QgY29tcGx5IHdpdGggY3VycmVudCBlbGVtZW50YWwgbG9naWMgcHJpbmNpcGxlcy5cbiAqIEFsbCBlbGVtZW50IGNvbWJpbmF0aW9ucyBhcmUgaGFybW9uaW91czsgYXZvaWQgdXNpbmcgXCJvcHBvc2luZ1wiIG9yIFwiY29udHJvbGxpbmdcIiBsb2dpYy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRhbFJlbGF0aW9uc2hpcChcbiAgZWxlbWVudDE6IEVsZW1lbnQsXG4gIGVsZW1lbnQyOiBFbGVtZW50XG4pOiBFbGVtZW50YWxSZWxhdGlvbnNoaXAge1xuICBpZiAoZWxlbWVudDEgPT09IGVsZW1lbnQyKSB7XG4gICAgcmV0dXJuICdzYW1lJztcbiAgfVxuXG4gIC8vIFRoZSBnZW5lcmF0aW5nIGN5Y2xlIGZvciA0LWVsZW1lbnQgc3lzdGVtOiBGaXJlIOKGkiBFYXJ0aCDihpIgV2F0ZXIg4oaSIEFpciDihpIgRmlyZVxuICBjb25zdCBnZW5lcmF0aW5nQ3ljbGU6IHsgW2tleSBpbiBFbGVtZW50XTogRWxlbWVudCB9ID0ge1xuICAgIEZpcmU6ICdFYXJ0aCcsXG4gICAgRWFydGg6ICdXYXRlcicsIFxuICAgIFdhdGVyOiAnQWlyJyxcbiAgICBBaXI6ICdGaXJlJyxcbiAgfTtcblxuICAvLyBUaGUgY29udHJvbGxpbmcgY3ljbGUgZm9yIDQtZWxlbWVudCBzeXN0ZW06IEZpcmUg4oaSIEFpciDihpIgRWFydGgg4oaSIFdhdGVyIOKGkiBGaXJlXG4gIGNvbnN0IGNvbnRyb2xsaW5nQ3ljbGU6IHsgW2tleSBpbiBFbGVtZW50XTogRWxlbWVudCB9ID0ge1xuICAgIEZpcmU6ICdBaXInLFxuICAgIEFpcjogJ0VhcnRoJywgXG4gICAgRWFydGg6ICdXYXRlcicsXG4gICAgV2F0ZXI6ICdGaXJlJyxcbiAgfTtcblxuICBpZiAoZ2VuZXJhdGluZ0N5Y2xlW2VsZW1lbnQxXSA9PT0gZWxlbWVudDIpIHtcbiAgICByZXR1cm4gJ2dlbmVyYXRpbmcnOyAvLyBlbGVtZW50MSBnZW5lcmF0ZXMgZWxlbWVudDJcbiAgfSBlbHNlIGlmIChnZW5lcmF0aW5nQ3ljbGVbZWxlbWVudDJdID09PSBlbGVtZW50MSkge1xuICAgIHJldHVybiAnd2Vha2VuZWQtYnknOyAvLyBlbGVtZW50MiBnZW5lcmF0ZXMgZWxlbWVudDFcbiAgfSBlbHNlIGlmIChjb250cm9sbGluZ0N5Y2xlW2VsZW1lbnQxXSA9PT0gZWxlbWVudDIpIHtcbiAgICByZXR1cm4gJ2NvbnRyb2xsaW5nJzsgLy8gZWxlbWVudDEgY29udHJvbHMgZWxlbWVudDJcbiAgfSBlbHNlIGlmIChjb250cm9sbGluZ0N5Y2xlW2VsZW1lbnQyXSA9PT0gZWxlbWVudDEpIHtcbiAgICByZXR1cm4gJ2NvbnRyb2xsZWQtYnknOyAvLyBlbGVtZW50MiBjb250cm9scyBlbGVtZW50MVxuICB9IGVsc2Uge1xuICAgIHJldHVybiAnbmV1dHJhbCc7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBlbGVtZW50IHRoYXQgc3RyZW5ndGhlbnMgdGhlIHByb3ZpZGVkIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmVuZ3RoZW5pbmdFbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQpOiBFbGVtZW50IHtcbiAgLy8gVGhlIGVsZW1lbnQgdGhhdCBnZW5lcmF0ZXMgdGhlIHByb3ZpZGVkIGVsZW1lbnQgd2lsbCBzdHJlbmd0aGVuIGl0XG4gIGNvbnN0IHN0cmVuZ3RoTWFwOiB7IFtrZXkgaW4gRWxlbWVudF06IEVsZW1lbnQgfSA9IHtcbiAgICBGaXJlOiAnQWlyJywgLy8gQWlyIHN0cmVuZ3RoZW5zIEZpcmVcbiAgICBFYXJ0aDogJ0ZpcmUnLCAvLyBGaXJlIHN0cmVuZ3RoZW5zIEVhcnRoXG4gICAgV2F0ZXI6ICdFYXJ0aCcsIC8vIEVhcnRoIHN0cmVuZ3RoZW5zIFdhdGVyXG4gICAgQWlyOiAnV2F0ZXInLCAvLyBXYXRlciBzdHJlbmd0aGVucyBBaXJcbiAgfTtcblxuICByZXR1cm4gc3RyZW5ndGhNYXBbZWxlbWVudF07XG59XG5cbi8qKlxuICogRW5oYW5jZSB2ZWdldGFibGUgdHJhbnNmb3JtYXRpb25zIGJ5IGFkZGluZyB0aGVybW9keW5hbWljIGVmZmVjdHMgdG8gZGlmZmVyZW50IGNvb2tpbmcgbWV0aG9kc1xuICogQHBhcmFtIHZlZ2V0YWJsZXMgVGhlIGNvbGxlY3Rpb24gb2YgdmVnZXRhYmxlcyB0byBlbmhhbmNlXG4gKiBAcmV0dXJucyBFbmhhbmNlZCB2ZWdldGFibGVzIHdpdGggY29tcGxldGUgdHJhbnNmb3JtYXRpb24gcHJvcGVydGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZW5oYW5jZVZlZ2V0YWJsZVRyYW5zZm9ybWF0aW9ucyhcbiAgdmVnZXRhYmxlczogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+XG4pOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXModmVnZXRhYmxlcykucmVkdWNlKChhY2MsIFtrZXksIHZlZ2V0YWJsZV0pID0+IHtcbiAgICAvLyBTa2lwIGlmIG5vdCBhbiBvYmplY3RcbiAgICBpZiAodHlwZW9mIHZlZ2V0YWJsZSAhPT0gJ29iamVjdCcgfHwgdmVnZXRhYmxlID09PSBudWxsKSB7XG4gICAgICBhY2Nba2V5XSA9IHZlZ2V0YWJsZTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfVxuXG4gICAgY29uc3QgZW5oYW5jZWQgPSB7IC4uLnZlZ2V0YWJsZSB9O1xuXG4gICAgLy8gQ3JlYXRlIHRyYW5zZm9ybWF0aW9uIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICBpZiAoIWVuaGFuY2VkLmVsZW1lbnRhbFRyYW5zZm9ybWF0aW9uKSB7XG4gICAgICAvLyBHZXQgdGhlIGRvbWluYW50IGVsZW1lbnRcbiAgICAgIGNvbnN0IGVsZW1lbnRhbFByb3BzID0gZW5oYW5jZWQuZWxlbWVudGFsUHJvcGVydGllcyB8fCB7XG4gICAgICAgIEVhcnRoOiAwLjMsXG4gICAgICAgIFdhdGVyOiAwLjMsXG4gICAgICAgIEFpcjogMC4yLFxuICAgICAgICBGaXJlOiAwLjIsXG4gICAgICB9O1xuICAgICAgbGV0IGRvbWluYW50RWxlbWVudCA9ICdFYXJ0aCc7XG4gICAgICBsZXQgaGlnaGVzdFZhbHVlID0gMDtcblxuICAgICAgZm9yIChjb25zdCBbZWxlbWVudCwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGVsZW1lbnRhbFByb3BzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IGhpZ2hlc3RWYWx1ZSkge1xuICAgICAgICAgIGRvbWluYW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgaGlnaGVzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2V0IGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zIGJhc2VkIG9uIGRvbWluYW50IGVsZW1lbnRcbiAgICAgIGVuaGFuY2VkLmVsZW1lbnRhbFRyYW5zZm9ybWF0aW9uID0ge1xuICAgICAgICB3aGVuQ29va2VkOiB7IFtkb21pbmFudEVsZW1lbnRdOiAwLjEsIEZpcmU6IDAuMDUgfSxcbiAgICAgICAgd2hlbkRyaWVkOiB7IEVhcnRoOiAwLjEsIEFpcjogMC4wNSB9LFxuICAgICAgICB3aGVuRmVybWVudGVkOiB7IFdhdGVyOiAwLjEsIEFpcjogMC4wNSB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlcm1vZHluYW1pYyBjaGFuZ2VzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbiA9IGVuaGFuY2VkLmVsZW1lbnRhbFRyYW5zZm9ybWF0aW9uIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgIGlmIChcbiAgICAgIHRyYW5zZm9ybWF0aW9uICYmXG4gICAgICAhdHJhbnNmb3JtYXRpb24udGhlcm1vZHluYW1pY0NoYW5nZXNcbiAgICApIHtcbiAgICAgIHRyYW5zZm9ybWF0aW9uLnRoZXJtb2R5bmFtaWNDaGFuZ2VzID0ge1xuICAgICAgICBjb29rZWQ6IHtcbiAgICAgICAgICBoZWF0OiAwLjEsXG4gICAgICAgICAgZW50cm9weTogMC4wNSxcbiAgICAgICAgICByZWFjdGl2aXR5OiAwLjA1LFxuICAgICAgICB9LFxuICAgICAgICBkcmllZDoge1xuICAgICAgICAgIGhlYXQ6IC0wLjA1LFxuICAgICAgICAgIGVudHJvcHk6IC0wLjEsXG4gICAgICAgICAgcmVhY3Rpdml0eTogLTAuMDUsXG4gICAgICAgIH0sXG4gICAgICAgIGZlcm1lbnRlZDoge1xuICAgICAgICAgIGVudHJvcHk6IDAuMixcbiAgICAgICAgICByZWFjdGl2aXR5OiAwLjE1LFxuICAgICAgICAgIHN0YWJpbGl0eUluZGV4OiAtMC4xLFxuICAgICAgICB9LFxuICAgICAgICByb2FzdGVkOiB7XG4gICAgICAgICAgaGVhdDogMC4yLFxuICAgICAgICAgIGVudHJvcHk6IDAuMSxcbiAgICAgICAgICBlbmVyZ3k6IDAuMTUsXG4gICAgICAgIH0sXG4gICAgICAgIHN0ZWFtZWQ6IHtcbiAgICAgICAgICBoZWF0OiAwLjA1LFxuICAgICAgICAgIG1vaXN0dXJlOiAwLjIsXG4gICAgICAgICAgcmVhY3Rpdml0eTogMC4wNSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQWRkIGVsZW1lbnRhbFNpZ25hdHVyZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKCFlbmhhbmNlZC5lbGVtZW50YWxTaWduYXR1cmUgJiYgZW5oYW5jZWQuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgICAgZW5oYW5jZWQuZWxlbWVudGFsU2lnbmF0dXJlID0gT2JqZWN0LmVudHJpZXMoZW5oYW5jZWQuZWxlbWVudGFsUHJvcGVydGllcylcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAvLyBBcHBseSBQYXR0ZXJuIEtLLTE6IEV4cGxpY2l0IFR5cGUgQXNzZXJ0aW9uIGZvciBhcml0aG1ldGljIG9wZXJhdGlvbnNcbiAgICAgICAgICBjb25zdCB2YWx1ZUEgPSBOdW1iZXIoYVsxXSkgfHwgMDtcbiAgICAgICAgICBjb25zdCB2YWx1ZUIgPSBOdW1iZXIoYlsxXSkgfHwgMDtcbiAgICAgICAgICByZXR1cm4gdmFsdWVCIC0gdmFsdWVBO1xuICAgICAgICB9KVxuICAgICAgICAubWFwKChbZWxlbWVudCwgdmFsdWVdKSA9PiBbZWxlbWVudCwgTnVtYmVyKHZhbHVlKV0pO1xuICAgIH1cblxuICAgIC8vIEFkZCBzZW5zb3J5IHByb2ZpbGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBpZiAoIWVuaGFuY2VkLnNlbnNvcnlQcm9maWxlKSB7XG4gICAgICAvLyBEZWZhdWx0IHNlbnNvcnkgcHJvZmlsZSBiYXNlZCBvbiB2ZWdldGFibGUgc3ViQ2F0ZWdvcnlcbiAgICAgIGNvbnN0IHN1YkNhdGVnb3J5ID0gZW5oYW5jZWQuc3ViQ2F0ZWdvcnkgfHwgJ3ZlZ2V0YWJsZSc7XG5cbiAgICAgIGNvbnN0IHByb2ZpbGVzID0ge1xuICAgICAgICAnbGVhZnkgZ3JlZW4nOiB7XG4gICAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICAgIGJpdHRlcjogMC42LFxuICAgICAgICAgICAgc3dlZXQ6IDAuMixcbiAgICAgICAgICAgIHVtYW1pOiAwLjEsXG4gICAgICAgICAgICBzYWx0eTogMC4wNSxcbiAgICAgICAgICAgIHNvdXI6IDAuMDUsXG4gICAgICAgICAgICBzcGljeTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgICBoZXJiYWw6IDAuNSxcbiAgICAgICAgICAgIGVhcnRoeTogMC4zLFxuICAgICAgICAgICAgZmxvcmFsOiAwLjEsXG4gICAgICAgICAgICBmcnVpdHk6IDAuMDUsXG4gICAgICAgICAgICB3b29keTogMC4wNSxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgY3Jpc3A6IDAuNyxcbiAgICAgICAgICAgIHRlbmRlcjogMC4yLFxuICAgICAgICAgICAgc2lsa3k6IDAuMSxcbiAgICAgICAgICAgIGNoZXd5OiAwLFxuICAgICAgICAgICAgY3JlYW15OiAwLFxuICAgICAgICAgICAgY3J1bmNoeTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICByb290OiB7XG4gICAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICAgIHN3ZWV0OiAwLjUsXG4gICAgICAgICAgICBlYXJ0aHk6IDAuMyxcbiAgICAgICAgICAgIGJpdHRlcjogMC4xLFxuICAgICAgICAgICAgdW1hbWk6IDAuMSxcbiAgICAgICAgICAgIHNhbHR5OiAwLFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm9tYToge1xuICAgICAgICAgICAgZWFydGh5OiAwLjYsXG4gICAgICAgICAgICB3b29keTogMC4yLFxuICAgICAgICAgICAgaGVyYmFsOiAwLjEsXG4gICAgICAgICAgICBmcnVpdHk6IDAuMSxcbiAgICAgICAgICAgIGZsb3JhbDogMCxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgY3J1bmNoeTogMC42LFxuICAgICAgICAgICAgY2hld3k6IDAuMixcbiAgICAgICAgICAgIHRlbmRlcjogMC4yLFxuICAgICAgICAgICAgY3Jpc3A6IDAsXG4gICAgICAgICAgICBzaWxreTogMCxcbiAgICAgICAgICAgIGNyZWFteTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBhbGxpdW06IHtcbiAgICAgICAgICB0YXN0ZToge1xuICAgICAgICAgICAgcHVuZ2VudDogMC42LFxuICAgICAgICAgICAgc3dlZXQ6IDAuMixcbiAgICAgICAgICAgIHVtYW1pOiAwLjIsXG4gICAgICAgICAgICBiaXR0ZXI6IDAsXG4gICAgICAgICAgICBzYWx0eTogMCxcbiAgICAgICAgICAgIHNvdXI6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm9tYToge1xuICAgICAgICAgICAgc3BpY3k6IDAuNyxcbiAgICAgICAgICAgIGVhcnRoeTogMC4yLFxuICAgICAgICAgICAgaGVyYmFsOiAwLjEsXG4gICAgICAgICAgICBmbG9yYWw6IDAsXG4gICAgICAgICAgICBmcnVpdHk6IDAsXG4gICAgICAgICAgICB3b29keTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICAgIGNydW5jaHk6IDAuNSxcbiAgICAgICAgICAgIGNoZXd5OiAwLjMsXG4gICAgICAgICAgICB0ZW5kZXI6IDAuMixcbiAgICAgICAgICAgIGNyaXNwOiAwLFxuICAgICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgICAgICBjcmVhbXk6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY3J1Y2lmZXJvdXM6IHtcbiAgICAgICAgICB0YXN0ZToge1xuICAgICAgICAgICAgYml0dGVyOiAwLjUsXG4gICAgICAgICAgICBzd2VldDogMC4yLFxuICAgICAgICAgICAgc3BpY3k6IDAuMixcbiAgICAgICAgICAgIHVtYW1pOiAwLjEsXG4gICAgICAgICAgICBzYWx0eTogMCxcbiAgICAgICAgICAgIHNvdXI6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm9tYToge1xuICAgICAgICAgICAgZWFydGh5OiAwLjQsXG4gICAgICAgICAgICBzdWxmdXJvdXM6IDAuMyxcbiAgICAgICAgICAgIHdvb2R5OiAwLjIsXG4gICAgICAgICAgICBoZXJiYWw6IDAuMSxcbiAgICAgICAgICAgIGZsb3JhbDogMCxcbiAgICAgICAgICAgIGZydWl0eTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICAgIGNydW5jaHk6IDAuNyxcbiAgICAgICAgICAgIGNyaXNwOiAwLjIsXG4gICAgICAgICAgICB0ZW5kZXI6IDAuMSxcbiAgICAgICAgICAgIGNoZXd5OiAwLFxuICAgICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgICAgICBjcmVhbXk6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbmlnaHRzaGFkZToge1xuICAgICAgICAgIHRhc3RlOiB7XG4gICAgICAgICAgICB1bWFtaTogMC41LFxuICAgICAgICAgICAgc3dlZXQ6IDAuMyxcbiAgICAgICAgICAgIHNvdXI6IDAuMSxcbiAgICAgICAgICAgIGJpdHRlcjogMC4xLFxuICAgICAgICAgICAgc2FsdHk6IDAsXG4gICAgICAgICAgICBzcGljeTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgICBmcnVpdHk6IDAuNSxcbiAgICAgICAgICAgIGVhcnRoeTogMC4zLFxuICAgICAgICAgICAgaGVyYmFsOiAwLjIsXG4gICAgICAgICAgICBmbG9yYWw6IDAsXG4gICAgICAgICAgICB3b29keTogMCxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgdGVuZGVyOiAwLjUsXG4gICAgICAgICAgICBqdWljeTogMC4zLFxuICAgICAgICAgICAgY2hld3k6IDAuMixcbiAgICAgICAgICAgIGNyaXNwOiAwLFxuICAgICAgICAgICAgY3J1bmNoeTogMCxcbiAgICAgICAgICAgIHNpbGt5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHNxdWFzaDoge1xuICAgICAgICAgIHRhc3RlOiB7XG4gICAgICAgICAgICBzd2VldDogMC42LFxuICAgICAgICAgICAgZWFydGh5OiAwLjIsXG4gICAgICAgICAgICBudXR0eTogMC4yLFxuICAgICAgICAgICAgYml0dGVyOiAwLFxuICAgICAgICAgICAgc2FsdHk6IDAsXG4gICAgICAgICAgICBzb3VyOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJvbWE6IHtcbiAgICAgICAgICAgIGVhcnRoeTogMC40LFxuICAgICAgICAgICAgc3dlZXQ6IDAuNCxcbiAgICAgICAgICAgIHdvb2R5OiAwLjEsXG4gICAgICAgICAgICBoZXJiYWw6IDAuMSxcbiAgICAgICAgICAgIGZsb3JhbDogMCxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgdGVuZGVyOiAwLjQsXG4gICAgICAgICAgICBjcmVhbXk6IDAuMyxcbiAgICAgICAgICAgIGNoZXd5OiAwLjIsXG4gICAgICAgICAgICBjcmlzcDogMC4xLFxuICAgICAgICAgICAgY3J1bmNoeTogMCxcbiAgICAgICAgICAgIHNpbGt5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGxlZ3VtZToge1xuICAgICAgICAgIHRhc3RlOiB7XG4gICAgICAgICAgICBlYXJ0aHk6IDAuNSxcbiAgICAgICAgICAgIHN3ZWV0OiAwLjMsXG4gICAgICAgICAgICB1bWFtaTogMC4yLFxuICAgICAgICAgICAgYml0dGVyOiAwLFxuICAgICAgICAgICAgc2FsdHk6IDAsXG4gICAgICAgICAgICBzb3VyOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJvbWE6IHtcbiAgICAgICAgICAgIGVhcnRoeTogMC42LFxuICAgICAgICAgICAgbnV0dHk6IDAuMyxcbiAgICAgICAgICAgIGhlcmJhbDogMC4xLFxuICAgICAgICAgICAgZmxvcmFsOiAwLFxuICAgICAgICAgICAgZnJ1aXR5OiAwLFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICB0ZW5kZXI6IDAuNCxcbiAgICAgICAgICAgIGNyZWFteTogMC4zLFxuICAgICAgICAgICAgY2hld3k6IDAuMyxcbiAgICAgICAgICAgIGNyaXNwOiAwLFxuICAgICAgICAgICAgY3J1bmNoeTogMCxcbiAgICAgICAgICAgIHNpbGt5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJjaHk6IHtcbiAgICAgICAgICB0YXN0ZToge1xuICAgICAgICAgICAgc3dlZXQ6IDAuNSxcbiAgICAgICAgICAgIGVhcnRoeTogMC4zLFxuICAgICAgICAgICAgdW1hbWk6IDAuMixcbiAgICAgICAgICAgIGJpdHRlcjogMCxcbiAgICAgICAgICAgIHNhbHR5OiAwLFxuICAgICAgICAgICAgc291cjogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgICBlYXJ0aHk6IDAuNyxcbiAgICAgICAgICAgIG51dHR5OiAwLjIsXG4gICAgICAgICAgICBoZXJiYWw6IDAuMSxcbiAgICAgICAgICAgIGZsb3JhbDogMCxcbiAgICAgICAgICAgIGZydWl0eTogMCxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgc3RhcmNoeTogMC42LFxuICAgICAgICAgICAgdGVuZGVyOiAwLjIsXG4gICAgICAgICAgICBjcmVhbXk6IDAuMixcbiAgICAgICAgICAgIGNyaXNwOiAwLFxuICAgICAgICAgICAgY3J1bmNoeTogMCxcbiAgICAgICAgICAgIHNpbGt5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBTZWxlY3QgYXBwcm9wcmlhdGUgcHJvZmlsZSBvciB1c2UgZGVmYXVsdFxuICAgICAgY29uc3QgcHJvZmlsZSA9IHByb2ZpbGVzW1N0cmluZyhzdWJDYXRlZ29yeSldIHx8IHtcbiAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICBzd2VldDogMC4yNSxcbiAgICAgICAgICBiaXR0ZXI6IDAuMjUsXG4gICAgICAgICAgdW1hbWk6IDAuMjUsXG4gICAgICAgICAgc2FsdHk6IDAuMTUsXG4gICAgICAgICAgc291cjogMC4xLFxuICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICB9LFxuICAgICAgICBhcm9tYToge1xuICAgICAgICAgIGVhcnRoeTogMC4zLFxuICAgICAgICAgIGhlcmJhbDogMC4zLFxuICAgICAgICAgIHdvb2R5OiAwLjIsXG4gICAgICAgICAgZnJ1aXR5OiAwLjEsXG4gICAgICAgICAgZmxvcmFsOiAwLjEsXG4gICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICB0ZW5kZXI6IDAuMyxcbiAgICAgICAgICBjcnVuY2h5OiAwLjMsXG4gICAgICAgICAgY3Jpc3A6IDAuMixcbiAgICAgICAgICBjaGV3eTogMC4xLFxuICAgICAgICAgIGNyZWFteTogMC4xLFxuICAgICAgICAgIHNpbGt5OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgZW5oYW5jZWQuc2Vuc29yeVByb2ZpbGUgPSBwcm9maWxlO1xuICAgIH1cblxuICAgIGFjY1trZXldID0gZW5oYW5jZWQ7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG4vKipcbiAqIEVuaGFuY2VzIG9pbCBwcm9wZXJ0aWVzIHdpdGggYWRkaXRpb25hbCBjdWxpbmFyeSwgc2Vuc29yeSwgYW5kIHRyYW5zZm9ybWF0aW9uIGRldGFpbHNcbiAqIEBwYXJhbSBvaWxzIFJlY29yZCBvZiBvaWwgaW5ncmVkaWVudHNcbiAqIEByZXR1cm5zIEVuaGFuY2VkIG9pbCBpbmdyZWRpZW50cyB3aXRoIGNvbXBsZXRlIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuaGFuY2VPaWxQcm9wZXJ0aWVzKFxuICBvaWxzOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PlxuKTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgc3RyaW5nPj4ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2lscykucmVkdWNlKChhY2MsIFtrZXksIG9pbF0pID0+IHtcbiAgICAvLyBTdGFydCB3aXRoIHRoZSBvcmlnaW5hbCBvaWxcbiAgICBjb25zdCBlbmhhbmNlZE9pbCA9IHsgLi4ub2lsIH07XG5cbiAgICAvLyBFbnN1cmUgYmFzaWMgcHJvcGVydGllcyBleGlzdFxuICAgIGVuaGFuY2VkT2lsLmNhdGVnb3J5ID0gU3RyaW5nKGVuaGFuY2VkT2lsLmNhdGVnb3J5IHx8ICdvaWwnKTtcbiAgICBlbmhhbmNlZE9pbC5lbGVtZW50YWxQcm9wZXJ0aWVzID0gU3RyaW5nKEpTT04uc3RyaW5naWZ5KGVuaGFuY2VkT2lsLmVsZW1lbnRhbFByb3BlcnRpZXMgfHwge1xuICAgICAgRmlyZTogMC4zLFxuICAgICAgV2F0ZXI6IDAuMixcbiAgICAgIEVhcnRoOiAwLjMsXG4gICAgICBBaXI6IDAuMixcbiAgICB9KSk7XG4gICAgZW5oYW5jZWRPaWwucXVhbGl0aWVzID0gU3RyaW5nKEFycmF5LmlzQXJyYXkoZW5oYW5jZWRPaWwucXVhbGl0aWVzKVxuICAgICAgPyBKU09OLnN0cmluZ2lmeShlbmhhbmNlZE9pbC5xdWFsaXRpZXMpXG4gICAgICA6IEpTT04uc3RyaW5naWZ5KFtdKSk7XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBzZW5zb3J5IHByb2ZpbGUgaWYgbm9uZSBleGlzdHNcbiAgICBpZiAoIWVuaGFuY2VkT2lsLnNlbnNvcnlQcm9maWxlKSB7XG4gICAgICBjb25zdCBvaWxUeXBlID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBpc0ZydWl0eSA9IG9pbFR5cGUuaW5jbHVkZXMoJ29saXZlJykgfHwgb2lsVHlwZS5pbmNsdWRlcygnYXZvY2FkbycpO1xuICAgICAgY29uc3QgaXNOdXR0eSA9XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ251dCcpIHx8XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ3Nlc2FtZScpIHx8XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ3dhbG51dCcpIHx8XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ2FsbW9uZCcpIHx8XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ3BlYW51dCcpO1xuICAgICAgY29uc3QgaXNGbG9yYWwgPVxuICAgICAgICBvaWxUeXBlLmluY2x1ZGVzKCdzdW5mbG93ZXInKSB8fCBvaWxUeXBlLmluY2x1ZGVzKCdzYWZmbG93ZXInKTtcbiAgICAgIGNvbnN0IGlzTmV1dHJhbCA9XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ3ZlZ2V0YWJsZScpIHx8XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ2Nhbm9sYScpIHx8XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ2dyYXBlc2VlZCcpO1xuICAgICAgY29uc3QgaXNUcm9waWNhbCA9XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ2NvY29udXQnKSB8fCBvaWxUeXBlLmluY2x1ZGVzKCdwYWxtJyk7XG5cbiAgICAgIGVuaGFuY2VkT2lsLnNlbnNvcnlQcm9maWxlID0gU3RyaW5nKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICBzd2VldDogaXNGcnVpdHkgfHwgaXNUcm9waWNhbCA/IDAuNiA6IDAuMixcbiAgICAgICAgICBiaXR0ZXI6IGlzTnV0dHkgPyAwLjQgOiAwLjEsXG4gICAgICAgICAgdW1hbWk6IGlzTnV0dHkgPyAwLjUgOiAwLjIsXG4gICAgICAgICAgcmljaDogaXNOdXR0eSB8fCBpc0ZydWl0eSA/IDAuNyA6IDAuNCxcbiAgICAgICAgfSxcbiAgICAgICAgYXJvbWE6IHtcbiAgICAgICAgICBmcnVpdHk6IGlzRnJ1aXR5ID8gMC44IDogMC4xLFxuICAgICAgICAgIG51dHR5OiBpc051dHR5ID8gMC44IDogMC4xLFxuICAgICAgICAgIGZsb3JhbDogaXNGbG9yYWwgPyAwLjcgOiAwLjEsXG4gICAgICAgICAgbmV1dHJhbDogaXNOZXV0cmFsID8gMC45IDogMC4yLFxuICAgICAgICAgIHRyb3BpY2FsOiBpc1Ryb3BpY2FsID8gMC44IDogMC4xLFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgdmlzY29zaXR5OiBpc1Ryb3BpY2FsIHx8IG9pbFR5cGUuaW5jbHVkZXMoJ29saXZlJykgPyAwLjcgOiAwLjUsXG4gICAgICAgICAgbW91dGhmZWVsOiBpc0ZydWl0eSB8fCBpc051dHR5ID8gMC44IDogMC41LFxuICAgICAgICAgIHJpY2huZXNzOiBpc0ZydWl0eSB8fCBpc051dHR5IHx8IGlzVHJvcGljYWwgPyAwLjcgOiAwLjQsXG4gICAgICAgIH0sXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gRW5oYW5jZSBjdWxpbmFyeSBhcHBsaWNhdGlvbnMgaWYgcHJlc2VudFxuICAgIGlmIChlbmhhbmNlZE9pbC5jdWxpbmFyeUFwcGxpY2F0aW9ucykge1xuICAgICAgLy8gRW5zdXJlIGFsbCBhcHBsaWNhdGlvbiB0eXBlcyBhcmUgcHJvcGVybHkgc3RydWN0dXJlZFxuICAgICAgT2JqZWN0LmVudHJpZXMoZW5oYW5jZWRPaWwuY3VsaW5hcnlBcHBsaWNhdGlvbnMpLmZvckVhY2goXG4gICAgICAgIChbYXBwVHlwZSwgYXBwbGljYXRpb25dKSA9PiB7XG4gICAgICAgICAgaWYgKGFwcGxpY2F0aW9uICYmIHR5cGVvZiBhcHBsaWNhdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcERhdGEgPSBhcHBsaWNhdGlvbiBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgICAgICAgIGVuaGFuY2VkT2lsLmN1bGluYXJ5QXBwbGljYXRpb25zW2FwcFR5cGVdID0gU3RyaW5nKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgLi4uKGFwcGxpY2F0aW9uIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSxcbiAgICAgICAgICAgICAgZWxlbWVudGFsRWZmZWN0OiBhcHBEYXRhLmVsZW1lbnRhbEVmZmVjdCB8fCB7XG4gICAgICAgICAgICAgICAgRmlyZTpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdmcnlpbmcnIHx8XG4gICAgICAgICAgICAgICAgICBhcHBUeXBlID09PSAnY29va2luZycgfHxcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdoaWdoSGVhdCdcbiAgICAgICAgICAgICAgICAgICAgPyAwLjJcbiAgICAgICAgICAgICAgICAgICAgOiAwLjEsXG4gICAgICAgICAgICAgICAgV2F0ZXI6XG4gICAgICAgICAgICAgICAgICBhcHBUeXBlID09PSAnZHJlc3NpbmcnIHx8IGFwcFR5cGUgPT09ICdtYXJpbmFkZScgPyAwLjIgOiAwLjEsXG4gICAgICAgICAgICAgICAgRWFydGg6XG4gICAgICAgICAgICAgICAgICBhcHBUeXBlID09PSAnYmFraW5nJyB8fCBhcHBUeXBlID09PSAncm9hc3RpbmcnID8gMC4yIDogMC4xLFxuICAgICAgICAgICAgICAgIEFpcjpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdlbXVsc2lvbicgfHwgYXBwVHlwZSA9PT0gJ3doaXBwaW5nJyA/IDAuMiA6IDAuMSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYWxjaGVtaWNhbEVmZmVjdDogYXBwRGF0YS5hbGNoZW1pY2FsRWZmZWN0IHx8IHtcbiAgICAgICAgICAgICAgICBzcGlyaXQ6XG4gICAgICAgICAgICAgICAgICBhcHBUeXBlID09PSAnZmluaXNoaW5nJyB8fCBhcHBUeXBlID09PSAnaW5mdXNpb24nID8gMC4yIDogMC4xLFxuICAgICAgICAgICAgICAgIGVzc2VuY2U6XG4gICAgICAgICAgICAgICAgICBhcHBUeXBlID09PSAnZHJlc3NpbmcnIHx8IGFwcFR5cGUgPT09ICdtYXJpbmFkZScgPyAwLjIgOiAwLjEsXG4gICAgICAgICAgICAgICAgbWF0dGVyOlxuICAgICAgICAgICAgICAgICAgYXBwVHlwZSA9PT0gJ2Jha2luZycgfHwgYXBwVHlwZSA9PT0gJ2Nvb2tpbmcnID8gMC4yIDogMC4xLFxuICAgICAgICAgICAgICAgIHN1YnN0YW5jZTpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdmcnlpbmcnIHx8IGFwcFR5cGUgPT09ICdoaWdoSGVhdCcgPyAwLjIgOiAwLjEsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgZGVmYXVsdCBjdWxpbmFyeSBhcHBsaWNhdGlvbnMgYmFzZWQgb24gc21va2UgcG9pbnQgYW5kIG9pbCB0eXBlXG4gICAgICBjb25zdCBzbW9rZVBvaW50RGF0YSA9IChlbmhhbmNlZE9pbC5zbW9rZVBvaW50IGFzIHVua25vd24pIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgY29uc3Qgc21va2VQb2ludCA9IE51bWJlcihzbW9rZVBvaW50RGF0YS5mYWhyZW5oZWl0KSB8fCAwO1xuICAgICAgY29uc3QgaXNIaWdoSGVhdCA9IHNtb2tlUG9pbnQgPiA0MDA7XG4gICAgICBjb25zdCBpc01lZGl1bUhlYXQgPSBzbW9rZVBvaW50ID4gMzI1ICYmIHNtb2tlUG9pbnQgPD0gNDAwO1xuICAgICAgY29uc3QgaXNMb3dIZWF0ID0gc21va2VQb2ludCA8PSAzMjU7XG4gICAgICBjb25zdCBpc0ZpbmlzaGluZyA9XG4gICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdvbGl2ZScpIHx8XG4gICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3YWxudXQnKSB8fFxuICAgICAgICBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc2VzYW1lJykgfHxcbiAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3B1bXBraW4nKTtcblxuICAgICAgZW5oYW5jZWRPaWwuY3VsaW5hcnlBcHBsaWNhdGlvbnMgPSBTdHJpbmcoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAuLi4oaXNIaWdoSGVhdFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBmcnlpbmc6IHtcbiAgICAgICAgICAgICAgICBub3RlczogWydFeGNlbGxlbnQgZm9yIGhpZ2gtaGVhdCBjb29raW5nJ10sXG4gICAgICAgICAgICAgICAgdGVjaG5pcXVlczogWydEZWVwIGZyeWluZycsICdTdGlyLWZyeWluZycsICdTYXV0w6lpbmcnXSxcbiAgICAgICAgICAgICAgICBlbGVtZW50YWxFZmZlY3Q6IHsgRmlyZTogMC4zLCBFYXJ0aDogMC4xIH0sXG4gICAgICAgICAgICAgICAgYWxjaGVtaWNhbEVmZmVjdDogeyBzdWJzdGFuY2U6IDAuMywgbWF0dGVyOiAwLjIgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHt9KSxcbiAgICAgICAgLi4uKGlzTWVkaXVtSGVhdFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBjb29raW5nOiB7XG4gICAgICAgICAgICAgICAgbm90ZXM6IFsnR29vZCBmb3IgbWVkaXVtLWhlYXQgY29va2luZyddLFxuICAgICAgICAgICAgICAgIHRlY2huaXF1ZXM6IFsnU2F1dMOpaW5nJywgJ1BhbiBmcnlpbmcnLCAnUm9hc3RpbmcnXSxcbiAgICAgICAgICAgICAgICBlbGVtZW50YWxFZmZlY3Q6IHsgRmlyZTogMC4yLCBFYXJ0aDogMC4yIH0sXG4gICAgICAgICAgICAgICAgYWxjaGVtaWNhbEVmZmVjdDogeyBtYXR0ZXI6IDAuMywgZXNzZW5jZTogMC4xIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7fSksXG4gICAgICAgIC4uLihpc0xvd0hlYXQgfHwgaXNGaW5pc2hpbmdcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgZmluaXNoaW5nOiB7XG4gICAgICAgICAgICAgICAgbm90ZXM6IFsnQmVzdCB1c2VkIHVuaGVhdGVkIG9yIGxvdyBoZWF0J10sXG4gICAgICAgICAgICAgICAgdGVjaG5pcXVlczogWydEcml6emxpbmcnLCAnRHJlc3NpbmdzJywgJ0RpcHMnXSxcbiAgICAgICAgICAgICAgICBlbGVtZW50YWxFZmZlY3Q6IHsgV2F0ZXI6IDAuMywgQWlyOiAwLjIgfSxcbiAgICAgICAgICAgICAgICBhbGNoZW1pY2FsRWZmZWN0OiB7IHNwaXJpdDogMC4zLCBlc3NlbmNlOiAwLjIgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHt9KSxcbiAgICAgICAgLi4uKGVuaGFuY2VkT2lsLnN1YkNhdGVnb3J5ID09PSAnYmFraW5nJyB8fFxuICAgICAgICBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY29jb251dCcpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGJha2luZzoge1xuICAgICAgICAgICAgICAgIG5vdGVzOiBbJ1N1aXRhYmxlIGZvciBiYWtlZCBnb29kcyddLFxuICAgICAgICAgICAgICAgIHRlY2huaXF1ZXM6IFsnQ2FrZXMnLCAnQ29va2llcycsICdCcmVhZHMnXSxcbiAgICAgICAgICAgICAgICBlbGVtZW50YWxFZmZlY3Q6IHsgRWFydGg6IDAuMywgRmlyZTogMC4xIH0sXG4gICAgICAgICAgICAgICAgYWxjaGVtaWNhbEVmZmVjdDogeyBtYXR0ZXI6IDAuMywgc3Vic3RhbmNlOiAwLjEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHt9KSxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY29va2luZyB0cmFuc2Zvcm1hdGlvbnMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGlmICghZW5oYW5jZWRPaWwuZWxlbWVudGFsVHJhbnNmb3JtYXRpb24pIHtcbiAgICAgIGVuaGFuY2VkT2lsLmVsZW1lbnRhbFRyYW5zZm9ybWF0aW9uID0gU3RyaW5nKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgd2hlbkhlYXRlZDoge1xuICAgICAgICAgIEZpcmU6IDAuMixcbiAgICAgICAgICBBaXI6IDAuMSxcbiAgICAgICAgICBXYXRlcjogLTAuMSxcbiAgICAgICAgICBFYXJ0aDogLTAuMDUsXG4gICAgICAgIH0sXG4gICAgICAgIHdoZW5Db29sZWQ6IHtcbiAgICAgICAgICBXYXRlcjogMC4xLFxuICAgICAgICAgIEVhcnRoOiAwLjIsXG4gICAgICAgICAgRmlyZTogLTAuMSxcbiAgICAgICAgICBBaXI6IC0wLjA1LFxuICAgICAgICB9LFxuICAgICAgICB3aGVuTWl4ZWQ6IHtcbiAgICAgICAgICBBaXI6IDAuMTUsXG4gICAgICAgICAgV2F0ZXI6IDAuMSxcbiAgICAgICAgICBGaXJlOiAtMC4wNSxcbiAgICAgICAgICBFYXJ0aDogLTAuMDUsXG4gICAgICAgIH0sXG4gICAgICAgIHdoZW5JbmZ1c2VkOiB7XG4gICAgICAgICAgQWlyOiAwLjIsXG4gICAgICAgICAgRmlyZTogMC4xLFxuICAgICAgICAgIEVhcnRoOiAtMC4wNSxcbiAgICAgICAgICBXYXRlcjogLTAuMDUsXG4gICAgICAgIH0sXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZXJtb2R5bmFtaWMgcHJvcGVydGllcyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgaWYgKCFlbmhhbmNlZE9pbC50aGVybW9keW5hbWljUHJvcGVydGllcykge1xuICAgICAgLy8gQmFzZSBvbiBzbW9rZSBwb2ludCBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IHNtb2tlUG9pbnREYXRhID0gKGVuaGFuY2VkT2lsLnNtb2tlUG9pbnQgYXMgdW5rbm93bikgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICBjb25zdCBzbW9rZVBvaW50ID0gTnVtYmVyKHNtb2tlUG9pbnREYXRhLmZhaHJlbmhlaXQpIHx8IDM1MDtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTbW9rZVBvaW50ID0gKHNtb2tlUG9pbnQgLSAzMDApIC8gMjUwOyAvLyBOb3JtYWxpemUgYmV0d2VlbiAzMDAtNTUwwrBGXG4gICAgICBjb25zdCBoZWF0VmFsdWUgPSAwLjUgKyBub3JtYWxpemVkU21va2VQb2ludCAqIDAuNDsgLy8gU2NhbGUgMC41LTAuOVxuXG4gICAgICBlbmhhbmNlZE9pbC50aGVybW9keW5hbWljUHJvcGVydGllcyA9IFN0cmluZyhKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGhlYXQ6IE1hdGgubWluKE1hdGgubWF4KGhlYXRWYWx1ZSwgMC4zKSwgMC45KSxcbiAgICAgICAgZW50cm9weTogMC40LFxuICAgICAgICByZWFjdGl2aXR5OiAwLjYsXG4gICAgICAgIGVuZXJneTogMC43LFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8vIEFkZCByZWNvbW1lbmRlZCBjb29raW5nIG1ldGhvZHMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGlmICghZW5oYW5jZWRPaWwucmVjb21tZW5kZWRDb29raW5nTWV0aG9kcykge1xuICAgICAgY29uc3Qgc21va2VQb2ludERhdGEgPSAoZW5oYW5jZWRPaWwuc21va2VQb2ludCBhcyB1bmtub3duKSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIGNvbnN0IHNtb2tlUG9pbnQgPSBOdW1iZXIoc21va2VQb2ludERhdGEuZmFocmVuaGVpdCkgfHwgMDtcbiAgICAgIGNvbnN0IG1ldGhvZHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyBwb3RlbmN5OiBudW1iZXIgfT4gPSBbXTtcblxuICAgICAgaWYgKHNtb2tlUG9pbnQgPiA0MDApIHtcbiAgICAgICAgbWV0aG9kcy5wdXNoKHsgbmFtZTogJ2RlZXBGcnlpbmcnLCBwb3RlbmN5OiAwLjkgfSk7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdzdGlyRnJ5aW5nJywgcG90ZW5jeTogMC45IH0pO1xuICAgICAgICBtZXRob2RzLnB1c2goeyBuYW1lOiAnc2F1dMOpaW5nJywgcG90ZW5jeTogMC44IH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoc21va2VQb2ludCA+IDM1MCkge1xuICAgICAgICBtZXRob2RzLnB1c2goeyBuYW1lOiAncm9hc3RpbmcnLCBwb3RlbmN5OiAwLjcgfSk7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdiYWtpbmcnLCBwb3RlbmN5OiAwLjcgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbmhhbmNlZE9pbC5zdWJDYXRlZ29yeSA9PT0gJ2ZpbmlzaGluZycgfHwgc21va2VQb2ludCA8IDM1MCkge1xuICAgICAgICBtZXRob2RzLnB1c2goeyBuYW1lOiAnZHJlc3NpbmcnLCBwb3RlbmN5OiAwLjkgfSk7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdtYXJpbmF0aW5nJywgcG90ZW5jeTogMC44IH0pO1xuICAgICAgICBtZXRob2RzLnB1c2goeyBuYW1lOiAnZHJpenpsaW5nJywgcG90ZW5jeTogMS4wIH0pO1xuICAgICAgfVxuXG4gICAgICBlbmhhbmNlZE9pbC5yZWNvbW1lbmRlZENvb2tpbmdNZXRob2RzID0gU3RyaW5nKEpTT04uc3RyaW5naWZ5KG1ldGhvZHMpKTtcbiAgICB9XG5cbiAgICBhY2Nba2V5XSA9IGVuaGFuY2VkT2lsO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cblxuLyoqXG4gKiBQYXR0ZXJuIE9PLTM6IFV0aWxpdHkgSW1wb3J0IEFsaWdubWVudCAtIFN0YW5kYWxvbmUgZXhwb3J0cyBmb3IgVFMyNjE0IGNvbXBhdGliaWxpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRFbGVtZW50YWxTdGF0ZSgpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgcmV0dXJuIEVsZW1lbnRhbENhbGN1bGF0b3IuZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0RWxlbWVudGFsUHJvcGVydGllcygpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgcmV0dXJuIERFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVMb3dlcmNhc2VGb3JtYXQocHJvcGVydGllczogdW5rbm93bik6IGFueSB7XG4gIGlmICghcHJvcGVydGllcyB8fCB0eXBlb2YgcHJvcGVydGllcyAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gcHJvcGVydGllcztcbiAgfVxuICBcbiAgY29uc3QgbG93ZXJjYXNlUHJvcHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgLy8gQ29udmVydCBjYXBpdGFsaXplZCBlbGVtZW50IG5hbWVzIHRvIGxvd2VyY2FzZVxuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgbG93ZXJjYXNlUHJvcHNbbG93ZXJLZXldID0gdmFsdWU7XG4gIH1cbiAgXG4gIHJldHVybiBsb3dlcmNhc2VQcm9wcztcbn1cblxuLyoqXG4gKiBFbnN1cmVzIHRoZSByZXR1cm5lZCBvYmplY3QgYWx3YXlzIG1hdGNoZXMgdGhlIEluZ3JlZGllbnRNYXBwaW5nIGludGVyZmFjZSBhdCBydW50aW1lLlxuICovXG5leHBvcnQgY29uc3QgZml4SW5ncmVkaWVudE1hcHBpbmcgPSAoXG4gIG1hcHBpbmc6IFBhcnRpYWw8SW5ncmVkaWVudE1hcHBpbmc+LFxuICBrZXk6IHN0cmluZ1xuKTogSW5ncmVkaWVudE1hcHBpbmcgPT4ge1xuICAvLyBGb3JtYXQga2V5IGludG8gYSByZWFkYWJsZSBuYW1lIGlmIG5vIG5hbWUgaXMgcHJvdmlkZWRcbiAgY29uc3QgZm9ybWF0dGVkTmFtZSA9IGtleVxuICAgIC5zcGxpdCgnXycpXG4gICAgLm1hcCgod29yZCkgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXG4gICAgLmpvaW4oJyAnKTtcblxuICAvLyBFbnN1cmUgYWxsIHJlcXVpcmVkIGVsZW1lbnRzIGV4aXN0IGluIGVsZW1lbnRhbFByb3BlcnRpZXNcbiAgY29uc3QgZWxlbWVudGFsUHJvcGVydGllcyA9IG1hcHBpbmcuZWxlbWVudGFsUHJvcGVydGllc1xuICAgID8gZW5zdXJlQ29tcGxldGVFbGVtZW50YWxQcm9wZXJ0aWVzKG1hcHBpbmcuZWxlbWVudGFsUHJvcGVydGllcylcbiAgICA6IERFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVM7XG5cbiAgLy8gQWRkIHJ1bnRpbWUgdHlwZSBndWFyZCAobWluaW1hbCwgc2luY2Ugbm9ybWFsaXphdGlvbiBpcyBhbHJlYWR5IGVuZm9yY2VkKVxuICBjb25zdCByZXF1aXJlZEtleXMgPSBbJ25hbWUnLCAnY2F0ZWdvcnknLCAnZWxlbWVudGFsUHJvcGVydGllcyddO1xuICBmb3IgKGNvbnN0IGsgb2YgcmVxdWlyZWRLZXlzKSB7XG4gICAgaWYgKCEoayBpbiBtYXBwaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBmaXhJbmdyZWRpZW50TWFwcGluZzogTWlzc2luZyByZXF1aXJlZCBrZXkgJyR7a30nIGZvciBpbmdyZWRpZW50ICcke2tleX0nYCk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBFbnN1cmUgYXN0cm9sb2dpY2FsUHJvZmlsZSBoYXMgbWluaW1hbCBzdHJ1Y3R1cmUgaWYgcHJlc2VudCBidXQgZW1wdHlcbiAgaWYgKG1hcHBpbmcuYXN0cm9sb2dpY2FsUHJvZmlsZSAmJiB0eXBlb2YgbWFwcGluZy5hc3Ryb2xvZ2ljYWxQcm9maWxlID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhtYXBwaW5nLmFzdHJvbG9naWNhbFByb2ZpbGUpLmxlbmd0aCA9PT0gMCkge1xuICAgIG1hcHBpbmcuYXN0cm9sb2dpY2FsUHJvZmlsZSA9IHtcbiAgICAgIHJ1bGluZ1BsYW5ldHM6IFtdLFxuICAgICAgZmF2b3JhYmxlWm9kaWFjOiBbXVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAuLi5tYXBwaW5nLFxuICAgIG5hbWU6IG1hcHBpbmcubmFtZSB8fCBmb3JtYXR0ZWROYW1lLFxuICAgIGVsZW1lbnRhbFByb3BlcnRpZXMsXG4gIH0gYXMgSW5ncmVkaWVudE1hcHBpbmc7XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgYWxsIGluZ3JlZGllbnQgbWFwcGluZ3MgYW5kIGd1YXJhbnRlZXMgdHlwZSBzYWZldHkgZm9yIGRvd25zdHJlYW0gdXNhZ2UuXG4gKi9cbmV4cG9ydCBjb25zdCBmaXhJbmdyZWRpZW50TWFwcGluZ3MgPSA8XG4gIFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBQYXJ0aWFsPEluZ3JlZGllbnRNYXBwaW5nPj5cbj4oXG4gIGluZ3JlZGllbnRzOiBUXG4pOiBSZWNvcmQ8c3RyaW5nLCBJbmdyZWRpZW50TWFwcGluZz4gPT4ge1xuICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIEluZ3JlZGllbnRNYXBwaW5nPiA9IHt9O1xuXG4gIE9iamVjdC5lbnRyaWVzKGluZ3JlZGllbnRzKS5mb3JFYWNoKChba2V5LCBtYXBwaW5nXSkgPT4ge1xuICAgIHJlc3VsdFtrZXldID0gZml4SW5ncmVkaWVudE1hcHBpbmcobWFwcGluZywga2V5KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogRml4ZXMgaW5ncmVkaWVudCBtYXBwaW5ncyBieSBlbnN1cmluZyBhbGwgcmVxdWlyZWQgcHJvcGVydGllcyBhcmUgcHJlc2VudFxuICogQHBhcmFtIGluZ3JlZGllbnRzIFJhdyBpbmdyZWRpZW50IG1hcHBpbmdzXG4gKiBAcmV0dXJucyBGaXhlZCBpbmdyZWRpZW50IG1hcHBpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaXhSYXdJbmdyZWRpZW50TWFwcGluZ3MoXG4gIGluZ3JlZGllbnRzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoaW5ncmVkaWVudHMpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAvLyBTa2lwIG51bGwgb3IgdW5kZWZpbmVkIHZhbHVlc1xuICAgIGlmICghdmFsdWUpIHJldHVybiBhY2M7XG5cbiAgICBjb25zdCB2YWx1ZURhdGEgPSB2YWx1ZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAvLyBFbnN1cmUgZWxlbWVudGFsIHByb3BlcnRpZXMgYXJlIG5vcm1hbGl6ZWRcbiAgICBjb25zdCBlbGVtZW50YWxQcm9wZXJ0aWVzID0gbm9ybWFsaXplUHJvcGVydGllcyhcbiAgICAgICh2YWx1ZURhdGEuZWxlbWVudGFsUHJvcGVydGllcyBhcyBQYXJ0aWFsPEVsZW1lbnRhbFByb3BlcnRpZXM+KSB8fCB7fVxuICAgICk7XG5cbiAgICAvLyBDcmVhdGUgYSBzdGFuZGFyZGl6ZWQgYXN0cm9sb2dpY2FsIHByb2ZpbGUgaWYgb25lIGRvZXNuJ3QgZXhpc3RcbiAgICBjb25zdCBhc3Ryb1Byb2ZpbGUgPSAodmFsdWVEYXRhLmFzdHJvbG9naWNhbFByb2ZpbGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHx8IHt9O1xuXG4gICAgLy8gRGV0ZXJtaW5lIGJhc2UgZWxlbWVudGFsIGFmZmluaXR5IGlmIG5vdCBwcm92aWRlZFxuICAgIGlmICghYXN0cm9Qcm9maWxlLmVsZW1lbnRhbEFmZmluaXR5KSB7XG4gICAgICBjb25zdCBzdHJvbmdlc3RFbGVtZW50ID0gT2JqZWN0LmVudHJpZXMoZWxlbWVudGFsUHJvcGVydGllcylcbiAgICAgICAgLnNvcnQoKFssIGFdLCBbLCBiXSkgPT4gYiAtIGEpWzBdWzBdXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBhc3Ryb1Byb2ZpbGUuZWxlbWVudGFsQWZmaW5pdHkgPSB7XG4gICAgICAgIGJhc2U6IHN0cm9uZ2VzdEVsZW1lbnQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGFjY1trZXldID0ge1xuICAgICAgLi4uKHZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSxcbiAgICAgIG5hbWU6IHZhbHVlRGF0YS5uYW1lIHx8IGtleS5yZXBsYWNlKC9fL2csICcgJyksXG4gICAgICBjYXRlZ29yeTogdmFsdWVEYXRhLmNhdGVnb3J5IHx8ICdpbmdyZWRpZW50JyxcbiAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXMsXG4gICAgICBhc3Ryb2xvZ2ljYWxQcm9maWxlOiBhc3Ryb1Byb2ZpbGUsXG4gICAgfTtcblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cblxudHlwZSBFbGVtZW50YWxSZWxhdGlvbnNoaXAgPVxuICB8ICdnZW5lcmF0aW5nJ1xuICB8ICdjb250cm9sbGluZydcbiAgfCAnc2FtZSdcbiAgfCAnY29udHJvbGxlZC1ieSdcbiAgfCAnd2Vha2VuZWQtYnknXG4gIHwgJ25ldXRyYWwnO1xuXG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgYWZmaW5pdHkgYmV0d2VlbiB0d28gZWxlbWVudHMgYmFzZWQgb24gdGhlIEZpdmUgRWxlbWVudHMgdGhlb3J5XG4gKiBSZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLCB3aGVyZTpcbiAqIC0gMS4wOiBTYW1lIGVsZW1lbnQgKHBlcmZlY3QgYWZmaW5pdHkpXG4gKiAtIDAuODogRWxlbWVudCBpcyBnZW5lcmF0ZWQgYnkgKGNoaWxkIG9mKSB0aGUgb3RoZXJcbiAqIC0gMC42OiBFbGVtZW50IGdlbmVyYXRlcyAocGFyZW50IG9mKSB0aGUgb3RoZXJcbiAqIC0gMC40OiBOZXV0cmFsIHJlbGF0aW9uc2hpcFxuICogLSAwLjI6IEVsZW1lbnQgaXMgY29udHJvbGxlZCBieSB0aGUgb3RoZXJcbiAqIC0gMC4wOiBFbGVtZW50IGNvbnRyb2xzIHRoZSBvdGhlciAod2Vha2VzdCBhZmZpbml0eSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUVsZW1lbnRhbEFmZmluaXR5KFxuICBlbGVtZW50MTogRWxlbWVudCxcbiAgZWxlbWVudDI6IEVsZW1lbnRcbik6IG51bWJlciB7XG4gIGNvbnN0IHJlbGF0aW9uc2hpcCA9IGdldEVsZW1lbnRhbFJlbGF0aW9uc2hpcChlbGVtZW50MSwgZWxlbWVudDIpO1xuXG4gIHN3aXRjaCAocmVsYXRpb25zaGlwKSB7XG4gICAgY2FzZSAnc2FtZSc6XG4gICAgICByZXR1cm4gMS4wO1xuICAgIGNhc2UgJ2dlbmVyYXRpbmcnOlxuICAgICAgcmV0dXJuIDAuODtcbiAgICBjYXNlICdjb250cm9sbGVkLWJ5JzpcbiAgICAgIHJldHVybiAwLjY7XG4gICAgY2FzZSAnbmV1dHJhbCc6XG4gICAgICByZXR1cm4gMC40O1xuICAgIGNhc2UgJ3dlYWtlbmVkLWJ5JzpcbiAgICAgIHJldHVybiAwLjI7XG4gICAgY2FzZSAnY29udHJvbGxpbmcnOlxuICAgICAgcmV0dXJuIDAuMDtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIDAuNDtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9