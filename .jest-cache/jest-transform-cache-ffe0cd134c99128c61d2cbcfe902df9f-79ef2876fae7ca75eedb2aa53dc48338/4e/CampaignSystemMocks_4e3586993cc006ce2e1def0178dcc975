c692ab3547374a1e73d324deeaacc6dd
"use strict";
/**
 * Campaign System Test Mocks
 *
 * Comprehensive mocking system for campaign operations during test execution.
 * Prevents actual build processes from running and provides test-safe alternatives.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.campaignTestIsolation = exports.CampaignTestIsolationManager = exports.MockSafetyProtocol = exports.MockProgressTracker = exports.MockCampaignController = void 0;
const campaign_1 = require("../../types/campaign");
/**
 * Mock Campaign Controller for test environments
 */
class MockCampaignController {
    config;
    currentPhase = null;
    safetyEvents = [];
    _isPaused = false;
    _isRunning = false;
    mockMetrics;
    mockStashes = new Map();
    constructor(config) {
        this.config = config;
        this.mockMetrics = this.createMockMetrics();
        this.initializeMockStashes();
    }
    /**
     * Mock phase execution - does not run actual scripts
     */
    async executePhase(phase) {
        if (this.isPaused()) {
            throw new Error('Campaign is paused');
        }
        this._isRunning = true;
        this.currentPhase = phase;
        const startTime = Date.now();
        // Add mock safety event
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.CHECKPOINT_CREATED,
            timestamp: new Date(),
            description: `Mock phase execution: ${phase.name}`,
            severity: campaign_1.SafetyEventSeverity.INFO,
            action: 'MOCK_PHASE_START',
        });
        // Simulate phase execution without running actual scripts
        const mockResult = await this.simulatePhaseExecution(phase);
        const executionTime = Date.now() - startTime;
        this._isRunning = false;
        return {
            phaseId: phase.id,
            success: mockResult.success,
            metricsImprovement: mockResult.metricsImprovement,
            filesProcessed: mockResult.filesProcessed,
            errorsFixed: mockResult.errorsFixed,
            warningsFixed: mockResult.warningsFixed,
            executionTime,
            safetyEvents: [...this.safetyEvents],
        };
    }
    /**
     * Mock phase validation - does not run actual validation
     */
    async validatePhaseCompletion(phase) {
        // Return mock validation result based on phase success criteria
        const mockErrors = [];
        const mockWarnings = [];
        // Simulate validation logic without actual checks
        if (phase.successCriteria.typeScriptErrors !== undefined) {
            if (this.mockMetrics.typeScriptErrors.current > phase.successCriteria.typeScriptErrors) {
                mockErrors.push(`Mock: TypeScript errors not met`);
            }
        }
        return {
            success: mockErrors.length === 0,
            errors: mockErrors,
            warnings: mockWarnings,
            metrics: this.mockMetrics,
        };
    }
    /**
     * Mock safety checkpoint creation
     */
    async createSafetyCheckpoint(description) {
        const checkpointId = `mock_checkpoint_${Date.now()}`;
        // Create mock stash
        const mockStash = {
            id: checkpointId,
            description: `Mock stash: ${description}`,
            timestamp: new Date(),
            branch: 'mock-branch',
            ref: `stash@{${this.mockStashes.size}}`,
        };
        this.mockStashes.set(checkpointId, mockStash);
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.CHECKPOINT_CREATED,
            timestamp: new Date(),
            description: `Mock checkpoint created: ${description}`,
            severity: campaign_1.SafetyEventSeverity.INFO,
            action: 'MOCK_CHECKPOINT_CREATE',
        });
        return checkpointId;
    }
    /**
     * Mock rollback to checkpoint
     */
    async rollbackToCheckpoint(checkpointId) {
        const stash = this.mockStashes.get(checkpointId);
        if (!stash) {
            throw new Error(`Mock stash not found: ${checkpointId}`);
        }
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.ROLLBACK_TRIGGERED,
            timestamp: new Date(),
            description: `Mock rollback to: ${checkpointId}`,
            severity: campaign_1.SafetyEventSeverity.WARNING,
            action: 'MOCK_ROLLBACK',
        });
        // Simulate rollback by resetting mock metrics
        this.mockMetrics = this.createMockMetrics();
    }
    /**
     * Get mock progress metrics without running actual measurements
     */
    async getProgressMetrics() {
        return { ...this.mockMetrics };
    }
    /**
     * Generate mock phase report
     */
    async generatePhaseReport(phase) {
        const validation = await this.validatePhaseCompletion(phase);
        return {
            phaseId: phase.id,
            phaseName: phase.name,
            startTime: new Date(),
            status: validation.success ? campaign_1.PhaseStatus.COMPLETED : campaign_1.PhaseStatus.IN_PROGRESS,
            metrics: this.mockMetrics,
            achievements: ['Mock achievement 1', 'Mock achievement 2'],
            issues: validation.errors,
            recommendations: ['Mock recommendation 1'],
        };
    }
    /**
     * Pause campaign execution
     */
    pauseCampaign() {
        this._isPaused = true;
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.CHECKPOINT_CREATED,
            timestamp: new Date(),
            description: 'Campaign paused for test isolation',
            severity: campaign_1.SafetyEventSeverity.INFO,
            action: 'CAMPAIGN_PAUSED',
        });
    }
    /**
     * Resume campaign execution
     */
    resumeCampaign() {
        this._isPaused = false;
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.CHECKPOINT_CREATED,
            timestamp: new Date(),
            description: 'Campaign resumed after test isolation',
            severity: campaign_1.SafetyEventSeverity.INFO,
            action: 'CAMPAIGN_RESUMED',
        });
    }
    /**
     * Check if campaign is paused
     */
    isPaused() {
        return this._isPaused;
    }
    /**
     * Check if campaign is running
     */
    isRunning() {
        return this._isRunning;
    }
    /**
     * Get current phase
     */
    getCurrentPhase() {
        return this.currentPhase;
    }
    /**
     * Get safety events
     */
    getSafetyEvents() {
        return [...this.safetyEvents];
    }
    /**
     * Update mock metrics for testing
     */
    updateMockMetrics(updates) {
        this.mockMetrics = { ...this.mockMetrics, ...updates };
    }
    /**
     * Reset mock state
     */
    resetMockState() {
        this.safetyEvents = [];
        this._isPaused = false;
        this._isRunning = false;
        this.currentPhase = null;
        this.mockMetrics = this.createMockMetrics();
        this.mockStashes.clear();
        this.initializeMockStashes();
    }
    // Private helper methods
    async simulatePhaseExecution(_phase) {
        // Simulate processing without running actual scripts
        await new Promise(resolve => setTimeout(resolve, 100)); // Small delay for realism
        return {
            success: true,
            metricsImprovement: {
                typeScriptErrorsReduced: 5,
                lintingWarningsReduced: 10,
                buildTimeImproved: 0.5,
                enterpriseSystemsAdded: 2,
            },
            filesProcessed: 15,
            errorsFixed: 5,
            warningsFixed: 10,
        };
    }
    createMockMetrics() {
        return {
            typeScriptErrors: {
                current: 50,
                target: 0,
                reduction: 36,
                percentage: 42,
            },
            lintingWarnings: {
                current: 2000,
                target: 0,
                reduction: 2506,
                percentage: 56,
            },
            buildPerformance: {
                currentTime: 8.5,
                targetTime: 10,
                cacheHitRate: 0.8,
                memoryUsage: 45,
            },
            enterpriseSystems: {
                current: 50,
                target: 200,
                transformedExports: 50,
            },
        };
    }
    initializeMockStashes() {
        // Create some initial mock stashes
        const initialStashes = [
            {
                id: 'mock_stash_1',
                description: 'Initial mock stash',
                timestamp: new Date(Date.now() - 3600000),
                branch: 'mock-branch',
                ref: 'stash@{0}',
            },
            {
                id: 'mock_stash_2',
                description: 'Secondary mock stash',
                timestamp: new Date(Date.now() - 1800000),
                branch: 'mock-branch',
                ref: 'stash@{1}',
            },
        ];
        initialStashes.forEach(stash => {
            this.mockStashes.set(stash.id, stash);
        });
    }
    addSafetyEvent(event) {
        this.safetyEvents.push(event);
        // Keep only recent events to prevent memory issues
        if (this.safetyEvents.length > 100) {
            this.safetyEvents = this.safetyEvents.slice(-50);
        }
    }
}
exports.MockCampaignController = MockCampaignController;
/**
 * Mock Progress Tracker for test environments
 */
class MockProgressTracker {
    mockMetrics;
    metricsHistory = [];
    isTracking = false;
    constructor() {
        this.mockMetrics = this.createMockMetrics();
    }
    /**
     * Mock TypeScript error count - does not run actual tsc
     */
    async getTypeScriptErrorCount() {
        return this.mockMetrics.typeScriptErrors.current;
    }
    /**
     * Mock TypeScript error breakdown - does not run actual analysis
     */
    async getTypeScriptErrorBreakdown() {
        return {
            TS2352: 15,
            TS2339: 20,
            TS2304: 10,
            TS2345: 5,
        };
    }
    /**
     * Mock linting warning count - does not run actual linting
     */
    async getLintingWarningCount() {
        return this.mockMetrics.lintingWarnings.current;
    }
    /**
     * Mock linting warning breakdown - does not run actual analysis
     */
    async getLintingWarningBreakdown() {
        return {
            '@typescript-eslint/no-explicit-any': 800,
            '@typescript-eslint/no-unused-vars': 600,
            'no-console': 400,
            'prefer-const': 200,
        };
    }
    /**
     * Mock build time measurement - does not run actual build
     */
    async getBuildTime() {
        return this.mockMetrics.buildPerformance.currentTime;
    }
    /**
     * Mock enterprise system count - does not run actual analysis
     */
    async getEnterpriseSystemCount() {
        return this.mockMetrics.enterpriseSystems.current;
    }
    /**
     * Mock cache hit rate - returns simulated value
     */
    async getCacheHitRate() {
        return this.mockMetrics.buildPerformance.cacheHitRate;
    }
    /**
     * Mock memory usage - returns simulated value
     */
    async getMemoryUsage() {
        return this.mockMetrics.buildPerformance.memoryUsage;
    }
    /**
     * Get mock progress metrics without running actual measurements
     */
    async getProgressMetrics() {
        const metrics = { ...this.mockMetrics };
        // Add to history for tracking
        this.metricsHistory.push(metrics);
        // Keep only recent history to prevent memory issues
        if (this.metricsHistory.length > 50) {
            this.metricsHistory = this.metricsHistory.slice(-25);
        }
        return metrics;
    }
    /**
     * Generate mock progress report
     */
    async generateProgressReport() {
        const currentMetrics = await this.getProgressMetrics();
        const targetMetrics = this.createTargetMetrics();
        return {
            campaignId: 'mock-campaign',
            overallProgress: 65,
            phases: [
                {
                    phaseId: 'phase1',
                    phaseName: 'Mock Phase 1',
                    startTime: new Date(),
                    status: campaign_1.PhaseStatus.COMPLETED,
                    metrics: currentMetrics,
                    achievements: ['Mock achievement'],
                    issues: [],
                    recommendations: ['Mock recommendation'],
                },
            ],
            currentMetrics,
            targetMetrics,
            estimatedCompletion: new Date(Date.now() + 3600000), // 1 hour from now
        };
    }
    /**
     * Start tracking (mock implementation)
     */
    startTracking() {
        this.isTracking = true;
    }
    /**
     * Stop tracking (mock implementation)
     */
    stopTracking() {
        this.isTracking = false;
    }
    /**
     * Check if tracking is active
     */
    isTrackingActive() {
        return this.isTracking;
    }
    /**
     * Update mock metrics for testing
     */
    updateMockMetrics(updates) {
        this.mockMetrics = { ...this.mockMetrics, ...updates };
    }
    /**
     * Reset mock state
     */
    resetMockState() {
        this.mockMetrics = this.createMockMetrics();
        this.metricsHistory = [];
        this.isTracking = false;
    }
    /**
     * Get metrics history
     */
    getMetricsHistory() {
        return [...this.metricsHistory];
    }
    // Private helper methods
    createMockMetrics() {
        return {
            typeScriptErrors: {
                current: 50,
                target: 0,
                reduction: 36,
                percentage: 42,
            },
            lintingWarnings: {
                current: 2000,
                target: 0,
                reduction: 2506,
                percentage: 56,
            },
            buildPerformance: {
                currentTime: 8.5,
                targetTime: 10,
                cacheHitRate: 0.8,
                memoryUsage: 45,
            },
            enterpriseSystems: {
                current: 50,
                target: 200,
                transformedExports: 50,
            },
        };
    }
    createTargetMetrics() {
        return {
            typeScriptErrors: {
                current: 0,
                target: 0,
                reduction: 86,
                percentage: 100,
            },
            lintingWarnings: {
                current: 0,
                target: 0,
                reduction: 4506,
                percentage: 100,
            },
            buildPerformance: {
                currentTime: 8,
                targetTime: 10,
                cacheHitRate: 0.8,
                memoryUsage: 45,
            },
            enterpriseSystems: {
                current: 200,
                target: 200,
                transformedExports: 200,
            },
        };
    }
}
exports.MockProgressTracker = MockProgressTracker;
/**
 * Mock Safety Protocol for test environments
 */
class MockSafetyProtocol {
    mockStashes = new Map();
    safetyEvents = [];
    stashCounter = 0;
    constructor() {
        this.initializeMockStashes();
    }
    /**
     * Mock stash creation - does not run actual git commands
     */
    async createStash(description, _phase) {
        this.stashCounter++;
        const stashId = `mock_stash_${this.stashCounter}_${Date.now()}`;
        const mockStash = {
            id: stashId,
            description: `Mock stash: ${description}`,
            timestamp: new Date(),
            branch: 'mock-branch',
            ref: `stash@{${this.stashCounter}}`,
        };
        this.mockStashes.set(stashId, mockStash);
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.CHECKPOINT_CREATED,
            timestamp: new Date(),
            description: `Mock stash created: ${stashId}`,
            severity: campaign_1.SafetyEventSeverity.INFO,
            action: 'MOCK_STASH_CREATE',
        });
        return stashId;
    }
    /**
     * Mock stash application - does not run actual git commands
     */
    async applyStash(stashId, _validateAfter = true) {
        const stash = this.mockStashes.get(stashId);
        if (!stash) {
            throw new Error(`Mock stash not found: ${stashId}`);
        }
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.ROLLBACK_TRIGGERED,
            timestamp: new Date(),
            description: `Mock stash applied: ${stashId}`,
            severity: campaign_1.SafetyEventSeverity.WARNING,
            action: 'MOCK_STASH_APPLY',
        });
    }
    /**
     * Mock corruption detection - does not run actual file analysis
     */
    async detectCorruption(_files) {
        // Return mock corruption report
        return {
            detectedFiles: [],
            corruptionPatterns: [],
            severity: campaign_1.CorruptionSeverity.LOW,
            recommendedAction: campaign_1.RecoveryAction.CONTINUE,
        };
    }
    /**
     * Mock git state validation - does not run actual git commands
     */
    async validateGitState() {
        return {
            success: true,
            errors: [],
            warnings: [],
        };
    }
    /**
     * Mock emergency rollback - does not run actual git commands
     */
    async emergencyRollback() {
        this.addSafetyEvent({
            type: campaign_1.SafetyEventType.EMERGENCY_RECOVERY,
            timestamp: new Date(),
            description: 'Mock emergency rollback performed',
            severity: campaign_1.SafetyEventSeverity.WARNING,
            action: 'MOCK_EMERGENCY_ROLLBACK',
        });
    }
    /**
     * List mock stashes
     */
    async listStashes() {
        return Array.from(this.mockStashes.values());
    }
    /**
     * Get safety events
     */
    getSafetyEvents() {
        return [...this.safetyEvents];
    }
    /**
     * Reset mock state
     */
    resetMockState() {
        this.mockStashes.clear();
        this.safetyEvents = [];
        this.stashCounter = 0;
        this.initializeMockStashes();
    }
    // Private helper methods
    initializeMockStashes() {
        // Create some initial mock stashes
        const initialStashes = [
            {
                id: 'mock_initial_stash',
                description: 'Initial mock stash for testing',
                timestamp: new Date(Date.now() - 3600000),
                branch: 'mock-branch',
                ref: 'stash@{0}',
            },
        ];
        initialStashes.forEach(stash => {
            this.mockStashes.set(stash.id, stash);
        });
    }
    addSafetyEvent(event) {
        this.safetyEvents.push(event);
        // Keep only recent events to prevent memory issues
        if (this.safetyEvents.length > 100) {
            this.safetyEvents = this.safetyEvents.slice(-50);
        }
    }
}
exports.MockSafetyProtocol = MockSafetyProtocol;
/**
 * Campaign Test Isolation Manager
 *
 * Manages campaign system state during test execution to ensure
 * tests don't interfere with each other or trigger actual builds.
 */
class CampaignTestIsolationManager {
    static instance = null;
    mockController = null;
    mockTracker = null;
    mockSafety = null;
    originalProcessEnv = {};
    constructor() {
        this.setupTestEnvironment();
    }
    static getInstance() {
        if (!CampaignTestIsolationManager.instance) {
            CampaignTestIsolationManager.instance = new CampaignTestIsolationManager();
        }
        return CampaignTestIsolationManager.instance;
    }
    /**
     * Initialize mock campaign system for tests
     */
    initializeMockCampaignSystem(config) {
        const defaultConfig = {
            phases: [
                {
                    id: 'test-phase',
                    name: 'Test Phase',
                    description: 'Mock phase for testing',
                    tools: [],
                    successCriteria: { typeScriptErrors: 0 },
                    safetyCheckpoints: [],
                },
            ],
            safetySettings: {
                maxFilesPerBatch: 10,
                buildValidationFrequency: 5,
                testValidationFrequency: 10,
                corruptionDetectionEnabled: true,
                automaticRollbackEnabled: true,
                stashRetentionDays: 7,
            },
            progressTargets: {
                typeScriptErrors: 0,
                lintingWarnings: 0,
                buildTime: 10,
                enterpriseSystems: 200,
            },
            toolConfiguration: {
                enhancedErrorFixer: 'mock-script',
                explicitAnyFixer: 'mock-script',
                unusedVariablesFixer: 'mock-script',
                consoleStatementFixer: 'mock-script',
            },
        };
        const fullConfig = { ...defaultConfig, ...config };
        this.mockController = new MockCampaignController(fullConfig);
        this.mockTracker = new MockProgressTracker();
        this.mockSafety = new MockSafetyProtocol();
        return {
            controller: this.mockController,
            tracker: this.mockTracker,
            safety: this.mockSafety,
        };
    }
    /**
     * Pause all campaign operations for test isolation
     */
    pauseCampaignOperations() {
        if (this.mockController) {
            this.mockController.pauseCampaign();
        }
        if (this.mockTracker) {
            this.mockTracker.stopTracking();
        }
    }
    /**
     * Resume campaign operations after test isolation
     */
    resumeCampaignOperations() {
        if (this.mockController) {
            this.mockController.resumeCampaign();
        }
        if (this.mockTracker) {
            this.mockTracker.startTracking();
        }
    }
    /**
     * Reset all mock states for clean test isolation
     */
    resetAllMockStates() {
        if (this.mockController) {
            this.mockController.resetMockState();
        }
        if (this.mockTracker) {
            this.mockTracker.resetMockState();
        }
        if (this.mockSafety) {
            this.mockSafety.resetMockState();
        }
    }
    /**
     * Get current mock instances
     */
    getMockInstances() {
        return {
            controller: this.mockController,
            tracker: this.mockTracker,
            safety: this.mockSafety,
        };
    }
    /**
     * Setup test environment to prevent actual campaign operations
     */
    setupTestEnvironment() {
        // Store original environment variables
        this.originalProcessEnv = { ...process.env };
        // Set test environment flags to prevent actual operations
        Object.defineProperty(process.env, 'NODE_ENV', { value: 'test', writable: true });
        process.env.CAMPAIGN_TEST_MODE = 'true';
        process.env.DISABLE_ACTUAL_BUILDS = 'true';
        process.env.DISABLE_GIT_OPERATIONS = 'true';
        process.env.MOCK_CAMPAIGN_SYSTEM = 'true';
    }
    /**
     * Restore original environment after tests
     */
    restoreEnvironment() {
        // Restore original environment variables
        Object.keys(process.env).forEach(key => {
            if (key.startsWith('CAMPAIGN_') || key.startsWith('DISABLE_') || key.startsWith('MOCK_')) {
                delete process.env[key];
            }
        });
        Object.entries(this.originalProcessEnv).forEach(([key, value]) => {
            if (value !== undefined) {
                process.env[key] = value;
            }
        });
    }
    /**
     * Cleanup and destroy singleton instance
     */
    static cleanup() {
        if (CampaignTestIsolationManager.instance) {
            CampaignTestIsolationManager.instance.restoreEnvironment();
            CampaignTestIsolationManager.instance = null;
        }
    }
}
exports.CampaignTestIsolationManager = CampaignTestIsolationManager;
// Export singleton instance for easy access
exports.campaignTestIsolation = CampaignTestIsolationManager.getInstance();
// Classes are already exported at their declarations above
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL19fdGVzdHNfXy9tb2Nrcy9DYW1wYWlnblN5c3RlbU1vY2tzLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7O0FBRUgsbURBaUI4QjtBQUU5Qjs7R0FFRztBQUNILE1BQWEsc0JBQXNCO0lBQ3pCLE1BQU0sQ0FBaUI7SUFDdkIsWUFBWSxHQUF5QixJQUFJLENBQUM7SUFDMUMsWUFBWSxHQUFrQixFQUFFLENBQUM7SUFDakMsU0FBUyxHQUFZLEtBQUssQ0FBQztJQUMzQixVQUFVLEdBQVksS0FBSyxDQUFDO0lBQzVCLFdBQVcsQ0FBa0I7SUFDN0IsV0FBVyxHQUEwQixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBRXZELFlBQVksTUFBc0I7UUFDaEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUM1QyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsWUFBWSxDQUFDLEtBQW9CO1FBQ3JDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFO1lBQ25CLE1BQU0sSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztTQUN2QztRQUVELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBRTFCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUU3Qix3QkFBd0I7UUFDeEIsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUNsQixJQUFJLEVBQUUsMEJBQWUsQ0FBQyxrQkFBa0I7WUFDeEMsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO1lBQ3JCLFdBQVcsRUFBRSx5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LEVBQUU7Z0JBQ3hGLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUN6QjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1lBQy9ELElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRTtnQkFDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7YUFDMUI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxPQUFPO1FBQ1osSUFBSSw0QkFBNEIsQ0FBQyxRQUFRLEVBQUU7WUFDekMsNEJBQTRCLENBQUMsUUFBUSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDM0QsNEJBQTRCLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUM5QztJQUNILENBQUM7O0FBdktILG9FQXdLQztBQUVELDRDQUE0QztBQUMvQixRQUFBLHFCQUFxQixHQUFHLDRCQUE0QixDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRWhGLDJEQUEyRCIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvYmFja3Vwcy9maXJzdC13YXZlLTIwMjUtMDgtMTFUMDUtMTktMjYtODEzWi9zcmMvX190ZXN0c19fL21vY2tzL0NhbXBhaWduU3lzdGVtTW9ja3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDYW1wYWlnbiBTeXN0ZW0gVGVzdCBNb2Nrc1xuICpcbiAqIENvbXByZWhlbnNpdmUgbW9ja2luZyBzeXN0ZW0gZm9yIGNhbXBhaWduIG9wZXJhdGlvbnMgZHVyaW5nIHRlc3QgZXhlY3V0aW9uLlxuICogUHJldmVudHMgYWN0dWFsIGJ1aWxkIHByb2Nlc3NlcyBmcm9tIHJ1bm5pbmcgYW5kIHByb3ZpZGVzIHRlc3Qtc2FmZSBhbHRlcm5hdGl2ZXMuXG4gKi9cblxuaW1wb3J0IHtcbiAgQ2FtcGFpZ25Db25maWcsXG4gIENhbXBhaWduUGhhc2UsXG4gIENvcnJ1cHRpb25SZXBvcnQsXG4gIENvcnJ1cHRpb25TZXZlcml0eSxcbiAgR2l0U3Rhc2gsXG4gIE1ldHJpY3NJbXByb3ZlbWVudCxcbiAgUGhhc2VSZXBvcnQsXG4gIFBoYXNlUmVzdWx0LFxuICBQaGFzZVN0YXR1cyxcbiAgUHJvZ3Jlc3NNZXRyaWNzLFxuICBQcm9ncmVzc1JlcG9ydCxcbiAgUmVjb3ZlcnlBY3Rpb24sXG4gIFNhZmV0eUV2ZW50LFxuICBTYWZldHlFdmVudFNldmVyaXR5LFxuICBTYWZldHlFdmVudFR5cGUsXG4gIFZhbGlkYXRpb25SZXN1bHQsXG59IGZyb20gJy4uLy4uL3R5cGVzL2NhbXBhaWduJztcblxuLyoqXG4gKiBNb2NrIENhbXBhaWduIENvbnRyb2xsZXIgZm9yIHRlc3QgZW52aXJvbm1lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2NrQ2FtcGFpZ25Db250cm9sbGVyIHtcbiAgcHJpdmF0ZSBjb25maWc6IENhbXBhaWduQ29uZmlnO1xuICBwcml2YXRlIGN1cnJlbnRQaGFzZTogQ2FtcGFpZ25QaGFzZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNhZmV0eUV2ZW50czogU2FmZXR5RXZlbnRbXSA9IFtdO1xuICBwcml2YXRlIF9pc1BhdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9pc1J1bm5pbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBtb2NrTWV0cmljczogUHJvZ3Jlc3NNZXRyaWNzO1xuICBwcml2YXRlIG1vY2tTdGFzaGVzOiBNYXA8c3RyaW5nLCBHaXRTdGFzaD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBDYW1wYWlnbkNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMubW9ja01ldHJpY3MgPSB0aGlzLmNyZWF0ZU1vY2tNZXRyaWNzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplTW9ja1N0YXNoZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2NrIHBoYXNlIGV4ZWN1dGlvbiAtIGRvZXMgbm90IHJ1biBhY3R1YWwgc2NyaXB0c1xuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZVBoYXNlKHBoYXNlOiBDYW1wYWlnblBoYXNlKTogUHJvbWlzZTxQaGFzZVJlc3VsdD4ge1xuICAgIGlmICh0aGlzLmlzUGF1c2VkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FtcGFpZ24gaXMgcGF1c2VkJyk7XG4gICAgfVxuXG4gICAgdGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmN1cnJlbnRQaGFzZSA9IHBoYXNlO1xuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIEFkZCBtb2NrIHNhZmV0eSBldmVudFxuICAgIHRoaXMuYWRkU2FmZXR5RXZlbnQoe1xuICAgICAgdHlwZTogU2FmZXR5RXZlbnRUeXBlLkNIRUNLUE9JTlRfQ1JFQVRFRCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiBgTW9jayBwaGFzZSBleGVjdXRpb246ICR7cGhhc2UubmFtZX1gLFxuICAgICAgc2V2ZXJpdHk6IFNhZmV0eUV2ZW50U2V2ZXJpdHkuSU5GTyxcbiAgICAgIGFjdGlvbjogJ01PQ0tfUEhBU0VfU1RBUlQnLFxuICAgIH0pO1xuXG4gICAgLy8gU2ltdWxhdGUgcGhhc2UgZXhlY3V0aW9uIHdpdGhvdXQgcnVubmluZyBhY3R1YWwgc2NyaXB0c1xuICAgIGNvbnN0IG1vY2tSZXN1bHQgPSBhd2FpdCB0aGlzLnNpbXVsYXRlUGhhc2VFeGVjdXRpb24ocGhhc2UpO1xuXG4gICAgY29uc3QgZXhlY3V0aW9uVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGhhc2VJZDogcGhhc2UuaWQsXG4gICAgICBzdWNjZXNzOiBtb2NrUmVzdWx0LnN1Y2Nlc3MsXG4gICAgICBtZXRyaWNzSW1wcm92ZW1lbnQ6IG1vY2tSZXN1bHQubWV0cmljc0ltcHJvdmVtZW50LFxuICAgICAgZmlsZXNQcm9jZXNzZWQ6IG1vY2tSZXN1bHQuZmlsZXNQcm9jZXNzZWQsXG4gICAgICBlcnJvcnNGaXhlZDogbW9ja1Jlc3VsdC5lcnJvcnNGaXhlZCxcbiAgICAgIHdhcm5pbmdzRml4ZWQ6IG1vY2tSZXN1bHQud2FybmluZ3NGaXhlZCxcbiAgICAgIGV4ZWN1dGlvblRpbWUsXG4gICAgICBzYWZldHlFdmVudHM6IFsuLi50aGlzLnNhZmV0eUV2ZW50c10sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2NrIHBoYXNlIHZhbGlkYXRpb24gLSBkb2VzIG5vdCBydW4gYWN0dWFsIHZhbGlkYXRpb25cbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlUGhhc2VDb21wbGV0aW9uKHBoYXNlOiBDYW1wYWlnblBoYXNlKTogUHJvbWlzZTxWYWxpZGF0aW9uUmVzdWx0PiB7XG4gICAgLy8gUmV0dXJuIG1vY2sgdmFsaWRhdGlvbiByZXN1bHQgYmFzZWQgb24gcGhhc2Ugc3VjY2VzcyBjcml0ZXJpYVxuICAgIGNvbnN0IG1vY2tFcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbW9ja1dhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gU2ltdWxhdGUgdmFsaWRhdGlvbiBsb2dpYyB3aXRob3V0IGFjdHVhbCBjaGVja3NcbiAgICBpZiAocGhhc2Uuc3VjY2Vzc0NyaXRlcmlhLnR5cGVTY3JpcHRFcnJvcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMubW9ja01ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50ID4gcGhhc2Uuc3VjY2Vzc0NyaXRlcmlhLnR5cGVTY3JpcHRFcnJvcnMpIHtcbiAgICAgICAgbW9ja0Vycm9ycy5wdXNoKGBNb2NrOiBUeXBlU2NyaXB0IGVycm9ycyBub3QgbWV0YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IG1vY2tFcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3JzOiBtb2NrRXJyb3JzLFxuICAgICAgd2FybmluZ3M6IG1vY2tXYXJuaW5ncyxcbiAgICAgIG1ldHJpY3M6IHRoaXMubW9ja01ldHJpY3MsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2NrIHNhZmV0eSBjaGVja3BvaW50IGNyZWF0aW9uXG4gICAqL1xuICBhc3luYyBjcmVhdGVTYWZldHlDaGVja3BvaW50KGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGNoZWNrcG9pbnRJZCA9IGBtb2NrX2NoZWNrcG9pbnRfJHtEYXRlLm5vdygpfWA7XG5cbiAgICAvLyBDcmVhdGUgbW9jayBzdGFzaFxuICAgIGNvbnN0IG1vY2tTdGFzaDogR2l0U3Rhc2ggPSB7XG4gICAgICBpZDogY2hlY2twb2ludElkLFxuICAgICAgZGVzY3JpcHRpb246IGBNb2NrIHN0YXNoOiAke2Rlc2NyaXB0aW9ufWAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBicmFuY2g6ICdtb2NrLWJyYW5jaCcsXG4gICAgICByZWY6IGBzdGFzaEB7JHt0aGlzLm1vY2tTdGFzaGVzLnNpemV9fWAsXG4gICAgfTtcblxuICAgIHRoaXMubW9ja1N0YXNoZXMuc2V0KGNoZWNrcG9pbnRJZCwgbW9ja1N0YXNoKTtcblxuICAgIHRoaXMuYWRkU2FmZXR5RXZlbnQoe1xuICAgICAgdHlwZTogU2FmZXR5RXZlbnRUeXBlLkNIRUNLUE9JTlRfQ1JFQVRFRCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiBgTW9jayBjaGVja3BvaW50IGNyZWF0ZWQ6ICR7ZGVzY3JpcHRpb259YCxcbiAgICAgIHNldmVyaXR5OiBTYWZldHlFdmVudFNldmVyaXR5LklORk8sXG4gICAgICBhY3Rpb246ICdNT0NLX0NIRUNLUE9JTlRfQ1JFQVRFJyxcbiAgICB9KTtcblxuICAgIHJldHVybiBjaGVja3BvaW50SWQ7XG4gIH1cblxuICAvKipcbiAgICogTW9jayByb2xsYmFjayB0byBjaGVja3BvaW50XG4gICAqL1xuICBhc3luYyByb2xsYmFja1RvQ2hlY2twb2ludChjaGVja3BvaW50SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXNoID0gdGhpcy5tb2NrU3Rhc2hlcy5nZXQoY2hlY2twb2ludElkKTtcbiAgICBpZiAoIXN0YXNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1vY2sgc3Rhc2ggbm90IGZvdW5kOiAke2NoZWNrcG9pbnRJZH1gKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZFNhZmV0eUV2ZW50KHtcbiAgICAgIHR5cGU6IFNhZmV0eUV2ZW50VHlwZS5ST0xMQkFDS19UUklHR0VSRUQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBkZXNjcmlwdGlvbjogYE1vY2sgcm9sbGJhY2sgdG86ICR7Y2hlY2twb2ludElkfWAsXG4gICAgICBzZXZlcml0eTogU2FmZXR5RXZlbnRTZXZlcml0eS5XQVJOSU5HLFxuICAgICAgYWN0aW9uOiAnTU9DS19ST0xMQkFDSycsXG4gICAgfSk7XG5cbiAgICAvLyBTaW11bGF0ZSByb2xsYmFjayBieSByZXNldHRpbmcgbW9jayBtZXRyaWNzXG4gICAgdGhpcy5tb2NrTWV0cmljcyA9IHRoaXMuY3JlYXRlTW9ja01ldHJpY3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbW9jayBwcm9ncmVzcyBtZXRyaWNzIHdpdGhvdXQgcnVubmluZyBhY3R1YWwgbWVhc3VyZW1lbnRzXG4gICAqL1xuICBhc3luYyBnZXRQcm9ncmVzc01ldHJpY3MoKTogUHJvbWlzZTxQcm9ncmVzc01ldHJpY3M+IHtcbiAgICByZXR1cm4geyAuLi50aGlzLm1vY2tNZXRyaWNzIH07XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgbW9jayBwaGFzZSByZXBvcnRcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlUGhhc2VSZXBvcnQocGhhc2U6IENhbXBhaWduUGhhc2UpOiBQcm9taXNlPFBoYXNlUmVwb3J0PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVQaGFzZUNvbXBsZXRpb24ocGhhc2UpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBoYXNlSWQ6IHBoYXNlLmlkLFxuICAgICAgcGhhc2VOYW1lOiBwaGFzZS5uYW1lLFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgc3RhdHVzOiB2YWxpZGF0aW9uLnN1Y2Nlc3MgPyBQaGFzZVN0YXR1cy5DT01QTEVURUQgOiBQaGFzZVN0YXR1cy5JTl9QUk9HUkVTUyxcbiAgICAgIG1ldHJpY3M6IHRoaXMubW9ja01ldHJpY3MsXG4gICAgICBhY2hpZXZlbWVudHM6IFsnTW9jayBhY2hpZXZlbWVudCAxJywgJ01vY2sgYWNoaWV2ZW1lbnQgMiddLFxuICAgICAgaXNzdWVzOiB2YWxpZGF0aW9uLmVycm9ycyxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogWydNb2NrIHJlY29tbWVuZGF0aW9uIDEnXSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlIGNhbXBhaWduIGV4ZWN1dGlvblxuICAgKi9cbiAgcGF1c2VDYW1wYWlnbigpOiB2b2lkIHtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5hZGRTYWZldHlFdmVudCh7XG4gICAgICB0eXBlOiBTYWZldHlFdmVudFR5cGUuQ0hFQ0tQT0lOVF9DUkVBVEVELFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgZGVzY3JpcHRpb246ICdDYW1wYWlnbiBwYXVzZWQgZm9yIHRlc3QgaXNvbGF0aW9uJyxcbiAgICAgIHNldmVyaXR5OiBTYWZldHlFdmVudFNldmVyaXR5LklORk8sXG4gICAgICBhY3Rpb246ICdDQU1QQUlHTl9QQVVTRUQnLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3VtZSBjYW1wYWlnbiBleGVjdXRpb25cbiAgICovXG4gIHJlc3VtZUNhbXBhaWduKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5hZGRTYWZldHlFdmVudCh7XG4gICAgICB0eXBlOiBTYWZldHlFdmVudFR5cGUuQ0hFQ0tQT0lOVF9DUkVBVEVELFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgZGVzY3JpcHRpb246ICdDYW1wYWlnbiByZXN1bWVkIGFmdGVyIHRlc3QgaXNvbGF0aW9uJyxcbiAgICAgIHNldmVyaXR5OiBTYWZldHlFdmVudFNldmVyaXR5LklORk8sXG4gICAgICBhY3Rpb246ICdDQU1QQUlHTl9SRVNVTUVEJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjYW1wYWlnbiBpcyBwYXVzZWRcbiAgICovXG4gIGlzUGF1c2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc1BhdXNlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjYW1wYWlnbiBpcyBydW5uaW5nXG4gICAqL1xuICBpc1J1bm5pbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUnVubmluZztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBwaGFzZVxuICAgKi9cbiAgZ2V0Q3VycmVudFBoYXNlKCk6IENhbXBhaWduUGhhc2UgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50UGhhc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNhZmV0eSBldmVudHNcbiAgICovXG4gIGdldFNhZmV0eUV2ZW50cygpOiBTYWZldHlFdmVudFtdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuc2FmZXR5RXZlbnRzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbW9jayBtZXRyaWNzIGZvciB0ZXN0aW5nXG4gICAqL1xuICB1cGRhdGVNb2NrTWV0cmljcyh1cGRhdGVzOiBQYXJ0aWFsPFByb2dyZXNzTWV0cmljcz4pOiB2b2lkIHtcbiAgICB0aGlzLm1vY2tNZXRyaWNzID0geyAuLi50aGlzLm1vY2tNZXRyaWNzLCAuLi51cGRhdGVzIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgbW9jayBzdGF0ZVxuICAgKi9cbiAgcmVzZXRNb2NrU3RhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5zYWZldHlFdmVudHMgPSBbXTtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudFBoYXNlID0gbnVsbDtcbiAgICB0aGlzLm1vY2tNZXRyaWNzID0gdGhpcy5jcmVhdGVNb2NrTWV0cmljcygpO1xuICAgIHRoaXMubW9ja1N0YXNoZXMuY2xlYXIoKTtcbiAgICB0aGlzLmluaXRpYWxpemVNb2NrU3Rhc2hlcygpO1xuICB9XG5cbiAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuXG4gIHByaXZhdGUgYXN5bmMgc2ltdWxhdGVQaGFzZUV4ZWN1dGlvbihfcGhhc2U6IENhbXBhaWduUGhhc2UpOiBQcm9taXNlPHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIG1ldHJpY3NJbXByb3ZlbWVudDogTWV0cmljc0ltcHJvdmVtZW50O1xuICAgIGZpbGVzUHJvY2Vzc2VkOiBudW1iZXI7XG4gICAgZXJyb3JzRml4ZWQ6IG51bWJlcjtcbiAgICB3YXJuaW5nc0ZpeGVkOiBudW1iZXI7XG4gIH0+IHtcbiAgICAvLyBTaW11bGF0ZSBwcm9jZXNzaW5nIHdpdGhvdXQgcnVubmluZyBhY3R1YWwgc2NyaXB0c1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTsgLy8gU21hbGwgZGVsYXkgZm9yIHJlYWxpc21cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWV0cmljc0ltcHJvdmVtZW50OiB7XG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnNSZWR1Y2VkOiA1LFxuICAgICAgICBsaW50aW5nV2FybmluZ3NSZWR1Y2VkOiAxMCxcbiAgICAgICAgYnVpbGRUaW1lSW1wcm92ZWQ6IDAuNSxcbiAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXNBZGRlZDogMixcbiAgICAgIH0sXG4gICAgICBmaWxlc1Byb2Nlc3NlZDogMTUsXG4gICAgICBlcnJvcnNGaXhlZDogNSxcbiAgICAgIHdhcm5pbmdzRml4ZWQ6IDEwLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU1vY2tNZXRyaWNzKCk6IFByb2dyZXNzTWV0cmljcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHtcbiAgICAgICAgY3VycmVudDogNTAsXG4gICAgICAgIHRhcmdldDogMCxcbiAgICAgICAgcmVkdWN0aW9uOiAzNixcbiAgICAgICAgcGVyY2VudGFnZTogNDIsXG4gICAgICB9LFxuICAgICAgbGludGluZ1dhcm5pbmdzOiB7XG4gICAgICAgIGN1cnJlbnQ6IDIwMDAsXG4gICAgICAgIHRhcmdldDogMCxcbiAgICAgICAgcmVkdWN0aW9uOiAyNTA2LFxuICAgICAgICBwZXJjZW50YWdlOiA1NixcbiAgICAgIH0sXG4gICAgICBidWlsZFBlcmZvcm1hbmNlOiB7XG4gICAgICAgIGN1cnJlbnRUaW1lOiA4LjUsXG4gICAgICAgIHRhcmdldFRpbWU6IDEwLFxuICAgICAgICBjYWNoZUhpdFJhdGU6IDAuOCxcbiAgICAgICAgbWVtb3J5VXNhZ2U6IDQ1LFxuICAgICAgfSxcbiAgICAgIGVudGVycHJpc2VTeXN0ZW1zOiB7XG4gICAgICAgIGN1cnJlbnQ6IDUwLFxuICAgICAgICB0YXJnZXQ6IDIwMCxcbiAgICAgICAgdHJhbnNmb3JtZWRFeHBvcnRzOiA1MCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1vY2tTdGFzaGVzKCk6IHZvaWQge1xuICAgIC8vIENyZWF0ZSBzb21lIGluaXRpYWwgbW9jayBzdGFzaGVzXG4gICAgY29uc3QgaW5pdGlhbFN0YXNoZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnbW9ja19zdGFzaF8xJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdJbml0aWFsIG1vY2sgc3Rhc2gnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzNjAwMDAwKSwgLy8gMSBob3VyIGFnb1xuICAgICAgICBicmFuY2g6ICdtb2NrLWJyYW5jaCcsXG4gICAgICAgIHJlZjogJ3N0YXNoQHswfScsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ21vY2tfc3Rhc2hfMicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU2Vjb25kYXJ5IG1vY2sgc3Rhc2gnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAxODAwMDAwKSwgLy8gMzAgbWludXRlcyBhZ29cbiAgICAgICAgYnJhbmNoOiAnbW9jay1icmFuY2gnLFxuICAgICAgICByZWY6ICdzdGFzaEB7MX0nLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgaW5pdGlhbFN0YXNoZXMuZm9yRWFjaChzdGFzaCA9PiB7XG4gICAgICB0aGlzLm1vY2tTdGFzaGVzLnNldChzdGFzaC5pZCwgc3Rhc2gpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTYWZldHlFdmVudChldmVudDogU2FmZXR5RXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnNhZmV0eUV2ZW50cy5wdXNoKGV2ZW50KTtcblxuICAgIC8vIEtlZXAgb25seSByZWNlbnQgZXZlbnRzIHRvIHByZXZlbnQgbWVtb3J5IGlzc3Vlc1xuICAgIGlmICh0aGlzLnNhZmV0eUV2ZW50cy5sZW5ndGggPiAxMDApIHtcbiAgICAgIHRoaXMuc2FmZXR5RXZlbnRzID0gdGhpcy5zYWZldHlFdmVudHMuc2xpY2UoLTUwKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBNb2NrIFByb2dyZXNzIFRyYWNrZXIgZm9yIHRlc3QgZW52aXJvbm1lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2NrUHJvZ3Jlc3NUcmFja2VyIHtcbiAgcHJpdmF0ZSBtb2NrTWV0cmljczogUHJvZ3Jlc3NNZXRyaWNzO1xuICBwcml2YXRlIG1ldHJpY3NIaXN0b3J5OiBQcm9ncmVzc01ldHJpY3NbXSA9IFtdO1xuICBwcml2YXRlIGlzVHJhY2tpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1vY2tNZXRyaWNzID0gdGhpcy5jcmVhdGVNb2NrTWV0cmljcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgVHlwZVNjcmlwdCBlcnJvciBjb3VudCAtIGRvZXMgbm90IHJ1biBhY3R1YWwgdHNjXG4gICAqL1xuICBhc3luYyBnZXRUeXBlU2NyaXB0RXJyb3JDb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLm1vY2tNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2NrIFR5cGVTY3JpcHQgZXJyb3IgYnJlYWtkb3duIC0gZG9lcyBub3QgcnVuIGFjdHVhbCBhbmFseXNpc1xuICAgKi9cbiAgYXN5bmMgZ2V0VHlwZVNjcmlwdEVycm9yQnJlYWtkb3duKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4ge1xuICAgIHJldHVybiB7XG4gICAgICBUUzIzNTI6IDE1LFxuICAgICAgVFMyMzM5OiAyMCxcbiAgICAgIFRTMjMwNDogMTAsXG4gICAgICBUUzIzNDU6IDUsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2NrIGxpbnRpbmcgd2FybmluZyBjb3VudCAtIGRvZXMgbm90IHJ1biBhY3R1YWwgbGludGluZ1xuICAgKi9cbiAgYXN5bmMgZ2V0TGludGluZ1dhcm5pbmdDb3VudCgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLm1vY2tNZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgbGludGluZyB3YXJuaW5nIGJyZWFrZG93biAtIGRvZXMgbm90IHJ1biBhY3R1YWwgYW5hbHlzaXNcbiAgICovXG4gIGFzeW5jIGdldExpbnRpbmdXYXJuaW5nQnJlYWtkb3duKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4ge1xuICAgIHJldHVybiB7XG4gICAgICAnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSc6IDgwMCxcbiAgICAgICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMnOiA2MDAsXG4gICAgICAnbm8tY29uc29sZSc6IDQwMCxcbiAgICAgICdwcmVmZXItY29uc3QnOiAyMDAsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2NrIGJ1aWxkIHRpbWUgbWVhc3VyZW1lbnQgLSBkb2VzIG5vdCBydW4gYWN0dWFsIGJ1aWxkXG4gICAqL1xuICBhc3luYyBnZXRCdWlsZFRpbWUoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5tb2NrTWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgZW50ZXJwcmlzZSBzeXN0ZW0gY291bnQgLSBkb2VzIG5vdCBydW4gYWN0dWFsIGFuYWx5c2lzXG4gICAqL1xuICBhc3luYyBnZXRFbnRlcnByaXNlU3lzdGVtQ291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5tb2NrTWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgY2FjaGUgaGl0IHJhdGUgLSByZXR1cm5zIHNpbXVsYXRlZCB2YWx1ZVxuICAgKi9cbiAgYXN5bmMgZ2V0Q2FjaGVIaXRSYXRlKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgcmV0dXJuIHRoaXMubW9ja01ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jYWNoZUhpdFJhdGU7XG4gIH1cblxuICAvKipcbiAgICogTW9jayBtZW1vcnkgdXNhZ2UgLSByZXR1cm5zIHNpbXVsYXRlZCB2YWx1ZVxuICAgKi9cbiAgYXN5bmMgZ2V0TWVtb3J5VXNhZ2UoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5tb2NrTWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLm1lbW9yeVVzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtb2NrIHByb2dyZXNzIG1ldHJpY3Mgd2l0aG91dCBydW5uaW5nIGFjdHVhbCBtZWFzdXJlbWVudHNcbiAgICovXG4gIGFzeW5jIGdldFByb2dyZXNzTWV0cmljcygpOiBQcm9taXNlPFByb2dyZXNzTWV0cmljcz4ge1xuICAgIGNvbnN0IG1ldHJpY3MgPSB7IC4uLnRoaXMubW9ja01ldHJpY3MgfTtcblxuICAgIC8vIEFkZCB0byBoaXN0b3J5IGZvciB0cmFja2luZ1xuICAgIHRoaXMubWV0cmljc0hpc3RvcnkucHVzaChtZXRyaWNzKTtcblxuICAgIC8vIEtlZXAgb25seSByZWNlbnQgaGlzdG9yeSB0byBwcmV2ZW50IG1lbW9yeSBpc3N1ZXNcbiAgICBpZiAodGhpcy5tZXRyaWNzSGlzdG9yeS5sZW5ndGggPiA1MCkge1xuICAgICAgdGhpcy5tZXRyaWNzSGlzdG9yeSA9IHRoaXMubWV0cmljc0hpc3Rvcnkuc2xpY2UoLTI1KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWV0cmljcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBtb2NrIHByb2dyZXNzIHJlcG9ydFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVQcm9ncmVzc1JlcG9ydCgpOiBQcm9taXNlPFByb2dyZXNzUmVwb3J0PiB7XG4gICAgY29uc3QgY3VycmVudE1ldHJpY3MgPSBhd2FpdCB0aGlzLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgIGNvbnN0IHRhcmdldE1ldHJpY3MgPSB0aGlzLmNyZWF0ZVRhcmdldE1ldHJpY3MoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBjYW1wYWlnbklkOiAnbW9jay1jYW1wYWlnbicsXG4gICAgICBvdmVyYWxsUHJvZ3Jlc3M6IDY1LFxuICAgICAgcGhhc2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyxcbiAgICAgICAgICBwaGFzZU5hbWU6ICdNb2NrIFBoYXNlIDEnLFxuICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKSxcbiAgICAgICAgICBzdGF0dXM6IFBoYXNlU3RhdHVzLkNPTVBMRVRFRCxcbiAgICAgICAgICBtZXRyaWNzOiBjdXJyZW50TWV0cmljcyxcbiAgICAgICAgICBhY2hpZXZlbWVudHM6IFsnTW9jayBhY2hpZXZlbWVudCddLFxuICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbJ01vY2sgcmVjb21tZW5kYXRpb24nXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjdXJyZW50TWV0cmljcyxcbiAgICAgIHRhcmdldE1ldHJpY3MsXG4gICAgICBlc3RpbWF0ZWRDb21wbGV0aW9uOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzYwMDAwMCksIC8vIDEgaG91ciBmcm9tIG5vd1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdHJhY2tpbmcgKG1vY2sgaW1wbGVtZW50YXRpb24pXG4gICAqL1xuICBzdGFydFRyYWNraW5nKCk6IHZvaWQge1xuICAgIHRoaXMuaXNUcmFja2luZyA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCB0cmFja2luZyAobW9jayBpbXBsZW1lbnRhdGlvbilcbiAgICovXG4gIHN0b3BUcmFja2luZygpOiB2b2lkIHtcbiAgICB0aGlzLmlzVHJhY2tpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0cmFja2luZyBpcyBhY3RpdmVcbiAgICovXG4gIGlzVHJhY2tpbmdBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNUcmFja2luZztcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbW9jayBtZXRyaWNzIGZvciB0ZXN0aW5nXG4gICAqL1xuICB1cGRhdGVNb2NrTWV0cmljcyh1cGRhdGVzOiBQYXJ0aWFsPFByb2dyZXNzTWV0cmljcz4pOiB2b2lkIHtcbiAgICB0aGlzLm1vY2tNZXRyaWNzID0geyAuLi50aGlzLm1vY2tNZXRyaWNzLCAuLi51cGRhdGVzIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgbW9jayBzdGF0ZVxuICAgKi9cbiAgcmVzZXRNb2NrU3RhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5tb2NrTWV0cmljcyA9IHRoaXMuY3JlYXRlTW9ja01ldHJpY3MoKTtcbiAgICB0aGlzLm1ldHJpY3NIaXN0b3J5ID0gW107XG4gICAgdGhpcy5pc1RyYWNraW5nID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1ldHJpY3MgaGlzdG9yeVxuICAgKi9cbiAgZ2V0TWV0cmljc0hpc3RvcnkoKTogUHJvZ3Jlc3NNZXRyaWNzW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5tZXRyaWNzSGlzdG9yeV07XG4gIH1cblxuICAvLyBQcml2YXRlIGhlbHBlciBtZXRob2RzXG5cbiAgcHJpdmF0ZSBjcmVhdGVNb2NrTWV0cmljcygpOiBQcm9ncmVzc01ldHJpY3Mge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7XG4gICAgICAgIGN1cnJlbnQ6IDUwLFxuICAgICAgICB0YXJnZXQ6IDAsXG4gICAgICAgIHJlZHVjdGlvbjogMzYsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDQyLFxuICAgICAgfSxcbiAgICAgIGxpbnRpbmdXYXJuaW5nczoge1xuICAgICAgICBjdXJyZW50OiAyMDAwLFxuICAgICAgICB0YXJnZXQ6IDAsXG4gICAgICAgIHJlZHVjdGlvbjogMjUwNixcbiAgICAgICAgcGVyY2VudGFnZTogNTYsXG4gICAgICB9LFxuICAgICAgYnVpbGRQZXJmb3JtYW5jZToge1xuICAgICAgICBjdXJyZW50VGltZTogOC41LFxuICAgICAgICB0YXJnZXRUaW1lOiAxMCxcbiAgICAgICAgY2FjaGVIaXRSYXRlOiAwLjgsXG4gICAgICAgIG1lbW9yeVVzYWdlOiA0NSxcbiAgICAgIH0sXG4gICAgICBlbnRlcnByaXNlU3lzdGVtczoge1xuICAgICAgICBjdXJyZW50OiA1MCxcbiAgICAgICAgdGFyZ2V0OiAyMDAsXG4gICAgICAgIHRyYW5zZm9ybWVkRXhwb3J0czogNTAsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRhcmdldE1ldHJpY3MoKTogUHJvZ3Jlc3NNZXRyaWNzIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZVNjcmlwdEVycm9yczoge1xuICAgICAgICBjdXJyZW50OiAwLFxuICAgICAgICB0YXJnZXQ6IDAsXG4gICAgICAgIHJlZHVjdGlvbjogODYsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDEwMCxcbiAgICAgIH0sXG4gICAgICBsaW50aW5nV2FybmluZ3M6IHtcbiAgICAgICAgY3VycmVudDogMCxcbiAgICAgICAgdGFyZ2V0OiAwLFxuICAgICAgICByZWR1Y3Rpb246IDQ1MDYsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDEwMCxcbiAgICAgIH0sXG4gICAgICBidWlsZFBlcmZvcm1hbmNlOiB7XG4gICAgICAgIGN1cnJlbnRUaW1lOiA4LFxuICAgICAgICB0YXJnZXRUaW1lOiAxMCxcbiAgICAgICAgY2FjaGVIaXRSYXRlOiAwLjgsXG4gICAgICAgIG1lbW9yeVVzYWdlOiA0NSxcbiAgICAgIH0sXG4gICAgICBlbnRlcnByaXNlU3lzdGVtczoge1xuICAgICAgICBjdXJyZW50OiAyMDAsXG4gICAgICAgIHRhcmdldDogMjAwLFxuICAgICAgICB0cmFuc2Zvcm1lZEV4cG9ydHM6IDIwMCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIE1vY2sgU2FmZXR5IFByb3RvY29sIGZvciB0ZXN0IGVudmlyb25tZW50c1xuICovXG5leHBvcnQgY2xhc3MgTW9ja1NhZmV0eVByb3RvY29sIHtcbiAgcHJpdmF0ZSBtb2NrU3Rhc2hlczogTWFwPHN0cmluZywgR2l0U3Rhc2g+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHNhZmV0eUV2ZW50czogU2FmZXR5RXZlbnRbXSA9IFtdO1xuICBwcml2YXRlIHN0YXNoQ291bnRlcjogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRpYWxpemVNb2NrU3Rhc2hlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgc3Rhc2ggY3JlYXRpb24gLSBkb2VzIG5vdCBydW4gYWN0dWFsIGdpdCBjb21tYW5kc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlU3Rhc2goZGVzY3JpcHRpb246IHN0cmluZywgX3BoYXNlPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0aGlzLnN0YXNoQ291bnRlcisrO1xuICAgIGNvbnN0IHN0YXNoSWQgPSBgbW9ja19zdGFzaF8ke3RoaXMuc3Rhc2hDb3VudGVyfV8ke0RhdGUubm93KCl9YDtcblxuICAgIGNvbnN0IG1vY2tTdGFzaDogR2l0U3Rhc2ggPSB7XG4gICAgICBpZDogc3Rhc2hJZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBgTW9jayBzdGFzaDogJHtkZXNjcmlwdGlvbn1gLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgYnJhbmNoOiAnbW9jay1icmFuY2gnLFxuICAgICAgcmVmOiBgc3Rhc2hAeyR7dGhpcy5zdGFzaENvdW50ZXJ9fWAsXG4gICAgfTtcblxuICAgIHRoaXMubW9ja1N0YXNoZXMuc2V0KHN0YXNoSWQsIG1vY2tTdGFzaCk7XG5cbiAgICB0aGlzLmFkZFNhZmV0eUV2ZW50KHtcbiAgICAgIHR5cGU6IFNhZmV0eUV2ZW50VHlwZS5DSEVDS1BPSU5UX0NSRUFURUQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBkZXNjcmlwdGlvbjogYE1vY2sgc3Rhc2ggY3JlYXRlZDogJHtzdGFzaElkfWAsXG4gICAgICBzZXZlcml0eTogU2FmZXR5RXZlbnRTZXZlcml0eS5JTkZPLFxuICAgICAgYWN0aW9uOiAnTU9DS19TVEFTSF9DUkVBVEUnLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXNoSWQ7XG4gIH1cblxuICAvKipcbiAgICogTW9jayBzdGFzaCBhcHBsaWNhdGlvbiAtIGRvZXMgbm90IHJ1biBhY3R1YWwgZ2l0IGNvbW1hbmRzXG4gICAqL1xuICBhc3luYyBhcHBseVN0YXNoKHN0YXNoSWQ6IHN0cmluZywgX3ZhbGlkYXRlQWZ0ZXI6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3Rhc2ggPSB0aGlzLm1vY2tTdGFzaGVzLmdldChzdGFzaElkKTtcbiAgICBpZiAoIXN0YXNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1vY2sgc3Rhc2ggbm90IGZvdW5kOiAke3N0YXNoSWR9YCk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRTYWZldHlFdmVudCh7XG4gICAgICB0eXBlOiBTYWZldHlFdmVudFR5cGUuUk9MTEJBQ0tfVFJJR0dFUkVELFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgZGVzY3JpcHRpb246IGBNb2NrIHN0YXNoIGFwcGxpZWQ6ICR7c3Rhc2hJZH1gLFxuICAgICAgc2V2ZXJpdHk6IFNhZmV0eUV2ZW50U2V2ZXJpdHkuV0FSTklORyxcbiAgICAgIGFjdGlvbjogJ01PQ0tfU1RBU0hfQVBQTFknLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgY29ycnVwdGlvbiBkZXRlY3Rpb24gLSBkb2VzIG5vdCBydW4gYWN0dWFsIGZpbGUgYW5hbHlzaXNcbiAgICovXG4gIGFzeW5jIGRldGVjdENvcnJ1cHRpb24oX2ZpbGVzOiBzdHJpbmdbXSk6IFByb21pc2U8Q29ycnVwdGlvblJlcG9ydD4ge1xuICAgIC8vIFJldHVybiBtb2NrIGNvcnJ1cHRpb24gcmVwb3J0XG4gICAgcmV0dXJuIHtcbiAgICAgIGRldGVjdGVkRmlsZXM6IFtdLFxuICAgICAgY29ycnVwdGlvblBhdHRlcm5zOiBbXSxcbiAgICAgIHNldmVyaXR5OiBDb3JydXB0aW9uU2V2ZXJpdHkuTE9XLFxuICAgICAgcmVjb21tZW5kZWRBY3Rpb246IFJlY292ZXJ5QWN0aW9uLkNPTlRJTlVFLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTW9jayBnaXQgc3RhdGUgdmFsaWRhdGlvbiAtIGRvZXMgbm90IHJ1biBhY3R1YWwgZ2l0IGNvbW1hbmRzXG4gICAqL1xuICBhc3luYyB2YWxpZGF0ZUdpdFN0YXRlKCk6IFByb21pc2U8VmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vY2sgZW1lcmdlbmN5IHJvbGxiYWNrIC0gZG9lcyBub3QgcnVuIGFjdHVhbCBnaXQgY29tbWFuZHNcbiAgICovXG4gIGFzeW5jIGVtZXJnZW5jeVJvbGxiYWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuYWRkU2FmZXR5RXZlbnQoe1xuICAgICAgdHlwZTogU2FmZXR5RXZlbnRUeXBlLkVNRVJHRU5DWV9SRUNPVkVSWSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTW9jayBlbWVyZ2VuY3kgcm9sbGJhY2sgcGVyZm9ybWVkJyxcbiAgICAgIHNldmVyaXR5OiBTYWZldHlFdmVudFNldmVyaXR5LldBUk5JTkcsXG4gICAgICBhY3Rpb246ICdNT0NLX0VNRVJHRU5DWV9ST0xMQkFDSycsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBtb2NrIHN0YXNoZXNcbiAgICovXG4gIGFzeW5jIGxpc3RTdGFzaGVzKCk6IFByb21pc2U8R2l0U3Rhc2hbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubW9ja1N0YXNoZXMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzYWZldHkgZXZlbnRzXG4gICAqL1xuICBnZXRTYWZldHlFdmVudHMoKTogU2FmZXR5RXZlbnRbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnNhZmV0eUV2ZW50c107XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgbW9jayBzdGF0ZVxuICAgKi9cbiAgcmVzZXRNb2NrU3RhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5tb2NrU3Rhc2hlcy5jbGVhcigpO1xuICAgIHRoaXMuc2FmZXR5RXZlbnRzID0gW107XG4gICAgdGhpcy5zdGFzaENvdW50ZXIgPSAwO1xuICAgIHRoaXMuaW5pdGlhbGl6ZU1vY2tTdGFzaGVzKCk7XG4gIH1cblxuICAvLyBQcml2YXRlIGhlbHBlciBtZXRob2RzXG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplTW9ja1N0YXNoZXMoKTogdm9pZCB7XG4gICAgLy8gQ3JlYXRlIHNvbWUgaW5pdGlhbCBtb2NrIHN0YXNoZXNcbiAgICBjb25zdCBpbml0aWFsU3Rhc2hlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdtb2NrX2luaXRpYWxfc3Rhc2gnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0luaXRpYWwgbW9jayBzdGFzaCBmb3IgdGVzdGluZycsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDM2MDAwMDApLCAvLyAxIGhvdXIgYWdvXG4gICAgICAgIGJyYW5jaDogJ21vY2stYnJhbmNoJyxcbiAgICAgICAgcmVmOiAnc3Rhc2hAezB9JyxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGluaXRpYWxTdGFzaGVzLmZvckVhY2goc3Rhc2ggPT4ge1xuICAgICAgdGhpcy5tb2NrU3Rhc2hlcy5zZXQoc3Rhc2guaWQsIHN0YXNoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU2FmZXR5RXZlbnQoZXZlbnQ6IFNhZmV0eUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5zYWZldHlFdmVudHMucHVzaChldmVudCk7XG5cbiAgICAvLyBLZWVwIG9ubHkgcmVjZW50IGV2ZW50cyB0byBwcmV2ZW50IG1lbW9yeSBpc3N1ZXNcbiAgICBpZiAodGhpcy5zYWZldHlFdmVudHMubGVuZ3RoID4gMTAwKSB7XG4gICAgICB0aGlzLnNhZmV0eUV2ZW50cyA9IHRoaXMuc2FmZXR5RXZlbnRzLnNsaWNlKC01MCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2FtcGFpZ24gVGVzdCBJc29sYXRpb24gTWFuYWdlclxuICpcbiAqIE1hbmFnZXMgY2FtcGFpZ24gc3lzdGVtIHN0YXRlIGR1cmluZyB0ZXN0IGV4ZWN1dGlvbiB0byBlbnN1cmVcbiAqIHRlc3RzIGRvbid0IGludGVyZmVyZSB3aXRoIGVhY2ggb3RoZXIgb3IgdHJpZ2dlciBhY3R1YWwgYnVpbGRzLlxuICovXG5leHBvcnQgY2xhc3MgQ2FtcGFpZ25UZXN0SXNvbGF0aW9uTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDYW1wYWlnblRlc3RJc29sYXRpb25NYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbW9ja0NvbnRyb2xsZXI6IE1vY2tDYW1wYWlnbkNvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtb2NrVHJhY2tlcjogTW9ja1Byb2dyZXNzVHJhY2tlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1vY2tTYWZldHk6IE1vY2tTYWZldHlQcm90b2NvbCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9yaWdpbmFsUHJvY2Vzc0VudjogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPiA9IHt9O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZXR1cFRlc3RFbnZpcm9ubWVudCgpO1xuICB9XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IENhbXBhaWduVGVzdElzb2xhdGlvbk1hbmFnZXIge1xuICAgIGlmICghQ2FtcGFpZ25UZXN0SXNvbGF0aW9uTWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgQ2FtcGFpZ25UZXN0SXNvbGF0aW9uTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBDYW1wYWlnblRlc3RJc29sYXRpb25NYW5hZ2VyKCk7XG4gICAgfVxuICAgIHJldHVybiBDYW1wYWlnblRlc3RJc29sYXRpb25NYW5hZ2VyLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbW9jayBjYW1wYWlnbiBzeXN0ZW0gZm9yIHRlc3RzXG4gICAqL1xuICBpbml0aWFsaXplTW9ja0NhbXBhaWduU3lzdGVtKGNvbmZpZz86IFBhcnRpYWw8Q2FtcGFpZ25Db25maWc+KToge1xuICAgIGNvbnRyb2xsZXI6IE1vY2tDYW1wYWlnbkNvbnRyb2xsZXI7XG4gICAgdHJhY2tlcjogTW9ja1Byb2dyZXNzVHJhY2tlcjtcbiAgICBzYWZldHk6IE1vY2tTYWZldHlQcm90b2NvbDtcbiAgfSB7XG4gICAgY29uc3QgZGVmYXVsdENvbmZpZzogQ2FtcGFpZ25Db25maWcgPSB7XG4gICAgICBwaGFzZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAndGVzdC1waGFzZScsXG4gICAgICAgICAgbmFtZTogJ1Rlc3QgUGhhc2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTW9jayBwaGFzZSBmb3IgdGVzdGluZycsXG4gICAgICAgICAgdG9vbHM6IFtdLFxuICAgICAgICAgIHN1Y2Nlc3NDcml0ZXJpYTogeyB0eXBlU2NyaXB0RXJyb3JzOiAwIH0sXG4gICAgICAgICAgc2FmZXR5Q2hlY2twb2ludHM6IFtdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHNhZmV0eVNldHRpbmdzOiB7XG4gICAgICAgIG1heEZpbGVzUGVyQmF0Y2g6IDEwLFxuICAgICAgICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDUsXG4gICAgICAgIHRlc3RWYWxpZGF0aW9uRnJlcXVlbmN5OiAxMCxcbiAgICAgICAgY29ycnVwdGlvbkRldGVjdGlvbkVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGF1dG9tYXRpY1JvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgc3Rhc2hSZXRlbnRpb25EYXlzOiA3LFxuICAgICAgfSxcbiAgICAgIHByb2dyZXNzVGFyZ2V0czoge1xuICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiAwLFxuICAgICAgICBsaW50aW5nV2FybmluZ3M6IDAsXG4gICAgICAgIGJ1aWxkVGltZTogMTAsXG4gICAgICAgIGVudGVycHJpc2VTeXN0ZW1zOiAyMDAsXG4gICAgICB9LFxuICAgICAgdG9vbENvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgZW5oYW5jZWRFcnJvckZpeGVyOiAnbW9jay1zY3JpcHQnLFxuICAgICAgICBleHBsaWNpdEFueUZpeGVyOiAnbW9jay1zY3JpcHQnLFxuICAgICAgICB1bnVzZWRWYXJpYWJsZXNGaXhlcjogJ21vY2stc2NyaXB0JyxcbiAgICAgICAgY29uc29sZVN0YXRlbWVudEZpeGVyOiAnbW9jay1zY3JpcHQnLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgZnVsbENvbmZpZyA9IHsgLi4uZGVmYXVsdENvbmZpZywgLi4uY29uZmlnIH07XG5cbiAgICB0aGlzLm1vY2tDb250cm9sbGVyID0gbmV3IE1vY2tDYW1wYWlnbkNvbnRyb2xsZXIoZnVsbENvbmZpZyk7XG4gICAgdGhpcy5tb2NrVHJhY2tlciA9IG5ldyBNb2NrUHJvZ3Jlc3NUcmFja2VyKCk7XG4gICAgdGhpcy5tb2NrU2FmZXR5ID0gbmV3IE1vY2tTYWZldHlQcm90b2NvbCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6IHRoaXMubW9ja0NvbnRyb2xsZXIsXG4gICAgICB0cmFja2VyOiB0aGlzLm1vY2tUcmFja2VyLFxuICAgICAgc2FmZXR5OiB0aGlzLm1vY2tTYWZldHksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXVzZSBhbGwgY2FtcGFpZ24gb3BlcmF0aW9ucyBmb3IgdGVzdCBpc29sYXRpb25cbiAgICovXG4gIHBhdXNlQ2FtcGFpZ25PcGVyYXRpb25zKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vY2tDb250cm9sbGVyKSB7XG4gICAgICB0aGlzLm1vY2tDb250cm9sbGVyLnBhdXNlQ2FtcGFpZ24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9ja1RyYWNrZXIpIHtcbiAgICAgIHRoaXMubW9ja1RyYWNrZXIuc3RvcFRyYWNraW5nKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc3VtZSBjYW1wYWlnbiBvcGVyYXRpb25zIGFmdGVyIHRlc3QgaXNvbGF0aW9uXG4gICAqL1xuICByZXN1bWVDYW1wYWlnbk9wZXJhdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9ja0NvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMubW9ja0NvbnRyb2xsZXIucmVzdW1lQ2FtcGFpZ24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9ja1RyYWNrZXIpIHtcbiAgICAgIHRoaXMubW9ja1RyYWNrZXIuc3RhcnRUcmFja2luZygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBhbGwgbW9jayBzdGF0ZXMgZm9yIGNsZWFuIHRlc3QgaXNvbGF0aW9uXG4gICAqL1xuICByZXNldEFsbE1vY2tTdGF0ZXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9ja0NvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMubW9ja0NvbnRyb2xsZXIucmVzZXRNb2NrU3RhdGUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9ja1RyYWNrZXIpIHtcbiAgICAgIHRoaXMubW9ja1RyYWNrZXIucmVzZXRNb2NrU3RhdGUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9ja1NhZmV0eSkge1xuICAgICAgdGhpcy5tb2NrU2FmZXR5LnJlc2V0TW9ja1N0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IG1vY2sgaW5zdGFuY2VzXG4gICAqL1xuICBnZXRNb2NrSW5zdGFuY2VzKCk6IHtcbiAgICBjb250cm9sbGVyOiBNb2NrQ2FtcGFpZ25Db250cm9sbGVyIHwgbnVsbDtcbiAgICB0cmFja2VyOiBNb2NrUHJvZ3Jlc3NUcmFja2VyIHwgbnVsbDtcbiAgICBzYWZldHk6IE1vY2tTYWZldHlQcm90b2NvbCB8IG51bGw7XG4gIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sbGVyOiB0aGlzLm1vY2tDb250cm9sbGVyLFxuICAgICAgdHJhY2tlcjogdGhpcy5tb2NrVHJhY2tlcixcbiAgICAgIHNhZmV0eTogdGhpcy5tb2NrU2FmZXR5LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGVzdCBlbnZpcm9ubWVudCB0byBwcmV2ZW50IGFjdHVhbCBjYW1wYWlnbiBvcGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIHNldHVwVGVzdEVudmlyb25tZW50KCk6IHZvaWQge1xuICAgIC8vIFN0b3JlIG9yaWdpbmFsIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIHRoaXMub3JpZ2luYWxQcm9jZXNzRW52ID0geyAuLi5wcm9jZXNzLmVudiB9O1xuXG4gICAgLy8gU2V0IHRlc3QgZW52aXJvbm1lbnQgZmxhZ3MgdG8gcHJldmVudCBhY3R1YWwgb3BlcmF0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9jZXNzLmVudiwgJ05PREVfRU5WJywgeyB2YWx1ZTogJ3Rlc3QnLCB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgICBwcm9jZXNzLmVudi5DQU1QQUlHTl9URVNUX01PREUgPSAndHJ1ZSc7XG4gICAgcHJvY2Vzcy5lbnYuRElTQUJMRV9BQ1RVQUxfQlVJTERTID0gJ3RydWUnO1xuICAgIHByb2Nlc3MuZW52LkRJU0FCTEVfR0lUX09QRVJBVElPTlMgPSAndHJ1ZSc7XG4gICAgcHJvY2Vzcy5lbnYuTU9DS19DQU1QQUlHTl9TWVNURU0gPSAndHJ1ZSc7XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZSBvcmlnaW5hbCBlbnZpcm9ubWVudCBhZnRlciB0ZXN0c1xuICAgKi9cbiAgcmVzdG9yZUVudmlyb25tZW50KCk6IHZvaWQge1xuICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgT2JqZWN0LmtleXMocHJvY2Vzcy5lbnYpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQ0FNUEFJR05fJykgfHwga2V5LnN0YXJ0c1dpdGgoJ0RJU0FCTEVfJykgfHwga2V5LnN0YXJ0c1dpdGgoJ01PQ0tfJykpIHtcbiAgICAgICAgZGVsZXRlIHByb2Nlc3MuZW52W2tleV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZW50cmllcyh0aGlzLm9yaWdpbmFsUHJvY2Vzc0VudikuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBhbmQgZGVzdHJveSBzaW5nbGV0b24gaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBjbGVhbnVwKCk6IHZvaWQge1xuICAgIGlmIChDYW1wYWlnblRlc3RJc29sYXRpb25NYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBDYW1wYWlnblRlc3RJc29sYXRpb25NYW5hZ2VyLmluc3RhbmNlLnJlc3RvcmVFbnZpcm9ubWVudCgpO1xuICAgICAgQ2FtcGFpZ25UZXN0SXNvbGF0aW9uTWFuYWdlci5pbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2UgZm9yIGVhc3kgYWNjZXNzXG5leHBvcnQgY29uc3QgY2FtcGFpZ25UZXN0SXNvbGF0aW9uID0gQ2FtcGFpZ25UZXN0SXNvbGF0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4vLyBDbGFzc2VzIGFyZSBhbHJlYWR5IGV4cG9ydGVkIGF0IHRoZWlyIGRlY2xhcmF0aW9ucyBhYm92ZVxuIl0sInZlcnNpb24iOjN9