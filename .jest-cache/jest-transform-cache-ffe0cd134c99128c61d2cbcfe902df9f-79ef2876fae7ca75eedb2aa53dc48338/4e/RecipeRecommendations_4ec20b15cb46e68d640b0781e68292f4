838ca7bbf60a6387369359837387432a
"use strict";
'use client';
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RecipeRecommendations = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const lucide_react_1 = require("lucide-react");
const cuisineRecommender_1 = require("@/utils/cuisineRecommender");
// ========== HELPER FUNCTIONS ==========
const calculateAstrologicalScore = (recipe) => {
    // Simple astrological scoring based on recipe properties
    let score = 0.5; // Base score
    // Check for astrological tags or properties
    if (recipe.tags) {
        const astrologicalTags = ['lunar', 'solar', 'planetary', 'celestial', 'zodiac'];
        const hasAstrologicalTags = recipe.tags.some(tag => astrologicalTags.some(astroTag => tag.toLowerCase().includes(astroTag)));
        if (hasAstrologicalTags)
            score += 0.2;
    }
    // Check cooking time alignment with current moment
    if (recipe.cookTime) {
        const cookTimeStr = recipe.cookTime.toLowerCase();
        const now = new Date();
        const hour = now.getHours();
        // Quick cooking for busy times, slow cooking for relaxed times
        if (hour >= 17 && hour <= 20) { // Dinner time
            if (cookTimeStr.includes('quick') || cookTimeStr.includes('15') || cookTimeStr.includes('20')) {
                score += 0.15;
            }
        }
        else if (hour >= 10 && hour <= 16) { // Relaxed time
            if (cookTimeStr.includes('slow') || cookTimeStr.includes('60') || cookTimeStr.includes('hour')) {
                score += 0.15;
            }
        }
    }
    return Math.min(1, score);
};
const scoreRecipe = (recipe, currentElementalProfile) => {
    // Calculate elemental match score
    const elementalScore = recipe.elementalProperties
        ? (0, cuisineRecommender_1.calculateElementalMatch)(recipe.elementalProperties, currentElementalProfile)
        : 0.5;
    // Calculate astrological score
    const astrologicalScore = calculateAstrologicalScore(recipe);
    // Calculate overall score (weighted combination)
    const overallScore = (elementalScore * 0.6) + (astrologicalScore * 0.4);
    // Generate scoring reasons
    const scoringReasons = [];
    if (elementalScore > 0.7) {
        scoringReasons.push(`Excellent elemental harmony (${Math.round(elementalScore * 100)}%)`);
    }
    else if (elementalScore > 0.5) {
        scoringReasons.push(`Good elemental match (${Math.round(elementalScore * 100)}%)`);
    }
    if (astrologicalScore > 0.6) {
        scoringReasons.push('Aligned with current celestial energies');
    }
    if (recipe.difficulty === 'Easy' || recipe.difficulty === 'easy') {
        scoringReasons.push('Perfect for beginners');
    }
    if (recipe.cookTime && recipe.cookTime.includes('30')) {
        scoringReasons.push('Quick preparation time');
    }
    return {
        ...recipe,
        elementalScore,
        astrologicalScore,
        overallScore,
        scoringReasons,
        matchPercentage: Math.round(overallScore * 100)
    };
};
// ========== RECIPE CARD COMPONENT ==========
const RecipeCard = ({ recipe, isExpanded, onToggle, onSelect }) => {
    const handleCardClick = (0, react_1.useCallback)((e) => {
        e.stopPropagation();
        onToggle();
    }, [onToggle]);
    const handleSelectClick = (0, react_1.useCallback)((e) => {
        e.stopPropagation();
        if (onSelect) {
            onSelect(recipe);
        }
    }, [onSelect, recipe]);
    return ((0, jsx_runtime_1.jsxs)("div", { className: "border rounded-lg p-4 bg-white hover:shadow-md transition-shadow cursor-pointer", children: [(0, jsx_runtime_1.jsxs)("div", { onClick: handleCardClick, children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-start mb-2", children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-medium text-base text-gray-900 flex-1 mr-2", children: recipe.name }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsxs)("span", { className: `text-xs px-2 py-1 rounded-full ${(0, cuisineRecommender_1.getMatchScoreClass)(recipe.overallScore)}`, children: [recipe.matchPercentage, "%"] }), isExpanded ? (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { size: 16 }) : (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { size: 16 })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4 text-sm text-gray-600 mb-2", children: [recipe.cookTime && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { size: 14 }), (0, jsx_runtime_1.jsx)("span", { children: recipe.cookTime })] })), recipe.servingSize && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { size: 14 }), (0, jsx_runtime_1.jsxs)("span", { children: [recipe.servingSize, " servings"] })] })), recipe.difficulty && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.BarChart3, { size: 14 }), (0, jsx_runtime_1.jsx)("span", { children: recipe.difficulty })] }))] }), recipe.scoringReasons.length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: "mb-2", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-1 text-xs text-blue-600", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 12 }), (0, jsx_runtime_1.jsx)("span", { children: recipe.scoringReasons[0] })] }) })), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-600 line-clamp-2 mb-2", children: recipe.description })] }), isExpanded && ((0, jsx_runtime_1.jsxs)("div", { className: "mt-4 pt-4 border-t border-gray-200", children: [recipe.description && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4", children: [(0, jsx_runtime_1.jsx)("h5", { className: "font-medium text-sm mb-2", children: "Description" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-600", children: recipe.description })] })), (0, jsx_runtime_1.jsxs)("div", { className: "mb-4", children: [(0, jsx_runtime_1.jsx)("h5", { className: "font-medium text-sm mb-2", children: "Compatibility Scores" }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-blue-50 p-2 rounded", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-xs text-blue-600 font-medium", children: "Elemental Match" }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm font-semibold text-blue-800", children: [Math.round(recipe.elementalScore * 100), "%"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-purple-50 p-2 rounded", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-xs text-purple-600 font-medium", children: "Astrological" }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm font-semibold text-purple-800", children: [Math.round(recipe.astrologicalScore * 100), "%"] })] })] })] }), recipe.scoringReasons.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4", children: [(0, jsx_runtime_1.jsx)("h5", { className: "font-medium text-sm mb-2", children: "Why This Recipe?" }), (0, jsx_runtime_1.jsx)("ul", { className: "list-disc pl-4 space-y-1", children: recipe.scoringReasons.map((reason, index) => ((0, jsx_runtime_1.jsx)("li", { className: "text-xs text-gray-600", children: reason }, index))) })] })), recipe.ingredients && Array.isArray(recipe.ingredients) && recipe.ingredients.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4", children: [(0, jsx_runtime_1.jsx)("h5", { className: "font-medium text-sm mb-2", children: "Key Ingredients" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-wrap gap-1", children: [recipe.ingredients.slice(0, 8).map((ing, index) => ((0, jsx_runtime_1.jsx)("span", { className: "text-xs bg-gray-100 px-2 py-1 rounded", children: typeof ing === 'string' ? ing : ing.name || 'ingredient' }, index))), recipe.ingredients.length > 8 && ((0, jsx_runtime_1.jsxs)("span", { className: "text-xs text-gray-500", children: ["+", recipe.ingredients.length - 8, " more"] }))] })] })), onSelect && ((0, jsx_runtime_1.jsxs)("button", { onClick: handleSelectClick, className: "w-full mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors flex items-center justify-center space-x-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { size: 16 }), (0, jsx_runtime_1.jsx)("span", { children: "Select This Recipe" })] }))] }))] }));
};
// ========== MAIN COMPONENT ==========
const RecipeRecommendations = ({ recipes, cuisineName, currentElementalProfile, maxDisplayed = 6, showExpandedByDefault = false, onRecipeSelect }) => {
    const [expandedRecipes, setExpandedRecipes] = (0, react_1.useState)({});
    const [showAllRecipes, setShowAllRecipes] = (0, react_1.useState)(false);
    // Score and sort recipes
    const scoredRecipes = (0, react_1.useMemo)(() => {
        return recipes
            .map(recipe => scoreRecipe(recipe, currentElementalProfile))
            .sort((a, b) => b.overallScore - a.overallScore);
    }, [recipes, currentElementalProfile]);
    // Determine which recipes to display
    const displayedRecipes = (0, react_1.useMemo)(() => {
        return showAllRecipes ? scoredRecipes : scoredRecipes.slice(0, maxDisplayed);
    }, [scoredRecipes, showAllRecipes, maxDisplayed]);
    const toggleRecipeExpansion = (0, react_1.useCallback)((recipeId) => {
        setExpandedRecipes(prev => ({
            ...prev,
            [recipeId]: !prev[recipeId]
        }));
    }, []);
    const toggleShowAll = (0, react_1.useCallback)(() => {
        setShowAllRecipes(prev => !prev);
    }, []);
    if (scoredRecipes.length === 0) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "text-center py-8 text-gray-500", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["No recipes found for ", cuisineName, " cuisine."] }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm mt-1", children: "Try exploring other cuisines or check back later." })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsxs)("h3", { className: "text-lg font-medium text-gray-900", children: [cuisineName, " Recipe Recommendations"] }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm text-gray-500", children: [scoredRecipes.length, " recipe", scoredRecipes.length !== 1 ? 's' : '', " found"] })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: displayedRecipes.map((recipe) => ((0, jsx_runtime_1.jsx)(RecipeCard, { recipe: recipe, isExpanded: expandedRecipes[recipe.id || recipe.name || ''] || showExpandedByDefault, onToggle: () => toggleRecipeExpansion(recipe.id || recipe.name || ''), onSelect: onRecipeSelect }, recipe.id || recipe.name))) }), scoredRecipes.length > maxDisplayed && ((0, jsx_runtime_1.jsx)("div", { className: "text-center", children: (0, jsx_runtime_1.jsx)("button", { onClick: toggleShowAll, className: "inline-flex items-center space-x-2 px-4 py-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors", children: showAllRecipes ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { size: 16 }), (0, jsx_runtime_1.jsx)("span", { children: "Show Less" })] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { size: 16 }), (0, jsx_runtime_1.jsxs)("span", { children: ["Show All ", scoredRecipes.length, " Recipes"] })] })) }) }))] }));
};
exports.RecipeRecommendations = RecipeRecommendations;
exports.default = exports.RecipeRecommendations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL1JlY2lwZVJlY29tbWVuZGF0aW9ucy50c3giLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWIsK0NBQThEO0FBQzlELCtDQVFzQjtBQUV0QixtRUFBeUY7QUFzQ3pGLHlDQUF5QztBQUV6QyxNQUFNLDBCQUEwQixHQUFHLENBQUMsTUFBa0IsRUFBVSxFQUFFO0lBQ2hFLHlEQUF5RDtJQUN6RCxJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxhQUFhO0lBRTlCLDRDQUE0QztJQUM1QyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUU7UUFDZixNQUFNLGdCQUFnQixHQUFHLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ2hGLE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FDakQsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQy9CLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQ3JDLENBQ0YsQ0FBQztRQUNGLElBQUksbUJBQW1CO1lBQUUsS0FBSyxJQUFJLEdBQUcsQ0FBQztLQUN2QztJQUVELG1EQUFtRDtJQUNuRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQUU7UUFDbkIsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNsRCxNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUU1QiwrREFBK0Q7UUFDL0QsSUFBSSxJQUFJLElBQUksRUFBRSxJQUFJLElBQUksSUFBSSxFQUFFLEVBQUUsRUFB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Z0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL2NvbXBvbmVudHMvUmVjaXBlUmVjb21tZW5kYXRpb25zLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBcbiAgQ2hldnJvbkRvd24sIFxuICBDaGV2cm9uVXAsIFxuICBDbG9jaywgXG4gIFVzZXJzLCBcbiAgQmFyQ2hhcnQzLFxuICBTdGFyLFxuICBTcGFya2xlc1xufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgRWxlbWVudGFsUHJvcGVydGllcyB9IGZyb20gJ0AvdHlwZXMvYWxjaGVteSc7XG5pbXBvcnQgeyBjYWxjdWxhdGVFbGVtZW50YWxNYXRjaCwgZ2V0TWF0Y2hTY29yZUNsYXNzIH0gZnJvbSAnQC91dGlscy9jdWlzaW5lUmVjb21tZW5kZXInO1xuXG4vLyA9PT09PT09PT09IElOVEVSRkFDRVMgPT09PT09PT09PVxuXG5pbnRlcmZhY2UgUmVjaXBlRGF0YSB7XG4gIGlkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgY3Vpc2luZT86IHN0cmluZztcbiAgbWF0Y2hQZXJjZW50YWdlPzogbnVtYmVyO1xuICBtYXRjaFNjb3JlPzogbnVtYmVyO1xuICBlbGVtZW50YWxQcm9wZXJ0aWVzPzogRWxlbWVudGFsUHJvcGVydGllcztcbiAgaW5ncmVkaWVudHM/OiB1bmtub3duW107XG4gIGluc3RydWN0aW9ucz86IHVua25vd25bXTtcbiAgY29va1RpbWU/OiBzdHJpbmc7XG4gIHByZXBUaW1lPzogc3RyaW5nO1xuICBzZXJ2aW5nU2l6ZT86IG51bWJlcjtcbiAgZGlmZmljdWx0eT86IHN0cmluZztcbiAgdGFncz86IHN0cmluZ1tdO1xuICBba2V5OiBzdHJpbmddOiB1bmtub3duO1xufVxuXG5pbnRlcmZhY2UgUmVjaXBlUmVjb21tZW5kYXRpb25zUHJvcHMge1xuICByZWNpcGVzOiBSZWNpcGVEYXRhW107XG4gIGN1aXNpbmVOYW1lOiBzdHJpbmc7XG4gIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlOiBFbGVtZW50YWxQcm9wZXJ0aWVzO1xuICBtYXhEaXNwbGF5ZWQ/OiBudW1iZXI7XG4gIHNob3dFeHBhbmRlZEJ5RGVmYXVsdD86IGJvb2xlYW47XG4gIG9uUmVjaXBlU2VsZWN0PzogKHJlY2lwZTogUmVjaXBlRGF0YSkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIFNjb3JlZFJlY2lwZSBleHRlbmRzIFJlY2lwZURhdGEge1xuICBhc3Ryb2xvZ2ljYWxTY29yZTogbnVtYmVyO1xuICBlbGVtZW50YWxTY29yZTogbnVtYmVyO1xuICBvdmVyYWxsU2NvcmU6IG51bWJlcjtcbiAgc2NvcmluZ1JlYXNvbnM6IHN0cmluZ1tdO1xufVxuXG4vLyA9PT09PT09PT09IEhFTFBFUiBGVU5DVElPTlMgPT09PT09PT09PVxuXG5jb25zdCBjYWxjdWxhdGVBc3Ryb2xvZ2ljYWxTY29yZSA9IChyZWNpcGU6IFJlY2lwZURhdGEpOiBudW1iZXIgPT4ge1xuICAvLyBTaW1wbGUgYXN0cm9sb2dpY2FsIHNjb3JpbmcgYmFzZWQgb24gcmVjaXBlIHByb3BlcnRpZXNcbiAgbGV0IHNjb3JlID0gMC41OyAvLyBCYXNlIHNjb3JlXG4gIFxuICAvLyBDaGVjayBmb3IgYXN0cm9sb2dpY2FsIHRhZ3Mgb3IgcHJvcGVydGllc1xuICBpZiAocmVjaXBlLnRhZ3MpIHtcbiAgICBjb25zdCBhc3Ryb2xvZ2ljYWxUYWdzID0gWydsdW5hcicsICdzb2xhcicsICdwbGFuZXRhcnknLCAnY2VsZXN0aWFsJywgJ3pvZGlhYyddO1xuICAgIGNvbnN0IGhhc0FzdHJvbG9naWNhbFRhZ3MgPSByZWNpcGUudGFncy5zb21lKHRhZyA9PiBcbiAgICAgIGFzdHJvbG9naWNhbFRhZ3Muc29tZShhc3Ryb1RhZyA9PiBcbiAgICAgICAgdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYXN0cm9UYWcpXG4gICAgICApXG4gICAgKTtcbiAgICBpZiAoaGFzQXN0cm9sb2dpY2FsVGFncykgc2NvcmUgKz0gMC4yO1xuICB9XG4gIFxuICAvLyBDaGVjayBjb29raW5nIHRpbWUgYWxpZ25tZW50IHdpdGggY3VycmVudCBtb21lbnRcbiAgaWYgKHJlY2lwZS5jb29rVGltZSkge1xuICAgIGNvbnN0IGNvb2tUaW1lU3RyID0gcmVjaXBlLmNvb2tUaW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBob3VyID0gbm93LmdldEhvdXJzKCk7XG4gICAgXG4gICAgLy8gUXVpY2sgY29va2luZyBmb3IgYnVzeSB0aW1lcywgc2xvdyBjb29raW5nIGZvciByZWxheGVkIHRpbWVzXG4gICAgaWYgKGhvdXIgPj0gMTcgJiYgaG91ciA8PSAyMCkgeyAvLyBEaW5uZXIgdGltZVxuICAgICAgaWYgKGNvb2tUaW1lU3RyLmluY2x1ZGVzKCdxdWljaycpIHx8IGNvb2tUaW1lU3RyLmluY2x1ZGVzKCcxNScpIHx8IGNvb2tUaW1lU3RyLmluY2x1ZGVzKCcyMCcpKSB7XG4gICAgICAgIHNjb3JlICs9IDAuMTU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChob3VyID49IDEwICYmIGhvdXIgPD0gMTYpIHsgLy8gUmVsYXhlZCB0aW1lXG4gICAgICBpZiAoY29va1RpbWVTdHIuaW5jbHVkZXMoJ3Nsb3cnKSB8fCBjb29rVGltZVN0ci5pbmNsdWRlcygnNjAnKSB8fCBjb29rVGltZVN0ci5pbmNsdWRlcygnaG91cicpKSB7XG4gICAgICAgIHNjb3JlICs9IDAuMTU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gTWF0aC5taW4oMSwgc2NvcmUpO1xufTtcblxuY29uc3Qgc2NvcmVSZWNpcGUgPSAocmVjaXBlOiBSZWNpcGVEYXRhLCBjdXJyZW50RWxlbWVudGFsUHJvZmlsZTogRWxlbWVudGFsUHJvcGVydGllcyk6IFNjb3JlZFJlY2lwZSA9PiB7XG4gIC8vIENhbGN1bGF0ZSBlbGVtZW50YWwgbWF0Y2ggc2NvcmVcbiAgY29uc3QgZWxlbWVudGFsU2NvcmUgPSByZWNpcGUuZWxlbWVudGFsUHJvcGVydGllcyBcbiAgICA/IGNhbGN1bGF0ZUVsZW1lbnRhbE1hdGNoKHJlY2lwZS5lbGVtZW50YWxQcm9wZXJ0aWVzLCBjdXJyZW50RWxlbWVudGFsUHJvZmlsZSlcbiAgICA6IDAuNTtcbiAgXG4gIC8vIENhbGN1bGF0ZSBhc3Ryb2xvZ2ljYWwgc2NvcmVcbiAgY29uc3QgYXN0cm9sb2dpY2FsU2NvcmUgPSBjYWxjdWxhdGVBc3Ryb2xvZ2ljYWxTY29yZShyZWNpcGUpO1xuICBcbiAgLy8gQ2FsY3VsYXRlIG92ZXJhbGwgc2NvcmUgKHdlaWdodGVkIGNvbWJpbmF0aW9uKVxuICBjb25zdCBvdmVyYWxsU2NvcmUgPSAoZWxlbWVudGFsU2NvcmUgKiAwLjYpICsgKGFzdHJvbG9naWNhbFNjb3JlICogMC40KTtcbiAgXG4gIC8vIEdlbmVyYXRlIHNjb3JpbmcgcmVhc29uc1xuICBjb25zdCBzY29yaW5nUmVhc29uczogc3RyaW5nW10gPSBbXTtcbiAgXG4gIGlmIChlbGVtZW50YWxTY29yZSA+IDAuNykge1xuICAgIHNjb3JpbmdSZWFzb25zLnB1c2goYEV4Y2VsbGVudCBlbGVtZW50YWwgaGFybW9ueSAoJHtNYXRoLnJvdW5kKGVsZW1lbnRhbFNjb3JlICogMTAwKX0lKWApO1xuICB9IGVsc2UgaWYgKGVsZW1lbnRhbFNjb3JlID4gMC41KSB7XG4gICAgc2NvcmluZ1JlYXNvbnMucHVzaChgR29vZCBlbGVtZW50YWwgbWF0Y2ggKCR7TWF0aC5yb3VuZChlbGVtZW50YWxTY29yZSAqIDEwMCl9JSlgKTtcbiAgfVxuICBcbiAgaWYgKGFzdHJvbG9naWNhbFNjb3JlID4gMC42KSB7XG4gICAgc2NvcmluZ1JlYXNvbnMucHVzaCgnQWxpZ25lZCB3aXRoIGN1cnJlbnQgY2VsZXN0aWFsIGVuZXJnaWVzJyk7XG4gIH1cbiAgXG4gIGlmIChyZWNpcGUuZGlmZmljdWx0eSA9PT0gJ0Vhc3knIHx8IHJlY2lwZS5kaWZmaWN1bHR5ID09PSAnZWFzeScpIHtcbiAgICBzY29yaW5nUmVhc29ucy5wdXNoKCdQZXJmZWN0IGZvciBiZWdpbm5lcnMnKTtcbiAgfVxuICBcbiAgaWYgKHJlY2lwZS5jb29rVGltZSAmJiByZWNpcGUuY29va1RpbWUuaW5jbHVkZXMoJzMwJykpIHtcbiAgICBzY29yaW5nUmVhc29ucy5wdXNoKCdRdWljayBwcmVwYXJhdGlvbiB0aW1lJyk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgLi4ucmVjaXBlLFxuICAgIGVsZW1lbnRhbFNjb3JlLFxuICAgIGFzdHJvbG9naWNhbFNjb3JlLFxuICAgIG92ZXJhbGxTY29yZSxcbiAgICBzY29yaW5nUmVhc29ucyxcbiAgICBtYXRjaFBlcmNlbnRhZ2U6IE1hdGgucm91bmQob3ZlcmFsbFNjb3JlICogMTAwKVxuICB9O1xufTtcblxuLy8gPT09PT09PT09PSBSRUNJUEUgQ0FSRCBDT01QT05FTlQgPT09PT09PT09PVxuXG5jb25zdCBSZWNpcGVDYXJkOiBSZWFjdC5GQzx7XG4gIHJlY2lwZTogU2NvcmVkUmVjaXBlO1xuICBpc0V4cGFuZGVkOiBib29sZWFuO1xuICBvblRvZ2dsZTogKCkgPT4gdm9pZDtcbiAgb25TZWxlY3Q/OiAocmVjaXBlOiBSZWNpcGVEYXRhKSA9PiB2b2lkO1xufT4gPSAoeyByZWNpcGUsIGlzRXhwYW5kZWQsIG9uVG9nZ2xlLCBvblNlbGVjdCB9KSA9PiB7XG4gIGNvbnN0IGhhbmRsZUNhcmRDbGljayA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBvblRvZ2dsZSgpO1xuICB9LCBbb25Ub2dnbGVdKTtcblxuICBjb25zdCBoYW5kbGVTZWxlY3RDbGljayA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAob25TZWxlY3QpIHtcbiAgICAgIG9uU2VsZWN0KHJlY2lwZSk7XG4gICAgfVxuICB9LCBbb25TZWxlY3QsIHJlY2lwZV0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXIgcm91bmRlZC1sZyBwLTQgYmctd2hpdGUgaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93IGN1cnNvci1wb2ludGVyXCI+XG4gICAgICA8ZGl2IG9uQ2xpY2s9e2hhbmRsZUNhcmRDbGlja30+XG4gICAgICAgIHsvKiBSZWNpcGUgSGVhZGVyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IG1iLTJcIj5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1iYXNlIHRleHQtZ3JheS05MDAgZmxleC0xIG1yLTJcIj5cbiAgICAgICAgICAgIHtyZWNpcGUubmFtZX1cbiAgICAgICAgICA8L2g0PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2B0ZXh0LXhzIHB4LTIgcHktMSByb3VuZGVkLWZ1bGwgJHtnZXRNYXRjaFNjb3JlQ2xhc3MocmVjaXBlLm92ZXJhbGxTY29yZSl9YH0+XG4gICAgICAgICAgICAgIHtyZWNpcGUubWF0Y2hQZXJjZW50YWdlfSVcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIHtpc0V4cGFuZGVkID8gPENoZXZyb25VcCBzaXplPXsxNn0gLz4gOiA8Q2hldnJvbkRvd24gc2l6ZT17MTZ9IC8+fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogUmVjaXBlIE1ldGEgSW5mbyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTQgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIG1iLTJcIj5cbiAgICAgICAgICB7cmVjaXBlLmNvb2tUaW1lICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0xXCI+XG4gICAgICAgICAgICAgIDxDbG9jayBzaXplPXsxNH0gLz5cbiAgICAgICAgICAgICAgPHNwYW4+e3JlY2lwZS5jb29rVGltZX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtyZWNpcGUuc2VydmluZ1NpemUgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgPFVzZXJzIHNpemU9ezE0fSAvPlxuICAgICAgICAgICAgICA8c3Bhbj57cmVjaXBlLnNlcnZpbmdTaXplfSBzZXJ2aW5nczwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3JlY2lwZS5kaWZmaWN1bHR5ICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0xXCI+XG4gICAgICAgICAgICAgIDxCYXJDaGFydDMgc2l6ZT17MTR9IC8+XG4gICAgICAgICAgICAgIDxzcGFuPntyZWNpcGUuZGlmZmljdWx0eX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU2NvcmluZyBSZWFzb25zICovfVxuICAgICAgICB7cmVjaXBlLnNjb3JpbmdSZWFzb25zLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTEgdGV4dC14cyB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgIDxTcGFya2xlcyBzaXplPXsxMn0gLz5cbiAgICAgICAgICAgICAgPHNwYW4+e3JlY2lwZS5zY29yaW5nUmVhc29uc1swXX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogU2hvcnQgRGVzY3JpcHRpb24gKi99XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBsaW5lLWNsYW1wLTIgbWItMlwiPlxuICAgICAgICAgIHtyZWNpcGUuZGVzY3JpcHRpb259XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogRXhwYW5kZWQgQ29udGVudCAqL31cbiAgICAgIHtpc0V4cGFuZGVkICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHB0LTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgey8qIEZ1bGwgRGVzY3JpcHRpb24gKi99XG4gICAgICAgICAge3JlY2lwZS5kZXNjcmlwdGlvbiAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cbiAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtc20gbWItMlwiPkRlc2NyaXB0aW9uPC9oNT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+e3JlY2lwZS5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIERldGFpbGVkIFNjb3JlcyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cbiAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNtIG1iLTJcIj5Db21wYXRpYmlsaXR5IFNjb3JlczwvaDU+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibHVlLTUwIHAtMiByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW1cIj5FbGVtZW50YWwgTWF0Y2g8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtODAwXCI+XG4gICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChyZWNpcGUuZWxlbWVudGFsU2NvcmUgKiAxMDApfSVcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctcHVycGxlLTUwIHAtMiByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcHVycGxlLTYwMCBmb250LW1lZGl1bVwiPkFzdHJvbG9naWNhbDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtcHVycGxlLTgwMFwiPlxuICAgICAgICAgICAgICAgICAge01hdGgucm91bmQocmVjaXBlLmFzdHJvbG9naWNhbFNjb3JlICogMTAwKX0lXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogQWxsIFNjb3JpbmcgUmVhc29ucyAqL31cbiAgICAgICAgICB7cmVjaXBlLnNjb3JpbmdSZWFzb25zLmxlbmd0aCA+IDEgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00XCI+XG4gICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNtIG1iLTJcIj5XaHkgVGhpcyBSZWNpcGU/PC9oNT5cbiAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cImxpc3QtZGlzYyBwbC00IHNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICAgIHtyZWNpcGUuc2NvcmluZ1JlYXNvbnMubWFwKChyZWFzb24sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+e3JlYXNvbn08L2xpPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHsvKiBJbmdyZWRpZW50cyBQcmV2aWV3ICovfVxuICAgICAgICAgIHtyZWNpcGUuaW5ncmVkaWVudHMgJiYgQXJyYXkuaXNBcnJheShyZWNpcGUuaW5ncmVkaWVudHMpICYmIHJlY2lwZS5pbmdyZWRpZW50cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNFwiPlxuICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1zbSBtYi0yXCI+S2V5IEluZ3JlZGllbnRzPC9oNT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMVwiPlxuICAgICAgICAgICAgICAgIHtyZWNpcGUuaW5ncmVkaWVudHMuc2xpY2UoMCwgOCkubWFwKChpbmcsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJ0ZXh0LXhzIGJnLWdyYXktMTAwIHB4LTIgcHktMSByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0eXBlb2YgaW5nID09PSAnc3RyaW5nJyA/IGluZyA6IChpbmcgYXMgYW55KS5uYW1lIHx8ICdpbmdyZWRpZW50J31cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICB7cmVjaXBlLmluZ3JlZGllbnRzLmxlbmd0aCA+IDggJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+K3tyZWNpcGUuaW5ncmVkaWVudHMubGVuZ3RoIC0gOH0gbW9yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogQWN0aW9uIEJ1dHRvbiAqL31cbiAgICAgICAgICB7b25TZWxlY3QgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZWxlY3RDbGlja31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIG10LTIgcHgtNCBweS0yIGJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNzAwIHRleHQtd2hpdGUgdGV4dC1zbSByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHNwYWNlLXgtMlwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxTdGFyIHNpemU9ezE2fSAvPlxuICAgICAgICAgICAgICA8c3Bhbj5TZWxlY3QgVGhpcyBSZWNpcGU8L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vLyA9PT09PT09PT09IE1BSU4gQ09NUE9ORU5UID09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IFJlY2lwZVJlY29tbWVuZGF0aW9uczogUmVhY3QuRkM8UmVjaXBlUmVjb21tZW5kYXRpb25zUHJvcHM+ID0gKHtcbiAgcmVjaXBlcyxcbiAgY3Vpc2luZU5hbWUsXG4gIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlLFxuICBtYXhEaXNwbGF5ZWQgPSA2LFxuICBzaG93RXhwYW5kZWRCeURlZmF1bHQgPSBmYWxzZSxcbiAgb25SZWNpcGVTZWxlY3Rcbn0pID0+IHtcbiAgY29uc3QgW2V4cGFuZGVkUmVjaXBlcywgc2V0RXhwYW5kZWRSZWNpcGVzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+Pih7fSk7XG4gIGNvbnN0IFtzaG93QWxsUmVjaXBlcywgc2V0U2hvd0FsbFJlY2lwZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFNjb3JlIGFuZCBzb3J0IHJlY2lwZXNcbiAgY29uc3Qgc2NvcmVkUmVjaXBlcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiByZWNpcGVzXG4gICAgICAubWFwKHJlY2lwZSA9PiBzY29yZVJlY2lwZShyZWNpcGUsIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLm92ZXJhbGxTY29yZSAtIGEub3ZlcmFsbFNjb3JlKTtcbiAgfSwgW3JlY2lwZXMsIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlXSk7XG5cbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIHJlY2lwZXMgdG8gZGlzcGxheVxuICBjb25zdCBkaXNwbGF5ZWRSZWNpcGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNob3dBbGxSZWNpcGVzID8gc2NvcmVkUmVjaXBlcyA6IHNjb3JlZFJlY2lwZXMuc2xpY2UoMCwgbWF4RGlzcGxheWVkKTtcbiAgfSwgW3Njb3JlZFJlY2lwZXMsIHNob3dBbGxSZWNpcGVzLCBtYXhEaXNwbGF5ZWRdKTtcblxuICBjb25zdCB0b2dnbGVSZWNpcGVFeHBhbnNpb24gPSB1c2VDYWxsYmFjaygocmVjaXBlSWQ6IHN0cmluZykgPT4ge1xuICAgIHNldEV4cGFuZGVkUmVjaXBlcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW3JlY2lwZUlkXTogIXByZXZbcmVjaXBlSWRdXG4gICAgfSkpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdG9nZ2xlU2hvd0FsbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93QWxsUmVjaXBlcyhwcmV2ID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIGlmIChzY29yZWRSZWNpcGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTggdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICA8cD5ObyByZWNpcGVzIGZvdW5kIGZvciB7Y3Vpc2luZU5hbWV9IGN1aXNpbmUuPC9wPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIG10LTFcIj5UcnkgZXhwbG9yaW5nIG90aGVyIGN1aXNpbmVzIG9yIGNoZWNrIGJhY2sgbGF0ZXIuPC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgIHsvKiBIZWFkZXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAge2N1aXNpbmVOYW1lfSBSZWNpcGUgUmVjb21tZW5kYXRpb25zXG4gICAgICAgIDwvaDM+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgIHtzY29yZWRSZWNpcGVzLmxlbmd0aH0gcmVjaXBle3Njb3JlZFJlY2lwZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IGZvdW5kXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogUmVjaXBlIEdyaWQgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTRcIj5cbiAgICAgICAge2Rpc3BsYXllZFJlY2lwZXMubWFwKChyZWNpcGUpID0+IChcbiAgICAgICAgICA8UmVjaXBlQ2FyZFxuICAgICAgICAgICAga2V5PXtyZWNpcGUuaWQgfHwgcmVjaXBlLm5hbWV9XG4gICAgICAgICAgICByZWNpcGU9e3JlY2lwZX1cbiAgICAgICAgICAgIGlzRXhwYW5kZWQ9e2V4cGFuZGVkUmVjaXBlc1tyZWNpcGUuaWQgfHwgcmVjaXBlLm5hbWUgfHwgJyddIHx8IHNob3dFeHBhbmRlZEJ5RGVmYXVsdH1cbiAgICAgICAgICAgIG9uVG9nZ2xlPXsoKSA9PiB0b2dnbGVSZWNpcGVFeHBhbnNpb24ocmVjaXBlLmlkIHx8IHJlY2lwZS5uYW1lIHx8ICcnKX1cbiAgICAgICAgICAgIG9uU2VsZWN0PXtvblJlY2lwZVNlbGVjdH1cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogU2hvdyBNb3JlL0xlc3MgQnV0dG9uICovfVxuICAgICAge3Njb3JlZFJlY2lwZXMubGVuZ3RoID4gbWF4RGlzcGxheWVkICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVNob3dBbGx9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHB4LTQgcHktMiB0ZXh0LWJsdWUtNjAwIGhvdmVyOnRleHQtYmx1ZS04MDAgaG92ZXI6YmctYmx1ZS01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2hvd0FsbFJlY2lwZXMgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPENoZXZyb25VcCBzaXplPXsxNn0gLz5cbiAgICAgICAgICAgICAgICA8c3Bhbj5TaG93IExlc3M8L3NwYW4+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgICAgPHNwYW4+U2hvdyBBbGwge3Njb3JlZFJlY2lwZXMubGVuZ3RofSBSZWNpcGVzPC9zcGFuPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlY2lwZVJlY29tbWVuZGF0aW9uczsiXSwidmVyc2lvbiI6M30=