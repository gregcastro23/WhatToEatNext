de9685e81a7ed893be89a7652992bc9d
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const globals_1 = require("@jest/globals");
// Mock external dependencies with proper type safety
globals_1.jest.mock('next/navigation', () => ({
    useRouter: () => externalDependencies_1.mockRouter
}));
globals_1.jest.mock('../../utils/logger', () => ({
    logger: externalDependencies_1.mockLogger,
    createLogger: externalDependencies_1.mockCreateLogger
}));
globals_1.jest.mock('../../utils/reliableAstronomy', () => externalDependencies_1.mockReliableAstronomy);
// Mock hooks that might cause issues
globals_1.jest.mock('../../hooks/useAgentHooks', () => externalDependencies_1.mockAgentHooks);
globals_1.jest.mock('../../utils/mcpServerIntegration', () => externalDependencies_1.mockMCPServerIntegration);
globals_1.jest.mock('../../utils/developmentExperienceOptimizations', () => externalDependencies_1.mockDevelopmentExperienceOptimizations);
// Mock state preservation hooks
globals_1.jest.mock('../../hooks/useStatePreservation', () => externalDependencies_1.mockStatePreservationHooks);
// Mock error handling
globals_1.jest.mock('../../utils/errorHandling', () => externalDependencies_1.mockErrorHandler);
// Mock steering file intelligence
globals_1.jest.mock('../../utils/steeringFileIntelligence', () => externalDependencies_1.mockSteeringFileIntelligence);
// Mock alchemical context hooks
globals_1.jest.mock('../../contexts/AlchemicalContext/hooks', () => externalDependencies_1.mockAlchemicalContext);
// Mock component fallbacks
globals_1.jest.mock('../../components/fallbacks/ComponentFallbacks', () => ({
    ComponentFallbacks: {
        LoadingFallback: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "loading-fallback", children: "Loading..." }),
        ErrorFallback: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "error-fallback", children: "Error occurred" })
    }
}));
/**
 * Comprehensive Main Page Validation Tests
 * Task 11.2: Validate all requirements and perform final testing
 */
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const App_1 = __importDefault(require("../../../App"));
const testComponentHelpers_1 = require("../utils/testComponentHelpers");
// Import comprehensive mocks
const externalDependencies_1 = require("../mocks/externalDependencies");
describe('Main Page Validation - Task 11.2', () => {
    beforeEach(() => {
        // Clear all mocks before each test
        globals_1.jest.clearAllMocks();
        // Mock window.scrollTo
        Object.defineProperty(window, 'scrollTo', {
            value: globals_1.jest.fn(),
            writable: true
        });
        // Mock localStorage
        const localStorageMock = {
            getItem: globals_1.jest.fn(),
            setItem: globals_1.jest.fn(),
            removeItem: globals_1.jest.fn(),
            clear: globals_1.jest.fn()
        };
        Object.defineProperty(window, 'localStorage', {
            value: localStorageMock
        });
    });
    describe('1. Component Interactions and Data Flow', () => {
        test('App renders without crashing', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should render without throwing errors
            expect(react_2.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
        });
        test('MainPageLayout renders with AlchemicalProvider', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render the main layout
            expect(react_2.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Error boundary handles errors gracefully', async () => {
            const ThrowError = () => {
                throw new Error('Test error');
            };
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.TestErrorBoundary, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false, children: (0, jsx_runtime_1.jsx)(ThrowError, {}) }) }) }));
            });
            // Should handle error without crashing
            expect(react_2.screen.getByTestId('test-error-boundary')).toBeInTheDocument();
        });
    });
    describe('2. Navigation Functionality', () => {
        test('Navigation state is preserved', async () => {
            const mockOnSectionNavigate = globals_1.jest.fn();
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false, onSectionNavigate: mockOnSectionNavigate }) }));
            });
            // Navigation should be functional
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            expect(mockOnSectionNavigate).toBeDefined();
        });
        test('Scroll position is preserved', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Simulate scroll
            react_2.fireEvent.scroll(window, { target: { scrollY: 100 } });
            // Should handle scroll events
            expect(window.scrollTo).toBeDefined();
        });
    });
    describe('3. Debug Panel Functionality', () => {
        test('Debug panel renders in development mode', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: true, loading: false }) }));
            });
            // Should render without errors in debug mode
            expect(react_2.screen.getByTestId('debug-mode')).toHaveTextContent('debug');
        });
        test('Debug panel is hidden in production mode', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render without errors in production mode
            expect(react_2.screen.getByTestId('debug-mode')).toHaveTextContent('production');
        });
    });
    describe('4. Loading States', () => {
        test('Loading state displays correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: true }) }));
            });
            // Should handle loading state
            expect(react_2.screen.getByTestId('loading-state')).toHaveTextContent('loading');
        });
        test('Connected state displays when not loading', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle connected state
            expect(react_2.screen.getByTestId('loading-state')).toHaveTextContent('loaded');
        });
    });
    describe('5. Context and State Management', () => {
        test('AlchemicalProvider provides context', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Context should be provided
            expect(react_2.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
        });
        test('State preservation works correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // State preservation should work
            expect(localStorage.setItem).toBeDefined();
        });
    });
    describe('6. Error Handling', () => {
        test('Global error boundary catches errors', async () => {
            // Mock console.error to prevent test output noise
            const consoleSpy = globals_1.jest.spyOn(console, 'error').mockImplementation(() => { });
            // Test that the App component renders without crashing
            // The App component has its own error boundary
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should handle errors gracefully
            expect(react_2.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
            consoleSpy.mockRestore();
        });
        test('Component-level error boundaries work', async () => {
            const consoleSpy = globals_1.jest.spyOn(console, 'error').mockImplementation(() => { });
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render without errors
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            consoleSpy.mockRestore();
        });
    });
    describe('7. Performance and Accessibility', () => {
        test('Components are memoized for performance', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render efficiently
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Lazy loading works for non-critical components', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.AsyncTestWrapper, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: true, loading: false }) }) }));
            });
            // Should handle lazy loading
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
    describe('8. Integration with External Systems', () => {
        test('Astrological calculations integrate correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should integrate with astrological systems
            expect(react_2.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
            expect(externalDependencies_1.mockReliableAstronomy.getReliablePlanetaryPositions).toBeDefined();
        });
        test('Agent hooks integrate correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should integrate with agent hooks
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            expect(externalDependencies_1.mockAgentHooks.useAgentHooks).toBeDefined();
        });
    });
    describe('9. Mobile Responsiveness', () => {
        test('Layout adapts to mobile viewport', async () => {
            // Mock mobile viewport
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 375,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 667,
            });
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle mobile viewport
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Touch interactions work correctly', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle touch interactions
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
    describe('10. System Integration Validation', () => {
        test('All required systems are integrated', async () => {
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should integrate all systems
            expect(react_2.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
        });
        test('Fallback mechanisms work correctly', async () => {
            // Mock API failure
            externalDependencies_1.mockReliableAstronomy.getReliablePlanetaryPositions
                .mockRejectedValueOnce(new Error('API Error'));
            await (0, react_2.act)(async () => {
                (0, react_2.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle API failures gracefully
            expect(react_2.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vdmFsaWRhdGlvbi9NYWluUGFnZVZhbGlkYXRpb24udGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBT0EsMkNBQXFDO0FBNEJyQyxxREFBcUQ7QUFDckQsY0FBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxpQ0FBVTtDQUM1QixDQUFDLENBQUMsQ0FBQztBQUVKLGNBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNyQyxNQUFNLEVBQUUsaUNBQVU7SUFDbEIsWUFBWSxFQUFFLHVDQUFnQjtDQUMvQixDQUFDLENBQUMsQ0FBQztBQUVKLGNBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFLENBQUMsNENBQXFCLENBQUMsQ0FBQztBQUV4RSxxQ0FBcUM7QUFDckMsY0FBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxxQ0FBYyxDQUFDLENBQUM7QUFFN0QsY0FBSSxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUUsQ0FBQywrQ0FBd0IsQ0FBQyxDQUFDO0FBRTlFLGNBQUksQ0FBQyxJQUFJLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFLENBQUMsNkRBQXNDLENBQUMsQ0FBQztBQUUxRyxnQ0FBZ0M7QUFDaEMsY0FBSSxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUUsQ0FBQyxpREFBMEIsQ0FBQyxDQUFDO0FBRWhGLHNCQUFzQjtBQUN0QixjQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRSxDQUFDLHVDQUFnQixDQUFDLENBQUM7QUFFL0Qsa0NBQWtDO0FBQ2xDLGNBQUksQ0FBQyxJQUFJLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxF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UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDcEQsbUJBQW1CO1lBQ25CLDRDQUFxQixDQUFDLDZCQUE2QjtpQkFDaEQscUJBQXFCLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUVqRCxNQUFNLElBQUEsV0FBRyxFQUFDLEtBQUssSUFBSSxFQUFFO2dCQUNuQixJQUFBLGNBQU0sRUFDSix1QkFBQyw2Q0FBc0IsY0FDckIsdUJBQUMseUNBQWtCLElBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxHQUFJLEdBQ2pDLENBQzFCLENBQUM7WUFDSixDQUFDLENBQUMsQ0FBQztZQUVILHdDQUF3QztZQUN4QyxNQUFNLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUMxRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vdmFsaWRhdGlvbi9NYWluUGFnZVZhbGlkYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wcmVoZW5zaXZlIE1haW4gUGFnZSBWYWxpZGF0aW9uIFRlc3RzXG4gKiBUYXNrIDExLjI6IFZhbGlkYXRlIGFsbCByZXF1aXJlbWVudHMgYW5kIHBlcmZvcm0gZmluYWwgdGVzdGluZ1xuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCBBcHAgZnJvbSAnLi4vLi4vLi4vQXBwJztcbmltcG9ydCB7IEFsY2hlbWljYWxQcm92aWRlciB9IGZyb20gJy4uLy4uL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0JztcbmltcG9ydCBNYWluUGFnZUxheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL2xheW91dC9NYWluUGFnZUxheW91dCc7XG5pbXBvcnQgdHlwZSB7IE1haW5QYWdlTGF5b3V0UHJvcHMsIEFsY2hlbWljYWxQcm92aWRlclByb3BzIH0gZnJvbSAnLi4vdHlwZXMvdGVzdFV0aWxzJztcbmltcG9ydCB7IFxuICBNb2NrQWxjaGVtaWNhbFByb3ZpZGVyLCBcbiAgTW9ja01haW5QYWdlTGF5b3V0LCBcbiAgcmVuZGVyV2l0aFByb3ZpZGVycyxcbiAgQXN5bmNUZXN0V3JhcHBlcixcbiAgVGVzdEVycm9yQm91bmRhcnlcbn0gZnJvbSAnLi4vdXRpbHMvdGVzdENvbXBvbmVudEhlbHBlcnMnO1xuXG4vLyBJbXBvcnQgY29tcHJlaGVuc2l2ZSBtb2Nrc1xuaW1wb3J0IHtcbiAgbW9ja1JvdXRlcixcbiAgbW9ja0xvZ2dlcixcbiAgbW9ja0NyZWF0ZUxvZ2dlcixcbiAgbW9ja1JlbGlhYmxlQXN0cm9ub215LFxuICBtb2NrQWdlbnRIb29rcyxcbiAgbW9ja01DUFNlcnZlckludGVncmF0aW9uLFxuICBtb2NrRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemF0aW9ucyxcbiAgbW9ja1N0YXRlUHJlc2VydmF0aW9uSG9va3MsXG4gIG1vY2tFcnJvckhhbmRsZXIsXG4gIG1vY2tTdGVlcmluZ0ZpbGVJbnRlbGxpZ2VuY2UsXG4gIG1vY2tBbGNoZW1pY2FsQ29udGV4dFxufSBmcm9tICcuLi9tb2Nrcy9leHRlcm5hbERlcGVuZGVuY2llcyc7XG5cbi8vIE1vY2sgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIHdpdGggcHJvcGVyIHR5cGUgc2FmZXR5XG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogKCkgPT4gbW9ja1JvdXRlclxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL2xvZ2dlcicsICgpID0+ICh7XG4gIGxvZ2dlcjogbW9ja0xvZ2dlcixcbiAgY3JlYXRlTG9nZ2VyOiBtb2NrQ3JlYXRlTG9nZ2VyXG59KSk7XG5cbmplc3QubW9jaygnLi4vLi4vdXRpbHMvcmVsaWFibGVBc3Ryb25vbXknLCAoKSA9PiBtb2NrUmVsaWFibGVBc3Ryb25vbXkpO1xuXG4vLyBNb2NrIGhvb2tzIHRoYXQgbWlnaHQgY2F1c2UgaXNzdWVzXG5qZXN0Lm1vY2soJy4uLy4uL2hvb2tzL3VzZUFnZW50SG9va3MnLCAoKSA9PiBtb2NrQWdlbnRIb29rcyk7XG5cbmplc3QubW9jaygnLi4vLi4vdXRpbHMvbWNwU2VydmVySW50ZWdyYXRpb24nLCAoKSA9PiBtb2NrTUNQU2VydmVySW50ZWdyYXRpb24pO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL2RldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMnLCAoKSA9PiBtb2NrRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemF0aW9ucyk7XG5cbi8vIE1vY2sgc3RhdGUgcHJlc2VydmF0aW9uIGhvb2tzXG5qZXN0Lm1vY2soJy4uLy4uL2hvb2tzL3VzZVN0YXRlUHJlc2VydmF0aW9uJywgKCkgPT4gbW9ja1N0YXRlUHJlc2VydmF0aW9uSG9va3MpO1xuXG4vLyBNb2NrIGVycm9yIGhhbmRsaW5nXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL2Vycm9ySGFuZGxpbmcnLCAoKSA9PiBtb2NrRXJyb3JIYW5kbGVyKTtcblxuLy8gTW9jayBzdGVlcmluZyBmaWxlIGludGVsbGlnZW5jZVxuamVzdC5tb2NrKCcuLi8uLi91dGlscy9zdGVlcmluZ0ZpbGVJbnRlbGxpZ2VuY2UnLCAoKSA9PiBtb2NrU3RlZXJpbmdGaWxlSW50ZWxsaWdlbmNlKTtcblxuLy8gTW9jayBhbGNoZW1pY2FsIGNvbnRleHQgaG9va3Ncbmplc3QubW9jaygnLi4vLi4vY29udGV4dHMvQWxjaGVtaWNhbENvbnRleHQvaG9va3MnLCAoKSA9PiBtb2NrQWxjaGVtaWNhbENvbnRleHQpO1xuXG4vLyBNb2NrIGNvbXBvbmVudCBmYWxsYmFja3Ncbmplc3QubW9jaygnLi4vLi4vY29tcG9uZW50cy9mYWxsYmFja3MvQ29tcG9uZW50RmFsbGJhY2tzJywgKCkgPT4gKHtcbiAgQ29tcG9uZW50RmFsbGJhY2tzOiB7XG4gICAgTG9hZGluZ0ZhbGxiYWNrOiAoKSA9PiA8ZGl2IGRhdGEtdGVzdGlkPVwibG9hZGluZy1mYWxsYmFja1wiPkxvYWRpbmcuLi48L2Rpdj4sXG4gICAgRXJyb3JGYWxsYmFjazogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cImVycm9yLWZhbGxiYWNrXCI+RXJyb3Igb2NjdXJyZWQ8L2Rpdj5cbiAgfVxufSkpO1xuXG5kZXNjcmliZSgnTWFpbiBQYWdlIFZhbGlkYXRpb24gLSBUYXNrIDExLjInLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIENsZWFyIGFsbCBtb2NrcyBiZWZvcmUgZWFjaCB0ZXN0XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gTW9jayB3aW5kb3cuc2Nyb2xsVG9cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnc2Nyb2xsVG8nLCB7XG4gICAgICB2YWx1ZTogamVzdC5mbigpLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICBcbiAgICAvLyBNb2NrIGxvY2FsU3RvcmFnZVxuICAgIGNvbnN0IGxvY2FsU3RvcmFnZU1vY2sgPSB7XG4gICAgICBnZXRJdGVtOiBqZXN0LmZuKCksXG4gICAgICBzZXRJdGVtOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgICBjbGVhcjogamVzdC5mbigpXG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbG9jYWxTdG9yYWdlJywge1xuICAgICAgdmFsdWU6IGxvY2FsU3RvcmFnZU1vY2tcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzEuIENvbXBvbmVudCBJbnRlcmFjdGlvbnMgYW5kIERhdGEgRmxvdycsICgpID0+IHtcbiAgICB0ZXN0KCdBcHAgcmVuZGVycyB3aXRob3V0IGNyYXNoaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKDxBcHAgLz4pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aG91dCB0aHJvd2luZyBlcnJvcnNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9Mb2FkaW5nIEFzdHJvbG9naWNhbCBEYXRhL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnTWFpblBhZ2VMYXlvdXQgcmVuZGVycyB3aXRoIEFsY2hlbWljYWxQcm92aWRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZW5kZXIgdGhlIG1haW4gbGF5b3V0XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLWFsY2hlbWljYWwtcHJvdmlkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRXJyb3IgYm91bmRhcnkgaGFuZGxlcyBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IFRocm93RXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVzdCBlcnJvcicpO1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxUZXN0RXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfT5cbiAgICAgICAgICAgICAgICA8VGhyb3dFcnJvciAvPlxuICAgICAgICAgICAgICA8L01vY2tNYWluUGFnZUxheW91dD5cbiAgICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICA8L1Rlc3RFcnJvckJvdW5kYXJ5PlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgZXJyb3Igd2l0aG91dCBjcmFzaGluZ1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1lcnJvci1ib3VuZGFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnMi4gTmF2aWdhdGlvbiBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIHRlc3QoJ05hdmlnYXRpb24gc3RhdGUgaXMgcHJlc2VydmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09uU2VjdGlvbk5hdmlnYXRlID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IFxuICAgICAgICAgICAgICBkZWJ1Z01vZGU9e2ZhbHNlfSBcbiAgICAgICAgICAgICAgbG9hZGluZz17ZmFsc2V9IFxuICAgICAgICAgICAgICBvblNlY3Rpb25OYXZpZ2F0ZT17bW9ja09uU2VjdGlvbk5hdmlnYXRlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTmF2aWdhdGlvbiBzaG91bGQgYmUgZnVuY3Rpb25hbFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja09uU2VjdGlvbk5hdmlnYXRlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnU2Nyb2xsIHBvc2l0aW9uIGlzIHByZXNlcnZlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIHNjcm9sbFxuICAgICAgZmlyZUV2ZW50LnNjcm9sbCh3aW5kb3csIHsgdGFyZ2V0OiB7IHNjcm9sbFk6IDEwMCB9IH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIHNjcm9sbCBldmVudHNcbiAgICAgIGV4cGVjdCh3aW5kb3cuc2Nyb2xsVG8pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczLiBEZWJ1ZyBQYW5lbCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIHRlc3QoJ0RlYnVnIHBhbmVsIHJlbmRlcnMgaW4gZGV2ZWxvcG1lbnQgbW9kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXt0cnVlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIHJlbmRlciB3aXRob3V0IGVycm9ycyBpbiBkZWJ1ZyBtb2RlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZWJ1Zy1tb2RlJykpLnRvSGF2ZVRleHRDb250ZW50KCdkZWJ1ZycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRGVidWcgcGFuZWwgaXMgaGlkZGVuIGluIHByb2R1Y3Rpb24gbW9kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aG91dCBlcnJvcnMgaW4gcHJvZHVjdGlvbiBtb2RlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZWJ1Zy1tb2RlJykpLnRvSGF2ZVRleHRDb250ZW50KCdwcm9kdWN0aW9uJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc0LiBMb2FkaW5nIFN0YXRlcycsICgpID0+IHtcbiAgICB0ZXN0KCdMb2FkaW5nIHN0YXRlIGRpc3BsYXlzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17dHJ1ZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBsb2FkaW5nIHN0YXRlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2FkaW5nLXN0YXRlJykpLnRvSGF2ZVRleHRDb250ZW50KCdsb2FkaW5nJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdDb25uZWN0ZWQgc3RhdGUgZGlzcGxheXMgd2hlbiBub3QgbG9hZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgY29ubmVjdGVkIHN0YXRlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2FkaW5nLXN0YXRlJykpLnRvSGF2ZVRleHRDb250ZW50KCdsb2FkZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzUuIENvbnRleHQgYW5kIFN0YXRlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnQWxjaGVtaWNhbFByb3ZpZGVyIHByb3ZpZGVzIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDb250ZXh0IHNob3VsZCBiZSBwcm92aWRlZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1hbGNoZW1pY2FsLXByb3ZpZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdTdGF0ZSBwcmVzZXJ2YXRpb24gd29ya3MgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU3RhdGUgcHJlc2VydmF0aW9uIHNob3VsZCB3b3JrXG4gICAgICBleHBlY3QobG9jYWxTdG9yYWdlLnNldEl0ZW0pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc2LiBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICB0ZXN0KCdHbG9iYWwgZXJyb3IgYm91bmRhcnkgY2F0Y2hlcyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGNvbnNvbGUuZXJyb3IgdG8gcHJldmVudCB0ZXN0IG91dHB1dCBub2lzZVxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCB0aGF0IHRoZSBBcHAgY29tcG9uZW50IHJlbmRlcnMgd2l0aG91dCBjcmFzaGluZ1xuICAgICAgLy8gVGhlIEFwcCBjb21wb25lbnQgaGFzIGl0cyBvd24gZXJyb3IgYm91bmRhcnlcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcig8QXBwIC8+KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIGVycm9ycyBncmFjZWZ1bGx5XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvTG9hZGluZyBBc3Ryb2xvZ2ljYWwgRGF0YS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnQ29tcG9uZW50LWxldmVsIGVycm9yIGJvdW5kYXJpZXMgd29yaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aG91dCBlcnJvcnNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc3LiBQZXJmb3JtYW5jZSBhbmQgQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICB0ZXN0KCdDb21wb25lbnRzIGFyZSBtZW1vaXplZCBmb3IgcGVyZm9ybWFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIGVmZmljaWVudGx5XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLW1haW4tcGFnZS1sYXlvdXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0xhenkgbG9hZGluZyB3b3JrcyBmb3Igbm9uLWNyaXRpY2FsIGNvbXBvbmVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEFzeW5jVGVzdFdyYXBwZXI+XG4gICAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e3RydWV9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgIDwvQXN5bmNUZXN0V3JhcHBlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIGxhenkgbG9hZGluZ1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc4LiBJbnRlZ3JhdGlvbiB3aXRoIEV4dGVybmFsIFN5c3RlbXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnQXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyBpbnRlZ3JhdGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGludGVncmF0ZSB3aXRoIGFzdHJvbG9naWNhbCBzeXN0ZW1zXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLWFsY2hlbWljYWwtcHJvdmlkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVsaWFibGVBc3Ryb25vbXkuZ2V0UmVsaWFibGVQbGFuZXRhcnlQb3NpdGlvbnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdBZ2VudCBob29rcyBpbnRlZ3JhdGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGludGVncmF0ZSB3aXRoIGFnZW50IGhvb2tzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLW1haW4tcGFnZS1sYXlvdXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChtb2NrQWdlbnRIb29rcy51c2VBZ2VudEhvb2tzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnOS4gTW9iaWxlIFJlc3BvbnNpdmVuZXNzJywgKCkgPT4ge1xuICAgIHRlc3QoJ0xheW91dCBhZGFwdHMgdG8gbW9iaWxlIHZpZXdwb3J0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBtb2JpbGUgdmlld3BvcnRcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMzc1LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lckhlaWdodCcsIHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDY2NyxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIG1vYmlsZSB2aWV3cG9ydFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdUb3VjaCBpbnRlcmFjdGlvbnMgd29yayBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIHRvdWNoIGludGVyYWN0aW9uc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcxMC4gU3lzdGVtIEludGVncmF0aW9uIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnQWxsIHJlcXVpcmVkIHN5c3RlbXMgYXJlIGludGVncmF0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoPEFwcCAvPik7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGludGVncmF0ZSBhbGwgc3lzdGVtc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0xvYWRpbmcgQXN0cm9sb2dpY2FsIERhdGEvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdGYWxsYmFjayBtZWNoYW5pc21zIHdvcmsgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBBUEkgZmFpbHVyZVxuICAgICAgbW9ja1JlbGlhYmxlQXN0cm9ub215LmdldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdBUEkgRXJyb3InKSk7XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgQVBJIGZhaWx1cmVzIGdyYWNlZnVsbHlcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==