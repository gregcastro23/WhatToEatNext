7320303c755d23cdbf296f1c5b531ddd
"use strict";
/**
 * Progress Reporting System
 * Perfect Codebase Campaign - Comprehensive Progress Reports
 * Requirements: 6.4, 6.8
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProgressReportingSystem = exports.RecommendationPriority = exports.IssueSeverity = exports.AchievementImpact = exports.CampaignStatus = void 0;
const fs = __importStar(require("fs"));
const campaign_1 = require("../../types/campaign");
const MetricsCollectionSystem_1 = require("./MetricsCollectionSystem");
const MilestoneValidationSystem_1 = require("./MilestoneValidationSystem");
var CampaignStatus;
(function (CampaignStatus) {
    CampaignStatus["NOT_STARTED"] = "NOT_STARTED";
    CampaignStatus["IN_PROGRESS"] = "IN_PROGRESS";
    CampaignStatus["COMPLETED"] = "COMPLETED";
    CampaignStatus["BLOCKED"] = "BLOCKED";
    CampaignStatus["FAILED"] = "FAILED";
})(CampaignStatus || (exports.CampaignStatus = CampaignStatus = {}));
var AchievementImpact;
(function (AchievementImpact) {
    AchievementImpact["LOW"] = "LOW";
    AchievementImpact["MEDIUM"] = "MEDIUM";
    AchievementImpact["HIGH"] = "HIGH";
    AchievementImpact["CRITICAL"] = "CRITICAL";
})(AchievementImpact || (exports.AchievementImpact = AchievementImpact = {}));
var IssueSeverity;
(function (IssueSeverity) {
    IssueSeverity["LOW"] = "LOW";
    IssueSeverity["MEDIUM"] = "MEDIUM";
    IssueSeverity["HIGH"] = "HIGH";
    IssueSeverity["CRITICAL"] = "CRITICAL";
    IssueSeverity["BLOCKER"] = "BLOCKER";
})(IssueSeverity || (exports.IssueSeverity = IssueSeverity = {}));
var RecommendationPriority;
(function (RecommendationPriority) {
    RecommendationPriority["LOW"] = "LOW";
    RecommendationPriority["MEDIUM"] = "MEDIUM";
    RecommendationPriority["HIGH"] = "HIGH";
    RecommendationPriority["URGENT"] = "URGENT";
})(RecommendationPriority || (exports.RecommendationPriority = RecommendationPriority = {}));
class ProgressReportingSystem {
    metricsCollector;
    validationSystem;
    reportHistory = [];
    constructor() {
        this.metricsCollector = new MetricsCollectionSystem_1.MetricsCollectionSystem();
        this.validationSystem = new MilestoneValidationSystem_1.MilestoneValidationSystem();
    }
    /**
     * Generate comprehensive campaign summary report
     */
    async generateCampaignSummaryReport() {
        console.log('ðŸ“Š Generating comprehensive campaign summary report...');
        const [currentMetrics, phaseValidations] = await Promise.all([
            this.metricsCollector.collectDetailedMetrics(),
            this.validationSystem.validateAllPhases()
        ]);
        const overallStatus = this.determineOverallStatus(phaseValidations);
        const overallProgress = this.calculateOverallProgress(phaseValidations);
        const phases = this.generatePhaseProgressSummaries(phaseValidations);
        const keyAchievements = this.identifyKeyAchievements(currentMetrics, phaseValidations);
        const criticalIssues = this.identifyCriticalIssues(phaseValidations);
        const performanceMetrics = this.createPerformanceSnapshot(currentMetrics);
        const recommendations = this.generateRecommendations(phaseValidations, currentMetrics);
        const estimatedCompletion = this.estimateCompletionDate(overallProgress, currentMetrics);
        const executiveSummary = this.generateExecutiveSummary(overallStatus, overallProgress, keyAchievements, criticalIssues);
        const report = {
            campaignId: 'perfect-codebase-campaign',
            generatedAt: new Date(),
            overallStatus,
            overallProgress,
            phases,
            keyAchievements,
            criticalIssues,
            performanceMetrics,
            recommendations,
            estimatedCompletion,
            executiveSummary
        };
        this.reportHistory.push(report);
        console.log(`âœ… Campaign summary report generated: ${overallProgress}% complete`);
        return report;
    }
    /**
     * Generate detailed phase completion report
     */
    async generatePhaseCompletionReport(phaseId) {
        console.log(`ðŸ“Š Generating phase completion report for ${phaseId}...`);
        const currentMetrics = await this.metricsCollector.collectDetailedMetrics();
        let phaseValidation;
        switch (phaseId) {
            case 'phase1':
                phaseValidation = await this.validationSystem.validatePhase1();
                break;
            case 'phase2':
                phaseValidation = await this.validationSystem.validatePhase2();
                break;
            case 'phase3':
                phaseValidation = await this.validationSystem.validatePhase3();
                break;
            case 'phase4':
                phaseValidation = await this.validationSystem.validatePhase4();
                break;
            default:
                throw new Error(`Unknown phase: ${phaseId}`);
        }
        const achievements = this.generatePhaseAchievements(phaseValidation, currentMetrics);
        const issues = this.generatePhaseIssues(phaseValidation);
        const recommendations = this.generatePhaseRecommendations(phaseValidation);
        const report = {
            phaseId: phaseValidation.phaseId,
            phaseName: phaseValidation.phaseName,
            startTime: new Date(),
            endTime: phaseValidation.overallSuccess ? new Date() : undefined,
            status: phaseValidation.overallSuccess ? campaign_1.PhaseStatus.COMPLETED : campaign_1.PhaseStatus.IN_PROGRESS,
            metrics: currentMetrics,
            achievements,
            issues,
            recommendations
        };
        console.log(`âœ… Phase ${phaseId} report generated: ${phaseValidation.overallSuccess ? 'COMPLETED' : 'IN PROGRESS'}`);
        return report;
    }
    /**
     * Generate visualization data for charts and graphs
     */
    async generateVisualizationData() {
        console.log('ðŸ“Š Generating visualization data...');
        const snapshots = this.metricsCollector.getSnapshots();
        const phaseValidations = await this.validationSystem.validateAllPhases();
        const currentMetrics = await this.metricsCollector.collectDetailedMetrics();
        const timeSeriesData = this.generateTimeSeriesData(snapshots);
        const phaseProgressChart = this.generatePhaseProgressChart(phaseValidations);
        const errorDistributionChart = this.generateErrorDistributionChart(currentMetrics);
        const performanceTrendChart = this.generatePerformanceTrendChart(snapshots);
        return {
            timeSeriesData,
            phaseProgressChart,
            errorDistributionChart,
            performanceTrendChart
        };
    }
    /**
     * Export comprehensive report to multiple formats
     */
    async exportReport(report, formats = ['json']) {
        const exportedFiles = [];
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
        const baseFileName = `campaign-report-${timestamp}`;
        for (const format of formats) {
            let filePath;
            let content;
            switch (format) {
                case 'json':
                    filePath = `${baseFileName}.json`;
                    content = JSON.stringify(report, null, 2);
                    break;
                case 'html':
                    filePath = `${baseFileName}.html`;
                    content = this.generateHTMLReport(report);
                    break;
                case 'markdown':
                    filePath = `${baseFileName}.md`;
                    content = this.generateMarkdownReport(report);
                    break;
                case 'csv':
                    filePath = `${baseFileName}.csv`;
                    content = this.generateCSVReport(report);
                    break;
                default:
                    continue;
            }
            fs.writeFileSync(filePath, content);
            exportedFiles.push(filePath);
            console.log(`ðŸ“„ Report exported to: ${filePath}`);
        }
        return exportedFiles;
    }
    /**
     * Generate real-time dashboard data
     */
    async generateDashboardData() {
        const [summary, visualization] = await Promise.all([
            this.generateCampaignSummaryReport(),
            this.generateVisualizationData()
        ]);
        const recentActivity = this.generateRecentActivity();
        return {
            summary,
            visualization,
            recentActivity
        };
    }
    /**
     * Private helper methods
     */
    determineOverallStatus(phaseValidations) {
        const completedPhases = phaseValidations.filter(p => p.overallSuccess).length;
        const totalPhases = phaseValidations.length;
        const hasBlockers = phaseValidations.some(p => p.criticalFailures.length > 0);
        if (completedPhases === totalPhases) {
            return CampaignStatus.COMPLETED;
        }
        else if (hasBlockers) {
            return CampaignStatus.BLOCKED;
        }
        else if (completedPhases > 0) {
            return CampaignStatus.IN_PROGRESS;
        }
        else {
            return CampaignStatus.NOT_STARTED;
        }
    }
    calculateOverallProgress(phaseValidations) {
        if (phaseValidations.length === 0)
            return 0;
        const totalProgress = phaseValidations.reduce((sum, phase) => sum + phase.completionPercentage, 0);
        return Math.round(totalProgress / phaseValidations.length);
    }
    generatePhaseProgressSummaries(phaseValidations) {
        return phaseValidations.map(validation => ({
            phaseId: validation.phaseId,
            phaseName: validation.phaseName,
            status: validation.overallSuccess ? campaign_1.PhaseStatus.COMPLETED : campaign_1.PhaseStatus.IN_PROGRESS,
            progress: validation.completionPercentage,
            keyMetrics: this.extractKeyMetrics(validation),
            milestones: validation.milestones.map(m => ({
                name: m.milestone,
                completed: m.success,
                completionDate: m.success ? m.timestamp : undefined,
                criticalPath: true // All milestones are critical in this campaign
            })),
            blockers: validation.criticalFailures
        }));
    }
    identifyKeyAchievements(metrics, phaseValidations) {
        const achievements = [];
        // TypeScript error achievements
        if (metrics.typeScriptErrors.current === 0) {
            achievements.push({
                title: 'Zero TypeScript Errors Achieved',
                description: 'Successfully eliminated all 86 TypeScript compilation errors',
                phase: 'phase1',
                achievedAt: new Date(),
                impact: AchievementImpact.CRITICAL,
                metrics: {
                    errorsEliminated: 86,
                    reductionPercentage: 100
                }
            });
        }
        // Linting warning achievements
        if (metrics.lintingWarnings.current === 0) {
            achievements.push({
                title: 'Zero Linting Warnings Achieved',
                description: 'Successfully eliminated all 4,506 linting warnings',
                phase: 'phase2',
                achievedAt: new Date(),
                impact: AchievementImpact.CRITICAL,
                metrics: {
                    warningsEliminated: 4506,
                    reductionPercentage: 100
                }
            });
        }
        // Enterprise system achievements
        if (metrics.enterpriseSystems.current >= 200) {
            achievements.push({
                title: 'Enterprise Intelligence Target Achieved',
                description: `Successfully created ${metrics.enterpriseSystems.current} enterprise intelligence systems`,
                phase: 'phase3',
                achievedAt: new Date(),
                impact: AchievementImpact.HIGH,
                metrics: {
                    systemsCreated: metrics.enterpriseSystems.current,
                    targetAchievement: (metrics.enterpriseSystems.current / 200) * 100
                }
            });
        }
        // Performance achievements
        if (metrics.buildPerformance.currentTime <= 10) {
            achievements.push({
                title: 'Build Performance Target Achieved',
                description: `Build time optimized to ${metrics.buildPerformance.currentTime}s (target: 10s)`,
                phase: 'phase4',
                achievedAt: new Date(),
                impact: AchievementImpact.HIGH,
                metrics: {
                    buildTime: metrics.buildPerformance.currentTime,
                    targetTime: 10,
                    improvement: 10 - metrics.buildPerformance.currentTime
                }
            });
        }
        return achievements;
    }
    identifyCriticalIssues(phaseValidations) {
        const issues = [];
        phaseValidations.forEach(phase => {
            phase.criticalFailures.forEach(failure => {
                issues.push({
                    title: `${phase.phaseName} Critical Failure`,
                    description: failure,
                    phase: phase.phaseId,
                    severity: IssueSeverity.CRITICAL,
                    detectedAt: new Date(),
                    estimatedResolutionTime: this.estimateResolutionTime(failure)
                });
            });
        });
        return issues;
    }
    createPerformanceSnapshot(metrics) {
        return {
            typeScriptErrors: {
                initial: 86,
                current: metrics.typeScriptErrors.current,
                reduction: metrics.typeScriptErrors.reduction,
                reductionRate: metrics.trendData.errorReductionRate
            },
            lintingWarnings: {
                initial: 4506,
                current: metrics.lintingWarnings.current,
                reduction: metrics.lintingWarnings.reduction,
                reductionRate: metrics.trendData.warningReductionRate
            },
            buildPerformance: {
                currentTime: metrics.buildPerformance.currentTime,
                targetTime: 10,
                improvement: metrics.trendData.buildTimeImprovement,
                cacheEfficiency: metrics.buildPerformance.cacheHitRate
            },
            enterpriseSystems: {
                initial: 0,
                current: metrics.enterpriseSystems.current,
                target: 200,
                growthRate: metrics.trendData.systemGrowthRate
            }
        };
    }
    generateRecommendations(phaseValidations, metrics) {
        const recommendations = [];
        phaseValidations.forEach(phase => {
            if (!phase.overallSuccess) {
                phase.nextSteps.forEach(step => {
                    recommendations.push({
                        title: `${phase.phaseName} Improvement`,
                        description: step,
                        priority: this.determinePriority(step),
                        phase: phase.phaseId,
                        estimatedImpact: this.estimateImpact(step),
                        actionItems: this.generateActionItems(step)
                    });
                });
            }
        });
        return recommendations;
    }
    estimateCompletionDate(overallProgress, metrics) {
        const completionDate = new Date();
        if (overallProgress >= 100) {
            return completionDate; // Already complete
        }
        // Estimate based on current progress rate
        const remainingProgress = 100 - overallProgress;
        const averageRate = (metrics.trendData.errorReductionRate +
            metrics.trendData.warningReductionRate +
            metrics.trendData.systemGrowthRate) / 3;
        const estimatedHours = averageRate > 0 ? remainingProgress / averageRate : 168; // Default to 1 week
        completionDate.setHours(completionDate.getHours() + estimatedHours);
        return completionDate;
    }
    generateExecutiveSummary(status, progress, achievements, issues) {
        const statusText = status === CampaignStatus.COMPLETED ? 'completed successfully' :
            status === CampaignStatus.IN_PROGRESS ? 'in progress' :
                status === CampaignStatus.BLOCKED ? 'currently blocked' : 'not started';
        const achievementText = achievements.length > 0 ?
            `Key achievements include: ${achievements.map(a => a.title).join(', ')}.` : '';
        const issueText = issues.length > 0 ?
            `Critical issues requiring attention: ${issues.length} items identified.` :
            'No critical issues identified.';
        return `The Perfect Codebase Campaign is ${statusText} with ${progress}% overall completion. ${achievementText} ${issueText}`;
    }
    generateTimeSeriesData(snapshots) {
        return snapshots.map(snapshot => ({
            timestamp: snapshot.timestamp,
            typeScriptErrors: snapshot.metrics.typeScriptErrors.current,
            lintingWarnings: snapshot.metrics.lintingWarnings.current,
            buildTime: snapshot.metrics.buildPerformance.currentTime,
            enterpriseSystems: snapshot.metrics.enterpriseSystems.current
        }));
    }
    generatePhaseProgressChart(phaseValidations) {
        return phaseValidations.map(phase => ({
            phase: phase.phaseName,
            progress: phase.completionPercentage,
            target: 100,
            status: phase.overallSuccess ? campaign_1.PhaseStatus.COMPLETED : campaign_1.PhaseStatus.IN_PROGRESS
        }));
    }
    generateErrorDistributionChart(metrics) {
        const errorBreakdown = metrics.errorBreakdown || {};
        const totalErrors = Object.values(errorBreakdown).reduce((sum, count) => sum + count, 0);
        return Object.entries(errorBreakdown).map(([errorType, count]) => ({
            errorType,
            count,
            percentage: totalErrors > 0 ? Math.round((count / totalErrors) * 100) : 0
        }));
    }
    generatePerformanceTrendChart(snapshots) {
        return snapshots.map(snapshot => ({
            timestamp: snapshot.timestamp,
            buildTime: snapshot.metrics.buildPerformance.currentTime,
            memoryUsage: snapshot.metrics.buildPerformance.memoryUsage,
            cacheHitRate: snapshot.metrics.buildPerformance.cacheHitRate
        }));
    }
    generateHTMLReport(report) {
        return `
<!DOCTYPE html>
<html>
<head>
    <title>Perfect Codebase Campaign Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .header { background: #f5f5f5; padding: 20px; border-radius: 8px; }
        .status-${report.overallStatus.toLowerCase()} { color: ${this.getStatusColor(report.overallStatus)}; }
        .progress-bar { background: #e0e0e0; height: 20px; border-radius: 10px; overflow: hidden; }
        .progress-fill { background: #4caf50; height: 100%; transition: width 0.3s; }
        .phase { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .achievement { background: #e8f5e8; padding: 10px; margin: 5px 0; border-radius: 5px; }
        .issue { background: #ffe8e8; padding: 10px; margin: 5px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Perfect Codebase Campaign Report</h1>
        <p>Generated: ${report.generatedAt.toLocaleString()}</p>
        <p class="status-${report.overallStatus.toLowerCase()}">Status: ${report.overallStatus}</p>
        <div class="progress-bar">
            <div class="progress-fill" style="width: ${report.overallProgress}%"></div>
        </div>
        <p>Progress: ${report.overallProgress}%</p>
    </div>

    <h2>Executive Summary</h2>
    <p>${report.executiveSummary}</p>

    <h2>Phase Progress</h2>
    ${report.phases.map(phase => `
        <div class="phase">
            <h3>${phase.phaseName}</h3>
            <p>Status: ${phase.status}</p>
            <p>Progress: ${phase.progress}%</p>
            <p>Blockers: ${phase.blockers.length > 0 ? phase.blockers.join(', ') : 'None'}</p>
        </div>
    `).join('')}

    <h2>Key Achievements</h2>
    ${report.keyAchievements.map(achievement => `
        <div class="achievement">
            <h4>${achievement.title}</h4>
            <p>${achievement.description}</p>
            <p>Impact: ${achievement.impact}</p>
        </div>
    `).join('')}

    <h2>Critical Issues</h2>
    ${report.criticalIssues.map(issue => `
        <div class="issue">
            <h4>${issue.title}</h4>
            <p>${issue.description}</p>
            <p>Severity: ${issue.severity}</p>
        </div>
    `).join('')}
</body>
</html>`;
    }
    generateMarkdownReport(report) {
        return `# Perfect Codebase Campaign Report

**Generated:** ${report.generatedAt.toISOString()}
**Status:** ${report.overallStatus}
**Progress:** ${report.overallProgress}%

## Executive Summary

${report.executiveSummary}

## Phase Progress

${report.phases.map(phase => `
### ${phase.phaseName}
- **Status:** ${phase.status}
- **Progress:** ${phase.progress}%
- **Blockers:** ${phase.blockers.length > 0 ? phase.blockers.join(', ') : 'None'}
`).join('')}

## Key Achievements

${report.keyAchievements.map(achievement => `
### ${achievement.title}
${achievement.description}
- **Impact:** ${achievement.impact}
- **Phase:** ${achievement.phase}
`).join('')}

## Critical Issues

${report.criticalIssues.map(issue => `
### ${issue.title}
${issue.description}
- **Severity:** ${issue.severity}
- **Phase:** ${issue.phase}
`).join('')}

## Performance Metrics

- **TypeScript Errors:** ${report.performanceMetrics.typeScriptErrors.current} (${report.performanceMetrics.typeScriptErrors.reduction} reduced)
- **Linting Warnings:** ${report.performanceMetrics.lintingWarnings.current} (${report.performanceMetrics.lintingWarnings.reduction} reduced)
- **Build Time:** ${report.performanceMetrics.buildPerformance.currentTime}s (target: ${report.performanceMetrics.buildPerformance.targetTime}s)
- **Enterprise Systems:** ${report.performanceMetrics.enterpriseSystems.current} (target: ${report.performanceMetrics.enterpriseSystems.target})
`;
    }
    generateCSVReport(report) {
        const headers = ['Phase', 'Status', 'Progress', 'Blockers'];
        const rows = report.phases.map(phase => [
            phase.phaseName,
            phase.status,
            phase.progress.toString(),
            phase.blockers.join('; ')
        ]);
        return [headers, ...rows].map(row => row.join(',')).join('\n');
    }
    generateRecentActivity() {
        // This would be implemented with actual activity tracking
        return [
            {
                timestamp: new Date(),
                type: 'milestone',
                description: 'Phase validation completed',
                phase: 'phase1'
            }
        ];
    }
    // Helper methods
    extractKeyMetrics(validation) {
        return {
            completionPercentage: validation.completionPercentage,
            milestonesCompleted: validation.milestones.filter(m => m.success).length,
            totalMilestones: validation.milestones.length,
            criticalFailures: validation.criticalFailures.length
        };
    }
    generatePhaseAchievements(validation, metrics) {
        return validation.milestones
            .filter(m => m.success)
            .map(m => `${m.milestone} completed successfully`);
    }
    generatePhaseIssues(validation) {
        return validation.criticalFailures;
    }
    generatePhaseRecommendations(validation) {
        return validation.nextSteps;
    }
    estimateResolutionTime(failure) {
        // Simple heuristic based on failure type
        if (failure.includes('TypeScript'))
            return 4;
        if (failure.includes('linting'))
            return 2;
        if (failure.includes('build'))
            return 6;
        return 3;
    }
    determinePriority(step) {
        if (step.includes('critical') || step.includes('blocker'))
            return RecommendationPriority.URGENT;
        if (step.includes('error') || step.includes('failure'))
            return RecommendationPriority.HIGH;
        return RecommendationPriority.MEDIUM;
    }
    estimateImpact(step) {
        if (step.includes('zero') || step.includes('complete'))
            return 'High - Milestone completion';
        if (step.includes('reduce') || step.includes('improve'))
            return 'Medium - Incremental improvement';
        return 'Low - Maintenance task';
    }
    generateActionItems(step) {
        // Generate specific action items based on the step
        return [
            `Execute: ${step}`,
            'Validate results',
            'Update progress tracking'
        ];
    }
    getStatusColor(status) {
        switch (status) {
            case CampaignStatus.COMPLETED: return '#4caf50';
            case CampaignStatus.IN_PROGRESS: return '#2196f3';
            case CampaignStatus.BLOCKED: return '#ff9800';
            case CampaignStatus.FAILED: return '#f44336';
            default: return '#757575';
        }
    }
    /**
     * Get report history
     */
    getReportHistory() {
        return [...this.reportHistory];
    }
    /**
     * Clear report history
     */
    clearReportHistory() {
        this.reportHistory = [];
        console.log('ðŸ“Š Report history cleared');
    }
}
exports.ProgressReportingSystem = ProgressReportingSystem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Qcm9ncmVzc1JlcG9ydGluZ1N5c3RlbS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCx1Q0FBeUI7QUFHekIsbURBSzhCO0FBRTlCLHVFQUFzRztBQUN0RywyRUFBK0Y7QUE4SC9GLElBQVksY0FNWDtBQU5ELFdBQVksY0FBYztJQUN4Qiw2Q0FBMkIsQ0FBQTtJQUMzQiw2Q0FBMkIsQ0FBQTtJQUMzQix5Q0FBdUIsQ0FBQTtJQUN2QixxQ0FBbUIsQ0FBQTtJQUNuQixtQ0FBaUIsQ0FBQTtBQUNuQixDQUFDLEVBTlcsY0FBYyw4QkFBZCxjQUFjLFFBTXpCO0FBRUQsSUFBWSxpQkFLWDtBQUxELFdBQVksaUJBQWlCO0lBQzNCLGdDQUFXLENBQUE7SUFDWCxzQ0FBaUIsQ0FBQTtJQUNqQixrQ0FBYSxDQUFBO0lBQ2IsMENBQXFCLENBQUE7QUFDdkIsQ0FBQyxFQUxXLGlCQUFpQixpQ0FBakIsaUJBQWlCLFFBSzVCO0FBRUQsSUFBWSxhQU1YO0FBTkQsV0FBWSxhQUFhO0lBQ3ZCLDRCQUFXLENBQUE7SUFDWCxrQ0FBaUIsQ0FBQTtJQUNqQiw4QkFBYSxDQUFBO0lBQ2Isc0NBQXFCLENBQUE7SUFDckIsb0NBQW1CLENBQUE7QUFDckIsQ0FBQyxFQU5XLGFBQWEsNkJBQWIsYUFBYSxRQU14QjtBQUVELElBQVksc0JBS1g7QUFMRCxXQUFZLHNCQUFzQjtJQUNoQyxxQ0FBVyxDQUFBO0lBQ1gsMkNBQWlCLENBQUE7SUFDakIsdUNBQWEsQ0FBQTtJQUNiLDJDQUFpQixDQUFBO0FBQ25CLENBQUMsRUFMVyxzQkFBc0Isc0NBQXRCLHNCQUFzQixRQUtqQztBQUVELE1BQWEsdUJBQXVCO0lBQzFCLGdCQUFnQixDQUEwQjtJQUMxQyxnQkFBZ0IsQ0FBNEI7SUFDNUMsYUFBYSxHQUE0QixFQUFFLENBQUM7SUFFcEQ7UUFDRSxJQUFJ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QyxDQUFDLE9BQU8sU0FBUyxDQUFDO1lBQ2xELEtBQUssY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sU0FBUyxDQUFDO1lBQzlDLEtBQUssY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sU0FBUyxDQUFDO1lBQzdDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sU0FBUyxDQUFDO1NBQzNCO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZ0JBQWdCO1FBQ2QsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7T0FFRztJQUNILGtCQUFrQjtRQUNoQixJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQztRQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFDM0MsQ0FBQztDQUNGO0FBOXBCRCwwREE4cEJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvc2VydmljZXMvY2FtcGFpZ24vUHJvZ3Jlc3NSZXBvcnRpbmdTeXN0ZW0udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQcm9ncmVzcyBSZXBvcnRpbmcgU3lzdGVtXG4gKiBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIC0gQ29tcHJlaGVuc2l2ZSBQcm9ncmVzcyBSZXBvcnRzXG4gKiBSZXF1aXJlbWVudHM6IDYuNCwgNi44XG4gKi9cblxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHtcbiAgUHJvZ3Jlc3NNZXRyaWNzLFxuICBQaGFzZVJlcG9ydCxcbiAgUHJvZ3Jlc3NSZXBvcnQsXG4gIFBoYXNlU3RhdHVzXG59IGZyb20gJy4uLy4uL3R5cGVzL2NhbXBhaWduJztcblxuaW1wb3J0IHsgTWV0cmljc0NvbGxlY3Rpb25TeXN0ZW0sIERldGFpbGVkTWV0cmljcywgTWV0cmljc1NuYXBzaG90IH0gZnJvbSAnLi9NZXRyaWNzQ29sbGVjdGlvblN5c3RlbSc7XG5pbXBvcnQgeyBNaWxlc3RvbmVWYWxpZGF0aW9uU3lzdGVtLCBQaGFzZVZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICcuL01pbGVzdG9uZVZhbGlkYXRpb25TeXN0ZW0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduU3VtbWFyeVJlcG9ydCB7XG4gIGNhbXBhaWduSWQ6IHN0cmluZztcbiAgZ2VuZXJhdGVkQXQ6IERhdGU7XG4gIG92ZXJhbGxTdGF0dXM6IENhbXBhaWduU3RhdHVzO1xuICBvdmVyYWxsUHJvZ3Jlc3M6IG51bWJlcjtcbiAgcGhhc2VzOiBQaGFzZVByb2dyZXNzU3VtbWFyeVtdO1xuICBrZXlBY2hpZXZlbWVudHM6IEFjaGlldmVtZW50W107XG4gIGNyaXRpY2FsSXNzdWVzOiBJc3N1ZVtdO1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IFBlcmZvcm1hbmNlU25hcHNob3Q7XG4gIHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXTtcbiAgZXN0aW1hdGVkQ29tcGxldGlvbjogRGF0ZTtcbiAgZXhlY3V0aXZlU3VtbWFyeTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBoYXNlUHJvZ3Jlc3NTdW1tYXJ5IHtcbiAgcGhhc2VJZDogc3RyaW5nO1xuICBwaGFzZU5hbWU6IHN0cmluZztcbiAgc3RhdHVzOiBQaGFzZVN0YXR1cztcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgc3RhcnREYXRlPzogRGF0ZTtcbiAgY29tcGxldGlvbkRhdGU/OiBEYXRlO1xuICBkdXJhdGlvbj86IG51bWJlcjsgLy8gaW4gaG91cnNcbiAga2V5TWV0cmljczogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgbWlsZXN0b25lczogTWlsZXN0b25lU3VtbWFyeVtdO1xuICBibG9ja2Vyczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWlsZXN0b25lU3VtbWFyeSB7XG4gIG5hbWU6IHN0cmluZztcbiAgY29tcGxldGVkOiBib29sZWFuO1xuICBjb21wbGV0aW9uRGF0ZT86IERhdGU7XG4gIGNyaXRpY2FsUGF0aDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY2hpZXZlbWVudCB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHBoYXNlOiBzdHJpbmc7XG4gIGFjaGlldmVkQXQ6IERhdGU7XG4gIGltcGFjdDogQWNoaWV2ZW1lbnRJbXBhY3Q7XG4gIG1ldHJpY3M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXNzdWUge1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwaGFzZTogc3RyaW5nO1xuICBzZXZlcml0eTogSXNzdWVTZXZlcml0eTtcbiAgZGV0ZWN0ZWRBdDogRGF0ZTtcbiAgcmVzb2x1dGlvbj86IHN0cmluZztcbiAgZXN0aW1hdGVkUmVzb2x1dGlvblRpbWU/OiBudW1iZXI7IC8vIGluIGhvdXJzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VTbmFwc2hvdCB7XG4gIHR5cGVTY3JpcHRFcnJvcnM6IHtcbiAgICBpbml0aWFsOiBudW1iZXI7XG4gICAgY3VycmVudDogbnVtYmVyO1xuICAgIHJlZHVjdGlvbjogbnVtYmVyO1xuICAgIHJlZHVjdGlvblJhdGU6IG51bWJlcjsgLy8gcGVyIGhvdXJcbiAgfTtcbiAgbGludGluZ1dhcm5pbmdzOiB7XG4gICAgaW5pdGlhbDogbnVtYmVyO1xuICAgIGN1cnJlbnQ6IG51bWJlcjtcbiAgICByZWR1Y3Rpb246IG51bWJlcjtcbiAgICByZWR1Y3Rpb25SYXRlOiBudW1iZXI7IC8vIHBlciBob3VyXG4gIH07XG4gIGJ1aWxkUGVyZm9ybWFuY2U6IHtcbiAgICBjdXJyZW50VGltZTogbnVtYmVyO1xuICAgIHRhcmdldFRpbWU6IG51bWJlcjtcbiAgICBpbXByb3ZlbWVudDogbnVtYmVyO1xuICAgIGNhY2hlRWZmaWNpZW5jeTogbnVtYmVyO1xuICB9O1xuICBlbnRlcnByaXNlU3lzdGVtczoge1xuICAgIGluaXRpYWw6IG51bWJlcjtcbiAgICBjdXJyZW50OiBudW1iZXI7XG4gICAgdGFyZ2V0OiBudW1iZXI7XG4gICAgZ3Jvd3RoUmF0ZTogbnVtYmVyOyAvLyBwZXIgaG91clxuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZGF0aW9uIHtcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHJpb3JpdHk6IFJlY29tbWVuZGF0aW9uUHJpb3JpdHk7XG4gIHBoYXNlOiBzdHJpbmc7XG4gIGVzdGltYXRlZEltcGFjdDogc3RyaW5nO1xuICBhY3Rpb25JdGVtczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlzdWFsaXphdGlvbkRhdGEge1xuICB0aW1lU2VyaWVzRGF0YTogVGltZVNlcmllc1BvaW50W107XG4gIHBoYXNlUHJvZ3Jlc3NDaGFydDogUGhhc2VQcm9ncmVzc1BvaW50W107XG4gIGVycm9yRGlzdHJpYnV0aW9uQ2hhcnQ6IEVycm9yRGlzdHJpYnV0aW9uUG9pbnRbXTtcbiAgcGVyZm9ybWFuY2VUcmVuZENoYXJ0OiBQZXJmb3JtYW5jZVRyZW5kUG9pbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lU2VyaWVzUG9pbnQge1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHR5cGVTY3JpcHRFcnJvcnM6IG51bWJlcjtcbiAgbGludGluZ1dhcm5pbmdzOiBudW1iZXI7XG4gIGJ1aWxkVGltZTogbnVtYmVyO1xuICBlbnRlcnByaXNlU3lzdGVtczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBoYXNlUHJvZ3Jlc3NQb2ludCB7XG4gIHBoYXNlOiBzdHJpbmc7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIHRhcmdldDogbnVtYmVyO1xuICBzdGF0dXM6IFBoYXNlU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yRGlzdHJpYnV0aW9uUG9pbnQge1xuICBlcnJvclR5cGU6IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbiAgcGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlVHJlbmRQb2ludCB7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgYnVpbGRUaW1lOiBudW1iZXI7XG4gIG1lbW9yeVVzYWdlOiBudW1iZXI7XG4gIGNhY2hlSGl0UmF0ZTogbnVtYmVyO1xufVxuXG5leHBvcnQgZW51bSBDYW1wYWlnblN0YXR1cyB7XG4gIE5PVF9TVEFSVEVEID0gJ05PVF9TVEFSVEVEJyxcbiAgSU5fUFJPR1JFU1MgPSAnSU5fUFJPR1JFU1MnLFxuICBDT01QTEVURUQgPSAnQ09NUExFVEVEJyxcbiAgQkxPQ0tFRCA9ICdCTE9DS0VEJyxcbiAgRkFJTEVEID0gJ0ZBSUxFRCdcbn1cblxuZXhwb3J0IGVudW0gQWNoaWV2ZW1lbnRJbXBhY3Qge1xuICBMT1cgPSAnTE9XJyxcbiAgTUVESVVNID0gJ01FRElVTScsXG4gIEhJR0ggPSAnSElHSCcsXG4gIENSSVRJQ0FMID0gJ0NSSVRJQ0FMJ1xufVxuXG5leHBvcnQgZW51bSBJc3N1ZVNldmVyaXR5IHtcbiAgTE9XID0gJ0xPVycsXG4gIE1FRElVTSA9ICdNRURJVU0nLFxuICBISUdIID0gJ0hJR0gnLFxuICBDUklUSUNBTCA9ICdDUklUSUNBTCcsXG4gIEJMT0NLRVIgPSAnQkxPQ0tFUidcbn1cblxuZXhwb3J0IGVudW0gUmVjb21tZW5kYXRpb25Qcmlvcml0eSB7XG4gIExPVyA9ICdMT1cnLFxuICBNRURJVU0gPSAnTUVESVVNJyxcbiAgSElHSCA9ICdISUdIJyxcbiAgVVJHRU5UID0gJ1VSR0VOVCdcbn1cblxuZXhwb3J0IGNsYXNzIFByb2dyZXNzUmVwb3J0aW5nU3lzdGVtIHtcbiAgcHJpdmF0ZSBtZXRyaWNzQ29sbGVjdG9yOiBNZXRyaWNzQ29sbGVjdGlvblN5c3RlbTtcbiAgcHJpdmF0ZSB2YWxpZGF0aW9uU3lzdGVtOiBNaWxlc3RvbmVWYWxpZGF0aW9uU3lzdGVtO1xuICBwcml2YXRlIHJlcG9ydEhpc3Rvcnk6IENhbXBhaWduU3VtbWFyeVJlcG9ydFtdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5tZXRyaWNzQ29sbGVjdG9yID0gbmV3IE1ldHJpY3NDb2xsZWN0aW9uU3lzdGVtKCk7XG4gICAgdGhpcy52YWxpZGF0aW9uU3lzdGVtID0gbmV3IE1pbGVzdG9uZVZhbGlkYXRpb25TeXN0ZW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIGNhbXBhaWduIHN1bW1hcnkgcmVwb3J0XG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZUNhbXBhaWduU3VtbWFyeVJlcG9ydCgpOiBQcm9taXNlPENhbXBhaWduU3VtbWFyeVJlcG9ydD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5OKIEdlbmVyYXRpbmcgY29tcHJlaGVuc2l2ZSBjYW1wYWlnbiBzdW1tYXJ5IHJlcG9ydC4uLicpO1xuXG4gICAgY29uc3QgW2N1cnJlbnRNZXRyaWNzLCBwaGFzZVZhbGlkYXRpb25zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMubWV0cmljc0NvbGxlY3Rvci5jb2xsZWN0RGV0YWlsZWRNZXRyaWNzKCksXG4gICAgICB0aGlzLnZhbGlkYXRpb25TeXN0ZW0udmFsaWRhdGVBbGxQaGFzZXMoKVxuICAgIF0pO1xuXG4gICAgY29uc3Qgb3ZlcmFsbFN0YXR1cyA9IHRoaXMuZGV0ZXJtaW5lT3ZlcmFsbFN0YXR1cyhwaGFzZVZhbGlkYXRpb25zKTtcbiAgICBjb25zdCBvdmVyYWxsUHJvZ3Jlc3MgPSB0aGlzLmNhbGN1bGF0ZU92ZXJhbGxQcm9ncmVzcyhwaGFzZVZhbGlkYXRpb25zKTtcbiAgICBjb25zdCBwaGFzZXMgPSB0aGlzLmdlbmVyYXRlUGhhc2VQcm9ncmVzc1N1bW1hcmllcyhwaGFzZVZhbGlkYXRpb25zKTtcbiAgICBjb25zdCBrZXlBY2hpZXZlbWVudHMgPSB0aGlzLmlkZW50aWZ5S2V5QWNoaWV2ZW1lbnRzKGN1cnJlbnRNZXRyaWNzLCBwaGFzZVZhbGlkYXRpb25zKTtcbiAgICBjb25zdCBjcml0aWNhbElzc3VlcyA9IHRoaXMuaWRlbnRpZnlDcml0aWNhbElzc3VlcyhwaGFzZVZhbGlkYXRpb25zKTtcbiAgICBjb25zdCBwZXJmb3JtYW5jZU1ldHJpY3MgPSB0aGlzLmNyZWF0ZVBlcmZvcm1hbmNlU25hcHNob3QoY3VycmVudE1ldHJpY3MpO1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IHRoaXMuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMocGhhc2VWYWxpZGF0aW9ucywgY3VycmVudE1ldHJpY3MpO1xuICAgIGNvbnN0IGVzdGltYXRlZENvbXBsZXRpb24gPSB0aGlzLmVzdGltYXRlQ29tcGxldGlvbkRhdGUob3ZlcmFsbFByb2dyZXNzLCBjdXJyZW50TWV0cmljcyk7XG4gICAgY29uc3QgZXhlY3V0aXZlU3VtbWFyeSA9IHRoaXMuZ2VuZXJhdGVFeGVjdXRpdmVTdW1tYXJ5KFxuICAgICAgb3ZlcmFsbFN0YXR1cyxcbiAgICAgIG92ZXJhbGxQcm9ncmVzcyxcbiAgICAgIGtleUFjaGlldmVtZW50cyxcbiAgICAgIGNyaXRpY2FsSXNzdWVzXG4gICAgKTtcblxuICAgIGNvbnN0IHJlcG9ydDogQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0ID0ge1xuICAgICAgY2FtcGFpZ25JZDogJ3BlcmZlY3QtY29kZWJhc2UtY2FtcGFpZ24nLFxuICAgICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBvdmVyYWxsU3RhdHVzLFxuICAgICAgb3ZlcmFsbFByb2dyZXNzLFxuICAgICAgcGhhc2VzLFxuICAgICAga2V5QWNoaWV2ZW1lbnRzLFxuICAgICAgY3JpdGljYWxJc3N1ZXMsXG4gICAgICBwZXJmb3JtYW5jZU1ldHJpY3MsXG4gICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICBlc3RpbWF0ZWRDb21wbGV0aW9uLFxuICAgICAgZXhlY3V0aXZlU3VtbWFyeVxuICAgIH07XG5cbiAgICB0aGlzLnJlcG9ydEhpc3RvcnkucHVzaChyZXBvcnQpO1xuICAgIGNvbnNvbGUubG9nKGDinIUgQ2FtcGFpZ24gc3VtbWFyeSByZXBvcnQgZ2VuZXJhdGVkOiAke292ZXJhbGxQcm9ncmVzc30lIGNvbXBsZXRlYCk7XG5cbiAgICByZXR1cm4gcmVwb3J0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGRldGFpbGVkIHBoYXNlIGNvbXBsZXRpb24gcmVwb3J0XG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVBoYXNlQ29tcGxldGlvblJlcG9ydChwaGFzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFBoYXNlUmVwb3J0PiB7XG4gICAgY29uc29sZS5sb2coYPCfk4ogR2VuZXJhdGluZyBwaGFzZSBjb21wbGV0aW9uIHJlcG9ydCBmb3IgJHtwaGFzZUlkfS4uLmApO1xuXG4gICAgY29uc3QgY3VycmVudE1ldHJpY3MgPSBhd2FpdCB0aGlzLm1ldHJpY3NDb2xsZWN0b3IuY29sbGVjdERldGFpbGVkTWV0cmljcygpO1xuICAgIGxldCBwaGFzZVZhbGlkYXRpb246IFBoYXNlVmFsaWRhdGlvblJlc3VsdDtcblxuICAgIHN3aXRjaCAocGhhc2VJZCkge1xuICAgICAgY2FzZSAncGhhc2UxJzpcbiAgICAgICAgcGhhc2VWYWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0aW9uU3lzdGVtLnZhbGlkYXRlUGhhc2UxKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGhhc2UyJzpcbiAgICAgICAgcGhhc2VWYWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0aW9uU3lzdGVtLnZhbGlkYXRlUGhhc2UyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGhhc2UzJzpcbiAgICAgICAgcGhhc2VWYWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0aW9uU3lzdGVtLnZhbGlkYXRlUGhhc2UzKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGhhc2U0JzpcbiAgICAgICAgcGhhc2VWYWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0aW9uU3lzdGVtLnZhbGlkYXRlUGhhc2U0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHBoYXNlOiAke3BoYXNlSWR9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWNoaWV2ZW1lbnRzID0gdGhpcy5nZW5lcmF0ZVBoYXNlQWNoaWV2ZW1lbnRzKHBoYXNlVmFsaWRhdGlvbiwgY3VycmVudE1ldHJpY3MpO1xuICAgIGNvbnN0IGlzc3VlcyA9IHRoaXMuZ2VuZXJhdGVQaGFzZUlzc3VlcyhwaGFzZVZhbGlkYXRpb24pO1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IHRoaXMuZ2VuZXJhdGVQaGFzZVJlY29tbWVuZGF0aW9ucyhwaGFzZVZhbGlkYXRpb24pO1xuXG4gICAgY29uc3QgcmVwb3J0OiBQaGFzZVJlcG9ydCA9IHtcbiAgICAgIHBoYXNlSWQ6IHBoYXNlVmFsaWRhdGlvbi5waGFzZUlkLFxuICAgICAgcGhhc2VOYW1lOiBwaGFzZVZhbGlkYXRpb24ucGhhc2VOYW1lLFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLCAvLyBUaGlzIHNob3VsZCBiZSB0cmFja2VkIHByb3Blcmx5IGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvblxuICAgICAgZW5kVGltZTogcGhhc2VWYWxpZGF0aW9uLm92ZXJhbGxTdWNjZXNzID8gbmV3IERhdGUoKSA6IHVuZGVmaW5lZCxcbiAgICAgIHN0YXR1czogcGhhc2VWYWxpZGF0aW9uLm92ZXJhbGxTdWNjZXNzID8gUGhhc2VTdGF0dXMuQ09NUExFVEVEIDogUGhhc2VTdGF0dXMuSU5fUFJPR1JFU1MsXG4gICAgICBtZXRyaWNzOiBjdXJyZW50TWV0cmljcyxcbiAgICAgIGFjaGlldmVtZW50cyxcbiAgICAgIGlzc3VlcyxcbiAgICAgIHJlY29tbWVuZGF0aW9uc1xuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIFBoYXNlICR7cGhhc2VJZH0gcmVwb3J0IGdlbmVyYXRlZDogJHtwaGFzZVZhbGlkYXRpb24ub3ZlcmFsbFN1Y2Nlc3MgPyAnQ09NUExFVEVEJyA6ICdJTiBQUk9HUkVTUyd9YCk7XG4gICAgcmV0dXJuIHJlcG9ydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB2aXN1YWxpemF0aW9uIGRhdGEgZm9yIGNoYXJ0cyBhbmQgZ3JhcGhzXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVZpc3VhbGl6YXRpb25EYXRhKCk6IFByb21pc2U8VmlzdWFsaXphdGlvbkRhdGE+IHtcbiAgICBjb25zb2xlLmxvZygn8J+TiiBHZW5lcmF0aW5nIHZpc3VhbGl6YXRpb24gZGF0YS4uLicpO1xuXG4gICAgY29uc3Qgc25hcHNob3RzID0gdGhpcy5tZXRyaWNzQ29sbGVjdG9yLmdldFNuYXBzaG90cygpO1xuICAgIGNvbnN0IHBoYXNlVmFsaWRhdGlvbnMgPSBhd2FpdCB0aGlzLnZhbGlkYXRpb25TeXN0ZW0udmFsaWRhdGVBbGxQaGFzZXMoKTtcbiAgICBjb25zdCBjdXJyZW50TWV0cmljcyA9IGF3YWl0IHRoaXMubWV0cmljc0NvbGxlY3Rvci5jb2xsZWN0RGV0YWlsZWRNZXRyaWNzKCk7XG5cbiAgICBjb25zdCB0aW1lU2VyaWVzRGF0YSA9IHRoaXMuZ2VuZXJhdGVUaW1lU2VyaWVzRGF0YShzbmFwc2hvdHMpO1xuICAgIGNvbnN0IHBoYXNlUHJvZ3Jlc3NDaGFydCA9IHRoaXMuZ2VuZXJhdGVQaGFzZVByb2dyZXNzQ2hhcnQocGhhc2VWYWxpZGF0aW9ucyk7XG4gICAgY29uc3QgZXJyb3JEaXN0cmlidXRpb25DaGFydCA9IHRoaXMuZ2VuZXJhdGVFcnJvckRpc3RyaWJ1dGlvbkNoYXJ0KGN1cnJlbnRNZXRyaWNzKTtcbiAgICBjb25zdCBwZXJmb3JtYW5jZVRyZW5kQ2hhcnQgPSB0aGlzLmdlbmVyYXRlUGVyZm9ybWFuY2VUcmVuZENoYXJ0KHNuYXBzaG90cyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGltZVNlcmllc0RhdGEsXG4gICAgICBwaGFzZVByb2dyZXNzQ2hhcnQsXG4gICAgICBlcnJvckRpc3RyaWJ1dGlvbkNoYXJ0LFxuICAgICAgcGVyZm9ybWFuY2VUcmVuZENoYXJ0XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvcnQgY29tcHJlaGVuc2l2ZSByZXBvcnQgdG8gbXVsdGlwbGUgZm9ybWF0c1xuICAgKi9cbiAgYXN5bmMgZXhwb3J0UmVwb3J0KFxuICAgIHJlcG9ydDogQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0LFxuICAgIGZvcm1hdHM6ICgnanNvbicgfCAnaHRtbCcgfCAnbWFya2Rvd24nIHwgJ2NzdicpW10gPSBbJ2pzb24nXVxuICApOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgZXhwb3J0ZWRGaWxlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICAgIGNvbnN0IGJhc2VGaWxlTmFtZSA9IGBjYW1wYWlnbi1yZXBvcnQtJHt0aW1lc3RhbXB9YDtcblxuICAgIGZvciAoY29uc3QgZm9ybWF0IG9mIGZvcm1hdHMpIHtcbiAgICAgIGxldCBmaWxlUGF0aDogc3RyaW5nO1xuICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZztcblxuICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgY2FzZSAnanNvbic6XG4gICAgICAgICAgZmlsZVBhdGggPSBgJHtiYXNlRmlsZU5hbWV9Lmpzb25gO1xuICAgICAgICAgIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShyZXBvcnQsIG51bGwsIDIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgICAgIGZpbGVQYXRoID0gYCR7YmFzZUZpbGVOYW1lfS5odG1sYDtcbiAgICAgICAgICBjb250ZW50ID0gdGhpcy5nZW5lcmF0ZUhUTUxSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdtYXJrZG93bic6XG4gICAgICAgICAgZmlsZVBhdGggPSBgJHtiYXNlRmlsZU5hbWV9Lm1kYDtcbiAgICAgICAgICBjb250ZW50ID0gdGhpcy5nZW5lcmF0ZU1hcmtkb3duUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnY3N2JzpcbiAgICAgICAgICBmaWxlUGF0aCA9IGAke2Jhc2VGaWxlTmFtZX0uY3N2YDtcbiAgICAgICAgICBjb250ZW50ID0gdGhpcy5nZW5lcmF0ZUNTVlJlcG9ydChyZXBvcnQpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgZXhwb3J0ZWRGaWxlcy5wdXNoKGZpbGVQYXRoKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OEIFJlcG9ydCBleHBvcnRlZCB0bzogJHtmaWxlUGF0aH1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXhwb3J0ZWRGaWxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSByZWFsLXRpbWUgZGFzaGJvYXJkIGRhdGFcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlRGFzaGJvYXJkRGF0YSgpOiBQcm9taXNlPHtcbiAgICBzdW1tYXJ5OiBDYW1wYWlnblN1bW1hcnlSZXBvcnQ7XG4gICAgdmlzdWFsaXphdGlvbjogVmlzdWFsaXphdGlvbkRhdGE7XG4gICAgcmVjZW50QWN0aXZpdHk6IEFjdGl2aXR5SXRlbVtdO1xuICB9PiB7XG4gICAgY29uc3QgW3N1bW1hcnksIHZpc3VhbGl6YXRpb25dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5nZW5lcmF0ZUNhbXBhaWduU3VtbWFyeVJlcG9ydCgpLFxuICAgICAgdGhpcy5nZW5lcmF0ZVZpc3VhbGl6YXRpb25EYXRhKClcbiAgICBdKTtcblxuICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5ID0gdGhpcy5nZW5lcmF0ZVJlY2VudEFjdGl2aXR5KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VtbWFyeSxcbiAgICAgIHZpc3VhbGl6YXRpb24sXG4gICAgICByZWNlbnRBY3Rpdml0eVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVPdmVyYWxsU3RhdHVzKHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdKTogQ2FtcGFpZ25TdGF0dXMge1xuICAgIGNvbnN0IGNvbXBsZXRlZFBoYXNlcyA9IHBoYXNlVmFsaWRhdGlvbnMuZmlsdGVyKHAgPT4gcC5vdmVyYWxsU3VjY2VzcykubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsUGhhc2VzID0gcGhhc2VWYWxpZGF0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgaGFzQmxvY2tlcnMgPSBwaGFzZVZhbGlkYXRpb25zLnNvbWUocCA9PiBwLmNyaXRpY2FsRmFpbHVyZXMubGVuZ3RoID4gMCk7XG5cbiAgICBpZiAoY29tcGxldGVkUGhhc2VzID09PSB0b3RhbFBoYXNlcykge1xuICAgICAgcmV0dXJuIENhbXBhaWduU3RhdHVzLkNPTVBMRVRFRDtcbiAgICB9IGVsc2UgaWYgKGhhc0Jsb2NrZXJzKSB7XG4gICAgICByZXR1cm4gQ2FtcGFpZ25TdGF0dXMuQkxPQ0tFRDtcbiAgICB9IGVsc2UgaWYgKGNvbXBsZXRlZFBoYXNlcyA+IDApIHtcbiAgICAgIHJldHVybiBDYW1wYWlnblN0YXR1cy5JTl9QUk9HUkVTUztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENhbXBhaWduU3RhdHVzLk5PVF9TVEFSVEVEO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlT3ZlcmFsbFByb2dyZXNzKHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdKTogbnVtYmVyIHtcbiAgICBpZiAocGhhc2VWYWxpZGF0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiAwO1xuICAgIFxuICAgIGNvbnN0IHRvdGFsUHJvZ3Jlc3MgPSBwaGFzZVZhbGlkYXRpb25zLnJlZHVjZSgoc3VtLCBwaGFzZSkgPT4gc3VtICsgcGhhc2UuY29tcGxldGlvblBlcmNlbnRhZ2UsIDApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsUHJvZ3Jlc3MgLyBwaGFzZVZhbGlkYXRpb25zLmxlbmd0aCk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUGhhc2VQcm9ncmVzc1N1bW1hcmllcyhwaGFzZVZhbGlkYXRpb25zOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRbXSk6IFBoYXNlUHJvZ3Jlc3NTdW1tYXJ5W10ge1xuICAgIHJldHVybiBwaGFzZVZhbGlkYXRpb25zLm1hcCh2YWxpZGF0aW9uID0+ICh7XG4gICAgICBwaGFzZUlkOiB2YWxpZGF0aW9uLnBoYXNlSWQsXG4gICAgICBwaGFzZU5hbWU6IHZhbGlkYXRpb24ucGhhc2VOYW1lLFxuICAgICAgc3RhdHVzOiB2YWxpZGF0aW9uLm92ZXJhbGxTdWNjZXNzID8gUGhhc2VTdGF0dXMuQ09NUExFVEVEIDogUGhhc2VTdGF0dXMuSU5fUFJPR1JFU1MsXG4gICAgICBwcm9ncmVzczogdmFsaWRhdGlvbi5jb21wbGV0aW9uUGVyY2VudGFnZSxcbiAgICAgIGtleU1ldHJpY3M6IHRoaXMuZXh0cmFjdEtleU1ldHJpY3ModmFsaWRhdGlvbiksXG4gICAgICBtaWxlc3RvbmVzOiB2YWxpZGF0aW9uLm1pbGVzdG9uZXMubWFwKG0gPT4gKHtcbiAgICAgICAgbmFtZTogbS5taWxlc3RvbmUsXG4gICAgICAgIGNvbXBsZXRlZDogbS5zdWNjZXNzLFxuICAgICAgICBjb21wbGV0aW9uRGF0ZTogbS5zdWNjZXNzID8gbS50aW1lc3RhbXAgOiB1bmRlZmluZWQsXG4gICAgICAgIGNyaXRpY2FsUGF0aDogdHJ1ZSAvLyBBbGwgbWlsZXN0b25lcyBhcmUgY3JpdGljYWwgaW4gdGhpcyBjYW1wYWlnblxuICAgICAgfSkpLFxuICAgICAgYmxvY2tlcnM6IHZhbGlkYXRpb24uY3JpdGljYWxGYWlsdXJlc1xuICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgaWRlbnRpZnlLZXlBY2hpZXZlbWVudHMoXG4gICAgbWV0cmljczogRGV0YWlsZWRNZXRyaWNzLFxuICAgIHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdXG4gICk6IEFjaGlldmVtZW50W10ge1xuICAgIGNvbnN0IGFjaGlldmVtZW50czogQWNoaWV2ZW1lbnRbXSA9IFtdO1xuXG4gICAgLy8gVHlwZVNjcmlwdCBlcnJvciBhY2hpZXZlbWVudHNcbiAgICBpZiAobWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQgPT09IDApIHtcbiAgICAgIGFjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgdGl0bGU6ICdaZXJvIFR5cGVTY3JpcHQgRXJyb3JzIEFjaGlldmVkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdTdWNjZXNzZnVsbHkgZWxpbWluYXRlZCBhbGwgODYgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBlcnJvcnMnLFxuICAgICAgICBwaGFzZTogJ3BoYXNlMScsXG4gICAgICAgIGFjaGlldmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGltcGFjdDogQWNoaWV2ZW1lbnRJbXBhY3QuQ1JJVElDQUwsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBlcnJvcnNFbGltaW5hdGVkOiA4NixcbiAgICAgICAgICByZWR1Y3Rpb25QZXJjZW50YWdlOiAxMDBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTGludGluZyB3YXJuaW5nIGFjaGlldmVtZW50c1xuICAgIGlmIChtZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50ID09PSAwKSB7XG4gICAgICBhY2hpZXZlbWVudHMucHVzaCh7XG4gICAgICAgIHRpdGxlOiAnWmVybyBMaW50aW5nIFdhcm5pbmdzIEFjaGlldmVkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdTdWNjZXNzZnVsbHkgZWxpbWluYXRlZCBhbGwgNCw1MDYgbGludGluZyB3YXJuaW5ncycsXG4gICAgICAgIHBoYXNlOiAncGhhc2UyJyxcbiAgICAgICAgYWNoaWV2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgaW1wYWN0OiBBY2hpZXZlbWVudEltcGFjdC5DUklUSUNBTCxcbiAgICAgICAgbWV0cmljczoge1xuICAgICAgICAgIHdhcm5pbmdzRWxpbWluYXRlZDogNDUwNixcbiAgICAgICAgICByZWR1Y3Rpb25QZXJjZW50YWdlOiAxMDBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRW50ZXJwcmlzZSBzeXN0ZW0gYWNoaWV2ZW1lbnRzXG4gICAgaWYgKG1ldHJpY3MuZW50ZXJwcmlzZVN5c3RlbXMuY3VycmVudCA+PSAyMDApIHtcbiAgICAgIGFjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgdGl0bGU6ICdFbnRlcnByaXNlIEludGVsbGlnZW5jZSBUYXJnZXQgQWNoaWV2ZWQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFN1Y2Nlc3NmdWxseSBjcmVhdGVkICR7bWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50fSBlbnRlcnByaXNlIGludGVsbGlnZW5jZSBzeXN0ZW1zYCxcbiAgICAgICAgcGhhc2U6ICdwaGFzZTMnLFxuICAgICAgICBhY2hpZXZlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBpbXBhY3Q6IEFjaGlldmVtZW50SW1wYWN0LkhJR0gsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBzeXN0ZW1zQ3JlYXRlZDogbWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50LFxuICAgICAgICAgIHRhcmdldEFjaGlldmVtZW50OiAobWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50IC8gMjAwKSAqIDEwMFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtYW5jZSBhY2hpZXZlbWVudHNcbiAgICBpZiAobWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lIDw9IDEwKSB7XG4gICAgICBhY2hpZXZlbWVudHMucHVzaCh7XG4gICAgICAgIHRpdGxlOiAnQnVpbGQgUGVyZm9ybWFuY2UgVGFyZ2V0IEFjaGlldmVkJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBCdWlsZCB0aW1lIG9wdGltaXplZCB0byAke21ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jdXJyZW50VGltZX1zICh0YXJnZXQ6IDEwcylgLFxuICAgICAgICBwaGFzZTogJ3BoYXNlNCcsXG4gICAgICAgIGFjaGlldmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGltcGFjdDogQWNoaWV2ZW1lbnRJbXBhY3QuSElHSCxcbiAgICAgICAgbWV0cmljczoge1xuICAgICAgICAgIGJ1aWxkVGltZTogbWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lLFxuICAgICAgICAgIHRhcmdldFRpbWU6IDEwLFxuICAgICAgICAgIGltcHJvdmVtZW50OiAxMCAtIG1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jdXJyZW50VGltZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWNoaWV2ZW1lbnRzO1xuICB9XG5cbiAgcHJpdmF0ZSBpZGVudGlmeUNyaXRpY2FsSXNzdWVzKHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdKTogSXNzdWVbXSB7XG4gICAgY29uc3QgaXNzdWVzOiBJc3N1ZVtdID0gW107XG5cbiAgICBwaGFzZVZhbGlkYXRpb25zLmZvckVhY2gocGhhc2UgPT4ge1xuICAgICAgcGhhc2UuY3JpdGljYWxGYWlsdXJlcy5mb3JFYWNoKGZhaWx1cmUgPT4ge1xuICAgICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgICAgdGl0bGU6IGAke3BoYXNlLnBoYXNlTmFtZX0gQ3JpdGljYWwgRmFpbHVyZWAsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGZhaWx1cmUsXG4gICAgICAgICAgcGhhc2U6IHBoYXNlLnBoYXNlSWQsXG4gICAgICAgICAgc2V2ZXJpdHk6IElzc3VlU2V2ZXJpdHkuQ1JJVElDQUwsXG4gICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBlc3RpbWF0ZWRSZXNvbHV0aW9uVGltZTogdGhpcy5lc3RpbWF0ZVJlc29sdXRpb25UaW1lKGZhaWx1cmUpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQZXJmb3JtYW5jZVNuYXBzaG90KG1ldHJpY3M6IERldGFpbGVkTWV0cmljcyk6IFBlcmZvcm1hbmNlU25hcHNob3Qge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7XG4gICAgICAgIGluaXRpYWw6IDg2LFxuICAgICAgICBjdXJyZW50OiBtZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCxcbiAgICAgICAgcmVkdWN0aW9uOiBtZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMucmVkdWN0aW9uLFxuICAgICAgICByZWR1Y3Rpb25SYXRlOiBtZXRyaWNzLnRyZW5kRGF0YS5lcnJvclJlZHVjdGlvblJhdGVcbiAgICAgIH0sXG4gICAgICBsaW50aW5nV2FybmluZ3M6IHtcbiAgICAgICAgaW5pdGlhbDogNDUwNixcbiAgICAgICAgY3VycmVudDogbWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCxcbiAgICAgICAgcmVkdWN0aW9uOiBtZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5yZWR1Y3Rpb24sXG4gICAgICAgIHJlZHVjdGlvblJhdGU6IG1ldHJpY3MudHJlbmREYXRhLndhcm5pbmdSZWR1Y3Rpb25SYXRlXG4gICAgICB9LFxuICAgICAgYnVpbGRQZXJmb3JtYW5jZToge1xuICAgICAgICBjdXJyZW50VGltZTogbWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lLFxuICAgICAgICB0YXJnZXRUaW1lOiAxMCxcbiAgICAgICAgaW1wcm92ZW1lbnQ6IG1ldHJpY3MudHJlbmREYXRhLmJ1aWxkVGltZUltcHJvdmVtZW50LFxuICAgICAgICBjYWNoZUVmZmljaWVuY3k6IG1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jYWNoZUhpdFJhdGVcbiAgICAgIH0sXG4gICAgICBlbnRlcnByaXNlU3lzdGVtczoge1xuICAgICAgICBpbml0aWFsOiAwLFxuICAgICAgICBjdXJyZW50OiBtZXRyaWNzLmVudGVycHJpc2VTeXN0ZW1zLmN1cnJlbnQsXG4gICAgICAgIHRhcmdldDogMjAwLFxuICAgICAgICBncm93dGhSYXRlOiBtZXRyaWNzLnRyZW5kRGF0YS5zeXN0ZW1Hcm93dGhSYXRlXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoXG4gICAgcGhhc2VWYWxpZGF0aW9uczogUGhhc2VWYWxpZGF0aW9uUmVzdWx0W10sXG4gICAgbWV0cmljczogRGV0YWlsZWRNZXRyaWNzXG4gICk6IFJlY29tbWVuZGF0aW9uW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSA9IFtdO1xuXG4gICAgcGhhc2VWYWxpZGF0aW9ucy5mb3JFYWNoKHBoYXNlID0+IHtcbiAgICAgIGlmICghcGhhc2Uub3ZlcmFsbFN1Y2Nlc3MpIHtcbiAgICAgICAgcGhhc2UubmV4dFN0ZXBzLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IGAke3BoYXNlLnBoYXNlTmFtZX0gSW1wcm92ZW1lbnRgLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHN0ZXAsXG4gICAgICAgICAgICBwcmlvcml0eTogdGhpcy5kZXRlcm1pbmVQcmlvcml0eShzdGVwKSxcbiAgICAgICAgICAgIHBoYXNlOiBwaGFzZS5waGFzZUlkLFxuICAgICAgICAgICAgZXN0aW1hdGVkSW1wYWN0OiB0aGlzLmVzdGltYXRlSW1wYWN0KHN0ZXApLFxuICAgICAgICAgICAgYWN0aW9uSXRlbXM6IHRoaXMuZ2VuZXJhdGVBY3Rpb25JdGVtcyhzdGVwKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGVzdGltYXRlQ29tcGxldGlvbkRhdGUob3ZlcmFsbFByb2dyZXNzOiBudW1iZXIsIG1ldHJpY3M6IERldGFpbGVkTWV0cmljcyk6IERhdGUge1xuICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICBpZiAob3ZlcmFsbFByb2dyZXNzID49IDEwMCkge1xuICAgICAgcmV0dXJuIGNvbXBsZXRpb25EYXRlOyAvLyBBbHJlYWR5IGNvbXBsZXRlXG4gICAgfVxuXG4gICAgLy8gRXN0aW1hdGUgYmFzZWQgb24gY3VycmVudCBwcm9ncmVzcyByYXRlXG4gICAgY29uc3QgcmVtYWluaW5nUHJvZ3Jlc3MgPSAxMDAgLSBvdmVyYWxsUHJvZ3Jlc3M7XG4gICAgY29uc3QgYXZlcmFnZVJhdGUgPSAoXG4gICAgICBtZXRyaWNzLnRyZW5kRGF0YS5lcnJvclJlZHVjdGlvblJhdGUgK1xuICAgICAgbWV0cmljcy50cmVuZERhdGEud2FybmluZ1JlZHVjdGlvblJhdGUgK1xuICAgICAgbWV0cmljcy50cmVuZERhdGEuc3lzdGVtR3Jvd3RoUmF0ZVxuICAgICkgLyAzO1xuXG4gICAgY29uc3QgZXN0aW1hdGVkSG91cnMgPSBhdmVyYWdlUmF0ZSA+IDAgPyByZW1haW5pbmdQcm9ncmVzcyAvIGF2ZXJhZ2VSYXRlIDogMTY4OyAvLyBEZWZhdWx0IHRvIDEgd2Vla1xuICAgIGNvbXBsZXRpb25EYXRlLnNldEhvdXJzKGNvbXBsZXRpb25EYXRlLmdldEhvdXJzKCkgKyBlc3RpbWF0ZWRIb3Vycyk7XG5cbiAgICByZXR1cm4gY29tcGxldGlvbkRhdGU7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlRXhlY3V0aXZlU3VtbWFyeShcbiAgICBzdGF0dXM6IENhbXBhaWduU3RhdHVzLFxuICAgIHByb2dyZXNzOiBudW1iZXIsXG4gICAgYWNoaWV2ZW1lbnRzOiBBY2hpZXZlbWVudFtdLFxuICAgIGlzc3VlczogSXNzdWVbXVxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IHN0YXR1c1RleHQgPSBzdGF0dXMgPT09IENhbXBhaWduU3RhdHVzLkNPTVBMRVRFRCA/ICdjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JyA6XG4gICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPT09IENhbXBhaWduU3RhdHVzLklOX1BST0dSRVNTID8gJ2luIHByb2dyZXNzJyA6XG4gICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPT09IENhbXBhaWduU3RhdHVzLkJMT0NLRUQgPyAnY3VycmVudGx5IGJsb2NrZWQnIDogJ25vdCBzdGFydGVkJztcblxuICAgIGNvbnN0IGFjaGlldmVtZW50VGV4dCA9IGFjaGlldmVtZW50cy5sZW5ndGggPiAwID8gXG4gICAgICBgS2V5IGFjaGlldmVtZW50cyBpbmNsdWRlOiAke2FjaGlldmVtZW50cy5tYXAoYSA9PiBhLnRpdGxlKS5qb2luKCcsICcpfS5gIDogJyc7XG5cbiAgICBjb25zdCBpc3N1ZVRleHQgPSBpc3N1ZXMubGVuZ3RoID4gMCA/IFxuICAgICAgYENyaXRpY2FsIGlzc3VlcyByZXF1aXJpbmcgYXR0ZW50aW9uOiAke2lzc3Vlcy5sZW5ndGh9IGl0ZW1zIGlkZW50aWZpZWQuYCA6IFxuICAgICAgJ05vIGNyaXRpY2FsIGlzc3VlcyBpZGVudGlmaWVkLic7XG5cbiAgICByZXR1cm4gYFRoZSBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIGlzICR7c3RhdHVzVGV4dH0gd2l0aCAke3Byb2dyZXNzfSUgb3ZlcmFsbCBjb21wbGV0aW9uLiAke2FjaGlldmVtZW50VGV4dH0gJHtpc3N1ZVRleHR9YDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVUaW1lU2VyaWVzRGF0YShzbmFwc2hvdHM6IE1ldHJpY3NTbmFwc2hvdFtdKTogVGltZVNlcmllc1BvaW50W10ge1xuICAgIHJldHVybiBzbmFwc2hvdHMubWFwKHNuYXBzaG90ID0+ICh7XG4gICAgICB0aW1lc3RhbXA6IHNuYXBzaG90LnRpbWVzdGFtcCxcbiAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHNuYXBzaG90Lm1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50LFxuICAgICAgbGludGluZ1dhcm5pbmdzOiBzbmFwc2hvdC5tZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50LFxuICAgICAgYnVpbGRUaW1lOiBzbmFwc2hvdC5tZXRyaWNzLmJ1aWxkUGVyZm9ybWFuY2UuY3VycmVudFRpbWUsXG4gICAgICBlbnRlcnByaXNlU3lzdGVtczogc25hcHNob3QubWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50XG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBoYXNlUHJvZ3Jlc3NDaGFydChwaGFzZVZhbGlkYXRpb25zOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRbXSk6IFBoYXNlUHJvZ3Jlc3NQb2ludFtdIHtcbiAgICByZXR1cm4gcGhhc2VWYWxpZGF0aW9ucy5tYXAocGhhc2UgPT4gKHtcbiAgICAgIHBoYXNlOiBwaGFzZS5waGFzZU5hbWUsXG4gICAgICBwcm9ncmVzczogcGhhc2UuY29tcGxldGlvblBlcmNlbnRhZ2UsXG4gICAgICB0YXJnZXQ6IDEwMCxcbiAgICAgIHN0YXR1czogcGhhc2Uub3ZlcmFsbFN1Y2Nlc3MgPyBQaGFzZVN0YXR1cy5DT01QTEVURUQgOiBQaGFzZVN0YXR1cy5JTl9QUk9HUkVTU1xuICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVFcnJvckRpc3RyaWJ1dGlvbkNoYXJ0KG1ldHJpY3M6IERldGFpbGVkTWV0cmljcyk6IEVycm9yRGlzdHJpYnV0aW9uUG9pbnRbXSB7XG4gICAgY29uc3QgZXJyb3JCcmVha2Rvd24gPSBtZXRyaWNzLmVycm9yQnJlYWtkb3duIHx8IHt9O1xuICAgIGNvbnN0IHRvdGFsRXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnJvckJyZWFrZG93bikucmVkdWNlKChzdW0sIGNvdW50KSA9PiBzdW0gKyBjb3VudCwgMCk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZXJyb3JCcmVha2Rvd24pLm1hcCgoW2Vycm9yVHlwZSwgY291bnRdKSA9PiAoe1xuICAgICAgZXJyb3JUeXBlLFxuICAgICAgY291bnQsXG4gICAgICBwZXJjZW50YWdlOiB0b3RhbEVycm9ycyA+IDAgPyBNYXRoLnJvdW5kKChjb3VudCAvIHRvdGFsRXJyb3JzKSAqIDEwMCkgOiAwXG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBlcmZvcm1hbmNlVHJlbmRDaGFydChzbmFwc2hvdHM6IE1ldHJpY3NTbmFwc2hvdFtdKTogUGVyZm9ybWFuY2VUcmVuZFBvaW50W10ge1xuICAgIHJldHVybiBzbmFwc2hvdHMubWFwKHNuYXBzaG90ID0+ICh7XG4gICAgICB0aW1lc3RhbXA6IHNuYXBzaG90LnRpbWVzdGFtcCxcbiAgICAgIGJ1aWxkVGltZTogc25hcHNob3QubWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lLFxuICAgICAgbWVtb3J5VXNhZ2U6IHNuYXBzaG90Lm1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5tZW1vcnlVc2FnZSxcbiAgICAgIGNhY2hlSGl0UmF0ZTogc25hcHNob3QubWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmNhY2hlSGl0UmF0ZVxuICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVIVE1MUmVwb3J0KHJlcG9ydDogQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0KTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuPCFET0NUWVBFIGh0bWw+XG48aHRtbD5cbjxoZWFkPlxuICAgIDx0aXRsZT5QZXJmZWN0IENvZGViYXNlIENhbXBhaWduIFJlcG9ydDwvdGl0bGU+XG4gICAgPHN0eWxlPlxuICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXJnaW46IDQwcHg7IH1cbiAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6ICNmNWY1ZjU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgfVxuICAgICAgICAuc3RhdHVzLSR7cmVwb3J0Lm92ZXJhbGxTdGF0dXMudG9Mb3dlckNhc2UoKX0geyBjb2xvcjogJHt0aGlzLmdldFN0YXR1c0NvbG9yKHJlcG9ydC5vdmVyYWxsU3RhdHVzKX07IH1cbiAgICAgICAgLnByb2dyZXNzLWJhciB7IGJhY2tncm91bmQ6ICNlMGUwZTA7IGhlaWdodDogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfVxuICAgICAgICAucHJvZ3Jlc3MtZmlsbCB7IGJhY2tncm91bmQ6ICM0Y2FmNTA7IGhlaWdodDogMTAwJTsgdHJhbnNpdGlvbjogd2lkdGggMC4zczsgfVxuICAgICAgICAucGhhc2UgeyBtYXJnaW46IDIwcHggMDsgcGFkZGluZzogMTVweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgICAgIC5hY2hpZXZlbWVudCB7IGJhY2tncm91bmQ6ICNlOGY1ZTg7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbjogNXB4IDA7IGJvcmRlci1yYWRpdXM6IDVweDsgfVxuICAgICAgICAuaXNzdWUgeyBiYWNrZ3JvdW5kOiAjZmZlOGU4OyBwYWRkaW5nOiAxMHB4OyBtYXJnaW46IDVweCAwOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cbiAgICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICA8aDE+UGVyZmVjdCBDb2RlYmFzZSBDYW1wYWlnbiBSZXBvcnQ8L2gxPlxuICAgICAgICA8cD5HZW5lcmF0ZWQ6ICR7cmVwb3J0LmdlbmVyYXRlZEF0LnRvTG9jYWxlU3RyaW5nKCl9PC9wPlxuICAgICAgICA8cCBjbGFzcz1cInN0YXR1cy0ke3JlcG9ydC5vdmVyYWxsU3RhdHVzLnRvTG93ZXJDYXNlKCl9XCI+U3RhdHVzOiAke3JlcG9ydC5vdmVyYWxsU3RhdHVzfTwvcD5cbiAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWZpbGxcIiBzdHlsZT1cIndpZHRoOiAke3JlcG9ydC5vdmVyYWxsUHJvZ3Jlc3N9JVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHA+UHJvZ3Jlc3M6ICR7cmVwb3J0Lm92ZXJhbGxQcm9ncmVzc30lPC9wPlxuICAgIDwvZGl2PlxuXG4gICAgPGgyPkV4ZWN1dGl2ZSBTdW1tYXJ5PC9oMj5cbiAgICA8cD4ke3JlcG9ydC5leGVjdXRpdmVTdW1tYXJ5fTwvcD5cblxuICAgIDxoMj5QaGFzZSBQcm9ncmVzczwvaDI+XG4gICAgJHtyZXBvcnQucGhhc2VzLm1hcChwaGFzZSA9PiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwaGFzZVwiPlxuICAgICAgICAgICAgPGgzPiR7cGhhc2UucGhhc2VOYW1lfTwvaDM+XG4gICAgICAgICAgICA8cD5TdGF0dXM6ICR7cGhhc2Uuc3RhdHVzfTwvcD5cbiAgICAgICAgICAgIDxwPlByb2dyZXNzOiAke3BoYXNlLnByb2dyZXNzfSU8L3A+XG4gICAgICAgICAgICA8cD5CbG9ja2VyczogJHtwaGFzZS5ibG9ja2Vycy5sZW5ndGggPiAwID8gcGhhc2UuYmxvY2tlcnMuam9pbignLCAnKSA6ICdOb25lJ308L3A+XG4gICAgICAgIDwvZGl2PlxuICAgIGApLmpvaW4oJycpfVxuXG4gICAgPGgyPktleSBBY2hpZXZlbWVudHM8L2gyPlxuICAgICR7cmVwb3J0LmtleUFjaGlldmVtZW50cy5tYXAoYWNoaWV2ZW1lbnQgPT4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWNoaWV2ZW1lbnRcIj5cbiAgICAgICAgICAgIDxoND4ke2FjaGlldmVtZW50LnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICA8cD4ke2FjaGlldmVtZW50LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgIDxwPkltcGFjdDogJHthY2hpZXZlbWVudC5pbXBhY3R9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICBgKS5qb2luKCcnKX1cblxuICAgIDxoMj5Dcml0aWNhbCBJc3N1ZXM8L2gyPlxuICAgICR7cmVwb3J0LmNyaXRpY2FsSXNzdWVzLm1hcChpc3N1ZSA9PiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpc3N1ZVwiPlxuICAgICAgICAgICAgPGg0PiR7aXNzdWUudGl0bGV9PC9oND5cbiAgICAgICAgICAgIDxwPiR7aXNzdWUuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgPHA+U2V2ZXJpdHk6ICR7aXNzdWUuc2V2ZXJpdHl9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICBgKS5qb2luKCcnKX1cbjwvYm9keT5cbjwvaHRtbD5gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZU1hcmtkb3duUmVwb3J0KHJlcG9ydDogQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0KTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCMgUGVyZmVjdCBDb2RlYmFzZSBDYW1wYWlnbiBSZXBvcnRcblxuKipHZW5lcmF0ZWQ6KiogJHtyZXBvcnQuZ2VuZXJhdGVkQXQudG9JU09TdHJpbmcoKX1cbioqU3RhdHVzOioqICR7cmVwb3J0Lm92ZXJhbGxTdGF0dXN9XG4qKlByb2dyZXNzOioqICR7cmVwb3J0Lm92ZXJhbGxQcm9ncmVzc30lXG5cbiMjIEV4ZWN1dGl2ZSBTdW1tYXJ5XG5cbiR7cmVwb3J0LmV4ZWN1dGl2ZVN1bW1hcnl9XG5cbiMjIFBoYXNlIFByb2dyZXNzXG5cbiR7cmVwb3J0LnBoYXNlcy5tYXAocGhhc2UgPT4gYFxuIyMjICR7cGhhc2UucGhhc2VOYW1lfVxuLSAqKlN0YXR1czoqKiAke3BoYXNlLnN0YXR1c31cbi0gKipQcm9ncmVzczoqKiAke3BoYXNlLnByb2dyZXNzfSVcbi0gKipCbG9ja2VyczoqKiAke3BoYXNlLmJsb2NrZXJzLmxlbmd0aCA+IDAgPyBwaGFzZS5ibG9ja2Vycy5qb2luKCcsICcpIDogJ05vbmUnfVxuYCkuam9pbignJyl9XG5cbiMjIEtleSBBY2hpZXZlbWVudHNcblxuJHtyZXBvcnQua2V5QWNoaWV2ZW1lbnRzLm1hcChhY2hpZXZlbWVudCA9PiBgXG4jIyMgJHthY2hpZXZlbWVudC50aXRsZX1cbiR7YWNoaWV2ZW1lbnQuZGVzY3JpcHRpb259XG4tICoqSW1wYWN0OioqICR7YWNoaWV2ZW1lbnQuaW1wYWN0fVxuLSAqKlBoYXNlOioqICR7YWNoaWV2ZW1lbnQucGhhc2V9XG5gKS5qb2luKCcnKX1cblxuIyMgQ3JpdGljYWwgSXNzdWVzXG5cbiR7cmVwb3J0LmNyaXRpY2FsSXNzdWVzLm1hcChpc3N1ZSA9PiBgXG4jIyMgJHtpc3N1ZS50aXRsZX1cbiR7aXNzdWUuZGVzY3JpcHRpb259XG4tICoqU2V2ZXJpdHk6KiogJHtpc3N1ZS5zZXZlcml0eX1cbi0gKipQaGFzZToqKiAke2lzc3VlLnBoYXNlfVxuYCkuam9pbignJyl9XG5cbiMjIFBlcmZvcm1hbmNlIE1ldHJpY3NcblxuLSAqKlR5cGVTY3JpcHQgRXJyb3JzOioqICR7cmVwb3J0LnBlcmZvcm1hbmNlTWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnR9ICgke3JlcG9ydC5wZXJmb3JtYW5jZU1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5yZWR1Y3Rpb259IHJlZHVjZWQpXG4tICoqTGludGluZyBXYXJuaW5nczoqKiAke3JlcG9ydC5wZXJmb3JtYW5jZU1ldHJpY3MubGludGluZ1dhcm5pbmdzLmN1cnJlbnR9ICgke3JlcG9ydC5wZXJmb3JtYW5jZU1ldHJpY3MubGludGluZ1dhcm5pbmdzLnJlZHVjdGlvbn0gcmVkdWNlZClcbi0gKipCdWlsZCBUaW1lOioqICR7cmVwb3J0LnBlcmZvcm1hbmNlTWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lfXMgKHRhcmdldDogJHtyZXBvcnQucGVyZm9ybWFuY2VNZXRyaWNzLmJ1aWxkUGVyZm9ybWFuY2UudGFyZ2V0VGltZX1zKVxuLSAqKkVudGVycHJpc2UgU3lzdGVtczoqKiAke3JlcG9ydC5wZXJmb3JtYW5jZU1ldHJpY3MuZW50ZXJwcmlzZVN5c3RlbXMuY3VycmVudH0gKHRhcmdldDogJHtyZXBvcnQucGVyZm9ybWFuY2VNZXRyaWNzLmVudGVycHJpc2VTeXN0ZW1zLnRhcmdldH0pXG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNTVlJlcG9ydChyZXBvcnQ6IENhbXBhaWduU3VtbWFyeVJlcG9ydCk6IHN0cmluZyB7XG4gICAgY29uc3QgaGVhZGVycyA9IFsnUGhhc2UnLCAnU3RhdHVzJywgJ1Byb2dyZXNzJywgJ0Jsb2NrZXJzJ107XG4gICAgY29uc3Qgcm93cyA9IHJlcG9ydC5waGFzZXMubWFwKHBoYXNlID0+IFtcbiAgICAgIHBoYXNlLnBoYXNlTmFtZSxcbiAgICAgIHBoYXNlLnN0YXR1cyxcbiAgICAgIHBoYXNlLnByb2dyZXNzLnRvU3RyaW5nKCksXG4gICAgICBwaGFzZS5ibG9ja2Vycy5qb2luKCc7ICcpXG4gICAgXSk7XG5cbiAgICByZXR1cm4gW2hlYWRlcnMsIC4uLnJvd3NdLm1hcChyb3cgPT4gcm93LmpvaW4oJywnKSkuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVjZW50QWN0aXZpdHkoKTogQWN0aXZpdHlJdGVtW10ge1xuICAgIC8vIFRoaXMgd291bGQgYmUgaW1wbGVtZW50ZWQgd2l0aCBhY3R1YWwgYWN0aXZpdHkgdHJhY2tpbmdcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIHR5cGU6ICdtaWxlc3RvbmUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1BoYXNlIHZhbGlkYXRpb24gY29tcGxldGVkJyxcbiAgICAgICAgcGhhc2U6ICdwaGFzZTEnXG4gICAgICB9XG4gICAgXTtcbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzXG4gIHByaXZhdGUgZXh0cmFjdEtleU1ldHJpY3ModmFsaWRhdGlvbjogUGhhc2VWYWxpZGF0aW9uUmVzdWx0KTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiB2YWxpZGF0aW9uLmNvbXBsZXRpb25QZXJjZW50YWdlLFxuICAgICAgbWlsZXN0b25lc0NvbXBsZXRlZDogdmFsaWRhdGlvbi5taWxlc3RvbmVzLmZpbHRlcihtID0+IG0uc3VjY2VzcykubGVuZ3RoLFxuICAgICAgdG90YWxNaWxlc3RvbmVzOiB2YWxpZGF0aW9uLm1pbGVzdG9uZXMubGVuZ3RoLFxuICAgICAgY3JpdGljYWxGYWlsdXJlczogdmFsaWRhdGlvbi5jcml0aWNhbEZhaWx1cmVzLmxlbmd0aFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUGhhc2VBY2hpZXZlbWVudHModmFsaWRhdGlvbjogUGhhc2VWYWxpZGF0aW9uUmVzdWx0LCBtZXRyaWNzOiBEZXRhaWxlZE1ldHJpY3MpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb24ubWlsZXN0b25lc1xuICAgICAgLmZpbHRlcihtID0+IG0uc3VjY2VzcylcbiAgICAgIC5tYXAobSA9PiBgJHttLm1pbGVzdG9uZX0gY29tcGxldGVkIHN1Y2Nlc3NmdWxseWApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBoYXNlSXNzdWVzKHZhbGlkYXRpb246IFBoYXNlVmFsaWRhdGlvblJlc3VsdCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbi5jcml0aWNhbEZhaWx1cmVzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBoYXNlUmVjb21tZW5kYXRpb25zKHZhbGlkYXRpb246IFBoYXNlVmFsaWRhdGlvblJlc3VsdCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbi5uZXh0U3RlcHM7XG4gIH1cblxuICBwcml2YXRlIGVzdGltYXRlUmVzb2x1dGlvblRpbWUoZmFpbHVyZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAvLyBTaW1wbGUgaGV1cmlzdGljIGJhc2VkIG9uIGZhaWx1cmUgdHlwZVxuICAgIGlmIChmYWlsdXJlLmluY2x1ZGVzKCdUeXBlU2NyaXB0JykpIHJldHVybiA0O1xuICAgIGlmIChmYWlsdXJlLmluY2x1ZGVzKCdsaW50aW5nJykpIHJldHVybiAyO1xuICAgIGlmIChmYWlsdXJlLmluY2x1ZGVzKCdidWlsZCcpKSByZXR1cm4gNjtcbiAgICByZXR1cm4gMztcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lUHJpb3JpdHkoc3RlcDogc3RyaW5nKTogUmVjb21tZW5kYXRpb25Qcmlvcml0eSB7XG4gICAgaWYgKHN0ZXAuaW5jbHVkZXMoJ2NyaXRpY2FsJykgfHwgc3RlcC5pbmNsdWRlcygnYmxvY2tlcicpKSByZXR1cm4gUmVjb21tZW5kYXRpb25Qcmlvcml0eS5VUkdFTlQ7XG4gICAgaWYgKHN0ZXAuaW5jbHVkZXMoJ2Vycm9yJykgfHwgc3RlcC5pbmNsdWRlcygnZmFpbHVyZScpKSByZXR1cm4gUmVjb21tZW5kYXRpb25Qcmlvcml0eS5ISUdIO1xuICAgIHJldHVybiBSZWNvbW1lbmRhdGlvblByaW9yaXR5Lk1FRElVTTtcbiAgfVxuXG4gIHByaXZhdGUgZXN0aW1hdGVJbXBhY3Qoc3RlcDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoc3RlcC5pbmNsdWRlcygnemVybycpIHx8IHN0ZXAuaW5jbHVkZXMoJ2NvbXBsZXRlJykpIHJldHVybiAnSGlnaCAtIE1pbGVzdG9uZSBjb21wbGV0aW9uJztcbiAgICBpZiAoc3RlcC5pbmNsdWRlcygncmVkdWNlJykgfHwgc3RlcC5pbmNsdWRlcygnaW1wcm92ZScpKSByZXR1cm4gJ01lZGl1bSAtIEluY3JlbWVudGFsIGltcHJvdmVtZW50JztcbiAgICByZXR1cm4gJ0xvdyAtIE1haW50ZW5hbmNlIHRhc2snO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUFjdGlvbkl0ZW1zKHN0ZXA6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAvLyBHZW5lcmF0ZSBzcGVjaWZpYyBhY3Rpb24gaXRlbXMgYmFzZWQgb24gdGhlIHN0ZXBcbiAgICByZXR1cm4gW1xuICAgICAgYEV4ZWN1dGU6ICR7c3RlcH1gLFxuICAgICAgJ1ZhbGlkYXRlIHJlc3VsdHMnLFxuICAgICAgJ1VwZGF0ZSBwcm9ncmVzcyB0cmFja2luZydcbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdGF0dXNDb2xvcihzdGF0dXM6IENhbXBhaWduU3RhdHVzKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSBDYW1wYWlnblN0YXR1cy5DT01QTEVURUQ6IHJldHVybiAnIzRjYWY1MCc7XG4gICAgICBjYXNlIENhbXBhaWduU3RhdHVzLklOX1BST0dSRVNTOiByZXR1cm4gJyMyMTk2ZjMnO1xuICAgICAgY2FzZSBDYW1wYWlnblN0YXR1cy5CTE9DS0VEOiByZXR1cm4gJyNmZjk4MDAnO1xuICAgICAgY2FzZSBDYW1wYWlnblN0YXR1cy5GQUlMRUQ6IHJldHVybiAnI2Y0NDMzNic7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gJyM3NTc1NzUnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmVwb3J0IGhpc3RvcnlcbiAgICovXG4gIGdldFJlcG9ydEhpc3RvcnkoKTogQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0W10ge1xuICAgIHJldHVybiBbLi4udGhpcy5yZXBvcnRIaXN0b3J5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciByZXBvcnQgaGlzdG9yeVxuICAgKi9cbiAgY2xlYXJSZXBvcnRIaXN0b3J5KCk6IHZvaWQge1xuICAgIHRoaXMucmVwb3J0SGlzdG9yeSA9IFtdO1xuICAgIGNvbnNvbGUubG9nKCfwn5OKIFJlcG9ydCBoaXN0b3J5IGNsZWFyZWQnKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgQWN0aXZpdHlJdGVtIHtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICB0eXBlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHBoYXNlOiBzdHJpbmc7XG59Il0sInZlcnNpb24iOjN9