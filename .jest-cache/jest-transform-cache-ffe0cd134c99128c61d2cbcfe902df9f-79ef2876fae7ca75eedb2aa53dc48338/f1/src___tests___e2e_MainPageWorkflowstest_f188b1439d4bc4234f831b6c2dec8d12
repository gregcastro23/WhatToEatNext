5b0e83770b2b3d36ca1a42c9c56fa261
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock all external dependencies for E2_E simulation
jest.mock('next/navigation', () => ({
    useRouter: () => ({ push: jest.fn(), back: jest.fn(),
        forward: jest.fn(),
        refresh: jest.fn(),
        replace: jest.fn()
    }),
}));
jest.mock('@/contexts/AlchemicalContext/hooks');
jest.mock('@/hooks/useStatePreservation');
jest.mock('@/utils/logger', () => ({
    logger: { debug: jest.fn(), info: jest.fn(),
        warn: jest.fn(),
        error: jest.fn()
    },
}));
// Mock realistic component behaviors for E2_E testing
jest.mock('@/components/CuisineRecommender', () => {
    return function MockCuisineRecommender() {
        const [selectedCuisine, setSelectedCuisine] = react_2.default.useState(null);
        const [showRecipes, setShowRecipes] = react_2.default.useState(false);
        const cuisines = [
            { name: 'Italian', score: 95, recipes: ['Pasta Marinara', 'Risotto', 'Pizza Margherita'] },
            { name: 'Chinese', score: 88, recipes: ['Fried Rice', 'Sweet and Sour Pork', 'Kung Pao Chicken'] },
            { name: 'Mexican', score: 82, recipes: ['Tacos', 'Enchiladas', 'Guacamole'] },
            { name: 'Indian', score: 79, recipes: ['Curry', 'Biryani', 'Naan'] },
        ];
        const handleCuisineSelect = (cuisine) => {
            const cuisineData = cuisine;
            setSelectedCuisine(cuisineData.name);
            setShowRecipes(true);
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'cuisine-recommender', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cuisine Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: 'cuisine-grid', children: cuisines.map(cuisine => ((0, jsx_runtime_1.jsx)("div", { className: 'cuisine-card', "data-testid": `cuisine-card-${cuisine.name.toLowerCase()}`, children: (0, jsx_runtime_1.jsxs)("button", { onClick: () => handleCuisineSelect(cuisine), className: selectedCuisine === cuisine.name ? 'selected' : '', "data-testid": `cuisine-${cuisine.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: cuisine.name }), (0, jsx_runtime_1.jsxs)("div", { className: 'score', children: ["Match: ", cuisine.score, "%"] })] }) }, cuisine.name))) }), showRecipes && selectedCuisine && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'recipe-recommendations', className: 'recipe-section', children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Recommended ", selectedCuisine, " Recipes"] }), (0, jsx_runtime_1.jsx)("div", { className: 'recipe-list', children: cuisines
                                .find(c => c.name === selectedCuisine)
                                ?.recipes.map(recipe => ((0, jsx_runtime_1.jsx)("button", { "data-testid": `recipe-${recipe.toLowerCase().replace(/\s+/g, '-')}`, className: 'recipe-button', children: recipe }, recipe))) })] }))] }));
    };
});
jest.mock('@/components/IngredientRecommender', () => {
    return function MockIngredientRecommender({ maxDisplayed = 8 }) {
        const [selectedIngredients, setSelectedIngredients] = react_2.default.useState([]);
        const [expandedIngredient, setExpandedIngredient] = react_2.default.useState(null);
        const ingredients = [
            { name: 'Tomatoes', category: 'Vegetables', properties: ['Umami', 'Acidic', 'Fresh'] },
            { name: 'Onions', category: 'Vegetables', properties: ['Sweet', 'Pungent', 'Aromatic'] },
            { name: 'Garlic', category: 'Aromatics', properties: ['Pungent', 'Savory', 'Aromatic'] },
            { name: 'Basil', category: 'Herbs', properties: ['Fresh', 'Aromatic', 'Sweet'] },
            { name: 'Olive Oil', category: 'Oils', properties: ['Rich', 'Fruity', 'Smooth'] },
            { name: 'Cheese', category: 'Dairy', properties: ['Creamy', 'Salty', 'Rich'] },
            { name: 'Pasta', category: 'Grains', properties: ['Neutral', 'Filling', 'Versatile'] },
            { name: 'Chicken', category: 'Proteins', properties: ['Lean', 'Mild', 'Versatile'] },
        ];
        const displayedIngredients = ingredients.slice(0, maxDisplayed);
        const toggleIngredient = (ingredient) => {
            setSelectedIngredients(prev => prev.includes(ingredient) ? prev.filter(i => i !== ingredient) : [...prev, ingredient]);
        };
        const toggleExpanded = (ingredient) => {
            setExpandedIngredient(prev => (prev === ingredient ? null : ingredient));
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'ingredient-recommender', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Ingredient Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: 'ingredient-grid', children: displayedIngredients.map(ingredient => ((0, jsx_runtime_1.jsxs)("div", { className: 'ingredient-card', "data-testid": `ingredient-card-${ingredient.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => toggleIngredient(ingredient.name), className: selectedIngredients.includes(ingredient.name) ? 'selected' : '', "data-testid": `ingredient-${ingredient.name.toLowerCase()}`, children: ingredient.name }), (0, jsx_runtime_1.jsx)("button", { onClick: () => toggleExpanded(ingredient.name), "data-testid": `expand-${ingredient.name.toLowerCase()}`, className: 'expand-button', children: expandedIngredient === ingredient.name ? '▼' : '▶' }), expandedIngredient === ingredient.name && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": `details-${ingredient.name.toLowerCase()}`, className: 'ingredient-details', children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Category: ", ingredient.category] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Properties: ", ingredient.properties.join(', ')] })] }))] }, ingredient.name))) }), selectedIngredients.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'selected-ingredients-summary', className: 'selection-summary', children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Selected Ingredients (", selectedIngredients.length, ")"] }), (0, jsx_runtime_1.jsx)("div", { children: selectedIngredients.join(', ') })] }))] }));
    };
});
jest.mock('@/components/CookingMethodsSection', () => {
    return function MockCookingMethodsSection({ maxDisplayed = 6, onViewMore, }) {
        const [selectedMethod, setSelectedMethod] = react_2.default.useState(null);
        const methods = [
            { name: 'Sauté', time: '5-10 min', difficulty: 'Easy', description: 'Quick cooking in a pan with oil' },
            { name: 'Roast', time: '30-60 min', difficulty: 'Medium', description: 'Cooking in the oven with dry heat' },
            { name: 'Grill', time: '10-20 min', difficulty: 'Medium', description: 'Cooking over direct heat' },
            { name: 'Steam', time: '10-15 min', difficulty: 'Easy', description: 'Cooking with steam heat' },
            { name: 'Braise', time: '60-120 min', difficulty: 'Hard', description: 'Slow cooking with liquid' },
            { name: 'Stir-fry', time: '5-8 min', difficulty: 'Medium', description: 'Quick cooking while stirring' },
        ];
        const displayedMethods = methods.slice(0, maxDisplayed);
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'cooking-methods', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cooking Methods" }), (0, jsx_runtime_1.jsx)("div", { className: 'methods-grid', children: displayedMethods.map(method => ((0, jsx_runtime_1.jsxs)("div", { className: 'method-card', "data-testid": `method-card-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsxs)("button", { onClick: () => setSelectedMethod(method.name), className: selectedMethod === method.name ? 'selected' : '', "data-testid": `method-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: method.name }), (0, jsx_runtime_1.jsxs)("div", { className: 'method-info', children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Time: ", method.time] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Difficulty: ", method.difficulty] })] })] }), selectedMethod === method.name && ((0, jsx_runtime_1.jsx)("div", { "data-testid": `method-details-${method.name.toLowerCase()}`, className: 'method-details', children: (0, jsx_runtime_1.jsx)("p", { children: method.description }) }))] }, method.name))) }), (0, jsx_runtime_1.jsx)("button", { onClick: onViewMore, "data-testid": 'view-more-methods', className: 'view-more-button', children: "; View All Cooking Methods" })] }));
    };
});
jest.mock('@/components/recipes/RecipeBuilderSimple', () => {
    return function MockRecipeBuilderSimple() {
        const [recipeName, setRecipeName] = react_2.default.useState('');
        const [ingredients, setIngredients] = react_2.default.useState([]);
        const [steps, setSteps] = react_2.default.useState([]);
        const [servings, setServings] = react_2.default.useState(4);
        const [prepTime, setPrepTime] = react_2.default.useState(15);
        const [cookTime, setCookTime] = react_2.default.useState(30);
        const addIngredient = (props) => {
            setIngredients(prev => [...prev, { name: '', quantity: '' }]);
        };
        const updateIngredient = (index, field, value) => {
            setIngredients(prev => prev.map((ing) => (i === index ? { ...ing, [field]: value } : ing)));
        };
        const removeIngredient = (index) => {
            setIngredients(prev => prev.filter((_) => i !== index));
        };
        const addStep = (props) => {
            setSteps(prev => [...prev, { instruction: '', timing: '' }]);
        };
        const updateStep = (index, field, value) => {
            setSteps(prev => prev.map((step) => (i === index ? { ...step, [field]: value } : step)));
        };
        const removeStep = (index) => {
            setSteps(prev => prev.filter((_) => i !== index));
        };
        const canSave = recipeName.trim() && ingredients.some(ing => ing.name.trim()) && void steps.some(step => step.instruction.trim());
        const totalTime = prepTime + cookTime;
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'recipe-builder', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Recipe Builder" }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-form', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'recipe-header', children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Recipe Name', value: recipeName, onChange: e => setRecipeName(e.target.value), "data-testid": 'recipe-name-input' }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-meta', children: [(0, jsx_runtime_1.jsx)("input", { type: 'number', value: servings, onChange: e => setServings(parseInt(e.target.value) || 1), "data-testid": 'servings-input', min: '1' }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: prepTime, onChange: e => setPrepTime(parseInt(e.target.value) || 0), "data-testid": 'prep-time-input', min: '0' }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: cookTime, onChange: e => setCookTime(parseInt(e.target.value) || 0), "data-testid": 'cook-time-input', min: '0' })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'ingredients-section', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Ingredients" }), (0, jsx_runtime_1.jsx)("button", { onClick: addIngredient, "data-testid": 'add-ingredient', children: "Add Ingredient" }), ingredients.map((ingredient, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'ingredient-row', "data-testid": `ingredient-row-${index}`, children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Quantity', value: ingredient.quantity, onChange: e => updateIngredient(index, 'quantity', e.target.value), "data-testid": `ingredient-quantity-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Ingredient name', value: ingredient.name, onChange: e => updateIngredient(index, 'name', e.target.value), "data-testid": `ingredient-name-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeIngredient(index), "data-testid": `remove-ingredient-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": 'ingredients-count', children: [", Ingredients: ", ingredients.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'steps-section', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Instructions" }), (0, jsx_runtime_1.jsx)("button", { onClick: addStep, "data-testid": 'add-step', children: "Add Step" }), steps.map((step, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'step-row', "data-testid": `step-row-${index}`, children: [(0, jsx_runtime_1.jsx)("span", { className: 'step-number', children: index + 1 }), (0, jsx_runtime_1.jsx)("textarea", { placeholder: 'Describe this step...', value: step.instruction, onChange: e => updateStep(index, 'instruction', e.target.value), "data-testid": `step-instruction-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Timing', value: step.timing, onChange: e => updateStep(index, 'timing', e.target.value), "data-testid": `step-timing-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeStep(index), "data-testid": `remove-step-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": 'steps-count', children: [", Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-summary', "data-testid": 'recipe-summary', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Recipe Summary" }), (0, jsx_runtime_1.jsxs)("div", { children: ["Name: ", recipeName || 'Untitled Recipe'] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Servings: ", servings] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Total Time: ", totalTime, " minutes"] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Ingredients: ", ingredients.length] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsx)("button", { disabled: !canSave, "data-testid": 'save-recipe', className: canSave ? 'enabled' : 'disabled', children: "; Save Recipe" })] })] }));
    };
});
/**
 * End-to-End Tests for Main Page Workflows
 *
 * These tests simulate complete user workflows on the main page,
 * testing the integration between all components and user interactions.
 *
 * Note: These tests use jsdom and testing-library to simulate E2_E scenarios
 * without requiring a full browser environment.
 */
const react_1 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const react_2 = __importDefault(require("react"));
const hooks_1 = require("@/contexts/AlchemicalContext/hooks");
const useStatePreservation_1 = require("@/hooks/useStatePreservation");
// Create mock components for testing
const MockCuisineRecommender = (props) => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'cuisine-recommender', children: "Cuisine Recommender" });
const MockElementalBalance = (props) => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'elemental-balance', children: "Elemental Balance" });
const MockIntelligencePanel = (props) => (0, jsx_runtime_1.jsx)("div", { "data-testid": 'intelligence-panel', children: "Intelligence Panel" });
const MainPageLayout = ({ onSectionNavigate }) => {
    return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'main-page-layout', children: [(0, jsx_runtime_1.jsx)(MockCuisineRecommender, {}), (0, jsx_runtime_1.jsx)(MockElementalBalance, {}), (0, jsx_runtime_1.jsx)(MockIntelligencePanel, {})] }));
};
describe('Main Page E2_E Workflows', () => {
    const mockAlchemicalContext = {
        state: { astrologicalState: { sunSign: 'aries' },
            elementalState: { Fire: 0.3, Water: 0.2, Earth: 0.3, Air: 0.2 },
        },
        planetaryPositions: { sun: { sign: 'aries' } },
        isDaytime: true
    };
    const mockNavigationState = {
        saveState: jest.fn(),
        getState: jest.fn(() => ({})),
    };
    const mockScrollPreservation = {
        restoreScrollPosition: jest.fn()
    };
    beforeEach(() => {
        void jest.clearAllMocks();
        hooks_1.useAlchemical.mockReturnValue(mockAlchemicalContext);
        useStatePreservation_1.useNavigationState.mockReturnValue(mockNavigationState);
        useStatePreservation_1.useScrollPreservation.mockReturnValue(mockScrollPreservation);
        useStatePreservation_1.useAutoStateCleanup.mockReturnValue(undefined);
        // Mock DOM methods
        void Object.defineProperty(window, 'scrollY', { value: 0, writable: true });
        jest.spyOn(document, 'getElementById').mockImplementation(() => ({
            scrollIntoView: jest.fn(),
            style: {},
            classList: { add: jest.fn(), remove: jest.fn() },
        }));
    });
    afterEach(() => {
        void jest.restoreAllMocks();
    });
    it('completes full meal planning workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        // Wait for all components to load
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('cooking-methods')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Step 1: Select a cuisine
        const italianCuisine = react_1.screen.getByTestId('italian-cuisine');
        void user.click(italianCuisine);
        // Verify cuisine selection and recipe recommendations appear
        expect(react_1.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_1.screen.getByText('Recommended Italian Recipes')).toBeInTheDocument();
        // Step 2: Select ingredients
        const tomatoes = react_1.screen.getByTestId('ingredient-tomatoes');
        const basil = react_1.screen.getByTestId('ingredient-basil');
        const oliveOil = react_1.screen.getByTestId('ingredient-olive oil');
        void user.click(tomatoes);
        void user.click(basil);
        void user.click(oliveOil);
        // Verify ingredient selection
        expect(react_1.screen.getByTestId('selected-ingredients-summary')).toBeInTheDocument();
        expect(react_1.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        // Step 3: Select cooking method
        const sauteMethod = react_1.screen.getByTestId('method-sauté');
        void user.click(sauteMethod);
        // Verify method selection and details
        expect(react_1.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
        // Step 4: Build a recipe
        const recipeNameInput = react_1.screen.getByTestId('recipe-name-input');
        void user.type(recipeNameInput, 'Italian Tomato Basil Sauté');
        // Add ingredients to recipe
        const addIngredientButton = react_1.screen.getByTestId('add-ingredient');
        void user.click(addIngredientButton);
        void user.click(addIngredientButton);
        void user.click(addIngredientButton);
        // Fill in ingredient details
        void user.type(react_1.screen.getByTestId('ingredient-quantity-0'), '2 cups');
        void user.type(react_1.screen.getByTestId('ingredient-name-0'), 'Fresh Tomatoes');
        void user.type(react_1.screen.getByTestId('ingredient-quantity-1'), '1/4 cup');
        void user.type(react_1.screen.getByTestId('ingredient-name-1'), 'Fresh Basil');
        void user.type(react_1.screen.getByTestId('ingredient-quantity-2'), '2 tbsp');
        void user.type(react_1.screen.getByTestId('ingredient-name-2'), 'Olive Oil');
        // Add cooking steps
        const addStepButton = react_1.screen.getByTestId('add-step');
        void user.click(addStepButton);
        void user.click(addStepButton);
        user.type(react_1.screen.getByTestId('step-instruction-0'), 'Heat olive oil in a large pan over medium heat');
        void user.type(react_1.screen.getByTestId('step-timing-0'), '2 min');
        user.type(react_1.screen.getByTestId('step-instruction-1'), 'Add tomatoes and basil, sauté until tender');
        void user.type(react_1.screen.getByTestId('step-timing-1'), '8 min');
        // Verify recipe can be saved
        const saveButton = react_1.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        // Save the recipe
        void user.click(saveButton);
        // Verify the complete workflow
        expect(react_1.screen.getByDisplayValue('Italian Tomato Basil Sauté')).toBeInTheDocument();
        expect(react_1.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        expect(react_1.screen.getByText('Steps: 2')).toBeInTheDocument();
    });
    it('handles ingredient exploration workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
        });
        // Expand ingredient details
        const expandTomatoes = react_1.screen.getByTestId('expand-tomatoes');
        void user.click(expandTomatoes);
        // Verify details are shown
        expect(react_1.screen.getByTestId('details-tomatoes')).toBeInTheDocument();
        expect(react_1.screen.getByText('Category: Vegetables')).toBeInTheDocument();
        expect(react_1.screen.getByText('Properties: Umami, Acidic, Fresh')).toBeInTheDocument();
        // Expand another ingredient
        const expandGarlic = react_1.screen.getByTestId('expand-garlic');
        void user.click(expandGarlic);
        expect(react_1.screen.getByTestId('details-garlic')).toBeInTheDocument();
        expect(react_1.screen.getByText('Category: Aromatics')).toBeInTheDocument();
        // Collapse first ingredient
        void user.click(expandTomatoes);
        expect(react_1.screen.queryByTestId('details-tomatoes')).not.toBeInTheDocument();
        // Select multiple ingredients
        void user.click(react_1.screen.getByTestId('ingredient-tomatoes'));
        void user.click(react_1.screen.getByTestId('ingredient-garlic'));
        void user.click(react_1.screen.getByTestId('ingredient-basil'));
        // Verify selection summary
        expect(react_1.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        expect(react_1.screen.getByText('Tomatoes, Garlic, Basil')).toBeInTheDocument();
    });
    it('handles cooking method exploration workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('cooking-methods')).toBeInTheDocument();
        });
        // Select different cooking methods and view details
        const roastMethod = react_1.screen.getByTestId('method-roast');
        void user.click(roastMethod);
        expect(react_1.screen.getByTestId('method-details-roast')).toBeInTheDocument();
        expect(react_1.screen.getByText('Cooking in the oven with dry heat')).toBeInTheDocument();
        // Switch to another method
        const grillMethod = react_1.screen.getByTestId('method-grill');
        void user.click(grillMethod);
        expect(react_1.screen.getByTestId('method-details-grill')).toBeInTheDocument();
        expect(react_1.screen.getByText('Cooking over direct heat')).toBeInTheDocument();
        // Previous method details should be hidden
        expect(react_1.screen.queryByTestId('method-details-roast')).not.toBeInTheDocument();
        // Test view more functionality
        const viewMoreButton = react_1.screen.getByTestId('view-more-methods');
        expect(viewMoreButton).toBeInTheDocument();
    });
    it('handles complete recipe creation workflow', async () => {
        const user = user_event_1.default.setup();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Create a complete recipe from scratch
        const recipeNameInput = react_1.screen.getByTestId('recipe-name-input');
        void user.type(recipeNameInput, 'Mediterranean Chicken');
        // Update recipe metadata
        const servingsInput = react_1.screen.getByTestId('servings-input');
        const prepTimeInput = react_1.screen.getByTestId('prep-time-input');
        const cookTimeInput = react_1.screen.getByTestId('cook-time-input');
        void user.clear(servingsInput);
        void user.type(servingsInput, '6');
        void user.clear(prepTimeInput);
        void user.type(prepTimeInput, '20');
        void user.clear(cookTimeInput);
        void user.type(cookTimeInput, '45');
        // Add multiple ingredients
        for (let i = 0; i < 4; i++) {
            void user.click(react_1.screen.getByTestId('add-ingredient'));
        }
        const ingredients = [
            { quantity: '2 lbs', name: 'Chicken Breast' },
            { quantity: '1 cup', name: 'Cherry Tomatoes' },
            { quantity: '1/2 cup', name: 'Kalamata Olives' },
            { quantity: '1/4 cup', name: 'Olive Oil' },
        ];
        for (let i = 0; i < ingredients.length; i++) {
            void user.type(react_1.screen.getByTestId(`ingredient-quantity-${i}`), ingredients[i].quantity);
            void user.type(react_1.screen.getByTestId(`ingredient-name-${i}`), ingredients[i].name);
        }
        // Add cooking steps
        for (let i = 0; i < 3; i++) {
            void user.click(react_1.screen.getByTestId('add-step'));
        }
        const steps = [
            { instruction: 'Preheat oven to 375°F and prepare chicken', timing: '5 min' },
            { instruction: 'Sear chicken in olive oil until golden', timing: '10 min' },
            { instruction: 'Add tomatoes and olives, bake until done', timing: '30 min' },
        ];
        for (let i = 0; i < steps.length; i++) {
            void user.type(react_1.screen.getByTestId(`step-instruction-${i}`), steps[i].instruction);
            void user.type(react_1.screen.getByTestId(`step-timing-${i}`), steps[i].timing);
        }
        // Verify recipe summary
        const summary = react_1.screen.getByTestId('recipe-summary');
        expect(summary).toHaveTextContent('Name: Mediterranean Chicken');
        expect(summary).toHaveTextContent('Servings: 6');
        expect(summary).toHaveTextContent('Total Time: 65 minutes');
        expect(summary).toHaveTextContent('Ingredients: 4');
        expect(summary).toHaveTextContent('Steps: 3');
        // Verify save button is enabled
        const saveButton = react_1.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        expect(saveButton).toHaveClass('enabled');
        // Test ingredient removal
        void user.click(react_1.screen.getByTestId('remove-ingredient-3'));
        expect(react_1.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        // Test step removal
        void user.click(react_1.screen.getByTestId('remove-step-0'));
        expect(react_1.screen.getByText('Steps: 2')).toBeInTheDocument();
        // Verify step renumbering
        expect(react_1.screen.getByDisplayValue('Sear chicken in olive oil until golden')).toBeInTheDocument();
    });
    it('handles navigation and state preservation workflow', async () => {
        const user = user_event_1.default.setup();
        const mockOnSectionNavigate = jest.fn();
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, { onSectionNavigate: mockOnSectionNavigate }));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
        });
        // Make selections across different components
        void user.click(react_1.screen.getByTestId('cuisine-italian'));
        void user.click(react_1.screen.getByTestId('ingredient-tomatoes'));
        void user.click(react_1.screen.getByTestId('method-sauté'));
        // Navigate between sections
        const cuisineNavButton = react_1.screen.getByText('Cuisine Recommendations');
        void user.click(cuisineNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('cuisine');
        const ingredientsNavButton = react_1.screen.getByText('Ingredient Recommendations');
        void user.click(ingredientsNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('ingredients');
        // Verify state preservation was called
        await (0, react_1.waitFor)(() => {
            expect(mockNavigationState.saveState).toHaveBeenCalled();
        });
        // Verify selections are maintained after navigation
        expect(react_1.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_1.screen.getByText('Selected Ingredients (1)')).toBeInTheDocument();
        expect(react_1.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
    });
    it('handles error recovery workflow', async () => {
        const user = user_event_1.default.setup();
        // Mock console.error to avoid noise
        const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => { });
        (0, react_1.act)(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(MainPageLayout, {}));
        });
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Simulate user creating a recipe and encountering an error
        const recipeNameInput = react_1.screen.getByTestId('recipe-name-input');
        void user.type(recipeNameInput, 'Test Recipe');
        // Add ingredient
        void user.click(react_1.screen.getByTestId('add-ingredient'));
        void user.type(react_1.screen.getByTestId('ingredient-name-0'), 'Test Ingredient');
        // Add step
        void user.click(react_1.screen.getByTestId('add-step'));
        void user.type(react_1.screen.getByTestId('step-instruction-0'), 'Test step');
        // Verify recipe is valid
        expect(react_1.screen.getByTestId('save-recipe')).toBeEnabled();
        // The main page should continue to function despite any errors
        expect(react_1.screen.getByText('What to Eat Next')).toBeInTheDocument();
        expect(react_1.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        consoleSpy.mockRestore();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5yZXNpbGllbnQtZXNsaW50LWJhY2t1cC0xNzU3NDc4ODEzMzkzL3NyY19fX3Rlc3RzX19fZTJlX01haW5QYWdlV29ya2Zsb3dzLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQXNDQSxxREFBcUQ7QUFDckQsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsRCxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNuQixDQUFDO0NBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7QUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3pDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDakI7Q0FDRixDQUFDLENBQUMsQ0FBQztBQUVKLHNEQUFzRDtBQUN0RCxJQUFJLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtJQUNoRCxPQUFPLFNBQVMsc0JBQXNCO1FBQ3BDLE1BQU0sQ0FBQyxlQUFlLEVB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QUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDakUsTUFBTSxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFakUsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzNCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5yZXNpbGllbnQtZXNsaW50LWJhY2t1cC0xNzU3NDc4ODEzMzkzL3NyY19fX3Rlc3RzX19fZTJlX01haW5QYWdlV29ya2Zsb3dzLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnluby1jb25zb2xlLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMsIG1heC1saW5lcy1wZXItZnVuY3Rpb24gLS0gQ2FtcGFpZ24vdGVzdCBmaWxlIHdpdGggaW50ZW50aW9uYWwgcGF0dGVybnMgKi9cbmltcG9ydCB0eXBlIHsgfSBmcm9tICdqZXN0Jztcbi8qKlxuICogRW5kLXRvLUVuZCBUZXN0cyBmb3IgTWFpbiBQYWdlIFdvcmtmbG93c1xuICpcbiAqIFRoZXNlIHRlc3RzIHNpbXVsYXRlIGNvbXBsZXRlIHVzZXIgd29ya2Zsb3dzIG9uIHRoZSBtYWluIHBhZ2UsXG4gKiB0ZXN0aW5nIHRoZSBpbnRlZ3JhdGlvbiBiZXR3ZWVuIGFsbCBjb21wb25lbnRzIGFuZCB1c2VyIGludGVyYWN0aW9ucy5cbiAqXG4gKiBOb3RlOiBUaGVzZSB0ZXN0cyB1c2UganNkb20gYW5kIHRlc3RpbmctbGlicmFyeSB0byBzaW11bGF0ZSBFMl9FIHNjZW5hcmlvc1xuICogd2l0aG91dCByZXF1aXJpbmcgYSBmdWxsIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gKi9cblxuaW1wb3J0IHsgYWN0LCByZW5kZXIsIHNjcmVlbiwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUFsY2hlbWljYWwgfSBmcm9tICdAL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJztcbmltcG9ydCB7IHVzZUF1dG9TdGF0ZUNsZWFudXAsIHVzZU5hdmlnYXRpb25TdGF0ZSwgdXNlU2Nyb2xsUHJlc2VydmF0aW9uIH0gZnJvbSAnQC9ob29rcy91c2VTdGF0ZVByZXNlcnZhdGlvbic7XG5cbi8vIENyZWF0ZSBtb2NrIGNvbXBvbmVudHMgZm9yIHRlc3RpbmdcbmNvbnN0IE1vY2tDdWlzaW5lUmVjb21tZW5kZXI6IFJlYWN0LkZDPGFueT4gPSAocHJvcHM6IGFueSkgPT4gPGRpdiBkYXRhLXRlc3RpZD0nY3Vpc2luZS1yZWNvbW1lbmRlcic+Q3Vpc2luZSBSZWNvbW1lbmRlcjwvZGl2PjtcbmNvbnN0IE1vY2tFbGVtZW50YWxCYWxhbmNlOiBSZWFjdC5GQzxhbnk+ID0gKHByb3BzOiBhbnkpID0+IDxkaXYgZGF0YS10ZXN0aWQ9J2VsZW1lbnRhbC1iYWxhbmNlJz5FbGVtZW50YWwgQmFsYW5jZTwvZGl2PjtcbmNvbnN0IE1vY2tJbnRlbGxpZ2VuY2VQYW5lbDogUmVhY3QuRkM8YW55PiA9IChwcm9wczogYW55KSA9PiA8ZGl2IGRhdGEtdGVzdGlkPSdpbnRlbGxpZ2VuY2UtcGFuZWwnPkludGVsbGlnZW5jZSBQYW5lbDwvZGl2PjtcblxuaW50ZXJmYWNlIE1haW5QYWdlTGF5b3V0UHJvcHMge1xuICBvblNlY3Rpb25OYXZpZ2F0ZT86IChzZWN0aW9uOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuY29uc3QgTWFpblBhZ2VMYXlvdXQ6IFJlYWN0LkZDPE1haW5QYWdlTGF5b3V0UHJvcHM+ID0gKHsgb25TZWN0aW9uTmF2aWdhdGUgfTogYW55KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBkYXRhLXRlc3RpZD0nbWFpbi1wYWdlLWxheW91dCc+XG4gICAgICA8TW9ja0N1aXNpbmVSZWNvbW1lbmRlciAvPlxuICAgICAgPE1vY2tFbGVtZW50YWxCYWxhbmNlIC8+XG4gICAgICA8TW9ja0ludGVsbGlnZW5jZVBhbmVsIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5cbi8vIE1vY2sgYWxsIGV4dGVybmFsIGRlcGVuZGVuY2llcyBmb3IgRTJfRSBzaW11bGF0aW9uXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogKCkgPT4gKHsgcHVzaDogamVzdC5mbigpLCBiYWNrOiBqZXN0LmZuKCksXG4gICAgZm9yd2FyZDogamVzdC5mbigpLFxuICAgIHJlZnJlc2g6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlOiBqZXN0LmZuKClcbiAgfSksXG59KSk7XG5cbmplc3QubW9jaygnQC9jb250ZXh0cy9BbGNoZW1pY2FsQ29udGV4dC9ob29rcycpO1xuamVzdC5tb2NrKCdAL2hvb2tzL3VzZVN0YXRlUHJlc2VydmF0aW9uJyk7XG5qZXN0Lm1vY2soJ0AvdXRpbHMvbG9nZ2VyJywgKCkgPT4gKHtcbiAgbG9nZ2VyOiB7IGRlYnVnOiBqZXN0LmZuKCksIGluZm86IGplc3QuZm4oKSxcbiAgICB3YXJuOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKVxuICB9LFxufSkpO1xuXG4vLyBNb2NrIHJlYWxpc3RpYyBjb21wb25lbnQgYmVoYXZpb3JzIGZvciBFMl9FIHRlc3Rpbmdcbmplc3QubW9jaygnQC9jb21wb25lbnRzL0N1aXNpbmVSZWNvbW1lbmRlcicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tDdWlzaW5lUmVjb21tZW5kZXIoKTogYW55IHtcbiAgICBjb25zdCBbc2VsZWN0ZWRDdWlzaW5lLCBzZXRTZWxlY3RlZEN1aXNpbmVdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW3Nob3dSZWNpcGVzLCBzZXRTaG93UmVjaXBlc10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBjdWlzaW5lczogYW55ID0gW1xuICAgICAgeyBuYW1lOiAnSXRhbGlhbicsIHNjb3JlOiA5NSwgcmVjaXBlczogWydQYXN0YSBNYXJpbmFyYScsICdSaXNvdHRvJywgJ1BpenphIE1hcmdoZXJpdGEnXSB9LFxuICAgICAgeyBuYW1lOiAnQ2hpbmVzZScsIHNjb3JlOiA4OCwgcmVjaXBlczogWydGcmllZCBSaWNlJywgJ1N3ZWV0IGFuZCBTb3VyIFBvcmsnLCAnS3VuZyBQYW8gQ2hpY2tlbiddIH0sXG4gICAgICB7IG5hbWU6ICdNZXhpY2FuJywgc2NvcmU6IDgyLCByZWNpcGVzOiBbJ1RhY29zJywgJ0VuY2hpbGFkYXMnLCAnR3VhY2Ftb2xlJ10gfSxcbiAgICAgIHsgbmFtZTogJ0luZGlhbicsIHNjb3JlOiA3OSwgcmVjaXBlczogWydDdXJyeScsICdCaXJ5YW5pJywgJ05hYW4nXSB9LFxuICAgIF07XG5cbiAgICBjb25zdCBoYW5kbGVDdWlzaW5lU2VsZWN0OiBhbnkgPSAoY3Vpc2luZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBjdWlzaW5lRGF0YTogYW55ID0gY3Vpc2luZSBhcyB7IG5hbWU6IHN0cmluZzsgc2NvcmU6IG51bWJlcjsgcmVjaXBlczogc3RyaW5nW10gfTtcbiAgICAgIHNldFNlbGVjdGVkQ3Vpc2luZShjdWlzaW5lRGF0YS5uYW1lKTtcbiAgICAgIHNldFNob3dSZWNpcGVzKHRydWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD0nY3Vpc2luZS1yZWNvbW1lbmRlcic+XG4gICAgICAgIDxoMz5DdWlzaW5lIFJlY29tbWVuZGF0aW9uczwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjdWlzaW5lLWdyaWQnPlxuICAgICAgICAgIHtjdWlzaW5lcy5tYXAoY3Vpc2luZSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17Y3Vpc2luZS5uYW1lfSBjbGFzc05hbWU9J2N1aXNpbmUtY2FyZCcgZGF0YS10ZXN0aWQ9e2BjdWlzaW5lLWNhcmQtJHtjdWlzaW5lLm5hbWUudG9Mb3dlckNhc2UoKX1gfT5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUN1aXNpbmVTZWxlY3QoY3Vpc2luZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzZWxlY3RlZEN1aXNpbmUgPT09IGN1aXNpbmUubmFtZSA/ICdzZWxlY3RlZCcgOiAnJ31cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGN1aXNpbmUtJHtjdWlzaW5lLm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGg0PntjdWlzaW5lLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2NvcmUnPk1hdGNoOiB7Y3Vpc2luZS5zY29yZX0lPC9kaXY+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtzaG93UmVjaXBlcyAmJiBzZWxlY3RlZEN1aXNpbmUgJiYgKFxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9J3JlY2lwZS1yZWNvbW1lbmRhdGlvbnMnIGNsYXNzTmFtZT0ncmVjaXBlLXNlY3Rpb24nPlxuICAgICAgICAgICAgPGg0PlJlY29tbWVuZGVkIHtzZWxlY3RlZEN1aXNpbmV9IFJlY2lwZXM8L2g0PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2lwZS1saXN0Jz5cbiAgICAgICAgICAgICAge2N1aXNpbmVzXG4gICAgICAgICAgICAgICAgLmZpbmQoYyA9PiBjLm5hbWUgPT09IHNlbGVjdGVkQ3Vpc2luZSlcbiAgICAgICAgICAgICAgICA/LnJlY2lwZXMubWFwKHJlY2lwZSA9PiAoXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGtleT17cmVjaXBlfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YHJlY2lwZS0ke3JlY2lwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKX1gfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3JlY2lwZS1idXR0b24nXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNpcGV9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn0pO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9JbmdyZWRpZW50UmVjb21tZW5kZXInLCAoKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBNb2NrSW5ncmVkaWVudFJlY29tbWVuZGVyKHsgbWF4RGlzcGxheWVkID0gOCB9OiB7IG1heERpc3BsYXllZD86IG51bWJlciB9KSB7XG4gICAgY29uc3QgW3NlbGVjdGVkSW5ncmVkaWVudHMsIHNldFNlbGVjdGVkSW5ncmVkaWVudHNdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcbiAgICBjb25zdCBbZXhwYW5kZWRJbmdyZWRpZW50LCBzZXRFeHBhbmRlZEluZ3JlZGllbnRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgICBjb25zdCBpbmdyZWRpZW50czogYW55ID0gW1xuICAgICAgeyBuYW1lOiAnVG9tYXRvZXMnLCBjYXRlZ29yeTogJ1ZlZ2V0YWJsZXMnLCBwcm9wZXJ0aWVzOiBbJ1VtYW1pJywgJ0FjaWRpYycsICdGcmVzaCddIH0sXG4gICAgICB7IG5hbWU6ICdPbmlvbnMnLCBjYXRlZ29yeTogJ1ZlZ2V0YWJsZXMnLCBwcm9wZXJ0aWVzOiBbJ1N3ZWV0JywgJ1B1bmdlbnQnLCAnQXJvbWF0aWMnXSB9LFxuICAgICAgeyBuYW1lOiAnR2FybGljJywgY2F0ZWdvcnk6ICdBcm9tYXRpY3MnLCBwcm9wZXJ0aWVzOiBbJ1B1bmdlbnQnLCAnU2F2b3J5JywgJ0Fyb21hdGljJ10gfSxcbiAgICAgIHsgbmFtZTogJ0Jhc2lsJywgY2F0ZWdvcnk6ICdIZXJicycsIHByb3BlcnRpZXM6IFsnRnJlc2gnLCAnQXJvbWF0aWMnLCAnU3dlZXQnXSB9LFxuICAgICAgeyBuYW1lOiAnT2xpdmUgT2lsJywgY2F0ZWdvcnk6ICdPaWxzJywgcHJvcGVydGllczogWydSaWNoJywgJ0ZydWl0eScsICdTbW9vdGgnXSB9LFxuICAgICAgeyBuYW1lOiAnQ2hlZXNlJywgY2F0ZWdvcnk6ICdEYWlyeScsIHByb3BlcnRpZXM6IFsnQ3JlYW15JywgJ1NhbHR5JywgJ1JpY2gnXSB9LFxuICAgICAgeyBuYW1lOiAnUGFzdGEnLCBjYXRlZ29yeTogJ0dyYWlucycsIHByb3BlcnRpZXM6IFsnTmV1dHJhbCcsICdGaWxsaW5nJywgJ1ZlcnNhdGlsZSddIH0sXG4gICAgICB7IG5hbWU6ICdDaGlja2VuJywgY2F0ZWdvcnk6ICdQcm90ZWlucycsIHByb3BlcnRpZXM6IFsnTGVhbicsICdNaWxkJywgJ1ZlcnNhdGlsZSddIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IGRpc3BsYXllZEluZ3JlZGllbnRzOiBhbnkgPSBpbmdyZWRpZW50cy5zbGljZSgwLCBtYXhEaXNwbGF5ZWQpO1xuXG4gICAgY29uc3QgdG9nZ2xlSW5ncmVkaWVudDogYW55ID0gKGluZ3JlZGllbnQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWRJbmdyZWRpZW50cyhwcmV2ID0+XG4gICAgICAgIHByZXYuaW5jbHVkZXMoaW5ncmVkaWVudCkgPyBwcmV2LmZpbHRlcihpID0+IGkgIT09IGluZ3JlZGllbnQpIDogWy4uLnByZXYsIGluZ3JlZGllbnRdLFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdG9nZ2xlRXhwYW5kZWQ6IGFueSA9IChpbmdyZWRpZW50OiBzdHJpbmcpID0+IHtcbiAgICAgIHNldEV4cGFuZGVkSW5ncmVkaWVudChwcmV2ID0+IChwcmV2ID09PSBpbmdyZWRpZW50ID8gbnVsbCA6IGluZ3JlZGllbnQpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9J2luZ3JlZGllbnQtcmVjb21tZW5kZXInPlxuICAgICAgICA8aDM+SW5ncmVkaWVudCBSZWNvbW1lbmRhdGlvbnM8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW5ncmVkaWVudC1ncmlkJz5cbiAgICAgICAgICB7ZGlzcGxheWVkSW5ncmVkaWVudHMubWFwKGluZ3JlZGllbnQgPT4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBrZXk9e2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpbmdyZWRpZW50LWNhcmQnXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgaW5ncmVkaWVudC1jYXJkLSR7aW5ncmVkaWVudC5uYW1lLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRvZ2dsZUluZ3JlZGllbnQoaW5ncmVkaWVudC5uYW1lKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3NlbGVjdGVkSW5ncmVkaWVudHMuaW5jbHVkZXMoaW5ncmVkaWVudC5uYW1lKSA/ICdzZWxlY3RlZCcgOiAnJ31cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVFeHBhbmRlZChpbmdyZWRpZW50Lm5hbWUpfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZXhwYW5kLSR7aW5ncmVkaWVudC5uYW1lLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2V4cGFuZC1idXR0b24nXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZXhwYW5kZWRJbmdyZWRpZW50ID09PSBpbmdyZWRpZW50Lm5hbWUgPyAn4pa8JyA6ICfilrYnfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICB7ZXhwYW5kZWRJbmdyZWRpZW50ID09PSBpbmdyZWRpZW50Lm5hbWUgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9e2BkZXRhaWxzLSR7aW5ncmVkaWVudC5uYW1lLnRvTG93ZXJDYXNlKCl9YH0gY2xhc3NOYW1lPSdpbmdyZWRpZW50LWRldGFpbHMnPlxuICAgICAgICAgICAgICAgICAgPGRpdj5DYXRlZ29yeToge2luZ3JlZGllbnQuY2F0ZWdvcnl9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PlByb3BlcnRpZXM6IHtpbmdyZWRpZW50LnByb3BlcnRpZXMuam9pbignLCAnKX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7c2VsZWN0ZWRJbmdyZWRpZW50cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdzZWxlY3RlZC1pbmdyZWRpZW50cy1zdW1tYXJ5JyBjbGFzc05hbWU9J3NlbGVjdGlvbi1zdW1tYXJ5Jz5cbiAgICAgICAgICAgIDxoND5TZWxlY3RlZCBJbmdyZWRpZW50cyAoe3NlbGVjdGVkSW5ncmVkaWVudHMubGVuZ3RofSk8L2g0PlxuICAgICAgICAgICAgPGRpdj57c2VsZWN0ZWRJbmdyZWRpZW50cy5qb2luKCcsICcpfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn0pO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9Db29raW5nTWV0aG9kc1NlY3Rpb24nLCAoKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBNb2NrQ29va2luZ01ldGhvZHNTZWN0aW9uKHtcbiAgICBtYXhEaXNwbGF5ZWQgPSA2LFxuICAgIG9uVmlld01vcmUsXG4gIH06IHtcbiAgICBtYXhEaXNwbGF5ZWQ/OiBudW1iZXI7XG4gICAgb25WaWV3TW9yZT86ICgpID0+IHZvaWQ7XG4gIH0pIHtcbiAgICBjb25zdCBbc2VsZWN0ZWRNZXRob2QsIHNldFNlbGVjdGVkTWV0aG9kXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gICAgY29uc3QgbWV0aG9kczogYW55ID0gW1xuICAgICAgeyBuYW1lOiAnU2F1dMOpJywgdGltZTogJzUtMTAgbWluJywgZGlmZmljdWx0eTogJ0Vhc3knLCBkZXNjcmlwdGlvbjogJ1F1aWNrIGNvb2tpbmcgaW4gYSBwYW4gd2l0aCBvaWwnIH0sXG4gICAgICB7IG5hbWU6ICdSb2FzdCcsIHRpbWU6ICczMC02MCBtaW4nLCBkaWZmaWN1bHR5OiAnTWVkaXVtJywgZGVzY3JpcHRpb246ICdDb29raW5nIGluIHRoZSBvdmVuIHdpdGggZHJ5IGhlYXQnIH0sXG4gICAgICB7IG5hbWU6ICdHcmlsbCcsIHRpbWU6ICcxMC0yMCBtaW4nLCBkaWZmaWN1bHR5OiAnTWVkaXVtJywgZGVzY3JpcHRpb246ICdDb29raW5nIG92ZXIgZGlyZWN0IGhlYXQnIH0sXG4gICAgICB7IG5hbWU6ICdTdGVhbScsIHRpbWU6ICcxMC0xNSBtaW4nLCBkaWZmaWN1bHR5OiAnRWFzeScsIGRlc2NyaXB0aW9uOiAnQ29va2luZyB3aXRoIHN0ZWFtIGhlYXQnIH0sXG4gICAgICB7IG5hbWU6ICdCcmFpc2UnLCB0aW1lOiAnNjAtMTIwIG1pbicsIGRpZmZpY3VsdHk6ICdIYXJkJywgZGVzY3JpcHRpb246ICdTbG93IGNvb2tpbmcgd2l0aCBsaXF1aWQnIH0sXG4gICAgICB7IG5hbWU6ICdTdGlyLWZyeScsIHRpbWU6ICc1LTggbWluJywgZGlmZmljdWx0eTogJ01lZGl1bScsIGRlc2NyaXB0aW9uOiAnUXVpY2sgY29va2luZyB3aGlsZSBzdGlycmluZycgfSxcbiAgICBdO1xuXG4gICAgY29uc3QgZGlzcGxheWVkTWV0aG9kczogYW55ID0gbWV0aG9kcy5zbGljZSgwLCBtYXhEaXNwbGF5ZWQpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9J2Nvb2tpbmctbWV0aG9kcyc+XG4gICAgICAgIDxoMz5Db29raW5nIE1ldGhvZHM8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWV0aG9kcy1ncmlkJz5cbiAgICAgICAgICB7ZGlzcGxheWVkTWV0aG9kcy5tYXAobWV0aG9kID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXttZXRob2QubmFtZX0gY2xhc3NOYW1lPSdtZXRob2QtY2FyZCcgZGF0YS10ZXN0aWQ9e2BtZXRob2QtY2FyZC0ke21ldGhvZC5uYW1lLnRvTG93ZXJDYXNlKCl9YH0+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZE1ldGhvZChtZXRob2QubmFtZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzZWxlY3RlZE1ldGhvZCA9PT0gbWV0aG9kLm5hbWUgPyAnc2VsZWN0ZWQnIDogJyd9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BtZXRob2QtJHttZXRob2QubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDQ+e21ldGhvZC5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21ldGhvZC1pbmZvJz5cbiAgICAgICAgICAgICAgICAgIDxkaXY+VGltZToge21ldGhvZC50aW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdj5EaWZmaWN1bHR5OiB7bWV0aG9kLmRpZmZpY3VsdHl9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgIHtzZWxlY3RlZE1ldGhvZCA9PT0gbWV0aG9kLm5hbWUgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9e2BtZXRob2QtZGV0YWlscy0ke21ldGhvZC5uYW1lLnRvTG93ZXJDYXNlKCl9YH0gY2xhc3NOYW1lPSdtZXRob2QtZGV0YWlscyc+XG4gICAgICAgICAgICAgICAgICA8cD57bWV0aG9kLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uVmlld01vcmV9IGRhdGEtdGVzdGlkPSd2aWV3LW1vcmUtbWV0aG9kcycgY2xhc3NOYW1lPSd2aWV3LW1vcmUtYnV0dG9uJz47XG4gICAgICAgICAgVmlldyBBbGwgQ29va2luZyBNZXRob2RzXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn0pO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9yZWNpcGVzL1JlY2lwZUJ1aWxkZXJTaW1wbGUnLCAoKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBNb2NrUmVjaXBlQnVpbGRlclNpbXBsZSgpOiBhbnkge1xuICAgIGNvbnN0IFtyZWNpcGVOYW1lLCBzZXRSZWNpcGVOYW1lXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbaW5ncmVkaWVudHMsIHNldEluZ3JlZGllbnRzXSA9IFJlYWN0LnVzZVN0YXRlPEFycmF5PHsgbmFtZTogc3RyaW5nOyBxdWFudGl0LCB5OiBzdHJpbmcgfT4+KFtdKTtcbiAgICBjb25zdCBbc3RlcHMsIHNldFN0ZXBzXSA9IFJlYWN0LnVzZVN0YXRlPEFycmF5PHsgaW5zdHJ1Y3Rpb246IHN0cmluZzsgdGltaW5nOiBzdHJpbmcgfT4+KFtdKTtcbiAgICBjb25zdCBbc2VydmluZ3MsIHNldFNlcnZpbmdzXSA9IFJlYWN0LnVzZVN0YXRlKDQpO1xuICAgIGNvbnN0IFtwcmVwVGltZSwgc2V0UHJlcFRpbWVdID0gUmVhY3QudXNlU3RhdGUoMTUpO1xuICAgIGNvbnN0IFtjb29rVGltZSwgc2V0Q29va1RpbWVdID0gUmVhY3QudXNlU3RhdGUoMzApO1xuXG4gICAgY29uc3QgYWRkSW5ncmVkaWVudDogUmVhY3QuRkM8YW55PiA9IChwcm9wczogYW55KSA9PiB7XG4gICAgICBzZXRJbmdyZWRpZW50cyhwcmV2ID0+IFsuLi5wcmV2LCB7IG5hbWU6ICcnLCBxdWFudGl0eTogJycgfV0pO1xuICAgIH07XG5cbiAgICBjb25zdCB1cGRhdGVJbmdyZWRpZW50OiBhbnkgPSAoaW5kZXg6IG51bWJlciwgZmllbGQ6ICduYW1lJyB8ICdxdWFudGl0eScsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gcHJldi5tYXAoKGluZzogYW55KSA9PiAoaSA9PT0gaW5kZXggPyB7IC4uLmluZywgW2ZpZWxkXTogdmFsdWUgfSA6IGluZykpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlSW5ncmVkaWVudDogYW55ID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gcHJldi5maWx0ZXIoKF86IGFueSkgPT4gaSAhPT0gaW5kZXgpKVxuICAgIH07XG5cbiAgICBjb25zdCBhZGRTdGVwOiBSZWFjdC5GQzxhbnk+ID0gKHByb3BzOiBhbnkpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gWy4uLnByZXYsIHsgaW5zdHJ1Y3Rpb246ICcnLCB0aW1pbmc6ICcnIH1dKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlU3RlcDogYW55ID0gKGluZGV4OiBudW1iZXIsIGZpZWxkOiAnaW5zdHJ1Y3Rpb24nIHwgJ3RpbWluZycsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gcHJldi5tYXAoKHN0ZXA6IGFueSkgPT4gKGkgPT09IGluZGV4ID8geyAuLi5zdGVwLCBbZmllbGRdOiB2YWx1ZSB9IDogc3RlcCkpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlU3RlcDogYW55ID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gcHJldi5maWx0ZXIoKF86IGFueSkgPT4gaSAhPT0gaW5kZXgpKVxuICAgIH07XG5cbiAgICBjb25zdCBjYW5TYXZlOiBhbnkgPSByZWNpcGVOYW1lLnRyaW0oKSAmJiBpbmdyZWRpZW50cy5zb21lKGluZyA9PiBpbmcubmFtZS50cmltKCkpICYmIHZvaWQgc3RlcHMuc29tZShzdGVwID0+IHN0ZXAuaW5zdHJ1Y3Rpb24udHJpbSgpKTtcblxuICAgIGNvbnN0IHRvdGFsVGltZTogYW55ID0gcHJlcFRpbWUgKyBjb29rVGltZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdyZWNpcGUtYnVpbGRlcic+XG4gICAgICAgIDxoMz5SZWNpcGUgQnVpbGRlcjwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2lwZS1mb3JtJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjaXBlLWhlYWRlcic+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J1JlY2lwZSBOYW1lJ1xuICAgICAgICAgICAgICB2YWx1ZT17cmVjaXBlTmFtZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0UmVjaXBlTmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdyZWNpcGUtbmFtZS1pbnB1dCdcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNpcGUtbWV0YSc+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcidcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VydmluZ3N9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0U2VydmluZ3MocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpIHx8IDEpfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdzZXJ2aW5ncy1pbnB1dCdcbiAgICAgICAgICAgICAgICBtaW49JzEnXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcidcbiAgICAgICAgICAgICAgICB2YWx1ZT17cHJlcFRpbWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0UHJlcFRpbWUocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpIHx8IDApfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdwcmVwLXRpbWUtaW5wdXQnXG4gICAgICAgICAgICAgICAgbWluPScwJ1xuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgdmFsdWU9e2Nvb2tUaW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldENvb2tUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nY29vay10aW1lLWlucHV0J1xuICAgICAgICAgICAgICAgIG1pbj0nMCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2luZ3JlZGllbnRzLXNlY3Rpb24nPlxuICAgICAgICAgICAgPGg0PkluZ3JlZGllbnRzPC9oND5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkSW5ncmVkaWVudH0gZGF0YS10ZXN0aWQ9J2FkZC1pbmdyZWRpZW50Jz5cbiAgICAgICAgICAgICAgQWRkIEluZ3JlZGllbnRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICB7aW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50OiBhbnksIGluZGV4OiBhbnkpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9J2luZ3JlZGllbnQtcm93JyBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtcm93LSR7aW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J1F1YW50aXR5J1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQucXVhbnRpdHl9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB1cGRhdGVJbmdyZWRpZW50KGluZGV4LCAncXVhbnRpdHknLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtcXVhbnRpdHktJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0luZ3JlZGllbnQgbmFtZSdcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtpbmdyZWRpZW50Lm5hbWV9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB1cGRhdGVJbmdyZWRpZW50KGluZGV4LCAnbmFtZScsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgaW5ncmVkaWVudC1uYW1lLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gcmVtb3ZlSW5ncmVkaWVudChpbmRleCl9IGRhdGEtdGVzdGlkPXtgcmVtb3ZlLWluZ3JlZGllbnQtJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICAgIFJlbW92ZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdpbmdyZWRpZW50cy1jb3VudCc+LCBJbmdyZWRpZW50czoge2luZ3JlZGllbnRzLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzdGVwcy1zZWN0aW9uJz5cbiAgICAgICAgICAgIDxoND5JbnN0cnVjdGlvbnM8L2g0PlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXthZGRTdGVwfSBkYXRhLXRlc3RpZD0nYWRkLXN0ZXAnPlxuICAgICAgICAgICAgICBBZGQgU3RlcFxuICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgIHtzdGVwcy5tYXAoKHN0ZXA6IGFueSwgaW5kZXg6IGFueSkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT0nc3RlcC1yb3cnIGRhdGEtdGVzdGlkPXtgc3RlcC1yb3ctJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3N0ZXAtbnVtYmVyJz57aW5kZXggKyAxfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdEZXNjcmliZSB0aGlzIHN0ZXAuLi4nXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17c3RlcC5pbnN0cnVjdGlvbn1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHVwZGF0ZVN0ZXAoaW5kZXgsICdpbnN0cnVjdGlvbicsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC1pbnN0cnVjdGlvbi0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nVGltaW5nJ1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0ZXAudGltaW5nfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdXBkYXRlU3RlcChpbmRleCwgJ3RpbWluZycsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC10aW1pbmctJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiByZW1vdmVTdGVwKGluZGV4KX0gZGF0YS10ZXN0aWQ9e2ByZW1vdmUtc3RlcC0ke2luZGV4fWB9PlxuICAgICAgICAgICAgICAgICAgUmVtb3ZlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9J3N0ZXBzLWNvdW50Jz4sIFN0ZXBzOiB7c3RlcHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2lwZS1zdW1tYXJ5JyBkYXRhLXRlc3RpZD0ncmVjaXBlLXN1bW1hcnknPlxuICAgICAgICAgICAgPGg0PlJlY2lwZSBTdW1tYXJ5PC9oND5cbiAgICAgICAgICAgIDxkaXY+TmFtZToge3JlY2lwZU5hbWUgfHwgJ1VudGl0bGVkIFJlY2lwZSd9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlNlcnZpbmdzOiB7c2VydmluZ3N9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlRvdGFsIFRpbWU6IHt0b3RhbFRpbWV9IG1pbnV0ZXM8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+SW5ncmVkaWVudHM6IHtpbmdyZWRpZW50cy5sZW5ndGh9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlN0ZXBzOiB7c3RlcHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGJ1dHRvbiBkaXNhYmxlZD17IWNhblNhdmV9IGRhdGEtdGVzdGlkPSdzYXZlLXJlY2lwZScgY2xhc3NOYW1lPXtjYW5TYXZlID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ30+O1xuICAgICAgICAgICAgU2F2ZSBSZWNpcGVcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmRlc2NyaWJlKCdNYWluIFBhZ2UgRTJfRSBXb3JrZmxvd3MnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBbGNoZW1pY2FsQ29udGV4dDogYW55ID0ge1xuICBzdGF0ZTogeyBhc3Ryb2xvZ2ljYWxTdGF0ZTogeyBzdW5TaWduOiAnYXJpZXMnIH0sXG4gICAgICBlbGVtZW50YWxTdGF0ZTogeyBGaXJlOiAwLjMsIFdhdGVyOiAwLjIsIEVhcnRoOiAwLjMsIEFpcjogMC4yIH0sXG4gICAgfSxcbiAgICBwbGFuZXRhcnlQb3NpdGlvbnM6IHsgc3VuOiB7IHNpZ246ICdhcmllcycgfSB9LFxuICAgIGlzRGF5dGltZTogdHJ1ZVxuICB9O1xuXG4gIGNvbnN0IG1vY2tOYXZpZ2F0aW9uU3RhdGUgPSB7XG4gICAgc2F2ZVN0YXRlOiBqZXN0LmZuKCksXG4gICAgZ2V0U3RhdGU6IGplc3QuZm4oKCkgPT4gKHt9KSksXG4gIH07XG5cbiAgY29uc3QgbW9ja1Njcm9sbFByZXNlcnZhdGlvbjogYW55ID0ge1xuICByZXN0b3JlU2Nyb2xsUG9zaXRpb246IGplc3QuZm4oKVxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHZvaWQgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICAodXNlQWxjaGVtaWNhbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrQWxjaGVtaWNhbENvbnRleHQpO1xuICAgICh1c2VOYXZpZ2F0aW9uU3RhdGUgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja05hdmlnYXRpb25TdGF0ZSk7XG4gICAgKHVzZVNjcm9sbFByZXNlcnZhdGlvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrU2Nyb2xsUHJlc2VydmF0aW9uKTtcbiAgICAodXNlQXV0b1N0YXRlQ2xlYW51cCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgLy8gTW9jayBET00gbWV0aG9kc1xuICAgIHZvaWQgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3Njcm9sbFknLCB7IHZhbHVlOiAwLCB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgICBqZXN0LnNweU9uKGRvY3VtZW50LCAnZ2V0RWxlbWVudEJ5SWQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT5cbiAgICAgICAgKHtcbiAgICAgICAgICBzY3JvbGxJbnRvVmlldzogamVzdC5mbigpLFxuICAgICAgICAgIHN0eWxlOiB7fSxcbiAgICAgICAgICBjbGFzc0xpc3Q6IHsgYWRkOiBqZXN0LmZuKCksIHJlbW92ZTogamVzdC5mbigpIH0sXG4gICAgICAgIH0pIGFzIGFueSxcbiAgICApO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHZvaWQgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgaXQoJ2NvbXBsZXRlcyBmdWxsIG1lYWwgcGxhbm5pbmcgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcjogYW55ID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICAvLyBXYWl0IGZvciBhbGwgY29tcG9uZW50cyB0byBsb2FkXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLXJlY29tbWVuZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXJlY29tbWVuZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjb29raW5nLW1ldGhvZHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1idWlsZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBTdGVwIDE6IFNlbGVjdCBhIGN1aXNpbmVcbiAgICBjb25zdCBpdGFsaWFuQ3Vpc2luZTogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpdGFsaWFuLWN1aXNpbmUnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soaXRhbGlhbkN1aXNpbmUpO1xuXG4gICAgLy8gVmVyaWZ5IGN1aXNpbmUgc2VsZWN0aW9uIGFuZCByZWNpcGUgcmVjb21tZW5kYXRpb25zIGFwcGVhclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1yZWNvbW1lbmRhdGlvbnMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmVjb21tZW5kZWQgSXRhbGlhbiBSZWNpcGVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTdGVwIDI6IFNlbGVjdCBpbmdyZWRpZW50c1xuICAgIGNvbnN0IHRvbWF0b2VzOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtdG9tYXRvZXMnKTtcbiAgICBjb25zdCBiYXNpbDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LWJhc2lsJyk7XG4gICAgY29uc3Qgb2xpdmVPaWw6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1vbGl2ZSBvaWwnKTtcblxuICAgIHZvaWQgdXNlci5jbGljayh0b21hdG9lcyk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGJhc2lsKTtcbiAgICB2b2lkIHVzZXIuY2xpY2sob2xpdmVPaWwpO1xuXG4gICAgLy8gVmVyaWZ5IGluZ3JlZGllbnQgc2VsZWN0aW9uXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VsZWN0ZWQtaW5ncmVkaWVudHMtc3VtbWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBJbmdyZWRpZW50cyAoMyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFN0ZXAgMzogU2VsZWN0IGNvb2tpbmcgbWV0aG9kXG4gICAgY29uc3Qgc2F1dGVNZXRob2Q6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLXNhdXTDqScpO1xuICAgIHZvaWQgdXNlci5jbGljayhzYXV0ZU1ldGhvZCk7XG5cbiAgICAvLyBWZXJpZnkgbWV0aG9kIHNlbGVjdGlvbiBhbmQgZGV0YWlsc1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXNhdXTDqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gU3RlcCA0OiBCdWlsZCBhIHJlY2lwZVxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIHZvaWQgdXNlci50eXBlKHJlY2lwZU5hbWVJbnB1dCwgJ0l0YWxpYW4gVG9tYXRvIEJhc2lsIFNhdXTDqScpO1xuXG4gICAgLy8gQWRkIGluZ3JlZGllbnRzIHRvIHJlY2lwZVxuICAgIGNvbnN0IGFkZEluZ3JlZGllbnRCdXR0b246IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLWluZ3JlZGllbnQnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soYWRkSW5ncmVkaWVudEJ1dHRvbik7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGFkZEluZ3JlZGllbnRCdXR0b24pO1xuICAgIHZvaWQgdXNlci5jbGljayhhZGRJbmdyZWRpZW50QnV0dG9uKTtcblxuICAgIC8vIEZpbGwgaW4gaW5ncmVkaWVudCBkZXRhaWxzXG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXF1YW50aXR5LTAnKSwgJzIgY3VwcycpO1xuICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTAnKSwgJ0ZyZXNoIFRvbWF0b2VzJyk7XG5cbiAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcXVhbnRpdHktMScpLCAnMS80IGN1cCcpO1xuICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTEnKSwgJ0ZyZXNoIEJhc2lsJyk7XG5cbiAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcXVhbnRpdHktMicpLCAnMiB0YnNwJyk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LW5hbWUtMicpLCAnT2xpdmUgT2lsJyk7XG5cbiAgICAvLyBBZGQgY29va2luZyBzdGVwc1xuICAgIGNvbnN0IGFkZFN0ZXBCdXR0b246IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXN0ZXAnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soYWRkU3RlcEJ1dHRvbik7XG4gICAgdm9pZCB1c2VyLmNsaWNrKGFkZFN0ZXBCdXR0b24pO1xuXG4gICAgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0wJyksICdIZWF0IG9saXZlIG9pbCBpbiBhIGxhcmdlIHBhbiBvdmVyIG1lZGl1bSBoZWF0Jyk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLXRpbWluZy0wJyksICcyIG1pbicpO1xuXG4gICAgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0xJyksICdBZGQgdG9tYXRvZXMgYW5kIGJhc2lsLCBzYXV0w6kgdW50aWwgdGVuZGVyJyk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLXRpbWluZy0xJyksICc4IG1pbicpO1xuXG4gICAgLy8gVmVyaWZ5IHJlY2lwZSBjYW4gYmUgc2F2ZWRcbiAgICBjb25zdCBzYXZlQnV0dG9uOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NhdmUtcmVjaXBlJyk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvQmVFbmFibGVkKCk7XG5cbiAgICAvLyBTYXZlIHRoZSByZWNpcGVcbiAgICB2b2lkIHVzZXIuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAvLyBWZXJpZnkgdGhlIGNvbXBsZXRlIHdvcmtmbG93XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnSXRhbGlhbiBUb21hdG8gQmFzaWwgU2F1dMOpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0luZ3JlZGllbnRzOiAzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1N0ZXBzOiAyJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgaW5ncmVkaWVudCBleHBsb3JhdGlvbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VyOiBhbnkgPSB1c2VyRXZlbnQuc2V0dXAoKTtcblxuICAgIGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IC8+KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1yZWNvbW1lbmRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gRXhwYW5kIGluZ3JlZGllbnQgZGV0YWlsc1xuICAgIGNvbnN0IGV4cGFuZFRvbWF0b2VzOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2V4cGFuZC10b21hdG9lcycpO1xuICAgIHZvaWQgdXNlci5jbGljayhleHBhbmRUb21hdG9lcyk7XG5cbiAgICAvLyBWZXJpZnkgZGV0YWlscyBhcmUgc2hvd25cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXRhaWxzLXRvbWF0b2VzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NhdGVnb3J5OiBWZWdldGFibGVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb3BlcnRpZXM6IFVtYW1pLCBBY2lkaWMsIEZyZXNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBFeHBhbmQgYW5vdGhlciBpbmdyZWRpZW50XG4gICAgY29uc3QgZXhwYW5kR2FybGljOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2V4cGFuZC1nYXJsaWMnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soZXhwYW5kR2FybGljKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2RldGFpbHMtZ2FybGljJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NhdGVnb3J5OiBBcm9tYXRpY3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIENvbGxhcHNlIGZpcnN0IGluZ3JlZGllbnRcbiAgICB2b2lkIHVzZXIuY2xpY2soZXhwYW5kVG9tYXRvZXMpO1xuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRlc3RJZCgnZGV0YWlscy10b21hdG9lcycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFNlbGVjdCBtdWx0aXBsZSBpbmdyZWRpZW50c1xuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtdG9tYXRvZXMnKSk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1nYXJsaWMnKSk7XG4gICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1iYXNpbCcpKTtcblxuICAgIC8vIFZlcmlmeSBzZWxlY3Rpb24gc3VtbWFyeVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBJbmdyZWRpZW50cyAoMyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVG9tYXRvZXMsIEdhcmxpYywgQmFzaWwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgY29va2luZyBtZXRob2QgZXhwbG9yYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcjogYW55ID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Nvb2tpbmctbWV0aG9kcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2VsZWN0IGRpZmZlcmVudCBjb29raW5nIG1ldGhvZHMgYW5kIHZpZXcgZGV0YWlsc1xuICAgIGNvbnN0IHJvYXN0TWV0aG9kOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1yb2FzdCcpO1xuICAgIHZvaWQgdXNlci5jbGljayhyb2FzdE1ldGhvZCk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2QtZGV0YWlscy1yb2FzdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb29raW5nIGluIHRoZSBvdmVuIHdpdGggZHJ5IGhlYXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFN3aXRjaCB0byBhbm90aGVyIG1ldGhvZFxuICAgIGNvbnN0IGdyaWxsTWV0aG9kOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1ncmlsbCcpO1xuICAgIHZvaWQgdXNlci5jbGljayhncmlsbE1ldGhvZCk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2QtZGV0YWlscy1ncmlsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb29raW5nIG92ZXIgZGlyZWN0IGhlYXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFByZXZpb3VzIG1ldGhvZCBkZXRhaWxzIHNob3VsZCBiZSBoaWRkZW5cbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXJvYXN0JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gVGVzdCB2aWV3IG1vcmUgZnVuY3Rpb25hbGl0eVxuICAgIGNvbnN0IHZpZXdNb3JlQnV0dG9uOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ZpZXctbW9yZS1tZXRob2RzJyk7XG4gICAgZXhwZWN0KHZpZXdNb3JlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBjb21wbGV0ZSByZWNpcGUgY3JlYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcjogYW55ID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1idWlsZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgYSBjb21wbGV0ZSByZWNpcGUgZnJvbSBzY3JhdGNoXG4gICAgY29uc3QgcmVjaXBlTmFtZUlucHV0OiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1uYW1lLWlucHV0Jyk7XG4gICAgdm9pZCB1c2VyLnR5cGUocmVjaXBlTmFtZUlucHV0LCAnTWVkaXRlcnJhbmVhbiBDaGlja2VuJyk7XG5cbiAgICAvLyBVcGRhdGUgcmVjaXBlIG1ldGFkYXRhXG4gICAgY29uc3Qgc2VydmluZ3NJbnB1dDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZXJ2aW5ncy1pbnB1dCcpO1xuICAgIGNvbnN0IHByZXBUaW1lSW5wdXQ6IGFueSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncHJlcC10aW1lLWlucHV0Jyk7XG4gICAgY29uc3QgY29va1RpbWVJbnB1dDogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdjb29rLXRpbWUtaW5wdXQnKTtcblxuICAgIHZvaWQgdXNlci5jbGVhcihzZXJ2aW5nc0lucHV0KTtcbiAgICB2b2lkIHVzZXIudHlwZShzZXJ2aW5nc0lucHV0LCAnNicpO1xuXG4gICAgdm9pZCB1c2VyLmNsZWFyKHByZXBUaW1lSW5wdXQpO1xuICAgIHZvaWQgdXNlci50eXBlKHByZXBUaW1lSW5wdXQsICcyMCcpO1xuXG4gICAgdm9pZCB1c2VyLmNsZWFyKGNvb2tUaW1lSW5wdXQpO1xuICAgIHZvaWQgdXNlci50eXBlKGNvb2tUaW1lSW5wdXQsICc0NScpO1xuXG4gICAgLy8gQWRkIG11bHRpcGxlIGluZ3JlZGllbnRzXG4gICAgZm9yIChsZXQgaTogYW55ID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLWluZ3JlZGllbnQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgaW5ncmVkaWVudHM6IGFueSA9IFtcbiAgICAgIHsgcXVhbnRpdHk6ICcyIGxicycsIG5hbWU6ICdDaGlja2VuIEJyZWFzdCcgfSxcbiAgICAgIHsgcXVhbnRpdHk6ICcxIGN1cCcsIG5hbWU6ICdDaGVycnkgVG9tYXRvZXMnIH0sXG4gICAgICB7IHF1YW50aXR5OiAnMS8yIGN1cCcsIG5hbWU6ICdLYWxhbWF0YSBPbGl2ZXMnIH0sXG4gICAgICB7IHF1YW50aXR5OiAnMS80IGN1cCcsIG5hbWU6ICdPbGl2ZSBPaWwnIH0sXG4gICAgXTtcblxuICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCBpbmdyZWRpZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKGBpbmdyZWRpZW50LXF1YW50aXR5LSR7aX1gKSwgaW5ncmVkaWVudHNbaV0ucXVhbnRpdHkpO1xuICAgICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKGBpbmdyZWRpZW50LW5hbWUtJHtpfWApLCBpbmdyZWRpZW50c1tpXS5uYW1lKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY29va2luZyBzdGVwc1xuICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1zdGVwJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0ZXBzOiBhbnkgPSBbXG4gICAgICB7IGluc3RydWN0aW9uOiAnUHJlaGVhdCBvdmVuIHRvIDM3NcKwRiBhbmQgcHJlcGFyZSBjaGlja2VuJywgdGltaW5nOiAnNSBtaW4nIH0sXG4gICAgICB7IGluc3RydWN0aW9uOiAnU2VhciBjaGlja2VuIGluIG9saXZlIG9pbCB1bnRpbCBnb2xkZW4nLCB0aW1pbmc6ICcxMCBtaW4nIH0sXG4gICAgICB7IGluc3RydWN0aW9uOiAnQWRkIHRvbWF0b2VzIGFuZCBvbGl2ZXMsIGJha2UgdW50aWwgZG9uZScsIHRpbWluZzogJzMwIG1pbicgfSxcbiAgICBdO1xuXG4gICAgZm9yIChsZXQgaTogYW55ID0gMDsgaSA8IHN0ZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoYHN0ZXAtaW5zdHJ1Y3Rpb24tJHtpfWApLCBzdGVwc1tpXS5pbnN0cnVjdGlvbik7XG4gICAgICB2b2lkIHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoYHN0ZXAtdGltaW5nLSR7aX1gKSwgc3RlcHNbaV0udGltaW5nKTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZnkgcmVjaXBlIHN1bW1hcnlcbiAgICBjb25zdCBzdW1tYXJ5OiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1zdW1tYXJ5Jyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvSGF2ZVRleHRDb250ZW50KCdOYW1lOiBNZWRpdGVycmFuZWFuIENoaWNrZW4nKTtcbiAgICBleHBlY3Qoc3VtbWFyeSkudG9IYXZlVGV4dENvbnRlbnQoJ1NlcnZpbmdzOiA2Jyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvSGF2ZVRleHRDb250ZW50KCdUb3RhbCBUaW1lOiA2NSBtaW51dGVzJyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvSGF2ZVRleHRDb250ZW50KCdJbmdyZWRpZW50czogNCcpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnU3RlcHM6IDMnKTtcblxuICAgIC8vIFZlcmlmeSBzYXZlIGJ1dHRvbiBpcyBlbmFibGVkXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbjogYW55ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzYXZlLXJlY2lwZScpO1xuICAgIGV4cGVjdChzYXZlQnV0dG9uKS50b0JlRW5hYmxlZCgpO1xuICAgIGV4cGVjdChzYXZlQnV0dG9uKS50b0hhdmVDbGFzcygnZW5hYmxlZCcpO1xuXG4gICAgLy8gVGVzdCBpbmdyZWRpZW50IHJlbW92YWxcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdyZW1vdmUtaW5ncmVkaWVudC0zJykpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbmdyZWRpZW50czogMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gVGVzdCBzdGVwIHJlbW92YWxcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdyZW1vdmUtc3RlcC0wJykpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTdGVwczogMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gVmVyaWZ5IHN0ZXAgcmVudW1iZXJpbmdcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdTZWFyIGNoaWNrZW4gaW4gb2xpdmUgb2lsIHVudGlsIGdvbGRlbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBuYXZpZ2F0aW9uIGFuZCBzdGF0ZSBwcmVzZXJ2YXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcjogYW55ID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgY29uc3QgbW9ja09uU2VjdGlvbk5hdmlnYXRlID0gamVzdC5mbigpIGFzIGFueTtcblxuICAgIGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IG9uU2VjdGlvbk5hdmlnYXRlPXttb2NrT25TZWN0aW9uTmF2aWdhdGV9IC8+KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY3Vpc2luZS1yZWNvbW1lbmRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gTWFrZSBzZWxlY3Rpb25zIGFjcm9zcyBkaWZmZXJlbnQgY29tcG9uZW50c1xuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1aXNpbmUtaXRhbGlhbicpKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXRvbWF0b2VzJykpO1xuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1zYXV0w6knKSk7XG5cbiAgICAvLyBOYXZpZ2F0ZSBiZXR3ZWVuIHNlY3Rpb25zXG4gICAgY29uc3QgY3Vpc2luZU5hdkJ1dHRvbjogYW55ID0gc2NyZWVuLmdldEJ5VGV4dCgnQ3Vpc2luZSBSZWNvbW1lbmRhdGlvbnMnKTtcbiAgICB2b2lkIHVzZXIuY2xpY2soY3Vpc2luZU5hdkJ1dHRvbik7XG4gICAgZXhwZWN0KG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2N1aXNpbmUnKTtcblxuICAgIGNvbnN0IGluZ3JlZGllbnRzTmF2QnV0dG9uOiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXh0KCdJbmdyZWRpZW50IFJlY29tbWVuZGF0aW9ucycpO1xuICAgIHZvaWQgdXNlci5jbGljayhpbmdyZWRpZW50c05hdkJ1dHRvbik7XG4gICAgZXhwZWN0KG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2luZ3JlZGllbnRzJyk7XG5cbiAgICAvLyBWZXJpZnkgc3RhdGUgcHJlc2VydmF0aW9uIHdhcyBjYWxsZWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChtb2NrTmF2aWdhdGlvblN0YXRlLnNhdmVTdGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gVmVyaWZ5IHNlbGVjdGlvbnMgYXJlIG1haW50YWluZWQgYWZ0ZXIgbmF2aWdhdGlvblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1yZWNvbW1lbmRhdGlvbnMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgSW5ncmVkaWVudHMgKDEpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtc2F1dMOpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGVycm9yIHJlY292ZXJ5IHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXI6IGFueSA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgLy8gTW9jayBjb25zb2xlLmVycm9yIHRvIGF2b2lkIG5vaXNlXG4gICAgY29uc3QgY29uc29sZVNweTogYW55ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4gICAgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8TWFpblBhZ2VMYXlvdXQgLz4pO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtYnVpbGRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2ltdWxhdGUgdXNlciBjcmVhdGluZyBhIHJlY2lwZSBhbmQgZW5jb3VudGVyaW5nIGFuIGVycm9yXG4gICAgY29uc3QgcmVjaXBlTmFtZUlucHV0OiBhbnkgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1uYW1lLWlucHV0Jyk7XG4gICAgdm9pZCB1c2VyLnR5cGUocmVjaXBlTmFtZUlucHV0LCAnVGVzdCBSZWNpcGUnKTtcblxuICAgIC8vIEFkZCBpbmdyZWRpZW50XG4gICAgdm9pZCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLWluZ3JlZGllbnQnKSk7XG4gICAgdm9pZCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LW5hbWUtMCcpLCAnVGVzdCBJbmdyZWRpZW50Jyk7XG5cbiAgICAvLyBBZGQgc3RlcFxuICAgIHZvaWQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1zdGVwJykpO1xuICAgIHZvaWQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0wJyksICdUZXN0IHN0ZXAnKTtcblxuICAgIC8vIFZlcmlmeSByZWNpcGUgaXMgdmFsaWRcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzYXZlLXJlY2lwZScpKS50b0JlRW5hYmxlZCgpO1xuXG4gICAgLy8gVGhlIG1haW4gcGFnZSBzaG91bGQgY29udGludWUgdG8gZnVuY3Rpb24gZGVzcGl0ZSBhbnkgZXJyb3JzXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1doYXQgdG8gRWF0IE5leHQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtYnVpbGRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9