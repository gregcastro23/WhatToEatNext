cdeba07dec5b6cb6a3ee26c05863eb04
"use strict";
/**
 * Comprehensive Linting Validation and Monitoring Dashboard
 *
 * This service provides real-time monitoring, validation, and alerting
 * for the enhanced ESLint configuration with domain-specific tracking.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.LintingValidationDashboard = void 0;
const child_process_1 = require("child_process");
const fs_1 = require("fs");
class LintingValidationDashboard {
    metricsHistoryFile = '.kiro/metrics/linting-metrics-history.json';
    alertsFile = '.kiro/metrics/linting-alerts.json';
    configFile = '.kiro/metrics/linting-dashboard-config.json';
    defaultThresholds = [
        {
            metric: 'parserErrors',
            threshold: 0,
            severity: 'critical',
            message: 'Parser errors detected - blocking accurate linting analysis',
        },
        {
            metric: 'explicitAnyErrors',
            threshold: 100,
            severity: 'error',
            message: 'Explicit any errors exceed acceptable threshold',
        },
        {
            metric: 'totalIssues',
            threshold: 2000,
            severity: 'warning',
            message: 'Total linting issues exceed warning threshold',
        },
        {
            metric: 'qualityScore',
            threshold: 80,
            severity: 'warning',
            message: 'Code quality score below target',
        },
        {
            metric: 'performanceMetrics.lintingDuration',
            threshold: 30000,
            severity: 'warning',
            message: 'Linting performance degraded - exceeds 30 seconds',
        },
    ];
    constructor() {
        this.ensureDirectoriesExist();
        this.initializeConfiguration();
    }
    /**
     * Run comprehensive linting validation across entire codebase
     */
    async runComprehensiveValidation() {
        console.log('🔍 Starting comprehensive linting validation...');
        const startTime = Date.now();
        const metrics = await this.collectMetrics();
        const alerts = this.evaluateAlerts(metrics);
        const regressionAnalysis = await this.analyzeRegression(metrics);
        const recommendations = this.generateRecommendations(metrics, alerts);
        const result = {
            passed: alerts.filter(a => a.severity === 'error' || a.severity === 'critical').length === 0,
            metrics,
            alerts,
            recommendations,
            regressionAnalysis,
        };
        // Store metrics and alerts
        await this.storeMetrics(metrics);
        await this.storeAlerts(alerts);
        // Generate dashboard report
        await this.generateDashboardReport(result);
        console.log(`✅ Validation completed in ${Date.now() - startTime}ms`);
        return result;
    }
    /**
     * Collect comprehensive linting metrics
     */
    async collectMetrics() {
        const startTime = Date.now();
        try {
            // Run ESLint with enhanced configuration
            const lintOutput = (0, child_process_1.execSync)('yarn lint --format json --max-warnings 10000', {
                encoding: 'utf8',
                stdio: 'pipe',
                timeout: 60000, // 60 second timeout
            });
            const lintResults = JSON.parse(lintOutput);
            const metrics = this.parseLintResults(lintResults);
            // Add performance metrics
            metrics.performanceMetrics = {
                lintingDuration: Date.now() - startTime,
                cacheHitRate: await this.calculateCacheHitRate(),
                memoryUsage: process.memoryUsage().heapUsed / 1024 / 1024,
                filesProcessed: lintResults.length,
            };
            // Calculate quality score
            metrics.qualityScore = this.calculateQualityScore(metrics);
            return metrics;
        }
        catch (error) {
            console.error('Error collecting linting metrics:', error);
            // Return fallback metrics
            return {
                timestamp: new Date(),
                totalIssues: -1,
                errors: -1,
                warnings: -1,
                parserErrors: -1,
                explicitAnyErrors: -1,
                importOrderIssues: -1,
                unusedVariables: -1,
                reactHooksIssues: -1,
                consoleStatements: -1,
                domainSpecificIssues: {
                    astrologicalCalculations: -1,
                    campaignSystem: -1,
                    testFiles: -1,
                },
                performanceMetrics: {
                    lintingDuration: Date.now() - startTime,
                    cacheHitRate: 0,
                    memoryUsage: process.memoryUsage().heapUsed / 1024 / 1024,
                    filesProcessed: 0,
                },
                qualityScore: 0,
                regressionDetected: false,
            };
        }
    }
    /**
     * Parse ESLint results into structured metrics
     */
    parseLintResults(lintResults) {
        let totalIssues = 0;
        let errors = 0;
        let warnings = 0;
        let parserErrors = 0;
        let explicitAnyErrors = 0;
        let importOrderIssues = 0;
        let unusedVariables = 0;
        let reactHooksIssues = 0;
        let consoleStatements = 0;
        const domainSpecificIssues = {
            astrologicalCalculations: 0,
            campaignSystem: 0,
            testFiles: 0,
        };
        for (const result of lintResults) {
            const filePath = result.filePath;
            for (const message of result.messages) {
                totalIssues++;
                if (message.severity === 2) {
                    errors++;
                }
                else {
                    warnings++;
                }
                // Categorize by rule type
                const ruleId = message.ruleId;
                if (message.fatal || ruleId === 'parseForESLint') {
                    parserErrors++;
                }
                else if (ruleId === '@typescript-eslint/no-explicit-any') {
                    explicitAnyErrors++;
                }
                else if (ruleId === 'import/order') {
                    importOrderIssues++;
                }
                else if (ruleId === '@typescript-eslint/no-unused-vars') {
                    unusedVariables++;
                }
                else if (ruleId?.startsWith('react-hooks/')) {
                    reactHooksIssues++;
                }
                else if (ruleId === 'no-console') {
                    consoleStatements++;
                }
                // Domain-specific categorization
                if (this.isAstrologicalFile(filePath)) {
                    domainSpecificIssues.astrologicalCalculations++;
                }
                else if (this.isCampaignFile(filePath)) {
                    domainSpecificIssues.campaignSystem++;
                }
                else if (this.isTestFile(filePath)) {
                    domainSpecificIssues.testFiles++;
                }
            }
        }
        return {
            timestamp: new Date(),
            totalIssues,
            errors,
            warnings,
            parserErrors,
            explicitAnyErrors,
            importOrderIssues,
            unusedVariables,
            reactHooksIssues,
            consoleStatements,
            domainSpecificIssues,
            performanceMetrics: {
                lintingDuration: 0,
                cacheHitRate: 0,
                memoryUsage: 0,
                filesProcessed: lintResults.length,
            },
            qualityScore: 0,
            regressionDetected: false,
        };
    }
    /**
     * Calculate overall quality score (0-100)
     */
    calculateQualityScore(metrics) {
        if (metrics.totalIssues === -1)
            return 0; // Error state
        // Base score starts at 100
        let score = 100;
        // Deduct points for different issue types
        score -= Math.min(50, metrics.parserErrors * 10); // Parser errors are critical
        score -= Math.min(30, metrics.explicitAnyErrors * 0.1); // Explicit any errors
        score -= Math.min(20, metrics.errors * 0.5); // General errors
        score -= Math.min(15, metrics.warnings * 0.01); // Warnings (less impact)
        // Performance penalty
        if (metrics.performanceMetrics.lintingDuration > 30000) {
            score -= 10; // Performance penalty
        }
        // Bonus for zero critical issues
        if (metrics.parserErrors === 0 && metrics.explicitAnyErrors < 10) {
            score += 5;
        }
        return Math.max(0, Math.min(100, Math.round(score)));
    }
    /**
     * Evaluate alerts based on current metrics
     */
    evaluateAlerts(metrics) {
        const alerts = [];
        const thresholds = this.loadThresholds();
        for (const threshold of thresholds) {
            const currentValue = this.getMetricValue(metrics, threshold.metric);
            if (this.shouldTriggerAlert(currentValue, threshold)) {
                alerts.push({
                    id: `${threshold.metric}-${Date.now()}`,
                    timestamp: new Date(),
                    severity: threshold.severity,
                    metric: threshold.metric,
                    currentValue,
                    threshold: threshold.threshold,
                    message: threshold.message,
                    resolved: false,
                });
            }
        }
        return alerts;
    }
    /**
     * Analyze regression compared to historical data
     */
    async analyzeRegression(currentMetrics) {
        const history = this.loadMetricsHistory();
        if (history.length < 2) {
            return {
                detected: false,
                affectedMetrics: [],
                severity: 'minor',
                recommendations: ['Insufficient historical data for regression analysis'],
                historicalComparison: {
                    current: currentMetrics.totalIssues,
                    previous: 0,
                    change: 0,
                    changePercentage: 0,
                },
            };
        }
        const previousMetrics = history[history.length - 2];
        const affectedMetrics = [];
        // Check for regressions in key metrics
        const keyMetrics = [
            'totalIssues',
            'errors',
            'parserErrors',
            'explicitAnyErrors',
            'qualityScore',
        ];
        for (const metric of keyMetrics) {
            const current = this.getMetricValue(currentMetrics, metric);
            const previous = this.getMetricValue(previousMetrics, metric);
            // Detect regression (increase in issues or decrease in quality score)
            const isRegression = metric === 'qualityScore'
                ? current < previous - 5 // Quality score decreased by more than 5 points
                : current > previous * 1.1; // Other metrics increased by more than 10%
            if (isRegression) {
                affectedMetrics.push(metric);
            }
        }
        const severity = this.calculateRegressionSeverity(affectedMetrics, currentMetrics, previousMetrics);
        return {
            detected: affectedMetrics.length > 0,
            affectedMetrics,
            severity,
            recommendations: this.generateRegressionRecommendations(affectedMetrics),
            historicalComparison: {
                current: currentMetrics.totalIssues,
                previous: previousMetrics.totalIssues,
                change: currentMetrics.totalIssues - previousMetrics.totalIssues,
                changePercentage: previousMetrics.totalIssues > 0
                    ? ((currentMetrics.totalIssues - previousMetrics.totalIssues) /
                        previousMetrics.totalIssues) *
                        100
                    : 0,
            },
        };
    }
    /**
     * Generate recommendations based on metrics and alerts
     */
    generateRecommendations(metrics, alerts) {
        const recommendations = [];
        // Parser error recommendations
        if (metrics.parserErrors > 0) {
            recommendations.push('🚨 URGENT: Fix parser errors immediately - they block accurate linting analysis', 'Check src/utils/recommendationEngine.ts and other files with syntax errors', 'Run `yarn tsc --noEmit` to identify TypeScript compilation issues');
        }
        // Explicit any recommendations
        if (metrics.explicitAnyErrors > 100) {
            recommendations.push('⚡ HIGH PRIORITY: Reduce explicit any types using systematic type inference', 'Focus on React components, service layers, and utility functions first', 'Use domain-specific exceptions for astrological calculations where needed');
        }
        // Import organization recommendations
        if (metrics.importOrderIssues > 50) {
            recommendations.push('🚀 READY: Deploy enhanced import organization with alphabetical sorting', 'Run `yarn lint:fix` to automatically organize imports', 'Use batch processing for systematic completion of remaining issues');
        }
        // Performance recommendations
        if (metrics.performanceMetrics.lintingDuration > 30000) {
            recommendations.push('⚡ PERFORMANCE: Linting duration exceeds 30 seconds', 'Enable ESLint caching with `yarn lint:fast` for incremental changes', 'Consider using `yarn lint:changed` for git-aware changed-files-only processing');
        }
        // Quality score recommendations
        if (metrics.qualityScore < 80) {
            recommendations.push('📊 QUALITY: Code quality score below target (80%)', 'Focus on eliminating critical errors first, then warnings', 'Use domain-specific linting commands for targeted improvements');
        }
        // Domain-specific recommendations
        if (metrics.domainSpecificIssues.astrologicalCalculations > 20) {
            recommendations.push('🌟 DOMAIN: Review astrological calculation files for rule compliance', 'Ensure mathematical constants and planetary variables are preserved', 'Use `yarn lint:domain-astro` for specialized astrological file linting');
        }
        return recommendations;
    }
    /**
     * Generate comprehensive dashboard report
     */
    async generateDashboardReport(result) {
        const reportPath = '.kiro/metrics/linting-dashboard-report.md';
        const report = `# Linting Excellence Dashboard Report

Generated: ${new Date().toISOString()}

## 📊 Overall Status

- **Validation Status**: ${result.passed ? '✅ PASSED' : '❌ FAILED'}
- **Quality Score**: ${result.metrics.qualityScore}/100
- **Total Issues**: ${result.metrics.totalIssues}
- **Regression Detected**: ${result.regressionAnalysis.detected ? '⚠️ YES' : '✅ NO'}

## 🔍 Detailed Metrics

### Error Breakdown
- **Parser Errors**: ${result.metrics.parserErrors} ${result.metrics.parserErrors === 0 ? '✅' : '🚨'}
- **TypeScript Errors**: ${result.metrics.errors}
- **Explicit Any Errors**: ${result.metrics.explicitAnyErrors} ${result.metrics.explicitAnyErrors < 100 ? '✅' : '⚡'}
- **Warnings**: ${result.metrics.warnings}

### Code Quality Issues
- **Import Order Issues**: ${result.metrics.importOrderIssues}
- **Unused Variables**: ${result.metrics.unusedVariables}
- **React Hooks Issues**: ${result.metrics.reactHooksIssues}
- **Console Statements**: ${result.metrics.consoleStatements}

### Domain-Specific Issues
- **Astrological Calculations**: ${result.metrics.domainSpecificIssues.astrologicalCalculations}
- **Campaign System**: ${result.metrics.domainSpecificIssues.campaignSystem}
- **Test Files**: ${result.metrics.domainSpecificIssues.testFiles}

### Performance Metrics
- **Linting Duration**: ${result.metrics.performanceMetrics.lintingDuration}ms
- **Cache Hit Rate**: ${(result.metrics.performanceMetrics.cacheHitRate * 100).toFixed(1)}%
- **Memory Usage**: ${result.metrics.performanceMetrics.memoryUsage.toFixed(1)}MB
- **Files Processed**: ${result.metrics.performanceMetrics.filesProcessed}

## 🚨 Active Alerts

${result.alerts.length === 0
            ? 'No active alerts ✅'
            : result.alerts
                .map(alert => `- **${alert.severity.toUpperCase()}**: ${alert.message} (${alert.currentValue} > ${alert.threshold})`)
                .join('\n')}

## 📈 Regression Analysis

${result.regressionAnalysis.detected
            ? `
**Regression Detected**: ${result.regressionAnalysis.severity.toUpperCase()}
- **Affected Metrics**: ${result.regressionAnalysis.affectedMetrics.join(', ')}
- **Change**: ${result.regressionAnalysis.historicalComparison.change} issues (${result.regressionAnalysis.historicalComparison.changePercentage.toFixed(1)}%)
`
            : '**No Regression Detected** ✅'}

## 💡 Recommendations

${result.recommendations.map(rec => `- ${rec}`).join('\n')}

## 🎯 Next Actions

### Immediate (Next 30 Minutes)
1. ${result.metrics.parserErrors > 0 ? '🚨 **URGENT**: Fix parser errors in recommendationEngine.ts' : '✅ No parser errors'}
2. ${result.metrics.explicitAnyErrors > 100 ? '⚡ **Deploy Explicit Any Campaign**: Address error-level explicit any types' : '✅ Explicit any errors under control'}
3. ${result.metrics.importOrderIssues > 50 ? '🚀 **Execute Import Organization**: Apply alphabetical sorting and grouping' : '✅ Import organization acceptable'}

### Next 2 Hours
1. **Enhanced Unused Variable Cleanup**: Apply domain-specific variable patterns
2. **React Hooks Enhancement**: Implement enhanced dependency analysis
3. **Performance Optimization**: Enable caching and parallel processing

### Success Metrics Target
- **Target**: ${result.metrics.totalIssues} → <2,000 total issues (${Math.round((1 - 2000 / Math.max(result.metrics.totalIssues, 1)) * 100)}% reduction)
- **Critical Path**: Parser errors → Explicit any errors → Import organization
- **Timeline**: 3-4 hours for major reduction with enhanced safety protocols
- **Quality Gate**: Zero parser errors, <100 explicit any errors, enhanced import organization

---

*Report generated by Linting Excellence Dashboard v1.0*
*Enhanced Configuration: React 19, TypeScript strict rules, domain-specific configurations*
`;
        (0, fs_1.writeFileSync)(reportPath, report, 'utf8');
        console.log(`📊 Dashboard report generated: ${reportPath}`);
    }
    // Helper methods
    ensureDirectoriesExist() {
        const dirs = ['.kiro/metrics'];
        for (const dir of dirs) {
            if (!(0, fs_1.existsSync)(dir)) {
                (0, child_process_1.execSync)(`mkdir -p ${dir}`);
            }
        }
    }
    initializeConfiguration() {
        if (!(0, fs_1.existsSync)(this.configFile)) {
            const config = {
                thresholds: this.defaultThresholds,
                alertingEnabled: true,
                regressionDetectionEnabled: true,
                performanceMonitoringEnabled: true,
                domainSpecificTrackingEnabled: true,
            };
            (0, fs_1.writeFileSync)(this.configFile, JSON.stringify(config, null, 2));
        }
    }
    loadThresholds() {
        try {
            const config = JSON.parse((0, fs_1.readFileSync)(this.configFile, 'utf8'));
            return config.thresholds || this.defaultThresholds;
        }
        catch {
            return this.defaultThresholds;
        }
    }
    loadMetricsHistory() {
        try {
            if ((0, fs_1.existsSync)(this.metricsHistoryFile)) {
                return JSON.parse((0, fs_1.readFileSync)(this.metricsHistoryFile, 'utf8'));
            }
        }
        catch (error) {
            console.warn('Error loading metrics history:', error);
        }
        return [];
    }
    async storeMetrics(metrics) {
        const history = this.loadMetricsHistory();
        history.push(metrics);
        // Keep only last 100 entries
        if (history.length > 100) {
            history.splice(0, history.length - 100);
        }
        (0, fs_1.writeFileSync)(this.metricsHistoryFile, JSON.stringify(history, null, 2));
    }
    async storeAlerts(alerts) {
        (0, fs_1.writeFileSync)(this.alertsFile, JSON.stringify(alerts, null, 2));
    }
    getMetricValue(metrics, metricPath) {
        const parts = metricPath.split('.');
        let value = metrics;
        for (const part of parts) {
            value = value?.[part];
        }
        return typeof value === 'number' ? value : 0;
    }
    shouldTriggerAlert(currentValue, threshold) {
        if (threshold.metric === 'qualityScore') {
            return currentValue < threshold.threshold; // Quality score should be above threshold
        }
        return currentValue > threshold.threshold; // Other metrics should be below threshold
    }
    calculateRegressionSeverity(affectedMetrics, current, previous) {
        if (affectedMetrics.includes('parserErrors') && current.parserErrors > previous.parserErrors) {
            return 'critical';
        }
        if (affectedMetrics.includes('explicitAnyErrors') &&
            current.explicitAnyErrors > previous.explicitAnyErrors + 50) {
            return 'major';
        }
        if (affectedMetrics.length > 2) {
            return 'moderate';
        }
        return 'minor';
    }
    generateRegressionRecommendations(affectedMetrics) {
        const recommendations = [];
        if (affectedMetrics.includes('parserErrors')) {
            recommendations.push('Immediately investigate and fix new parser errors');
        }
        if (affectedMetrics.includes('explicitAnyErrors')) {
            recommendations.push('Review recent changes that introduced explicit any types');
        }
        if (affectedMetrics.includes('totalIssues')) {
            recommendations.push('Run comprehensive linting validation to identify new issues');
        }
        return recommendations;
    }
    async calculateCacheHitRate() {
        try {
            // Check if ESLint cache exists and calculate hit rate
            if ((0, fs_1.existsSync)('.eslintcache')) {
                // Simplified cache hit rate calculation
                return 0.75; // Assume 75% cache hit rate for now
            }
        }
        catch {
            // Ignore errors
        }
        return 0;
    }
    isAstrologicalFile(filePath) {
        return (filePath.includes('/calculations/') ||
            filePath.includes('/data/planets/') ||
            filePath.includes('reliableAstronomy') ||
            filePath.includes('/astrology/'));
    }
    isCampaignFile(filePath) {
        return (filePath.includes('/campaign/') ||
            filePath.includes('Campaign') ||
            filePath.includes('Progress'));
    }
    isTestFile(filePath) {
        return (filePath.includes('.test.') || filePath.includes('.spec.') || filePath.includes('__tests__'));
    }
}
exports.LintingValidationDashboard = LintingValidationDashboard;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9saW50aW5nL0xpbnRpbmdWYWxpZGF0aW9uRGFzaGJvYXJkLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7O0FBRUgsaURBQXlDO0FBQ3pDLDJCQUE2RDtBQW9FN0QsTUFBYSwwQkFBMEI7SUFDcEIsa0JBQWtCLEdBQUcsNENBQTRDLENBQUM7SUFDbEUsVUFBVSxHQUFHLG1DQUFtQyxDQUFDO0lBQ2pELFVBQVUsR0FBRyw2Q0FBNkMsQ0FBQztJQUUzRCxpQkFBaUIsR0FBcUI7UUFDckQ7WUFDRSxNQUFNLEVBQUUsY0FBYztZQUN0QixTQUFTLEVBQUUsQ0FBQztZQUNaLFFBQVEsRUFBRSxVQUFVO1lBQ3BCLE9BQU8sRUFBRSw2REFBNkQ7U0FDdkU7UUFDRDtZQUNFLE1BQU0sRUFBRSxtQkFBbUI7WUFDM0IsU0FBUyxFQUFFLEdBQUc7WUFDZCxRQUFRLEVBQUUsT0FBTztZQUNqQixPQUFPLEVBQUUsaURBQWlEO1NBQzNEO1FBQ0Q7WUFDRSxNQUFNLEVBQUUsYUFBYTtZQUNyQixTQUFTLEVBQUUsSUFBSTtZQUNmLFFBQVEsRUFBRSxTQUFTO1lBQ25CLE9BQU8sRUFBRSwrQ0FBK0M7U0FDekQ7UUFDRDtZQUNFLE1BQU0sRUFBRSxjQUFjO1lBQ3RCLFNBQVMsRUFBRSxFQUFFO1lBQ2IsUUFBUSxFQUFFLFNBQVM7WUFDbkIsT0FBTyxFQUFFLGlDQUFpQztTQUMzQztRQUNEO1lBQ0UsTUFBTSxFQUFFLG9DQUFvQztZQUM1QyxTQUFTLEVBQUUsS0FBSztZQUNoQixRQUFRLEVBQUUsU0FBUztZQUNuQixPQUFPLEVBQUUsbURBQW1EO1NBQzdEO0tBQ0YsQ0FBQztJQUVGO1FBQ0UsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLDBCQUEwQjtRQUM5QixPQUFPLENBQUMs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QUN0QyxRQUFRLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUNqQyxDQUFDO0lBQ0osQ0FBQztJQUVPLGNBQWMsQ0FBQyxRQUFnQjtRQUNyQyxPQUFPLENBQ0wsUUFBUSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7WUFDL0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7WUFDN0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FDOUIsQ0FBQztJQUNKLENBQUM7SUFFTyxVQUFVLENBQUMsUUFBZ0I7UUFDakMsT0FBTyxDQUNMLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUM3RixDQUFDO0lBQ0osQ0FBQztDQUNGO0FBcnBCRCxnRUFxcEJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvc2VydmljZXMvbGludGluZy9MaW50aW5nVmFsaWRhdGlvbkRhc2hib2FyZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgTGludGluZyBWYWxpZGF0aW9uIGFuZCBNb25pdG9yaW5nIERhc2hib2FyZFxuICpcbiAqIFRoaXMgc2VydmljZSBwcm92aWRlcyByZWFsLXRpbWUgbW9uaXRvcmluZywgdmFsaWRhdGlvbiwgYW5kIGFsZXJ0aW5nXG4gKiBmb3IgdGhlIGVuaGFuY2VkIEVTTGludCBjb25maWd1cmF0aW9uIHdpdGggZG9tYWluLXNwZWNpZmljIHRyYWNraW5nLlxuICovXG5cbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyB3cml0ZUZpbGVTeW5jLCByZWFkRmlsZVN5bmMsIGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGludGluZ01ldHJpY3Mge1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHRvdGFsSXNzdWVzOiBudW1iZXI7XG4gIGVycm9yczogbnVtYmVyO1xuICB3YXJuaW5nczogbnVtYmVyO1xuICBwYXJzZXJFcnJvcnM6IG51bWJlcjtcbiAgZXhwbGljaXRBbnlFcnJvcnM6IG51bWJlcjtcbiAgaW1wb3J0T3JkZXJJc3N1ZXM6IG51bWJlcjtcbiAgdW51c2VkVmFyaWFibGVzOiBudW1iZXI7XG4gIHJlYWN0SG9va3NJc3N1ZXM6IG51bWJlcjtcbiAgY29uc29sZVN0YXRlbWVudHM6IG51bWJlcjtcbiAgZG9tYWluU3BlY2lmaWNJc3N1ZXM6IHtcbiAgICBhc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbnM6IG51bWJlcjtcbiAgICBjYW1wYWlnblN5c3RlbTogbnVtYmVyO1xuICAgIHRlc3RGaWxlczogbnVtYmVyO1xuICB9O1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICBsaW50aW5nRHVyYXRpb246IG51bWJlcjtcbiAgICBjYWNoZUhpdFJhdGU6IG51bWJlcjtcbiAgICBtZW1vcnlVc2FnZTogbnVtYmVyO1xuICAgIGZpbGVzUHJvY2Vzc2VkOiBudW1iZXI7XG4gIH07XG4gIHF1YWxpdHlTY29yZTogbnVtYmVyOyAvLyAwLTEwMFxuICByZWdyZXNzaW9uRGV0ZWN0ZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRUaHJlc2hvbGQge1xuICBtZXRyaWM6IGtleW9mIExpbnRpbmdNZXRyaWNzIHwgc3RyaW5nO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgc2V2ZXJpdHk6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnY3JpdGljYWwnO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XG4gIHBhc3NlZDogYm9vbGVhbjtcbiAgbWV0cmljczogTGludGluZ01ldHJpY3M7XG4gIGFsZXJ0czogQWxlcnRbXTtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgcmVncmVzc2lvbkFuYWx5c2lzOiBSZWdyZXNzaW9uQW5hbHlzaXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnQge1xuICBpZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHNldmVyaXR5OiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ2NyaXRpY2FsJztcbiAgbWV0cmljOiBzdHJpbmc7XG4gIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICByZXNvbHZlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWdyZXNzaW9uQW5hbHlzaXMge1xuICBkZXRlY3RlZDogYm9vbGVhbjtcbiAgYWZmZWN0ZWRNZXRyaWNzOiBzdHJpbmdbXTtcbiAgc2V2ZXJpdHk6ICdtaW5vcicgfCAnbW9kZXJhdGUnIHwgJ21ham9yJyB8ICdjcml0aWNhbCc7XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIGhpc3RvcmljYWxDb21wYXJpc29uOiB7XG4gICAgY3VycmVudDogbnVtYmVyO1xuICAgIHByZXZpb3VzOiBudW1iZXI7XG4gICAgY2hhbmdlOiBudW1iZXI7XG4gICAgY2hhbmdlUGVyY2VudGFnZTogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgTGludGluZ1ZhbGlkYXRpb25EYXNoYm9hcmQge1xuICBwcml2YXRlIHJlYWRvbmx5IG1ldHJpY3NIaXN0b3J5RmlsZSA9ICcua2lyby9tZXRyaWNzL2xpbnRpbmctbWV0cmljcy1oaXN0b3J5Lmpzb24nO1xuICBwcml2YXRlIHJlYWRvbmx5IGFsZXJ0c0ZpbGUgPSAnLmtpcm8vbWV0cmljcy9saW50aW5nLWFsZXJ0cy5qc29uJztcbiAgcHJpdmF0ZSByZWFkb25seSBjb25maWdGaWxlID0gJy5raXJvL21ldHJpY3MvbGludGluZy1kYXNoYm9hcmQtY29uZmlnLmpzb24nO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgZGVmYXVsdFRocmVzaG9sZHM6IEFsZXJ0VGhyZXNob2xkW10gPSBbXG4gICAge1xuICAgICAgbWV0cmljOiAncGFyc2VyRXJyb3JzJyxcbiAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgbWVzc2FnZTogJ1BhcnNlciBlcnJvcnMgZGV0ZWN0ZWQgLSBibG9ja2luZyBhY2N1cmF0ZSBsaW50aW5nIGFuYWx5c2lzJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG1ldHJpYzogJ2V4cGxpY2l0QW55RXJyb3JzJyxcbiAgICAgIHRocmVzaG9sZDogMTAwLFxuICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXG4gICAgICBtZXNzYWdlOiAnRXhwbGljaXQgYW55IGVycm9ycyBleGNlZWQgYWNjZXB0YWJsZSB0aHJlc2hvbGQnLFxuICAgIH0sXG4gICAge1xuICAgICAgbWV0cmljOiAndG90YWxJc3N1ZXMnLFxuICAgICAgdGhyZXNob2xkOiAyMDAwLFxuICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgIG1lc3NhZ2U6ICdUb3RhbCBsaW50aW5nIGlzc3VlcyBleGNlZWQgd2FybmluZyB0aHJlc2hvbGQnLFxuICAgIH0sXG4gICAge1xuICAgICAgbWV0cmljOiAncXVhbGl0eVNjb3JlJyxcbiAgICAgIHRocmVzaG9sZDogODAsXG4gICAgICBzZXZlcml0eTogJ3dhcm5pbmcnLFxuICAgICAgbWVzc2FnZTogJ0NvZGUgcXVhbGl0eSBzY29yZSBiZWxvdyB0YXJnZXQnLFxuICAgIH0sXG4gICAge1xuICAgICAgbWV0cmljOiAncGVyZm9ybWFuY2VNZXRyaWNzLmxpbnRpbmdEdXJhdGlvbicsXG4gICAgICB0aHJlc2hvbGQ6IDMwMDAwLFxuICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgIG1lc3NhZ2U6ICdMaW50aW5nIHBlcmZvcm1hbmNlIGRlZ3JhZGVkIC0gZXhjZWVkcyAzMCBzZWNvbmRzJyxcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZW5zdXJlRGlyZWN0b3JpZXNFeGlzdCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUNvbmZpZ3VyYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gY29tcHJlaGVuc2l2ZSBsaW50aW5nIHZhbGlkYXRpb24gYWNyb3NzIGVudGlyZSBjb2RlYmFzZVxuICAgKi9cbiAgYXN5bmMgcnVuQ29tcHJlaGVuc2l2ZVZhbGlkYXRpb24oKTogUHJvbWlzZTxWYWxpZGF0aW9uUmVzdWx0PiB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gU3RhcnRpbmcgY29tcHJlaGVuc2l2ZSBsaW50aW5nIHZhbGlkYXRpb24uLi4nKTtcblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHRoaXMuY29sbGVjdE1ldHJpY3MoKTtcbiAgICBjb25zdCBhbGVydHMgPSB0aGlzLmV2YWx1YXRlQWxlcnRzKG1ldHJpY3MpO1xuICAgIGNvbnN0IHJlZ3Jlc3Npb25BbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZVJlZ3Jlc3Npb24obWV0cmljcyk7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhtZXRyaWNzLCBhbGVydHMpO1xuXG4gICAgY29uc3QgcmVzdWx0OiBWYWxpZGF0aW9uUmVzdWx0ID0ge1xuICAgICAgcGFzc2VkOiBhbGVydHMuZmlsdGVyKGEgPT4gYS5zZXZlcml0eSA9PT0gJ2Vycm9yJyB8fCBhLnNldmVyaXR5ID09PSAnY3JpdGljYWwnKS5sZW5ndGggPT09IDAsXG4gICAgICBtZXRyaWNzLFxuICAgICAgYWxlcnRzLFxuICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgICAgcmVncmVzc2lvbkFuYWx5c2lzLFxuICAgIH07XG5cbiAgICAvLyBTdG9yZSBtZXRyaWNzIGFuZCBhbGVydHNcbiAgICBhd2FpdCB0aGlzLnN0b3JlTWV0cmljcyhtZXRyaWNzKTtcbiAgICBhd2FpdCB0aGlzLnN0b3JlQWxlcnRzKGFsZXJ0cyk7XG5cbiAgICAvLyBHZW5lcmF0ZSBkYXNoYm9hcmQgcmVwb3J0XG4gICAgYXdhaXQgdGhpcy5nZW5lcmF0ZURhc2hib2FyZFJlcG9ydChyZXN1bHQpO1xuXG4gICAgY29uc29sZS5sb2coYOKchSBWYWxpZGF0aW9uIGNvbXBsZXRlZCBpbiAke0RhdGUubm93KCkgLSBzdGFydFRpbWV9bXNgKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3QgY29tcHJlaGVuc2l2ZSBsaW50aW5nIG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY29sbGVjdE1ldHJpY3MoKTogUHJvbWlzZTxMaW50aW5nTWV0cmljcz4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUnVuIEVTTGludCB3aXRoIGVuaGFuY2VkIGNvbmZpZ3VyYXRpb25cbiAgICAgIGNvbnN0IGxpbnRPdXRwdXQgPSBleGVjU3luYygneWFybiBsaW50IC0tZm9ybWF0IGpzb24gLS1tYXgtd2FybmluZ3MgMTAwMDAnLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgIHN0ZGlvOiAncGlwZScsXG4gICAgICAgIHRpbWVvdXQ6IDYwMDAwLCAvLyA2MCBzZWNvbmQgdGltZW91dFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxpbnRSZXN1bHRzID0gSlNPTi5wYXJzZShsaW50T3V0cHV0KTtcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSB0aGlzLnBhcnNlTGludFJlc3VsdHMobGludFJlc3VsdHMpO1xuXG4gICAgICAvLyBBZGQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgICAgbWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MgPSB7XG4gICAgICAgIGxpbnRpbmdEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgY2FjaGVIaXRSYXRlOiBhd2FpdCB0aGlzLmNhbGN1bGF0ZUNhY2hlSGl0UmF0ZSgpLFxuICAgICAgICBtZW1vcnlVc2FnZTogcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkIC8gMTAyNCAvIDEwMjQsIC8vIE1CXG4gICAgICAgIGZpbGVzUHJvY2Vzc2VkOiBsaW50UmVzdWx0cy5sZW5ndGgsXG4gICAgICB9O1xuXG4gICAgICAvLyBDYWxjdWxhdGUgcXVhbGl0eSBzY29yZVxuICAgICAgbWV0cmljcy5xdWFsaXR5U2NvcmUgPSB0aGlzLmNhbGN1bGF0ZVF1YWxpdHlTY29yZShtZXRyaWNzKTtcblxuICAgICAgcmV0dXJuIG1ldHJpY3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbGxlY3RpbmcgbGludGluZyBtZXRyaWNzOicsIGVycm9yKTtcblxuICAgICAgLy8gUmV0dXJuIGZhbGxiYWNrIG1ldHJpY3NcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgdG90YWxJc3N1ZXM6IC0xLFxuICAgICAgICBlcnJvcnM6IC0xLFxuICAgICAgICB3YXJuaW5nczogLTEsXG4gICAgICAgIHBhcnNlckVycm9yczogLTEsXG4gICAgICAgIGV4cGxpY2l0QW55RXJyb3JzOiAtMSxcbiAgICAgICAgaW1wb3J0T3JkZXJJc3N1ZXM6IC0xLFxuICAgICAgICB1bnVzZWRWYXJpYWJsZXM6IC0xLFxuICAgICAgICByZWFjdEhvb2tzSXNzdWVzOiAtMSxcbiAgICAgICAgY29uc29sZVN0YXRlbWVudHM6IC0xLFxuICAgICAgICBkb21haW5TcGVjaWZpY0lzc3Vlczoge1xuICAgICAgICAgIGFzdHJvbG9naWNhbENhbGN1bGF0aW9uczogLTEsXG4gICAgICAgICAgY2FtcGFpZ25TeXN0ZW06IC0xLFxuICAgICAgICAgIHRlc3RGaWxlczogLTEsXG4gICAgICAgIH0sXG4gICAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICAgIGxpbnRpbmdEdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgICBjYWNoZUhpdFJhdGU6IDAsXG4gICAgICAgICAgbWVtb3J5VXNhZ2U6IHByb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZCAvIDEwMjQgLyAxMDI0LFxuICAgICAgICAgIGZpbGVzUHJvY2Vzc2VkOiAwLFxuICAgICAgICB9LFxuICAgICAgICBxdWFsaXR5U2NvcmU6IDAsXG4gICAgICAgIHJlZ3Jlc3Npb25EZXRlY3RlZDogZmFsc2UsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBFU0xpbnQgcmVzdWx0cyBpbnRvIHN0cnVjdHVyZWQgbWV0cmljc1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUxpbnRSZXN1bHRzKGxpbnRSZXN1bHRzOiB1bmtub3duW10pOiBMaW50aW5nTWV0cmljcyB7XG4gICAgbGV0IHRvdGFsSXNzdWVzID0gMDtcbiAgICBsZXQgZXJyb3JzID0gMDtcbiAgICBsZXQgd2FybmluZ3MgPSAwO1xuICAgIGxldCBwYXJzZXJFcnJvcnMgPSAwO1xuICAgIGxldCBleHBsaWNpdEFueUVycm9ycyA9IDA7XG4gICAgbGV0IGltcG9ydE9yZGVySXNzdWVzID0gMDtcbiAgICBsZXQgdW51c2VkVmFyaWFibGVzID0gMDtcbiAgICBsZXQgcmVhY3RIb29rc0lzc3VlcyA9IDA7XG4gICAgbGV0IGNvbnNvbGVTdGF0ZW1lbnRzID0gMDtcblxuICAgIGNvbnN0IGRvbWFpblNwZWNpZmljSXNzdWVzID0ge1xuICAgICAgYXN0cm9sb2dpY2FsQ2FsY3VsYXRpb25zOiAwLFxuICAgICAgY2FtcGFpZ25TeXN0ZW06IDAsXG4gICAgICB0ZXN0RmlsZXM6IDAsXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGxpbnRSZXN1bHRzKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHJlc3VsdC5maWxlUGF0aDtcblxuICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHJlc3VsdC5tZXNzYWdlcykge1xuICAgICAgICB0b3RhbElzc3VlcysrO1xuXG4gICAgICAgIGlmIChtZXNzYWdlLnNldmVyaXR5ID09PSAyKSB7XG4gICAgICAgICAgZXJyb3JzKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2FybmluZ3MrKztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhdGVnb3JpemUgYnkgcnVsZSB0eXBlXG4gICAgICAgIGNvbnN0IHJ1bGVJZCA9IG1lc3NhZ2UucnVsZUlkO1xuXG4gICAgICAgIGlmIChtZXNzYWdlLmZhdGFsIHx8IHJ1bGVJZCA9PT0gJ3BhcnNlRm9yRVNMaW50Jykge1xuICAgICAgICAgIHBhcnNlckVycm9ycysrO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGVJZCA9PT0gJ0B0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnknKSB7XG4gICAgICAgICAgZXhwbGljaXRBbnlFcnJvcnMrKztcbiAgICAgICAgfSBlbHNlIGlmIChydWxlSWQgPT09ICdpbXBvcnQvb3JkZXInKSB7XG4gICAgICAgICAgaW1wb3J0T3JkZXJJc3N1ZXMrKztcbiAgICAgICAgfSBlbHNlIGlmIChydWxlSWQgPT09ICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMnKSB7XG4gICAgICAgICAgdW51c2VkVmFyaWFibGVzKys7XG4gICAgICAgIH0gZWxzZSBpZiAocnVsZUlkPy5zdGFydHNXaXRoKCdyZWFjdC1ob29rcy8nKSkge1xuICAgICAgICAgIHJlYWN0SG9va3NJc3N1ZXMrKztcbiAgICAgICAgfSBlbHNlIGlmIChydWxlSWQgPT09ICduby1jb25zb2xlJykge1xuICAgICAgICAgIGNvbnNvbGVTdGF0ZW1lbnRzKys7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEb21haW4tc3BlY2lmaWMgY2F0ZWdvcml6YXRpb25cbiAgICAgICAgaWYgKHRoaXMuaXNBc3Ryb2xvZ2ljYWxGaWxlKGZpbGVQYXRoKSkge1xuICAgICAgICAgIGRvbWFpblNwZWNpZmljSXNzdWVzLmFzdHJvbG9naWNhbENhbGN1bGF0aW9ucysrO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNDYW1wYWlnbkZpbGUoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgZG9tYWluU3BlY2lmaWNJc3N1ZXMuY2FtcGFpZ25TeXN0ZW0rKztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVGVzdEZpbGUoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgZG9tYWluU3BlY2lmaWNJc3N1ZXMudGVzdEZpbGVzKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgdG90YWxJc3N1ZXMsXG4gICAgICBlcnJvcnMsXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHBhcnNlckVycm9ycyxcbiAgICAgIGV4cGxpY2l0QW55RXJyb3JzLFxuICAgICAgaW1wb3J0T3JkZXJJc3N1ZXMsXG4gICAgICB1bnVzZWRWYXJpYWJsZXMsXG4gICAgICByZWFjdEhvb2tzSXNzdWVzLFxuICAgICAgY29uc29sZVN0YXRlbWVudHMsXG4gICAgICBkb21haW5TcGVjaWZpY0lzc3VlcyxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICBsaW50aW5nRHVyYXRpb246IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlclxuICAgICAgICBjYWNoZUhpdFJhdGU6IDAsXG4gICAgICAgIG1lbW9yeVVzYWdlOiAwLFxuICAgICAgICBmaWxlc1Byb2Nlc3NlZDogbGludFJlc3VsdHMubGVuZ3RoLFxuICAgICAgfSxcbiAgICAgIHF1YWxpdHlTY29yZTogMCwgLy8gV2lsbCBiZSBjYWxjdWxhdGVkXG4gICAgICByZWdyZXNzaW9uRGV0ZWN0ZWQ6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG92ZXJhbGwgcXVhbGl0eSBzY29yZSAoMC0xMDApXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVF1YWxpdHlTY29yZShtZXRyaWNzOiBMaW50aW5nTWV0cmljcyk6IG51bWJlciB7XG4gICAgaWYgKG1ldHJpY3MudG90YWxJc3N1ZXMgPT09IC0xKSByZXR1cm4gMDsgLy8gRXJyb3Igc3RhdGVcblxuICAgIC8vIEJhc2Ugc2NvcmUgc3RhcnRzIGF0IDEwMFxuICAgIGxldCBzY29yZSA9IDEwMDtcblxuICAgIC8vIERlZHVjdCBwb2ludHMgZm9yIGRpZmZlcmVudCBpc3N1ZSB0eXBlc1xuICAgIHNjb3JlIC09IE1hdGgubWluKDUwLCBtZXRyaWNzLnBhcnNlckVycm9ycyAqIDEwKTsgLy8gUGFyc2VyIGVycm9ycyBhcmUgY3JpdGljYWxcbiAgICBzY29yZSAtPSBNYXRoLm1pbigzMCwgbWV0cmljcy5leHBsaWNpdEFueUVycm9ycyAqIDAuMSk7IC8vIEV4cGxpY2l0IGFueSBlcnJvcnNcbiAgICBzY29yZSAtPSBNYXRoLm1pbigyMCwgbWV0cmljcy5lcnJvcnMgKiAwLjUpOyAvLyBHZW5lcmFsIGVycm9yc1xuICAgIHNjb3JlIC09IE1hdGgubWluKDE1LCBtZXRyaWNzLndhcm5pbmdzICogMC4wMSk7IC8vIFdhcm5pbmdzIChsZXNzIGltcGFjdClcblxuICAgIC8vIFBlcmZvcm1hbmNlIHBlbmFsdHlcbiAgICBpZiAobWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MubGludGluZ0R1cmF0aW9uID4gMzAwMDApIHtcbiAgICAgIHNjb3JlIC09IDEwOyAvLyBQZXJmb3JtYW5jZSBwZW5hbHR5XG4gICAgfVxuXG4gICAgLy8gQm9udXMgZm9yIHplcm8gY3JpdGljYWwgaXNzdWVzXG4gICAgaWYgKG1ldHJpY3MucGFyc2VyRXJyb3JzID09PSAwICYmIG1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgPCAxMCkge1xuICAgICAgc2NvcmUgKz0gNTtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBNYXRoLnJvdW5kKHNjb3JlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIGFsZXJ0cyBiYXNlZCBvbiBjdXJyZW50IG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgZXZhbHVhdGVBbGVydHMobWV0cmljczogTGludGluZ01ldHJpY3MpOiBBbGVydFtdIHtcbiAgICBjb25zdCBhbGVydHM6IEFsZXJ0W10gPSBbXTtcbiAgICBjb25zdCB0aHJlc2hvbGRzID0gdGhpcy5sb2FkVGhyZXNob2xkcygpO1xuXG4gICAgZm9yIChjb25zdCB0aHJlc2hvbGQgb2YgdGhyZXNob2xkcykge1xuICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRNZXRyaWNWYWx1ZShtZXRyaWNzLCB0aHJlc2hvbGQubWV0cmljKTtcblxuICAgICAgaWYgKHRoaXMuc2hvdWxkVHJpZ2dlckFsZXJ0KGN1cnJlbnRWYWx1ZSwgdGhyZXNob2xkKSkge1xuICAgICAgICBhbGVydHMucHVzaCh7XG4gICAgICAgICAgaWQ6IGAke3RocmVzaG9sZC5tZXRyaWN9LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBzZXZlcml0eTogdGhyZXNob2xkLnNldmVyaXR5LFxuICAgICAgICAgIG1ldHJpYzogdGhyZXNob2xkLm1ldHJpYyxcbiAgICAgICAgICBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGQudGhyZXNob2xkLFxuICAgICAgICAgIG1lc3NhZ2U6IHRocmVzaG9sZC5tZXNzYWdlLFxuICAgICAgICAgIHJlc29sdmVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZXJ0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHJlZ3Jlc3Npb24gY29tcGFyZWQgdG8gaGlzdG9yaWNhbCBkYXRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVSZWdyZXNzaW9uKGN1cnJlbnRNZXRyaWNzOiBMaW50aW5nTWV0cmljcyk6IFByb21pc2U8UmVncmVzc2lvbkFuYWx5c2lzPiB7XG4gICAgY29uc3QgaGlzdG9yeSA9IHRoaXMubG9hZE1ldHJpY3NIaXN0b3J5KCk7XG5cbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPCAyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXRlY3RlZDogZmFsc2UsXG4gICAgICAgIGFmZmVjdGVkTWV0cmljczogW10sXG4gICAgICAgIHNldmVyaXR5OiAnbWlub3InLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnSW5zdWZmaWNpZW50IGhpc3RvcmljYWwgZGF0YSBmb3IgcmVncmVzc2lvbiBhbmFseXNpcyddLFxuICAgICAgICBoaXN0b3JpY2FsQ29tcGFyaXNvbjoge1xuICAgICAgICAgIGN1cnJlbnQ6IGN1cnJlbnRNZXRyaWNzLnRvdGFsSXNzdWVzLFxuICAgICAgICAgIHByZXZpb3VzOiAwLFxuICAgICAgICAgIGNoYW5nZTogMCxcbiAgICAgICAgICBjaGFuZ2VQZXJjZW50YWdlOiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2aW91c01ldHJpY3MgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMl07XG4gICAgY29uc3QgYWZmZWN0ZWRNZXRyaWNzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHJlZ3Jlc3Npb25zIGluIGtleSBtZXRyaWNzXG4gICAgY29uc3Qga2V5TWV0cmljcyA9IFtcbiAgICAgICd0b3RhbElzc3VlcycsXG4gICAgICAnZXJyb3JzJyxcbiAgICAgICdwYXJzZXJFcnJvcnMnLFxuICAgICAgJ2V4cGxpY2l0QW55RXJyb3JzJyxcbiAgICAgICdxdWFsaXR5U2NvcmUnLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IG1ldHJpYyBvZiBrZXlNZXRyaWNzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5nZXRNZXRyaWNWYWx1ZShjdXJyZW50TWV0cmljcywgbWV0cmljKTtcbiAgICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5nZXRNZXRyaWNWYWx1ZShwcmV2aW91c01ldHJpY3MsIG1ldHJpYyk7XG5cbiAgICAgIC8vIERldGVjdCByZWdyZXNzaW9uIChpbmNyZWFzZSBpbiBpc3N1ZXMgb3IgZGVjcmVhc2UgaW4gcXVhbGl0eSBzY29yZSlcbiAgICAgIGNvbnN0IGlzUmVncmVzc2lvbiA9XG4gICAgICAgIG1ldHJpYyA9PT0gJ3F1YWxpdHlTY29yZSdcbiAgICAgICAgICA/IGN1cnJlbnQgPCBwcmV2aW91cyAtIDUgLy8gUXVhbGl0eSBzY29yZSBkZWNyZWFzZWQgYnkgbW9yZSB0aGFuIDUgcG9pbnRzXG4gICAgICAgICAgOiBjdXJyZW50ID4gcHJldmlvdXMgKiAxLjE7IC8vIE90aGVyIG1ldHJpY3MgaW5jcmVhc2VkIGJ5IG1vcmUgdGhhbiAxMCVcblxuICAgICAgaWYgKGlzUmVncmVzc2lvbikge1xuICAgICAgICBhZmZlY3RlZE1ldHJpY3MucHVzaChtZXRyaWMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldmVyaXR5ID0gdGhpcy5jYWxjdWxhdGVSZWdyZXNzaW9uU2V2ZXJpdHkoXG4gICAgICBhZmZlY3RlZE1ldHJpY3MsXG4gICAgICBjdXJyZW50TWV0cmljcyxcbiAgICAgIHByZXZpb3VzTWV0cmljcyxcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRldGVjdGVkOiBhZmZlY3RlZE1ldHJpY3MubGVuZ3RoID4gMCxcbiAgICAgIGFmZmVjdGVkTWV0cmljcyxcbiAgICAgIHNldmVyaXR5LFxuICAgICAgcmVjb21tZW5kYXRpb25zOiB0aGlzLmdlbmVyYXRlUmVncmVzc2lvblJlY29tbWVuZGF0aW9ucyhhZmZlY3RlZE1ldHJpY3MpLFxuICAgICAgaGlzdG9yaWNhbENvbXBhcmlzb246IHtcbiAgICAgICAgY3VycmVudDogY3VycmVudE1ldHJpY3MudG90YWxJc3N1ZXMsXG4gICAgICAgIHByZXZpb3VzOiBwcmV2aW91c01ldHJpY3MudG90YWxJc3N1ZXMsXG4gICAgICAgIGNoYW5nZTogY3VycmVudE1ldHJpY3MudG90YWxJc3N1ZXMgLSBwcmV2aW91c01ldHJpY3MudG90YWxJc3N1ZXMsXG4gICAgICAgIGNoYW5nZVBlcmNlbnRhZ2U6XG4gICAgICAgICAgcHJldmlvdXNNZXRyaWNzLnRvdGFsSXNzdWVzID4gMFxuICAgICAgICAgICAgPyAoKGN1cnJlbnRNZXRyaWNzLnRvdGFsSXNzdWVzIC0gcHJldmlvdXNNZXRyaWNzLnRvdGFsSXNzdWVzKSAvXG4gICAgICAgICAgICAgICAgcHJldmlvdXNNZXRyaWNzLnRvdGFsSXNzdWVzKSAqXG4gICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgOiAwLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBtZXRyaWNzIGFuZCBhbGVydHNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMobWV0cmljczogTGludGluZ01ldHJpY3MsIGFsZXJ0czogQWxlcnRbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBQYXJzZXIgZXJyb3IgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKG1ldHJpY3MucGFyc2VyRXJyb3JzID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICfwn5qoIFVSR0VOVDogRml4IHBhcnNlciBlcnJvcnMgaW1tZWRpYXRlbHkgLSB0aGV5IGJsb2NrIGFjY3VyYXRlIGxpbnRpbmcgYW5hbHlzaXMnLFxuICAgICAgICAnQ2hlY2sgc3JjL3V0aWxzL3JlY29tbWVuZGF0aW9uRW5naW5lLnRzIGFuZCBvdGhlciBmaWxlcyB3aXRoIHN5bnRheCBlcnJvcnMnLFxuICAgICAgICAnUnVuIGB5YXJuIHRzYyAtLW5vRW1pdGAgdG8gaWRlbnRpZnkgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBpc3N1ZXMnLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBFeHBsaWNpdCBhbnkgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKG1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgPiAxMDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAn4pqhIEhJR0ggUFJJT1JJVFk6IFJlZHVjZSBleHBsaWNpdCBhbnkgdHlwZXMgdXNpbmcgc3lzdGVtYXRpYyB0eXBlIGluZmVyZW5jZScsXG4gICAgICAgICdGb2N1cyBvbiBSZWFjdCBjb21wb25lbnRzLCBzZXJ2aWNlIGxheWVycywgYW5kIHV0aWxpdHkgZnVuY3Rpb25zIGZpcnN0JyxcbiAgICAgICAgJ1VzZSBkb21haW4tc3BlY2lmaWMgZXhjZXB0aW9ucyBmb3IgYXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyB3aGVyZSBuZWVkZWQnLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJbXBvcnQgb3JnYW5pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmIChtZXRyaWNzLmltcG9ydE9yZGVySXNzdWVzID4gNTApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAn8J+agCBSRUFEWTogRGVwbG95IGVuaGFuY2VkIGltcG9ydCBvcmdhbml6YXRpb24gd2l0aCBhbHBoYWJldGljYWwgc29ydGluZycsXG4gICAgICAgICdSdW4gYHlhcm4gbGludDpmaXhgIHRvIGF1dG9tYXRpY2FsbHkgb3JnYW5pemUgaW1wb3J0cycsXG4gICAgICAgICdVc2UgYmF0Y2ggcHJvY2Vzc2luZyBmb3Igc3lzdGVtYXRpYyBjb21wbGV0aW9uIG9mIHJlbWFpbmluZyBpc3N1ZXMnLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtYW5jZSByZWNvbW1lbmRhdGlvbnNcbiAgICBpZiAobWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MubGludGluZ0R1cmF0aW9uID4gMzAwMDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAn4pqhIFBFUkZPUk1BTkNFOiBMaW50aW5nIGR1cmF0aW9uIGV4Y2VlZHMgMzAgc2Vjb25kcycsXG4gICAgICAgICdFbmFibGUgRVNMaW50IGNhY2hpbmcgd2l0aCBgeWFybiBsaW50OmZhc3RgIGZvciBpbmNyZW1lbnRhbCBjaGFuZ2VzJyxcbiAgICAgICAgJ0NvbnNpZGVyIHVzaW5nIGB5YXJuIGxpbnQ6Y2hhbmdlZGAgZm9yIGdpdC1hd2FyZSBjaGFuZ2VkLWZpbGVzLW9ubHkgcHJvY2Vzc2luZycsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFF1YWxpdHkgc2NvcmUgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKG1ldHJpY3MucXVhbGl0eVNjb3JlIDwgODApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAn8J+TiiBRVUFMSVRZOiBDb2RlIHF1YWxpdHkgc2NvcmUgYmVsb3cgdGFyZ2V0ICg4MCUpJyxcbiAgICAgICAgJ0ZvY3VzIG9uIGVsaW1pbmF0aW5nIGNyaXRpY2FsIGVycm9ycyBmaXJzdCwgdGhlbiB3YXJuaW5ncycsXG4gICAgICAgICdVc2UgZG9tYWluLXNwZWNpZmljIGxpbnRpbmcgY29tbWFuZHMgZm9yIHRhcmdldGVkIGltcHJvdmVtZW50cycsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERvbWFpbi1zcGVjaWZpYyByZWNvbW1lbmRhdGlvbnNcbiAgICBpZiAobWV0cmljcy5kb21haW5TcGVjaWZpY0lzc3Vlcy5hc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbnMgPiAyMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICfwn4yfIERPTUFJTjogUmV2aWV3IGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbiBmaWxlcyBmb3IgcnVsZSBjb21wbGlhbmNlJyxcbiAgICAgICAgJ0Vuc3VyZSBtYXRoZW1hdGljYWwgY29uc3RhbnRzIGFuZCBwbGFuZXRhcnkgdmFyaWFibGVzIGFyZSBwcmVzZXJ2ZWQnLFxuICAgICAgICAnVXNlIGB5YXJuIGxpbnQ6ZG9tYWluLWFzdHJvYCBmb3Igc3BlY2lhbGl6ZWQgYXN0cm9sb2dpY2FsIGZpbGUgbGludGluZycsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBkYXNoYm9hcmQgcmVwb3J0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRGFzaGJvYXJkUmVwb3J0KHJlc3VsdDogVmFsaWRhdGlvblJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHJlcG9ydFBhdGggPSAnLmtpcm8vbWV0cmljcy9saW50aW5nLWRhc2hib2FyZC1yZXBvcnQubWQnO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gYCMgTGludGluZyBFeGNlbGxlbmNlIERhc2hib2FyZCBSZXBvcnRcblxuR2VuZXJhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cblxuIyMg8J+TiiBPdmVyYWxsIFN0YXR1c1xuXG4tICoqVmFsaWRhdGlvbiBTdGF0dXMqKjogJHtyZXN1bHQucGFzc2VkID8gJ+KchSBQQVNTRUQnIDogJ+KdjCBGQUlMRUQnfVxuLSAqKlF1YWxpdHkgU2NvcmUqKjogJHtyZXN1bHQubWV0cmljcy5xdWFsaXR5U2NvcmV9LzEwMFxuLSAqKlRvdGFsIElzc3VlcyoqOiAke3Jlc3VsdC5tZXRyaWNzLnRvdGFsSXNzdWVzfVxuLSAqKlJlZ3Jlc3Npb24gRGV0ZWN0ZWQqKjogJHtyZXN1bHQucmVncmVzc2lvbkFuYWx5c2lzLmRldGVjdGVkID8gJ+KaoO+4jyBZRVMnIDogJ+KchSBOTyd9XG5cbiMjIPCflI0gRGV0YWlsZWQgTWV0cmljc1xuXG4jIyMgRXJyb3IgQnJlYWtkb3duXG4tICoqUGFyc2VyIEVycm9ycyoqOiAke3Jlc3VsdC5tZXRyaWNzLnBhcnNlckVycm9yc30gJHtyZXN1bHQubWV0cmljcy5wYXJzZXJFcnJvcnMgPT09IDAgPyAn4pyFJyA6ICfwn5qoJ31cbi0gKipUeXBlU2NyaXB0IEVycm9ycyoqOiAke3Jlc3VsdC5tZXRyaWNzLmVycm9yc31cbi0gKipFeHBsaWNpdCBBbnkgRXJyb3JzKio6ICR7cmVzdWx0Lm1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnN9ICR7cmVzdWx0Lm1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgPCAxMDAgPyAn4pyFJyA6ICfimqEnfVxuLSAqKldhcm5pbmdzKio6ICR7cmVzdWx0Lm1ldHJpY3Mud2FybmluZ3N9XG5cbiMjIyBDb2RlIFF1YWxpdHkgSXNzdWVzXG4tICoqSW1wb3J0IE9yZGVyIElzc3VlcyoqOiAke3Jlc3VsdC5tZXRyaWNzLmltcG9ydE9yZGVySXNzdWVzfVxuLSAqKlVudXNlZCBWYXJpYWJsZXMqKjogJHtyZXN1bHQubWV0cmljcy51bnVzZWRWYXJpYWJsZXN9XG4tICoqUmVhY3QgSG9va3MgSXNzdWVzKio6ICR7cmVzdWx0Lm1ldHJpY3MucmVhY3RIb29rc0lzc3Vlc31cbi0gKipDb25zb2xlIFN0YXRlbWVudHMqKjogJHtyZXN1bHQubWV0cmljcy5jb25zb2xlU3RhdGVtZW50c31cblxuIyMjIERvbWFpbi1TcGVjaWZpYyBJc3N1ZXNcbi0gKipBc3Ryb2xvZ2ljYWwgQ2FsY3VsYXRpb25zKio6ICR7cmVzdWx0Lm1ldHJpY3MuZG9tYWluU3BlY2lmaWNJc3N1ZXMuYXN0cm9sb2dpY2FsQ2FsY3VsYXRpb25zfVxuLSAqKkNhbXBhaWduIFN5c3RlbSoqOiAke3Jlc3VsdC5tZXRyaWNzLmRvbWFpblNwZWNpZmljSXNzdWVzLmNhbXBhaWduU3lzdGVtfVxuLSAqKlRlc3QgRmlsZXMqKjogJHtyZXN1bHQubWV0cmljcy5kb21haW5TcGVjaWZpY0lzc3Vlcy50ZXN0RmlsZXN9XG5cbiMjIyBQZXJmb3JtYW5jZSBNZXRyaWNzXG4tICoqTGludGluZyBEdXJhdGlvbioqOiAke3Jlc3VsdC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nRHVyYXRpb259bXNcbi0gKipDYWNoZSBIaXQgUmF0ZSoqOiAkeyhyZXN1bHQubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuY2FjaGVIaXRSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcbi0gKipNZW1vcnkgVXNhZ2UqKjogJHtyZXN1bHQubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MubWVtb3J5VXNhZ2UudG9GaXhlZCgxKX1NQlxuLSAqKkZpbGVzIFByb2Nlc3NlZCoqOiAke3Jlc3VsdC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5maWxlc1Byb2Nlc3NlZH1cblxuIyMg8J+aqCBBY3RpdmUgQWxlcnRzXG5cbiR7XG4gIHJlc3VsdC5hbGVydHMubGVuZ3RoID09PSAwXG4gICAgPyAnTm8gYWN0aXZlIGFsZXJ0cyDinIUnXG4gICAgOiByZXN1bHQuYWxlcnRzXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgYWxlcnQgPT5cbiAgICAgICAgICAgIGAtICoqJHthbGVydC5zZXZlcml0eS50b1VwcGVyQ2FzZSgpfSoqOiAke2FsZXJ0Lm1lc3NhZ2V9ICgke2FsZXJ0LmN1cnJlbnRWYWx1ZX0gPiAke2FsZXJ0LnRocmVzaG9sZH0pYCxcbiAgICAgICAgKVxuICAgICAgICAuam9pbignXFxuJylcbn1cblxuIyMg8J+TiCBSZWdyZXNzaW9uIEFuYWx5c2lzXG5cbiR7XG4gIHJlc3VsdC5yZWdyZXNzaW9uQW5hbHlzaXMuZGV0ZWN0ZWRcbiAgICA/IGBcbioqUmVncmVzc2lvbiBEZXRlY3RlZCoqOiAke3Jlc3VsdC5yZWdyZXNzaW9uQW5hbHlzaXMuc2V2ZXJpdHkudG9VcHBlckNhc2UoKX1cbi0gKipBZmZlY3RlZCBNZXRyaWNzKio6ICR7cmVzdWx0LnJlZ3Jlc3Npb25BbmFseXNpcy5hZmZlY3RlZE1ldHJpY3Muam9pbignLCAnKX1cbi0gKipDaGFuZ2UqKjogJHtyZXN1bHQucmVncmVzc2lvbkFuYWx5c2lzLmhpc3RvcmljYWxDb21wYXJpc29uLmNoYW5nZX0gaXNzdWVzICgke3Jlc3VsdC5yZWdyZXNzaW9uQW5hbHlzaXMuaGlzdG9yaWNhbENvbXBhcmlzb24uY2hhbmdlUGVyY2VudGFnZS50b0ZpeGVkKDEpfSUpXG5gXG4gICAgOiAnKipObyBSZWdyZXNzaW9uIERldGVjdGVkKiog4pyFJ1xufVxuXG4jIyDwn5KhIFJlY29tbWVuZGF0aW9uc1xuXG4ke3Jlc3VsdC5yZWNvbW1lbmRhdGlvbnMubWFwKHJlYyA9PiBgLSAke3JlY31gKS5qb2luKCdcXG4nKX1cblxuIyMg8J+OryBOZXh0IEFjdGlvbnNcblxuIyMjIEltbWVkaWF0ZSAoTmV4dCAzMCBNaW51dGVzKVxuMS4gJHtyZXN1bHQubWV0cmljcy5wYXJzZXJFcnJvcnMgPiAwID8gJ/CfmqggKipVUkdFTlQqKjogRml4IHBhcnNlciBlcnJvcnMgaW4gcmVjb21tZW5kYXRpb25FbmdpbmUudHMnIDogJ+KchSBObyBwYXJzZXIgZXJyb3JzJ31cbjIuICR7cmVzdWx0Lm1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgPiAxMDAgPyAn4pqhICoqRGVwbG95IEV4cGxpY2l0IEFueSBDYW1wYWlnbioqOiBBZGRyZXNzIGVycm9yLWxldmVsIGV4cGxpY2l0IGFueSB0eXBlcycgOiAn4pyFIEV4cGxpY2l0IGFueSBlcnJvcnMgdW5kZXIgY29udHJvbCd9XG4zLiAke3Jlc3VsdC5tZXRyaWNzLmltcG9ydE9yZGVySXNzdWVzID4gNTAgPyAn8J+agCAqKkV4ZWN1dGUgSW1wb3J0IE9yZ2FuaXphdGlvbioqOiBBcHBseSBhbHBoYWJldGljYWwgc29ydGluZyBhbmQgZ3JvdXBpbmcnIDogJ+KchSBJbXBvcnQgb3JnYW5pemF0aW9uIGFjY2VwdGFibGUnfVxuXG4jIyMgTmV4dCAyIEhvdXJzXG4xLiAqKkVuaGFuY2VkIFVudXNlZCBWYXJpYWJsZSBDbGVhbnVwKio6IEFwcGx5IGRvbWFpbi1zcGVjaWZpYyB2YXJpYWJsZSBwYXR0ZXJuc1xuMi4gKipSZWFjdCBIb29rcyBFbmhhbmNlbWVudCoqOiBJbXBsZW1lbnQgZW5oYW5jZWQgZGVwZW5kZW5jeSBhbmFseXNpc1xuMy4gKipQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb24qKjogRW5hYmxlIGNhY2hpbmcgYW5kIHBhcmFsbGVsIHByb2Nlc3NpbmdcblxuIyMjIFN1Y2Nlc3MgTWV0cmljcyBUYXJnZXRcbi0gKipUYXJnZXQqKjogJHtyZXN1bHQubWV0cmljcy50b3RhbElzc3Vlc30g4oaSIDwyLDAwMCB0b3RhbCBpc3N1ZXMgKCR7TWF0aC5yb3VuZCgoMSAtIDIwMDAgLyBNYXRoLm1heChyZXN1bHQubWV0cmljcy50b3RhbElzc3VlcywgMSkpICogMTAwKX0lIHJlZHVjdGlvbilcbi0gKipDcml0aWNhbCBQYXRoKio6IFBhcnNlciBlcnJvcnMg4oaSIEV4cGxpY2l0IGFueSBlcnJvcnMg4oaSIEltcG9ydCBvcmdhbml6YXRpb25cbi0gKipUaW1lbGluZSoqOiAzLTQgaG91cnMgZm9yIG1ham9yIHJlZHVjdGlvbiB3aXRoIGVuaGFuY2VkIHNhZmV0eSBwcm90b2NvbHNcbi0gKipRdWFsaXR5IEdhdGUqKjogWmVybyBwYXJzZXIgZXJyb3JzLCA8MTAwIGV4cGxpY2l0IGFueSBlcnJvcnMsIGVuaGFuY2VkIGltcG9ydCBvcmdhbml6YXRpb25cblxuLS0tXG5cbipSZXBvcnQgZ2VuZXJhdGVkIGJ5IExpbnRpbmcgRXhjZWxsZW5jZSBEYXNoYm9hcmQgdjEuMCpcbipFbmhhbmNlZCBDb25maWd1cmF0aW9uOiBSZWFjdCAxOSwgVHlwZVNjcmlwdCBzdHJpY3QgcnVsZXMsIGRvbWFpbi1zcGVjaWZpYyBjb25maWd1cmF0aW9ucypcbmA7XG5cbiAgICB3cml0ZUZpbGVTeW5jKHJlcG9ydFBhdGgsIHJlcG9ydCwgJ3V0ZjgnKTtcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBEYXNoYm9hcmQgcmVwb3J0IGdlbmVyYXRlZDogJHtyZXBvcnRQYXRofWApO1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZHNcbiAgcHJpdmF0ZSBlbnN1cmVEaXJlY3Rvcmllc0V4aXN0KCk6IHZvaWQge1xuICAgIGNvbnN0IGRpcnMgPSBbJy5raXJvL21ldHJpY3MnXTtcbiAgICBmb3IgKGNvbnN0IGRpciBvZiBkaXJzKSB7XG4gICAgICBpZiAoIWV4aXN0c1N5bmMoZGlyKSkge1xuICAgICAgICBleGVjU3luYyhgbWtkaXIgLXAgJHtkaXJ9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ29uZmlndXJhdGlvbigpOiB2b2lkIHtcbiAgICBpZiAoIWV4aXN0c1N5bmModGhpcy5jb25maWdGaWxlKSkge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICB0aHJlc2hvbGRzOiB0aGlzLmRlZmF1bHRUaHJlc2hvbGRzLFxuICAgICAgICBhbGVydGluZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIHJlZ3Jlc3Npb25EZXRlY3Rpb25FbmFibGVkOiB0cnVlLFxuICAgICAgICBwZXJmb3JtYW5jZU1vbml0b3JpbmdFbmFibGVkOiB0cnVlLFxuICAgICAgICBkb21haW5TcGVjaWZpY1RyYWNraW5nRW5hYmxlZDogdHJ1ZSxcbiAgICAgIH07XG4gICAgICB3cml0ZUZpbGVTeW5jKHRoaXMuY29uZmlnRmlsZSwgSlNPTi5zdHJpbmdpZnkoY29uZmlnLCBudWxsLCAyKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBsb2FkVGhyZXNob2xkcygpOiBBbGVydFRocmVzaG9sZFtdIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmModGhpcy5jb25maWdGaWxlLCAndXRmOCcpKTtcbiAgICAgIHJldHVybiBjb25maWcudGhyZXNob2xkcyB8fCB0aGlzLmRlZmF1bHRUaHJlc2hvbGRzO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFRocmVzaG9sZHM7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBsb2FkTWV0cmljc0hpc3RvcnkoKTogTGludGluZ01ldHJpY3NbXSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChleGlzdHNTeW5jKHRoaXMubWV0cmljc0hpc3RvcnlGaWxlKSkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmModGhpcy5tZXRyaWNzSGlzdG9yeUZpbGUsICd1dGY4JykpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGxvYWRpbmcgbWV0cmljcyBoaXN0b3J5OicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdG9yZU1ldHJpY3MobWV0cmljczogTGludGluZ01ldHJpY3MpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5sb2FkTWV0cmljc0hpc3RvcnkoKTtcbiAgICBoaXN0b3J5LnB1c2gobWV0cmljcyk7XG5cbiAgICAvLyBLZWVwIG9ubHkgbGFzdCAxMDAgZW50cmllc1xuICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IDEwMCkge1xuICAgICAgaGlzdG9yeS5zcGxpY2UoMCwgaGlzdG9yeS5sZW5ndGggLSAxMDApO1xuICAgIH1cblxuICAgIHdyaXRlRmlsZVN5bmModGhpcy5tZXRyaWNzSGlzdG9yeUZpbGUsIEpTT04uc3RyaW5naWZ5KGhpc3RvcnksIG51bGwsIDIpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVBbGVydHMoYWxlcnRzOiBBbGVydFtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgd3JpdGVGaWxlU3luYyh0aGlzLmFsZXJ0c0ZpbGUsIEpTT04uc3RyaW5naWZ5KGFsZXJ0cywgbnVsbCwgMikpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRNZXRyaWNWYWx1ZShtZXRyaWNzOiBMaW50aW5nTWV0cmljcywgbWV0cmljUGF0aDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBwYXJ0cyA9IG1ldHJpY1BhdGguc3BsaXQoJy4nKTtcbiAgICBsZXQgdmFsdWU6IHVua25vd24gPSBtZXRyaWNzO1xuXG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlPy5bcGFydF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyB2YWx1ZSA6IDA7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFRyaWdnZXJBbGVydChjdXJyZW50VmFsdWU6IG51bWJlciwgdGhyZXNob2xkOiBBbGVydFRocmVzaG9sZCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aHJlc2hvbGQubWV0cmljID09PSAncXVhbGl0eVNjb3JlJykge1xuICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZSA8IHRocmVzaG9sZC50aHJlc2hvbGQ7IC8vIFF1YWxpdHkgc2NvcmUgc2hvdWxkIGJlIGFib3ZlIHRocmVzaG9sZFxuICAgIH1cbiAgICByZXR1cm4gY3VycmVudFZhbHVlID4gdGhyZXNob2xkLnRocmVzaG9sZDsgLy8gT3RoZXIgbWV0cmljcyBzaG91bGQgYmUgYmVsb3cgdGhyZXNob2xkXG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJlZ3Jlc3Npb25TZXZlcml0eShcbiAgICBhZmZlY3RlZE1ldHJpY3M6IHN0cmluZ1tdLFxuICAgIGN1cnJlbnQ6IExpbnRpbmdNZXRyaWNzLFxuICAgIHByZXZpb3VzOiBMaW50aW5nTWV0cmljcyxcbiAgKTogJ21pbm9yJyB8ICdtb2RlcmF0ZScgfCAnbWFqb3InIHwgJ2NyaXRpY2FsJyB7XG4gICAgaWYgKGFmZmVjdGVkTWV0cmljcy5pbmNsdWRlcygncGFyc2VyRXJyb3JzJykgJiYgY3VycmVudC5wYXJzZXJFcnJvcnMgPiBwcmV2aW91cy5wYXJzZXJFcnJvcnMpIHtcbiAgICAgIHJldHVybiAnY3JpdGljYWwnO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGFmZmVjdGVkTWV0cmljcy5pbmNsdWRlcygnZXhwbGljaXRBbnlFcnJvcnMnKSAmJlxuICAgICAgY3VycmVudC5leHBsaWNpdEFueUVycm9ycyA+IHByZXZpb3VzLmV4cGxpY2l0QW55RXJyb3JzICsgNTBcbiAgICApIHtcbiAgICAgIHJldHVybiAnbWFqb3InO1xuICAgIH1cblxuICAgIGlmIChhZmZlY3RlZE1ldHJpY3MubGVuZ3RoID4gMikge1xuICAgICAgcmV0dXJuICdtb2RlcmF0ZSc7XG4gICAgfVxuXG4gICAgcmV0dXJuICdtaW5vcic7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVncmVzc2lvblJlY29tbWVuZGF0aW9ucyhhZmZlY3RlZE1ldHJpY3M6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChhZmZlY3RlZE1ldHJpY3MuaW5jbHVkZXMoJ3BhcnNlckVycm9ycycpKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnSW1tZWRpYXRlbHkgaW52ZXN0aWdhdGUgYW5kIGZpeCBuZXcgcGFyc2VyIGVycm9ycycpO1xuICAgIH1cblxuICAgIGlmIChhZmZlY3RlZE1ldHJpY3MuaW5jbHVkZXMoJ2V4cGxpY2l0QW55RXJyb3JzJykpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdSZXZpZXcgcmVjZW50IGNoYW5nZXMgdGhhdCBpbnRyb2R1Y2VkIGV4cGxpY2l0IGFueSB0eXBlcycpO1xuICAgIH1cblxuICAgIGlmIChhZmZlY3RlZE1ldHJpY3MuaW5jbHVkZXMoJ3RvdGFsSXNzdWVzJykpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdSdW4gY29tcHJlaGVuc2l2ZSBsaW50aW5nIHZhbGlkYXRpb24gdG8gaWRlbnRpZnkgbmV3IGlzc3VlcycpO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhbGN1bGF0ZUNhY2hlSGl0UmF0ZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBFU0xpbnQgY2FjaGUgZXhpc3RzIGFuZCBjYWxjdWxhdGUgaGl0IHJhdGVcbiAgICAgIGlmIChleGlzdHNTeW5jKCcuZXNsaW50Y2FjaGUnKSkge1xuICAgICAgICAvLyBTaW1wbGlmaWVkIGNhY2hlIGhpdCByYXRlIGNhbGN1bGF0aW9uXG4gICAgICAgIHJldHVybiAwLjc1OyAvLyBBc3N1bWUgNzUlIGNhY2hlIGhpdCByYXRlIGZvciBub3dcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElnbm9yZSBlcnJvcnNcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwcml2YXRlIGlzQXN0cm9sb2dpY2FsRmlsZShmaWxlUGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKCcvY2FsY3VsYXRpb25zLycpIHx8XG4gICAgICBmaWxlUGF0aC5pbmNsdWRlcygnL2RhdGEvcGxhbmV0cy8nKSB8fFxuICAgICAgZmlsZVBhdGguaW5jbHVkZXMoJ3JlbGlhYmxlQXN0cm9ub215JykgfHxcbiAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKCcvYXN0cm9sb2d5LycpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNDYW1wYWlnbkZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBmaWxlUGF0aC5pbmNsdWRlcygnL2NhbXBhaWduLycpIHx8XG4gICAgICBmaWxlUGF0aC5pbmNsdWRlcygnQ2FtcGFpZ24nKSB8fFxuICAgICAgZmlsZVBhdGguaW5jbHVkZXMoJ1Byb2dyZXNzJylcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1Rlc3RGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgZmlsZVBhdGguaW5jbHVkZXMoJy50ZXN0LicpIHx8IGZpbGVQYXRoLmluY2x1ZGVzKCcuc3BlYy4nKSB8fCBmaWxlUGF0aC5pbmNsdWRlcygnX190ZXN0c19fJylcbiAgICApO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=