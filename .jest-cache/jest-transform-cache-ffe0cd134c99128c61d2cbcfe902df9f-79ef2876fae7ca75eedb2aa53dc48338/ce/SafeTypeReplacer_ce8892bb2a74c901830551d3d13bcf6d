ed9c0d717a343556aec42891a2c7097e
"use strict";
/**
 * Safe Type Replacer
 * Performs safe replacements of unintentional `any` types with more specific types
 *
 * Core Features:
 * - Atomic replacement operations with automatic rollback
 * - TypeScript compilation validation after each replacement
 * - Comprehensive backup system for all modified files
 * - Safety scoring system for replacement confidence
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SafeTypeReplacer = void 0;
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const types_1 = require("./types");
class SafeTypeReplacer {
    strategies;
    backupDirectory;
    safetyThreshold;
    validationTimeout;
    maxRetries;
    safetyValidator;
    constructor(backupDirectory = './.any-elimination-backups', safetyThreshold = 0.7, validationTimeout = 30000, maxRetries = 3) {
        this.backupDirectory = backupDirectory;
        this.safetyThreshold = safetyThreshold;
        this.validationTimeout = validationTimeout;
        this.maxRetries = maxRetries;
        this.strategies = this.initializeStrategies();
        this.safetyValidator = new SafetyValidator(validationTimeout, {
            minimumSafetyScore: safetyThreshold
        });
        this.ensureBackupDirectory();
    }
    /**
     * Apply a single type replacement with comprehensive safety validation
     * Implements atomic operations with automatic rollback on any failure
     */
    async applyReplacement(replacement, context) {
        // Enhanced pre-validation using SafetyValidator
        let safetyValidation;
        if (context) {
            safetyValidation = this.safetyValidator.calculateSafetyScore(replacement, context);
        }
        else {
            // Fallback to basic safety score calculation
            const basicSafetyScore = this.calculateSafetyScore(replacement);
            safetyValidation = {
                isValid: basicSafetyScore >= this.safetyThreshold,
                safetyScore: basicSafetyScore,
                validationErrors: basicSafetyScore < this.safetyThreshold
                    ? [`Safety score ${basicSafetyScore} below threshold ${this.safetyThreshold}`]
                    : [],
                warnings: [],
                recommendations: []
            };
        }
        if (!safetyValidation.isValid) {
            return {
                success: false,
                appliedReplacements: [],
                failedReplacements: [replacement],
                compilationErrors: safetyValidation.validationErrors,
                rollbackPerformed: false
            };
        }
        const backupPath = await this.createBackup(replacement.filePath);
        let retryCount = 0;
        while (retryCount < this.maxRetries) {
            try {
                // Atomic replacement operation
                const result = await this.performAtomicReplacement(replacement, backupPath);
                if (result.success) {
                    // Verify rollback capability before declaring success
                    const rollbackVerification = await this.verifyRollbackCapability(replacement.filePath, backupPath);
                    if (!rollbackVerification.success) {
                        await this.rollbackFromBackup(replacement.filePath, backupPath);
                        return {
                            success: false,
                            appliedReplacements: [],
                            failedReplacements: [replacement],
                            compilationErrors: [`Rollback verification failed: ${rollbackVerification.error}`],
                            rollbackPerformed: true,
                            backupPath
                        };
                    }
                    return result;
                }
                else {
                    // If replacement failed with specific errors, return immediately (don't retry)
                    return result;
                }
            }
            catch (error) {
                retryCount++;
                if (retryCount >= this.maxRetries) {
                    // Final rollback on exhausted retries
                    await this.rollbackFromBackup(replacement.filePath, backupPath);
                    return {
                        success: false,
                        appliedReplacements: [],
                        failedReplacements: [replacement],
                        compilationErrors: [error instanceof Error ? error.message : String(error)],
                        rollbackPerformed: true,
                        backupPath
                    };
                }
                // Wait briefly before retry
                await new Promise(resolve => setTimeout(resolve, 100 * retryCount));
            }
        }
        // Should not reach here, but handle edge case
        await this.rollbackFromBackup(replacement.filePath, backupPath);
        return {
            success: false,
            appliedReplacements: [],
            failedReplacements: [replacement],
            compilationErrors: ['Maximum retries exceeded'],
            rollbackPerformed: true,
            backupPath
        };
    }
    /**
     * Process multiple replacements in batch with atomic operations
     */
    async processBatch(replacements) {
        const backupPaths = new Map();
        const appliedReplacements = [];
        const failedReplacements = [];
        const compilationErrors = [];
        try {
            // Create backups for all files
            for (const replacement of replacements) {
                if (!backupPaths.has(replacement.filePath)) {
                    const backupPath = await this.createBackup(replacement.filePath);
                    backupPaths.set(replacement.filePath, backupPath);
                }
            }
            // Group replacements by file for efficient processing
            const replacementsByFile = this.groupReplacementsByFile(replacements);
            // Apply replacements file by file
            for (const [filePath, fileReplacements] of Array.from(replacementsByFile.entries())) {
                try {
                    const result = await this.applyReplacementsToFile(filePath, fileReplacements);
                    appliedReplacements.push(...result.applied);
                    failedReplacements.push(...result.failed);
                    if (result.failed.length > 0) {
                        compilationErrors.push(...result.errors);
                    }
                }
                catch (error) {
                    failedReplacements.push(...fileReplacements);
                    compilationErrors.push(error instanceof Error ? error.message : String(error));
                }
            }
            // Enhanced build validation after batch operations
            const modifiedFiles = Array.from(backupPaths.keys());
            const buildValidation = await this.safetyValidator.validateBuildAfterBatch(modifiedFiles, false);
            if (!buildValidation.buildSuccessful) {
                // Rollback all changes
                await this.rollbackAllFiles(backupPaths);
                return {
                    success: false,
                    appliedReplacements: [],
                    failedReplacements: replacements,
                    compilationErrors: buildValidation.compilationErrors,
                    rollbackPerformed: true
                };
            }
            // Validate rollback capability
            const rollbackValidation = await this.safetyValidator.validateRollbackCapability(new Map(modifiedFiles.map(file => [file, file])), backupPaths);
            if (!rollbackValidation.canRollback) {
                compilationErrors.push(...rollbackValidation.rollbackErrors);
                compilationErrors.push('Warning: Rollback capability compromised');
            }
            const success = failedReplacements.length === 0;
            return {
                success,
                appliedReplacements,
                failedReplacements,
                compilationErrors,
                rollbackPerformed: false
            };
        }
        catch (error) {
            // Emergency rollback
            await this.rollbackAllFiles(backupPaths);
            throw new types_1.SafetyProtocolError('Batch replacement failed with emergency rollback', Array.from(backupPaths.values())[0] || '', Array.from(backupPaths.keys()));
        }
    }
    initializeStrategies() {
        return [
            // Array type replacement strategy (any[] â†’ unknown[])
            {
                pattern: /:\s*any\[\]/g,
                replacement: (match, context) => {
                    // Check if we can infer a more specific array type
                    const inferredType = this.inferArrayElementType(context);
                    return match.replace('any[]', `${inferredType}[]`);
                },
                validator: (context) => context.codeSnippet.includes('any[]') &&
                    !this.isInErrorHandlingContext(context),
                priority: 1
            },
            // Record type replacement with validation (Record<string, any> â†’ Record<string, unknown>)
            {
                pattern: /:\s*Record<\s*string\s*,\s*any\s*>/g,
                replacement: (match, context) => {
                    // Check if we can infer a more specific value type
                    const inferredValueType = this.inferRecordValueType(context);
                    return match.replace(/Record<\s*string\s*,\s*any\s*>/, `Record<string, ${inferredValueType}>`);
                },
                validator: (context) => context.codeSnippet.includes('Record<string, any>') &&
                    !this.isInErrorHandlingContext(context) &&
                    !this.isDynamicConfigContext(context),
                priority: 2
            },
            // Generic Record replacement (Record<number, any> â†’ Record<number, unknown>)
            {
                pattern: /:\s*Record<\s*number\s*,\s*any\s*>/g,
                replacement: (match, context) => {
                    const inferredValueType = this.inferRecordValueType(context);
                    return match.replace(/Record<\s*number\s*,\s*any\s*>/, `Record<number, ${inferredValueType}>`);
                },
                validator: (context) => context.codeSnippet.includes('Record<number, any>') &&
                    !this.isInErrorHandlingContext(context),
                priority: 2
            },
            // Index signature replacement ([key: string]: any â†’ [key: string]: unknown)
            {
                pattern: /\[key:\s*string\]\s*:\s*any/g,
                replacement: (match, context) => {
                    const inferredValueType = this.inferIndexSignatureValueType(context);
                    return match.replace('any', inferredValueType);
                },
                validator: (context) => context.codeSnippet.includes('[key: string]: any') &&
                    !this.isInErrorHandlingContext(context),
                priority: 3
            },
            // Function parameter analysis and replacement
            {
                pattern: /\(\s*([^:)]+):\s*any\s*\)/g,
                replacement: (match, context) => {
                    const paramName = match.match(/\(\s*([^:)]+):/)?.[1]?.trim();
                    if (paramName) {
                        const inferredType = this.inferFunctionParameterType(context, paramName);
                        return match.replace('any', inferredType);
                    }
                    return match.replace('any', 'unknown');
                },
                validator: (context) => this.isFunctionParameterContext(context) &&
                    !this.isInErrorHandlingContext(context) &&
                    !this.isEventHandlerContext(context),
                priority: 4
            },
            // Function parameter in arrow functions
            {
                pattern: /\(\s*([^:)]+):\s*any\s*\)\s*=>/g,
                replacement: (match, context) => {
                    const paramName = match.match(/\(\s*([^:)]+):/)?.[1]?.trim();
                    if (paramName) {
                        const inferredType = this.inferFunctionParameterType(context, paramName);
                        return match.replace('any', inferredType);
                    }
                    return match.replace('any', 'unknown');
                },
                validator: (context) => context.codeSnippet.includes('=>') &&
                    !this.isInErrorHandlingContext(context),
                priority: 4
            },
            // Return type inference and replacement
            {
                pattern: /\):\s*any(?=\s*[{;])/g,
                replacement: (match, context) => {
                    const inferredReturnType = this.inferReturnType(context);
                    return match.replace('any', inferredReturnType);
                },
                validator: (context) => this.isFunctionReturnTypeContext(context) &&
                    !this.isInErrorHandlingContext(context) &&
                    !this.isExternalApiContext(context),
                priority: 5
            },
            // Generic type parameter replacement
            {
                pattern: /<\s*any\s*>/g,
                replacement: (match, context) => {
                    const inferredGenericType = this.inferGenericType(context);
                    return match.replace('any', inferredGenericType);
                },
                validator: (context) => context.codeSnippet.includes('<any>') &&
                    !this.isInErrorHandlingContext(context),
                priority: 6
            },
            // Object property type replacement
            {
                pattern: /(\w+):\s*any(?=\s*[,;}])/g,
                replacement: (match, context) => {
                    const propertyName = match.match(/(\w+):/)?.[1];
                    if (propertyName) {
                        const inferredType = this.inferObjectPropertyType(context, propertyName);
                        return match.replace('any', inferredType);
                    }
                    return match.replace('any', 'unknown');
                },
                validator: (context) => this.isObjectPropertyContext(context) &&
                    !this.isInErrorHandlingContext(context),
                priority: 7
            },
            // Simple variable type replacement (fallback)
            {
                pattern: /:\s*any(?=\s*[=;,\)])/g,
                replacement: (match, context) => {
                    // Try to infer from assignment or usage
                    const inferredType = this.inferVariableType(context);
                    return match.replace('any', inferredType);
                },
                validator: (context) => !this.isInErrorHandlingContext(context) &&
                    !this.isExternalApiContext(context) &&
                    !this.isDynamicConfigContext(context),
                priority: 8
            }
        ];
    }
    async createBackup(filePath) {
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
        const fileName = path.basename(filePath);
        const backupFileName = `${fileName}.${timestamp}.backup`;
        const backupPath = path.join(this.backupDirectory, backupFileName);
        const originalContent = fs.readFileSync(filePath, 'utf8');
        fs.writeFileSync(backupPath, originalContent, 'utf8');
        return backupPath;
    }
    async rollbackFromBackup(filePath, backupPath) {
        if (fs.existsSync(backupPath)) {
            const backupContent = fs.readFileSync(backupPath, 'utf8');
            fs.writeFileSync(filePath, backupContent, 'utf8');
        }
    }
    async rollbackAllFiles(backupPaths) {
        for (const [filePath, backupPath] of Array.from(backupPaths.entries())) {
            await this.rollbackFromBackup(filePath, backupPath);
        }
    }
    groupReplacementsByFile(replacements) {
        const grouped = new Map();
        for (const replacement of replacements) {
            if (!grouped.has(replacement.filePath)) {
                grouped.set(replacement.filePath, []);
            }
            grouped.get(replacement.filePath).push(replacement);
        }
        // Sort replacements within each file by line number (descending to avoid line number shifts)
        for (const fileReplacements of grouped.values()) {
            fileReplacements.sort((a, b) => b.lineNumber - a.lineNumber);
        }
        return grouped;
    }
    async applyReplacementsToFile(filePath, replacements) {
        const applied = [];
        const failed = [];
        const errors = [];
        try {
            let content = fs.readFileSync(filePath, 'utf8');
            let lines = content.split('\n');
            for (const replacement of replacements) {
                try {
                    const lineIndex = replacement.lineNumber - 1;
                    if (lineIndex < 0 || lineIndex >= lines.length) {
                        failed.push(replacement);
                        errors.push(`Invalid line number ${replacement.lineNumber} for file ${filePath}`);
                        continue;
                    }
                    const originalLine = lines[lineIndex];
                    const modifiedLine = originalLine.replace(replacement.original, replacement.replacement);
                    if (originalLine === modifiedLine) {
                        failed.push(replacement);
                        errors.push(`Pattern "${replacement.original}" not found in line: ${originalLine}`);
                        continue;
                    }
                    lines[lineIndex] = modifiedLine;
                    applied.push(replacement);
                }
                catch (error) {
                    failed.push(replacement);
                    errors.push(error instanceof Error ? error.message : String(error));
                }
            }
            // Write the modified content back to file
            const modifiedContent = lines.join('\n');
            fs.writeFileSync(filePath, modifiedContent, 'utf8');
        }
        catch (error) {
            // If file-level operation fails, mark all replacements as failed
            failed.push(...replacements);
            errors.push(error instanceof Error ? error.message : String(error));
        }
        return { applied, failed, errors };
    }
    async validateTypeScriptCompilation() {
        const buildResult = await this.safetyValidator.validateTypeScriptCompilation();
        return {
            success: buildResult.buildSuccessful,
            errors: buildResult.compilationErrors
        };
    }
    ensureBackupDirectory() {
        if (!fs.existsSync(this.backupDirectory)) {
            fs.mkdirSync(this.backupDirectory, { recursive: true });
        }
    }
    /**
     * Perform atomic replacement operation with comprehensive validation
     */
    async performAtomicReplacement(replacement, backupPath) {
        try {
            // Read original file content
            const originalContent = fs.readFileSync(replacement.filePath, 'utf8');
            const lines = originalContent.split('\n');
            // Validate line number
            const lineIndex = replacement.lineNumber - 1;
            if (lineIndex < 0 || lineIndex >= lines.length) {
                return {
                    success: false,
                    appliedReplacements: [],
                    failedReplacements: [replacement],
                    compilationErrors: [`Invalid line number ${replacement.lineNumber} for file ${replacement.filePath}`],
                    rollbackPerformed: false,
                    backupPath
                };
            }
            // Apply replacement
            const originalLine = lines[lineIndex];
            const modifiedLine = originalLine.replace(replacement.original, replacement.replacement);
            // Verify replacement was applied
            if (originalLine === modifiedLine) {
                return {
                    success: false,
                    appliedReplacements: [],
                    failedReplacements: [replacement],
                    compilationErrors: [`Pattern "${replacement.original}" not found in line: ${originalLine}`],
                    rollbackPerformed: false,
                    backupPath
                };
            }
            // Write modified content
            lines[lineIndex] = modifiedLine;
            const modifiedContent = lines.join('\n');
            fs.writeFileSync(replacement.filePath, modifiedContent, 'utf8');
            // Validate TypeScript compilation
            const compilationResult = await this.validateTypeScriptCompilation();
            if (!compilationResult.success) {
                // Rollback on compilation failure
                await this.rollbackFromBackup(replacement.filePath, backupPath);
                return {
                    success: false,
                    appliedReplacements: [],
                    failedReplacements: [replacement],
                    compilationErrors: compilationResult.errors,
                    rollbackPerformed: true,
                    backupPath
                };
            }
            return {
                success: true,
                appliedReplacements: [replacement],
                failedReplacements: [],
                compilationErrors: [],
                rollbackPerformed: false,
                backupPath
            };
        }
        catch (error) {
            // Don't rollback here - let the calling method handle it
            throw error;
        }
    }
    /**
     * Verify that rollback capability is working correctly
     */
    async verifyRollbackCapability(filePath, backupPath) {
        try {
            // Read backup content
            if (!fs.existsSync(backupPath)) {
                return { success: false, error: 'Backup file does not exist' };
            }
            const backupContent = fs.readFileSync(backupPath, 'utf8');
            // For testing purposes, we'll just verify the backup exists and is readable
            // In a real scenario, we might do a more comprehensive test
            if (backupContent.length === 0) {
                return { success: false, error: 'Backup file is empty' };
            }
            return { success: true };
        }
        catch (error) {
            return {
                success: false,
                error: error instanceof Error ? error.message : String(error)
            };
        }
    }
    /**
     * Calculate safety score for a replacement based on multiple factors
     */
    calculateSafetyScore(replacement) {
        let score = replacement.confidence; // Base score from classification confidence
        // Adjust based on replacement type
        if (replacement.replacement.includes('unknown')) {
            score += 0.1; // unknown is generally safer than any
        }
        // Adjust based on file type
        if (replacement.filePath.includes('.test.') || replacement.filePath.includes('__tests__')) {
            score += 0.05; // Test files are safer to modify
        }
        // Adjust based on replacement pattern complexity
        if (replacement.original === 'any[]') {
            score += 0.15; // Array replacements are very safe
        }
        else if (replacement.original.includes('Record<string, any>')) {
            score += 0.1; // Record replacements are generally safe
        }
        else if (replacement.original.includes('function') || replacement.original.includes('=>')) {
            score -= 0.1; // Function-related replacements are riskier
        }
        // Adjust based on line context (if available in the replacement)
        const lineContent = replacement.original;
        if (lineContent.includes('catch') || lineContent.includes('error')) {
            score -= 0.2; // Error handling contexts are riskier
        }
        if (lineContent.includes('interface') || lineContent.includes('type ')) {
            score += 0.05; // Type definitions are safer
        }
        // Ensure score stays within bounds
        return Math.max(0, Math.min(1, score));
    }
    /**
     * Get replacement strategies sorted by priority
     */
    getStrategies() {
        return [...this.strategies].sort((a, b) => a.priority - b.priority);
    }
    /**
     * Add a custom replacement strategy
     */
    addStrategy(strategy) {
        this.strategies.push(strategy);
        this.strategies.sort((a, b) => a.priority - b.priority);
    }
    /**
     * Get backup directory path
     */
    getBackupDirectory() {
        return this.backupDirectory;
    }
    /**
     * Clean up old backup files (older than specified days)
     */
    cleanupOldBackups(daysToKeep = 7) {
        try {
            const cutoffDate = new Date();
            cutoffDate.setDate(cutoffDate.getDate() - daysToKeep);
            const files = fs.readdirSync(this.backupDirectory);
            for (const file of files) {
                if (file.endsWith('.backup')) {
                    const filePath = path.join(this.backupDirectory, file);
                    const stats = fs.statSync(filePath);
                    if (stats.mtime < cutoffDate) {
                        fs.unlinkSync(filePath);
                    }
                }
            }
        }
        catch (error) {
            // Log error but don't throw - cleanup is not critical
            console.warn('Failed to cleanup old backups:', error);
        }
    }
    // Type Inference Helper Methods
    /**
     * Infer array element type from context
     */
    inferArrayElementType(context) {
        const { codeSnippet, surroundingLines } = context;
        // Look for array initialization patterns
        if (codeSnippet.includes('= [')) {
            // Check if array has string literals
            if (codeSnippet.includes("'") || codeSnippet.includes('"')) {
                return 'string';
            }
            // Check if array has numbers
            if (/=\s*\[\s*\d/.test(codeSnippet)) {
                return 'number';
            }
            // Check if array has boolean values
            if (codeSnippet.includes('true') || codeSnippet.includes('false')) {
                return 'boolean';
            }
        }
        // Look for push operations in surrounding lines
        const allContext = [codeSnippet, ...surroundingLines].join(' ');
        if (allContext.includes('.push(')) {
            if (allContext.includes('.push("') || allContext.includes(".push('")) {
                return 'string';
            }
            if (/\.push\(\d/.test(allContext)) {
                return 'number';
            }
        }
        // Domain-specific inference
        if (context.domainContext.domain === types_1.CodeDomain.ASTROLOGICAL) {
            if (codeSnippet.includes('planet') || codeSnippet.includes('sign')) {
                return 'string';
            }
            if (codeSnippet.includes('position') || codeSnippet.includes('degree')) {
                return 'number';
            }
        }
        if (context.domainContext.domain === types_1.CodeDomain.RECIPE) {
            if (codeSnippet.includes('ingredient') || codeSnippet.includes('recipe')) {
                return 'string';
            }
        }
        // Default to unknown for safety
        return 'unknown';
    }
    /**
     * Infer Record value type from context
     */
    inferRecordValueType(context) {
        const { codeSnippet, surroundingLines } = context;
        // Look for object literal assignments
        if (codeSnippet.includes('= {')) {
            // Check for string values
            if (codeSnippet.includes(': "') || codeSnippet.includes(": '")) {
                return 'string';
            }
            // Check for number values
            if (/:\s*\d/.test(codeSnippet)) {
                return 'number';
            }
            // Check for boolean values
            if (codeSnippet.includes(': true') || codeSnippet.includes(': false')) {
                return 'boolean';
            }
        }
        // Look for property access patterns in surrounding lines
        const allContext = [codeSnippet, ...surroundingLines].join(' ');
        // Check for string operations
        if (allContext.includes('.toString()') || allContext.includes('.toLowerCase()') || allContext.includes('.toUpperCase()')) {
            return 'string';
        }
        // Check for number operations
        if (allContext.includes('parseInt(') || allContext.includes('parseFloat(') || allContext.includes('Number(')) {
            return 'number';
        }
        // Domain-specific inference
        if (context.domainContext.domain === types_1.CodeDomain.ASTROLOGICAL) {
            if (codeSnippet.includes('element') || codeSnippet.includes('Element')) {
                return 'number'; // Elemental properties are numeric
            }
            if (codeSnippet.includes('config') || codeSnippet.includes('Config')) {
                return 'unknown'; // Config objects can be complex
            }
        }
        return 'unknown';
    }
    /**
     * Infer index signature value type from context
     */
    inferIndexSignatureValueType(context) {
        // Similar logic to Record value type inference
        return this.inferRecordValueType(context);
    }
    /**
     * Infer function parameter type from context and parameter name
     */
    inferFunctionParameterType(context, paramName) {
        const { codeSnippet, surroundingLines } = context;
        // Common parameter name patterns
        const paramLower = paramName.toLowerCase();
        // Event handlers
        if (paramLower.includes('event') || paramLower === 'e') {
            if (context.codeSnippet.includes('onClick') || context.codeSnippet.includes('onSubmit')) {
                return 'React.MouseEvent | React.FormEvent';
            }
            return 'Event';
        }
        // Error parameters
        if (paramLower.includes('error') || paramLower === 'err') {
            return 'Error';
        }
        // ID parameters
        if (paramLower.includes('id') || paramLower === 'key') {
            return 'string | number';
        }
        // Index parameters
        if (paramLower.includes('index') || paramLower === 'i') {
            return 'number';
        }
        // Data parameters
        if (paramLower.includes('data') || paramLower.includes('item') || paramLower.includes('element')) {
            // Try to infer from usage in function body
            const allContext = [codeSnippet, ...surroundingLines].join(' ');
            if (allContext.includes(`${paramName}.`)) {
                return 'object'; // If accessing properties, likely an object
            }
            return 'unknown';
        }
        // Domain-specific inference
        if (context.domainContext.domain === types_1.CodeDomain.ASTROLOGICAL) {
            if (paramLower.includes('planet') || paramLower.includes('sign')) {
                return 'string';
            }
            if (paramLower.includes('position') || paramLower.includes('degree')) {
                return 'number';
            }
            if (paramLower.includes('properties') || paramLower.includes('element')) {
                return 'ElementalProperties';
            }
        }
        if (context.domainContext.domain === types_1.CodeDomain.RECIPE) {
            if (paramLower.includes('ingredient')) {
                return 'Ingredient';
            }
            if (paramLower.includes('recipe')) {
                return 'Recipe';
            }
        }
        return 'unknown';
    }
    /**
     * Infer return type from function context
     */
    inferReturnType(context) {
        const { codeSnippet, surroundingLines } = context;
        // Look for return statements in surrounding lines
        const allContext = [codeSnippet, ...surroundingLines].join(' ');
        // Check for explicit return statements
        if (allContext.includes('return ')) {
            // String returns
            if (allContext.includes('return "') || allContext.includes("return '")) {
                return 'string';
            }
            // Number returns
            if (/return\s+\d/.test(allContext)) {
                return 'number';
            }
            // Boolean returns
            if (allContext.includes('return true') || allContext.includes('return false')) {
                return 'boolean';
            }
            // Array returns
            if (allContext.includes('return [')) {
                return 'unknown[]';
            }
            // Object returns
            if (allContext.includes('return {')) {
                return 'object';
            }
            // Promise returns
            if (allContext.includes('return Promise') || allContext.includes('return new Promise')) {
                return 'Promise<unknown>';
            }
        }
        // Check for async functions
        if (codeSnippet.includes('async ')) {
            return 'Promise<unknown>';
        }
        // Function name inference
        if (codeSnippet.includes('get') && codeSnippet.includes('(')) {
            return 'unknown'; // Getter functions return something
        }
        if (codeSnippet.includes('is') || codeSnippet.includes('has') || codeSnippet.includes('can')) {
            return 'boolean'; // Predicate functions
        }
        if (codeSnippet.includes('calculate') || codeSnippet.includes('count')) {
            return 'number'; // Calculation functions
        }
        return 'unknown';
    }
    /**
     * Infer generic type from context
     */
    inferGenericType(context) {
        const { codeSnippet } = context;
        // Check for common generic patterns
        if (codeSnippet.includes('Array<any>')) {
            return 'unknown';
        }
        if (codeSnippet.includes('Promise<any>')) {
            return 'unknown';
        }
        if (codeSnippet.includes('Map<') || codeSnippet.includes('Set<')) {
            return 'unknown';
        }
        // Domain-specific generics
        if (context.domainContext.domain === types_1.CodeDomain.ASTROLOGICAL) {
            if (codeSnippet.includes('PlanetaryPosition') || codeSnippet.includes('ElementalProperties')) {
                return 'unknown'; // Keep generic for flexibility
            }
        }
        return 'unknown';
    }
    /**
     * Infer object property type from context and property name
     */
    inferObjectPropertyType(context, propertyName) {
        const { codeSnippet, surroundingLines } = context;
        const propLower = propertyName.toLowerCase();
        // Common property patterns
        if (propLower.includes('id') || propLower === 'key') {
            return 'string | number';
        }
        if (propLower.includes('name') || propLower.includes('title') || propLower.includes('description')) {
            return 'string';
        }
        if (propLower.includes('count') || propLower.includes('length') || propLower.includes('size')) {
            return 'number';
        }
        if (propLower.includes('enabled') || propLower.includes('active') || propLower.includes('visible')) {
            return 'boolean';
        }
        if (propLower.includes('date') || propLower.includes('time')) {
            return 'Date | string';
        }
        // Look for assignment patterns
        const allContext = [codeSnippet, ...surroundingLines].join(' ');
        if (allContext.includes(`${propertyName}: "`)) {
            return 'string';
        }
        if (allContext.includes(`${propertyName}: \d`)) {
            return 'number';
        }
        // Domain-specific inference
        if (context.domainContext.domain === types_1.CodeDomain.ASTROLOGICAL) {
            if (propLower.includes('element') || propLower.includes('fire') || propLower.includes('water') ||
                propLower.includes('earth') || propLower.includes('air')) {
                return 'number';
            }
            if (propLower.includes('sign') || propLower.includes('planet')) {
                return 'string';
            }
        }
        return 'unknown';
    }
    /**
     * Infer variable type from context
     */
    inferVariableType(context) {
        const { codeSnippet } = context;
        // Look for assignment patterns
        if (codeSnippet.includes('= "') || codeSnippet.includes("= '")) {
            return 'string';
        }
        if (/=\s*\d/.test(codeSnippet)) {
            return 'number';
        }
        if (codeSnippet.includes('= true') || codeSnippet.includes('= false')) {
            return 'boolean';
        }
        if (codeSnippet.includes('= [')) {
            return 'unknown[]';
        }
        if (codeSnippet.includes('= {')) {
            return 'object';
        }
        if (codeSnippet.includes('= new ')) {
            // Try to extract constructor name
            const constructorMatch = codeSnippet.match(/= new (\w+)/);
            if (constructorMatch) {
                return constructorMatch[1];
            }
            return 'object';
        }
        return 'unknown';
    }
    // Context Validation Helper Methods
    /**
     * Check if context is in error handling (catch blocks, error parameters)
     */
    isInErrorHandlingContext(context) {
        const { codeSnippet, surroundingLines } = context;
        const allContext = [codeSnippet, ...surroundingLines].join(' ').toLowerCase();
        return allContext.includes('catch') ||
            allContext.includes('error') ||
            allContext.includes('exception') ||
            codeSnippet.toLowerCase().includes('err');
    }
    /**
     * Check if context is for external API responses
     */
    isExternalApiContext(context) {
        const { codeSnippet, surroundingLines } = context;
        const allContext = [codeSnippet, ...surroundingLines].join(' ').toLowerCase();
        return allContext.includes('api') ||
            allContext.includes('response') ||
            allContext.includes('fetch') ||
            allContext.includes('axios') ||
            allContext.includes('request');
    }
    /**
     * Check if context is for dynamic configuration
     */
    isDynamicConfigContext(context) {
        const { codeSnippet, surroundingLines } = context;
        const allContext = [codeSnippet, ...surroundingLines].join(' ').toLowerCase();
        return allContext.includes('config') ||
            allContext.includes('settings') ||
            allContext.includes('options') ||
            context.domainContext.domain === types_1.CodeDomain.CAMPAIGN ||
            context.domainContext.domain === types_1.CodeDomain.INTELLIGENCE;
    }
    /**
     * Check if context is for event handlers
     */
    isEventHandlerContext(context) {
        const { codeSnippet } = context;
        return codeSnippet.includes('onClick') ||
            codeSnippet.includes('onChange') ||
            codeSnippet.includes('onSubmit') ||
            codeSnippet.includes('addEventListener') ||
            codeSnippet.includes('handler');
    }
    /**
     * Check if context is a function parameter
     */
    isFunctionParameterContext(context) {
        const { codeSnippet } = context;
        return codeSnippet.includes('(') &&
            codeSnippet.includes(':') &&
            (codeSnippet.includes(')') || codeSnippet.includes(','));
    }
    /**
     * Check if context is a function return type
     */
    isFunctionReturnTypeContext(context) {
        const { codeSnippet } = context;
        return codeSnippet.includes('):') &&
            (codeSnippet.includes('{') || codeSnippet.includes(';'));
    }
    /**
     * Check if context is an object property
     */
    isObjectPropertyContext(context) {
        const { codeSnippet } = context;
        return codeSnippet.includes(':') &&
            (codeSnippet.includes(',') || codeSnippet.includes('}') || codeSnippet.includes(';'));
    }
    // Enhanced Safety Validation Methods
    /**
     * Perform comprehensive safety validation for a replacement
     */
    async validateReplacementSafety(replacement, context) {
        return this.safetyValidator.calculateSafetyScore(replacement, context);
    }
    /**
     * Validate build after applying replacements
     */
    async validateBuildSafety(modifiedFiles, includeTests = false) {
        return this.safetyValidator.validateBuildAfterBatch(modifiedFiles, includeTests);
    }
    /**
     * Validate rollback capability for given files
     */
    async validateRollbackSafety(originalFiles, backupFiles) {
        return this.safetyValidator.validateRollbackCapability(originalFiles, backupFiles);
    }
    /**
     * Get current safety validator instance
     */
    getSafetyValidator() {
        return this.safetyValidator;
    }
    /**
     * Update safety thresholds
     */
    updateSafetyThresholds(thresholds) {
        if (thresholds.minimumSafetyScore !== undefined) {
            this.safetyThreshold = thresholds.minimumSafetyScore;
            this.safetyValidator.updateSafetyThresholds({
                minimumSafetyScore: thresholds.minimumSafetyScore
            });
        }
    }
}
exports.SafeTypeReplacer = SafeTypeReplacer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9TYWZlVHlwZVJlcGxhY2VyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7O0dBU0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsdUNBQXlCO0FBQ3pCLDJDQUE2QjtBQUU3QixtQ0FPaUI7QUFFakIsTUFBYSxnQkFBZ0I7SUFDbkIsVUFBVSxDQUF3QjtJQUNsQyxlQUFlLENBQVM7SUFDeEIsZUFBZSxDQUFTO0lBQ3hCLGlCQUFpQixDQUFTO0lBQzFCLFVBQVUsQ0FBUztJQUNuQixlQUFlLENBQWtCO0lBRXpDLFlBQ0UsZUFBZSxHQUFHLDRCQUE0QixFQUM5QyxlQUFlLEdBQUcsR0FBRyxFQUNyQixpQkFBaUIsR0FBRyxLQUFLLEVBQ3pCLFVBQVUsR0FBRyxDQUFDO1FBRWQsSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7UUFDdkMsSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7UUFDdkMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO1FBQzNDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDOUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxpQkFBaUIsRUFBRTtZQUM1RCxrQkFBa0IsRUFBRSxlQUFlO1NBQ3BDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsZ0JBQWdCLENBQUMsV0FBNEIsRUFBRSxPQUErQjtRQUNsRixnREFBZ0Q7UUFDaEQsSUFBSSxnQkFBd0MsQ0FBQztRQUU3QyxJQUFJLE9BQU8sRUFBRTtZQUNYLGdCQUFnQixHQUFHLElBQUksQ0FB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QXVCLEVBQ3ZCLFlBQVksR0FBRyxLQUFLO1FBRXBCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyx1QkFBdUIsQ0FBQyxhQUFhLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLHNCQUFzQixDQUMxQixhQUFrQyxFQUNsQyxXQUFnQztRQUVoQyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsMEJBQTBCLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ3JGLENBQUM7SUFFRDs7T0FFRztJQUNILGtCQUFrQjtRQUNoQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDOUIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsc0JBQXNCLENBQUMsVUFBMkM7UUFDaEUsSUFBSSxVQUFVLENBQUMsa0JBQWtCLEtBQUssU0FBUyxFQUFFO1lBQy9DLElBQUksQ0FBQyxlQUFlLEdBQUcsVUFBVSxDQUFDLGtCQUFrQixDQUFDO1lBQ3JELElBQUksQ0FBQyxlQUFlLENBQUMsc0JBQXNCLENBQUM7Z0JBQzFDLGtCQUFrQixFQUFFLFVBQVUsQ0FBQyxrQkFBa0I7YUFDbEQsQ0FBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDO0NBQ0Y7QUFsb0NELDRDQWtvQ0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9TYWZlVHlwZVJlcGxhY2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2FmZSBUeXBlIFJlcGxhY2VyXG4gKiBQZXJmb3JtcyBzYWZlIHJlcGxhY2VtZW50cyBvZiB1bmludGVudGlvbmFsIGBhbnlgIHR5cGVzIHdpdGggbW9yZSBzcGVjaWZpYyB0eXBlc1xuICpcbiAqIENvcmUgRmVhdHVyZXM6XG4gKiAtIEF0b21pYyByZXBsYWNlbWVudCBvcGVyYXRpb25zIHdpdGggYXV0b21hdGljIHJvbGxiYWNrXG4gKiAtIFR5cGVTY3JpcHQgY29tcGlsYXRpb24gdmFsaWRhdGlvbiBhZnRlciBlYWNoIHJlcGxhY2VtZW50XG4gKiAtIENvbXByZWhlbnNpdmUgYmFja3VwIHN5c3RlbSBmb3IgYWxsIG1vZGlmaWVkIGZpbGVzXG4gKiAtIFNhZmV0eSBzY29yaW5nIHN5c3RlbSBmb3IgcmVwbGFjZW1lbnQgY29uZmlkZW5jZVxuICovXG5cbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCB7XG4gICAgQ2xhc3NpZmljYXRpb25Db250ZXh0LFxuICAgIENvZGVEb21haW4sXG4gICAgUmVwbGFjZW1lbnRSZXN1bHQsXG4gICAgUmVwbGFjZW1lbnRTdHJhdGVneSxcbiAgICBTYWZldHlQcm90b2NvbEVycm9yLFxuICAgIFR5cGVSZXBsYWNlbWVudFxufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFNhZmVUeXBlUmVwbGFjZXIge1xuICBwcml2YXRlIHN0cmF0ZWdpZXM6IFJlcGxhY2VtZW50U3RyYXRlZ3lbXTtcbiAgcHJpdmF0ZSBiYWNrdXBEaXJlY3Rvcnk6IHN0cmluZztcbiAgcHJpdmF0ZSBzYWZldHlUaHJlc2hvbGQ6IG51bWJlcjtcbiAgcHJpdmF0ZSB2YWxpZGF0aW9uVGltZW91dDogbnVtYmVyO1xuICBwcml2YXRlIG1heFJldHJpZXM6IG51bWJlcjtcbiAgcHJpdmF0ZSBzYWZldHlWYWxpZGF0b3I6IFNhZmV0eVZhbGlkYXRvcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBiYWNrdXBEaXJlY3RvcnkgPSAnLi8uYW55LWVsaW1pbmF0aW9uLWJhY2t1cHMnLFxuICAgIHNhZmV0eVRocmVzaG9sZCA9IDAuNyxcbiAgICB2YWxpZGF0aW9uVGltZW91dCA9IDMwMDAwLFxuICAgIG1heFJldHJpZXMgPSAzXG4gICkge1xuICAgIHRoaXMuYmFja3VwRGlyZWN0b3J5ID0gYmFja3VwRGlyZWN0b3J5O1xuICAgIHRoaXMuc2FmZXR5VGhyZXNob2xkID0gc2FmZXR5VGhyZXNob2xkO1xuICAgIHRoaXMudmFsaWRhdGlvblRpbWVvdXQgPSB2YWxpZGF0aW9uVGltZW91dDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSBtYXhSZXRyaWVzO1xuICAgIHRoaXMuc3RyYXRlZ2llcyA9IHRoaXMuaW5pdGlhbGl6ZVN0cmF0ZWdpZXMoKTtcbiAgICB0aGlzLnNhZmV0eVZhbGlkYXRvciA9IG5ldyBTYWZldHlWYWxpZGF0b3IodmFsaWRhdGlvblRpbWVvdXQsIHtcbiAgICAgIG1pbmltdW1TYWZldHlTY29yZTogc2FmZXR5VGhyZXNob2xkXG4gICAgfSk7XG4gICAgdGhpcy5lbnN1cmVCYWNrdXBEaXJlY3RvcnkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhIHNpbmdsZSB0eXBlIHJlcGxhY2VtZW50IHdpdGggY29tcHJlaGVuc2l2ZSBzYWZldHkgdmFsaWRhdGlvblxuICAgKiBJbXBsZW1lbnRzIGF0b21pYyBvcGVyYXRpb25zIHdpdGggYXV0b21hdGljIHJvbGxiYWNrIG9uIGFueSBmYWlsdXJlXG4gICAqL1xuICBhc3luYyBhcHBseVJlcGxhY2VtZW50KHJlcGxhY2VtZW50OiBUeXBlUmVwbGFjZW1lbnQsIGNvbnRleHQ/OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBQcm9taXNlPFJlcGxhY2VtZW50UmVzdWx0PiB7XG4gICAgLy8gRW5oYW5jZWQgcHJlLXZhbGlkYXRpb24gdXNpbmcgU2FmZXR5VmFsaWRhdG9yXG4gICAgbGV0IHNhZmV0eVZhbGlkYXRpb246IFNhZmV0eVZhbGlkYXRpb25SZXN1bHQ7XG5cbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc2FmZXR5VmFsaWRhdGlvbiA9IHRoaXMuc2FmZXR5VmFsaWRhdG9yLmNhbGN1bGF0ZVNhZmV0eVNjb3JlKHJlcGxhY2VtZW50LCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgc2FmZXR5IHNjb3JlIGNhbGN1bGF0aW9uXG4gICAgICBjb25zdCBiYXNpY1NhZmV0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVTYWZldHlTY29yZShyZXBsYWNlbWVudCk7XG4gICAgICBzYWZldHlWYWxpZGF0aW9uID0ge1xuICAgICAgICBpc1ZhbGlkOiBiYXNpY1NhZmV0eVNjb3JlID49IHRoaXMuc2FmZXR5VGhyZXNob2xkLFxuICAgICAgICBzYWZldHlTY29yZTogYmFzaWNTYWZldHlTY29yZSxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yczogYmFzaWNTYWZldHlTY29yZSA8IHRoaXMuc2FmZXR5VGhyZXNob2xkXG4gICAgICAgICAgPyBbYFNhZmV0eSBzY29yZSAke2Jhc2ljU2FmZXR5U2NvcmV9IGJlbG93IHRocmVzaG9sZCAke3RoaXMuc2FmZXR5VGhyZXNob2xkfWBdXG4gICAgICAgICAgOiBbXSxcbiAgICAgICAgd2FybmluZ3M6IFtdLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtdXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICghc2FmZXR5VmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgYXBwbGllZFJlcGxhY2VtZW50czogW10sXG4gICAgICAgIGZhaWxlZFJlcGxhY2VtZW50czogW3JlcGxhY2VtZW50XSxcbiAgICAgICAgY29tcGlsYXRpb25FcnJvcnM6IHNhZmV0eVZhbGlkYXRpb24udmFsaWRhdGlvbkVycm9ycyxcbiAgICAgICAgcm9sbGJhY2tQZXJmb3JtZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGJhY2t1cFBhdGggPSBhd2FpdCB0aGlzLmNyZWF0ZUJhY2t1cChyZXBsYWNlbWVudC5maWxlUGF0aCk7XG4gICAgbGV0IHJldHJ5Q291bnQgPSAwO1xuXG4gICAgd2hpbGUgKHJldHJ5Q291bnQgPCB0aGlzLm1heFJldHJpZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEF0b21pYyByZXBsYWNlbWVudCBvcGVyYXRpb25cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wZXJmb3JtQXRvbWljUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQsIGJhY2t1cFBhdGgpO1xuXG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIC8vIFZlcmlmeSByb2xsYmFjayBjYXBhYmlsaXR5IGJlZm9yZSBkZWNsYXJpbmcgc3VjY2Vzc1xuICAgICAgICAgIGNvbnN0IHJvbGxiYWNrVmVyaWZpY2F0aW9uID0gYXdhaXQgdGhpcy52ZXJpZnlSb2xsYmFja0NhcGFiaWxpdHkocmVwbGFjZW1lbnQuZmlsZVBhdGgsIGJhY2t1cFBhdGgpO1xuICAgICAgICAgIGlmICghcm9sbGJhY2tWZXJpZmljYXRpb24uc3VjY2Vzcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja0Zyb21CYWNrdXAocmVwbGFjZW1lbnQuZmlsZVBhdGgsIGJhY2t1cFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGFwcGxpZWRSZXBsYWNlbWVudHM6IFtdLFxuICAgICAgICAgICAgICBmYWlsZWRSZXBsYWNlbWVudHM6IFtyZXBsYWNlbWVudF0sXG4gICAgICAgICAgICAgIGNvbXBpbGF0aW9uRXJyb3JzOiBbYFJvbGxiYWNrIHZlcmlmaWNhdGlvbiBmYWlsZWQ6ICR7cm9sbGJhY2tWZXJpZmljYXRpb24uZXJyb3J9YF0sXG4gICAgICAgICAgICAgIHJvbGxiYWNrUGVyZm9ybWVkOiB0cnVlLFxuICAgICAgICAgICAgICBiYWNrdXBQYXRoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgcmVwbGFjZW1lbnQgZmFpbGVkIHdpdGggc3BlY2lmaWMgZXJyb3JzLCByZXR1cm4gaW1tZWRpYXRlbHkgKGRvbid0IHJldHJ5KVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0cnlDb3VudCsrO1xuICAgICAgICBpZiAocmV0cnlDb3VudCA+PSB0aGlzLm1heFJldHJpZXMpIHtcbiAgICAgICAgICAvLyBGaW5hbCByb2xsYmFjayBvbiBleGhhdXN0ZWQgcmV0cmllc1xuICAgICAgICAgIGF3YWl0IHRoaXMucm9sbGJhY2tGcm9tQmFja3VwKHJlcGxhY2VtZW50LmZpbGVQYXRoLCBiYWNrdXBQYXRoKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBhcHBsaWVkUmVwbGFjZW1lbnRzOiBbXSxcbiAgICAgICAgICAgIGZhaWxlZFJlcGxhY2VtZW50czogW3JlcGxhY2VtZW50XSxcbiAgICAgICAgICAgIGNvbXBpbGF0aW9uRXJyb3JzOiBbZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXSxcbiAgICAgICAgICAgIHJvbGxiYWNrUGVyZm9ybWVkOiB0cnVlLFxuICAgICAgICAgICAgYmFja3VwUGF0aFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXYWl0IGJyaWVmbHkgYmVmb3JlIHJldHJ5XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAgKiByZXRyeUNvdW50KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2hvdWxkIG5vdCByZWFjaCBoZXJlLCBidXQgaGFuZGxlIGVkZ2UgY2FzZVxuICAgIGF3YWl0IHRoaXMucm9sbGJhY2tGcm9tQmFja3VwKHJlcGxhY2VtZW50LmZpbGVQYXRoLCBiYWNrdXBQYXRoKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBhcHBsaWVkUmVwbGFjZW1lbnRzOiBbXSxcbiAgICAgIGZhaWxlZFJlcGxhY2VtZW50czogW3JlcGxhY2VtZW50XSxcbiAgICAgIGNvbXBpbGF0aW9uRXJyb3JzOiBbJ01heGltdW0gcmV0cmllcyBleGNlZWRlZCddLFxuICAgICAgcm9sbGJhY2tQZXJmb3JtZWQ6IHRydWUsXG4gICAgICBiYWNrdXBQYXRoXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIG11bHRpcGxlIHJlcGxhY2VtZW50cyBpbiBiYXRjaCB3aXRoIGF0b21pYyBvcGVyYXRpb25zXG4gICAqL1xuICBhc3luYyBwcm9jZXNzQmF0Y2gocmVwbGFjZW1lbnRzOiBUeXBlUmVwbGFjZW1lbnRbXSk6IFByb21pc2U8UmVwbGFjZW1lbnRSZXN1bHQ+IHtcbiAgICBjb25zdCBiYWNrdXBQYXRoczogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBhcHBsaWVkUmVwbGFjZW1lbnRzOiBUeXBlUmVwbGFjZW1lbnRbXSA9IFtdO1xuICAgIGNvbnN0IGZhaWxlZFJlcGxhY2VtZW50czogVHlwZVJlcGxhY2VtZW50W10gPSBbXTtcbiAgICBjb25zdCBjb21waWxhdGlvbkVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYmFja3VwcyBmb3IgYWxsIGZpbGVzXG4gICAgICBmb3IgKGNvbnN0IHJlcGxhY2VtZW50IG9mIHJlcGxhY2VtZW50cykge1xuICAgICAgICBpZiAoIWJhY2t1cFBhdGhzLmhhcyhyZXBsYWNlbWVudC5maWxlUGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBiYWNrdXBQYXRoID0gYXdhaXQgdGhpcy5jcmVhdGVCYWNrdXAocmVwbGFjZW1lbnQuZmlsZVBhdGgpO1xuICAgICAgICAgIGJhY2t1cFBhdGhzLnNldChyZXBsYWNlbWVudC5maWxlUGF0aCwgYmFja3VwUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR3JvdXAgcmVwbGFjZW1lbnRzIGJ5IGZpbGUgZm9yIGVmZmljaWVudCBwcm9jZXNzaW5nXG4gICAgICBjb25zdCByZXBsYWNlbWVudHNCeUZpbGUgPSB0aGlzLmdyb3VwUmVwbGFjZW1lbnRzQnlGaWxlKHJlcGxhY2VtZW50cyk7XG5cbiAgICAgIC8vIEFwcGx5IHJlcGxhY2VtZW50cyBmaWxlIGJ5IGZpbGVcbiAgICAgIGZvciAoY29uc3QgW2ZpbGVQYXRoLCBmaWxlUmVwbGFjZW1lbnRzXSBvZiBBcnJheS5mcm9tKHJlcGxhY2VtZW50c0J5RmlsZS5lbnRyaWVzKCkpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hcHBseVJlcGxhY2VtZW50c1RvRmlsZShmaWxlUGF0aCwgZmlsZVJlcGxhY2VtZW50cyk7XG4gICAgICAgICAgYXBwbGllZFJlcGxhY2VtZW50cy5wdXNoKC4uLnJlc3VsdC5hcHBsaWVkKTtcbiAgICAgICAgICBmYWlsZWRSZXBsYWNlbWVudHMucHVzaCguLi5yZXN1bHQuZmFpbGVkKTtcblxuICAgICAgICAgIGlmIChyZXN1bHQuZmFpbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbXBpbGF0aW9uRXJyb3JzLnB1c2goLi4ucmVzdWx0LmVycm9ycyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGZhaWxlZFJlcGxhY2VtZW50cy5wdXNoKC4uLmZpbGVSZXBsYWNlbWVudHMpO1xuICAgICAgICAgIGNvbXBpbGF0aW9uRXJyb3JzLnB1c2goZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFbmhhbmNlZCBidWlsZCB2YWxpZGF0aW9uIGFmdGVyIGJhdGNoIG9wZXJhdGlvbnNcbiAgICAgIGNvbnN0IG1vZGlmaWVkRmlsZXMgPSBBcnJheS5mcm9tKGJhY2t1cFBhdGhzLmtleXMoKSk7XG4gICAgICBjb25zdCBidWlsZFZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnNhZmV0eVZhbGlkYXRvci52YWxpZGF0ZUJ1aWxkQWZ0ZXJCYXRjaChtb2RpZmllZEZpbGVzLCBmYWxzZSk7XG5cbiAgICAgIGlmICghYnVpbGRWYWxpZGF0aW9uLmJ1aWxkU3VjY2Vzc2Z1bCkge1xuICAgICAgICAvLyBSb2xsYmFjayBhbGwgY2hhbmdlc1xuICAgICAgICBhd2FpdCB0aGlzLnJvbGxiYWNrQWxsRmlsZXMoYmFja3VwUGF0aHMpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgYXBwbGllZFJlcGxhY2VtZW50czogW10sXG4gICAgICAgICAgZmFpbGVkUmVwbGFjZW1lbnRzOiByZXBsYWNlbWVudHMsXG4gICAgICAgICAgY29tcGlsYXRpb25FcnJvcnM6IGJ1aWxkVmFsaWRhdGlvbi5jb21waWxhdGlvbkVycm9ycyxcbiAgICAgICAgICByb2xsYmFja1BlcmZvcm1lZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSByb2xsYmFjayBjYXBhYmlsaXR5XG4gICAgICBjb25zdCByb2xsYmFja1ZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnNhZmV0eVZhbGlkYXRvci52YWxpZGF0ZVJvbGxiYWNrQ2FwYWJpbGl0eShcbiAgICAgICAgbmV3IE1hcChtb2RpZmllZEZpbGVzLm1hcChmaWxlID0+IFtmaWxlLCBmaWxlXSkpLFxuICAgICAgICBiYWNrdXBQYXRoc1xuICAgICAgKTtcblxuICAgICAgaWYgKCFyb2xsYmFja1ZhbGlkYXRpb24uY2FuUm9sbGJhY2spIHtcbiAgICAgICAgY29tcGlsYXRpb25FcnJvcnMucHVzaCguLi5yb2xsYmFja1ZhbGlkYXRpb24ucm9sbGJhY2tFcnJvcnMpO1xuICAgICAgICBjb21waWxhdGlvbkVycm9ycy5wdXNoKCdXYXJuaW5nOiBSb2xsYmFjayBjYXBhYmlsaXR5IGNvbXByb21pc2VkJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBmYWlsZWRSZXBsYWNlbWVudHMubGVuZ3RoID09PSAwO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgYXBwbGllZFJlcGxhY2VtZW50cyxcbiAgICAgICAgZmFpbGVkUmVwbGFjZW1lbnRzLFxuICAgICAgICBjb21waWxhdGlvbkVycm9ycyxcbiAgICAgICAgcm9sbGJhY2tQZXJmb3JtZWQ6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEVtZXJnZW5jeSByb2xsYmFja1xuICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja0FsbEZpbGVzKGJhY2t1cFBhdGhzKTtcblxuICAgICAgdGhyb3cgbmV3IFNhZmV0eVByb3RvY29sRXJyb3IoXG4gICAgICAgICdCYXRjaCByZXBsYWNlbWVudCBmYWlsZWQgd2l0aCBlbWVyZ2VuY3kgcm9sbGJhY2snLFxuICAgICAgICBBcnJheS5mcm9tKGJhY2t1cFBhdGhzLnZhbHVlcygpKVswXSB8fCAnJyxcbiAgICAgICAgQXJyYXkuZnJvbShiYWNrdXBQYXRocy5rZXlzKCkpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVN0cmF0ZWdpZXMoKTogUmVwbGFjZW1lbnRTdHJhdGVneVtdIHtcbiAgICByZXR1cm4gW1xuICAgICAgLy8gQXJyYXkgdHlwZSByZXBsYWNlbWVudCBzdHJhdGVneSAoYW55W10g4oaSIHVua25vd25bXSlcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogLzpcXHMqYW55XFxbXFxdL2csXG4gICAgICAgIHJlcGxhY2VtZW50OiAobWF0Y2g6IHN0cmluZywgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgY2FuIGluZmVyIGEgbW9yZSBzcGVjaWZpYyBhcnJheSB0eXBlXG4gICAgICAgICAgY29uc3QgaW5mZXJyZWRUeXBlID0gdGhpcy5pbmZlckFycmF5RWxlbWVudFR5cGUoY29udGV4dCk7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoLnJlcGxhY2UoJ2FueVtdJywgYCR7aW5mZXJyZWRUeXBlfVtdYCk7XG4gICAgICAgIH0sXG4gICAgICAgIHZhbGlkYXRvcjogKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCkgPT5cbiAgICAgICAgICBjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdhbnlbXScpICYmXG4gICAgICAgICAgIXRoaXMuaXNJbkVycm9ySGFuZGxpbmdDb250ZXh0KGNvbnRleHQpLFxuICAgICAgICBwcmlvcml0eTogMVxuICAgICAgfSxcblxuICAgICAgLy8gUmVjb3JkIHR5cGUgcmVwbGFjZW1lbnQgd2l0aCB2YWxpZGF0aW9uIChSZWNvcmQ8c3RyaW5nLCBhbnk+IOKGkiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogLzpcXHMqUmVjb3JkPFxccypzdHJpbmdcXHMqLFxccyphbnlcXHMqPi9nLFxuICAgICAgICByZXBsYWNlbWVudDogKG1hdGNoOiBzdHJpbmcsIGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGNhbiBpbmZlciBhIG1vcmUgc3BlY2lmaWMgdmFsdWUgdHlwZVxuICAgICAgICAgIGNvbnN0IGluZmVycmVkVmFsdWVUeXBlID0gdGhpcy5pbmZlclJlY29yZFZhbHVlVHlwZShjb250ZXh0KTtcbiAgICAgICAgICByZXR1cm4gbWF0Y2gucmVwbGFjZSgvUmVjb3JkPFxccypzdHJpbmdcXHMqLFxccyphbnlcXHMqPi8sIGBSZWNvcmQ8c3RyaW5nLCAke2luZmVycmVkVmFsdWVUeXBlfT5gKTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PlxuICAgICAgICAgIGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ1JlY29yZDxzdHJpbmcsIGFueT4nKSAmJlxuICAgICAgICAgICF0aGlzLmlzSW5FcnJvckhhbmRsaW5nQ29udGV4dChjb250ZXh0KSAmJlxuICAgICAgICAgICF0aGlzLmlzRHluYW1pY0NvbmZpZ0NvbnRleHQoY29udGV4dCksXG4gICAgICAgIHByaW9yaXR5OiAyXG4gICAgICB9LFxuXG4gICAgICAvLyBHZW5lcmljIFJlY29yZCByZXBsYWNlbWVudCAoUmVjb3JkPG51bWJlciwgYW55PiDihpIgUmVjb3JkPG51bWJlciwgdW5rbm93bj4pXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC86XFxzKlJlY29yZDxcXHMqbnVtYmVyXFxzKixcXHMqYW55XFxzKj4vZyxcbiAgICAgICAgcmVwbGFjZW1lbnQ6IChtYXRjaDogc3RyaW5nLCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmZlcnJlZFZhbHVlVHlwZSA9IHRoaXMuaW5mZXJSZWNvcmRWYWx1ZVR5cGUoY29udGV4dCk7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoLnJlcGxhY2UoL1JlY29yZDxcXHMqbnVtYmVyXFxzKixcXHMqYW55XFxzKj4vLCBgUmVjb3JkPG51bWJlciwgJHtpbmZlcnJlZFZhbHVlVHlwZX0+YCk7XG4gICAgICAgIH0sXG4gICAgICAgIHZhbGlkYXRvcjogKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCkgPT5cbiAgICAgICAgICBjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdSZWNvcmQ8bnVtYmVyLCBhbnk+JykgJiZcbiAgICAgICAgICAhdGhpcy5pc0luRXJyb3JIYW5kbGluZ0NvbnRleHQoY29udGV4dCksXG4gICAgICAgIHByaW9yaXR5OiAyXG4gICAgICB9LFxuXG4gICAgICAvLyBJbmRleCBzaWduYXR1cmUgcmVwbGFjZW1lbnQgKFtrZXk6IHN0cmluZ106IGFueSDihpIgW2tleTogc3RyaW5nXTogdW5rbm93bilcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL1xcW2tleTpcXHMqc3RyaW5nXFxdXFxzKjpcXHMqYW55L2csXG4gICAgICAgIHJlcGxhY2VtZW50OiAobWF0Y2g6IHN0cmluZywgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgaW5mZXJyZWRWYWx1ZVR5cGUgPSB0aGlzLmluZmVySW5kZXhTaWduYXR1cmVWYWx1ZVR5cGUoY29udGV4dCk7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoLnJlcGxhY2UoJ2FueScsIGluZmVycmVkVmFsdWVUeXBlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PlxuICAgICAgICAgIGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ1trZXk6IHN0cmluZ106IGFueScpICYmXG4gICAgICAgICAgIXRoaXMuaXNJbkVycm9ySGFuZGxpbmdDb250ZXh0KGNvbnRleHQpLFxuICAgICAgICBwcmlvcml0eTogM1xuICAgICAgfSxcblxuICAgICAgLy8gRnVuY3Rpb24gcGFyYW1ldGVyIGFuYWx5c2lzIGFuZCByZXBsYWNlbWVudFxuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvXFwoXFxzKihbXjopXSspOlxccyphbnlcXHMqXFwpL2csXG4gICAgICAgIHJlcGxhY2VtZW50OiAobWF0Y2g6IHN0cmluZywgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgcGFyYW1OYW1lID0gbWF0Y2gubWF0Y2goL1xcKFxccyooW146KV0rKTovKT8uWzFdPy50cmltKCk7XG4gICAgICAgICAgaWYgKHBhcmFtTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgaW5mZXJyZWRUeXBlID0gdGhpcy5pbmZlckZ1bmN0aW9uUGFyYW1ldGVyVHlwZShjb250ZXh0LCBwYXJhbU5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoLnJlcGxhY2UoJ2FueScsIGluZmVycmVkVHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKCdhbnknLCAndW5rbm93bicpO1xuICAgICAgICB9LFxuICAgICAgICB2YWxpZGF0b3I6IChjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpID0+XG4gICAgICAgICAgdGhpcy5pc0Z1bmN0aW9uUGFyYW1ldGVyQ29udGV4dChjb250ZXh0KSAmJlxuICAgICAgICAgICF0aGlzLmlzSW5FcnJvckhhbmRsaW5nQ29udGV4dChjb250ZXh0KSAmJlxuICAgICAgICAgICF0aGlzLmlzRXZlbnRIYW5kbGVyQ29udGV4dChjb250ZXh0KSxcbiAgICAgICAgcHJpb3JpdHk6IDRcbiAgICAgIH0sXG5cbiAgICAgIC8vIEZ1bmN0aW9uIHBhcmFtZXRlciBpbiBhcnJvdyBmdW5jdGlvbnNcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL1xcKFxccyooW146KV0rKTpcXHMqYW55XFxzKlxcKVxccyo9Pi9nLFxuICAgICAgICByZXBsYWNlbWVudDogKG1hdGNoOiBzdHJpbmcsIGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHBhcmFtTmFtZSA9IG1hdGNoLm1hdGNoKC9cXChcXHMqKFteOildKyk6Lyk/LlsxXT8udHJpbSgpO1xuICAgICAgICAgIGlmIChwYXJhbU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZmVycmVkVHlwZSA9IHRoaXMuaW5mZXJGdW5jdGlvblBhcmFtZXRlclR5cGUoY29udGV4dCwgcGFyYW1OYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKCdhbnknLCBpbmZlcnJlZFR5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbWF0Y2gucmVwbGFjZSgnYW55JywgJ3Vua25vd24nKTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PlxuICAgICAgICAgIGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJz0+JykgJiZcbiAgICAgICAgICAhdGhpcy5pc0luRXJyb3JIYW5kbGluZ0NvbnRleHQoY29udGV4dCksXG4gICAgICAgIHByaW9yaXR5OiA0XG4gICAgICB9LFxuXG4gICAgICAvLyBSZXR1cm4gdHlwZSBpbmZlcmVuY2UgYW5kIHJlcGxhY2VtZW50XG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9cXCk6XFxzKmFueSg/PVxccypbeztdKS9nLFxuICAgICAgICByZXBsYWNlbWVudDogKG1hdGNoOiBzdHJpbmcsIGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGluZmVycmVkUmV0dXJuVHlwZSA9IHRoaXMuaW5mZXJSZXR1cm5UeXBlKGNvbnRleHQpO1xuICAgICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKCdhbnknLCBpbmZlcnJlZFJldHVyblR5cGUpO1xuICAgICAgICB9LFxuICAgICAgICB2YWxpZGF0b3I6IChjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpID0+XG4gICAgICAgICAgdGhpcy5pc0Z1bmN0aW9uUmV0dXJuVHlwZUNvbnRleHQoY29udGV4dCkgJiZcbiAgICAgICAgICAhdGhpcy5pc0luRXJyb3JIYW5kbGluZ0NvbnRleHQoY29udGV4dCkgJiZcbiAgICAgICAgICAhdGhpcy5pc0V4dGVybmFsQXBpQ29udGV4dChjb250ZXh0KSxcbiAgICAgICAgcHJpb3JpdHk6IDVcbiAgICAgIH0sXG5cbiAgICAgIC8vIEdlbmVyaWMgdHlwZSBwYXJhbWV0ZXIgcmVwbGFjZW1lbnRcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogLzxcXHMqYW55XFxzKj4vZyxcbiAgICAgICAgcmVwbGFjZW1lbnQ6IChtYXRjaDogc3RyaW5nLCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmZlcnJlZEdlbmVyaWNUeXBlID0gdGhpcy5pbmZlckdlbmVyaWNUeXBlKGNvbnRleHQpO1xuICAgICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKCdhbnknLCBpbmZlcnJlZEdlbmVyaWNUeXBlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PlxuICAgICAgICAgIGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJzxhbnk+JykgJiZcbiAgICAgICAgICAhdGhpcy5pc0luRXJyb3JIYW5kbGluZ0NvbnRleHQoY29udGV4dCksXG4gICAgICAgIHByaW9yaXR5OiA2XG4gICAgICB9LFxuXG4gICAgICAvLyBPYmplY3QgcHJvcGVydHkgdHlwZSByZXBsYWNlbWVudFxuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvKFxcdyspOlxccyphbnkoPz1cXHMqWyw7fV0pL2csXG4gICAgICAgIHJlcGxhY2VtZW50OiAobWF0Y2g6IHN0cmluZywgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgcHJvcGVydHlOYW1lID0gbWF0Y2gubWF0Y2goLyhcXHcrKTovKT8uWzFdO1xuICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZmVycmVkVHlwZSA9IHRoaXMuaW5mZXJPYmplY3RQcm9wZXJ0eVR5cGUoY29udGV4dCwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKCdhbnknLCBpbmZlcnJlZFR5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbWF0Y2gucmVwbGFjZSgnYW55JywgJ3Vua25vd24nKTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PlxuICAgICAgICAgIHRoaXMuaXNPYmplY3RQcm9wZXJ0eUNvbnRleHQoY29udGV4dCkgJiZcbiAgICAgICAgICAhdGhpcy5pc0luRXJyb3JIYW5kbGluZ0NvbnRleHQoY29udGV4dCksXG4gICAgICAgIHByaW9yaXR5OiA3XG4gICAgICB9LFxuXG4gICAgICAvLyBTaW1wbGUgdmFyaWFibGUgdHlwZSByZXBsYWNlbWVudCAoZmFsbGJhY2spXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC86XFxzKmFueSg/PVxccypbPTssXFwpXSkvZyxcbiAgICAgICAgcmVwbGFjZW1lbnQ6IChtYXRjaDogc3RyaW5nLCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpID0+IHtcbiAgICAgICAgICAvLyBUcnkgdG8gaW5mZXIgZnJvbSBhc3NpZ25tZW50IG9yIHVzYWdlXG4gICAgICAgICAgY29uc3QgaW5mZXJyZWRUeXBlID0gdGhpcy5pbmZlclZhcmlhYmxlVHlwZShjb250ZXh0KTtcbiAgICAgICAgICByZXR1cm4gbWF0Y2gucmVwbGFjZSgnYW55JywgaW5mZXJyZWRUeXBlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PlxuICAgICAgICAgICF0aGlzLmlzSW5FcnJvckhhbmRsaW5nQ29udGV4dChjb250ZXh0KSAmJlxuICAgICAgICAgICF0aGlzLmlzRXh0ZXJuYWxBcGlDb250ZXh0KGNvbnRleHQpICYmXG4gICAgICAgICAgIXRoaXMuaXNEeW5hbWljQ29uZmlnQ29udGV4dChjb250ZXh0KSxcbiAgICAgICAgcHJpb3JpdHk6IDhcbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVCYWNrdXAoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpO1xuICAgIGNvbnN0IGJhY2t1cEZpbGVOYW1lID0gYCR7ZmlsZU5hbWV9LiR7dGltZXN0YW1wfS5iYWNrdXBgO1xuICAgIGNvbnN0IGJhY2t1cFBhdGggPSBwYXRoLmpvaW4odGhpcy5iYWNrdXBEaXJlY3RvcnksIGJhY2t1cEZpbGVOYW1lKTtcblxuICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0ZjgnKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKGJhY2t1cFBhdGgsIG9yaWdpbmFsQ29udGVudCwgJ3V0ZjgnKTtcblxuICAgIHJldHVybiBiYWNrdXBQYXRoO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByb2xsYmFja0Zyb21CYWNrdXAoZmlsZVBhdGg6IHN0cmluZywgYmFja3VwUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoYmFja3VwUGF0aCkpIHtcbiAgICAgIGNvbnN0IGJhY2t1cENvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoYmFja3VwUGF0aCwgJ3V0ZjgnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQsICd1dGY4Jyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByb2xsYmFja0FsbEZpbGVzKGJhY2t1cFBhdGhzOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZm9yIChjb25zdCBbZmlsZVBhdGgsIGJhY2t1cFBhdGhdIG9mIEFycmF5LmZyb20oYmFja3VwUGF0aHMuZW50cmllcygpKSkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja0Zyb21CYWNrdXAoZmlsZVBhdGgsIGJhY2t1cFBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ3JvdXBSZXBsYWNlbWVudHNCeUZpbGUocmVwbGFjZW1lbnRzOiBUeXBlUmVwbGFjZW1lbnRbXSk6IE1hcDxzdHJpbmcsIFR5cGVSZXBsYWNlbWVudFtdPiB7XG4gICAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBUeXBlUmVwbGFjZW1lbnRbXT4oKTtcblxuICAgIGZvciAoY29uc3QgcmVwbGFjZW1lbnQgb2YgcmVwbGFjZW1lbnRzKSB7XG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKHJlcGxhY2VtZW50LmZpbGVQYXRoKSkge1xuICAgICAgICBncm91cGVkLnNldChyZXBsYWNlbWVudC5maWxlUGF0aCwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBlZC5nZXQocmVwbGFjZW1lbnQuZmlsZVBhdGgpIS5wdXNoKHJlcGxhY2VtZW50KTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IHJlcGxhY2VtZW50cyB3aXRoaW4gZWFjaCBmaWxlIGJ5IGxpbmUgbnVtYmVyIChkZXNjZW5kaW5nIHRvIGF2b2lkIGxpbmUgbnVtYmVyIHNoaWZ0cylcbiAgICBmb3IgKGNvbnN0IGZpbGVSZXBsYWNlbWVudHMgb2YgZ3JvdXBlZC52YWx1ZXMoKSkge1xuICAgICAgZmlsZVJlcGxhY2VtZW50cy5zb3J0KChhLCBiKSA9PiBiLmxpbmVOdW1iZXIgLSBhLmxpbmVOdW1iZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBncm91cGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhcHBseVJlcGxhY2VtZW50c1RvRmlsZShcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIHJlcGxhY2VtZW50czogVHlwZVJlcGxhY2VtZW50W11cbiAgKTogUHJvbWlzZTx7IGFwcGxpZWQ6IFR5cGVSZXBsYWNlbWVudFtdLCBmYWlsZWQ6IFR5cGVSZXBsYWNlbWVudFtdLCBlcnJvcnM6IHN0cmluZ1tdIH0+IHtcbiAgICBjb25zdCBhcHBsaWVkOiBUeXBlUmVwbGFjZW1lbnRbXSA9IFtdO1xuICAgIGNvbnN0IGZhaWxlZDogVHlwZVJlcGxhY2VtZW50W10gPSBbXTtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgbGV0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4Jyk7XG4gICAgICBsZXQgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblxuICAgICAgZm9yIChjb25zdCByZXBsYWNlbWVudCBvZiByZXBsYWNlbWVudHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBsaW5lSW5kZXggPSByZXBsYWNlbWVudC5saW5lTnVtYmVyIC0gMTtcbiAgICAgICAgICBpZiAobGluZUluZGV4IDwgMCB8fCBsaW5lSW5kZXggPj0gbGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmYWlsZWQucHVzaChyZXBsYWNlbWVudCk7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChgSW52YWxpZCBsaW5lIG51bWJlciAke3JlcGxhY2VtZW50LmxpbmVOdW1iZXJ9IGZvciBmaWxlICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExpbmUgPSBsaW5lc1tsaW5lSW5kZXhdO1xuICAgICAgICAgIGNvbnN0IG1vZGlmaWVkTGluZSA9IG9yaWdpbmFsTGluZS5yZXBsYWNlKHJlcGxhY2VtZW50Lm9yaWdpbmFsLCByZXBsYWNlbWVudC5yZXBsYWNlbWVudCk7XG5cbiAgICAgICAgICBpZiAob3JpZ2luYWxMaW5lID09PSBtb2RpZmllZExpbmUpIHtcbiAgICAgICAgICAgIGZhaWxlZC5wdXNoKHJlcGxhY2VtZW50KTtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBQYXR0ZXJuIFwiJHtyZXBsYWNlbWVudC5vcmlnaW5hbH1cIiBub3QgZm91bmQgaW4gbGluZTogJHtvcmlnaW5hbExpbmV9YCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaW5lc1tsaW5lSW5kZXhdID0gbW9kaWZpZWRMaW5lO1xuICAgICAgICAgIGFwcGxpZWQucHVzaChyZXBsYWNlbWVudCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBmYWlsZWQucHVzaChyZXBsYWNlbWVudCk7XG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXcml0ZSB0aGUgbW9kaWZpZWQgY29udGVudCBiYWNrIHRvIGZpbGVcbiAgICAgIGNvbnN0IG1vZGlmaWVkQ29udGVudCA9IGxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgbW9kaWZpZWRDb250ZW50LCAndXRmOCcpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElmIGZpbGUtbGV2ZWwgb3BlcmF0aW9uIGZhaWxzLCBtYXJrIGFsbCByZXBsYWNlbWVudHMgYXMgZmFpbGVkXG4gICAgICBmYWlsZWQucHVzaCguLi5yZXBsYWNlbWVudHMpO1xuICAgICAgZXJyb3JzLnB1c2goZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBhcHBsaWVkLCBmYWlsZWQsIGVycm9ycyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZVR5cGVTY3JpcHRDb21waWxhdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbiwgZXJyb3JzOiBzdHJpbmdbXSB9PiB7XG4gICAgY29uc3QgYnVpbGRSZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmV0eVZhbGlkYXRvci52YWxpZGF0ZVR5cGVTY3JpcHRDb21waWxhdGlvbigpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBidWlsZFJlc3VsdC5idWlsZFN1Y2Nlc3NmdWwsXG4gICAgICBlcnJvcnM6IGJ1aWxkUmVzdWx0LmNvbXBpbGF0aW9uRXJyb3JzXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZW5zdXJlQmFja3VwRGlyZWN0b3J5KCk6IHZvaWQge1xuICAgIGlmICghZnMuZXhpc3RzU3luYyh0aGlzLmJhY2t1cERpcmVjdG9yeSkpIHtcbiAgICAgIGZzLm1rZGlyU3luYyh0aGlzLmJhY2t1cERpcmVjdG9yeSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYXRvbWljIHJlcGxhY2VtZW50IG9wZXJhdGlvbiB3aXRoIGNvbXByZWhlbnNpdmUgdmFsaWRhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtQXRvbWljUmVwbGFjZW1lbnQoXG4gICAgcmVwbGFjZW1lbnQ6IFR5cGVSZXBsYWNlbWVudCxcbiAgICBiYWNrdXBQYXRoOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxSZXBsYWNlbWVudFJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBSZWFkIG9yaWdpbmFsIGZpbGUgY29udGVudFxuICAgICAgY29uc3Qgb3JpZ2luYWxDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHJlcGxhY2VtZW50LmZpbGVQYXRoLCAndXRmOCcpO1xuICAgICAgY29uc3QgbGluZXMgPSBvcmlnaW5hbENvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBsaW5lIG51bWJlclxuICAgICAgY29uc3QgbGluZUluZGV4ID0gcmVwbGFjZW1lbnQubGluZU51bWJlciAtIDE7XG4gICAgICBpZiAobGluZUluZGV4IDwgMCB8fCBsaW5lSW5kZXggPj0gbGluZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgYXBwbGllZFJlcGxhY2VtZW50czogW10sXG4gICAgICAgICAgZmFpbGVkUmVwbGFjZW1lbnRzOiBbcmVwbGFjZW1lbnRdLFxuICAgICAgICAgIGNvbXBpbGF0aW9uRXJyb3JzOiBbYEludmFsaWQgbGluZSBudW1iZXIgJHtyZXBsYWNlbWVudC5saW5lTnVtYmVyfSBmb3IgZmlsZSAke3JlcGxhY2VtZW50LmZpbGVQYXRofWBdLFxuICAgICAgICAgIHJvbGxiYWNrUGVyZm9ybWVkOiBmYWxzZSxcbiAgICAgICAgICBiYWNrdXBQYXRoXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IHJlcGxhY2VtZW50XG4gICAgICBjb25zdCBvcmlnaW5hbExpbmUgPSBsaW5lc1tsaW5lSW5kZXhdO1xuICAgICAgY29uc3QgbW9kaWZpZWRMaW5lID0gb3JpZ2luYWxMaW5lLnJlcGxhY2UocmVwbGFjZW1lbnQub3JpZ2luYWwsIHJlcGxhY2VtZW50LnJlcGxhY2VtZW50KTtcblxuICAgICAgLy8gVmVyaWZ5IHJlcGxhY2VtZW50IHdhcyBhcHBsaWVkXG4gICAgICBpZiAob3JpZ2luYWxMaW5lID09PSBtb2RpZmllZExpbmUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBhcHBsaWVkUmVwbGFjZW1lbnRzOiBbXSxcbiAgICAgICAgICBmYWlsZWRSZXBsYWNlbWVudHM6IFtyZXBsYWNlbWVudF0sXG4gICAgICAgICAgY29tcGlsYXRpb25FcnJvcnM6IFtgUGF0dGVybiBcIiR7cmVwbGFjZW1lbnQub3JpZ2luYWx9XCIgbm90IGZvdW5kIGluIGxpbmU6ICR7b3JpZ2luYWxMaW5lfWBdLFxuICAgICAgICAgIHJvbGxiYWNrUGVyZm9ybWVkOiBmYWxzZSxcbiAgICAgICAgICBiYWNrdXBQYXRoXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFdyaXRlIG1vZGlmaWVkIGNvbnRlbnRcbiAgICAgIGxpbmVzW2xpbmVJbmRleF0gPSBtb2RpZmllZExpbmU7XG4gICAgICBjb25zdCBtb2RpZmllZENvbnRlbnQgPSBsaW5lcy5qb2luKCdcXG4nKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocmVwbGFjZW1lbnQuZmlsZVBhdGgsIG1vZGlmaWVkQ29udGVudCwgJ3V0ZjgnKTtcblxuICAgICAgLy8gVmFsaWRhdGUgVHlwZVNjcmlwdCBjb21waWxhdGlvblxuICAgICAgY29uc3QgY29tcGlsYXRpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlVHlwZVNjcmlwdENvbXBpbGF0aW9uKCk7XG4gICAgICBpZiAoIWNvbXBpbGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gUm9sbGJhY2sgb24gY29tcGlsYXRpb24gZmFpbHVyZVxuICAgICAgICBhd2FpdCB0aGlzLnJvbGxiYWNrRnJvbUJhY2t1cChyZXBsYWNlbWVudC5maWxlUGF0aCwgYmFja3VwUGF0aCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgYXBwbGllZFJlcGxhY2VtZW50czogW10sXG4gICAgICAgICAgZmFpbGVkUmVwbGFjZW1lbnRzOiBbcmVwbGFjZW1lbnRdLFxuICAgICAgICAgIGNvbXBpbGF0aW9uRXJyb3JzOiBjb21waWxhdGlvblJlc3VsdC5lcnJvcnMsXG4gICAgICAgICAgcm9sbGJhY2tQZXJmb3JtZWQ6IHRydWUsXG4gICAgICAgICAgYmFja3VwUGF0aFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhcHBsaWVkUmVwbGFjZW1lbnRzOiBbcmVwbGFjZW1lbnRdLFxuICAgICAgICBmYWlsZWRSZXBsYWNlbWVudHM6IFtdLFxuICAgICAgICBjb21waWxhdGlvbkVycm9yczogW10sXG4gICAgICAgIHJvbGxiYWNrUGVyZm9ybWVkOiBmYWxzZSxcbiAgICAgICAgYmFja3VwUGF0aFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBEb24ndCByb2xsYmFjayBoZXJlIC0gbGV0IHRoZSBjYWxsaW5nIG1ldGhvZCBoYW5kbGUgaXRcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZnkgdGhhdCByb2xsYmFjayBjYXBhYmlsaXR5IGlzIHdvcmtpbmcgY29ycmVjdGx5XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHZlcmlmeVJvbGxiYWNrQ2FwYWJpbGl0eShcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIGJhY2t1cFBhdGg6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBSZWFkIGJhY2t1cCBjb250ZW50XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoYmFja3VwUGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQmFja3VwIGZpbGUgZG9lcyBub3QgZXhpc3QnIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhY2t1cENvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoYmFja3VwUGF0aCwgJ3V0ZjgnKTtcblxuICAgICAgLy8gRm9yIHRlc3RpbmcgcHVycG9zZXMsIHdlJ2xsIGp1c3QgdmVyaWZ5IHRoZSBiYWNrdXAgZXhpc3RzIGFuZCBpcyByZWFkYWJsZVxuICAgICAgLy8gSW4gYSByZWFsIHNjZW5hcmlvLCB3ZSBtaWdodCBkbyBhIG1vcmUgY29tcHJlaGVuc2l2ZSB0ZXN0XG4gICAgICBpZiAoYmFja3VwQ29udGVudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQmFja3VwIGZpbGUgaXMgZW1wdHknIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHNhZmV0eSBzY29yZSBmb3IgYSByZXBsYWNlbWVudCBiYXNlZCBvbiBtdWx0aXBsZSBmYWN0b3JzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVNhZmV0eVNjb3JlKHJlcGxhY2VtZW50OiBUeXBlUmVwbGFjZW1lbnQpOiBudW1iZXIge1xuICAgIGxldCBzY29yZSA9IHJlcGxhY2VtZW50LmNvbmZpZGVuY2U7IC8vIEJhc2Ugc2NvcmUgZnJvbSBjbGFzc2lmaWNhdGlvbiBjb25maWRlbmNlXG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gcmVwbGFjZW1lbnQgdHlwZVxuICAgIGlmIChyZXBsYWNlbWVudC5yZXBsYWNlbWVudC5pbmNsdWRlcygndW5rbm93bicpKSB7XG4gICAgICBzY29yZSArPSAwLjE7IC8vIHVua25vd24gaXMgZ2VuZXJhbGx5IHNhZmVyIHRoYW4gYW55XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IGJhc2VkIG9uIGZpbGUgdHlwZVxuICAgIGlmIChyZXBsYWNlbWVudC5maWxlUGF0aC5pbmNsdWRlcygnLnRlc3QuJykgfHwgcmVwbGFjZW1lbnQuZmlsZVBhdGguaW5jbHVkZXMoJ19fdGVzdHNfXycpKSB7XG4gICAgICBzY29yZSArPSAwLjA1OyAvLyBUZXN0IGZpbGVzIGFyZSBzYWZlciB0byBtb2RpZnlcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gcmVwbGFjZW1lbnQgcGF0dGVybiBjb21wbGV4aXR5XG4gICAgaWYgKHJlcGxhY2VtZW50Lm9yaWdpbmFsID09PSAnYW55W10nKSB7XG4gICAgICBzY29yZSArPSAwLjE1OyAvLyBBcnJheSByZXBsYWNlbWVudHMgYXJlIHZlcnkgc2FmZVxuICAgIH0gZWxzZSBpZiAocmVwbGFjZW1lbnQub3JpZ2luYWwuaW5jbHVkZXMoJ1JlY29yZDxzdHJpbmcsIGFueT4nKSkge1xuICAgICAgc2NvcmUgKz0gMC4xOyAvLyBSZWNvcmQgcmVwbGFjZW1lbnRzIGFyZSBnZW5lcmFsbHkgc2FmZVxuICAgIH0gZWxzZSBpZiAocmVwbGFjZW1lbnQub3JpZ2luYWwuaW5jbHVkZXMoJ2Z1bmN0aW9uJykgfHwgcmVwbGFjZW1lbnQub3JpZ2luYWwuaW5jbHVkZXMoJz0+JykpIHtcbiAgICAgIHNjb3JlIC09IDAuMTsgLy8gRnVuY3Rpb24tcmVsYXRlZCByZXBsYWNlbWVudHMgYXJlIHJpc2tpZXJcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gbGluZSBjb250ZXh0IChpZiBhdmFpbGFibGUgaW4gdGhlIHJlcGxhY2VtZW50KVxuICAgIGNvbnN0IGxpbmVDb250ZW50ID0gcmVwbGFjZW1lbnQub3JpZ2luYWw7XG4gICAgaWYgKGxpbmVDb250ZW50LmluY2x1ZGVzKCdjYXRjaCcpIHx8IGxpbmVDb250ZW50LmluY2x1ZGVzKCdlcnJvcicpKSB7XG4gICAgICBzY29yZSAtPSAwLjI7IC8vIEVycm9yIGhhbmRsaW5nIGNvbnRleHRzIGFyZSByaXNraWVyXG4gICAgfVxuXG4gICAgaWYgKGxpbmVDb250ZW50LmluY2x1ZGVzKCdpbnRlcmZhY2UnKSB8fCBsaW5lQ29udGVudC5pbmNsdWRlcygndHlwZSAnKSkge1xuICAgICAgc2NvcmUgKz0gMC4wNTsgLy8gVHlwZSBkZWZpbml0aW9ucyBhcmUgc2FmZXJcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgc2NvcmUgc3RheXMgd2l0aGluIGJvdW5kc1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBzY29yZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZXBsYWNlbWVudCBzdHJhdGVnaWVzIHNvcnRlZCBieSBwcmlvcml0eVxuICAgKi9cbiAgZ2V0U3RyYXRlZ2llcygpOiBSZXBsYWNlbWVudFN0cmF0ZWd5W10ge1xuICAgIHJldHVybiBbLi4udGhpcy5zdHJhdGVnaWVzXS5zb3J0KChhLCBiKSA9PiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY3VzdG9tIHJlcGxhY2VtZW50IHN0cmF0ZWd5XG4gICAqL1xuICBhZGRTdHJhdGVneShzdHJhdGVneTogUmVwbGFjZW1lbnRTdHJhdGVneSk6IHZvaWQge1xuICAgIHRoaXMuc3RyYXRlZ2llcy5wdXNoKHN0cmF0ZWd5KTtcbiAgICB0aGlzLnN0cmF0ZWdpZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBiYWNrdXAgZGlyZWN0b3J5IHBhdGhcbiAgICovXG4gIGdldEJhY2t1cERpcmVjdG9yeSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmJhY2t1cERpcmVjdG9yeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBvbGQgYmFja3VwIGZpbGVzIChvbGRlciB0aGFuIHNwZWNpZmllZCBkYXlzKVxuICAgKi9cbiAgY2xlYW51cE9sZEJhY2t1cHMoZGF5c1RvS2VlcCA9IDcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3V0b2ZmRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBjdXRvZmZEYXRlLnNldERhdGUoY3V0b2ZmRGF0ZS5nZXREYXRlKCkgLSBkYXlzVG9LZWVwKTtcblxuICAgICAgY29uc3QgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyh0aGlzLmJhY2t1cERpcmVjdG9yeSk7XG5cbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBpZiAoZmlsZS5lbmRzV2l0aCgnLmJhY2t1cCcpKSB7XG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5iYWNrdXBEaXJlY3RvcnksIGZpbGUpO1xuICAgICAgICAgIGNvbnN0IHN0YXRzID0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpO1xuXG4gICAgICAgICAgaWYgKHN0YXRzLm10aW1lIDwgY3V0b2ZmRGF0ZSkge1xuICAgICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIExvZyBlcnJvciBidXQgZG9uJ3QgdGhyb3cgLSBjbGVhbnVwIGlzIG5vdCBjcml0aWNhbFxuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY2xlYW51cCBvbGQgYmFja3VwczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8gVHlwZSBJbmZlcmVuY2UgSGVscGVyIE1ldGhvZHNcblxuICAvKipcbiAgICogSW5mZXIgYXJyYXkgZWxlbWVudCB0eXBlIGZyb20gY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBpbmZlckFycmF5RWxlbWVudFR5cGUoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0LCBzdXJyb3VuZGluZ0xpbmVzIH0gPSBjb250ZXh0O1xuXG4gICAgLy8gTG9vayBmb3IgYXJyYXkgaW5pdGlhbGl6YXRpb24gcGF0dGVybnNcbiAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJz0gWycpKSB7XG4gICAgICAvLyBDaGVjayBpZiBhcnJheSBoYXMgc3RyaW5nIGxpdGVyYWxzXG4gICAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoXCInXCIpIHx8IGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdcIicpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGlmIGFycmF5IGhhcyBudW1iZXJzXG4gICAgICBpZiAoLz1cXHMqXFxbXFxzKlxcZC8udGVzdChjb2RlU25pcHBldCkpIHtcbiAgICAgICAgcmV0dXJuICdudW1iZXInO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgaWYgYXJyYXkgaGFzIGJvb2xlYW4gdmFsdWVzXG4gICAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJ3RydWUnKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnZmFsc2UnKSkge1xuICAgICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExvb2sgZm9yIHB1c2ggb3BlcmF0aW9ucyBpbiBzdXJyb3VuZGluZyBsaW5lc1xuICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKTtcbiAgICBpZiAoYWxsQ29udGV4dC5pbmNsdWRlcygnLnB1c2goJykpIHtcbiAgICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKCcucHVzaChcIicpIHx8IGFsbENvbnRleHQuaW5jbHVkZXMoXCIucHVzaCgnXCIpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICAgIGlmICgvXFwucHVzaFxcKFxcZC8udGVzdChhbGxDb250ZXh0KSkge1xuICAgICAgICByZXR1cm4gJ251bWJlcic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRG9tYWluLXNwZWNpZmljIGluZmVyZW5jZVxuICAgIGlmIChjb250ZXh0LmRvbWFpbkNvbnRleHQuZG9tYWluID09PSBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCkge1xuICAgICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdwbGFuZXQnKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnc2lnbicpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygncG9zaXRpb24nKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnZGVncmVlJykpIHtcbiAgICAgICAgcmV0dXJuICdudW1iZXInO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb250ZXh0LmRvbWFpbkNvbnRleHQuZG9tYWluID09PSBDb2RlRG9tYWluLlJFQ0lQRSkge1xuICAgICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdpbmdyZWRpZW50JykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJ3JlY2lwZScpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IHRvIHVua25vd24gZm9yIHNhZmV0eVxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogSW5mZXIgUmVjb3JkIHZhbHVlIHR5cGUgZnJvbSBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGluZmVyUmVjb3JkVmFsdWVUeXBlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBjb2RlU25pcHBldCwgc3Vycm91bmRpbmdMaW5lcyB9ID0gY29udGV4dDtcblxuICAgIC8vIExvb2sgZm9yIG9iamVjdCBsaXRlcmFsIGFzc2lnbm1lbnRzXG4gICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCc9IHsnKSkge1xuICAgICAgLy8gQ2hlY2sgZm9yIHN0cmluZyB2YWx1ZXNcbiAgICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnOiBcIicpIHx8IGNvZGVTbmlwcGV0LmluY2x1ZGVzKFwiOiAnXCIpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGZvciBudW1iZXIgdmFsdWVzXG4gICAgICBpZiAoLzpcXHMqXFxkLy50ZXN0KGNvZGVTbmlwcGV0KSkge1xuICAgICAgICByZXR1cm4gJ251bWJlcic7XG4gICAgICB9XG4gICAgICAvLyBDaGVjayBmb3IgYm9vbGVhbiB2YWx1ZXNcbiAgICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnOiB0cnVlJykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJzogZmFsc2UnKSkge1xuICAgICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExvb2sgZm9yIHByb3BlcnR5IGFjY2VzcyBwYXR0ZXJucyBpbiBzdXJyb3VuZGluZyBsaW5lc1xuICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKTtcblxuICAgIC8vIENoZWNrIGZvciBzdHJpbmcgb3BlcmF0aW9uc1xuICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKCcudG9TdHJpbmcoKScpIHx8IGFsbENvbnRleHQuaW5jbHVkZXMoJy50b0xvd2VyQ2FzZSgpJykgfHwgYWxsQ29udGV4dC5pbmNsdWRlcygnLnRvVXBwZXJDYXNlKCknKSkge1xuICAgICAgcmV0dXJuICdzdHJpbmcnO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBudW1iZXIgb3BlcmF0aW9uc1xuICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKCdwYXJzZUludCgnKSB8fCBhbGxDb250ZXh0LmluY2x1ZGVzKCdwYXJzZUZsb2F0KCcpIHx8IGFsbENvbnRleHQuaW5jbHVkZXMoJ051bWJlcignKSkge1xuICAgICAgcmV0dXJuICdudW1iZXInO1xuICAgIH1cblxuICAgIC8vIERvbWFpbi1zcGVjaWZpYyBpbmZlcmVuY2VcbiAgICBpZiAoY29udGV4dC5kb21haW5Db250ZXh0LmRvbWFpbiA9PT0gQ29kZURvbWFpbi5BU1RST0xPR0lDQUwpIHtcbiAgICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnZWxlbWVudCcpIHx8IGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdFbGVtZW50JykpIHtcbiAgICAgICAgcmV0dXJuICdudW1iZXInOyAvLyBFbGVtZW50YWwgcHJvcGVydGllcyBhcmUgbnVtZXJpY1xuICAgICAgfVxuICAgICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdjb25maWcnKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnQ29uZmlnJykpIHtcbiAgICAgICAgcmV0dXJuICd1bmtub3duJzsgLy8gQ29uZmlnIG9iamVjdHMgY2FuIGJlIGNvbXBsZXhcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZmVyIGluZGV4IHNpZ25hdHVyZSB2YWx1ZSB0eXBlIGZyb20gY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBpbmZlckluZGV4U2lnbmF0dXJlVmFsdWVUeXBlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgLy8gU2ltaWxhciBsb2dpYyB0byBSZWNvcmQgdmFsdWUgdHlwZSBpbmZlcmVuY2VcbiAgICByZXR1cm4gdGhpcy5pbmZlclJlY29yZFZhbHVlVHlwZShjb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmZlciBmdW5jdGlvbiBwYXJhbWV0ZXIgdHlwZSBmcm9tIGNvbnRleHQgYW5kIHBhcmFtZXRlciBuYW1lXG4gICAqL1xuICBwcml2YXRlIGluZmVyRnVuY3Rpb25QYXJhbWV0ZXJUeXBlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCwgcGFyYW1OYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgY29kZVNuaXBwZXQsIHN1cnJvdW5kaW5nTGluZXMgfSA9IGNvbnRleHQ7XG5cbiAgICAvLyBDb21tb24gcGFyYW1ldGVyIG5hbWUgcGF0dGVybnNcbiAgICBjb25zdCBwYXJhbUxvd2VyID0gcGFyYW1OYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFdmVudCBoYW5kbGVyc1xuICAgIGlmIChwYXJhbUxvd2VyLmluY2x1ZGVzKCdldmVudCcpIHx8IHBhcmFtTG93ZXIgPT09ICdlJykge1xuICAgICAgaWYgKGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ29uQ2xpY2snKSB8fCBjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdvblN1Ym1pdCcpKSB7XG4gICAgICAgIHJldHVybiAnUmVhY3QuTW91c2VFdmVudCB8IFJlYWN0LkZvcm1FdmVudCc7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ0V2ZW50JztcbiAgICB9XG5cbiAgICAvLyBFcnJvciBwYXJhbWV0ZXJzXG4gICAgaWYgKHBhcmFtTG93ZXIuaW5jbHVkZXMoJ2Vycm9yJykgfHwgcGFyYW1Mb3dlciA9PT0gJ2VycicpIHtcbiAgICAgIHJldHVybiAnRXJyb3InO1xuICAgIH1cblxuICAgIC8vIElEIHBhcmFtZXRlcnNcbiAgICBpZiAocGFyYW1Mb3dlci5pbmNsdWRlcygnaWQnKSB8fCBwYXJhbUxvd2VyID09PSAna2V5Jykge1xuICAgICAgcmV0dXJuICdzdHJpbmcgfCBudW1iZXInO1xuICAgIH1cblxuICAgIC8vIEluZGV4IHBhcmFtZXRlcnNcbiAgICBpZiAocGFyYW1Mb3dlci5pbmNsdWRlcygnaW5kZXgnKSB8fCBwYXJhbUxvd2VyID09PSAnaScpIHtcbiAgICAgIHJldHVybiAnbnVtYmVyJztcbiAgICB9XG5cbiAgICAvLyBEYXRhIHBhcmFtZXRlcnNcbiAgICBpZiAocGFyYW1Mb3dlci5pbmNsdWRlcygnZGF0YScpIHx8IHBhcmFtTG93ZXIuaW5jbHVkZXMoJ2l0ZW0nKSB8fCBwYXJhbUxvd2VyLmluY2x1ZGVzKCdlbGVtZW50JykpIHtcbiAgICAgIC8vIFRyeSB0byBpbmZlciBmcm9tIHVzYWdlIGluIGZ1bmN0aW9uIGJvZHlcbiAgICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKTtcbiAgICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKGAke3BhcmFtTmFtZX0uYCkpIHtcbiAgICAgICAgcmV0dXJuICdvYmplY3QnOyAvLyBJZiBhY2Nlc3NpbmcgcHJvcGVydGllcywgbGlrZWx5IGFuIG9iamVjdFxuICAgICAgfVxuICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICB9XG5cbiAgICAvLyBEb21haW4tc3BlY2lmaWMgaW5mZXJlbmNlXG4gICAgaWYgKGNvbnRleHQuZG9tYWluQ29udGV4dC5kb21haW4gPT09IENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKSB7XG4gICAgICBpZiAocGFyYW1Mb3dlci5pbmNsdWRlcygncGxhbmV0JykgfHwgcGFyYW1Mb3dlci5pbmNsdWRlcygnc2lnbicpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbUxvd2VyLmluY2x1ZGVzKCdwb3NpdGlvbicpIHx8IHBhcmFtTG93ZXIuaW5jbHVkZXMoJ2RlZ3JlZScpKSB7XG4gICAgICAgIHJldHVybiAnbnVtYmVyJztcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbUxvd2VyLmluY2x1ZGVzKCdwcm9wZXJ0aWVzJykgfHwgcGFyYW1Mb3dlci5pbmNsdWRlcygnZWxlbWVudCcpKSB7XG4gICAgICAgIHJldHVybiAnRWxlbWVudGFsUHJvcGVydGllcyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQuZG9tYWluQ29udGV4dC5kb21haW4gPT09IENvZGVEb21haW4uUkVDSVBFKSB7XG4gICAgICBpZiAocGFyYW1Mb3dlci5pbmNsdWRlcygnaW5ncmVkaWVudCcpKSB7XG4gICAgICAgIHJldHVybiAnSW5ncmVkaWVudCc7XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1Mb3dlci5pbmNsdWRlcygncmVjaXBlJykpIHtcbiAgICAgICAgcmV0dXJuICdSZWNpcGUnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogSW5mZXIgcmV0dXJuIHR5cGUgZnJvbSBmdW5jdGlvbiBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGluZmVyUmV0dXJuVHlwZShjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgY29kZVNuaXBwZXQsIHN1cnJvdW5kaW5nTGluZXMgfSA9IGNvbnRleHQ7XG5cbiAgICAvLyBMb29rIGZvciByZXR1cm4gc3RhdGVtZW50cyBpbiBzdXJyb3VuZGluZyBsaW5lc1xuICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKTtcblxuICAgIC8vIENoZWNrIGZvciBleHBsaWNpdCByZXR1cm4gc3RhdGVtZW50c1xuICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKCdyZXR1cm4gJykpIHtcbiAgICAgIC8vIFN0cmluZyByZXR1cm5zXG4gICAgICBpZiAoYWxsQ29udGV4dC5pbmNsdWRlcygncmV0dXJuIFwiJykgfHwgYWxsQ29udGV4dC5pbmNsdWRlcyhcInJldHVybiAnXCIpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICAgIC8vIE51bWJlciByZXR1cm5zXG4gICAgICBpZiAoL3JldHVyblxccytcXGQvLnRlc3QoYWxsQ29udGV4dCkpIHtcbiAgICAgICAgcmV0dXJuICdudW1iZXInO1xuICAgICAgfVxuICAgICAgLy8gQm9vbGVhbiByZXR1cm5zXG4gICAgICBpZiAoYWxsQ29udGV4dC5pbmNsdWRlcygncmV0dXJuIHRydWUnKSB8fCBhbGxDb250ZXh0LmluY2x1ZGVzKCdyZXR1cm4gZmFsc2UnKSkge1xuICAgICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xuICAgICAgfVxuICAgICAgLy8gQXJyYXkgcmV0dXJuc1xuICAgICAgaWYgKGFsbENvbnRleHQuaW5jbHVkZXMoJ3JldHVybiBbJykpIHtcbiAgICAgICAgcmV0dXJuICd1bmtub3duW10nO1xuICAgICAgfVxuICAgICAgLy8gT2JqZWN0IHJldHVybnNcbiAgICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKCdyZXR1cm4geycpKSB7XG4gICAgICAgIHJldHVybiAnb2JqZWN0JztcbiAgICAgIH1cbiAgICAgIC8vIFByb21pc2UgcmV0dXJuc1xuICAgICAgaWYgKGFsbENvbnRleHQuaW5jbHVkZXMoJ3JldHVybiBQcm9taXNlJykgfHwgYWxsQ29udGV4dC5pbmNsdWRlcygncmV0dXJuIG5ldyBQcm9taXNlJykpIHtcbiAgICAgICAgcmV0dXJuICdQcm9taXNlPHVua25vd24+JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgYXN5bmMgZnVuY3Rpb25zXG4gICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdhc3luYyAnKSkge1xuICAgICAgcmV0dXJuICdQcm9taXNlPHVua25vd24+JztcbiAgICB9XG5cbiAgICAvLyBGdW5jdGlvbiBuYW1lIGluZmVyZW5jZVxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnZ2V0JykgJiYgY29kZVNuaXBwZXQuaW5jbHVkZXMoJygnKSkge1xuICAgICAgcmV0dXJuICd1bmtub3duJzsgLy8gR2V0dGVyIGZ1bmN0aW9ucyByZXR1cm4gc29tZXRoaW5nXG4gICAgfVxuXG4gICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdpcycpIHx8IGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdoYXMnKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnY2FuJykpIHtcbiAgICAgIHJldHVybiAnYm9vbGVhbic7IC8vIFByZWRpY2F0ZSBmdW5jdGlvbnNcbiAgICB9XG5cbiAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJ2NhbGN1bGF0ZScpIHx8IGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdjb3VudCcpKSB7XG4gICAgICByZXR1cm4gJ251bWJlcic7IC8vIENhbGN1bGF0aW9uIGZ1bmN0aW9uc1xuICAgIH1cblxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogSW5mZXIgZ2VuZXJpYyB0eXBlIGZyb20gY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBpbmZlckdlbmVyaWNUeXBlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBjb2RlU25pcHBldCB9ID0gY29udGV4dDtcblxuICAgIC8vIENoZWNrIGZvciBjb21tb24gZ2VuZXJpYyBwYXR0ZXJuc1xuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnQXJyYXk8YW55PicpKSB7XG4gICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgIH1cblxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnUHJvbWlzZTxhbnk+JykpIHtcbiAgICAgIHJldHVybiAndW5rbm93bic7XG4gICAgfVxuXG4gICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdNYXA8JykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJ1NldDwnKSkge1xuICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICB9XG5cbiAgICAvLyBEb21haW4tc3BlY2lmaWMgZ2VuZXJpY3NcbiAgICBpZiAoY29udGV4dC5kb21haW5Db250ZXh0LmRvbWFpbiA9PT0gQ29kZURvbWFpbi5BU1RST0xPR0lDQUwpIHtcbiAgICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnUGxhbmV0YXJ5UG9zaXRpb24nKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnRWxlbWVudGFsUHJvcGVydGllcycpKSB7XG4gICAgICAgIHJldHVybiAndW5rbm93bic7IC8vIEtlZXAgZ2VuZXJpYyBmb3IgZmxleGliaWxpdHlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZmVyIG9iamVjdCBwcm9wZXJ0eSB0eXBlIGZyb20gY29udGV4dCBhbmQgcHJvcGVydHkgbmFtZVxuICAgKi9cbiAgcHJpdmF0ZSBpbmZlck9iamVjdFByb3BlcnR5VHlwZShjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQsIHByb3BlcnR5TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0LCBzdXJyb3VuZGluZ0xpbmVzIH0gPSBjb250ZXh0O1xuICAgIGNvbnN0IHByb3BMb3dlciA9IHByb3BlcnR5TmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ29tbW9uIHByb3BlcnR5IHBhdHRlcm5zXG4gICAgaWYgKHByb3BMb3dlci5pbmNsdWRlcygnaWQnKSB8fCBwcm9wTG93ZXIgPT09ICdrZXknKSB7XG4gICAgICByZXR1cm4gJ3N0cmluZyB8IG51bWJlcic7XG4gICAgfVxuXG4gICAgaWYgKHByb3BMb3dlci5pbmNsdWRlcygnbmFtZScpIHx8IHByb3BMb3dlci5pbmNsdWRlcygndGl0bGUnKSB8fCBwcm9wTG93ZXIuaW5jbHVkZXMoJ2Rlc2NyaXB0aW9uJykpIHtcbiAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICB9XG5cbiAgICBpZiAocHJvcExvd2VyLmluY2x1ZGVzKCdjb3VudCcpIHx8IHByb3BMb3dlci5pbmNsdWRlcygnbGVuZ3RoJykgfHwgcHJvcExvd2VyLmluY2x1ZGVzKCdzaXplJykpIHtcbiAgICAgIHJldHVybiAnbnVtYmVyJztcbiAgICB9XG5cbiAgICBpZiAocHJvcExvd2VyLmluY2x1ZGVzKCdlbmFibGVkJykgfHwgcHJvcExvd2VyLmluY2x1ZGVzKCdhY3RpdmUnKSB8fCBwcm9wTG93ZXIuaW5jbHVkZXMoJ3Zpc2libGUnKSkge1xuICAgICAgcmV0dXJuICdib29sZWFuJztcbiAgICB9XG5cbiAgICBpZiAocHJvcExvd2VyLmluY2x1ZGVzKCdkYXRlJykgfHwgcHJvcExvd2VyLmluY2x1ZGVzKCd0aW1lJykpIHtcbiAgICAgIHJldHVybiAnRGF0ZSB8IHN0cmluZyc7XG4gICAgfVxuXG4gICAgLy8gTG9vayBmb3IgYXNzaWdubWVudCBwYXR0ZXJuc1xuICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKTtcbiAgICBpZiAoYWxsQ29udGV4dC5pbmNsdWRlcyhgJHtwcm9wZXJ0eU5hbWV9OiBcImApKSB7XG4gICAgICByZXR1cm4gJ3N0cmluZyc7XG4gICAgfVxuICAgIGlmIChhbGxDb250ZXh0LmluY2x1ZGVzKGAke3Byb3BlcnR5TmFtZX06IFxcZGApKSB7XG4gICAgICByZXR1cm4gJ251bWJlcic7XG4gICAgfVxuXG4gICAgLy8gRG9tYWluLXNwZWNpZmljIGluZmVyZW5jZVxuICAgIGlmIChjb250ZXh0LmRvbWFpbkNvbnRleHQuZG9tYWluID09PSBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCkge1xuICAgICAgaWYgKHByb3BMb3dlci5pbmNsdWRlcygnZWxlbWVudCcpIHx8IHByb3BMb3dlci5pbmNsdWRlcygnZmlyZScpIHx8IHByb3BMb3dlci5pbmNsdWRlcygnd2F0ZXInKSB8fFxuICAgICAgICAgIHByb3BMb3dlci5pbmNsdWRlcygnZWFydGgnKSB8fCBwcm9wTG93ZXIuaW5jbHVkZXMoJ2FpcicpKSB7XG4gICAgICAgIHJldHVybiAnbnVtYmVyJztcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wTG93ZXIuaW5jbHVkZXMoJ3NpZ24nKSB8fCBwcm9wTG93ZXIuaW5jbHVkZXMoJ3BsYW5ldCcpKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZmVyIHZhcmlhYmxlIHR5cGUgZnJvbSBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGluZmVyVmFyaWFibGVUeXBlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBjb2RlU25pcHBldCB9ID0gY29udGV4dDtcblxuICAgIC8vIExvb2sgZm9yIGFzc2lnbm1lbnQgcGF0dGVybnNcbiAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJz0gXCInKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcyhcIj0gJ1wiKSkge1xuICAgICAgcmV0dXJuICdzdHJpbmcnO1xuICAgIH1cblxuICAgIGlmICgvPVxccypcXGQvLnRlc3QoY29kZVNuaXBwZXQpKSB7XG4gICAgICByZXR1cm4gJ251bWJlcic7XG4gICAgfVxuXG4gICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCc9IHRydWUnKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnPSBmYWxzZScpKSB7XG4gICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xuICAgIH1cblxuICAgIGlmIChjb2RlU25pcHBldC5pbmNsdWRlcygnPSBbJykpIHtcbiAgICAgIHJldHVybiAndW5rbm93bltdJztcbiAgICB9XG5cbiAgICBpZiAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJz0geycpKSB7XG4gICAgICByZXR1cm4gJ29iamVjdCc7XG4gICAgfVxuXG4gICAgaWYgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCc9IG5ldyAnKSkge1xuICAgICAgLy8gVHJ5IHRvIGV4dHJhY3QgY29uc3RydWN0b3IgbmFtZVxuICAgICAgY29uc3QgY29uc3RydWN0b3JNYXRjaCA9IGNvZGVTbmlwcGV0Lm1hdGNoKC89IG5ldyAoXFx3KykvKTtcbiAgICAgIGlmIChjb25zdHJ1Y3Rvck1hdGNoKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvck1hdGNoWzFdO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdvYmplY3QnO1xuICAgIH1cblxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvLyBDb250ZXh0IFZhbGlkYXRpb24gSGVscGVyIE1ldGhvZHNcblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29udGV4dCBpcyBpbiBlcnJvciBoYW5kbGluZyAoY2F0Y2ggYmxvY2tzLCBlcnJvciBwYXJhbWV0ZXJzKVxuICAgKi9cbiAgcHJpdmF0ZSBpc0luRXJyb3JIYW5kbGluZ0NvbnRleHQoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBjb2RlU25pcHBldCwgc3Vycm91bmRpbmdMaW5lcyB9ID0gY29udGV4dDtcbiAgICBjb25zdCBhbGxDb250ZXh0ID0gW2NvZGVTbmlwcGV0LCAuLi5zdXJyb3VuZGluZ0xpbmVzXS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTtcblxuICAgIHJldHVybiBhbGxDb250ZXh0LmluY2x1ZGVzKCdjYXRjaCcpIHx8XG4gICAgICAgICAgIGFsbENvbnRleHQuaW5jbHVkZXMoJ2Vycm9yJykgfHxcbiAgICAgICAgICAgYWxsQ29udGV4dC5pbmNsdWRlcygnZXhjZXB0aW9uJykgfHxcbiAgICAgICAgICAgY29kZVNuaXBwZXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZXJyJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29udGV4dCBpcyBmb3IgZXh0ZXJuYWwgQVBJIHJlc3BvbnNlc1xuICAgKi9cbiAgcHJpdmF0ZSBpc0V4dGVybmFsQXBpQ29udGV4dChjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0LCBzdXJyb3VuZGluZ0xpbmVzIH0gPSBjb250ZXh0O1xuICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgcmV0dXJuIGFsbENvbnRleHQuaW5jbHVkZXMoJ2FwaScpIHx8XG4gICAgICAgICAgIGFsbENvbnRleHQuaW5jbHVkZXMoJ3Jlc3BvbnNlJykgfHxcbiAgICAgICAgICAgYWxsQ29udGV4dC5pbmNsdWRlcygnZmV0Y2gnKSB8fFxuICAgICAgICAgICBhbGxDb250ZXh0LmluY2x1ZGVzKCdheGlvcycpIHx8XG4gICAgICAgICAgIGFsbENvbnRleHQuaW5jbHVkZXMoJ3JlcXVlc3QnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjb250ZXh0IGlzIGZvciBkeW5hbWljIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHByaXZhdGUgaXNEeW5hbWljQ29uZmlnQ29udGV4dChjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0LCBzdXJyb3VuZGluZ0xpbmVzIH0gPSBjb250ZXh0O1xuICAgIGNvbnN0IGFsbENvbnRleHQgPSBbY29kZVNuaXBwZXQsIC4uLnN1cnJvdW5kaW5nTGluZXNdLmpvaW4oJyAnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgcmV0dXJuIGFsbENvbnRleHQuaW5jbHVkZXMoJ2NvbmZpZycpIHx8XG4gICAgICAgICAgIGFsbENvbnRleHQuaW5jbHVkZXMoJ3NldHRpbmdzJykgfHxcbiAgICAgICAgICAgYWxsQ29udGV4dC5pbmNsdWRlcygnb3B0aW9ucycpIHx8XG4gICAgICAgICAgIGNvbnRleHQuZG9tYWluQ29udGV4dC5kb21haW4gPT09IENvZGVEb21haW4uQ0FNUEFJR04gfHxcbiAgICAgICAgICAgY29udGV4dC5kb21haW5Db250ZXh0LmRvbWFpbiA9PT0gQ29kZURvbWFpbi5JTlRFTExJR0VOQ0U7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29udGV4dCBpcyBmb3IgZXZlbnQgaGFuZGxlcnNcbiAgICovXG4gIHByaXZhdGUgaXNFdmVudEhhbmRsZXJDb250ZXh0KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgY29kZVNuaXBwZXQgfSA9IGNvbnRleHQ7XG5cbiAgICByZXR1cm4gY29kZVNuaXBwZXQuaW5jbHVkZXMoJ29uQ2xpY2snKSB8fFxuICAgICAgICAgICBjb2RlU25pcHBldC5pbmNsdWRlcygnb25DaGFuZ2UnKSB8fFxuICAgICAgICAgICBjb2RlU25pcHBldC5pbmNsdWRlcygnb25TdWJtaXQnKSB8fFxuICAgICAgICAgICBjb2RlU25pcHBldC5pbmNsdWRlcygnYWRkRXZlbnRMaXN0ZW5lcicpIHx8XG4gICAgICAgICAgIGNvZGVTbmlwcGV0LmluY2x1ZGVzKCdoYW5kbGVyJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29udGV4dCBpcyBhIGZ1bmN0aW9uIHBhcmFtZXRlclxuICAgKi9cbiAgcHJpdmF0ZSBpc0Z1bmN0aW9uUGFyYW1ldGVyQ29udGV4dChjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGNvZGVTbmlwcGV0IH0gPSBjb250ZXh0O1xuXG4gICAgcmV0dXJuIGNvZGVTbmlwcGV0LmluY2x1ZGVzKCcoJykgJiZcbiAgICAgICAgICAgY29kZVNuaXBwZXQuaW5jbHVkZXMoJzonKSAmJlxuICAgICAgICAgICAoY29kZVNuaXBwZXQuaW5jbHVkZXMoJyknKSB8fCBjb2RlU25pcHBldC5pbmNsdWRlcygnLCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjb250ZXh0IGlzIGEgZnVuY3Rpb24gcmV0dXJuIHR5cGVcbiAgICovXG4gIHByaXZhdGUgaXNGdW5jdGlvblJldHVyblR5cGVDb250ZXh0KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgY29kZVNuaXBwZXQgfSA9IGNvbnRleHQ7XG5cbiAgICByZXR1cm4gY29kZVNuaXBwZXQuaW5jbHVkZXMoJyk6JykgJiZcbiAgICAgICAgICAgKGNvZGVTbmlwcGV0LmluY2x1ZGVzKCd7JykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJzsnKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29udGV4dCBpcyBhbiBvYmplY3QgcHJvcGVydHlcbiAgICovXG4gIHByaXZhdGUgaXNPYmplY3RQcm9wZXJ0eUNvbnRleHQoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBjb2RlU25pcHBldCB9ID0gY29udGV4dDtcblxuICAgIHJldHVybiBjb2RlU25pcHBldC5pbmNsdWRlcygnOicpICYmXG4gICAgICAgICAgIChjb2RlU25pcHBldC5pbmNsdWRlcygnLCcpIHx8IGNvZGVTbmlwcGV0LmluY2x1ZGVzKCd9JykgfHwgY29kZVNuaXBwZXQuaW5jbHVkZXMoJzsnKSk7XG4gIH1cblxuICAvLyBFbmhhbmNlZCBTYWZldHkgVmFsaWRhdGlvbiBNZXRob2RzXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gY29tcHJlaGVuc2l2ZSBzYWZldHkgdmFsaWRhdGlvbiBmb3IgYSByZXBsYWNlbWVudFxuICAgKi9cbiAgYXN5bmMgdmFsaWRhdGVSZXBsYWNlbWVudFNhZmV0eShcbiAgICByZXBsYWNlbWVudDogVHlwZVJlcGxhY2VtZW50LFxuICAgIGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dFxuICApOiBQcm9taXNlPFNhZmV0eVZhbGlkYXRpb25SZXN1bHQ+IHtcbiAgICByZXR1cm4gdGhpcy5zYWZldHlWYWxpZGF0b3IuY2FsY3VsYXRlU2FmZXR5U2NvcmUocmVwbGFjZW1lbnQsIGNvbnRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGJ1aWxkIGFmdGVyIGFwcGx5aW5nIHJlcGxhY2VtZW50c1xuICAgKi9cbiAgYXN5bmMgdmFsaWRhdGVCdWlsZFNhZmV0eShcbiAgICBtb2RpZmllZEZpbGVzOiBzdHJpbmdbXSxcbiAgICBpbmNsdWRlVGVzdHMgPSBmYWxzZVxuICApOiBQcm9taXNlPEJ1aWxkVmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLnNhZmV0eVZhbGlkYXRvci52YWxpZGF0ZUJ1aWxkQWZ0ZXJCYXRjaChtb2RpZmllZEZpbGVzLCBpbmNsdWRlVGVzdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHJvbGxiYWNrIGNhcGFiaWxpdHkgZm9yIGdpdmVuIGZpbGVzXG4gICAqL1xuICBhc3luYyB2YWxpZGF0ZVJvbGxiYWNrU2FmZXR5KFxuICAgIG9yaWdpbmFsRmlsZXM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgYmFja3VwRmlsZXM6IE1hcDxzdHJpbmcsIHN0cmluZz5cbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2FmZXR5VmFsaWRhdG9yLnZhbGlkYXRlUm9sbGJhY2tDYXBhYmlsaXR5KG9yaWdpbmFsRmlsZXMsIGJhY2t1cEZpbGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBzYWZldHkgdmFsaWRhdG9yIGluc3RhbmNlXG4gICAqL1xuICBnZXRTYWZldHlWYWxpZGF0b3IoKTogU2FmZXR5VmFsaWRhdG9yIHtcbiAgICByZXR1cm4gdGhpcy5zYWZldHlWYWxpZGF0b3I7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNhZmV0eSB0aHJlc2hvbGRzXG4gICAqL1xuICB1cGRhdGVTYWZldHlUaHJlc2hvbGRzKHRocmVzaG9sZHM6IHsgbWluaW11bVNhZmV0eVNjb3JlPzogbnVtYmVyIH0pIHtcbiAgICBpZiAodGhyZXNob2xkcy5taW5pbXVtU2FmZXR5U2NvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zYWZldHlUaHJlc2hvbGQgPSB0aHJlc2hvbGRzLm1pbmltdW1TYWZldHlTY29yZTtcbiAgICAgIHRoaXMuc2FmZXR5VmFsaWRhdG9yLnVwZGF0ZVNhZmV0eVRocmVzaG9sZHMoe1xuICAgICAgICBtaW5pbXVtU2FmZXR5U2NvcmU6IHRocmVzaG9sZHMubWluaW11bVNhZmV0eVNjb3JlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==