ba23de280a6e5a49b286eea72a7e28b4
"use strict";
/**
 * ErrorClassificationSystem - Advanced error classification with severity and auto-fix assessment
 *
 * This system provides detailed classification of linting errors with sophisticated
 * severity assessment and auto-fix capability analysis.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorClassificationSystem = void 0;
/**
 * Main ErrorClassificationSystem class
 */
class ErrorClassificationSystem {
    constructor() {
        this.ruleClassifications = new Map();
        this.initializeRuleClassifications();
        this.domainPatterns = {
            astrological: [
                /\/calculations\//,
                /\/data\/planets\//,
                /reliableAstronomy/,
                /planetaryConsistencyCheck/,
                /Astrological/,
                /Alchemical/
            ],
            campaign: [
                /\/services\/campaign\//,
                /\/types\/campaign/,
                /Campaign/,
                /Progress/
            ]
        };
    }
    /**
     * Classify a linting error with comprehensive analysis
     */
    classifyError(ruleId, message, filePath, hasAutoFix = false) {
        // Get base classification for the rule
        let classification = this.ruleClassifications.get(ruleId) || this.createDefaultClassification(ruleId);
        // Enhance classification based on context
        classification = this.enhanceWithContext(classification, message, filePath, hasAutoFix);
        return classification;
    }
    /**
     * Get severity assessment for multiple errors
     */
    assessOverallSeverity(classifications) {
        const criticalCount = classifications.filter(c => c.severity.level === 'critical').length;
        const highCount = classifications.filter(c => c.severity.level === 'high').length;
        const mediumCount = classifications.filter(c => c.severity.level === 'medium').length;
        // Calculate overall severity
        const totalScore = classifications.reduce((sum, c) => sum + c.severity.score, 0);
        const averageScore = totalScore / classifications.length;
        let overallLevel;
        if (criticalCount > 0)
            overallLevel = 'critical';
        else if (highCount > 10)
            overallLevel = 'high';
        else if (averageScore > 70)
            overallLevel = 'high';
        else if (averageScore > 40)
            overallLevel = 'medium';
        else
            overallLevel = 'low';
        const overallSeverity = {
            level: overallLevel,
            score: Math.round(averageScore),
            factors: [
                { factor: 'Critical Issues', weight: criticalCount, description: `${criticalCount} critical issues found` },
                { factor: 'High Priority Issues', weight: highCount, description: `${highCount} high priority issues found` },
                { factor: 'Medium Priority Issues', weight: mediumCount, description: `${mediumCount} medium priority issues found` }
            ],
            businessImpact: criticalCount > 0 ? 'blocking' :
                highCount > 5 ? 'degrading' :
                    mediumCount > 20 ? 'cosmetic' : 'none'
        };
        // Generate recommendations
        const recommendations = [];
        if (criticalCount > 0) {
            recommendations.push('Address critical issues immediately before proceeding');
        }
        if (highCount > 10) {
            recommendations.push('Prioritize high-severity issues in next sprint');
        }
        if (averageScore > 50) {
            recommendations.push('Consider implementing automated fixing for eligible issues');
        }
        return { overallSeverity, criticalCount, highCount, recommendations };
    }
    /**
     * Analyze auto-fix capabilities across multiple errors
     */
    analyzeAutoFixCapabilities(classifications) {
        const autoFixable = classifications.filter(c => c.autoFixCapability.canAutoFix);
        const safeAutoFixes = autoFixable.filter(c => c.autoFixCapability.confidence > 0.8 &&
            c.riskProfile.overall === 'low');
        const riskyAutoFixes = autoFixable.filter(c => c.autoFixCapability.confidence <= 0.8 ||
            c.riskProfile.overall !== 'low');
        const manualOnlyFixes = classifications.filter(c => !c.autoFixCapability.canAutoFix);
        const recommendations = [];
        if (safeAutoFixes.length > 0) {
            recommendations.push(`${safeAutoFixes.length} issues can be safely auto-fixed`);
        }
        if (riskyAutoFixes.length > 0) {
            recommendations.push(`${riskyAutoFixes.length} auto-fixes require careful validation`);
        }
        if (manualOnlyFixes.length > 0) {
            recommendations.push(`${manualOnlyFixes.length} issues require manual intervention`);
        }
        return {
            totalAutoFixable: autoFixable.length,
            safeAutoFixes,
            riskyAutoFixes,
            manualOnlyFixes,
            recommendations
        };
    }
    /**
     * Initialize rule classifications with comprehensive data
     */
    initializeRuleClassifications() {
        // Import/Export Rules
        this.addRuleClassification('import/order', {
            ruleId: 'import/order',
            category: {
                primary: 'style',
                secondary: 'import-organization',
                description: 'Import statements should be organized consistently'
            },
            severity: {
                level: 'low',
                score: 20,
                factors: [
                    { factor: 'Code Readability', weight: 0.8, description: 'Affects code organization' }
                ],
                businessImpact: 'cosmetic'
            },
            autoFixCapability: {
                canAutoFix: true,
                confidence: 0.95,
                complexity: 'trivial',
                prerequisites: [],
                risks: []
            },
            domainImpact: {
                affectsAstrology: false,
                affectsCampaign: false,
                affectsCore: false,
                specialHandlingRequired: false,
                expertiseRequired: []
            },
            riskProfile: {
                overall: 'low',
                factors: ['Cosmetic change only'],
                mitigationStrategies: ['Automated fixing with build validation']
            }
        });
        this.addRuleClassification('import/no-unresolved', {
            ruleId: 'import/no-unresolved',
            category: {
                primary: 'logic',
                secondary: 'module-resolution',
                description: 'Import paths must resolve to actual modules'
            },
            severity: {
                level: 'high',
                score: 85,
                factors: [
                    { factor: 'Build Breaking', weight: 1.0, description: 'Can break application build' },
                    { factor: 'Runtime Errors', weight: 0.9, description: 'May cause runtime failures' }
                ],
                businessImpact: 'blocking'
            },
            autoFixCapability: {
                canAutoFix: false,
                confidence: 0.3,
                complexity: 'complex',
                prerequisites: ['Path mapping configuration', 'Module availability check'],
                risks: [
                    {
                        type: 'breaking-change',
                        probability: 0.7,
                        impact: 'high',
                        mitigation: 'Verify all import paths before applying fixes'
                    }
                ]
            },
            domainImpact: {
                affectsAstrology: false,
                affectsCampaign: false,
                affectsCore: true,
                specialHandlingRequired: true,
                expertiseRequired: ['Module bundling', 'TypeScript configuration']
            },
            riskProfile: {
                overall: 'high',
                factors: ['Can break builds', 'Affects module loading'],
                mitigationStrategies: ['Manual verification of import paths', 'Build testing after fixes']
            }
        });
        // TypeScript Rules
        this.addRuleClassification('@typescript-eslint/no-explicit-any', {
            ruleId: '@typescript-eslint/no-explicit-any',
            category: {
                primary: 'maintainability',
                secondary: 'type-safety',
                description: 'Explicit any types reduce type safety benefits'
            },
            severity: {
                level: 'medium',
                score: 60,
                factors: [
                    { factor: 'Type Safety', weight: 0.8, description: 'Reduces TypeScript benefits' },
                    { factor: 'Code Quality', weight: 0.6, description: 'Makes code less maintainable' }
                ],
                businessImpact: 'degrading'
            },
            autoFixCapability: {
                canAutoFix: false,
                confidence: 0.2,
                complexity: 'manual-only',
                prerequisites: ['Type analysis', 'Domain knowledge'],
                risks: [
                    {
                        type: 'logic-change',
                        probability: 0.8,
                        impact: 'medium',
                        mitigation: 'Careful type analysis and testing required'
                    }
                ]
            },
            domainImpact: {
                affectsAstrology: true,
                affectsCampaign: true,
                affectsCore: true,
                specialHandlingRequired: true,
                expertiseRequired: ['TypeScript', 'Domain knowledge']
            },
            riskProfile: {
                overall: 'medium',
                factors: ['Requires type analysis', 'Domain-specific knowledge needed'],
                mitigationStrategies: ['Gradual typing', 'Comprehensive testing', 'Domain expert review']
            }
        });
        this.addRuleClassification('@typescript-eslint/no-unused-vars', {
            ruleId: '@typescript-eslint/no-unused-vars',
            category: {
                primary: 'maintainability',
                secondary: 'code-cleanliness',
                description: 'Unused variables clutter code and may indicate bugs'
            },
            severity: {
                level: 'medium',
                score: 45,
                factors: [
                    { factor: 'Code Cleanliness', weight: 0.7, description: 'Improves code readability' },
                    { factor: 'Potential Bugs', weight: 0.5, description: 'May indicate incomplete logic' }
                ],
                businessImpact: 'cosmetic'
            },
            autoFixCapability: {
                canAutoFix: true,
                confidence: 0.7,
                complexity: 'simple',
                prerequisites: ['Variable usage analysis'],
                risks: [
                    {
                        type: 'logic-change',
                        probability: 0.3,
                        impact: 'low',
                        mitigation: 'Verify variable is truly unused before removal'
                    }
                ]
            },
            domainImpact: {
                affectsAstrology: true,
                affectsCampaign: true,
                affectsCore: false,
                specialHandlingRequired: true,
                expertiseRequired: ['Domain knowledge for critical variables']
            },
            riskProfile: {
                overall: 'low',
                factors: ['Usually safe to remove', 'May affect domain calculations'],
                mitigationStrategies: ['Underscore prefix for intentional unused vars', 'Domain expert review for calculations']
            }
        });
        // React Rules
        this.addRuleClassification('react-hooks/exhaustive-deps', {
            ruleId: 'react-hooks/exhaustive-deps',
            category: {
                primary: 'logic',
                secondary: 'react-hooks',
                description: 'useEffect dependencies must be complete to avoid bugs'
            },
            severity: {
                level: 'high',
                score: 80,
                factors: [
                    { factor: 'Runtime Bugs', weight: 0.9, description: 'Can cause infinite loops or stale closures' },
                    { factor: 'Performance', weight: 0.7, description: 'May cause unnecessary re-renders' }
                ],
                businessImpact: 'degrading'
            },
            autoFixCapability: {
                canAutoFix: true,
                confidence: 0.4,
                complexity: 'complex',
                prerequisites: ['Dependency analysis', 'Effect logic understanding'],
                risks: [
                    {
                        type: 'logic-change',
                        probability: 0.6,
                        impact: 'high',
                        mitigation: 'Careful analysis of effect dependencies and potential infinite loops'
                    },
                    {
                        type: 'performance-impact',
                        probability: 0.4,
                        impact: 'medium',
                        mitigation: 'Performance testing after dependency changes'
                    }
                ]
            },
            domainImpact: {
                affectsAstrology: true,
                affectsCampaign: false,
                affectsCore: true,
                specialHandlingRequired: true,
                expertiseRequired: ['React hooks', 'Component lifecycle']
            },
            riskProfile: {
                overall: 'high',
                factors: ['Can cause infinite loops', 'Complex dependency analysis required'],
                mitigationStrategies: ['Manual review of each case', 'Thorough testing', 'useCallback/useMemo optimization']
            }
        });
        // Console Rules
        this.addRuleClassification('no-console', {
            ruleId: 'no-console',
            category: {
                primary: 'style',
                secondary: 'debugging',
                description: 'Console statements should not be in production code'
            },
            severity: {
                level: 'low',
                score: 25,
                factors: [
                    { factor: 'Production Cleanliness', weight: 0.6, description: 'Console logs in production' }
                ],
                businessImpact: 'cosmetic'
            },
            autoFixCapability: {
                canAutoFix: true,
                confidence: 0.8,
                complexity: 'simple',
                prerequisites: ['Context analysis for debugging vs logging'],
                risks: [
                    {
                        type: 'logic-change',
                        probability: 0.2,
                        impact: 'low',
                        mitigation: 'Preserve console.warn and console.error for important logging'
                    }
                ]
            },
            domainImpact: {
                affectsAstrology: true,
                affectsCampaign: true,
                affectsCore: false,
                specialHandlingRequired: true,
                expertiseRequired: ['Debugging context']
            },
            riskProfile: {
                overall: 'low',
                factors: ['May remove important debugging info'],
                mitigationStrategies: ['Preserve error and warning logs', 'Replace with proper logging service']
            }
        });
    }
    /**
     * Add a rule classification to the system
     */
    addRuleClassification(ruleId, classification) {
        this.ruleClassifications.set(ruleId, classification);
    }
    /**
     * Create default classification for unknown rules
     */
    createDefaultClassification(ruleId) {
        return {
            ruleId,
            category: {
                primary: 'style',
                secondary: 'unknown',
                description: `Unknown rule: ${ruleId}`
            },
            severity: {
                level: 'medium',
                score: 50,
                factors: [
                    { factor: 'Unknown Impact', weight: 0.5, description: 'Impact not analyzed' }
                ],
                businessImpact: 'cosmetic'
            },
            autoFixCapability: {
                canAutoFix: false,
                confidence: 0.1,
                complexity: 'manual-only',
                prerequisites: ['Rule analysis'],
                risks: [
                    {
                        type: 'side-effects',
                        probability: 0.5,
                        impact: 'medium',
                        mitigation: 'Manual analysis required for unknown rule'
                    }
                ]
            },
            domainImpact: {
                affectsAstrology: false,
                affectsCampaign: false,
                affectsCore: false,
                specialHandlingRequired: false,
                expertiseRequired: ['ESLint rule analysis']
            },
            riskProfile: {
                overall: 'medium',
                factors: ['Unknown rule impact'],
                mitigationStrategies: ['Manual analysis', 'Conservative approach']
            }
        };
    }
    /**
     * Enhance classification based on context
     */
    enhanceWithContext(classification, message, filePath, hasAutoFix) {
        const enhanced = { ...classification };
        // Update auto-fix capability based on actual availability
        if (hasAutoFix && !enhanced.autoFixCapability.canAutoFix) {
            enhanced.autoFixCapability.canAutoFix = true;
            enhanced.autoFixCapability.confidence = Math.min(0.8, enhanced.autoFixCapability.confidence + 0.3);
        }
        // Enhance domain impact based on file path
        const isDomainFile = this.isDomainSpecificFile(filePath);
        if (isDomainFile.isAstrological) {
            enhanced.domainImpact.affectsAstrology = true;
            enhanced.domainImpact.specialHandlingRequired = true;
            enhanced.domainImpact.expertiseRequired.push('Astrological calculations');
            // Increase severity for astrological files
            enhanced.severity.score = Math.min(100, enhanced.severity.score + 10);
            if (enhanced.severity.level === 'low')
                enhanced.severity.level = 'medium';
        }
        if (isDomainFile.isCampaign) {
            enhanced.domainImpact.affectsCampaign = true;
            enhanced.domainImpact.specialHandlingRequired = true;
            enhanced.domainImpact.expertiseRequired.push('Campaign system');
            // Increase severity for campaign files
            enhanced.severity.score = Math.min(100, enhanced.severity.score + 5);
        }
        // Adjust risk profile based on context
        if (enhanced.domainImpact.specialHandlingRequired) {
            if (enhanced.riskProfile.overall === 'low') {
                enhanced.riskProfile.overall = 'medium';
            }
            enhanced.riskProfile.factors.push('Domain-specific file requires expert review');
        }
        return enhanced;
    }
    /**
     * Check if file is domain-specific
     */
    isDomainSpecificFile(filePath) {
        const isAstrological = this.domainPatterns.astrological.some(pattern => pattern.test(filePath));
        const isCampaign = this.domainPatterns.campaign.some(pattern => pattern.test(filePath));
        return { isAstrological, isCampaign };
    }
}
exports.ErrorClassificationSystem = ErrorClassificationSystem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9saW50aW5nL0Vycm9yQ2xhc3NpZmljYXRpb25TeXN0ZW0udHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOzs7QUEyREg7O0dBRUc7QUFDSCxNQUFhLHlCQUF5QjtJQUlwQztRQUNFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxDQUFDO1FBRXJDLElBQUksQ0FBQyxjQUFjLEdBQUc7WUFDcEIsWUFBWSxFQUFFO2dCQUNaLGtCQUFrQjtnQkFDbEIsbUJBQW1CO2dCQUNuQixtQkFBbUI7Z0JBQ25CLDJCQUEyQjtnQkFDM0IsY0FBYztnQkFDZCxZQUFZO2FBQ2I7WUFDRCxRQUFRLEVBQUU7Z0JBQ1Isd0JBQXdCO2dCQUN4QixtQkFBbUI7Z0JBQ25CLFVBQVU7Z0JBQ1YsVUFBVTthQUNYO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILGFBQWEsQ0FDWCxNQUFjLEVBQ2QsT0FBZSxFQUNmLFFBQWdCLEVBQ2hCLGFBQXNCLEtBQUs7UUFFM0IsdUNBQXVDO1FBQ3ZDLElBQUksY0FBYyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLDJCQUEyQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXRHLDBDQUEwQztRQUMxQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGNBQWMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBRXhGLE9BQU8sY0FBYyxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7T0FFRztJQUNILHFCQUFxQixDQUFDLGVBQXNDO1FBTTFELE1BQU0sYUFBYSxHQUFHLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssS0FBSyxV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T0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUV4RixPQUFPLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBRSxDQUFDO0lBQ3hDLENBQUM7Q0FDRjtBQXpnQkQsOERBeWdCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2xpbnRpbmcvRXJyb3JDbGFzc2lmaWNhdGlvblN5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVycm9yQ2xhc3NpZmljYXRpb25TeXN0ZW0gLSBBZHZhbmNlZCBlcnJvciBjbGFzc2lmaWNhdGlvbiB3aXRoIHNldmVyaXR5IGFuZCBhdXRvLWZpeCBhc3Nlc3NtZW50XG4gKiBcbiAqIFRoaXMgc3lzdGVtIHByb3ZpZGVzIGRldGFpbGVkIGNsYXNzaWZpY2F0aW9uIG9mIGxpbnRpbmcgZXJyb3JzIHdpdGggc29waGlzdGljYXRlZFxuICogc2V2ZXJpdHkgYXNzZXNzbWVudCBhbmQgYXV0by1maXggY2FwYWJpbGl0eSBhbmFseXNpcy5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yQ2xhc3NpZmljYXRpb24ge1xuICBydWxlSWQ6IHN0cmluZztcbiAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnk7XG4gIHNldmVyaXR5OiBFcnJvclNldmVyaXR5O1xuICBhdXRvRml4Q2FwYWJpbGl0eTogQXV0b0ZpeENhcGFiaWxpdHk7XG4gIGRvbWFpbkltcGFjdDogRG9tYWluSW1wYWN0O1xuICByaXNrUHJvZmlsZTogUmlza1Byb2ZpbGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JDYXRlZ29yeSB7XG4gIHByaW1hcnk6ICdzeW50YXgnIHwgJ3N0eWxlJyB8ICdsb2dpYycgfCAncGVyZm9ybWFuY2UnIHwgJ3NlY3VyaXR5JyB8ICdtYWludGFpbmFiaWxpdHknO1xuICBzZWNvbmRhcnk6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvclNldmVyaXR5IHtcbiAgbGV2ZWw6ICdjcml0aWNhbCcgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnIHwgJ2luZm8nO1xuICBzY29yZTogbnVtYmVyOyAvLyAwLTEwMFxuICBmYWN0b3JzOiBTZXZlcml0eUZhY3RvcltdO1xuICBidXNpbmVzc0ltcGFjdDogJ2Jsb2NraW5nJyB8ICdkZWdyYWRpbmcnIHwgJ2Nvc21ldGljJyB8ICdub25lJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXZlcml0eUZhY3RvciB7XG4gIGZhY3Rvcjogc3RyaW5nO1xuICB3ZWlnaHQ6IG51bWJlcjtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRvRml4Q2FwYWJpbGl0eSB7XG4gIGNhbkF1dG9GaXg6IGJvb2xlYW47XG4gIGNvbmZpZGVuY2U6IG51bWJlcjsgLy8gMC0xXG4gIGNvbXBsZXhpdHk6ICd0cml2aWFsJyB8ICdzaW1wbGUnIHwgJ21vZGVyYXRlJyB8ICdjb21wbGV4JyB8ICdtYW51YWwtb25seSc7XG4gIHByZXJlcXVpc2l0ZXM6IHN0cmluZ1tdO1xuICByaXNrczogQXV0b0ZpeFJpc2tbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRvRml4UmlzayB7XG4gIHR5cGU6ICdicmVha2luZy1jaGFuZ2UnIHwgJ2xvZ2ljLWNoYW5nZScgfCAncGVyZm9ybWFuY2UtaW1wYWN0JyB8ICdzaWRlLWVmZmVjdHMnO1xuICBwcm9iYWJpbGl0eTogbnVtYmVyOyAvLyAwLTFcbiAgaW1wYWN0OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICBtaXRpZ2F0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRG9tYWluSW1wYWN0IHtcbiAgYWZmZWN0c0FzdHJvbG9neTogYm9vbGVhbjtcbiAgYWZmZWN0c0NhbXBhaWduOiBib29sZWFuO1xuICBhZmZlY3RzQ29yZTogYm9vbGVhbjtcbiAgc3BlY2lhbEhhbmRsaW5nUmVxdWlyZWQ6IGJvb2xlYW47XG4gIGV4cGVydGlzZVJlcXVpcmVkOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSaXNrUHJvZmlsZSB7XG4gIG92ZXJhbGw6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICBmYWN0b3JzOiBzdHJpbmdbXTtcbiAgbWl0aWdhdGlvblN0cmF0ZWdpZXM6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIE1haW4gRXJyb3JDbGFzc2lmaWNhdGlvblN5c3RlbSBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgRXJyb3JDbGFzc2lmaWNhdGlvblN5c3RlbSB7XG4gIHByaXZhdGUgcnVsZUNsYXNzaWZpY2F0aW9uczogTWFwPHN0cmluZywgRXJyb3JDbGFzc2lmaWNhdGlvbj47XG4gIHByaXZhdGUgZG9tYWluUGF0dGVybnM6IFJlY29yZDxzdHJpbmcsIFJlZ0V4cFtdPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJ1bGVDbGFzc2lmaWNhdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pbml0aWFsaXplUnVsZUNsYXNzaWZpY2F0aW9ucygpO1xuICAgIFxuICAgIHRoaXMuZG9tYWluUGF0dGVybnMgPSB7XG4gICAgICBhc3Ryb2xvZ2ljYWw6IFtcbiAgICAgICAgL1xcL2NhbGN1bGF0aW9uc1xcLy8sXG4gICAgICAgIC9cXC9kYXRhXFwvcGxhbmV0c1xcLy8sXG4gICAgICAgIC9yZWxpYWJsZUFzdHJvbm9teS8sXG4gICAgICAgIC9wbGFuZXRhcnlDb25zaXN0ZW5jeUNoZWNrLyxcbiAgICAgICAgL0FzdHJvbG9naWNhbC8sXG4gICAgICAgIC9BbGNoZW1pY2FsL1xuICAgICAgXSxcbiAgICAgIGNhbXBhaWduOiBbXG4gICAgICAgIC9cXC9zZXJ2aWNlc1xcL2NhbXBhaWduXFwvLyxcbiAgICAgICAgL1xcL3R5cGVzXFwvY2FtcGFpZ24vLFxuICAgICAgICAvQ2FtcGFpZ24vLFxuICAgICAgICAvUHJvZ3Jlc3MvXG4gICAgICBdXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGFzc2lmeSBhIGxpbnRpbmcgZXJyb3Igd2l0aCBjb21wcmVoZW5zaXZlIGFuYWx5c2lzXG4gICAqL1xuICBjbGFzc2lmeUVycm9yKFxuICAgIHJ1bGVJZDogc3RyaW5nLCBcbiAgICBtZXNzYWdlOiBzdHJpbmcsIFxuICAgIGZpbGVQYXRoOiBzdHJpbmcsIFxuICAgIGhhc0F1dG9GaXg6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBFcnJvckNsYXNzaWZpY2F0aW9uIHtcbiAgICAvLyBHZXQgYmFzZSBjbGFzc2lmaWNhdGlvbiBmb3IgdGhlIHJ1bGVcbiAgICBsZXQgY2xhc3NpZmljYXRpb24gPSB0aGlzLnJ1bGVDbGFzc2lmaWNhdGlvbnMuZ2V0KHJ1bGVJZCkgfHwgdGhpcy5jcmVhdGVEZWZhdWx0Q2xhc3NpZmljYXRpb24ocnVsZUlkKTtcbiAgICBcbiAgICAvLyBFbmhhbmNlIGNsYXNzaWZpY2F0aW9uIGJhc2VkIG9uIGNvbnRleHRcbiAgICBjbGFzc2lmaWNhdGlvbiA9IHRoaXMuZW5oYW5jZVdpdGhDb250ZXh0KGNsYXNzaWZpY2F0aW9uLCBtZXNzYWdlLCBmaWxlUGF0aCwgaGFzQXV0b0ZpeCk7XG4gICAgXG4gICAgcmV0dXJuIGNsYXNzaWZpY2F0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzZXZlcml0eSBhc3Nlc3NtZW50IGZvciBtdWx0aXBsZSBlcnJvcnNcbiAgICovXG4gIGFzc2Vzc092ZXJhbGxTZXZlcml0eShjbGFzc2lmaWNhdGlvbnM6IEVycm9yQ2xhc3NpZmljYXRpb25bXSk6IHtcbiAgICBvdmVyYWxsU2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XG4gICAgY3JpdGljYWxDb3VudDogbnVtYmVyO1xuICAgIGhpZ2hDb3VudDogbnVtYmVyO1xuICAgIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIH0ge1xuICAgIGNvbnN0IGNyaXRpY2FsQ291bnQgPSBjbGFzc2lmaWNhdGlvbnMuZmlsdGVyKGMgPT4gYy5zZXZlcml0eS5sZXZlbCA9PT0gJ2NyaXRpY2FsJykubGVuZ3RoO1xuICAgIGNvbnN0IGhpZ2hDb3VudCA9IGNsYXNzaWZpY2F0aW9ucy5maWx0ZXIoYyA9PiBjLnNldmVyaXR5LmxldmVsID09PSAnaGlnaCcpLmxlbmd0aDtcbiAgICBjb25zdCBtZWRpdW1Db3VudCA9IGNsYXNzaWZpY2F0aW9ucy5maWx0ZXIoYyA9PiBjLnNldmVyaXR5LmxldmVsID09PSAnbWVkaXVtJykubGVuZ3RoO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBvdmVyYWxsIHNldmVyaXR5XG4gICAgY29uc3QgdG90YWxTY29yZSA9IGNsYXNzaWZpY2F0aW9ucy5yZWR1Y2UoKHN1bSwgYykgPT4gc3VtICsgYy5zZXZlcml0eS5zY29yZSwgMCk7XG4gICAgY29uc3QgYXZlcmFnZVNjb3JlID0gdG90YWxTY29yZSAvIGNsYXNzaWZpY2F0aW9ucy5sZW5ndGg7XG4gICAgXG4gICAgbGV0IG92ZXJhbGxMZXZlbDogRXJyb3JTZXZlcml0eVsnbGV2ZWwnXTtcbiAgICBpZiAoY3JpdGljYWxDb3VudCA+IDApIG92ZXJhbGxMZXZlbCA9ICdjcml0aWNhbCc7XG4gICAgZWxzZSBpZiAoaGlnaENvdW50ID4gMTApIG92ZXJhbGxMZXZlbCA9ICdoaWdoJztcbiAgICBlbHNlIGlmIChhdmVyYWdlU2NvcmUgPiA3MCkgb3ZlcmFsbExldmVsID0gJ2hpZ2gnO1xuICAgIGVsc2UgaWYgKGF2ZXJhZ2VTY29yZSA+IDQwKSBvdmVyYWxsTGV2ZWwgPSAnbWVkaXVtJztcbiAgICBlbHNlIG92ZXJhbGxMZXZlbCA9ICdsb3cnO1xuICAgIFxuICAgIGNvbnN0IG92ZXJhbGxTZXZlcml0eTogRXJyb3JTZXZlcml0eSA9IHtcbiAgICAgIGxldmVsOiBvdmVyYWxsTGV2ZWwsXG4gICAgICBzY29yZTogTWF0aC5yb3VuZChhdmVyYWdlU2NvcmUpLFxuICAgICAgZmFjdG9yczogW1xuICAgICAgICB7IGZhY3RvcjogJ0NyaXRpY2FsIElzc3VlcycsIHdlaWdodDogY3JpdGljYWxDb3VudCwgZGVzY3JpcHRpb246IGAke2NyaXRpY2FsQ291bnR9IGNyaXRpY2FsIGlzc3VlcyBmb3VuZGAgfSxcbiAgICAgICAgeyBmYWN0b3I6ICdIaWdoIFByaW9yaXR5IElzc3VlcycsIHdlaWdodDogaGlnaENvdW50LCBkZXNjcmlwdGlvbjogYCR7aGlnaENvdW50fSBoaWdoIHByaW9yaXR5IGlzc3VlcyBmb3VuZGAgfSxcbiAgICAgICAgeyBmYWN0b3I6ICdNZWRpdW0gUHJpb3JpdHkgSXNzdWVzJywgd2VpZ2h0OiBtZWRpdW1Db3VudCwgZGVzY3JpcHRpb246IGAke21lZGl1bUNvdW50fSBtZWRpdW0gcHJpb3JpdHkgaXNzdWVzIGZvdW5kYCB9XG4gICAgICBdLFxuICAgICAgYnVzaW5lc3NJbXBhY3Q6IGNyaXRpY2FsQ291bnQgPiAwID8gJ2Jsb2NraW5nJyA6IFxuICAgICAgICAgICAgICAgICAgICAgaGlnaENvdW50ID4gNSA/ICdkZWdyYWRpbmcnIDogXG4gICAgICAgICAgICAgICAgICAgICBtZWRpdW1Db3VudCA+IDIwID8gJ2Nvc21ldGljJyA6ICdub25lJ1xuICAgIH07XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgcmVjb21tZW5kYXRpb25zXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChjcml0aWNhbENvdW50ID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0FkZHJlc3MgY3JpdGljYWwgaXNzdWVzIGltbWVkaWF0ZWx5IGJlZm9yZSBwcm9jZWVkaW5nJyk7XG4gICAgfVxuICAgIGlmIChoaWdoQ291bnQgPiAxMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1ByaW9yaXRpemUgaGlnaC1zZXZlcml0eSBpc3N1ZXMgaW4gbmV4dCBzcHJpbnQnKTtcbiAgICB9XG4gICAgaWYgKGF2ZXJhZ2VTY29yZSA+IDUwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnQ29uc2lkZXIgaW1wbGVtZW50aW5nIGF1dG9tYXRlZCBmaXhpbmcgZm9yIGVsaWdpYmxlIGlzc3VlcycpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBvdmVyYWxsU2V2ZXJpdHksIGNyaXRpY2FsQ291bnQsIGhpZ2hDb3VudCwgcmVjb21tZW5kYXRpb25zIH07XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBhdXRvLWZpeCBjYXBhYmlsaXRpZXMgYWNyb3NzIG11bHRpcGxlIGVycm9yc1xuICAgKi9cbiAgYW5hbHl6ZUF1dG9GaXhDYXBhYmlsaXRpZXMoY2xhc3NpZmljYXRpb25zOiBFcnJvckNsYXNzaWZpY2F0aW9uW10pOiB7XG4gICAgdG90YWxBdXRvRml4YWJsZTogbnVtYmVyO1xuICAgIHNhZmVBdXRvRml4ZXM6IEVycm9yQ2xhc3NpZmljYXRpb25bXTtcbiAgICByaXNreUF1dG9GaXhlczogRXJyb3JDbGFzc2lmaWNhdGlvbltdO1xuICAgIG1hbnVhbE9ubHlGaXhlczogRXJyb3JDbGFzc2lmaWNhdGlvbltdO1xuICAgIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIH0ge1xuICAgIGNvbnN0IGF1dG9GaXhhYmxlID0gY2xhc3NpZmljYXRpb25zLmZpbHRlcihjID0+IGMuYXV0b0ZpeENhcGFiaWxpdHkuY2FuQXV0b0ZpeCk7XG4gICAgY29uc3Qgc2FmZUF1dG9GaXhlcyA9IGF1dG9GaXhhYmxlLmZpbHRlcihjID0+IFxuICAgICAgYy5hdXRvRml4Q2FwYWJpbGl0eS5jb25maWRlbmNlID4gMC44ICYmIFxuICAgICAgYy5yaXNrUHJvZmlsZS5vdmVyYWxsID09PSAnbG93J1xuICAgICk7XG4gICAgY29uc3Qgcmlza3lBdXRvRml4ZXMgPSBhdXRvRml4YWJsZS5maWx0ZXIoYyA9PiBcbiAgICAgIGMuYXV0b0ZpeENhcGFiaWxpdHkuY29uZmlkZW5jZSA8PSAwLjggfHwgXG4gICAgICBjLnJpc2tQcm9maWxlLm92ZXJhbGwgIT09ICdsb3cnXG4gICAgKTtcbiAgICBjb25zdCBtYW51YWxPbmx5Rml4ZXMgPSBjbGFzc2lmaWNhdGlvbnMuZmlsdGVyKGMgPT4gIWMuYXV0b0ZpeENhcGFiaWxpdHkuY2FuQXV0b0ZpeCk7XG4gICAgXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmIChzYWZlQXV0b0ZpeGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKGAke3NhZmVBdXRvRml4ZXMubGVuZ3RofSBpc3N1ZXMgY2FuIGJlIHNhZmVseSBhdXRvLWZpeGVkYCk7XG4gICAgfVxuICAgIGlmIChyaXNreUF1dG9GaXhlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgJHtyaXNreUF1dG9GaXhlcy5sZW5ndGh9IGF1dG8tZml4ZXMgcmVxdWlyZSBjYXJlZnVsIHZhbGlkYXRpb25gKTtcbiAgICB9XG4gICAgaWYgKG1hbnVhbE9ubHlGaXhlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgJHttYW51YWxPbmx5Rml4ZXMubGVuZ3RofSBpc3N1ZXMgcmVxdWlyZSBtYW51YWwgaW50ZXJ2ZW50aW9uYCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEF1dG9GaXhhYmxlOiBhdXRvRml4YWJsZS5sZW5ndGgsXG4gICAgICBzYWZlQXV0b0ZpeGVzLFxuICAgICAgcmlza3lBdXRvRml4ZXMsXG4gICAgICBtYW51YWxPbmx5Rml4ZXMsXG4gICAgICByZWNvbW1lbmRhdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcnVsZSBjbGFzc2lmaWNhdGlvbnMgd2l0aCBjb21wcmVoZW5zaXZlIGRhdGFcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVJ1bGVDbGFzc2lmaWNhdGlvbnMoKTogdm9pZCB7XG4gICAgLy8gSW1wb3J0L0V4cG9ydCBSdWxlc1xuICAgIHRoaXMuYWRkUnVsZUNsYXNzaWZpY2F0aW9uKCdpbXBvcnQvb3JkZXInLCB7XG4gICAgICBydWxlSWQ6ICdpbXBvcnQvb3JkZXInLFxuICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgcHJpbWFyeTogJ3N0eWxlJyxcbiAgICAgICAgc2Vjb25kYXJ5OiAnaW1wb3J0LW9yZ2FuaXphdGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0IHN0YXRlbWVudHMgc2hvdWxkIGJlIG9yZ2FuaXplZCBjb25zaXN0ZW50bHknXG4gICAgICB9LFxuICAgICAgc2V2ZXJpdHk6IHtcbiAgICAgICAgbGV2ZWw6ICdsb3cnLFxuICAgICAgICBzY29yZTogMjAsXG4gICAgICAgIGZhY3RvcnM6IFtcbiAgICAgICAgICB7IGZhY3RvcjogJ0NvZGUgUmVhZGFiaWxpdHknLCB3ZWlnaHQ6IDAuOCwgZGVzY3JpcHRpb246ICdBZmZlY3RzIGNvZGUgb3JnYW5pemF0aW9uJyB9XG4gICAgICAgIF0sXG4gICAgICAgIGJ1c2luZXNzSW1wYWN0OiAnY29zbWV0aWMnXG4gICAgICB9LFxuICAgICAgYXV0b0ZpeENhcGFiaWxpdHk6IHtcbiAgICAgICAgY2FuQXV0b0ZpeDogdHJ1ZSxcbiAgICAgICAgY29uZmlkZW5jZTogMC45NSxcbiAgICAgICAgY29tcGxleGl0eTogJ3RyaXZpYWwnLFxuICAgICAgICBwcmVyZXF1aXNpdGVzOiBbXSxcbiAgICAgICAgcmlza3M6IFtdXG4gICAgICB9LFxuICAgICAgZG9tYWluSW1wYWN0OiB7XG4gICAgICAgIGFmZmVjdHNBc3Ryb2xvZ3k6IGZhbHNlLFxuICAgICAgICBhZmZlY3RzQ2FtcGFpZ246IGZhbHNlLFxuICAgICAgICBhZmZlY3RzQ29yZTogZmFsc2UsXG4gICAgICAgIHNwZWNpYWxIYW5kbGluZ1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZXhwZXJ0aXNlUmVxdWlyZWQ6IFtdXG4gICAgICB9LFxuICAgICAgcmlza1Byb2ZpbGU6IHtcbiAgICAgICAgb3ZlcmFsbDogJ2xvdycsXG4gICAgICAgIGZhY3RvcnM6IFsnQ29zbWV0aWMgY2hhbmdlIG9ubHknXSxcbiAgICAgICAgbWl0aWdhdGlvblN0cmF0ZWdpZXM6IFsnQXV0b21hdGVkIGZpeGluZyB3aXRoIGJ1aWxkIHZhbGlkYXRpb24nXVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSdWxlQ2xhc3NpZmljYXRpb24oJ2ltcG9ydC9uby11bnJlc29sdmVkJywge1xuICAgICAgcnVsZUlkOiAnaW1wb3J0L25vLXVucmVzb2x2ZWQnLFxuICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgcHJpbWFyeTogJ2xvZ2ljJyxcbiAgICAgICAgc2Vjb25kYXJ5OiAnbW9kdWxlLXJlc29sdXRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ltcG9ydCBwYXRocyBtdXN0IHJlc29sdmUgdG8gYWN0dWFsIG1vZHVsZXMnXG4gICAgICB9LFxuICAgICAgc2V2ZXJpdHk6IHtcbiAgICAgICAgbGV2ZWw6ICdoaWdoJyxcbiAgICAgICAgc2NvcmU6IDg1LFxuICAgICAgICBmYWN0b3JzOiBbXG4gICAgICAgICAgeyBmYWN0b3I6ICdCdWlsZCBCcmVha2luZycsIHdlaWdodDogMS4wLCBkZXNjcmlwdGlvbjogJ0NhbiBicmVhayBhcHBsaWNhdGlvbiBidWlsZCcgfSxcbiAgICAgICAgICB7IGZhY3RvcjogJ1J1bnRpbWUgRXJyb3JzJywgd2VpZ2h0OiAwLjksIGRlc2NyaXB0aW9uOiAnTWF5IGNhdXNlIHJ1bnRpbWUgZmFpbHVyZXMnIH1cbiAgICAgICAgXSxcbiAgICAgICAgYnVzaW5lc3NJbXBhY3Q6ICdibG9ja2luZydcbiAgICAgIH0sXG4gICAgICBhdXRvRml4Q2FwYWJpbGl0eToge1xuICAgICAgICBjYW5BdXRvRml4OiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogMC4zLFxuICAgICAgICBjb21wbGV4aXR5OiAnY29tcGxleCcsXG4gICAgICAgIHByZXJlcXVpc2l0ZXM6IFsnUGF0aCBtYXBwaW5nIGNvbmZpZ3VyYXRpb24nLCAnTW9kdWxlIGF2YWlsYWJpbGl0eSBjaGVjayddLFxuICAgICAgICByaXNrczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICdicmVha2luZy1jaGFuZ2UnLFxuICAgICAgICAgICAgcHJvYmFiaWxpdHk6IDAuNyxcbiAgICAgICAgICAgIGltcGFjdDogJ2hpZ2gnLFxuICAgICAgICAgICAgbWl0aWdhdGlvbjogJ1ZlcmlmeSBhbGwgaW1wb3J0IHBhdGhzIGJlZm9yZSBhcHBseWluZyBmaXhlcydcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBkb21haW5JbXBhY3Q6IHtcbiAgICAgICAgYWZmZWN0c0FzdHJvbG9neTogZmFsc2UsXG4gICAgICAgIGFmZmVjdHNDYW1wYWlnbjogZmFsc2UsXG4gICAgICAgIGFmZmVjdHNDb3JlOiB0cnVlLFxuICAgICAgICBzcGVjaWFsSGFuZGxpbmdSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZXhwZXJ0aXNlUmVxdWlyZWQ6IFsnTW9kdWxlIGJ1bmRsaW5nJywgJ1R5cGVTY3JpcHQgY29uZmlndXJhdGlvbiddXG4gICAgICB9LFxuICAgICAgcmlza1Byb2ZpbGU6IHtcbiAgICAgICAgb3ZlcmFsbDogJ2hpZ2gnLFxuICAgICAgICBmYWN0b3JzOiBbJ0NhbiBicmVhayBidWlsZHMnLCAnQWZmZWN0cyBtb2R1bGUgbG9hZGluZyddLFxuICAgICAgICBtaXRpZ2F0aW9uU3RyYXRlZ2llczogWydNYW51YWwgdmVyaWZpY2F0aW9uIG9mIGltcG9ydCBwYXRocycsICdCdWlsZCB0ZXN0aW5nIGFmdGVyIGZpeGVzJ11cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFR5cGVTY3JpcHQgUnVsZXNcbiAgICB0aGlzLmFkZFJ1bGVDbGFzc2lmaWNhdGlvbignQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScsIHtcbiAgICAgIHJ1bGVJZDogJ0B0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnknLFxuICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgcHJpbWFyeTogJ21haW50YWluYWJpbGl0eScsXG4gICAgICAgIHNlY29uZGFyeTogJ3R5cGUtc2FmZXR5JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdFeHBsaWNpdCBhbnkgdHlwZXMgcmVkdWNlIHR5cGUgc2FmZXR5IGJlbmVmaXRzJ1xuICAgICAgfSxcbiAgICAgIHNldmVyaXR5OiB7XG4gICAgICAgIGxldmVsOiAnbWVkaXVtJyxcbiAgICAgICAgc2NvcmU6IDYwLFxuICAgICAgICBmYWN0b3JzOiBbXG4gICAgICAgICAgeyBmYWN0b3I6ICdUeXBlIFNhZmV0eScsIHdlaWdodDogMC44LCBkZXNjcmlwdGlvbjogJ1JlZHVjZXMgVHlwZVNjcmlwdCBiZW5lZml0cycgfSxcbiAgICAgICAgICB7IGZhY3RvcjogJ0NvZGUgUXVhbGl0eScsIHdlaWdodDogMC42LCBkZXNjcmlwdGlvbjogJ01ha2VzIGNvZGUgbGVzcyBtYWludGFpbmFibGUnIH1cbiAgICAgICAgXSxcbiAgICAgICAgYnVzaW5lc3NJbXBhY3Q6ICdkZWdyYWRpbmcnXG4gICAgICB9LFxuICAgICAgYXV0b0ZpeENhcGFiaWxpdHk6IHtcbiAgICAgICAgY2FuQXV0b0ZpeDogZmFsc2UsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuMixcbiAgICAgICAgY29tcGxleGl0eTogJ21hbnVhbC1vbmx5JyxcbiAgICAgICAgcHJlcmVxdWlzaXRlczogWydUeXBlIGFuYWx5c2lzJywgJ0RvbWFpbiBrbm93bGVkZ2UnXSxcbiAgICAgICAgcmlza3M6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAnbG9naWMtY2hhbmdlJyxcbiAgICAgICAgICAgIHByb2JhYmlsaXR5OiAwLjgsXG4gICAgICAgICAgICBpbXBhY3Q6ICdtZWRpdW0nLFxuICAgICAgICAgICAgbWl0aWdhdGlvbjogJ0NhcmVmdWwgdHlwZSBhbmFseXNpcyBhbmQgdGVzdGluZyByZXF1aXJlZCdcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBkb21haW5JbXBhY3Q6IHtcbiAgICAgICAgYWZmZWN0c0FzdHJvbG9neTogdHJ1ZSxcbiAgICAgICAgYWZmZWN0c0NhbXBhaWduOiB0cnVlLFxuICAgICAgICBhZmZlY3RzQ29yZTogdHJ1ZSxcbiAgICAgICAgc3BlY2lhbEhhbmRsaW5nUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGV4cGVydGlzZVJlcXVpcmVkOiBbJ1R5cGVTY3JpcHQnLCAnRG9tYWluIGtub3dsZWRnZSddXG4gICAgICB9LFxuICAgICAgcmlza1Byb2ZpbGU6IHtcbiAgICAgICAgb3ZlcmFsbDogJ21lZGl1bScsXG4gICAgICAgIGZhY3RvcnM6IFsnUmVxdWlyZXMgdHlwZSBhbmFseXNpcycsICdEb21haW4tc3BlY2lmaWMga25vd2xlZGdlIG5lZWRlZCddLFxuICAgICAgICBtaXRpZ2F0aW9uU3RyYXRlZ2llczogWydHcmFkdWFsIHR5cGluZycsICdDb21wcmVoZW5zaXZlIHRlc3RpbmcnLCAnRG9tYWluIGV4cGVydCByZXZpZXcnXVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSdWxlQ2xhc3NpZmljYXRpb24oJ0B0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycycsIHtcbiAgICAgIHJ1bGVJZDogJ0B0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycycsXG4gICAgICBjYXRlZ29yeToge1xuICAgICAgICBwcmltYXJ5OiAnbWFpbnRhaW5hYmlsaXR5JyxcbiAgICAgICAgc2Vjb25kYXJ5OiAnY29kZS1jbGVhbmxpbmVzcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVW51c2VkIHZhcmlhYmxlcyBjbHV0dGVyIGNvZGUgYW5kIG1heSBpbmRpY2F0ZSBidWdzJ1xuICAgICAgfSxcbiAgICAgIHNldmVyaXR5OiB7XG4gICAgICAgIGxldmVsOiAnbWVkaXVtJyxcbiAgICAgICAgc2NvcmU6IDQ1LFxuICAgICAgICBmYWN0b3JzOiBbXG4gICAgICAgICAgeyBmYWN0b3I6ICdDb2RlIENsZWFubGluZXNzJywgd2VpZ2h0OiAwLjcsIGRlc2NyaXB0aW9uOiAnSW1wcm92ZXMgY29kZSByZWFkYWJpbGl0eScgfSxcbiAgICAgICAgICB7IGZhY3RvcjogJ1BvdGVudGlhbCBCdWdzJywgd2VpZ2h0OiAwLjUsIGRlc2NyaXB0aW9uOiAnTWF5IGluZGljYXRlIGluY29tcGxldGUgbG9naWMnIH1cbiAgICAgICAgXSxcbiAgICAgICAgYnVzaW5lc3NJbXBhY3Q6ICdjb3NtZXRpYydcbiAgICAgIH0sXG4gICAgICBhdXRvRml4Q2FwYWJpbGl0eToge1xuICAgICAgICBjYW5BdXRvRml4OiB0cnVlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjcsXG4gICAgICAgIGNvbXBsZXhpdHk6ICdzaW1wbGUnLFxuICAgICAgICBwcmVyZXF1aXNpdGVzOiBbJ1ZhcmlhYmxlIHVzYWdlIGFuYWx5c2lzJ10sXG4gICAgICAgIHJpc2tzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ2xvZ2ljLWNoYW5nZScsXG4gICAgICAgICAgICBwcm9iYWJpbGl0eTogMC4zLFxuICAgICAgICAgICAgaW1wYWN0OiAnbG93JyxcbiAgICAgICAgICAgIG1pdGlnYXRpb246ICdWZXJpZnkgdmFyaWFibGUgaXMgdHJ1bHkgdW51c2VkIGJlZm9yZSByZW1vdmFsJ1xuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGRvbWFpbkltcGFjdDoge1xuICAgICAgICBhZmZlY3RzQXN0cm9sb2d5OiB0cnVlLFxuICAgICAgICBhZmZlY3RzQ2FtcGFpZ246IHRydWUsXG4gICAgICAgIGFmZmVjdHNDb3JlOiBmYWxzZSxcbiAgICAgICAgc3BlY2lhbEhhbmRsaW5nUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGV4cGVydGlzZVJlcXVpcmVkOiBbJ0RvbWFpbiBrbm93bGVkZ2UgZm9yIGNyaXRpY2FsIHZhcmlhYmxlcyddXG4gICAgICB9LFxuICAgICAgcmlza1Byb2ZpbGU6IHtcbiAgICAgICAgb3ZlcmFsbDogJ2xvdycsXG4gICAgICAgIGZhY3RvcnM6IFsnVXN1YWxseSBzYWZlIHRvIHJlbW92ZScsICdNYXkgYWZmZWN0IGRvbWFpbiBjYWxjdWxhdGlvbnMnXSxcbiAgICAgICAgbWl0aWdhdGlvblN0cmF0ZWdpZXM6IFsnVW5kZXJzY29yZSBwcmVmaXggZm9yIGludGVudGlvbmFsIHVudXNlZCB2YXJzJywgJ0RvbWFpbiBleHBlcnQgcmV2aWV3IGZvciBjYWxjdWxhdGlvbnMnXVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVhY3QgUnVsZXNcbiAgICB0aGlzLmFkZFJ1bGVDbGFzc2lmaWNhdGlvbigncmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzJywge1xuICAgICAgcnVsZUlkOiAncmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzJyxcbiAgICAgIGNhdGVnb3J5OiB7XG4gICAgICAgIHByaW1hcnk6ICdsb2dpYycsXG4gICAgICAgIHNlY29uZGFyeTogJ3JlYWN0LWhvb2tzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICd1c2VFZmZlY3QgZGVwZW5kZW5jaWVzIG11c3QgYmUgY29tcGxldGUgdG8gYXZvaWQgYnVncydcbiAgICAgIH0sXG4gICAgICBzZXZlcml0eToge1xuICAgICAgICBsZXZlbDogJ2hpZ2gnLFxuICAgICAgICBzY29yZTogODAsXG4gICAgICAgIGZhY3RvcnM6IFtcbiAgICAgICAgICB7IGZhY3RvcjogJ1J1bnRpbWUgQnVncycsIHdlaWdodDogMC45LCBkZXNjcmlwdGlvbjogJ0NhbiBjYXVzZSBpbmZpbml0ZSBsb29wcyBvciBzdGFsZSBjbG9zdXJlcycgfSxcbiAgICAgICAgICB7IGZhY3RvcjogJ1BlcmZvcm1hbmNlJywgd2VpZ2h0OiAwLjcsIGRlc2NyaXB0aW9uOiAnTWF5IGNhdXNlIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMnIH1cbiAgICAgICAgXSxcbiAgICAgICAgYnVzaW5lc3NJbXBhY3Q6ICdkZWdyYWRpbmcnXG4gICAgICB9LFxuICAgICAgYXV0b0ZpeENhcGFiaWxpdHk6IHtcbiAgICAgICAgY2FuQXV0b0ZpeDogdHJ1ZSxcbiAgICAgICAgY29uZmlkZW5jZTogMC40LFxuICAgICAgICBjb21wbGV4aXR5OiAnY29tcGxleCcsXG4gICAgICAgIHByZXJlcXVpc2l0ZXM6IFsnRGVwZW5kZW5jeSBhbmFseXNpcycsICdFZmZlY3QgbG9naWMgdW5kZXJzdGFuZGluZyddLFxuICAgICAgICByaXNrczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICdsb2dpYy1jaGFuZ2UnLFxuICAgICAgICAgICAgcHJvYmFiaWxpdHk6IDAuNixcbiAgICAgICAgICAgIGltcGFjdDogJ2hpZ2gnLFxuICAgICAgICAgICAgbWl0aWdhdGlvbjogJ0NhcmVmdWwgYW5hbHlzaXMgb2YgZWZmZWN0IGRlcGVuZGVuY2llcyBhbmQgcG90ZW50aWFsIGluZmluaXRlIGxvb3BzJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ3BlcmZvcm1hbmNlLWltcGFjdCcsXG4gICAgICAgICAgICBwcm9iYWJpbGl0eTogMC40LFxuICAgICAgICAgICAgaW1wYWN0OiAnbWVkaXVtJyxcbiAgICAgICAgICAgIG1pdGlnYXRpb246ICdQZXJmb3JtYW5jZSB0ZXN0aW5nIGFmdGVyIGRlcGVuZGVuY3kgY2hhbmdlcydcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBkb21haW5JbXBhY3Q6IHtcbiAgICAgICAgYWZmZWN0c0FzdHJvbG9neTogdHJ1ZSxcbiAgICAgICAgYWZmZWN0c0NhbXBhaWduOiBmYWxzZSxcbiAgICAgICAgYWZmZWN0c0NvcmU6IHRydWUsXG4gICAgICAgIHNwZWNpYWxIYW5kbGluZ1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBleHBlcnRpc2VSZXF1aXJlZDogWydSZWFjdCBob29rcycsICdDb21wb25lbnQgbGlmZWN5Y2xlJ11cbiAgICAgIH0sXG4gICAgICByaXNrUHJvZmlsZToge1xuICAgICAgICBvdmVyYWxsOiAnaGlnaCcsXG4gICAgICAgIGZhY3RvcnM6IFsnQ2FuIGNhdXNlIGluZmluaXRlIGxvb3BzJywgJ0NvbXBsZXggZGVwZW5kZW5jeSBhbmFseXNpcyByZXF1aXJlZCddLFxuICAgICAgICBtaXRpZ2F0aW9uU3RyYXRlZ2llczogWydNYW51YWwgcmV2aWV3IG9mIGVhY2ggY2FzZScsICdUaG9yb3VnaCB0ZXN0aW5nJywgJ3VzZUNhbGxiYWNrL3VzZU1lbW8gb3B0aW1pemF0aW9uJ11cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENvbnNvbGUgUnVsZXNcbiAgICB0aGlzLmFkZFJ1bGVDbGFzc2lmaWNhdGlvbignbm8tY29uc29sZScsIHtcbiAgICAgIHJ1bGVJZDogJ25vLWNvbnNvbGUnLFxuICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgcHJpbWFyeTogJ3N0eWxlJyxcbiAgICAgICAgc2Vjb25kYXJ5OiAnZGVidWdnaW5nJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb25zb2xlIHN0YXRlbWVudHMgc2hvdWxkIG5vdCBiZSBpbiBwcm9kdWN0aW9uIGNvZGUnXG4gICAgICB9LFxuICAgICAgc2V2ZXJpdHk6IHtcbiAgICAgICAgbGV2ZWw6ICdsb3cnLFxuICAgICAgICBzY29yZTogMjUsXG4gICAgICAgIGZhY3RvcnM6IFtcbiAgICAgICAgICB7IGZhY3RvcjogJ1Byb2R1Y3Rpb24gQ2xlYW5saW5lc3MnLCB3ZWlnaHQ6IDAuNiwgZGVzY3JpcHRpb246ICdDb25zb2xlIGxvZ3MgaW4gcHJvZHVjdGlvbicgfVxuICAgICAgICBdLFxuICAgICAgICBidXNpbmVzc0ltcGFjdDogJ2Nvc21ldGljJ1xuICAgICAgfSxcbiAgICAgIGF1dG9GaXhDYXBhYmlsaXR5OiB7XG4gICAgICAgIGNhbkF1dG9GaXg6IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuOCxcbiAgICAgICAgY29tcGxleGl0eTogJ3NpbXBsZScsXG4gICAgICAgIHByZXJlcXVpc2l0ZXM6IFsnQ29udGV4dCBhbmFseXNpcyBmb3IgZGVidWdnaW5nIHZzIGxvZ2dpbmcnXSxcbiAgICAgICAgcmlza3M6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAnbG9naWMtY2hhbmdlJyxcbiAgICAgICAgICAgIHByb2JhYmlsaXR5OiAwLjIsXG4gICAgICAgICAgICBpbXBhY3Q6ICdsb3cnLFxuICAgICAgICAgICAgbWl0aWdhdGlvbjogJ1ByZXNlcnZlIGNvbnNvbGUud2FybiBhbmQgY29uc29sZS5lcnJvciBmb3IgaW1wb3J0YW50IGxvZ2dpbmcnXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgZG9tYWluSW1wYWN0OiB7XG4gICAgICAgIGFmZmVjdHNBc3Ryb2xvZ3k6IHRydWUsXG4gICAgICAgIGFmZmVjdHNDYW1wYWlnbjogdHJ1ZSxcbiAgICAgICAgYWZmZWN0c0NvcmU6IGZhbHNlLFxuICAgICAgICBzcGVjaWFsSGFuZGxpbmdSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZXhwZXJ0aXNlUmVxdWlyZWQ6IFsnRGVidWdnaW5nIGNvbnRleHQnXVxuICAgICAgfSxcbiAgICAgIHJpc2tQcm9maWxlOiB7XG4gICAgICAgIG92ZXJhbGw6ICdsb3cnLFxuICAgICAgICBmYWN0b3JzOiBbJ01heSByZW1vdmUgaW1wb3J0YW50IGRlYnVnZ2luZyBpbmZvJ10sXG4gICAgICAgIG1pdGlnYXRpb25TdHJhdGVnaWVzOiBbJ1ByZXNlcnZlIGVycm9yIGFuZCB3YXJuaW5nIGxvZ3MnLCAnUmVwbGFjZSB3aXRoIHByb3BlciBsb2dnaW5nIHNlcnZpY2UnXVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHJ1bGUgY2xhc3NpZmljYXRpb24gdG8gdGhlIHN5c3RlbVxuICAgKi9cbiAgcHJpdmF0ZSBhZGRSdWxlQ2xhc3NpZmljYXRpb24ocnVsZUlkOiBzdHJpbmcsIGNsYXNzaWZpY2F0aW9uOiBFcnJvckNsYXNzaWZpY2F0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5ydWxlQ2xhc3NpZmljYXRpb25zLnNldChydWxlSWQsIGNsYXNzaWZpY2F0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgZGVmYXVsdCBjbGFzc2lmaWNhdGlvbiBmb3IgdW5rbm93biBydWxlc1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0Q2xhc3NpZmljYXRpb24ocnVsZUlkOiBzdHJpbmcpOiBFcnJvckNsYXNzaWZpY2F0aW9uIHtcbiAgICByZXR1cm4ge1xuICAgICAgcnVsZUlkLFxuICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgcHJpbWFyeTogJ3N0eWxlJyxcbiAgICAgICAgc2Vjb25kYXJ5OiAndW5rbm93bicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgVW5rbm93biBydWxlOiAke3J1bGVJZH1gXG4gICAgICB9LFxuICAgICAgc2V2ZXJpdHk6IHtcbiAgICAgICAgbGV2ZWw6ICdtZWRpdW0nLFxuICAgICAgICBzY29yZTogNTAsXG4gICAgICAgIGZhY3RvcnM6IFtcbiAgICAgICAgICB7IGZhY3RvcjogJ1Vua25vd24gSW1wYWN0Jywgd2VpZ2h0OiAwLjUsIGRlc2NyaXB0aW9uOiAnSW1wYWN0IG5vdCBhbmFseXplZCcgfVxuICAgICAgICBdLFxuICAgICAgICBidXNpbmVzc0ltcGFjdDogJ2Nvc21ldGljJ1xuICAgICAgfSxcbiAgICAgIGF1dG9GaXhDYXBhYmlsaXR5OiB7XG4gICAgICAgIGNhbkF1dG9GaXg6IGZhbHNlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjEsXG4gICAgICAgIGNvbXBsZXhpdHk6ICdtYW51YWwtb25seScsXG4gICAgICAgIHByZXJlcXVpc2l0ZXM6IFsnUnVsZSBhbmFseXNpcyddLFxuICAgICAgICByaXNrczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICdzaWRlLWVmZmVjdHMnLFxuICAgICAgICAgICAgcHJvYmFiaWxpdHk6IDAuNSxcbiAgICAgICAgICAgIGltcGFjdDogJ21lZGl1bScsXG4gICAgICAgICAgICBtaXRpZ2F0aW9uOiAnTWFudWFsIGFuYWx5c2lzIHJlcXVpcmVkIGZvciB1bmtub3duIHJ1bGUnXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgZG9tYWluSW1wYWN0OiB7XG4gICAgICAgIGFmZmVjdHNBc3Ryb2xvZ3k6IGZhbHNlLFxuICAgICAgICBhZmZlY3RzQ2FtcGFpZ246IGZhbHNlLFxuICAgICAgICBhZmZlY3RzQ29yZTogZmFsc2UsXG4gICAgICAgIHNwZWNpYWxIYW5kbGluZ1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZXhwZXJ0aXNlUmVxdWlyZWQ6IFsnRVNMaW50IHJ1bGUgYW5hbHlzaXMnXVxuICAgICAgfSxcbiAgICAgIHJpc2tQcm9maWxlOiB7XG4gICAgICAgIG92ZXJhbGw6ICdtZWRpdW0nLFxuICAgICAgICBmYWN0b3JzOiBbJ1Vua25vd24gcnVsZSBpbXBhY3QnXSxcbiAgICAgICAgbWl0aWdhdGlvblN0cmF0ZWdpZXM6IFsnTWFudWFsIGFuYWx5c2lzJywgJ0NvbnNlcnZhdGl2ZSBhcHByb2FjaCddXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlIGNsYXNzaWZpY2F0aW9uIGJhc2VkIG9uIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgZW5oYW5jZVdpdGhDb250ZXh0KFxuICAgIGNsYXNzaWZpY2F0aW9uOiBFcnJvckNsYXNzaWZpY2F0aW9uLFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIGhhc0F1dG9GaXg6IGJvb2xlYW5cbiAgKTogRXJyb3JDbGFzc2lmaWNhdGlvbiB7XG4gICAgY29uc3QgZW5oYW5jZWQgPSB7IC4uLmNsYXNzaWZpY2F0aW9uIH07XG4gICAgXG4gICAgLy8gVXBkYXRlIGF1dG8tZml4IGNhcGFiaWxpdHkgYmFzZWQgb24gYWN0dWFsIGF2YWlsYWJpbGl0eVxuICAgIGlmIChoYXNBdXRvRml4ICYmICFlbmhhbmNlZC5hdXRvRml4Q2FwYWJpbGl0eS5jYW5BdXRvRml4KSB7XG4gICAgICBlbmhhbmNlZC5hdXRvRml4Q2FwYWJpbGl0eS5jYW5BdXRvRml4ID0gdHJ1ZTtcbiAgICAgIGVuaGFuY2VkLmF1dG9GaXhDYXBhYmlsaXR5LmNvbmZpZGVuY2UgPSBNYXRoLm1pbigwLjgsIGVuaGFuY2VkLmF1dG9GaXhDYXBhYmlsaXR5LmNvbmZpZGVuY2UgKyAwLjMpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbmhhbmNlIGRvbWFpbiBpbXBhY3QgYmFzZWQgb24gZmlsZSBwYXRoXG4gICAgY29uc3QgaXNEb21haW5GaWxlID0gdGhpcy5pc0RvbWFpblNwZWNpZmljRmlsZShmaWxlUGF0aCk7XG4gICAgaWYgKGlzRG9tYWluRmlsZS5pc0FzdHJvbG9naWNhbCkge1xuICAgICAgZW5oYW5jZWQuZG9tYWluSW1wYWN0LmFmZmVjdHNBc3Ryb2xvZ3kgPSB0cnVlO1xuICAgICAgZW5oYW5jZWQuZG9tYWluSW1wYWN0LnNwZWNpYWxIYW5kbGluZ1JlcXVpcmVkID0gdHJ1ZTtcbiAgICAgIGVuaGFuY2VkLmRvbWFpbkltcGFjdC5leHBlcnRpc2VSZXF1aXJlZC5wdXNoKCdBc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb25zJyk7XG4gICAgICBcbiAgICAgIC8vIEluY3JlYXNlIHNldmVyaXR5IGZvciBhc3Ryb2xvZ2ljYWwgZmlsZXNcbiAgICAgIGVuaGFuY2VkLnNldmVyaXR5LnNjb3JlID0gTWF0aC5taW4oMTAwLCBlbmhhbmNlZC5zZXZlcml0eS5zY29yZSArIDEwKTtcbiAgICAgIGlmIChlbmhhbmNlZC5zZXZlcml0eS5sZXZlbCA9PT0gJ2xvdycpIGVuaGFuY2VkLnNldmVyaXR5LmxldmVsID0gJ21lZGl1bSc7XG4gICAgfVxuICAgIFxuICAgIGlmIChpc0RvbWFpbkZpbGUuaXNDYW1wYWlnbikge1xuICAgICAgZW5oYW5jZWQuZG9tYWluSW1wYWN0LmFmZmVjdHNDYW1wYWlnbiA9IHRydWU7XG4gICAgICBlbmhhbmNlZC5kb21haW5JbXBhY3Quc3BlY2lhbEhhbmRsaW5nUmVxdWlyZWQgPSB0cnVlO1xuICAgICAgZW5oYW5jZWQuZG9tYWluSW1wYWN0LmV4cGVydGlzZVJlcXVpcmVkLnB1c2goJ0NhbXBhaWduIHN5c3RlbScpO1xuICAgICAgXG4gICAgICAvLyBJbmNyZWFzZSBzZXZlcml0eSBmb3IgY2FtcGFpZ24gZmlsZXNcbiAgICAgIGVuaGFuY2VkLnNldmVyaXR5LnNjb3JlID0gTWF0aC5taW4oMTAwLCBlbmhhbmNlZC5zZXZlcml0eS5zY29yZSArIDUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGp1c3QgcmlzayBwcm9maWxlIGJhc2VkIG9uIGNvbnRleHRcbiAgICBpZiAoZW5oYW5jZWQuZG9tYWluSW1wYWN0LnNwZWNpYWxIYW5kbGluZ1JlcXVpcmVkKSB7XG4gICAgICBpZiAoZW5oYW5jZWQucmlza1Byb2ZpbGUub3ZlcmFsbCA9PT0gJ2xvdycpIHtcbiAgICAgICAgZW5oYW5jZWQucmlza1Byb2ZpbGUub3ZlcmFsbCA9ICdtZWRpdW0nO1xuICAgICAgfVxuICAgICAgZW5oYW5jZWQucmlza1Byb2ZpbGUuZmFjdG9ycy5wdXNoKCdEb21haW4tc3BlY2lmaWMgZmlsZSByZXF1aXJlcyBleHBlcnQgcmV2aWV3Jyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBlbmhhbmNlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBmaWxlIGlzIGRvbWFpbi1zcGVjaWZpY1xuICAgKi9cbiAgcHJpdmF0ZSBpc0RvbWFpblNwZWNpZmljRmlsZShmaWxlUGF0aDogc3RyaW5nKTogeyBpc0FzdHJvbG9naWNhbDogYm9vbGVhbjsgaXNDYW1wYWlnbjogYm9vbGVhbiB9IHtcbiAgICBjb25zdCBpc0FzdHJvbG9naWNhbCA9IHRoaXMuZG9tYWluUGF0dGVybnMuYXN0cm9sb2dpY2FsLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoZmlsZVBhdGgpKTtcbiAgICBjb25zdCBpc0NhbXBhaWduID0gdGhpcy5kb21haW5QYXR0ZXJucy5jYW1wYWlnbi5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGZpbGVQYXRoKSk7XG4gICAgXG4gICAgcmV0dXJuIHsgaXNBc3Ryb2xvZ2ljYWwsIGlzQ2FtcGFpZ24gfTtcbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==