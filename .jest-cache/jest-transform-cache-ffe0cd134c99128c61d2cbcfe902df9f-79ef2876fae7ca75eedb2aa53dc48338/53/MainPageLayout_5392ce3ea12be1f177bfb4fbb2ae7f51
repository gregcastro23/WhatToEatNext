2339c972b29f929654d9306982ca7d68
"use strict";
'use client';
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.useMainPageContext = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const navigation_1 = require("next/navigation");
const logger_1 = require("@/utils/logger");
const hooks_1 = require("@/contexts/AlchemicalContext/hooks");
const ErrorBoundary_1 = __importDefault(require("@/components/error-boundaries/ErrorBoundary"));
const useStatePreservation_1 = require("@/hooks/useStatePreservation");
const ComponentFallbacks_1 = require("@/components/fallbacks/ComponentFallbacks");
const steeringFileIntelligence_1 = require("@/utils/steeringFileIntelligence");
const useAgentHooks_1 = require("@/hooks/useAgentHooks");
const mcpServerIntegration_1 = require("@/utils/mcpServerIntegration");
const developmentExperienceOptimizations_1 = require("@/utils/developmentExperienceOptimizations");
// Lazy load non-critical components for better performance
const ConsolidatedDebugInfo = (0, react_1.lazy)(() => Promise.resolve().then(() => __importStar(require('@/components/debug/ConsolidatedDebugInfo'))));
const CuisineRecommender = (0, react_1.lazy)(() => Promise.resolve().then(() => __importStar(require('@/components/CuisineRecommender'))));
const IngredientRecommender = (0, react_1.lazy)(() => Promise.resolve().then(() => __importStar(require('@/components/IngredientRecommender'))));
const CookingMethodsSection = (0, react_1.lazy)(() => Promise.resolve().then(() => __importStar(require('@/components/CookingMethodsSection'))));
const RecipeBuilderSimple = (0, react_1.lazy)(() => Promise.resolve().then(() => __importStar(require('@/components/recipes/RecipeBuilderSimple'))));
const MainPageContext = (0, react_1.createContext)(null);
const useMainPageContext = () => {
    const context = (0, react_1.useContext)(MainPageContext);
    if (!context) {
        throw new Error('useMainPageContext must be used within MainPageLayout');
    }
    return context;
};
exports.useMainPageContext = useMainPageContext;
// Memoized loading fallback component for better performance
const ComponentLoadingFallback = (0, react_1.memo)(function ComponentLoadingFallback({ componentName, }) {
    return ((0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-center p-8 bg-gray-50 rounded-lg', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600' }), (0, jsx_runtime_1.jsxs)("span", { className: 'text-gray-600', children: ["Loading ", componentName, "..."] })] }) }));
});
const MainPageLayout = (0, react_1.memo)(function MainPageLayout({ children, debugMode = process.env.NODE_ENV === 'development', loading = false, onSectionNavigate, }) {
    var _a;
    const router = (0, navigation_1.useRouter)();
    const { state, planetaryPositions, isDaytime } = (0, hooks_1.useAlchemical)();
    // Use new state preservation hooks
    const { saveState: saveNavState, getState: getNavState } = (0, useStatePreservation_1.useNavigationState)();
    const { restoreScrollPosition } = (0, useStatePreservation_1.useScrollPreservation)('main-page');
    (0, useStatePreservation_1.useAutoStateCleanup)();
    // Enhanced hooks with steering file intelligence
    const steeringIntelligence = (0, steeringFileIntelligence_1.useSteeringFileIntelligence)();
    // Temporarily disabled for testing
    // const {
    //   saveAstrologicalState,
    //   restoreAstrologicalState,
    //   validateElementalCompatibility,
    //   getArchitecturalGuidance,
    //   getTechnologyStackGuidance
    // } = useAstrologicalStatePreservation('main-page-layout');
    // Temporarily disabled for testing
    // const { validateCulturalContent, getInclusiveLanguageGuidelines } = useCulturalSensitivityGuidance();
    // const { getOptimizationRecommendations, validatePerformanceMetrics } = usePerformanceOptimizationGuidance();
    // Agent hooks for automated quality assurance - temporarily disabled for testing
    // const { hookState: agentHookState, startAgentHooks, stopAgentHooks, triggerValidation } = useAgentHooks({
    //   enablePlanetaryValidation: true,
    //   enableIngredientValidation: true,
    //   enableCampaignTriggers: true,
    //   enablePerformanceMonitoring: true,
    //   validationInterval: 5 // 5 minutes
    // });
    // const { validationResult: planetaryValidation, validatePlanetaryData } = usePlanetaryDataValidationHook(true);
    // Temporary placeholders for disabled hooks
    const agentHookState = null;
    const planetaryValidation = null;
    const { validationResult: ingredientValidation, validateIngredients } = (0, useAgentHooks_1.useIngredientConsistencyHook)();
    const { campaignTrigger: typescriptTrigger, checkErrorThreshold } = (0, useAgentHooks_1.useTypeScriptCampaignHook)(true);
    const { qualityResult: buildQuality, monitorBuildQuality } = (0, useAgentHooks_1.useBuildQualityMonitoringHook)();
    const { metrics: qualityMetrics, updateMetrics } = (0, useAgentHooks_1.useQualityMetricsHook)(30000); // 30 seconds
    // MCP server integration for reliable external APIs
    const { getAstrologicalData, getNutritionalData, getRecipeData, testFallbackStrategy, getServerStatus, } = (0, mcpServerIntegration_1.useMCPServerIntegration)();
    // Development experience optimizations
    const { updatePerformanceMetrics: updateDevMetrics, getDevelopmentMetrics, getPerformanceOptimizationRecommendations: getDevOptimizationRecommendations, applyAutomaticOptimizations, } = (0, developmentExperienceOptimizations_1.useDevelopmentExperienceOptimizations)();
    const [sectionStates, setSectionStates] = (0, react_1.useState)({
        cuisine: { loading: false, error: null },
        ingredients: { loading: false, error: null },
        cooking: { loading: false, error: null },
        recipe: { loading: false, error: null },
    });
    // Main Page Context State - Initialize from preserved state
    const [selectedIngredients, setSelectedIngredients] = (0, react_1.useState)([]);
    const [selectedCuisine, setSelectedCuisine] = (0, react_1.useState)(null);
    const [selectedCookingMethods, setSelectedCookingMethods] = (0, react_1.useState)([]);
    const [currentRecipe, setCurrentRecipe] = (0, react_1.useState)(null);
    const [activeSection, setActiveSection] = (0, react_1.useState)(null);
    const [navigationHistory, setNavigationHistory] = (0, react_1.useState)([]);
    // Component update subscribers
    const [updateSubscribers, setUpdateSubscribers] = (0, react_1.useState)({});
    // Steering file intelligence state
    const [astrologicalGuidance, setAstrologicalGuidance] = (0, react_1.useState)(null);
    const [performanceMetrics, setPerformanceMetrics] = (0, react_1.useState)({});
    const [culturalValidation, setCulturalValidation] = (0, react_1.useState)(null);
    // Initialize state from preserved navigation state
    (0, react_1.useEffect)(() => {
        var _a, _b, _c;
        const restoredState = getNavState();
        if (restoredState) {
            if (((_a = restoredState.selectedIngredients) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                setSelectedIngredients(restoredState.selectedIngredients);
            }
            if (restoredState.selectedCuisine) {
                setSelectedCuisine(restoredState.selectedCuisine);
            }
            if (((_b = restoredState.selectedCookingMethods) === null || _b === void 0 ? void 0 : _b.length) > 0) {
                setSelectedCookingMethods(restoredState.selectedCookingMethods);
            }
            if (restoredState.currentRecipe) {
                setCurrentRecipe(restoredState.currentRecipe);
            }
            if (restoredState.activeSection) {
                setActiveSection(restoredState.activeSection);
            }
            if (((_c = restoredState.navigationHistory) === null || _c === void 0 ? void 0 : _c.length) > 0) {
                setNavigationHistory(restoredState.navigationHistory);
            }
            logger_1.logger.debug('Restored main page context from enhanced state preservation');
        }
        // Restore scroll position after a short delay to ensure DOM is ready
        setTimeout(() => {
            restoreScrollPosition();
        }, 100);
    }, [getNavState, restoreScrollPosition]);
    // Initialize steering file intelligence guidance
    (0, react_1.useEffect)(() => {
        const initializeGuidance = async () => {
            try {
                const guidance = await steeringIntelligence.getGuidance();
                setAstrologicalGuidance(guidance);
                // Apply architectural guidance for component optimization - temporarily disabled
                // const archGuidance = getArchitecturalGuidance();
                // logger.debug('Applied architectural guidance from steering files:', archGuidance);
                // Validate cultural content if we have any - temporarily disabled
                // if (selectedCuisine || selectedIngredients.length > 0) {
                //   const validation = validateCulturalContent({
                //     ingredientNames: selectedIngredients,
                //     cuisineDescriptions: selectedCuisine ? [selectedCuisine] : []
                //   });
                //   setCulturalValidation(validation);
                //
                //   if (!validation.isCompliant) {
                //     logger.warn('Cultural sensitivity issues detected:', validation.issues);
                //   }
                // }
                // Get performance optimization recommendations - temporarily disabled
                // const perfRecommendations = getOptimizationRecommendations('main-page-layout');
                // logger.debug('Performance optimization recommendations:', perfRecommendations);
            }
            catch (error) {
                logger_1.logger.error('Error initializing steering file intelligence:', error);
            }
        };
        initializeGuidance();
    }, [steeringIntelligence, selectedCuisine, selectedIngredients]);
    // Monitor performance metrics using steering file guidance
    (0, react_1.useEffect)(() => {
        const startTime = performance.now();
        const measurePerformance = () => {
            var _a;
            const renderTime = performance.now() - startTime;
            const memoryUsage = ((_a = performance.memory) === null || _a === void 0 ? void 0 : _a.usedJSHeapSize) / 1024 / 1024 || 0;
            const metrics = {
                renderTime,
                memoryUsage,
                componentCount: Object.keys(sectionStates).length,
                activeSubscribers: Object.values(updateSubscribers).reduce((sum, subs) => sum + subs.length, 0),
            };
            setPerformanceMetrics(metrics);
            // Validate performance against steering file thresholds - temporarily disabled
            // const validation = validatePerformanceMetrics({
            //   renderTime,
            //   memoryUsage
            // });
            //
            // if (!validation.isOptimal) {
            //   logger.warn('Performance issues detected:', validation.issues);
            //   logger.info('Performance recommendations:', validation.recommendations);
            // }
        };
        // Measure performance after component mounts and updates
        const timeoutId = setTimeout(measurePerformance, 100);
        return () => clearTimeout(timeoutId);
    }, [sectionStates, updateSubscribers]);
    // Enhanced state preservation with astrological context
    (0, react_1.useEffect)(() => {
        const saveEnhancedState = async () => {
            try {
                // Calculate elemental properties from current selections
                const elementalProps = {
                    Fire: selectedCookingMethods.filter(method => method.includes('grill') || method.includes('sautÃ©')).length * 0.3,
                    Water: selectedIngredients.filter(ing => ing.includes('soup') || ing.includes('steam')).length * 0.3,
                    Earth: selectedIngredients.filter(ing => ing.includes('root') || ing.includes('grain')).length * 0.3,
                    Air: selectedIngredients.filter(ing => ing.includes('herb') || ing.includes('spice')).length * 0.3,
                };
                // Save astrological state with steering file intelligence
                // Temporarily disabled for testing
                // await saveAstrologicalState({
                //   elementalProperties: elementalProps,
                //   selectedIngredients,
                //   astrologicalContext: {
                //     selectedCuisine,
                //     selectedCookingMethods,
                //     currentRecipe,
                //     activeSection,
                //     navigationHistory
                //   }
                // });
            }
            catch (error) {
                logger_1.logger.error('Error saving enhanced astrological state:', error);
            }
        };
        if (selectedIngredients.length > 0 ||
            selectedCuisine ||
            selectedCookingMethods.length > 0) {
            saveEnhancedState();
        }
    }, [
        selectedIngredients,
        selectedCuisine,
        selectedCookingMethods,
        currentRecipe,
        activeSection,
        navigationHistory,
    ]);
    // Initialize agent hooks for automated quality assurance - temporarily disabled for testing
    // useEffect(() => {
    //   startAgentHooks();
    //   logger.info('Agent hooks started for automated quality assurance');
    //
    //   return () => {
    //     stopAgentHooks();
    //     logger.info('Agent hooks stopped');
    //   };
    // }, [startAgentHooks, stopAgentHooks]);
    // Monitor ingredient consistency when ingredients change
    (0, react_1.useEffect)(() => {
        if (selectedIngredients.length > 0) {
            const ingredientsWithElementalProps = selectedIngredients.map(ingredient => ({
                name: ingredient,
                elementalProperties: {
                    Fire: ingredient.includes('spice') || ingredient.includes('pepper')
                        ? 0.8
                        : 0.2,
                    Water: ingredient.includes('soup') || ingredient.includes('broth')
                        ? 0.8
                        : 0.2,
                    Earth: ingredient.includes('root') || ingredient.includes('grain')
                        ? 0.8
                        : 0.2,
                    Air: ingredient.includes('herb') || ingredient.includes('leaf')
                        ? 0.8
                        : 0.2,
                },
                category: ingredient.includes('spice')
                    ? 'spices'
                    : ingredient.includes('herb')
                        ? 'herbs'
                        : ingredient.includes('grain')
                            ? 'grains'
                            : 'other',
            }));
            validateIngredients(ingredientsWithElementalProps)
                .then(result => {
                if (result && !result.isValid) {
                    logger_1.logger.warn('Ingredient consistency validation failed:', result.issues);
                }
            })
                .catch(error => {
                logger_1.logger.error('Error validating ingredient consistency:', error);
            });
        }
    }, [selectedIngredients]);
    // Monitor build quality and performance metrics
    (0, react_1.useEffect)(() => {
        const monitorQuality = async () => {
            try {
                const buildMetrics = {
                    buildTime: performanceMetrics.renderTime || 0,
                    memoryUsage: performanceMetrics.memoryUsage || 0,
                    bundleSize: 150 * 1024,
                    errorCount: 0, // No build errors in this context
                };
                const qualityResult = await monitorBuildQuality(buildMetrics);
                if (qualityResult && !qualityResult.isValid) {
                    logger_1.logger.warn('Build quality issues detected:', qualityResult.issues);
                }
            }
            catch (error) {
                logger_1.logger.error('Error monitoring build quality:', error);
            }
        };
        // Monitor quality every 30 seconds
        const qualityInterval = setInterval(monitorQuality, 30000);
        // Initial quality check
        monitorQuality();
        return () => clearInterval(qualityInterval);
    }, [performanceMetrics, monitorBuildQuality]);
    // Test MCP server integration and fallback strategy
    (0, react_1.useEffect)(() => {
        const testMCPIntegration = async () => {
            try {
                // Test fallback strategy on component mount
                const fallbackTest = await testFallbackStrategy();
                logger_1.logger.info('MCP server fallback strategy test completed:', {
                    overallReliability: fallbackTest.overallReliability,
                    astrological: fallbackTest.astrological.source,
                    nutritional: fallbackTest.nutritional.source,
                    recipes: fallbackTest.recipes.source,
                });
                // Monitor server status
                const serverStatus = getServerStatus();
                logger_1.logger.debug('MCP server status:', serverStatus);
                // Test individual API integrations if needed
                if (selectedIngredients.length > 0) {
                    const nutritionalData = await getNutritionalData(selectedIngredients[0]);
                    if (nutritionalData.success) {
                        logger_1.logger.debug(`Nutritional data fetched via ${nutritionalData.source} for ${selectedIngredients[0]}`);
                    }
                }
            }
            catch (error) {
                logger_1.logger.error('Error testing MCP server integration:', error);
            }
        };
        // Test MCP integration on mount and when ingredients change
        testMCPIntegration();
        // Set up periodic server status monitoring
        const statusInterval = setInterval(() => {
            const serverStatus = getServerStatus();
            logger_1.logger.debug('MCP server status check:', serverStatus);
        }, 5 * 60 * 1000); // Every 5 minutes
        return () => clearInterval(statusInterval);
    }, [
        testFallbackStrategy,
        getServerStatus,
        getNutritionalData,
        selectedIngredients,
    ]);
    // Apply development experience optimizations
    (0, react_1.useEffect)(() => {
        const applyDevOptimizations = async () => {
            try {
                // Update development metrics with current performance data
                const devMetrics = {
                    compilationTime: performanceMetrics.renderTime || 0,
                    memoryUsage: performanceMetrics.memoryUsage || 0,
                    bundleSize: 150 * 1024,
                    errorCount: 0,
                    warningCount: 0,
                    hotReloadTime: 0,
                };
                updateDevMetrics(devMetrics);
                // Get development optimization recommendations
                const devRecommendations = getDevOptimizationRecommendations();
                if (debugMode) {
                    logger_1.logger.debug('Development optimization recommendations:', devRecommendations);
                }
                // Apply automatic optimizations in development mode
                if (debugMode && process.env.NODE_ENV === 'development') {
                    const optimizationResults = applyAutomaticOptimizations();
                    if (optimizationResults.applied.length > 0) {
                        logger_1.logger.info('Applied automatic development optimizations:', optimizationResults.applied);
                    }
                    if (optimizationResults.errors.length > 0) {
                        logger_1.logger.warn('Development optimization errors:', optimizationResults.errors);
                    }
                }
                // Monitor development metrics
                const currentDevMetrics = getDevelopmentMetrics();
                if (debugMode) {
                    logger_1.logger.debug('Current development metrics:', currentDevMetrics);
                }
            }
            catch (error) {
                logger_1.logger.error('Error applying development experience optimizations:', error);
            }
        };
        // Apply optimizations on mount and when performance metrics change
        applyDevOptimizations();
        // Set up periodic optimization monitoring
        const devOptimizationInterval = setInterval(applyDevOptimizations, 60000); // Every minute
        return () => clearInterval(devOptimizationInterval);
    }, [
        performanceMetrics,
        updateDevMetrics,
        getDevOptimizationRecommendations,
        applyAutomaticOptimizations,
        getDevelopmentMetrics,
        debugMode,
    ]);
    // Log quality metrics and campaign triggers for debugging
    (0, react_1.useEffect)(() => {
        if (debugMode) {
            logger_1.logger.debug('Quality Metrics:', qualityMetrics);
            logger_1.logger.debug('Agent Hook State:', agentHookState);
            if (planetaryValidation && !planetaryValidation.isValid) {
                logger_1.logger.warn('Planetary validation issues:', planetaryValidation.issues);
            }
            if (typescriptTrigger === null || typescriptTrigger === void 0 ? void 0 : typescriptTrigger.triggered) {
                logger_1.logger.warn('TypeScript campaign trigger active:', typescriptTrigger);
            }
            if (buildQuality && !buildQuality.isValid) {
                logger_1.logger.warn('Build quality issues:', buildQuality.issues);
            }
            // Log MCP server status in debug mode
            const serverStatus = getServerStatus();
            logger_1.logger.debug('MCP Server Status:', serverStatus);
            // Log development metrics in debug mode
            const devMetrics = getDevelopmentMetrics();
            logger_1.logger.debug('Development Experience Metrics:', devMetrics);
        }
    }, [
        debugMode,
        qualityMetrics,
        agentHookState,
        planetaryValidation,
        typescriptTrigger,
        buildQuality,
        getServerStatus,
        getDevelopmentMetrics,
    ]);
    // Save state changes using enhanced state preservation
    (0, react_1.useEffect)(() => {
        saveNavState({
            selectedIngredients,
            selectedCuisine,
            selectedCookingMethods,
            currentRecipe,
            activeSection,
            navigationHistory,
            scrollPosition: window.scrollY,
        });
    }, [
        selectedIngredients,
        selectedCuisine,
        selectedCookingMethods,
        currentRecipe,
        activeSection,
        navigationHistory,
        saveNavState,
    ]);
    // Context update functions
    const updateSelectedIngredients = (0, react_1.useCallback)((ingredients) => {
        setSelectedIngredients(ingredients);
        notifyComponentUpdate('ingredients', {
            selectedIngredients: ingredients,
        });
        logger_1.logger.debug('Updated selected ingredients:', ingredients);
    }, []);
    const updateSelectedCuisine = (0, react_1.useCallback)((cuisine) => {
        setSelectedCuisine(cuisine);
        notifyComponentUpdate('cuisine', { selectedCuisine: cuisine });
        logger_1.logger.debug('Updated selected cuisine:', cuisine);
    }, []);
    const updateSelectedCookingMethods = (0, react_1.useCallback)((methods) => {
        setSelectedCookingMethods(methods);
        notifyComponentUpdate('cooking', { selectedCookingMethods: methods });
        logger_1.logger.debug('Updated selected cooking methods:', methods);
    }, []);
    const updateCurrentRecipe = (0, react_1.useCallback)((recipe) => {
        setCurrentRecipe(recipe);
        notifyComponentUpdate('recipe', { currentRecipe: recipe });
        logger_1.logger.debug('Updated current recipe:', recipe);
    }, []);
    const handleSetActiveSection = (0, react_1.useCallback)((section) => {
        setActiveSection(section);
        if (section) {
            setNavigationHistory(prev => [...prev.slice(-9), section]); // Keep last 10 sections
        }
    }, []);
    // Cross-component communication
    const notifyComponentUpdate = (0, react_1.useCallback)((componentId, data) => {
        const subscribers = updateSubscribers[componentId] || [];
        subscribers.forEach(callback => {
            try {
                callback(data);
            }
            catch (error) {
                logger_1.logger.error(`Error in component update callback for ${componentId}:`, error);
            }
        });
    }, [updateSubscribers]);
    const subscribeToUpdates = (0, react_1.useCallback)((componentId, callback) => {
        setUpdateSubscribers(prev => ({
            ...prev,
            [componentId]: [...(prev[componentId] || []), callback],
        }));
        // Return unsubscribe function
        return () => {
            setUpdateSubscribers(prev => ({
                ...prev,
                [componentId]: (prev[componentId] || []).filter(cb => cb !== callback),
            }));
        };
    }, []);
    // Memoized context value to prevent unnecessary re-renders
    const contextValue = (0, react_1.useMemo)(() => ({
        // Shared state
        selectedIngredients,
        selectedCuisine,
        selectedCookingMethods,
        currentRecipe,
        activeSection,
        navigationHistory,
        // Update functions
        updateSelectedIngredients,
        updateSelectedCuisine,
        updateSelectedCookingMethods,
        updateCurrentRecipe,
        setActiveSection: handleSetActiveSection,
        // Cross-component communication
        notifyComponentUpdate,
        subscribeToUpdates,
    }), [
        selectedIngredients,
        selectedCuisine,
        selectedCookingMethods,
        currentRecipe,
        activeSection,
        navigationHistory,
        updateSelectedIngredients,
        updateSelectedCuisine,
        updateSelectedCookingMethods,
        updateCurrentRecipe,
        handleSetActiveSection,
        notifyComponentUpdate,
        subscribeToUpdates,
    ]);
    // Handle section navigation with enhanced context preservation and smooth transitions
    const handleSectionNavigate = (0, react_1.useCallback)((sectionId) => {
        const element = document.getElementById(sectionId);
        if (element) {
            // Add smooth transition effect
            element.style.transition = 'all 0.3s ease-in-out';
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            // Update active section and navigation history
            handleSetActiveSection(sectionId);
            onSectionNavigate === null || onSectionNavigate === void 0 ? void 0 : onSectionNavigate(sectionId);
            // Save navigation state using enhanced preservation system
            saveNavState({
                selectedIngredients,
                selectedCuisine,
                selectedCookingMethods,
                currentRecipe,
                activeSection: sectionId,
                navigationHistory: [...navigationHistory, sectionId].slice(-10),
                scrollPosition: window.scrollY,
            });
            // Add visual feedback for navigation
            element.classList.add('highlight-section');
            setTimeout(() => {
                element.classList.remove('highlight-section');
                element.style.transition = '';
            }, 1000);
        }
    }, [
        onSectionNavigate,
        handleSetActiveSection,
        navigationHistory,
        saveNavState,
        selectedIngredients,
        selectedCuisine,
        selectedCookingMethods,
        currentRecipe,
    ]);
    // Update section loading state
    const updateSectionState = (0, react_1.useCallback)((sectionId, updates) => {
        setSectionStates(prev => ({
            ...prev,
            [sectionId]: { ...prev[sectionId], ...updates },
        }));
    }, []);
    // Section error boundary fallback
    const SectionErrorFallback = ({ error, sectionId, onRetry }) => ((0, jsx_runtime_1.jsxs)("div", { className: 'bg-red-50 border border-red-200 rounded-lg p-6 text-center', children: [(0, jsx_runtime_1.jsxs)("h3", { className: 'text-lg font-semibold text-red-800 mb-2', children: ["Section Error: ", sectionId] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-red-600 mb-4', children: error.message || 'An unexpected error occurred in this section.' }), (0, jsx_runtime_1.jsx)("button", { onClick: onRetry, className: 'bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors', children: "Retry Section" })] }));
    // Section wrapper with error boundary
    const SectionWrapper = ({ id, title, children, className = '' }) => {
        var _a;
        const [retryKey, setRetryKey] = (0, react_1.useState)(0);
        const handleRetry = (0, react_1.useCallback)(() => {
            setRetryKey(prev => prev + 1);
            updateSectionState(id, { loading: false, error: null });
        }, [id]);
        return ((0, jsx_runtime_1.jsxs)("section", { id: id, className: `bg-white rounded-lg shadow-md p-6 scroll-mt-20 ${className}`, children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between mb-4', children: [(0, jsx_runtime_1.jsx)("h2", { className: 'text-2xl font-semibold text-gray-800', children: title }), ((_a = sectionStates[id]) === null || _a === void 0 ? void 0 : _a.loading) && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center text-blue-600', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm', children: "Loading..." })] }))] }), (0, jsx_runtime_1.jsx)(ErrorBoundary_1.default, { fallback: error => ((0, jsx_runtime_1.jsx)(SectionErrorFallback, { error: error, sectionId: id, onRetry: handleRetry })), children: children }, retryKey)] }));
    };
    return ((0, jsx_runtime_1.jsx)(MainPageContext.Provider, { value: contextValue, children: (0, jsx_runtime_1.jsxs)("div", { className: 'min-h-screen bg-gradient-to-b from-indigo-50 via-blue-50 to-gray-100 text-gray-800', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'container mx-auto px-4 py-8', children: [(0, jsx_runtime_1.jsxs)("header", { className: 'mb-8 text-center', children: [(0, jsx_runtime_1.jsx)("h1", { className: 'text-3xl md:text-4xl font-bold mb-2 text-indigo-900', children: "What to Eat Next" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-indigo-600 mb-4', children: "Food recommendations based on the current celestial energies" }), (0, jsx_runtime_1.jsx)("div", { className: 'inline-block bg-white px-4 py-2 rounded-lg shadow-sm', children: loading ? ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600 mr-2' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: "Loading astrological data..." })] })) : ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-green-500 rounded-full mr-2' }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-600', children: ["Connected \u2022 ", isDaytime ? 'Day' : 'Night', " \u2022", ' ', ((_a = state.astrologicalState) === null || _a === void 0 ? void 0 : _a.sunSign) || 'Loading...'] })] })) })] }), (0, jsx_runtime_1.jsxs)("nav", { className: 'flex flex-wrap justify-center gap-4 mb-8 bg-white rounded-lg shadow-md p-4 sticky top-2 z-10', children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => handleSectionNavigate('cuisine'), className: 'text-indigo-600 hover:text-indigo-800 font-medium px-3 py-1 rounded hover:bg-indigo-50 transition-colors', children: "Cuisine Recommendations" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => handleSectionNavigate('ingredients'), className: 'text-indigo-600 hover:text-indigo-800 font-medium px-3 py-1 rounded hover:bg-indigo-50 transition-colors', children: "Ingredient Recommendations" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => handleSectionNavigate('cooking'), className: 'text-indigo-600 hover:text-indigo-800 font-medium px-3 py-1 rounded hover:bg-indigo-50 transition-colors', children: "Cooking Methods" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => handleSectionNavigate('recipe'), className: 'text-indigo-600 hover:text-indigo-800 font-medium px-3 py-1 rounded hover:bg-indigo-50 transition-colors', children: "Recipe Builder" })] }), (0, jsx_runtime_1.jsxs)("main", { className: 'flex flex-col gap-8 max-w-6xl mx-auto', children: [(0, jsx_runtime_1.jsx)(SectionWrapper, { id: 'cuisine', title: 'Cuisine Recommendations', children: (0, jsx_runtime_1.jsx)(ErrorBoundary_1.default, { fallback: error => ((0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.CuisineRecommender, { onRetry: () => window.location.reload(), error: error })), children: (0, jsx_runtime_1.jsx)(react_1.Suspense, { fallback: (0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.Loading, { componentName: 'Cuisine Recommender' }), children: (0, jsx_runtime_1.jsx)(CuisineRecommender, {}) }) }) }), (0, jsx_runtime_1.jsx)(SectionWrapper, { id: 'ingredients', title: 'Ingredient Recommendations', children: (0, jsx_runtime_1.jsx)(ErrorBoundary_1.default, { fallback: error => ((0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.IngredientRecommender, { onRetry: () => window.location.reload(), error: error })), children: (0, jsx_runtime_1.jsx)(react_1.Suspense, { fallback: (0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.Loading, { componentName: 'Ingredient Recommender' }), children: (0, jsx_runtime_1.jsx)(IngredientRecommender, { isFullPageVersion: false, maxDisplayed: 8 }) }) }) }), (0, jsx_runtime_1.jsx)(SectionWrapper, { id: 'cooking', title: 'Cooking Methods', children: (0, jsx_runtime_1.jsx)(ErrorBoundary_1.default, { fallback: error => ((0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.CookingMethods, { onRetry: () => window.location.reload(), error: error })), children: (0, jsx_runtime_1.jsx)(react_1.Suspense, { fallback: (0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.Loading, { componentName: 'Cooking Methods' }), children: (0, jsx_runtime_1.jsx)(CookingMethodsSection, { isMainPageVersion: true, maxDisplayed: 6, onViewMore: () => router.push('/cooking-methods') }) }) }) }), (0, jsx_runtime_1.jsx)(SectionWrapper, { id: 'recipe', title: 'Recipe Builder', children: (0, jsx_runtime_1.jsx)(ErrorBoundary_1.default, { fallback: error => ((0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.RecipeBuilder, { onRetry: () => window.location.reload(), error: error })), children: (0, jsx_runtime_1.jsx)(react_1.Suspense, { fallback: (0, jsx_runtime_1.jsx)(ComponentFallbacks_1.ComponentFallbacks.Loading, { componentName: 'Recipe Builder' }), children: (0, jsx_runtime_1.jsx)(RecipeBuilderSimple, {}) }) }) }), children] }), (0, jsx_runtime_1.jsx)("footer", { className: 'mt-12 text-center', children: (0, jsx_runtime_1.jsx)("div", { className: 'mx-auto mb-4', style: { maxWidth: '250px' }, children: (0, jsx_runtime_1.jsx)("form", { action: 'https://www.paypal.com/ncp/payment/SVN6Q368TKKLS', method: 'post', target: '_blank', children: (0, jsx_runtime_1.jsx)("input", { type: 'submit', value: 'HELP', style: {
                                            textAlign: 'center',
                                            border: 'none',
                                            borderRadius: '0.25rem',
                                            width: '100%',
                                            padding: '0 2rem',
                                            height: '2.625rem',
                                            fontWeight: 'bold',
                                            backgroundColor: '#FFD140',
                                            color: '#000000',
                                            fontFamily: '"Helvetica Neue", Arial, sans-serif',
                                            fontSize: '1rem',
                                            lineHeight: '1.25rem',
                                            cursor: 'pointer',
                                        } }) }) }) })] }), debugMode && ((0, jsx_runtime_1.jsx)(react_1.Suspense, { fallback: null, children: (0, jsx_runtime_1.jsx)(ConsolidatedDebugInfo, { position: 'bottom-right', collapsible: true, showPerformanceMetrics: true, showAstrologicalData: true, showComponentStates: true }) })), (0, jsx_runtime_1.jsx)("style", { jsx: true, children: `
            .highlight-section {
              transform: scale(1.02);
              box-shadow: 0 10px 25px rgba(99, 102, 241, 0.15);
              border: 2px solid rgba(99, 102, 241, 0.3);
            }

            section {
              transition:
                transform 0.3s ease-in-out,
                box-shadow 0.3s ease-in-out,
                border 0.3s ease-in-out;
            }

            nav button:hover {
              transform: translateY(-1px);
            }

            nav button:active {
              transform: translateY(0);
            }
          ` })] }) }));
});
exports.default = MainPageLayout;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL2xheW91dC9NYWluUGFnZUxheW91dC50c3giLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWIsK0NBVWU7QUFDZixnREFBNEM7QUFDNUMsMkNBQXdDO0FBQ3hDLDhEQUFtRTtBQUNuRSxnR0FBd0U7QUFDeEUsdUVBT3NDO0FBRXRDLGtGQUErRTtBQUMvRSwrRUFHMEM7QUFDMUMseURBTytCO0FBQy9CLHVFQUF1RTtBQUN2RSxtR0FBbUc7QUFFbkcsMkRBQTJEO0FBQzNELE1BQU0scUJBQXFCLEdBQUcsSUFBQSxZQUFJLEVBQ2hDLEdBQUcsRUFBRSxtREFBUSwwQ0FBMEMsR0FBQyxDQUN6RCxDQUFDO0FBQ0YsTUFBTSxrQkFBa0IsR0FBRyxJQUFBLFlBQUksRUFDN0IsR0FBRyxFQUFFLG1EQUFRLGlDQUFpQyxHQUFDLENBQ2hELENBQUM7QUFDRixNQUFNLHFCQUFxQixHQUFHLElBQUEsWUFBSSxFQUNoQyxHQUFHLEVBQUUsbURBQVEsb0NBQW9DLEdBQUMsQ0FDbkQsQ0FBQztBQUNGLE1BQU0scUJBQXFCLEdBQUcsSUFBQSxZQUFJLEVBQ2hDLEdBQUcsRUFBRSxtREFBUSxvQ0FBb0MsR0FBQyxDQUNuRCxDQUFDO0FBQ0YsTUFBTSxtQkFBbUIsR0FBRyxJQUFBLFlBQUksRUFDOUIsR0FBRyxFQUFFLG1EQUFRLDBDQUEwQyxHQUFDLENBQ3pELENBQUM7QUE0Q0YsTUFBTSxlQUFlLEdBQUcsSUFBQSxxQkFBYSxFQUE2QixJQUFJLENBQUMsQ0FBQztBQUVqRSxNQUFNLGtCQUFrQixHQUFHLEdBQUcsRUFBRTtJQUNyQyxNQUFNLE9BQU8sR0FBRyxJQUFBLGtCQUFVLEVBQUMsZUFBZSxDQUFDLENBQUM7SUFDNUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNaLE1BQU0sSUFBSSxLQUFLLENBQUMsdURBQXVELENBQUMsQ0FBQztLQUMxRTtJ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QUFDLGNBQWMsRUFDdkIsV0FBVyxFQUFFLElBQUksRUFDakIsc0JBQXNCLEVBQUUsSUFBSSxFQUM1QixvQkFBb0IsRUFBRSxJQUFJLEVBQzFCLG1CQUFtQixFQUFFLElBQUksR0FDekIsR0FDTyxDQUNaLEVBR0Qsa0NBQU8sR0FBRyxrQkFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBcUJYLEdBQVMsSUFDTixHQUNtQixDQUM1QixDQUFDO0FBQ0osQ0FBQyxDQUNGLENBQUM7QUFFRixrQkFBZSxjQUFjLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL2xheW91dC9NYWluUGFnZUxheW91dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHtcbiAgdXNlU3RhdGUsXG4gIHVzZUVmZmVjdCxcbiAgdXNlQ2FsbGJhY2ssXG4gIGNyZWF0ZUNvbnRleHQsXG4gIHVzZUNvbnRleHQsXG4gIHVzZU1lbW8sXG4gIG1lbW8sXG4gIGxhenksXG4gIFN1c3BlbnNlLFxufSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuaW1wb3J0IHsgdXNlQWxjaGVtaWNhbCB9IGZyb20gJ0AvY29udGV4dHMvQWxjaGVtaWNhbENvbnRleHQvaG9va3MnO1xuaW1wb3J0IEVycm9yQm91bmRhcnkgZnJvbSAnQC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJpZXMvRXJyb3JCb3VuZGFyeSc7XG5pbXBvcnQge1xuICB1c2VOYXZpZ2F0aW9uU3RhdGUsXG4gIHVzZVNjcm9sbFByZXNlcnZhdGlvbixcbiAgdXNlQXV0b1N0YXRlQ2xlYW51cCxcbiAgdXNlQXN0cm9sb2dpY2FsU3RhdGVQcmVzZXJ2YXRpb24sXG4gIHVzZUN1bHR1cmFsU2Vuc2l0aXZpdHlHdWlkYW5jZSxcbiAgdXNlUGVyZm9ybWFuY2VPcHRpbWl6YXRpb25HdWlkYW5jZSxcbn0gZnJvbSAnQC9ob29rcy91c2VTdGF0ZVByZXNlcnZhdGlvbic7XG5pbXBvcnQgeyB1c2VFcnJvckhhbmRsZXIgfSBmcm9tICdAL3V0aWxzL2Vycm9ySGFuZGxpbmcnO1xuaW1wb3J0IHsgQ29tcG9uZW50RmFsbGJhY2tzIH0gZnJvbSAnQC9jb21wb25lbnRzL2ZhbGxiYWNrcy9Db21wb25lbnRGYWxsYmFja3MnO1xuaW1wb3J0IHtcbiAgdXNlU3RlZXJpbmdGaWxlSW50ZWxsaWdlbmNlLFxuICBFbGVtZW50YWxQcm9wZXJ0aWVzLFxufSBmcm9tICdAL3V0aWxzL3N0ZWVyaW5nRmlsZUludGVsbGlnZW5jZSc7XG5pbXBvcnQge1xuICB1c2VBZ2VudEhvb2tzLFxuICB1c2VQbGFuZXRhcnlEYXRhVmFsaWRhdGlvbkhvb2ssXG4gIHVzZUluZ3JlZGllbnRDb25zaXN0ZW5jeUhvb2ssXG4gIHVzZVR5cGVTY3JpcHRDYW1wYWlnbkhvb2ssXG4gIHVzZUJ1aWxkUXVhbGl0eU1vbml0b3JpbmdIb29rLFxuICB1c2VRdWFsaXR5TWV0cmljc0hvb2ssXG59IGZyb20gJ0AvaG9va3MvdXNlQWdlbnRIb29rcyc7XG5pbXBvcnQgeyB1c2VNQ1BTZXJ2ZXJJbnRlZ3JhdGlvbiB9IGZyb20gJ0AvdXRpbHMvbWNwU2VydmVySW50ZWdyYXRpb24nO1xuaW1wb3J0IHsgdXNlRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemF0aW9ucyB9IGZyb20gJ0AvdXRpbHMvZGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemF0aW9ucyc7XG5cbi8vIExhenkgbG9hZCBub24tY3JpdGljYWwgY29tcG9uZW50cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG5jb25zdCBDb25zb2xpZGF0ZWREZWJ1Z0luZm8gPSBsYXp5KFxuICAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9kZWJ1Zy9Db25zb2xpZGF0ZWREZWJ1Z0luZm8nKVxuKTtcbmNvbnN0IEN1aXNpbmVSZWNvbW1lbmRlciA9IGxhenkoXG4gICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL0N1aXNpbmVSZWNvbW1lbmRlcicpXG4pO1xuY29uc3QgSW5ncmVkaWVudFJlY29tbWVuZGVyID0gbGF6eShcbiAgKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvSW5ncmVkaWVudFJlY29tbWVuZGVyJylcbik7XG5jb25zdCBDb29raW5nTWV0aG9kc1NlY3Rpb24gPSBsYXp5KFxuICAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9Db29raW5nTWV0aG9kc1NlY3Rpb24nKVxuKTtcbmNvbnN0IFJlY2lwZUJ1aWxkZXJTaW1wbGUgPSBsYXp5KFxuICAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9yZWNpcGVzL1JlY2lwZUJ1aWxkZXJTaW1wbGUnKVxuKTtcblxuaW50ZXJmYWNlIE1haW5QYWdlTGF5b3V0UHJvcHMge1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgZGVidWdNb2RlPzogYm9vbGVhbjtcbiAgbG9hZGluZz86IGJvb2xlYW47XG4gIG9uU2VjdGlvbk5hdmlnYXRlPzogKHNlY3Rpb25JZDogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgU2VjdGlvbkNvbmZpZyB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTtcbiAgbG9hZGluZzogYm9vbGVhbjtcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XG59XG5cbi8vIE1haW4gUGFnZSBDb250ZXh0IGZvciBjcm9zcy1jb21wb25lbnQgZGF0YSBzaGFyaW5nXG5pbnRlcmZhY2UgTWFpblBhZ2VDb250ZXh0VHlwZSB7XG4gIC8vIFNoYXJlZCBzdGF0ZVxuICBzZWxlY3RlZEluZ3JlZGllbnRzOiBzdHJpbmdbXTtcbiAgc2VsZWN0ZWRDdWlzaW5lOiBzdHJpbmcgfCBudWxsO1xuICBzZWxlY3RlZENvb2tpbmdNZXRob2RzOiBzdHJpbmdbXTtcbiAgY3VycmVudFJlY2lwZTogYW55IHwgbnVsbDtcblxuICAvLyBOYXZpZ2F0aW9uIHN0YXRlXG4gIGFjdGl2ZVNlY3Rpb246IHN0cmluZyB8IG51bGw7XG4gIG5hdmlnYXRpb25IaXN0b3J5OiBzdHJpbmdbXTtcblxuICAvLyBVcGRhdGUgZnVuY3Rpb25zXG4gIHVwZGF0ZVNlbGVjdGVkSW5ncmVkaWVudHM6IChpbmdyZWRpZW50czogc3RyaW5nW10pID0+IHZvaWQ7XG4gIHVwZGF0ZVNlbGVjdGVkQ3Vpc2luZTogKGN1aXNpbmU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gIHVwZGF0ZVNlbGVjdGVkQ29va2luZ01ldGhvZHM6IChtZXRob2RzOiBzdHJpbmdbXSkgPT4gdm9pZDtcbiAgdXBkYXRlQ3VycmVudFJlY2lwZTogKHJlY2lwZTogYW55IHwgbnVsbCkgPT4gdm9pZDtcbiAgc2V0QWN0aXZlU2VjdGlvbjogKHNlY3Rpb246IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG5cbiAgLy8gQ3Jvc3MtY29tcG9uZW50IGNvbW11bmljYXRpb25cbiAgbm90aWZ5Q29tcG9uZW50VXBkYXRlOiAoY29tcG9uZW50SWQ6IHN0cmluZywgZGF0YTogYW55KSA9PiB2b2lkO1xuICBzdWJzY3JpYmVUb1VwZGF0ZXM6IChcbiAgICBjb21wb25lbnRJZDogc3RyaW5nLFxuICAgIGNhbGxiYWNrOiAoZGF0YTogYW55KSA9PiB2b2lkXG4gICkgPT4gKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgTWFpblBhZ2VDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxNYWluUGFnZUNvbnRleHRUeXBlIHwgbnVsbD4obnVsbCk7XG5cbmV4cG9ydCBjb25zdCB1c2VNYWluUGFnZUNvbnRleHQgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KE1haW5QYWdlQ29udGV4dCk7XG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlTWFpblBhZ2VDb250ZXh0IG11c3QgYmUgdXNlZCB3aXRoaW4gTWFpblBhZ2VMYXlvdXQnKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07XG5cbi8vIE1lbW9pemVkIGxvYWRpbmcgZmFsbGJhY2sgY29tcG9uZW50IGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbmNvbnN0IENvbXBvbmVudExvYWRpbmdGYWxsYmFjayA9IG1lbW8oZnVuY3Rpb24gQ29tcG9uZW50TG9hZGluZ0ZhbGxiYWNrKHtcbiAgY29tcG9uZW50TmFtZSxcbn06IHtcbiAgY29tcG9uZW50TmFtZTogc3RyaW5nO1xufSkge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTggYmctZ3JheS01MCByb3VuZGVkLWxnJz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTMnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTYgdy02IGJvcmRlci1iLTIgYm9yZGVyLWluZGlnby02MDAnPjwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtZ3JheS02MDAnPkxvYWRpbmcge2NvbXBvbmVudE5hbWV9Li4uPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59KTtcblxuY29uc3QgTWFpblBhZ2VMYXlvdXQ6IFJlYWN0LkZDPE1haW5QYWdlTGF5b3V0UHJvcHM+ID0gbWVtbyhcbiAgZnVuY3Rpb24gTWFpblBhZ2VMYXlvdXQoe1xuICAgIGNoaWxkcmVuLFxuICAgIGRlYnVnTW9kZSA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxuICAgIGxvYWRpbmcgPSBmYWxzZSxcbiAgICBvblNlY3Rpb25OYXZpZ2F0ZSxcbiAgfSkge1xuICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICAgIGNvbnN0IHsgc3RhdGUsIHBsYW5ldGFyeVBvc2l0aW9ucywgaXNEYXl0aW1lIH0gPSB1c2VBbGNoZW1pY2FsKCk7XG5cbiAgICAvLyBVc2UgbmV3IHN0YXRlIHByZXNlcnZhdGlvbiBob29rc1xuICAgIGNvbnN0IHsgc2F2ZVN0YXRlOiBzYXZlTmF2U3RhdGUsIGdldFN0YXRlOiBnZXROYXZTdGF0ZSB9ID1cbiAgICAgIHVzZU5hdmlnYXRpb25TdGF0ZSgpO1xuICAgIGNvbnN0IHsgcmVzdG9yZVNjcm9sbFBvc2l0aW9uIH0gPSB1c2VTY3JvbGxQcmVzZXJ2YXRpb24oJ21haW4tcGFnZScpO1xuICAgIHVzZUF1dG9TdGF0ZUNsZWFudXAoKTtcblxuICAgIC8vIEVuaGFuY2VkIGhvb2tzIHdpdGggc3RlZXJpbmcgZmlsZSBpbnRlbGxpZ2VuY2VcbiAgICBjb25zdCBzdGVlcmluZ0ludGVsbGlnZW5jZSA9IHVzZVN0ZWVyaW5nRmlsZUludGVsbGlnZW5jZSgpO1xuICAgIC8vIFRlbXBvcmFyaWx5IGRpc2FibGVkIGZvciB0ZXN0aW5nXG4gICAgLy8gY29uc3Qge1xuICAgIC8vICAgc2F2ZUFzdHJvbG9naWNhbFN0YXRlLFxuICAgIC8vICAgcmVzdG9yZUFzdHJvbG9naWNhbFN0YXRlLFxuICAgIC8vICAgdmFsaWRhdGVFbGVtZW50YWxDb21wYXRpYmlsaXR5LFxuICAgIC8vICAgZ2V0QXJjaGl0ZWN0dXJhbEd1aWRhbmNlLFxuICAgIC8vICAgZ2V0VGVjaG5vbG9neVN0YWNrR3VpZGFuY2VcbiAgICAvLyB9ID0gdXNlQXN0cm9sb2dpY2FsU3RhdGVQcmVzZXJ2YXRpb24oJ21haW4tcGFnZS1sYXlvdXQnKTtcblxuICAgIC8vIFRlbXBvcmFyaWx5IGRpc2FibGVkIGZvciB0ZXN0aW5nXG4gICAgLy8gY29uc3QgeyB2YWxpZGF0ZUN1bHR1cmFsQ29udGVudCwgZ2V0SW5jbHVzaXZlTGFuZ3VhZ2VHdWlkZWxpbmVzIH0gPSB1c2VDdWx0dXJhbFNlbnNpdGl2aXR5R3VpZGFuY2UoKTtcbiAgICAvLyBjb25zdCB7IGdldE9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucywgdmFsaWRhdGVQZXJmb3JtYW5jZU1ldHJpY3MgfSA9IHVzZVBlcmZvcm1hbmNlT3B0aW1pemF0aW9uR3VpZGFuY2UoKTtcblxuICAgIC8vIEFnZW50IGhvb2tzIGZvciBhdXRvbWF0ZWQgcXVhbGl0eSBhc3N1cmFuY2UgLSB0ZW1wb3JhcmlseSBkaXNhYmxlZCBmb3IgdGVzdGluZ1xuICAgIC8vIGNvbnN0IHsgaG9va1N0YXRlOiBhZ2VudEhvb2tTdGF0ZSwgc3RhcnRBZ2VudEhvb2tzLCBzdG9wQWdlbnRIb29rcywgdHJpZ2dlclZhbGlkYXRpb24gfSA9IHVzZUFnZW50SG9va3Moe1xuICAgIC8vICAgZW5hYmxlUGxhbmV0YXJ5VmFsaWRhdGlvbjogdHJ1ZSxcbiAgICAvLyAgIGVuYWJsZUluZ3JlZGllbnRWYWxpZGF0aW9uOiB0cnVlLFxuICAgIC8vICAgZW5hYmxlQ2FtcGFpZ25UcmlnZ2VyczogdHJ1ZSxcbiAgICAvLyAgIGVuYWJsZVBlcmZvcm1hbmNlTW9uaXRvcmluZzogdHJ1ZSxcbiAgICAvLyAgIHZhbGlkYXRpb25JbnRlcnZhbDogNSAvLyA1IG1pbnV0ZXNcbiAgICAvLyB9KTtcblxuICAgIC8vIGNvbnN0IHsgdmFsaWRhdGlvblJlc3VsdDogcGxhbmV0YXJ5VmFsaWRhdGlvbiwgdmFsaWRhdGVQbGFuZXRhcnlEYXRhIH0gPSB1c2VQbGFuZXRhcnlEYXRhVmFsaWRhdGlvbkhvb2sodHJ1ZSk7XG5cbiAgICAvLyBUZW1wb3JhcnkgcGxhY2Vob2xkZXJzIGZvciBkaXNhYmxlZCBob29rc1xuICAgIGNvbnN0IGFnZW50SG9va1N0YXRlID0gbnVsbDtcbiAgICBjb25zdCBwbGFuZXRhcnlWYWxpZGF0aW9uID0gbnVsbDtcbiAgICBjb25zdCB7IHZhbGlkYXRpb25SZXN1bHQ6IGluZ3JlZGllbnRWYWxpZGF0aW9uLCB2YWxpZGF0ZUluZ3JlZGllbnRzIH0gPVxuICAgICAgdXNlSW5ncmVkaWVudENvbnNpc3RlbmN5SG9vaygpO1xuICAgIGNvbnN0IHsgY2FtcGFpZ25UcmlnZ2VyOiB0eXBlc2NyaXB0VHJpZ2dlciwgY2hlY2tFcnJvclRocmVzaG9sZCB9ID1cbiAgICAgIHVzZVR5cGVTY3JpcHRDYW1wYWlnbkhvb2sodHJ1ZSk7XG4gICAgY29uc3QgeyBxdWFsaXR5UmVzdWx0OiBidWlsZFF1YWxpdHksIG1vbml0b3JCdWlsZFF1YWxpdHkgfSA9XG4gICAgICB1c2VCdWlsZFF1YWxpdHlNb25pdG9yaW5nSG9vaygpO1xuICAgIGNvbnN0IHsgbWV0cmljczogcXVhbGl0eU1ldHJpY3MsIHVwZGF0ZU1ldHJpY3MgfSA9XG4gICAgICB1c2VRdWFsaXR5TWV0cmljc0hvb2soMzAwMDApOyAvLyAzMCBzZWNvbmRzXG5cbiAgICAvLyBNQ1Agc2VydmVyIGludGVncmF0aW9uIGZvciByZWxpYWJsZSBleHRlcm5hbCBBUElzXG4gICAgY29uc3Qge1xuICAgICAgZ2V0QXN0cm9sb2dpY2FsRGF0YSxcbiAgICAgIGdldE51dHJpdGlvbmFsRGF0YSxcbiAgICAgIGdldFJlY2lwZURhdGEsXG4gICAgICB0ZXN0RmFsbGJhY2tTdHJhdGVneSxcbiAgICAgIGdldFNlcnZlclN0YXR1cyxcbiAgICB9ID0gdXNlTUNQU2VydmVySW50ZWdyYXRpb24oKTtcblxuICAgIC8vIERldmVsb3BtZW50IGV4cGVyaWVuY2Ugb3B0aW1pemF0aW9uc1xuICAgIGNvbnN0IHtcbiAgICAgIHVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljczogdXBkYXRlRGV2TWV0cmljcyxcbiAgICAgIGdldERldmVsb3BtZW50TWV0cmljcyxcbiAgICAgIGdldFBlcmZvcm1hbmNlT3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zOlxuICAgICAgICBnZXREZXZPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMsXG4gICAgICBhcHBseUF1dG9tYXRpY09wdGltaXphdGlvbnMsXG4gICAgfSA9IHVzZURldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMoKTtcblxuICAgIGNvbnN0IFtzZWN0aW9uU3RhdGVzLCBzZXRTZWN0aW9uU3RhdGVzXSA9IHVzZVN0YXRlPFxuICAgICAgUmVjb3JkPHN0cmluZywgeyBsb2FkaW5nOiBib29sZWFuOyBlcnJvcjogc3RyaW5nIHwgbnVsbCB9PlxuICAgID4oe1xuICAgICAgY3Vpc2luZTogeyBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IG51bGwgfSxcbiAgICAgIGluZ3JlZGllbnRzOiB7IGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogbnVsbCB9LFxuICAgICAgY29va2luZzogeyBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IG51bGwgfSxcbiAgICAgIHJlY2lwZTogeyBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IG51bGwgfSxcbiAgICB9KTtcblxuICAgIC8vIE1haW4gUGFnZSBDb250ZXh0IFN0YXRlIC0gSW5pdGlhbGl6ZSBmcm9tIHByZXNlcnZlZCBzdGF0ZVxuICAgIGNvbnN0IFtzZWxlY3RlZEluZ3JlZGllbnRzLCBzZXRTZWxlY3RlZEluZ3JlZGllbnRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihcbiAgICAgIFtdXG4gICAgKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRDdWlzaW5lLCBzZXRTZWxlY3RlZEN1aXNpbmVdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW3NlbGVjdGVkQ29va2luZ01ldGhvZHMsIHNldFNlbGVjdGVkQ29va2luZ01ldGhvZHNdID0gdXNlU3RhdGU8XG4gICAgICBzdHJpbmdbXVxuICAgID4oW10pO1xuICAgIGNvbnN0IFtjdXJyZW50UmVjaXBlLCBzZXRDdXJyZW50UmVjaXBlXSA9IHVzZVN0YXRlPGFueSB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFthY3RpdmVTZWN0aW9uLCBzZXRBY3RpdmVTZWN0aW9uXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFtuYXZpZ2F0aW9uSGlzdG9yeSwgc2V0TmF2aWdhdGlvbkhpc3RvcnldID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcblxuICAgIC8vIENvbXBvbmVudCB1cGRhdGUgc3Vic2NyaWJlcnNcbiAgICBjb25zdCBbdXBkYXRlU3Vic2NyaWJlcnMsIHNldFVwZGF0ZVN1YnNjcmliZXJzXSA9IHVzZVN0YXRlPFxuICAgICAgUmVjb3JkPHN0cmluZywgKChkYXRhOiBhbnkpID0+IHZvaWQpW10+XG4gICAgPih7fSk7XG5cbiAgICAvLyBTdGVlcmluZyBmaWxlIGludGVsbGlnZW5jZSBzdGF0ZVxuICAgIGNvbnN0IFthc3Ryb2xvZ2ljYWxHdWlkYW5jZSwgc2V0QXN0cm9sb2dpY2FsR3VpZGFuY2VdID0gdXNlU3RhdGU8YW55PihudWxsKTtcbiAgICBjb25zdCBbcGVyZm9ybWFuY2VNZXRyaWNzLCBzZXRQZXJmb3JtYW5jZU1ldHJpY3NdID0gdXNlU3RhdGU8YW55Pih7fSk7XG4gICAgY29uc3QgW2N1bHR1cmFsVmFsaWRhdGlvbiwgc2V0Q3VsdHVyYWxWYWxpZGF0aW9uXSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHN0YXRlIGZyb20gcHJlc2VydmVkIG5hdmlnYXRpb24gc3RhdGVcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdG9yZWRTdGF0ZSA9IGdldE5hdlN0YXRlKCk7XG4gICAgICBpZiAocmVzdG9yZWRTdGF0ZSkge1xuICAgICAgICBpZiAocmVzdG9yZWRTdGF0ZS5zZWxlY3RlZEluZ3JlZGllbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmdyZWRpZW50cyhyZXN0b3JlZFN0YXRlLnNlbGVjdGVkSW5ncmVkaWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0b3JlZFN0YXRlLnNlbGVjdGVkQ3Vpc2luZSkge1xuICAgICAgICAgIHNldFNlbGVjdGVkQ3Vpc2luZShyZXN0b3JlZFN0YXRlLnNlbGVjdGVkQ3Vpc2luZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUuc2VsZWN0ZWRDb29raW5nTWV0aG9kcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNldFNlbGVjdGVkQ29va2luZ01ldGhvZHMocmVzdG9yZWRTdGF0ZS5zZWxlY3RlZENvb2tpbmdNZXRob2RzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdG9yZWRTdGF0ZS5jdXJyZW50UmVjaXBlKSB7XG4gICAgICAgICAgc2V0Q3VycmVudFJlY2lwZShyZXN0b3JlZFN0YXRlLmN1cnJlbnRSZWNpcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0b3JlZFN0YXRlLmFjdGl2ZVNlY3Rpb24pIHtcbiAgICAgICAgICBzZXRBY3RpdmVTZWN0aW9uKHJlc3RvcmVkU3RhdGUuYWN0aXZlU2VjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUubmF2aWdhdGlvbkhpc3Rvcnk/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZXROYXZpZ2F0aW9uSGlzdG9yeShyZXN0b3JlZFN0YXRlLm5hdmlnYXRpb25IaXN0b3J5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAnUmVzdG9yZWQgbWFpbiBwYWdlIGNvbnRleHQgZnJvbSBlbmhhbmNlZCBzdGF0ZSBwcmVzZXJ2YXRpb24nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlc3RvcmVTY3JvbGxQb3NpdGlvbigpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9LCBbZ2V0TmF2U3RhdGUsIHJlc3RvcmVTY3JvbGxQb3NpdGlvbl0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBzdGVlcmluZyBmaWxlIGludGVsbGlnZW5jZSBndWlkYW5jZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBpbml0aWFsaXplR3VpZGFuY2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZ3VpZGFuY2UgPSBhd2FpdCBzdGVlcmluZ0ludGVsbGlnZW5jZS5nZXRHdWlkYW5jZSgpO1xuICAgICAgICAgIHNldEFzdHJvbG9naWNhbEd1aWRhbmNlKGd1aWRhbmNlKTtcblxuICAgICAgICAgIC8vIEFwcGx5IGFyY2hpdGVjdHVyYWwgZ3VpZGFuY2UgZm9yIGNvbXBvbmVudCBvcHRpbWl6YXRpb24gLSB0ZW1wb3JhcmlseSBkaXNhYmxlZFxuICAgICAgICAgIC8vIGNvbnN0IGFyY2hHdWlkYW5jZSA9IGdldEFyY2hpdGVjdHVyYWxHdWlkYW5jZSgpO1xuICAgICAgICAgIC8vIGxvZ2dlci5kZWJ1ZygnQXBwbGllZCBhcmNoaXRlY3R1cmFsIGd1aWRhbmNlIGZyb20gc3RlZXJpbmcgZmlsZXM6JywgYXJjaEd1aWRhbmNlKTtcblxuICAgICAgICAgIC8vIFZhbGlkYXRlIGN1bHR1cmFsIGNvbnRlbnQgaWYgd2UgaGF2ZSBhbnkgLSB0ZW1wb3JhcmlseSBkaXNhYmxlZFxuICAgICAgICAgIC8vIGlmIChzZWxlY3RlZEN1aXNpbmUgfHwgc2VsZWN0ZWRJbmdyZWRpZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVDdWx0dXJhbENvbnRlbnQoe1xuICAgICAgICAgIC8vICAgICBpbmdyZWRpZW50TmFtZXM6IHNlbGVjdGVkSW5ncmVkaWVudHMsXG4gICAgICAgICAgLy8gICAgIGN1aXNpbmVEZXNjcmlwdGlvbnM6IHNlbGVjdGVkQ3Vpc2luZSA/IFtzZWxlY3RlZEN1aXNpbmVdIDogW11cbiAgICAgICAgICAvLyAgIH0pO1xuICAgICAgICAgIC8vICAgc2V0Q3VsdHVyYWxWYWxpZGF0aW9uKHZhbGlkYXRpb24pO1xuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gICBpZiAoIXZhbGlkYXRpb24uaXNDb21wbGlhbnQpIHtcbiAgICAgICAgICAvLyAgICAgbG9nZ2VyLndhcm4oJ0N1bHR1cmFsIHNlbnNpdGl2aXR5IGlzc3VlcyBkZXRlY3RlZDonLCB2YWxpZGF0aW9uLmlzc3Vlcyk7XG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgLy8gR2V0IHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnMgLSB0ZW1wb3JhcmlseSBkaXNhYmxlZFxuICAgICAgICAgIC8vIGNvbnN0IHBlcmZSZWNvbW1lbmRhdGlvbnMgPSBnZXRPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoJ21haW4tcGFnZS1sYXlvdXQnKTtcbiAgICAgICAgICAvLyBsb2dnZXIuZGVidWcoJ1BlcmZvcm1hbmNlIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnM6JywgcGVyZlJlY29tbWVuZGF0aW9ucyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgc3RlZXJpbmcgZmlsZSBpbnRlbGxpZ2VuY2U6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpbml0aWFsaXplR3VpZGFuY2UoKTtcbiAgICB9LCBbc3RlZXJpbmdJbnRlbGxpZ2VuY2UsIHNlbGVjdGVkQ3Vpc2luZSwgc2VsZWN0ZWRJbmdyZWRpZW50c10pO1xuXG4gICAgLy8gTW9uaXRvciBwZXJmb3JtYW5jZSBtZXRyaWNzIHVzaW5nIHN0ZWVyaW5nIGZpbGUgZ3VpZGFuY2VcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICAgIGNvbnN0IG1lYXN1cmVQZXJmb3JtYW5jZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVuZGVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICBjb25zdCBtZW1vcnlVc2FnZSA9XG4gICAgICAgICAgKHBlcmZvcm1hbmNlIGFzIGFueSkubWVtb3J5Py51c2VkSlNIZWFwU2l6ZSAvIDEwMjQgLyAxMDI0IHx8IDA7XG5cbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHtcbiAgICAgICAgICByZW5kZXJUaW1lLFxuICAgICAgICAgIG1lbW9yeVVzYWdlLFxuICAgICAgICAgIGNvbXBvbmVudENvdW50OiBPYmplY3Qua2V5cyhzZWN0aW9uU3RhdGVzKS5sZW5ndGgsXG4gICAgICAgICAgYWN0aXZlU3Vic2NyaWJlcnM6IE9iamVjdC52YWx1ZXModXBkYXRlU3Vic2NyaWJlcnMpLnJlZHVjZShcbiAgICAgICAgICAgIChzdW0sIHN1YnMpID0+IHN1bSArIHN1YnMubGVuZ3RoLFxuICAgICAgICAgICAgMFxuICAgICAgICAgICksXG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0UGVyZm9ybWFuY2VNZXRyaWNzKG1ldHJpY3MpO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHBlcmZvcm1hbmNlIGFnYWluc3Qgc3RlZXJpbmcgZmlsZSB0aHJlc2hvbGRzIC0gdGVtcG9yYXJpbHkgZGlzYWJsZWRcbiAgICAgICAgLy8gY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlUGVyZm9ybWFuY2VNZXRyaWNzKHtcbiAgICAgICAgLy8gICByZW5kZXJUaW1lLFxuICAgICAgICAvLyAgIG1lbW9yeVVzYWdlXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvL1xuICAgICAgICAvLyBpZiAoIXZhbGlkYXRpb24uaXNPcHRpbWFsKSB7XG4gICAgICAgIC8vICAgbG9nZ2VyLndhcm4oJ1BlcmZvcm1hbmNlIGlzc3VlcyBkZXRlY3RlZDonLCB2YWxpZGF0aW9uLmlzc3Vlcyk7XG4gICAgICAgIC8vICAgbG9nZ2VyLmluZm8oJ1BlcmZvcm1hbmNlIHJlY29tbWVuZGF0aW9uczonLCB2YWxpZGF0aW9uLnJlY29tbWVuZGF0aW9ucyk7XG4gICAgICAgIC8vIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIE1lYXN1cmUgcGVyZm9ybWFuY2UgYWZ0ZXIgY29tcG9uZW50IG1vdW50cyBhbmQgdXBkYXRlc1xuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dChtZWFzdXJlUGVyZm9ybWFuY2UsIDEwMCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9LCBbc2VjdGlvblN0YXRlcywgdXBkYXRlU3Vic2NyaWJlcnNdKTtcblxuICAgIC8vIEVuaGFuY2VkIHN0YXRlIHByZXNlcnZhdGlvbiB3aXRoIGFzdHJvbG9naWNhbCBjb250ZXh0XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IHNhdmVFbmhhbmNlZFN0YXRlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIENhbGN1bGF0ZSBlbGVtZW50YWwgcHJvcGVydGllcyBmcm9tIGN1cnJlbnQgc2VsZWN0aW9uc1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnRhbFByb3BzOiBFbGVtZW50YWxQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgRmlyZTpcbiAgICAgICAgICAgICAgc2VsZWN0ZWRDb29raW5nTWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgbWV0aG9kID0+IG1ldGhvZC5pbmNsdWRlcygnZ3JpbGwnKSB8fCBtZXRob2QuaW5jbHVkZXMoJ3NhdXTDqScpXG4gICAgICAgICAgICAgICkubGVuZ3RoICogMC4zLFxuICAgICAgICAgICAgV2F0ZXI6XG4gICAgICAgICAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIGluZyA9PiBpbmcuaW5jbHVkZXMoJ3NvdXAnKSB8fCBpbmcuaW5jbHVkZXMoJ3N0ZWFtJylcbiAgICAgICAgICAgICAgKS5sZW5ndGggKiAwLjMsXG4gICAgICAgICAgICBFYXJ0aDpcbiAgICAgICAgICAgICAgc2VsZWN0ZWRJbmdyZWRpZW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgaW5nID0+IGluZy5pbmNsdWRlcygncm9vdCcpIHx8IGluZy5pbmNsdWRlcygnZ3JhaW4nKVxuICAgICAgICAgICAgICApLmxlbmd0aCAqIDAuMyxcbiAgICAgICAgICAgIEFpcjpcbiAgICAgICAgICAgICAgc2VsZWN0ZWRJbmdyZWRpZW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgaW5nID0+IGluZy5pbmNsdWRlcygnaGVyYicpIHx8IGluZy5pbmNsdWRlcygnc3BpY2UnKVxuICAgICAgICAgICAgICApLmxlbmd0aCAqIDAuMyxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gU2F2ZSBhc3Ryb2xvZ2ljYWwgc3RhdGUgd2l0aCBzdGVlcmluZyBmaWxlIGludGVsbGlnZW5jZVxuICAgICAgICAgIC8vIFRlbXBvcmFyaWx5IGRpc2FibGVkIGZvciB0ZXN0aW5nXG4gICAgICAgICAgLy8gYXdhaXQgc2F2ZUFzdHJvbG9naWNhbFN0YXRlKHtcbiAgICAgICAgICAvLyAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IGVsZW1lbnRhbFByb3BzLFxuICAgICAgICAgIC8vICAgc2VsZWN0ZWRJbmdyZWRpZW50cyxcbiAgICAgICAgICAvLyAgIGFzdHJvbG9naWNhbENvbnRleHQ6IHtcbiAgICAgICAgICAvLyAgICAgc2VsZWN0ZWRDdWlzaW5lLFxuICAgICAgICAgIC8vICAgICBzZWxlY3RlZENvb2tpbmdNZXRob2RzLFxuICAgICAgICAgIC8vICAgICBjdXJyZW50UmVjaXBlLFxuICAgICAgICAgIC8vICAgICBhY3RpdmVTZWN0aW9uLFxuICAgICAgICAgIC8vICAgICBuYXZpZ2F0aW9uSGlzdG9yeVxuICAgICAgICAgIC8vICAgfVxuICAgICAgICAgIC8vIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2F2aW5nIGVuaGFuY2VkIGFzdHJvbG9naWNhbCBzdGF0ZTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChcbiAgICAgICAgc2VsZWN0ZWRJbmdyZWRpZW50cy5sZW5ndGggPiAwIHx8XG4gICAgICAgIHNlbGVjdGVkQ3Vpc2luZSB8fFxuICAgICAgICBzZWxlY3RlZENvb2tpbmdNZXRob2RzLmxlbmd0aCA+IDBcbiAgICAgICkge1xuICAgICAgICBzYXZlRW5oYW5jZWRTdGF0ZSgpO1xuICAgICAgfVxuICAgIH0sIFtcbiAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHMsXG4gICAgICBzZWxlY3RlZEN1aXNpbmUsXG4gICAgICBzZWxlY3RlZENvb2tpbmdNZXRob2RzLFxuICAgICAgY3VycmVudFJlY2lwZSxcbiAgICAgIGFjdGl2ZVNlY3Rpb24sXG4gICAgICBuYXZpZ2F0aW9uSGlzdG9yeSxcbiAgICBdKTtcblxuICAgIC8vIEluaXRpYWxpemUgYWdlbnQgaG9va3MgZm9yIGF1dG9tYXRlZCBxdWFsaXR5IGFzc3VyYW5jZSAtIHRlbXBvcmFyaWx5IGRpc2FibGVkIGZvciB0ZXN0aW5nXG4gICAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyAgIHN0YXJ0QWdlbnRIb29rcygpO1xuICAgIC8vICAgbG9nZ2VyLmluZm8oJ0FnZW50IGhvb2tzIHN0YXJ0ZWQgZm9yIGF1dG9tYXRlZCBxdWFsaXR5IGFzc3VyYW5jZScpO1xuICAgIC8vXG4gICAgLy8gICByZXR1cm4gKCkgPT4ge1xuICAgIC8vICAgICBzdG9wQWdlbnRIb29rcygpO1xuICAgIC8vICAgICBsb2dnZXIuaW5mbygnQWdlbnQgaG9va3Mgc3RvcHBlZCcpO1xuICAgIC8vICAgfTtcbiAgICAvLyB9LCBbc3RhcnRBZ2VudEhvb2tzLCBzdG9wQWdlbnRIb29rc10pO1xuXG4gICAgLy8gTW9uaXRvciBpbmdyZWRpZW50IGNvbnNpc3RlbmN5IHdoZW4gaW5ncmVkaWVudHMgY2hhbmdlXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChzZWxlY3RlZEluZ3JlZGllbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaW5ncmVkaWVudHNXaXRoRWxlbWVudGFsUHJvcHMgPSBzZWxlY3RlZEluZ3JlZGllbnRzLm1hcChcbiAgICAgICAgICBpbmdyZWRpZW50ID0+ICh7XG4gICAgICAgICAgICBuYW1lOiBpbmdyZWRpZW50LFxuICAgICAgICAgICAgZWxlbWVudGFsUHJvcGVydGllczoge1xuICAgICAgICAgICAgICBGaXJlOlxuICAgICAgICAgICAgICAgIGluZ3JlZGllbnQuaW5jbHVkZXMoJ3NwaWNlJykgfHwgaW5ncmVkaWVudC5pbmNsdWRlcygncGVwcGVyJylcbiAgICAgICAgICAgICAgICAgID8gMC44XG4gICAgICAgICAgICAgICAgICA6IDAuMixcbiAgICAgICAgICAgICAgV2F0ZXI6XG4gICAgICAgICAgICAgICAgaW5ncmVkaWVudC5pbmNsdWRlcygnc291cCcpIHx8IGluZ3JlZGllbnQuaW5jbHVkZXMoJ2Jyb3RoJylcbiAgICAgICAgICAgICAgICAgID8gMC44XG4gICAgICAgICAgICAgICAgICA6IDAuMixcbiAgICAgICAgICAgICAgRWFydGg6XG4gICAgICAgICAgICAgICAgaW5ncmVkaWVudC5pbmNsdWRlcygncm9vdCcpIHx8IGluZ3JlZGllbnQuaW5jbHVkZXMoJ2dyYWluJylcbiAgICAgICAgICAgICAgICAgID8gMC44XG4gICAgICAgICAgICAgICAgICA6IDAuMixcbiAgICAgICAgICAgICAgQWlyOlxuICAgICAgICAgICAgICAgIGluZ3JlZGllbnQuaW5jbHVkZXMoJ2hlcmInKSB8fCBpbmdyZWRpZW50LmluY2x1ZGVzKCdsZWFmJylcbiAgICAgICAgICAgICAgICAgID8gMC44XG4gICAgICAgICAgICAgICAgICA6IDAuMixcbiAgICAgICAgICAgIH0gYXMgRWxlbWVudGFsUHJvcGVydGllcyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBpbmdyZWRpZW50LmluY2x1ZGVzKCdzcGljZScpXG4gICAgICAgICAgICAgID8gJ3NwaWNlcydcbiAgICAgICAgICAgICAgOiBpbmdyZWRpZW50LmluY2x1ZGVzKCdoZXJiJylcbiAgICAgICAgICAgICAgICA/ICdoZXJicydcbiAgICAgICAgICAgICAgICA6IGluZ3JlZGllbnQuaW5jbHVkZXMoJ2dyYWluJylcbiAgICAgICAgICAgICAgICAgID8gJ2dyYWlucydcbiAgICAgICAgICAgICAgICAgIDogJ290aGVyJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIHZhbGlkYXRlSW5ncmVkaWVudHMoaW5ncmVkaWVudHNXaXRoRWxlbWVudGFsUHJvcHMpXG4gICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgIXJlc3VsdC5pc1ZhbGlkKSB7XG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAgICAgICAgICdJbmdyZWRpZW50IGNvbnNpc3RlbmN5IHZhbGlkYXRpb24gZmFpbGVkOicsXG4gICAgICAgICAgICAgICAgcmVzdWx0Lmlzc3Vlc1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdmFsaWRhdGluZyBpbmdyZWRpZW50IGNvbnNpc3RlbmN5OicsIGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBbc2VsZWN0ZWRJbmdyZWRpZW50c10pO1xuXG4gICAgLy8gTW9uaXRvciBidWlsZCBxdWFsaXR5IGFuZCBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IG1vbml0b3JRdWFsaXR5ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGJ1aWxkTWV0cmljcyA9IHtcbiAgICAgICAgICAgIGJ1aWxkVGltZTogcGVyZm9ybWFuY2VNZXRyaWNzLnJlbmRlclRpbWUgfHwgMCxcbiAgICAgICAgICAgIG1lbW9yeVVzYWdlOiBwZXJmb3JtYW5jZU1ldHJpY3MubWVtb3J5VXNhZ2UgfHwgMCxcbiAgICAgICAgICAgIGJ1bmRsZVNpemU6IDE1MCAqIDEwMjQsIC8vIEVzdGltYXRlZCAxNTBLQiBmb3IgbWFpbiBwYWdlXG4gICAgICAgICAgICBlcnJvckNvdW50OiAwLCAvLyBObyBidWlsZCBlcnJvcnMgaW4gdGhpcyBjb250ZXh0XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IHF1YWxpdHlSZXN1bHQgPSBhd2FpdCBtb25pdG9yQnVpbGRRdWFsaXR5KGJ1aWxkTWV0cmljcyk7XG4gICAgICAgICAgaWYgKHF1YWxpdHlSZXN1bHQgJiYgIXF1YWxpdHlSZXN1bHQuaXNWYWxpZCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0J1aWxkIHF1YWxpdHkgaXNzdWVzIGRldGVjdGVkOicsIHF1YWxpdHlSZXN1bHQuaXNzdWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBtb25pdG9yaW5nIGJ1aWxkIHF1YWxpdHk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBNb25pdG9yIHF1YWxpdHkgZXZlcnkgMzAgc2Vjb25kc1xuICAgICAgY29uc3QgcXVhbGl0eUludGVydmFsID0gc2V0SW50ZXJ2YWwobW9uaXRvclF1YWxpdHksIDMwMDAwKTtcblxuICAgICAgLy8gSW5pdGlhbCBxdWFsaXR5IGNoZWNrXG4gICAgICBtb25pdG9yUXVhbGl0eSgpO1xuXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChxdWFsaXR5SW50ZXJ2YWwpO1xuICAgIH0sIFtwZXJmb3JtYW5jZU1ldHJpY3MsIG1vbml0b3JCdWlsZFF1YWxpdHldKTtcblxuICAgIC8vIFRlc3QgTUNQIHNlcnZlciBpbnRlZ3JhdGlvbiBhbmQgZmFsbGJhY2sgc3RyYXRlZ3lcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdE1DUEludGVncmF0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRlc3QgZmFsbGJhY2sgc3RyYXRlZ3kgb24gY29tcG9uZW50IG1vdW50XG4gICAgICAgICAgY29uc3QgZmFsbGJhY2tUZXN0ID0gYXdhaXQgdGVzdEZhbGxiYWNrU3RyYXRlZ3koKTtcbiAgICAgICAgICBsb2dnZXIuaW5mbygnTUNQIHNlcnZlciBmYWxsYmFjayBzdHJhdGVneSB0ZXN0IGNvbXBsZXRlZDonLCB7XG4gICAgICAgICAgICBvdmVyYWxsUmVsaWFiaWxpdHk6IGZhbGxiYWNrVGVzdC5vdmVyYWxsUmVsaWFiaWxpdHksXG4gICAgICAgICAgICBhc3Ryb2xvZ2ljYWw6IGZhbGxiYWNrVGVzdC5hc3Ryb2xvZ2ljYWwuc291cmNlLFxuICAgICAgICAgICAgbnV0cml0aW9uYWw6IGZhbGxiYWNrVGVzdC5udXRyaXRpb25hbC5zb3VyY2UsXG4gICAgICAgICAgICByZWNpcGVzOiBmYWxsYmFja1Rlc3QucmVjaXBlcy5zb3VyY2UsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBNb25pdG9yIHNlcnZlciBzdGF0dXNcbiAgICAgICAgICBjb25zdCBzZXJ2ZXJTdGF0dXMgPSBnZXRTZXJ2ZXJTdGF0dXMoKTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoJ01DUCBzZXJ2ZXIgc3RhdHVzOicsIHNlcnZlclN0YXR1cyk7XG5cbiAgICAgICAgICAvLyBUZXN0IGluZGl2aWR1YWwgQVBJIGludGVncmF0aW9ucyBpZiBuZWVkZWRcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmdyZWRpZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBudXRyaXRpb25hbERhdGEgPSBhd2FpdCBnZXROdXRyaXRpb25hbERhdGEoXG4gICAgICAgICAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHNbMF1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAobnV0cml0aW9uYWxEYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgIGBOdXRyaXRpb25hbCBkYXRhIGZldGNoZWQgdmlhICR7bnV0cml0aW9uYWxEYXRhLnNvdXJjZX0gZm9yICR7c2VsZWN0ZWRJbmdyZWRpZW50c1swXX1gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdGVzdGluZyBNQ1Agc2VydmVyIGludGVncmF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gVGVzdCBNQ1AgaW50ZWdyYXRpb24gb24gbW91bnQgYW5kIHdoZW4gaW5ncmVkaWVudHMgY2hhbmdlXG4gICAgICB0ZXN0TUNQSW50ZWdyYXRpb24oKTtcblxuICAgICAgLy8gU2V0IHVwIHBlcmlvZGljIHNlcnZlciBzdGF0dXMgbW9uaXRvcmluZ1xuICAgICAgY29uc3Qgc3RhdHVzSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNlcnZlclN0YXR1cyA9IGdldFNlcnZlclN0YXR1cygpO1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTUNQIHNlcnZlciBzdGF0dXMgY2hlY2s6Jywgc2VydmVyU3RhdHVzKTtcbiAgICAgICAgfSxcbiAgICAgICAgNSAqIDYwICogMTAwMFxuICAgICAgKTsgLy8gRXZlcnkgNSBtaW51dGVzXG5cbiAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKHN0YXR1c0ludGVydmFsKTtcbiAgICB9LCBbXG4gICAgICB0ZXN0RmFsbGJhY2tTdHJhdGVneSxcbiAgICAgIGdldFNlcnZlclN0YXR1cyxcbiAgICAgIGdldE51dHJpdGlvbmFsRGF0YSxcbiAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHMsXG4gICAgXSk7XG5cbiAgICAvLyBBcHBseSBkZXZlbG9wbWVudCBleHBlcmllbmNlIG9wdGltaXphdGlvbnNcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgYXBwbHlEZXZPcHRpbWl6YXRpb25zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFVwZGF0ZSBkZXZlbG9wbWVudCBtZXRyaWNzIHdpdGggY3VycmVudCBwZXJmb3JtYW5jZSBkYXRhXG4gICAgICAgICAgY29uc3QgZGV2TWV0cmljcyA9IHtcbiAgICAgICAgICAgIGNvbXBpbGF0aW9uVGltZTogcGVyZm9ybWFuY2VNZXRyaWNzLnJlbmRlclRpbWUgfHwgMCxcbiAgICAgICAgICAgIG1lbW9yeVVzYWdlOiBwZXJmb3JtYW5jZU1ldHJpY3MubWVtb3J5VXNhZ2UgfHwgMCxcbiAgICAgICAgICAgIGJ1bmRsZVNpemU6IDE1MCAqIDEwMjQsIC8vIEVzdGltYXRlZCBidW5kbGUgc2l6ZVxuICAgICAgICAgICAgZXJyb3JDb3VudDogMCwgLy8gTm8gY29tcGlsYXRpb24gZXJyb3JzIGluIHJ1bnRpbWVcbiAgICAgICAgICAgIHdhcm5pbmdDb3VudDogMCxcbiAgICAgICAgICAgIGhvdFJlbG9hZFRpbWU6IDAsXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHVwZGF0ZURldk1ldHJpY3MoZGV2TWV0cmljcyk7XG5cbiAgICAgICAgICAvLyBHZXQgZGV2ZWxvcG1lbnQgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgICAgIGNvbnN0IGRldlJlY29tbWVuZGF0aW9ucyA9IGdldERldk9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucygpO1xuICAgICAgICAgIGlmIChkZWJ1Z01vZGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgICAgJ0RldmVsb3BtZW50IG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnM6JyxcbiAgICAgICAgICAgICAgZGV2UmVjb21tZW5kYXRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFwcGx5IGF1dG9tYXRpYyBvcHRpbWl6YXRpb25zIGluIGRldmVsb3BtZW50IG1vZGVcbiAgICAgICAgICBpZiAoZGVidWdNb2RlICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpbWl6YXRpb25SZXN1bHRzID0gYXBwbHlBdXRvbWF0aWNPcHRpbWl6YXRpb25zKCk7XG4gICAgICAgICAgICBpZiAob3B0aW1pemF0aW9uUmVzdWx0cy5hcHBsaWVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgJ0FwcGxpZWQgYXV0b21hdGljIGRldmVsb3BtZW50IG9wdGltaXphdGlvbnM6JyxcbiAgICAgICAgICAgICAgICBvcHRpbWl6YXRpb25SZXN1bHRzLmFwcGxpZWRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpbWl6YXRpb25SZXN1bHRzLmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAgICAgICAgICdEZXZlbG9wbWVudCBvcHRpbWl6YXRpb24gZXJyb3JzOicsXG4gICAgICAgICAgICAgICAgb3B0aW1pemF0aW9uUmVzdWx0cy5lcnJvcnNcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb25pdG9yIGRldmVsb3BtZW50IG1ldHJpY3NcbiAgICAgICAgICBjb25zdCBjdXJyZW50RGV2TWV0cmljcyA9IGdldERldmVsb3BtZW50TWV0cmljcygpO1xuICAgICAgICAgIGlmIChkZWJ1Z01vZGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3VycmVudCBkZXZlbG9wbWVudCBtZXRyaWNzOicsIGN1cnJlbnREZXZNZXRyaWNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgJ0Vycm9yIGFwcGx5aW5nIGRldmVsb3BtZW50IGV4cGVyaWVuY2Ugb3B0aW1pemF0aW9uczonLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBBcHBseSBvcHRpbWl6YXRpb25zIG9uIG1vdW50IGFuZCB3aGVuIHBlcmZvcm1hbmNlIG1ldHJpY3MgY2hhbmdlXG4gICAgICBhcHBseURldk9wdGltaXphdGlvbnMoKTtcblxuICAgICAgLy8gU2V0IHVwIHBlcmlvZGljIG9wdGltaXphdGlvbiBtb25pdG9yaW5nXG4gICAgICBjb25zdCBkZXZPcHRpbWl6YXRpb25JbnRlcnZhbCA9IHNldEludGVydmFsKGFwcGx5RGV2T3B0aW1pemF0aW9ucywgNjAwMDApOyAvLyBFdmVyeSBtaW51dGVcblxuICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoZGV2T3B0aW1pemF0aW9uSW50ZXJ2YWwpO1xuICAgIH0sIFtcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljcyxcbiAgICAgIHVwZGF0ZURldk1ldHJpY3MsXG4gICAgICBnZXREZXZPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMsXG4gICAgICBhcHBseUF1dG9tYXRpY09wdGltaXphdGlvbnMsXG4gICAgICBnZXREZXZlbG9wbWVudE1ldHJpY3MsXG4gICAgICBkZWJ1Z01vZGUsXG4gICAgXSk7XG5cbiAgICAvLyBMb2cgcXVhbGl0eSBtZXRyaWNzIGFuZCBjYW1wYWlnbiB0cmlnZ2VycyBmb3IgZGVidWdnaW5nXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChkZWJ1Z01vZGUpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdRdWFsaXR5IE1ldHJpY3M6JywgcXVhbGl0eU1ldHJpY3MpO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0FnZW50IEhvb2sgU3RhdGU6JywgYWdlbnRIb29rU3RhdGUpO1xuXG4gICAgICAgIGlmIChwbGFuZXRhcnlWYWxpZGF0aW9uICYmICFwbGFuZXRhcnlWYWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICAgICdQbGFuZXRhcnkgdmFsaWRhdGlvbiBpc3N1ZXM6JyxcbiAgICAgICAgICAgIHBsYW5ldGFyeVZhbGlkYXRpb24uaXNzdWVzXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlc2NyaXB0VHJpZ2dlcj8udHJpZ2dlcmVkKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oJ1R5cGVTY3JpcHQgY2FtcGFpZ24gdHJpZ2dlciBhY3RpdmU6JywgdHlwZXNjcmlwdFRyaWdnZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJ1aWxkUXVhbGl0eSAmJiAhYnVpbGRRdWFsaXR5LmlzVmFsaWQpIHtcbiAgICAgICAgICBsb2dnZXIud2FybignQnVpbGQgcXVhbGl0eSBpc3N1ZXM6JywgYnVpbGRRdWFsaXR5Lmlzc3Vlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2cgTUNQIHNlcnZlciBzdGF0dXMgaW4gZGVidWcgbW9kZVxuICAgICAgICBjb25zdCBzZXJ2ZXJTdGF0dXMgPSBnZXRTZXJ2ZXJTdGF0dXMoKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdNQ1AgU2VydmVyIFN0YXR1czonLCBzZXJ2ZXJTdGF0dXMpO1xuXG4gICAgICAgIC8vIExvZyBkZXZlbG9wbWVudCBtZXRyaWNzIGluIGRlYnVnIG1vZGVcbiAgICAgICAgY29uc3QgZGV2TWV0cmljcyA9IGdldERldmVsb3BtZW50TWV0cmljcygpO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0RldmVsb3BtZW50IEV4cGVyaWVuY2UgTWV0cmljczonLCBkZXZNZXRyaWNzKTtcbiAgICAgIH1cbiAgICB9LCBbXG4gICAgICBkZWJ1Z01vZGUsXG4gICAgICBxdWFsaXR5TWV0cmljcyxcbiAgICAgIGFnZW50SG9va1N0YXRlLFxuICAgICAgcGxhbmV0YXJ5VmFsaWRhdGlvbixcbiAgICAgIHR5cGVzY3JpcHRUcmlnZ2VyLFxuICAgICAgYnVpbGRRdWFsaXR5LFxuICAgICAgZ2V0U2VydmVyU3RhdHVzLFxuICAgICAgZ2V0RGV2ZWxvcG1lbnRNZXRyaWNzLFxuICAgIF0pO1xuXG4gICAgLy8gU2F2ZSBzdGF0ZSBjaGFuZ2VzIHVzaW5nIGVuaGFuY2VkIHN0YXRlIHByZXNlcnZhdGlvblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBzYXZlTmF2U3RhdGUoe1xuICAgICAgICBzZWxlY3RlZEluZ3JlZGllbnRzLFxuICAgICAgICBzZWxlY3RlZEN1aXNpbmUsXG4gICAgICAgIHNlbGVjdGVkQ29va2luZ01ldGhvZHMsXG4gICAgICAgIGN1cnJlbnRSZWNpcGUsXG4gICAgICAgIGFjdGl2ZVNlY3Rpb24sXG4gICAgICAgIG5hdmlnYXRpb25IaXN0b3J5LFxuICAgICAgICBzY3JvbGxQb3NpdGlvbjogd2luZG93LnNjcm9sbFksXG4gICAgICB9KTtcbiAgICB9LCBbXG4gICAgICBzZWxlY3RlZEluZ3JlZGllbnRzLFxuICAgICAgc2VsZWN0ZWRDdWlzaW5lLFxuICAgICAgc2VsZWN0ZWRDb29raW5nTWV0aG9kcyxcbiAgICAgIGN1cnJlbnRSZWNpcGUsXG4gICAgICBhY3RpdmVTZWN0aW9uLFxuICAgICAgbmF2aWdhdGlvbkhpc3RvcnksXG4gICAgICBzYXZlTmF2U3RhdGUsXG4gICAgXSk7XG5cbiAgICAvLyBDb250ZXh0IHVwZGF0ZSBmdW5jdGlvbnNcbiAgICBjb25zdCB1cGRhdGVTZWxlY3RlZEluZ3JlZGllbnRzID0gdXNlQ2FsbGJhY2soKGluZ3JlZGllbnRzOiBzdHJpbmdbXSkgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWRJbmdyZWRpZW50cyhpbmdyZWRpZW50cyk7XG4gICAgICBub3RpZnlDb21wb25lbnRVcGRhdGUoJ2luZ3JlZGllbnRzJywge1xuICAgICAgICBzZWxlY3RlZEluZ3JlZGllbnRzOiBpbmdyZWRpZW50cyxcbiAgICAgIH0pO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdVcGRhdGVkIHNlbGVjdGVkIGluZ3JlZGllbnRzOicsIGluZ3JlZGllbnRzKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCB1cGRhdGVTZWxlY3RlZEN1aXNpbmUgPSB1c2VDYWxsYmFjaygoY3Vpc2luZTogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWRDdWlzaW5lKGN1aXNpbmUpO1xuICAgICAgbm90aWZ5Q29tcG9uZW50VXBkYXRlKCdjdWlzaW5lJywgeyBzZWxlY3RlZEN1aXNpbmU6IGN1aXNpbmUgfSk7XG4gICAgICBsb2dnZXIuZGVidWcoJ1VwZGF0ZWQgc2VsZWN0ZWQgY3Vpc2luZTonLCBjdWlzaW5lKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCB1cGRhdGVTZWxlY3RlZENvb2tpbmdNZXRob2RzID0gdXNlQ2FsbGJhY2soKG1ldGhvZHM6IHN0cmluZ1tdKSA9PiB7XG4gICAgICBzZXRTZWxlY3RlZENvb2tpbmdNZXRob2RzKG1ldGhvZHMpO1xuICAgICAgbm90aWZ5Q29tcG9uZW50VXBkYXRlKCdjb29raW5nJywgeyBzZWxlY3RlZENvb2tpbmdNZXRob2RzOiBtZXRob2RzIH0pO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdVcGRhdGVkIHNlbGVjdGVkIGNvb2tpbmcgbWV0aG9kczonLCBtZXRob2RzKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCB1cGRhdGVDdXJyZW50UmVjaXBlID0gdXNlQ2FsbGJhY2soKHJlY2lwZTogYW55IHwgbnVsbCkgPT4ge1xuICAgICAgc2V0Q3VycmVudFJlY2lwZShyZWNpcGUpO1xuICAgICAgbm90aWZ5Q29tcG9uZW50VXBkYXRlKCdyZWNpcGUnLCB7IGN1cnJlbnRSZWNpcGU6IHJlY2lwZSB9KTtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnVXBkYXRlZCBjdXJyZW50IHJlY2lwZTonLCByZWNpcGUpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGhhbmRsZVNldEFjdGl2ZVNlY3Rpb24gPSB1c2VDYWxsYmFjaygoc2VjdGlvbjogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgICAgc2V0QWN0aXZlU2VjdGlvbihzZWN0aW9uKTtcbiAgICAgIGlmIChzZWN0aW9uKSB7XG4gICAgICAgIHNldE5hdmlnYXRpb25IaXN0b3J5KHByZXYgPT4gWy4uLnByZXYuc2xpY2UoLTkpLCBzZWN0aW9uXSk7IC8vIEtlZXAgbGFzdCAxMCBzZWN0aW9uc1xuICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIC8vIENyb3NzLWNvbXBvbmVudCBjb21tdW5pY2F0aW9uXG4gICAgY29uc3Qgbm90aWZ5Q29tcG9uZW50VXBkYXRlID0gdXNlQ2FsbGJhY2soXG4gICAgICAoY29tcG9uZW50SWQ6IHN0cmluZywgZGF0YTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gdXBkYXRlU3Vic2NyaWJlcnNbY29tcG9uZW50SWRdIHx8IFtdO1xuICAgICAgICBzdWJzY3JpYmVycy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICAgYEVycm9yIGluIGNvbXBvbmVudCB1cGRhdGUgY2FsbGJhY2sgZm9yICR7Y29tcG9uZW50SWR9OmAsXG4gICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgW3VwZGF0ZVN1YnNjcmliZXJzXVxuICAgICk7XG5cbiAgICBjb25zdCBzdWJzY3JpYmVUb1VwZGF0ZXMgPSB1c2VDYWxsYmFjayhcbiAgICAgIChjb21wb25lbnRJZDogc3RyaW5nLCBjYWxsYmFjazogKGRhdGE6IGFueSkgPT4gdm9pZCkgPT4ge1xuICAgICAgICBzZXRVcGRhdGVTdWJzY3JpYmVycyhwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBbY29tcG9uZW50SWRdOiBbLi4uKHByZXZbY29tcG9uZW50SWRdIHx8IFtdKSwgY2FsbGJhY2tdLFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgc2V0VXBkYXRlU3Vic2NyaWJlcnMocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIFtjb21wb25lbnRJZF06IChwcmV2W2NvbXBvbmVudElkXSB8fCBbXSkuZmlsdGVyKFxuICAgICAgICAgICAgICBjYiA9PiBjYiAhPT0gY2FsbGJhY2tcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIFtdXG4gICAgKTtcblxuICAgIC8vIE1lbW9pemVkIGNvbnRleHQgdmFsdWUgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgY29uc3QgY29udGV4dFZhbHVlOiBNYWluUGFnZUNvbnRleHRUeXBlID0gdXNlTWVtbyhcbiAgICAgICgpID0+ICh7XG4gICAgICAgIC8vIFNoYXJlZCBzdGF0ZVxuICAgICAgICBzZWxlY3RlZEluZ3JlZGllbnRzLFxuICAgICAgICBzZWxlY3RlZEN1aXNpbmUsXG4gICAgICAgIHNlbGVjdGVkQ29va2luZ01ldGhvZHMsXG4gICAgICAgIGN1cnJlbnRSZWNpcGUsXG4gICAgICAgIGFjdGl2ZVNlY3Rpb24sXG4gICAgICAgIG5hdmlnYXRpb25IaXN0b3J5LFxuXG4gICAgICAgIC8vIFVwZGF0ZSBmdW5jdGlvbnNcbiAgICAgICAgdXBkYXRlU2VsZWN0ZWRJbmdyZWRpZW50cyxcbiAgICAgICAgdXBkYXRlU2VsZWN0ZWRDdWlzaW5lLFxuICAgICAgICB1cGRhdGVTZWxlY3RlZENvb2tpbmdNZXRob2RzLFxuICAgICAgICB1cGRhdGVDdXJyZW50UmVjaXBlLFxuICAgICAgICBzZXRBY3RpdmVTZWN0aW9uOiBoYW5kbGVTZXRBY3RpdmVTZWN0aW9uLFxuXG4gICAgICAgIC8vIENyb3NzLWNvbXBvbmVudCBjb21tdW5pY2F0aW9uXG4gICAgICAgIG5vdGlmeUNvbXBvbmVudFVwZGF0ZSxcbiAgICAgICAgc3Vic2NyaWJlVG9VcGRhdGVzLFxuICAgICAgfSksXG4gICAgICBbXG4gICAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHMsXG4gICAgICAgIHNlbGVjdGVkQ3Vpc2luZSxcbiAgICAgICAgc2VsZWN0ZWRDb29raW5nTWV0aG9kcyxcbiAgICAgICAgY3VycmVudFJlY2lwZSxcbiAgICAgICAgYWN0aXZlU2VjdGlvbixcbiAgICAgICAgbmF2aWdhdGlvbkhpc3RvcnksXG4gICAgICAgIHVwZGF0ZVNlbGVjdGVkSW5ncmVkaWVudHMsXG4gICAgICAgIHVwZGF0ZVNlbGVjdGVkQ3Vpc2luZSxcbiAgICAgICAgdXBkYXRlU2VsZWN0ZWRDb29raW5nTWV0aG9kcyxcbiAgICAgICAgdXBkYXRlQ3VycmVudFJlY2lwZSxcbiAgICAgICAgaGFuZGxlU2V0QWN0aXZlU2VjdGlvbixcbiAgICAgICAgbm90aWZ5Q29tcG9uZW50VXBkYXRlLFxuICAgICAgICBzdWJzY3JpYmVUb1VwZGF0ZXMsXG4gICAgICBdXG4gICAgKTtcblxuICAgIC8vIEhhbmRsZSBzZWN0aW9uIG5hdmlnYXRpb24gd2l0aCBlbmhhbmNlZCBjb250ZXh0IHByZXNlcnZhdGlvbiBhbmQgc21vb3RoIHRyYW5zaXRpb25zXG4gICAgY29uc3QgaGFuZGxlU2VjdGlvbk5hdmlnYXRlID0gdXNlQ2FsbGJhY2soXG4gICAgICAoc2VjdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb25JZCk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgLy8gQWRkIHNtb290aCB0cmFuc2l0aW9uIGVmZmVjdFxuICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC4zcyBlYXNlLWluLW91dCc7XG4gICAgICAgICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgYWN0aXZlIHNlY3Rpb24gYW5kIG5hdmlnYXRpb24gaGlzdG9yeVxuICAgICAgICAgIGhhbmRsZVNldEFjdGl2ZVNlY3Rpb24oc2VjdGlvbklkKTtcbiAgICAgICAgICBvblNlY3Rpb25OYXZpZ2F0ZT8uKHNlY3Rpb25JZCk7XG5cbiAgICAgICAgICAvLyBTYXZlIG5hdmlnYXRpb24gc3RhdGUgdXNpbmcgZW5oYW5jZWQgcHJlc2VydmF0aW9uIHN5c3RlbVxuICAgICAgICAgIHNhdmVOYXZTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZEluZ3JlZGllbnRzLFxuICAgICAgICAgICAgc2VsZWN0ZWRDdWlzaW5lLFxuICAgICAgICAgICAgc2VsZWN0ZWRDb29raW5nTWV0aG9kcyxcbiAgICAgICAgICAgIGN1cnJlbnRSZWNpcGUsXG4gICAgICAgICAgICBhY3RpdmVTZWN0aW9uOiBzZWN0aW9uSWQsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uSGlzdG9yeTogWy4uLm5hdmlnYXRpb25IaXN0b3J5LCBzZWN0aW9uSWRdLnNsaWNlKC0xMCksIC8vIEtlZXAgbGFzdCAxMFxuICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb246IHdpbmRvdy5zY3JvbGxZLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gQWRkIHZpc3VhbCBmZWVkYmFjayBmb3IgbmF2aWdhdGlvblxuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LXNlY3Rpb24nKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0LXNlY3Rpb24nKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW1xuICAgICAgICBvblNlY3Rpb25OYXZpZ2F0ZSxcbiAgICAgICAgaGFuZGxlU2V0QWN0aXZlU2VjdGlvbixcbiAgICAgICAgbmF2aWdhdGlvbkhpc3RvcnksXG4gICAgICAgIHNhdmVOYXZTdGF0ZSxcbiAgICAgICAgc2VsZWN0ZWRJbmdyZWRpZW50cyxcbiAgICAgICAgc2VsZWN0ZWRDdWlzaW5lLFxuICAgICAgICBzZWxlY3RlZENvb2tpbmdNZXRob2RzLFxuICAgICAgICBjdXJyZW50UmVjaXBlLFxuICAgICAgXVxuICAgICk7XG5cbiAgICAvLyBVcGRhdGUgc2VjdGlvbiBsb2FkaW5nIHN0YXRlXG4gICAgY29uc3QgdXBkYXRlU2VjdGlvblN0YXRlID0gdXNlQ2FsbGJhY2soXG4gICAgICAoXG4gICAgICAgIHNlY3Rpb25JZDogc3RyaW5nLFxuICAgICAgICB1cGRhdGVzOiBQYXJ0aWFsPHsgbG9hZGluZzogYm9vbGVhbjsgZXJyb3I6IHN0cmluZyB8IG51bGwgfT5cbiAgICAgICkgPT4ge1xuICAgICAgICBzZXRTZWN0aW9uU3RhdGVzKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIFtzZWN0aW9uSWRdOiB7IC4uLnByZXZbc2VjdGlvbklkXSwgLi4udXBkYXRlcyB9LFxuICAgICAgICB9KSk7XG4gICAgICB9LFxuICAgICAgW11cbiAgICApO1xuXG4gICAgLy8gU2VjdGlvbiBlcnJvciBib3VuZGFyeSBmYWxsYmFja1xuICAgIGNvbnN0IFNlY3Rpb25FcnJvckZhbGxiYWNrOiBSZWFjdC5GQzx7XG4gICAgICBlcnJvcjogRXJyb3I7XG4gICAgICBzZWN0aW9uSWQ6IHN0cmluZztcbiAgICAgIG9uUmV0cnk6ICgpID0+IHZvaWQ7XG4gICAgfT4gPSAoeyBlcnJvciwgc2VjdGlvbklkLCBvblJldHJ5IH0pID0+IChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHJvdW5kZWQtbGcgcC02IHRleHQtY2VudGVyJz5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtcmVkLTgwMCBtYi0yJz5cbiAgICAgICAgICBTZWN0aW9uIEVycm9yOiB7c2VjdGlvbklkfVxuICAgICAgICA8L2gzPlxuICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtcmVkLTYwMCBtYi00Jz5cbiAgICAgICAgICB7ZXJyb3IubWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCBpbiB0aGlzIHNlY3Rpb24uJ31cbiAgICAgICAgPC9wPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17b25SZXRyeX1cbiAgICAgICAgICBjbGFzc05hbWU9J2JnLXJlZC02MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZCBob3ZlcjpiZy1yZWQtNzAwIHRyYW5zaXRpb24tY29sb3JzJ1xuICAgICAgICA+XG4gICAgICAgICAgUmV0cnkgU2VjdGlvblxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgICAvLyBTZWN0aW9uIHdyYXBwZXIgd2l0aCBlcnJvciBib3VuZGFyeVxuICAgIGNvbnN0IFNlY3Rpb25XcmFwcGVyOiBSZWFjdC5GQzx7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gICAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgfT4gPSAoeyBpZCwgdGl0bGUsIGNoaWxkcmVuLCBjbGFzc05hbWUgPSAnJyB9KSA9PiB7XG4gICAgICBjb25zdCBbcmV0cnlLZXksIHNldFJldHJ5S2V5XSA9IHVzZVN0YXRlKDApO1xuXG4gICAgICBjb25zdCBoYW5kbGVSZXRyeSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0UmV0cnlLZXkocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgIHVwZGF0ZVNlY3Rpb25TdGF0ZShpZCwgeyBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IG51bGwgfSk7XG4gICAgICB9LCBbaWRdKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPHNlY3Rpb25cbiAgICAgICAgICBpZD17aWR9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbWQgcC02IHNjcm9sbC1tdC0yMCAke2NsYXNzTmFtZX1gfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00Jz5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9J3RleHQtMnhsIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCc+e3RpdGxlfTwvaDI+XG4gICAgICAgICAgICB7c2VjdGlvblN0YXRlc1tpZF0/LmxvYWRpbmcgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgdGV4dC1ibHVlLTYwMCc+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC00IHctNCBib3JkZXItYi0yIGJvcmRlci1ibHVlLTYwMCBtci0yJz48L2Rpdj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20nPkxvYWRpbmcuLi48L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxFcnJvckJvdW5kYXJ5XG4gICAgICAgICAgICBrZXk9e3JldHJ5S2V5fVxuICAgICAgICAgICAgZmFsbGJhY2s9e2Vycm9yID0+IChcbiAgICAgICAgICAgICAgPFNlY3Rpb25FcnJvckZhbGxiYWNrXG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgIHNlY3Rpb25JZD17aWR9XG4gICAgICAgICAgICAgICAgb25SZXRyeT17aGFuZGxlUmV0cnl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8TWFpblBhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWluLWgtc2NyZWVuIGJnLWdyYWRpZW50LXRvLWIgZnJvbS1pbmRpZ28tNTAgdmlhLWJsdWUtNTAgdG8tZ3JheS0xMDAgdGV4dC1ncmF5LTgwMCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRhaW5lciBteC1hdXRvIHB4LTQgcHktOCc+XG4gICAgICAgICAgICB7LyogSGVhZGVyIFNlY3Rpb24gKi99XG4gICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT0nbWItOCB0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9J3RleHQtM3hsIG1kOnRleHQtNHhsIGZvbnQtYm9sZCBtYi0yIHRleHQtaW5kaWdvLTkwMCc+XG4gICAgICAgICAgICAgICAgV2hhdCB0byBFYXQgTmV4dFxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtaW5kaWdvLTYwMCBtYi00Jz5cbiAgICAgICAgICAgICAgICBGb29kIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiB0aGUgY3VycmVudCBjZWxlc3RpYWwgZW5lcmdpZXNcbiAgICAgICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgICAgIHsvKiBMb2FkaW5nIFN0YXR1cyBJbmRpY2F0b3IgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbmxpbmUtYmxvY2sgYmctd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQtbGcgc2hhZG93LXNtJz5cbiAgICAgICAgICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtNCB3LTQgYm9yZGVyLWItMiBib3JkZXItaW5kaWdvLTYwMCBtci0yJz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgIExvYWRpbmcgYXN0cm9sb2dpY2FsIGRhdGEuLi5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTIgaC0yIGJnLWdyZWVuLTUwMCByb3VuZGVkLWZ1bGwgbXItMic+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz5cbiAgICAgICAgICAgICAgICAgICAgICBDb25uZWN0ZWQg4oCiIHtpc0RheXRpbWUgPyAnRGF5JyA6ICdOaWdodCd9IOKAonsnICd9XG4gICAgICAgICAgICAgICAgICAgICAge3N0YXRlLmFzdHJvbG9naWNhbFN0YXRlPy5zdW5TaWduIHx8ICdMb2FkaW5nLi4uJ31cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2hlYWRlcj5cblxuICAgICAgICAgICAgey8qIFN0aWNreSBOYXZpZ2F0aW9uIHdpdGggSnVtcCBMaW5rcyAqL31cbiAgICAgICAgICAgIDxuYXYgY2xhc3NOYW1lPSdmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBnYXAtNCBtYi04IGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kIHAtNCBzdGlja3kgdG9wLTIgei0xMCc+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTZWN0aW9uTmF2aWdhdGUoJ2N1aXNpbmUnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtaW5kaWdvLTYwMCBob3Zlcjp0ZXh0LWluZGlnby04MDAgZm9udC1tZWRpdW0gcHgtMyBweS0xIHJvdW5kZWQgaG92ZXI6YmctaW5kaWdvLTUwIHRyYW5zaXRpb24tY29sb3JzJ1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ3Vpc2luZSBSZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTZWN0aW9uTmF2aWdhdGUoJ2luZ3JlZGllbnRzJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LWluZGlnby02MDAgaG92ZXI6dGV4dC1pbmRpZ28tODAwIGZvbnQtbWVkaXVtIHB4LTMgcHktMSByb3VuZGVkIGhvdmVyOmJnLWluZGlnby01MCB0cmFuc2l0aW9uLWNvbG9ycydcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEluZ3JlZGllbnQgUmVjb21tZW5kYXRpb25zXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU2VjdGlvbk5hdmlnYXRlKCdjb29raW5nJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LWluZGlnby02MDAgaG92ZXI6dGV4dC1pbmRpZ28tODAwIGZvbnQtbWVkaXVtIHB4LTMgcHktMSByb3VuZGVkIGhvdmVyOmJnLWluZGlnby01MCB0cmFuc2l0aW9uLWNvbG9ycydcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENvb2tpbmcgTWV0aG9kc1xuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNlY3Rpb25OYXZpZ2F0ZSgncmVjaXBlJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LWluZGlnby02MDAgaG92ZXI6dGV4dC1pbmRpZ28tODAwIGZvbnQtbWVkaXVtIHB4LTMgcHktMSByb3VuZGVkIGhvdmVyOmJnLWluZGlnby01MCB0cmFuc2l0aW9uLWNvbG9ycydcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFJlY2lwZSBCdWlsZGVyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9uYXY+XG5cbiAgICAgICAgICAgIHsvKiBNYWluIENvbnRlbnQgLSBTaW5nbGUgQ29sdW1uIFN0YWNrZWQgTGF5b3V0ICovfVxuICAgICAgICAgICAgPG1haW4gY2xhc3NOYW1lPSdmbGV4IGZsZXgtY29sIGdhcC04IG1heC13LTZ4bCBteC1hdXRvJz5cbiAgICAgICAgICAgICAgey8qIEN1aXNpbmUgUmVjb21tZW5kZXIgU2VjdGlvbiAqL31cbiAgICAgICAgICAgICAgPFNlY3Rpb25XcmFwcGVyIGlkPSdjdWlzaW5lJyB0aXRsZT0nQ3Vpc2luZSBSZWNvbW1lbmRhdGlvbnMnPlxuICAgICAgICAgICAgICAgIDxFcnJvckJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICBmYWxsYmFjaz17ZXJyb3IgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50RmFsbGJhY2tzLkN1aXNpbmVSZWNvbW1lbmRlclxuICAgICAgICAgICAgICAgICAgICAgIG9uUmV0cnk9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX1cbiAgICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZVxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFjaz17XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudEZhbGxiYWNrcy5Mb2FkaW5nIGNvbXBvbmVudE5hbWU9J0N1aXNpbmUgUmVjb21tZW5kZXInIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEN1aXNpbmVSZWNvbW1lbmRlciAvPlxuICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICAgICAgICAgIDwvU2VjdGlvbldyYXBwZXI+XG5cbiAgICAgICAgICAgICAgey8qIEluZ3JlZGllbnQgUmVjb21tZW5kZXIgU2VjdGlvbiAqL31cbiAgICAgICAgICAgICAgPFNlY3Rpb25XcmFwcGVyXG4gICAgICAgICAgICAgICAgaWQ9J2luZ3JlZGllbnRzJ1xuICAgICAgICAgICAgICAgIHRpdGxlPSdJbmdyZWRpZW50IFJlY29tbWVuZGF0aW9ucydcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxFcnJvckJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICBmYWxsYmFjaz17ZXJyb3IgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50RmFsbGJhY2tzLkluZ3JlZGllbnRSZWNvbW1lbmRlclxuICAgICAgICAgICAgICAgICAgICAgIG9uUmV0cnk9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX1cbiAgICAgICAgICAgICAgICAgICAgICBlcnJvcj17ZXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZVxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFjaz17XG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudEZhbGxiYWNrcy5Mb2FkaW5nIGNvbXBvbmVudE5hbWU9J0luZ3JlZGllbnQgUmVjb21tZW5kZXInIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEluZ3JlZGllbnRSZWNvbW1lbmRlclxuICAgICAgICAgICAgICAgICAgICAgIGlzRnVsbFBhZ2VWZXJzaW9uPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICBtYXhEaXNwbGF5ZWQ9ezh9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgICAgPC9TZWN0aW9uV3JhcHBlcj5cblxuICAgICAgICAgICAgICB7LyogQ29va2luZyBNZXRob2RzIFNlY3Rpb24gKi99XG4gICAgICAgICAgICAgIDxTZWN0aW9uV3JhcHBlciBpZD0nY29va2luZycgdGl0bGU9J0Nvb2tpbmcgTWV0aG9kcyc+XG4gICAgICAgICAgICAgICAgPEVycm9yQm91bmRhcnlcbiAgICAgICAgICAgICAgICAgIGZhbGxiYWNrPXtlcnJvciA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnRGYWxsYmFja3MuQ29va2luZ01ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgICBvblJldHJ5PXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9XG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U3VzcGVuc2VcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2s9e1xuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnRGYWxsYmFja3MuTG9hZGluZyBjb21wb25lbnROYW1lPSdDb29raW5nIE1ldGhvZHMnIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPENvb2tpbmdNZXRob2RzU2VjdGlvblxuICAgICAgICAgICAgICAgICAgICAgIGlzTWFpblBhZ2VWZXJzaW9uPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgIG1heERpc3BsYXllZD17Nn1cbiAgICAgICAgICAgICAgICAgICAgICBvblZpZXdNb3JlPXsoKSA9PiByb3V0ZXIucHVzaCgnL2Nvb2tpbmctbWV0aG9kcycpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICAgICAgICAgIDwvU2VjdGlvbldyYXBwZXI+XG5cbiAgICAgICAgICAgICAgey8qIFJlY2lwZSBCdWlsZGVyIFNlY3Rpb24gKi99XG4gICAgICAgICAgICAgIDxTZWN0aW9uV3JhcHBlciBpZD0ncmVjaXBlJyB0aXRsZT0nUmVjaXBlIEJ1aWxkZXInPlxuICAgICAgICAgICAgICAgIDxFcnJvckJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICBmYWxsYmFjaz17ZXJyb3IgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Q29tcG9uZW50RmFsbGJhY2tzLlJlY2lwZUJ1aWxkZXJcbiAgICAgICAgICAgICAgICAgICAgICBvblJldHJ5PXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9XG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U3VzcGVuc2VcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2s9e1xuICAgICAgICAgICAgICAgICAgICAgIDxDb21wb25lbnRGYWxsYmFja3MuTG9hZGluZyBjb21wb25lbnROYW1lPSdSZWNpcGUgQnVpbGRlcicgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8UmVjaXBlQnVpbGRlclNpbXBsZSAvPlxuICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICAgICAgICAgIDwvU2VjdGlvbldyYXBwZXI+XG5cbiAgICAgICAgICAgICAgey8qIEFkZGl0aW9uYWwgY2hpbGRyZW4gaWYgcHJvdmlkZWQgKi99XG4gICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgIDwvbWFpbj5cblxuICAgICAgICAgICAgey8qIEZvb3RlciAqL31cbiAgICAgICAgICAgIDxmb290ZXIgY2xhc3NOYW1lPSdtdC0xMiB0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteC1hdXRvIG1iLTQnIHN0eWxlPXt7IG1heFdpZHRoOiAnMjUwcHgnIH19PlxuICAgICAgICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICAgICAgICBhY3Rpb249J2h0dHBzOi8vd3d3LnBheXBhbC5jb20vbmNwL3BheW1lbnQvU1ZONlEzNjhUS0tMUydcbiAgICAgICAgICAgICAgICAgIG1ldGhvZD0ncG9zdCdcbiAgICAgICAgICAgICAgICAgIHRhcmdldD0nX2JsYW5rJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPSdzdWJtaXQnXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPSdIRUxQJ1xuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMC4yNXJlbScsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMCAycmVtJyxcbiAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcyLjYyNXJlbScsXG4gICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGRkQxNDAnLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ1wiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMXJlbScsXG4gICAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodDogJzEuMjVyZW0nLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb290ZXI+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogRGVidWcgUGFuZWwgLSBGaXhlZCBCb3R0b20gUmlnaHQgKi99XG4gICAgICAgICAge2RlYnVnTW9kZSAmJiAoXG4gICAgICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9e251bGx9PlxuICAgICAgICAgICAgICA8Q29uc29saWRhdGVkRGVidWdJbmZvXG4gICAgICAgICAgICAgICAgcG9zaXRpb249J2JvdHRvbS1yaWdodCdcbiAgICAgICAgICAgICAgICBjb2xsYXBzaWJsZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBzaG93UGVyZm9ybWFuY2VNZXRyaWNzPXt0cnVlfVxuICAgICAgICAgICAgICAgIHNob3dBc3Ryb2xvZ2ljYWxEYXRhPXt0cnVlfVxuICAgICAgICAgICAgICAgIHNob3dDb21wb25lbnRTdGF0ZXM9e3RydWV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogQ1NTIGZvciBzbW9vdGggbmF2aWdhdGlvbiB0cmFuc2l0aW9ucyAqL31cbiAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAuaGlnaGxpZ2h0LXNlY3Rpb24ge1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDIpO1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDEwcHggMjVweCByZ2JhKDk5LCAxMDIsIDI0MSwgMC4xNSk7XG4gICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoOTksIDEwMiwgMjQxLCAwLjMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWN0aW9uIHtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjpcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gMC4zcyBlYXNlLWluLW91dCxcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93IDAuM3MgZWFzZS1pbi1vdXQsXG4gICAgICAgICAgICAgICAgYm9yZGVyIDAuM3MgZWFzZS1pbi1vdXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5hdiBidXR0b246aG92ZXIge1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5hdiBidXR0b246YWN0aXZlIHtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01haW5QYWdlQ29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xuICB9XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBNYWluUGFnZUxheW91dDtcbiJdLCJ2ZXJzaW9uIjozfQ==