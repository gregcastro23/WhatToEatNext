e508307b27eb163fdabe8f3d7e45b8b4
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * Comprehensive Main Page Validation Tests
 * Task 11.2: Validate all requirements and perform final testing
 */
const globals_1 = require("@jest/globals");
// Import comprehensive mocks
// Mock external dependencies with proper type safety
globals_1.jest.mock('next/navigation', () => ({
    useRouter: () => externalDependencies_1.mockRouter
}));
globals_1.jest.mock('../../utils/logger', () => ({
    logger: externalDependencies_1.mockLogger,
    createLogger: externalDependencies_1.mockCreateLogger
}));
globals_1.jest.mock('../../utils/reliableAstronomy', () => externalDependencies_1.mockReliableAstronomy);
// Mock hooks that might cause issues
globals_1.jest.mock('../../hooks/useAgentHooks', () => externalDependencies_1.mockAgentHooks);
globals_1.jest.mock('../../utils/mcpServerIntegration', () => externalDependencies_1.mockMCPServerIntegration);
globals_1.jest.mock('../../utils/developmentExperienceOptimizations', () => externalDependencies_1.mockDevelopmentExperienceOptimizations);
// Mock state preservation hooks
globals_1.jest.mock('../../hooks/useStatePreservation', () => externalDependencies_1.mockStatePreservationHooks);
// Mock error handling
globals_1.jest.mock('../../utils/errorHandling', () => externalDependencies_1.mockErrorHandler);
// Mock steering file intelligence
globals_1.jest.mock('../../utils/steeringFileIntelligence', () => externalDependencies_1.mockSteeringFileIntelligence);
// Mock alchemical context hooks
globals_1.jest.mock('../../contexts/AlchemicalContext/hooks', () => externalDependencies_1.mockAlchemicalContext);
// Mock component fallbacks
globals_1.jest.mock('../../components/fallbacks/ComponentFallbacks', () => ({
    ComponentFallbacks: {
        LoadingFallback: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "loading-fallback", children: "Loading..." }),
        ErrorFallback: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "error-fallback", children: "Error occurred" })
    }
}));
const react_1 = require("@testing-library/react");
const react_2 = __importDefault(require("react"));
const App_1 = __importDefault(require("../../../App"));
const externalDependencies_1 = require("../mocks/externalDependencies");
const testComponentHelpers_1 = require("../utils/testComponentHelpers");
describe('Main Page Validation - Task 11.2', () => {
    beforeEach(() => {
        // Clear all mocks before each test
        globals_1.jest.clearAllMocks();
        // Mock window.scrollTo
        Object.defineProperty(window, 'scrollTo', {
            value: globals_1.jest.fn(),
            writable: true
        });
        // Mock localStorage
        const localStorageMock = {
            getItem: globals_1.jest.fn(),
            setItem: globals_1.jest.fn(),
            removeItem: globals_1.jest.fn(),
            clear: globals_1.jest.fn()
        };
        Object.defineProperty(window, 'localStorage', {
            value: localStorageMock
        });
    });
    describe('1. Component Interactions and Data Flow', () => {
        test('App renders without crashing', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should render without throwing errors
            expect(react_1.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
        });
        test('MainPageLayout renders with AlchemicalProvider', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render the main layout
            expect(react_1.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Error boundary handles errors gracefully', async () => {
            const ThrowError = () => {
                throw new Error('Test error');
            };
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.TestErrorBoundary, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false, children: (0, jsx_runtime_1.jsx)(ThrowError, {}) }) }) }));
            });
            // Should handle error without crashing
            expect(react_1.screen.getByTestId('test-error-boundary')).toBeInTheDocument();
        });
    });
    describe('2. Navigation Functionality', () => {
        test('Navigation state is preserved', async () => {
            const mockOnSectionNavigate = globals_1.jest.fn();
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false, onSectionNavigate: mockOnSectionNavigate }) }));
            });
            // Navigation should be functional
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            expect(mockOnSectionNavigate).toBeDefined();
        });
        test('Scroll position is preserved', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Simulate scroll
            react_1.fireEvent.scroll(window, { target: { scrollY: 100 } });
            // Should handle scroll events
            expect(window.scrollTo).toBeDefined();
        });
    });
    describe('3. Debug Panel Functionality', () => {
        test('Debug panel renders in development mode', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: true, loading: false }) }));
            });
            // Should render without errors in debug mode
            expect(react_1.screen.getByTestId('debug-mode')).toHaveTextContent('debug');
        });
        test('Debug panel is hidden in production mode', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render without errors in production mode
            expect(react_1.screen.getByTestId('debug-mode')).toHaveTextContent('production');
        });
    });
    describe('4. Loading States', () => {
        test('Loading state displays correctly', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: true }) }));
            });
            // Should handle loading state
            expect(react_1.screen.getByTestId('loading-state')).toHaveTextContent('loading');
        });
        test('Connected state displays when not loading', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle connected state
            expect(react_1.screen.getByTestId('loading-state')).toHaveTextContent('loaded');
        });
    });
    describe('5. Context and State Management', () => {
        test('AlchemicalProvider provides context', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Context should be provided
            expect(react_1.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
        });
        test('State preservation works correctly', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // State preservation should work
            expect(localStorage.setItem).toBeDefined();
        });
    });
    describe('6. Error Handling', () => {
        test('Global error boundary catches errors', async () => {
            // Mock console.error to prevent test output noise
            const consoleSpy = globals_1.jest.spyOn(console, 'error').mockImplementation(() => { });
            // Test that the App component renders without crashing
            // The App component has its own error boundary
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should handle errors gracefully
            expect(react_1.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
            consoleSpy.mockRestore();
        });
        test('Component-level error boundaries work', async () => {
            const consoleSpy = globals_1.jest.spyOn(console, 'error').mockImplementation(() => { });
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render without errors
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            consoleSpy.mockRestore();
        });
    });
    describe('7. Performance and Accessibility', () => {
        test('Components are memoized for performance', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should render efficiently
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Lazy loading works for non-critical components', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.AsyncTestWrapper, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: true, loading: false }) }) }));
            });
            // Should handle lazy loading
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
    describe('8. Integration with External Systems', () => {
        test('Astrological calculations integrate correctly', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should integrate with astrological systems
            expect(react_1.screen.getByTestId('mock-alchemical-provider')).toBeInTheDocument();
            expect(externalDependencies_1.mockReliableAstronomy.getReliablePlanetaryPositions).toBeDefined();
        });
        test('Agent hooks integrate correctly', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should integrate with agent hooks
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
            expect(externalDependencies_1.mockAgentHooks.useAgentHooks).toBeDefined();
        });
    });
    describe('9. Mobile Responsiveness', () => {
        test('Layout adapts to mobile viewport', async () => {
            // Mock mobile viewport
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 375,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: 667,
            });
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle mobile viewport
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
        test('Touch interactions work correctly', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle touch interactions
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
    describe('10. System Integration Validation', () => {
        test('All required systems are integrated', async () => {
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(App_1.default, {}));
            });
            // Should integrate all systems
            expect(react_1.screen.getByText(/Loading Astrological Data/i)).toBeInTheDocument();
        });
        test('Fallback mechanisms work correctly', async () => {
            // Mock API failure
            externalDependencies_1.mockReliableAstronomy.getReliablePlanetaryPositions
                .mockRejectedValueOnce(new Error('API Error'));
            await (0, react_1.act)(async () => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockAlchemicalProvider, { children: (0, jsx_runtime_1.jsx)(testComponentHelpers_1.MockMainPageLayout, { debugMode: false, loading: false }) }));
            });
            // Should handle API failures gracefully
            expect(react_1.screen.getByTestId('mock-main-page-layout')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vdmFsaWRhdGlvbi9NYWluUGFnZVZhbGlkYXRpb24udGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7OztHQUdHO0FBRUgsMkNBQXFDO0FBNkJyQyw2QkFBNkI7QUFFN0IscURBQXFEO0FBQ3JELGNBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsQyxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsaUNBQVU7Q0FDNUIsQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDckMsTUFBTSxFQUFFLGlDQUFVO0lBQ2xCLFlBQVksRUFBRSx1Q0FBZ0I7Q0FDL0IsQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRSxDQUFDLDRDQUFxQixDQUFDLENBQUM7QUFFeEUscUNBQXFDO0FBQ3JDLGNBQUksQ0FBQyxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFLENBQUMscUNBQWMsQ0FBQyxDQUFDO0FBRTdELGNBQUksQ0FBQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFLENBQUMsK0NBQXdCLENBQUMsQ0FBQztBQUU5RSxjQUFJLENBQUMsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLEdBQUcsRUFBRSxDQUFDLDZEQUFzQyxDQUFDLENBQUM7QUFFMUcsZ0NBQWdDO0FBQ2hDLGNBQUksQ0FBQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFLENBQUMsaURBQTBCLENBQUMsQ0FBQztBQUVoRixzQkFBc0I7QUFDdEIsY0FBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyx1Q0FBZ0IsQ0FBQyxDQUFDO0FBRS9ELGtDQUFrQztBQUNsQyxjQUFJLENBQUMsSUFB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UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDcEQsbUJBQW1CO1lBQ25CLDRDQUFxQixDQUFDLDZCQUE2QjtpQkFDaEQscUJBQXFCLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUVqRCxNQUFNLElBQUEsV0FBRyxFQUFDLEtBQUssSUFBSSxFQUFFO2dCQUNuQixJQUFBLGNBQU0sRUFDSix1QkFBQyw2Q0FBc0IsY0FDckIsdUJBQUMseUNBQWtCLElBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxHQUFJLEdBQ2pDLENBQzFCLENBQUM7WUFDSixDQUFDLENBQUMsQ0FBQztZQUVILHdDQUF3QztZQUN4QyxNQUFNLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUMxRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vdmFsaWRhdGlvbi9NYWluUGFnZVZhbGlkYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wcmVoZW5zaXZlIE1haW4gUGFnZSBWYWxpZGF0aW9uIFRlc3RzXG4gKiBUYXNrIDExLjI6IFZhbGlkYXRlIGFsbCByZXF1aXJlbWVudHMgYW5kIHBlcmZvcm0gZmluYWwgdGVzdGluZ1xuICovXG5cbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEFwcCBmcm9tICcuLi8uLi8uLi9BcHAnO1xuaW1wb3J0IE1haW5QYWdlTGF5b3V0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvbGF5b3V0L01haW5QYWdlTGF5b3V0JztcbmltcG9ydCB7IEFsY2hlbWljYWxQcm92aWRlciB9IGZyb20gJy4uLy4uL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0JztcbmltcG9ydCB7XG4gIG1vY2tSb3V0ZXIsXG4gIG1vY2tMb2dnZXIsXG4gIG1vY2tDcmVhdGVMb2dnZXIsXG4gIG1vY2tSZWxpYWJsZUFzdHJvbm9teSxcbiAgbW9ja0FnZW50SG9va3MsXG4gIG1vY2tNQ1BTZXJ2ZXJJbnRlZ3JhdGlvbixcbiAgbW9ja0RldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMsXG4gIG1vY2tTdGF0ZVByZXNlcnZhdGlvbkhvb2tzLFxuICBtb2NrRXJyb3JIYW5kbGVyLFxuICBtb2NrU3RlZXJpbmdGaWxlSW50ZWxsaWdlbmNlLFxuICBtb2NrQWxjaGVtaWNhbENvbnRleHRcbn0gZnJvbSAnLi4vbW9ja3MvZXh0ZXJuYWxEZXBlbmRlbmNpZXMnO1xuaW1wb3J0IHR5cGUgeyBNYWluUGFnZUxheW91dFByb3BzLCBBbGNoZW1pY2FsUHJvdmlkZXJQcm9wcyB9IGZyb20gJy4uL3R5cGVzL3Rlc3RVdGlscy5kJztcbmltcG9ydCB7IFxuICBNb2NrQWxjaGVtaWNhbFByb3ZpZGVyLCBcbiAgTW9ja01haW5QYWdlTGF5b3V0LCBcbiAgcmVuZGVyV2l0aFByb3ZpZGVycyxcbiAgQXN5bmNUZXN0V3JhcHBlcixcbiAgVGVzdEVycm9yQm91bmRhcnlcbn0gZnJvbSAnLi4vdXRpbHMvdGVzdENvbXBvbmVudEhlbHBlcnMnO1xuXG4vLyBJbXBvcnQgY29tcHJlaGVuc2l2ZSBtb2Nrc1xuXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llcyB3aXRoIHByb3BlciB0eXBlIHNhZmV0eVxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6ICgpID0+IG1vY2tSb3V0ZXJcbn0pKTtcblxuamVzdC5tb2NrKCcuLi8uLi91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dnZXI6IG1vY2tMb2dnZXIsXG4gIGNyZWF0ZUxvZ2dlcjogbW9ja0NyZWF0ZUxvZ2dlclxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL3JlbGlhYmxlQXN0cm9ub215JywgKCkgPT4gbW9ja1JlbGlhYmxlQXN0cm9ub215KTtcblxuLy8gTW9jayBob29rcyB0aGF0IG1pZ2h0IGNhdXNlIGlzc3Vlc1xuamVzdC5tb2NrKCcuLi8uLi9ob29rcy91c2VBZ2VudEhvb2tzJywgKCkgPT4gbW9ja0FnZW50SG9va3MpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3V0aWxzL21jcFNlcnZlckludGVncmF0aW9uJywgKCkgPT4gbW9ja01DUFNlcnZlckludGVncmF0aW9uKTtcblxuamVzdC5tb2NrKCcuLi8uLi91dGlscy9kZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6YXRpb25zJywgKCkgPT4gbW9ja0RldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMpO1xuXG4vLyBNb2NrIHN0YXRlIHByZXNlcnZhdGlvbiBob29rc1xuamVzdC5tb2NrKCcuLi8uLi9ob29rcy91c2VTdGF0ZVByZXNlcnZhdGlvbicsICgpID0+IG1vY2tTdGF0ZVByZXNlcnZhdGlvbkhvb2tzKTtcblxuLy8gTW9jayBlcnJvciBoYW5kbGluZ1xuamVzdC5tb2NrKCcuLi8uLi91dGlscy9lcnJvckhhbmRsaW5nJywgKCkgPT4gbW9ja0Vycm9ySGFuZGxlcik7XG5cbi8vIE1vY2sgc3RlZXJpbmcgZmlsZSBpbnRlbGxpZ2VuY2Vcbmplc3QubW9jaygnLi4vLi4vdXRpbHMvc3RlZXJpbmdGaWxlSW50ZWxsaWdlbmNlJywgKCkgPT4gbW9ja1N0ZWVyaW5nRmlsZUludGVsbGlnZW5jZSk7XG5cbi8vIE1vY2sgYWxjaGVtaWNhbCBjb250ZXh0IGhvb2tzXG5qZXN0Lm1vY2soJy4uLy4uL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJywgKCkgPT4gbW9ja0FsY2hlbWljYWxDb250ZXh0KTtcblxuLy8gTW9jayBjb21wb25lbnQgZmFsbGJhY2tzXG5qZXN0Lm1vY2soJy4uLy4uL2NvbXBvbmVudHMvZmFsbGJhY2tzL0NvbXBvbmVudEZhbGxiYWNrcycsICgpID0+ICh7XG4gIENvbXBvbmVudEZhbGxiYWNrczoge1xuICAgIExvYWRpbmdGYWxsYmFjazogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cImxvYWRpbmctZmFsbGJhY2tcIj5Mb2FkaW5nLi4uPC9kaXY+LFxuICAgIEVycm9yRmFsbGJhY2s6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJlcnJvci1mYWxsYmFja1wiPkVycm9yIG9jY3VycmVkPC9kaXY+XG4gIH1cbn0pKTtcblxuZGVzY3JpYmUoJ01haW4gUGFnZSBWYWxpZGF0aW9uIC0gVGFzayAxMS4yJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhciBhbGwgbW9ja3MgYmVmb3JlIGVhY2ggdGVzdFxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIE1vY2sgd2luZG93LnNjcm9sbFRvXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3Njcm9sbFRvJywge1xuICAgICAgdmFsdWU6IGplc3QuZm4oKSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gTW9jayBsb2NhbFN0b3JhZ2VcbiAgICBjb25zdCBsb2NhbFN0b3JhZ2VNb2NrID0ge1xuICAgICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgICAgc2V0SXRlbTogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgICAgY2xlYXI6IGplc3QuZm4oKVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcbiAgICAgIHZhbHVlOiBsb2NhbFN0b3JhZ2VNb2NrXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcxLiBDb21wb25lbnQgSW50ZXJhY3Rpb25zIGFuZCBEYXRhIEZsb3cnLCAoKSA9PiB7XG4gICAgdGVzdCgnQXBwIHJlbmRlcnMgd2l0aG91dCBjcmFzaGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcig8QXBwIC8+KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIHdpdGhvdXQgdGhyb3dpbmcgZXJyb3JzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvTG9hZGluZyBBc3Ryb2xvZ2ljYWwgRGF0YS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ01haW5QYWdlTGF5b3V0IHJlbmRlcnMgd2l0aCBBbGNoZW1pY2FsUHJvdmlkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIHRoZSBtYWluIGxheW91dFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1hbGNoZW1pY2FsLXByb3ZpZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLW1haW4tcGFnZS1sYXlvdXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0Vycm9yIGJvdW5kYXJ5IGhhbmRsZXMgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUaHJvd0Vycm9yID0gKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGVzdEVycm9yQm91bmRhcnk+XG4gICAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0+XG4gICAgICAgICAgICAgICAgPFRocm93RXJyb3IgLz5cbiAgICAgICAgICAgICAgPC9Nb2NrTWFpblBhZ2VMYXlvdXQ+XG4gICAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgPC9UZXN0RXJyb3JCb3VuZGFyeT5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIGVycm9yIHdpdGhvdXQgY3Jhc2hpbmdcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QtZXJyb3ItYm91bmRhcnknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzIuIE5hdmlnYXRpb24gRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICB0ZXN0KCdOYXZpZ2F0aW9uIHN0YXRlIGlzIHByZXNlcnZlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSA9IGplc3QuZm4oKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBcbiAgICAgICAgICAgICAgZGVidWdNb2RlPXtmYWxzZX0gXG4gICAgICAgICAgICAgIGxvYWRpbmc9e2ZhbHNlfSBcbiAgICAgICAgICAgICAgb25TZWN0aW9uTmF2aWdhdGU9e21vY2tPblNlY3Rpb25OYXZpZ2F0ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE5hdmlnYXRpb24gc2hvdWxkIGJlIGZ1bmN0aW9uYWxcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ1Njcm9sbCBwb3NpdGlvbiBpcyBwcmVzZXJ2ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBzY3JvbGxcbiAgICAgIGZpcmVFdmVudC5zY3JvbGwod2luZG93LCB7IHRhcmdldDogeyBzY3JvbGxZOiAxMDAgfSB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBzY3JvbGwgZXZlbnRzXG4gICAgICBleHBlY3Qod2luZG93LnNjcm9sbFRvKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnMy4gRGVidWcgUGFuZWwgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICB0ZXN0KCdEZWJ1ZyBwYW5lbCByZW5kZXJzIGluIGRldmVsb3BtZW50IG1vZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17dHJ1ZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aG91dCBlcnJvcnMgaW4gZGVidWcgbW9kZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZGVidWctbW9kZScpKS50b0hhdmVUZXh0Q29udGVudCgnZGVidWcnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0RlYnVnIHBhbmVsIGlzIGhpZGRlbiBpbiBwcm9kdWN0aW9uIG1vZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIHdpdGhvdXQgZXJyb3JzIGluIHByb2R1Y3Rpb24gbW9kZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZGVidWctbW9kZScpKS50b0hhdmVUZXh0Q29udGVudCgncHJvZHVjdGlvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnNC4gTG9hZGluZyBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnTG9hZGluZyBzdGF0ZSBkaXNwbGF5cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e3RydWV9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgbG9hZGluZyBzdGF0ZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbG9hZGluZy1zdGF0ZScpKS50b0hhdmVUZXh0Q29udGVudCgnbG9hZGluZycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnQ29ubmVjdGVkIHN0YXRlIGRpc3BsYXlzIHdoZW4gbm90IGxvYWRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIGNvbm5lY3RlZCBzdGF0ZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbG9hZGluZy1zdGF0ZScpKS50b0hhdmVUZXh0Q29udGVudCgnbG9hZGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCc1LiBDb250ZXh0IGFuZCBTdGF0ZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIHRlc3QoJ0FsY2hlbWljYWxQcm92aWRlciBwcm92aWRlcyBjb250ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ29udGV4dCBzaG91bGQgYmUgcHJvdmlkZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stYWxjaGVtaWNhbC1wcm92aWRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnU3RhdGUgcHJlc2VydmF0aW9uIHdvcmtzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFN0YXRlIHByZXNlcnZhdGlvbiBzaG91bGQgd29ya1xuICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZS5zZXRJdGVtKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnNi4gRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnR2xvYmFsIGVycm9yIGJvdW5kYXJ5IGNhdGNoZXMgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBjb25zb2xlLmVycm9yIHRvIHByZXZlbnQgdGVzdCBvdXRwdXQgbm9pc2VcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdGhhdCB0aGUgQXBwIGNvbXBvbmVudCByZW5kZXJzIHdpdGhvdXQgY3Jhc2hpbmdcbiAgICAgIC8vIFRoZSBBcHAgY29tcG9uZW50IGhhcyBpdHMgb3duIGVycm9yIGJvdW5kYXJ5XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoPEFwcCAvPik7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBlcnJvcnMgZ3JhY2VmdWxseVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0xvYWRpbmcgQXN0cm9sb2dpY2FsIERhdGEvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0NvbXBvbmVudC1sZXZlbCBlcnJvciBib3VuZGFyaWVzIHdvcmsnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIHdpdGhvdXQgZXJyb3JzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLW1haW4tcGFnZS1sYXlvdXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnNy4gUGVyZm9ybWFuY2UgYW5kIEFjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgdGVzdCgnQ29tcG9uZW50cyBhcmUgbWVtb2l6ZWQgZm9yIHBlcmZvcm1hbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIHJlbmRlciBlZmZpY2llbnRseVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdMYXp5IGxvYWRpbmcgd29ya3MgZm9yIG5vbi1jcml0aWNhbCBjb21wb25lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxBc3luY1Rlc3RXcmFwcGVyPlxuICAgICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXt0cnVlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICA8L0FzeW5jVGVzdFdyYXBwZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBsYXp5IGxvYWRpbmdcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnOC4gSW50ZWdyYXRpb24gd2l0aCBFeHRlcm5hbCBTeXN0ZW1zJywgKCkgPT4ge1xuICAgIHRlc3QoJ0FzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMgaW50ZWdyYXRlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBpbnRlZ3JhdGUgd2l0aCBhc3Ryb2xvZ2ljYWwgc3lzdGVtc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1hbGNoZW1pY2FsLXByb3ZpZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja1JlbGlhYmxlQXN0cm9ub215LmdldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnQWdlbnQgaG9va3MgaW50ZWdyYXRlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8TW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgICAgIDxNb2NrTWFpblBhZ2VMYXlvdXQgZGVidWdNb2RlPXtmYWxzZX0gbG9hZGluZz17ZmFsc2V9IC8+XG4gICAgICAgICAgPC9Nb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBpbnRlZ3JhdGUgd2l0aCBhZ2VudCBob29rc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbW9jay1tYWluLXBhZ2UtbGF5b3V0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja0FnZW50SG9va3MudXNlQWdlbnRIb29rcykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzkuIE1vYmlsZSBSZXNwb25zaXZlbmVzcycsICgpID0+IHtcbiAgICB0ZXN0KCdMYXlvdXQgYWRhcHRzIHRvIG1vYmlsZSB2aWV3cG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbW9iaWxlIHZpZXdwb3J0XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJXaWR0aCcsIHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDM3NSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJIZWlnaHQnLCB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA2NjcsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBtb2JpbGUgdmlld3BvcnRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnVG91Y2ggaW50ZXJhY3Rpb25zIHdvcmsgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxNb2NrQWxjaGVtaWNhbFByb3ZpZGVyPlxuICAgICAgICAgICAgPE1vY2tNYWluUGFnZUxheW91dCBkZWJ1Z01vZGU9e2ZhbHNlfSBsb2FkaW5nPXtmYWxzZX0gLz5cbiAgICAgICAgICA8L01vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSB0b3VjaCBpbnRlcmFjdGlvbnNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21vY2stbWFpbi1wYWdlLWxheW91dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnMTAuIFN5c3RlbSBJbnRlZ3JhdGlvbiBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ0FsbCByZXF1aXJlZCBzeXN0ZW1zIGFyZSBpbnRlZ3JhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKDxBcHAgLz4pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBpbnRlZ3JhdGUgYWxsIHN5c3RlbXNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9Mb2FkaW5nIEFzdHJvbG9naWNhbCBEYXRhL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRmFsbGJhY2sgbWVjaGFuaXNtcyB3b3JrIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgQVBJIGZhaWx1cmVcbiAgICAgIG1vY2tSZWxpYWJsZUFzdHJvbm9teS5nZXRSZWxpYWJsZVBsYW5ldGFyeVBvc2l0aW9uc1xuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignQVBJIEVycm9yJykpO1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPE1vY2tBbGNoZW1pY2FsUHJvdmlkZXI+XG4gICAgICAgICAgICA8TW9ja01haW5QYWdlTGF5b3V0IGRlYnVnTW9kZT17ZmFsc2V9IGxvYWRpbmc9e2ZhbHNlfSAvPlxuICAgICAgICAgIDwvTW9ja0FsY2hlbWljYWxQcm92aWRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIEFQSSBmYWlsdXJlcyBncmFjZWZ1bGx5XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtb2NrLW1haW4tcGFnZS1sYXlvdXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=