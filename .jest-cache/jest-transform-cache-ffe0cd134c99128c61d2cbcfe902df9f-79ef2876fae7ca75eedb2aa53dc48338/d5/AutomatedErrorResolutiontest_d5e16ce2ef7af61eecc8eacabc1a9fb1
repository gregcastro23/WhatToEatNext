9490f0423221996b3d1ec9ca5d9a4b26
"use strict";
/**
 * Automated Error Resolution Integration Tests
 *
 * Tests the automated error resolution systems including import fixing,
 * unused variable cleanup, and console statement replacement.
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('child_process');
jest.mock('fs');
const child_process_1 = require("child_process");
const fs_1 = require("fs");
const os_1 = require("os");
const path_1 = __importDefault(require("path"));
const mockExecSync = child_process_1.execSync;
const mockWriteFileSync = fs_1.writeFileSync;
const mockReadFileSync = fs_1.readFileSync;
const mockExistsSync = fs_1.existsSync;
const mockMkdirSync = fs_1.mkdirSync;
describe('Automated Error Resolution Integration', () => {
    const testDir = path_1.default.join((0, os_1.tmpdir)(), 'eslint-test');
    beforeEach(() => {
        jest.clearAllMocks();
        mockExistsSync.mockReturnValue(true);
    });
    describe('ESLint Auto-Fix Integration', () => {
        test('should execute ESLint auto-fix successfully', async () => {
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [
                        {
                            ruleId: 'prefer-const',
                            severity: 2,
                            message: 'Prefer const over let',
                            fix: {
                                range: [0, 3],
                                text: 'const'
                            }
                        },
                        {
                            ruleId: 'no-extra-semi',
                            severity: 2,
                            message: 'Unnecessary semicolon',
                            fix: {
                                range: [10, 11],
                                text: ''
                            }
                        }
                    ],
                    fixableErrorCount: 2,
                    fixableWarningCount: 0
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            // Simulate running ESLint with --fix
            const command = 'yarn lint:fix --format=json';
            const result = mockExecSync(command, { encoding: 'utf8' });
            expect(mockExecSync).toHaveBeenCalledWith(command, { encoding: 'utf8' });
            expect(JSON.parse(result)[0].fixableErrorCount).toBe(2);
        });
        test('should handle ESLint execution errors gracefully', async () => {
            const mockError = new Error('ESLint failed');
            mockError.stdout = JSON.stringify([]);
            mockError.status = 1;
            mockExecSync.mockImplementation(() => {
                throw mockError;
            });
            // Should handle the error without throwing
            expect(() => {
                try {
                    mockExecSync('yarn lint:fix', { encoding: 'utf8' });
                }
                catch (error) {
                    // Simulate error handling
                    if (error.status === 1 && error.stdout) {
                        return error.stdout;
                    }
                    throw error;
                }
            }).not.toThrow();
        });
        test('should process multiple files in batch', async () => {
            const mockBatchOutput = JSON.stringify([
                {
                    filePath: '/test/file1.ts',
                    messages: [{ ruleId: 'prefer-const', severity: 2, fix: { range: [0, 3], text: 'const' } }],
                    fixableErrorCount: 1
                },
                {
                    filePath: '/test/file2.ts',
                    messages: [{ ruleId: 'no-unused-vars', severity: 1, fix: null }],
                    fixableErrorCount: 0
                },
                {
                    filePath: '/test/file3.ts',
                    messages: [],
                    fixableErrorCount: 0
                }
            ]);
            mockExecSync.mockReturnValue(mockBatchOutput);
            const result = JSON.parse(mockExecSync('yarn lint:fix --format=json', { encoding: 'utf8' }));
            expect(result).toHaveLength(3);
            expect(result[0].fixableErrorCount).toBe(1);
            expect(result[1].fixableErrorCount).toBe(0);
            expect(result[2].fixableErrorCount).toBe(0);
        });
    });
    describe('Import Organization Resolution', () => {
        test('should fix import order violations', async () => {
            const testFileContent = `
        import { Component } from 'react';
        import path from 'path';
        import { calculatePlanetaryPositions } from '@/calculations/planetary';
        import fs from 'fs';
        import { ElementalProperties } from '@/types/elemental';
      `;
            const expectedFixedContent = `
        import fs from 'fs';
        import path from 'path';
        import { Component } from 'react';
        
        import { calculatePlanetaryPositions } from '@/calculations/planetary';
        import { ElementalProperties } from '@/types/elemental';
      `;
            mockReadFileSync.mockReturnValue(testFileContent);
            // Simulate import organization fix
            const mockFixedOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [],
                    output: expectedFixedContent
                }
            ]);
            mockExecSync.mockReturnValue(mockFixedOutput);
            const result = JSON.parse(mockExecSync('yarn lint:fix --fix-type layout', { encoding: 'utf8' }));
            expect(result[0].output).toContain('import fs from \'fs\'');
            expect(result[0].output).toContain('import path from \'path\'');
            expect(result[0].messages).toHaveLength(0);
        });
        test('should remove duplicate imports', async () => {
            const testFileContent = `
        import { Component } from 'react';
        import { useState } from 'react';
        import { Component } from 'react'; // Duplicate
        import { calculatePlanetaryPositions } from '@/calculations/planetary';
      `;
            const mockFixedOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [],
                    output: testFileContent.replace(/import { Component } from 'react'; \/\/ Duplicate\n/, '')
                }
            ]);
            mockExecSync.mockReturnValue(mockFixedOutput);
            mockReadFileSync.mockReturnValue(testFileContent);
            const result = JSON.parse(mockExecSync('yarn lint:fix', { encoding: 'utf8' }));
            expect(result[0].output).not.toContain('// Duplicate');
            expect((result[0].output.match(/import.*from 'react'/g) || []).length).toBeLessThan(3);
        });
        test('should preserve astrological import patterns', async () => {
            const astrologicalImports = `
        import { calculatePlanetaryPositions } from '@/calculations/planetary';
        import { validateTransitDate } from '@/utils/transitValidation';
        import { FALLBACK_POSITIONS } from '@/data/planets/fallback';
        import { ElementalProperties } from '@/types/elemental';
      `;
            mockReadFileSync.mockReturnValue(astrologicalImports);
            const mockFixedOutput = JSON.stringify([
                {
                    filePath: '/test/astrological.ts',
                    messages: [],
                    output: astrologicalImports // Should remain unchanged
                }
            ]);
            mockExecSync.mockReturnValue(mockFixedOutput);
            const result = JSON.parse(mockExecSync('yarn lint:fix', { encoding: 'utf8' }));
            expect(result[0].output).toContain('calculatePlanetaryPositions');
            expect(result[0].output).toContain('validateTransitDate');
            expect(result[0].output).toContain('FALLBACK_POSITIONS');
            expect(result[0].output).toContain('ElementalProperties');
        });
    });
    describe('Unused Variable Resolution', () => {
        test('should handle unused variable warnings', async () => {
            const testFileContent = `
        function calculateElements() {
          const unusedVar = 'test';
          const usedVar = 'active';
          const _intentionallyUnused = 'ok';
          
          return usedVar;
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [
                        {
                            ruleId: '@typescript-eslint/no-unused-vars',
                            severity: 1,
                            message: "'unusedVar' is assigned a value but never used.",
                            line: 3,
                            column: 15
                        }
                    ]
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(testFileContent);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(1);
            expect(result[0].messages[0].ruleId).toBe('@typescript-eslint/no-unused-vars');
            expect(result[0].messages[0].message).toContain('unusedVar');
        });
        test('should preserve astrological variable patterns', async () => {
            const astrologicalCode = `
        function calculatePlanetaryInfluence() {
          const planet = 'mars';
          const position = { sign: 'cancer', degree: 22.63 };
          const degree = position.degree;
          const sign = position.sign;
          const UNUSED_fallback = FALLBACK_POSITIONS;
          
          return { planet, degree }; // sign and UNUSED_fallback intentionally unused
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/astrological.ts',
                    messages: [] // Should not report errors for astrological patterns
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(astrologicalCode);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(0);
        });
        test('should handle campaign system variable patterns', async () => {
            const campaignCode = `
        function executeCampaign() {
          const campaign = 'typescript-elimination';
          const progress = { completed: 50, total: 100 };
          const metrics = { errors: 10, warnings: 25 };
          const safety = { backupCreated: true };
          const UNUSED_debug = 'debug info';
          
          return { campaign, progress };
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/campaign.ts',
                    messages: [] // Should not report errors for campaign patterns
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(campaignCode);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(0);
        });
    });
    describe('Console Statement Resolution', () => {
        test('should handle console statement warnings', async () => {
            const testFileContent = `
        function debugCalculation() {
          console.log('Debug info'); // Should be warning
          console.warn('Warning message'); // Should be allowed
          console.error('Error message'); // Should be allowed
          console.info('Info message'); // Should be allowed
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [
                        {
                            ruleId: 'no-console',
                            severity: 2,
                            message: "Unexpected console statement.",
                            line: 3,
                            column: 11
                        }
                    ]
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(testFileContent);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(1);
            expect(result[0].messages[0].ruleId).toBe('no-console');
            expect(result[0].messages[0].message).toContain('console statement');
        });
        test('should allow console statements in astrological calculations', async () => {
            const astrologicalCode = `
        function calculatePlanetaryPositions() {
          console.log('Calculating planetary positions');
          console.debug('Debug astronomical data');
          console.info('Using fallback positions');
          
          return FALLBACK_POSITIONS;
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/calculations/planetary.ts',
                    messages: [] // Should allow console in astrological files
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(astrologicalCode);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(0);
        });
        test('should allow console statements in campaign system files', async () => {
            const campaignCode = `
        function executeCampaignPhase() {
          console.log('Starting campaign phase');
          console.info('Progress: 50%');
          console.warn('Safety protocol activated');
          
          return { status: 'running' };
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/services/campaign/executor.ts',
                    messages: [] // Should allow console in campaign files
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(campaignCode);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(0);
        });
    });
    describe('TypeScript Error Resolution', () => {
        test('should handle explicit any type errors', async () => {
            const testFileContent = `
        function processData(data: any) { // Should be error
          return data.someProperty;
        }
        
        function processAstrologicalData(data: any) { // May be allowed in astrological files
          return data.planetaryPosition;
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [
                        {
                            ruleId: '@typescript-eslint/no-explicit-any',
                            severity: 2,
                            message: "Unexpected any. Specify a different type.",
                            line: 2,
                            column: 42
                        }
                    ]
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(testFileContent);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(1);
            expect(result[0].messages[0].ruleId).toBe('@typescript-eslint/no-explicit-any');
        });
        test('should handle unnecessary condition warnings', async () => {
            const testFileContent = `
        function checkValue(value?: string) {
          if (value !== undefined && value !== null) { // May be unnecessary
            return value.length;
          }
          return 0;
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [
                        {
                            ruleId: '@typescript-eslint/no-unnecessary-condition',
                            severity: 1,
                            message: "Unnecessary conditional, value is always truthy.",
                            line: 3,
                            column: 7
                        }
                    ]
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(testFileContent);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(1);
            expect(result[0].messages[0].ruleId).toBe('@typescript-eslint/no-unnecessary-condition');
        });
    });
    describe('React Hooks Resolution', () => {
        test('should handle exhaustive deps warnings', async () => {
            const reactCode = `
        import { useEffect, useState } from 'react';
        
        function Component() {
          const [count, setCount] = useState(0);
          const [name, setName] = useState('');
          
          useEffect(() => {
            console.log(count, name);
          }, [count]); // Missing 'name' in dependencies
          
          return null;
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/Component.tsx',
                    messages: [
                        {
                            ruleId: 'react-hooks/exhaustive-deps',
                            severity: 1,
                            message: "React Hook useEffect has a missing dependency: 'name'.",
                            line: 9,
                            column: 7
                        }
                    ]
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(reactCode);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(1);
            expect(result[0].messages[0].ruleId).toBe('react-hooks/exhaustive-deps');
            expect(result[0].messages[0].message).toContain('missing dependency');
        });
        test('should handle custom hooks in astrological components', async () => {
            const astrologicalReactCode = `
        import { useEffect } from 'react';
        import { useRecoilValue } from 'recoil';
        import { usePlanetaryPositions } from '@/hooks/usePlanetaryPositions';
        
        function AstrologicalComponent() {
          const positions = usePlanetaryPositions();
          const currentDate = useRecoilValue(currentDateState);
          
          useEffect(() => {
            console.log('Planetary positions updated', positions);
          }, [positions]); // Should be valid
          
          return null;
        }
      `;
            const mockLintOutput = JSON.stringify([
                {
                    filePath: '/test/AstrologicalComponent.tsx',
                    messages: [] // Should handle custom hooks correctly
                }
            ]);
            mockExecSync.mockReturnValue(mockLintOutput);
            mockReadFileSync.mockReturnValue(astrologicalReactCode);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(0);
        });
    });
    describe('Error Resolution Workflow', () => {
        test('should execute complete error resolution workflow', async () => {
            const workflowSteps = [
                'yarn lint --format=json',
                'yarn lint:fix',
                'yarn lint:fix --fix-type layout',
                'yarn lint --format=json' // Final verification
            ];
            const mockOutputs = [
                JSON.stringify([{ filePath: '/test/file.ts', messages: [{ ruleId: 'prefer-const', severity: 2 }] }]),
                '',
                '',
                JSON.stringify([{ filePath: '/test/file.ts', messages: [] }]) // Clean result
            ];
            mockExecSync
                .mockReturnValueOnce(mockOutputs[0])
                .mockReturnValueOnce(mockOutputs[1])
                .mockReturnValueOnce(mockOutputs[2])
                .mockReturnValueOnce(mockOutputs[3]);
            // Execute workflow
            workflowSteps.forEach((step, index) => {
                const result = mockExecSync(step, { encoding: 'utf8' });
                if (index === 0 || index === 3) {
                    // Analysis steps should return JSON
                    expect(() => JSON.parse(result)).not.toThrow();
                }
            });
            expect(mockExecSync).toHaveBeenCalledTimes(4);
            // Verify final result is clean
            const finalResult = JSON.parse(mockOutputs[3]);
            expect(finalResult[0].messages).toHaveLength(0);
        });
        test('should handle partial resolution gracefully', async () => {
            const partialResolutionOutput = JSON.stringify([
                {
                    filePath: '/test/file.ts',
                    messages: [
                        { ruleId: 'no-unused-vars', severity: 1, fix: null },
                        { ruleId: '@typescript-eslint/no-explicit-any', severity: 2, fix: null } // Requires manual fix
                    ]
                }
            ]);
            mockExecSync.mockReturnValue(partialResolutionOutput);
            const result = JSON.parse(mockExecSync('yarn lint --format=json', { encoding: 'utf8' }));
            expect(result[0].messages).toHaveLength(2);
            expect(result[0].messages.every((msg) => msg.fix === null)).toBe(true);
        });
        test('should preserve file safety during resolution', async () => {
            const safetyChecks = [
                'git status --porcelain',
                'yarn build',
                'yarn test --passWithNoTests' // Verify tests still pass
            ];
            mockExecSync
                .mockReturnValueOnce('') // Clean git status
                .mockReturnValueOnce('') // Successful build
                .mockReturnValueOnce('Tests passed'); // Successful tests
            safetyChecks.forEach(check => {
                const result = mockExecSync(check, { encoding: 'utf8' });
                expect(result).toBeDefined();
            });
            expect(mockExecSync).toHaveBeenCalledTimes(3);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vbGludGluZy9BdXRvbWF0ZWRFcnJvclJlc29sdXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7Ozs7O0FBT0gsb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQVBoQixpREFBeUM7QUFDekMsMkJBQXdFO0FBQ3hFLDJCQUE0QjtBQUM1QixnREFBd0I7QUFNeEIsTUFBTSxZQUFZLEdBQUcsd0JBQWdELENBQUM7QUFDdEUsTUFBTSxpQkFBaUIsR0FBRyxrQkFBMEQsQ0FBQztBQUNyRixNQUFNLGdCQUFnQixHQUFHLGlCQUF3RCxDQUFDO0FBQ2xGLE1BQU0sY0FBYyxHQUFHLGVBQW9ELENBQUM7QUFDNUUsTUFBTSxhQUFhLEdBQUcsY0FBa0QsQ0FBQztBQUV6RSxRQUFRLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO0lBQ3RELE1BQU0sT0FBTyxHQUFHLGNBQUksQ0FBQyxJQUFJLENBQUMsSUFBQSxXQUFNLEdBQUUsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUVuRCxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3JCLGNBQWMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO1FBQzNDLElBQUksQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM3RCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUNwQztvQkFDRSxRQUFRLEVBQUUsZUFBZTtvQkFDekIsUUFBUSxFQUFFO3dCQUNSOzRCQUNFLE1BQU0sRUFBRSxjQUFjOzRCQUN0QixRQUFRLEVBQUUsQ0FBQzs0QkFD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QUMsS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7Z0JBQ3pELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUMvQixDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vbGludGluZy9BdXRvbWF0ZWRFcnJvclJlc29sdXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dG9tYXRlZCBFcnJvciBSZXNvbHV0aW9uIEludGVncmF0aW9uIFRlc3RzXG4gKiBcbiAqIFRlc3RzIHRoZSBhdXRvbWF0ZWQgZXJyb3IgcmVzb2x1dGlvbiBzeXN0ZW1zIGluY2x1ZGluZyBpbXBvcnQgZml4aW5nLFxuICogdW51c2VkIHZhcmlhYmxlIGNsZWFudXAsIGFuZCBjb25zb2xlIHN0YXRlbWVudCByZXBsYWNlbWVudC5cbiAqL1xuXG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHsgd3JpdGVGaWxlU3luYywgcmVhZEZpbGVTeW5jLCBleGlzdHNTeW5jLCBta2RpclN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyB0bXBkaXIgfSBmcm9tICdvcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnY2hpbGRfcHJvY2VzcycpO1xuamVzdC5tb2NrKCdmcycpO1xuXG5jb25zdCBtb2NrRXhlY1N5bmMgPSBleGVjU3luYyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBleGVjU3luYz47XG5jb25zdCBtb2NrV3JpdGVGaWxlU3luYyA9IHdyaXRlRmlsZVN5bmMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2Ygd3JpdGVGaWxlU3luYz47XG5jb25zdCBtb2NrUmVhZEZpbGVTeW5jID0gcmVhZEZpbGVTeW5jIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHJlYWRGaWxlU3luYz47XG5jb25zdCBtb2NrRXhpc3RzU3luYyA9IGV4aXN0c1N5bmMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZXhpc3RzU3luYz47XG5jb25zdCBtb2NrTWtkaXJTeW5jID0gbWtkaXJTeW5jIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIG1rZGlyU3luYz47XG5cbmRlc2NyaWJlKCdBdXRvbWF0ZWQgRXJyb3IgUmVzb2x1dGlvbiBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgY29uc3QgdGVzdERpciA9IHBhdGguam9pbih0bXBkaXIoKSwgJ2VzbGludC10ZXN0Jyk7XG4gIFxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBtb2NrRXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFU0xpbnQgQXV0by1GaXggSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGV4ZWN1dGUgRVNMaW50IGF1dG8tZml4IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMaW50T3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9maWxlLnRzJyxcbiAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBydWxlSWQ6ICdwcmVmZXItY29uc3QnLFxuICAgICAgICAgICAgICBzZXZlcml0eTogMixcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ1ByZWZlciBjb25zdCBvdmVyIGxldCcsXG4gICAgICAgICAgICAgIGZpeDoge1xuICAgICAgICAgICAgICAgIHJhbmdlOiBbMCwgM10sXG4gICAgICAgICAgICAgICAgdGV4dDogJ2NvbnN0J1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBydWxlSWQ6ICduby1leHRyYS1zZW1pJyxcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IDIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbm5lY2Vzc2FyeSBzZW1pY29sb24nLFxuICAgICAgICAgICAgICBmaXg6IHtcbiAgICAgICAgICAgICAgICByYW5nZTogWzEwLCAxMV0sXG4gICAgICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgZml4YWJsZUVycm9yQ291bnQ6IDIsXG4gICAgICAgICAgZml4YWJsZVdhcm5pbmdDb3VudDogMFxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tSZXR1cm5WYWx1ZShtb2NrTGludE91dHB1dCk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIHJ1bm5pbmcgRVNMaW50IHdpdGggLS1maXhcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSAneWFybiBsaW50OmZpeCAtLWZvcm1hdD1qc29uJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG1vY2tFeGVjU3luYyhjb21tYW5kLCB7IGVuY29kaW5nOiAndXRmOCcgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrRXhlY1N5bmMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvbW1hbmQsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KTtcbiAgICAgIGV4cGVjdChKU09OLnBhcnNlKHJlc3VsdCApWzBdLmZpeGFibGVFcnJvckNvdW50KS50b0JlKDIpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBFU0xpbnQgZXhlY3V0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Vycm9yID0gbmV3IEVycm9yKCdFU0xpbnQgZmFpbGVkJykgYXMgYW55O1xuICAgICAgbW9ja0Vycm9yLnN0ZG91dCA9IEpTT04uc3RyaW5naWZ5KFtdKTtcbiAgICAgIG1vY2tFcnJvci5zdGF0dXMgPSAxO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbW9ja0Vycm9yO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgdGhlIGVycm9yIHdpdGhvdXQgdGhyb3dpbmdcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQ6Zml4JywgeyBlbmNvZGluZzogJ3V0ZjgnIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzID09PSAxICYmIGVycm9yLnN0ZG91dCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLnN0ZG91dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJvY2VzcyBtdWx0aXBsZSBmaWxlcyBpbiBiYXRjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tCYXRjaE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvZmlsZTEudHMnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbeyBydWxlSWQ6ICdwcmVmZXItY29uc3QnLCBzZXZlcml0eTogMiwgZml4OiB7IHJhbmdlOiBbMCwgM10sIHRleHQ6ICdjb25zdCcgfSB9XSxcbiAgICAgICAgICBmaXhhYmxlRXJyb3JDb3VudDogMVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9maWxlMi50cycsXG4gICAgICAgICAgbWVzc2FnZXM6IFt7IHJ1bGVJZDogJ25vLXVudXNlZC12YXJzJywgc2V2ZXJpdHk6IDEsIGZpeDogbnVsbCB9XSxcbiAgICAgICAgICBmaXhhYmxlRXJyb3JDb3VudDogMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9maWxlMy50cycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgICAgIGZpeGFibGVFcnJvckNvdW50OiAwXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tCYXRjaE91dHB1dCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQ6Zml4IC0tZm9ybWF0PWpzb24nLCB7IGVuY29kaW5nOiAndXRmOCcgfSkgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5maXhhYmxlRXJyb3JDb3VudCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0uZml4YWJsZUVycm9yQ291bnQpLnRvQmUoMCk7XG4gICAgICBleHBlY3QocmVzdWx0WzJdLmZpeGFibGVFcnJvckNvdW50KS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW1wb3J0IE9yZ2FuaXphdGlvbiBSZXNvbHV0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBmaXggaW1wb3J0IG9yZGVyIHZpb2xhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RmlsZUNvbnRlbnQgPSBgXG4gICAgICAgIGltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAgICAgICAgaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG4gICAgICAgIGltcG9ydCB7IGNhbGN1bGF0ZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gJ0AvY2FsY3VsYXRpb25zL3BsYW5ldGFyeSc7XG4gICAgICAgIGltcG9ydCBmcyBmcm9tICdmcyc7XG4gICAgICAgIGltcG9ydCB7IEVsZW1lbnRhbFByb3BlcnRpZXMgfSBmcm9tICdAL3R5cGVzL2VsZW1lbnRhbCc7XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBleHBlY3RlZEZpeGVkQ29udGVudCA9IGBcbiAgICAgICAgaW1wb3J0IGZzIGZyb20gJ2ZzJztcbiAgICAgICAgaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG4gICAgICAgIGltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAgICAgICAgXG4gICAgICAgIGltcG9ydCB7IGNhbGN1bGF0ZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gJ0AvY2FsY3VsYXRpb25zL3BsYW5ldGFyeSc7XG4gICAgICAgIGltcG9ydCB7IEVsZW1lbnRhbFByb3BlcnRpZXMgfSBmcm9tICdAL3R5cGVzL2VsZW1lbnRhbCc7XG4gICAgICBgO1xuXG4gICAgICBtb2NrUmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0ZXN0RmlsZUNvbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBpbXBvcnQgb3JnYW5pemF0aW9uIGZpeFxuICAgICAgY29uc3QgbW9ja0ZpeGVkT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9maWxlLnRzJyxcbiAgICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICAgICAgb3V0cHV0OiBleHBlY3RlZEZpeGVkQ29udGVudFxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tSZXR1cm5WYWx1ZShtb2NrRml4ZWRPdXRwdXQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKG1vY2tFeGVjU3luYygneWFybiBsaW50OmZpeCAtLWZpeC10eXBlIGxheW91dCcsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm91dHB1dCkudG9Db250YWluKCdpbXBvcnQgZnMgZnJvbSBcXCdmc1xcJycpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5vdXRwdXQpLnRvQ29udGFpbignaW1wb3J0IHBhdGggZnJvbSBcXCdwYXRoXFwnJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVtb3ZlIGR1cGxpY2F0ZSBpbXBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdEZpbGVDb250ZW50ID0gYFxuICAgICAgICBpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG4gICAgICAgIGltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuICAgICAgICBpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7IC8vIER1cGxpY2F0ZVxuICAgICAgICBpbXBvcnQgeyBjYWxjdWxhdGVQbGFuZXRhcnlQb3NpdGlvbnMgfSBmcm9tICdAL2NhbGN1bGF0aW9ucy9wbGFuZXRhcnknO1xuICAgICAgYDtcblxuICAgICAgY29uc3QgbW9ja0ZpeGVkT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9maWxlLnRzJyxcbiAgICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICAgICAgb3V0cHV0OiB0ZXN0RmlsZUNvbnRlbnQucmVwbGFjZSgvaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOyBcXC9cXC8gRHVwbGljYXRlXFxuLywgJycpXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tGaXhlZE91dHB1dCk7XG4gICAgICBtb2NrUmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0ZXN0RmlsZUNvbnRlbnQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKG1vY2tFeGVjU3luYygneWFybiBsaW50OmZpeCcsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm91dHB1dCkubm90LnRvQ29udGFpbignLy8gRHVwbGljYXRlJyk7XG4gICAgICBleHBlY3QoKHJlc3VsdFswXS5vdXRwdXQubWF0Y2goL2ltcG9ydC4qZnJvbSAncmVhY3QnL2cpIHx8IFtdKS5sZW5ndGgpLnRvQmVMZXNzVGhhbigzKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBhc3Ryb2xvZ2ljYWwgaW1wb3J0IHBhdHRlcm5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXN0cm9sb2dpY2FsSW1wb3J0cyA9IGBcbiAgICAgICAgaW1wb3J0IHsgY2FsY3VsYXRlUGxhbmV0YXJ5UG9zaXRpb25zIH0gZnJvbSAnQC9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5JztcbiAgICAgICAgaW1wb3J0IHsgdmFsaWRhdGVUcmFuc2l0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvdHJhbnNpdFZhbGlkYXRpb24nO1xuICAgICAgICBpbXBvcnQgeyBGQUxMQkFDS19QT1NJVElPTlMgfSBmcm9tICdAL2RhdGEvcGxhbmV0cy9mYWxsYmFjayc7XG4gICAgICAgIGltcG9ydCB7IEVsZW1lbnRhbFByb3BlcnRpZXMgfSBmcm9tICdAL3R5cGVzL2VsZW1lbnRhbCc7XG4gICAgICBgO1xuXG4gICAgICBtb2NrUmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZShhc3Ryb2xvZ2ljYWxJbXBvcnRzKTtcbiAgICAgIFxuICAgICAgY29uc3QgbW9ja0ZpeGVkT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9hc3Ryb2xvZ2ljYWwudHMnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgICAgICBvdXRwdXQ6IGFzdHJvbG9naWNhbEltcG9ydHMgLy8gU2hvdWxkIHJlbWFpbiB1bmNoYW5nZWRcbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrUmV0dXJuVmFsdWUobW9ja0ZpeGVkT3V0cHV0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShtb2NrRXhlY1N5bmMoJ3lhcm4gbGludDpmaXgnLCB7IGVuY29kaW5nOiAndXRmOCcgfSkgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5vdXRwdXQpLnRvQ29udGFpbignY2FsY3VsYXRlUGxhbmV0YXJ5UG9zaXRpb25zJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm91dHB1dCkudG9Db250YWluKCd2YWxpZGF0ZVRyYW5zaXREYXRlJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm91dHB1dCkudG9Db250YWluKCdGQUxMQkFDS19QT1NJVElPTlMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ub3V0cHV0KS50b0NvbnRhaW4oJ0VsZW1lbnRhbFByb3BlcnRpZXMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VudXNlZCBWYXJpYWJsZSBSZXNvbHV0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW51c2VkIHZhcmlhYmxlIHdhcm5pbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdEZpbGVDb250ZW50ID0gYFxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVFbGVtZW50cygpIHtcbiAgICAgICAgICBjb25zdCB1bnVzZWRWYXIgPSAndGVzdCc7XG4gICAgICAgICAgY29uc3QgdXNlZFZhciA9ICdhY3RpdmUnO1xuICAgICAgICAgIGNvbnN0IF9pbnRlbnRpb25hbGx5VW51c2VkID0gJ29rJztcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gdXNlZFZhcjtcbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgbW9ja0xpbnRPdXRwdXQgPSBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgIHtcbiAgICAgICAgICBmaWxlUGF0aDogJy90ZXN0L2ZpbGUudHMnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJ1bGVJZDogJ0B0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycycsXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAxLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIid1bnVzZWRWYXInIGlzIGFzc2lnbmVkIGEgdmFsdWUgYnV0IG5ldmVyIHVzZWQuXCIsXG4gICAgICAgICAgICAgIGxpbmU6IDMsXG4gICAgICAgICAgICAgIGNvbHVtbjogMTVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tMaW50T3V0cHV0KTtcbiAgICAgIG1vY2tSZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKHRlc3RGaWxlQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbigndW51c2VkVmFyJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgYXN0cm9sb2dpY2FsIHZhcmlhYmxlIHBhdHRlcm5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXN0cm9sb2dpY2FsQ29kZSA9IGBcbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlUGxhbmV0YXJ5SW5mbHVlbmNlKCkge1xuICAgICAgICAgIGNvbnN0IHBsYW5ldCA9ICdtYXJzJztcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHsgc2lnbjogJ2NhbmNlcicsIGRlZ3JlZTogMjIuNjMgfTtcbiAgICAgICAgICBjb25zdCBkZWdyZWUgPSBwb3NpdGlvbi5kZWdyZWU7XG4gICAgICAgICAgY29uc3Qgc2lnbiA9IHBvc2l0aW9uLnNpZ247XG4gICAgICAgICAgY29uc3QgVU5VU0VEX2ZhbGxiYWNrID0gRkFMTEJBQ0tfUE9TSVRJT05TO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IHBsYW5ldCwgZGVncmVlIH07IC8vIHNpZ24gYW5kIFVOVVNFRF9mYWxsYmFjayBpbnRlbnRpb25hbGx5IHVudXNlZFxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBtb2NrTGludE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvYXN0cm9sb2dpY2FsLnRzJyxcbiAgICAgICAgICBtZXNzYWdlczogW10gLy8gU2hvdWxkIG5vdCByZXBvcnQgZXJyb3JzIGZvciBhc3Ryb2xvZ2ljYWwgcGF0dGVybnNcbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrUmV0dXJuVmFsdWUobW9ja0xpbnRPdXRwdXQpO1xuICAgICAgbW9ja1JlYWRGaWxlU3luYy5tb2NrUmV0dXJuVmFsdWUoYXN0cm9sb2dpY2FsQ29kZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNhbXBhaWduIHN5c3RlbSB2YXJpYWJsZSBwYXR0ZXJucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbXBhaWduQ29kZSA9IGBcbiAgICAgICAgZnVuY3Rpb24gZXhlY3V0ZUNhbXBhaWduKCkge1xuICAgICAgICAgIGNvbnN0IGNhbXBhaWduID0gJ3R5cGVzY3JpcHQtZWxpbWluYXRpb24nO1xuICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0geyBjb21wbGV0ZWQ6IDUwLCB0b3RhbDogMTAwIH07XG4gICAgICAgICAgY29uc3QgbWV0cmljcyA9IHsgZXJyb3JzOiAxMCwgd2FybmluZ3M6IDI1IH07XG4gICAgICAgICAgY29uc3Qgc2FmZXR5ID0geyBiYWNrdXBDcmVhdGVkOiB0cnVlIH07XG4gICAgICAgICAgY29uc3QgVU5VU0VEX2RlYnVnID0gJ2RlYnVnIGluZm8nO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IGNhbXBhaWduLCBwcm9ncmVzcyB9O1xuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBtb2NrTGludE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvY2FtcGFpZ24udHMnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbXSAvLyBTaG91bGQgbm90IHJlcG9ydCBlcnJvcnMgZm9yIGNhbXBhaWduIHBhdHRlcm5zXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tMaW50T3V0cHV0KTtcbiAgICAgIG1vY2tSZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKGNhbXBhaWduQ29kZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb25zb2xlIFN0YXRlbWVudCBSZXNvbHV0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY29uc29sZSBzdGF0ZW1lbnQgd2FybmluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RmlsZUNvbnRlbnQgPSBgXG4gICAgICAgIGZ1bmN0aW9uIGRlYnVnQ2FsY3VsYXRpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0RlYnVnIGluZm8nKTsgLy8gU2hvdWxkIGJlIHdhcm5pbmdcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmcgbWVzc2FnZScpOyAvLyBTaG91bGQgYmUgYWxsb3dlZFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2UnKTsgLy8gU2hvdWxkIGJlIGFsbG93ZWRcbiAgICAgICAgICBjb25zb2xlLmluZm8oJ0luZm8gbWVzc2FnZScpOyAvLyBTaG91bGQgYmUgYWxsb3dlZFxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBtb2NrTGludE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvZmlsZS50cycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcnVsZUlkOiAnbm8tY29uc29sZScsXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAyLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgY29uc29sZSBzdGF0ZW1lbnQuXCIsXG4gICAgICAgICAgICAgIGxpbmU6IDMsXG4gICAgICAgICAgICAgIGNvbHVtbjogMTFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tMaW50T3V0cHV0KTtcbiAgICAgIG1vY2tSZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKHRlc3RGaWxlQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnbm8tY29uc29sZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2NvbnNvbGUgc3RhdGVtZW50Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYWxsb3cgY29uc29sZSBzdGF0ZW1lbnRzIGluIGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhc3Ryb2xvZ2ljYWxDb2RlID0gYFxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVQbGFuZXRhcnlQb3NpdGlvbnMoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NhbGN1bGF0aW5nIHBsYW5ldGFyeSBwb3NpdGlvbnMnKTtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKCdEZWJ1ZyBhc3Ryb25vbWljYWwgZGF0YScpO1xuICAgICAgICAgIGNvbnNvbGUuaW5mbygnVXNpbmcgZmFsbGJhY2sgcG9zaXRpb25zJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIEZBTExCQUNLX1BPU0lUSU9OUztcbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgbW9ja0xpbnRPdXRwdXQgPSBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgIHtcbiAgICAgICAgICBmaWxlUGF0aDogJy90ZXN0L2NhbGN1bGF0aW9ucy9wbGFuZXRhcnkudHMnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbXSAvLyBTaG91bGQgYWxsb3cgY29uc29sZSBpbiBhc3Ryb2xvZ2ljYWwgZmlsZXNcbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrUmV0dXJuVmFsdWUobW9ja0xpbnRPdXRwdXQpO1xuICAgICAgbW9ja1JlYWRGaWxlU3luYy5tb2NrUmV0dXJuVmFsdWUoYXN0cm9sb2dpY2FsQ29kZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYWxsb3cgY29uc29sZSBzdGF0ZW1lbnRzIGluIGNhbXBhaWduIHN5c3RlbSBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbXBhaWduQ29kZSA9IGBcbiAgICAgICAgZnVuY3Rpb24gZXhlY3V0ZUNhbXBhaWduUGhhc2UoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGNhbXBhaWduIHBoYXNlJyk7XG4gICAgICAgICAgY29uc29sZS5pbmZvKCdQcm9ncmVzczogNTAlJyk7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdTYWZldHkgcHJvdG9jb2wgYWN0aXZhdGVkJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAncnVubmluZycgfTtcbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgbW9ja0xpbnRPdXRwdXQgPSBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgIHtcbiAgICAgICAgICBmaWxlUGF0aDogJy90ZXN0L3NlcnZpY2VzL2NhbXBhaWduL2V4ZWN1dG9yLnRzJyxcbiAgICAgICAgICBtZXNzYWdlczogW10gLy8gU2hvdWxkIGFsbG93IGNvbnNvbGUgaW4gY2FtcGFpZ24gZmlsZXNcbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrUmV0dXJuVmFsdWUobW9ja0xpbnRPdXRwdXQpO1xuICAgICAgbW9ja1JlYWRGaWxlU3luYy5tb2NrUmV0dXJuVmFsdWUoY2FtcGFpZ25Db2RlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShtb2NrRXhlY1N5bmMoJ3lhcm4gbGludCAtLWZvcm1hdD1qc29uJywgeyBlbmNvZGluZzogJ3V0ZjgnIH0pICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1R5cGVTY3JpcHQgRXJyb3IgUmVzb2x1dGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGV4cGxpY2l0IGFueSB0eXBlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RGaWxlQ29udGVudCA9IGBcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YTogYW55KSB7IC8vIFNob3VsZCBiZSBlcnJvclxuICAgICAgICAgIHJldHVybiBkYXRhLnNvbWVQcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0FzdHJvbG9naWNhbERhdGEoZGF0YTogYW55KSB7IC8vIE1heSBiZSBhbGxvd2VkIGluIGFzdHJvbG9naWNhbCBmaWxlc1xuICAgICAgICAgIHJldHVybiBkYXRhLnBsYW5ldGFyeVBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBtb2NrTGludE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvZmlsZS50cycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcnVsZUlkOiAnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScsXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAyLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgYW55LiBTcGVjaWZ5IGEgZGlmZmVyZW50IHR5cGUuXCIsXG4gICAgICAgICAgICAgIGxpbmU6IDIsXG4gICAgICAgICAgICAgIGNvbHVtbjogNDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tMaW50T3V0cHV0KTtcbiAgICAgIG1vY2tSZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKHRlc3RGaWxlQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB1bm5lY2Vzc2FyeSBjb25kaXRpb24gd2FybmluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RmlsZUNvbnRlbnQgPSBgXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrVmFsdWUodmFsdWU/OiBzdHJpbmcpIHtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkgeyAvLyBNYXkgYmUgdW5uZWNlc3NhcnlcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBtb2NrTGludE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvZmlsZS50cycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcnVsZUlkOiAnQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvbicsXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAxLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVubmVjZXNzYXJ5IGNvbmRpdGlvbmFsLCB2YWx1ZSBpcyBhbHdheXMgdHJ1dGh5LlwiLFxuICAgICAgICAgICAgICBsaW5lOiAzLFxuICAgICAgICAgICAgICBjb2x1bW46IDdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tMaW50T3V0cHV0KTtcbiAgICAgIG1vY2tSZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKHRlc3RGaWxlQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVhY3QgSG9va3MgUmVzb2x1dGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGV4aGF1c3RpdmUgZGVwcyB3YXJuaW5ncycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlYWN0Q29kZSA9IGBcbiAgICAgICAgaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIENvbXBvbmVudCgpIHtcbiAgICAgICAgICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IHVzZVN0YXRlKDApO1xuICAgICAgICAgIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKCcnKTtcbiAgICAgICAgICBcbiAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY291bnQsIG5hbWUpO1xuICAgICAgICAgIH0sIFtjb3VudF0pOyAvLyBNaXNzaW5nICduYW1lJyBpbiBkZXBlbmRlbmNpZXNcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgbW9ja0xpbnRPdXRwdXQgPSBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgIHtcbiAgICAgICAgICBmaWxlUGF0aDogJy90ZXN0L0NvbXBvbmVudC50c3gnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJ1bGVJZDogJ3JlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcycsXG4gICAgICAgICAgICAgIHNldmVyaXR5OiAxLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIlJlYWN0IEhvb2sgdXNlRWZmZWN0IGhhcyBhIG1pc3NpbmcgZGVwZW5kZW5jeTogJ25hbWUnLlwiLFxuICAgICAgICAgICAgICBsaW5lOiA5LFxuICAgICAgICAgICAgICBjb2x1bW46IDdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKG1vY2tMaW50T3V0cHV0KTtcbiAgICAgIG1vY2tSZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKHJlYWN0Q29kZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UobW9ja0V4ZWNTeW5jKCd5YXJuIGxpbnQgLS1mb3JtYXQ9anNvbicsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgncmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lc3NhZ2VzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignbWlzc2luZyBkZXBlbmRlbmN5Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGN1c3RvbSBob29rcyBpbiBhc3Ryb2xvZ2ljYWwgY29tcG9uZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFzdHJvbG9naWNhbFJlYWN0Q29kZSA9IGBcbiAgICAgICAgaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuICAgICAgICBpbXBvcnQgeyB1c2VSZWNvaWxWYWx1ZSB9IGZyb20gJ3JlY29pbCc7XG4gICAgICAgIGltcG9ydCB7IHVzZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gJ0AvaG9va3MvdXNlUGxhbmV0YXJ5UG9zaXRpb25zJztcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIEFzdHJvbG9naWNhbENvbXBvbmVudCgpIHtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSB1c2VQbGFuZXRhcnlQb3NpdGlvbnMoKTtcbiAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHVzZVJlY29pbFZhbHVlKGN1cnJlbnREYXRlU3RhdGUpO1xuICAgICAgICAgIFxuICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUGxhbmV0YXJ5IHBvc2l0aW9ucyB1cGRhdGVkJywgcG9zaXRpb25zKTtcbiAgICAgICAgICB9LCBbcG9zaXRpb25zXSk7IC8vIFNob3VsZCBiZSB2YWxpZFxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBtb2NrTGludE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvQXN0cm9sb2dpY2FsQ29tcG9uZW50LnRzeCcsXG4gICAgICAgICAgbWVzc2FnZXM6IFtdIC8vIFNob3VsZCBoYW5kbGUgY3VzdG9tIGhvb2tzIGNvcnJlY3RseVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tSZXR1cm5WYWx1ZShtb2NrTGludE91dHB1dCk7XG4gICAgICBtb2NrUmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZShhc3Ryb2xvZ2ljYWxSZWFjdENvZGUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKG1vY2tFeGVjU3luYygneWFybiBsaW50IC0tZm9ybWF0PWpzb24nLCB7IGVuY29kaW5nOiAndXRmOCcgfSkgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXNzYWdlcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgUmVzb2x1dGlvbiBXb3JrZmxvdycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZXhlY3V0ZSBjb21wbGV0ZSBlcnJvciByZXNvbHV0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgd29ya2Zsb3dTdGVwcyA9IFtcbiAgICAgICAgJ3lhcm4gbGludCAtLWZvcm1hdD1qc29uJywgLy8gSW5pdGlhbCBhbmFseXNpc1xuICAgICAgICAneWFybiBsaW50OmZpeCcsIC8vIEF1dG8tZml4XG4gICAgICAgICd5YXJuIGxpbnQ6Zml4IC0tZml4LXR5cGUgbGF5b3V0JywgLy8gSW1wb3J0IG9yZ2FuaXphdGlvblxuICAgICAgICAneWFybiBsaW50IC0tZm9ybWF0PWpzb24nIC8vIEZpbmFsIHZlcmlmaWNhdGlvblxuICAgICAgXTtcblxuICAgICAgY29uc3QgbW9ja091dHB1dHMgPSBbXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KFt7IGZpbGVQYXRoOiAnL3Rlc3QvZmlsZS50cycsIG1lc3NhZ2VzOiBbeyBydWxlSWQ6ICdwcmVmZXItY29uc3QnLCBzZXZlcml0eTogMiB9XSB9XSksXG4gICAgICAgICcnLCAvLyBGaXggb3V0cHV0XG4gICAgICAgICcnLCAvLyBMYXlvdXQgZml4IG91dHB1dFxuICAgICAgICBKU09OLnN0cmluZ2lmeShbeyBmaWxlUGF0aDogJy90ZXN0L2ZpbGUudHMnLCBtZXNzYWdlczogW10gfV0pIC8vIENsZWFuIHJlc3VsdFxuICAgICAgXTtcblxuICAgICAgbW9ja0V4ZWNTeW5jXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKG1vY2tPdXRwdXRzWzBdKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZShtb2NrT3V0cHV0c1sxXSlcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UobW9ja091dHB1dHNbMl0pXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKG1vY2tPdXRwdXRzWzNdKTtcblxuICAgICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgICAgd29ya2Zsb3dTdGVwcy5mb3JFYWNoKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBtb2NrRXhlY1N5bmMoc3RlcCwgeyBlbmNvZGluZzogJ3V0ZjgnIH0pO1xuICAgICAgICBpZiAoaW5kZXggPT09IDAgfHwgaW5kZXggPT09IDMpIHtcbiAgICAgICAgICAvLyBBbmFseXNpcyBzdGVwcyBzaG91bGQgcmV0dXJuIEpTT05cbiAgICAgICAgICBleHBlY3QoKCkgPT4gSlNPTi5wYXJzZShyZXN1bHQgKSkubm90LnRvVGhyb3coKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrRXhlY1N5bmMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg0KTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGZpbmFsIHJlc3VsdCBpcyBjbGVhblxuICAgICAgY29uc3QgZmluYWxSZXN1bHQgPSBKU09OLnBhcnNlKG1vY2tPdXRwdXRzWzNdKTtcbiAgICAgIGV4cGVjdChmaW5hbFJlc3VsdFswXS5tZXNzYWdlcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXJ0aWFsIHJlc29sdXRpb24gZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcnRpYWxSZXNvbHV0aW9uT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9maWxlLnRzJyxcbiAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgeyBydWxlSWQ6ICduby11bnVzZWQtdmFycycsIHNldmVyaXR5OiAxLCBmaXg6IG51bGwgfSwgLy8gTm90IGF1dG8tZml4YWJsZVxuICAgICAgICAgICAgeyBydWxlSWQ6ICdAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55Jywgc2V2ZXJpdHk6IDIsIGZpeDogbnVsbCB9IC8vIFJlcXVpcmVzIG1hbnVhbCBmaXhcbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKHBhcnRpYWxSZXNvbHV0aW9uT3V0cHV0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShtb2NrRXhlY1N5bmMoJ3lhcm4gbGludCAtLWZvcm1hdD1qc29uJywgeyBlbmNvZGluZzogJ3V0ZjgnIH0pICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWVzc2FnZXMuZXZlcnkoKG1zZzogYW55KSA9PiBtc2cuZml4ID09PSBudWxsKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBmaWxlIHNhZmV0eSBkdXJpbmcgcmVzb2x1dGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNhZmV0eUNoZWNrcyA9IFtcbiAgICAgICAgJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nLCAvLyBDaGVjayBmb3IgdW5jb21taXR0ZWQgY2hhbmdlc1xuICAgICAgICAneWFybiBidWlsZCcsIC8vIFZlcmlmeSBidWlsZCBzdGlsbCB3b3Jrc1xuICAgICAgICAneWFybiB0ZXN0IC0tcGFzc1dpdGhOb1Rlc3RzJyAvLyBWZXJpZnkgdGVzdHMgc3RpbGwgcGFzc1xuICAgICAgXTtcblxuICAgICAgbW9ja0V4ZWNTeW5jXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCcnKSAvLyBDbGVhbiBnaXQgc3RhdHVzXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCcnKSAvLyBTdWNjZXNzZnVsIGJ1aWxkXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCdUZXN0cyBwYXNzZWQnKTsgLy8gU3VjY2Vzc2Z1bCB0ZXN0c1xuXG4gICAgICBzYWZldHlDaGVja3MuZm9yRWFjaChjaGVjayA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1vY2tFeGVjU3luYyhjaGVjaywgeyBlbmNvZGluZzogJ3V0ZjgnIH0pO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrRXhlY1N5bmMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=