f17f8316e75401d43d9e66155ced1cf9
"use strict";
/**
 * Comprehensive Linting Validation and Monitoring Dashboard
 *
 * This service provides real-time monitoring, validation, and alerting
 * for the enhanced ESLint configuration with domain-specific tracking.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.LintingValidationDashboard = void 0;
const child_process_1 = require("child_process");
const fs_1 = require("fs");
class LintingValidationDashboard {
    metricsHistoryFile = '.kiro/metrics/linting-metrics-history.json';
    alertsFile = '.kiro/metrics/linting-alerts.json';
    configFile = '.kiro/metrics/linting-dashboard-config.json';
    defaultThresholds = [
        {
            metric: 'parserErrors',
            threshold: 0,
            severity: 'critical',
            message: 'Parser errors detected - blocking accurate linting analysis'
        },
        {
            metric: 'explicitAnyErrors',
            threshold: 100,
            severity: 'error',
            message: 'Explicit any errors exceed acceptable threshold'
        },
        {
            metric: 'totalIssues',
            threshold: 2000,
            severity: 'warning',
            message: 'Total linting issues exceed warning threshold'
        },
        {
            metric: 'qualityScore',
            threshold: 80,
            severity: 'warning',
            message: 'Code quality score below target'
        },
        {
            metric: 'performanceMetrics.lintingDuration',
            threshold: 30000,
            severity: 'warning',
            message: 'Linting performance degraded - exceeds 30 seconds'
        }
    ];
    constructor() {
        this.ensureDirectoriesExist();
        this.initializeConfiguration();
    }
    /**
     * Run comprehensive linting validation across entire codebase
     */
    async runComprehensiveValidation() {
        console.log('🔍 Starting comprehensive linting validation...');
        const startTime = Date.now();
        const metrics = await this.collectMetrics();
        const alerts = this.evaluateAlerts(metrics);
        const regressionAnalysis = await this.analyzeRegression(metrics);
        const recommendations = this.generateRecommendations(metrics, alerts);
        const result = {
            passed: alerts.filter(a => a.severity === 'error' || a.severity === 'critical').length === 0,
            metrics,
            alerts,
            recommendations,
            regressionAnalysis
        };
        // Store metrics and alerts
        await this.storeMetrics(metrics);
        await this.storeAlerts(alerts);
        // Generate dashboard report
        await this.generateDashboardReport(result);
        console.log(`✅ Validation completed in ${Date.now() - startTime}ms`);
        return result;
    }
    /**
     * Collect comprehensive linting metrics
     */
    async collectMetrics() {
        const startTime = Date.now();
        try {
            // Run ESLint with enhanced configuration
            const lintOutput = (0, child_process_1.execSync)('yarn lint --format json --max-warnings 10000', {
                encoding: 'utf8',
                stdio: 'pipe',
                timeout: 60000 // 60 second timeout
            });
            const lintResults = JSON.parse(lintOutput);
            const metrics = this.parseLintResults(lintResults);
            // Add performance metrics
            metrics.performanceMetrics = {
                lintingDuration: Date.now() - startTime,
                cacheHitRate: await this.calculateCacheHitRate(),
                memoryUsage: process.memoryUsage().heapUsed / 1024 / 1024,
                filesProcessed: lintResults.length
            };
            // Calculate quality score
            metrics.qualityScore = this.calculateQualityScore(metrics);
            return metrics;
        }
        catch (error) {
            console.error('Error collecting linting metrics:', error);
            // Return fallback metrics
            return {
                timestamp: new Date(),
                totalIssues: -1,
                errors: -1,
                warnings: -1,
                parserErrors: -1,
                explicitAnyErrors: -1,
                importOrderIssues: -1,
                unusedVariables: -1,
                reactHooksIssues: -1,
                consoleStatements: -1,
                domainSpecificIssues: {
                    astrologicalCalculations: -1,
                    campaignSystem: -1,
                    testFiles: -1
                },
                performanceMetrics: {
                    lintingDuration: Date.now() - startTime,
                    cacheHitRate: 0,
                    memoryUsage: process.memoryUsage().heapUsed / 1024 / 1024,
                    filesProcessed: 0
                },
                qualityScore: 0,
                regressionDetected: false
            };
        }
    }
    /**
     * Parse ESLint results into structured metrics
     */
    parseLintResults(lintResults) {
        let totalIssues = 0;
        let errors = 0;
        let warnings = 0;
        let parserErrors = 0;
        let explicitAnyErrors = 0;
        let importOrderIssues = 0;
        let unusedVariables = 0;
        let reactHooksIssues = 0;
        let consoleStatements = 0;
        const domainSpecificIssues = {
            astrologicalCalculations: 0,
            campaignSystem: 0,
            testFiles: 0
        };
        for (const result of lintResults) {
            const filePath = result.filePath;
            for (const message of result.messages) {
                totalIssues++;
                if (message.severity === 2) {
                    errors++;
                }
                else {
                    warnings++;
                }
                // Categorize by rule type
                const ruleId = message.ruleId;
                if (message.fatal || ruleId === 'parseForESLint') {
                    parserErrors++;
                }
                else if (ruleId === '@typescript-eslint/no-explicit-any') {
                    explicitAnyErrors++;
                }
                else if (ruleId === 'import/order') {
                    importOrderIssues++;
                }
                else if (ruleId === '@typescript-eslint/no-unused-vars') {
                    unusedVariables++;
                }
                else if (ruleId?.startsWith('react-hooks/')) {
                    reactHooksIssues++;
                }
                else if (ruleId === 'no-console') {
                    consoleStatements++;
                }
                // Domain-specific categorization
                if (this.isAstrologicalFile(filePath)) {
                    domainSpecificIssues.astrologicalCalculations++;
                }
                else if (this.isCampaignFile(filePath)) {
                    domainSpecificIssues.campaignSystem++;
                }
                else if (this.isTestFile(filePath)) {
                    domainSpecificIssues.testFiles++;
                }
            }
        }
        return {
            timestamp: new Date(),
            totalIssues,
            errors,
            warnings,
            parserErrors,
            explicitAnyErrors,
            importOrderIssues,
            unusedVariables,
            reactHooksIssues,
            consoleStatements,
            domainSpecificIssues,
            performanceMetrics: {
                lintingDuration: 0,
                cacheHitRate: 0,
                memoryUsage: 0,
                filesProcessed: lintResults.length
            },
            qualityScore: 0,
            regressionDetected: false
        };
    }
    /**
     * Calculate overall quality score (0-100)
     */
    calculateQualityScore(metrics) {
        if (metrics.totalIssues === -1)
            return 0; // Error state
        // Base score starts at 100
        let score = 100;
        // Deduct points for different issue types
        score -= Math.min(50, metrics.parserErrors * 10); // Parser errors are critical
        score -= Math.min(30, metrics.explicitAnyErrors * 0.1); // Explicit any errors
        score -= Math.min(20, metrics.errors * 0.5); // General errors
        score -= Math.min(15, metrics.warnings * 0.01); // Warnings (less impact)
        // Performance penalty
        if (metrics.performanceMetrics.lintingDuration > 30000) {
            score -= 10; // Performance penalty
        }
        // Bonus for zero critical issues
        if (metrics.parserErrors === 0 && metrics.explicitAnyErrors < 10) {
            score += 5;
        }
        return Math.max(0, Math.min(100, Math.round(score)));
    }
    /**
     * Evaluate alerts based on current metrics
     */
    evaluateAlerts(metrics) {
        const alerts = [];
        const thresholds = this.loadThresholds();
        for (const threshold of thresholds) {
            const currentValue = this.getMetricValue(metrics, threshold.metric);
            if (this.shouldTriggerAlert(currentValue, threshold)) {
                alerts.push({
                    id: `${threshold.metric}-${Date.now()}`,
                    timestamp: new Date(),
                    severity: threshold.severity,
                    metric: threshold.metric,
                    currentValue,
                    threshold: threshold.threshold,
                    message: threshold.message,
                    resolved: false
                });
            }
        }
        return alerts;
    }
    /**
     * Analyze regression compared to historical data
     */
    async analyzeRegression(currentMetrics) {
        const history = this.loadMetricsHistory();
        if (history.length < 2) {
            return {
                detected: false,
                affectedMetrics: [],
                severity: 'minor',
                recommendations: ['Insufficient historical data for regression analysis'],
                historicalComparison: {
                    current: currentMetrics.totalIssues,
                    previous: 0,
                    change: 0,
                    changePercentage: 0
                }
            };
        }
        const previousMetrics = history[history.length - 2];
        const affectedMetrics = [];
        // Check for regressions in key metrics
        const keyMetrics = [
            'totalIssues',
            'errors',
            'parserErrors',
            'explicitAnyErrors',
            'qualityScore'
        ];
        for (const metric of keyMetrics) {
            const current = this.getMetricValue(currentMetrics, metric);
            const previous = this.getMetricValue(previousMetrics, metric);
            // Detect regression (increase in issues or decrease in quality score)
            const isRegression = metric === 'qualityScore'
                ? current < previous - 5 // Quality score decreased by more than 5 points
                : current > previous * 1.1; // Other metrics increased by more than 10%
            if (isRegression) {
                affectedMetrics.push(metric);
            }
        }
        const severity = this.calculateRegressionSeverity(affectedMetrics, currentMetrics, previousMetrics);
        return {
            detected: affectedMetrics.length > 0,
            affectedMetrics,
            severity,
            recommendations: this.generateRegressionRecommendations(affectedMetrics),
            historicalComparison: {
                current: currentMetrics.totalIssues,
                previous: previousMetrics.totalIssues,
                change: currentMetrics.totalIssues - previousMetrics.totalIssues,
                changePercentage: previousMetrics.totalIssues > 0
                    ? ((currentMetrics.totalIssues - previousMetrics.totalIssues) / previousMetrics.totalIssues) * 100
                    : 0
            }
        };
    }
    /**
     * Generate recommendations based on metrics and alerts
     */
    generateRecommendations(metrics, alerts) {
        const recommendations = [];
        // Parser error recommendations
        if (metrics.parserErrors > 0) {
            recommendations.push('🚨 URGENT: Fix parser errors immediately - they block accurate linting analysis', 'Check src/utils/recommendationEngine.ts and other files with syntax errors', 'Run `yarn tsc --noEmit` to identify TypeScript compilation issues');
        }
        // Explicit any recommendations
        if (metrics.explicitAnyErrors > 100) {
            recommendations.push('⚡ HIGH PRIORITY: Reduce explicit any types using systematic type inference', 'Focus on React components, service layers, and utility functions first', 'Use domain-specific exceptions for astrological calculations where needed');
        }
        // Import organization recommendations
        if (metrics.importOrderIssues > 50) {
            recommendations.push('🚀 READY: Deploy enhanced import organization with alphabetical sorting', 'Run `yarn lint:fix` to automatically organize imports', 'Use batch processing for systematic completion of remaining issues');
        }
        // Performance recommendations
        if (metrics.performanceMetrics.lintingDuration > 30000) {
            recommendations.push('⚡ PERFORMANCE: Linting duration exceeds 30 seconds', 'Enable ESLint caching with `yarn lint:fast` for incremental changes', 'Consider using `yarn lint:changed` for git-aware changed-files-only processing');
        }
        // Quality score recommendations
        if (metrics.qualityScore < 80) {
            recommendations.push('📊 QUALITY: Code quality score below target (80%)', 'Focus on eliminating critical errors first, then warnings', 'Use domain-specific linting commands for targeted improvements');
        }
        // Domain-specific recommendations
        if (metrics.domainSpecificIssues.astrologicalCalculations > 20) {
            recommendations.push('🌟 DOMAIN: Review astrological calculation files for rule compliance', 'Ensure mathematical constants and planetary variables are preserved', 'Use `yarn lint:domain-astro` for specialized astrological file linting');
        }
        return recommendations;
    }
    /**
     * Generate comprehensive dashboard report
     */
    async generateDashboardReport(result) {
        const reportPath = '.kiro/metrics/linting-dashboard-report.md';
        const report = `# Linting Excellence Dashboard Report

Generated: ${new Date().toISOString()}

## 📊 Overall Status

- **Validation Status**: ${result.passed ? '✅ PASSED' : '❌ FAILED'}
- **Quality Score**: ${result.metrics.qualityScore}/100
- **Total Issues**: ${result.metrics.totalIssues}
- **Regression Detected**: ${result.regressionAnalysis.detected ? '⚠️ YES' : '✅ NO'}

## 🔍 Detailed Metrics

### Error Breakdown
- **Parser Errors**: ${result.metrics.parserErrors} ${result.metrics.parserErrors === 0 ? '✅' : '🚨'}
- **TypeScript Errors**: ${result.metrics.errors}
- **Explicit Any Errors**: ${result.metrics.explicitAnyErrors} ${result.metrics.explicitAnyErrors < 100 ? '✅' : '⚡'}
- **Warnings**: ${result.metrics.warnings}

### Code Quality Issues
- **Import Order Issues**: ${result.metrics.importOrderIssues}
- **Unused Variables**: ${result.metrics.unusedVariables}
- **React Hooks Issues**: ${result.metrics.reactHooksIssues}
- **Console Statements**: ${result.metrics.consoleStatements}

### Domain-Specific Issues
- **Astrological Calculations**: ${result.metrics.domainSpecificIssues.astrologicalCalculations}
- **Campaign System**: ${result.metrics.domainSpecificIssues.campaignSystem}
- **Test Files**: ${result.metrics.domainSpecificIssues.testFiles}

### Performance Metrics
- **Linting Duration**: ${result.metrics.performanceMetrics.lintingDuration}ms
- **Cache Hit Rate**: ${(result.metrics.performanceMetrics.cacheHitRate * 100).toFixed(1)}%
- **Memory Usage**: ${result.metrics.performanceMetrics.memoryUsage.toFixed(1)}MB
- **Files Processed**: ${result.metrics.performanceMetrics.filesProcessed}

## 🚨 Active Alerts

${result.alerts.length === 0 ? 'No active alerts ✅' : result.alerts.map(alert => `- **${alert.severity.toUpperCase()}**: ${alert.message} (${alert.currentValue} > ${alert.threshold})`).join('\n')}

## 📈 Regression Analysis

${result.regressionAnalysis.detected ? `
**Regression Detected**: ${result.regressionAnalysis.severity.toUpperCase()}
- **Affected Metrics**: ${result.regressionAnalysis.affectedMetrics.join(', ')}
- **Change**: ${result.regressionAnalysis.historicalComparison.change} issues (${result.regressionAnalysis.historicalComparison.changePercentage.toFixed(1)}%)
` : '**No Regression Detected** ✅'}

## 💡 Recommendations

${result.recommendations.map(rec => `- ${rec}`).join('\n')}

## 🎯 Next Actions

### Immediate (Next 30 Minutes)
1. ${result.metrics.parserErrors > 0 ? '🚨 **URGENT**: Fix parser errors in recommendationEngine.ts' : '✅ No parser errors'}
2. ${result.metrics.explicitAnyErrors > 100 ? '⚡ **Deploy Explicit Any Campaign**: Address error-level explicit any types' : '✅ Explicit any errors under control'}
3. ${result.metrics.importOrderIssues > 50 ? '🚀 **Execute Import Organization**: Apply alphabetical sorting and grouping' : '✅ Import organization acceptable'}

### Next 2 Hours
1. **Enhanced Unused Variable Cleanup**: Apply domain-specific variable patterns
2. **React Hooks Enhancement**: Implement enhanced dependency analysis
3. **Performance Optimization**: Enable caching and parallel processing

### Success Metrics Target
- **Target**: ${result.metrics.totalIssues} → <2,000 total issues (${Math.round((1 - 2000 / Math.max(result.metrics.totalIssues, 1)) * 100)}% reduction)
- **Critical Path**: Parser errors → Explicit any errors → Import organization
- **Timeline**: 3-4 hours for major reduction with enhanced safety protocols
- **Quality Gate**: Zero parser errors, <100 explicit any errors, enhanced import organization

---

*Report generated by Linting Excellence Dashboard v1.0*
*Enhanced Configuration: React 19, TypeScript strict rules, domain-specific configurations*
`;
        (0, fs_1.writeFileSync)(reportPath, report, 'utf8');
        console.log(`📊 Dashboard report generated: ${reportPath}`);
    }
    // Helper methods
    ensureDirectoriesExist() {
        const dirs = ['.kiro/metrics'];
        for (const dir of dirs) {
            if (!(0, fs_1.existsSync)(dir)) {
                (0, child_process_1.execSync)(`mkdir -p ${dir}`);
            }
        }
    }
    initializeConfiguration() {
        if (!(0, fs_1.existsSync)(this.configFile)) {
            const config = {
                thresholds: this.defaultThresholds,
                alertingEnabled: true,
                regressionDetectionEnabled: true,
                performanceMonitoringEnabled: true,
                domainSpecificTrackingEnabled: true
            };
            (0, fs_1.writeFileSync)(this.configFile, JSON.stringify(config, null, 2));
        }
    }
    loadThresholds() {
        try {
            const config = JSON.parse((0, fs_1.readFileSync)(this.configFile, 'utf8'));
            return config.thresholds || this.defaultThresholds;
        }
        catch {
            return this.defaultThresholds;
        }
    }
    loadMetricsHistory() {
        try {
            if ((0, fs_1.existsSync)(this.metricsHistoryFile)) {
                return JSON.parse((0, fs_1.readFileSync)(this.metricsHistoryFile, 'utf8'));
            }
        }
        catch (error) {
            console.warn('Error loading metrics history:', error);
        }
        return [];
    }
    async storeMetrics(metrics) {
        const history = this.loadMetricsHistory();
        history.push(metrics);
        // Keep only last 100 entries
        if (history.length > 100) {
            history.splice(0, history.length - 100);
        }
        (0, fs_1.writeFileSync)(this.metricsHistoryFile, JSON.stringify(history, null, 2));
    }
    async storeAlerts(alerts) {
        (0, fs_1.writeFileSync)(this.alertsFile, JSON.stringify(alerts, null, 2));
    }
    getMetricValue(metrics, metricPath) {
        const parts = metricPath.split('.');
        let value = metrics;
        for (const part of parts) {
            value = value?.[part];
        }
        return typeof value === 'number' ? value : 0;
    }
    shouldTriggerAlert(currentValue, threshold) {
        if (threshold.metric === 'qualityScore') {
            return currentValue < threshold.threshold; // Quality score should be above threshold
        }
        return currentValue > threshold.threshold; // Other metrics should be below threshold
    }
    calculateRegressionSeverity(affectedMetrics, current, previous) {
        if (affectedMetrics.includes('parserErrors') && current.parserErrors > previous.parserErrors) {
            return 'critical';
        }
        if (affectedMetrics.includes('explicitAnyErrors') && current.explicitAnyErrors > previous.explicitAnyErrors + 50) {
            return 'major';
        }
        if (affectedMetrics.length > 2) {
            return 'moderate';
        }
        return 'minor';
    }
    generateRegressionRecommendations(affectedMetrics) {
        const recommendations = [];
        if (affectedMetrics.includes('parserErrors')) {
            recommendations.push('Immediately investigate and fix new parser errors');
        }
        if (affectedMetrics.includes('explicitAnyErrors')) {
            recommendations.push('Review recent changes that introduced explicit any types');
        }
        if (affectedMetrics.includes('totalIssues')) {
            recommendations.push('Run comprehensive linting validation to identify new issues');
        }
        return recommendations;
    }
    async calculateCacheHitRate() {
        try {
            // Check if ESLint cache exists and calculate hit rate
            if ((0, fs_1.existsSync)('.eslintcache')) {
                // Simplified cache hit rate calculation
                return 0.75; // Assume 75% cache hit rate for now
            }
        }
        catch {
            // Ignore errors
        }
        return 0;
    }
    isAstrologicalFile(filePath) {
        return filePath.includes('/calculations/') ||
            filePath.includes('/data/planets/') ||
            filePath.includes('reliableAstronomy') ||
            filePath.includes('/astrology/');
    }
    isCampaignFile(filePath) {
        return filePath.includes('/campaign/') ||
            filePath.includes('Campaign') ||
            filePath.includes('Progress');
    }
    isTestFile(filePath) {
        return filePath.includes('.test.') ||
            filePath.includes('.spec.') ||
            filePath.includes('__tests__');
    }
}
exports.LintingValidationDashboard = LintingValidationDashboard;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9saW50aW5nL0xpbnRpbmdWYWxpZGF0aW9uRGFzaGJvYXJkLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7O0FBRUgsaURBQXlDO0FBQ3pDLDJCQUE2RDtBQW9FN0QsTUFBYSwwQkFBMEI7SUFDcEIsa0JBQWtCLEdBQUcsNENBQTRDLENBQUM7SUFDbEUsVUFBVSxHQUFHLG1DQUFtQyxDQUFDO0lBQ2pELFVBQVUsR0FBRyw2Q0FBNkMsQ0FBQztJQUUzRCxpQkFBaUIsR0FBcUI7UUFDckQ7WUFDRSxNQUFNLEVBQUUsY0FBYztZQUN0QixTQUFTLEVBQUUsQ0FBQztZQUNaLFFBQVEsRUFBRSxVQUFVO1lBQ3BCLE9BQU8sRUFBRSw2REFBNkQ7U0FDdkU7UUFDRDtZQUNFLE1BQU0sRUFBRSxtQkFBbUI7WUFDM0IsU0FBUyxFQUFFLEdBQUc7WUFDZCxRQUFRLEVBQUUsT0FBTztZQUNqQixPQUFPLEVBQUUsaURBQWlEO1NBQzNEO1FBQ0Q7WUFDRSxNQUFNLEVBQUUsYUFBYTtZQUNyQixTQUFTLEVBQUUsSUFBSTtZQUNmLFFBQVEsRUFBRSxTQUFTO1lBQ25CLE9BQU8sRUFBRSwrQ0FBK0M7U0FDekQ7UUFDRDtZQUNFLE1BQU0sRUFBRSxjQUFjO1lBQ3RCLFNBQVMsRUFBRSxFQUFFO1lBQ2IsUUFBUSxFQUFFLFNBQVM7WUFDbkIsT0FBTyxFQUFFLGlDQUFpQztTQUMzQztRQUNEO1lBQ0UsTUFBTSxFQUFFLG9DQUFvQztZQUM1QyxTQUFTLEVBQUUsS0FBSztZQUNoQixRQUFRLEVBQUUsU0FBUztZQUNuQixPQUFPLEVBQUUsbURBQW1EO1NBQzdEO0tBQ0YsQ0FBQztJQUVGO1FBQ0UsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLDBCQUEwQjtRQUM5QixPQUFPLENBQUMs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LFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRU8sY0FBYyxDQUFDLFFBQWdCO1FBQ3JDLE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7WUFDL0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7WUFDN0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRU8sVUFBVSxDQUFDLFFBQWdCO1FBQ2pDLE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7WUFDM0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7WUFDM0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN4QyxDQUFDO0NBQ0Y7QUEvbkJELGdFQStuQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9saW50aW5nL0xpbnRpbmdWYWxpZGF0aW9uRGFzaGJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBMaW50aW5nIFZhbGlkYXRpb24gYW5kIE1vbml0b3JpbmcgRGFzaGJvYXJkXG4gKiBcbiAqIFRoaXMgc2VydmljZSBwcm92aWRlcyByZWFsLXRpbWUgbW9uaXRvcmluZywgdmFsaWRhdGlvbiwgYW5kIGFsZXJ0aW5nXG4gKiBmb3IgdGhlIGVuaGFuY2VkIEVTTGludCBjb25maWd1cmF0aW9uIHdpdGggZG9tYWluLXNwZWNpZmljIHRyYWNraW5nLlxuICovXG5cbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyB3cml0ZUZpbGVTeW5jLCByZWFkRmlsZVN5bmMsIGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGludGluZ01ldHJpY3Mge1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHRvdGFsSXNzdWVzOiBudW1iZXI7XG4gIGVycm9yczogbnVtYmVyO1xuICB3YXJuaW5nczogbnVtYmVyO1xuICBwYXJzZXJFcnJvcnM6IG51bWJlcjtcbiAgZXhwbGljaXRBbnlFcnJvcnM6IG51bWJlcjtcbiAgaW1wb3J0T3JkZXJJc3N1ZXM6IG51bWJlcjtcbiAgdW51c2VkVmFyaWFibGVzOiBudW1iZXI7XG4gIHJlYWN0SG9va3NJc3N1ZXM6IG51bWJlcjtcbiAgY29uc29sZVN0YXRlbWVudHM6IG51bWJlcjtcbiAgZG9tYWluU3BlY2lmaWNJc3N1ZXM6IHtcbiAgICBhc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbnM6IG51bWJlcjtcbiAgICBjYW1wYWlnblN5c3RlbTogbnVtYmVyO1xuICAgIHRlc3RGaWxlczogbnVtYmVyO1xuICB9O1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICBsaW50aW5nRHVyYXRpb246IG51bWJlcjtcbiAgICBjYWNoZUhpdFJhdGU6IG51bWJlcjtcbiAgICBtZW1vcnlVc2FnZTogbnVtYmVyO1xuICAgIGZpbGVzUHJvY2Vzc2VkOiBudW1iZXI7XG4gIH07XG4gIHF1YWxpdHlTY29yZTogbnVtYmVyOyAvLyAwLTEwMFxuICByZWdyZXNzaW9uRGV0ZWN0ZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRUaHJlc2hvbGQge1xuICBtZXRyaWM6IGtleW9mIExpbnRpbmdNZXRyaWNzIHwgc3RyaW5nO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgc2V2ZXJpdHk6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnY3JpdGljYWwnO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XG4gIHBhc3NlZDogYm9vbGVhbjtcbiAgbWV0cmljczogTGludGluZ01ldHJpY3M7XG4gIGFsZXJ0czogQWxlcnRbXTtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgcmVncmVzc2lvbkFuYWx5c2lzOiBSZWdyZXNzaW9uQW5hbHlzaXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnQge1xuICBpZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHNldmVyaXR5OiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ2NyaXRpY2FsJztcbiAgbWV0cmljOiBzdHJpbmc7XG4gIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICByZXNvbHZlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWdyZXNzaW9uQW5hbHlzaXMge1xuICBkZXRlY3RlZDogYm9vbGVhbjtcbiAgYWZmZWN0ZWRNZXRyaWNzOiBzdHJpbmdbXTtcbiAgc2V2ZXJpdHk6ICdtaW5vcicgfCAnbW9kZXJhdGUnIHwgJ21ham9yJyB8ICdjcml0aWNhbCc7XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIGhpc3RvcmljYWxDb21wYXJpc29uOiB7XG4gICAgY3VycmVudDogbnVtYmVyO1xuICAgIHByZXZpb3VzOiBudW1iZXI7XG4gICAgY2hhbmdlOiBudW1iZXI7XG4gICAgY2hhbmdlUGVyY2VudGFnZTogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgTGludGluZ1ZhbGlkYXRpb25EYXNoYm9hcmQge1xuICBwcml2YXRlIHJlYWRvbmx5IG1ldHJpY3NIaXN0b3J5RmlsZSA9ICcua2lyby9tZXRyaWNzL2xpbnRpbmctbWV0cmljcy1oaXN0b3J5Lmpzb24nO1xuICBwcml2YXRlIHJlYWRvbmx5IGFsZXJ0c0ZpbGUgPSAnLmtpcm8vbWV0cmljcy9saW50aW5nLWFsZXJ0cy5qc29uJztcbiAgcHJpdmF0ZSByZWFkb25seSBjb25maWdGaWxlID0gJy5raXJvL21ldHJpY3MvbGludGluZy1kYXNoYm9hcmQtY29uZmlnLmpzb24nO1xuICBcbiAgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0VGhyZXNob2xkczogQWxlcnRUaHJlc2hvbGRbXSA9IFtcbiAgICB7XG4gICAgICBtZXRyaWM6ICdwYXJzZXJFcnJvcnMnLFxuICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICBtZXNzYWdlOiAnUGFyc2VyIGVycm9ycyBkZXRlY3RlZCAtIGJsb2NraW5nIGFjY3VyYXRlIGxpbnRpbmcgYW5hbHlzaXMnXG4gICAgfSxcbiAgICB7XG4gICAgICBtZXRyaWM6ICdleHBsaWNpdEFueUVycm9ycycsXG4gICAgICB0aHJlc2hvbGQ6IDEwMCxcbiAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxuICAgICAgbWVzc2FnZTogJ0V4cGxpY2l0IGFueSBlcnJvcnMgZXhjZWVkIGFjY2VwdGFibGUgdGhyZXNob2xkJ1xuICAgIH0sXG4gICAge1xuICAgICAgbWV0cmljOiAndG90YWxJc3N1ZXMnLFxuICAgICAgdGhyZXNob2xkOiAyMDAwLFxuICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgIG1lc3NhZ2U6ICdUb3RhbCBsaW50aW5nIGlzc3VlcyBleGNlZWQgd2FybmluZyB0aHJlc2hvbGQnXG4gICAgfSxcbiAgICB7XG4gICAgICBtZXRyaWM6ICdxdWFsaXR5U2NvcmUnLFxuICAgICAgdGhyZXNob2xkOiA4MCxcbiAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXG4gICAgICBtZXNzYWdlOiAnQ29kZSBxdWFsaXR5IHNjb3JlIGJlbG93IHRhcmdldCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG1ldHJpYzogJ3BlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nRHVyYXRpb24nLFxuICAgICAgdGhyZXNob2xkOiAzMDAwMCxcbiAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXG4gICAgICBtZXNzYWdlOiAnTGludGluZyBwZXJmb3JtYW5jZSBkZWdyYWRlZCAtIGV4Y2VlZHMgMzAgc2Vjb25kcydcbiAgICB9XG4gIF07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbnN1cmVEaXJlY3Rvcmllc0V4aXN0KCk7XG4gICAgdGhpcy5pbml0aWFsaXplQ29uZmlndXJhdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBjb21wcmVoZW5zaXZlIGxpbnRpbmcgdmFsaWRhdGlvbiBhY3Jvc3MgZW50aXJlIGNvZGViYXNlXG4gICAqL1xuICBhc3luYyBydW5Db21wcmVoZW5zaXZlVmFsaWRhdGlvbigpOiBQcm9taXNlPFZhbGlkYXRpb25SZXN1bHQ+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBTdGFydGluZyBjb21wcmVoZW5zaXZlIGxpbnRpbmcgdmFsaWRhdGlvbi4uLicpO1xuICAgIFxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHRoaXMuY29sbGVjdE1ldHJpY3MoKTtcbiAgICBjb25zdCBhbGVydHMgPSB0aGlzLmV2YWx1YXRlQWxlcnRzKG1ldHJpY3MpO1xuICAgIGNvbnN0IHJlZ3Jlc3Npb25BbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZVJlZ3Jlc3Npb24obWV0cmljcyk7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhtZXRyaWNzLCBhbGVydHMpO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdDogVmFsaWRhdGlvblJlc3VsdCA9IHtcbiAgICAgIHBhc3NlZDogYWxlcnRzLmZpbHRlcihhID0+IGEuc2V2ZXJpdHkgPT09ICdlcnJvcicgfHwgYS5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykubGVuZ3RoID09PSAwLFxuICAgICAgbWV0cmljcyxcbiAgICAgIGFsZXJ0cyxcbiAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgIHJlZ3Jlc3Npb25BbmFseXNpc1xuICAgIH07XG5cbiAgICAvLyBTdG9yZSBtZXRyaWNzIGFuZCBhbGVydHNcbiAgICBhd2FpdCB0aGlzLnN0b3JlTWV0cmljcyhtZXRyaWNzKTtcbiAgICBhd2FpdCB0aGlzLnN0b3JlQWxlcnRzKGFsZXJ0cyk7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgZGFzaGJvYXJkIHJlcG9ydFxuICAgIGF3YWl0IHRoaXMuZ2VuZXJhdGVEYXNoYm9hcmRSZXBvcnQocmVzdWx0KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhg4pyFIFZhbGlkYXRpb24gY29tcGxldGVkIGluICR7RGF0ZS5ub3coKSAtIHN0YXJ0VGltZX1tc2ApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdCBjb21wcmVoZW5zaXZlIGxpbnRpbmcgbWV0cmljc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjb2xsZWN0TWV0cmljcygpOiBQcm9taXNlPExpbnRpbmdNZXRyaWNzPiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gUnVuIEVTTGludCB3aXRoIGVuaGFuY2VkIGNvbmZpZ3VyYXRpb25cbiAgICAgIGNvbnN0IGxpbnRPdXRwdXQgPSBleGVjU3luYyhcbiAgICAgICAgJ3lhcm4gbGludCAtLWZvcm1hdCBqc29uIC0tbWF4LXdhcm5pbmdzIDEwMDAwJyxcbiAgICAgICAgeyBcbiAgICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICAgIHN0ZGlvOiAncGlwZScsXG4gICAgICAgICAgdGltZW91dDogNjAwMDAgLy8gNjAgc2Vjb25kIHRpbWVvdXRcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgbGludFJlc3VsdHMgPSBKU09OLnBhcnNlKGxpbnRPdXRwdXQpO1xuICAgICAgY29uc3QgbWV0cmljcyA9IHRoaXMucGFyc2VMaW50UmVzdWx0cyhsaW50UmVzdWx0cyk7XG4gICAgICBcbiAgICAgIC8vIEFkZCBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgICBtZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcyA9IHtcbiAgICAgICAgbGludGluZ0R1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBjYWNoZUhpdFJhdGU6IGF3YWl0IHRoaXMuY2FsY3VsYXRlQ2FjaGVIaXRSYXRlKCksXG4gICAgICAgIG1lbW9yeVVzYWdlOiBwcm9jZXNzLm1lbW9yeVVzYWdlKCkuaGVhcFVzZWQgLyAxMDI0IC8gMTAyNCwgLy8gTUJcbiAgICAgICAgZmlsZXNQcm9jZXNzZWQ6IGxpbnRSZXN1bHRzLmxlbmd0aFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHF1YWxpdHkgc2NvcmVcbiAgICAgIG1ldHJpY3MucXVhbGl0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVRdWFsaXR5U2NvcmUobWV0cmljcyk7XG4gICAgICBcbiAgICAgIHJldHVybiBtZXRyaWNzO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbGxlY3RpbmcgbGludGluZyBtZXRyaWNzOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGZhbGxiYWNrIG1ldHJpY3NcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgdG90YWxJc3N1ZXM6IC0xLFxuICAgICAgICBlcnJvcnM6IC0xLFxuICAgICAgICB3YXJuaW5nczogLTEsXG4gICAgICAgIHBhcnNlckVycm9yczogLTEsXG4gICAgICAgIGV4cGxpY2l0QW55RXJyb3JzOiAtMSxcbiAgICAgICAgaW1wb3J0T3JkZXJJc3N1ZXM6IC0xLFxuICAgICAgICB1bnVzZWRWYXJpYWJsZXM6IC0xLFxuICAgICAgICByZWFjdEhvb2tzSXNzdWVzOiAtMSxcbiAgICAgICAgY29uc29sZVN0YXRlbWVudHM6IC0xLFxuICAgICAgICBkb21haW5TcGVjaWZpY0lzc3Vlczoge1xuICAgICAgICAgIGFzdHJvbG9naWNhbENhbGN1bGF0aW9uczogLTEsXG4gICAgICAgICAgY2FtcGFpZ25TeXN0ZW06IC0xLFxuICAgICAgICAgIHRlc3RGaWxlczogLTFcbiAgICAgICAgfSxcbiAgICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzOiB7XG4gICAgICAgICAgbGludGluZ0R1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIGNhY2hlSGl0UmF0ZTogMCxcbiAgICAgICAgICBtZW1vcnlVc2FnZTogcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkIC8gMTAyNCAvIDEwMjQsXG4gICAgICAgICAgZmlsZXNQcm9jZXNzZWQ6IDBcbiAgICAgICAgfSxcbiAgICAgICAgcXVhbGl0eVNjb3JlOiAwLFxuICAgICAgICByZWdyZXNzaW9uRGV0ZWN0ZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBFU0xpbnQgcmVzdWx0cyBpbnRvIHN0cnVjdHVyZWQgbWV0cmljc1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUxpbnRSZXN1bHRzKGxpbnRSZXN1bHRzOiBhbnlbXSk6IExpbnRpbmdNZXRyaWNzIHtcbiAgICBsZXQgdG90YWxJc3N1ZXMgPSAwO1xuICAgIGxldCBlcnJvcnMgPSAwO1xuICAgIGxldCB3YXJuaW5ncyA9IDA7XG4gICAgbGV0IHBhcnNlckVycm9ycyA9IDA7XG4gICAgbGV0IGV4cGxpY2l0QW55RXJyb3JzID0gMDtcbiAgICBsZXQgaW1wb3J0T3JkZXJJc3N1ZXMgPSAwO1xuICAgIGxldCB1bnVzZWRWYXJpYWJsZXMgPSAwO1xuICAgIGxldCByZWFjdEhvb2tzSXNzdWVzID0gMDtcbiAgICBsZXQgY29uc29sZVN0YXRlbWVudHMgPSAwO1xuICAgIFxuICAgIGNvbnN0IGRvbWFpblNwZWNpZmljSXNzdWVzID0ge1xuICAgICAgYXN0cm9sb2dpY2FsQ2FsY3VsYXRpb25zOiAwLFxuICAgICAgY2FtcGFpZ25TeXN0ZW06IDAsXG4gICAgICB0ZXN0RmlsZXM6IDBcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgbGludFJlc3VsdHMpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcmVzdWx0LmZpbGVQYXRoO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcmVzdWx0Lm1lc3NhZ2VzKSB7XG4gICAgICAgIHRvdGFsSXNzdWVzKys7XG4gICAgICAgIFxuICAgICAgICBpZiAobWVzc2FnZS5zZXZlcml0eSA9PT0gMikge1xuICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdhcm5pbmdzKys7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhdGVnb3JpemUgYnkgcnVsZSB0eXBlXG4gICAgICAgIGNvbnN0IHJ1bGVJZCA9IG1lc3NhZ2UucnVsZUlkO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmF0YWwgfHwgcnVsZUlkID09PSAncGFyc2VGb3JFU0xpbnQnKSB7XG4gICAgICAgICAgcGFyc2VyRXJyb3JzKys7XG4gICAgICAgIH0gZWxzZSBpZiAocnVsZUlkID09PSAnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScpIHtcbiAgICAgICAgICBleHBsaWNpdEFueUVycm9ycysrO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGVJZCA9PT0gJ2ltcG9ydC9vcmRlcicpIHtcbiAgICAgICAgICBpbXBvcnRPcmRlcklzc3VlcysrO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGVJZCA9PT0gJ0B0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycycpIHtcbiAgICAgICAgICB1bnVzZWRWYXJpYWJsZXMrKztcbiAgICAgICAgfSBlbHNlIGlmIChydWxlSWQ/LnN0YXJ0c1dpdGgoJ3JlYWN0LWhvb2tzLycpKSB7XG4gICAgICAgICAgcmVhY3RIb29rc0lzc3VlcysrO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGVJZCA9PT0gJ25vLWNvbnNvbGUnKSB7XG4gICAgICAgICAgY29uc29sZVN0YXRlbWVudHMrKztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRG9tYWluLXNwZWNpZmljIGNhdGVnb3JpemF0aW9uXG4gICAgICAgIGlmICh0aGlzLmlzQXN0cm9sb2dpY2FsRmlsZShmaWxlUGF0aCkpIHtcbiAgICAgICAgICBkb21haW5TcGVjaWZpY0lzc3Vlcy5hc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbnMrKztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ2FtcGFpZ25GaWxlKGZpbGVQYXRoKSkge1xuICAgICAgICAgIGRvbWFpblNwZWNpZmljSXNzdWVzLmNhbXBhaWduU3lzdGVtKys7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1Rlc3RGaWxlKGZpbGVQYXRoKSkge1xuICAgICAgICAgIGRvbWFpblNwZWNpZmljSXNzdWVzLnRlc3RGaWxlcysrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHRvdGFsSXNzdWVzLFxuICAgICAgZXJyb3JzLFxuICAgICAgd2FybmluZ3MsXG4gICAgICBwYXJzZXJFcnJvcnMsXG4gICAgICBleHBsaWNpdEFueUVycm9ycyxcbiAgICAgIGltcG9ydE9yZGVySXNzdWVzLFxuICAgICAgdW51c2VkVmFyaWFibGVzLFxuICAgICAgcmVhY3RIb29rc0lzc3VlcyxcbiAgICAgIGNvbnNvbGVTdGF0ZW1lbnRzLFxuICAgICAgZG9tYWluU3BlY2lmaWNJc3N1ZXMsXG4gICAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICAgICAgbGludGluZ0R1cmF0aW9uOiAwLCAvLyBXaWxsIGJlIHNldCBieSBjYWxsZXJcbiAgICAgICAgY2FjaGVIaXRSYXRlOiAwLFxuICAgICAgICBtZW1vcnlVc2FnZTogMCxcbiAgICAgICAgZmlsZXNQcm9jZXNzZWQ6IGxpbnRSZXN1bHRzLmxlbmd0aFxuICAgICAgfSxcbiAgICAgIHF1YWxpdHlTY29yZTogMCwgLy8gV2lsbCBiZSBjYWxjdWxhdGVkXG4gICAgICByZWdyZXNzaW9uRGV0ZWN0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgb3ZlcmFsbCBxdWFsaXR5IHNjb3JlICgwLTEwMClcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUXVhbGl0eVNjb3JlKG1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogbnVtYmVyIHtcbiAgICBpZiAobWV0cmljcy50b3RhbElzc3VlcyA9PT0gLTEpIHJldHVybiAwOyAvLyBFcnJvciBzdGF0ZVxuICAgIFxuICAgIC8vIEJhc2Ugc2NvcmUgc3RhcnRzIGF0IDEwMFxuICAgIGxldCBzY29yZSA9IDEwMDtcbiAgICBcbiAgICAvLyBEZWR1Y3QgcG9pbnRzIGZvciBkaWZmZXJlbnQgaXNzdWUgdHlwZXNcbiAgICBzY29yZSAtPSBNYXRoLm1pbig1MCwgbWV0cmljcy5wYXJzZXJFcnJvcnMgKiAxMCk7IC8vIFBhcnNlciBlcnJvcnMgYXJlIGNyaXRpY2FsXG4gICAgc2NvcmUgLT0gTWF0aC5taW4oMzAsIG1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgKiAwLjEpOyAvLyBFeHBsaWNpdCBhbnkgZXJyb3JzXG4gICAgc2NvcmUgLT0gTWF0aC5taW4oMjAsIG1ldHJpY3MuZXJyb3JzICogMC41KTsgLy8gR2VuZXJhbCBlcnJvcnNcbiAgICBzY29yZSAtPSBNYXRoLm1pbigxNSwgbWV0cmljcy53YXJuaW5ncyAqIDAuMDEpOyAvLyBXYXJuaW5ncyAobGVzcyBpbXBhY3QpXG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2UgcGVuYWx0eVxuICAgIGlmIChtZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nRHVyYXRpb24gPiAzMDAwMCkge1xuICAgICAgc2NvcmUgLT0gMTA7IC8vIFBlcmZvcm1hbmNlIHBlbmFsdHlcbiAgICB9XG4gICAgXG4gICAgLy8gQm9udXMgZm9yIHplcm8gY3JpdGljYWwgaXNzdWVzXG4gICAgaWYgKG1ldHJpY3MucGFyc2VyRXJyb3JzID09PSAwICYmIG1ldHJpY3MuZXhwbGljaXRBbnlFcnJvcnMgPCAxMCkge1xuICAgICAgc2NvcmUgKz0gNTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgTWF0aC5yb3VuZChzY29yZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhbGVydHMgYmFzZWQgb24gY3VycmVudCBtZXRyaWNzXG4gICAqL1xuICBwcml2YXRlIGV2YWx1YXRlQWxlcnRzKG1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogQWxlcnRbXSB7XG4gICAgY29uc3QgYWxlcnRzOiBBbGVydFtdID0gW107XG4gICAgY29uc3QgdGhyZXNob2xkcyA9IHRoaXMubG9hZFRocmVzaG9sZHMoKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHRocmVzaG9sZCBvZiB0aHJlc2hvbGRzKSB7XG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldE1ldHJpY1ZhbHVlKG1ldHJpY3MsIHRocmVzaG9sZC5tZXRyaWMpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5zaG91bGRUcmlnZ2VyQWxlcnQoY3VycmVudFZhbHVlLCB0aHJlc2hvbGQpKSB7XG4gICAgICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgICAgICBpZDogYCR7dGhyZXNob2xkLm1ldHJpY30tJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHNldmVyaXR5OiB0aHJlc2hvbGQuc2V2ZXJpdHksXG4gICAgICAgICAgbWV0cmljOiB0aHJlc2hvbGQubWV0cmljLFxuICAgICAgICAgIGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICB0aHJlc2hvbGQ6IHRocmVzaG9sZC50aHJlc2hvbGQsXG4gICAgICAgICAgbWVzc2FnZTogdGhyZXNob2xkLm1lc3NhZ2UsXG4gICAgICAgICAgcmVzb2x2ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYWxlcnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgcmVncmVzc2lvbiBjb21wYXJlZCB0byBoaXN0b3JpY2FsIGRhdGFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVJlZ3Jlc3Npb24oY3VycmVudE1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogUHJvbWlzZTxSZWdyZXNzaW9uQW5hbHlzaXM+IHtcbiAgICBjb25zdCBoaXN0b3J5ID0gdGhpcy5sb2FkTWV0cmljc0hpc3RvcnkoKTtcbiAgICBcbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPCAyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXRlY3RlZDogZmFsc2UsXG4gICAgICAgIGFmZmVjdGVkTWV0cmljczogW10sXG4gICAgICAgIHNldmVyaXR5OiAnbWlub3InLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnSW5zdWZmaWNpZW50IGhpc3RvcmljYWwgZGF0YSBmb3IgcmVncmVzc2lvbiBhbmFseXNpcyddLFxuICAgICAgICBoaXN0b3JpY2FsQ29tcGFyaXNvbjoge1xuICAgICAgICAgIGN1cnJlbnQ6IGN1cnJlbnRNZXRyaWNzLnRvdGFsSXNzdWVzLFxuICAgICAgICAgIHByZXZpb3VzOiAwLFxuICAgICAgICAgIGNoYW5nZTogMCxcbiAgICAgICAgICBjaGFuZ2VQZXJjZW50YWdlOiAwXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHByZXZpb3VzTWV0cmljcyA9IGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAyXTtcbiAgICBjb25zdCBhZmZlY3RlZE1ldHJpY3M6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHJlZ3Jlc3Npb25zIGluIGtleSBtZXRyaWNzXG4gICAgY29uc3Qga2V5TWV0cmljcyA9IFtcbiAgICAgICd0b3RhbElzc3VlcycsXG4gICAgICAnZXJyb3JzJyxcbiAgICAgICdwYXJzZXJFcnJvcnMnLFxuICAgICAgJ2V4cGxpY2l0QW55RXJyb3JzJyxcbiAgICAgICdxdWFsaXR5U2NvcmUnXG4gICAgXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IG1ldHJpYyBvZiBrZXlNZXRyaWNzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5nZXRNZXRyaWNWYWx1ZShjdXJyZW50TWV0cmljcywgbWV0cmljKTtcbiAgICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5nZXRNZXRyaWNWYWx1ZShwcmV2aW91c01ldHJpY3MsIG1ldHJpYyk7XG4gICAgICBcbiAgICAgIC8vIERldGVjdCByZWdyZXNzaW9uIChpbmNyZWFzZSBpbiBpc3N1ZXMgb3IgZGVjcmVhc2UgaW4gcXVhbGl0eSBzY29yZSlcbiAgICAgIGNvbnN0IGlzUmVncmVzc2lvbiA9IG1ldHJpYyA9PT0gJ3F1YWxpdHlTY29yZScgXG4gICAgICAgID8gY3VycmVudCA8IHByZXZpb3VzIC0gNSAvLyBRdWFsaXR5IHNjb3JlIGRlY3JlYXNlZCBieSBtb3JlIHRoYW4gNSBwb2ludHNcbiAgICAgICAgOiBjdXJyZW50ID4gcHJldmlvdXMgKiAxLjE7IC8vIE90aGVyIG1ldHJpY3MgaW5jcmVhc2VkIGJ5IG1vcmUgdGhhbiAxMCVcbiAgICAgIFxuICAgICAgaWYgKGlzUmVncmVzc2lvbikge1xuICAgICAgICBhZmZlY3RlZE1ldHJpY3MucHVzaChtZXRyaWMpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXZlcml0eSA9IHRoaXMuY2FsY3VsYXRlUmVncmVzc2lvblNldmVyaXR5KGFmZmVjdGVkTWV0cmljcywgY3VycmVudE1ldHJpY3MsIHByZXZpb3VzTWV0cmljcyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGRldGVjdGVkOiBhZmZlY3RlZE1ldHJpY3MubGVuZ3RoID4gMCxcbiAgICAgIGFmZmVjdGVkTWV0cmljcyxcbiAgICAgIHNldmVyaXR5LFxuICAgICAgcmVjb21tZW5kYXRpb25zOiB0aGlzLmdlbmVyYXRlUmVncmVzc2lvblJlY29tbWVuZGF0aW9ucyhhZmZlY3RlZE1ldHJpY3MpLFxuICAgICAgaGlzdG9yaWNhbENvbXBhcmlzb246IHtcbiAgICAgICAgY3VycmVudDogY3VycmVudE1ldHJpY3MudG90YWxJc3N1ZXMsXG4gICAgICAgIHByZXZpb3VzOiBwcmV2aW91c01ldHJpY3MudG90YWxJc3N1ZXMsXG4gICAgICAgIGNoYW5nZTogY3VycmVudE1ldHJpY3MudG90YWxJc3N1ZXMgLSBwcmV2aW91c01ldHJpY3MudG90YWxJc3N1ZXMsXG4gICAgICAgIGNoYW5nZVBlcmNlbnRhZ2U6IHByZXZpb3VzTWV0cmljcy50b3RhbElzc3VlcyA+IDAgXG4gICAgICAgICAgPyAoKGN1cnJlbnRNZXRyaWNzLnRvdGFsSXNzdWVzIC0gcHJldmlvdXNNZXRyaWNzLnRvdGFsSXNzdWVzKSAvIHByZXZpb3VzTWV0cmljcy50b3RhbElzc3VlcykgKiAxMDBcbiAgICAgICAgICA6IDBcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBtZXRyaWNzIGFuZCBhbGVydHNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMobWV0cmljczogTGludGluZ01ldHJpY3MsIGFsZXJ0czogQWxlcnRbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gUGFyc2VyIGVycm9yIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmIChtZXRyaWNzLnBhcnNlckVycm9ycyA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAn8J+aqCBVUkdFTlQ6IEZpeCBwYXJzZXIgZXJyb3JzIGltbWVkaWF0ZWx5IC0gdGhleSBibG9jayBhY2N1cmF0ZSBsaW50aW5nIGFuYWx5c2lzJyxcbiAgICAgICAgJ0NoZWNrIHNyYy91dGlscy9yZWNvbW1lbmRhdGlvbkVuZ2luZS50cyBhbmQgb3RoZXIgZmlsZXMgd2l0aCBzeW50YXggZXJyb3JzJyxcbiAgICAgICAgJ1J1biBgeWFybiB0c2MgLS1ub0VtaXRgIHRvIGlkZW50aWZ5IFR5cGVTY3JpcHQgY29tcGlsYXRpb24gaXNzdWVzJ1xuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRXhwbGljaXQgYW55IHJlY29tbWVuZGF0aW9uc1xuICAgIGlmIChtZXRyaWNzLmV4cGxpY2l0QW55RXJyb3JzID4gMTAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgJ+KaoSBISUdIIFBSSU9SSVRZOiBSZWR1Y2UgZXhwbGljaXQgYW55IHR5cGVzIHVzaW5nIHN5c3RlbWF0aWMgdHlwZSBpbmZlcmVuY2UnLFxuICAgICAgICAnRm9jdXMgb24gUmVhY3QgY29tcG9uZW50cywgc2VydmljZSBsYXllcnMsIGFuZCB1dGlsaXR5IGZ1bmN0aW9ucyBmaXJzdCcsXG4gICAgICAgICdVc2UgZG9tYWluLXNwZWNpZmljIGV4Y2VwdGlvbnMgZm9yIGFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMgd2hlcmUgbmVlZGVkJ1xuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSW1wb3J0IG9yZ2FuaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICBpZiAobWV0cmljcy5pbXBvcnRPcmRlcklzc3VlcyA+IDUwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgJ/CfmoAgUkVBRFk6IERlcGxveSBlbmhhbmNlZCBpbXBvcnQgb3JnYW5pemF0aW9uIHdpdGggYWxwaGFiZXRpY2FsIHNvcnRpbmcnLFxuICAgICAgICAnUnVuIGB5YXJuIGxpbnQ6Zml4YCB0byBhdXRvbWF0aWNhbGx5IG9yZ2FuaXplIGltcG9ydHMnLFxuICAgICAgICAnVXNlIGJhdGNoIHByb2Nlc3NpbmcgZm9yIHN5c3RlbWF0aWMgY29tcGxldGlvbiBvZiByZW1haW5pbmcgaXNzdWVzJ1xuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2UgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKG1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmxpbnRpbmdEdXJhdGlvbiA+IDMwMDAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgJ+KaoSBQRVJGT1JNQU5DRTogTGludGluZyBkdXJhdGlvbiBleGNlZWRzIDMwIHNlY29uZHMnLFxuICAgICAgICAnRW5hYmxlIEVTTGludCBjYWNoaW5nIHdpdGggYHlhcm4gbGludDpmYXN0YCBmb3IgaW5jcmVtZW50YWwgY2hhbmdlcycsXG4gICAgICAgICdDb25zaWRlciB1c2luZyBgeWFybiBsaW50OmNoYW5nZWRgIGZvciBnaXQtYXdhcmUgY2hhbmdlZC1maWxlcy1vbmx5IHByb2Nlc3NpbmcnXG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBRdWFsaXR5IHNjb3JlIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmIChtZXRyaWNzLnF1YWxpdHlTY29yZSA8IDgwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgJ/Cfk4ogUVVBTElUWTogQ29kZSBxdWFsaXR5IHNjb3JlIGJlbG93IHRhcmdldCAoODAlKScsXG4gICAgICAgICdGb2N1cyBvbiBlbGltaW5hdGluZyBjcml0aWNhbCBlcnJvcnMgZmlyc3QsIHRoZW4gd2FybmluZ3MnLFxuICAgICAgICAnVXNlIGRvbWFpbi1zcGVjaWZpYyBsaW50aW5nIGNvbW1hbmRzIGZvciB0YXJnZXRlZCBpbXByb3ZlbWVudHMnXG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBEb21haW4tc3BlY2lmaWMgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKG1ldHJpY3MuZG9tYWluU3BlY2lmaWNJc3N1ZXMuYXN0cm9sb2dpY2FsQ2FsY3VsYXRpb25zID4gMjApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAn8J+MnyBET01BSU46IFJldmlldyBhc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb24gZmlsZXMgZm9yIHJ1bGUgY29tcGxpYW5jZScsXG4gICAgICAgICdFbnN1cmUgbWF0aGVtYXRpY2FsIGNvbnN0YW50cyBhbmQgcGxhbmV0YXJ5IHZhcmlhYmxlcyBhcmUgcHJlc2VydmVkJyxcbiAgICAgICAgJ1VzZSBgeWFybiBsaW50OmRvbWFpbi1hc3Ryb2AgZm9yIHNwZWNpYWxpemVkIGFzdHJvbG9naWNhbCBmaWxlIGxpbnRpbmcnXG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgZGFzaGJvYXJkIHJlcG9ydFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZURhc2hib2FyZFJlcG9ydChyZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCByZXBvcnRQYXRoID0gJy5raXJvL21ldHJpY3MvbGludGluZy1kYXNoYm9hcmQtcmVwb3J0Lm1kJztcbiAgICBcbiAgICBjb25zdCByZXBvcnQgPSBgIyBMaW50aW5nIEV4Y2VsbGVuY2UgRGFzaGJvYXJkIFJlcG9ydFxuXG5HZW5lcmF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfVxuXG4jIyDwn5OKIE92ZXJhbGwgU3RhdHVzXG5cbi0gKipWYWxpZGF0aW9uIFN0YXR1cyoqOiAke3Jlc3VsdC5wYXNzZWQgPyAn4pyFIFBBU1NFRCcgOiAn4p2MIEZBSUxFRCd9XG4tICoqUXVhbGl0eSBTY29yZSoqOiAke3Jlc3VsdC5tZXRyaWNzLnF1YWxpdHlTY29yZX0vMTAwXG4tICoqVG90YWwgSXNzdWVzKio6ICR7cmVzdWx0Lm1ldHJpY3MudG90YWxJc3N1ZXN9XG4tICoqUmVncmVzc2lvbiBEZXRlY3RlZCoqOiAke3Jlc3VsdC5yZWdyZXNzaW9uQW5hbHlzaXMuZGV0ZWN0ZWQgPyAn4pqg77iPIFlFUycgOiAn4pyFIE5PJ31cblxuIyMg8J+UjSBEZXRhaWxlZCBNZXRyaWNzXG5cbiMjIyBFcnJvciBCcmVha2Rvd25cbi0gKipQYXJzZXIgRXJyb3JzKio6ICR7cmVzdWx0Lm1ldHJpY3MucGFyc2VyRXJyb3JzfSAke3Jlc3VsdC5tZXRyaWNzLnBhcnNlckVycm9ycyA9PT0gMCA/ICfinIUnIDogJ/CfmqgnfVxuLSAqKlR5cGVTY3JpcHQgRXJyb3JzKio6ICR7cmVzdWx0Lm1ldHJpY3MuZXJyb3JzfVxuLSAqKkV4cGxpY2l0IEFueSBFcnJvcnMqKjogJHtyZXN1bHQubWV0cmljcy5leHBsaWNpdEFueUVycm9yc30gJHtyZXN1bHQubWV0cmljcy5leHBsaWNpdEFueUVycm9ycyA8IDEwMCA/ICfinIUnIDogJ+KaoSd9XG4tICoqV2FybmluZ3MqKjogJHtyZXN1bHQubWV0cmljcy53YXJuaW5nc31cblxuIyMjIENvZGUgUXVhbGl0eSBJc3N1ZXNcbi0gKipJbXBvcnQgT3JkZXIgSXNzdWVzKio6ICR7cmVzdWx0Lm1ldHJpY3MuaW1wb3J0T3JkZXJJc3N1ZXN9XG4tICoqVW51c2VkIFZhcmlhYmxlcyoqOiAke3Jlc3VsdC5tZXRyaWNzLnVudXNlZFZhcmlhYmxlc31cbi0gKipSZWFjdCBIb29rcyBJc3N1ZXMqKjogJHtyZXN1bHQubWV0cmljcy5yZWFjdEhvb2tzSXNzdWVzfVxuLSAqKkNvbnNvbGUgU3RhdGVtZW50cyoqOiAke3Jlc3VsdC5tZXRyaWNzLmNvbnNvbGVTdGF0ZW1lbnRzfVxuXG4jIyMgRG9tYWluLVNwZWNpZmljIElzc3Vlc1xuLSAqKkFzdHJvbG9naWNhbCBDYWxjdWxhdGlvbnMqKjogJHtyZXN1bHQubWV0cmljcy5kb21haW5TcGVjaWZpY0lzc3Vlcy5hc3Ryb2xvZ2ljYWxDYWxjdWxhdGlvbnN9XG4tICoqQ2FtcGFpZ24gU3lzdGVtKio6ICR7cmVzdWx0Lm1ldHJpY3MuZG9tYWluU3BlY2lmaWNJc3N1ZXMuY2FtcGFpZ25TeXN0ZW19XG4tICoqVGVzdCBGaWxlcyoqOiAke3Jlc3VsdC5tZXRyaWNzLmRvbWFpblNwZWNpZmljSXNzdWVzLnRlc3RGaWxlc31cblxuIyMjIFBlcmZvcm1hbmNlIE1ldHJpY3Ncbi0gKipMaW50aW5nIER1cmF0aW9uKio6ICR7cmVzdWx0Lm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmxpbnRpbmdEdXJhdGlvbn1tc1xuLSAqKkNhY2hlIEhpdCBSYXRlKio6ICR7KHJlc3VsdC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5jYWNoZUhpdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxuLSAqKk1lbW9yeSBVc2FnZSoqOiAke3Jlc3VsdC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5tZW1vcnlVc2FnZS50b0ZpeGVkKDEpfU1CXG4tICoqRmlsZXMgUHJvY2Vzc2VkKio6ICR7cmVzdWx0Lm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmZpbGVzUHJvY2Vzc2VkfVxuXG4jIyDwn5qoIEFjdGl2ZSBBbGVydHNcblxuJHtyZXN1bHQuYWxlcnRzLmxlbmd0aCA9PT0gMCA/ICdObyBhY3RpdmUgYWxlcnRzIOKchScgOiByZXN1bHQuYWxlcnRzLm1hcChhbGVydCA9PiBcbiAgYC0gKioke2FsZXJ0LnNldmVyaXR5LnRvVXBwZXJDYXNlKCl9Kio6ICR7YWxlcnQubWVzc2FnZX0gKCR7YWxlcnQuY3VycmVudFZhbHVlfSA+ICR7YWxlcnQudGhyZXNob2xkfSlgXG4pLmpvaW4oJ1xcbicpfVxuXG4jIyDwn5OIIFJlZ3Jlc3Npb24gQW5hbHlzaXNcblxuJHtyZXN1bHQucmVncmVzc2lvbkFuYWx5c2lzLmRldGVjdGVkID8gYFxuKipSZWdyZXNzaW9uIERldGVjdGVkKio6ICR7cmVzdWx0LnJlZ3Jlc3Npb25BbmFseXNpcy5zZXZlcml0eS50b1VwcGVyQ2FzZSgpfVxuLSAqKkFmZmVjdGVkIE1ldHJpY3MqKjogJHtyZXN1bHQucmVncmVzc2lvbkFuYWx5c2lzLmFmZmVjdGVkTWV0cmljcy5qb2luKCcsICcpfVxuLSAqKkNoYW5nZSoqOiAke3Jlc3VsdC5yZWdyZXNzaW9uQW5hbHlzaXMuaGlzdG9yaWNhbENvbXBhcmlzb24uY2hhbmdlfSBpc3N1ZXMgKCR7cmVzdWx0LnJlZ3Jlc3Npb25BbmFseXNpcy5oaXN0b3JpY2FsQ29tcGFyaXNvbi5jaGFuZ2VQZXJjZW50YWdlLnRvRml4ZWQoMSl9JSlcbmAgOiAnKipObyBSZWdyZXNzaW9uIERldGVjdGVkKiog4pyFJ31cblxuIyMg8J+SoSBSZWNvbW1lbmRhdGlvbnNcblxuJHtyZXN1bHQucmVjb21tZW5kYXRpb25zLm1hcChyZWMgPT4gYC0gJHtyZWN9YCkuam9pbignXFxuJyl9XG5cbiMjIPCfjq8gTmV4dCBBY3Rpb25zXG5cbiMjIyBJbW1lZGlhdGUgKE5leHQgMzAgTWludXRlcylcbjEuICR7cmVzdWx0Lm1ldHJpY3MucGFyc2VyRXJyb3JzID4gMCA/ICfwn5qoICoqVVJHRU5UKio6IEZpeCBwYXJzZXIgZXJyb3JzIGluIHJlY29tbWVuZGF0aW9uRW5naW5lLnRzJyA6ICfinIUgTm8gcGFyc2VyIGVycm9ycyd9XG4yLiAke3Jlc3VsdC5tZXRyaWNzLmV4cGxpY2l0QW55RXJyb3JzID4gMTAwID8gJ+KaoSAqKkRlcGxveSBFeHBsaWNpdCBBbnkgQ2FtcGFpZ24qKjogQWRkcmVzcyBlcnJvci1sZXZlbCBleHBsaWNpdCBhbnkgdHlwZXMnIDogJ+KchSBFeHBsaWNpdCBhbnkgZXJyb3JzIHVuZGVyIGNvbnRyb2wnfVxuMy4gJHtyZXN1bHQubWV0cmljcy5pbXBvcnRPcmRlcklzc3VlcyA+IDUwID8gJ/CfmoAgKipFeGVjdXRlIEltcG9ydCBPcmdhbml6YXRpb24qKjogQXBwbHkgYWxwaGFiZXRpY2FsIHNvcnRpbmcgYW5kIGdyb3VwaW5nJyA6ICfinIUgSW1wb3J0IG9yZ2FuaXphdGlvbiBhY2NlcHRhYmxlJ31cblxuIyMjIE5leHQgMiBIb3Vyc1xuMS4gKipFbmhhbmNlZCBVbnVzZWQgVmFyaWFibGUgQ2xlYW51cCoqOiBBcHBseSBkb21haW4tc3BlY2lmaWMgdmFyaWFibGUgcGF0dGVybnNcbjIuICoqUmVhY3QgSG9va3MgRW5oYW5jZW1lbnQqKjogSW1wbGVtZW50IGVuaGFuY2VkIGRlcGVuZGVuY3kgYW5hbHlzaXNcbjMuICoqUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uKio6IEVuYWJsZSBjYWNoaW5nIGFuZCBwYXJhbGxlbCBwcm9jZXNzaW5nXG5cbiMjIyBTdWNjZXNzIE1ldHJpY3MgVGFyZ2V0XG4tICoqVGFyZ2V0Kio6ICR7cmVzdWx0Lm1ldHJpY3MudG90YWxJc3N1ZXN9IOKGkiA8MiwwMDAgdG90YWwgaXNzdWVzICgke01hdGgucm91bmQoKDEgLSAyMDAwL01hdGgubWF4KHJlc3VsdC5tZXRyaWNzLnRvdGFsSXNzdWVzLCAxKSkgKiAxMDApfSUgcmVkdWN0aW9uKVxuLSAqKkNyaXRpY2FsIFBhdGgqKjogUGFyc2VyIGVycm9ycyDihpIgRXhwbGljaXQgYW55IGVycm9ycyDihpIgSW1wb3J0IG9yZ2FuaXphdGlvblxuLSAqKlRpbWVsaW5lKio6IDMtNCBob3VycyBmb3IgbWFqb3IgcmVkdWN0aW9uIHdpdGggZW5oYW5jZWQgc2FmZXR5IHByb3RvY29sc1xuLSAqKlF1YWxpdHkgR2F0ZSoqOiBaZXJvIHBhcnNlciBlcnJvcnMsIDwxMDAgZXhwbGljaXQgYW55IGVycm9ycywgZW5oYW5jZWQgaW1wb3J0IG9yZ2FuaXphdGlvblxuXG4tLS1cblxuKlJlcG9ydCBnZW5lcmF0ZWQgYnkgTGludGluZyBFeGNlbGxlbmNlIERhc2hib2FyZCB2MS4wKlxuKkVuaGFuY2VkIENvbmZpZ3VyYXRpb246IFJlYWN0IDE5LCBUeXBlU2NyaXB0IHN0cmljdCBydWxlcywgZG9tYWluLXNwZWNpZmljIGNvbmZpZ3VyYXRpb25zKlxuYDtcblxuICAgIHdyaXRlRmlsZVN5bmMocmVwb3J0UGF0aCwgcmVwb3J0LCAndXRmOCcpO1xuICAgIGNvbnNvbGUubG9nKGDwn5OKIERhc2hib2FyZCByZXBvcnQgZ2VuZXJhdGVkOiAke3JlcG9ydFBhdGh9YCk7XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kc1xuICBwcml2YXRlIGVuc3VyZURpcmVjdG9yaWVzRXhpc3QoKTogdm9pZCB7XG4gICAgY29uc3QgZGlycyA9IFsnLmtpcm8vbWV0cmljcyddO1xuICAgIGZvciAoY29uc3QgZGlyIG9mIGRpcnMpIHtcbiAgICAgIGlmICghZXhpc3RzU3luYyhkaXIpKSB7XG4gICAgICAgIGV4ZWNTeW5jKGBta2RpciAtcCAke2Rpcn1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb25maWd1cmF0aW9uKCk6IHZvaWQge1xuICAgIGlmICghZXhpc3RzU3luYyh0aGlzLmNvbmZpZ0ZpbGUpKSB7XG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIHRocmVzaG9sZHM6IHRoaXMuZGVmYXVsdFRocmVzaG9sZHMsXG4gICAgICAgIGFsZXJ0aW5nRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgcmVncmVzc2lvbkRldGVjdGlvbkVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHBlcmZvcm1hbmNlTW9uaXRvcmluZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIGRvbWFpblNwZWNpZmljVHJhY2tpbmdFbmFibGVkOiB0cnVlXG4gICAgICB9O1xuICAgICAgd3JpdGVGaWxlU3luYyh0aGlzLmNvbmZpZ0ZpbGUsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZFRocmVzaG9sZHMoKTogQWxlcnRUaHJlc2hvbGRbXSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IEpTT04ucGFyc2UocmVhZEZpbGVTeW5jKHRoaXMuY29uZmlnRmlsZSwgJ3V0ZjgnKSk7XG4gICAgICByZXR1cm4gY29uZmlnLnRocmVzaG9sZHMgfHwgdGhpcy5kZWZhdWx0VGhyZXNob2xkcztcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRUaHJlc2hvbGRzO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZE1ldHJpY3NIaXN0b3J5KCk6IExpbnRpbmdNZXRyaWNzW10ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoZXhpc3RzU3luYyh0aGlzLm1ldHJpY3NIaXN0b3J5RmlsZSkpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVhZEZpbGVTeW5jKHRoaXMubWV0cmljc0hpc3RvcnlGaWxlLCAndXRmOCcpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdFcnJvciBsb2FkaW5nIG1ldHJpY3MgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVNZXRyaWNzKG1ldHJpY3M6IExpbnRpbmdNZXRyaWNzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaGlzdG9yeSA9IHRoaXMubG9hZE1ldHJpY3NIaXN0b3J5KCk7XG4gICAgaGlzdG9yeS5wdXNoKG1ldHJpY3MpO1xuICAgIFxuICAgIC8vIEtlZXAgb25seSBsYXN0IDEwMCBlbnRyaWVzXG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gMTAwKSB7XG4gICAgICBoaXN0b3J5LnNwbGljZSgwLCBoaXN0b3J5Lmxlbmd0aCAtIDEwMCk7XG4gICAgfVxuICAgIFxuICAgIHdyaXRlRmlsZVN5bmModGhpcy5tZXRyaWNzSGlzdG9yeUZpbGUsIEpTT04uc3RyaW5naWZ5KGhpc3RvcnksIG51bGwsIDIpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVBbGVydHMoYWxlcnRzOiBBbGVydFtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgd3JpdGVGaWxlU3luYyh0aGlzLmFsZXJ0c0ZpbGUsIEpTT04uc3RyaW5naWZ5KGFsZXJ0cywgbnVsbCwgMikpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRNZXRyaWNWYWx1ZShtZXRyaWNzOiBMaW50aW5nTWV0cmljcywgbWV0cmljUGF0aDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBwYXJ0cyA9IG1ldHJpY1BhdGguc3BsaXQoJy4nKTtcbiAgICBsZXQgdmFsdWU6IGFueSA9IG1ldHJpY3M7XG4gICAgXG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlPy5bcGFydF07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInID8gdmFsdWUgOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRUcmlnZ2VyQWxlcnQoY3VycmVudFZhbHVlOiBudW1iZXIsIHRocmVzaG9sZDogQWxlcnRUaHJlc2hvbGQpOiBib29sZWFuIHtcbiAgICBpZiAodGhyZXNob2xkLm1ldHJpYyA9PT0gJ3F1YWxpdHlTY29yZScpIHtcbiAgICAgIHJldHVybiBjdXJyZW50VmFsdWUgPCB0aHJlc2hvbGQudGhyZXNob2xkOyAvLyBRdWFsaXR5IHNjb3JlIHNob3VsZCBiZSBhYm92ZSB0aHJlc2hvbGRcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRWYWx1ZSA+IHRocmVzaG9sZC50aHJlc2hvbGQ7IC8vIE90aGVyIG1ldHJpY3Mgc2hvdWxkIGJlIGJlbG93IHRocmVzaG9sZFxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVSZWdyZXNzaW9uU2V2ZXJpdHkoXG4gICAgYWZmZWN0ZWRNZXRyaWNzOiBzdHJpbmdbXSwgXG4gICAgY3VycmVudDogTGludGluZ01ldHJpY3MsIFxuICAgIHByZXZpb3VzOiBMaW50aW5nTWV0cmljc1xuICApOiAnbWlub3InIHwgJ21vZGVyYXRlJyB8ICdtYWpvcicgfCAnY3JpdGljYWwnIHtcbiAgICBpZiAoYWZmZWN0ZWRNZXRyaWNzLmluY2x1ZGVzKCdwYXJzZXJFcnJvcnMnKSAmJiBjdXJyZW50LnBhcnNlckVycm9ycyA+IHByZXZpb3VzLnBhcnNlckVycm9ycykge1xuICAgICAgcmV0dXJuICdjcml0aWNhbCc7XG4gICAgfVxuICAgIFxuICAgIGlmIChhZmZlY3RlZE1ldHJpY3MuaW5jbHVkZXMoJ2V4cGxpY2l0QW55RXJyb3JzJykgJiYgY3VycmVudC5leHBsaWNpdEFueUVycm9ycyA+IHByZXZpb3VzLmV4cGxpY2l0QW55RXJyb3JzICsgNTApIHtcbiAgICAgIHJldHVybiAnbWFqb3InO1xuICAgIH1cbiAgICBcbiAgICBpZiAoYWZmZWN0ZWRNZXRyaWNzLmxlbmd0aCA+IDIpIHtcbiAgICAgIHJldHVybiAnbW9kZXJhdGUnO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gJ21pbm9yJztcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWdyZXNzaW9uUmVjb21tZW5kYXRpb25zKGFmZmVjdGVkTWV0cmljczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmIChhZmZlY3RlZE1ldHJpY3MuaW5jbHVkZXMoJ3BhcnNlckVycm9ycycpKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnSW1tZWRpYXRlbHkgaW52ZXN0aWdhdGUgYW5kIGZpeCBuZXcgcGFyc2VyIGVycm9ycycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoYWZmZWN0ZWRNZXRyaWNzLmluY2x1ZGVzKCdleHBsaWNpdEFueUVycm9ycycpKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnUmV2aWV3IHJlY2VudCBjaGFuZ2VzIHRoYXQgaW50cm9kdWNlZCBleHBsaWNpdCBhbnkgdHlwZXMnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGFmZmVjdGVkTWV0cmljcy5pbmNsdWRlcygndG90YWxJc3N1ZXMnKSkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1J1biBjb21wcmVoZW5zaXZlIGxpbnRpbmcgdmFsaWRhdGlvbiB0byBpZGVudGlmeSBuZXcgaXNzdWVzJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhbGN1bGF0ZUNhY2hlSGl0UmF0ZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBFU0xpbnQgY2FjaGUgZXhpc3RzIGFuZCBjYWxjdWxhdGUgaGl0IHJhdGVcbiAgICAgIGlmIChleGlzdHNTeW5jKCcuZXNsaW50Y2FjaGUnKSkge1xuICAgICAgICAvLyBTaW1wbGlmaWVkIGNhY2hlIGhpdCByYXRlIGNhbGN1bGF0aW9uXG4gICAgICAgIHJldHVybiAwLjc1OyAvLyBBc3N1bWUgNzUlIGNhY2hlIGhpdCByYXRlIGZvciBub3dcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElnbm9yZSBlcnJvcnNcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwcml2YXRlIGlzQXN0cm9sb2dpY2FsRmlsZShmaWxlUGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZpbGVQYXRoLmluY2x1ZGVzKCcvY2FsY3VsYXRpb25zLycpIHx8XG4gICAgICAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKCcvZGF0YS9wbGFuZXRzLycpIHx8XG4gICAgICAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKCdyZWxpYWJsZUFzdHJvbm9teScpIHx8XG4gICAgICAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKCcvYXN0cm9sb2d5LycpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0NhbXBhaWduRmlsZShmaWxlUGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZpbGVQYXRoLmluY2x1ZGVzKCcvY2FtcGFpZ24vJykgfHxcbiAgICAgICAgICAgZmlsZVBhdGguaW5jbHVkZXMoJ0NhbXBhaWduJykgfHxcbiAgICAgICAgICAgZmlsZVBhdGguaW5jbHVkZXMoJ1Byb2dyZXNzJyk7XG4gIH1cblxuICBwcml2YXRlIGlzVGVzdEZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmaWxlUGF0aC5pbmNsdWRlcygnLnRlc3QuJykgfHxcbiAgICAgICAgICAgZmlsZVBhdGguaW5jbHVkZXMoJy5zcGVjLicpIHx8XG4gICAgICAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKCdfX3Rlc3RzX18nKTtcbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==