4b705f39c1976e012057e8b7a4fd6b4d
"use strict";
/**
 * Bundle Size Optimizer Tests
 * Perfect Codebase Campaign - Phase 4 Implementation Tests
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock external dependencies
jest.mock('child_process');
jest.mock('fs');
const BundleSizeOptimizer_1 = require("./BundleSizeOptimizer");
const fs = __importStar(require("fs"));
const child_process_1 = require("child_process");
const mockExecSync = child_process_1.execSync;
const mockFs = fs;
describe('BundleSizeOptimizer', () => {
    let bundleOptimizer;
    beforeEach(() => {
        bundleOptimizer = new BundleSizeOptimizer_1.BundleSizeOptimizer();
        jest.clearAllMocks();
    });
    describe('analyzeBundleSize', () => {
        it('should analyze Next.js bundle size', async () => {
            mockFs.existsSync.mockImplementation((path) => {
                return path === '.next' || path === '.next/static/chunks';
            });
            mockFs.readFileSync.mockImplementation((path) => {
                if (path === 'package.json') {
                    return JSON.stringify({
                        dependencies: {
                            'react': '^18.0.0',
                            '@next/bundle-analyzer': '^13.0.0'
                        }
                    });
                }
                return '';
            });
            mockFs.readdirSync.mockReturnValue(['main.js', 'vendor.js', 'lazy-component.js']);
            mockFs.statSync.mockReturnValue({ size: 50 * 1024 }); // 50kB files
            mockExecSync.mockReturnValue('400\n'); // 400kB total
            const analysis = await bundleOptimizer.analyzeBundleSize();
            expect(analysis.totalSize).toBe(400);
            expect(analysis.compressedSize).toBe(280); // 70% compression
            expect(analysis.chunks).toHaveLength(3);
            expect(analysis.chunks[0].name).toBe('main.js');
            expect(analysis.chunks[2].isLazyLoaded).toBe(true); // lazy-component.js
        });
        it('should analyze generic build directory', async () => {
            mockFs.existsSync.mockImplementation((path) => {
                return path === 'dist';
            });
            mockExecSync.mockReturnValue('350\n'); // 350kB total
            const analysis = await bundleOptimizer.analyzeBundleSize();
            expect(analysis.totalSize).toBe(350);
            expect(analysis.compressedSize).toBe(245); // 70% compression
        });
        it('should estimate bundle size from source code', async () => {
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync.mockReturnValue('200000\n'); // 200kB source code
            const analysis = await bundleOptimizer.analyzeBundleSize();
            expect(analysis.totalSize).toBe(293); // Math.round(200000 / 1024 * 1.5) = 293
        });
        it('should handle bundle analysis errors gracefully', async () => {
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync.mockImplementation(() => {
                throw new Error('Analysis failed');
            });
            const analysis = await bundleOptimizer.analyzeBundleSize();
            expect(analysis.totalSize).toBe(400); // Conservative estimate fallback
            // The error is caught in estimateBundleSize, so recommendations will be generated normally
            expect(analysis.recommendations).toBeInstanceOf(Array);
        });
    });
    describe('validateLazyLoading', () => {
        it('should validate lazy loading implementation', async () => {
            mockExecSync
                .mockReturnValueOnce('25\n') // 25 components
                .mockReturnValueOnce('10\n') // 10 lazy loaded
                .mockReturnValueOnce('src/components/LargeComponent.tsx\nsrc/pages/HeavyPage.tsx\n') // potential lazy components
                .mockReturnValueOnce('15\n') // useEffect count
                .mockReturnValueOnce('5\n'); // useSWR count
            const validation = await bundleOptimizer.validateLazyLoading();
            expect(validation.componentsAnalyzed).toBe(25);
            expect(validation.lazyLoadedComponents).toBe(10);
            expect(validation.score).toBe(40); // 10/25 * 100
            expect(validation.potentialLazyComponents).toHaveLength(2);
            expect(validation.dataFetchingOptimizations).toContain('Consider using SWR or React Query for data fetching optimization');
        });
        it('should handle lazy loading validation errors', async () => {
            mockExecSync.mockImplementation(() => {
                throw new Error('Validation failed');
            });
            const validation = await bundleOptimizer.validateLazyLoading();
            expect(validation.componentsAnalyzed).toBe(0);
            expect(validation.lazyLoadedComponents).toBe(0);
            expect(validation.score).toBe(0);
        });
    });
    describe('bundle size alerts', () => {
        it('should generate alert when bundle size exceeds target', async () => {
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync.mockReturnValue('500000\n'); // Large source code resulting in 732kB bundle
            await bundleOptimizer.analyzeBundleSize();
            const alerts = bundleOptimizer.getCurrentAlerts();
            expect(alerts.length).toBeGreaterThan(0);
            const sizeAlert = alerts.find(alert => alert.type === 'size_exceeded');
            expect(sizeAlert).toBeDefined();
            expect(sizeAlert === null || sizeAlert === void 0 ? void 0 : sizeAlert.severity).toBe('critical'); // > 420 * 1.2
            expect(sizeAlert === null || sizeAlert === void 0 ? void 0 : sizeAlert.currentValue).toBe(732); // Math.round(500000 / 1024 * 1.5) = 732
            expect(sizeAlert === null || sizeAlert === void 0 ? void 0 : sizeAlert.targetValue).toBe(420);
        });
        it('should generate alert for large chunks', async () => {
            mockFs.existsSync.mockImplementation((path) => {
                return path === '.next' || path === '.next/static/chunks';
            });
            mockFs.readdirSync.mockReturnValue(['large-chunk.js']);
            mockFs.statSync.mockReturnValue({ size: 150 * 1024 }); // 150kB chunk
            mockExecSync.mockReturnValue('400\n');
            await bundleOptimizer.analyzeBundleSize();
            const alerts = bundleOptimizer.getCurrentAlerts();
            const chunkAlert = alerts.find(alert => alert.type === 'chunk_too_large');
            expect(chunkAlert).toBeDefined();
            expect(chunkAlert === null || chunkAlert === void 0 ? void 0 : chunkAlert.message).toContain('large-chunk.js');
            expect(chunkAlert === null || chunkAlert === void 0 ? void 0 : chunkAlert.currentValue).toBe(150);
            expect(chunkAlert === null || chunkAlert === void 0 ? void 0 : chunkAlert.targetValue).toBe(100);
        });
        it('should generate alert for unused dependencies', async () => {
            mockFs.existsSync.mockImplementation((path) => {
                return path === 'package.json';
            });
            mockFs.readFileSync.mockReturnValue(JSON.stringify({
                dependencies: {
                    'lodash': '^4.0.0',
                    'moment': '^2.0.0'
                }
            }));
            mockExecSync.mockReturnValue('300000\n'); // Source size
            await bundleOptimizer.analyzeBundleSize();
            const alerts = bundleOptimizer.getCurrentAlerts();
            const depAlert = alerts.find(alert => alert.type === 'unused_dependency');
            expect(depAlert).toBeDefined();
            expect(depAlert === null || depAlert === void 0 ? void 0 : depAlert.message).toContain('optional dependency');
        });
    });
    describe('generateOptimizationReport', () => {
        it('should generate comprehensive optimization report', async () => {
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync
                .mockReturnValueOnce('280000\n') // Source size (410kB bundle)
                .mockReturnValueOnce('20\n') // Components
                .mockReturnValueOnce('8\n') // Lazy loaded
                .mockReturnValueOnce('src/components/Heavy.tsx\n') // Potential lazy
                .mockReturnValueOnce('10\n') // useEffect
                .mockReturnValueOnce('3\n'); // useSWR
            const report = await bundleOptimizer.generateOptimizationReport();
            expect(report.timestamp).toBeInstanceOf(Date);
            expect(report.analysis.totalSize).toBe(410); // Math.round(280000 / 1024 * 1.5) = 410
            expect(report.lazyLoadingValidation.score).toBe(40); // 8/20 * 100
            expect(report.overallScore).toBe(70); // (100 + 40) / 2
            expect(report.targetCompliance).toBe(true); // 410 <= 420
            expect(report.recommendations).toBeInstanceOf(Array);
        });
        it('should indicate non-compliance when bundle exceeds target', async () => {
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync
                .mockReturnValueOnce('350000\n') // Source size (513kB bundle)
                .mockReturnValueOnce('15\n') // Components
                .mockReturnValueOnce('3\n') // Lazy loaded
                .mockReturnValueOnce('') // No potential lazy
                .mockReturnValueOnce('5\n') // useEffect
                .mockReturnValueOnce('2\n'); // useSWR
            const report = await bundleOptimizer.generateOptimizationReport();
            expect(report.analysis.totalSize).toBe(513); // Math.round(350000 / 1024 * 1.5) = 513
            expect(report.targetCompliance).toBe(false);
            expect(report.recommendations[0]).toContain('Reduce bundle size by 93kB'); // 513 - 420 = 93
        });
    });
    describe('asset analysis', () => {
        it('should analyze assets correctly', async () => {
            mockFs.existsSync.mockImplementation((path) => {
                return path === 'public';
            });
            // Mock getAllFiles method behavior
            const mockGetAllFiles = jest.fn().mockReturnValue([
                'public/image.png',
                'public/style.css',
                'public/script.js',
                'public/font.woff2'
            ]);
            bundleOptimizer.getAllFiles = mockGetAllFiles;
            mockFs.statSync.mockImplementation((path) => {
                const sizes = {
                    'public/image.png': 100 * 1024,
                    'public/style.css': 20 * 1024,
                    'public/script.js': 50 * 1024,
                    'public/font.woff2': 30 * 1024 // 30kB
                };
                return { size: sizes[path] || 1024 };
            });
            mockExecSync.mockReturnValue('300000\n');
            const analysis = await bundleOptimizer.analyzeBundleSize();
            expect(analysis.assets).toHaveLength(4);
            expect(analysis.assets[0].size).toBe(100); // Largest first
            expect(analysis.assets[0].type).toBe('image');
            expect(analysis.assets.find(a => a.type === 'css')).toBeDefined();
            expect(analysis.assets.find(a => a.type === 'js')).toBeDefined();
            expect(analysis.assets.find(a => a.type === 'font')).toBeDefined();
        });
    });
    describe('dependency analysis', () => {
        it('should analyze dependencies for bundle impact', async () => {
            var _a, _b;
            mockFs.existsSync.mockImplementation((path) => {
                return path === 'package.json';
            });
            mockFs.readFileSync.mockReturnValue(JSON.stringify({
                dependencies: {
                    'react': '^18.0.0',
                    'react-dom': '^18.0.0',
                    'lodash': '^4.0.0',
                    'chart.js': '^3.0.0'
                }
            }));
            mockExecSync.mockReturnValue('300000\n');
            const analysis = await bundleOptimizer.analyzeBundleSize();
            expect(analysis.dependencies).toHaveLength(4);
            expect(analysis.dependencies[0].name).toBe('react-dom'); // Largest first (130kB)
            expect((_a = analysis.dependencies.find(d => d.name === 'react')) === null || _a === void 0 ? void 0 : _a.usage).toBe('critical');
            expect((_b = analysis.dependencies.find(d => d.name === 'lodash')) === null || _b === void 0 ? void 0 : _b.alternatives).toContain('ramda (functional)');
        });
    });
    describe('alert management', () => {
        it('should manage alerts correctly', () => {
            const initialAlerts = bundleOptimizer.getCurrentAlerts();
            expect(initialAlerts).toHaveLength(0);
            // Trigger alert by analyzing large bundle
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync.mockReturnValue('500000\n'); // Large bundle
            return bundleOptimizer.analyzeBundleSize().then(() => {
                const alertsAfterAnalysis = bundleOptimizer.getCurrentAlerts();
                expect(alertsAfterAnalysis.length).toBeGreaterThan(0);
                bundleOptimizer.clearAlerts();
                const alertsAfterClear = bundleOptimizer.getCurrentAlerts();
                expect(alertsAfterClear).toHaveLength(0);
            });
        });
    });
    describe('data export', () => {
        it('should export bundle data to file', async () => {
            mockFs.writeFileSync.mockImplementation(() => { });
            mockFs.existsSync.mockReturnValue(false);
            mockExecSync
                .mockReturnValueOnce('300000\n') // Bundle analysis
                .mockReturnValueOnce('15\n') // Components
                .mockReturnValueOnce('5\n') // Lazy loaded
                .mockReturnValueOnce('') // Potential lazy
                .mockReturnValueOnce('8\n') // useEffect
                .mockReturnValueOnce('3\n'); // useSWR
            await bundleOptimizer.exportBundleData('./test-bundle-data.json');
            expect(mockFs.writeFileSync).toHaveBeenCalledWith('./test-bundle-data.json', expect.stringContaining('"timestamp"'));
        });
        it('should handle export errors gracefully', async () => {
            mockFs.writeFileSync.mockImplementation(() => {
                throw new Error('Write failed');
            });
            await expect(bundleOptimizer.exportBundleData('./test-bundle-data.json')).rejects.toThrow('Failed to export bundle data');
        });
    });
    describe('helper methods', () => {
        it('should identify heavy dependencies correctly', () => {
            const isHeavy = bundleOptimizer.isLikelyHeavyDependency;
            expect(isHeavy('@chakra-ui/react')).toBe(true);
            expect(isHeavy('react-table')).toBe(true);
            expect(isHeavy('chart-library')).toBe(true);
            expect(isHeavy('simple-util')).toBe(false);
        });
        it('should estimate dependency sizes correctly', async () => {
            const estimateSize = bundleOptimizer.estimateDependencySize;
            expect(await estimateSize('react')).toBe(45);
            expect(await estimateSize('react-dom')).toBe(130);
            expect(await estimateSize('unknown-package')).toBe(20); // Default
        });
        it('should analyze dependency usage correctly', () => {
            const analyzeUsage = bundleOptimizer.analyzeDependencyUsage;
            expect(analyzeUsage('react')).toBe('critical');
            expect(analyzeUsage('@chakra-ui/react')).toBe('important');
            expect(analyzeUsage('lodash')).toBe('optional');
        });
        it('should suggest alternatives correctly', () => {
            const suggestAlternatives = bundleOptimizer.suggestAlternatives;
            expect(suggestAlternatives('lodash')).toContain('ramda (functional)');
            expect(suggestAlternatives('moment')).toContain('date-fns (smaller)');
            expect(suggestAlternatives('unknown-package')).toEqual([]);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9CdW5kbGVTaXplT3B0aW1pemVyLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1ILDZCQUE2QjtBQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzNCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFOaEIsK0RBQW1HO0FBQ25HLHVDQUF5QjtBQUN6QixpREFBeUM7QUFNekMsTUFBTSxZQUFZLEdBQUcsd0JBQWdELENBQUM7QUFDdEUsTUFBTSxNQUFNLEdBQUcsRUFBNEIsQ0FBQztBQUU1QyxRQUFRLENBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFO0lBQ25DLElBQUksZUFBb0MsQ0FBQztJQUV6QyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsZUFBZSxHQUFHLElBQUkseUNBQW1CLEVBQUUsQ0FBQztRQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQ2pDLEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNsRCxNQUFNLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBWSxFQUFFLEVBQUU7Z0JBQ3BELE9BQU8sSUFBSSxLQUFLLE9BQU8sSUFBSSxJQUFJLEtBQUsscUJBQXFCLENBQUM7WUFDNUQsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBWSxFQUFFLEVBQUU7Z0JBQ3RELElBQUksSUFBSSxLQUFLLGNBQWMsRUFBRTtvQkFDM0IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO3dCQUNwQixZQUFZLEVBQUU7NEJBQ1osT0FBTyxFQUFFLFNBQVM7NEJBQ2xC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W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9CdW5kbGVTaXplT3B0aW1pemVyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCdW5kbGUgU2l6ZSBPcHRpbWl6ZXIgVGVzdHNcbiAqIFBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gLSBQaGFzZSA0IEltcGxlbWVudGF0aW9uIFRlc3RzXG4gKi9cblxuaW1wb3J0IHsgQnVuZGxlU2l6ZU9wdGltaXplciwgQnVuZGxlQW5hbHlzaXMsIExhenlMb2FkaW5nVmFsaWRhdGlvbiB9IGZyb20gJy4vQnVuZGxlU2l6ZU9wdGltaXplcic7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdjaGlsZF9wcm9jZXNzJyk7XG5qZXN0Lm1vY2soJ2ZzJyk7XG5cbmNvbnN0IG1vY2tFeGVjU3luYyA9IGV4ZWNTeW5jIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGV4ZWNTeW5jPjtcbmNvbnN0IG1vY2tGcyA9IGZzIGFzIGplc3QuTW9ja2VkPHR5cGVvZiBmcz47XG5cbmRlc2NyaWJlKCdCdW5kbGVTaXplT3B0aW1pemVyJywgKCkgPT4ge1xuICBsZXQgYnVuZGxlT3B0aW1pemVyOiBCdW5kbGVTaXplT3B0aW1pemVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGJ1bmRsZU9wdGltaXplciA9IG5ldyBCdW5kbGVTaXplT3B0aW1pemVyKCk7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhbmFseXplQnVuZGxlU2l6ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFuYWx5emUgTmV4dC5qcyBidW5kbGUgc2l6ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXRoID09PSAnLm5leHQnIHx8IHBhdGggPT09ICcubmV4dC9zdGF0aWMvY2h1bmtzJztcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtb2NrRnMucmVhZEZpbGVTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChwYXRoID09PSAncGFja2FnZS5qc29uJykge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAgICAgJ3JlYWN0JzogJ14xOC4wLjAnLFxuICAgICAgICAgICAgICAnQG5leHQvYnVuZGxlLWFuYWx5emVyJzogJ14xMy4wLjAnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1vY2tGcy5yZWFkZGlyU3luYy5tb2NrUmV0dXJuVmFsdWUoWydtYWluLmpzJywgJ3ZlbmRvci5qcycsICdsYXp5LWNvbXBvbmVudC5qcyddIGFzIGFueSk7XG4gICAgICBtb2NrRnMuc3RhdFN5bmMubW9ja1JldHVyblZhbHVlKHsgc2l6ZTogNTAgKiAxMDI0IH0gYXMgYW55KTsgLy8gNTBrQiBmaWxlc1xuICAgICAgXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCc0MDBcXG4nKTsgLy8gNDAwa0IgdG90YWxcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFuYWx5c2lzLnRvdGFsU2l6ZSkudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLmNvbXByZXNzZWRTaXplKS50b0JlKDI4MCk7IC8vIDcwJSBjb21wcmVzc2lvblxuICAgICAgZXhwZWN0KGFuYWx5c2lzLmNodW5rcykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLmNodW5rc1swXS5uYW1lKS50b0JlKCdtYWluLmpzJyk7XG4gICAgICBleHBlY3QoYW5hbHlzaXMuY2h1bmtzWzJdLmlzTGF6eUxvYWRlZCkudG9CZSh0cnVlKTsgLy8gbGF6eS1jb21wb25lbnQuanNcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBnZW5lcmljIGJ1aWxkIGRpcmVjdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXRoID09PSAnZGlzdCc7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tSZXR1cm5WYWx1ZSgnMzUwXFxuJyk7IC8vIDM1MGtCIHRvdGFsXG4gICAgICBcbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gYXdhaXQgYnVuZGxlT3B0aW1pemVyLmFuYWx5emVCdW5kbGVTaXplKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhbmFseXNpcy50b3RhbFNpemUpLnRvQmUoMzUwKTtcbiAgICAgIGV4cGVjdChhbmFseXNpcy5jb21wcmVzc2VkU2l6ZSkudG9CZSgyNDUpOyAvLyA3MCUgY29tcHJlc3Npb25cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXN0aW1hdGUgYnVuZGxlIHNpemUgZnJvbSBzb3VyY2UgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCcyMDAwMDBcXG4nKTsgLy8gMjAwa0Igc291cmNlIGNvZGVcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFuYWx5c2lzLnRvdGFsU2l6ZSkudG9CZSgyOTMpOyAvLyBNYXRoLnJvdW5kKDIwMDAwMCAvIDEwMjQgKiAxLjUpID0gMjkzXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBidW5kbGUgYW5hbHlzaXMgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFuYWx5c2lzLnRvdGFsU2l6ZSkudG9CZSg0MDApOyAvLyBDb25zZXJ2YXRpdmUgZXN0aW1hdGUgZmFsbGJhY2tcbiAgICAgIC8vIFRoZSBlcnJvciBpcyBjYXVnaHQgaW4gZXN0aW1hdGVCdW5kbGVTaXplLCBzbyByZWNvbW1lbmRhdGlvbnMgd2lsbCBiZSBnZW5lcmF0ZWQgbm9ybWFsbHlcbiAgICAgIGV4cGVjdChhbmFseXNpcy5yZWNvbW1lbmRhdGlvbnMpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlTGF6eUxvYWRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBsYXp5IGxvYWRpbmcgaW1wbGVtZW50YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRXhlY1N5bmNcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJzI1XFxuJykgLy8gMjUgY29tcG9uZW50c1xuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnMTBcXG4nKSAvLyAxMCBsYXp5IGxvYWRlZFxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnc3JjL2NvbXBvbmVudHMvTGFyZ2VDb21wb25lbnQudHN4XFxuc3JjL3BhZ2VzL0hlYXZ5UGFnZS50c3hcXG4nKSAvLyBwb3RlbnRpYWwgbGF6eSBjb21wb25lbnRzXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCcxNVxcbicpIC8vIHVzZUVmZmVjdCBjb3VudFxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnNVxcbicpOyAvLyB1c2VTV1IgY291bnRcbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGJ1bmRsZU9wdGltaXplci52YWxpZGF0ZUxhenlMb2FkaW5nKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmNvbXBvbmVudHNBbmFseXplZCkudG9CZSgyNSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5sYXp5TG9hZGVkQ29tcG9uZW50cykudG9CZSgxMCk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5zY29yZSkudG9CZSg0MCk7IC8vIDEwLzI1ICogMTAwXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5wb3RlbnRpYWxMYXp5Q29tcG9uZW50cykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZGF0YUZldGNoaW5nT3B0aW1pemF0aW9ucykudG9Db250YWluKCdDb25zaWRlciB1c2luZyBTV1Igb3IgUmVhY3QgUXVlcnkgZm9yIGRhdGEgZmV0Y2hpbmcgb3B0aW1pemF0aW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXp5IGxvYWRpbmcgdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWxpZGF0aW9uIGZhaWxlZCcpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBidW5kbGVPcHRpbWl6ZXIudmFsaWRhdGVMYXp5TG9hZGluZygpO1xuICAgICAgXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5jb21wb25lbnRzQW5hbHl6ZWQpLnRvQmUoMCk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5sYXp5TG9hZGVkQ29tcG9uZW50cykudG9CZSgwKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnNjb3JlKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYnVuZGxlIHNpemUgYWxlcnRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYWxlcnQgd2hlbiBidW5kbGUgc2l6ZSBleGNlZWRzIHRhcmdldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCc1MDAwMDBcXG4nKTsgLy8gTGFyZ2Ugc291cmNlIGNvZGUgcmVzdWx0aW5nIGluIDczMmtCIGJ1bmRsZVxuICAgICAgXG4gICAgICBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgYWxlcnRzID0gYnVuZGxlT3B0aW1pemVyLmdldEN1cnJlbnRBbGVydHMoKTtcbiAgICAgIGV4cGVjdChhbGVydHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNpemVBbGVydCA9IGFsZXJ0cy5maW5kKGFsZXJ0ID0+IGFsZXJ0LnR5cGUgPT09ICdzaXplX2V4Y2VlZGVkJyk7XG4gICAgICBleHBlY3Qoc2l6ZUFsZXJ0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHNpemVBbGVydD8uc2V2ZXJpdHkpLnRvQmUoJ2NyaXRpY2FsJyk7IC8vID4gNDIwICogMS4yXG4gICAgICBleHBlY3Qoc2l6ZUFsZXJ0Py5jdXJyZW50VmFsdWUpLnRvQmUoNzMyKTsgLy8gTWF0aC5yb3VuZCg1MDAwMDAgLyAxMDI0ICogMS41KSA9IDczMlxuICAgICAgZXhwZWN0KHNpemVBbGVydD8udGFyZ2V0VmFsdWUpLnRvQmUoNDIwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYWxlcnQgZm9yIGxhcmdlIGNodW5rcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXRoID09PSAnLm5leHQnIHx8IHBhdGggPT09ICcubmV4dC9zdGF0aWMvY2h1bmtzJztcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtb2NrRnMucmVhZGRpclN5bmMubW9ja1JldHVyblZhbHVlKFsnbGFyZ2UtY2h1bmsuanMnXSBhcyBhbnkpO1xuICAgICAgbW9ja0ZzLnN0YXRTeW5jLm1vY2tSZXR1cm5WYWx1ZSh7IHNpemU6IDE1MCAqIDEwMjQgfSBhcyBhbnkpOyAvLyAxNTBrQiBjaHVua1xuICAgICAgbW9ja0V4ZWNTeW5jLm1vY2tSZXR1cm5WYWx1ZSgnNDAwXFxuJyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGJ1bmRsZU9wdGltaXplci5hbmFseXplQnVuZGxlU2l6ZSgpO1xuICAgICAgXG4gICAgICBjb25zdCBhbGVydHMgPSBidW5kbGVPcHRpbWl6ZXIuZ2V0Q3VycmVudEFsZXJ0cygpO1xuICAgICAgY29uc3QgY2h1bmtBbGVydCA9IGFsZXJ0cy5maW5kKGFsZXJ0ID0+IGFsZXJ0LnR5cGUgPT09ICdjaHVua190b29fbGFyZ2UnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNodW5rQWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY2h1bmtBbGVydD8ubWVzc2FnZSkudG9Db250YWluKCdsYXJnZS1jaHVuay5qcycpO1xuICAgICAgZXhwZWN0KGNodW5rQWxlcnQ/LmN1cnJlbnRWYWx1ZSkudG9CZSgxNTApO1xuICAgICAgZXhwZWN0KGNodW5rQWxlcnQ/LnRhcmdldFZhbHVlKS50b0JlKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGFsZXJ0IGZvciB1bnVzZWQgZGVwZW5kZW5jaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKChwYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIHBhdGggPT09ICdwYWNrYWdlLmpzb24nO1xuICAgICAgfSk7XG4gICAgICBtb2NrRnMucmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZShKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAgICdsb2Rhc2gnOiAnXjQuMC4wJyxcbiAgICAgICAgICAnbW9tZW50JzogJ14yLjAuMCdcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCczMDAwMDBcXG4nKTsgLy8gU291cmNlIHNpemVcbiAgICAgIFxuICAgICAgYXdhaXQgYnVuZGxlT3B0aW1pemVyLmFuYWx5emVCdW5kbGVTaXplKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IGJ1bmRsZU9wdGltaXplci5nZXRDdXJyZW50QWxlcnRzKCk7XG4gICAgICBjb25zdCBkZXBBbGVydCA9IGFsZXJ0cy5maW5kKGFsZXJ0ID0+IGFsZXJ0LnR5cGUgPT09ICd1bnVzZWRfZGVwZW5kZW5jeScpO1xuICAgICAgXG4gICAgICBleHBlY3QoZGVwQWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGVwQWxlcnQ/Lm1lc3NhZ2UpLnRvQ29udGFpbignb3B0aW9uYWwgZGVwZW5kZW5jeScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVPcHRpbWl6YXRpb25SZXBvcnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb21wcmVoZW5zaXZlIG9wdGltaXphdGlvbiByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuICAgICAgbW9ja0V4ZWNTeW5jXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCcyODAwMDBcXG4nKSAvLyBTb3VyY2Ugc2l6ZSAoNDEwa0IgYnVuZGxlKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnMjBcXG4nKSAvLyBDb21wb25lbnRzXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCc4XFxuJykgLy8gTGF6eSBsb2FkZWRcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJ3NyYy9jb21wb25lbnRzL0hlYXZ5LnRzeFxcbicpIC8vIFBvdGVudGlhbCBsYXp5XG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCcxMFxcbicpIC8vIHVzZUVmZmVjdFxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnM1xcbicpOyAvLyB1c2VTV1JcbiAgICAgIFxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgYnVuZGxlT3B0aW1pemVyLmdlbmVyYXRlT3B0aW1pemF0aW9uUmVwb3J0KCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXBvcnQudGltZXN0YW1wKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICAgIGV4cGVjdChyZXBvcnQuYW5hbHlzaXMudG90YWxTaXplKS50b0JlKDQxMCk7IC8vIE1hdGgucm91bmQoMjgwMDAwIC8gMTAyNCAqIDEuNSkgPSA0MTBcbiAgICAgIGV4cGVjdChyZXBvcnQubGF6eUxvYWRpbmdWYWxpZGF0aW9uLnNjb3JlKS50b0JlKDQwKTsgLy8gOC8yMCAqIDEwMFxuICAgICAgZXhwZWN0KHJlcG9ydC5vdmVyYWxsU2NvcmUpLnRvQmUoNzApOyAvLyAoMTAwICsgNDApIC8gMlxuICAgICAgZXhwZWN0KHJlcG9ydC50YXJnZXRDb21wbGlhbmNlKS50b0JlKHRydWUpOyAvLyA0MTAgPD0gNDIwXG4gICAgICBleHBlY3QocmVwb3J0LnJlY29tbWVuZGF0aW9ucykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmRpY2F0ZSBub24tY29tcGxpYW5jZSB3aGVuIGJ1bmRsZSBleGNlZWRzIHRhcmdldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgICBtb2NrRXhlY1N5bmNcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJzM1MDAwMFxcbicpIC8vIFNvdXJjZSBzaXplICg1MTNrQiBidW5kbGUpXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCcxNVxcbicpIC8vIENvbXBvbmVudHNcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJzNcXG4nKSAvLyBMYXp5IGxvYWRlZFxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnJykgLy8gTm8gcG90ZW50aWFsIGxhenlcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJzVcXG4nKSAvLyB1c2VFZmZlY3RcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJzJcXG4nKTsgLy8gdXNlU1dSXG4gICAgICBcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IGJ1bmRsZU9wdGltaXplci5nZW5lcmF0ZU9wdGltaXphdGlvblJlcG9ydCgpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3J0LmFuYWx5c2lzLnRvdGFsU2l6ZSkudG9CZSg1MTMpOyAvLyBNYXRoLnJvdW5kKDM1MDAwMCAvIDEwMjQgKiAxLjUpID0gNTEzXG4gICAgICBleHBlY3QocmVwb3J0LnRhcmdldENvbXBsaWFuY2UpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnNbMF0pLnRvQ29udGFpbignUmVkdWNlIGJ1bmRsZSBzaXplIGJ5IDkza0InKTsgLy8gNTEzIC0gNDIwID0gOTNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Fzc2V0IGFuYWx5c2lzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBhc3NldHMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKChwYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIHBhdGggPT09ICdwdWJsaWMnO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgZ2V0QWxsRmlsZXMgbWV0aG9kIGJlaGF2aW9yXG4gICAgICBjb25zdCBtb2NrR2V0QWxsRmlsZXMgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFtcbiAgICAgICAgJ3B1YmxpYy9pbWFnZS5wbmcnLFxuICAgICAgICAncHVibGljL3N0eWxlLmNzcycsXG4gICAgICAgICdwdWJsaWMvc2NyaXB0LmpzJyxcbiAgICAgICAgJ3B1YmxpYy9mb250LndvZmYyJ1xuICAgICAgXSk7XG4gICAgICBcbiAgICAgIChidW5kbGVPcHRpbWl6ZXIgYXMgYW55KS5nZXRBbGxGaWxlcyA9IG1vY2tHZXRBbGxGaWxlcztcbiAgICAgIFxuICAgICAgbW9ja0ZzLnN0YXRTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHNpemVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgICAgICdwdWJsaWMvaW1hZ2UucG5nJzogMTAwICogMTAyNCwgLy8gMTAwa0JcbiAgICAgICAgICAncHVibGljL3N0eWxlLmNzcyc6IDIwICogMTAyNCwgIC8vIDIwa0JcbiAgICAgICAgICAncHVibGljL3NjcmlwdC5qcyc6IDUwICogMTAyNCwgIC8vIDUwa0JcbiAgICAgICAgICAncHVibGljL2ZvbnQud29mZjInOiAzMCAqIDEwMjQgIC8vIDMwa0JcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHsgc2l6ZTogc2l6ZXNbcGF0aF0gfHwgMTAyNCB9IGFzIGFueTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCczMDAwMDBcXG4nKTtcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFuYWx5c2lzLmFzc2V0cykudG9IYXZlTGVuZ3RoKDQpO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLmFzc2V0c1swXS5zaXplKS50b0JlKDEwMCk7IC8vIExhcmdlc3QgZmlyc3RcbiAgICAgIGV4cGVjdChhbmFseXNpcy5hc3NldHNbMF0udHlwZSkudG9CZSgnaW1hZ2UnKTtcbiAgICAgIGV4cGVjdChhbmFseXNpcy5hc3NldHMuZmluZChhID0+IGEudHlwZSA9PT0gJ2NzcycpKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLmFzc2V0cy5maW5kKGEgPT4gYS50eXBlID09PSAnanMnKSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChhbmFseXNpcy5hc3NldHMuZmluZChhID0+IGEudHlwZSA9PT0gJ2ZvbnQnKSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlcGVuZGVuY3kgYW5hbHlzaXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbmFseXplIGRlcGVuZGVuY2llcyBmb3IgYnVuZGxlIGltcGFjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXRoID09PSAncGFja2FnZS5qc29uJztcbiAgICAgIH0pO1xuICAgICAgbW9ja0ZzLnJlYWRGaWxlU3luYy5tb2NrUmV0dXJuVmFsdWUoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBkZXBlbmRlbmNpZXM6IHtcbiAgICAgICAgICAncmVhY3QnOiAnXjE4LjAuMCcsXG4gICAgICAgICAgJ3JlYWN0LWRvbSc6ICdeMTguMC4wJyxcbiAgICAgICAgICAnbG9kYXNoJzogJ140LjAuMCcsXG4gICAgICAgICAgJ2NoYXJ0LmpzJzogJ14zLjAuMCdcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCczMDAwMDBcXG4nKTtcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFuYWx5c2lzLmRlcGVuZGVuY2llcykudG9IYXZlTGVuZ3RoKDQpO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLmRlcGVuZGVuY2llc1swXS5uYW1lKS50b0JlKCdyZWFjdC1kb20nKTsgLy8gTGFyZ2VzdCBmaXJzdCAoMTMwa0IpXG4gICAgICBleHBlY3QoYW5hbHlzaXMuZGVwZW5kZW5jaWVzLmZpbmQoZCA9PiBkLm5hbWUgPT09ICdyZWFjdCcpPy51c2FnZSkudG9CZSgnY3JpdGljYWwnKTtcbiAgICAgIGV4cGVjdChhbmFseXNpcy5kZXBlbmRlbmNpZXMuZmluZChkID0+IGQubmFtZSA9PT0gJ2xvZGFzaCcpPy5hbHRlcm5hdGl2ZXMpLnRvQ29udGFpbigncmFtZGEgKGZ1bmN0aW9uYWwpJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhbGVydCBtYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFuYWdlIGFsZXJ0cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbml0aWFsQWxlcnRzID0gYnVuZGxlT3B0aW1pemVyLmdldEN1cnJlbnRBbGVydHMoKTtcbiAgICAgIGV4cGVjdChpbml0aWFsQWxlcnRzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBcbiAgICAgIC8vIFRyaWdnZXIgYWxlcnQgYnkgYW5hbHl6aW5nIGxhcmdlIGJ1bmRsZVxuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrUmV0dXJuVmFsdWUoJzUwMDAwMFxcbicpOyAvLyBMYXJnZSBidW5kbGVcbiAgICAgIFxuICAgICAgcmV0dXJuIGJ1bmRsZU9wdGltaXplci5hbmFseXplQnVuZGxlU2l6ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zdCBhbGVydHNBZnRlckFuYWx5c2lzID0gYnVuZGxlT3B0aW1pemVyLmdldEN1cnJlbnRBbGVydHMoKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0c0FmdGVyQW5hbHlzaXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIFxuICAgICAgICBidW5kbGVPcHRpbWl6ZXIuY2xlYXJBbGVydHMoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFsZXJ0c0FmdGVyQ2xlYXIgPSBidW5kbGVPcHRpbWl6ZXIuZ2V0Q3VycmVudEFsZXJ0cygpO1xuICAgICAgICBleHBlY3QoYWxlcnRzQWZ0ZXJDbGVhcikudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYXRhIGV4cG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBidW5kbGUgZGF0YSB0byBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZzLndyaXRlRmlsZVN5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgICBtb2NrRXhlY1N5bmNcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJzMwMDAwMFxcbicpIC8vIEJ1bmRsZSBhbmFseXNpc1xuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSgnMTVcXG4nKSAvLyBDb21wb25lbnRzXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCc1XFxuJykgLy8gTGF6eSBsb2FkZWRcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoJycpIC8vIFBvdGVudGlhbCBsYXp5XG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCc4XFxuJykgLy8gdXNlRWZmZWN0XG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKCczXFxuJyk7IC8vIHVzZVNXUlxuICAgICAgXG4gICAgICBhd2FpdCBidW5kbGVPcHRpbWl6ZXIuZXhwb3J0QnVuZGxlRGF0YSgnLi90ZXN0LWJ1bmRsZS1kYXRhLmpzb24nKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tGcy53cml0ZUZpbGVTeW5jKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJy4vdGVzdC1idW5kbGUtZGF0YS5qc29uJyxcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1widGltZXN0YW1wXCInKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4cG9ydCBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcy53cml0ZUZpbGVTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JpdGUgZmFpbGVkJyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBidW5kbGVPcHRpbWl6ZXIuZXhwb3J0QnVuZGxlRGF0YSgnLi90ZXN0LWJ1bmRsZS1kYXRhLmpzb24nKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ0ZhaWxlZCB0byBleHBvcnQgYnVuZGxlIGRhdGEnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2hlbHBlciBtZXRob2RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaWRlbnRpZnkgaGVhdnkgZGVwZW5kZW5jaWVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGlzSGVhdnkgPSAoYnVuZGxlT3B0aW1pemVyIGFzIGFueSkuaXNMaWtlbHlIZWF2eURlcGVuZGVuY3k7XG4gICAgICBcbiAgICAgIGV4cGVjdChpc0hlYXZ5KCdAY2hha3JhLXVpL3JlYWN0JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaXNIZWF2eSgncmVhY3QtdGFibGUnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChpc0hlYXZ5KCdjaGFydC1saWJyYXJ5JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaXNIZWF2eSgnc2ltcGxlLXV0aWwnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVzdGltYXRlIGRlcGVuZGVuY3kgc2l6ZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXN0aW1hdGVTaXplID0gKGJ1bmRsZU9wdGltaXplciBhcyBhbnkpLmVzdGltYXRlRGVwZW5kZW5jeVNpemU7XG4gICAgICBcbiAgICAgIGV4cGVjdChhd2FpdCBlc3RpbWF0ZVNpemUoJ3JlYWN0JykpLnRvQmUoNDUpO1xuICAgICAgZXhwZWN0KGF3YWl0IGVzdGltYXRlU2l6ZSgncmVhY3QtZG9tJykpLnRvQmUoMTMwKTtcbiAgICAgIGV4cGVjdChhd2FpdCBlc3RpbWF0ZVNpemUoJ3Vua25vd24tcGFja2FnZScpKS50b0JlKDIwKTsgLy8gRGVmYXVsdFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbmFseXplIGRlcGVuZGVuY3kgdXNhZ2UgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgYW5hbHl6ZVVzYWdlID0gKGJ1bmRsZU9wdGltaXplciBhcyBhbnkpLmFuYWx5emVEZXBlbmRlbmN5VXNhZ2U7XG4gICAgICBcbiAgICAgIGV4cGVjdChhbmFseXplVXNhZ2UoJ3JlYWN0JykpLnRvQmUoJ2NyaXRpY2FsJyk7XG4gICAgICBleHBlY3QoYW5hbHl6ZVVzYWdlKCdAY2hha3JhLXVpL3JlYWN0JykpLnRvQmUoJ2ltcG9ydGFudCcpO1xuICAgICAgZXhwZWN0KGFuYWx5emVVc2FnZSgnbG9kYXNoJykpLnRvQmUoJ29wdGlvbmFsJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1Z2dlc3QgYWx0ZXJuYXRpdmVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHN1Z2dlc3RBbHRlcm5hdGl2ZXMgPSAoYnVuZGxlT3B0aW1pemVyIGFzIGFueSkuc3VnZ2VzdEFsdGVybmF0aXZlcztcbiAgICAgIFxuICAgICAgZXhwZWN0KHN1Z2dlc3RBbHRlcm5hdGl2ZXMoJ2xvZGFzaCcpKS50b0NvbnRhaW4oJ3JhbWRhIChmdW5jdGlvbmFsKScpO1xuICAgICAgZXhwZWN0KHN1Z2dlc3RBbHRlcm5hdGl2ZXMoJ21vbWVudCcpKS50b0NvbnRhaW4oJ2RhdGUtZm5zIChzbWFsbGVyKScpO1xuICAgICAgZXhwZWN0KHN1Z2dlc3RBbHRlcm5hdGl2ZXMoJ3Vua25vd24tcGFja2FnZScpKS50b0VxdWFsKFtdKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=