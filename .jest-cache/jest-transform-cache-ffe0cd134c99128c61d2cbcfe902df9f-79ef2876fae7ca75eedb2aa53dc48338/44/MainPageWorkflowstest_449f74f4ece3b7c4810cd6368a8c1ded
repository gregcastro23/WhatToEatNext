0871386e67bf335165e0225920732561
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock all external dependencies for E2E simulation
jest.mock('next/navigation', () => ({
    useRouter: () => ({
        push: jest.fn(),
        back: jest.fn(),
        forward: jest.fn(),
        refresh: jest.fn(),
        replace: jest.fn(),
    }),
}));
jest.mock('@/contexts/AlchemicalContext/hooks');
jest.mock('@/hooks/useStatePreservation');
jest.mock('@/utils/logger', () => ({
    logger: {
        debug: jest.fn(),
        info: jest.fn(),
        warn: jest.fn(),
        error: jest.fn(),
    },
}));
// Mock realistic component behaviors for E2E testing
jest.mock('@/components/CuisineRecommender', () => {
    return function MockCuisineRecommender() {
        var _a;
        const [selectedCuisine, setSelectedCuisine] = react_1.default.useState(null);
        const [showRecipes, setShowRecipes] = react_1.default.useState(false);
        const cuisines = [
            {
                name: 'Italian',
                score: 95,
                recipes: ['Pasta Marinara', 'Risotto', 'Pizza Margherita'],
            },
            {
                name: 'Chinese',
                score: 88,
                recipes: ['Fried Rice', 'Sweet and Sour Pork', 'Kung Pao Chicken'],
            },
            {
                name: 'Mexican',
                score: 82,
                recipes: ['Tacos', 'Enchiladas', 'Guacamole'],
            },
            { name: 'Indian', score: 79, recipes: ['Curry', 'Biryani', 'Naan'] },
        ];
        const handleCuisineSelect = (cuisine) => {
            setSelectedCuisine(cuisine.name);
            setShowRecipes(true);
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'cuisine-recommender', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cuisine Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: 'cuisine-grid', children: cuisines.map(cuisine => ((0, jsx_runtime_1.jsx)("div", { className: 'cuisine-card', "data-testid": `cuisine-card-${cuisine.name.toLowerCase()}`, children: (0, jsx_runtime_1.jsxs)("button", { onClick: () => handleCuisineSelect(cuisine), className: selectedCuisine === cuisine.name ? 'selected' : '', "data-testid": `cuisine-${cuisine.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: cuisine.name }), (0, jsx_runtime_1.jsxs)("div", { className: 'score', children: ["Match: ", cuisine.score, "%"] })] }) }, cuisine.name))) }), showRecipes && selectedCuisine && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'recipe-recommendations', className: 'recipe-section', children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Recommended ", selectedCuisine, " Recipes"] }), (0, jsx_runtime_1.jsx)("div", { className: 'recipe-list', children: (_a = cuisines
                                .find(c => c.name === selectedCuisine)) === null || _a === void 0 ? void 0 : _a.recipes.map(recipe => ((0, jsx_runtime_1.jsx)("button", { "data-testid": `recipe-${recipe.toLowerCase().replace(/\s+/g, '-')}`, className: 'recipe-button', children: recipe }, recipe))) })] }))] }));
    };
});
jest.mock('@/components/IngredientRecommender', () => {
    return function MockIngredientRecommender({ maxDisplayed = 8, }) {
        const [selectedIngredients, setSelectedIngredients] = react_1.default.useState([]);
        const [expandedIngredient, setExpandedIngredient] = react_1.default.useState(null);
        const ingredients = [
            {
                name: 'Tomatoes',
                category: 'Vegetables',
                properties: ['Umami', 'Acidic', 'Fresh'],
            },
            {
                name: 'Onions',
                category: 'Vegetables',
                properties: ['Sweet', 'Pungent', 'Aromatic'],
            },
            {
                name: 'Garlic',
                category: 'Aromatics',
                properties: ['Pungent', 'Savory', 'Aromatic'],
            },
            {
                name: 'Basil',
                category: 'Herbs',
                properties: ['Fresh', 'Aromatic', 'Sweet'],
            },
            {
                name: 'Olive Oil',
                category: 'Oils',
                properties: ['Rich', 'Fruity', 'Smooth'],
            },
            {
                name: 'Cheese',
                category: 'Dairy',
                properties: ['Creamy', 'Salty', 'Rich'],
            },
            {
                name: 'Pasta',
                category: 'Grains',
                properties: ['Neutral', 'Filling', 'Versatile'],
            },
            {
                name: 'Chicken',
                category: 'Proteins',
                properties: ['Lean', 'Mild', 'Versatile'],
            },
        ];
        const displayedIngredients = ingredients.slice(0, maxDisplayed);
        const toggleIngredient = (ingredient) => {
            setSelectedIngredients(prev => prev.includes(ingredient)
                ? prev.filter(i => i !== ingredient)
                : [...prev, ingredient]);
        };
        const toggleExpanded = (ingredient) => {
            setExpandedIngredient(prev => (prev === ingredient ? null : ingredient));
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'ingredient-recommender', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Ingredient Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: 'ingredient-grid', children: displayedIngredients.map(ingredient => ((0, jsx_runtime_1.jsxs)("div", { className: 'ingredient-card', "data-testid": `ingredient-card-${ingredient.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => toggleIngredient(ingredient.name), className: selectedIngredients.includes(ingredient.name)
                                    ? 'selected'
                                    : '', "data-testid": `ingredient-${ingredient.name.toLowerCase()}`, children: ingredient.name }), (0, jsx_runtime_1.jsx)("button", { onClick: () => toggleExpanded(ingredient.name), "data-testid": `expand-${ingredient.name.toLowerCase()}`, className: 'expand-button', children: expandedIngredient === ingredient.name ? '▼' : '▶' }), expandedIngredient === ingredient.name && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": `details-${ingredient.name.toLowerCase()}`, className: 'ingredient-details', children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Category: ", ingredient.category] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Properties: ", ingredient.properties.join(', ')] })] }))] }, ingredient.name))) }), selectedIngredients.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'selected-ingredients-summary', className: 'selection-summary', children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Selected Ingredients (", selectedIngredients.length, ")"] }), (0, jsx_runtime_1.jsx)("div", { children: selectedIngredients.join(', ') })] }))] }));
    };
});
jest.mock('@/components/CookingMethodsSection', () => {
    return function MockCookingMethodsSection({ maxDisplayed = 6, onViewMore, }) {
        const [selectedMethod, setSelectedMethod] = react_1.default.useState(null);
        const methods = [
            {
                name: 'Sauté',
                time: '5-10 min',
                difficulty: 'Easy',
                description: 'Quick cooking in a pan with oil',
            },
            {
                name: 'Roast',
                time: '30-60 min',
                difficulty: 'Medium',
                description: 'Cooking in the oven with dry heat',
            },
            {
                name: 'Grill',
                time: '10-20 min',
                difficulty: 'Medium',
                description: 'Cooking over direct heat',
            },
            {
                name: 'Steam',
                time: '10-15 min',
                difficulty: 'Easy',
                description: 'Cooking with steam heat',
            },
            {
                name: 'Braise',
                time: '60-120 min',
                difficulty: 'Hard',
                description: 'Slow cooking with liquid',
            },
            {
                name: 'Stir-fry',
                time: '5-8 min',
                difficulty: 'Medium',
                description: 'Quick cooking while stirring',
            },
        ];
        const displayedMethods = methods.slice(0, maxDisplayed);
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'cooking-methods', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cooking Methods" }), (0, jsx_runtime_1.jsx)("div", { className: 'methods-grid', children: displayedMethods.map(method => ((0, jsx_runtime_1.jsxs)("div", { className: 'method-card', "data-testid": `method-card-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsxs)("button", { onClick: () => setSelectedMethod(method.name), className: selectedMethod === method.name ? 'selected' : '', "data-testid": `method-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: method.name }), (0, jsx_runtime_1.jsxs)("div", { className: 'method-info', children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Time: ", method.time] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Difficulty: ", method.difficulty] })] })] }), selectedMethod === method.name && ((0, jsx_runtime_1.jsx)("div", { "data-testid": `method-details-${method.name.toLowerCase()}`, className: 'method-details', children: (0, jsx_runtime_1.jsx)("p", { children: method.description }) }))] }, method.name))) }), (0, jsx_runtime_1.jsx)("button", { onClick: onViewMore, "data-testid": 'view-more-methods', className: 'view-more-button', children: "View All Cooking Methods" })] }));
    };
});
jest.mock('@/components/recipes/RecipeBuilderSimple', () => {
    return function MockRecipeBuilderSimple() {
        const [recipeName, setRecipeName] = react_1.default.useState('');
        const [ingredients, setIngredients] = react_1.default.useState([]);
        const [steps, setSteps] = react_1.default.useState([]);
        const [servings, setServings] = react_1.default.useState(4);
        const [prepTime, setPrepTime] = react_1.default.useState(15);
        const [cookTime, setCookTime] = react_1.default.useState(30);
        const addIngredient = () => {
            setIngredients(prev => [...prev, { name: '', quantity: '' }]);
        };
        const updateIngredient = (index, field, value) => {
            setIngredients(prev => prev.map((ing, i) => (i === index ? { ...ing, [field]: value } : ing)));
        };
        const removeIngredient = (index) => {
            setIngredients(prev => prev.filter((_, i) => i !== index));
        };
        const addStep = () => {
            setSteps(prev => [...prev, { instruction: '', timing: '' }]);
        };
        const updateStep = (index, field, value) => {
            setSteps(prev => prev.map((step, i) => i === index ? { ...step, [field]: value } : step));
        };
        const removeStep = (index) => {
            setSteps(prev => prev.filter((_, i) => i !== index));
        };
        const canSave = recipeName.trim() &&
            ingredients.some(ing => ing.name.trim()) &&
            steps.some(step => step.instruction.trim());
        const totalTime = prepTime + cookTime;
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": 'recipe-builder', children: [(0, jsx_runtime_1.jsx)("h3", { children: "Recipe Builder" }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-form', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'recipe-header', children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Recipe Name', value: recipeName, onChange: e => setRecipeName(e.target.value), "data-testid": 'recipe-name-input' }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-meta', children: [(0, jsx_runtime_1.jsx)("input", { type: 'number', value: servings, onChange: e => setServings(parseInt(e.target.value) || 1), "data-testid": 'servings-input', min: '1' }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: prepTime, onChange: e => setPrepTime(parseInt(e.target.value) || 0), "data-testid": 'prep-time-input', min: '0' }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: cookTime, onChange: e => setCookTime(parseInt(e.target.value) || 0), "data-testid": 'cook-time-input', min: '0' })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'ingredients-section', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Ingredients" }), (0, jsx_runtime_1.jsx)("button", { onClick: addIngredient, "data-testid": 'add-ingredient', children: "Add Ingredient" }), ingredients.map((ingredient, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'ingredient-row', "data-testid": `ingredient-row-${index}`, children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Quantity', value: ingredient.quantity, onChange: e => updateIngredient(index, 'quantity', e.target.value), "data-testid": `ingredient-quantity-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Ingredient name', value: ingredient.name, onChange: e => updateIngredient(index, 'name', e.target.value), "data-testid": `ingredient-name-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeIngredient(index), "data-testid": `remove-ingredient-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": 'ingredients-count', children: ["Ingredients: ", ingredients.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'steps-section', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Instructions" }), (0, jsx_runtime_1.jsx)("button", { onClick: addStep, "data-testid": 'add-step', children: "Add Step" }), steps.map((step, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'step-row', "data-testid": `step-row-${index}`, children: [(0, jsx_runtime_1.jsx)("span", { className: 'step-number', children: index + 1 }), (0, jsx_runtime_1.jsx)("textarea", { placeholder: 'Describe this step...', value: step.instruction, onChange: e => updateStep(index, 'instruction', e.target.value), "data-testid": `step-instruction-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: 'text', placeholder: 'Timing', value: step.timing, onChange: e => updateStep(index, 'timing', e.target.value), "data-testid": `step-timing-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeStep(index), "data-testid": `remove-step-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": 'steps-count', children: ["Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'recipe-summary', "data-testid": 'recipe-summary', children: [(0, jsx_runtime_1.jsx)("h4", { children: "Recipe Summary" }), (0, jsx_runtime_1.jsxs)("div", { children: ["Name: ", recipeName || 'Untitled Recipe'] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Servings: ", servings] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Total Time: ", totalTime, " minutes"] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Ingredients: ", ingredients.length] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsx)("button", { disabled: !canSave, "data-testid": 'save-recipe', className: canSave ? 'enabled' : 'disabled', children: "Save Recipe" })] })] }));
    };
});
/**
 * End-to-End Tests for Main Page Workflows
 *
 * These tests simulate complete user workflows on the main page,
 * testing the integration between all components and user interactions.
 *
 * Note: These tests use jsdom and testing-library to simulate E2E scenarios
 * without requiring a full browser environment.
 */
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const MainPageLayout_1 = __importDefault(require("@/components/layout/MainPageLayout"));
const hooks_1 = require("@/contexts/AlchemicalContext/hooks");
const useStatePreservation_1 = require("@/hooks/useStatePreservation");
describe('Main Page E2E Workflows', () => {
    const mockAlchemicalContext = {
        state: {
            astrologicalState: { sunSign: 'aries' },
            elementalState: { Fire: 0.3, Water: 0.2, Earth: 0.3, Air: 0.2 },
        },
        planetaryPositions: { sun: { sign: 'aries' } },
        isDaytime: true,
    };
    const mockNavigationState = {
        saveState: jest.fn(),
        getState: jest.fn(() => ({})),
    };
    const mockScrollPreservation = {
        restoreScrollPosition: jest.fn(),
    };
    beforeEach(() => {
        jest.clearAllMocks();
        hooks_1.useAlchemical.mockReturnValue(mockAlchemicalContext);
        useStatePreservation_1.useNavigationState.mockReturnValue(mockNavigationState);
        useStatePreservation_1.useScrollPreservation.mockReturnValue(mockScrollPreservation);
        useStatePreservation_1.useAutoStateCleanup.mockReturnValue(undefined);
        // Mock DOM methods
        Object.defineProperty(window, 'scrollY', { value: 0, writable: true });
        jest.spyOn(document, 'getElementById').mockImplementation(() => ({
            scrollIntoView: jest.fn(),
            style: {},
            classList: { add: jest.fn(), remove: jest.fn() },
        }));
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    it('completes full meal planning workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        // Wait for all components to load
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('cooking-methods')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Step 1: Select a cuisine
        const italianCuisine = react_2.screen.getByTestId('cuisine-italian');
        await user.click(italianCuisine);
        // Verify cuisine selection and recipe recommendations appear
        expect(react_2.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_2.screen.getByText('Recommended Italian Recipes')).toBeInTheDocument();
        // Step 2: Select ingredients
        const tomatoes = react_2.screen.getByTestId('ingredient-tomatoes');
        const basil = react_2.screen.getByTestId('ingredient-basil');
        const oliveOil = react_2.screen.getByTestId('ingredient-olive oil');
        await user.click(tomatoes);
        await user.click(basil);
        await user.click(oliveOil);
        // Verify ingredient selection
        expect(react_2.screen.getByTestId('selected-ingredients-summary')).toBeInTheDocument();
        expect(react_2.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        // Step 3: Select cooking method
        const sauteMethod = react_2.screen.getByTestId('method-sauté');
        await user.click(sauteMethod);
        // Verify method selection and details
        expect(react_2.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
        // Step 4: Build a recipe
        const recipeNameInput = react_2.screen.getByTestId('recipe-name-input');
        await user.type(recipeNameInput, 'Italian Tomato Basil Sauté');
        // Add ingredients to recipe
        const addIngredientButton = react_2.screen.getByTestId('add-ingredient');
        await user.click(addIngredientButton);
        await user.click(addIngredientButton);
        await user.click(addIngredientButton);
        // Fill in ingredient details
        await user.type(react_2.screen.getByTestId('ingredient-quantity-0'), '2 cups');
        await user.type(react_2.screen.getByTestId('ingredient-name-0'), 'Fresh Tomatoes');
        await user.type(react_2.screen.getByTestId('ingredient-quantity-1'), '1/4 cup');
        await user.type(react_2.screen.getByTestId('ingredient-name-1'), 'Fresh Basil');
        await user.type(react_2.screen.getByTestId('ingredient-quantity-2'), '2 tbsp');
        await user.type(react_2.screen.getByTestId('ingredient-name-2'), 'Olive Oil');
        // Add cooking steps
        const addStepButton = react_2.screen.getByTestId('add-step');
        await user.click(addStepButton);
        await user.click(addStepButton);
        await user.type(react_2.screen.getByTestId('step-instruction-0'), 'Heat olive oil in a large pan over medium heat');
        await user.type(react_2.screen.getByTestId('step-timing-0'), '2 min');
        await user.type(react_2.screen.getByTestId('step-instruction-1'), 'Add tomatoes and basil, sauté until tender');
        await user.type(react_2.screen.getByTestId('step-timing-1'), '8 min');
        // Verify recipe can be saved
        const saveButton = react_2.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        // Save the recipe
        await user.click(saveButton);
        // Verify the complete workflow
        expect(react_2.screen.getByDisplayValue('Italian Tomato Basil Sauté')).toBeInTheDocument();
        expect(react_2.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        expect(react_2.screen.getByText('Steps: 2')).toBeInTheDocument();
    });
    it('handles ingredient exploration workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
        });
        // Expand ingredient details
        const expandTomatoes = react_2.screen.getByTestId('expand-tomatoes');
        await user.click(expandTomatoes);
        // Verify details are shown
        expect(react_2.screen.getByTestId('details-tomatoes')).toBeInTheDocument();
        expect(react_2.screen.getByText('Category: Vegetables')).toBeInTheDocument();
        expect(react_2.screen.getByText('Properties: Umami, Acidic, Fresh')).toBeInTheDocument();
        // Expand another ingredient
        const expandGarlic = react_2.screen.getByTestId('expand-garlic');
        await user.click(expandGarlic);
        expect(react_2.screen.getByTestId('details-garlic')).toBeInTheDocument();
        expect(react_2.screen.getByText('Category: Aromatics')).toBeInTheDocument();
        // Collapse first ingredient
        await user.click(expandTomatoes);
        expect(react_2.screen.queryByTestId('details-tomatoes')).not.toBeInTheDocument();
        // Select multiple ingredients
        await user.click(react_2.screen.getByTestId('ingredient-tomatoes'));
        await user.click(react_2.screen.getByTestId('ingredient-garlic'));
        await user.click(react_2.screen.getByTestId('ingredient-basil'));
        // Verify selection summary
        expect(react_2.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        expect(react_2.screen.getByText('Tomatoes, Garlic, Basil')).toBeInTheDocument();
    });
    it('handles cooking method exploration workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('cooking-methods')).toBeInTheDocument();
        });
        // Select different cooking methods and view details
        const roastMethod = react_2.screen.getByTestId('method-roast');
        await user.click(roastMethod);
        expect(react_2.screen.getByTestId('method-details-roast')).toBeInTheDocument();
        expect(react_2.screen.getByText('Cooking in the oven with dry heat')).toBeInTheDocument();
        // Switch to another method
        const grillMethod = react_2.screen.getByTestId('method-grill');
        await user.click(grillMethod);
        expect(react_2.screen.getByTestId('method-details-grill')).toBeInTheDocument();
        expect(react_2.screen.getByText('Cooking over direct heat')).toBeInTheDocument();
        // Previous method details should be hidden
        expect(react_2.screen.queryByTestId('method-details-roast')).not.toBeInTheDocument();
        // Test view more functionality
        const viewMoreButton = react_2.screen.getByTestId('view-more-methods');
        expect(viewMoreButton).toBeInTheDocument();
    });
    it('handles complete recipe creation workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Create a complete recipe from scratch
        const recipeNameInput = react_2.screen.getByTestId('recipe-name-input');
        await user.type(recipeNameInput, 'Mediterranean Chicken');
        // Update recipe metadata
        const servingsInput = react_2.screen.getByTestId('servings-input');
        const prepTimeInput = react_2.screen.getByTestId('prep-time-input');
        const cookTimeInput = react_2.screen.getByTestId('cook-time-input');
        await user.clear(servingsInput);
        await user.type(servingsInput, '6');
        await user.clear(prepTimeInput);
        await user.type(prepTimeInput, '20');
        await user.clear(cookTimeInput);
        await user.type(cookTimeInput, '45');
        // Add multiple ingredients
        for (let i = 0; i < 4; i++) {
            await user.click(react_2.screen.getByTestId('add-ingredient'));
        }
        const ingredients = [
            { quantity: '2 lbs', name: 'Chicken Breast' },
            { quantity: '1 cup', name: 'Cherry Tomatoes' },
            { quantity: '1/2 cup', name: 'Kalamata Olives' },
            { quantity: '1/4 cup', name: 'Olive Oil' },
        ];
        for (let i = 0; i < ingredients.length; i++) {
            await user.type(react_2.screen.getByTestId(`ingredient-quantity-${i}`), ingredients[i].quantity);
            await user.type(react_2.screen.getByTestId(`ingredient-name-${i}`), ingredients[i].name);
        }
        // Add cooking steps
        for (let i = 0; i < 3; i++) {
            await user.click(react_2.screen.getByTestId('add-step'));
        }
        const steps = [
            {
                instruction: 'Preheat oven to 375°F and prepare chicken',
                timing: '5 min',
            },
            {
                instruction: 'Sear chicken in olive oil until golden',
                timing: '10 min',
            },
            {
                instruction: 'Add tomatoes and olives, bake until done',
                timing: '30 min',
            },
        ];
        for (let i = 0; i < steps.length; i++) {
            await user.type(react_2.screen.getByTestId(`step-instruction-${i}`), steps[i].instruction);
            await user.type(react_2.screen.getByTestId(`step-timing-${i}`), steps[i].timing);
        }
        // Verify recipe summary
        const summary = react_2.screen.getByTestId('recipe-summary');
        expect(summary).toHaveTextContent('Name: Mediterranean Chicken');
        expect(summary).toHaveTextContent('Servings: 6');
        expect(summary).toHaveTextContent('Total Time: 65 minutes');
        expect(summary).toHaveTextContent('Ingredients: 4');
        expect(summary).toHaveTextContent('Steps: 3');
        // Verify save button is enabled
        const saveButton = react_2.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        expect(saveButton).toHaveClass('enabled');
        // Test ingredient removal
        await user.click(react_2.screen.getByTestId('remove-ingredient-3'));
        expect(react_2.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        // Test step removal
        await user.click(react_2.screen.getByTestId('remove-step-0'));
        expect(react_2.screen.getByText('Steps: 2')).toBeInTheDocument();
        // Verify step renumbering
        expect(react_2.screen.getByDisplayValue('Sear chicken in olive oil until golden')).toBeInTheDocument();
    });
    it('handles navigation and state preservation workflow', async () => {
        const user = user_event_1.default.setup();
        const mockOnSectionNavigate = jest.fn();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, { onSectionNavigate: mockOnSectionNavigate }));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
        });
        // Make selections across different components
        await user.click(react_2.screen.getByTestId('cuisine-italian'));
        await user.click(react_2.screen.getByTestId('ingredient-tomatoes'));
        await user.click(react_2.screen.getByTestId('method-sauté'));
        // Navigate between sections
        const cuisineNavButton = react_2.screen.getByText('Cuisine Recommendations');
        await user.click(cuisineNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('cuisine');
        const ingredientsNavButton = react_2.screen.getByText('Ingredient Recommendations');
        await user.click(ingredientsNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('ingredients');
        // Verify state preservation was called
        await (0, react_2.waitFor)(() => {
            expect(mockNavigationState.saveState).toHaveBeenCalled();
        });
        // Verify selections are maintained after navigation
        expect(react_2.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_2.screen.getByText('Selected Ingredients (1)')).toBeInTheDocument();
        expect(react_2.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
    });
    it('handles error recovery workflow', async () => {
        const user = user_event_1.default.setup();
        // Mock console.error to avoid noise
        const consoleSpy = jest
            .spyOn(console, 'error')
            .mockImplementation(() => { });
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Simulate user creating a recipe and encountering an error
        const recipeNameInput = react_2.screen.getByTestId('recipe-name-input');
        await user.type(recipeNameInput, 'Test Recipe');
        // Add ingredient
        await user.click(react_2.screen.getByTestId('add-ingredient'));
        await user.type(react_2.screen.getByTestId('ingredient-name-0'), 'Test Ingredient');
        // Add step
        await user.click(react_2.screen.getByTestId('add-step'));
        await user.type(react_2.screen.getByTestId('step-instruction-0'), 'Test step');
        // Verify recipe is valid
        expect(react_2.screen.getByTestId('save-recipe')).toBeEnabled();
        // The main page should continue to function despite any errors
        expect(react_2.screen.getByText('What to Eat Next')).toBeInTheDocument();
        expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        consoleSpy.mockRestore();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vZTJlL01haW5QYWdlV29ya2Zsb3dzLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQTJCQSxvREFBb0Q7QUFDcEQsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNuQixDQUFDO0NBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7QUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUU7UUFDTixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDakI7Q0FDRixDQUFDLENBQUMsQ0FBQztBQUVKLHFEQUFxRDtBQUNyRCxJQUFJLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtJQUNoRCxPQUFPLFNBQVMsc0JBQXNCOztRQUNwQyxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsZUFBSyxDQUFDLFFBQVEsQ0FD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LENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDaEUsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUVoRCxpQkFBaUI7UUFDakIsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFNLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUU1RSxXQUFXO1FBQ1gsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztRQUNqRCxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBRXZFLHlCQUF5QjtRQUN6QixNQUFNLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRXhELCtEQUErRDtRQUMvRCxNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNqRSxNQUFNLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUVqRSxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDM0IsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL19fdGVzdHNfXy9lMmUvTWFpblBhZ2VXb3JrZmxvd3MudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmQtdG8tRW5kIFRlc3RzIGZvciBNYWluIFBhZ2UgV29ya2Zsb3dzXG4gKlxuICogVGhlc2UgdGVzdHMgc2ltdWxhdGUgY29tcGxldGUgdXNlciB3b3JrZmxvd3Mgb24gdGhlIG1haW4gcGFnZSxcbiAqIHRlc3RpbmcgdGhlIGludGVncmF0aW9uIGJldHdlZW4gYWxsIGNvbXBvbmVudHMgYW5kIHVzZXIgaW50ZXJhY3Rpb25zLlxuICpcbiAqIE5vdGU6IFRoZXNlIHRlc3RzIHVzZSBqc2RvbSBhbmQgdGVzdGluZy1saWJyYXJ5IHRvIHNpbXVsYXRlIEUyRSBzY2VuYXJpb3NcbiAqIHdpdGhvdXQgcmVxdWlyaW5nIGEgZnVsbCBicm93c2VyIGVudmlyb25tZW50LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICByZW5kZXIsXG4gIHNjcmVlbixcbiAgZmlyZUV2ZW50LFxuICB3YWl0Rm9yLFxuICBhY3QsXG59IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IE1haW5QYWdlTGF5b3V0IGZyb20gJ0AvY29tcG9uZW50cy9sYXlvdXQvTWFpblBhZ2VMYXlvdXQnO1xuaW1wb3J0IHsgdXNlQWxjaGVtaWNhbCB9IGZyb20gJ0AvY29udGV4dHMvQWxjaGVtaWNhbENvbnRleHQvaG9va3MnO1xuaW1wb3J0IHtcbiAgdXNlTmF2aWdhdGlvblN0YXRlLFxuICB1c2VTY3JvbGxQcmVzZXJ2YXRpb24sXG4gIHVzZUF1dG9TdGF0ZUNsZWFudXAsXG59IGZyb20gJ0AvaG9va3MvdXNlU3RhdGVQcmVzZXJ2YXRpb24nO1xuXG4vLyBNb2NrIGFsbCBleHRlcm5hbCBkZXBlbmRlbmNpZXMgZm9yIEUyRSBzaW11bGF0aW9uXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogKCkgPT4gKHtcbiAgICBwdXNoOiBqZXN0LmZuKCksXG4gICAgYmFjazogamVzdC5mbigpLFxuICAgIGZvcndhcmQ6IGplc3QuZm4oKSxcbiAgICByZWZyZXNoOiBqZXN0LmZuKCksXG4gICAgcmVwbGFjZTogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJyk7XG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlU3RhdGVQcmVzZXJ2YXRpb24nKTtcbmplc3QubW9jaygnQC91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dnZXI6IHtcbiAgICBkZWJ1ZzogamVzdC5mbigpLFxuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICB3YXJuOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayByZWFsaXN0aWMgY29tcG9uZW50IGJlaGF2aW9ycyBmb3IgRTJFIHRlc3Rpbmdcbmplc3QubW9jaygnQC9jb21wb25lbnRzL0N1aXNpbmVSZWNvbW1lbmRlcicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tDdWlzaW5lUmVjb21tZW5kZXIoKSB7XG4gICAgY29uc3QgW3NlbGVjdGVkQ3Vpc2luZSwgc2V0U2VsZWN0ZWRDdWlzaW5lXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgY29uc3QgW3Nob3dSZWNpcGVzLCBzZXRTaG93UmVjaXBlc10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBjdWlzaW5lcyA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0l0YWxpYW4nLFxuICAgICAgICBzY29yZTogOTUsXG4gICAgICAgIHJlY2lwZXM6IFsnUGFzdGEgTWFyaW5hcmEnLCAnUmlzb3R0bycsICdQaXp6YSBNYXJnaGVyaXRhJ10sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnQ2hpbmVzZScsXG4gICAgICAgIHNjb3JlOiA4OCxcbiAgICAgICAgcmVjaXBlczogWydGcmllZCBSaWNlJywgJ1N3ZWV0IGFuZCBTb3VyIFBvcmsnLCAnS3VuZyBQYW8gQ2hpY2tlbiddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ01leGljYW4nLFxuICAgICAgICBzY29yZTogODIsXG4gICAgICAgIHJlY2lwZXM6IFsnVGFjb3MnLCAnRW5jaGlsYWRhcycsICdHdWFjYW1vbGUnXSxcbiAgICAgIH0sXG4gICAgICB7IG5hbWU6ICdJbmRpYW4nLCBzY29yZTogNzksIHJlY2lwZXM6IFsnQ3VycnknLCAnQmlyeWFuaScsICdOYWFuJ10gfSxcbiAgICBdO1xuXG4gICAgY29uc3QgaGFuZGxlQ3Vpc2luZVNlbGVjdCA9IChjdWlzaW5lOiBhbnkpID0+IHtcbiAgICAgIHNldFNlbGVjdGVkQ3Vpc2luZShjdWlzaW5lLm5hbWUpO1xuICAgICAgc2V0U2hvd1JlY2lwZXModHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdjdWlzaW5lLXJlY29tbWVuZGVyJz5cbiAgICAgICAgPGgzPkN1aXNpbmUgUmVjb21tZW5kYXRpb25zPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2N1aXNpbmUtZ3JpZCc+XG4gICAgICAgICAge2N1aXNpbmVzLm1hcChjdWlzaW5lID0+IChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAga2V5PXtjdWlzaW5lLm5hbWV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nY3Vpc2luZS1jYXJkJ1xuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGN1aXNpbmUtY2FyZC0ke2N1aXNpbmUubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVDdWlzaW5lU2VsZWN0KGN1aXNpbmUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2VsZWN0ZWRDdWlzaW5lID09PSBjdWlzaW5lLm5hbWUgPyAnc2VsZWN0ZWQnIDogJyd9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BjdWlzaW5lLSR7Y3Vpc2luZS5uYW1lLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxoND57Y3Vpc2luZS5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Njb3JlJz5NYXRjaDoge2N1aXNpbmUuc2NvcmV9JTwvZGl2PlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7c2hvd1JlY2lwZXMgJiYgc2VsZWN0ZWRDdWlzaW5lICYmIChcbiAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdyZWNpcGUtcmVjb21tZW5kYXRpb25zJyBjbGFzc05hbWU9J3JlY2lwZS1zZWN0aW9uJz5cbiAgICAgICAgICAgIDxoND5SZWNvbW1lbmRlZCB7c2VsZWN0ZWRDdWlzaW5lfSBSZWNpcGVzPC9oND5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNpcGUtbGlzdCc+XG4gICAgICAgICAgICAgIHtjdWlzaW5lc1xuICAgICAgICAgICAgICAgIC5maW5kKGMgPT4gYy5uYW1lID09PSBzZWxlY3RlZEN1aXNpbmUpXG4gICAgICAgICAgICAgICAgPy5yZWNpcGVzLm1hcChyZWNpcGUgPT4gKFxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBrZXk9e3JlY2lwZX1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2ByZWNpcGUtJHtyZWNpcGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyl9YH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdyZWNpcGUtYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7cmVjaXBlfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG59KTtcblxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvSW5ncmVkaWVudFJlY29tbWVuZGVyJywgKCkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gTW9ja0luZ3JlZGllbnRSZWNvbW1lbmRlcih7XG4gICAgbWF4RGlzcGxheWVkID0gOCxcbiAgfToge1xuICAgIG1heERpc3BsYXllZD86IG51bWJlcjtcbiAgfSkge1xuICAgIGNvbnN0IFtzZWxlY3RlZEluZ3JlZGllbnRzLCBzZXRTZWxlY3RlZEluZ3JlZGllbnRzXSA9IFJlYWN0LnVzZVN0YXRlPFxuICAgICAgc3RyaW5nW11cbiAgICA+KFtdKTtcbiAgICBjb25zdCBbZXhwYW5kZWRJbmdyZWRpZW50LCBzZXRFeHBhbmRlZEluZ3JlZGllbnRdID0gUmVhY3QudXNlU3RhdGU8XG4gICAgICBzdHJpbmcgfCBudWxsXG4gICAgPihudWxsKTtcblxuICAgIGNvbnN0IGluZ3JlZGllbnRzID0gW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnVG9tYXRvZXMnLFxuICAgICAgICBjYXRlZ29yeTogJ1ZlZ2V0YWJsZXMnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbJ1VtYW1pJywgJ0FjaWRpYycsICdGcmVzaCddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ09uaW9ucycsXG4gICAgICAgIGNhdGVnb3J5OiAnVmVnZXRhYmxlcycsXG4gICAgICAgIHByb3BlcnRpZXM6IFsnU3dlZXQnLCAnUHVuZ2VudCcsICdBcm9tYXRpYyddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dhcmxpYycsXG4gICAgICAgIGNhdGVnb3J5OiAnQXJvbWF0aWNzJyxcbiAgICAgICAgcHJvcGVydGllczogWydQdW5nZW50JywgJ1Nhdm9yeScsICdBcm9tYXRpYyddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0Jhc2lsJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdIZXJicycsXG4gICAgICAgIHByb3BlcnRpZXM6IFsnRnJlc2gnLCAnQXJvbWF0aWMnLCAnU3dlZXQnXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdPbGl2ZSBPaWwnLFxuICAgICAgICBjYXRlZ29yeTogJ09pbHMnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbJ1JpY2gnLCAnRnJ1aXR5JywgJ1Ntb290aCddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0NoZWVzZScsXG4gICAgICAgIGNhdGVnb3J5OiAnRGFpcnknLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbJ0NyZWFteScsICdTYWx0eScsICdSaWNoJ10sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnUGFzdGEnLFxuICAgICAgICBjYXRlZ29yeTogJ0dyYWlucycsXG4gICAgICAgIHByb3BlcnRpZXM6IFsnTmV1dHJhbCcsICdGaWxsaW5nJywgJ1ZlcnNhdGlsZSddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0NoaWNrZW4nLFxuICAgICAgICBjYXRlZ29yeTogJ1Byb3RlaW5zJyxcbiAgICAgICAgcHJvcGVydGllczogWydMZWFuJywgJ01pbGQnLCAnVmVyc2F0aWxlJ10sXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBjb25zdCBkaXNwbGF5ZWRJbmdyZWRpZW50cyA9IGluZ3JlZGllbnRzLnNsaWNlKDAsIG1heERpc3BsYXllZCk7XG5cbiAgICBjb25zdCB0b2dnbGVJbmdyZWRpZW50ID0gKGluZ3JlZGllbnQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWRJbmdyZWRpZW50cyhwcmV2ID0+XG4gICAgICAgIHByZXYuaW5jbHVkZXMoaW5ncmVkaWVudClcbiAgICAgICAgICA/IHByZXYuZmlsdGVyKGkgPT4gaSAhPT0gaW5ncmVkaWVudClcbiAgICAgICAgICA6IFsuLi5wcmV2LCBpbmdyZWRpZW50XVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdG9nZ2xlRXhwYW5kZWQgPSAoaW5ncmVkaWVudDogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRFeHBhbmRlZEluZ3JlZGllbnQocHJldiA9PiAocHJldiA9PT0gaW5ncmVkaWVudCA/IG51bGwgOiBpbmdyZWRpZW50KSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdpbmdyZWRpZW50LXJlY29tbWVuZGVyJz5cbiAgICAgICAgPGgzPkluZ3JlZGllbnQgUmVjb21tZW5kYXRpb25zPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2luZ3JlZGllbnQtZ3JpZCc+XG4gICAgICAgICAge2Rpc3BsYXllZEluZ3JlZGllbnRzLm1hcChpbmdyZWRpZW50ID0+IChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAga2V5PXtpbmdyZWRpZW50Lm5hbWV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0naW5ncmVkaWVudC1jYXJkJ1xuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtY2FyZC0ke2luZ3JlZGllbnQubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVJbmdyZWRpZW50KGluZ3JlZGllbnQubmFtZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHMuaW5jbHVkZXMoaW5ncmVkaWVudC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICA/ICdzZWxlY3RlZCdcbiAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVFeHBhbmRlZChpbmdyZWRpZW50Lm5hbWUpfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZXhwYW5kLSR7aW5ncmVkaWVudC5uYW1lLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2V4cGFuZC1idXR0b24nXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZXhwYW5kZWRJbmdyZWRpZW50ID09PSBpbmdyZWRpZW50Lm5hbWUgPyAn4pa8JyA6ICfilrYnfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICB7ZXhwYW5kZWRJbmdyZWRpZW50ID09PSBpbmdyZWRpZW50Lm5hbWUgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZGV0YWlscy0ke2luZ3JlZGllbnQubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2luZ3JlZGllbnQtZGV0YWlscydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2PkNhdGVnb3J5OiB7aW5ncmVkaWVudC5jYXRlZ29yeX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+UHJvcGVydGllczoge2luZ3JlZGllbnQucHJvcGVydGllcy5qb2luKCcsICcpfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtzZWxlY3RlZEluZ3JlZGllbnRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdzZWxlY3RlZC1pbmdyZWRpZW50cy1zdW1tYXJ5J1xuICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWxlY3Rpb24tc3VtbWFyeSdcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aDQ+U2VsZWN0ZWQgSW5ncmVkaWVudHMgKHtzZWxlY3RlZEluZ3JlZGllbnRzLmxlbmd0aH0pPC9oND5cbiAgICAgICAgICAgIDxkaXY+e3NlbGVjdGVkSW5ncmVkaWVudHMuam9pbignLCAnKX08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG59KTtcblxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvQ29va2luZ01ldGhvZHNTZWN0aW9uJywgKCkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gTW9ja0Nvb2tpbmdNZXRob2RzU2VjdGlvbih7XG4gICAgbWF4RGlzcGxheWVkID0gNixcbiAgICBvblZpZXdNb3JlLFxuICB9OiB7XG4gICAgbWF4RGlzcGxheWVkPzogbnVtYmVyO1xuICAgIG9uVmlld01vcmU/OiAoKSA9PiB2b2lkO1xuICB9KSB7XG4gICAgY29uc3QgW3NlbGVjdGVkTWV0aG9kLCBzZXRTZWxlY3RlZE1ldGhvZF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihcbiAgICAgIG51bGxcbiAgICApO1xuXG4gICAgY29uc3QgbWV0aG9kcyA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1NhdXTDqScsXG4gICAgICAgIHRpbWU6ICc1LTEwIG1pbicsXG4gICAgICAgIGRpZmZpY3VsdHk6ICdFYXN5JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdRdWljayBjb29raW5nIGluIGEgcGFuIHdpdGggb2lsJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdSb2FzdCcsXG4gICAgICAgIHRpbWU6ICczMC02MCBtaW4nLFxuICAgICAgICBkaWZmaWN1bHR5OiAnTWVkaXVtJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb29raW5nIGluIHRoZSBvdmVuIHdpdGggZHJ5IGhlYXQnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0dyaWxsJyxcbiAgICAgICAgdGltZTogJzEwLTIwIG1pbicsXG4gICAgICAgIGRpZmZpY3VsdHk6ICdNZWRpdW0nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Nvb2tpbmcgb3ZlciBkaXJlY3QgaGVhdCcsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnU3RlYW0nLFxuICAgICAgICB0aW1lOiAnMTAtMTUgbWluJyxcbiAgICAgICAgZGlmZmljdWx0eTogJ0Vhc3knLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Nvb2tpbmcgd2l0aCBzdGVhbSBoZWF0JyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdCcmFpc2UnLFxuICAgICAgICB0aW1lOiAnNjAtMTIwIG1pbicsXG4gICAgICAgIGRpZmZpY3VsdHk6ICdIYXJkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdTbG93IGNvb2tpbmcgd2l0aCBsaXF1aWQnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1N0aXItZnJ5JyxcbiAgICAgICAgdGltZTogJzUtOCBtaW4nLFxuICAgICAgICBkaWZmaWN1bHR5OiAnTWVkaXVtJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdRdWljayBjb29raW5nIHdoaWxlIHN0aXJyaW5nJyxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IGRpc3BsYXllZE1ldGhvZHMgPSBtZXRob2RzLnNsaWNlKDAsIG1heERpc3BsYXllZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD0nY29va2luZy1tZXRob2RzJz5cbiAgICAgICAgPGgzPkNvb2tpbmcgTWV0aG9kczwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZXRob2RzLWdyaWQnPlxuICAgICAgICAgIHtkaXNwbGF5ZWRNZXRob2RzLm1hcChtZXRob2QgPT4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBrZXk9e21ldGhvZC5uYW1lfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J21ldGhvZC1jYXJkJ1xuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YG1ldGhvZC1jYXJkLSR7bWV0aG9kLm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRNZXRob2QobWV0aG9kLm5hbWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2VsZWN0ZWRNZXRob2QgPT09IG1ldGhvZC5uYW1lID8gJ3NlbGVjdGVkJyA6ICcnfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbWV0aG9kLSR7bWV0aG9kLm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGg0PnttZXRob2QubmFtZX08L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZXRob2QtaW5mbyc+XG4gICAgICAgICAgICAgICAgICA8ZGl2PlRpbWU6IHttZXRob2QudGltZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+RGlmZmljdWx0eToge21ldGhvZC5kaWZmaWN1bHR5fTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICB7c2VsZWN0ZWRNZXRob2QgPT09IG1ldGhvZC5uYW1lICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YG1ldGhvZC1kZXRhaWxzLSR7bWV0aG9kLm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtZXRob2QtZGV0YWlscydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8cD57bWV0aG9kLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17b25WaWV3TW9yZX1cbiAgICAgICAgICBkYXRhLXRlc3RpZD0ndmlldy1tb3JlLW1ldGhvZHMnXG4gICAgICAgICAgY2xhc3NOYW1lPSd2aWV3LW1vcmUtYnV0dG9uJ1xuICAgICAgICA+XG4gICAgICAgICAgVmlldyBBbGwgQ29va2luZyBNZXRob2RzXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn0pO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9yZWNpcGVzL1JlY2lwZUJ1aWxkZXJTaW1wbGUnLCAoKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBNb2NrUmVjaXBlQnVpbGRlclNpbXBsZSgpIHtcbiAgICBjb25zdCBbcmVjaXBlTmFtZSwgc2V0UmVjaXBlTmFtZV0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW2luZ3JlZGllbnRzLCBzZXRJbmdyZWRpZW50c10gPSBSZWFjdC51c2VTdGF0ZTxcbiAgICAgIEFycmF5PHsgbmFtZTogc3RyaW5nOyBxdWFudGl0eTogc3RyaW5nIH0+XG4gICAgPihbXSk7XG4gICAgY29uc3QgW3N0ZXBzLCBzZXRTdGVwc10gPSBSZWFjdC51c2VTdGF0ZTxcbiAgICAgIEFycmF5PHsgaW5zdHJ1Y3Rpb246IHN0cmluZzsgdGltaW5nOiBzdHJpbmcgfT5cbiAgICA+KFtdKTtcbiAgICBjb25zdCBbc2VydmluZ3MsIHNldFNlcnZpbmdzXSA9IFJlYWN0LnVzZVN0YXRlKDQpO1xuICAgIGNvbnN0IFtwcmVwVGltZSwgc2V0UHJlcFRpbWVdID0gUmVhY3QudXNlU3RhdGUoMTUpO1xuICAgIGNvbnN0IFtjb29rVGltZSwgc2V0Q29va1RpbWVdID0gUmVhY3QudXNlU3RhdGUoMzApO1xuXG4gICAgY29uc3QgYWRkSW5ncmVkaWVudCA9ICgpID0+IHtcbiAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gWy4uLnByZXYsIHsgbmFtZTogJycsIHF1YW50aXR5OiAnJyB9XSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHVwZGF0ZUluZ3JlZGllbnQgPSAoXG4gICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgZmllbGQ6ICduYW1lJyB8ICdxdWFudGl0eScsXG4gICAgICB2YWx1ZTogc3RyaW5nXG4gICAgKSA9PiB7XG4gICAgICBzZXRJbmdyZWRpZW50cyhwcmV2ID0+XG4gICAgICAgIHByZXYubWFwKChpbmcsIGkpID0+IChpID09PSBpbmRleCA/IHsgLi4uaW5nLCBbZmllbGRdOiB2YWx1ZSB9IDogaW5nKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZUluZ3JlZGllbnQgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgc2V0SW5ncmVkaWVudHMocHJldiA9PiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkU3RlcCA9ICgpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT4gWy4uLnByZXYsIHsgaW5zdHJ1Y3Rpb246ICcnLCB0aW1pbmc6ICcnIH1dKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlU3RlcCA9IChcbiAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICBmaWVsZDogJ2luc3RydWN0aW9uJyB8ICd0aW1pbmcnLFxuICAgICAgdmFsdWU6IHN0cmluZ1xuICAgICkgPT4ge1xuICAgICAgc2V0U3RlcHMocHJldiA9PlxuICAgICAgICBwcmV2Lm1hcCgoc3RlcCwgaSkgPT5cbiAgICAgICAgICBpID09PSBpbmRleCA/IHsgLi4uc3RlcCwgW2ZpZWxkXTogdmFsdWUgfSA6IHN0ZXBcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlU3RlcCA9IChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICBzZXRTdGVwcyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCkpO1xuICAgIH07XG5cbiAgICBjb25zdCBjYW5TYXZlID1cbiAgICAgIHJlY2lwZU5hbWUudHJpbSgpICYmXG4gICAgICBpbmdyZWRpZW50cy5zb21lKGluZyA9PiBpbmcubmFtZS50cmltKCkpICYmXG4gICAgICBzdGVwcy5zb21lKHN0ZXAgPT4gc3RlcC5pbnN0cnVjdGlvbi50cmltKCkpO1xuXG4gICAgY29uc3QgdG90YWxUaW1lID0gcHJlcFRpbWUgKyBjb29rVGltZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdyZWNpcGUtYnVpbGRlcic+XG4gICAgICAgIDxoMz5SZWNpcGUgQnVpbGRlcjwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2lwZS1mb3JtJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjaXBlLWhlYWRlcic+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J1JlY2lwZSBOYW1lJ1xuICAgICAgICAgICAgICB2YWx1ZT17cmVjaXBlTmFtZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0UmVjaXBlTmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdyZWNpcGUtbmFtZS1pbnB1dCdcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNpcGUtbWV0YSc+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcidcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VydmluZ3N9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0U2VydmluZ3MocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpIHx8IDEpfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdzZXJ2aW5ncy1pbnB1dCdcbiAgICAgICAgICAgICAgICBtaW49JzEnXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcidcbiAgICAgICAgICAgICAgICB2YWx1ZT17cHJlcFRpbWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0UHJlcFRpbWUocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpIHx8IDApfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdwcmVwLXRpbWUtaW5wdXQnXG4gICAgICAgICAgICAgICAgbWluPScwJ1xuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgdmFsdWU9e2Nvb2tUaW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldENvb2tUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nY29vay10aW1lLWlucHV0J1xuICAgICAgICAgICAgICAgIG1pbj0nMCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2luZ3JlZGllbnRzLXNlY3Rpb24nPlxuICAgICAgICAgICAgPGg0PkluZ3JlZGllbnRzPC9oND5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkSW5ncmVkaWVudH0gZGF0YS10ZXN0aWQ9J2FkZC1pbmdyZWRpZW50Jz5cbiAgICAgICAgICAgICAgQWRkIEluZ3JlZGllbnRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICB7aW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2luZ3JlZGllbnQtcm93J1xuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgaW5ncmVkaWVudC1yb3ctJHtpbmRleH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J1F1YW50aXR5J1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQucXVhbnRpdHl9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PlxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbmdyZWRpZW50KGluZGV4LCAncXVhbnRpdHknLCBlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgaW5ncmVkaWVudC1xdWFudGl0eS0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nSW5ncmVkaWVudCBuYW1lJ1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUluZ3JlZGllbnQoaW5kZXgsICduYW1lJywgZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtbmFtZS0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByZW1vdmVJbmdyZWRpZW50KGluZGV4KX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgcmVtb3ZlLWluZ3JlZGllbnQtJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFJlbW92ZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPSdpbmdyZWRpZW50cy1jb3VudCc+XG4gICAgICAgICAgICAgIEluZ3JlZGllbnRzOiB7aW5ncmVkaWVudHMubGVuZ3RofVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3RlcHMtc2VjdGlvbic+XG4gICAgICAgICAgICA8aDQ+SW5zdHJ1Y3Rpb25zPC9oND5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkU3RlcH0gZGF0YS10ZXN0aWQ9J2FkZC1zdGVwJz5cbiAgICAgICAgICAgICAgQWRkIFN0ZXBcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICB7c3RlcHMubWFwKChzdGVwLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3N0ZXAtcm93J1xuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC1yb3ctJHtpbmRleH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzdGVwLW51bWJlcic+e2luZGV4ICsgMX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nRGVzY3JpYmUgdGhpcyBzdGVwLi4uJ1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0ZXAuaW5zdHJ1Y3Rpb259XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PlxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGVwKGluZGV4LCAnaW5zdHJ1Y3Rpb24nLCBlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC1pbnN0cnVjdGlvbi0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nVGltaW5nJ1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0ZXAudGltaW5nfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdXBkYXRlU3RlcChpbmRleCwgJ3RpbWluZycsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC10aW1pbmctJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVtb3ZlU3RlcChpbmRleCl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YHJlbW92ZS1zdGVwLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBSZW1vdmVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cblxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD0nc3RlcHMtY291bnQnPlN0ZXBzOiB7c3RlcHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2lwZS1zdW1tYXJ5JyBkYXRhLXRlc3RpZD0ncmVjaXBlLXN1bW1hcnknPlxuICAgICAgICAgICAgPGg0PlJlY2lwZSBTdW1tYXJ5PC9oND5cbiAgICAgICAgICAgIDxkaXY+TmFtZToge3JlY2lwZU5hbWUgfHwgJ1VudGl0bGVkIFJlY2lwZSd9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlNlcnZpbmdzOiB7c2VydmluZ3N9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlRvdGFsIFRpbWU6IHt0b3RhbFRpbWV9IG1pbnV0ZXM8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+SW5ncmVkaWVudHM6IHtpbmdyZWRpZW50cy5sZW5ndGh9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlN0ZXBzOiB7c3RlcHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFjYW5TYXZlfVxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J3NhdmUtcmVjaXBlJ1xuICAgICAgICAgICAgY2xhc3NOYW1lPXtjYW5TYXZlID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31cbiAgICAgICAgICA+XG4gICAgICAgICAgICBTYXZlIFJlY2lwZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG59KTtcblxuZGVzY3JpYmUoJ01haW4gUGFnZSBFMkUgV29ya2Zsb3dzJywgKCkgPT4ge1xuICBjb25zdCBtb2NrQWxjaGVtaWNhbENvbnRleHQgPSB7XG4gICAgc3RhdGU6IHtcbiAgICAgIGFzdHJvbG9naWNhbFN0YXRlOiB7IHN1blNpZ246ICdhcmllcycgfSxcbiAgICAgIGVsZW1lbnRhbFN0YXRlOiB7IEZpcmU6IDAuMywgV2F0ZXI6IDAuMiwgRWFydGg6IDAuMywgQWlyOiAwLjIgfSxcbiAgICB9LFxuICAgIHBsYW5ldGFyeVBvc2l0aW9uczogeyBzdW46IHsgc2lnbjogJ2FyaWVzJyB9IH0sXG4gICAgaXNEYXl0aW1lOiB0cnVlLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tOYXZpZ2F0aW9uU3RhdGUgPSB7XG4gICAgc2F2ZVN0YXRlOiBqZXN0LmZuKCksXG4gICAgZ2V0U3RhdGU6IGplc3QuZm4oKCkgPT4gKHt9KSksXG4gIH07XG5cbiAgY29uc3QgbW9ja1Njcm9sbFByZXNlcnZhdGlvbiA9IHtcbiAgICByZXN0b3JlU2Nyb2xsUG9zaXRpb246IGplc3QuZm4oKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgICh1c2VBbGNoZW1pY2FsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tBbGNoZW1pY2FsQ29udGV4dCk7XG4gICAgKHVzZU5hdmlnYXRpb25TdGF0ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrTmF2aWdhdGlvblN0YXRlKTtcbiAgICAodXNlU2Nyb2xsUHJlc2VydmF0aW9uIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKFxuICAgICAgbW9ja1Njcm9sbFByZXNlcnZhdGlvblxuICAgICk7XG4gICAgKHVzZUF1dG9TdGF0ZUNsZWFudXAgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUodW5kZWZpbmVkKTtcblxuICAgIC8vIE1vY2sgRE9NIG1ldGhvZHNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnc2Nyb2xsWScsIHsgdmFsdWU6IDAsIHdyaXRhYmxlOiB0cnVlIH0pO1xuICAgIGplc3Quc3B5T24oZG9jdW1lbnQsICdnZXRFbGVtZW50QnlJZCcpLm1vY2tJbXBsZW1lbnRhdGlvbihcbiAgICAgICgpID0+XG4gICAgICAgICh7XG4gICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IGplc3QuZm4oKSxcbiAgICAgICAgICBzdHlsZToge30sXG4gICAgICAgICAgY2xhc3NMaXN0OiB7IGFkZDogamVzdC5mbigpLCByZW1vdmU6IGplc3QuZm4oKSB9LFxuICAgICAgICB9KSBhcyBhbnlcbiAgICApO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGl0KCdjb21wbGV0ZXMgZnVsbCBtZWFsIHBsYW5uaW5nIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IC8+KTtcbiAgICB9KTtcblxuICAgIC8vIFdhaXQgZm9yIGFsbCBjb21wb25lbnRzIHRvIGxvYWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1aXNpbmUtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Nvb2tpbmctbWV0aG9kcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLWJ1aWxkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIFN0ZXAgMTogU2VsZWN0IGEgY3Vpc2luZVxuICAgIGNvbnN0IGl0YWxpYW5DdWlzaW5lID0gc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLWl0YWxpYW4nKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGl0YWxpYW5DdWlzaW5lKTtcblxuICAgIC8vIFZlcmlmeSBjdWlzaW5lIHNlbGVjdGlvbiBhbmQgcmVjaXBlIHJlY29tbWVuZGF0aW9ucyBhcHBlYXJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtcmVjb21tZW5kYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JlY29tbWVuZGVkIEl0YWxpYW4gUmVjaXBlcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gU3RlcCAyOiBTZWxlY3QgaW5ncmVkaWVudHNcbiAgICBjb25zdCB0b21hdG9lcyA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC10b21hdG9lcycpO1xuICAgIGNvbnN0IGJhc2lsID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LWJhc2lsJyk7XG4gICAgY29uc3Qgb2xpdmVPaWwgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtb2xpdmUgb2lsJyk7XG5cbiAgICBhd2FpdCB1c2VyLmNsaWNrKHRvbWF0b2VzKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGJhc2lsKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKG9saXZlT2lsKTtcblxuICAgIC8vIFZlcmlmeSBpbmdyZWRpZW50IHNlbGVjdGlvblxuICAgIGV4cGVjdChcbiAgICAgIHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VsZWN0ZWQtaW5ncmVkaWVudHMtc3VtbWFyeScpXG4gICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBJbmdyZWRpZW50cyAoMyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFN0ZXAgMzogU2VsZWN0IGNvb2tpbmcgbWV0aG9kXG4gICAgY29uc3Qgc2F1dGVNZXRob2QgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1zYXV0w6knKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNhdXRlTWV0aG9kKTtcblxuICAgIC8vIFZlcmlmeSBtZXRob2Qgc2VsZWN0aW9uIGFuZCBkZXRhaWxzXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtc2F1dMOpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTdGVwIDQ6IEJ1aWxkIGEgcmVjaXBlXG4gICAgY29uc3QgcmVjaXBlTmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIGF3YWl0IHVzZXIudHlwZShyZWNpcGVOYW1lSW5wdXQsICdJdGFsaWFuIFRvbWF0byBCYXNpbCBTYXV0w6knKTtcblxuICAgIC8vIEFkZCBpbmdyZWRpZW50cyB0byByZWNpcGVcbiAgICBjb25zdCBhZGRJbmdyZWRpZW50QnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtaW5ncmVkaWVudCcpO1xuICAgIGF3YWl0IHVzZXIuY2xpY2soYWRkSW5ncmVkaWVudEJ1dHRvbik7XG4gICAgYXdhaXQgdXNlci5jbGljayhhZGRJbmdyZWRpZW50QnV0dG9uKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGFkZEluZ3JlZGllbnRCdXR0b24pO1xuXG4gICAgLy8gRmlsbCBpbiBpbmdyZWRpZW50IGRldGFpbHNcbiAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXF1YW50aXR5LTAnKSwgJzIgY3VwcycpO1xuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtbmFtZS0wJyksICdGcmVzaCBUb21hdG9lcycpO1xuXG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1xdWFudGl0eS0xJyksICcxLzQgY3VwJyk7XG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTEnKSwgJ0ZyZXNoIEJhc2lsJyk7XG5cbiAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXF1YW50aXR5LTInKSwgJzIgdGJzcCcpO1xuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtbmFtZS0yJyksICdPbGl2ZSBPaWwnKTtcblxuICAgIC8vIEFkZCBjb29raW5nIHN0ZXBzXG4gICAgY29uc3QgYWRkU3RlcEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXN0ZXAnKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGFkZFN0ZXBCdXR0b24pO1xuICAgIGF3YWl0IHVzZXIuY2xpY2soYWRkU3RlcEJ1dHRvbik7XG5cbiAgICBhd2FpdCB1c2VyLnR5cGUoXG4gICAgICBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0ZXAtaW5zdHJ1Y3Rpb24tMCcpLFxuICAgICAgJ0hlYXQgb2xpdmUgb2lsIGluIGEgbGFyZ2UgcGFuIG92ZXIgbWVkaXVtIGhlYXQnXG4gICAgKTtcbiAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLXRpbWluZy0wJyksICcyIG1pbicpO1xuXG4gICAgYXdhaXQgdXNlci50eXBlKFxuICAgICAgc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLWluc3RydWN0aW9uLTEnKSxcbiAgICAgICdBZGQgdG9tYXRvZXMgYW5kIGJhc2lsLCBzYXV0w6kgdW50aWwgdGVuZGVyJ1xuICAgICk7XG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC10aW1pbmctMScpLCAnOCBtaW4nKTtcblxuICAgIC8vIFZlcmlmeSByZWNpcGUgY2FuIGJlIHNhdmVkXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2F2ZS1yZWNpcGUnKTtcbiAgICBleHBlY3Qoc2F2ZUJ1dHRvbikudG9CZUVuYWJsZWQoKTtcblxuICAgIC8vIFNhdmUgdGhlIHJlY2lwZVxuICAgIGF3YWl0IHVzZXIuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAvLyBWZXJpZnkgdGhlIGNvbXBsZXRlIHdvcmtmbG93XG4gICAgZXhwZWN0KFxuICAgICAgc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdJdGFsaWFuIFRvbWF0byBCYXNpbCBTYXV0w6knKVxuICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSW5ncmVkaWVudHM6IDMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcHM6IDInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgaW5ncmVkaWVudCBleHBsb3JhdGlvbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIEV4cGFuZCBpbmdyZWRpZW50IGRldGFpbHNcbiAgICBjb25zdCBleHBhbmRUb21hdG9lcyA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnZXhwYW5kLXRvbWF0b2VzJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhleHBhbmRUb21hdG9lcyk7XG5cbiAgICAvLyBWZXJpZnkgZGV0YWlscyBhcmUgc2hvd25cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXRhaWxzLXRvbWF0b2VzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NhdGVnb3J5OiBWZWdldGFibGVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KFxuICAgICAgc2NyZWVuLmdldEJ5VGV4dCgnUHJvcGVydGllczogVW1hbWksIEFjaWRpYywgRnJlc2gnKVxuICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIEV4cGFuZCBhbm90aGVyIGluZ3JlZGllbnRcbiAgICBjb25zdCBleHBhbmRHYXJsaWMgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2V4cGFuZC1nYXJsaWMnKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGV4cGFuZEdhcmxpYyk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXRhaWxzLWdhcmxpYycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDYXRlZ29yeTogQXJvbWF0aWNzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBDb2xsYXBzZSBmaXJzdCBpbmdyZWRpZW50XG4gICAgYXdhaXQgdXNlci5jbGljayhleHBhbmRUb21hdG9lcyk7XG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGVzdElkKCdkZXRhaWxzLXRvbWF0b2VzJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gU2VsZWN0IG11bHRpcGxlIGluZ3JlZGllbnRzXG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtdG9tYXRvZXMnKSk7XG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtZ2FybGljJykpO1xuICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LWJhc2lsJykpO1xuXG4gICAgLy8gVmVyaWZ5IHNlbGVjdGlvbiBzdW1tYXJ5XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIEluZ3JlZGllbnRzICgzKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUb21hdG9lcywgR2FybGljLCBCYXNpbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBjb29raW5nIG1ldGhvZCBleHBsb3JhdGlvbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Nvb2tpbmctbWV0aG9kcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2VsZWN0IGRpZmZlcmVudCBjb29raW5nIG1ldGhvZHMgYW5kIHZpZXcgZGV0YWlsc1xuICAgIGNvbnN0IHJvYXN0TWV0aG9kID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2Qtcm9hc3QnKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHJvYXN0TWV0aG9kKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXJvYXN0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KFxuICAgICAgc2NyZWVuLmdldEJ5VGV4dCgnQ29va2luZyBpbiB0aGUgb3ZlbiB3aXRoIGRyeSBoZWF0JylcbiAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTd2l0Y2ggdG8gYW5vdGhlciBtZXRob2RcbiAgICBjb25zdCBncmlsbE1ldGhvZCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWdyaWxsJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhncmlsbE1ldGhvZCk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2QtZGV0YWlscy1ncmlsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb29raW5nIG92ZXIgZGlyZWN0IGhlYXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFByZXZpb3VzIG1ldGhvZCBkZXRhaWxzIHNob3VsZCBiZSBoaWRkZW5cbiAgICBleHBlY3QoXG4gICAgICBzY3JlZW4ucXVlcnlCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtcm9hc3QnKVxuICAgICkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBUZXN0IHZpZXcgbW9yZSBmdW5jdGlvbmFsaXR5XG4gICAgY29uc3Qgdmlld01vcmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ZpZXctbW9yZS1tZXRob2RzJyk7XG4gICAgZXhwZWN0KHZpZXdNb3JlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBjb21wbGV0ZSByZWNpcGUgY3JlYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8TWFpblBhZ2VMYXlvdXQgLz4pO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtYnVpbGRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGEgY29tcGxldGUgcmVjaXBlIGZyb20gc2NyYXRjaFxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLW5hbWUtaW5wdXQnKTtcbiAgICBhd2FpdCB1c2VyLnR5cGUocmVjaXBlTmFtZUlucHV0LCAnTWVkaXRlcnJhbmVhbiBDaGlja2VuJyk7XG5cbiAgICAvLyBVcGRhdGUgcmVjaXBlIG1ldGFkYXRhXG4gICAgY29uc3Qgc2VydmluZ3NJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VydmluZ3MtaW5wdXQnKTtcbiAgICBjb25zdCBwcmVwVGltZUlucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdwcmVwLXRpbWUtaW5wdXQnKTtcbiAgICBjb25zdCBjb29rVGltZUlucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdjb29rLXRpbWUtaW5wdXQnKTtcblxuICAgIGF3YWl0IHVzZXIuY2xlYXIoc2VydmluZ3NJbnB1dCk7XG4gICAgYXdhaXQgdXNlci50eXBlKHNlcnZpbmdzSW5wdXQsICc2Jyk7XG5cbiAgICBhd2FpdCB1c2VyLmNsZWFyKHByZXBUaW1lSW5wdXQpO1xuICAgIGF3YWl0IHVzZXIudHlwZShwcmVwVGltZUlucHV0LCAnMjAnKTtcblxuICAgIGF3YWl0IHVzZXIuY2xlYXIoY29va1RpbWVJbnB1dCk7XG4gICAgYXdhaXQgdXNlci50eXBlKGNvb2tUaW1lSW5wdXQsICc0NScpO1xuXG4gICAgLy8gQWRkIG11bHRpcGxlIGluZ3JlZGllbnRzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtaW5ncmVkaWVudCcpKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbmdyZWRpZW50cyA9IFtcbiAgICAgIHsgcXVhbnRpdHk6ICcyIGxicycsIG5hbWU6ICdDaGlja2VuIEJyZWFzdCcgfSxcbiAgICAgIHsgcXVhbnRpdHk6ICcxIGN1cCcsIG5hbWU6ICdDaGVycnkgVG9tYXRvZXMnIH0sXG4gICAgICB7IHF1YW50aXR5OiAnMS8yIGN1cCcsIG5hbWU6ICdLYWxhbWF0YSBPbGl2ZXMnIH0sXG4gICAgICB7IHF1YW50aXR5OiAnMS80IGN1cCcsIG5hbWU6ICdPbGl2ZSBPaWwnIH0sXG4gICAgXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5ncmVkaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShcbiAgICAgICAgc2NyZWVuLmdldEJ5VGVzdElkKGBpbmdyZWRpZW50LXF1YW50aXR5LSR7aX1gKSxcbiAgICAgICAgaW5ncmVkaWVudHNbaV0ucXVhbnRpdHlcbiAgICAgICk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRlc3RJZChgaW5ncmVkaWVudC1uYW1lLSR7aX1gKSxcbiAgICAgICAgaW5ncmVkaWVudHNbaV0ubmFtZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY29va2luZyBzdGVwc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXN0ZXAnKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RlcHMgPSBbXG4gICAgICB7XG4gICAgICAgIGluc3RydWN0aW9uOiAnUHJlaGVhdCBvdmVuIHRvIDM3NcKwRiBhbmQgcHJlcGFyZSBjaGlja2VuJyxcbiAgICAgICAgdGltaW5nOiAnNSBtaW4nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaW5zdHJ1Y3Rpb246ICdTZWFyIGNoaWNrZW4gaW4gb2xpdmUgb2lsIHVudGlsIGdvbGRlbicsXG4gICAgICAgIHRpbWluZzogJzEwIG1pbicsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpbnN0cnVjdGlvbjogJ0FkZCB0b21hdG9lcyBhbmQgb2xpdmVzLCBiYWtlIHVudGlsIGRvbmUnLFxuICAgICAgICB0aW1pbmc6ICczMCBtaW4nLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgYXdhaXQgdXNlci50eXBlKFxuICAgICAgICBzY3JlZW4uZ2V0QnlUZXN0SWQoYHN0ZXAtaW5zdHJ1Y3Rpb24tJHtpfWApLFxuICAgICAgICBzdGVwc1tpXS5pbnN0cnVjdGlvblxuICAgICAgKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoYHN0ZXAtdGltaW5nLSR7aX1gKSwgc3RlcHNbaV0udGltaW5nKTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZnkgcmVjaXBlIHN1bW1hcnlcbiAgICBjb25zdCBzdW1tYXJ5ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtc3VtbWFyeScpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnTmFtZTogTWVkaXRlcnJhbmVhbiBDaGlja2VuJyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvSGF2ZVRleHRDb250ZW50KCdTZXJ2aW5nczogNicpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnVG90YWwgVGltZTogNjUgbWludXRlcycpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnSW5ncmVkaWVudHM6IDQnKTtcbiAgICBleHBlY3Qoc3VtbWFyeSkudG9IYXZlVGV4dENvbnRlbnQoJ1N0ZXBzOiAzJyk7XG5cbiAgICAvLyBWZXJpZnkgc2F2ZSBidXR0b24gaXMgZW5hYmxlZFxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NhdmUtcmVjaXBlJyk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvQmVFbmFibGVkKCk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvSGF2ZUNsYXNzKCdlbmFibGVkJyk7XG5cbiAgICAvLyBUZXN0IGluZ3JlZGllbnQgcmVtb3ZhbFxuICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdyZW1vdmUtaW5ncmVkaWVudC0zJykpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbmdyZWRpZW50czogMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gVGVzdCBzdGVwIHJlbW92YWxcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgncmVtb3ZlLXN0ZXAtMCcpKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcHM6IDInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFZlcmlmeSBzdGVwIHJlbnVtYmVyaW5nXG4gICAgZXhwZWN0KFxuICAgICAgc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdTZWFyIGNoaWNrZW4gaW4gb2xpdmUgb2lsIHVudGlsIGdvbGRlbicpXG4gICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBuYXZpZ2F0aW9uIGFuZCBzdGF0ZSBwcmVzZXJ2YXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgIGNvbnN0IG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSA9IGplc3QuZm4oKTtcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IG9uU2VjdGlvbk5hdmlnYXRlPXttb2NrT25TZWN0aW9uTmF2aWdhdGV9IC8+KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY3Vpc2luZS1yZWNvbW1lbmRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gTWFrZSBzZWxlY3Rpb25zIGFjcm9zcyBkaWZmZXJlbnQgY29tcG9uZW50c1xuICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLWl0YWxpYW4nKSk7XG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtdG9tYXRvZXMnKSk7XG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1zYXV0w6knKSk7XG5cbiAgICAvLyBOYXZpZ2F0ZSBiZXR3ZWVuIHNlY3Rpb25zXG4gICAgY29uc3QgY3Vpc2luZU5hdkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0N1aXNpbmUgUmVjb21tZW5kYXRpb25zJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhjdWlzaW5lTmF2QnV0dG9uKTtcbiAgICBleHBlY3QobW9ja09uU2VjdGlvbk5hdmlnYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnY3Vpc2luZScpO1xuXG4gICAgY29uc3QgaW5ncmVkaWVudHNOYXZCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdJbmdyZWRpZW50IFJlY29tbWVuZGF0aW9ucycpO1xuICAgIGF3YWl0IHVzZXIuY2xpY2soaW5ncmVkaWVudHNOYXZCdXR0b24pO1xuICAgIGV4cGVjdChtb2NrT25TZWN0aW9uTmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdpbmdyZWRpZW50cycpO1xuXG4gICAgLy8gVmVyaWZ5IHN0YXRlIHByZXNlcnZhdGlvbiB3YXMgY2FsbGVkXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QobW9ja05hdmlnYXRpb25TdGF0ZS5zYXZlU3RhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIC8vIFZlcmlmeSBzZWxlY3Rpb25zIGFyZSBtYWludGFpbmVkIGFmdGVyIG5hdmlnYXRpb25cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtcmVjb21tZW5kYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIEluZ3JlZGllbnRzICgxKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXNhdXTDqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBlcnJvciByZWNvdmVyeSB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICAvLyBNb2NrIGNvbnNvbGUuZXJyb3IgdG8gYXZvaWQgbm9pc2VcbiAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdFxuICAgICAgLnNweU9uKGNvbnNvbGUsICdlcnJvcicpXG4gICAgICAubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IC8+KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLWJ1aWxkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIFNpbXVsYXRlIHVzZXIgY3JlYXRpbmcgYSByZWNpcGUgYW5kIGVuY291bnRlcmluZyBhbiBlcnJvclxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLW5hbWUtaW5wdXQnKTtcbiAgICBhd2FpdCB1c2VyLnR5cGUocmVjaXBlTmFtZUlucHV0LCAnVGVzdCBSZWNpcGUnKTtcblxuICAgIC8vIEFkZCBpbmdyZWRpZW50XG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1pbmdyZWRpZW50JykpO1xuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtbmFtZS0wJyksICdUZXN0IEluZ3JlZGllbnQnKTtcblxuICAgIC8vIEFkZCBzdGVwXG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1zdGVwJykpO1xuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0ZXAtaW5zdHJ1Y3Rpb24tMCcpLCAnVGVzdCBzdGVwJyk7XG5cbiAgICAvLyBWZXJpZnkgcmVjaXBlIGlzIHZhbGlkXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2F2ZS1yZWNpcGUnKSkudG9CZUVuYWJsZWQoKTtcblxuICAgIC8vIFRoZSBtYWluIHBhZ2Ugc2hvdWxkIGNvbnRpbnVlIHRvIGZ1bmN0aW9uIGRlc3BpdGUgYW55IGVycm9yc1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXaGF0IHRvIEVhdCBOZXh0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLWJ1aWxkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==