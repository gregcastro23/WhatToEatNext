b9f3fdef754d7ec3f013ef9634ae34fa
"use strict";
/**
 * Test file for custom astrological ESLint rules
 *
 * This file tests the domain-specific linting rules to ensure they properly
 * validate astrological calculations, planetary positions, and elemental properties.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const elementalValidation_1 = require("../elementalValidation");
const astrologicalValidation_1 = require("../astrologicalValidation");
describe('Astrological ESLint Rules Integration', () => {
    describe('Elemental Properties Validation', () => {
        test('validates correct elemental properties structure', () => {
            const validProperties = {
                Fire: 0.4,
                Water: 0.3,
                Earth: 0.2,
                Air: 0.1
            };
            expect((0, elementalValidation_1.validateElementalProperties)(validProperties)).toBe(true);
        });
        test('rejects invalid elemental properties', () => {
            const invalidProperties = {
                Fire: 1.5,
                Water: -0.1,
                Earth: 0.2
                // Missing Air
            };
            expect((0, elementalValidation_1.validateElementalProperties)(invalidProperties)).toBe(false);
        });
        test('normalizes partial elemental properties', () => {
            const partialProperties = {
                Fire: 0.8,
                Water: 0.2
            };
            const normalized = (0, elementalValidation_1.normalizeElementalProperties)(partialProperties);
            expect(normalized).toHaveProperty('Fire', 0.8);
            expect(normalized).toHaveProperty('Water', 0.2);
            expect(normalized).toHaveProperty('Earth', 0.25); // Default
            expect(normalized).toHaveProperty('Air', 0.25); // Default
        });
    });
    describe('Planetary Position Validation', () => {
        test('validates correct planetary positions structure', () => {
            const validPositions = {
                sun: { sign: 'aries', degree: 15.5, exactLongitude: 15.5, isRetrograde: false },
                moon: { sign: 'taurus', degree: 22.3, exactLongitude: 52.3, isRetrograde: false },
                mercury: { sign: 'gemini', degree: 8.7, exactLongitude: 68.7, isRetrograde: true },
                venus: { sign: 'cancer', degree: 5.2, exactLongitude: 95.2, isRetrograde: false },
                mars: { sign: 'leo', degree: 12.8, exactLongitude: 132.8, isRetrograde: false },
                jupiter: { sign: 'virgo', degree: 28.1, exactLongitude: 178.1, isRetrograde: false },
                saturn: { sign: 'libra', degree: 3.4, exactLongitude: 183.4, isRetrograde: false }
            };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(validPositions);
            if (!result.isValid) {
                console.log('Validation errors:', result.errors);
                console.log('Validation warnings:', result.warnings);
            }
            expect(result.isValid).toBe(true);
            expect(result.errors).toHaveLength(0);
        });
        test('detects missing required properties', () => {
            const invalidPositions = {
                sun: { sign: 'aries', degree: 15.5 },
                moon: { degree: 22.3, exactLongitude: 52.3, isRetrograde: false } // Missing sign
            };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(invalidPositions);
            expect(result.isValid).toBe(false);
            expect(result.errors.length).toBeGreaterThan(0);
        });
        test('validates degree ranges', () => {
            const invalidPositions = {
                sun: { sign: 'aries', degree: 35.0, exactLongitude: 35.0, isRetrograde: false },
                moon: { sign: 'taurus', degree: -5.0, exactLongitude: 325.0, isRetrograde: false },
                mercury: { sign: 'gemini', degree: 8.7, exactLongitude: 68.7, isRetrograde: true },
                venus: { sign: 'cancer', degree: 5.2, exactLongitude: 95.2, isRetrograde: false },
                mars: { sign: 'leo', degree: 12.8, exactLongitude: 132.8, isRetrograde: false },
                jupiter: { sign: 'virgo', degree: 28.1, exactLongitude: 178.1, isRetrograde: false },
                saturn: { sign: 'libra', degree: 3.4, exactLongitude: 183.4, isRetrograde: false }
            };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(invalidPositions, { strictMode: false });
            console.log('Degree validation result:', result);
            expect(result.warnings.length).toBeGreaterThan(0);
        });
    });
    describe('Quick Validation Functions', () => {
        test('quick validate planetary positions', () => {
            const validPositions = {
                sun: { sign: 'aries', degree: 15.5, exactLongitude: 15.5, isRetrograde: false },
                moon: { sign: 'taurus', degree: 22.3, exactLongitude: 52.3, isRetrograde: false },
                mercury: { sign: 'gemini', degree: 8.7, exactLongitude: 68.7, isRetrograde: true },
                venus: { sign: 'cancer', degree: 5.2, exactLongitude: 95.2, isRetrograde: false },
                mars: { sign: 'leo', degree: 12.8, exactLongitude: 132.8, isRetrograde: false },
                jupiter: { sign: 'virgo', degree: 28.1, exactLongitude: 178.1, isRetrograde: false },
                saturn: { sign: 'libra', degree: 3.4, exactLongitude: 183.4, isRetrograde: false }
            };
            const result = (0, astrologicalValidation_1.quickValidate)(validPositions, 'planetary');
            if (!result) {
                console.log('Quick validation failed for:', validPositions);
            }
            expect(result).toBe(true);
        });
        test('quick validate elemental properties', () => {
            const validProperties = {
                Fire: 0.4,
                Water: 0.3,
                Earth: 0.2,
                Air: 0.1
            };
            expect((0, astrologicalValidation_1.quickValidate)(validProperties, 'elemental')).toBe(true);
        });
        test('quick validate mathematical constants', () => {
            const validConstants = {
                DEGREES_PER_SIGN: 30,
                SIGNS_PER_CIRCLE: 12,
                MAX_LONGITUDE: 360
            };
            expect((0, astrologicalValidation_1.quickValidate)(validConstants, 'constants')).toBe(true);
        });
    });
    describe('Mathematical Constants Preservation', () => {
        // These constants should be preserved by the ESLint rules
        const DEGREES_PER_SIGN = 30;
        const SIGNS_PER_CIRCLE = 12;
        const MAX_LONGITUDE = 360;
        const FALLBACK_POSITIONS = {
            sun: { sign: 'aries', degree: 8.5, exactLongitude: 8.5, isRetrograde: false }
        };
        test('mathematical constants maintain correct values', () => {
            expect(DEGREES_PER_SIGN).toBe(30);
            expect(SIGNS_PER_CIRCLE).toBe(12);
            expect(MAX_LONGITUDE).toBe(360);
        });
        test('fallback positions structure is preserved', () => {
            expect(FALLBACK_POSITIONS.sun).toHaveProperty('sign');
            expect(FALLBACK_POSITIONS.sun).toHaveProperty('degree');
            expect(FALLBACK_POSITIONS.sun).toHaveProperty('exactLongitude');
            expect(FALLBACK_POSITIONS.sun).toHaveProperty('isRetrograde');
        });
    });
    describe('Domain-Specific Variable Patterns', () => {
        test('preserves astrological variable naming patterns', () => {
            // These variables should be allowed by the custom rules
            const planetPosition = { sign: 'aries', degree: 15.0, exactLongitude: 15.0, isRetrograde: false };
            const degreeValue = 15.5;
            const signName = 'aries';
            const longitudeCalculation = 45.7;
            expect(planetPosition).toBeDefined();
            expect(degreeValue).toBeDefined();
            expect(signName).toBeDefined();
            expect(longitudeCalculation).toBeDefined();
        });
        test('preserves fallback and reliability patterns', () => {
            // These variables should be allowed by the custom rules
            const FALLBACK_DATA = { sun: { sign: 'aries', degree: 0, exactLongitude: 0, isRetrograde: false } };
            const RELIABLE_POSITIONS = { moon: { sign: 'taurus', degree: 15, exactLongitude: 45, isRetrograde: false } };
            const TRANSIT_DATES = { aries: { Start: '2024-03-20', End: '2024-04-19' } };
            const DEFAULT_VALUES = { Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25 };
            expect(FALLBACK_DATA).toBeDefined();
            expect(RELIABLE_POSITIONS).toBeDefined();
            expect(TRANSIT_DATES).toBeDefined();
            expect(DEFAULT_VALUES).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9hc3Ryb2xvZ3kvX190ZXN0c19fL2FzdHJvbG9naWNhbFJ1bGVzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOztBQUVILGdFQUFtRztBQUVuRyxzRUFBc0Y7QUFFdEYsUUFBUSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtJQUNyRCxRQUFRLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1FBQy9DLElBQUksQ0FBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDNUQsTUFBTSxlQUFlLEdBQUc7Z0JBQ3RCLElBQUksRUFBRSxHQUFHO2dCQUNULEtBQUssRUFBRSxHQUFHO2dCQUNWLEtBQUssRUFBRSxHQUFHO2dCQUNWLEdBQUcsRUFBRSxHQUFHO2FBQ1QsQ0FBQztZQUVGLE1BQU0sQ0FBQyxJQUFBLGlEQUEyQixFQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLGlCQUFpQixHQUFHO2dCQUN4QixJQUFJLEVBQUUsR0FBRztnQkFDVCxLQUFLLEVBQUUsQ0FBQyxHQUFHO2dCQUNYLEtBQUssRUFBRSxHQUFHO2dCQUNWLGNBQWM7YUFDZixDQUFDO1lBRUYsTUFBTSxDQUFDLElBQUEsaURBQTJCLEVBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyRSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx5Q0FBeUMsRUFBRSxHQUFHLEVBQUU7WUFDbkQsTUFBTSxpQkFBaUIsR0FBRztnQkFDeEIsSUFBSSxFQUFFLEdBQUc7Z0JBQ1QsS0FBSyxFQUFFLEdBQUc7YUFDWCxDQUFDO1lBRUYsTUFBTSxVQUFVLEdBQUcsSUFBQSxrREFBNEIsRUFBQyxpQkFBaUIsQ0FBQyxD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QUFLLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsRUFBRSxDQUFDO1lBQzVFLE1BQU0sY0FBYyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDO1lBRTNFLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNwQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN6QyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDcEMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3V0aWxzL2FzdHJvbG9neS9fX3Rlc3RzX18vYXN0cm9sb2dpY2FsUnVsZXMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3QgZmlsZSBmb3IgY3VzdG9tIGFzdHJvbG9naWNhbCBFU0xpbnQgcnVsZXNcbiAqIFxuICogVGhpcyBmaWxlIHRlc3RzIHRoZSBkb21haW4tc3BlY2lmaWMgbGludGluZyBydWxlcyB0byBlbnN1cmUgdGhleSBwcm9wZXJseVxuICogdmFsaWRhdGUgYXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucywgcGxhbmV0YXJ5IHBvc2l0aW9ucywgYW5kIGVsZW1lbnRhbCBwcm9wZXJ0aWVzLlxuICovXG5cbmltcG9ydCB7IHZhbGlkYXRlRWxlbWVudGFsUHJvcGVydGllcywgbm9ybWFsaXplRWxlbWVudGFsUHJvcGVydGllcyB9IGZyb20gJy4uL2VsZW1lbnRhbFZhbGlkYXRpb24nO1xuaW1wb3J0IHsgdmFsaWRhdGVUcmFuc2l0RGF0ZSwgZ2V0Q3VycmVudFRyYW5zaXRTaWduIH0gZnJvbSAnLi4vdHJhbnNpdFZhbGlkYXRpb24nO1xuaW1wb3J0IHsgdmFsaWRhdGVQbGFuZXRhcnlQb3NpdGlvbnMsIHF1aWNrVmFsaWRhdGUgfSBmcm9tICcuLi9hc3Ryb2xvZ2ljYWxWYWxpZGF0aW9uJztcblxuZGVzY3JpYmUoJ0FzdHJvbG9naWNhbCBFU0xpbnQgUnVsZXMgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdFbGVtZW50YWwgUHJvcGVydGllcyBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3ZhbGlkYXRlcyBjb3JyZWN0IGVsZW1lbnRhbCBwcm9wZXJ0aWVzIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkUHJvcGVydGllcyA9IHtcbiAgICAgICAgRmlyZTogMC40LFxuICAgICAgICBXYXRlcjogMC4zLFxuICAgICAgICBFYXJ0aDogMC4yLFxuICAgICAgICBBaXI6IDAuMVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHZhbGlkYXRlRWxlbWVudGFsUHJvcGVydGllcyh2YWxpZFByb3BlcnRpZXMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3JlamVjdHMgaW52YWxpZCBlbGVtZW50YWwgcHJvcGVydGllcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRQcm9wZXJ0aWVzID0ge1xuICAgICAgICBGaXJlOiAxLjUsIC8vIEludmFsaWQ6ID4gMVxuICAgICAgICBXYXRlcjogLTAuMSwgLy8gSW52YWxpZDogPCAwXG4gICAgICAgIEVhcnRoOiAwLjJcbiAgICAgICAgLy8gTWlzc2luZyBBaXJcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXMoaW52YWxpZFByb3BlcnRpZXMpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdub3JtYWxpemVzIHBhcnRpYWwgZWxlbWVudGFsIHByb3BlcnRpZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0aWFsUHJvcGVydGllcyA9IHtcbiAgICAgICAgRmlyZTogMC44LFxuICAgICAgICBXYXRlcjogMC4yXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplRWxlbWVudGFsUHJvcGVydGllcyhwYXJ0aWFsUHJvcGVydGllcyk7XG4gICAgICBleHBlY3Qobm9ybWFsaXplZCkudG9IYXZlUHJvcGVydHkoJ0ZpcmUnLCAwLjgpO1xuICAgICAgZXhwZWN0KG5vcm1hbGl6ZWQpLnRvSGF2ZVByb3BlcnR5KCdXYXRlcicsIDAuMik7XG4gICAgICBleHBlY3Qobm9ybWFsaXplZCkudG9IYXZlUHJvcGVydHkoJ0VhcnRoJywgMC4yNSk7IC8vIERlZmF1bHRcbiAgICAgIGV4cGVjdChub3JtYWxpemVkKS50b0hhdmVQcm9wZXJ0eSgnQWlyJywgMC4yNSk7IC8vIERlZmF1bHRcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnUGxhbmV0YXJ5IFBvc2l0aW9uIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgndmFsaWRhdGVzIGNvcnJlY3QgcGxhbmV0YXJ5IHBvc2l0aW9ucyBzdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFBvc2l0aW9ucyA9IHtcbiAgICAgICAgc3VuOiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogMTUuNSwgZXhhY3RMb25naXR1ZGU6IDE1LjUsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICAgICAgbW9vbjogeyBzaWduOiAndGF1cnVzJywgZGVncmVlOiAyMi4zLCBleGFjdExvbmdpdHVkZTogNTIuMywgaXNSZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgICAgICBtZXJjdXJ5OiB7IHNpZ246ICdnZW1pbmknLCBkZWdyZWU6IDguNywgZXhhY3RMb25naXR1ZGU6IDY4LjcsIGlzUmV0cm9ncmFkZTogdHJ1ZSB9LFxuICAgICAgICB2ZW51czogeyBzaWduOiAnY2FuY2VyJywgZGVncmVlOiA1LjIsIGV4YWN0TG9uZ2l0dWRlOiA5NS4yLCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgICAgIG1hcnM6IHsgc2lnbjogJ2xlbycsIGRlZ3JlZTogMTIuOCwgZXhhY3RMb25naXR1ZGU6IDEzMi44LCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgICAgIGp1cGl0ZXI6IHsgc2lnbjogJ3ZpcmdvJywgZGVncmVlOiAyOC4xLCBleGFjdExvbmdpdHVkZTogMTc4LjEsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICAgICAgc2F0dXJuOiB7IHNpZ246ICdsaWJyYScsIGRlZ3JlZTogMy40LCBleGFjdExvbmdpdHVkZTogMTgzLjQsIGlzUmV0cm9ncmFkZTogZmFsc2UgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQbGFuZXRhcnlQb3NpdGlvbnModmFsaWRQb3NpdGlvbnMpO1xuICAgICAgaWYgKCFyZXN1bHQuaXNWYWxpZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVmFsaWRhdGlvbiBlcnJvcnM6JywgcmVzdWx0LmVycm9ycyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW9uIHdhcm5pbmdzOicsIHJlc3VsdC53YXJuaW5ncyk7XG4gICAgICB9XG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2RldGVjdHMgbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0aWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFBvc2l0aW9ucyA9IHtcbiAgICAgICAgc3VuOiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogMTUuNSB9LCAvLyBNaXNzaW5nIGV4YWN0TG9uZ2l0dWRlIGFuZCBpc1JldHJvZ3JhZGVcbiAgICAgICAgbW9vbjogeyBkZWdyZWU6IDIyLjMsIGV4YWN0TG9uZ2l0dWRlOiA1Mi4zLCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0gLy8gTWlzc2luZyBzaWduXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBsYW5ldGFyeVBvc2l0aW9ucyhpbnZhbGlkUG9zaXRpb25zKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCd2YWxpZGF0ZXMgZGVncmVlIHJhbmdlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRQb3NpdGlvbnMgPSB7XG4gICAgICAgIHN1bjogeyBzaWduOiAnYXJpZXMnLCBkZWdyZWU6IDM1LjAsIGV4YWN0TG9uZ2l0dWRlOiAzNS4wLCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sIC8vIEludmFsaWQgZGVncmVlID4gMzBcbiAgICAgICAgbW9vbjogeyBzaWduOiAndGF1cnVzJywgZGVncmVlOiAtNS4wLCBleGFjdExvbmdpdHVkZTogMzI1LjAsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSwgLy8gSW52YWxpZCBkZWdyZWUgPCAwXG4gICAgICAgIG1lcmN1cnk6IHsgc2lnbjogJ2dlbWluaScsIGRlZ3JlZTogOC43LCBleGFjdExvbmdpdHVkZTogNjguNywgaXNSZXRyb2dyYWRlOiB0cnVlIH0sXG4gICAgICAgIHZlbnVzOiB7IHNpZ246ICdjYW5jZXInLCBkZWdyZWU6IDUuMiwgZXhhY3RMb25naXR1ZGU6IDk1LjIsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICAgICAgbWFyczogeyBzaWduOiAnbGVvJywgZGVncmVlOiAxMi44LCBleGFjdExvbmdpdHVkZTogMTMyLjgsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICAgICAganVwaXRlcjogeyBzaWduOiAndmlyZ28nLCBkZWdyZWU6IDI4LjEsIGV4YWN0TG9uZ2l0dWRlOiAxNzguMSwgaXNSZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgICAgICBzYXR1cm46IHsgc2lnbjogJ2xpYnJhJywgZGVncmVlOiAzLjQsIGV4YWN0TG9uZ2l0dWRlOiAxODMuNCwgaXNSZXRyb2dyYWRlOiBmYWxzZSB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBsYW5ldGFyeVBvc2l0aW9ucyhpbnZhbGlkUG9zaXRpb25zLCB7IHN0cmljdE1vZGU6IGZhbHNlIH0pO1xuICAgICAgY29uc29sZS5sb2coJ0RlZ3JlZSB2YWxpZGF0aW9uIHJlc3VsdDonLCByZXN1bHQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC53YXJuaW5ncy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnUXVpY2sgVmFsaWRhdGlvbiBGdW5jdGlvbnMnLCAoKSA9PiB7XG4gICAgdGVzdCgncXVpY2sgdmFsaWRhdGUgcGxhbmV0YXJ5IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkUG9zaXRpb25zID0ge1xuICAgICAgICBzdW46IHsgc2lnbjogJ2FyaWVzJywgZGVncmVlOiAxNS41LCBleGFjdExvbmdpdHVkZTogMTUuNSwgaXNSZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgICAgICBtb29uOiB7IHNpZ246ICd0YXVydXMnLCBkZWdyZWU6IDIyLjMsIGV4YWN0TG9uZ2l0dWRlOiA1Mi4zLCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgICAgIG1lcmN1cnk6IHsgc2lnbjogJ2dlbWluaScsIGRlZ3JlZTogOC43LCBleGFjdExvbmdpdHVkZTogNjguNywgaXNSZXRyb2dyYWRlOiB0cnVlIH0sXG4gICAgICAgIHZlbnVzOiB7IHNpZ246ICdjYW5jZXInLCBkZWdyZWU6IDUuMiwgZXhhY3RMb25naXR1ZGU6IDk1LjIsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICAgICAgbWFyczogeyBzaWduOiAnbGVvJywgZGVncmVlOiAxMi44LCBleGFjdExvbmdpdHVkZTogMTMyLjgsIGlzUmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICAgICAganVwaXRlcjogeyBzaWduOiAndmlyZ28nLCBkZWdyZWU6IDI4LjEsIGV4YWN0TG9uZ2l0dWRlOiAxNzguMSwgaXNSZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgICAgICBzYXR1cm46IHsgc2lnbjogJ2xpYnJhJywgZGVncmVlOiAzLjQsIGV4YWN0TG9uZ2l0dWRlOiAxODMuNCwgaXNSZXRyb2dyYWRlOiBmYWxzZSB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBxdWlja1ZhbGlkYXRlKHZhbGlkUG9zaXRpb25zLCAncGxhbmV0YXJ5Jyk7XG4gICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUXVpY2sgdmFsaWRhdGlvbiBmYWlsZWQgZm9yOicsIHZhbGlkUG9zaXRpb25zKTtcbiAgICAgIH1cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgncXVpY2sgdmFsaWRhdGUgZWxlbWVudGFsIHByb3BlcnRpZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFByb3BlcnRpZXMgPSB7XG4gICAgICAgIEZpcmU6IDAuNCxcbiAgICAgICAgV2F0ZXI6IDAuMyxcbiAgICAgICAgRWFydGg6IDAuMixcbiAgICAgICAgQWlyOiAwLjFcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdChxdWlja1ZhbGlkYXRlKHZhbGlkUHJvcGVydGllcywgJ2VsZW1lbnRhbCcpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3F1aWNrIHZhbGlkYXRlIG1hdGhlbWF0aWNhbCBjb25zdGFudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZENvbnN0YW50cyA9IHtcbiAgICAgICAgREVHUkVFU19QRVJfU0lHTjogMzAsXG4gICAgICAgIFNJR05TX1BFUl9DSVJDTEU6IDEyLFxuICAgICAgICBNQVhfTE9OR0lUVURFOiAzNjBcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdChxdWlja1ZhbGlkYXRlKHZhbGlkQ29uc3RhbnRzLCAnY29uc3RhbnRzJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ01hdGhlbWF0aWNhbCBDb25zdGFudHMgUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgIC8vIFRoZXNlIGNvbnN0YW50cyBzaG91bGQgYmUgcHJlc2VydmVkIGJ5IHRoZSBFU0xpbnQgcnVsZXNcbiAgICBjb25zdCBERUdSRUVTX1BFUl9TSUdOID0gMzA7XG4gICAgY29uc3QgU0lHTlNfUEVSX0NJUkNMRSA9IDEyO1xuICAgIGNvbnN0IE1BWF9MT05HSVRVREUgPSAzNjA7XG4gICAgY29uc3QgRkFMTEJBQ0tfUE9TSVRJT05TID0ge1xuICAgICAgc3VuOiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogOC41LCBleGFjdExvbmdpdHVkZTogOC41LCBpc1JldHJvZ3JhZGU6IGZhbHNlIH1cbiAgICB9O1xuICAgIFxuICAgIHRlc3QoJ21hdGhlbWF0aWNhbCBjb25zdGFudHMgbWFpbnRhaW4gY29ycmVjdCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoREVHUkVFU19QRVJfU0lHTikudG9CZSgzMCk7XG4gICAgICBleHBlY3QoU0lHTlNfUEVSX0NJUkNMRSkudG9CZSgxMik7XG4gICAgICBleHBlY3QoTUFYX0xPTkdJVFVERSkudG9CZSgzNjApO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2ZhbGxiYWNrIHBvc2l0aW9ucyBzdHJ1Y3R1cmUgaXMgcHJlc2VydmVkJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEZBTExCQUNLX1BPU0lUSU9OUy5zdW4pLnRvSGF2ZVByb3BlcnR5KCdzaWduJyk7XG4gICAgICBleHBlY3QoRkFMTEJBQ0tfUE9TSVRJT05TLnN1bikudG9IYXZlUHJvcGVydHkoJ2RlZ3JlZScpO1xuICAgICAgZXhwZWN0KEZBTExCQUNLX1BPU0lUSU9OUy5zdW4pLnRvSGF2ZVByb3BlcnR5KCdleGFjdExvbmdpdHVkZScpO1xuICAgICAgZXhwZWN0KEZBTExCQUNLX1BPU0lUSU9OUy5zdW4pLnRvSGF2ZVByb3BlcnR5KCdpc1JldHJvZ3JhZGUnKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnRG9tYWluLVNwZWNpZmljIFZhcmlhYmxlIFBhdHRlcm5zJywgKCkgPT4ge1xuICAgIHRlc3QoJ3ByZXNlcnZlcyBhc3Ryb2xvZ2ljYWwgdmFyaWFibGUgbmFtaW5nIHBhdHRlcm5zJywgKCkgPT4ge1xuICAgICAgLy8gVGhlc2UgdmFyaWFibGVzIHNob3VsZCBiZSBhbGxvd2VkIGJ5IHRoZSBjdXN0b20gcnVsZXNcbiAgICAgIGNvbnN0IHBsYW5ldFBvc2l0aW9uID0geyBzaWduOiAnYXJpZXMnLCBkZWdyZWU6IDE1LjAsIGV4YWN0TG9uZ2l0dWRlOiAxNS4wLCBpc1JldHJvZ3JhZGU6IGZhbHNlIH07XG4gICAgICBjb25zdCBkZWdyZWVWYWx1ZSA9IDE1LjU7XG4gICAgICBjb25zdCBzaWduTmFtZSA9ICdhcmllcyc7XG4gICAgICBjb25zdCBsb25naXR1ZGVDYWxjdWxhdGlvbiA9IDQ1Ljc7XG4gICAgICBcbiAgICAgIGV4cGVjdChwbGFuZXRQb3NpdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkZWdyZWVWYWx1ZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzaWduTmFtZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChsb25naXR1ZGVDYWxjdWxhdGlvbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdwcmVzZXJ2ZXMgZmFsbGJhY2sgYW5kIHJlbGlhYmlsaXR5IHBhdHRlcm5zJywgKCkgPT4ge1xuICAgICAgLy8gVGhlc2UgdmFyaWFibGVzIHNob3VsZCBiZSBhbGxvd2VkIGJ5IHRoZSBjdXN0b20gcnVsZXNcbiAgICAgIGNvbnN0IEZBTExCQUNLX0RBVEEgPSB7IHN1bjogeyBzaWduOiAnYXJpZXMnLCBkZWdyZWU6IDAsIGV4YWN0TG9uZ2l0dWRlOiAwLCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0gfTtcbiAgICAgIGNvbnN0IFJFTElBQkxFX1BPU0lUSU9OUyA9IHsgbW9vbjogeyBzaWduOiAndGF1cnVzJywgZGVncmVlOiAxNSwgZXhhY3RMb25naXR1ZGU6IDQ1LCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0gfTtcbiAgICAgIGNvbnN0IFRSQU5TSVRfREFURVMgPSB7IGFyaWVzOiB7IFN0YXJ0OiAnMjAyNC0wMy0yMCcsIEVuZDogJzIwMjQtMDQtMTknIH0gfTtcbiAgICAgIGNvbnN0IERFRkFVTFRfVkFMVUVTID0geyBGaXJlOiAwLjI1LCBXYXRlcjogMC4yNSwgRWFydGg6IDAuMjUsIEFpcjogMC4yNSB9O1xuICAgICAgXG4gICAgICBleHBlY3QoRkFMTEJBQ0tfREFUQSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChSRUxJQUJMRV9QT1NJVElPTlMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoVFJBTlNJVF9EQVRFUykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChERUZBVUxUX1ZBTFVFUykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=