db616bef9615594af197e72405685b46
"use strict";
/**
 * Export Transformation Engine
 * Perfect Codebase Campaign - Phase 3 Implementation
 *
 * Orchestrates the complete transformation of unused exports into
 * enterprise intelligence systems with comprehensive safety protocols.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExportTransformationEngine = exports.ErrorSeverity = exports.TransformationErrorType = exports.BatchPriority = void 0;
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const child_process_1 = require("child_process");
const UnusedExportAnalyzer_1 = require("./UnusedExportAnalyzer");
const EnterpriseIntelligenceGenerator_1 = require("./EnterpriseIntelligenceGenerator");
const SafetyProtocol_1 = require("./SafetyProtocol");
const ProgressTracker_1 = require("./ProgressTracker");
var BatchPriority;
(function (BatchPriority) {
    BatchPriority["HIGH"] = "HIGH";
    BatchPriority["MEDIUM"] = "MEDIUM";
    BatchPriority["LOW"] = "LOW";
})(BatchPriority || (exports.BatchPriority = BatchPriority = {}));
var TransformationErrorType;
(function (TransformationErrorType) {
    TransformationErrorType["ANALYSIS_FAILED"] = "ANALYSIS_FAILED";
    TransformationErrorType["GENERATION_FAILED"] = "GENERATION_FAILED";
    TransformationErrorType["BUILD_FAILED"] = "BUILD_FAILED";
    TransformationErrorType["TEST_FAILED"] = "TEST_FAILED";
    TransformationErrorType["FILE_WRITE_FAILED"] = "FILE_WRITE_FAILED";
    TransformationErrorType["ROLLBACK_FAILED"] = "ROLLBACK_FAILED";
    TransformationErrorType["VALIDATION_FAILED"] = "VALIDATION_FAILED";
})(TransformationErrorType || (exports.TransformationErrorType = TransformationErrorType = {}));
var ErrorSeverity;
(function (ErrorSeverity) {
    ErrorSeverity["LOW"] = "LOW";
    ErrorSeverity["MEDIUM"] = "MEDIUM";
    ErrorSeverity["HIGH"] = "HIGH";
    ErrorSeverity["CRITICAL"] = "CRITICAL";
})(ErrorSeverity || (exports.ErrorSeverity = ErrorSeverity = {}));
class ExportTransformationEngine {
    constructor(config = {}) {
        this.config = {
            batchSize: 10,
            safetyThreshold: 80,
            buildValidationEnabled: true,
            testValidationEnabled: true,
            rollbackOnFailure: true,
            outputDirectory: 'src/intelligence',
            backupDirectory: '.transformation-backups',
            maxRetries: 3,
            dryRun: false,
            ...config
        };
        this.analyzer = new UnusedExportAnalyzer_1.UnusedExportAnalyzer();
        this.generator = new EnterpriseIntelligenceGenerator_1.EnterpriseIntelligenceGenerator(this.config.outputDirectory);
        this.safetyProtocol = new SafetyProtocol_1.SafetyProtocol();
        this.progressTracker = new ProgressTracker_1.ProgressTracker();
        this.transformationLog = [];
    }
    /**
     * Execute complete transformation campaign
     */
    async executeTransformation() {
        console.log('üöÄ Starting Export Transformation Campaign...\n');
        const startTime = Date.now();
        try {
            // Phase 1: Analysis
            console.log('üìä Phase 1: Analyzing unused exports...');
            const analysisResult = await this.performAnalysis();
            // Phase 2: Batch Planning
            console.log('üìã Phase 2: Planning transformation batches...');
            const batches = await this.planTransformationBatches(analysisResult);
            // Phase 3: Safety Preparation
            console.log('üõ°Ô∏è  Phase 3: Preparing safety protocols...');
            await this.prepareSafetyProtocols();
            // Phase 4: Batch Execution
            console.log('‚ö° Phase 4: Executing transformation batches...');
            const results = await this.executeBatches(batches);
            // Phase 5: Final Validation
            console.log('‚úÖ Phase 5: Final validation and cleanup...');
            await this.performFinalValidation();
            const endTime = Date.now();
            const totalDuration = (endTime - startTime) / 1000;
            const summary = this.generateTransformationSummary(results, totalDuration);
            console.log('\nüéâ Export Transformation Campaign completed!');
            this.displaySummary(summary);
            return summary;
        }
        catch (error) {
            console.error('‚ùå Transformation campaign failed:', error);
            await this.handleCriticalFailure(error);
            throw error;
        }
    }
    /**
     * Perform unused export analysis
     */
    async performAnalysis() {
        try {
            const result = await this.analyzer.analyzeUnusedExports();
            console.log(`‚úÖ Analysis completed:`);
            console.log(`   - Files analyzed: ${result.totalFiles}`);
            console.log(`   - Unused exports found: ${result.totalUnusedExports}`);
            console.log(`   - High priority files: ${result.highPriorityFiles.length}`);
            console.log(`   - Medium priority files: ${result.mediumPriorityFiles.length}`);
            console.log(`   - Low priority files: ${result.lowPriorityFiles.length}`);
            return result;
        }
        catch (error) {
            this.logError({
                type: TransformationErrorType.ANALYSIS_FAILED,
                message: `Analysis failed: ${error.message}`,
                severity: ErrorSeverity.CRITICAL,
                recoverable: false,
                timestamp: new Date()
            });
            throw error;
        }
    }
    /**
     * Plan transformation batches based on analysis results
     */
    async planTransformationBatches(analysisResult) {
        const batches = [];
        // Create batches for high priority files
        const highPriorityBatches = this.createBatchesFromFiles(analysisResult.highPriorityFiles, BatchPriority.HIGH, 'high');
        batches.push(...highPriorityBatches);
        // Create batches for medium priority files
        const mediumPriorityBatches = this.createBatchesFromFiles(analysisResult.mediumPriorityFiles, BatchPriority.MEDIUM, 'medium');
        batches.push(...mediumPriorityBatches);
        // Create batches for low priority files
        const lowPriorityBatches = this.createBatchesFromFiles(analysisResult.lowPriorityFiles, BatchPriority.LOW, 'low');
        batches.push(...lowPriorityBatches);
        console.log(`‚úÖ Planned ${batches.length} transformation batches:`);
        console.log(`   - High priority: ${highPriorityBatches.length} batches`);
        console.log(`   - Medium priority: ${mediumPriorityBatches.length} batches`);
        console.log(`   - Low priority: ${lowPriorityBatches.length} batches`);
        return batches;
    }
    /**
     * Create batches from files
     */
    createBatchesFromFiles(files, priority, priorityLabel) {
        const batches = [];
        const batchSize = this.config.batchSize;
        for (let i = 0; i < files.length; i += batchSize) {
            const batchFiles = files.slice(i, i + batchSize);
            const batchNumber = Math.floor(i / batchSize) + 1;
            const batch = {
                id: `${priorityLabel}-batch-${batchNumber}`,
                files: batchFiles,
                priority,
                estimatedDuration: this.estimateBatchDuration(batchFiles),
                safetyScore: this.calculateBatchSafetyScore(batchFiles),
                transformationCandidates: batchFiles.reduce((sum, f) => sum + f.transformationCandidates.length, 0)
            };
            batches.push(batch);
        }
        return batches;
    }
    /**
     * Estimate batch processing duration
     */
    estimateBatchDuration(files) {
        // Base time per file + complexity factor
        const baseTimePerFile = 2; // seconds
        const complexityFactor = files.reduce((sum, f) => {
            return sum + f.transformationCandidates.reduce((candidateSum, c) => {
                const complexityMultiplier = {
                    'SIMPLE': 1,
                    'MODERATE': 1.5,
                    'COMPLEX': 2,
                    'VERY_COMPLEX': 3
                }[c.transformationComplexity] || 1;
                return candidateSum + complexityMultiplier;
            }, 0);
        }, 0);
        return Math.ceil(files.length * baseTimePerFile + complexityFactor);
    }
    /**
     * Calculate batch safety score
     */
    calculateBatchSafetyScore(files) {
        if (files.length === 0)
            return 100;
        const averageSafetyScore = files.reduce((sum, f) => sum + f.safetyScore, 0) / files.length;
        const complexityPenalty = files.reduce((penalty, f) => {
            const highComplexityCandidates = f.transformationCandidates.filter(c => c.transformationComplexity === 'COMPLEX' || c.transformationComplexity === 'VERY_COMPLEX').length;
            return penalty + (highComplexityCandidates * 2);
        }, 0);
        return Math.max(0, Math.min(100, averageSafetyScore - complexityPenalty));
    }
    /**
     * Prepare safety protocols
     */
    async prepareSafetyProtocols() {
        try {
            // Create backup directory
            await this.ensureDirectory(this.config.backupDirectory);
            // Create safety checkpoint
            const checkpointId = await this.safetyProtocol.createSafetyCheckpoint('transformation-start');
            console.log(`‚úÖ Safety checkpoint created: ${checkpointId}`);
            // Validate build before starting
            if (this.config.buildValidationEnabled) {
                const buildValid = await this.validateBuild();
                if (!buildValid.buildSuccess) {
                    throw new Error('Build validation failed before transformation');
                }
                console.log('‚úÖ Pre-transformation build validation passed');
            }
        }
        catch (error) {
            this.logError({
                type: TransformationErrorType.VALIDATION_FAILED,
                message: `Safety preparation failed: ${error.message}`,
                severity: ErrorSeverity.CRITICAL,
                recoverable: false,
                timestamp: new Date()
            });
            throw error;
        }
    }
    /**
     * Execute transformation batches
     */
    async executeBatches(batches) {
        const results = [];
        for (let i = 0; i < batches.length; i++) {
            const batch = batches[i];
            console.log(`\nüîÑ Processing batch ${i + 1}/${batches.length}: ${batch.id}`);
            console.log(`   Priority: ${batch.priority}`);
            console.log(`   Files: ${batch.files.length}`);
            console.log(`   Candidates: ${batch.transformationCandidates}`);
            console.log(`   Safety Score: ${batch.safetyScore}`);
            console.log(`   Estimated Duration: ${batch.estimatedDuration}s`);
            const result = await this.executeBatch(batch);
            results.push(result);
            if (!result.success && this.config.rollbackOnFailure) {
                console.log('‚ö†Ô∏è  Batch failed, stopping transformation campaign');
                break;
            }
            // Progress update
            const progress = ((i + 1) / batches.length) * 100;
            console.log(`üìä Campaign progress: ${progress.toFixed(1)}%`);
        }
        return results;
    }
    /**
     * Execute a single transformation batch
     */
    async executeBatch(batch) {
        const startTime = Date.now();
        const result = {
            batchId: batch.id,
            success: false,
            filesProcessed: 0,
            systemsGenerated: 0,
            errors: [],
            warnings: [],
            duration: 0,
            rollbackPerformed: false,
            generationResults: []
        };
        let checkpointId = null;
        try {
            // Create batch checkpoint
            checkpointId = await this.safetyProtocol.createSafetyCheckpoint(`batch-${batch.id}`);
            // Check safety threshold
            if (batch.safetyScore < this.config.safetyThreshold) {
                result.warnings.push(`Batch safety score (${batch.safetyScore}) below threshold (${this.config.safetyThreshold})`);
                if (!this.config.dryRun) {
                    throw new Error(`Batch safety score too low: ${batch.safetyScore}`);
                }
            }
            // Generate intelligence systems
            if (this.config.dryRun) {
                console.log('üîç DRY RUN: Simulating intelligence system generation...');
                result.systemsGenerated = batch.transformationCandidates;
                result.filesProcessed = batch.files.length;
            }
            else {
                console.log('‚ö° Generating intelligence systems...');
                const generationResults = await this.generator.generateIntelligenceSystems(batch.files);
                result.generationResults = generationResults;
                result.systemsGenerated = generationResults.length;
                result.filesProcessed = batch.files.length;
            }
            // Validate after generation
            if (this.config.buildValidationEnabled && !this.config.dryRun) {
                console.log('üîç Validating build after generation...');
                const validation = await this.validateBuild();
                if (!validation.buildSuccess) {
                    throw new Error('Build validation failed after generation');
                }
            }
            result.success = true;
            console.log(`‚úÖ Batch ${batch.id} completed successfully`);
            console.log(`   Systems generated: ${result.systemsGenerated}`);
            console.log(`   Files processed: ${result.filesProcessed}`);
        }
        catch (error) {
            console.error(`‚ùå Batch ${batch.id} failed:`, error.message);
            const transformationError = {
                type: TransformationErrorType.GENERATION_FAILED,
                message: error.message,
                severity: ErrorSeverity.HIGH,
                recoverable: true,
                timestamp: new Date()
            };
            result.errors.push(transformationError);
            this.logError(transformationError);
            // Attempt rollback
            if (this.config.rollbackOnFailure && checkpointId && !this.config.dryRun) {
                try {
                    console.log('üîÑ Attempting rollback...');
                    await this.safetyProtocol.rollbackToCheckpoint(checkpointId);
                    result.rollbackPerformed = true;
                    console.log('‚úÖ Rollback completed successfully');
                }
                catch (rollbackError) {
                    console.error('‚ùå Rollback failed:', rollbackError.message);
                    result.errors.push({
                        type: TransformationErrorType.ROLLBACK_FAILED,
                        message: rollbackError.message,
                        severity: ErrorSeverity.CRITICAL,
                        recoverable: false,
                        timestamp: new Date()
                    });
                }
            }
        }
        const endTime = Date.now();
        result.duration = (endTime - startTime) / 1000;
        return result;
    }
    /**
     * Perform final validation
     */
    async performFinalValidation() {
        try {
            if (this.config.dryRun) {
                console.log('üîç DRY RUN: Skipping final validation');
                return;
            }
            console.log('üîç Performing final build validation...');
            const buildValidation = await this.validateBuild();
            if (!buildValidation.buildSuccess) {
                throw new Error('Final build validation failed');
            }
            if (this.config.testValidationEnabled) {
                console.log('üß™ Performing final test validation...');
                const testValidation = await this.validateTests();
                if (!testValidation.testSuccess) {
                    console.warn('‚ö†Ô∏è  Some tests failed, but transformation completed');
                }
            }
            console.log('‚úÖ Final validation completed');
        }
        catch (error) {
            this.logError({
                type: TransformationErrorType.VALIDATION_FAILED,
                message: `Final validation failed: ${error.message}`,
                severity: ErrorSeverity.HIGH,
                recoverable: true,
                timestamp: new Date()
            });
            throw error;
        }
    }
    /**
     * Validate build
     */
    async validateBuild() {
        const startTime = Date.now();
        try {
            const output = (0, child_process_1.execSync)('yarn build', {
                encoding: 'utf-8',
                timeout: 60000,
                stdio: 'pipe'
            });
            const endTime = Date.now();
            return {
                buildSuccess: true,
                testSuccess: true,
                lintSuccess: true,
                errors: [],
                warnings: [],
                duration: (endTime - startTime) / 1000
            };
        }
        catch (error) {
            const endTime = Date.now();
            return {
                buildSuccess: false,
                testSuccess: false,
                lintSuccess: false,
                errors: [error.message],
                warnings: [],
                duration: (endTime - startTime) / 1000
            };
        }
    }
    /**
     * Validate tests
     */
    async validateTests() {
        const startTime = Date.now();
        try {
            const output = (0, child_process_1.execSync)('yarn test --passWithNoTests', {
                encoding: 'utf-8',
                timeout: 120000,
                stdio: 'pipe'
            });
            const endTime = Date.now();
            return {
                buildSuccess: true,
                testSuccess: true,
                lintSuccess: true,
                errors: [],
                warnings: [],
                duration: (endTime - startTime) / 1000
            };
        }
        catch (error) {
            const endTime = Date.now();
            return {
                buildSuccess: false,
                testSuccess: false,
                lintSuccess: false,
                errors: [error.message],
                warnings: [],
                duration: (endTime - startTime) / 1000
            };
        }
    }
    /**
     * Handle critical failure
     */
    async handleCriticalFailure(error) {
        console.error('üí• Critical failure detected, initiating emergency procedures...');
        try {
            if (!this.config.dryRun) {
                await this.safetyProtocol.emergencyRollback();
                console.log('‚úÖ Emergency rollback completed');
            }
        }
        catch (rollbackError) {
            console.error('‚ùå Emergency rollback failed:', rollbackError.message);
        }
        // Save error log
        const errorLogPath = path.join(this.config.backupDirectory, `error-log-${Date.now()}.json`);
        await fs.promises.writeFile(errorLogPath, JSON.stringify({
            timestamp: new Date().toISOString(),
            error: error.message,
            stack: error.stack,
            transformationLog: this.transformationLog
        }, null, 2));
        console.log(`üìù Error log saved to: ${errorLogPath}`);
    }
    /**
     * Generate transformation summary
     */
    generateTransformationSummary(results, totalDuration) {
        const successfulBatches = results.filter(r => r.success).length;
        const failedBatches = results.length - successfulBatches;
        const totalFilesProcessed = results.reduce((sum, r) => sum + r.filesProcessed, 0);
        const totalSystemsGenerated = results.reduce((sum, r) => sum + r.systemsGenerated, 0);
        const totalErrors = results.reduce((sum, r) => sum + r.errors.length, 0);
        const totalWarnings = results.reduce((sum, r) => sum + r.warnings.length, 0);
        const averageBatchDuration = results.length > 0 ?
            results.reduce((sum, r) => sum + r.duration, 0) / results.length : 0;
        const successRate = results.length > 0 ? (successfulBatches / results.length) * 100 : 0;
        // Generate generation summary from all results
        const allGenerationResults = results.flatMap(r => r.generationResults);
        const generationSummary = allGenerationResults.length > 0 ?
            this.generator.generateSummary(allGenerationResults) : {
            totalSystemsGenerated: 0,
            totalCapabilitiesAdded: 0,
            totalIntegrationPoints: 0,
            averageComplexity: 0,
            estimatedTotalValue: 0,
            generationsByCategory: {}
        };
        return {
            totalBatches: results.length,
            successfulBatches,
            failedBatches,
            totalFilesProcessed,
            totalSystemsGenerated,
            totalErrors,
            totalWarnings,
            totalDuration,
            averageBatchDuration,
            successRate,
            generationSummary
        };
    }
    /**
     * Display transformation summary
     */
    displaySummary(summary) {
        console.log('\nüìä TRANSFORMATION CAMPAIGN SUMMARY');
        console.log('==================================');
        console.log(`Total batches: ${summary.totalBatches}`);
        console.log(`Successful batches: ${summary.successfulBatches}`);
        console.log(`Failed batches: ${summary.failedBatches}`);
        console.log(`Success rate: ${summary.successRate.toFixed(1)}%`);
        console.log(`Total files processed: ${summary.totalFilesProcessed}`);
        console.log(`Total systems generated: ${summary.totalSystemsGenerated}`);
        console.log(`Total errors: ${summary.totalErrors}`);
        console.log(`Total warnings: ${summary.totalWarnings}`);
        console.log(`Total duration: ${summary.totalDuration.toFixed(2)}s`);
        console.log(`Average batch duration: ${summary.averageBatchDuration.toFixed(2)}s`);
        console.log('\nüß† INTELLIGENCE GENERATION SUMMARY');
        console.log('==================================');
        console.log(`Total capabilities added: ${summary.generationSummary.totalCapabilitiesAdded}`);
        console.log(`Total integration points: ${summary.generationSummary.totalIntegrationPoints}`);
        console.log(`Average complexity: ${summary.generationSummary.averageComplexity.toFixed(1)}`);
        console.log(`Estimated total value: ${summary.generationSummary.estimatedTotalValue}`);
        if (Object.keys(summary.generationSummary.generationsByCategory).length > 0) {
            console.log('\nGeneration by category:');
            Object.entries(summary.generationSummary.generationsByCategory).forEach(([category, count]) => {
                console.log(`  ${category}: ${count}`);
            });
        }
    }
    /**
     * Log transformation error
     */
    logError(error) {
        this.transformationLog.push(error);
        const severityEmoji = {
            [ErrorSeverity.LOW]: 'üü°',
            [ErrorSeverity.MEDIUM]: 'üü†',
            [ErrorSeverity.HIGH]: 'üî¥',
            [ErrorSeverity.CRITICAL]: 'üí•'
        }[error.severity];
        console.error(`${severityEmoji} [${error.type}] ${error.message}`);
    }
    /**
     * Ensure directory exists
     */
    async ensureDirectory(dirPath) {
        try {
            await fs.promises.access(dirPath);
        }
        catch (_a) {
            await fs.promises.mkdir(dirPath, { recursive: true });
        }
    }
    /**
     * Get transformation configuration
     */
    getConfig() {
        return { ...this.config };
    }
    /**
     * Get transformation log
     */
    getTransformationLog() {
        return [...this.transformationLog];
    }
    /**
     * Clear transformation log
     */
    clearTransformationLog() {
        this.transformationLog.length = 0;
    }
}
exports.ExportTransformationEngine = ExportTransformationEngine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9FeHBvcnRUcmFuc2Zvcm1hdGlvbkVuZ2luZS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILHVDQUF5QjtBQUN6QiwyQ0FBNkI7QUFDN0IsaURBQXlDO0FBQ3pDLGlFQUE0RjtBQUM1Rix1RkFBeUg7QUFDekgscURBQWtEO0FBQ2xELHVEQUFvRDtBQW9FcEQsSUFBWSxhQUlYO0FBSkQsV0FBWSxhQUFhO0lBQ3ZCLDhCQUFhLENBQUE7SUFDYixrQ0FBaUIsQ0FBQTtJQUNqQiw0QkFBVyxDQUFBO0FBQ2IsQ0FBQyxFQUpXLGFBQWEsNkJBQWIsYUFBYSxRQUl4QjtBQUVELElBQVksdUJBUVg7QUFSRCxXQUFZLHVCQUF1QjtJQUNqQyw4REFBbUMsQ0FBQTtJQUNuQyxrRUFBdUMsQ0FBQTtJQUN2Qyx3REFBNkIsQ0FBQTtJQUM3QixzREFBMkIsQ0FBQTtJQUMzQixrRUFBdUMsQ0FBQTtJQUN2Qyw4REFBbUMsQ0FBQTtJQUNuQyxrRUFBdUMsQ0FBQTtBQUN6QyxDQUFDLEVBUlcsdUJBQXVCLHVDQUF2Qix1QkFBdUIsUUFRbEM7QUFFRCxJQUFZLGFBS1g7QUFMRCxXQUFZLGFBQWE7SUFDdkIsNEJBQVcsQ0FBQTtJQUNYLGtDQUFpQixDQUFBO0lBQ2pCLDhCQUFhLENBQUE7SUFDYixzQ0FBcUIsQ0FBQTtBQUN2QixDQUFDLEVBTFcsYUFBYSw2QkFBYixhQUFhLFFBS3hCO0FBRUQsTUFBYSwwQkFBMEI7SUFRckMsWUFBWSxTQUF3QyxFQUFFO1FBQ3BELElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixTQUFTLEVBQUUsRUFBRTtZQUNiLGVBQWUsRUFBRSxFQUFFO1lBQ25CLHNCQUFzQixFQUFFLElBQUk7WUFDNUIscUJBQXFCLEVBQUUsSUFBSTtZQUMzQixpQkFBaUIsRUFBRSxJQUFJO1lBQ3ZCLGVBQWUsRUFBRSxrQkFBa0I7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YW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9FeHBvcnRUcmFuc2Zvcm1hdGlvbkVuZ2luZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEV4cG9ydCBUcmFuc2Zvcm1hdGlvbiBFbmdpbmVcbiAqIFBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gLSBQaGFzZSAzIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIE9yY2hlc3RyYXRlcyB0aGUgY29tcGxldGUgdHJhbnNmb3JtYXRpb24gb2YgdW51c2VkIGV4cG9ydHMgaW50b1xuICogZW50ZXJwcmlzZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtcyB3aXRoIGNvbXByZWhlbnNpdmUgc2FmZXR5IHByb3RvY29scy5cbiAqL1xuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IFVudXNlZEV4cG9ydEFuYWx5emVyLCBGaWxlQW5hbHlzaXMsIEFuYWx5c2lzUmVzdWx0IH0gZnJvbSAnLi9VbnVzZWRFeHBvcnRBbmFseXplcic7XG5pbXBvcnQgeyBFbnRlcnByaXNlSW50ZWxsaWdlbmNlR2VuZXJhdG9yLCBHZW5lcmF0aW9uUmVzdWx0LCBHZW5lcmF0aW9uU3VtbWFyeSB9IGZyb20gJy4vRW50ZXJwcmlzZUludGVsbGlnZW5jZUdlbmVyYXRvcic7XG5pbXBvcnQgeyBTYWZldHlQcm90b2NvbCB9IGZyb20gJy4vU2FmZXR5UHJvdG9jb2wnO1xuaW1wb3J0IHsgUHJvZ3Jlc3NUcmFja2VyIH0gZnJvbSAnLi9Qcm9ncmVzc1RyYWNrZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zZm9ybWF0aW9uQ29uZmlnIHtcbiAgYmF0Y2hTaXplOiBudW1iZXI7XG4gIHNhZmV0eVRocmVzaG9sZDogbnVtYmVyO1xuICBidWlsZFZhbGlkYXRpb25FbmFibGVkOiBib29sZWFuO1xuICB0ZXN0VmFsaWRhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG4gIHJvbGxiYWNrT25GYWlsdXJlOiBib29sZWFuO1xuICBvdXRwdXREaXJlY3Rvcnk6IHN0cmluZztcbiAgYmFja3VwRGlyZWN0b3J5OiBzdHJpbmc7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgZHJ5UnVuOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zZm9ybWF0aW9uQmF0Y2gge1xuICBpZDogc3RyaW5nO1xuICBmaWxlczogRmlsZUFuYWx5c2lzW107XG4gIHByaW9yaXR5OiBCYXRjaFByaW9yaXR5O1xuICBlc3RpbWF0ZWREdXJhdGlvbjogbnVtYmVyO1xuICBzYWZldHlTY29yZTogbnVtYmVyO1xuICB0cmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2Zvcm1hdGlvblJlc3VsdCB7XG4gIGJhdGNoSWQ6IHN0cmluZztcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZmlsZXNQcm9jZXNzZWQ6IG51bWJlcjtcbiAgc3lzdGVtc0dlbmVyYXRlZDogbnVtYmVyO1xuICBlcnJvcnM6IFRyYW5zZm9ybWF0aW9uRXJyb3JbXTtcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xuICBkdXJhdGlvbjogbnVtYmVyO1xuICByb2xsYmFja1BlcmZvcm1lZDogYm9vbGVhbjtcbiAgZ2VuZXJhdGlvblJlc3VsdHM6IEdlbmVyYXRpb25SZXN1bHRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2Zvcm1hdGlvblN1bW1hcnkge1xuICB0b3RhbEJhdGNoZXM6IG51bWJlcjtcbiAgc3VjY2Vzc2Z1bEJhdGNoZXM6IG51bWJlcjtcbiAgZmFpbGVkQmF0Y2hlczogbnVtYmVyO1xuICB0b3RhbEZpbGVzUHJvY2Vzc2VkOiBudW1iZXI7XG4gIHRvdGFsU3lzdGVtc0dlbmVyYXRlZDogbnVtYmVyO1xuICB0b3RhbEVycm9yczogbnVtYmVyO1xuICB0b3RhbFdhcm5pbmdzOiBudW1iZXI7XG4gIHRvdGFsRHVyYXRpb246IG51bWJlcjtcbiAgYXZlcmFnZUJhdGNoRHVyYXRpb246IG51bWJlcjtcbiAgc3VjY2Vzc1JhdGU6IG51bWJlcjtcbiAgZ2VuZXJhdGlvblN1bW1hcnk6IEdlbmVyYXRpb25TdW1tYXJ5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zZm9ybWF0aW9uRXJyb3Ige1xuICB0eXBlOiBUcmFuc2Zvcm1hdGlvbkVycm9yVHlwZTtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBmaWxlUGF0aD86IHN0cmluZztcbiAgZXhwb3J0TmFtZT86IHN0cmluZztcbiAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XG4gIHJlY292ZXJhYmxlOiBib29sZWFuO1xuICB0aW1lc3RhbXA6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XG4gIGJ1aWxkU3VjY2VzczogYm9vbGVhbjtcbiAgdGVzdFN1Y2Nlc3M6IGJvb2xlYW47XG4gIGxpbnRTdWNjZXNzOiBib29sZWFuO1xuICBlcnJvcnM6IHN0cmluZ1tdO1xuICB3YXJuaW5nczogc3RyaW5nW107XG4gIGR1cmF0aW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBlbnVtIEJhdGNoUHJpb3JpdHkge1xuICBISUdIID0gJ0hJR0gnLFxuICBNRURJVU0gPSAnTUVESVVNJyxcbiAgTE9XID0gJ0xPVydcbn1cblxuZXhwb3J0IGVudW0gVHJhbnNmb3JtYXRpb25FcnJvclR5cGUge1xuICBBTkFMWVNJU19GQUlMRUQgPSAnQU5BTFlTSVNfRkFJTEVEJyxcbiAgR0VORVJBVElPTl9GQUlMRUQgPSAnR0VORVJBVElPTl9GQUlMRUQnLFxuICBCVUlMRF9GQUlMRUQgPSAnQlVJTERfRkFJTEVEJyxcbiAgVEVTVF9GQUlMRUQgPSAnVEVTVF9GQUlMRUQnLFxuICBGSUxFX1dSSVRFX0ZBSUxFRCA9ICdGSUxFX1dSSVRFX0ZBSUxFRCcsXG4gIFJPTExCQUNLX0ZBSUxFRCA9ICdST0xMQkFDS19GQUlMRUQnLFxuICBWQUxJREFUSU9OX0ZBSUxFRCA9ICdWQUxJREFUSU9OX0ZBSUxFRCdcbn1cblxuZXhwb3J0IGVudW0gRXJyb3JTZXZlcml0eSB7XG4gIExPVyA9ICdMT1cnLFxuICBNRURJVU0gPSAnTUVESVVNJyxcbiAgSElHSCA9ICdISUdIJyxcbiAgQ1JJVElDQUwgPSAnQ1JJVElDQUwnXG59XG5cbmV4cG9ydCBjbGFzcyBFeHBvcnRUcmFuc2Zvcm1hdGlvbkVuZ2luZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29uZmlnOiBUcmFuc2Zvcm1hdGlvbkNvbmZpZztcbiAgcHJpdmF0ZSByZWFkb25seSBhbmFseXplcjogVW51c2VkRXhwb3J0QW5hbHl6ZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgZ2VuZXJhdG9yOiBFbnRlcnByaXNlSW50ZWxsaWdlbmNlR2VuZXJhdG9yO1xuICBwcml2YXRlIHJlYWRvbmx5IHNhZmV0eVByb3RvY29sOiBTYWZldHlQcm90b2NvbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwcm9ncmVzc1RyYWNrZXI6IFByb2dyZXNzVHJhY2tlcjtcbiAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2Zvcm1hdGlvbkxvZzogVHJhbnNmb3JtYXRpb25FcnJvcltdO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUGFydGlhbDxUcmFuc2Zvcm1hdGlvbkNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgYmF0Y2hTaXplOiAxMCxcbiAgICAgIHNhZmV0eVRocmVzaG9sZDogODAsXG4gICAgICBidWlsZFZhbGlkYXRpb25FbmFibGVkOiB0cnVlLFxuICAgICAgdGVzdFZhbGlkYXRpb25FbmFibGVkOiB0cnVlLFxuICAgICAgcm9sbGJhY2tPbkZhaWx1cmU6IHRydWUsXG4gICAgICBvdXRwdXREaXJlY3Rvcnk6ICdzcmMvaW50ZWxsaWdlbmNlJyxcbiAgICAgIGJhY2t1cERpcmVjdG9yeTogJy50cmFuc2Zvcm1hdGlvbi1iYWNrdXBzJyxcbiAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICBkcnlSdW46IGZhbHNlLFxuICAgICAgLi4uY29uZmlnXG4gICAgfTtcblxuICAgIHRoaXMuYW5hbHl6ZXIgPSBuZXcgVW51c2VkRXhwb3J0QW5hbHl6ZXIoKTtcbiAgICB0aGlzLmdlbmVyYXRvciA9IG5ldyBFbnRlcnByaXNlSW50ZWxsaWdlbmNlR2VuZXJhdG9yKHRoaXMuY29uZmlnLm91dHB1dERpcmVjdG9yeSk7XG4gICAgdGhpcy5zYWZldHlQcm90b2NvbCA9IG5ldyBTYWZldHlQcm90b2NvbCgpO1xuICAgIHRoaXMucHJvZ3Jlc3NUcmFja2VyID0gbmV3IFByb2dyZXNzVHJhY2tlcigpO1xuICAgIHRoaXMudHJhbnNmb3JtYXRpb25Mb2cgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGNvbXBsZXRlIHRyYW5zZm9ybWF0aW9uIGNhbXBhaWduXG4gICAqL1xuICBhc3luYyBleGVjdXRlVHJhbnNmb3JtYXRpb24oKTogUHJvbWlzZTxUcmFuc2Zvcm1hdGlvblN1bW1hcnk+IHtcbiAgICBjb25zb2xlLmxvZygn8J+agCBTdGFydGluZyBFeHBvcnQgVHJhbnNmb3JtYXRpb24gQ2FtcGFpZ24uLi5cXG4nKTtcbiAgICBcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBQaGFzZSAxOiBBbmFseXNpc1xuICAgICAgY29uc29sZS5sb2coJ/Cfk4ogUGhhc2UgMTogQW5hbHl6aW5nIHVudXNlZCBleHBvcnRzLi4uJyk7XG4gICAgICBjb25zdCBhbmFseXNpc1Jlc3VsdCA9IGF3YWl0IHRoaXMucGVyZm9ybUFuYWx5c2lzKCk7XG4gICAgICBcbiAgICAgIC8vIFBoYXNlIDI6IEJhdGNoIFBsYW5uaW5nXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBQaGFzZSAyOiBQbGFubmluZyB0cmFuc2Zvcm1hdGlvbiBiYXRjaGVzLi4uJyk7XG4gICAgICBjb25zdCBiYXRjaGVzID0gYXdhaXQgdGhpcy5wbGFuVHJhbnNmb3JtYXRpb25CYXRjaGVzKGFuYWx5c2lzUmVzdWx0KTtcbiAgICAgIFxuICAgICAgLy8gUGhhc2UgMzogU2FmZXR5IFByZXBhcmF0aW9uXG4gICAgICBjb25zb2xlLmxvZygn8J+boe+4jyAgUGhhc2UgMzogUHJlcGFyaW5nIHNhZmV0eSBwcm90b2NvbHMuLi4nKTtcbiAgICAgIGF3YWl0IHRoaXMucHJlcGFyZVNhZmV0eVByb3RvY29scygpO1xuICAgICAgXG4gICAgICAvLyBQaGFzZSA0OiBCYXRjaCBFeGVjdXRpb25cbiAgICAgIGNvbnNvbGUubG9nKCfimqEgUGhhc2UgNDogRXhlY3V0aW5nIHRyYW5zZm9ybWF0aW9uIGJhdGNoZXMuLi4nKTtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLmV4ZWN1dGVCYXRjaGVzKGJhdGNoZXMpO1xuICAgICAgXG4gICAgICAvLyBQaGFzZSA1OiBGaW5hbCBWYWxpZGF0aW9uXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFBoYXNlIDU6IEZpbmFsIHZhbGlkYXRpb24gYW5kIGNsZWFudXAuLi4nKTtcbiAgICAgIGF3YWl0IHRoaXMucGVyZm9ybUZpbmFsVmFsaWRhdGlvbigpO1xuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSAoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyAxMDAwO1xuICAgICAgXG4gICAgICBjb25zdCBzdW1tYXJ5ID0gdGhpcy5nZW5lcmF0ZVRyYW5zZm9ybWF0aW9uU3VtbWFyeShyZXN1bHRzLCB0b3RhbER1cmF0aW9uKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1xcbvCfjokgRXhwb3J0IFRyYW5zZm9ybWF0aW9uIENhbXBhaWduIGNvbXBsZXRlZCEnKTtcbiAgICAgIHRoaXMuZGlzcGxheVN1bW1hcnkoc3VtbWFyeSk7XG4gICAgICBcbiAgICAgIHJldHVybiBzdW1tYXJ5O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBUcmFuc2Zvcm1hdGlvbiBjYW1wYWlnbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDcml0aWNhbEZhaWx1cmUoZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gdW51c2VkIGV4cG9ydCBhbmFseXNpc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtQW5hbHlzaXMoKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFuYWx5emVyLmFuYWx5emVVbnVzZWRFeHBvcnRzKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQW5hbHlzaXMgY29tcGxldGVkOmApO1xuICAgICAgY29uc29sZS5sb2coYCAgIC0gRmlsZXMgYW5hbHl6ZWQ6ICR7cmVzdWx0LnRvdGFsRmlsZXN9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgLSBVbnVzZWQgZXhwb3J0cyBmb3VuZDogJHtyZXN1bHQudG90YWxVbnVzZWRFeHBvcnRzfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIC0gSGlnaCBwcmlvcml0eSBmaWxlczogJHtyZXN1bHQuaGlnaFByaW9yaXR5RmlsZXMubGVuZ3RofWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIC0gTWVkaXVtIHByaW9yaXR5IGZpbGVzOiAke3Jlc3VsdC5tZWRpdW1Qcmlvcml0eUZpbGVzLmxlbmd0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgICAtIExvdyBwcmlvcml0eSBmaWxlczogJHtyZXN1bHQubG93UHJpb3JpdHlGaWxlcy5sZW5ndGh9YCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2dFcnJvcih7XG4gICAgICAgIHR5cGU6IFRyYW5zZm9ybWF0aW9uRXJyb3JUeXBlLkFOQUxZU0lTX0ZBSUxFRCxcbiAgICAgICAgbWVzc2FnZTogYEFuYWx5c2lzIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkNSSVRJQ0FMLFxuICAgICAgICByZWNvdmVyYWJsZTogZmFsc2UsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGxhbiB0cmFuc2Zvcm1hdGlvbiBiYXRjaGVzIGJhc2VkIG9uIGFuYWx5c2lzIHJlc3VsdHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGxhblRyYW5zZm9ybWF0aW9uQmF0Y2hlcyhhbmFseXNpc1Jlc3VsdDogQW5hbHlzaXNSZXN1bHQpOiBQcm9taXNlPFRyYW5zZm9ybWF0aW9uQmF0Y2hbXT4ge1xuICAgIGNvbnN0IGJhdGNoZXM6IFRyYW5zZm9ybWF0aW9uQmF0Y2hbXSA9IFtdO1xuICAgIFxuICAgIC8vIENyZWF0ZSBiYXRjaGVzIGZvciBoaWdoIHByaW9yaXR5IGZpbGVzXG4gICAgY29uc3QgaGlnaFByaW9yaXR5QmF0Y2hlcyA9IHRoaXMuY3JlYXRlQmF0Y2hlc0Zyb21GaWxlcyhcbiAgICAgIGFuYWx5c2lzUmVzdWx0LmhpZ2hQcmlvcml0eUZpbGVzLFxuICAgICAgQmF0Y2hQcmlvcml0eS5ISUdILFxuICAgICAgJ2hpZ2gnXG4gICAgKTtcbiAgICBiYXRjaGVzLnB1c2goLi4uaGlnaFByaW9yaXR5QmF0Y2hlcyk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGJhdGNoZXMgZm9yIG1lZGl1bSBwcmlvcml0eSBmaWxlc1xuICAgIGNvbnN0IG1lZGl1bVByaW9yaXR5QmF0Y2hlcyA9IHRoaXMuY3JlYXRlQmF0Y2hlc0Zyb21GaWxlcyhcbiAgICAgIGFuYWx5c2lzUmVzdWx0Lm1lZGl1bVByaW9yaXR5RmlsZXMsXG4gICAgICBCYXRjaFByaW9yaXR5Lk1FRElVTSxcbiAgICAgICdtZWRpdW0nXG4gICAgKTtcbiAgICBiYXRjaGVzLnB1c2goLi4ubWVkaXVtUHJpb3JpdHlCYXRjaGVzKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYmF0Y2hlcyBmb3IgbG93IHByaW9yaXR5IGZpbGVzXG4gICAgY29uc3QgbG93UHJpb3JpdHlCYXRjaGVzID0gdGhpcy5jcmVhdGVCYXRjaGVzRnJvbUZpbGVzKFxuICAgICAgYW5hbHlzaXNSZXN1bHQubG93UHJpb3JpdHlGaWxlcyxcbiAgICAgIEJhdGNoUHJpb3JpdHkuTE9XLFxuICAgICAgJ2xvdydcbiAgICApO1xuICAgIGJhdGNoZXMucHVzaCguLi5sb3dQcmlvcml0eUJhdGNoZXMpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDinIUgUGxhbm5lZCAke2JhdGNoZXMubGVuZ3RofSB0cmFuc2Zvcm1hdGlvbiBiYXRjaGVzOmApO1xuICAgIGNvbnNvbGUubG9nKGAgICAtIEhpZ2ggcHJpb3JpdHk6ICR7aGlnaFByaW9yaXR5QmF0Y2hlcy5sZW5ndGh9IGJhdGNoZXNgKTtcbiAgICBjb25zb2xlLmxvZyhgICAgLSBNZWRpdW0gcHJpb3JpdHk6ICR7bWVkaXVtUHJpb3JpdHlCYXRjaGVzLmxlbmd0aH0gYmF0Y2hlc2ApO1xuICAgIGNvbnNvbGUubG9nKGAgICAtIExvdyBwcmlvcml0eTogJHtsb3dQcmlvcml0eUJhdGNoZXMubGVuZ3RofSBiYXRjaGVzYCk7XG4gICAgXG4gICAgcmV0dXJuIGJhdGNoZXM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGJhdGNoZXMgZnJvbSBmaWxlc1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVCYXRjaGVzRnJvbUZpbGVzKFxuICAgIGZpbGVzOiBGaWxlQW5hbHlzaXNbXSxcbiAgICBwcmlvcml0eTogQmF0Y2hQcmlvcml0eSxcbiAgICBwcmlvcml0eUxhYmVsOiBzdHJpbmdcbiAgKTogVHJhbnNmb3JtYXRpb25CYXRjaFtdIHtcbiAgICBjb25zdCBiYXRjaGVzOiBUcmFuc2Zvcm1hdGlvbkJhdGNoW10gPSBbXTtcbiAgICBjb25zdCBiYXRjaFNpemUgPSB0aGlzLmNvbmZpZy5iYXRjaFNpemU7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBjb25zdCBiYXRjaEZpbGVzID0gZmlsZXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICBjb25zdCBiYXRjaE51bWJlciA9IE1hdGguZmxvb3IoaSAvIGJhdGNoU2l6ZSkgKyAxO1xuICAgICAgXG4gICAgICBjb25zdCBiYXRjaDogVHJhbnNmb3JtYXRpb25CYXRjaCA9IHtcbiAgICAgICAgaWQ6IGAke3ByaW9yaXR5TGFiZWx9LWJhdGNoLSR7YmF0Y2hOdW1iZXJ9YCxcbiAgICAgICAgZmlsZXM6IGJhdGNoRmlsZXMsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBlc3RpbWF0ZWREdXJhdGlvbjogdGhpcy5lc3RpbWF0ZUJhdGNoRHVyYXRpb24oYmF0Y2hGaWxlcyksXG4gICAgICAgIHNhZmV0eVNjb3JlOiB0aGlzLmNhbGN1bGF0ZUJhdGNoU2FmZXR5U2NvcmUoYmF0Y2hGaWxlcyksXG4gICAgICAgIHRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlczogYmF0Y2hGaWxlcy5yZWR1Y2UoKHN1bSwgZikgPT4gc3VtICsgZi50cmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZXMubGVuZ3RoLCAwKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgYmF0Y2hlcy5wdXNoKGJhdGNoKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGJhdGNoZXM7XG4gIH1cblxuICAvKipcbiAgICogRXN0aW1hdGUgYmF0Y2ggcHJvY2Vzc2luZyBkdXJhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBlc3RpbWF0ZUJhdGNoRHVyYXRpb24oZmlsZXM6IEZpbGVBbmFseXNpc1tdKTogbnVtYmVyIHtcbiAgICAvLyBCYXNlIHRpbWUgcGVyIGZpbGUgKyBjb21wbGV4aXR5IGZhY3RvclxuICAgIGNvbnN0IGJhc2VUaW1lUGVyRmlsZSA9IDI7IC8vIHNlY29uZHNcbiAgICBjb25zdCBjb21wbGV4aXR5RmFjdG9yID0gZmlsZXMucmVkdWNlKChzdW0sIGYpID0+IHtcbiAgICAgIHJldHVybiBzdW0gKyBmLnRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlcy5yZWR1Y2UoKGNhbmRpZGF0ZVN1bSwgYykgPT4ge1xuICAgICAgICBjb25zdCBjb21wbGV4aXR5TXVsdGlwbGllciA9IHtcbiAgICAgICAgICAnU0lNUExFJzogMSxcbiAgICAgICAgICAnTU9ERVJBVEUnOiAxLjUsXG4gICAgICAgICAgJ0NPTVBMRVgnOiAyLFxuICAgICAgICAgICdWRVJZX0NPTVBMRVgnOiAzXG4gICAgICAgIH1bYy50cmFuc2Zvcm1hdGlvbkNvbXBsZXhpdHldIHx8IDE7XG4gICAgICAgIHJldHVybiBjYW5kaWRhdGVTdW0gKyBjb21wbGV4aXR5TXVsdGlwbGllcjtcbiAgICAgIH0sIDApO1xuICAgIH0sIDApO1xuICAgIFxuICAgIHJldHVybiBNYXRoLmNlaWwoZmlsZXMubGVuZ3RoICogYmFzZVRpbWVQZXJGaWxlICsgY29tcGxleGl0eUZhY3Rvcik7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGJhdGNoIHNhZmV0eSBzY29yZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVCYXRjaFNhZmV0eVNjb3JlKGZpbGVzOiBGaWxlQW5hbHlzaXNbXSk6IG51bWJlciB7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDEwMDtcbiAgICBcbiAgICBjb25zdCBhdmVyYWdlU2FmZXR5U2NvcmUgPSBmaWxlcy5yZWR1Y2UoKHN1bSwgZikgPT4gc3VtICsgZi5zYWZldHlTY29yZSwgMCkgLyBmaWxlcy5sZW5ndGg7XG4gICAgY29uc3QgY29tcGxleGl0eVBlbmFsdHkgPSBmaWxlcy5yZWR1Y2UoKHBlbmFsdHksIGYpID0+IHtcbiAgICAgIGNvbnN0IGhpZ2hDb21wbGV4aXR5Q2FuZGlkYXRlcyA9IGYudHJhbnNmb3JtYXRpb25DYW5kaWRhdGVzLmZpbHRlcihjID0+IFxuICAgICAgICBjLnRyYW5zZm9ybWF0aW9uQ29tcGxleGl0eSA9PT0gJ0NPTVBMRVgnIHx8IGMudHJhbnNmb3JtYXRpb25Db21wbGV4aXR5ID09PSAnVkVSWV9DT01QTEVYJ1xuICAgICAgKS5sZW5ndGg7XG4gICAgICByZXR1cm4gcGVuYWx0eSArIChoaWdoQ29tcGxleGl0eUNhbmRpZGF0ZXMgKiAyKTtcbiAgICB9LCAwKTtcbiAgICBcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBhdmVyYWdlU2FmZXR5U2NvcmUgLSBjb21wbGV4aXR5UGVuYWx0eSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgc2FmZXR5IHByb3RvY29sc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlU2FmZXR5UHJvdG9jb2xzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYmFja3VwIGRpcmVjdG9yeVxuICAgICAgYXdhaXQgdGhpcy5lbnN1cmVEaXJlY3RvcnkodGhpcy5jb25maWcuYmFja3VwRGlyZWN0b3J5KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHNhZmV0eSBjaGVja3BvaW50XG4gICAgICBjb25zdCBjaGVja3BvaW50SWQgPSBhd2FpdCB0aGlzLnNhZmV0eVByb3RvY29sLmNyZWF0ZVNhZmV0eUNoZWNrcG9pbnQoJ3RyYW5zZm9ybWF0aW9uLXN0YXJ0Jyk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFNhZmV0eSBjaGVja3BvaW50IGNyZWF0ZWQ6ICR7Y2hlY2twb2ludElkfWApO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSBidWlsZCBiZWZvcmUgc3RhcnRpbmdcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5idWlsZFZhbGlkYXRpb25FbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IGJ1aWxkVmFsaWQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlQnVpbGQoKTtcbiAgICAgICAgaWYgKCFidWlsZFZhbGlkLmJ1aWxkU3VjY2Vzcykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnVpbGQgdmFsaWRhdGlvbiBmYWlsZWQgYmVmb3JlIHRyYW5zZm9ybWF0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBQcmUtdHJhbnNmb3JtYXRpb24gYnVpbGQgdmFsaWRhdGlvbiBwYXNzZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZ0Vycm9yKHtcbiAgICAgICAgdHlwZTogVHJhbnNmb3JtYXRpb25FcnJvclR5cGUuVkFMSURBVElPTl9GQUlMRUQsXG4gICAgICAgIG1lc3NhZ2U6IGBTYWZldHkgcHJlcGFyYXRpb24gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuQ1JJVElDQUwsXG4gICAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIHRyYW5zZm9ybWF0aW9uIGJhdGNoZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUJhdGNoZXMoYmF0Y2hlczogVHJhbnNmb3JtYXRpb25CYXRjaFtdKTogUHJvbWlzZTxUcmFuc2Zvcm1hdGlvblJlc3VsdFtdPiB7XG4gICAgY29uc3QgcmVzdWx0czogVHJhbnNmb3JtYXRpb25SZXN1bHRbXSA9IFtdO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYmF0Y2ggPSBiYXRjaGVzW2ldO1xuICAgICAgY29uc29sZS5sb2coYFxcbvCflIQgUHJvY2Vzc2luZyBiYXRjaCAke2kgKyAxfS8ke2JhdGNoZXMubGVuZ3RofTogJHtiYXRjaC5pZH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgICBQcmlvcml0eTogJHtiYXRjaC5wcmlvcml0eX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgICBGaWxlczogJHtiYXRjaC5maWxlcy5sZW5ndGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgQ2FuZGlkYXRlczogJHtiYXRjaC50cmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZXN9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgU2FmZXR5IFNjb3JlOiAke2JhdGNoLnNhZmV0eVNjb3JlfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEVzdGltYXRlZCBEdXJhdGlvbjogJHtiYXRjaC5lc3RpbWF0ZWREdXJhdGlvbn1zYCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUJhdGNoKGJhdGNoKTtcbiAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzICYmIHRoaXMuY29uZmlnLnJvbGxiYWNrT25GYWlsdXJlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gIEJhdGNoIGZhaWxlZCwgc3RvcHBpbmcgdHJhbnNmb3JtYXRpb24gY2FtcGFpZ24nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFByb2dyZXNzIHVwZGF0ZVxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAoKGkgKyAxKSAvIGJhdGNoZXMubGVuZ3RoKSAqIDEwMDtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIENhbXBhaWduIHByb2dyZXNzOiAke3Byb2dyZXNzLnRvRml4ZWQoMSl9JWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgc2luZ2xlIHRyYW5zZm9ybWF0aW9uIGJhdGNoXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVCYXRjaChiYXRjaDogVHJhbnNmb3JtYXRpb25CYXRjaCk6IFByb21pc2U8VHJhbnNmb3JtYXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHJlc3VsdDogVHJhbnNmb3JtYXRpb25SZXN1bHQgPSB7XG4gICAgICBiYXRjaElkOiBiYXRjaC5pZCxcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZmlsZXNQcm9jZXNzZWQ6IDAsXG4gICAgICBzeXN0ZW1zR2VuZXJhdGVkOiAwLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgcm9sbGJhY2tQZXJmb3JtZWQ6IGZhbHNlLFxuICAgICAgZ2VuZXJhdGlvblJlc3VsdHM6IFtdXG4gICAgfTtcbiAgICBcbiAgICBsZXQgY2hlY2twb2ludElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGJhdGNoIGNoZWNrcG9pbnRcbiAgICAgIGNoZWNrcG9pbnRJZCA9IGF3YWl0IHRoaXMuc2FmZXR5UHJvdG9jb2wuY3JlYXRlU2FmZXR5Q2hlY2twb2ludChgYmF0Y2gtJHtiYXRjaC5pZH1gKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgc2FmZXR5IHRocmVzaG9sZFxuICAgICAgaWYgKGJhdGNoLnNhZmV0eVNjb3JlIDwgdGhpcy5jb25maWcuc2FmZXR5VGhyZXNob2xkKSB7XG4gICAgICAgIHJlc3VsdC53YXJuaW5ncy5wdXNoKGBCYXRjaCBzYWZldHkgc2NvcmUgKCR7YmF0Y2guc2FmZXR5U2NvcmV9KSBiZWxvdyB0aHJlc2hvbGQgKCR7dGhpcy5jb25maWcuc2FmZXR5VGhyZXNob2xkfSlgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZHJ5UnVuKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCYXRjaCBzYWZldHkgc2NvcmUgdG9vIGxvdzogJHtiYXRjaC5zYWZldHlTY29yZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtc1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmRyeVJ1bikge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBEUlkgUlVOOiBTaW11bGF0aW5nIGludGVsbGlnZW5jZSBzeXN0ZW0gZ2VuZXJhdGlvbi4uLicpO1xuICAgICAgICByZXN1bHQuc3lzdGVtc0dlbmVyYXRlZCA9IGJhdGNoLnRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlcztcbiAgICAgICAgcmVzdWx0LmZpbGVzUHJvY2Vzc2VkID0gYmF0Y2guZmlsZXMubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoSBHZW5lcmF0aW5nIGludGVsbGlnZW5jZSBzeXN0ZW1zLi4uJyk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25SZXN1bHRzID0gYXdhaXQgdGhpcy5nZW5lcmF0b3IuZ2VuZXJhdGVJbnRlbGxpZ2VuY2VTeXN0ZW1zKGJhdGNoLmZpbGVzKTtcbiAgICAgICAgcmVzdWx0LmdlbmVyYXRpb25SZXN1bHRzID0gZ2VuZXJhdGlvblJlc3VsdHM7XG4gICAgICAgIHJlc3VsdC5zeXN0ZW1zR2VuZXJhdGVkID0gZ2VuZXJhdGlvblJlc3VsdHMubGVuZ3RoO1xuICAgICAgICByZXN1bHQuZmlsZXNQcm9jZXNzZWQgPSBiYXRjaC5maWxlcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIGFmdGVyIGdlbmVyYXRpb25cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5idWlsZFZhbGlkYXRpb25FbmFibGVkICYmICF0aGlzLmNvbmZpZy5kcnlSdW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gVmFsaWRhdGluZyBidWlsZCBhZnRlciBnZW5lcmF0aW9uLi4uJyk7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlQnVpbGQoKTtcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uLmJ1aWxkU3VjY2Vzcykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnVpbGQgdmFsaWRhdGlvbiBmYWlsZWQgYWZ0ZXIgZ2VuZXJhdGlvbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJlc3VsdC5zdWNjZXNzID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQmF0Y2ggJHtiYXRjaC5pZH0gY29tcGxldGVkIHN1Y2Nlc3NmdWxseWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIFN5c3RlbXMgZ2VuZXJhdGVkOiAke3Jlc3VsdC5zeXN0ZW1zR2VuZXJhdGVkfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEZpbGVzIHByb2Nlc3NlZDogJHtyZXN1bHQuZmlsZXNQcm9jZXNzZWR9YCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEJhdGNoICR7YmF0Y2guaWR9IGZhaWxlZDpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIFxuICAgICAgY29uc3QgdHJhbnNmb3JtYXRpb25FcnJvcjogVHJhbnNmb3JtYXRpb25FcnJvciA9IHtcbiAgICAgICAgdHlwZTogVHJhbnNmb3JtYXRpb25FcnJvclR5cGUuR0VORVJBVElPTl9GQUlMRUQsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhJR0gsXG4gICAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHJlc3VsdC5lcnJvcnMucHVzaCh0cmFuc2Zvcm1hdGlvbkVycm9yKTtcbiAgICAgIHRoaXMubG9nRXJyb3IodHJhbnNmb3JtYXRpb25FcnJvcik7XG4gICAgICBcbiAgICAgIC8vIEF0dGVtcHQgcm9sbGJhY2tcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5yb2xsYmFja09uRmFpbHVyZSAmJiBjaGVja3BvaW50SWQgJiYgIXRoaXMuY29uZmlnLmRyeVJ1bikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIEF0dGVtcHRpbmcgcm9sbGJhY2suLi4nKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNhZmV0eVByb3RvY29sLnJvbGxiYWNrVG9DaGVja3BvaW50KGNoZWNrcG9pbnRJZCk7XG4gICAgICAgICAgcmVzdWx0LnJvbGxiYWNrUGVyZm9ybWVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFJvbGxiYWNrIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgfSBjYXRjaCAocm9sbGJhY2tFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBSb2xsYmFjayBmYWlsZWQ6Jywgcm9sbGJhY2tFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICByZXN1bHQuZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogVHJhbnNmb3JtYXRpb25FcnJvclR5cGUuUk9MTEJBQ0tfRkFJTEVELFxuICAgICAgICAgICAgbWVzc2FnZTogcm9sbGJhY2tFcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuQ1JJVElDQUwsXG4gICAgICAgICAgICByZWNvdmVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICByZXN1bHQuZHVyYXRpb24gPSAoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyAxMDAwO1xuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBmaW5hbCB2YWxpZGF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1GaW5hbFZhbGlkYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kcnlSdW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gRFJZIFJVTjogU2tpcHBpbmcgZmluYWwgdmFsaWRhdGlvbicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFBlcmZvcm1pbmcgZmluYWwgYnVpbGQgdmFsaWRhdGlvbi4uLicpO1xuICAgICAgY29uc3QgYnVpbGRWYWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0ZUJ1aWxkKCk7XG4gICAgICBcbiAgICAgIGlmICghYnVpbGRWYWxpZGF0aW9uLmJ1aWxkU3VjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbmFsIGJ1aWxkIHZhbGlkYXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmNvbmZpZy50ZXN0VmFsaWRhdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfp6ogUGVyZm9ybWluZyBmaW5hbCB0ZXN0IHZhbGlkYXRpb24uLi4nKTtcbiAgICAgICAgY29uc3QgdGVzdFZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlVGVzdHMoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGVzdFZhbGlkYXRpb24udGVzdFN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyAgU29tZSB0ZXN0cyBmYWlsZWQsIGJ1dCB0cmFuc2Zvcm1hdGlvbiBjb21wbGV0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEZpbmFsIHZhbGlkYXRpb24gY29tcGxldGVkJyk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2dFcnJvcih7XG4gICAgICAgIHR5cGU6IFRyYW5zZm9ybWF0aW9uRXJyb3JUeXBlLlZBTElEQVRJT05fRkFJTEVELFxuICAgICAgICBtZXNzYWdlOiBgRmluYWwgdmFsaWRhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5ISUdILFxuICAgICAgICByZWNvdmVyYWJsZTogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBidWlsZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUJ1aWxkKCk6IFByb21pc2U8VmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG91dHB1dCA9IGV4ZWNTeW5jKCd5YXJuIGJ1aWxkJywgeyBcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGYtOCcsXG4gICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICBzdGRpbzogJ3BpcGUnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1aWxkU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGVzdFN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGxpbnRTdWNjZXNzOiB0cnVlLFxuICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICB3YXJuaW5nczogW10sXG4gICAgICAgIGR1cmF0aW9uOiAoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyAxMDAwXG4gICAgICB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBidWlsZFN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICB0ZXN0U3VjY2VzczogZmFsc2UsXG4gICAgICAgIGxpbnRTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3JzOiBbZXJyb3IubWVzc2FnZV0sXG4gICAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgICAgZHVyYXRpb246IChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvIDEwMDBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRlc3RzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlVGVzdHMoKTogUHJvbWlzZTxWYWxpZGF0aW9uUmVzdWx0PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoJ3lhcm4gdGVzdCAtLXBhc3NXaXRoTm9UZXN0cycsIHsgXG4gICAgICAgIGVuY29kaW5nOiAndXRmLTgnLFxuICAgICAgICB0aW1lb3V0OiAxMjAwMDAsXG4gICAgICAgIHN0ZGlvOiAncGlwZSdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnVpbGRTdWNjZXNzOiB0cnVlLFxuICAgICAgICB0ZXN0U3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbGludFN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgICAgZHVyYXRpb246IChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvIDEwMDBcbiAgICAgIH07XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1aWxkU3VjY2VzczogZmFsc2UsXG4gICAgICAgIHRlc3RTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbGludFN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcnM6IFtlcnJvci5tZXNzYWdlXSxcbiAgICAgICAgd2FybmluZ3M6IFtdLFxuICAgICAgICBkdXJhdGlvbjogKGVuZFRpbWUgLSBzdGFydFRpbWUpIC8gMTAwMFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGNyaXRpY2FsIGZhaWx1cmVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQ3JpdGljYWxGYWlsdXJlKGVycm9yOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmVycm9yKCfwn5KlIENyaXRpY2FsIGZhaWx1cmUgZGV0ZWN0ZWQsIGluaXRpYXRpbmcgZW1lcmdlbmN5IHByb2NlZHVyZXMuLi4nKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLmNvbmZpZy5kcnlSdW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYWZldHlQcm90b2NvbC5lbWVyZ2VuY3lSb2xsYmFjaygpO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEVtZXJnZW5jeSByb2xsYmFjayBjb21wbGV0ZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChyb2xsYmFja0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRW1lcmdlbmN5IHJvbGxiYWNrIGZhaWxlZDonLCByb2xsYmFja0Vycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTYXZlIGVycm9yIGxvZ1xuICAgIGNvbnN0IGVycm9yTG9nUGF0aCA9IHBhdGguam9pbih0aGlzLmNvbmZpZy5iYWNrdXBEaXJlY3RvcnksIGBlcnJvci1sb2ctJHtEYXRlLm5vdygpfS5qc29uYCk7XG4gICAgYXdhaXQgZnMucHJvbWlzZXMud3JpdGVGaWxlKGVycm9yTG9nUGF0aCwgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgIHRyYW5zZm9ybWF0aW9uTG9nOiB0aGlzLnRyYW5zZm9ybWF0aW9uTG9nXG4gICAgfSwgbnVsbCwgMikpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OdIEVycm9yIGxvZyBzYXZlZCB0bzogJHtlcnJvckxvZ1BhdGh9YCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgdHJhbnNmb3JtYXRpb24gc3VtbWFyeVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRyYW5zZm9ybWF0aW9uU3VtbWFyeShcbiAgICByZXN1bHRzOiBUcmFuc2Zvcm1hdGlvblJlc3VsdFtdLCBcbiAgICB0b3RhbER1cmF0aW9uOiBudW1iZXJcbiAgKTogVHJhbnNmb3JtYXRpb25TdW1tYXJ5IHtcbiAgICBjb25zdCBzdWNjZXNzZnVsQmF0Y2hlcyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdWNjZXNzKS5sZW5ndGg7XG4gICAgY29uc3QgZmFpbGVkQmF0Y2hlcyA9IHJlc3VsdHMubGVuZ3RoIC0gc3VjY2Vzc2Z1bEJhdGNoZXM7XG4gICAgY29uc3QgdG90YWxGaWxlc1Byb2Nlc3NlZCA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuZmlsZXNQcm9jZXNzZWQsIDApO1xuICAgIGNvbnN0IHRvdGFsU3lzdGVtc0dlbmVyYXRlZCA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuc3lzdGVtc0dlbmVyYXRlZCwgMCk7XG4gICAgY29uc3QgdG90YWxFcnJvcnMgPSByZXN1bHRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLmVycm9ycy5sZW5ndGgsIDApO1xuICAgIGNvbnN0IHRvdGFsV2FybmluZ3MgPSByZXN1bHRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLndhcm5pbmdzLmxlbmd0aCwgMCk7XG4gICAgY29uc3QgYXZlcmFnZUJhdGNoRHVyYXRpb24gPSByZXN1bHRzLmxlbmd0aCA+IDAgPyBcbiAgICAgIHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuZHVyYXRpb24sIDApIC8gcmVzdWx0cy5sZW5ndGggOiAwO1xuICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gcmVzdWx0cy5sZW5ndGggPiAwID8gKHN1Y2Nlc3NmdWxCYXRjaGVzIC8gcmVzdWx0cy5sZW5ndGgpICogMTAwIDogMDtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBnZW5lcmF0aW9uIHN1bW1hcnkgZnJvbSBhbGwgcmVzdWx0c1xuICAgIGNvbnN0IGFsbEdlbmVyYXRpb25SZXN1bHRzID0gcmVzdWx0cy5mbGF0TWFwKHIgPT4gci5nZW5lcmF0aW9uUmVzdWx0cyk7XG4gICAgY29uc3QgZ2VuZXJhdGlvblN1bW1hcnkgPSBhbGxHZW5lcmF0aW9uUmVzdWx0cy5sZW5ndGggPiAwID8gXG4gICAgICB0aGlzLmdlbmVyYXRvci5nZW5lcmF0ZVN1bW1hcnkoYWxsR2VuZXJhdGlvblJlc3VsdHMpIDoge1xuICAgICAgICB0b3RhbFN5c3RlbXNHZW5lcmF0ZWQ6IDAsXG4gICAgICAgIHRvdGFsQ2FwYWJpbGl0aWVzQWRkZWQ6IDAsXG4gICAgICAgIHRvdGFsSW50ZWdyYXRpb25Qb2ludHM6IDAsXG4gICAgICAgIGF2ZXJhZ2VDb21wbGV4aXR5OiAwLFxuICAgICAgICBlc3RpbWF0ZWRUb3RhbFZhbHVlOiAwLFxuICAgICAgICBnZW5lcmF0aW9uc0J5Q2F0ZWdvcnk6IHt9XG4gICAgICB9O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEJhdGNoZXM6IHJlc3VsdHMubGVuZ3RoLFxuICAgICAgc3VjY2Vzc2Z1bEJhdGNoZXMsXG4gICAgICBmYWlsZWRCYXRjaGVzLFxuICAgICAgdG90YWxGaWxlc1Byb2Nlc3NlZCxcbiAgICAgIHRvdGFsU3lzdGVtc0dlbmVyYXRlZCxcbiAgICAgIHRvdGFsRXJyb3JzLFxuICAgICAgdG90YWxXYXJuaW5ncyxcbiAgICAgIHRvdGFsRHVyYXRpb24sXG4gICAgICBhdmVyYWdlQmF0Y2hEdXJhdGlvbixcbiAgICAgIHN1Y2Nlc3NSYXRlLFxuICAgICAgZ2VuZXJhdGlvblN1bW1hcnlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdHJhbnNmb3JtYXRpb24gc3VtbWFyeVxuICAgKi9cbiAgcHJpdmF0ZSBkaXNwbGF5U3VtbWFyeShzdW1tYXJ5OiBUcmFuc2Zvcm1hdGlvblN1bW1hcnkpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygnXFxu8J+TiiBUUkFOU0ZPUk1BVElPTiBDQU1QQUlHTiBTVU1NQVJZJyk7XG4gICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICBjb25zb2xlLmxvZyhgVG90YWwgYmF0Y2hlczogJHtzdW1tYXJ5LnRvdGFsQmF0Y2hlc31gKTtcbiAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bCBiYXRjaGVzOiAke3N1bW1hcnkuc3VjY2Vzc2Z1bEJhdGNoZXN9YCk7XG4gICAgY29uc29sZS5sb2coYEZhaWxlZCBiYXRjaGVzOiAke3N1bW1hcnkuZmFpbGVkQmF0Y2hlc31gKTtcbiAgICBjb25zb2xlLmxvZyhgU3VjY2VzcyByYXRlOiAke3N1bW1hcnkuc3VjY2Vzc1JhdGUudG9GaXhlZCgxKX0lYCk7XG4gICAgY29uc29sZS5sb2coYFRvdGFsIGZpbGVzIHByb2Nlc3NlZDogJHtzdW1tYXJ5LnRvdGFsRmlsZXNQcm9jZXNzZWR9YCk7XG4gICAgY29uc29sZS5sb2coYFRvdGFsIHN5c3RlbXMgZ2VuZXJhdGVkOiAke3N1bW1hcnkudG90YWxTeXN0ZW1zR2VuZXJhdGVkfWApO1xuICAgIGNvbnNvbGUubG9nKGBUb3RhbCBlcnJvcnM6ICR7c3VtbWFyeS50b3RhbEVycm9yc31gKTtcbiAgICBjb25zb2xlLmxvZyhgVG90YWwgd2FybmluZ3M6ICR7c3VtbWFyeS50b3RhbFdhcm5pbmdzfWApO1xuICAgIGNvbnNvbGUubG9nKGBUb3RhbCBkdXJhdGlvbjogJHtzdW1tYXJ5LnRvdGFsRHVyYXRpb24udG9GaXhlZCgyKX1zYCk7XG4gICAgY29uc29sZS5sb2coYEF2ZXJhZ2UgYmF0Y2ggZHVyYXRpb246ICR7c3VtbWFyeS5hdmVyYWdlQmF0Y2hEdXJhdGlvbi50b0ZpeGVkKDIpfXNgKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnXFxu8J+noCBJTlRFTExJR0VOQ0UgR0VORVJBVElPTiBTVU1NQVJZJyk7XG4gICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICBjb25zb2xlLmxvZyhgVG90YWwgY2FwYWJpbGl0aWVzIGFkZGVkOiAke3N1bW1hcnkuZ2VuZXJhdGlvblN1bW1hcnkudG90YWxDYXBhYmlsaXRpZXNBZGRlZH1gKTtcbiAgICBjb25zb2xlLmxvZyhgVG90YWwgaW50ZWdyYXRpb24gcG9pbnRzOiAke3N1bW1hcnkuZ2VuZXJhdGlvblN1bW1hcnkudG90YWxJbnRlZ3JhdGlvblBvaW50c31gKTtcbiAgICBjb25zb2xlLmxvZyhgQXZlcmFnZSBjb21wbGV4aXR5OiAke3N1bW1hcnkuZ2VuZXJhdGlvblN1bW1hcnkuYXZlcmFnZUNvbXBsZXhpdHkudG9GaXhlZCgxKX1gKTtcbiAgICBjb25zb2xlLmxvZyhgRXN0aW1hdGVkIHRvdGFsIHZhbHVlOiAke3N1bW1hcnkuZ2VuZXJhdGlvblN1bW1hcnkuZXN0aW1hdGVkVG90YWxWYWx1ZX1gKTtcbiAgICBcbiAgICBpZiAoT2JqZWN0LmtleXMoc3VtbWFyeS5nZW5lcmF0aW9uU3VtbWFyeS5nZW5lcmF0aW9uc0J5Q2F0ZWdvcnkpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdcXG5HZW5lcmF0aW9uIGJ5IGNhdGVnb3J5OicpO1xuICAgICAgT2JqZWN0LmVudHJpZXMoc3VtbWFyeS5nZW5lcmF0aW9uU3VtbWFyeS5nZW5lcmF0aW9uc0J5Q2F0ZWdvcnkpLmZvckVhY2goKFtjYXRlZ29yeSwgY291bnRdKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgICR7Y2F0ZWdvcnl9OiAke2NvdW50fWApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyB0cmFuc2Zvcm1hdGlvbiBlcnJvclxuICAgKi9cbiAgcHJpdmF0ZSBsb2dFcnJvcihlcnJvcjogVHJhbnNmb3JtYXRpb25FcnJvcik6IHZvaWQge1xuICAgIHRoaXMudHJhbnNmb3JtYXRpb25Mb2cucHVzaChlcnJvcik7XG4gICAgXG4gICAgY29uc3Qgc2V2ZXJpdHlFbW9qaSA9IHtcbiAgICAgIFtFcnJvclNldmVyaXR5LkxPV106ICfwn5+hJyxcbiAgICAgIFtFcnJvclNldmVyaXR5Lk1FRElVTV06ICfwn5+gJyxcbiAgICAgIFtFcnJvclNldmVyaXR5LkhJR0hdOiAn8J+UtCcsXG4gICAgICBbRXJyb3JTZXZlcml0eS5DUklUSUNBTF06ICfwn5KlJ1xuICAgIH1bZXJyb3Iuc2V2ZXJpdHldO1xuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoYCR7c2V2ZXJpdHlFbW9qaX0gWyR7ZXJyb3IudHlwZX1dICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgZGlyZWN0b3J5IGV4aXN0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEaXJlY3RvcnkoZGlyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLnByb21pc2VzLmFjY2VzcyhkaXJQYXRoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGF3YWl0IGZzLnByb21pc2VzLm1rZGlyKGRpclBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdHJhbnNmb3JtYXRpb24gY29uZmlndXJhdGlvblxuICAgKi9cbiAgZ2V0Q29uZmlnKCk6IFRyYW5zZm9ybWF0aW9uQ29uZmlnIHtcbiAgICByZXR1cm4geyAuLi50aGlzLmNvbmZpZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0cmFuc2Zvcm1hdGlvbiBsb2dcbiAgICovXG4gIGdldFRyYW5zZm9ybWF0aW9uTG9nKCk6IFRyYW5zZm9ybWF0aW9uRXJyb3JbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnRyYW5zZm9ybWF0aW9uTG9nXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0cmFuc2Zvcm1hdGlvbiBsb2dcbiAgICovXG4gIGNsZWFyVHJhbnNmb3JtYXRpb25Mb2coKTogdm9pZCB7XG4gICAgdGhpcy50cmFuc2Zvcm1hdGlvbkxvZy5sZW5ndGggPSAwO1xuICB9XG59Il0sInZlcnNpb24iOjN9