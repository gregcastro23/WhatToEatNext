7ccc212060b3dae6c21cd35cd5106446
"use strict";
/**
 * Domain Context Analyzer
 * Provides domain-specific analysis for astrological, recipe, campaign, and service code
 *
 * Features:
 * - File path analysis to determine code domain
 * - Content analysis for domain-specific patterns
 * - Subdomain classification for specialized areas
 * - Domain-specific type suggestions and preservation reasons
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.DomainContextAnalyzer = void 0;
const types_1 = require("./types");
class DomainContextAnalyzer {
    domainPatterns;
    typeMapping;
    pathPatterns;
    contentPatterns;
    subDomainPatterns;
    constructor() {
        this.domainPatterns = this.initializeDomainPatterns();
        this.typeMapping = this.initializeTypeMapping();
        this.pathPatterns = this.initializePathPatterns();
        this.contentPatterns = this.initializeContentPatterns();
        this.subDomainPatterns = this.initializeSubDomainPatterns();
    }
    /**
     * Analyze the domain context for a given classification context
     */
    async analyzeDomain(context) {
        const domain = this.detectDomain(context);
        const subDomain = this.detectSubDomain(context, domain);
        const intentionalityHints = this.generateIntentionalityHints(context, domain);
        const suggestedTypes = this.getDomainSpecificSuggestions(domain, context);
        const preservationReasons = this.getPreservationReasons(context, domain);
        return {
            domain,
            subDomain,
            intentionalityHints,
            suggestedTypes,
            preservationReasons
        };
    }
    /**
     * Get domain-specific type suggestions
     */
    getDomainSpecificSuggestions(domain, context) {
        const baseSuggestions = this.typeMapping.get(domain) || ['unknown'];
        const contextualSuggestions = this.getContextualSuggestions(context, domain);
        return [...new Set([...baseSuggestions, ...contextualSuggestions])];
    }
    /**
     * Detect the primary domain based on file path and content analysis
     */
    detectDomain(context) {
        // First, try path-based detection (most reliable)
        const pathDomain = this.detectDomainByPath(context.filePath);
        if (pathDomain !== types_1.CodeDomain.UTILITY) {
            return pathDomain;
        }
        // Then try content-based detection
        const contentDomain = this.detectDomainByContent(context);
        if (contentDomain !== types_1.CodeDomain.UTILITY) {
            return contentDomain;
        }
        // Finally, try import/dependency analysis
        const importDomain = this.detectDomainByImports(context);
        return importDomain;
    }
    /**
     * Detect domain based on file path patterns
     * Uses priority order - first match wins
     */
    detectDomainByPath(filePath) {
        const normalizedPath = filePath.toLowerCase().replace(/\\/g, '/');
        // Check in priority order (test files first, then components, etc.)
        const orderedDomains = [
            types_1.CodeDomain.TEST,
            types_1.CodeDomain.COMPONENT,
            types_1.CodeDomain.ASTROLOGICAL,
            types_1.CodeDomain.CAMPAIGN,
            types_1.CodeDomain.RECIPE,
            types_1.CodeDomain.SERVICE,
            types_1.CodeDomain.UTILITY
        ];
        for (const domain of orderedDomains) {
            const patterns = this.pathPatterns.get(domain) || [];
            if (patterns.some(pattern => pattern.test(normalizedPath))) {
                return domain;
            }
        }
        return types_1.CodeDomain.UTILITY;
    }
    /**
     * Detect domain based on code content patterns
     */
    detectDomainByContent(context) {
        const codeContent = [context.codeSnippet, ...context.surroundingLines]
            .join('\n')
            .toLowerCase();
        // Score each domain based on pattern matches
        const domainScores = new Map();
        for (const [domain, patterns] of this.contentPatterns.entries()) {
            let score = 0;
            for (const pattern of patterns) {
                const matches = codeContent.match(pattern);
                if (matches) {
                    score += matches.length;
                }
            }
            if (score > 0) {
                domainScores.set(domain, score);
            }
        }
        // Return the domain with the highest score
        if (domainScores.size > 0) {
            const sortedDomains = Array.from(domainScores.entries())
                .sort(([, a], [, b]) => b - a);
            return sortedDomains[0][0];
        }
        return types_1.CodeDomain.UTILITY;
    }
    /**
     * Detect domain based on import statements and dependencies
     */
    detectDomainByImports(context) {
        const codeContent = [context.codeSnippet, ...context.surroundingLines].join('\n');
        // Look for import patterns
        const importMatches = codeContent.match(/import.*from\s+['"`]([^'"`]+)['"`]/g) || [];
        const requireMatches = codeContent.match(/require\(['"`]([^'"`]+)['"`]\)/g) || [];
        const allImports = [...importMatches, ...requireMatches].join(' ').toLowerCase();
        // Priority order for import-based detection
        if (allImports.includes('jest') ||
            allImports.includes('@testing-library') ||
            allImports.includes('vitest')) {
            return types_1.CodeDomain.TEST;
        }
        if (allImports.includes('react') ||
            allImports.includes('@/components') ||
            allImports.includes('next/') ||
            allImports.includes('jsx') ||
            allImports.includes('tsx')) {
            return types_1.CodeDomain.COMPONENT;
        }
        if (allImports.includes('astronomia') ||
            allImports.includes('astronomy-engine') ||
            allImports.includes('suncalc') ||
            allImports.includes('/calculations/') ||
            allImports.includes('/astro')) {
            return types_1.CodeDomain.ASTROLOGICAL;
        }
        if (allImports.includes('/campaign') ||
            allImports.includes('metrics') ||
            allImports.includes('intelligence')) {
            return types_1.CodeDomain.CAMPAIGN;
        }
        if (allImports.includes('/recipe') ||
            allImports.includes('/ingredient') ||
            allImports.includes('/food')) {
            return types_1.CodeDomain.RECIPE;
        }
        if (allImports.includes('/service') ||
            allImports.includes('/api') ||
            allImports.includes('axios') ||
            allImports.includes('fetch')) {
            return types_1.CodeDomain.SERVICE;
        }
        return types_1.CodeDomain.UTILITY;
    }
    /**
     * Detect specialized subdomain within the primary domain
     */
    detectSubDomain(context, domain) {
        const filePath = context.filePath.toLowerCase().replace(/\\/g, '/');
        const codeContent = [context.codeSnippet, ...context.surroundingLines]
            .join('\n')
            .toLowerCase();
        const subDomainPatterns = this.subDomainPatterns.get(domain);
        if (!subDomainPatterns) {
            return undefined;
        }
        // Score each subdomain based on pattern matches
        const subDomainScores = new Map();
        for (const [subDomain, patterns] of subDomainPatterns.entries()) {
            let score = 0;
            // Check file path patterns
            for (const pattern of patterns) {
                if (pattern.test(filePath)) {
                    score += 2; // Path matches are weighted higher
                }
            }
            if (score > 0) {
                subDomainScores.set(subDomain, score);
            }
        }
        // Return the subdomain with the highest score
        if (subDomainScores.size > 0) {
            const sortedSubDomains = Array.from(subDomainScores.entries())
                .sort(([, a], [, b]) => b - a);
            return sortedSubDomains[0][0];
        }
        return undefined;
    }
    generateIntentionalityHints(context, domain) {
        const hints = [];
        switch (domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
                hints.push({
                    reason: 'Astrological calculations often require flexible typing for external astronomical data',
                    confidence: 0.8,
                    suggestedAction: 'preserve'
                });
                if (context.codeSnippet.includes('position') || context.codeSnippet.includes('planetary')) {
                    hints.push({
                        reason: 'Planetary position data from external APIs may need any type for compatibility',
                        confidence: 0.9,
                        suggestedAction: 'document'
                    });
                }
                break;
            case types_1.CodeDomain.RECIPE:
                if (context.codeSnippet.includes('ingredient') || context.codeSnippet.includes('recipe')) {
                    hints.push({
                        reason: 'Recipe and ingredient data can often use specific types',
                        confidence: 0.7,
                        suggestedAction: 'replace'
                    });
                }
                break;
            case types_1.CodeDomain.CAMPAIGN:
                hints.push({
                    reason: 'Campaign system requires flexibility for dynamic configurations and metrics',
                    confidence: 0.85,
                    suggestedAction: 'preserve'
                });
                if (context.codeSnippet.includes('metrics') || context.codeSnippet.includes('config')) {
                    hints.push({
                        reason: 'Dynamic campaign configurations benefit from flexible typing',
                        confidence: 0.9,
                        suggestedAction: 'document'
                    });
                }
                break;
            case types_1.CodeDomain.TEST:
                hints.push({
                    reason: 'Test files often need flexible typing for mocks and test data',
                    confidence: 0.8,
                    suggestedAction: 'preserve'
                });
                break;
            case types_1.CodeDomain.SERVICE:
                if (context.codeSnippet.includes('api') || context.codeSnippet.includes('response')) {
                    hints.push({
                        reason: 'API responses may require any type for external service compatibility',
                        confidence: 0.8,
                        suggestedAction: 'document'
                    });
                }
                else {
                    hints.push({
                        reason: 'Service layer can often use more specific types',
                        confidence: 0.6,
                        suggestedAction: 'review'
                    });
                }
                break;
            default:
                hints.push({
                    reason: 'No domain-specific patterns detected, consider replacement',
                    confidence: 0.5,
                    suggestedAction: 'review'
                });
        }
        return hints;
    }
    getContextualSuggestions(context, domain) {
        const suggestions = [];
        const codeContent = context.codeSnippet.toLowerCase();
        switch (domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
                if (codeContent.includes('position'))
                    suggestions.push('PlanetaryPosition');
                if (codeContent.includes('element'))
                    suggestions.push('ElementalProperties');
                if (codeContent.includes('sign'))
                    suggestions.push('ZodiacSign');
                if (codeContent.includes('planet'))
                    suggestions.push('Planet');
                break;
            case types_1.CodeDomain.RECIPE:
                if (codeContent.includes('ingredient'))
                    suggestions.push('Ingredient');
                if (codeContent.includes('recipe'))
                    suggestions.push('Recipe');
                if (codeContent.includes('nutrition'))
                    suggestions.push('NutritionalInfo');
                if (codeContent.includes('cooking'))
                    suggestions.push('CookingMethod');
                break;
            case types_1.CodeDomain.CAMPAIGN:
                if (codeContent.includes('metrics'))
                    suggestions.push('ProgressMetrics');
                if (codeContent.includes('config'))
                    suggestions.push('CampaignConfig');
                if (codeContent.includes('result'))
                    suggestions.push('CampaignResult');
                if (codeContent.includes('error'))
                    suggestions.push('ValidationResult');
                break;
            case types_1.CodeDomain.SERVICE:
                if (codeContent.includes('response'))
                    suggestions.push('ApiResponse<T>');
                if (codeContent.includes('request'))
                    suggestions.push('ApiRequest');
                if (codeContent.includes('data'))
                    suggestions.push('ServiceData');
                break;
            case types_1.CodeDomain.COMPONENT:
                if (codeContent.includes('props'))
                    suggestions.push('ComponentProps');
                if (codeContent.includes('state'))
                    suggestions.push('ComponentState');
                if (codeContent.includes('event'))
                    suggestions.push('React.SyntheticEvent');
                break;
        }
        return suggestions;
    }
    getPreservationReasons(context, domain) {
        const reasons = [];
        if (domain === types_1.CodeDomain.ASTROLOGICAL) {
            reasons.push('Astrological calculations require compatibility with external astronomical libraries');
            reasons.push('Planetary position data structures vary between different API sources');
        }
        if (domain === types_1.CodeDomain.CAMPAIGN) {
            reasons.push('Campaign system needs flexibility for evolving metrics and configurations');
            reasons.push('Dynamic tool integration requires adaptable type structures');
        }
        if (domain === types_1.CodeDomain.TEST) {
            reasons.push('Test flexibility for mocking and test data generation');
            reasons.push('Jest and testing library compatibility requirements');
        }
        if (context.isInTestFile) {
            reasons.push('Test file context allows for more flexible typing patterns');
        }
        if (context.hasExistingComment) {
            reasons.push('Existing documentation suggests intentional usage');
        }
        return reasons;
    }
    /**
     * Initialize path-based domain detection patterns
     * Order matters - more specific patterns should come first
     */
    initializePathPatterns() {
        return new Map([
            [types_1.CodeDomain.TEST, [
                    /__tests__/i,
                    /\.test\./i,
                    /\.spec\./i,
                    /\/test/i,
                    /\/spec/i
                ]],
            [types_1.CodeDomain.COMPONENT, [
                    /\/component/i,
                    /\.tsx$/i,
                    /\.jsx$/i,
                    /\/ui\//i,
                    /\/pages\//i,
                    /\/app\//i
                ]],
            [types_1.CodeDomain.ASTROLOGICAL, [
                    /\/calculations\//i,
                    /\/astro/i,
                    /planetary/i,
                    /elemental/i,
                    /lunar/i,
                    /solar/i,
                    /zodiac/i,
                    /ephemeris/i
                ]],
            [types_1.CodeDomain.CAMPAIGN, [
                    /\/campaign/i,
                    /\/intelligence/i,
                    /typescript.*error/i,
                    /linting/i,
                    /validation/i,
                    /metrics/i,
                    /progress/i
                ]],
            [types_1.CodeDomain.RECIPE, [
                    /\/recipe/i,
                    /\/ingredient/i,
                    /\/food/i,
                    /\/culinary/i,
                    /\/cooking/i,
                    /\/nutrition/i,
                    /\/data\/.*ingredient/i,
                    /\/data\/.*recipe/i
                ]],
            [types_1.CodeDomain.SERVICE, [
                    /\/service/i,
                    /\/api/i,
                    /\/client/i,
                    /\/adapter/i,
                    /recommendation.*service/i
                ]],
            [types_1.CodeDomain.UTILITY, [
                    /\/utils/i,
                    /\/helper/i,
                    /\/common/i,
                    /\/shared/i,
                    /\/lib/i
                ]]
        ]);
    }
    /**
     * Initialize content-based domain detection patterns
     */
    initializeContentPatterns() {
        return new Map([
            [types_1.CodeDomain.ASTROLOGICAL, [
                    /planetary|planet|astro|zodiac|sign|element|lunar|solar/gi,
                    /position|degree|longitude|latitude|ephemeris/gi,
                    /fire|water|earth|air|elemental/gi,
                    /astronomia|astronomy-engine|suncalc/gi,
                    /PlanetaryPosition|ElementalProperties|ZodiacSign/gi
                ]],
            [types_1.CodeDomain.RECIPE, [
                    /recipe|ingredient|food|culinary|cooking|nutrition/gi,
                    /flavor|taste|spice|herb|vegetable|fruit/gi,
                    /meal|dish|cuisine|dietary/gi,
                    /Ingredient|Recipe|NutritionalInfo|CookingMethod/gi
                ]],
            [types_1.CodeDomain.CAMPAIGN, [
                    /campaign|metrics|progress|typescript|linting|error/gi,
                    /validation|safety|rollback|checkpoint/gi,
                    /intelligence|enterprise|automation/gi,
                    /CampaignConfig|ProgressMetrics|ValidationResult/gi
                ]],
            [types_1.CodeDomain.SERVICE, [
                    /service|api|request|response|client|server/gi,
                    /endpoint|http|fetch|axios|data/gi,
                    /ApiResponse|ServiceData|RequestConfig/gi
                ]],
            [types_1.CodeDomain.COMPONENT, [
                    /component|props|state|render|jsx|tsx/gi,
                    /react|hook|context|provider/gi,
                    /ComponentProps|React\.Component|JSX\.Element/gi
                ]],
            [types_1.CodeDomain.UTILITY, [
                    /util|helper|common|shared|lib/gi,
                    /function|method|tool|format/gi
                ]],
            [types_1.CodeDomain.TEST, [
                    /test|spec|mock|jest|describe|it|expect/gi,
                    /fixture|stub|spy|beforeEach|afterEach/gi,
                    /jest\.Mock|MockedFunction|TestData/gi
                ]]
        ]);
    }
    /**
     * Initialize subdomain detection patterns
     */
    initializeSubDomainPatterns() {
        return new Map([
            [types_1.CodeDomain.ASTROLOGICAL, new Map([
                    ['planetary', [/planetary|planet/gi, /position|degree|longitude/gi]],
                    ['elemental', [/elemental|element/gi, /fire|water|earth|air/gi]],
                    ['lunar', [/lunar|moon/gi, /phase|cycle/gi]],
                    ['solar', [/solar|sun/gi, /sunrise|sunset/gi]],
                    ['zodiac', [/zodiac|sign/gi, /aries|taurus|gemini|cancer|leo|virgo|libra|scorpio|sagittarius|capricorn|aquarius|pisces/gi]],
                    ['calculations', [/calculation|compute|algorithm/gi, /ephemeris|transit/gi]]
                ])],
            [types_1.CodeDomain.RECIPE, new Map([
                    ['ingredients', [/ingredient/gi, /spice|herb|vegetable|fruit/gi]],
                    ['cooking-methods', [/cooking|method/gi, /bake|boil|fry|steam|grill/gi]],
                    ['nutrition', [/nutrition|nutrient/gi, /calorie|vitamin|mineral/gi]],
                    ['cuisines', [/cuisine|cultural/gi, /italian|chinese|mexican|indian/gi]],
                    ['recipes', [/recipe|dish|meal/gi, /preparation|instruction/gi]]
                ])],
            [types_1.CodeDomain.CAMPAIGN, new Map([
                    ['typescript-errors', [/typescript|ts\d+/gi, /error|compilation/gi]],
                    ['linting', [/lint|eslint/gi, /warning|rule/gi]],
                    ['performance', [/performance|optimization/gi, /memory|speed|bundle/gi]],
                    ['metrics', [/metrics|progress/gi, /tracking|measurement/gi]],
                    ['intelligence', [/intelligence|enterprise/gi, /analytics|insights/gi]],
                    ['safety', [/safety|validation/gi, /rollback|checkpoint/gi]]
                ])],
            [types_1.CodeDomain.SERVICE, new Map([
                    ['recommendation', [/recommendation|suggest/gi, /algorithm|matching/gi]],
                    ['api-integration', [/api|integration/gi, /request|response|endpoint/gi]],
                    ['data-processing', [/data|processing/gi, /transform|parse|validate/gi]],
                    ['caching', [/cache|storage/gi, /redis|memory/gi]]
                ])],
            [types_1.CodeDomain.COMPONENT, new Map([
                    ['ui-components', [/component|ui/gi, /button|input|modal/gi]],
                    ['pages', [/page|route/gi, /navigation|layout/gi]],
                    ['hooks', [/hook|use[A-Z]/gi, /state|effect|context/gi]],
                    ['forms', [/form|input/gi, /validation|submit/gi]]
                ])],
            [types_1.CodeDomain.TEST, new Map([
                    ['unit-tests', [/unit|test/gi, /describe|it|expect/gi]],
                    ['integration-tests', [/integration|e2e/gi, /workflow|scenario/gi]],
                    ['mocks', [/mock|stub|spy/gi, /jest\.mock|mockImplementation/gi]]
                ])],
            [types_1.CodeDomain.UTILITY, new Map([
                    ['validation', [/validation|validate/gi, /schema|rule/gi]],
                    ['formatting', [/format|transform/gi, /string|date|number/gi]],
                    ['helpers', [/helper|utility/gi, /common|shared/gi]]
                ])]
        ]);
    }
    /**
     * Legacy method for backward compatibility
     */
    initializeDomainPatterns() {
        // This method is kept for backward compatibility
        // The actual patterns are now in initializeContentPatterns
        return this.initializeContentPatterns();
    }
    initializeTypeMapping() {
        return new Map([
            [types_1.CodeDomain.ASTROLOGICAL, [
                    'PlanetaryPosition',
                    'ElementalProperties',
                    'ZodiacSign',
                    'Planet',
                    'AstrologicalData',
                    'unknown'
                ]],
            [types_1.CodeDomain.RECIPE, [
                    'Ingredient',
                    'Recipe',
                    'NutritionalInfo',
                    'CookingMethod',
                    'CulinaryData',
                    'unknown'
                ]],
            [types_1.CodeDomain.CAMPAIGN, [
                    'ProgressMetrics',
                    'CampaignConfig',
                    'CampaignResult',
                    'ValidationResult',
                    'SafetyEvent',
                    'Record<string, unknown>'
                ]],
            [types_1.CodeDomain.SERVICE, [
                    'ApiResponse<T>',
                    'ServiceData',
                    'RequestConfig',
                    'ResponseData',
                    'unknown'
                ]],
            [types_1.CodeDomain.COMPONENT, [
                    'ComponentProps',
                    'React.ComponentProps<T>',
                    'React.ReactNode',
                    'JSX.Element',
                    'unknown'
                ]],
            [types_1.CodeDomain.UTILITY, [
                    'unknown',
                    'Record<string, unknown>',
                    'object'
                ]],
            [types_1.CodeDomain.TEST, [
                    'jest.Mock',
                    'MockedFunction<T>',
                    'TestData',
                    'unknown'
                ]]
        ]);
    }
}
exports.DomainContextAnalyzer = DomainContextAnalyzer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9Eb21haW5Db250ZXh0QW5hbHl6ZXIudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7R0FTRzs7O0FBRUgsbUNBS2lCO0FBRWpCLE1BQWEscUJBQXFCO0lBQ3hCLGNBQWMsQ0FBNEI7SUFDMUMsV0FBVyxDQUE0QjtJQUN2QyxZQUFZLENBQTRCO0lBQ3hDLGVBQWUsQ0FBNEI7SUFDM0MsaUJBQWlCLENBQXlDO0lBRWxFO1FBQ0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUN0RCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQ2hELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDbEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztRQUN4RCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixFQUFFLENBQUM7SUFDOUQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUE4QjtRQUNoRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzFDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3hELE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM5RSxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsNEJBQTRCLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzFFLE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxDQUFDLHNCQUFz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LGlCQUFpQjtvQkFDakIsZ0JBQWdCO29CQUNoQixnQkFBZ0I7b0JBQ2hCLGtCQUFrQjtvQkFDbEIsYUFBYTtvQkFDYix5QkFBeUI7aUJBQzFCLENBQUM7WUFDRixDQUFDLGtCQUFVLENBQUMsT0FBTyxFQUFFO29CQUNuQixnQkFBZ0I7b0JBQ2hCLGFBQWE7b0JBQ2IsZUFBZTtvQkFDZixjQUFjO29CQUNkLFNBQVM7aUJBQ1YsQ0FBQztZQUNGLENBQUMsa0JBQVUsQ0FBQyxTQUFTLEVBQUU7b0JBQ3JCLGdCQUFnQjtvQkFDaEIseUJBQXlCO29CQUN6QixpQkFBaUI7b0JBQ2pCLGFBQWE7b0JBQ2IsU0FBUztpQkFDVixDQUFDO1lBQ0YsQ0FBQyxrQkFBVSxDQUFDLE9BQU8sRUFBRTtvQkFDbkIsU0FBUztvQkFDVCx5QkFBeUI7b0JBQ3pCLFFBQVE7aUJBQ1QsQ0FBQztZQUNGLENBQUMsa0JBQVUsQ0FBQyxJQUFJLEVBQUU7b0JBQ2hCLFdBQVc7b0JBQ1gsbUJBQW1CO29CQUNuQixVQUFVO29CQUNWLFNBQVM7aUJBQ1YsQ0FBQztTQUNILENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQTlsQkQsc0RBOGxCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL0RvbWFpbkNvbnRleHRBbmFseXplci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERvbWFpbiBDb250ZXh0IEFuYWx5emVyXG4gKiBQcm92aWRlcyBkb21haW4tc3BlY2lmaWMgYW5hbHlzaXMgZm9yIGFzdHJvbG9naWNhbCwgcmVjaXBlLCBjYW1wYWlnbiwgYW5kIHNlcnZpY2UgY29kZVxuICpcbiAqIEZlYXR1cmVzOlxuICogLSBGaWxlIHBhdGggYW5hbHlzaXMgdG8gZGV0ZXJtaW5lIGNvZGUgZG9tYWluXG4gKiAtIENvbnRlbnQgYW5hbHlzaXMgZm9yIGRvbWFpbi1zcGVjaWZpYyBwYXR0ZXJuc1xuICogLSBTdWJkb21haW4gY2xhc3NpZmljYXRpb24gZm9yIHNwZWNpYWxpemVkIGFyZWFzXG4gKiAtIERvbWFpbi1zcGVjaWZpYyB0eXBlIHN1Z2dlc3Rpb25zIGFuZCBwcmVzZXJ2YXRpb24gcmVhc29uc1xuICovXG5cbmltcG9ydCB7XG4gICAgQ2xhc3NpZmljYXRpb25Db250ZXh0LFxuICAgIENvZGVEb21haW4sXG4gICAgRG9tYWluQ29udGV4dCxcbiAgICBJbnRlbnRpb25hbGl0eUhpbnRcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEb21haW5Db250ZXh0QW5hbHl6ZXIge1xuICBwcml2YXRlIGRvbWFpblBhdHRlcm5zOiBNYXA8Q29kZURvbWFpbiwgUmVnRXhwW10+O1xuICBwcml2YXRlIHR5cGVNYXBwaW5nOiBNYXA8Q29kZURvbWFpbiwgc3RyaW5nW10+O1xuICBwcml2YXRlIHBhdGhQYXR0ZXJuczogTWFwPENvZGVEb21haW4sIFJlZ0V4cFtdPjtcbiAgcHJpdmF0ZSBjb250ZW50UGF0dGVybnM6IE1hcDxDb2RlRG9tYWluLCBSZWdFeHBbXT47XG4gIHByaXZhdGUgc3ViRG9tYWluUGF0dGVybnM6IE1hcDxDb2RlRG9tYWluLCBNYXA8c3RyaW5nLCBSZWdFeHBbXT4+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZG9tYWluUGF0dGVybnMgPSB0aGlzLmluaXRpYWxpemVEb21haW5QYXR0ZXJucygpO1xuICAgIHRoaXMudHlwZU1hcHBpbmcgPSB0aGlzLmluaXRpYWxpemVUeXBlTWFwcGluZygpO1xuICAgIHRoaXMucGF0aFBhdHRlcm5zID0gdGhpcy5pbml0aWFsaXplUGF0aFBhdHRlcm5zKCk7XG4gICAgdGhpcy5jb250ZW50UGF0dGVybnMgPSB0aGlzLmluaXRpYWxpemVDb250ZW50UGF0dGVybnMoKTtcbiAgICB0aGlzLnN1YkRvbWFpblBhdHRlcm5zID0gdGhpcy5pbml0aWFsaXplU3ViRG9tYWluUGF0dGVybnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHRoZSBkb21haW4gY29udGV4dCBmb3IgYSBnaXZlbiBjbGFzc2lmaWNhdGlvbiBjb250ZXh0XG4gICAqL1xuICBhc3luYyBhbmFseXplRG9tYWluKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IFByb21pc2U8RG9tYWluQ29udGV4dD4ge1xuICAgIGNvbnN0IGRvbWFpbiA9IHRoaXMuZGV0ZWN0RG9tYWluKGNvbnRleHQpO1xuICAgIGNvbnN0IHN1YkRvbWFpbiA9IHRoaXMuZGV0ZWN0U3ViRG9tYWluKGNvbnRleHQsIGRvbWFpbik7XG4gICAgY29uc3QgaW50ZW50aW9uYWxpdHlIaW50cyA9IHRoaXMuZ2VuZXJhdGVJbnRlbnRpb25hbGl0eUhpbnRzKGNvbnRleHQsIGRvbWFpbik7XG4gICAgY29uc3Qgc3VnZ2VzdGVkVHlwZXMgPSB0aGlzLmdldERvbWFpblNwZWNpZmljU3VnZ2VzdGlvbnMoZG9tYWluLCBjb250ZXh0KTtcbiAgICBjb25zdCBwcmVzZXJ2YXRpb25SZWFzb25zID0gdGhpcy5nZXRQcmVzZXJ2YXRpb25SZWFzb25zKGNvbnRleHQsIGRvbWFpbik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZG9tYWluLFxuICAgICAgc3ViRG9tYWluLFxuICAgICAgaW50ZW50aW9uYWxpdHlIaW50cyxcbiAgICAgIHN1Z2dlc3RlZFR5cGVzLFxuICAgICAgcHJlc2VydmF0aW9uUmVhc29uc1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRvbWFpbi1zcGVjaWZpYyB0eXBlIHN1Z2dlc3Rpb25zXG4gICAqL1xuICBnZXREb21haW5TcGVjaWZpY1N1Z2dlc3Rpb25zKGRvbWFpbjogQ29kZURvbWFpbiwgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGJhc2VTdWdnZXN0aW9ucyA9IHRoaXMudHlwZU1hcHBpbmcuZ2V0KGRvbWFpbikgfHwgWyd1bmtub3duJ107XG4gICAgY29uc3QgY29udGV4dHVhbFN1Z2dlc3Rpb25zID0gdGhpcy5nZXRDb250ZXh0dWFsU3VnZ2VzdGlvbnMoY29udGV4dCwgZG9tYWluKTtcblxuICAgIHJldHVybiBbLi4ubmV3IFNldChbLi4uYmFzZVN1Z2dlc3Rpb25zLCAuLi5jb250ZXh0dWFsU3VnZ2VzdGlvbnNdKV07XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IHRoZSBwcmltYXJ5IGRvbWFpbiBiYXNlZCBvbiBmaWxlIHBhdGggYW5kIGNvbnRlbnQgYW5hbHlzaXNcbiAgICovXG4gIHByaXZhdGUgZGV0ZWN0RG9tYWluKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IENvZGVEb21haW4ge1xuICAgIC8vIEZpcnN0LCB0cnkgcGF0aC1iYXNlZCBkZXRlY3Rpb24gKG1vc3QgcmVsaWFibGUpXG4gICAgY29uc3QgcGF0aERvbWFpbiA9IHRoaXMuZGV0ZWN0RG9tYWluQnlQYXRoKGNvbnRleHQuZmlsZVBhdGgpO1xuICAgIGlmIChwYXRoRG9tYWluICE9PSBDb2RlRG9tYWluLlVUSUxJVFkpIHtcbiAgICAgIHJldHVybiBwYXRoRG9tYWluO1xuICAgIH1cblxuICAgIC8vIFRoZW4gdHJ5IGNvbnRlbnQtYmFzZWQgZGV0ZWN0aW9uXG4gICAgY29uc3QgY29udGVudERvbWFpbiA9IHRoaXMuZGV0ZWN0RG9tYWluQnlDb250ZW50KGNvbnRleHQpO1xuICAgIGlmIChjb250ZW50RG9tYWluICE9PSBDb2RlRG9tYWluLlVUSUxJVFkpIHtcbiAgICAgIHJldHVybiBjb250ZW50RG9tYWluO1xuICAgIH1cblxuICAgIC8vIEZpbmFsbHksIHRyeSBpbXBvcnQvZGVwZW5kZW5jeSBhbmFseXNpc1xuICAgIGNvbnN0IGltcG9ydERvbWFpbiA9IHRoaXMuZGV0ZWN0RG9tYWluQnlJbXBvcnRzKGNvbnRleHQpO1xuICAgIHJldHVybiBpbXBvcnREb21haW47XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGRvbWFpbiBiYXNlZCBvbiBmaWxlIHBhdGggcGF0dGVybnNcbiAgICogVXNlcyBwcmlvcml0eSBvcmRlciAtIGZpcnN0IG1hdGNoIHdpbnNcbiAgICovXG4gIHByaXZhdGUgZGV0ZWN0RG9tYWluQnlQYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiBDb2RlRG9tYWluIHtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGZpbGVQYXRoLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXG4gICAgLy8gQ2hlY2sgaW4gcHJpb3JpdHkgb3JkZXIgKHRlc3QgZmlsZXMgZmlyc3QsIHRoZW4gY29tcG9uZW50cywgZXRjLilcbiAgICBjb25zdCBvcmRlcmVkRG9tYWlucyA9IFtcbiAgICAgIENvZGVEb21haW4uVEVTVCxcbiAgICAgIENvZGVEb21haW4uQ09NUE9ORU5ULFxuICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICBDb2RlRG9tYWluLlVUSUxJVFlcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBkb21haW4gb2Ygb3JkZXJlZERvbWFpbnMpIHtcbiAgICAgIGNvbnN0IHBhdHRlcm5zID0gdGhpcy5wYXRoUGF0dGVybnMuZ2V0KGRvbWFpbikgfHwgW107XG4gICAgICBpZiAocGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChub3JtYWxpemVkUGF0aCkpKSB7XG4gICAgICAgIHJldHVybiBkb21haW47XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIENvZGVEb21haW4uVVRJTElUWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgZG9tYWluIGJhc2VkIG9uIGNvZGUgY29udGVudCBwYXR0ZXJuc1xuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3REb21haW5CeUNvbnRlbnQoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogQ29kZURvbWFpbiB7XG4gICAgY29uc3QgY29kZUNvbnRlbnQgPSBbY29udGV4dC5jb2RlU25pcHBldCwgLi4uY29udGV4dC5zdXJyb3VuZGluZ0xpbmVzXVxuICAgICAgLmpvaW4oJ1xcbicpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIFNjb3JlIGVhY2ggZG9tYWluIGJhc2VkIG9uIHBhdHRlcm4gbWF0Y2hlc1xuICAgIGNvbnN0IGRvbWFpblNjb3JlcyA9IG5ldyBNYXA8Q29kZURvbWFpbiwgbnVtYmVyPigpO1xuXG4gICAgZm9yIChjb25zdCBbZG9tYWluLCBwYXR0ZXJuc10gb2YgdGhpcy5jb250ZW50UGF0dGVybnMuZW50cmllcygpKSB7XG4gICAgICBsZXQgc2NvcmUgPSAwO1xuICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHBhdHRlcm5zKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjb2RlQ29udGVudC5tYXRjaChwYXR0ZXJuKTtcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICBzY29yZSArPSBtYXRjaGVzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNjb3JlID4gMCkge1xuICAgICAgICBkb21haW5TY29yZXMuc2V0KGRvbWFpbiwgc2NvcmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgZG9tYWluIHdpdGggdGhlIGhpZ2hlc3Qgc2NvcmVcbiAgICBpZiAoZG9tYWluU2NvcmVzLnNpemUgPiAwKSB7XG4gICAgICBjb25zdCBzb3J0ZWREb21haW5zID0gQXJyYXkuZnJvbShkb21haW5TY29yZXMuZW50cmllcygpKVxuICAgICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSk7XG4gICAgICByZXR1cm4gc29ydGVkRG9tYWluc1swXVswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gQ29kZURvbWFpbi5VVElMSVRZO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBkb21haW4gYmFzZWQgb24gaW1wb3J0IHN0YXRlbWVudHMgYW5kIGRlcGVuZGVuY2llc1xuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3REb21haW5CeUltcG9ydHMoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogQ29kZURvbWFpbiB7XG4gICAgY29uc3QgY29kZUNvbnRlbnQgPSBbY29udGV4dC5jb2RlU25pcHBldCwgLi4uY29udGV4dC5zdXJyb3VuZGluZ0xpbmVzXS5qb2luKCdcXG4nKTtcblxuICAgIC8vIExvb2sgZm9yIGltcG9ydCBwYXR0ZXJuc1xuICAgIGNvbnN0IGltcG9ydE1hdGNoZXMgPSBjb2RlQ29udGVudC5tYXRjaCgvaW1wb3J0Lipmcm9tXFxzK1snXCJgXShbXidcImBdKylbJ1wiYF0vZykgfHwgW107XG4gICAgY29uc3QgcmVxdWlyZU1hdGNoZXMgPSBjb2RlQ29udGVudC5tYXRjaCgvcmVxdWlyZVxcKFsnXCJgXShbXidcImBdKylbJ1wiYF1cXCkvZykgfHwgW107XG5cbiAgICBjb25zdCBhbGxJbXBvcnRzID0gWy4uLmltcG9ydE1hdGNoZXMsIC4uLnJlcXVpcmVNYXRjaGVzXS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIFByaW9yaXR5IG9yZGVyIGZvciBpbXBvcnQtYmFzZWQgZGV0ZWN0aW9uXG4gICAgaWYgKGFsbEltcG9ydHMuaW5jbHVkZXMoJ2plc3QnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCdAdGVzdGluZy1saWJyYXJ5JykgfHxcbiAgICAgICAgYWxsSW1wb3J0cy5pbmNsdWRlcygndml0ZXN0JykpIHtcbiAgICAgIHJldHVybiBDb2RlRG9tYWluLlRFU1Q7XG4gICAgfVxuXG4gICAgaWYgKGFsbEltcG9ydHMuaW5jbHVkZXMoJ3JlYWN0JykgfHxcbiAgICAgICAgYWxsSW1wb3J0cy5pbmNsdWRlcygnQC9jb21wb25lbnRzJykgfHxcbiAgICAgICAgYWxsSW1wb3J0cy5pbmNsdWRlcygnbmV4dC8nKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCdqc3gnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCd0c3gnKSkge1xuICAgICAgcmV0dXJuIENvZGVEb21haW4uQ09NUE9ORU5UO1xuICAgIH1cblxuICAgIGlmIChhbGxJbXBvcnRzLmluY2x1ZGVzKCdhc3Ryb25vbWlhJykgfHxcbiAgICAgICAgYWxsSW1wb3J0cy5pbmNsdWRlcygnYXN0cm9ub215LWVuZ2luZScpIHx8XG4gICAgICAgIGFsbEltcG9ydHMuaW5jbHVkZXMoJ3N1bmNhbGMnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCcvY2FsY3VsYXRpb25zLycpIHx8XG4gICAgICAgIGFsbEltcG9ydHMuaW5jbHVkZXMoJy9hc3RybycpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5BU1RST0xPR0lDQUw7XG4gICAgfVxuXG4gICAgaWYgKGFsbEltcG9ydHMuaW5jbHVkZXMoJy9jYW1wYWlnbicpIHx8XG4gICAgICAgIGFsbEltcG9ydHMuaW5jbHVkZXMoJ21ldHJpY3MnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCdpbnRlbGxpZ2VuY2UnKSkge1xuICAgICAgcmV0dXJuIENvZGVEb21haW4uQ0FNUEFJR047XG4gICAgfVxuXG4gICAgaWYgKGFsbEltcG9ydHMuaW5jbHVkZXMoJy9yZWNpcGUnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCcvaW5ncmVkaWVudCcpIHx8XG4gICAgICAgIGFsbEltcG9ydHMuaW5jbHVkZXMoJy9mb29kJykpIHtcbiAgICAgIHJldHVybiBDb2RlRG9tYWluLlJFQ0lQRTtcbiAgICB9XG5cbiAgICBpZiAoYWxsSW1wb3J0cy5pbmNsdWRlcygnL3NlcnZpY2UnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCcvYXBpJykgfHxcbiAgICAgICAgYWxsSW1wb3J0cy5pbmNsdWRlcygnYXhpb3MnKSB8fFxuICAgICAgICBhbGxJbXBvcnRzLmluY2x1ZGVzKCdmZXRjaCcpKSB7XG4gICAgICByZXR1cm4gQ29kZURvbWFpbi5TRVJWSUNFO1xuICAgIH1cblxuICAgIHJldHVybiBDb2RlRG9tYWluLlVUSUxJVFk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IHNwZWNpYWxpemVkIHN1YmRvbWFpbiB3aXRoaW4gdGhlIHByaW1hcnkgZG9tYWluXG4gICAqL1xuICBwcml2YXRlIGRldGVjdFN1YkRvbWFpbihjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQsIGRvbWFpbjogQ29kZURvbWFpbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBjb250ZXh0LmZpbGVQYXRoLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuICAgIGNvbnN0IGNvZGVDb250ZW50ID0gW2NvbnRleHQuY29kZVNuaXBwZXQsIC4uLmNvbnRleHQuc3Vycm91bmRpbmdMaW5lc11cbiAgICAgIC5qb2luKCdcXG4nKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBjb25zdCBzdWJEb21haW5QYXR0ZXJucyA9IHRoaXMuc3ViRG9tYWluUGF0dGVybnMuZ2V0KGRvbWFpbik7XG4gICAgaWYgKCFzdWJEb21haW5QYXR0ZXJucykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBTY29yZSBlYWNoIHN1YmRvbWFpbiBiYXNlZCBvbiBwYXR0ZXJuIG1hdGNoZXNcbiAgICBjb25zdCBzdWJEb21haW5TY29yZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXG4gICAgZm9yIChjb25zdCBbc3ViRG9tYWluLCBwYXR0ZXJuc10gb2Ygc3ViRG9tYWluUGF0dGVybnMuZW50cmllcygpKSB7XG4gICAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgICAvLyBDaGVjayBmaWxlIHBhdGggcGF0dGVybnNcbiAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBwYXR0ZXJucykge1xuICAgICAgICBpZiAocGF0dGVybi50ZXN0KGZpbGVQYXRoKSkge1xuICAgICAgICAgIHNjb3JlICs9IDI7IC8vIFBhdGggbWF0Y2hlcyBhcmUgd2VpZ2h0ZWQgaGlnaGVyXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNjb3JlID4gMCkge1xuICAgICAgICBzdWJEb21haW5TY29yZXMuc2V0KHN1YkRvbWFpbiwgc2NvcmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgc3ViZG9tYWluIHdpdGggdGhlIGhpZ2hlc3Qgc2NvcmVcbiAgICBpZiAoc3ViRG9tYWluU2NvcmVzLnNpemUgPiAwKSB7XG4gICAgICBjb25zdCBzb3J0ZWRTdWJEb21haW5zID0gQXJyYXkuZnJvbShzdWJEb21haW5TY29yZXMuZW50cmllcygpKVxuICAgICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSk7XG4gICAgICByZXR1cm4gc29ydGVkU3ViRG9tYWluc1swXVswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUludGVudGlvbmFsaXR5SGludHMoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0LCBkb21haW46IENvZGVEb21haW4pOiBJbnRlbnRpb25hbGl0eUhpbnRbXSB7XG4gICAgY29uc3QgaGludHM6IEludGVudGlvbmFsaXR5SGludFtdID0gW107XG5cbiAgICBzd2l0Y2ggKGRvbWFpbikge1xuICAgICAgY2FzZSBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTDpcbiAgICAgICAgaGludHMucHVzaCh7XG4gICAgICAgICAgcmVhc29uOiAnQXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyBvZnRlbiByZXF1aXJlIGZsZXhpYmxlIHR5cGluZyBmb3IgZXh0ZXJuYWwgYXN0cm9ub21pY2FsIGRhdGEnLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOCxcbiAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdwcmVzZXJ2ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ3Bvc2l0aW9uJykgfHwgY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygncGxhbmV0YXJ5JykpIHtcbiAgICAgICAgICBoaW50cy5wdXNoKHtcbiAgICAgICAgICAgIHJlYXNvbjogJ1BsYW5ldGFyeSBwb3NpdGlvbiBkYXRhIGZyb20gZXh0ZXJuYWwgQVBJcyBtYXkgbmVlZCBhbnkgdHlwZSBmb3IgY29tcGF0aWJpbGl0eScsXG4gICAgICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdkb2N1bWVudCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDb2RlRG9tYWluLlJFQ0lQRTpcbiAgICAgICAgaWYgKGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ2luZ3JlZGllbnQnKSB8fCBjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdyZWNpcGUnKSkge1xuICAgICAgICAgIGhpbnRzLnB1c2goe1xuICAgICAgICAgICAgcmVhc29uOiAnUmVjaXBlIGFuZCBpbmdyZWRpZW50IGRhdGEgY2FuIG9mdGVuIHVzZSBzcGVjaWZpYyB0eXBlcycsXG4gICAgICAgICAgICBjb25maWRlbmNlOiAwLjcsXG4gICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdyZXBsYWNlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENvZGVEb21haW4uQ0FNUEFJR046XG4gICAgICAgIGhpbnRzLnB1c2goe1xuICAgICAgICAgIHJlYXNvbjogJ0NhbXBhaWduIHN5c3RlbSByZXF1aXJlcyBmbGV4aWJpbGl0eSBmb3IgZHluYW1pYyBjb25maWd1cmF0aW9ucyBhbmQgbWV0cmljcycsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC44NSxcbiAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdwcmVzZXJ2ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ21ldHJpY3MnKSB8fCBjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdjb25maWcnKSkge1xuICAgICAgICAgIGhpbnRzLnB1c2goe1xuICAgICAgICAgICAgcmVhc29uOiAnRHluYW1pYyBjYW1wYWlnbiBjb25maWd1cmF0aW9ucyBiZW5lZml0IGZyb20gZmxleGlibGUgdHlwaW5nJyxcbiAgICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ2RvY3VtZW50J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENvZGVEb21haW4uVEVTVDpcbiAgICAgICAgaGludHMucHVzaCh7XG4gICAgICAgICAgcmVhc29uOiAnVGVzdCBmaWxlcyBvZnRlbiBuZWVkIGZsZXhpYmxlIHR5cGluZyBmb3IgbW9ja3MgYW5kIHRlc3QgZGF0YScsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC44LFxuICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3ByZXNlcnZlJ1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ29kZURvbWFpbi5TRVJWSUNFOlxuICAgICAgICBpZiAoY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygnYXBpJykgfHwgY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygncmVzcG9uc2UnKSkge1xuICAgICAgICAgIGhpbnRzLnB1c2goe1xuICAgICAgICAgICAgcmVhc29uOiAnQVBJIHJlc3BvbnNlcyBtYXkgcmVxdWlyZSBhbnkgdHlwZSBmb3IgZXh0ZXJuYWwgc2VydmljZSBjb21wYXRpYmlsaXR5JyxcbiAgICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOCxcbiAgICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ2RvY3VtZW50J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhpbnRzLnB1c2goe1xuICAgICAgICAgICAgcmVhc29uOiAnU2VydmljZSBsYXllciBjYW4gb2Z0ZW4gdXNlIG1vcmUgc3BlY2lmaWMgdHlwZXMnLFxuICAgICAgICAgICAgY29uZmlkZW5jZTogMC42LFxuICAgICAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAncmV2aWV3J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBoaW50cy5wdXNoKHtcbiAgICAgICAgICByZWFzb246ICdObyBkb21haW4tc3BlY2lmaWMgcGF0dGVybnMgZGV0ZWN0ZWQsIGNvbnNpZGVyIHJlcGxhY2VtZW50JyxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAncmV2aWV3J1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGludHM7XG4gIH1cblxuICBwcml2YXRlIGdldENvbnRleHR1YWxTdWdnZXN0aW9ucyhjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQsIGRvbWFpbjogQ29kZURvbWFpbik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBjb2RlQ29udGVudCA9IGNvbnRleHQuY29kZVNuaXBwZXQudG9Mb3dlckNhc2UoKTtcblxuICAgIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgICBjYXNlIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMOlxuICAgICAgICBpZiAoY29kZUNvbnRlbnQuaW5jbHVkZXMoJ3Bvc2l0aW9uJykpIHN1Z2dlc3Rpb25zLnB1c2goJ1BsYW5ldGFyeVBvc2l0aW9uJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygnZWxlbWVudCcpKSBzdWdnZXN0aW9ucy5wdXNoKCdFbGVtZW50YWxQcm9wZXJ0aWVzJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygnc2lnbicpKSBzdWdnZXN0aW9ucy5wdXNoKCdab2RpYWNTaWduJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygncGxhbmV0JykpIHN1Z2dlc3Rpb25zLnB1c2goJ1BsYW5ldCcpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDb2RlRG9tYWluLlJFQ0lQRTpcbiAgICAgICAgaWYgKGNvZGVDb250ZW50LmluY2x1ZGVzKCdpbmdyZWRpZW50JykpIHN1Z2dlc3Rpb25zLnB1c2goJ0luZ3JlZGllbnQnKTtcbiAgICAgICAgaWYgKGNvZGVDb250ZW50LmluY2x1ZGVzKCdyZWNpcGUnKSkgc3VnZ2VzdGlvbnMucHVzaCgnUmVjaXBlJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygnbnV0cml0aW9uJykpIHN1Z2dlc3Rpb25zLnB1c2goJ051dHJpdGlvbmFsSW5mbycpO1xuICAgICAgICBpZiAoY29kZUNvbnRlbnQuaW5jbHVkZXMoJ2Nvb2tpbmcnKSkgc3VnZ2VzdGlvbnMucHVzaCgnQ29va2luZ01ldGhvZCcpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDb2RlRG9tYWluLkNBTVBBSUdOOlxuICAgICAgICBpZiAoY29kZUNvbnRlbnQuaW5jbHVkZXMoJ21ldHJpY3MnKSkgc3VnZ2VzdGlvbnMucHVzaCgnUHJvZ3Jlc3NNZXRyaWNzJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygnY29uZmlnJykpIHN1Z2dlc3Rpb25zLnB1c2goJ0NhbXBhaWduQ29uZmlnJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygncmVzdWx0JykpIHN1Z2dlc3Rpb25zLnB1c2goJ0NhbXBhaWduUmVzdWx0Jyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygnZXJyb3InKSkgc3VnZ2VzdGlvbnMucHVzaCgnVmFsaWRhdGlvblJlc3VsdCcpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDb2RlRG9tYWluLlNFUlZJQ0U6XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygncmVzcG9uc2UnKSkgc3VnZ2VzdGlvbnMucHVzaCgnQXBpUmVzcG9uc2U8VD4nKTtcbiAgICAgICAgaWYgKGNvZGVDb250ZW50LmluY2x1ZGVzKCdyZXF1ZXN0JykpIHN1Z2dlc3Rpb25zLnB1c2goJ0FwaVJlcXVlc3QnKTtcbiAgICAgICAgaWYgKGNvZGVDb250ZW50LmluY2x1ZGVzKCdkYXRhJykpIHN1Z2dlc3Rpb25zLnB1c2goJ1NlcnZpY2VEYXRhJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENvZGVEb21haW4uQ09NUE9ORU5UOlxuICAgICAgICBpZiAoY29kZUNvbnRlbnQuaW5jbHVkZXMoJ3Byb3BzJykpIHN1Z2dlc3Rpb25zLnB1c2goJ0NvbXBvbmVudFByb3BzJyk7XG4gICAgICAgIGlmIChjb2RlQ29udGVudC5pbmNsdWRlcygnc3RhdGUnKSkgc3VnZ2VzdGlvbnMucHVzaCgnQ29tcG9uZW50U3RhdGUnKTtcbiAgICAgICAgaWYgKGNvZGVDb250ZW50LmluY2x1ZGVzKCdldmVudCcpKSBzdWdnZXN0aW9ucy5wdXNoKCdSZWFjdC5TeW50aGV0aWNFdmVudCcpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGdldFByZXNlcnZhdGlvblJlYXNvbnMoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0LCBkb21haW46IENvZGVEb21haW4pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVhc29uczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChkb21haW4gPT09IENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKSB7XG4gICAgICByZWFzb25zLnB1c2goJ0FzdHJvbG9naWNhbCBjYWxjdWxhdGlvbnMgcmVxdWlyZSBjb21wYXRpYmlsaXR5IHdpdGggZXh0ZXJuYWwgYXN0cm9ub21pY2FsIGxpYnJhcmllcycpO1xuICAgICAgcmVhc29ucy5wdXNoKCdQbGFuZXRhcnkgcG9zaXRpb24gZGF0YSBzdHJ1Y3R1cmVzIHZhcnkgYmV0d2VlbiBkaWZmZXJlbnQgQVBJIHNvdXJjZXMnKTtcbiAgICB9XG5cbiAgICBpZiAoZG9tYWluID09PSBDb2RlRG9tYWluLkNBTVBBSUdOKSB7XG4gICAgICByZWFzb25zLnB1c2goJ0NhbXBhaWduIHN5c3RlbSBuZWVkcyBmbGV4aWJpbGl0eSBmb3IgZXZvbHZpbmcgbWV0cmljcyBhbmQgY29uZmlndXJhdGlvbnMnKTtcbiAgICAgIHJlYXNvbnMucHVzaCgnRHluYW1pYyB0b29sIGludGVncmF0aW9uIHJlcXVpcmVzIGFkYXB0YWJsZSB0eXBlIHN0cnVjdHVyZXMnKTtcbiAgICB9XG5cbiAgICBpZiAoZG9tYWluID09PSBDb2RlRG9tYWluLlRFU1QpIHtcbiAgICAgIHJlYXNvbnMucHVzaCgnVGVzdCBmbGV4aWJpbGl0eSBmb3IgbW9ja2luZyBhbmQgdGVzdCBkYXRhIGdlbmVyYXRpb24nKTtcbiAgICAgIHJlYXNvbnMucHVzaCgnSmVzdCBhbmQgdGVzdGluZyBsaWJyYXJ5IGNvbXBhdGliaWxpdHkgcmVxdWlyZW1lbnRzJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQuaXNJblRlc3RGaWxlKSB7XG4gICAgICByZWFzb25zLnB1c2goJ1Rlc3QgZmlsZSBjb250ZXh0IGFsbG93cyBmb3IgbW9yZSBmbGV4aWJsZSB0eXBpbmcgcGF0dGVybnMnKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGV4dC5oYXNFeGlzdGluZ0NvbW1lbnQpIHtcbiAgICAgIHJlYXNvbnMucHVzaCgnRXhpc3RpbmcgZG9jdW1lbnRhdGlvbiBzdWdnZXN0cyBpbnRlbnRpb25hbCB1c2FnZScpO1xuICAgIH1cblxuICAgIHJldHVybiByZWFzb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcGF0aC1iYXNlZCBkb21haW4gZGV0ZWN0aW9uIHBhdHRlcm5zXG4gICAqIE9yZGVyIG1hdHRlcnMgLSBtb3JlIHNwZWNpZmljIHBhdHRlcm5zIHNob3VsZCBjb21lIGZpcnN0XG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVQYXRoUGF0dGVybnMoKTogTWFwPENvZGVEb21haW4sIFJlZ0V4cFtdPiB7XG4gICAgcmV0dXJuIG5ldyBNYXAoW1xuICAgICAgW0NvZGVEb21haW4uVEVTVCwgW1xuICAgICAgICAvX190ZXN0c19fL2ksXG4gICAgICAgIC9cXC50ZXN0XFwuL2ksXG4gICAgICAgIC9cXC5zcGVjXFwuL2ksXG4gICAgICAgIC9cXC90ZXN0L2ksXG4gICAgICAgIC9cXC9zcGVjL2lcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uQ09NUE9ORU5ULCBbXG4gICAgICAgIC9cXC9jb21wb25lbnQvaSxcbiAgICAgICAgL1xcLnRzeCQvaSxcbiAgICAgICAgL1xcLmpzeCQvaSxcbiAgICAgICAgL1xcL3VpXFwvL2ksXG4gICAgICAgIC9cXC9wYWdlc1xcLy9pLFxuICAgICAgICAvXFwvYXBwXFwvL2lcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uQVNUUk9MT0dJQ0FMLCBbXG4gICAgICAgIC9cXC9jYWxjdWxhdGlvbnNcXC8vaSxcbiAgICAgICAgL1xcL2FzdHJvL2ksXG4gICAgICAgIC9wbGFuZXRhcnkvaSxcbiAgICAgICAgL2VsZW1lbnRhbC9pLFxuICAgICAgICAvbHVuYXIvaSxcbiAgICAgICAgL3NvbGFyL2ksXG4gICAgICAgIC96b2RpYWMvaSxcbiAgICAgICAgL2VwaGVtZXJpcy9pXG4gICAgICBdXSxcbiAgICAgIFtDb2RlRG9tYWluLkNBTVBBSUdOLCBbXG4gICAgICAgIC9cXC9jYW1wYWlnbi9pLFxuICAgICAgICAvXFwvaW50ZWxsaWdlbmNlL2ksXG4gICAgICAgIC90eXBlc2NyaXB0LiplcnJvci9pLFxuICAgICAgICAvbGludGluZy9pLFxuICAgICAgICAvdmFsaWRhdGlvbi9pLFxuICAgICAgICAvbWV0cmljcy9pLFxuICAgICAgICAvcHJvZ3Jlc3MvaVxuICAgICAgXV0sXG4gICAgICBbQ29kZURvbWFpbi5SRUNJUEUsIFtcbiAgICAgICAgL1xcL3JlY2lwZS9pLFxuICAgICAgICAvXFwvaW5ncmVkaWVudC9pLFxuICAgICAgICAvXFwvZm9vZC9pLFxuICAgICAgICAvXFwvY3VsaW5hcnkvaSxcbiAgICAgICAgL1xcL2Nvb2tpbmcvaSxcbiAgICAgICAgL1xcL251dHJpdGlvbi9pLFxuICAgICAgICAvXFwvZGF0YVxcLy4qaW5ncmVkaWVudC9pLFxuICAgICAgICAvXFwvZGF0YVxcLy4qcmVjaXBlL2lcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uU0VSVklDRSwgW1xuICAgICAgICAvXFwvc2VydmljZS9pLFxuICAgICAgICAvXFwvYXBpL2ksXG4gICAgICAgIC9cXC9jbGllbnQvaSxcbiAgICAgICAgL1xcL2FkYXB0ZXIvaSxcbiAgICAgICAgL3JlY29tbWVuZGF0aW9uLipzZXJ2aWNlL2lcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uVVRJTElUWSwgW1xuICAgICAgICAvXFwvdXRpbHMvaSxcbiAgICAgICAgL1xcL2hlbHBlci9pLFxuICAgICAgICAvXFwvY29tbW9uL2ksXG4gICAgICAgIC9cXC9zaGFyZWQvaSxcbiAgICAgICAgL1xcL2xpYi9pXG4gICAgICBdXVxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgY29udGVudC1iYXNlZCBkb21haW4gZGV0ZWN0aW9uIHBhdHRlcm5zXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVDb250ZW50UGF0dGVybnMoKTogTWFwPENvZGVEb21haW4sIFJlZ0V4cFtdPiB7XG4gICAgcmV0dXJuIG5ldyBNYXAoW1xuICAgICAgW0NvZGVEb21haW4uQVNUUk9MT0dJQ0FMLCBbXG4gICAgICAgIC9wbGFuZXRhcnl8cGxhbmV0fGFzdHJvfHpvZGlhY3xzaWdufGVsZW1lbnR8bHVuYXJ8c29sYXIvZ2ksXG4gICAgICAgIC9wb3NpdGlvbnxkZWdyZWV8bG9uZ2l0dWRlfGxhdGl0dWRlfGVwaGVtZXJpcy9naSxcbiAgICAgICAgL2ZpcmV8d2F0ZXJ8ZWFydGh8YWlyfGVsZW1lbnRhbC9naSxcbiAgICAgICAgL2FzdHJvbm9taWF8YXN0cm9ub215LWVuZ2luZXxzdW5jYWxjL2dpLFxuICAgICAgICAvUGxhbmV0YXJ5UG9zaXRpb258RWxlbWVudGFsUHJvcGVydGllc3xab2RpYWNTaWduL2dpXG4gICAgICBdXSxcbiAgICAgIFtDb2RlRG9tYWluLlJFQ0lQRSwgW1xuICAgICAgICAvcmVjaXBlfGluZ3JlZGllbnR8Zm9vZHxjdWxpbmFyeXxjb29raW5nfG51dHJpdGlvbi9naSxcbiAgICAgICAgL2ZsYXZvcnx0YXN0ZXxzcGljZXxoZXJifHZlZ2V0YWJsZXxmcnVpdC9naSxcbiAgICAgICAgL21lYWx8ZGlzaHxjdWlzaW5lfGRpZXRhcnkvZ2ksXG4gICAgICAgIC9JbmdyZWRpZW50fFJlY2lwZXxOdXRyaXRpb25hbEluZm98Q29va2luZ01ldGhvZC9naVxuICAgICAgXV0sXG4gICAgICBbQ29kZURvbWFpbi5DQU1QQUlHTiwgW1xuICAgICAgICAvY2FtcGFpZ258bWV0cmljc3xwcm9ncmVzc3x0eXBlc2NyaXB0fGxpbnRpbmd8ZXJyb3IvZ2ksXG4gICAgICAgIC92YWxpZGF0aW9ufHNhZmV0eXxyb2xsYmFja3xjaGVja3BvaW50L2dpLFxuICAgICAgICAvaW50ZWxsaWdlbmNlfGVudGVycHJpc2V8YXV0b21hdGlvbi9naSxcbiAgICAgICAgL0NhbXBhaWduQ29uZmlnfFByb2dyZXNzTWV0cmljc3xWYWxpZGF0aW9uUmVzdWx0L2dpXG4gICAgICBdXSxcbiAgICAgIFtDb2RlRG9tYWluLlNFUlZJQ0UsIFtcbiAgICAgICAgL3NlcnZpY2V8YXBpfHJlcXVlc3R8cmVzcG9uc2V8Y2xpZW50fHNlcnZlci9naSxcbiAgICAgICAgL2VuZHBvaW50fGh0dHB8ZmV0Y2h8YXhpb3N8ZGF0YS9naSxcbiAgICAgICAgL0FwaVJlc3BvbnNlfFNlcnZpY2VEYXRhfFJlcXVlc3RDb25maWcvZ2lcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uQ09NUE9ORU5ULCBbXG4gICAgICAgIC9jb21wb25lbnR8cHJvcHN8c3RhdGV8cmVuZGVyfGpzeHx0c3gvZ2ksXG4gICAgICAgIC9yZWFjdHxob29rfGNvbnRleHR8cHJvdmlkZXIvZ2ksXG4gICAgICAgIC9Db21wb25lbnRQcm9wc3xSZWFjdFxcLkNvbXBvbmVudHxKU1hcXC5FbGVtZW50L2dpXG4gICAgICBdXSxcbiAgICAgIFtDb2RlRG9tYWluLlVUSUxJVFksIFtcbiAgICAgICAgL3V0aWx8aGVscGVyfGNvbW1vbnxzaGFyZWR8bGliL2dpLFxuICAgICAgICAvZnVuY3Rpb258bWV0aG9kfHRvb2x8Zm9ybWF0L2dpXG4gICAgICBdXSxcbiAgICAgIFtDb2RlRG9tYWluLlRFU1QsIFtcbiAgICAgICAgL3Rlc3R8c3BlY3xtb2NrfGplc3R8ZGVzY3JpYmV8aXR8ZXhwZWN0L2dpLFxuICAgICAgICAvZml4dHVyZXxzdHVifHNweXxiZWZvcmVFYWNofGFmdGVyRWFjaC9naSxcbiAgICAgICAgL2plc3RcXC5Nb2NrfE1vY2tlZEZ1bmN0aW9ufFRlc3REYXRhL2dpXG4gICAgICBdXVxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgc3ViZG9tYWluIGRldGVjdGlvbiBwYXR0ZXJuc1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplU3ViRG9tYWluUGF0dGVybnMoKTogTWFwPENvZGVEb21haW4sIE1hcDxzdHJpbmcsIFJlZ0V4cFtdPj4ge1xuICAgIHJldHVybiBuZXcgTWFwKFtcbiAgICAgIFtDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCwgbmV3IE1hcChbXG4gICAgICAgIFsncGxhbmV0YXJ5JywgWy9wbGFuZXRhcnl8cGxhbmV0L2dpLCAvcG9zaXRpb258ZGVncmVlfGxvbmdpdHVkZS9naV1dLFxuICAgICAgICBbJ2VsZW1lbnRhbCcsIFsvZWxlbWVudGFsfGVsZW1lbnQvZ2ksIC9maXJlfHdhdGVyfGVhcnRofGFpci9naV1dLFxuICAgICAgICBbJ2x1bmFyJywgWy9sdW5hcnxtb29uL2dpLCAvcGhhc2V8Y3ljbGUvZ2ldXSxcbiAgICAgICAgWydzb2xhcicsIFsvc29sYXJ8c3VuL2dpLCAvc3VucmlzZXxzdW5zZXQvZ2ldXSxcbiAgICAgICAgWyd6b2RpYWMnLCBbL3pvZGlhY3xzaWduL2dpLCAvYXJpZXN8dGF1cnVzfGdlbWluaXxjYW5jZXJ8bGVvfHZpcmdvfGxpYnJhfHNjb3JwaW98c2FnaXR0YXJpdXN8Y2Fwcmljb3JufGFxdWFyaXVzfHBpc2Nlcy9naV1dLFxuICAgICAgICBbJ2NhbGN1bGF0aW9ucycsIFsvY2FsY3VsYXRpb258Y29tcHV0ZXxhbGdvcml0aG0vZ2ksIC9lcGhlbWVyaXN8dHJhbnNpdC9naV1dXG4gICAgICBdKV0sXG4gICAgICBbQ29kZURvbWFpbi5SRUNJUEUsIG5ldyBNYXAoW1xuICAgICAgICBbJ2luZ3JlZGllbnRzJywgWy9pbmdyZWRpZW50L2dpLCAvc3BpY2V8aGVyYnx2ZWdldGFibGV8ZnJ1aXQvZ2ldXSxcbiAgICAgICAgWydjb29raW5nLW1ldGhvZHMnLCBbL2Nvb2tpbmd8bWV0aG9kL2dpLCAvYmFrZXxib2lsfGZyeXxzdGVhbXxncmlsbC9naV1dLFxuICAgICAgICBbJ251dHJpdGlvbicsIFsvbnV0cml0aW9ufG51dHJpZW50L2dpLCAvY2Fsb3JpZXx2aXRhbWlufG1pbmVyYWwvZ2ldXSxcbiAgICAgICAgWydjdWlzaW5lcycsIFsvY3Vpc2luZXxjdWx0dXJhbC9naSwgL2l0YWxpYW58Y2hpbmVzZXxtZXhpY2FufGluZGlhbi9naV1dLFxuICAgICAgICBbJ3JlY2lwZXMnLCBbL3JlY2lwZXxkaXNofG1lYWwvZ2ksIC9wcmVwYXJhdGlvbnxpbnN0cnVjdGlvbi9naV1dXG4gICAgICBdKV0sXG4gICAgICBbQ29kZURvbWFpbi5DQU1QQUlHTiwgbmV3IE1hcChbXG4gICAgICAgIFsndHlwZXNjcmlwdC1lcnJvcnMnLCBbL3R5cGVzY3JpcHR8dHNcXGQrL2dpLCAvZXJyb3J8Y29tcGlsYXRpb24vZ2ldXSxcbiAgICAgICAgWydsaW50aW5nJywgWy9saW50fGVzbGludC9naSwgL3dhcm5pbmd8cnVsZS9naV1dLFxuICAgICAgICBbJ3BlcmZvcm1hbmNlJywgWy9wZXJmb3JtYW5jZXxvcHRpbWl6YXRpb24vZ2ksIC9tZW1vcnl8c3BlZWR8YnVuZGxlL2dpXV0sXG4gICAgICAgIFsnbWV0cmljcycsIFsvbWV0cmljc3xwcm9ncmVzcy9naSwgL3RyYWNraW5nfG1lYXN1cmVtZW50L2dpXV0sXG4gICAgICAgIFsnaW50ZWxsaWdlbmNlJywgWy9pbnRlbGxpZ2VuY2V8ZW50ZXJwcmlzZS9naSwgL2FuYWx5dGljc3xpbnNpZ2h0cy9naV1dLFxuICAgICAgICBbJ3NhZmV0eScsIFsvc2FmZXR5fHZhbGlkYXRpb24vZ2ksIC9yb2xsYmFja3xjaGVja3BvaW50L2dpXV1cbiAgICAgIF0pXSxcbiAgICAgIFtDb2RlRG9tYWluLlNFUlZJQ0UsIG5ldyBNYXAoW1xuICAgICAgICBbJ3JlY29tbWVuZGF0aW9uJywgWy9yZWNvbW1lbmRhdGlvbnxzdWdnZXN0L2dpLCAvYWxnb3JpdGhtfG1hdGNoaW5nL2dpXV0sXG4gICAgICAgIFsnYXBpLWludGVncmF0aW9uJywgWy9hcGl8aW50ZWdyYXRpb24vZ2ksIC9yZXF1ZXN0fHJlc3BvbnNlfGVuZHBvaW50L2dpXV0sXG4gICAgICAgIFsnZGF0YS1wcm9jZXNzaW5nJywgWy9kYXRhfHByb2Nlc3NpbmcvZ2ksIC90cmFuc2Zvcm18cGFyc2V8dmFsaWRhdGUvZ2ldXSxcbiAgICAgICAgWydjYWNoaW5nJywgWy9jYWNoZXxzdG9yYWdlL2dpLCAvcmVkaXN8bWVtb3J5L2dpXV1cbiAgICAgIF0pXSxcbiAgICAgIFtDb2RlRG9tYWluLkNPTVBPTkVOVCwgbmV3IE1hcChbXG4gICAgICAgIFsndWktY29tcG9uZW50cycsIFsvY29tcG9uZW50fHVpL2dpLCAvYnV0dG9ufGlucHV0fG1vZGFsL2dpXV0sXG4gICAgICAgIFsncGFnZXMnLCBbL3BhZ2V8cm91dGUvZ2ksIC9uYXZpZ2F0aW9ufGxheW91dC9naV1dLFxuICAgICAgICBbJ2hvb2tzJywgWy9ob29rfHVzZVtBLVpdL2dpLCAvc3RhdGV8ZWZmZWN0fGNvbnRleHQvZ2ldXSxcbiAgICAgICAgWydmb3JtcycsIFsvZm9ybXxpbnB1dC9naSwgL3ZhbGlkYXRpb258c3VibWl0L2dpXV1cbiAgICAgIF0pXSxcbiAgICAgIFtDb2RlRG9tYWluLlRFU1QsIG5ldyBNYXAoW1xuICAgICAgICBbJ3VuaXQtdGVzdHMnLCBbL3VuaXR8dGVzdC9naSwgL2Rlc2NyaWJlfGl0fGV4cGVjdC9naV1dLFxuICAgICAgICBbJ2ludGVncmF0aW9uLXRlc3RzJywgWy9pbnRlZ3JhdGlvbnxlMmUvZ2ksIC93b3JrZmxvd3xzY2VuYXJpby9naV1dLFxuICAgICAgICBbJ21vY2tzJywgWy9tb2NrfHN0dWJ8c3B5L2dpLCAvamVzdFxcLm1vY2t8bW9ja0ltcGxlbWVudGF0aW9uL2dpXV1cbiAgICAgIF0pXSxcbiAgICAgIFtDb2RlRG9tYWluLlVUSUxJVFksIG5ldyBNYXAoW1xuICAgICAgICBbJ3ZhbGlkYXRpb24nLCBbL3ZhbGlkYXRpb258dmFsaWRhdGUvZ2ksIC9zY2hlbWF8cnVsZS9naV1dLFxuICAgICAgICBbJ2Zvcm1hdHRpbmcnLCBbL2Zvcm1hdHx0cmFuc2Zvcm0vZ2ksIC9zdHJpbmd8ZGF0ZXxudW1iZXIvZ2ldXSxcbiAgICAgICAgWydoZWxwZXJzJywgWy9oZWxwZXJ8dXRpbGl0eS9naSwgL2NvbW1vbnxzaGFyZWQvZ2ldXVxuICAgICAgXSldXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogTGVnYWN5IG1ldGhvZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRG9tYWluUGF0dGVybnMoKTogTWFwPENvZGVEb21haW4sIFJlZ0V4cFtdPiB7XG4gICAgLy8gVGhpcyBtZXRob2QgaXMga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgIC8vIFRoZSBhY3R1YWwgcGF0dGVybnMgYXJlIG5vdyBpbiBpbml0aWFsaXplQ29udGVudFBhdHRlcm5zXG4gICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZUNvbnRlbnRQYXR0ZXJucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplVHlwZU1hcHBpbmcoKTogTWFwPENvZGVEb21haW4sIHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIG5ldyBNYXAoW1xuICAgICAgW0NvZGVEb21haW4uQVNUUk9MT0dJQ0FMLCBbXG4gICAgICAgICdQbGFuZXRhcnlQb3NpdGlvbicsXG4gICAgICAgICdFbGVtZW50YWxQcm9wZXJ0aWVzJyxcbiAgICAgICAgJ1pvZGlhY1NpZ24nLFxuICAgICAgICAnUGxhbmV0JyxcbiAgICAgICAgJ0FzdHJvbG9naWNhbERhdGEnLFxuICAgICAgICAndW5rbm93bidcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uUkVDSVBFLCBbXG4gICAgICAgICdJbmdyZWRpZW50JyxcbiAgICAgICAgJ1JlY2lwZScsXG4gICAgICAgICdOdXRyaXRpb25hbEluZm8nLFxuICAgICAgICAnQ29va2luZ01ldGhvZCcsXG4gICAgICAgICdDdWxpbmFyeURhdGEnLFxuICAgICAgICAndW5rbm93bidcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uQ0FNUEFJR04sIFtcbiAgICAgICAgJ1Byb2dyZXNzTWV0cmljcycsXG4gICAgICAgICdDYW1wYWlnbkNvbmZpZycsXG4gICAgICAgICdDYW1wYWlnblJlc3VsdCcsXG4gICAgICAgICdWYWxpZGF0aW9uUmVzdWx0JyxcbiAgICAgICAgJ1NhZmV0eUV2ZW50JyxcbiAgICAgICAgJ1JlY29yZDxzdHJpbmcsIHVua25vd24+J1xuICAgICAgXV0sXG4gICAgICBbQ29kZURvbWFpbi5TRVJWSUNFLCBbXG4gICAgICAgICdBcGlSZXNwb25zZTxUPicsXG4gICAgICAgICdTZXJ2aWNlRGF0YScsXG4gICAgICAgICdSZXF1ZXN0Q29uZmlnJyxcbiAgICAgICAgJ1Jlc3BvbnNlRGF0YScsXG4gICAgICAgICd1bmtub3duJ1xuICAgICAgXV0sXG4gICAgICBbQ29kZURvbWFpbi5DT01QT05FTlQsIFtcbiAgICAgICAgJ0NvbXBvbmVudFByb3BzJyxcbiAgICAgICAgJ1JlYWN0LkNvbXBvbmVudFByb3BzPFQ+JyxcbiAgICAgICAgJ1JlYWN0LlJlYWN0Tm9kZScsXG4gICAgICAgICdKU1guRWxlbWVudCcsXG4gICAgICAgICd1bmtub3duJ1xuICAgICAgXV0sXG4gICAgICBbQ29kZURvbWFpbi5VVElMSVRZLCBbXG4gICAgICAgICd1bmtub3duJyxcbiAgICAgICAgJ1JlY29yZDxzdHJpbmcsIHVua25vd24+JyxcbiAgICAgICAgJ29iamVjdCdcbiAgICAgIF1dLFxuICAgICAgW0NvZGVEb21haW4uVEVTVCwgW1xuICAgICAgICAnamVzdC5Nb2NrJyxcbiAgICAgICAgJ01vY2tlZEZ1bmN0aW9uPFQ+JyxcbiAgICAgICAgJ1Rlc3REYXRhJyxcbiAgICAgICAgJ3Vua25vd24nXG4gICAgICBdXVxuICAgIF0pO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=