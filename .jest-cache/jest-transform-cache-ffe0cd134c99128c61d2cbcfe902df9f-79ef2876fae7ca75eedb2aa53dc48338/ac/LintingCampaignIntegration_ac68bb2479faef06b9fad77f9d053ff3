43f5e0e66bc2746956e47cd6ae795293
"use strict";
/**
 * Linting Campaign Integration Service
 *
 * Integrates linting progress tracking with the existing campaign system
 * for comprehensive quality improvement campaigns.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LintingCampaignIntegration = void 0;
const child_process_1 = require("child_process");
const fs_1 = require("fs");
const logger_1 = require("@/utils/logger");
const LintingProgressTracker_1 = require("./LintingProgressTracker");
/**
 * Linting Campaign Integration Service
 */
class LintingCampaignIntegration {
    progressTracker;
    campaignConfigFile = '.kiro/campaigns/linting-campaigns.json';
    activeConfigFile = '.kiro/campaigns/active-linting-campaign.json';
    constructor() {
        this.progressTracker = new LintingProgressTracker_1.LintingProgressTracker();
        this.ensureDirectoryExists();
    }
    /**
     * Start a linting improvement campaign
     */
    async startCampaign(config) {
        try {
            logger_1.logger.info(`Starting linting campaign: ${config.name}`);
            // Collect baseline metrics
            const baselineReport = await this.progressTracker.generateProgressReport();
            // Save campaign configuration
            this.saveCampaignConfig(config);
            this.setActiveCampaign(config.campaignId, baselineReport);
            // Execute campaign phases
            for (const phase of config.phases) {
                await this.executePhase(config, phase);
            }
            // Generate final report
            const finalReport = await this.generateCampaignReport(config.campaignId);
            logger_1.logger.info('Linting campaign completed:', finalReport);
        }
        catch (error) {
            logger_1.logger.error('Error executing linting campaign:', error);
            throw error;
        }
    }
    /**
     * Execute a specific campaign phase
     */
    async executePhase(config, phase) {
        const startTime = Date.now();
        try {
            logger_1.logger.info(`Executing campaign phase: ${phase.name}`);
            // Collect pre-phase metrics
            const prePhaseReport = await this.progressTracker.generateProgressReport();
            // Execute phase tools
            const toolResults = await this.executePhaseTools(phase.tools);
            // Collect post-phase metrics
            const postPhaseReport = await this.progressTracker.generateProgressReport();
            // Evaluate success criteria
            const success = this.evaluatePhaseSuccess(phase, prePhaseReport, postPhaseReport);
            const result = {
                campaignId: config.campaignId,
                phase: phase.id,
                success,
                metricsImprovement: {
                    errorsBefore: prePhaseReport.currentMetrics.errors,
                    errorsAfter: postPhaseReport.currentMetrics.errors,
                    warningsBefore: prePhaseReport.currentMetrics.warnings,
                    warningsAfter: postPhaseReport.currentMetrics.warnings,
                    improvementPercentage: postPhaseReport.improvement.percentageImprovement,
                },
                executionTime: Date.now() - startTime,
                issues: toolResults.issues,
                recommendations: toolResults.recommendations,
            };
            // Update campaign progress
            await this.updateCampaignProgress(config.campaignId, phase.id, result);
            // Check for notifications
            if (config.notifications.onProgress) {
                await this.sendProgressNotification(config, result);
            }
            logger_1.logger.info(`Phase ${phase.name} completed:`, {
                success,
                improvement: result.metricsImprovement.improvementPercentage,
            });
            return result;
        }
        catch (error) {
            logger_1.logger.error(`Error executing phase ${phase.name}:`, error);
            throw error;
        }
    }
    /**
     * Execute phase tools
     */
    async executePhaseTools(tools) {
        const issues = [];
        const recommendations = [];
        for (const tool of tools) {
            try {
                const result = await this.executeTool(tool);
                issues.push(...result.issues);
                recommendations.push(...result.recommendations);
            }
            catch (error) {
                issues.push(`Tool ${tool} failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
            }
        }
        return { issues, recommendations };
    }
    /**
     * Execute a specific tool
     */
    async executeTool(tool) {
        const issues = [];
        const recommendations = [];
        try {
            switch (tool) {
                case 'eslint-fix':
                    await this.executeESLintFix();
                    recommendations.push('Applied ESLint auto-fixes');
                    break;
                case 'unused-imports':
                    await this.executeUnusedImportRemoval();
                    recommendations.push('Removed unused imports');
                    break;
                case 'import-organization':
                    await this.executeImportOrganization();
                    recommendations.push('Organized import statements');
                    break;
                case 'explicit-any-elimination':
                    await this.executeExplicitAnyElimination();
                    recommendations.push('Reduced explicit any usage');
                    break;
                case 'console-cleanup':
                    await this.executeConsoleCleanup();
                    recommendations.push('Cleaned up console statements');
                    break;
                default:
                    issues.push(`Unknown tool: ${tool}`);
            }
        }
        catch (error) {
            issues.push(`Tool ${tool} execution failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
        return { issues, recommendations };
    }
    /**
     * Tool execution methods
     */
    async executeESLintFix() {
        try {
            (0, child_process_1.execSync)('yarn lint:fix', { stdio: 'pipe' });
        }
        catch (error) {
            // ESLint fix may return non-zero exit code but still apply fixes
            logger_1.logger.debug('ESLint fix completed with warnings');
        }
    }
    async executeUnusedImportRemoval() {
        try {
            // Use the existing SafeUnusedImportRemover
            const { SafeUnusedImportRemover } = await Promise.resolve().then(() => __importStar(require('./SafeUnusedImportRemover')));
            const remover = new SafeUnusedImportRemover();
            await remover.processUnusedImports();
        }
        catch (error) {
            logger_1.logger.warn('Unused import removal failed:', error);
        }
    }
    async executeImportOrganization() {
        try {
            (0, child_process_1.execSync)('yarn lint --fix-type layout', { stdio: 'pipe' });
        }
        catch (error) {
            logger_1.logger.debug('Import organization completed with warnings');
        }
    }
    async executeExplicitAnyElimination() {
        try {
            // This would integrate with existing explicit any elimination tools
            logger_1.logger.info('Explicit any elimination would be executed here');
        }
        catch (error) {
            logger_1.logger.warn('Explicit any elimination failed:', error);
        }
    }
    async executeConsoleCleanup() {
        try {
            // This would integrate with existing console cleanup tools
            logger_1.logger.info('Console cleanup would be executed here');
        }
        catch (error) {
            logger_1.logger.warn('Console cleanup failed:', error);
        }
    }
    /**
     * Evaluate phase success criteria
     */
    evaluatePhaseSuccess(phase, preReport, postReport) {
        const errorReduction = preReport.currentMetrics.errors - postReport.currentMetrics.errors;
        const warningReduction = preReport.currentMetrics.warnings - postReport.currentMetrics.warnings;
        const performanceAcceptable = postReport.currentMetrics.performanceMetrics.executionTime <=
            phase.successCriteria.performanceThreshold;
        return (errorReduction >= phase.successCriteria.errorReduction &&
            warningReduction >= phase.successCriteria.warningReduction &&
            performanceAcceptable);
    }
    /**
     * Generate comprehensive campaign report
     */
    async generateCampaignReport(campaignId) {
        try {
            const config = this.getCampaignConfig(campaignId);
            const activeCampaign = this.getActiveCampaign();
            const currentReport = await this.progressTracker.generateProgressReport();
            if (!config || !activeCampaign) {
                throw new Error('Campaign data not found');
            }
            const report = {
                campaignId,
                name: config.name,
                startTime: activeCampaign.startTime,
                endTime: new Date(),
                baselineMetrics: activeCampaign.baselineMetrics,
                finalMetrics: currentReport.currentMetrics,
                totalImprovement: {
                    errorReduction: activeCampaign.baselineMetrics.errors - currentReport.currentMetrics.errors,
                    warningReduction: activeCampaign.baselineMetrics.warnings - currentReport.currentMetrics.warnings,
                    percentageImprovement: currentReport.improvement.percentageImprovement,
                },
                phasesExecuted: activeCampaign.phasesExecuted || [],
                qualityGatesStatus: currentReport.qualityGates,
                recommendations: currentReport.improvement.percentageImprovement > 0
                    ? ['Continue monitoring for regressions', 'Consider additional optimization phases']
                    : ['Investigate why improvements were not achieved', 'Review tool configurations'],
            };
            // Save final report
            this.saveCampaignReport(report);
            return report;
        }
        catch (error) {
            logger_1.logger.error('Error generating campaign report:', error);
            throw error;
        }
    }
    /**
     * Create predefined campaign configurations
     */
    createStandardCampaigns() {
        return [
            {
                campaignId: 'linting-excellence-standard',
                name: 'Standard Linting Excellence Campaign',
                description: 'Comprehensive linting improvement campaign targeting zero errors',
                phases: [
                    {
                        id: 'phase-1-auto-fixes',
                        name: 'Automated Fixes',
                        description: 'Apply all available ESLint auto-fixes',
                        tools: ['eslint-fix'],
                        successCriteria: {
                            errorReduction: 50,
                            warningReduction: 100,
                            performanceThreshold: 60000,
                        },
                        estimatedDuration: 15,
                    },
                    {
                        id: 'phase-2-imports',
                        name: 'Import Organization',
                        description: 'Clean up and organize import statements',
                        tools: ['unused-imports', 'import-organization'],
                        successCriteria: {
                            errorReduction: 20,
                            warningReduction: 200,
                            performanceThreshold: 60000,
                        },
                        estimatedDuration: 30,
                    },
                    {
                        id: 'phase-3-types',
                        name: 'Type Safety Improvement',
                        description: 'Eliminate explicit any and improve type safety',
                        tools: ['explicit-any-elimination'],
                        successCriteria: {
                            errorReduction: 10,
                            warningReduction: 50,
                            performanceThreshold: 60000,
                        },
                        estimatedDuration: 45,
                    },
                    {
                        id: 'phase-4-cleanup',
                        name: 'Code Cleanup',
                        description: 'Clean up console statements and other code quality issues',
                        tools: ['console-cleanup'],
                        successCriteria: {
                            errorReduction: 5,
                            warningReduction: 30,
                            performanceThreshold: 60000,
                        },
                        estimatedDuration: 20,
                    },
                ],
                targets: {
                    maxErrors: 0,
                    maxWarnings: 100,
                    targetReduction: 80,
                },
                safetyProtocols: ['backup-before-changes', 'validate-build', 'rollback-on-failure'],
                notifications: {
                    onProgress: true,
                    onCompletion: true,
                    onRegression: true,
                },
            },
        ];
    }
    /**
     * Utility methods
     */
    ensureDirectoryExists() {
        try {
            (0, child_process_1.execSync)('mkdir -p .kiro/campaigns', { stdio: 'pipe' });
        }
        catch (error) {
            // Directory might already exist
        }
    }
    saveCampaignConfig(config) {
        try {
            const configs = this.getAllCampaignConfigs();
            configs[config.campaignId] = config;
            (0, fs_1.writeFileSync)(this.campaignConfigFile, JSON.stringify(configs, null, 2));
        }
        catch (error) {
            logger_1.logger.error('Error saving campaign config:', error);
        }
    }
    getCampaignConfig(campaignId) {
        try {
            const configs = this.getAllCampaignConfigs();
            return configs[campaignId];
        }
        catch (error) {
            logger_1.logger.error('Error reading campaign config:', error);
            return undefined;
        }
    }
    getAllCampaignConfigs() {
        try {
            if ((0, fs_1.existsSync)(this.campaignConfigFile)) {
                const data = (0, fs_1.readFileSync)(this.campaignConfigFile, 'utf8');
                return JSON.parse(data);
            }
        }
        catch (error) {
            logger_1.logger.warn('Error reading campaign configs:', error);
        }
        return {};
    }
    setActiveCampaign(campaignId, baselineReport) {
        try {
            const activeCampaign = {
                campaignId,
                startTime: new Date(),
                baselineMetrics: baselineReport.currentMetrics,
                phasesExecuted: [],
            };
            (0, fs_1.writeFileSync)(this.activeConfigFile, JSON.stringify(activeCampaign, null, 2));
        }
        catch (error) {
            logger_1.logger.error('Error setting active campaign:', error);
        }
    }
    getActiveCampaign() {
        try {
            if ((0, fs_1.existsSync)(this.activeConfigFile)) {
                const data = (0, fs_1.readFileSync)(this.activeConfigFile, 'utf8');
                return JSON.parse(data);
            }
        }
        catch (error) {
            logger_1.logger.warn('Error reading active campaign:', error);
        }
        return null;
    }
    async updateCampaignProgress(campaignId, phaseId, result) {
        try {
            const activeCampaign = this.getActiveCampaign();
            if (activeCampaign && activeCampaign.campaignId === campaignId) {
                activeCampaign.phasesExecuted = activeCampaign.phasesExecuted || [];
                activeCampaign.phasesExecuted.push({
                    phaseId,
                    result,
                    timestamp: new Date(),
                });
                (0, fs_1.writeFileSync)(this.activeConfigFile, JSON.stringify(activeCampaign, null, 2));
            }
        }
        catch (error) {
            logger_1.logger.error('Error updating campaign progress:', error);
        }
    }
    async sendProgressNotification(config, result) {
        // This would integrate with notification systems
        logger_1.logger.info(`Campaign ${config.name} progress notification:`, {
            phase: result.phase,
            success: result.success,
            improvement: result.metricsImprovement.improvementPercentage,
        });
    }
    saveCampaignReport(report) {
        try {
            const reportFile = `.kiro/campaigns/report-${report.campaignId}-${Date.now()}.json`;
            (0, fs_1.writeFileSync)(reportFile, JSON.stringify(report, null, 2));
        }
        catch (error) {
            logger_1.logger.error('Error saving campaign report:', error);
        }
    }
}
exports.LintingCampaignIntegration = LintingCampaignIntegration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9saW50aW5nL0xpbnRpbmdDYW1wYWlnbkludGVncmF0aW9uLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBeUM7QUFDekMsMkJBQTZEO0FBRTdELDJDQUF3QztBQUV4QyxxRUFJa0M7QUEwRGxDOztHQUVHO0FBQ0gsTUFBYSwwQkFBMEI7SUFDN0IsZUFBZSxDQUF5QjtJQUN4QyxrQkFBa0IsR0FBRyx3Q0FBd0MsQ0FBQztJQUM5RCxnQkFBZ0IsR0FBRyw4Q0FBOEMsQ0FBQztJQUUxRTtRQUNFLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSwrQ0FBc0IsRUFBRSxDQUFDO1FBQ3BELElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBNkI7UUFDL0MsSUFBSTtZQUNGLGVBQU0sQ0FBQyxJQUFJLENBQUMsOEJBQThCLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBRXpELDJCQUEyQjtZQUMzQixNQUFNLGNBQWMsR0FBRyxNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztZQUUzRSw4QkFBOEI7WUFDOUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2hDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBRTFELDBCQUEwQjtZQUMxQixLQUFLLE1BQU0sS0FBSyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7Z0JBQ2pDLE1BQU0sSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDeEM7WUFFRCx3QkFBd0I7WUFDeEIsTUFBTSxXQUFXLEdBQUcsTUFBTSxJQUFJLENBQUMsc0JBQXNCLENBQUMs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RDtJQUNILENBQUM7Q0FDRjtBQXJkRCxnRUFxZEMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9saW50aW5nL0xpbnRpbmdDYW1wYWlnbkludGVncmF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGludGluZyBDYW1wYWlnbiBJbnRlZ3JhdGlvbiBTZXJ2aWNlXG4gKlxuICogSW50ZWdyYXRlcyBsaW50aW5nIHByb2dyZXNzIHRyYWNraW5nIHdpdGggdGhlIGV4aXN0aW5nIGNhbXBhaWduIHN5c3RlbVxuICogZm9yIGNvbXByZWhlbnNpdmUgcXVhbGl0eSBpbXByb3ZlbWVudCBjYW1wYWlnbnMuXG4gKi9cblxuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IHdyaXRlRmlsZVN5bmMsIHJlYWRGaWxlU3luYywgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuXG5pbXBvcnQge1xuICBMaW50aW5nUHJvZ3Jlc3NUcmFja2VyLFxuICBMaW50aW5nUHJvZ3Jlc3NSZXBvcnQsXG4gIENhbXBhaWduSW50ZWdyYXRpb25EYXRhLFxufSBmcm9tICcuL0xpbnRpbmdQcm9ncmVzc1RyYWNrZXInO1xuXG4vKipcbiAqIExpbnRpbmcgY2FtcGFpZ24gY29uZmlndXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpbnRpbmdDYW1wYWlnbkNvbmZpZyB7XG4gIGNhbXBhaWduSWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwaGFzZXM6IExpbnRpbmdDYW1wYWlnblBoYXNlW107XG4gIHRhcmdldHM6IHtcbiAgICBtYXhFcnJvcnM6IG51bWJlcjtcbiAgICBtYXhXYXJuaW5nczogbnVtYmVyO1xuICAgIHRhcmdldFJlZHVjdGlvbjogbnVtYmVyO1xuICB9O1xuICBzYWZldHlQcm90b2NvbHM6IHN0cmluZ1tdO1xuICBub3RpZmljYXRpb25zOiB7XG4gICAgb25Qcm9ncmVzczogYm9vbGVhbjtcbiAgICBvbkNvbXBsZXRpb246IGJvb2xlYW47XG4gICAgb25SZWdyZXNzaW9uOiBib29sZWFuO1xuICB9O1xufVxuXG4vKipcbiAqIExpbnRpbmcgY2FtcGFpZ24gcGhhc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaW50aW5nQ2FtcGFpZ25QaGFzZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdG9vbHM6IHN0cmluZ1tdO1xuICBzdWNjZXNzQ3JpdGVyaWE6IHtcbiAgICBlcnJvclJlZHVjdGlvbjogbnVtYmVyO1xuICAgIHdhcm5pbmdSZWR1Y3Rpb246IG51bWJlcjtcbiAgICBwZXJmb3JtYW5jZVRocmVzaG9sZDogbnVtYmVyO1xuICB9O1xuICBlc3RpbWF0ZWREdXJhdGlvbjogbnVtYmVyOyAvLyBtaW51dGVzXG59XG5cbi8qKlxuICogQ2FtcGFpZ24gZXhlY3V0aW9uIHJlc3VsdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduRXhlY3V0aW9uUmVzdWx0IHtcbiAgY2FtcGFpZ25JZDogc3RyaW5nO1xuICBwaGFzZTogc3RyaW5nO1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBtZXRyaWNzSW1wcm92ZW1lbnQ6IHtcbiAgICBlcnJvcnNCZWZvcmU6IG51bWJlcjtcbiAgICBlcnJvcnNBZnRlcjogbnVtYmVyO1xuICAgIHdhcm5pbmdzQmVmb3JlOiBudW1iZXI7XG4gICAgd2FybmluZ3NBZnRlcjogbnVtYmVyO1xuICAgIGltcHJvdmVtZW50UGVyY2VudGFnZTogbnVtYmVyO1xuICB9O1xuICBleGVjdXRpb25UaW1lOiBudW1iZXI7XG4gIGlzc3Vlczogc3RyaW5nW107XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG59XG5cbi8qKlxuICogTGludGluZyBDYW1wYWlnbiBJbnRlZ3JhdGlvbiBTZXJ2aWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW50aW5nQ2FtcGFpZ25JbnRlZ3JhdGlvbiB7XG4gIHByaXZhdGUgcHJvZ3Jlc3NUcmFja2VyOiBMaW50aW5nUHJvZ3Jlc3NUcmFja2VyO1xuICBwcml2YXRlIGNhbXBhaWduQ29uZmlnRmlsZSA9ICcua2lyby9jYW1wYWlnbnMvbGludGluZy1jYW1wYWlnbnMuanNvbic7XG4gIHByaXZhdGUgYWN0aXZlQ29uZmlnRmlsZSA9ICcua2lyby9jYW1wYWlnbnMvYWN0aXZlLWxpbnRpbmctY2FtcGFpZ24uanNvbic7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcm9ncmVzc1RyYWNrZXIgPSBuZXcgTGludGluZ1Byb2dyZXNzVHJhY2tlcigpO1xuICAgIHRoaXMuZW5zdXJlRGlyZWN0b3J5RXhpc3RzKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSBsaW50aW5nIGltcHJvdmVtZW50IGNhbXBhaWduXG4gICAqL1xuICBhc3luYyBzdGFydENhbXBhaWduKGNvbmZpZzogTGludGluZ0NhbXBhaWduQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBTdGFydGluZyBsaW50aW5nIGNhbXBhaWduOiAke2NvbmZpZy5uYW1lfWApO1xuXG4gICAgICAvLyBDb2xsZWN0IGJhc2VsaW5lIG1ldHJpY3NcbiAgICAgIGNvbnN0IGJhc2VsaW5lUmVwb3J0ID0gYXdhaXQgdGhpcy5wcm9ncmVzc1RyYWNrZXIuZ2VuZXJhdGVQcm9ncmVzc1JlcG9ydCgpO1xuXG4gICAgICAvLyBTYXZlIGNhbXBhaWduIGNvbmZpZ3VyYXRpb25cbiAgICAgIHRoaXMuc2F2ZUNhbXBhaWduQ29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLnNldEFjdGl2ZUNhbXBhaWduKGNvbmZpZy5jYW1wYWlnbklkLCBiYXNlbGluZVJlcG9ydCk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgY2FtcGFpZ24gcGhhc2VzXG4gICAgICBmb3IgKGNvbnN0IHBoYXNlIG9mIGNvbmZpZy5waGFzZXMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5leGVjdXRlUGhhc2UoY29uZmlnLCBwaGFzZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdlbmVyYXRlIGZpbmFsIHJlcG9ydFxuICAgICAgY29uc3QgZmluYWxSZXBvcnQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ2FtcGFpZ25SZXBvcnQoY29uZmlnLmNhbXBhaWduSWQpO1xuICAgICAgbG9nZ2VyLmluZm8oJ0xpbnRpbmcgY2FtcGFpZ24gY29tcGxldGVkOicsIGZpbmFsUmVwb3J0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleGVjdXRpbmcgbGludGluZyBjYW1wYWlnbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHNwZWNpZmljIGNhbXBhaWduIHBoYXNlXG4gICAqL1xuICBhc3luYyBleGVjdXRlUGhhc2UoXG4gICAgY29uZmlnOiBMaW50aW5nQ2FtcGFpZ25Db25maWcsXG4gICAgcGhhc2U6IExpbnRpbmdDYW1wYWlnblBoYXNlLFxuICApOiBQcm9taXNlPENhbXBhaWduRXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbyhgRXhlY3V0aW5nIGNhbXBhaWduIHBoYXNlOiAke3BoYXNlLm5hbWV9YCk7XG5cbiAgICAgIC8vIENvbGxlY3QgcHJlLXBoYXNlIG1ldHJpY3NcbiAgICAgIGNvbnN0IHByZVBoYXNlUmVwb3J0ID0gYXdhaXQgdGhpcy5wcm9ncmVzc1RyYWNrZXIuZ2VuZXJhdGVQcm9ncmVzc1JlcG9ydCgpO1xuXG4gICAgICAvLyBFeGVjdXRlIHBoYXNlIHRvb2xzXG4gICAgICBjb25zdCB0b29sUmVzdWx0cyA9IGF3YWl0IHRoaXMuZXhlY3V0ZVBoYXNlVG9vbHMocGhhc2UudG9vbHMpO1xuXG4gICAgICAvLyBDb2xsZWN0IHBvc3QtcGhhc2UgbWV0cmljc1xuICAgICAgY29uc3QgcG9zdFBoYXNlUmVwb3J0ID0gYXdhaXQgdGhpcy5wcm9ncmVzc1RyYWNrZXIuZ2VuZXJhdGVQcm9ncmVzc1JlcG9ydCgpO1xuXG4gICAgICAvLyBFdmFsdWF0ZSBzdWNjZXNzIGNyaXRlcmlhXG4gICAgICBjb25zdCBzdWNjZXNzID0gdGhpcy5ldmFsdWF0ZVBoYXNlU3VjY2VzcyhwaGFzZSwgcHJlUGhhc2VSZXBvcnQsIHBvc3RQaGFzZVJlcG9ydCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdDogQ2FtcGFpZ25FeGVjdXRpb25SZXN1bHQgPSB7XG4gICAgICAgIGNhbXBhaWduSWQ6IGNvbmZpZy5jYW1wYWlnbklkLFxuICAgICAgICBwaGFzZTogcGhhc2UuaWQsXG4gICAgICAgIHN1Y2Nlc3MsXG4gICAgICAgIG1ldHJpY3NJbXByb3ZlbWVudDoge1xuICAgICAgICAgIGVycm9yc0JlZm9yZTogcHJlUGhhc2VSZXBvcnQuY3VycmVudE1ldHJpY3MuZXJyb3JzLFxuICAgICAgICAgIGVycm9yc0FmdGVyOiBwb3N0UGhhc2VSZXBvcnQuY3VycmVudE1ldHJpY3MuZXJyb3JzLFxuICAgICAgICAgIHdhcm5pbmdzQmVmb3JlOiBwcmVQaGFzZVJlcG9ydC5jdXJyZW50TWV0cmljcy53YXJuaW5ncyxcbiAgICAgICAgICB3YXJuaW5nc0FmdGVyOiBwb3N0UGhhc2VSZXBvcnQuY3VycmVudE1ldHJpY3Mud2FybmluZ3MsXG4gICAgICAgICAgaW1wcm92ZW1lbnRQZXJjZW50YWdlOiBwb3N0UGhhc2VSZXBvcnQuaW1wcm92ZW1lbnQucGVyY2VudGFnZUltcHJvdmVtZW50LFxuICAgICAgICB9LFxuICAgICAgICBleGVjdXRpb25UaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBpc3N1ZXM6IHRvb2xSZXN1bHRzLmlzc3VlcyxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiB0b29sUmVzdWx0cy5yZWNvbW1lbmRhdGlvbnMsXG4gICAgICB9O1xuXG4gICAgICAvLyBVcGRhdGUgY2FtcGFpZ24gcHJvZ3Jlc3NcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ2FtcGFpZ25Qcm9ncmVzcyhjb25maWcuY2FtcGFpZ25JZCwgcGhhc2UuaWQsIHJlc3VsdCk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBub3RpZmljYXRpb25zXG4gICAgICBpZiAoY29uZmlnLm5vdGlmaWNhdGlvbnMub25Qcm9ncmVzcykge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRQcm9ncmVzc05vdGlmaWNhdGlvbihjb25maWcsIHJlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBQaGFzZSAke3BoYXNlLm5hbWV9IGNvbXBsZXRlZDpgLCB7XG4gICAgICAgIHN1Y2Nlc3MsXG4gICAgICAgIGltcHJvdmVtZW50OiByZXN1bHQubWV0cmljc0ltcHJvdmVtZW50LmltcHJvdmVtZW50UGVyY2VudGFnZSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGV4ZWN1dGluZyBwaGFzZSAke3BoYXNlLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIHBoYXNlIHRvb2xzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVQaGFzZVRvb2xzKFxuICAgIHRvb2xzOiBzdHJpbmdbXSxcbiAgKTogUHJvbWlzZTx7IGlzc3Vlczogc3RyaW5nW107IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gfT4ge1xuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVRvb2wodG9vbCk7XG4gICAgICAgIGlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5pc3N1ZXMpO1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5yZXN1bHQucmVjb21tZW5kYXRpb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKFxuICAgICAgICAgIGBUb29sICR7dG9vbH0gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNzdWVzLCByZWNvbW1lbmRhdGlvbnMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgc3BlY2lmaWMgdG9vbFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlVG9vbChcbiAgICB0b29sOiBzdHJpbmcsXG4gICk6IFByb21pc2U8eyBpc3N1ZXM6IHN0cmluZ1tdOyByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdIH0+IHtcbiAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIHN3aXRjaCAodG9vbCkge1xuICAgICAgICBjYXNlICdlc2xpbnQtZml4JzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVFU0xpbnRGaXgoKTtcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnQXBwbGllZCBFU0xpbnQgYXV0by1maXhlcycpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3VudXNlZC1pbXBvcnRzJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVVbnVzZWRJbXBvcnRSZW1vdmFsKCk7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1JlbW92ZWQgdW51c2VkIGltcG9ydHMnKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdpbXBvcnQtb3JnYW5pemF0aW9uJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVJbXBvcnRPcmdhbml6YXRpb24oKTtcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnT3JnYW5pemVkIGltcG9ydCBzdGF0ZW1lbnRzJyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZXhwbGljaXQtYW55LWVsaW1pbmF0aW9uJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVFeHBsaWNpdEFueUVsaW1pbmF0aW9uKCk7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ1JlZHVjZWQgZXhwbGljaXQgYW55IHVzYWdlJyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnY29uc29sZS1jbGVhbnVwJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVDb25zb2xlQ2xlYW51cCgpO1xuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDbGVhbmVkIHVwIGNvbnNvbGUgc3RhdGVtZW50cycpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaXNzdWVzLnB1c2goYFVua25vd24gdG9vbDogJHt0b29sfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpc3N1ZXMucHVzaChcbiAgICAgICAgYFRvb2wgJHt0b29sfSBleGVjdXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7IGlzc3VlcywgcmVjb21tZW5kYXRpb25zIH07XG4gIH1cblxuICAvKipcbiAgICogVG9vbCBleGVjdXRpb24gbWV0aG9kc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlRVNMaW50Rml4KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBleGVjU3luYygneWFybiBsaW50OmZpeCcsIHsgc3RkaW86ICdwaXBlJyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gRVNMaW50IGZpeCBtYXkgcmV0dXJuIG5vbi16ZXJvIGV4aXQgY29kZSBidXQgc3RpbGwgYXBwbHkgZml4ZXNcbiAgICAgIGxvZ2dlci5kZWJ1ZygnRVNMaW50IGZpeCBjb21wbGV0ZWQgd2l0aCB3YXJuaW5ncycpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVVudXNlZEltcG9ydFJlbW92YWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgU2FmZVVudXNlZEltcG9ydFJlbW92ZXJcbiAgICAgIGNvbnN0IHsgU2FmZVVudXNlZEltcG9ydFJlbW92ZXIgfSA9IGF3YWl0IGltcG9ydCgnLi9TYWZlVW51c2VkSW1wb3J0UmVtb3ZlcicpO1xuICAgICAgY29uc3QgcmVtb3ZlciA9IG5ldyBTYWZlVW51c2VkSW1wb3J0UmVtb3ZlcigpO1xuICAgICAgYXdhaXQgcmVtb3Zlci5wcm9jZXNzVW51c2VkSW1wb3J0cygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignVW51c2VkIGltcG9ydCByZW1vdmFsIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlSW1wb3J0T3JnYW5pemF0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBleGVjU3luYygneWFybiBsaW50IC0tZml4LXR5cGUgbGF5b3V0JywgeyBzdGRpbzogJ3BpcGUnIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0ltcG9ydCBvcmdhbml6YXRpb24gY29tcGxldGVkIHdpdGggd2FybmluZ3MnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVFeHBsaWNpdEFueUVsaW1pbmF0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUaGlzIHdvdWxkIGludGVncmF0ZSB3aXRoIGV4aXN0aW5nIGV4cGxpY2l0IGFueSBlbGltaW5hdGlvbiB0b29sc1xuICAgICAgbG9nZ2VyLmluZm8oJ0V4cGxpY2l0IGFueSBlbGltaW5hdGlvbiB3b3VsZCBiZSBleGVjdXRlZCBoZXJlJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdFeHBsaWNpdCBhbnkgZWxpbWluYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVDb25zb2xlQ2xlYW51cCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGhpcyB3b3VsZCBpbnRlZ3JhdGUgd2l0aCBleGlzdGluZyBjb25zb2xlIGNsZWFudXAgdG9vbHNcbiAgICAgIGxvZ2dlci5pbmZvKCdDb25zb2xlIGNsZWFudXAgd291bGQgYmUgZXhlY3V0ZWQgaGVyZScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignQ29uc29sZSBjbGVhbnVwIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIHBoYXNlIHN1Y2Nlc3MgY3JpdGVyaWFcbiAgICovXG4gIHByaXZhdGUgZXZhbHVhdGVQaGFzZVN1Y2Nlc3MoXG4gICAgcGhhc2U6IExpbnRpbmdDYW1wYWlnblBoYXNlLFxuICAgIHByZVJlcG9ydDogTGludGluZ1Byb2dyZXNzUmVwb3J0LFxuICAgIHBvc3RSZXBvcnQ6IExpbnRpbmdQcm9ncmVzc1JlcG9ydCxcbiAgKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZXJyb3JSZWR1Y3Rpb24gPSBwcmVSZXBvcnQuY3VycmVudE1ldHJpY3MuZXJyb3JzIC0gcG9zdFJlcG9ydC5jdXJyZW50TWV0cmljcy5lcnJvcnM7XG4gICAgY29uc3Qgd2FybmluZ1JlZHVjdGlvbiA9IHByZVJlcG9ydC5jdXJyZW50TWV0cmljcy53YXJuaW5ncyAtIHBvc3RSZXBvcnQuY3VycmVudE1ldHJpY3Mud2FybmluZ3M7XG4gICAgY29uc3QgcGVyZm9ybWFuY2VBY2NlcHRhYmxlID1cbiAgICAgIHBvc3RSZXBvcnQuY3VycmVudE1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmV4ZWN1dGlvblRpbWUgPD1cbiAgICAgIHBoYXNlLnN1Y2Nlc3NDcml0ZXJpYS5wZXJmb3JtYW5jZVRocmVzaG9sZDtcblxuICAgIHJldHVybiAoXG4gICAgICBlcnJvclJlZHVjdGlvbiA+PSBwaGFzZS5zdWNjZXNzQ3JpdGVyaWEuZXJyb3JSZWR1Y3Rpb24gJiZcbiAgICAgIHdhcm5pbmdSZWR1Y3Rpb24gPj0gcGhhc2Uuc3VjY2Vzc0NyaXRlcmlhLndhcm5pbmdSZWR1Y3Rpb24gJiZcbiAgICAgIHBlcmZvcm1hbmNlQWNjZXB0YWJsZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBjYW1wYWlnbiByZXBvcnRcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlQ2FtcGFpZ25SZXBvcnQoY2FtcGFpZ25JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDYW1wYWlnbkNvbmZpZyhjYW1wYWlnbklkKTtcbiAgICAgIGNvbnN0IGFjdGl2ZUNhbXBhaWduID0gdGhpcy5nZXRBY3RpdmVDYW1wYWlnbigpO1xuICAgICAgY29uc3QgY3VycmVudFJlcG9ydCA9IGF3YWl0IHRoaXMucHJvZ3Jlc3NUcmFja2VyLmdlbmVyYXRlUHJvZ3Jlc3NSZXBvcnQoKTtcblxuICAgICAgaWYgKCFjb25maWcgfHwgIWFjdGl2ZUNhbXBhaWduKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FtcGFpZ24gZGF0YSBub3QgZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVwb3J0ID0ge1xuICAgICAgICBjYW1wYWlnbklkLFxuICAgICAgICBuYW1lOiBjb25maWcubmFtZSxcbiAgICAgICAgc3RhcnRUaW1lOiBhY3RpdmVDYW1wYWlnbi5zdGFydFRpbWUsXG4gICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgIGJhc2VsaW5lTWV0cmljczogYWN0aXZlQ2FtcGFpZ24uYmFzZWxpbmVNZXRyaWNzLFxuICAgICAgICBmaW5hbE1ldHJpY3M6IGN1cnJlbnRSZXBvcnQuY3VycmVudE1ldHJpY3MsXG4gICAgICAgIHRvdGFsSW1wcm92ZW1lbnQ6IHtcbiAgICAgICAgICBlcnJvclJlZHVjdGlvbjpcbiAgICAgICAgICAgIGFjdGl2ZUNhbXBhaWduLmJhc2VsaW5lTWV0cmljcy5lcnJvcnMgLSBjdXJyZW50UmVwb3J0LmN1cnJlbnRNZXRyaWNzLmVycm9ycyxcbiAgICAgICAgICB3YXJuaW5nUmVkdWN0aW9uOlxuICAgICAgICAgICAgYWN0aXZlQ2FtcGFpZ24uYmFzZWxpbmVNZXRyaWNzLndhcm5pbmdzIC0gY3VycmVudFJlcG9ydC5jdXJyZW50TWV0cmljcy53YXJuaW5ncyxcbiAgICAgICAgICBwZXJjZW50YWdlSW1wcm92ZW1lbnQ6IGN1cnJlbnRSZXBvcnQuaW1wcm92ZW1lbnQucGVyY2VudGFnZUltcHJvdmVtZW50LFxuICAgICAgICB9LFxuICAgICAgICBwaGFzZXNFeGVjdXRlZDogYWN0aXZlQ2FtcGFpZ24ucGhhc2VzRXhlY3V0ZWQgfHwgW10sXG4gICAgICAgIHF1YWxpdHlHYXRlc1N0YXR1czogY3VycmVudFJlcG9ydC5xdWFsaXR5R2F0ZXMsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczpcbiAgICAgICAgICBjdXJyZW50UmVwb3J0LmltcHJvdmVtZW50LnBlcmNlbnRhZ2VJbXByb3ZlbWVudCA+IDBcbiAgICAgICAgICAgID8gWydDb250aW51ZSBtb25pdG9yaW5nIGZvciByZWdyZXNzaW9ucycsICdDb25zaWRlciBhZGRpdGlvbmFsIG9wdGltaXphdGlvbiBwaGFzZXMnXVxuICAgICAgICAgICAgOiBbJ0ludmVzdGlnYXRlIHdoeSBpbXByb3ZlbWVudHMgd2VyZSBub3QgYWNoaWV2ZWQnLCAnUmV2aWV3IHRvb2wgY29uZmlndXJhdGlvbnMnXSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNhdmUgZmluYWwgcmVwb3J0XG4gICAgICB0aGlzLnNhdmVDYW1wYWlnblJlcG9ydChyZXBvcnQpO1xuXG4gICAgICByZXR1cm4gcmVwb3J0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgY2FtcGFpZ24gcmVwb3J0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgcHJlZGVmaW5lZCBjYW1wYWlnbiBjb25maWd1cmF0aW9uc1xuICAgKi9cbiAgY3JlYXRlU3RhbmRhcmRDYW1wYWlnbnMoKTogTGludGluZ0NhbXBhaWduQ29uZmlnW10ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGNhbXBhaWduSWQ6ICdsaW50aW5nLWV4Y2VsbGVuY2Utc3RhbmRhcmQnLFxuICAgICAgICBuYW1lOiAnU3RhbmRhcmQgTGludGluZyBFeGNlbGxlbmNlIENhbXBhaWduJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb21wcmVoZW5zaXZlIGxpbnRpbmcgaW1wcm92ZW1lbnQgY2FtcGFpZ24gdGFyZ2V0aW5nIHplcm8gZXJyb3JzJyxcbiAgICAgICAgcGhhc2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdwaGFzZS0xLWF1dG8tZml4ZXMnLFxuICAgICAgICAgICAgbmFtZTogJ0F1dG9tYXRlZCBGaXhlcycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FwcGx5IGFsbCBhdmFpbGFibGUgRVNMaW50IGF1dG8tZml4ZXMnLFxuICAgICAgICAgICAgdG9vbHM6IFsnZXNsaW50LWZpeCddLFxuICAgICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7XG4gICAgICAgICAgICAgIGVycm9yUmVkdWN0aW9uOiA1MCxcbiAgICAgICAgICAgICAgd2FybmluZ1JlZHVjdGlvbjogMTAwLFxuICAgICAgICAgICAgICBwZXJmb3JtYW5jZVRocmVzaG9sZDogNjAwMDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXN0aW1hdGVkRHVyYXRpb246IDE1LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdwaGFzZS0yLWltcG9ydHMnLFxuICAgICAgICAgICAgbmFtZTogJ0ltcG9ydCBPcmdhbml6YXRpb24nLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDbGVhbiB1cCBhbmQgb3JnYW5pemUgaW1wb3J0IHN0YXRlbWVudHMnLFxuICAgICAgICAgICAgdG9vbHM6IFsndW51c2VkLWltcG9ydHMnLCAnaW1wb3J0LW9yZ2FuaXphdGlvbiddLFxuICAgICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7XG4gICAgICAgICAgICAgIGVycm9yUmVkdWN0aW9uOiAyMCxcbiAgICAgICAgICAgICAgd2FybmluZ1JlZHVjdGlvbjogMjAwLFxuICAgICAgICAgICAgICBwZXJmb3JtYW5jZVRocmVzaG9sZDogNjAwMDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXN0aW1hdGVkRHVyYXRpb246IDMwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdwaGFzZS0zLXR5cGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdUeXBlIFNhZmV0eSBJbXByb3ZlbWVudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0VsaW1pbmF0ZSBleHBsaWNpdCBhbnkgYW5kIGltcHJvdmUgdHlwZSBzYWZldHknLFxuICAgICAgICAgICAgdG9vbHM6IFsnZXhwbGljaXQtYW55LWVsaW1pbmF0aW9uJ10sXG4gICAgICAgICAgICBzdWNjZXNzQ3JpdGVyaWE6IHtcbiAgICAgICAgICAgICAgZXJyb3JSZWR1Y3Rpb246IDEwLFxuICAgICAgICAgICAgICB3YXJuaW5nUmVkdWN0aW9uOiA1MCxcbiAgICAgICAgICAgICAgcGVyZm9ybWFuY2VUaHJlc2hvbGQ6IDYwMDAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVzdGltYXRlZER1cmF0aW9uOiA0NSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAncGhhc2UtNC1jbGVhbnVwJyxcbiAgICAgICAgICAgIG5hbWU6ICdDb2RlIENsZWFudXAnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDbGVhbiB1cCBjb25zb2xlIHN0YXRlbWVudHMgYW5kIG90aGVyIGNvZGUgcXVhbGl0eSBpc3N1ZXMnLFxuICAgICAgICAgICAgdG9vbHM6IFsnY29uc29sZS1jbGVhbnVwJ10sXG4gICAgICAgICAgICBzdWNjZXNzQ3JpdGVyaWE6IHtcbiAgICAgICAgICAgICAgZXJyb3JSZWR1Y3Rpb246IDUsXG4gICAgICAgICAgICAgIHdhcm5pbmdSZWR1Y3Rpb246IDMwLFxuICAgICAgICAgICAgICBwZXJmb3JtYW5jZVRocmVzaG9sZDogNjAwMDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXN0aW1hdGVkRHVyYXRpb246IDIwLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRhcmdldHM6IHtcbiAgICAgICAgICBtYXhFcnJvcnM6IDAsXG4gICAgICAgICAgbWF4V2FybmluZ3M6IDEwMCxcbiAgICAgICAgICB0YXJnZXRSZWR1Y3Rpb246IDgwLFxuICAgICAgICB9LFxuICAgICAgICBzYWZldHlQcm90b2NvbHM6IFsnYmFja3VwLWJlZm9yZS1jaGFuZ2VzJywgJ3ZhbGlkYXRlLWJ1aWxkJywgJ3JvbGxiYWNrLW9uLWZhaWx1cmUnXSxcbiAgICAgICAgbm90aWZpY2F0aW9uczoge1xuICAgICAgICAgIG9uUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgICAgb25Db21wbGV0aW9uOiB0cnVlLFxuICAgICAgICAgIG9uUmVncmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVdGlsaXR5IG1ldGhvZHNcbiAgICovXG4gIHByaXZhdGUgZW5zdXJlRGlyZWN0b3J5RXhpc3RzKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBleGVjU3luYygnbWtkaXIgLXAgLmtpcm8vY2FtcGFpZ25zJywgeyBzdGRpbzogJ3BpcGUnIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBEaXJlY3RvcnkgbWlnaHQgYWxyZWFkeSBleGlzdFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2F2ZUNhbXBhaWduQ29uZmlnKGNvbmZpZzogTGludGluZ0NhbXBhaWduQ29uZmlnKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbmZpZ3MgPSB0aGlzLmdldEFsbENhbXBhaWduQ29uZmlncygpO1xuICAgICAgY29uZmlnc1tjb25maWcuY2FtcGFpZ25JZF0gPSBjb25maWc7XG4gICAgICB3cml0ZUZpbGVTeW5jKHRoaXMuY2FtcGFpZ25Db25maWdGaWxlLCBKU09OLnN0cmluZ2lmeShjb25maWdzLCBudWxsLCAyKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2F2aW5nIGNhbXBhaWduIGNvbmZpZzonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRDYW1wYWlnbkNvbmZpZyhjYW1wYWlnbklkOiBzdHJpbmcpOiBMaW50aW5nQ2FtcGFpZ25Db25maWcgfCB1bmRlZmluZWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25maWdzID0gdGhpcy5nZXRBbGxDYW1wYWlnbkNvbmZpZ3MoKTtcbiAgICAgIHJldHVybiBjb25maWdzW2NhbXBhaWduSWRdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgY2FtcGFpZ24gY29uZmlnOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRBbGxDYW1wYWlnbkNvbmZpZ3MoKTogUmVjb3JkPHN0cmluZywgTGludGluZ0NhbXBhaWduQ29uZmlnPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChleGlzdHNTeW5jKHRoaXMuY2FtcGFpZ25Db25maWdGaWxlKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVhZEZpbGVTeW5jKHRoaXMuY2FtcGFpZ25Db25maWdGaWxlLCAndXRmOCcpO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIHJlYWRpbmcgY2FtcGFpZ24gY29uZmlnczonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0QWN0aXZlQ2FtcGFpZ24oY2FtcGFpZ25JZDogc3RyaW5nLCBiYXNlbGluZVJlcG9ydDogTGludGluZ1Byb2dyZXNzUmVwb3J0KTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNhbXBhaWduID0ge1xuICAgICAgICBjYW1wYWlnbklkLFxuICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgIGJhc2VsaW5lTWV0cmljczogYmFzZWxpbmVSZXBvcnQuY3VycmVudE1ldHJpY3MsXG4gICAgICAgIHBoYXNlc0V4ZWN1dGVkOiBbXSxcbiAgICAgIH07XG4gICAgICB3cml0ZUZpbGVTeW5jKHRoaXMuYWN0aXZlQ29uZmlnRmlsZSwgSlNPTi5zdHJpbmdpZnkoYWN0aXZlQ2FtcGFpZ24sIG51bGwsIDIpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzZXR0aW5nIGFjdGl2ZSBjYW1wYWlnbjonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRBY3RpdmVDYW1wYWlnbigpOiB1bmtub3duIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGV4aXN0c1N5bmModGhpcy5hY3RpdmVDb25maWdGaWxlKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVhZEZpbGVTeW5jKHRoaXMuYWN0aXZlQ29uZmlnRmlsZSwgJ3V0ZjgnKTtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdFcnJvciByZWFkaW5nIGFjdGl2ZSBjYW1wYWlnbjonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVDYW1wYWlnblByb2dyZXNzKFxuICAgIGNhbXBhaWduSWQ6IHN0cmluZyxcbiAgICBwaGFzZUlkOiBzdHJpbmcsXG4gICAgcmVzdWx0OiBDYW1wYWlnbkV4ZWN1dGlvblJlc3VsdCxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNhbXBhaWduID0gdGhpcy5nZXRBY3RpdmVDYW1wYWlnbigpO1xuICAgICAgaWYgKGFjdGl2ZUNhbXBhaWduICYmIGFjdGl2ZUNhbXBhaWduLmNhbXBhaWduSWQgPT09IGNhbXBhaWduSWQpIHtcbiAgICAgICAgYWN0aXZlQ2FtcGFpZ24ucGhhc2VzRXhlY3V0ZWQgPSBhY3RpdmVDYW1wYWlnbi5waGFzZXNFeGVjdXRlZCB8fCBbXTtcbiAgICAgICAgYWN0aXZlQ2FtcGFpZ24ucGhhc2VzRXhlY3V0ZWQucHVzaCh7XG4gICAgICAgICAgcGhhc2VJZCxcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgd3JpdGVGaWxlU3luYyh0aGlzLmFjdGl2ZUNvbmZpZ0ZpbGUsIEpTT04uc3RyaW5naWZ5KGFjdGl2ZUNhbXBhaWduLCBudWxsLCAyKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgY2FtcGFpZ24gcHJvZ3Jlc3M6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZFByb2dyZXNzTm90aWZpY2F0aW9uKFxuICAgIGNvbmZpZzogTGludGluZ0NhbXBhaWduQ29uZmlnLFxuICAgIHJlc3VsdDogQ2FtcGFpZ25FeGVjdXRpb25SZXN1bHQsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFRoaXMgd291bGQgaW50ZWdyYXRlIHdpdGggbm90aWZpY2F0aW9uIHN5c3RlbXNcbiAgICBsb2dnZXIuaW5mbyhgQ2FtcGFpZ24gJHtjb25maWcubmFtZX0gcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uOmAsIHtcbiAgICAgIHBoYXNlOiByZXN1bHQucGhhc2UsXG4gICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcbiAgICAgIGltcHJvdmVtZW50OiByZXN1bHQubWV0cmljc0ltcHJvdmVtZW50LmltcHJvdmVtZW50UGVyY2VudGFnZSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZUNhbXBhaWduUmVwb3J0KHJlcG9ydDogdW5rbm93bik6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXBvcnRGaWxlID0gYC5raXJvL2NhbXBhaWducy9yZXBvcnQtJHtyZXBvcnQuY2FtcGFpZ25JZH0tJHtEYXRlLm5vdygpfS5qc29uYDtcbiAgICAgIHdyaXRlRmlsZVN5bmMocmVwb3J0RmlsZSwgSlNPTi5zdHJpbmdpZnkocmVwb3J0LCBudWxsLCAyKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2F2aW5nIGNhbXBhaWduIHJlcG9ydDonLCBlcnJvcik7XG4gICAgfVxuICB9XG59XG4iXSwidmVyc2lvbiI6M30=