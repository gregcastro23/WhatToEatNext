8f9c06fa4dab34787976431f05e2d33e
"use strict";
/**
 * Domain-Specific Rule Behavior Tests
 *
 * Tests the behavior of domain-specific linting rules for astrological calculations
 * by directly testing the rule logic and integration patterns.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const elementalValidation_1 = require("@/utils/astrology/elementalValidation");
const astrologicalValidation_1 = require("@/utils/astrology/astrologicalValidation");
const transitValidation_1 = require("@/utils/astrology/transitValidation");
describe('Domain-Specific Rule Behavior', () => {
    describe('Planetary Constants Preservation', () => {
        test('should identify protected planetary constants', () => {
            const PROTECTED_CONSTANTS = [
                'DEGREES_PER_SIGN',
                'SIGNS_PER_CIRCLE',
                'MAX_LONGITUDE',
                'RELIABLE_POSITIONS',
                'MARCH2025_POSITIONS',
                'FALLBACK_POSITIONS',
                'TRANSIT_DATES',
                'RETROGRADE_PHASES',
                'ELEMENTAL_COMPATIBILITY',
                'SELF_REINFORCEMENT_THRESHOLD',
                'HARMONY_THRESHOLD'
            ];
            // Test that these constants are recognized as protected
            PROTECTED_CONSTANTS.forEach(constant => {
                expect(constant).toMatch(/^[A-Z_]+$/); // Should be uppercase with underscores
                expect(constant.length).toBeGreaterThan(3); // Should be meaningful names
            });
        });
        test('should preserve mathematical constants in calculations', () => {
            const DEGREES_PER_SIGN = 30;
            const SIGNS_PER_CIRCLE = 12;
            const MAX_LONGITUDE = 360;
            // These values should never change
            expect(DEGREES_PER_SIGN).toBe(30);
            expect(SIGNS_PER_CIRCLE).toBe(12);
            expect(MAX_LONGITUDE).toBe(360);
            expect(DEGREES_PER_SIGN * SIGNS_PER_CIRCLE).toBe(MAX_LONGITUDE);
        });
        test('should preserve fallback position structures', () => {
            const RELIABLE_POSITIONS = {
                sun: { sign: 'aries', degree: 8.5, exactLongitude: 8.5, isRetrograde: false },
                moon: { sign: 'aries', degree: 1.57, exactLongitude: 1.57, isRetrograde: false },
                mercury: { sign: 'aries', degree: 0.85, exactLongitude: 0.85, isRetrograde: true }
            };
            // Fallback positions should maintain structure
            Object.values(RELIABLE_POSITIONS).forEach(position => {
                expect(position).toHaveProperty('sign');
                expect(position).toHaveProperty('degree');
                expect(position).toHaveProperty('exactLongitude');
                expect(position).toHaveProperty('isRetrograde');
                expect(typeof position.degree).toBe('number');
                expect(typeof position.isRetrograde).toBe('boolean');
            });
        });
    });
    describe('Planetary Position Structure Validation', () => {
        test('should validate complete planetary position objects', () => {
            const validPosition = {
                sign: 'aries',
                degree: 15.5,
                exactLongitude: 15.5,
                isRetrograde: false
            };
            const positions = { sun: validPosition };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(positions);
            expect(result.isValid).toBe(true);
            expect(result.errors).toHaveLength(0);
        });
        test('should detect missing required properties', () => {
            const incompletePosition = {
                sign: 'aries',
                degree: 15.5
                // Missing exactLongitude and isRetrograde
            };
            const positions = { sun: incompletePosition };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(positions);
            expect(result.isValid).toBe(false);
            expect(result.errors.some(error => error.includes('exactLongitude'))).toBe(true);
            expect(result.errors.some(error => error.includes('isRetrograde'))).toBe(true);
        });
        test('should validate planetary position value ranges', () => {
            const invalidPosition = {
                sign: 'aries',
                degree: 35,
                exactLongitude: 35,
                isRetrograde: false
            };
            const positions = { sun: invalidPosition };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(positions, { strictMode: true });
            expect(result.isValid).toBe(false);
            expect(result.errors.some(error => error.includes('35'))).toBe(true);
        });
        test('should handle retrograde validation correctly', () => {
            const sunRetrograde = {
                sign: 'aries',
                degree: 15,
                exactLongitude: 15,
                isRetrograde: true // Sun cannot be retrograde
            };
            const positions = { sun: sunRetrograde };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(positions);
            expect(result.warnings.some(warning => warning.includes('cannot be retrograde'))).toBe(true);
        });
    });
    describe('Elemental Properties Validation', () => {
        test('should validate four-element system structure', () => {
            const validProperties = {
                Fire: 0.7,
                Water: 0.1,
                Earth: 0.1,
                Air: 0.1
            };
            expect((0, elementalValidation_1.validateElementalProperties)(validProperties)).toBe(true);
        });
        test('should reject missing elements', () => {
            const incompleteProperties = {
                Fire: 0.8,
                Water: 0.2
                // Missing Earth and Air
            };
            expect((0, elementalValidation_1.validateElementalProperties)(incompleteProperties)).toBe(false);
        });
        test('should validate element value ranges', () => {
            const invalidProperties = {
                Fire: 1.5,
                Water: -0.1,
                Earth: 0.3,
                Air: 0.2
            };
            expect((0, elementalValidation_1.validateElementalProperties)(invalidProperties)).toBe(false);
        });
        test('should normalize elemental properties when needed', () => {
            const partialProperties = {
                Fire: 0.8,
                Water: 0.2
            };
            const normalized = (0, elementalValidation_1.normalizeElementalProperties)(partialProperties);
            expect(normalized.Fire).toBe(0.8);
            expect(normalized.Water).toBe(0.2);
            expect(normalized.Earth).toBe(0.25); // Default value
            expect(normalized.Air).toBe(0.25); // Default value
            expect((0, elementalValidation_1.validateElementalProperties)(normalized)).toBe(true);
        });
        test('should preserve self-reinforcement patterns', () => {
            const fireProperties = {
                Fire: 0.8,
                Water: 0.1,
                Earth: 0.05,
                Air: 0.05
            };
            expect((0, elementalValidation_1.validateElementalProperties)(fireProperties)).toBe(true);
            // Fire should remain the dominant element
            const maxElement = Object.entries(fireProperties).reduce((max, current) => current[1] > max[1] ? current : max);
            expect(maxElement[0]).toBe('Fire');
            expect(maxElement[1]).toBeGreaterThanOrEqual(0.7); // Strong self-reinforcement
        });
    });
    describe('Transit Date Validation Patterns', () => {
        test('should validate transit date structures', () => {
            const mockTransitDates = {
                aries: { Start: '2024-03-20', End: '2024-04-19' },
                taurus: { Start: '2024-04-20', End: '2024-05-20' }
            };
            const validDate = new Date('2024-04-01');
            const result = (0, transitValidation_1.validateTransitDate)('mars', validDate, 'aries', mockTransitDates);
            expect(result).toBe(true);
        });
        test('should detect invalid transit dates', () => {
            const mockTransitDates = {
                aries: { Start: '2024-03-20', End: '2024-04-19' }
            };
            const invalidDate = new Date('2024-05-01'); // Outside aries period
            const result = (0, transitValidation_1.validateTransitDate)('mars', invalidDate, 'aries', mockTransitDates);
            expect(result).toBe(false);
        });
        test('should handle missing transit data gracefully', () => {
            const emptyTransitDates = {};
            const testDate = new Date('2024-04-01');
            const result = (0, transitValidation_1.validateTransitDate)('mars', testDate, 'aries', emptyTransitDates);
            expect(result).toBe(false); // Should fail gracefully
        });
    });
    describe('Fallback Value Preservation', () => {
        test('should identify fallback variable patterns', () => {
            const FALLBACK_PATTERNS = [
                /FALLBACK/i,
                /DEFAULT/i,
                /RELIABLE/i,
                /MARCH2025/i,
                /BACKUP/i,
                /CACHED/i
            ];
            const fallbackVariables = [
                'FALLBACK_POSITIONS',
                'DEFAULT_ELEMENTS',
                'RELIABLE_DATA',
                'MARCH2025_POSITIONS',
                'BACKUP_CALCULATIONS',
                'CACHED_RESULTS'
            ];
            fallbackVariables.forEach(variable => {
                const matchesPattern = FALLBACK_PATTERNS.some(pattern => pattern.test(variable));
                expect(matchesPattern).toBe(true);
            });
        });
        test('should preserve fallback data integrity', () => {
            const FALLBACK_POSITIONS = {
                sun: { sign: 'aries', degree: 8.5, exactLongitude: 8.5, isRetrograde: false },
                moon: { sign: 'aries', degree: 1.57, exactLongitude: 1.57, isRetrograde: false }
            };
            // Fallback data should never be null or undefined
            expect(FALLBACK_POSITIONS).not.toBeNull();
            expect(FALLBACK_POSITIONS).not.toBeUndefined();
            expect(Object.keys(FALLBACK_POSITIONS).length).toBeGreaterThan(0);
            // Each fallback position should be valid
            Object.values(FALLBACK_POSITIONS).forEach(position => {
                expect(position).not.toBeNull();
                expect(position).not.toBeUndefined();
                expect(position.sign).toBeDefined();
                expect(typeof position.degree).toBe('number');
            });
        });
        test('should maintain fallback value types', () => {
            const RELIABLE_CONSTANTS = {
                DEGREES_PER_SIGN: 30,
                SELF_REINFORCEMENT_THRESHOLD: 0.3,
                HARMONY_THRESHOLD: 0.7
            };
            // Constants should maintain their types
            expect(typeof RELIABLE_CONSTANTS.DEGREES_PER_SIGN).toBe('number');
            expect(typeof RELIABLE_CONSTANTS.SELF_REINFORCEMENT_THRESHOLD).toBe('number');
            expect(typeof RELIABLE_CONSTANTS.HARMONY_THRESHOLD).toBe('number');
            // Values should be within expected ranges
            expect(RELIABLE_CONSTANTS.DEGREES_PER_SIGN).toBe(30);
            expect(RELIABLE_CONSTANTS.SELF_REINFORCEMENT_THRESHOLD).toBeGreaterThan(0);
            expect(RELIABLE_CONSTANTS.HARMONY_THRESHOLD).toBeGreaterThan(0.5);
        });
    });
    describe('Domain-Specific Variable Patterns', () => {
        test('should recognize astrological variable naming patterns', () => {
            const astrologicalVariables = [
                'planet',
                'position',
                'degree',
                'sign',
                'longitude',
                'retrograde',
                'planetaryPosition',
                'transitDate',
                'elementalProperties'
            ];
            astrologicalVariables.forEach(variable => {
                // Should follow camelCase or contain astrological terms
                expect(variable).toMatch(/^[a-z][a-zA-Z]*$/);
                // Should contain meaningful astrological terms
                const astrologicalTerms = ['planet', 'position', 'degree', 'sign', 'longitude', 'retrograde', 'transit', 'elemental'];
                const containsAstrologicalTerm = astrologicalTerms.some(term => variable.toLowerCase().includes(term.toLowerCase()));
                expect(containsAstrologicalTerm).toBe(true);
            });
        });
        test('should preserve calculation accuracy variables', () => {
            const accuracyVariables = [
                'exactLongitude',
                'precisePosition',
                'calculatedDegree',
                'validatedTransit'
            ];
            accuracyVariables.forEach(variable => {
                // Should indicate precision or validation
                const precisionTerms = ['exact', 'precise', 'calculated', 'validated'];
                const indicatesPrecision = precisionTerms.some(term => variable.toLowerCase().includes(term.toLowerCase()));
                expect(indicatesPrecision).toBe(true);
            });
        });
        test('should handle mathematical calculation variables', () => {
            const mathVariables = [
                'DEGREES_PER_SIGN',
                'SIGNS_PER_CIRCLE',
                'MAX_LONGITUDE',
                'PI',
                'RADIANS_TO_DEGREES'
            ];
            mathVariables.forEach(variable => {
                // Mathematical constants should be uppercase
                if (variable.includes('_')) {
                    expect(variable).toMatch(/^[A-Z_]+$/);
                }
                // Should contain mathematical terms
                const mathTerms = ['DEGREES', 'SIGNS', 'LONGITUDE', 'PI', 'RADIANS'];
                const containsMathTerm = mathTerms.some(term => variable.includes(term));
                expect(containsMathTerm).toBe(true);
            });
        });
    });
    describe('Integration with Existing Linting Rules', () => {
        test('should work with TypeScript strict mode', () => {
            const position = {
                sign: 'aries',
                degree: 15.5,
                exactLongitude: 15.5,
                isRetrograde: false
            };
            // Should validate correctly with TypeScript types
            const positions = { sun: position };
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(positions);
            expect(result.isValid).toBe(true);
        });
        test('should preserve unused variable patterns for astrological context', () => {
            // These variables should be preserved even if "unused"
            const _planetaryCalculation = 'preserved for astrological accuracy';
            const UNUSED_fallbackPosition = { sign: 'aries', degree: 0 };
            const planet_mercury = 'domain-specific naming';
            const degree_calculation = 15.5;
            // These should be recognized as intentionally preserved
            expect(_planetaryCalculation).toBeDefined();
            expect(UNUSED_fallbackPosition).toBeDefined();
            expect(planet_mercury).toBeDefined();
            expect(degree_calculation).toBeDefined();
        });
        test('should allow console statements for astronomical debugging', () => {
            const debugAstronomicalCalculation = (planet, position) => {
                console.info(`Calculating position for ${planet}`); // Should be allowed
                console.debug(`Position data:`, position); // Should be allowed
                console.warn(`Validation warning for ${planet}`); // Should be allowed
                return position;
            };
            expect(debugAstronomicalCalculation).toBeDefined();
            expect(() => debugAstronomicalCalculation('mars', { sign: 'aries' })).not.toThrow();
        });
        test('should handle complex astrological expressions', () => {
            // Complex calculations should be allowed without complexity warnings
            const calculatePlanetaryInfluence = (planetPosition, elementalProperties, transitDates) => {
                const baseInfluence = planetPosition.degree / 30;
                const elementalModifier = elementalProperties.Fire * 0.8 +
                    elementalProperties.Water * 0.6 +
                    elementalProperties.Earth * 0.7 +
                    elementalProperties.Air * 0.9;
                const transitModifier = transitDates ? 1.1 : 0.9;
                return Math.min(1.0, baseInfluence * elementalModifier * transitModifier);
            };
            const result = calculatePlanetaryInfluence({ degree: 15 }, { Fire: 0.8, Water: 0.1, Earth: 0.05, Air: 0.05 }, true);
            expect(result).toBeGreaterThan(0);
            expect(result).toBeLessThanOrEqual(1);
        });
    });
    describe('Performance and Reliability', () => {
        test('should handle large datasets efficiently', () => {
            const largePlanetaryData = {};
            // Create 100 planetary positions
            for (let i = 0; i < 100; i++) {
                largePlanetaryData[`planet${i}`] = {
                    sign: 'aries',
                    degree: i % 30,
                    exactLongitude: i % 360,
                    isRetrograde: i % 2 === 0
                };
            }
            const startTime = Date.now();
            const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(largePlanetaryData);
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
            expect(result).toBeDefined();
        });
        test('should maintain accuracy under edge conditions', () => {
            // Test boundary conditions
            const edgeCases = [
                { degree: 0, exactLongitude: 0 },
                { degree: 29.99, exactLongitude: 359.99 },
                { degree: 15, exactLongitude: 180 }, // Middle values
            ];
            edgeCases.forEach(edgeCase => {
                const position = {
                    sign: 'aries',
                    degree: edgeCase.degree,
                    exactLongitude: edgeCase.exactLongitude,
                    isRetrograde: false
                };
                const positions = { test: position };
                const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(positions);
                expect(result.isValid).toBe(true);
            });
        });
        test('should handle error conditions gracefully', () => {
            // Test with malformed data
            const malformedData = [
                null,
                undefined,
                {},
                { invalidStructure: true },
                { sun: null },
                { sun: { sign: null } }
            ];
            malformedData.forEach(data => {
                expect(() => {
                    const result = (0, astrologicalValidation_1.validatePlanetaryPositions)(data);
                    expect(result).toBeDefined();
                    expect(typeof result.isValid).toBe('boolean');
                }).not.toThrow();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vbGludGluZy9Eb21haW5TcGVjaWZpY1J1bGVCZWhhdmlvci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCwrRUFBa0g7QUFDbEgscUZBQXNGO0FBQ3RGLDJFQUEwRTtBQUUxRSxRQUFRLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO0lBQzdDLFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7UUFDaEQsSUFBSSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUN6RCxNQUFNLG1CQUFtQixHQUFHO2dCQUMxQixrQkFBa0I7Z0JBQ2xCLGtCQUFrQjtnQkFDbEIsZUFBZTtnQkFDZixvQkFBb0I7Z0JBQ3BCLHFCQUFxQjtnQkFDckIsb0JBQW9CO2dCQUNwQixlQUFlO2dCQUNmLG1CQUFtQjtnQkFDbkIseUJBQXlCO2dCQUN6Qiw4QkFBOEI7Z0JBQzlCLG1CQUFtQjthQUNwQixDQUFDO1lBRUYsd0RBQXdEO1lBQ3hELG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLHVDQUF1QztnQkFDOUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyw2QkFBNkI7WUFDM0UsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx3REFBd0QsRUFBRSxHQUFHLEVBQUU7WUFDbEUsTUFBTSxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7WUFDNUIsTUFBTSxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7WUFDNUIsTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDO1lBRTFCLG1DQUFtQztZQUNuQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENB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QyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDckQsMkJBQTJCO1lBQzNCLE1BQU0sYUFBYSxHQUFHO2dCQUNwQixJQUFJO2dCQUNKLFNBQVM7Z0JBQ1QsRUFBRTtnQkFDRixFQUFFLGdCQUFnQixFQUFFLElBQUksRUFBRTtnQkFDMUIsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFO2dCQUNiLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO2FBQ3hCLENBQUM7WUFFRixhQUFhLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUMzQixNQUFNLENBQUMsR0FBRyxFQUFFO29CQUNWLE1BQU0sTUFBTSxHQUFHLElBQUEsbURBQTBCLEVBQUMsSUFBVyxDQUFDLENBQUM7b0JBQ3ZELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztvQkFDN0IsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDaEQsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ25CLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvX190ZXN0c19fL2xpbnRpbmcvRG9tYWluU3BlY2lmaWNSdWxlQmVoYXZpb3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERvbWFpbi1TcGVjaWZpYyBSdWxlIEJlaGF2aW9yIFRlc3RzXG4gKiBcbiAqIFRlc3RzIHRoZSBiZWhhdmlvciBvZiBkb21haW4tc3BlY2lmaWMgbGludGluZyBydWxlcyBmb3IgYXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9uc1xuICogYnkgZGlyZWN0bHkgdGVzdGluZyB0aGUgcnVsZSBsb2dpYyBhbmQgaW50ZWdyYXRpb24gcGF0dGVybnMuXG4gKi9cblxuaW1wb3J0IHsgdmFsaWRhdGVFbGVtZW50YWxQcm9wZXJ0aWVzLCBub3JtYWxpemVFbGVtZW50YWxQcm9wZXJ0aWVzIH0gZnJvbSAnQC91dGlscy9hc3Ryb2xvZ3kvZWxlbWVudGFsVmFsaWRhdGlvbic7XG5pbXBvcnQgeyB2YWxpZGF0ZVBsYW5ldGFyeVBvc2l0aW9ucyB9IGZyb20gJ0AvdXRpbHMvYXN0cm9sb2d5L2FzdHJvbG9naWNhbFZhbGlkYXRpb24nO1xuaW1wb3J0IHsgdmFsaWRhdGVUcmFuc2l0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvYXN0cm9sb2d5L3RyYW5zaXRWYWxpZGF0aW9uJztcblxuZGVzY3JpYmUoJ0RvbWFpbi1TcGVjaWZpYyBSdWxlIEJlaGF2aW9yJywgKCkgPT4ge1xuICBkZXNjcmliZSgnUGxhbmV0YXJ5IENvbnN0YW50cyBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGlkZW50aWZ5IHByb3RlY3RlZCBwbGFuZXRhcnkgY29uc3RhbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgUFJPVEVDVEVEX0NPTlNUQU5UUyA9IFtcbiAgICAgICAgJ0RFR1JFRVNfUEVSX1NJR04nLFxuICAgICAgICAnU0lHTlNfUEVSX0NJUkNMRScsXG4gICAgICAgICdNQVhfTE9OR0lUVURFJyxcbiAgICAgICAgJ1JFTElBQkxFX1BPU0lUSU9OUycsXG4gICAgICAgICdNQVJDSDIwMjVfUE9TSVRJT05TJyxcbiAgICAgICAgJ0ZBTExCQUNLX1BPU0lUSU9OUycsXG4gICAgICAgICdUUkFOU0lUX0RBVEVTJyxcbiAgICAgICAgJ1JFVFJPR1JBREVfUEhBU0VTJyxcbiAgICAgICAgJ0VMRU1FTlRBTF9DT01QQVRJQklMSVRZJyxcbiAgICAgICAgJ1NFTEZfUkVJTkZPUkNFTUVOVF9USFJFU0hPTEQnLFxuICAgICAgICAnSEFSTU9OWV9USFJFU0hPTEQnXG4gICAgICBdO1xuXG4gICAgICAvLyBUZXN0IHRoYXQgdGhlc2UgY29uc3RhbnRzIGFyZSByZWNvZ25pemVkIGFzIHByb3RlY3RlZFxuICAgICAgUFJPVEVDVEVEX0NPTlNUQU5UUy5mb3JFYWNoKGNvbnN0YW50ID0+IHtcbiAgICAgICAgZXhwZWN0KGNvbnN0YW50KS50b01hdGNoKC9eW0EtWl9dKyQvKTsgLy8gU2hvdWxkIGJlIHVwcGVyY2FzZSB3aXRoIHVuZGVyc2NvcmVzXG4gICAgICAgIGV4cGVjdChjb25zdGFudC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigzKTsgLy8gU2hvdWxkIGJlIG1lYW5pbmdmdWwgbmFtZXNcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIG1hdGhlbWF0aWNhbCBjb25zdGFudHMgaW4gY2FsY3VsYXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgREVHUkVFU19QRVJfU0lHTiA9IDMwO1xuICAgICAgY29uc3QgU0lHTlNfUEVSX0NJUkNMRSA9IDEyO1xuICAgICAgY29uc3QgTUFYX0xPTkdJVFVERSA9IDM2MDtcblxuICAgICAgLy8gVGhlc2UgdmFsdWVzIHNob3VsZCBuZXZlciBjaGFuZ2VcbiAgICAgIGV4cGVjdChERUdSRUVTX1BFUl9TSUdOKS50b0JlKDMwKTtcbiAgICAgIGV4cGVjdChTSUdOU19QRVJfQ0lSQ0xFKS50b0JlKDEyKTtcbiAgICAgIGV4cGVjdChNQVhfTE9OR0lUVURFKS50b0JlKDM2MCk7XG4gICAgICBleHBlY3QoREVHUkVFU19QRVJfU0lHTiAqIFNJR05TX1BFUl9DSVJDTEUpLnRvQmUoTUFYX0xPTkdJVFVERSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgZmFsbGJhY2sgcG9zaXRpb24gc3RydWN0dXJlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IFJFTElBQkxFX1BPU0lUSU9OUyA9IHtcbiAgICAgICAgc3VuOiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogOC41LCBleGFjdExvbmdpdHVkZTogOC41LCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgICAgIG1vb246IHsgc2lnbjogJ2FyaWVzJywgZGVncmVlOiAxLjU3LCBleGFjdExvbmdpdHVkZTogMS41NywgaXNSZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgICAgICBtZXJjdXJ5OiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogMC44NSwgZXhhY3RMb25naXR1ZGU6IDAuODUsIGlzUmV0cm9ncmFkZTogdHJ1ZSB9XG4gICAgICB9O1xuXG4gICAgICAvLyBGYWxsYmFjayBwb3NpdGlvbnMgc2hvdWxkIG1haW50YWluIHN0cnVjdHVyZVxuICAgICAgT2JqZWN0LnZhbHVlcyhSRUxJQUJMRV9QT1NJVElPTlMpLmZvckVhY2gocG9zaXRpb24gPT4ge1xuICAgICAgICBleHBlY3QocG9zaXRpb24pLnRvSGF2ZVByb3BlcnR5KCdzaWduJyk7XG4gICAgICAgIGV4cGVjdChwb3NpdGlvbikudG9IYXZlUHJvcGVydHkoJ2RlZ3JlZScpO1xuICAgICAgICBleHBlY3QocG9zaXRpb24pLnRvSGF2ZVByb3BlcnR5KCdleGFjdExvbmdpdHVkZScpO1xuICAgICAgICBleHBlY3QocG9zaXRpb24pLnRvSGF2ZVByb3BlcnR5KCdpc1JldHJvZ3JhZGUnKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBwb3NpdGlvbi5kZWdyZWUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgICBleHBlY3QodHlwZW9mIHBvc2l0aW9uLmlzUmV0cm9ncmFkZSkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQbGFuZXRhcnkgUG9zaXRpb24gU3RydWN0dXJlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIGNvbXBsZXRlIHBsYW5ldGFyeSBwb3NpdGlvbiBvYmplY3RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRQb3NpdGlvbiA9IHtcbiAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgZGVncmVlOiAxNS41LFxuICAgICAgICBleGFjdExvbmdpdHVkZTogMTUuNSxcbiAgICAgICAgaXNSZXRyb2dyYWRlOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcG9zaXRpb25zID0geyBzdW46IHZhbGlkUG9zaXRpb24gfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGxhbmV0YXJ5UG9zaXRpb25zKHBvc2l0aW9ucyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGV0ZWN0IG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGluY29tcGxldGVQb3NpdGlvbiA9IHtcbiAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgZGVncmVlOiAxNS41XG4gICAgICAgIC8vIE1pc3NpbmcgZXhhY3RMb25naXR1ZGUgYW5kIGlzUmV0cm9ncmFkZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcG9zaXRpb25zID0geyBzdW46IGluY29tcGxldGVQb3NpdGlvbiB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQbGFuZXRhcnlQb3NpdGlvbnMocG9zaXRpb25zKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ2V4YWN0TG9uZ2l0dWRlJykpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuc29tZShlcnJvciA9PiBlcnJvci5pbmNsdWRlcygnaXNSZXRyb2dyYWRlJykpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIHBsYW5ldGFyeSBwb3NpdGlvbiB2YWx1ZSByYW5nZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUG9zaXRpb24gPSB7XG4gICAgICAgIHNpZ246ICdhcmllcycsXG4gICAgICAgIGRlZ3JlZTogMzUsIC8vIFRvbyBoaWdoIChzaG91bGQgYmUgPCAzMClcbiAgICAgICAgZXhhY3RMb25naXR1ZGU6IDM1LFxuICAgICAgICBpc1JldHJvZ3JhZGU6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwb3NpdGlvbnMgPSB7IHN1bjogaW52YWxpZFBvc2l0aW9uIH07XG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBsYW5ldGFyeVBvc2l0aW9ucyhwb3NpdGlvbnMsIHsgc3RyaWN0TW9kZTogdHJ1ZSB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJzM1JykpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSByZXRyb2dyYWRlIHZhbGlkYXRpb24gY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3VuUmV0cm9ncmFkZSA9IHtcbiAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgZGVncmVlOiAxNSxcbiAgICAgICAgZXhhY3RMb25naXR1ZGU6IDE1LFxuICAgICAgICBpc1JldHJvZ3JhZGU6IHRydWUgLy8gU3VuIGNhbm5vdCBiZSByZXRyb2dyYWRlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwb3NpdGlvbnMgPSB7IHN1bjogc3VuUmV0cm9ncmFkZSB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQbGFuZXRhcnlQb3NpdGlvbnMocG9zaXRpb25zKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC53YXJuaW5ncy5zb21lKHdhcm5pbmcgPT4gd2FybmluZy5pbmNsdWRlcygnY2Fubm90IGJlIHJldHJvZ3JhZGUnKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFbGVtZW50YWwgUHJvcGVydGllcyBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBmb3VyLWVsZW1lbnQgc3lzdGVtIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkUHJvcGVydGllcyA9IHtcbiAgICAgICAgRmlyZTogMC43LFxuICAgICAgICBXYXRlcjogMC4xLFxuICAgICAgICBFYXJ0aDogMC4xLFxuICAgICAgICBBaXI6IDAuMVxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KHZhbGlkYXRlRWxlbWVudGFsUHJvcGVydGllcyh2YWxpZFByb3BlcnRpZXMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCBtaXNzaW5nIGVsZW1lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5jb21wbGV0ZVByb3BlcnRpZXMgPSB7XG4gICAgICAgIEZpcmU6IDAuOCxcbiAgICAgICAgV2F0ZXI6IDAuMlxuICAgICAgICAvLyBNaXNzaW5nIEVhcnRoIGFuZCBBaXJcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCh2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXMoaW5jb21wbGV0ZVByb3BlcnRpZXMpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBlbGVtZW50IHZhbHVlIHJhbmdlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRQcm9wZXJ0aWVzID0ge1xuICAgICAgICBGaXJlOiAxLjUsIC8vIFRvbyBoaWdoXG4gICAgICAgIFdhdGVyOiAtMC4xLCAvLyBUb28gbG93XG4gICAgICAgIEVhcnRoOiAwLjMsXG4gICAgICAgIEFpcjogMC4yXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QodmFsaWRhdGVFbGVtZW50YWxQcm9wZXJ0aWVzKGludmFsaWRQcm9wZXJ0aWVzKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbm9ybWFsaXplIGVsZW1lbnRhbCBwcm9wZXJ0aWVzIHdoZW4gbmVlZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFydGlhbFByb3BlcnRpZXMgPSB7XG4gICAgICAgIEZpcmU6IDAuOCxcbiAgICAgICAgV2F0ZXI6IDAuMlxuICAgICAgfTtcblxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUVsZW1lbnRhbFByb3BlcnRpZXMocGFydGlhbFByb3BlcnRpZXMpO1xuICAgICAgXG4gICAgICBleHBlY3Qobm9ybWFsaXplZC5GaXJlKS50b0JlKDAuOCk7XG4gICAgICBleHBlY3Qobm9ybWFsaXplZC5XYXRlcikudG9CZSgwLjIpO1xuICAgICAgZXhwZWN0KG5vcm1hbGl6ZWQuRWFydGgpLnRvQmUoMC4yNSk7IC8vIERlZmF1bHQgdmFsdWVcbiAgICAgIGV4cGVjdChub3JtYWxpemVkLkFpcikudG9CZSgwLjI1KTsgLy8gRGVmYXVsdCB2YWx1ZVxuICAgICAgZXhwZWN0KHZhbGlkYXRlRWxlbWVudGFsUHJvcGVydGllcyhub3JtYWxpemVkKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBzZWxmLXJlaW5mb3JjZW1lbnQgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmaXJlUHJvcGVydGllcyA9IHtcbiAgICAgICAgRmlyZTogMC44LCAvLyBEb21pbmFudCBlbGVtZW50XG4gICAgICAgIFdhdGVyOiAwLjEsXG4gICAgICAgIEVhcnRoOiAwLjA1LFxuICAgICAgICBBaXI6IDAuMDVcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCh2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXMoZmlyZVByb3BlcnRpZXMpKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBGaXJlIHNob3VsZCByZW1haW4gdGhlIGRvbWluYW50IGVsZW1lbnRcbiAgICAgIGNvbnN0IG1heEVsZW1lbnQgPSBPYmplY3QuZW50cmllcyhmaXJlUHJvcGVydGllcykucmVkdWNlKChtYXgsIGN1cnJlbnQpID0+IFxuICAgICAgICBjdXJyZW50WzFdID4gbWF4WzFdID8gY3VycmVudCA6IG1heFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtYXhFbGVtZW50WzBdKS50b0JlKCdGaXJlJyk7XG4gICAgICBleHBlY3QobWF4RWxlbWVudFsxXSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwLjcpOyAvLyBTdHJvbmcgc2VsZi1yZWluZm9yY2VtZW50XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUcmFuc2l0IERhdGUgVmFsaWRhdGlvbiBQYXR0ZXJucycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgdHJhbnNpdCBkYXRlIHN0cnVjdHVyZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVHJhbnNpdERhdGVzID0ge1xuICAgICAgICBhcmllczogeyBTdGFydDogJzIwMjQtMDMtMjAnLCBFbmQ6ICcyMDI0LTA0LTE5JyB9LFxuICAgICAgICB0YXVydXM6IHsgU3RhcnQ6ICcyMDI0LTA0LTIwJywgRW5kOiAnMjAyNC0wNS0yMCcgfVxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmFsaWREYXRlID0gbmV3IERhdGUoJzIwMjQtMDQtMDEnKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlVHJhbnNpdERhdGUoJ21hcnMnLCB2YWxpZERhdGUsICdhcmllcycsIG1vY2tUcmFuc2l0RGF0ZXMpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGRldGVjdCBpbnZhbGlkIHRyYW5zaXQgZGF0ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVHJhbnNpdERhdGVzID0ge1xuICAgICAgICBhcmllczogeyBTdGFydDogJzIwMjQtMDMtMjAnLCBFbmQ6ICcyMDI0LTA0LTE5JyB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBpbnZhbGlkRGF0ZSA9IG5ldyBEYXRlKCcyMDI0LTA1LTAxJyk7IC8vIE91dHNpZGUgYXJpZXMgcGVyaW9kXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVRyYW5zaXREYXRlKCdtYXJzJywgaW52YWxpZERhdGUsICdhcmllcycsIG1vY2tUcmFuc2l0RGF0ZXMpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyB0cmFuc2l0IGRhdGEgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5VHJhbnNpdERhdGVzID0ge307XG4gICAgICBjb25zdCB0ZXN0RGF0ZSA9IG5ldyBEYXRlKCcyMDI0LTA0LTAxJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlVHJhbnNpdERhdGUoJ21hcnMnLCB0ZXN0RGF0ZSwgJ2FyaWVzJywgZW1wdHlUcmFuc2l0RGF0ZXMpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7IC8vIFNob3VsZCBmYWlsIGdyYWNlZnVsbHlcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZhbGxiYWNrIFZhbHVlIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaWRlbnRpZnkgZmFsbGJhY2sgdmFyaWFibGUgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBGQUxMQkFDS19QQVRURVJOUyA9IFtcbiAgICAgICAgL0ZBTExCQUNLL2ksXG4gICAgICAgIC9ERUZBVUxUL2ksXG4gICAgICAgIC9SRUxJQUJMRS9pLFxuICAgICAgICAvTUFSQ0gyMDI1L2ksXG4gICAgICAgIC9CQUNLVVAvaSxcbiAgICAgICAgL0NBQ0hFRC9pXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBmYWxsYmFja1ZhcmlhYmxlcyA9IFtcbiAgICAgICAgJ0ZBTExCQUNLX1BPU0lUSU9OUycsXG4gICAgICAgICdERUZBVUxUX0VMRU1FTlRTJyxcbiAgICAgICAgJ1JFTElBQkxFX0RBVEEnLFxuICAgICAgICAnTUFSQ0gyMDI1X1BPU0lUSU9OUycsXG4gICAgICAgICdCQUNLVVBfQ0FMQ1VMQVRJT05TJyxcbiAgICAgICAgJ0NBQ0hFRF9SRVNVTFRTJ1xuICAgICAgXTtcblxuICAgICAgZmFsbGJhY2tWYXJpYWJsZXMuZm9yRWFjaCh2YXJpYWJsZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXNQYXR0ZXJuID0gRkFMTEJBQ0tfUEFUVEVSTlMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdCh2YXJpYWJsZSkpO1xuICAgICAgICBleHBlY3QobWF0Y2hlc1BhdHRlcm4pLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBmYWxsYmFjayBkYXRhIGludGVncml0eScsICgpID0+IHtcbiAgICAgIGNvbnN0IEZBTExCQUNLX1BPU0lUSU9OUyA9IHtcbiAgICAgICAgc3VuOiB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogOC41LCBleGFjdExvbmdpdHVkZTogOC41LCBpc1JldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgICAgIG1vb246IHsgc2lnbjogJ2FyaWVzJywgZGVncmVlOiAxLjU3LCBleGFjdExvbmdpdHVkZTogMS41NywgaXNSZXRyb2dyYWRlOiBmYWxzZSB9XG4gICAgICB9O1xuXG4gICAgICAvLyBGYWxsYmFjayBkYXRhIHNob3VsZCBuZXZlciBiZSBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgZXhwZWN0KEZBTExCQUNLX1BPU0lUSU9OUykubm90LnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoRkFMTEJBQ0tfUE9TSVRJT05TKS5ub3QudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KE9iamVjdC5rZXlzKEZBTExCQUNLX1BPU0lUSU9OUykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIC8vIEVhY2ggZmFsbGJhY2sgcG9zaXRpb24gc2hvdWxkIGJlIHZhbGlkXG4gICAgICBPYmplY3QudmFsdWVzKEZBTExCQUNLX1BPU0lUSU9OUykuZm9yRWFjaChwb3NpdGlvbiA9PiB7XG4gICAgICAgIGV4cGVjdChwb3NpdGlvbikubm90LnRvQmVOdWxsKCk7XG4gICAgICAgIGV4cGVjdChwb3NpdGlvbikubm90LnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHBvc2l0aW9uLnNpZ24pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcG9zaXRpb24uZGVncmVlKS50b0JlKCdudW1iZXInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG1haW50YWluIGZhbGxiYWNrIHZhbHVlIHR5cGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgUkVMSUFCTEVfQ09OU1RBTlRTID0ge1xuICAgICAgICBERUdSRUVTX1BFUl9TSUdOOiAzMCxcbiAgICAgICAgU0VMRl9SRUlORk9SQ0VNRU5UX1RIUkVTSE9MRDogMC4zLFxuICAgICAgICBIQVJNT05ZX1RIUkVTSE9MRDogMC43XG4gICAgICB9O1xuXG4gICAgICAvLyBDb25zdGFudHMgc2hvdWxkIG1haW50YWluIHRoZWlyIHR5cGVzXG4gICAgICBleHBlY3QodHlwZW9mIFJFTElBQkxFX0NPTlNUQU5UUy5ERUdSRUVTX1BFUl9TSUdOKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgUkVMSUFCTEVfQ09OU1RBTlRTLlNFTEZfUkVJTkZPUkNFTUVOVF9USFJFU0hPTEQpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBSRUxJQUJMRV9DT05TVEFOVFMuSEFSTU9OWV9USFJFU0hPTEQpLnRvQmUoJ251bWJlcicpO1xuICAgICAgXG4gICAgICAvLyBWYWx1ZXMgc2hvdWxkIGJlIHdpdGhpbiBleHBlY3RlZCByYW5nZXNcbiAgICAgIGV4cGVjdChSRUxJQUJMRV9DT05TVEFOVFMuREVHUkVFU19QRVJfU0lHTikudG9CZSgzMCk7XG4gICAgICBleHBlY3QoUkVMSUFCTEVfQ09OU1RBTlRTLlNFTEZfUkVJTkZPUkNFTUVOVF9USFJFU0hPTEQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChSRUxJQUJMRV9DT05TVEFOVFMuSEFSTU9OWV9USFJFU0hPTEQpLnRvQmVHcmVhdGVyVGhhbigwLjUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRG9tYWluLVNwZWNpZmljIFZhcmlhYmxlIFBhdHRlcm5zJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZWNvZ25pemUgYXN0cm9sb2dpY2FsIHZhcmlhYmxlIG5hbWluZyBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFzdHJvbG9naWNhbFZhcmlhYmxlcyA9IFtcbiAgICAgICAgJ3BsYW5ldCcsXG4gICAgICAgICdwb3NpdGlvbicsXG4gICAgICAgICdkZWdyZWUnLFxuICAgICAgICAnc2lnbicsXG4gICAgICAgICdsb25naXR1ZGUnLFxuICAgICAgICAncmV0cm9ncmFkZScsXG4gICAgICAgICdwbGFuZXRhcnlQb3NpdGlvbicsXG4gICAgICAgICd0cmFuc2l0RGF0ZScsXG4gICAgICAgICdlbGVtZW50YWxQcm9wZXJ0aWVzJ1xuICAgICAgXTtcblxuICAgICAgYXN0cm9sb2dpY2FsVmFyaWFibGVzLmZvckVhY2godmFyaWFibGUgPT4ge1xuICAgICAgICAvLyBTaG91bGQgZm9sbG93IGNhbWVsQ2FzZSBvciBjb250YWluIGFzdHJvbG9naWNhbCB0ZXJtc1xuICAgICAgICBleHBlY3QodmFyaWFibGUpLnRvTWF0Y2goL15bYS16XVthLXpBLVpdKiQvKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3VsZCBjb250YWluIG1lYW5pbmdmdWwgYXN0cm9sb2dpY2FsIHRlcm1zXG4gICAgICAgIGNvbnN0IGFzdHJvbG9naWNhbFRlcm1zID0gWydwbGFuZXQnLCAncG9zaXRpb24nLCAnZGVncmVlJywgJ3NpZ24nLCAnbG9uZ2l0dWRlJywgJ3JldHJvZ3JhZGUnLCAndHJhbnNpdCcsICdlbGVtZW50YWwnXTtcbiAgICAgICAgY29uc3QgY29udGFpbnNBc3Ryb2xvZ2ljYWxUZXJtID0gYXN0cm9sb2dpY2FsVGVybXMuc29tZSh0ZXJtID0+IFxuICAgICAgICAgIHZhcmlhYmxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApO1xuICAgICAgICBleHBlY3QoY29udGFpbnNBc3Ryb2xvZ2ljYWxUZXJtKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgY2FsY3VsYXRpb24gYWNjdXJhY3kgdmFyaWFibGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjdXJhY3lWYXJpYWJsZXMgPSBbXG4gICAgICAgICdleGFjdExvbmdpdHVkZScsXG4gICAgICAgICdwcmVjaXNlUG9zaXRpb24nLFxuICAgICAgICAnY2FsY3VsYXRlZERlZ3JlZScsXG4gICAgICAgICd2YWxpZGF0ZWRUcmFuc2l0J1xuICAgICAgXTtcblxuICAgICAgYWNjdXJhY3lWYXJpYWJsZXMuZm9yRWFjaCh2YXJpYWJsZSA9PiB7XG4gICAgICAgIC8vIFNob3VsZCBpbmRpY2F0ZSBwcmVjaXNpb24gb3IgdmFsaWRhdGlvblxuICAgICAgICBjb25zdCBwcmVjaXNpb25UZXJtcyA9IFsnZXhhY3QnLCAncHJlY2lzZScsICdjYWxjdWxhdGVkJywgJ3ZhbGlkYXRlZCddO1xuICAgICAgICBjb25zdCBpbmRpY2F0ZXNQcmVjaXNpb24gPSBwcmVjaXNpb25UZXJtcy5zb21lKHRlcm0gPT4gXG4gICAgICAgICAgdmFyaWFibGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChpbmRpY2F0ZXNQcmVjaXNpb24pLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWF0aGVtYXRpY2FsIGNhbGN1bGF0aW9uIHZhcmlhYmxlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hdGhWYXJpYWJsZXMgPSBbXG4gICAgICAgICdERUdSRUVTX1BFUl9TSUdOJyxcbiAgICAgICAgJ1NJR05TX1BFUl9DSVJDTEUnLFxuICAgICAgICAnTUFYX0xPTkdJVFVERScsXG4gICAgICAgICdQSScsXG4gICAgICAgICdSQURJQU5TX1RPX0RFR1JFRVMnXG4gICAgICBdO1xuXG4gICAgICBtYXRoVmFyaWFibGVzLmZvckVhY2godmFyaWFibGUgPT4ge1xuICAgICAgICAvLyBNYXRoZW1hdGljYWwgY29uc3RhbnRzIHNob3VsZCBiZSB1cHBlcmNhc2VcbiAgICAgICAgaWYgKHZhcmlhYmxlLmluY2x1ZGVzKCdfJykpIHtcbiAgICAgICAgICBleHBlY3QodmFyaWFibGUpLnRvTWF0Y2goL15bQS1aX10rJC8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTaG91bGQgY29udGFpbiBtYXRoZW1hdGljYWwgdGVybXNcbiAgICAgICAgY29uc3QgbWF0aFRlcm1zID0gWydERUdSRUVTJywgJ1NJR05TJywgJ0xPTkdJVFVERScsICdQSScsICdSQURJQU5TJ107XG4gICAgICAgIGNvbnN0IGNvbnRhaW5zTWF0aFRlcm0gPSBtYXRoVGVybXMuc29tZSh0ZXJtID0+IFxuICAgICAgICAgIHZhcmlhYmxlLmluY2x1ZGVzKHRlcm0pXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChjb250YWluc01hdGhUZXJtKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiB3aXRoIEV4aXN0aW5nIExpbnRpbmcgUnVsZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHdvcmsgd2l0aCBUeXBlU2NyaXB0IHN0cmljdCBtb2RlJywgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB0aGF0IG91ciBkb21haW4tc3BlY2lmaWMgcnVsZXMgZG9uJ3QgY29uZmxpY3Qgd2l0aCBUeXBlU2NyaXB0XG4gICAgICBpbnRlcmZhY2UgUGxhbmV0YXJ5UG9zaXRpb24ge1xuICAgICAgICBzaWduOiBzdHJpbmc7XG4gICAgICAgIGRlZ3JlZTogbnVtYmVyO1xuICAgICAgICBleGFjdExvbmdpdHVkZTogbnVtYmVyO1xuICAgICAgICBpc1JldHJvZ3JhZGU6IGJvb2xlYW47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvc2l0aW9uOiBQbGFuZXRhcnlQb3NpdGlvbiA9IHtcbiAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgZGVncmVlOiAxNS41LFxuICAgICAgICBleGFjdExvbmdpdHVkZTogMTUuNSxcbiAgICAgICAgaXNSZXRyb2dyYWRlOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgLy8gU2hvdWxkIHZhbGlkYXRlIGNvcnJlY3RseSB3aXRoIFR5cGVTY3JpcHQgdHlwZXNcbiAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHsgc3VuOiBwb3NpdGlvbiB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQbGFuZXRhcnlQb3NpdGlvbnMocG9zaXRpb25zKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSB1bnVzZWQgdmFyaWFibGUgcGF0dGVybnMgZm9yIGFzdHJvbG9naWNhbCBjb250ZXh0JywgKCkgPT4ge1xuICAgICAgLy8gVGhlc2UgdmFyaWFibGVzIHNob3VsZCBiZSBwcmVzZXJ2ZWQgZXZlbiBpZiBcInVudXNlZFwiXG4gICAgICBjb25zdCBfcGxhbmV0YXJ5Q2FsY3VsYXRpb24gPSAncHJlc2VydmVkIGZvciBhc3Ryb2xvZ2ljYWwgYWNjdXJhY3knO1xuICAgICAgY29uc3QgVU5VU0VEX2ZhbGxiYWNrUG9zaXRpb24gPSB7IHNpZ246ICdhcmllcycsIGRlZ3JlZTogMCB9O1xuICAgICAgY29uc3QgcGxhbmV0X21lcmN1cnkgPSAnZG9tYWluLXNwZWNpZmljIG5hbWluZyc7XG4gICAgICBjb25zdCBkZWdyZWVfY2FsY3VsYXRpb24gPSAxNS41O1xuXG4gICAgICAvLyBUaGVzZSBzaG91bGQgYmUgcmVjb2duaXplZCBhcyBpbnRlbnRpb25hbGx5IHByZXNlcnZlZFxuICAgICAgZXhwZWN0KF9wbGFuZXRhcnlDYWxjdWxhdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChVTlVTRURfZmFsbGJhY2tQb3NpdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwbGFuZXRfbWVyY3VyeSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkZWdyZWVfY2FsY3VsYXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYWxsb3cgY29uc29sZSBzdGF0ZW1lbnRzIGZvciBhc3Ryb25vbWljYWwgZGVidWdnaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVidWdBc3Ryb25vbWljYWxDYWxjdWxhdGlvbiA9IChwbGFuZXQ6IHN0cmluZywgcG9zaXRpb246IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmluZm8oYENhbGN1bGF0aW5nIHBvc2l0aW9uIGZvciAke3BsYW5ldH1gKTsgLy8gU2hvdWxkIGJlIGFsbG93ZWRcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgUG9zaXRpb24gZGF0YTpgLCBwb3NpdGlvbik7IC8vIFNob3VsZCBiZSBhbGxvd2VkXG4gICAgICAgIGNvbnNvbGUud2FybihgVmFsaWRhdGlvbiB3YXJuaW5nIGZvciAke3BsYW5ldH1gKTsgLy8gU2hvdWxkIGJlIGFsbG93ZWRcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBwb3NpdGlvbjtcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChkZWJ1Z0FzdHJvbm9taWNhbENhbGN1bGF0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KCgpID0+IGRlYnVnQXN0cm9ub21pY2FsQ2FsY3VsYXRpb24oJ21hcnMnLCB7IHNpZ246ICdhcmllcycgfSkpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggYXN0cm9sb2dpY2FsIGV4cHJlc3Npb25zJywgKCkgPT4ge1xuICAgICAgLy8gQ29tcGxleCBjYWxjdWxhdGlvbnMgc2hvdWxkIGJlIGFsbG93ZWQgd2l0aG91dCBjb21wbGV4aXR5IHdhcm5pbmdzXG4gICAgICBjb25zdCBjYWxjdWxhdGVQbGFuZXRhcnlJbmZsdWVuY2UgPSAoXG4gICAgICAgIHBsYW5ldFBvc2l0aW9uOiBhbnksXG4gICAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IGFueSxcbiAgICAgICAgdHJhbnNpdERhdGVzOiBhbnlcbiAgICAgICkgPT4ge1xuICAgICAgICBjb25zdCBiYXNlSW5mbHVlbmNlID0gcGxhbmV0UG9zaXRpb24uZGVncmVlIC8gMzA7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRhbE1vZGlmaWVyID0gZWxlbWVudGFsUHJvcGVydGllcy5GaXJlICogMC44ICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50YWxQcm9wZXJ0aWVzLldhdGVyICogMC42ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXMuRWFydGggKiAwLjcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudGFsUHJvcGVydGllcy5BaXIgKiAwLjk7XG4gICAgICAgIGNvbnN0IHRyYW5zaXRNb2RpZmllciA9IHRyYW5zaXREYXRlcyA/IDEuMSA6IDAuOTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBNYXRoLm1pbigxLjAsIGJhc2VJbmZsdWVuY2UgKiBlbGVtZW50YWxNb2RpZmllciAqIHRyYW5zaXRNb2RpZmllcik7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVQbGFuZXRhcnlJbmZsdWVuY2UoXG4gICAgICAgIHsgZGVncmVlOiAxNSB9LFxuICAgICAgICB7IEZpcmU6IDAuOCwgV2F0ZXI6IDAuMSwgRWFydGg6IDAuMDUsIEFpcjogMC4wNSB9LFxuICAgICAgICB0cnVlXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTGVzc1RoYW5PckVxdWFsKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIFJlbGlhYmlsaXR5JywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgZGF0YXNldHMgZWZmaWNpZW50bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZVBsYW5ldGFyeURhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIDEwMCBwbGFuZXRhcnkgcG9zaXRpb25zXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgICAgIGxhcmdlUGxhbmV0YXJ5RGF0YVtgcGxhbmV0JHtpfWBdID0ge1xuICAgICAgICAgIHNpZ246ICdhcmllcycsXG4gICAgICAgICAgZGVncmVlOiBpICUgMzAsXG4gICAgICAgICAgZXhhY3RMb25naXR1ZGU6IGkgJSAzNjAsXG4gICAgICAgICAgaXNSZXRyb2dyYWRlOiBpICUgMiA9PT0gMFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQbGFuZXRhcnlQb3NpdGlvbnMobGFyZ2VQbGFuZXRhcnlEYXRhKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDEgc2Vjb25kXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG1haW50YWluIGFjY3VyYWN5IHVuZGVyIGVkZ2UgY29uZGl0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgYm91bmRhcnkgY29uZGl0aW9uc1xuICAgICAgY29uc3QgZWRnZUNhc2VzID0gW1xuICAgICAgICB7IGRlZ3JlZTogMCwgZXhhY3RMb25naXR1ZGU6IDAgfSwgLy8gTWluaW11bSB2YWx1ZXNcbiAgICAgICAgeyBkZWdyZWU6IDI5Ljk5LCBleGFjdExvbmdpdHVkZTogMzU5Ljk5IH0sIC8vIE1heGltdW0gdmFsdWVzXG4gICAgICAgIHsgZGVncmVlOiAxNSwgZXhhY3RMb25naXR1ZGU6IDE4MCB9LCAvLyBNaWRkbGUgdmFsdWVzXG4gICAgICBdO1xuXG4gICAgICBlZGdlQ2FzZXMuZm9yRWFjaChlZGdlQ2FzZSA9PiB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0ge1xuICAgICAgICAgIHNpZ246ICdhcmllcycsXG4gICAgICAgICAgZGVncmVlOiBlZGdlQ2FzZS5kZWdyZWUsXG4gICAgICAgICAgZXhhY3RMb25naXR1ZGU6IGVkZ2VDYXNlLmV4YWN0TG9uZ2l0dWRlLFxuICAgICAgICAgIGlzUmV0cm9ncmFkZTogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSB7IHRlc3Q6IHBvc2l0aW9uIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGxhbmV0YXJ5UG9zaXRpb25zKHBvc2l0aW9ucyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlcnJvciBjb25kaXRpb25zIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHdpdGggbWFsZm9ybWVkIGRhdGFcbiAgICAgIGNvbnN0IG1hbGZvcm1lZERhdGEgPSBbXG4gICAgICAgIG51bGwsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAge30sXG4gICAgICAgIHsgaW52YWxpZFN0cnVjdHVyZTogdHJ1ZSB9LFxuICAgICAgICB7IHN1bjogbnVsbCB9LFxuICAgICAgICB7IHN1bjogeyBzaWduOiBudWxsIH0gfVxuICAgICAgXTtcblxuICAgICAgbWFsZm9ybWVkRGF0YS5mb3JFYWNoKGRhdGEgPT4ge1xuICAgICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGxhbmV0YXJ5UG9zaXRpb25zKGRhdGEgYXMgYW55KTtcbiAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmlzVmFsaWQpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==