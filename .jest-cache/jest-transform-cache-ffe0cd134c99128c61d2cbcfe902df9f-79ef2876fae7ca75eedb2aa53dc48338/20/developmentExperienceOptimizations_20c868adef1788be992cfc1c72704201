5d0b5684cc126d1f0cf9f51d5e250e97
"use strict";
/**
 * Enhanced Development Experience Optimizations
 *
 * This module implements enhanced development experience optimizations including:
 * - Optimized TypeScript configuration for faster compilation
 * - Enhanced IntelliSense for astrological type definitions
 * - Automatic import organization and error fixing
 * - Performance monitoring and real-time error detection
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.useDevelopmentExperienceOptimizations = exports.getDevelopmentExperienceOptimizer = exports.DevelopmentExperienceOptimizer = void 0;
const logger_1 = require("@/utils/logger");
/**
 * Enhanced Development Experience Manager
 */
class DevelopmentExperienceOptimizer {
    static instance;
    metrics;
    optimizationConfig;
    constructor() {
        this.metrics = this.initializeMetrics();
        this.optimizationConfig = this.getDefaultOptimizationConfig();
        this.startPerformanceMonitoring();
    }
    static getInstance() {
        if (!DevelopmentExperienceOptimizer.instance) {
            DevelopmentExperienceOptimizer.instance = new DevelopmentExperienceOptimizer();
        }
        return DevelopmentExperienceOptimizer.instance;
    }
    /**
     * Generate optimized TypeScript configuration
     */
    generateOptimizedTypeScriptConfig() {
        const config = this.optimizationConfig.typescript;
        return {
            compilerOptions: {
                // Performance optimizations
                target: config.target,
                module: config.module,
                moduleResolution: config.moduleResolution,
                // Compilation speed optimizations
                incremental: config.enableIncrementalCompilation,
                composite: config.enableCompositeMode,
                skipLibCheck: config.skipLibCheck,
                skipDefaultLibCheck: config.skipDefaultLibCheck,
                // Type checking optimizations
                strict: true,
                noImplicitAny: false,
                strictNullChecks: false,
                useDefineForClassFields: config.useDefineForClassFields,
                exactOptionalPropertyTypes: config.exactOptionalPropertyTypes,
                noUncheckedIndexedAccess: config.noUncheckedIndexedAccess,
                // Path mapping for better imports
                baseUrl: ".",
                paths: {
                    "@/*": ["./src/*"],
                    "@components/*": ["./src/components/*"],
                    "@utils/*": ["./src/utils/*"],
                    "@types/*": ["./src/types/*"],
                    "@data/*": ["./src/data/*"],
                    "@calculations/*": ["./src/calculations/*"],
                    "@hooks/*": ["./src/hooks/*"],
                    "@contexts/*": ["./src/contexts/*"]
                },
                // Enhanced type definitions
                lib: ["dom", "dom.iterable", "es6", "es2018", "es2020"],
                allowJs: true,
                allowSyntheticDefaultImports: true,
                esModuleInterop: true,
                forceConsistentCasingInFileNames: true,
                isolatedModules: true,
                jsx: "preserve",
                noEmit: true,
                resolveJsonModule: true
            },
            // Include patterns for faster compilation
            include: [
                "next-env.d.ts",
                "**/*.ts",
                "**/*.tsx",
                ".next/types/**/*.ts"
            ],
            // Exclude patterns to reduce compilation time
            exclude: [
                "node_modules",
                ".next",
                "out",
                "build",
                "dist",
                "**/*.test.ts",
                "**/*.test.tsx",
                "**/*.spec.ts",
                "**/*.spec.tsx"
            ],
            // TypeScript project references for faster builds
            references: config.enableProjectReferences ? [
                { path: "./tsconfig.paths.json" }
            ] : undefined
        };
    }
    /**
     * Generate enhanced IntelliSense type definitions
     */
    generateAstrologicalTypeDefinitions() {
        return `
// Enhanced Astrological Type Definitions for IntelliSense
declare global {
  namespace Astrology {
    // Planetary positions with enhanced IntelliSense
    interface PlanetaryPosition {
      /** Zodiac sign (e.g., 'aries', 'taurus', 'gemini') */
      sign: 'aries' | 'taurus' | 'gemini' | 'cancer' | 'leo' | 'virgo' | 
            'libra' | 'scorpio' | 'sagittarius' | 'capricorn' | 'aquarius' | 'pisces';
      /** Degree within the sign (0-30) */
      degree: number;
      /** Exact longitude (0-360) */
      exactLongitude: number;
      /** Whether the planet is in retrograde motion */
      isRetrograde: boolean;
    }

    // Elemental properties with validation
    interface ElementalProperties {
      /** Fire element strength (0-1) - Energy, spice, quick cooking */
      Fire: number;
      /** Water element strength (0-1) - Cooling, fluid, steaming */
      Water: number;
      /** Earth element strength (0-1) - Grounding, root vegetables, slow cooking */
      Earth: number;
      /** Air element strength (0-1) - Light, leafy, raw preparations */
      Air: number;
    }

    // Planetary correspondences for ingredients
    interface PlanetaryCorrespondence {
      /** Primary ruling planet */
      rulingPlanet: 'sun' | 'moon' | 'mercury' | 'venus' | 'mars' | 'jupiter' | 'saturn';
      /** Secondary planetary influences */
      influences?: Array<'sun' | 'moon' | 'mercury' | 'venus' | 'mars' | 'jupiter' | 'saturn'>;
      /** Optimal timing for use */
      optimalTiming?: string;
    }

    // Culinary astrology calculations
    interface CulinaryAstrologyData {
      /** Current dominant element based on planetary positions */
      dominantElement: 'Fire' | 'Water' | 'Earth' | 'Air';
      /** Recommended cooking methods */
      recommendedMethods: string[];
      /** Optimal ingredients for current conditions */
      optimalIngredients: string[];
      /** Timing recommendations */
      timing: {
        bestHours: string[];
        lunarPhase: string;
        planetaryHour: string;
      };
    }

    // Type guards for runtime validation
    function isPlanetaryPosition(obj: any): obj is PlanetaryPosition;
    function isElementalProperties(obj: any): obj is ElementalProperties;
    function isValidCompatibilityScore(score: number): boolean;
  }

  // Enhanced ingredient type definitions
  interface EnhancedIngredient {
    name: string;
    category: string;
    elementalProperties: Astrology.ElementalProperties;
    planetaryCorrespondence: Astrology.PlanetaryCorrespondence;
    culinaryProperties: {
      flavorProfile: string[];
      cookingMethods: string[];
      seasonality: string[];
      pairings: string[];
    };
    nutritionalData?: {
      calories: number;
      protein: number;
      carbs: number;
      fat: number;
      vitamins: string[];
      minerals: string[];
    };
  }

  // Enhanced recipe type definitions
  interface EnhancedRecipe {
    id: string;
    name: string;
    ingredients: EnhancedIngredient[];
    instructions: string[];
    astrologicalOptimization: Astrology.CulinaryAstrologyData;
    elementalBalance: Astrology.ElementalProperties;
    timing: {
      prepTime: number;
      cookTime: number;
      totalTime: number;
      optimalStartTime?: string;
    };
  }
}

// Export enhanced types for use in components
export type {
  Astrology.PlanetaryPosition as PlanetaryPosition,
  Astrology.ElementalProperties as ElementalProperties,
  Astrology.CulinaryAstrologyData as CulinaryAstrologyData,
  EnhancedIngredient,
  EnhancedRecipe
};
`;
    }
    /**
     * Organize and optimize imports automatically
     */
    organizeImports(sourceCode) {
        if (!this.optimizationConfig.importOrganization.enableAutoImportOrganization) {
            return sourceCode;
        }
        const lines = sourceCode.split('\n');
        const imports = [];
        const otherLines = [];
        let inImportSection = true;
        for (const line of lines) {
            if (line.trim().startsWith('import ') || line.trim().startsWith('export ')) {
                if (inImportSection) {
                    imports.push(line);
                }
                else {
                    otherLines.push(line);
                }
            }
            else if (line.trim() === '') {
                if (inImportSection && imports.length > 0) {
                    imports.push(line);
                }
                else {
                    otherLines.push(line);
                }
            }
            else {
                inImportSection = false;
                otherLines.push(line);
            }
        }
        // Remove unused imports
        const usedImports = this.optimizationConfig.importOrganization.enableUnusedImportRemoval
            ? this.removeUnusedImports(imports, otherLines.join('\n'))
            : imports;
        // Sort imports
        const sortedImports = this.optimizationConfig.importOrganization.enableImportSorting
            ? this.sortImports(usedImports)
            : usedImports;
        return [...sortedImports, '', ...otherLines].join('\n');
    }
    /**
     * Real-time error detection and fixing
     */
    detectAndFixCommonErrors(sourceCode) {
        let fixedCode = sourceCode;
        const fixes = [];
        const remainingErrors = [];
        // Fix common TypeScript errors
        const commonFixes = [
            {
                pattern: /React\.FC<([^>]+)>/g,
                replacement: 'React.FC<$1>',
                description: 'Fixed React.FC type annotation'
            },
            {
                pattern: /useEffect\(\(\) => \{([^}]+)\}, \[\]\)/g,
                replacement: 'useEffect(() => {$1}, [])',
                description: 'Fixed useEffect dependency array'
            },
            {
                pattern: /const \[([^,]+), set([^\]]+)\] = useState\(\)/g,
                replacement: 'const [$1, set$2] = useState<any>()',
                description: 'Added type annotation to useState'
            },
            {
                pattern: /interface ([A-Z][a-zA-Z]*) \{/g,
                replacement: 'interface $1 {',
                description: 'Fixed interface naming convention'
            }
        ];
        commonFixes.forEach(fix => {
            if (fix.pattern.test(fixedCode)) {
                fixedCode = fixedCode.replace(fix.pattern, fix.replacement);
                fixes.push(fix.description);
            }
        });
        // Detect remaining errors (simplified detection)
        const errorPatterns = [
            /Property '([^']+)' does not exist on type/g,
            /Type '([^']+)' is not assignable to type/g,
            /Cannot find name '([^']+)'/g
        ];
        errorPatterns.forEach(pattern => {
            const matches = fixedCode.match(pattern);
            if (matches) {
                matches.forEach(match => remainingErrors.push(match));
            }
        });
        return { fixedCode, fixes, remainingErrors };
    }
    /**
     * Monitor performance metrics in real-time
     */
    updatePerformanceMetrics(newMetrics) {
        this.metrics = { ...this.metrics, ...newMetrics, lastOptimization: Date.now() };
        if (this.optimizationConfig.performanceMonitoring.enableRealTimeErrorDetection) {
            this.checkPerformanceThresholds();
        }
    }
    /**
     * Get current development metrics
     */
    getDevelopmentMetrics() {
        return { ...this.metrics };
    }
    /**
     * Generate performance optimization recommendations
     */
    getPerformanceOptimizationRecommendations() {
        const recommendations = {
            typescript: [],
            bundling: [],
            runtime: [],
            development: []
        };
        // TypeScript recommendations
        if (this.metrics.compilationTime > 30000) { // 30 seconds
            recommendations.typescript.push('Enable incremental compilation');
            recommendations.typescript.push('Use project references for large codebases');
            recommendations.typescript.push('Enable skipLibCheck for faster builds');
        }
        // Bundle size recommendations
        if (this.metrics.bundleSize > 500 * 1024) { // 500KB
            recommendations.bundling.push('Implement code splitting');
            recommendations.bundling.push('Enable tree shaking');
            recommendations.bundling.push('Use dynamic imports for large components');
        }
        // Runtime performance recommendations
        if (this.metrics.memoryUsage > 100) { // 100MB
            recommendations.runtime.push('Optimize React component re-renders');
            recommendations.runtime.push('Use React.memo for expensive components');
            recommendations.runtime.push('Implement proper cleanup in useEffect');
        }
        // Development experience recommendations
        if (this.metrics.hotReloadTime > 5000) { // 5 seconds
            recommendations.development.push('Optimize webpack configuration');
            recommendations.development.push('Reduce the number of watched files');
            recommendations.development.push('Use faster development server');
        }
        return recommendations;
    }
    /**
     * Apply automatic optimizations
     */
    applyAutomaticOptimizations() {
        const applied = [];
        const skipped = [];
        const errors = [];
        try {
            // Generate optimized TypeScript config
            const tsConfig = this.generateOptimizedTypeScriptConfig();
            applied.push('Generated optimized TypeScript configuration');
            // Generate enhanced type definitions
            const typeDefinitions = this.generateAstrologicalTypeDefinitions();
            applied.push('Generated enhanced astrological type definitions');
            // Update performance monitoring
            if (this.optimizationConfig.performanceMonitoring.enableRealTimeErrorDetection) {
                this.startRealTimeErrorDetection();
                applied.push('Started real-time error detection');
            }
            logger_1.logger.info('Automatic optimizations applied:', applied);
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Unknown error';
            errors.push(errorMessage);
            logger_1.logger.error('Error applying automatic optimizations:', error);
        }
        return { applied, skipped, errors };
    }
    // Private helper methods
    initializeMetrics() {
        return {
            compilationTime: 0,
            memoryUsage: 0,
            bundleSize: 0,
            errorCount: 0,
            warningCount: 0,
            hotReloadTime: 0,
            lastOptimization: Date.now()
        };
    }
    getDefaultOptimizationConfig() {
        return {
            typescript: {
                enableIncrementalCompilation: true,
                enableProjectReferences: false,
                enableCompositeMode: false,
                skipLibCheck: true,
                skipDefaultLibCheck: true,
                useDefineForClassFields: true,
                exactOptionalPropertyTypes: false,
                noUncheckedIndexedAccess: false,
                target: 'es2018',
                module: 'esnext',
                moduleResolution: 'bundler'
            },
            intelliSense: {
                enableAstrologicalTypeDefinitions: true,
                enableElementalPropertyIntelliSense: true,
                enablePlanetaryPositionAutoComplete: true,
                enableCulinaryAstrologySnippets: true,
                enableCustomTypeGuards: true
            },
            importOrganization: {
                enableAutoImportOrganization: true,
                enableUnusedImportRemoval: true,
                enableImportSorting: true,
                enablePathMapping: true,
                groupExternalImports: true,
                groupInternalImports: true
            },
            performanceMonitoring: {
                enableRealTimeErrorDetection: true,
                enableCompilationTimeTracking: true,
                enableMemoryUsageMonitoring: true,
                enableBundleSizeTracking: true,
                enableHotReloadOptimization: true
            }
        };
    }
    startPerformanceMonitoring() {
        if (typeof window === 'undefined')
            return;
        // Monitor memory usage
        setInterval(() => {
            if (performance.memory) {
                const memoryUsage = performance.memory.usedJSHeapSize / 1024 / 1024;
                this.updatePerformanceMetrics({ memoryUsage });
            }
        }, 10000); // Every 10 seconds
    }
    checkPerformanceThresholds() {
        const thresholds = {
            compilationTime: 30000,
            memoryUsage: 100,
            bundleSize: 500 * 1024,
            errorCount: 10
        };
        Object.entries(thresholds).forEach(([metric, threshold]) => {
            const currentValue = this.metrics[metric];
            if (typeof currentValue === 'number' && currentValue > threshold) {
                logger_1.logger.warn(`Performance threshold exceeded for ${metric}:`, {
                    current: currentValue,
                    threshold
                });
            }
        });
    }
    removeUnusedImports(imports, codeBody) {
        return imports.filter(importLine => {
            // Extract imported names from the import statement
            const importMatch = importLine.match(/import\s+(?:\{([^}]+)\}|\*\s+as\s+(\w+)|(\w+))/);
            if (!importMatch)
                return true;
            const importedNames = importMatch[1]
                ? importMatch[1].split(',').map(name => name.trim().split(' as ')[0])
                : [importMatch[2] || importMatch[3]];
            // Check if any imported name is used in the code
            return importedNames.some(name => {
                const regex = new RegExp(`\\b${name}\\b`, 'g');
                return regex.test(codeBody);
            });
        });
    }
    sortImports(imports) {
        const externalImports = [];
        const internalImports = [];
        imports.forEach(importLine => {
            if (importLine.includes('@/') || importLine.includes('./') || importLine.includes('../')) {
                internalImports.push(importLine);
            }
            else if (importLine.trim().startsWith('import ')) {
                externalImports.push(importLine);
            }
        });
        return [
            ...externalImports.sort(),
            ...(externalImports.length > 0 && internalImports.length > 0 ? [''] : []),
            ...internalImports.sort()
        ];
    }
    startRealTimeErrorDetection() {
        // In a real implementation, this would integrate with the TypeScript compiler API
        // For now, we'll simulate real-time error detection
        setInterval(() => {
            // Simulate error detection
            const errorCount = Math.floor(Math.random() * 5);
            this.updatePerformanceMetrics({ errorCount });
        }, 30000); // Every 30 seconds
    }
}
exports.DevelopmentExperienceOptimizer = DevelopmentExperienceOptimizer;
/**
 * Convenience function to get development experience optimizer instance
 */
function getDevelopmentExperienceOptimizer() {
    return DevelopmentExperienceOptimizer.getInstance();
}
exports.getDevelopmentExperienceOptimizer = getDevelopmentExperienceOptimizer;
/**
 * Hook for components to use development experience optimizations
 */
function useDevelopmentExperienceOptimizations() {
    const optimizer = getDevelopmentExperienceOptimizer();
    return {
        generateOptimizedTypeScriptConfig: () => optimizer.generateOptimizedTypeScriptConfig(),
        generateAstrologicalTypeDefinitions: () => optimizer.generateAstrologicalTypeDefinitions(),
        organizeImports: (code) => optimizer.organizeImports(code),
        detectAndFixCommonErrors: (code) => optimizer.detectAndFixCommonErrors(code),
        updatePerformanceMetrics: (metrics) => optimizer.updatePerformanceMetrics(metrics),
        getDevelopmentMetrics: () => optimizer.getDevelopmentMetrics(),
        getPerformanceOptimizationRecommendations: () => optimizer.getPerformanceOptimizationRecommendations(),
        applyAutomaticOptimizations: () => optimizer.applyAutomaticOptimizations()
    };
}
exports.useDevelopmentExperienceOptimizations = useDevelopmentExperienceOptimizations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9kZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6YXRpb25zLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7R0FRRzs7O0FBRUgsMkNBQXdDO0FBdUR4Qzs7R0FFRztBQUNILE1BQWEsOEJBQThCO0lBQ2pDLE1BQU0sQ0FBQyxRQUFRLENBQWlDO0lBQ2hELE9BQU8sQ0FBcUI7SUFDNUIsa0JBQWtCLENBS3hCO0lBRUY7UUFDRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FBQztRQUM5RCxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztJQUNwQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLDhCQUE4QixDQUFDLFFBQVEsRUFBRTtZQUM1Qyw4QkFBOEIsQ0FBQyxRQUFRLEdBQUcsSUFBSSw4QkFBOEIsRUFBRSxDQUFDO1NBQ2hGO1FBQ0QsT0FBTyw4QkFBOEIsQ0FBQyxRQUFRLENBQUM7SUFDakQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksaUNBQWlDO1FBQ3RDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUM7UUFFbEQsT0FBTztZQUNMLGVBQWUsRUFBRTtnQkFDZiw0QkFBNEI7Z0JBQzVCLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTTtnQkFDckIsTUFBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNO2dCQUNyQixnQkFBZ0IsRUFBRSxNQUFNLENBQUMsZ0JBQWdCO2dCQUV6QyxrQ0FBa0M7Z0JBQ2xDLFdBQVcsRUFBRSxNQUFNLENBQUMsNEJBQTRCO2dCQUNoRCxTQUFTLEVBQUUsTUFBTSxDQUFDLG1CQUFtQjtnQkFDckMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxZQUFZO2dCQUNqQyxtQkFBbUIsRUFBRSxNQUFN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QUFTLENBQUMscUJBQXFCLEVBQUU7UUFDOUQseUNBQXlDLEVBQUUsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLHlDQUF5QyxFQUFFO1FBQ3RHLDJCQUEyQixFQUFFLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQywyQkFBMkIsRUFBRTtLQUMzRSxDQUFDO0FBQ0osQ0FBQztBQWJELHNGQWFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvdXRpbHMvZGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemF0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuaGFuY2VkIERldmVsb3BtZW50IEV4cGVyaWVuY2UgT3B0aW1pemF0aW9uc1xuICogXG4gKiBUaGlzIG1vZHVsZSBpbXBsZW1lbnRzIGVuaGFuY2VkIGRldmVsb3BtZW50IGV4cGVyaWVuY2Ugb3B0aW1pemF0aW9ucyBpbmNsdWRpbmc6XG4gKiAtIE9wdGltaXplZCBUeXBlU2NyaXB0IGNvbmZpZ3VyYXRpb24gZm9yIGZhc3RlciBjb21waWxhdGlvblxuICogLSBFbmhhbmNlZCBJbnRlbGxpU2Vuc2UgZm9yIGFzdHJvbG9naWNhbCB0eXBlIGRlZmluaXRpb25zXG4gKiAtIEF1dG9tYXRpYyBpbXBvcnQgb3JnYW5pemF0aW9uIGFuZCBlcnJvciBmaXhpbmdcbiAqIC0gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBhbmQgcmVhbC10aW1lIGVycm9yIGRldGVjdGlvblxuICovXG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcblxuLy8gVHlwZVNjcmlwdCBjb21waWxhdGlvbiBvcHRpbWl6YXRpb24gc2V0dGluZ3NcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZVNjcmlwdE9wdGltaXphdGlvbkNvbmZpZyB7XG4gIGVuYWJsZUluY3JlbWVudGFsQ29tcGlsYXRpb246IGJvb2xlYW47XG4gIGVuYWJsZVByb2plY3RSZWZlcmVuY2VzOiBib29sZWFuO1xuICBlbmFibGVDb21wb3NpdGVNb2RlOiBib29sZWFuO1xuICBza2lwTGliQ2hlY2s6IGJvb2xlYW47XG4gIHNraXBEZWZhdWx0TGliQ2hlY2s6IGJvb2xlYW47XG4gIHVzZURlZmluZUZvckNsYXNzRmllbGRzOiBib29sZWFuO1xuICBleGFjdE9wdGlvbmFsUHJvcGVydHlUeXBlczogYm9vbGVhbjtcbiAgbm9VbmNoZWNrZWRJbmRleGVkQWNjZXNzOiBib29sZWFuO1xuICB0YXJnZXQ6ICdlczIwMTgnIHwgJ2VzMjAyMCcgfCAnZXMyMDIyJyB8ICdlc25leHQnO1xuICBtb2R1bGU6ICdjb21tb25qcycgfCAnZXNuZXh0JyB8ICdlczIwMjAnIHwgJ2VzMjAyMic7XG4gIG1vZHVsZVJlc29sdXRpb246ICdub2RlJyB8ICdidW5kbGVyJztcbn1cblxuLy8gSW50ZWxsaVNlbnNlIGVuaGFuY2VtZW50IGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZWxsaVNlbnNlQ29uZmlnIHtcbiAgZW5hYmxlQXN0cm9sb2dpY2FsVHlwZURlZmluaXRpb25zOiBib29sZWFuO1xuICBlbmFibGVFbGVtZW50YWxQcm9wZXJ0eUludGVsbGlTZW5zZTogYm9vbGVhbjtcbiAgZW5hYmxlUGxhbmV0YXJ5UG9zaXRpb25BdXRvQ29tcGxldGU6IGJvb2xlYW47XG4gIGVuYWJsZUN1bGluYXJ5QXN0cm9sb2d5U25pcHBldHM6IGJvb2xlYW47XG4gIGVuYWJsZUN1c3RvbVR5cGVHdWFyZHM6IGJvb2xlYW47XG59XG5cbi8vIEltcG9ydCBvcmdhbml6YXRpb24gY29uZmlndXJhdGlvblxuZXhwb3J0IGludGVyZmFjZSBJbXBvcnRPcmdhbml6YXRpb25Db25maWcge1xuICBlbmFibGVBdXRvSW1wb3J0T3JnYW5pemF0aW9uOiBib29sZWFuO1xuICBlbmFibGVVbnVzZWRJbXBvcnRSZW1vdmFsOiBib29sZWFuO1xuICBlbmFibGVJbXBvcnRTb3J0aW5nOiBib29sZWFuO1xuICBlbmFibGVQYXRoTWFwcGluZzogYm9vbGVhbjtcbiAgZ3JvdXBFeHRlcm5hbEltcG9ydHM6IGJvb2xlYW47XG4gIGdyb3VwSW50ZXJuYWxJbXBvcnRzOiBib29sZWFuO1xufVxuXG4vLyBQZXJmb3JtYW5jZSBtb25pdG9yaW5nIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VNb25pdG9yaW5nQ29uZmlnIHtcbiAgZW5hYmxlUmVhbFRpbWVFcnJvckRldGVjdGlvbjogYm9vbGVhbjtcbiAgZW5hYmxlQ29tcGlsYXRpb25UaW1lVHJhY2tpbmc6IGJvb2xlYW47XG4gIGVuYWJsZU1lbW9yeVVzYWdlTW9uaXRvcmluZzogYm9vbGVhbjtcbiAgZW5hYmxlQnVuZGxlU2l6ZVRyYWNraW5nOiBib29sZWFuO1xuICBlbmFibGVIb3RSZWxvYWRPcHRpbWl6YXRpb246IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2ZWxvcG1lbnRNZXRyaWNzIHtcbiAgY29tcGlsYXRpb25UaW1lOiBudW1iZXI7XG4gIG1lbW9yeVVzYWdlOiBudW1iZXI7XG4gIGJ1bmRsZVNpemU6IG51bWJlcjtcbiAgZXJyb3JDb3VudDogbnVtYmVyO1xuICB3YXJuaW5nQ291bnQ6IG51bWJlcjtcbiAgaG90UmVsb2FkVGltZTogbnVtYmVyO1xuICBsYXN0T3B0aW1pemF0aW9uOiBudW1iZXI7XG59XG5cbi8qKlxuICogRW5oYW5jZWQgRGV2ZWxvcG1lbnQgRXhwZXJpZW5jZSBNYW5hZ2VyXG4gKi9cbmV4cG9ydCBjbGFzcyBEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyO1xuICBwcml2YXRlIG1ldHJpY3M6IERldmVsb3BtZW50TWV0cmljcztcbiAgcHJpdmF0ZSBvcHRpbWl6YXRpb25Db25maWc6IHtcbiAgICB0eXBlc2NyaXB0OiBUeXBlU2NyaXB0T3B0aW1pemF0aW9uQ29uZmlnO1xuICAgIGludGVsbGlTZW5zZTogSW50ZWxsaVNlbnNlQ29uZmlnO1xuICAgIGltcG9ydE9yZ2FuaXphdGlvbjogSW1wb3J0T3JnYW5pemF0aW9uQ29uZmlnO1xuICAgIHBlcmZvcm1hbmNlTW9uaXRvcmluZzogUGVyZm9ybWFuY2VNb25pdG9yaW5nQ29uZmlnO1xuICB9O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5tZXRyaWNzID0gdGhpcy5pbml0aWFsaXplTWV0cmljcygpO1xuICAgIHRoaXMub3B0aW1pemF0aW9uQ29uZmlnID0gdGhpcy5nZXREZWZhdWx0T3B0aW1pemF0aW9uQ29uZmlnKCk7XG4gICAgdGhpcy5zdGFydFBlcmZvcm1hbmNlTW9uaXRvcmluZygpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIge1xuICAgIGlmICghRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyLmluc3RhbmNlKSB7XG4gICAgICBEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIuaW5zdGFuY2UgPSBuZXcgRGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyKCk7XG4gICAgfVxuICAgIHJldHVybiBEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgb3B0aW1pemVkIFR5cGVTY3JpcHQgY29uZmlndXJhdGlvblxuICAgKi9cbiAgcHVibGljIGdlbmVyYXRlT3B0aW1pemVkVHlwZVNjcmlwdENvbmZpZygpOiBhbnkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMub3B0aW1pemF0aW9uQ29uZmlnLnR5cGVzY3JpcHQ7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBpbGVyT3B0aW9uczoge1xuICAgICAgICAvLyBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25zXG4gICAgICAgIHRhcmdldDogY29uZmlnLnRhcmdldCxcbiAgICAgICAgbW9kdWxlOiBjb25maWcubW9kdWxlLFxuICAgICAgICBtb2R1bGVSZXNvbHV0aW9uOiBjb25maWcubW9kdWxlUmVzb2x1dGlvbixcbiAgICAgICAgXG4gICAgICAgIC8vIENvbXBpbGF0aW9uIHNwZWVkIG9wdGltaXphdGlvbnNcbiAgICAgICAgaW5jcmVtZW50YWw6IGNvbmZpZy5lbmFibGVJbmNyZW1lbnRhbENvbXBpbGF0aW9uLFxuICAgICAgICBjb21wb3NpdGU6IGNvbmZpZy5lbmFibGVDb21wb3NpdGVNb2RlLFxuICAgICAgICBza2lwTGliQ2hlY2s6IGNvbmZpZy5za2lwTGliQ2hlY2ssXG4gICAgICAgIHNraXBEZWZhdWx0TGliQ2hlY2s6IGNvbmZpZy5za2lwRGVmYXVsdExpYkNoZWNrLFxuICAgICAgICBcbiAgICAgICAgLy8gVHlwZSBjaGVja2luZyBvcHRpbWl6YXRpb25zXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgbm9JbXBsaWNpdEFueTogZmFsc2UsIC8vIFJlbGF4ZWQgZm9yIHJhcGlkIGRldmVsb3BtZW50XG4gICAgICAgIHN0cmljdE51bGxDaGVja3M6IGZhbHNlLCAvLyBSZWxheGVkIGZvciByYXBpZCBkZXZlbG9wbWVudFxuICAgICAgICB1c2VEZWZpbmVGb3JDbGFzc0ZpZWxkczogY29uZmlnLnVzZURlZmluZUZvckNsYXNzRmllbGRzLFxuICAgICAgICBleGFjdE9wdGlvbmFsUHJvcGVydHlUeXBlczogY29uZmlnLmV4YWN0T3B0aW9uYWxQcm9wZXJ0eVR5cGVzLFxuICAgICAgICBub1VuY2hlY2tlZEluZGV4ZWRBY2Nlc3M6IGNvbmZpZy5ub1VuY2hlY2tlZEluZGV4ZWRBY2Nlc3MsXG4gICAgICAgIFxuICAgICAgICAvLyBQYXRoIG1hcHBpbmcgZm9yIGJldHRlciBpbXBvcnRzXG4gICAgICAgIGJhc2VVcmw6IFwiLlwiLFxuICAgICAgICBwYXRoczoge1xuICAgICAgICAgIFwiQC8qXCI6IFtcIi4vc3JjLypcIl0sXG4gICAgICAgICAgXCJAY29tcG9uZW50cy8qXCI6IFtcIi4vc3JjL2NvbXBvbmVudHMvKlwiXSxcbiAgICAgICAgICBcIkB1dGlscy8qXCI6IFtcIi4vc3JjL3V0aWxzLypcIl0sXG4gICAgICAgICAgXCJAdHlwZXMvKlwiOiBbXCIuL3NyYy90eXBlcy8qXCJdLFxuICAgICAgICAgIFwiQGRhdGEvKlwiOiBbXCIuL3NyYy9kYXRhLypcIl0sXG4gICAgICAgICAgXCJAY2FsY3VsYXRpb25zLypcIjogW1wiLi9zcmMvY2FsY3VsYXRpb25zLypcIl0sXG4gICAgICAgICAgXCJAaG9va3MvKlwiOiBbXCIuL3NyYy9ob29rcy8qXCJdLFxuICAgICAgICAgIFwiQGNvbnRleHRzLypcIjogW1wiLi9zcmMvY29udGV4dHMvKlwiXVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy8gRW5oYW5jZWQgdHlwZSBkZWZpbml0aW9uc1xuICAgICAgICBsaWI6IFtcImRvbVwiLCBcImRvbS5pdGVyYWJsZVwiLCBcImVzNlwiLCBcImVzMjAxOFwiLCBcImVzMjAyMFwiXSxcbiAgICAgICAgYWxsb3dKczogdHJ1ZSxcbiAgICAgICAgYWxsb3dTeW50aGV0aWNEZWZhdWx0SW1wb3J0czogdHJ1ZSxcbiAgICAgICAgZXNNb2R1bGVJbnRlcm9wOiB0cnVlLFxuICAgICAgICBmb3JjZUNvbnNpc3RlbnRDYXNpbmdJbkZpbGVOYW1lczogdHJ1ZSxcbiAgICAgICAgaXNvbGF0ZWRNb2R1bGVzOiB0cnVlLFxuICAgICAgICBqc3g6IFwicHJlc2VydmVcIixcbiAgICAgICAgbm9FbWl0OiB0cnVlLFxuICAgICAgICByZXNvbHZlSnNvbk1vZHVsZTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8gSW5jbHVkZSBwYXR0ZXJucyBmb3IgZmFzdGVyIGNvbXBpbGF0aW9uXG4gICAgICBpbmNsdWRlOiBbXG4gICAgICAgIFwibmV4dC1lbnYuZC50c1wiLFxuICAgICAgICBcIioqLyoudHNcIixcbiAgICAgICAgXCIqKi8qLnRzeFwiLFxuICAgICAgICBcIi5uZXh0L3R5cGVzLyoqLyoudHNcIlxuICAgICAgXSxcbiAgICAgIFxuICAgICAgLy8gRXhjbHVkZSBwYXR0ZXJucyB0byByZWR1Y2UgY29tcGlsYXRpb24gdGltZVxuICAgICAgZXhjbHVkZTogW1xuICAgICAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgICAgICBcIi5uZXh0XCIsXG4gICAgICAgIFwib3V0XCIsXG4gICAgICAgIFwiYnVpbGRcIixcbiAgICAgICAgXCJkaXN0XCIsXG4gICAgICAgIFwiKiovKi50ZXN0LnRzXCIsXG4gICAgICAgIFwiKiovKi50ZXN0LnRzeFwiLFxuICAgICAgICBcIioqLyouc3BlYy50c1wiLFxuICAgICAgICBcIioqLyouc3BlYy50c3hcIlxuICAgICAgXSxcbiAgICAgIFxuICAgICAgLy8gVHlwZVNjcmlwdCBwcm9qZWN0IHJlZmVyZW5jZXMgZm9yIGZhc3RlciBidWlsZHNcbiAgICAgIHJlZmVyZW5jZXM6IGNvbmZpZy5lbmFibGVQcm9qZWN0UmVmZXJlbmNlcyA/IFtcbiAgICAgICAgeyBwYXRoOiBcIi4vdHNjb25maWcucGF0aHMuanNvblwiIH1cbiAgICAgIF0gOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGVuaGFuY2VkIEludGVsbGlTZW5zZSB0eXBlIGRlZmluaXRpb25zXG4gICAqL1xuICBwdWJsaWMgZ2VuZXJhdGVBc3Ryb2xvZ2ljYWxUeXBlRGVmaW5pdGlvbnMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuLy8gRW5oYW5jZWQgQXN0cm9sb2dpY2FsIFR5cGUgRGVmaW5pdGlvbnMgZm9yIEludGVsbGlTZW5zZVxuZGVjbGFyZSBnbG9iYWwge1xuICBuYW1lc3BhY2UgQXN0cm9sb2d5IHtcbiAgICAvLyBQbGFuZXRhcnkgcG9zaXRpb25zIHdpdGggZW5oYW5jZWQgSW50ZWxsaVNlbnNlXG4gICAgaW50ZXJmYWNlIFBsYW5ldGFyeVBvc2l0aW9uIHtcbiAgICAgIC8qKiBab2RpYWMgc2lnbiAoZS5nLiwgJ2FyaWVzJywgJ3RhdXJ1cycsICdnZW1pbmknKSAqL1xuICAgICAgc2lnbjogJ2FyaWVzJyB8ICd0YXVydXMnIHwgJ2dlbWluaScgfCAnY2FuY2VyJyB8ICdsZW8nIHwgJ3ZpcmdvJyB8IFxuICAgICAgICAgICAgJ2xpYnJhJyB8ICdzY29ycGlvJyB8ICdzYWdpdHRhcml1cycgfCAnY2Fwcmljb3JuJyB8ICdhcXVhcml1cycgfCAncGlzY2VzJztcbiAgICAgIC8qKiBEZWdyZWUgd2l0aGluIHRoZSBzaWduICgwLTMwKSAqL1xuICAgICAgZGVncmVlOiBudW1iZXI7XG4gICAgICAvKiogRXhhY3QgbG9uZ2l0dWRlICgwLTM2MCkgKi9cbiAgICAgIGV4YWN0TG9uZ2l0dWRlOiBudW1iZXI7XG4gICAgICAvKiogV2hldGhlciB0aGUgcGxhbmV0IGlzIGluIHJldHJvZ3JhZGUgbW90aW9uICovXG4gICAgICBpc1JldHJvZ3JhZGU6IGJvb2xlYW47XG4gICAgfVxuXG4gICAgLy8gRWxlbWVudGFsIHByb3BlcnRpZXMgd2l0aCB2YWxpZGF0aW9uXG4gICAgaW50ZXJmYWNlIEVsZW1lbnRhbFByb3BlcnRpZXMge1xuICAgICAgLyoqIEZpcmUgZWxlbWVudCBzdHJlbmd0aCAoMC0xKSAtIEVuZXJneSwgc3BpY2UsIHF1aWNrIGNvb2tpbmcgKi9cbiAgICAgIEZpcmU6IG51bWJlcjtcbiAgICAgIC8qKiBXYXRlciBlbGVtZW50IHN0cmVuZ3RoICgwLTEpIC0gQ29vbGluZywgZmx1aWQsIHN0ZWFtaW5nICovXG4gICAgICBXYXRlcjogbnVtYmVyO1xuICAgICAgLyoqIEVhcnRoIGVsZW1lbnQgc3RyZW5ndGggKDAtMSkgLSBHcm91bmRpbmcsIHJvb3QgdmVnZXRhYmxlcywgc2xvdyBjb29raW5nICovXG4gICAgICBFYXJ0aDogbnVtYmVyO1xuICAgICAgLyoqIEFpciBlbGVtZW50IHN0cmVuZ3RoICgwLTEpIC0gTGlnaHQsIGxlYWZ5LCByYXcgcHJlcGFyYXRpb25zICovXG4gICAgICBBaXI6IG51bWJlcjtcbiAgICB9XG5cbiAgICAvLyBQbGFuZXRhcnkgY29ycmVzcG9uZGVuY2VzIGZvciBpbmdyZWRpZW50c1xuICAgIGludGVyZmFjZSBQbGFuZXRhcnlDb3JyZXNwb25kZW5jZSB7XG4gICAgICAvKiogUHJpbWFyeSBydWxpbmcgcGxhbmV0ICovXG4gICAgICBydWxpbmdQbGFuZXQ6ICdzdW4nIHwgJ21vb24nIHwgJ21lcmN1cnknIHwgJ3ZlbnVzJyB8ICdtYXJzJyB8ICdqdXBpdGVyJyB8ICdzYXR1cm4nO1xuICAgICAgLyoqIFNlY29uZGFyeSBwbGFuZXRhcnkgaW5mbHVlbmNlcyAqL1xuICAgICAgaW5mbHVlbmNlcz86IEFycmF5PCdzdW4nIHwgJ21vb24nIHwgJ21lcmN1cnknIHwgJ3ZlbnVzJyB8ICdtYXJzJyB8ICdqdXBpdGVyJyB8ICdzYXR1cm4nPjtcbiAgICAgIC8qKiBPcHRpbWFsIHRpbWluZyBmb3IgdXNlICovXG4gICAgICBvcHRpbWFsVGltaW5nPzogc3RyaW5nO1xuICAgIH1cblxuICAgIC8vIEN1bGluYXJ5IGFzdHJvbG9neSBjYWxjdWxhdGlvbnNcbiAgICBpbnRlcmZhY2UgQ3VsaW5hcnlBc3Ryb2xvZ3lEYXRhIHtcbiAgICAgIC8qKiBDdXJyZW50IGRvbWluYW50IGVsZW1lbnQgYmFzZWQgb24gcGxhbmV0YXJ5IHBvc2l0aW9ucyAqL1xuICAgICAgZG9taW5hbnRFbGVtZW50OiAnRmlyZScgfCAnV2F0ZXInIHwgJ0VhcnRoJyB8ICdBaXInO1xuICAgICAgLyoqIFJlY29tbWVuZGVkIGNvb2tpbmcgbWV0aG9kcyAqL1xuICAgICAgcmVjb21tZW5kZWRNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgIC8qKiBPcHRpbWFsIGluZ3JlZGllbnRzIGZvciBjdXJyZW50IGNvbmRpdGlvbnMgKi9cbiAgICAgIG9wdGltYWxJbmdyZWRpZW50czogc3RyaW5nW107XG4gICAgICAvKiogVGltaW5nIHJlY29tbWVuZGF0aW9ucyAqL1xuICAgICAgdGltaW5nOiB7XG4gICAgICAgIGJlc3RIb3Vyczogc3RyaW5nW107XG4gICAgICAgIGx1bmFyUGhhc2U6IHN0cmluZztcbiAgICAgICAgcGxhbmV0YXJ5SG91cjogc3RyaW5nO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBUeXBlIGd1YXJkcyBmb3IgcnVudGltZSB2YWxpZGF0aW9uXG4gICAgZnVuY3Rpb24gaXNQbGFuZXRhcnlQb3NpdGlvbihvYmo6IGFueSk6IG9iaiBpcyBQbGFuZXRhcnlQb3NpdGlvbjtcbiAgICBmdW5jdGlvbiBpc0VsZW1lbnRhbFByb3BlcnRpZXMob2JqOiBhbnkpOiBvYmogaXMgRWxlbWVudGFsUHJvcGVydGllcztcbiAgICBmdW5jdGlvbiBpc1ZhbGlkQ29tcGF0aWJpbGl0eVNjb3JlKHNjb3JlOiBudW1iZXIpOiBib29sZWFuO1xuICB9XG5cbiAgLy8gRW5oYW5jZWQgaW5ncmVkaWVudCB0eXBlIGRlZmluaXRpb25zXG4gIGludGVyZmFjZSBFbmhhbmNlZEluZ3JlZGllbnQge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBjYXRlZ29yeTogc3RyaW5nO1xuICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IEFzdHJvbG9neS5FbGVtZW50YWxQcm9wZXJ0aWVzO1xuICAgIHBsYW5ldGFyeUNvcnJlc3BvbmRlbmNlOiBBc3Ryb2xvZ3kuUGxhbmV0YXJ5Q29ycmVzcG9uZGVuY2U7XG4gICAgY3VsaW5hcnlQcm9wZXJ0aWVzOiB7XG4gICAgICBmbGF2b3JQcm9maWxlOiBzdHJpbmdbXTtcbiAgICAgIGNvb2tpbmdNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgIHNlYXNvbmFsaXR5OiBzdHJpbmdbXTtcbiAgICAgIHBhaXJpbmdzOiBzdHJpbmdbXTtcbiAgICB9O1xuICAgIG51dHJpdGlvbmFsRGF0YT86IHtcbiAgICAgIGNhbG9yaWVzOiBudW1iZXI7XG4gICAgICBwcm90ZWluOiBudW1iZXI7XG4gICAgICBjYXJiczogbnVtYmVyO1xuICAgICAgZmF0OiBudW1iZXI7XG4gICAgICB2aXRhbWluczogc3RyaW5nW107XG4gICAgICBtaW5lcmFsczogc3RyaW5nW107XG4gICAgfTtcbiAgfVxuXG4gIC8vIEVuaGFuY2VkIHJlY2lwZSB0eXBlIGRlZmluaXRpb25zXG4gIGludGVyZmFjZSBFbmhhbmNlZFJlY2lwZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgaW5ncmVkaWVudHM6IEVuaGFuY2VkSW5ncmVkaWVudFtdO1xuICAgIGluc3RydWN0aW9uczogc3RyaW5nW107XG4gICAgYXN0cm9sb2dpY2FsT3B0aW1pemF0aW9uOiBBc3Ryb2xvZ3kuQ3VsaW5hcnlBc3Ryb2xvZ3lEYXRhO1xuICAgIGVsZW1lbnRhbEJhbGFuY2U6IEFzdHJvbG9neS5FbGVtZW50YWxQcm9wZXJ0aWVzO1xuICAgIHRpbWluZzoge1xuICAgICAgcHJlcFRpbWU6IG51bWJlcjtcbiAgICAgIGNvb2tUaW1lOiBudW1iZXI7XG4gICAgICB0b3RhbFRpbWU6IG51bWJlcjtcbiAgICAgIG9wdGltYWxTdGFydFRpbWU/OiBzdHJpbmc7XG4gICAgfTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgZW5oYW5jZWQgdHlwZXMgZm9yIHVzZSBpbiBjb21wb25lbnRzXG5leHBvcnQgdHlwZSB7XG4gIEFzdHJvbG9neS5QbGFuZXRhcnlQb3NpdGlvbiBhcyBQbGFuZXRhcnlQb3NpdGlvbixcbiAgQXN0cm9sb2d5LkVsZW1lbnRhbFByb3BlcnRpZXMgYXMgRWxlbWVudGFsUHJvcGVydGllcyxcbiAgQXN0cm9sb2d5LkN1bGluYXJ5QXN0cm9sb2d5RGF0YSBhcyBDdWxpbmFyeUFzdHJvbG9neURhdGEsXG4gIEVuaGFuY2VkSW5ncmVkaWVudCxcbiAgRW5oYW5jZWRSZWNpcGVcbn07XG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIE9yZ2FuaXplIGFuZCBvcHRpbWl6ZSBpbXBvcnRzIGF1dG9tYXRpY2FsbHlcbiAgICovXG4gIHB1YmxpYyBvcmdhbml6ZUltcG9ydHMoc291cmNlQ29kZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMub3B0aW1pemF0aW9uQ29uZmlnLmltcG9ydE9yZ2FuaXphdGlvbi5lbmFibGVBdXRvSW1wb3J0T3JnYW5pemF0aW9uKSB7XG4gICAgICByZXR1cm4gc291cmNlQ29kZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lcyA9IHNvdXJjZUNvZGUuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGltcG9ydHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgb3RoZXJMaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgaW5JbXBvcnRTZWN0aW9uID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ2ltcG9ydCAnKSB8fCBsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCdleHBvcnQgJykpIHtcbiAgICAgICAgaWYgKGluSW1wb3J0U2VjdGlvbikge1xuICAgICAgICAgIGltcG9ydHMucHVzaChsaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdGhlckxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobGluZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIGlmIChpbkltcG9ydFNlY3Rpb24gJiYgaW1wb3J0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaW1wb3J0cy5wdXNoKGxpbmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG90aGVyTGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5JbXBvcnRTZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIG90aGVyTGluZXMucHVzaChsaW5lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgdW51c2VkIGltcG9ydHNcbiAgICBjb25zdCB1c2VkSW1wb3J0cyA9IHRoaXMub3B0aW1pemF0aW9uQ29uZmlnLmltcG9ydE9yZ2FuaXphdGlvbi5lbmFibGVVbnVzZWRJbXBvcnRSZW1vdmFsXG4gICAgICA/IHRoaXMucmVtb3ZlVW51c2VkSW1wb3J0cyhpbXBvcnRzLCBvdGhlckxpbmVzLmpvaW4oJ1xcbicpKVxuICAgICAgOiBpbXBvcnRzO1xuXG4gICAgLy8gU29ydCBpbXBvcnRzXG4gICAgY29uc3Qgc29ydGVkSW1wb3J0cyA9IHRoaXMub3B0aW1pemF0aW9uQ29uZmlnLmltcG9ydE9yZ2FuaXphdGlvbi5lbmFibGVJbXBvcnRTb3J0aW5nXG4gICAgICA/IHRoaXMuc29ydEltcG9ydHModXNlZEltcG9ydHMpXG4gICAgICA6IHVzZWRJbXBvcnRzO1xuXG4gICAgcmV0dXJuIFsuLi5zb3J0ZWRJbXBvcnRzLCAnJywgLi4ub3RoZXJMaW5lc10uam9pbignXFxuJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVhbC10aW1lIGVycm9yIGRldGVjdGlvbiBhbmQgZml4aW5nXG4gICAqL1xuICBwdWJsaWMgZGV0ZWN0QW5kRml4Q29tbW9uRXJyb3JzKHNvdXJjZUNvZGU6IHN0cmluZyk6IHtcbiAgICBmaXhlZENvZGU6IHN0cmluZztcbiAgICBmaXhlczogc3RyaW5nW107XG4gICAgcmVtYWluaW5nRXJyb3JzOiBzdHJpbmdbXTtcbiAgfSB7XG4gICAgbGV0IGZpeGVkQ29kZSA9IHNvdXJjZUNvZGU7XG4gICAgY29uc3QgZml4ZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcmVtYWluaW5nRXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gRml4IGNvbW1vbiBUeXBlU2NyaXB0IGVycm9yc1xuICAgIGNvbnN0IGNvbW1vbkZpeGVzID0gW1xuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvUmVhY3RcXC5GQzwoW14+XSspPi9nLFxuICAgICAgICByZXBsYWNlbWVudDogJ1JlYWN0LkZDPCQxPicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRml4ZWQgUmVhY3QuRkMgdHlwZSBhbm5vdGF0aW9uJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL3VzZUVmZmVjdFxcKFxcKFxcKSA9PiBcXHsoW159XSspXFx9LCBcXFtcXF1cXCkvZyxcbiAgICAgICAgcmVwbGFjZW1lbnQ6ICd1c2VFZmZlY3QoKCkgPT4geyQxfSwgW10pJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGaXhlZCB1c2VFZmZlY3QgZGVwZW5kZW5jeSBhcnJheSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9jb25zdCBcXFsoW14sXSspLCBzZXQoW15cXF1dKylcXF0gPSB1c2VTdGF0ZVxcKFxcKS9nLFxuICAgICAgICByZXBsYWNlbWVudDogJ2NvbnN0IFskMSwgc2V0JDJdID0gdXNlU3RhdGU8YW55PigpJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBZGRlZCB0eXBlIGFubm90YXRpb24gdG8gdXNlU3RhdGUnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvaW50ZXJmYWNlIChbQS1aXVthLXpBLVpdKikgXFx7L2csXG4gICAgICAgIHJlcGxhY2VtZW50OiAnaW50ZXJmYWNlICQxIHsnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpeGVkIGludGVyZmFjZSBuYW1pbmcgY29udmVudGlvbidcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgY29tbW9uRml4ZXMuZm9yRWFjaChmaXggPT4ge1xuICAgICAgaWYgKGZpeC5wYXR0ZXJuLnRlc3QoZml4ZWRDb2RlKSkge1xuICAgICAgICBmaXhlZENvZGUgPSBmaXhlZENvZGUucmVwbGFjZShmaXgucGF0dGVybiwgZml4LnJlcGxhY2VtZW50KTtcbiAgICAgICAgZml4ZXMucHVzaChmaXguZGVzY3JpcHRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRGV0ZWN0IHJlbWFpbmluZyBlcnJvcnMgKHNpbXBsaWZpZWQgZGV0ZWN0aW9uKVxuICAgIGNvbnN0IGVycm9yUGF0dGVybnMgPSBbXG4gICAgICAvUHJvcGVydHkgJyhbXiddKyknIGRvZXMgbm90IGV4aXN0IG9uIHR5cGUvZyxcbiAgICAgIC9UeXBlICcoW14nXSspJyBpcyBub3QgYXNzaWduYWJsZSB0byB0eXBlL2csXG4gICAgICAvQ2Fubm90IGZpbmQgbmFtZSAnKFteJ10rKScvZ1xuICAgIF07XG5cbiAgICBlcnJvclBhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gZml4ZWRDb2RlLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgbWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHJlbWFpbmluZ0Vycm9ycy5wdXNoKG1hdGNoKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBmaXhlZENvZGUsIGZpeGVzLCByZW1haW5pbmdFcnJvcnMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb25pdG9yIHBlcmZvcm1hbmNlIG1ldHJpY3MgaW4gcmVhbC10aW1lXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlUGVyZm9ybWFuY2VNZXRyaWNzKG5ld01ldHJpY3M6IFBhcnRpYWw8RGV2ZWxvcG1lbnRNZXRyaWNzPik6IHZvaWQge1xuICAgIHRoaXMubWV0cmljcyA9IHsgLi4udGhpcy5tZXRyaWNzLCAuLi5uZXdNZXRyaWNzLCBsYXN0T3B0aW1pemF0aW9uOiBEYXRlLm5vdygpIH07XG4gICAgXG4gICAgaWYgKHRoaXMub3B0aW1pemF0aW9uQ29uZmlnLnBlcmZvcm1hbmNlTW9uaXRvcmluZy5lbmFibGVSZWFsVGltZUVycm9yRGV0ZWN0aW9uKSB7XG4gICAgICB0aGlzLmNoZWNrUGVyZm9ybWFuY2VUaHJlc2hvbGRzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGRldmVsb3BtZW50IG1ldHJpY3NcbiAgICovXG4gIHB1YmxpYyBnZXREZXZlbG9wbWVudE1ldHJpY3MoKTogRGV2ZWxvcG1lbnRNZXRyaWNzIHtcbiAgICByZXR1cm4geyAuLi50aGlzLm1ldHJpY3MgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gICAqL1xuICBwdWJsaWMgZ2V0UGVyZm9ybWFuY2VPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoKToge1xuICAgIHR5cGVzY3JpcHQ6IHN0cmluZ1tdO1xuICAgIGJ1bmRsaW5nOiBzdHJpbmdbXTtcbiAgICBydW50aW1lOiBzdHJpbmdbXTtcbiAgICBkZXZlbG9wbWVudDogc3RyaW5nW107XG4gIH0ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IHtcbiAgICAgIHR5cGVzY3JpcHQ6IFtdLFxuICAgICAgYnVuZGxpbmc6IFtdLFxuICAgICAgcnVudGltZTogW10sXG4gICAgICBkZXZlbG9wbWVudDogW11cbiAgICB9IGFzIGFueTtcblxuICAgIC8vIFR5cGVTY3JpcHQgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKHRoaXMubWV0cmljcy5jb21waWxhdGlvblRpbWUgPiAzMDAwMCkgeyAvLyAzMCBzZWNvbmRzXG4gICAgICByZWNvbW1lbmRhdGlvbnMudHlwZXNjcmlwdC5wdXNoKCdFbmFibGUgaW5jcmVtZW50YWwgY29tcGlsYXRpb24nKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy50eXBlc2NyaXB0LnB1c2goJ1VzZSBwcm9qZWN0IHJlZmVyZW5jZXMgZm9yIGxhcmdlIGNvZGViYXNlcycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnR5cGVzY3JpcHQucHVzaCgnRW5hYmxlIHNraXBMaWJDaGVjayBmb3IgZmFzdGVyIGJ1aWxkcycpO1xuICAgIH1cblxuICAgIC8vIEJ1bmRsZSBzaXplIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmICh0aGlzLm1ldHJpY3MuYnVuZGxlU2l6ZSA+IDUwMCAqIDEwMjQpIHsgLy8gNTAwS0JcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5idW5kbGluZy5wdXNoKCdJbXBsZW1lbnQgY29kZSBzcGxpdHRpbmcnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5idW5kbGluZy5wdXNoKCdFbmFibGUgdHJlZSBzaGFraW5nJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMuYnVuZGxpbmcucHVzaCgnVXNlIGR5bmFtaWMgaW1wb3J0cyBmb3IgbGFyZ2UgY29tcG9uZW50cycpO1xuICAgIH1cblxuICAgIC8vIFJ1bnRpbWUgcGVyZm9ybWFuY2UgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKHRoaXMubWV0cmljcy5tZW1vcnlVc2FnZSA+IDEwMCkgeyAvLyAxMDBNQlxuICAgICAgcmVjb21tZW5kYXRpb25zLnJ1bnRpbWUucHVzaCgnT3B0aW1pemUgUmVhY3QgY29tcG9uZW50IHJlLXJlbmRlcnMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5ydW50aW1lLnB1c2goJ1VzZSBSZWFjdC5tZW1vIGZvciBleHBlbnNpdmUgY29tcG9uZW50cycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnJ1bnRpbWUucHVzaCgnSW1wbGVtZW50IHByb3BlciBjbGVhbnVwIGluIHVzZUVmZmVjdCcpO1xuICAgIH1cblxuICAgIC8vIERldmVsb3BtZW50IGV4cGVyaWVuY2UgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKHRoaXMubWV0cmljcy5ob3RSZWxvYWRUaW1lID4gNTAwMCkgeyAvLyA1IHNlY29uZHNcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5kZXZlbG9wbWVudC5wdXNoKCdPcHRpbWl6ZSB3ZWJwYWNrIGNvbmZpZ3VyYXRpb24nKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5kZXZlbG9wbWVudC5wdXNoKCdSZWR1Y2UgdGhlIG51bWJlciBvZiB3YXRjaGVkIGZpbGVzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMuZGV2ZWxvcG1lbnQucHVzaCgnVXNlIGZhc3RlciBkZXZlbG9wbWVudCBzZXJ2ZXInKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGF1dG9tYXRpYyBvcHRpbWl6YXRpb25zXG4gICAqL1xuICBwdWJsaWMgYXBwbHlBdXRvbWF0aWNPcHRpbWl6YXRpb25zKCk6IHtcbiAgICBhcHBsaWVkOiBzdHJpbmdbXTtcbiAgICBza2lwcGVkOiBzdHJpbmdbXTtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCBhcHBsaWVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNraXBwZWQ6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdlbmVyYXRlIG9wdGltaXplZCBUeXBlU2NyaXB0IGNvbmZpZ1xuICAgICAgY29uc3QgdHNDb25maWcgPSB0aGlzLmdlbmVyYXRlT3B0aW1pemVkVHlwZVNjcmlwdENvbmZpZygpO1xuICAgICAgYXBwbGllZC5wdXNoKCdHZW5lcmF0ZWQgb3B0aW1pemVkIFR5cGVTY3JpcHQgY29uZmlndXJhdGlvbicpO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBlbmhhbmNlZCB0eXBlIGRlZmluaXRpb25zXG4gICAgICBjb25zdCB0eXBlRGVmaW5pdGlvbnMgPSB0aGlzLmdlbmVyYXRlQXN0cm9sb2dpY2FsVHlwZURlZmluaXRpb25zKCk7XG4gICAgICBhcHBsaWVkLnB1c2goJ0dlbmVyYXRlZCBlbmhhbmNlZCBhc3Ryb2xvZ2ljYWwgdHlwZSBkZWZpbml0aW9ucycpO1xuXG4gICAgICAvLyBVcGRhdGUgcGVyZm9ybWFuY2UgbW9uaXRvcmluZ1xuICAgICAgaWYgKHRoaXMub3B0aW1pemF0aW9uQ29uZmlnLnBlcmZvcm1hbmNlTW9uaXRvcmluZy5lbmFibGVSZWFsVGltZUVycm9yRGV0ZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuc3RhcnRSZWFsVGltZUVycm9yRGV0ZWN0aW9uKCk7XG4gICAgICAgIGFwcGxpZWQucHVzaCgnU3RhcnRlZCByZWFsLXRpbWUgZXJyb3IgZGV0ZWN0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBdXRvbWF0aWMgb3B0aW1pemF0aW9ucyBhcHBsaWVkOicsIGFwcGxpZWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTWVzc2FnZSk7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGFwcGx5aW5nIGF1dG9tYXRpYyBvcHRpbWl6YXRpb25zOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBhcHBsaWVkLCBza2lwcGVkLCBlcnJvcnMgfTtcbiAgfVxuXG4gIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICBwcml2YXRlIGluaXRpYWxpemVNZXRyaWNzKCk6IERldmVsb3BtZW50TWV0cmljcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBpbGF0aW9uVGltZTogMCxcbiAgICAgIG1lbW9yeVVzYWdlOiAwLFxuICAgICAgYnVuZGxlU2l6ZTogMCxcbiAgICAgIGVycm9yQ291bnQ6IDAsXG4gICAgICB3YXJuaW5nQ291bnQ6IDAsXG4gICAgICBob3RSZWxvYWRUaW1lOiAwLFxuICAgICAgbGFzdE9wdGltaXphdGlvbjogRGF0ZS5ub3coKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRPcHRpbWl6YXRpb25Db25maWcoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGVzY3JpcHQ6IHtcbiAgICAgICAgZW5hYmxlSW5jcmVtZW50YWxDb21waWxhdGlvbjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlUHJvamVjdFJlZmVyZW5jZXM6IGZhbHNlLFxuICAgICAgICBlbmFibGVDb21wb3NpdGVNb2RlOiBmYWxzZSxcbiAgICAgICAgc2tpcExpYkNoZWNrOiB0cnVlLFxuICAgICAgICBza2lwRGVmYXVsdExpYkNoZWNrOiB0cnVlLFxuICAgICAgICB1c2VEZWZpbmVGb3JDbGFzc0ZpZWxkczogdHJ1ZSxcbiAgICAgICAgZXhhY3RPcHRpb25hbFByb3BlcnR5VHlwZXM6IGZhbHNlLFxuICAgICAgICBub1VuY2hlY2tlZEluZGV4ZWRBY2Nlc3M6IGZhbHNlLFxuICAgICAgICB0YXJnZXQ6ICdlczIwMTgnIGFzIGNvbnN0LFxuICAgICAgICBtb2R1bGU6ICdlc25leHQnIGFzIGNvbnN0LFxuICAgICAgICBtb2R1bGVSZXNvbHV0aW9uOiAnYnVuZGxlcicgYXMgY29uc3RcbiAgICAgIH0sXG4gICAgICBpbnRlbGxpU2Vuc2U6IHtcbiAgICAgICAgZW5hYmxlQXN0cm9sb2dpY2FsVHlwZURlZmluaXRpb25zOiB0cnVlLFxuICAgICAgICBlbmFibGVFbGVtZW50YWxQcm9wZXJ0eUludGVsbGlTZW5zZTogdHJ1ZSxcbiAgICAgICAgZW5hYmxlUGxhbmV0YXJ5UG9zaXRpb25BdXRvQ29tcGxldGU6IHRydWUsXG4gICAgICAgIGVuYWJsZUN1bGluYXJ5QXN0cm9sb2d5U25pcHBldHM6IHRydWUsXG4gICAgICAgIGVuYWJsZUN1c3RvbVR5cGVHdWFyZHM6IHRydWVcbiAgICAgIH0sXG4gICAgICBpbXBvcnRPcmdhbml6YXRpb246IHtcbiAgICAgICAgZW5hYmxlQXV0b0ltcG9ydE9yZ2FuaXphdGlvbjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlVW51c2VkSW1wb3J0UmVtb3ZhbDogdHJ1ZSxcbiAgICAgICAgZW5hYmxlSW1wb3J0U29ydGluZzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlUGF0aE1hcHBpbmc6IHRydWUsXG4gICAgICAgIGdyb3VwRXh0ZXJuYWxJbXBvcnRzOiB0cnVlLFxuICAgICAgICBncm91cEludGVybmFsSW1wb3J0czogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHBlcmZvcm1hbmNlTW9uaXRvcmluZzoge1xuICAgICAgICBlbmFibGVSZWFsVGltZUVycm9yRGV0ZWN0aW9uOiB0cnVlLFxuICAgICAgICBlbmFibGVDb21waWxhdGlvblRpbWVUcmFja2luZzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlTWVtb3J5VXNhZ2VNb25pdG9yaW5nOiB0cnVlLFxuICAgICAgICBlbmFibGVCdW5kbGVTaXplVHJhY2tpbmc6IHRydWUsXG4gICAgICAgIGVuYWJsZUhvdFJlbG9hZE9wdGltaXphdGlvbjogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UGVyZm9ybWFuY2VNb25pdG9yaW5nKCk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gICAgLy8gTW9uaXRvciBtZW1vcnkgdXNhZ2VcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoKHBlcmZvcm1hbmNlIGFzIGFueSkubWVtb3J5KSB7XG4gICAgICAgIGNvbnN0IG1lbW9yeVVzYWdlID0gKHBlcmZvcm1hbmNlIGFzIGFueSkubWVtb3J5LnVzZWRKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQ7XG4gICAgICAgIHRoaXMudXBkYXRlUGVyZm9ybWFuY2VNZXRyaWNzKHsgbWVtb3J5VXNhZ2UgfSk7XG4gICAgICB9XG4gICAgfSwgMTAwMDApOyAvLyBFdmVyeSAxMCBzZWNvbmRzXG4gIH1cblxuICBwcml2YXRlIGNoZWNrUGVyZm9ybWFuY2VUaHJlc2hvbGRzKCk6IHZvaWQge1xuICAgIGNvbnN0IHRocmVzaG9sZHMgPSB7XG4gICAgICBjb21waWxhdGlvblRpbWU6IDMwMDAwLCAvLyAzMCBzZWNvbmRzXG4gICAgICBtZW1vcnlVc2FnZTogMTAwLCAvLyAxMDBNQlxuICAgICAgYnVuZGxlU2l6ZTogNTAwICogMTAyNCwgLy8gNTAwS0JcbiAgICAgIGVycm9yQ291bnQ6IDEwXG4gICAgfTtcblxuICAgIE9iamVjdC5lbnRyaWVzKHRocmVzaG9sZHMpLmZvckVhY2goKFttZXRyaWMsIHRocmVzaG9sZF0pID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMubWV0cmljc1ttZXRyaWMgYXMga2V5b2YgRGV2ZWxvcG1lbnRNZXRyaWNzXTtcbiAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbHVlID09PSAnbnVtYmVyJyAmJiBjdXJyZW50VmFsdWUgPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYFBlcmZvcm1hbmNlIHRocmVzaG9sZCBleGNlZWRlZCBmb3IgJHttZXRyaWN9OmAsIHtcbiAgICAgICAgICBjdXJyZW50OiBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgdGhyZXNob2xkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVVbnVzZWRJbXBvcnRzKGltcG9ydHM6IHN0cmluZ1tdLCBjb2RlQm9keTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBpbXBvcnRzLmZpbHRlcihpbXBvcnRMaW5lID0+IHtcbiAgICAgIC8vIEV4dHJhY3QgaW1wb3J0ZWQgbmFtZXMgZnJvbSB0aGUgaW1wb3J0IHN0YXRlbWVudFxuICAgICAgY29uc3QgaW1wb3J0TWF0Y2ggPSBpbXBvcnRMaW5lLm1hdGNoKC9pbXBvcnRcXHMrKD86XFx7KFtefV0rKVxcfXxcXCpcXHMrYXNcXHMrKFxcdyspfChcXHcrKSkvKTtcbiAgICAgIGlmICghaW1wb3J0TWF0Y2gpIHJldHVybiB0cnVlO1xuXG4gICAgICBjb25zdCBpbXBvcnRlZE5hbWVzID0gaW1wb3J0TWF0Y2hbMV0gXG4gICAgICAgID8gaW1wb3J0TWF0Y2hbMV0uc3BsaXQoJywnKS5tYXAobmFtZSA9PiBuYW1lLnRyaW0oKS5zcGxpdCgnIGFzICcpWzBdKVxuICAgICAgICA6IFtpbXBvcnRNYXRjaFsyXSB8fCBpbXBvcnRNYXRjaFszXV07XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBpbXBvcnRlZCBuYW1lIGlzIHVzZWQgaW4gdGhlIGNvZGVcbiAgICAgIHJldHVybiBpbXBvcnRlZE5hbWVzLnNvbWUobmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXGIke25hbWV9XFxcXGJgLCAnZycpO1xuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChjb2RlQm9keSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc29ydEltcG9ydHMoaW1wb3J0czogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZXh0ZXJuYWxJbXBvcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGludGVybmFsSW1wb3J0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGltcG9ydHMuZm9yRWFjaChpbXBvcnRMaW5lID0+IHtcbiAgICAgIGlmIChpbXBvcnRMaW5lLmluY2x1ZGVzKCdALycpIHx8IGltcG9ydExpbmUuaW5jbHVkZXMoJy4vJykgfHwgaW1wb3J0TGluZS5pbmNsdWRlcygnLi4vJykpIHtcbiAgICAgICAgaW50ZXJuYWxJbXBvcnRzLnB1c2goaW1wb3J0TGluZSk7XG4gICAgICB9IGVsc2UgaWYgKGltcG9ydExpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ2ltcG9ydCAnKSkge1xuICAgICAgICBleHRlcm5hbEltcG9ydHMucHVzaChpbXBvcnRMaW5lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBbXG4gICAgICAuLi5leHRlcm5hbEltcG9ydHMuc29ydCgpLFxuICAgICAgLi4uKGV4dGVybmFsSW1wb3J0cy5sZW5ndGggPiAwICYmIGludGVybmFsSW1wb3J0cy5sZW5ndGggPiAwID8gWycnXSA6IFtdKSxcbiAgICAgIC4uLmludGVybmFsSW1wb3J0cy5zb3J0KClcbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFJlYWxUaW1lRXJyb3JEZXRlY3Rpb24oKTogdm9pZCB7XG4gICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIGludGVncmF0ZSB3aXRoIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyIEFQSVxuICAgIC8vIEZvciBub3csIHdlJ2xsIHNpbXVsYXRlIHJlYWwtdGltZSBlcnJvciBkZXRlY3Rpb25cbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAvLyBTaW11bGF0ZSBlcnJvciBkZXRlY3Rpb25cbiAgICAgIGNvbnN0IGVycm9yQ291bnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KTtcbiAgICAgIHRoaXMudXBkYXRlUGVyZm9ybWFuY2VNZXRyaWNzKHsgZXJyb3JDb3VudCB9KTtcbiAgICB9LCAzMDAwMCk7IC8vIEV2ZXJ5IDMwIHNlY29uZHNcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGdldCBkZXZlbG9wbWVudCBleHBlcmllbmNlIG9wdGltaXplciBpbnN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGV2ZWxvcG1lbnRFeHBlcmllbmNlT3B0aW1pemVyKCk6IERldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXplciB7XG4gIHJldHVybiBEZXZlbG9wbWVudEV4cGVyaWVuY2VPcHRpbWl6ZXIuZ2V0SW5zdGFuY2UoKTtcbn1cblxuLyoqXG4gKiBIb29rIGZvciBjb21wb25lbnRzIHRvIHVzZSBkZXZlbG9wbWVudCBleHBlcmllbmNlIG9wdGltaXphdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZURldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXphdGlvbnMoKSB7XG4gIGNvbnN0IG9wdGltaXplciA9IGdldERldmVsb3BtZW50RXhwZXJpZW5jZU9wdGltaXplcigpO1xuICBcbiAgcmV0dXJuIHtcbiAgICBnZW5lcmF0ZU9wdGltaXplZFR5cGVTY3JpcHRDb25maWc6ICgpID0+IG9wdGltaXplci5nZW5lcmF0ZU9wdGltaXplZFR5cGVTY3JpcHRDb25maWcoKSxcbiAgICBnZW5lcmF0ZUFzdHJvbG9naWNhbFR5cGVEZWZpbml0aW9uczogKCkgPT4gb3B0aW1pemVyLmdlbmVyYXRlQXN0cm9sb2dpY2FsVHlwZURlZmluaXRpb25zKCksXG4gICAgb3JnYW5pemVJbXBvcnRzOiAoY29kZTogc3RyaW5nKSA9PiBvcHRpbWl6ZXIub3JnYW5pemVJbXBvcnRzKGNvZGUpLFxuICAgIGRldGVjdEFuZEZpeENvbW1vbkVycm9yczogKGNvZGU6IHN0cmluZykgPT4gb3B0aW1pemVyLmRldGVjdEFuZEZpeENvbW1vbkVycm9ycyhjb2RlKSxcbiAgICB1cGRhdGVQZXJmb3JtYW5jZU1ldHJpY3M6IChtZXRyaWNzOiBQYXJ0aWFsPERldmVsb3BtZW50TWV0cmljcz4pID0+IG9wdGltaXplci51cGRhdGVQZXJmb3JtYW5jZU1ldHJpY3MobWV0cmljcyksXG4gICAgZ2V0RGV2ZWxvcG1lbnRNZXRyaWNzOiAoKSA9PiBvcHRpbWl6ZXIuZ2V0RGV2ZWxvcG1lbnRNZXRyaWNzKCksXG4gICAgZ2V0UGVyZm9ybWFuY2VPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnM6ICgpID0+IG9wdGltaXplci5nZXRQZXJmb3JtYW5jZU9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucygpLFxuICAgIGFwcGx5QXV0b21hdGljT3B0aW1pemF0aW9uczogKCkgPT4gb3B0aW1pemVyLmFwcGx5QXV0b21hdGljT3B0aW1pemF0aW9ucygpXG4gIH07XG59Il0sInZlcnNpb24iOjN9