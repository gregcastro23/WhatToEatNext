ac7a02faac441fcf759cdffc5677589d
"use strict";
'use client';
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const logger_1 = require("@/utils/logger");
const RecipeBuilderSimple = (0, react_1.memo)(function RecipeBuilderSimple({ initialIngredients = [], initialMethods = [], onRecipeComplete, onSave, }) {
    const [recipeName, setRecipeName] = (0, react_1.useState)('');
    const [ingredients, setIngredients] = (0, react_1.useState)([]);
    const [steps, setSteps] = (0, react_1.useState)([]);
    const [servings, setServings] = (0, react_1.useState)(4);
    const [prepTime, setPrepTime] = (0, react_1.useState)(15);
    const [cookTime, setCookTime] = (0, react_1.useState)(30);
    const addIngredient = (0, react_1.useCallback)(() => {
        setIngredients(prev => [
            ...prev,
            { name: '', quantity: '', preparation: '' },
        ]);
    }, []);
    const updateIngredient = (0, react_1.useCallback)((index, field, value) => {
        setIngredients(prev => prev.map((ing, i) => (i === index ? { ...ing, [field]: value } : ing)));
    }, []);
    const removeIngredient = (0, react_1.useCallback)((index) => {
        setIngredients(prev => prev.filter((_, i) => i !== index));
    }, []);
    const addStep = (0, react_1.useCallback)(() => {
        setSteps(prev => [
            ...prev,
            { step: prev.length + 1, instruction: '', timing: '' },
        ]);
    }, []);
    const updateStep = (0, react_1.useCallback)((index, field, value) => {
        setSteps(prev => prev.map((step, i) => i === index ? { ...step, [field]: value } : step));
    }, []);
    const removeStep = (0, react_1.useCallback)((index) => {
        setSteps(prev => prev
            .filter((_, i) => i !== index)
            .map((step, i) => ({ ...step, step: i + 1 })));
    }, []);
    // Memoize expensive calculations
    const totalTime = (0, react_1.useMemo)(() => prepTime + cookTime, [prepTime, cookTime]);
    const isRecipeValid = (0, react_1.useMemo)(() => recipeName.trim() && ingredients.length > 0 && steps.length > 0, [recipeName, ingredients.length, steps.length]);
    const recipeSummary = (0, react_1.useMemo)(() => ({
        name: recipeName,
        servings,
        totalTime,
        ingredientCount: ingredients.length,
        stepCount: steps.length,
    }), [recipeName, servings, totalTime, ingredients.length, steps.length]);
    const saveRecipe = (0, react_1.useCallback)(() => {
        const recipe = {
            id: `recipe_${Date.now()}`,
            name: recipeName || 'Untitled Recipe',
            ingredients,
            steps,
            servings,
            prepTime,
            cookTime,
            totalTime,
            createdAt: new Date().toISOString(),
        };
        logger_1.logger.info('Saving recipe:', recipe);
        onSave === null || onSave === void 0 ? void 0 : onSave(recipe);
        onRecipeComplete === null || onRecipeComplete === void 0 ? void 0 : onRecipeComplete(recipe);
    }, [
        recipeName,
        ingredients,
        steps,
        servings,
        prepTime,
        cookTime,
        totalTime,
        onSave,
        onRecipeComplete,
    ]);
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'bg-white rounded-lg shadow-md p-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'mb-6', children: [(0, jsx_runtime_1.jsx)("h3", { className: 'text-xl font-semibold mb-4 text-gray-800', children: "Create Your Recipe" }), (0, jsx_runtime_1.jsxs)("div", { className: 'mb-4', children: [(0, jsx_runtime_1.jsx)("label", { className: 'block text-sm font-medium text-gray-700 mb-2', children: "Recipe Name" }), (0, jsx_runtime_1.jsx)("input", { type: 'text', value: recipeName, onChange: e => setRecipeName(e.target.value), placeholder: 'Enter recipe name...', className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-3 gap-4 mb-6', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: 'block text-sm font-medium text-gray-700 mb-2', children: "Servings" }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: servings, onChange: e => setServings(parseInt(e.target.value) || 1), min: '1', max: '20', className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500' })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: 'block text-sm font-medium text-gray-700 mb-2', children: "Prep Time (min)" }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: prepTime, onChange: e => setPrepTime(parseInt(e.target.value) || 0), min: '0', className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500' })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: 'block text-sm font-medium text-gray-700 mb-2', children: "Cook Time (min)" }), (0, jsx_runtime_1.jsx)("input", { type: 'number', value: cookTime, onChange: e => setCookTime(parseInt(e.target.value) || 0), min: '0', className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500' })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'mb-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between mb-4', children: [(0, jsx_runtime_1.jsx)("h4", { className: 'text-lg font-medium text-gray-800', children: "Ingredients" }), (0, jsx_runtime_1.jsx)("button", { onClick: addIngredient, className: 'bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition-colors', children: "Add Ingredient" })] }), ingredients.length === 0 ? ((0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500 text-center py-4', children: "No ingredients added yet. Click \"Add Ingredient\" to start." })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-3', children: ingredients.map((ingredient, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex gap-3 items-center bg-gray-50 p-3 rounded', children: [(0, jsx_runtime_1.jsx)("input", { type: 'text', value: ingredient.quantity, onChange: e => updateIngredient(index, 'quantity', e.target.value), placeholder: '1 cup', className: 'w-24 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500' }), (0, jsx_runtime_1.jsx)("input", { type: 'text', value: ingredient.name, onChange: e => updateIngredient(index, 'name', e.target.value), placeholder: 'Ingredient name', className: 'flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500' }), (0, jsx_runtime_1.jsx)("input", { type: 'text', value: ingredient.preparation, onChange: e => updateIngredient(index, 'preparation', e.target.value), placeholder: 'diced, chopped...', className: 'w-32 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500' }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeIngredient(index), className: 'text-red-600 hover:text-red-800 p-1', title: 'Remove ingredient', children: "\u00D7" })] }, index))) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'mb-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between mb-4', children: [(0, jsx_runtime_1.jsx)("h4", { className: 'text-lg font-medium text-gray-800', children: "Instructions" }), (0, jsx_runtime_1.jsx)("button", { onClick: addStep, className: 'bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition-colors', children: "Add Step" })] }), steps.length === 0 ? ((0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500 text-center py-4', children: "No steps added yet. Click \"Add Step\" to start." })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-3', children: steps.map((step, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex gap-3 items-start bg-gray-50 p-3 rounded', children: [(0, jsx_runtime_1.jsx)("span", { className: 'bg-indigo-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mt-1', children: step.step }), (0, jsx_runtime_1.jsx)("textarea", { value: step.instruction, onChange: e => updateStep(index, 'instruction', e.target.value), placeholder: 'Describe this step...', rows: 2, className: 'flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none' }), (0, jsx_runtime_1.jsx)("input", { type: 'text', value: step.timing || '', onChange: e => updateStep(index, 'timing', e.target.value), placeholder: '5 min', className: 'w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500' }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeStep(index), className: 'text-red-600 hover:text-red-800 p-1', title: 'Remove step', children: "\u00D7" })] }, index))) }))] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex justify-end', children: (0, jsx_runtime_1.jsx)("button", { onClick: saveRecipe, disabled: !isRecipeValid, className: 'bg-green-600 text-white px-6 py-2 rounded font-medium hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed', children: "Save Recipe" }) }), recipeSummary.name && recipeSummary.ingredientCount > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-6 p-4 bg-indigo-50 rounded-lg', children: [(0, jsx_runtime_1.jsx)("h5", { className: 'font-medium text-indigo-800 mb-2', children: "Recipe Summary" }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-indigo-700', children: [(0, jsx_runtime_1.jsx)("p", { children: (0, jsx_runtime_1.jsx)("strong", { children: recipeSummary.name }) }), (0, jsx_runtime_1.jsxs)("p", { children: ["Serves ", recipeSummary.servings, " \u2022 Total time:", ' ', recipeSummary.totalTime, " minutes"] }), (0, jsx_runtime_1.jsxs)("p", { children: [recipeSummary.ingredientCount, " ingredients \u2022", ' ', recipeSummary.stepCount, " steps"] })] })] }))] }));
});
exports.default = RecipeBuilderSimple;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL3JlY2lwZXMvUmVjaXBlQnVpbGRlclNpbXBsZS50c3giLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFYiwrQ0FBb0U7QUFDcEUsMkNBQXdDO0FBcUJ4QyxNQUFNLG1CQUFtQixHQUFpQyxJQUFBLFlBQUksRUFDNUQsU0FBUyxtQkFBbUIsQ0FBQyxFQUMzQixrQkFBa0IsR0FBRyxFQUFFLEVBQ3ZCLGNBQWMsR0FBRyxFQUFFLEVBQ25CLGdCQUFnQixFQUNoQixNQUFNLEdBQ1A7SUFDQyxNQUFNLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUNqRCxNQUFNLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBcUIsRUFBRSxDQUFDLENBQUM7SUFDdkUsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWUsRUFBRSxDQUFDLENBQUM7SUFDckQsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFDN0MsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFFN0MsTUFBTSxhQUFhLEdBQUcsSUFBQSxtQkFBVyxFQUFDLEdBQUcsRUFBRTtRQUNyQyxjQUFjLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNyQixHQUFHLElBQUk7WUFDUCxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsRUFB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Q0FDUCxJQUNHLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FDRixDQUFDO0FBRUYsa0JBQWUsbUJBQW1CLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL3JlY2lwZXMvUmVjaXBlQnVpbGRlclNpbXBsZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vLCBtZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuXG5pbnRlcmZhY2UgUmVjaXBlQnVpbGRlclByb3BzIHtcbiAgaW5pdGlhbEluZ3JlZGllbnRzPzogc3RyaW5nW107XG4gIGluaXRpYWxNZXRob2RzPzogc3RyaW5nW107XG4gIG9uUmVjaXBlQ29tcGxldGU/OiAocmVjaXBlOiBhbnkpID0+IHZvaWQ7XG4gIG9uU2F2ZT86IChyZWNpcGU6IGFueSkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIFJlY2lwZUluZ3JlZGllbnQge1xuICBuYW1lOiBzdHJpbmc7XG4gIHF1YW50aXR5OiBzdHJpbmc7XG4gIHByZXBhcmF0aW9uOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBSZWNpcGVTdGVwIHtcbiAgc3RlcDogbnVtYmVyO1xuICBpbnN0cnVjdGlvbjogc3RyaW5nO1xuICB0aW1pbmc/OiBzdHJpbmc7XG59XG5cbmNvbnN0IFJlY2lwZUJ1aWxkZXJTaW1wbGU6IFJlYWN0LkZDPFJlY2lwZUJ1aWxkZXJQcm9wcz4gPSBtZW1vKFxuICBmdW5jdGlvbiBSZWNpcGVCdWlsZGVyU2ltcGxlKHtcbiAgICBpbml0aWFsSW5ncmVkaWVudHMgPSBbXSxcbiAgICBpbml0aWFsTWV0aG9kcyA9IFtdLFxuICAgIG9uUmVjaXBlQ29tcGxldGUsXG4gICAgb25TYXZlLFxuICB9KSB7XG4gICAgY29uc3QgW3JlY2lwZU5hbWUsIHNldFJlY2lwZU5hbWVdID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtpbmdyZWRpZW50cywgc2V0SW5ncmVkaWVudHNdID0gdXNlU3RhdGU8UmVjaXBlSW5ncmVkaWVudFtdPihbXSk7XG4gICAgY29uc3QgW3N0ZXBzLCBzZXRTdGVwc10gPSB1c2VTdGF0ZTxSZWNpcGVTdGVwW10+KFtdKTtcbiAgICBjb25zdCBbc2VydmluZ3MsIHNldFNlcnZpbmdzXSA9IHVzZVN0YXRlKDQpO1xuICAgIGNvbnN0IFtwcmVwVGltZSwgc2V0UHJlcFRpbWVdID0gdXNlU3RhdGUoMTUpO1xuICAgIGNvbnN0IFtjb29rVGltZSwgc2V0Q29va1RpbWVdID0gdXNlU3RhdGUoMzApO1xuXG4gICAgY29uc3QgYWRkSW5ncmVkaWVudCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gW1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICB7IG5hbWU6ICcnLCBxdWFudGl0eTogJycsIHByZXBhcmF0aW9uOiAnJyB9LFxuICAgICAgXSk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgdXBkYXRlSW5ncmVkaWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgKGluZGV4OiBudW1iZXIsIGZpZWxkOiBrZXlvZiBSZWNpcGVJbmdyZWRpZW50LCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT5cbiAgICAgICAgICBwcmV2Lm1hcCgoaW5nLCBpKSA9PiAoaSA9PT0gaW5kZXggPyB7IC4uLmluZywgW2ZpZWxkXTogdmFsdWUgfSA6IGluZykpXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgW11cbiAgICApO1xuXG4gICAgY29uc3QgcmVtb3ZlSW5ncmVkaWVudCA9IHVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICBzZXRJbmdyZWRpZW50cyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCkpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGFkZFN0ZXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICBzZXRTdGVwcyhwcmV2ID0+IFtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgeyBzdGVwOiBwcmV2Lmxlbmd0aCArIDEsIGluc3RydWN0aW9uOiAnJywgdGltaW5nOiAnJyB9LFxuICAgICAgXSk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgdXBkYXRlU3RlcCA9IHVzZUNhbGxiYWNrKFxuICAgICAgKGluZGV4OiBudW1iZXIsIGZpZWxkOiBrZXlvZiBSZWNpcGVTdGVwLCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgICAgIHNldFN0ZXBzKHByZXYgPT5cbiAgICAgICAgICBwcmV2Lm1hcCgoc3RlcCwgaSkgPT5cbiAgICAgICAgICAgIGkgPT09IGluZGV4ID8geyAuLi5zdGVwLCBbZmllbGRdOiB2YWx1ZSB9IDogc3RlcFxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBbXVxuICAgICk7XG5cbiAgICBjb25zdCByZW1vdmVTdGVwID0gdXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHNldFN0ZXBzKHByZXYgPT5cbiAgICAgICAgcHJldlxuICAgICAgICAgIC5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KVxuICAgICAgICAgIC5tYXAoKHN0ZXAsIGkpID0+ICh7IC4uLnN0ZXAsIHN0ZXA6IGkgKyAxIH0pKVxuICAgICAgKTtcbiAgICB9LCBbXSk7XG5cbiAgICAvLyBNZW1vaXplIGV4cGVuc2l2ZSBjYWxjdWxhdGlvbnNcbiAgICBjb25zdCB0b3RhbFRpbWUgPSB1c2VNZW1vKCgpID0+IHByZXBUaW1lICsgY29va1RpbWUsIFtwcmVwVGltZSwgY29va1RpbWVdKTtcblxuICAgIGNvbnN0IGlzUmVjaXBlVmFsaWQgPSB1c2VNZW1vKFxuICAgICAgKCkgPT4gcmVjaXBlTmFtZS50cmltKCkgJiYgaW5ncmVkaWVudHMubGVuZ3RoID4gMCAmJiBzdGVwcy5sZW5ndGggPiAwLFxuICAgICAgW3JlY2lwZU5hbWUsIGluZ3JlZGllbnRzLmxlbmd0aCwgc3RlcHMubGVuZ3RoXVxuICAgICk7XG5cbiAgICBjb25zdCByZWNpcGVTdW1tYXJ5ID0gdXNlTWVtbyhcbiAgICAgICgpID0+ICh7XG4gICAgICAgIG5hbWU6IHJlY2lwZU5hbWUsXG4gICAgICAgIHNlcnZpbmdzLFxuICAgICAgICB0b3RhbFRpbWUsXG4gICAgICAgIGluZ3JlZGllbnRDb3VudDogaW5ncmVkaWVudHMubGVuZ3RoLFxuICAgICAgICBzdGVwQ291bnQ6IHN0ZXBzLmxlbmd0aCxcbiAgICAgIH0pLFxuICAgICAgW3JlY2lwZU5hbWUsIHNlcnZpbmdzLCB0b3RhbFRpbWUsIGluZ3JlZGllbnRzLmxlbmd0aCwgc3RlcHMubGVuZ3RoXVxuICAgICk7XG5cbiAgICBjb25zdCBzYXZlUmVjaXBlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgY29uc3QgcmVjaXBlID0ge1xuICAgICAgICBpZDogYHJlY2lwZV8ke0RhdGUubm93KCl9YCxcbiAgICAgICAgbmFtZTogcmVjaXBlTmFtZSB8fCAnVW50aXRsZWQgUmVjaXBlJyxcbiAgICAgICAgaW5ncmVkaWVudHMsXG4gICAgICAgIHN0ZXBzLFxuICAgICAgICBzZXJ2aW5ncyxcbiAgICAgICAgcHJlcFRpbWUsXG4gICAgICAgIGNvb2tUaW1lLFxuICAgICAgICB0b3RhbFRpbWUsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ1NhdmluZyByZWNpcGU6JywgcmVjaXBlKTtcbiAgICAgIG9uU2F2ZT8uKHJlY2lwZSk7XG4gICAgICBvblJlY2lwZUNvbXBsZXRlPy4ocmVjaXBlKTtcbiAgICB9LCBbXG4gICAgICByZWNpcGVOYW1lLFxuICAgICAgaW5ncmVkaWVudHMsXG4gICAgICBzdGVwcyxcbiAgICAgIHNlcnZpbmdzLFxuICAgICAgcHJlcFRpbWUsXG4gICAgICBjb29rVGltZSxcbiAgICAgIHRvdGFsVGltZSxcbiAgICAgIG9uU2F2ZSxcbiAgICAgIG9uUmVjaXBlQ29tcGxldGUsXG4gICAgXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2JnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kIHAtNic+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYi02Jz5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPSd0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNCB0ZXh0LWdyYXktODAwJz5cbiAgICAgICAgICAgIENyZWF0ZSBZb3VyIFJlY2lwZVxuICAgICAgICAgIDwvaDM+XG5cbiAgICAgICAgICB7LyogUmVjaXBlIE5hbWUgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21iLTQnPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTInPlxuICAgICAgICAgICAgICBSZWNpcGUgTmFtZVxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICB2YWx1ZT17cmVjaXBlTmFtZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0UmVjaXBlTmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdFbnRlciByZWNpcGUgbmFtZS4uLidcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogUmVjaXBlIERldGFpbHMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTQgbWItNic+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMic+XG4gICAgICAgICAgICAgICAgU2VydmluZ3NcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT0nbnVtYmVyJ1xuICAgICAgICAgICAgICAgIHZhbHVlPXtzZXJ2aW5nc31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRTZXJ2aW5ncyhwYXJzZUludChlLnRhcmdldC52YWx1ZSkgfHwgMSl9XG4gICAgICAgICAgICAgICAgbWluPScxJ1xuICAgICAgICAgICAgICAgIG1heD0nMjAnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTInPlxuICAgICAgICAgICAgICAgIFByZXAgVGltZSAobWluKVxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ByZXBUaW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFByZXBUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBtaW49JzAnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTInPlxuICAgICAgICAgICAgICAgIENvb2sgVGltZSAobWluKVxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgdmFsdWU9e2Nvb2tUaW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldENvb2tUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBtaW49JzAnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogSW5ncmVkaWVudHMgU2VjdGlvbiAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21iLTYnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNCc+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSd0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS04MDAnPkluZ3JlZGllbnRzPC9oND5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17YWRkSW5ncmVkaWVudH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBob3ZlcjpiZy1pbmRpZ28tNzAwIHRyYW5zaXRpb24tY29sb3JzJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBBZGQgSW5ncmVkaWVudFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7aW5ncmVkaWVudHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwIHRleHQtY2VudGVyIHB5LTQnPlxuICAgICAgICAgICAgICBObyBpbmdyZWRpZW50cyBhZGRlZCB5ZXQuIENsaWNrIFwiQWRkIEluZ3JlZGllbnRcIiB0byBzdGFydC5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMyc+XG4gICAgICAgICAgICAgIHtpbmdyZWRpZW50cy5tYXAoKGluZ3JlZGllbnQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBnYXAtMyBpdGVtcy1jZW50ZXIgYmctZ3JheS01MCBwLTMgcm91bmRlZCdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQucXVhbnRpdHl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW5ncmVkaWVudChpbmRleCwgJ3F1YW50aXR5JywgZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9JzEgY3VwJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctMjQgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1pbmRpZ28tNTAwJ1xuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aW5ncmVkaWVudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PlxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUluZ3JlZGllbnQoaW5kZXgsICduYW1lJywgZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0luZ3JlZGllbnQgbmFtZSdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4LTEgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1pbmRpZ28tNTAwJ1xuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17aW5ncmVkaWVudC5wcmVwYXJhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbmdyZWRpZW50KGluZGV4LCAncHJlcGFyYXRpb24nLCBlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nZGljZWQsIGNob3BwZWQuLi4nXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy0zMiBweC0yIHB5LTEgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLWluZGlnby01MDAnXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByZW1vdmVJbmdyZWRpZW50KGluZGV4KX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwIHAtMSdcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9J1JlbW92ZSBpbmdyZWRpZW50J1xuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICDDl1xuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEluc3RydWN0aW9ucyBTZWN0aW9uICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWItNic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00Jz5cbiAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMCc+SW5zdHJ1Y3Rpb25zPC9oND5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17YWRkU3RlcH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBob3ZlcjpiZy1pbmRpZ28tNzAwIHRyYW5zaXRpb24tY29sb3JzJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBBZGQgU3RlcFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7c3RlcHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwIHRleHQtY2VudGVyIHB5LTQnPlxuICAgICAgICAgICAgICBObyBzdGVwcyBhZGRlZCB5ZXQuIENsaWNrIFwiQWRkIFN0ZXBcIiB0byBzdGFydC5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMyc+XG4gICAgICAgICAgICAgIHtzdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBnYXAtMyBpdGVtcy1zdGFydCBiZy1ncmF5LTUwIHAtMyByb3VuZGVkJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nYmctaW5kaWdvLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtZnVsbCB3LTYgaC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc20gZm9udC1tZWRpdW0gbXQtMSc+XG4gICAgICAgICAgICAgICAgICAgIHtzdGVwLnN0ZXB9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0ZXAuaW5zdHJ1Y3Rpb259XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RlcChpbmRleCwgJ2luc3RydWN0aW9uJywgZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0Rlc2NyaWJlIHRoaXMgc3RlcC4uLidcbiAgICAgICAgICAgICAgICAgICAgcm93cz17Mn1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4LTEgcHgtMiBweS0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1pbmRpZ28tNTAwIHJlc2l6ZS1ub25lJ1xuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3RlcC50aW1pbmcgfHwgJyd9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHVwZGF0ZVN0ZXAoaW5kZXgsICd0aW1pbmcnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSc1IG1pbidcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LTIwIHB4LTIgcHktMSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQgdGV4dC1zbSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctaW5kaWdvLTUwMCdcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJlbW92ZVN0ZXAoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC04MDAgcC0xJ1xuICAgICAgICAgICAgICAgICAgICB0aXRsZT0nUmVtb3ZlIHN0ZXAnXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIMOXXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU2F2ZSBCdXR0b24gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktZW5kJz5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtzYXZlUmVjaXBlfVxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc1JlY2lwZVZhbGlkfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBweC02IHB5LTIgcm91bmRlZCBmb250LW1lZGl1bSBob3ZlcjpiZy1ncmVlbi03MDAgdHJhbnNpdGlvbi1jb2xvcnMgZGlzYWJsZWQ6YmctZ3JheS00MDAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkJ1xuICAgICAgICAgID5cbiAgICAgICAgICAgIFNhdmUgUmVjaXBlXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBSZWNpcGUgU3VtbWFyeSAqL31cbiAgICAgICAge3JlY2lwZVN1bW1hcnkubmFtZSAmJiByZWNpcGVTdW1tYXJ5LmluZ3JlZGllbnRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC02IHAtNCBiZy1pbmRpZ28tNTAgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICA8aDUgY2xhc3NOYW1lPSdmb250LW1lZGl1bSB0ZXh0LWluZGlnby04MDAgbWItMic+UmVjaXBlIFN1bW1hcnk8L2g1PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1pbmRpZ28tNzAwJz5cbiAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz57cmVjaXBlU3VtbWFyeS5uYW1lfTwvc3Ryb25nPlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIFNlcnZlcyB7cmVjaXBlU3VtbWFyeS5zZXJ2aW5nc30g4oCiIFRvdGFsIHRpbWU6eycgJ31cbiAgICAgICAgICAgICAgICB7cmVjaXBlU3VtbWFyeS50b3RhbFRpbWV9IG1pbnV0ZXNcbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICB7cmVjaXBlU3VtbWFyeS5pbmdyZWRpZW50Q291bnR9IGluZ3JlZGllbnRzIOKAonsnICd9XG4gICAgICAgICAgICAgICAge3JlY2lwZVN1bW1hcnkuc3RlcENvdW50fSBzdGVwc1xuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbik7XG5cbmV4cG9ydCBkZWZhdWx0IFJlY2lwZUJ1aWxkZXJTaW1wbGU7XG4iXSwidmVyc2lvbiI6M30=