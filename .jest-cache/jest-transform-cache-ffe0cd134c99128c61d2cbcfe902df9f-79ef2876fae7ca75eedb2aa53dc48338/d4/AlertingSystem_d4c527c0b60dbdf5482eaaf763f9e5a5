f0fddbc1fcb509c8e1b26a78f36d3357
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.alertingSystem = void 0;
const BuildPerformanceMonitor_1 = require("./BuildPerformanceMonitor");
const ErrorTrackingSystem_1 = require("./ErrorTrackingSystem");
const QualityMetricsService_1 = require("./QualityMetricsService");
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
class AlertingSystem {
    constructor() {
        this.alerts = [];
        this.alertRules = [];
        this.escalationRules = [];
        this.alertResponses = [];
        this.subscribers = new Set();
        this.lastAlertTimes = new Map();
        this.loadConfiguration();
        this.initializeDefaultRules();
        this.startMonitoring();
    }
    loadConfiguration() {
        try {
            const configPath = path_1.default.join(process.cwd(), '.kiro', 'settings', 'alerting-config.json');
            if (fs_1.default.existsSync(configPath)) {
                const config = JSON.parse(fs_1.default.readFileSync(configPath, 'utf8'));
                this.alertRules = config.alertRules || [];
                this.escalationRules = config.escalationRules || [];
                this.alerts = config.alerts || [];
                this.alertResponses = config.alertResponses || [];
            }
        }
        catch (error) {
            console.warn('[Alerting System] Failed to load configuration:', error);
        }
    }
    saveConfiguration() {
        try {
            const settingsDir = path_1.default.join(process.cwd(), '.kiro', 'settings');
            if (!fs_1.default.existsSync(settingsDir)) {
                fs_1.default.mkdirSync(settingsDir, { recursive: true });
            }
            const configPath = path_1.default.join(settingsDir, 'alerting-config.json');
            const config = {
                alertRules: this.alertRules,
                escalationRules: this.escalationRules,
                alerts: this.alerts.slice(-500),
                alertResponses: this.alertResponses.slice(-200) // Keep last 200 responses
            };
            fs_1.default.writeFileSync(configPath, JSON.stringify(config, null, 2));
        }
        catch (error) {
            console.error('[Alerting System] Failed to save configuration:', error);
        }
    }
    initializeDefaultRules() {
        if (this.alertRules.length === 0) {
            const defaultRules = [
                {
                    id: 'build-time-critical',
                    name: 'Critical Build Time',
                    description: 'Build time exceeds critical threshold',
                    type: 'performance',
                    metric: 'build_time',
                    condition: 'greater_than',
                    threshold: 120000,
                    severity: 'critical',
                    enabled: true,
                    cooldownMinutes: 15,
                    escalationMinutes: 30,
                    autoResponse: true,
                    responseActions: [
                        {
                            id: 'analyze-build-bottlenecks',
                            name: 'Analyze Build Bottlenecks',
                            type: 'script',
                            config: { script: 'analyze-build-performance.js' },
                            conditions: [],
                            retryCount: 2,
                            timeoutSeconds: 300
                        },
                        {
                            id: 'clear-build-cache',
                            name: 'Clear Build Cache',
                            type: 'command',
                            config: { command: 'yarn cache clean' },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 60
                        }
                    ],
                    notificationChannels: ['console', 'file']
                },
                {
                    id: 'typescript-errors-high',
                    name: 'High TypeScript Error Count',
                    description: 'TypeScript errors exceed acceptable threshold',
                    type: 'error',
                    metric: 'typescript_errors',
                    condition: 'greater_than',
                    threshold: 1000,
                    severity: 'error',
                    enabled: true,
                    cooldownMinutes: 30,
                    escalationMinutes: 60,
                    autoResponse: true,
                    responseActions: [
                        {
                            id: 'trigger-error-campaign',
                            name: 'Trigger Error Reduction Campaign',
                            type: 'campaign',
                            config: {
                                campaignType: 'typescript-error-reduction',
                                maxFiles: 20,
                                safetyLevel: 'HIGH'
                            },
                            conditions: ['error_count > 500'],
                            retryCount: 1,
                            timeoutSeconds: 1800
                        }
                    ],
                    notificationChannels: ['console', 'file']
                },
                {
                    id: 'code-quality-low',
                    name: 'Low Code Quality Score',
                    description: 'Code quality score below acceptable threshold',
                    type: 'quality',
                    metric: 'code_quality_score',
                    condition: 'less_than',
                    threshold: 60,
                    severity: 'warning',
                    enabled: true,
                    cooldownMinutes: 60,
                    escalationMinutes: 120,
                    autoResponse: false,
                    responseActions: [
                        {
                            id: 'generate-quality-report',
                            name: 'Generate Quality Report',
                            type: 'script',
                            config: { script: 'generate-quality-report.js' },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 120
                        }
                    ],
                    notificationChannels: ['console', 'file']
                },
                {
                    id: 'memory-usage-high',
                    name: 'High Memory Usage',
                    description: 'Memory usage exceeds safe threshold',
                    type: 'system',
                    metric: 'memory_usage',
                    condition: 'greater_than',
                    threshold: 512 * 1024 * 1024,
                    severity: 'warning',
                    enabled: true,
                    cooldownMinutes: 10,
                    escalationMinutes: 30,
                    autoResponse: true,
                    responseActions: [
                        {
                            id: 'garbage-collect',
                            name: 'Force Garbage Collection',
                            type: 'script',
                            config: { script: 'force-gc.js' },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 30
                        }
                    ],
                    notificationChannels: ['console']
                },
                {
                    id: 'technical-debt-critical',
                    name: 'Critical Technical Debt',
                    description: 'Technical debt score indicates critical issues',
                    type: 'quality',
                    metric: 'technical_debt_score',
                    condition: 'greater_than',
                    threshold: 80,
                    severity: 'critical',
                    enabled: true,
                    cooldownMinutes: 120,
                    escalationMinutes: 240,
                    autoResponse: false,
                    responseActions: [
                        {
                            id: 'schedule-debt-reduction',
                            name: 'Schedule Technical Debt Reduction',
                            type: 'campaign',
                            config: {
                                campaignType: 'technical-debt-reduction',
                                priority: 'high'
                            },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 300
                        }
                    ],
                    notificationChannels: ['console', 'file']
                }
            ];
            this.alertRules = defaultRules;
        }
        if (this.escalationRules.length === 0) {
            const defaultEscalationRules = [
                {
                    id: 'critical-escalation',
                    name: 'Critical Alert Escalation',
                    alertTypes: ['performance', 'error', 'quality', 'system'],
                    severityLevels: ['critical'],
                    escalationDelayMinutes: 30,
                    escalationActions: [
                        {
                            id: 'notify-team',
                            name: 'Notify Development Team',
                            type: 'notification',
                            config: {
                                message: 'Critical alert requires immediate attention',
                                channels: ['console', 'file']
                            },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 30
                        }
                    ],
                    maxEscalations: 3
                },
                {
                    id: 'error-escalation',
                    name: 'Error Alert Escalation',
                    alertTypes: ['error'],
                    severityLevels: ['error'],
                    escalationDelayMinutes: 60,
                    escalationActions: [
                        {
                            id: 'automated-fix-attempt',
                            name: 'Attempt Automated Fix',
                            type: 'campaign',
                            config: {
                                campaignType: 'automated-error-fix',
                                conservative: true
                            },
                            conditions: ['automation_opportunities > 5'],
                            retryCount: 1,
                            timeoutSeconds: 600
                        }
                    ],
                    maxEscalations: 2
                }
            ];
            this.escalationRules = defaultEscalationRules;
        }
    }
    startMonitoring() {
        // Monitor every 2 minutes
        setInterval(() => {
            this.checkAlertConditions();
            this.processEscalations();
            this.cleanupOldAlerts();
            this.saveConfiguration();
        }, 2 * 60 * 1000);
        // Subscribe to data sources
        BuildPerformanceMonitor_1.buildPerformanceMonitor.subscribe((data) => {
            this.evaluatePerformanceAlerts(data);
        });
        ErrorTrackingSystem_1.errorTrackingSystem.subscribe((data) => {
            this.evaluateErrorAlerts(data);
        });
        QualityMetricsService_1.qualityMetricsService.subscribe((data) => {
            this.evaluateQualityAlerts(data);
        });
    }
    checkAlertConditions() {
        for (const rule of this.alertRules) {
            if (!rule.enabled)
                continue;
            // Check cooldown
            const lastAlertTime = this.lastAlertTimes.get(rule.id);
            if (lastAlertTime && (Date.now() - lastAlertTime.getTime()) < rule.cooldownMinutes * 60 * 1000) {
                continue;
            }
            this.evaluateRule(rule);
        }
    }
    evaluateRule(rule) {
        let currentValue;
        let shouldAlert = false;
        // Get current metric value based on rule type
        switch (rule.type) {
            case 'performance':
                currentValue = this.getPerformanceMetric(rule.metric);
                break;
            case 'error':
                currentValue = this.getErrorMetric(rule.metric);
                break;
            case 'quality':
                currentValue = this.getQualityMetric(rule.metric);
                break;
            case 'system':
                currentValue = this.getSystemMetric(rule.metric);
                break;
            default:
                return;
        }
        // Evaluate condition
        switch (rule.condition) {
            case 'greater_than':
                shouldAlert = currentValue > rule.threshold;
                break;
            case 'less_than':
                shouldAlert = currentValue < rule.threshold;
                break;
            case 'equals':
                shouldAlert = currentValue === rule.threshold;
                break;
            case 'not_equals':
                shouldAlert = currentValue !== rule.threshold;
                break;
            case 'percentage_change':
                // This would require historical data comparison
                shouldAlert = false; // Placeholder
                break;
        }
        if (shouldAlert) {
            this.createAlert(rule, currentValue);
        }
    }
    getPerformanceMetric(metric) {
        const summary = BuildPerformanceMonitor_1.buildPerformanceMonitor.getPerformanceSummary();
        switch (metric) {
            case 'build_time':
                return summary.averageBuildTime;
            case 'compilation_time':
                return summary.averageCompilationTime;
            case 'bundle_size':
                return summary.averageBundleSize;
            case 'memory_usage':
                return summary.averageMemoryUsage;
            case 'cache_efficiency':
                return summary.cacheEfficiency;
            case 'performance_score':
                return summary.performanceScore;
            default:
                return 0;
        }
    }
    getErrorMetric(metric) {
        const summary = ErrorTrackingSystem_1.errorTrackingSystem.getErrorSummary();
        switch (metric) {
            case 'typescript_errors':
                return summary.totalActiveErrors;
            case 'linting_violations':
                return summary.totalActiveLintViolations;
            case 'build_failures':
                return summary.totalRecentFailures;
            case 'critical_issues':
                return summary.criticalIssues;
            case 'automation_opportunities':
                return summary.automationOpportunities;
            default:
                return 0;
        }
    }
    getQualityMetric(metric) {
        const qualityMetrics = ErrorTrackingSystem_1.errorTrackingSystem.getCurrentQualityMetrics();
        if (!qualityMetrics)
            return 0;
        switch (metric) {
            case 'code_quality_score':
                return qualityMetrics.codeQualityScore;
            case 'technical_debt_score':
                return qualityMetrics.technicalDebtScore;
            case 'maintainability_index':
                return qualityMetrics.maintainabilityIndex;
            case 'error_rate':
                return qualityMetrics.errorRate;
            case 'warning_rate':
                return qualityMetrics.warningRate;
            default:
                return 0;
        }
    }
    getSystemMetric(metric) {
        switch (metric) {
            case 'memory_usage':
                return process.memoryUsage().heapUsed;
            case 'cpu_usage':
                return process.cpuUsage().user + process.cpuUsage().system;
            case 'uptime':
                return process.uptime();
            default:
                return 0;
        }
    }
    createAlert(rule, currentValue) {
        const alert = {
            id: `alert-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
            type: rule.type,
            severity: rule.severity,
            title: rule.name,
            description: `${rule.description}. Current value: ${currentValue}, Threshold: ${rule.threshold}`,
            threshold: rule.threshold,
            currentValue,
            timestamp: new Date(),
            acknowledged: false,
            resolved: false,
            escalated: false,
            responseActions: rule.responseActions.map(a => a.name),
            metadata: {
                ruleId: rule.id,
                metric: rule.metric,
                condition: rule.condition
            }
        };
        this.alerts.push(alert);
        this.lastAlertTimes.set(rule.id, new Date());
        // Log alert
        console.log(`[ALERT ${alert.severity.toUpperCase()}] ${alert.title}: ${alert.description}`);
        // Notify subscribers
        this.notifySubscribers(alert);
        // Execute auto-response if enabled
        if (rule.autoResponse) {
            this.executeAlertActions(alert, rule.responseActions);
        }
        // Send notifications
        this.sendNotifications(alert, rule.notificationChannels);
    }
    async executeAlertActions(alert, actions) {
        for (const action of actions) {
            // Check conditions
            if (!this.evaluateActionConditions(action.conditions, alert)) {
                continue;
            }
            const response = {
                alertId: alert.id,
                actionId: action.id,
                status: 'pending',
                startTime: new Date(),
                retryCount: 0
            };
            this.alertResponses.push(response);
            try {
                response.status = 'running';
                const result = await this.executeAction(action);
                response.status = 'completed';
                response.endTime = new Date();
                response.result = result;
                console.log(`[Alert Response] Successfully executed ${action.name} for alert ${alert.id}`);
            }
            catch (error) {
                response.status = 'failed';
                response.endTime = new Date();
                response.error = error.message;
                console.error(`[Alert Response] Failed to execute ${action.name} for alert ${alert.id}:`, error);
                // Retry if configured
                if (response.retryCount < action.retryCount) {
                    response.retryCount++;
                    setTimeout(() => {
                        this.executeAlertActions(alert, [action]);
                    }, 30000); // Retry after 30 seconds
                }
            }
        }
    }
    evaluateActionConditions(conditions, alert) {
        if (conditions.length === 0)
            return true;
        for (const condition of conditions) {
            if (!this.evaluateCondition(condition, alert)) {
                return false;
            }
        }
        return true;
    }
    evaluateCondition(condition, alert) {
        // Simple condition evaluation
        // In a real implementation, this would be more sophisticated
        if (condition.includes('error_count >')) {
            const threshold = parseInt(condition.split('>')[1].trim());
            return alert.currentValue > threshold;
        }
        if (condition.includes('automation_opportunities >')) {
            const threshold = parseInt(condition.split('>')[1].trim());
            const errorSummary = ErrorTrackingSystem_1.errorTrackingSystem.getErrorSummary();
            return errorSummary.automationOpportunities > threshold;
        }
        return true;
    }
    async executeAction(action) {
        const timeout = new Promise((_, reject) => {
            setTimeout(() => reject(new Error('Action timeout')), action.timeoutSeconds * 1000);
        });
        const execution = this.performAction(action);
        return Promise.race([execution, timeout]);
    }
    async performAction(action) {
        switch (action.type) {
            case 'script':
                return this.executeScript(action.config.script);
            case 'command':
                return this.executeCommand(action.config.command);
            case 'campaign':
                return this.triggerCampaign(action.config);
            case 'api_call':
                return this.makeApiCall(action.config);
            case 'notification':
                return this.sendNotification(action.config);
            default:
                throw new Error(`Unknown action type: ${action.type}`);
        }
    }
    async executeScript(scriptName) {
        // This would execute a script file
        // For now, return a placeholder
        console.log(`[Alert Action] Executing script: ${scriptName}`);
        return { success: true, message: `Script ${scriptName} executed` };
    }
    async executeCommand(command) {
        // This would execute a shell command
        // For now, return a placeholder
        console.log(`[Alert Action] Executing command: ${command}`);
        return { success: true, message: `Command ${command} executed` };
    }
    async triggerCampaign(config) {
        // This would integrate with the campaign system
        // For now, return a placeholder
        console.log(`[Alert Action] Triggering campaign: ${config.campaignType}`);
        return { success: true, message: `Campaign ${config.campaignType} triggered` };
    }
    async makeApiCall(config) {
        // This would make an HTTP API call
        // For now, return a placeholder
        console.log(`[Alert Action] Making API call to: ${config.url}`);
        return { success: true, message: `API call to ${config.url} completed` };
    }
    async sendNotification(config) {
        console.log(`[Alert Notification] ${config.message}`);
        return { success: true, message: 'Notification sent' };
    }
    sendNotifications(alert, channels) {
        for (const channel of channels) {
            switch (channel) {
                case 'console':
                    console.log(`[NOTIFICATION] ${alert.title}: ${alert.description}`);
                    break;
                case 'file':
                    this.writeAlertToFile(alert);
                    break;
                default:
                    console.log(`[NOTIFICATION] Unknown channel: ${channel}`);
            }
        }
    }
    writeAlertToFile(alert) {
        try {
            const alertsDir = path_1.default.join(process.cwd(), '.kiro', 'alerts');
            if (!fs_1.default.existsSync(alertsDir)) {
                fs_1.default.mkdirSync(alertsDir, { recursive: true });
            }
            const alertFile = path_1.default.join(alertsDir, 'alerts.log');
            const alertLine = `${alert.timestamp.toISOString()} [${alert.severity.toUpperCase()}] ${alert.title}: ${alert.description}\n`;
            fs_1.default.appendFileSync(alertFile, alertLine);
        }
        catch (error) {
            console.error('[Alerting System] Failed to write alert to file:', error);
        }
    }
    evaluatePerformanceAlerts(data) {
        // This would be called when performance data is updated
        // The main monitoring loop handles rule evaluation
    }
    evaluateErrorAlerts(data) {
        // This would be called when error data is updated
        // The main monitoring loop handles rule evaluation
    }
    evaluateQualityAlerts(data) {
        // This would be called when quality data is updated
        // The main monitoring loop handles rule evaluation
    }
    processEscalations() {
        const now = new Date();
        for (const alert of this.alerts) {
            if (alert.resolved || alert.escalated)
                continue;
            const alertAge = now.getTime() - alert.timestamp.getTime();
            for (const escalationRule of this.escalationRules) {
                if (!escalationRule.alertTypes.includes(alert.type))
                    continue;
                if (!escalationRule.severityLevels.includes(alert.severity))
                    continue;
                const escalationDelay = escalationRule.escalationDelayMinutes * 60 * 1000;
                if (alertAge >= escalationDelay) {
                    this.escalateAlert(alert, escalationRule);
                    break;
                }
            }
        }
    }
    escalateAlert(alert, escalationRule) {
        alert.escalated = true;
        alert.escalatedAt = new Date();
        console.log(`[ESCALATION] Alert ${alert.id} escalated using rule ${escalationRule.name}`);
        // Execute escalation actions
        this.executeAlertActions(alert, escalationRule.escalationActions);
    }
    cleanupOldAlerts() {
        const cutoffTime = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000); // 30 days
        this.alerts = this.alerts.filter(alert => alert.timestamp >= cutoffTime);
        this.alertResponses = this.alertResponses.filter(response => response.startTime >= cutoffTime);
    }
    notifySubscribers(alert) {
        this.subscribers.forEach(callback => {
            try {
                callback(alert);
            }
            catch (error) {
                console.error('[Alerting System] Subscriber error:', error);
            }
        });
    }
    // Public API methods
    subscribe(callback) {
        this.subscribers.add(callback);
        return () => this.subscribers.delete(callback);
    }
    getAlerts(options) {
        let filtered = this.alerts;
        if (options === null || options === void 0 ? void 0 : options.type) {
            filtered = filtered.filter(a => a.type === options.type);
        }
        if (options === null || options === void 0 ? void 0 : options.severity) {
            filtered = filtered.filter(a => a.severity === options.severity);
        }
        if ((options === null || options === void 0 ? void 0 : options.resolved) !== undefined) {
            filtered = filtered.filter(a => a.resolved === options.resolved);
        }
        // Sort by timestamp (newest first)
        filtered.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
        if (options === null || options === void 0 ? void 0 : options.limit) {
            filtered = filtered.slice(0, options.limit);
        }
        return filtered;
    }
    getAlertRules() {
        return this.alertRules;
    }
    addAlertRule(rule) {
        const id = `rule-${Date.now()}`;
        const newRule = { ...rule, id };
        this.alertRules.push(newRule);
        this.saveConfiguration();
        return id;
    }
    updateAlertRule(id, updates) {
        const ruleIndex = this.alertRules.findIndex(r => r.id === id);
        if (ruleIndex === -1)
            return false;
        this.alertRules[ruleIndex] = { ...this.alertRules[ruleIndex], ...updates };
        this.saveConfiguration();
        return true;
    }
    deleteAlertRule(id) {
        const ruleIndex = this.alertRules.findIndex(r => r.id === id);
        if (ruleIndex === -1)
            return false;
        this.alertRules.splice(ruleIndex, 1);
        this.saveConfiguration();
        return true;
    }
    acknowledgeAlert(alertId) {
        const alert = this.alerts.find(a => a.id === alertId);
        if (!alert)
            return false;
        alert.acknowledged = true;
        this.saveConfiguration();
        return true;
    }
    resolveAlert(alertId) {
        const alert = this.alerts.find(a => a.id === alertId);
        if (!alert)
            return false;
        alert.resolved = true;
        alert.resolvedAt = new Date();
        this.saveConfiguration();
        return true;
    }
    getAlertResponses(alertId) {
        if (alertId) {
            return this.alertResponses.filter(r => r.alertId === alertId);
        }
        return this.alertResponses;
    }
    getAlertSummary() {
        const now = new Date();
        const last24Hours = new Date(now.getTime() - 24 * 60 * 60 * 1000);
        const recentAlerts = this.alerts.filter(a => a.timestamp >= last24Hours);
        return {
            totalAlerts: this.alerts.length,
            recentAlerts: recentAlerts.length,
            unresolvedAlerts: this.alerts.filter(a => !a.resolved).length,
            criticalAlerts: this.alerts.filter(a => a.severity === 'critical' && !a.resolved).length,
            escalatedAlerts: this.alerts.filter(a => a.escalated && !a.resolved).length,
            alertsByType: this.getAlertCountsByType(),
            alertsBySeverity: this.getAlertCountsBySeverity(),
            responseSuccessRate: this.calculateResponseSuccessRate(),
            averageResolutionTime: this.calculateAverageResolutionTime()
        };
    }
    getAlertCountsByType() {
        const counts = {};
        for (const alert of this.alerts.filter(a => !a.resolved)) {
            counts[alert.type] = (counts[alert.type] || 0) + 1;
        }
        return counts;
    }
    getAlertCountsBySeverity() {
        const counts = {};
        for (const alert of this.alerts.filter(a => !a.resolved)) {
            counts[alert.severity] = (counts[alert.severity] || 0) + 1;
        }
        return counts;
    }
    calculateResponseSuccessRate() {
        const totalResponses = this.alertResponses.length;
        if (totalResponses === 0)
            return 0;
        const successfulResponses = this.alertResponses.filter(r => r.status === 'completed').length;
        return (successfulResponses / totalResponses) * 100;
    }
    calculateAverageResolutionTime() {
        const resolvedAlerts = this.alerts.filter(a => a.resolved && a.resolvedAt);
        if (resolvedAlerts.length === 0)
            return 0;
        const totalResolutionTime = resolvedAlerts.reduce((sum, alert) => {
            return sum + (alert.resolvedAt.getTime() - alert.timestamp.getTime());
        }, 0);
        return totalResolutionTime / resolvedAlerts.length / (60 * 1000); // Return in minutes
    }
    testAlert(ruleId) {
        const rule = this.alertRules.find(r => r.id === ruleId);
        if (!rule)
            return false;
        // Create a test alert
        this.createAlert(rule, rule.threshold + 1);
        return true;
    }
    reset() {
        this.alerts = [];
        this.alertResponses = [];
        this.lastAlertTimes.clear();
        this.saveConfiguration();
    }
}
exports.alertingSystem = new AlertingSystem();
exports.default = AlertingSystem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9BbGVydGluZ1N5c3RlbS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSx1RUFBb0U7QUFDcEUsK0RBQTREO0FBQzVELG1FQUFnRTtBQUNoRSw0Q0FBb0I7QUFDcEIsZ0RBQXdCO0FBb0V4QixNQUFNLGNBQWM7SUFRbEI7UUFQUSxXQUFNLEdBQVksRUFBRSxDQUFDO1FBQ3JCLGVBQVUsR0FBZ0IsRUFBRSxDQUFDO1FBQzdCLG9CQUFlLEdBQXFCLEVBQUUsQ0FBQztRQUN2QyxtQkFBYyxHQUFvQixFQUFFLENBQUM7UUFDckMsZ0JBQVcsR0FBZ0MsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNyRCxtQkFBYyxHQUFzQixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBR3BELElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRU8saUJBQWlCO1FBQ3ZCLElBQUk7WUFDRixNQUFNLFVBQVUsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLHNCQUFzQixDQUFDLENBQUM7WUFDekYsSUFBSSxZQUFFLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFO2dCQUM3QixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQUUsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQy9ELElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLENBQUM7Z0JBQzFDLElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUM7Z0JBQ3BELElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUM7Z0JBQ2xDLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsSUFBSSxFQUFFLENBQUM7YUFDbkQ7U0FDRjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsT0FBTyxDQUFDLElBQUksQ0FBQyxpREFBaUQsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUN4RTtJQUNILENBQUM7SUFFTyxpQkFBaUI7UUFDdkIsSUFBSTtZQUNGLE1BQU0sV0FBVyxHQUFHLGNBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNsRSxJQUFJLENBQUMsWUFBRSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRTtnQkFDL0IsWUFBRSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzthQUNoRDtZQUVELE1BQU0sVUFBVSxHQUFHLGNBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLHNCQUFzQixDQUFDLENBQUM7WUFDbEUsTUFBTSxNQUFNLEdBQUc7Z0JBQ2IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO2dCQUMzQixlQUFlLEVBQUUsSUFBSSxDQUFDLGVBQWU7Z0JBQ3JDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQztnQkFDL0IsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsMEJBQTBCO2FBQzNFLENBQUM7WUFFRixZQUFFLENBQUMsYUFBYSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvRDtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsT0FBTyxDQUFDLEtBQUssQ0FBQyxpREFBaUQsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUN6RTtJQUNILENBQUM7SUFFTyxzQkFBc0I7UUFDNUIsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDaEMsTUFBTSxZQUFZLEdBQWdCO2dCQUNoQztvQkFDRSxFQUFFLEVBQUUscUJBQXFCO29CQUN6QixJQUFJLEVBQUUscUJBQXFCO29CQUMzQixXQUFXLEVBQUUsdUNBQXVDO29CQUNwRCxJQUFJLEVBQUUsYUFBYTtvQkFDbkIsTUFBTSxFQUFFLFlBQVk7b0JBQ3BCLFNBQVMsRUFBRSxjQUFjO29CQUN6QixTQUFTLEVBQUUsTUFBTTtvQkFDakIsUUFBUSxFQUFFLFVBQVU7b0JBQ3BCLE9BQU8sRUFBRSxJQUFJO29CQUNiLGVBQWUsRUFBRSxFQUFFO29CQUNuQixpQkFBaUIsRUFBRSxFQUFFO29CQUNyQixZQUFZLEVBQUUsSUFBSTtvQkFDbEIsZUFBZSxFQUFFO3dCQUNmOzRCQUNFLEVBQUUsRUFBRSwyQkFBMkI7NEJBQy9CLElBQUksRUFBRSwyQkFBMkI7NEJBQ2pDLElBQUksRUFBRSxRQUFROzRCQUNkLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSw4QkFBOEIsRUFBRTs0QkFDbEQsVUFBVSxFQUFFLEVBQUU7NEJBQ2QsVUFBVSxFQUFFLENBQUM7NEJBQ2IsY0FBYyxFQUFFLEdBQUc7eUJBQ3BCO3dCQUNEOzRCQUNFLEVBQUUsRUFBRSxtQkFBbUI7NEJBQ3ZCLElBQUksRUFBRSxtQkFBbUI7NEJBQ3pCLElBQUksRUFBRSxTQUFTOzRCQUNmLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRTs0QkFDdkMsVUFBVSxFQUFFLEVBQUU7NEJBQ2QsVUFBVSxFQUFFLENBQUM7NEJBQ2IsY0FBYyxFQUFFLEVBQUU7eUJBQ25CO3FCQUNGO29CQUNELG9CQUFvQixFQUFFLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQztpQkFDMUM7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLHdCQUF3QjtvQkFDNUIsSUFBSSxFQUFFLDZCQUE2QjtvQkFDbkMsV0FBVyxFQUFFLCtDQUErQztvQkFDNUQsSUFBSSxFQUFFLE9BQU87b0JBQ2IsTUFBTSxFQUFFLG1CQUFtQjtvQkFDM0IsU0FBUyxFQUFFLGNBQWM7b0JBQ3pCLFNBQVMsRUFBRSxJQUFJO29CQUNmLFFBQVEsRUFBRSxPQUFPO29CQUNqQixPQUFPLEVBQUUsSUFBSTtvQkFDYixlQUFlLEVBQUUsRUFBRTtvQkFDbkIsaUJBQWlCLEVBQUUsRUFBRTtvQkFDckIsWUFBWSxFQUFFLElBQUk7b0JBQ2xCLGVBQWUsRUFBRTt3QkFDZjs0QkFDRSxFQUFFLEVBQUUsd0JBQXdCOzRCQUM1QixJQUFJLEVBQUUsa0NBQWtDOzRCQUN4QyxJQUFJLEVBQUUsVUFBVTs0QkFDaEIsTUFBTSxFQUFFO2dDQUNOLFlBQVksRUFBRSw0QkFBNEI7Z0NBQzFDLFFBQVEsRUFBRSxFQUFFO2dDQUNaLFdBQVcsRUFBRSxNQUFNOzZCQUNwQjs0QkFDRCxVQUFVLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQzs0QkFDakMsVUFBVSxFQUFFLENBQUM7NEJBQ2IsY0FBYyxFQUFFLElBQUk7eUJBQ3JCO3FCQUNGO29CQUNELG9CQUFvQixFQUFFLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQztpQkFDMUM7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLGtCQUFrQjtvQkFDdEIsSUFBSSxFQUFFLHdCQUF3QjtvQkFDOUIsV0FBVyxFQUFFLCtDQUErQztvQkFDNUQsSUFBSSxFQUFFLFNBQVM7b0JBQ2YsTUFBTSxFQUFFLG9CQUFvQjtvQkFDNUIsU0FBUyxFQUFFLFdBQVc7b0JBQ3RCLFNBQVMsRUFBRSxFQUFFO29CQUNiLFFBQVEsRUFBRSxTQUFTO29CQUNuQixPQUFPLEVBQUUsSUFBSTtvQkFDYixlQUFlLEVBQUUsRUFBRTtvQkFDbkIsaUJBQWlCLEVBQUUsR0FBRztvQkFDdEIsWUFBWSxFQUFFLEtBQUs7b0JBQ25CLGVBQWUsRUFBRTt3QkFDZjs0QkFDRSxFQUFFLEVBQUUseUJBQXlCOzRCQUM3QixJQUFJLEVBQUUseUJBQXlCOzRCQUMvQixJQUFJLEVBQUUsUUFBUTs0QkFDZCxNQUFNLEVBQUUsRUFBRSxNQUFNLEVBQUUsNEJBQTRCLEVBQUU7NEJBQ2hELFVBQVUsRUFBRSxFQUFFOzRCQUNkLFVBQVUsRUFBRSxDQUFDOzRCQUNiLGNBQWMsRUFBRSxHQUFHO3lCQUNwQjtxQkFDRjtvQkFDRCxvQkFBb0IsRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7aUJBQzFDO2dCQUNEO29CQUNFLEVBQUUsRUFBRSxtQkFBbUI7b0JBQ3ZCLElBQUksRUFBRSxtQkFBbUI7b0JBQ3pCLFdBQVcsRUFBRSxxQ0FBcUM7b0JBQ2xELElBQUksRUFBRSxRQUFRO29CQUNkLE1BQU0sRUFBRSxjQUFjO29CQUN0QixTQUFTLEVBQUUsY0FBYztvQkFDekIsU0FBUyxFQUFFLEdBQUcsR0FBRyxJQUFJLEdBQUcsSUFBSTtvQkFDNUIsUUFBUSxFQUFFLFNBQVM7b0JBQ25CLE9BQU8sRUFBRSxJQUFJO29CQUNiLGVBQWUsRUFBRSxFQUFFO29CQUNuQixpQkFBaUIsRUFBRSxFQUFFO29CQUNyQixZQUFZLEVBQUUsSUFBSTtvQkFDbEIsZUFBZSxFQUFFO3dCQUNmOzRCQUNFLEVBQUUsRUFBRSxpQkFBaUI7NEJBQ3JCLElBQUksRUFBRSwwQkFBMEI7NEJBQ2hDLElBQUksRUFBRSxRQUFROzRCQUNkLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUU7NEJBQ2pDLFVBQVUsRUFBRSxFQUFFOzRCQUNkLFVBQVUsRUFBRSxDQUFDOzRCQUNiLGNBQWMsRUFBRSxFQUFFO3lCQUNuQjtxQkFDRjtvQkFDRCxvQkFBb0IsRUFBRSxDQUFDLFNBQVMsQ0FBQztpQkFDbEM7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLHlCQUF5QjtvQkFDN0IsSUFBSSxFQUFFLHlCQUF5QjtvQkFDL0IsV0FBVyxFQUFFLGdEQUFnRDtvQkFDN0QsSUFBSSxFQUFFLFNBQVM7b0JBQ2YsTUFBTSxFQUFFLHNCQUFzQjtvQkFDOUIsU0FBUyxFQUFFLGNBQWM7b0JBQ3pCLFNBQVMsRUFBRSxFQUFFO29CQUNiLFFBQVEsRUFBRSxVQUFVO29CQUNwQixPQUFPLEVBQUUsSUFBSTtvQkFDYixlQUFlLEVBQUUsR0FBRztvQkFDcEIsaUJBQWlCLEVBQUUsR0FBRztvQkFDdEIsWUFBWSxFQUFFLEtBQUs7b0JBQ25CLGVBQWUsRUFBRTt3QkFDZjs0QkFDRSxFQUFFLEVBQUUseUJBQXlCOzRCQUM3QixJQUFJLEVBQUUsbUNBQW1DOzRCQUN6QyxJQUFJLEVBQUUsVUFBVTs0QkFDaEIsTUFBTSxFQUFFO2dDQUNOLFlBQVksRUFBRSwwQkFBMEI7Z0NBQ3hDLFFBQVEsRUFBRSxNQUFNOzZCQUNqQjs0QkFDRCxVQUFVLEVBQUUsRUFBRTs0QkFDZCxVQUFVLEVBQUUsQ0FBQzs0QkFDYixjQUFjLEVBQUUsR0FBRzt5QkFDcEI7cUJBQ0Y7b0JBQ0Qsb0JBQW9CLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDO2lCQUMxQzthQUNGLENBQUM7WUFFRixJQUFJLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQztTQUNoQztRQUVELElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ3JDLE1BQU0sc0JBQXNCLEdBQXFCO2dCQUMvQztvQkFDRSxFQUFFLEVBQUUscUJBQXFCO29CQUN6QixJQUFJLEVBQUUsMkJBQTJCO29CQUNqQyxVQUFVLEVBQUUsQ0FBQyxhQUFhLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUM7b0JBQ3pELGNBQWMsRUFBRSxDQUFDLFVBQVUsQ0FBQztvQkFDNUIsc0JBQXNCLEVBQUUsRUFBRTtvQkFDMUIsaUJBQWlCLEVBQUU7d0JBQ2pCOzRCQUNFLEVBQUUsRUFBRSxhQUFhOzRCQUNqQixJQUFJLEVBQUUseUJBQXlCOzRCQUMvQixJQUFJLEVBQUUsY0FBYzs0QkFDcEIsTUFBTSxFQUFFO2dDQUNOLE9BQU8sRUFBRSw2Q0FBNkM7Z0NBQ3RELFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7NkJBQzlCOzRCQUNELFVBQVUsRUFBRSxFQUFFOzRCQUNkLFVBQVUsRUFBRSxDQUFDOzRCQUNiLGNBQWMsRUFBRSxFQUFFO3lCQUNuQjtxQkFDRjtvQkFDRCxjQUFjLEVBQUUsQ0FBQztpQkFDbEI7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLGtCQUFrQjtvQkFDdEIsSUFBSSxFQUFFLHdCQUF3QjtvQkFDOUIsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDO29CQUNyQixjQUFjLEVBQUUsQ0FBQyxPQUFPLENBQUM7b0JBQ3pCLHNCQUFzQixFQUFFLEVBQUU7b0JBQzFCLGlCQUFpQixFQUFFO3dCQUNqQjs0QkFDRSxFQUFFLEVBQUUsdUJBQXVCOzRCQUMzQixJQUFJLEVBQUUsdUJBQXVCOzRCQUM3QixJQUFJLEVBQUUsVUFBVTs0QkFDaEIsTUFBTSxFQUFFO2dDQUNOLFlBQVksRUFBRSxxQkFBcUI7Z0NBQ25DLFlBQVksRUFBRSxJQUFJOzZCQUNuQjs0QkFDRCxVQUFVLEVBQUUsQ0FBQyw4QkFBOEIsQ0FBQzs0QkFDNUMsVUFBVSxFQUFFLENBQUM7NEJBQ2IsY0FBYyxFQUFFLEdBQUc7eUJBQ3BCO3FCQUNGO29CQUNELGNBQWMsRUFBRSxDQUFDO2lCQUNsQjthQUNGLENBQUM7WUFFRixJQUFJLENBQUMsZUFBZSxHQUFHLHNCQUFzQixDQUFDO1NBQy9DO0lBQ0gsQ0FBQztJQUVPLGVBQWU7UUFDckIsMEJBQTBCO1FBQzFCLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFDZixJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztZQUMxQixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN4QixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUMzQixDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUVsQiw0QkFBNEI7UUFDNUIsaURBQXVCLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDekMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO1FBRUgseUNBQW1CLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDckMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsNkNBQXFCLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDdkMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLG9CQUFvQjtRQUMxQixLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO2dCQUFFLFNBQVM7WUFFNUIsaUJBQWlCO1lBQ2pCLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN2RCxJQUFJLGFBQWEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUU7Z0JBQzlGLFNBQVM7YUFDVjtZQUVELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBRU8sWUFBWSxDQUFDLElBQWU7UUFDbEMsSUFBSSxZQUFvQixDQUFDO1FBQ3pCLElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQztRQUV4Qiw4Q0FBOEM7UUFDOUMsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssYUFBYTtnQkFDaEIsWUFBWSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3RELE1BQU07WUFDUixLQUFLLE9BQU87Z0JBQ1YsWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNoRCxNQUFNO1lBQ1IsS0FBSyxTQUFTO2dCQUNaLFlBQVksR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNsRCxNQUFNO1lBQ1IsS0FBSyxRQUFRO2dCQUNYLFlBQVksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDakQsTUFBTTtZQUNSO2dCQUNFLE9BQU87U0FDVjtRQUVELHFCQUFxQjtRQUNyQixRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDdEIsS0FBSyxjQUFjO2dCQUNqQixXQUFXLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQzVDLE1BQU07WUFDUixLQUFLLFdBQVc7Z0JBQ2QsV0FBVyxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUM1QyxNQUFNO1lBQ1IsS0FBSyxRQUFRO2dCQUNYLFdBQVcsR0FBRyxZQUFZLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDOUMsTUFBTTtZQUNSLEtBQUssWUFBWTtnQkFDZixXQUFXLEdBQUcsWUFBWSxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQzlDLE1BQU07WUFDUixLQUFLLG1CQUFtQjtnQkFDdEIsZ0RBQWdEO2dCQUNoRCxXQUFXLEdBQUcsS0FBSyxDQUFDLENBQUMsY0FBYztnQkFDbkMsTUFBTTtTQUNUO1FBRUQsSUFBSSxXQUFXLEVBQUU7WUFDZixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztTQUN0QztJQUNILENBQUM7SUFFTyxvQkFBb0IsQ0FBQyxNQUFjO1FBQ3pDLE1BQU0sT0FBTyxHQUFHLGlEQUF1QixDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFFaEUsUUFBUSxNQUFNLEVBQUU7WUFDZCxLQUFLLFlBQVk7Z0JBQ2YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7WUFDbEMsS0FBSyxrQkFBa0I7Z0JBQ3JCLE9BQU8sT0FBTyxDQUFDLHNCQUFzQixDQUFDO1lBQ3hDLEtBQUssYUFBYTtnQkFDaEIsT0FBTyxPQUFPLENBQUMsaUJBQWlCLENBQUM7WUFDbkMsS0FBSyxjQUFjO2dCQUNqQixPQUFPLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztZQUNwQyxLQUFLLGtCQUFrQjtnQkFDckIsT0FBTyxPQUFPLENBQUMsZUFBZSxDQUFDO1lBQ2pDLEtBQUssbUJBQW1CO2dCQUN0QixPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztZQUNsQztnQkFDRSxPQUFPLENBQUMsQ0FBQztTQUNaO0lBQ0gsQ0FBQztJQUVPLGNBQWMsQ0FBQyxNQUFjO1FBQ25DLE1BQU0sT0FBTyxHQUFHLHlDQUFtQixDQUFDLGVBQWUsRUFBRSxDQUFDO1FBRXRELFFBQVEsTUFBTSxFQUFFO1lBQ2QsS0FBSyxtQkFBbUI7Z0JBQ3RCLE9BQU8sT0FBTyxDQUFDLGlCQUFpQixDQUFDO1lBQ25DLEtBQUssb0JBQW9CO2dCQUN2QixPQUFPLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztZQUMzQyxLQUFLLGdCQUFnQjtnQkFDbkIsT0FBTyxPQUFPLENBQUMsbUJBQW1CLENBQUM7WUFDckMsS0FBSyxpQkFBaUI7Z0JBQ3BCLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQztZQUNoQyxLQUFLLDBCQUEwQjtnQkFDN0IsT0FBTyxPQUFPLENBQUMsdUJBQXVCLENBQUM7WUFDekM7Z0JBQ0UsT0FBTyxDQUFDLENBQUM7U0FDWjtJQUNILENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxNQUFjO1FBQ3JDLE1BQU0sY0FBYyxHQUFHLHlDQUFtQixDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFFdEUsSUFBSSxDQUFDLGNBQWM7WUFBRSxPQUFPLENBQUMsQ0FBQztRQUU5QixRQUFRLE1BQU0sRUFBRTtZQUNkLEtBQUssb0JBQW9CO2dCQUN2QixPQUFPLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQztZQUN6QyxLQUFLLHNCQUFzQjtnQkFDekIsT0FBTyxjQUFjLENBQUMsa0JBQWtCLENBQUM7WUFDM0MsS0FBSyx1QkFBdUI7Z0JBQzFCLE9BQU8sY0FBYyxDQUFDLG9CQUFvQixDQUFDO1lBQzdDLEtBQUssWUFBWTtnQkFDZixPQUFPLGNBQWMsQ0FBQyxTQUFTLENBQUM7WUFDbEMsS0FBSyxjQUFjO2dCQUNqQixPQUFPLGNBQWMsQ0FBQyxXQUFXLENBQUM7WUFDcEM7Z0JBQ0UsT0FBTyxDQUFDLENBQUM7U0FDWjtJQUNILENBQUM7SUFFTyxlQUFlLENBQUMsTUFBYztRQUNwQyxRQUFRLE1BQU0sRUFBRTtZQUNkLEtBQUssY0FBYztnQkFDakIsT0FBTyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDO1lBQ3hDLEtBQUssV0FBVztnQkFDZCxPQUFPLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLE1BQU0sQ0FBQztZQUM3RCxLQUFLLFFBQVE7Z0JBQ1gsT0FBTyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDMUI7Z0JBQ0UsT0FBTyxDQUFDLENBQUM7U0FDWjtJQUNILENBQUM7SUFFTyxXQUFXLENBQUMsSUFBZSxFQUFFLFlBQW9CO1FBQ3ZELE1BQU0sS0FBSyxHQUFVO1lBQ25CLEVBQUUsRUFBRSxTQUFTLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDcEUsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ2YsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3ZCLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNoQixXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxvQkFBb0IsWUFBWSxnQkFBZ0IsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNoRyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7WUFDekIsWUFBWTtZQUNaLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtZQUNyQixZQUFZLEVBQUUsS0FBSztZQUNuQixRQUFRLEVBQUUsS0FBSztZQUNmLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLGVBQWUsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDdEQsUUFBUSxFQUFFO2dCQUNSLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07Z0JBQ25CLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUzthQUMxQjtTQUNGLENBQUM7UUFFRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztRQUU3QyxZQUFZO1FBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEtBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEtBQUssS0FBSyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztRQUU1RixxQkFBcUI7UUFDckIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTlCLG1DQUFtQztRQUNuQyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDckIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDdkQ7UUFFRCxxQkFBcUI7UUFDckIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBRU8sS0FBSyxDQUFDLG1CQUFtQixDQUFDLEtBQVksRUFBRSxPQUFzQjtRQUNwRSxLQUFLLE1BQU0sTUFBTSxJQUFJLE9BQU8sRUFBRTtZQUM1QixtQkFBbUI7WUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxFQUFFO2dCQUM1RCxTQUFTO2FBQ1Y7WUFFRCxNQUFNLFFBQVEsR0FBa0I7Z0JBQzlCLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRTtnQkFDakIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO2dCQUNuQixNQUFNLEVBQUUsU0FBUztnQkFDakIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2dCQUNyQixVQUFVLEVBQUUsQ0FBQzthQUNkLENBQUM7WUFFRixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUVuQyxJQUFJO2dCQUNGLFFBQVEsQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO2dCQUM1QixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBRWhELFFBQVEsQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDO2dCQUM5QixRQUFRLENBQUMsT0FBTyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7Z0JBQzlCLFFBQVEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO2dCQUV6QixPQUFPLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxNQUFNLENBQUMsSUFBSSxjQUFjLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQzVGO1lBQUMsT0FBTyxLQUFLLEVBQUU7Z0JBQ2QsUUFBUSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUM7Z0JBQzNCLFFBQVEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztnQkFDOUIsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO2dCQUUvQixPQUFPLENBQUMsS0FBSyxDQUFDLHNDQUFzQyxNQUFNLENBQUMsSUFBSSxjQUFjLEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFFakcsc0JBQXNCO2dCQUN0QixJQUFJLFFBQVEsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsRUFBRTtvQkFDM0MsUUFBUSxDQUFDLFVBQVUsRUFBRSxDQUFDO29CQUN0QixVQUFVLENBQUMsR0FBRyxFQUFFO3dCQUNkLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUM1QyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyx5QkFBeUI7aUJBQ3JDO2FBQ0Y7U0FDRjtJQUNILENBQUM7SUFFTyx3QkFBd0IsQ0FBQyxVQUFvQixFQUFFLEtBQVk7UUFDakUsSUFBSSxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUM7WUFBRSxPQUFPLElBQUksQ0FBQztRQUV6QyxLQUFLLE1BQU0sU0FBUyxJQUFJLFVBQVUsRUFBRTtZQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsRUFBRTtnQkFDN0MsT0FBTyxLQUFLLENBQUM7YUFDZDtTQUNGO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRU8saUJBQWlCLENBQUMsU0FBaUIsRUFBRSxLQUFZO1FBQ3ZELDhCQUE4QjtRQUM5Qiw2REFBNkQ7UUFFN0QsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQ3ZDLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDM0QsT0FBTyxLQUFLLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztTQUN2QztRQUVELElBQUksU0FBUyxDQUFDLFFBQVEsQ0FBQyw0QkFBNEIsQ0FBQyxFQUFFO1lBQ3BELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFDM0QsTUFBTSxZQUFZLEdBQUcseUNBQW1CLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDM0QsT0FBTyxZQUFZLENBQUMsdUJBQXVCLEdBQUcsU0FBUyxDQUFDO1NBQ3pEO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFtQjtRQUM3QyxNQUFNLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUN4QyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3RGLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU3QyxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFtQjtRQUM3QyxRQUFRLE1BQU0sQ0FBQyxJQUFJLEVBQUU7WUFDbkIsS0FBSyxRQUFRO2dCQUNYLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2xELEtBQUssU0FBUztnQkFDWixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNwRCxLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3QyxLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN6QyxLQUFLLGNBQWM7Z0JBQ2pCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM5QztnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztTQUMxRDtJQUNILENBQUM7SUFFTyxLQUFLLENBQUMsYUFBYSxDQUFDLFVBQWtCO1FBQzVDLG1DQUFtQztRQUNuQyxnQ0FBZ0M7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUM5RCxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsVUFBVSxVQUFVLFdBQVcsRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFTyxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQWU7UUFDMUMscUNBQXFDO1FBQ3JDLGdDQUFnQztRQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLHFDQUFxQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQzVELE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxXQUFXLE9BQU8sV0FBVyxFQUFFLENBQUM7SUFDbkUsQ0FBQztJQUVPLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBVztRQUN2QyxnREFBZ0Q7UUFDaEQsZ0NBQWdDO1FBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO1FBQzFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLE1BQU0sQ0FBQyxZQUFZLFlBQVksRUFBRSxDQUFDO0lBQ2pGLENBQUM7SUFFTyxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQVc7UUFDbkMsbUNBQW1DO1FBQ25DLGdDQUFnQztRQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLHNDQUFzQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUNoRSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsZUFBZSxNQUFNLENBQUMsR0FBRyxZQUFZLEVBQUUsQ0FBQztJQUMzRSxDQUFDO0lBRU8sS0FBSyxDQUFDLGdCQUFnQixDQUFDLE1BQVc7UUFDeEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDdEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLENBQUM7SUFDekQsQ0FBQztJQUVPLGlCQUFpQixDQUFDLEtBQVksRUFBRSxRQUFrQjtRQUN4RCxLQUFLLE1BQU0sT0FBTyxJQUFJLFFBQVEsRUFBRTtZQUM5QixRQUFRLE9BQU8sRUFBRTtnQkFDZixLQUFLLFNBQVM7b0JBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsS0FBSyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztvQkFDbkUsTUFBTTtnQkFDUixLQUFLLE1BQU07b0JBQ1QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM3QixNQUFNO2dCQUNSO29CQUNFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLE9BQU8sRUFBRSxDQUFDLENBQUM7YUFDN0Q7U0FDRjtJQUNILENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxLQUFZO1FBQ25DLElBQUk7WUFDRixNQUFNLFNBQVMsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDOUQsSUFBSSxDQUFDLFlBQUUsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQzdCLFlBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7YUFDOUM7WUFFRCxNQUFNLFNBQVMsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUNyRCxNQUFNLFNBQVMsR0FBRyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxLQUFLLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxXQUFXLElBQUksQ0FBQztZQUU5SCxZQUFFLENBQUMsY0FBYyxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztTQUN6QztRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsT0FBTyxDQUFDLEtBQUssQ0FBQyxrREFBa0QsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUMxRTtJQUNILENBQUM7SUFFTyx5QkFBeUIsQ0FBQyxJQUFTO1FBQ3pDLHdEQUF3RDtRQUN4RCxtREFBbUQ7SUFDckQsQ0FBQztJQUVPLG1CQUFtQixDQUFDLElBQVM7UUFDbkMsa0RBQWtEO1FBQ2xELG1EQUFtRDtJQUNyRCxDQUFDO0lBRU8scUJBQXFCLENBQUMsSUFBUztRQUNyQyxvREFBb0Q7UUFDcEQsbURBQW1EO0lBQ3JELENBQUM7SUFFTyxrQkFBa0I7UUFDeEIsTUFBTSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUV2QixLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDL0IsSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxTQUFTO2dCQUFFLFNBQVM7WUFFaEQsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFM0QsS0FBSyxNQUFNLGNBQWMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO2dCQUNqRCxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztvQkFBRSxTQUFTO2dCQUM5RCxJQUFJLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztvQkFBRSxTQUFTO2dCQUV0RSxNQUFNLGVBQWUsR0FBRyxjQUFjLENBQUMsc0JBQXNCLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztnQkFFMUUsSUFBSSxRQUFRLElBQUksZUFBZSxFQUFFO29CQUMvQixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsQ0FBQztvQkFDMUMsTUFBTTtpQkFDUDthQUNGO1NBQ0Y7SUFDSCxDQUFDO0lBRU8sYUFBYSxDQUFDLEtBQVksRUFBRSxjQUE4QjtRQUNoRSxLQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN2QixLQUFLLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFFL0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsS0FBSyxDQUFDLEVBQUUseUJBQXlCLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBRTFGLDZCQUE2QjtRQUM3QixJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFTyxnQkFBZ0I7UUFDdEIsTUFBTSxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLFVBQVU7UUFFOUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLElBQUksVUFBVSxDQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLElBQUksVUFBVSxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUVPLGlCQUFpQixDQUFDLEtBQVk7UUFDcEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDbEMsSUFBSTtnQkFDRixRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDakI7WUFBQyxPQUFPLEtBQUssRUFBRTtnQkFDZCxPQUFPLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxFQUFFLEtBQUssQ0FBQyxDQUFDO2FBQzdEO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQscUJBQXFCO0lBQ2QsU0FBUyxDQUFDLFFBQWdDO1FBQy9DLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9CLE9BQU8sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVNLFNBQVMsQ0FBQyxPQUtoQjtRQUNDLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFFM0IsSUFBSSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsSUFBSSxFQUFFO1lBQ2pCLFFBQVEsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDMUQ7UUFFRCxJQUFJLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxRQUFRLEVBQUU7WUFDckIsUUFBUSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNsRTtRQUVELElBQUksQ0FBQSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsUUFBUSxNQUFLLFNBQVMsRUFBRTtZQUNuQyxRQUFRLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEtBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ2xFO1FBRUQsbUNBQW1DO1FBQ25DLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUV2RSxJQUFJLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxLQUFLLEVBQUU7WUFDbEIsUUFBUSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM3QztRQUVELE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxhQUFhO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRU0sWUFBWSxDQUFDLElBQTJCO1FBQzdDLE1BQU0sRUFBRSxHQUFHLFFBQVEsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUM7UUFDaEMsTUFBTSxPQUFPLEdBQWMsRUFBRSxHQUFHLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUUzQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUV6QixPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFFTSxlQUFlLENBQUMsRUFBVSxFQUFFLE9BQTJCO1FBQzVELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUM5RCxJQUFJLFNBQVMsS0FBSyxDQUFDLENBQUM7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUVuQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUM7UUFDM0UsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFekIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRU0sZUFBZSxDQUFDLEVBQVU7UUFDL0IsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzlELElBQUksU0FBUyxLQUFLLENBQUMsQ0FBQztZQUFFLE9BQU8sS0FBSyxDQUFDO1FBRW5DLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUV6QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFTSxnQkFBZ0IsQ0FBQyxPQUFlO1FBQ3JDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsS0FBSztZQUFFLE9BQU8sS0FBSyxDQUFDO1FBRXpCLEtBQUssQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1FBQzFCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBRXpCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVNLFlBQVksQ0FBQyxPQUFlO1FBQ2pDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsS0FBSztZQUFFLE9BQU8sS0FBSyxDQUFDO1FBRXpCLEtBQUssQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLEtBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUV6QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxPQUFnQjtRQUN2QyxJQUFJLE9BQU8sRUFBRTtZQUNYLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLE9BQU8sQ0FBQyxDQUFDO1NBQy9EO1FBQ0QsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFFTSxlQUFlO1FBQ3BCLE1BQU0sR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDdkIsTUFBTSxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBRWxFLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsSUFBSSxXQUFXLENBQUMsQ0FBQztRQUV6RSxPQUFPO1lBQ0wsV0FBVyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTTtZQUMvQixZQUFZLEVBQUUsWUFBWSxDQUFDLE1BQU07WUFDakMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNO1lBQzdELGNBQWMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEtBQUssVUFBVSxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU07WUFDeEYsZUFBZSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNO1lBQzNFLFlBQVksRUFBRSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7WUFDekMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLHdCQUF3QixFQUFFO1lBQ2pELG1CQUFtQixFQUFFLElBQUksQ0FBQyw0QkFBNEIsRUFBRTtZQUN4RCxxQkFBcUIsRUFBRSxJQUFJLENBQUMsOEJBQThCLEVBQUU7U0FDN0QsQ0FBQztJQUNKLENBQUM7SUFFTyxvQkFBb0I7UUFDMUIsTUFBTSxNQUFNLEdBQTJCLEVBQUUsQ0FBQztRQUUxQyxLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDeEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3BEO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVPLHdCQUF3QjtRQUM5QixNQUFNLE1BQU0sR0FBMkIsRUFBRSxDQUFDO1FBRTFDLEtBQUssTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN4RCxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDNUQ7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRU8sNEJBQTRCO1FBQ2xDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBQ2xELElBQUksY0FBYyxLQUFLLENBQUM7WUFBRSxPQUFPLENBQUMsQ0FBQztRQUVuQyxNQUFNLG1CQUFtQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxXQUFXLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFDN0YsT0FBTyxDQUFDLG1CQUFtQixHQUFHLGNBQWMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUN0RCxDQUFDO0lBRU8sOEJBQThCO1FBQ3BDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDM0UsSUFBSSxjQUFjLENBQUMsTUFBTSxLQUFLLENBQUM7WUFBRSxPQUFPLENBQUMsQ0FBQztRQUUxQyxNQUFNLG1CQUFtQixHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDL0QsT0FBTyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVyxDQUFDLE9BQU8sRUFBRSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN6RSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFTixPQUFPLG1CQUFtQixHQUFHLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxvQkFBb0I7SUFDeEYsQ0FBQztJQUVNLFNBQVMsQ0FBQyxNQUFjO1FBQzdCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxNQUFNLENBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU8sS0FBSyxDQUFDO1FBRXhCLHNCQUFzQjtRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVNLEtBQUs7UUFDVixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzNCLENBQUM7Q0FDRjtBQUVZLFFBQUEsY0FBYyxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7QUFDbkQsa0JBQWUsY0FBYyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvc2VydmljZXMvQWxlcnRpbmdTeXN0ZW0udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRQZXJmb3JtYW5jZU1vbml0b3IgfSBmcm9tICcuL0J1aWxkUGVyZm9ybWFuY2VNb25pdG9yJztcbmltcG9ydCB7IGVycm9yVHJhY2tpbmdTeXN0ZW0gfSBmcm9tICcuL0Vycm9yVHJhY2tpbmdTeXN0ZW0nO1xuaW1wb3J0IHsgcXVhbGl0eU1ldHJpY3NTZXJ2aWNlIH0gZnJvbSAnLi9RdWFsaXR5TWV0cmljc1NlcnZpY2UnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0IHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ3BlcmZvcm1hbmNlJyB8ICdlcnJvcicgfCAncXVhbGl0eScgfCAnc3lzdGVtJztcbiAgc2V2ZXJpdHk6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnY3JpdGljYWwnO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgY3VycmVudFZhbHVlOiBudW1iZXI7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgYWNrbm93bGVkZ2VkOiBib29sZWFuO1xuICByZXNvbHZlZDogYm9vbGVhbjtcbiAgcmVzb2x2ZWRBdD86IERhdGU7XG4gIGVzY2FsYXRlZDogYm9vbGVhbjtcbiAgZXNjYWxhdGVkQXQ/OiBEYXRlO1xuICByZXNwb25zZUFjdGlvbnM6IHN0cmluZ1tdO1xuICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGVydFJ1bGUge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHR5cGU6ICdwZXJmb3JtYW5jZScgfCAnZXJyb3InIHwgJ3F1YWxpdHknIHwgJ3N5c3RlbSc7XG4gIG1ldHJpYzogc3RyaW5nO1xuICBjb25kaXRpb246ICdncmVhdGVyX3RoYW4nIHwgJ2xlc3NfdGhhbicgfCAnZXF1YWxzJyB8ICdub3RfZXF1YWxzJyB8ICdwZXJjZW50YWdlX2NoYW5nZSc7XG4gIHRocmVzaG9sZDogbnVtYmVyO1xuICBzZXZlcml0eTogJ2luZm8nIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJyB8ICdjcml0aWNhbCc7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIGNvb2xkb3duTWludXRlczogbnVtYmVyO1xuICBlc2NhbGF0aW9uTWludXRlczogbnVtYmVyO1xuICBhdXRvUmVzcG9uc2U6IGJvb2xlYW47XG4gIHJlc3BvbnNlQWN0aW9uczogQWxlcnRBY3Rpb25bXTtcbiAgbm90aWZpY2F0aW9uQ2hhbm5lbHM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0QWN0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiAnc2NyaXB0JyB8ICdjb21tYW5kJyB8ICdhcGlfY2FsbCcgfCAnY2FtcGFpZ24nIHwgJ25vdGlmaWNhdGlvbic7XG4gIGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgY29uZGl0aW9uczogc3RyaW5nW107XG4gIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgdGltZW91dFNlY29uZHM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFc2NhbGF0aW9uUnVsZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYWxlcnRUeXBlczogc3RyaW5nW107XG4gIHNldmVyaXR5TGV2ZWxzOiBzdHJpbmdbXTtcbiAgZXNjYWxhdGlvbkRlbGF5TWludXRlczogbnVtYmVyO1xuICBlc2NhbGF0aW9uQWN0aW9uczogQWxlcnRBY3Rpb25bXTtcbiAgbWF4RXNjYWxhdGlvbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGVydFJlc3BvbnNlIHtcbiAgYWxlcnRJZDogc3RyaW5nO1xuICBhY3Rpb25JZDogc3RyaW5nO1xuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdydW5uaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gIHN0YXJ0VGltZTogRGF0ZTtcbiAgZW5kVGltZT86IERhdGU7XG4gIHJlc3VsdD86IGFueTtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHJldHJ5Q291bnQ6IG51bWJlcjtcbn1cblxuY2xhc3MgQWxlcnRpbmdTeXN0ZW0ge1xuICBwcml2YXRlIGFsZXJ0czogQWxlcnRbXSA9IFtdO1xuICBwcml2YXRlIGFsZXJ0UnVsZXM6IEFsZXJ0UnVsZVtdID0gW107XG4gIHByaXZhdGUgZXNjYWxhdGlvblJ1bGVzOiBFc2NhbGF0aW9uUnVsZVtdID0gW107XG4gIHByaXZhdGUgYWxlcnRSZXNwb25zZXM6IEFsZXJ0UmVzcG9uc2VbXSA9IFtdO1xuICBwcml2YXRlIHN1YnNjcmliZXJzOiBTZXQ8KGFsZXJ0OiBBbGVydCkgPT4gdm9pZD4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgbGFzdEFsZXJ0VGltZXM6IE1hcDxzdHJpbmcsIERhdGU+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubG9hZENvbmZpZ3VyYXRpb24oKTtcbiAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0UnVsZXMoKTtcbiAgICB0aGlzLnN0YXJ0TW9uaXRvcmluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2FkQ29uZmlndXJhdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnLmtpcm8nLCAnc2V0dGluZ3MnLCAnYWxlcnRpbmctY29uZmlnLmpzb24nKTtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGNvbmZpZ1BhdGgpKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKGNvbmZpZ1BhdGgsICd1dGY4JykpO1xuICAgICAgICB0aGlzLmFsZXJ0UnVsZXMgPSBjb25maWcuYWxlcnRSdWxlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5lc2NhbGF0aW9uUnVsZXMgPSBjb25maWcuZXNjYWxhdGlvblJ1bGVzIHx8IFtdO1xuICAgICAgICB0aGlzLmFsZXJ0cyA9IGNvbmZpZy5hbGVydHMgfHwgW107XG4gICAgICAgIHRoaXMuYWxlcnRSZXNwb25zZXMgPSBjb25maWcuYWxlcnRSZXNwb25zZXMgfHwgW107XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0FsZXJ0aW5nIFN5c3RlbV0gRmFpbGVkIHRvIGxvYWQgY29uZmlndXJhdGlvbjonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzYXZlQ29uZmlndXJhdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2V0dGluZ3NEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJy5raXJvJywgJ3NldHRpbmdzJyk7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoc2V0dGluZ3NEaXIpKSB7XG4gICAgICAgIGZzLm1rZGlyU3luYyhzZXR0aW5nc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbmZpZ1BhdGggPSBwYXRoLmpvaW4oc2V0dGluZ3NEaXIsICdhbGVydGluZy1jb25maWcuanNvbicpO1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICBhbGVydFJ1bGVzOiB0aGlzLmFsZXJ0UnVsZXMsXG4gICAgICAgIGVzY2FsYXRpb25SdWxlczogdGhpcy5lc2NhbGF0aW9uUnVsZXMsXG4gICAgICAgIGFsZXJ0czogdGhpcy5hbGVydHMuc2xpY2UoLTUwMCksIC8vIEtlZXAgbGFzdCA1MDAgYWxlcnRzXG4gICAgICAgIGFsZXJ0UmVzcG9uc2VzOiB0aGlzLmFsZXJ0UmVzcG9uc2VzLnNsaWNlKC0yMDApIC8vIEtlZXAgbGFzdCAyMDAgcmVzcG9uc2VzXG4gICAgICB9O1xuXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGNvbmZpZ1BhdGgsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQWxlcnRpbmcgU3lzdGVtXSBGYWlsZWQgdG8gc2F2ZSBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVEZWZhdWx0UnVsZXMoKSB7XG4gICAgaWYgKHRoaXMuYWxlcnRSdWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRSdWxlczogQWxlcnRSdWxlW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2J1aWxkLXRpbWUtY3JpdGljYWwnLFxuICAgICAgICAgIG5hbWU6ICdDcml0aWNhbCBCdWlsZCBUaW1lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0J1aWxkIHRpbWUgZXhjZWVkcyBjcml0aWNhbCB0aHJlc2hvbGQnLFxuICAgICAgICAgIHR5cGU6ICdwZXJmb3JtYW5jZScsXG4gICAgICAgICAgbWV0cmljOiAnYnVpbGRfdGltZScsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDEyMDAwMCwgLy8gMiBtaW51dGVzXG4gICAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDE1LFxuICAgICAgICAgIGVzY2FsYXRpb25NaW51dGVzOiAzMCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2VBY3Rpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnYW5hbHl6ZS1idWlsZC1ib3R0bGVuZWNrcycsXG4gICAgICAgICAgICAgIG5hbWU6ICdBbmFseXplIEJ1aWxkIEJvdHRsZW5lY2tzJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgIGNvbmZpZzogeyBzY3JpcHQ6ICdhbmFseXplLWJ1aWxkLXBlcmZvcm1hbmNlLmpzJyB9LFxuICAgICAgICAgICAgICBjb25kaXRpb25zOiBbXSxcbiAgICAgICAgICAgICAgcmV0cnlDb3VudDogMixcbiAgICAgICAgICAgICAgdGltZW91dFNlY29uZHM6IDMwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjbGVhci1idWlsZC1jYWNoZScsXG4gICAgICAgICAgICAgIG5hbWU6ICdDbGVhciBCdWlsZCBDYWNoZScsXG4gICAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgICAgY29uZmlnOiB7IGNvbW1hbmQ6ICd5YXJuIGNhY2hlIGNsZWFuJyB9LFxuICAgICAgICAgICAgICBjb25kaXRpb25zOiBbXSxcbiAgICAgICAgICAgICAgcmV0cnlDb3VudDogMSxcbiAgICAgICAgICAgICAgdGltZW91dFNlY29uZHM6IDYwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBub3RpZmljYXRpb25DaGFubmVsczogWydjb25zb2xlJywgJ2ZpbGUnXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd0eXBlc2NyaXB0LWVycm9ycy1oaWdoJyxcbiAgICAgICAgICBuYW1lOiAnSGlnaCBUeXBlU2NyaXB0IEVycm9yIENvdW50JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1R5cGVTY3JpcHQgZXJyb3JzIGV4Y2VlZCBhY2NlcHRhYmxlIHRocmVzaG9sZCcsXG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBtZXRyaWM6ICd0eXBlc2NyaXB0X2Vycm9ycycsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDEwMDAsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDMwLFxuICAgICAgICAgIGVzY2FsYXRpb25NaW51dGVzOiA2MCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2VBY3Rpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAndHJpZ2dlci1lcnJvci1jYW1wYWlnbicsXG4gICAgICAgICAgICAgIG5hbWU6ICdUcmlnZ2VyIEVycm9yIFJlZHVjdGlvbiBDYW1wYWlnbicsXG4gICAgICAgICAgICAgIHR5cGU6ICdjYW1wYWlnbicsXG4gICAgICAgICAgICAgIGNvbmZpZzogeyBcbiAgICAgICAgICAgICAgICBjYW1wYWlnblR5cGU6ICd0eXBlc2NyaXB0LWVycm9yLXJlZHVjdGlvbicsXG4gICAgICAgICAgICAgICAgbWF4RmlsZXM6IDIwLFxuICAgICAgICAgICAgICAgIHNhZmV0eUxldmVsOiAnSElHSCdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29uZGl0aW9uczogWydlcnJvcl9jb3VudCA+IDUwMCddLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogMTgwMFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgbm90aWZpY2F0aW9uQ2hhbm5lbHM6IFsnY29uc29sZScsICdmaWxlJ11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnY29kZS1xdWFsaXR5LWxvdycsXG4gICAgICAgICAgbmFtZTogJ0xvdyBDb2RlIFF1YWxpdHkgU2NvcmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29kZSBxdWFsaXR5IHNjb3JlIGJlbG93IGFjY2VwdGFibGUgdGhyZXNob2xkJyxcbiAgICAgICAgICB0eXBlOiAncXVhbGl0eScsXG4gICAgICAgICAgbWV0cmljOiAnY29kZV9xdWFsaXR5X3Njb3JlJyxcbiAgICAgICAgICBjb25kaXRpb246ICdsZXNzX3RoYW4nLFxuICAgICAgICAgIHRocmVzaG9sZDogNjAsXG4gICAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGNvb2xkb3duTWludXRlczogNjAsXG4gICAgICAgICAgZXNjYWxhdGlvbk1pbnV0ZXM6IDEyMCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgICAgIHJlc3BvbnNlQWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2dlbmVyYXRlLXF1YWxpdHktcmVwb3J0JyxcbiAgICAgICAgICAgICAgbmFtZTogJ0dlbmVyYXRlIFF1YWxpdHkgUmVwb3J0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgIGNvbmZpZzogeyBzY3JpcHQ6ICdnZW5lcmF0ZS1xdWFsaXR5LXJlcG9ydC5qcycgfSxcbiAgICAgICAgICAgICAgY29uZGl0aW9uczogW10sXG4gICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDEsXG4gICAgICAgICAgICAgIHRpbWVvdXRTZWNvbmRzOiAxMjBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBbJ2NvbnNvbGUnLCAnZmlsZSddXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21lbW9yeS11c2FnZS1oaWdoJyxcbiAgICAgICAgICBuYW1lOiAnSGlnaCBNZW1vcnkgVXNhZ2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTWVtb3J5IHVzYWdlIGV4Y2VlZHMgc2FmZSB0aHJlc2hvbGQnLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nLFxuICAgICAgICAgIG1ldHJpYzogJ21lbW9yeV91c2FnZScsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDUxMiAqIDEwMjQgKiAxMDI0LCAvLyA1MTJNQlxuICAgICAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDEwLFxuICAgICAgICAgIGVzY2FsYXRpb25NaW51dGVzOiAzMCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2VBY3Rpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnZ2FyYmFnZS1jb2xsZWN0JyxcbiAgICAgICAgICAgICAgbmFtZTogJ0ZvcmNlIEdhcmJhZ2UgQ29sbGVjdGlvbicsXG4gICAgICAgICAgICAgIHR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgICAgICBjb25maWc6IHsgc2NyaXB0OiAnZm9yY2UtZ2MuanMnIH0sXG4gICAgICAgICAgICAgIGNvbmRpdGlvbnM6IFtdLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogMzBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBbJ2NvbnNvbGUnXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd0ZWNobmljYWwtZGVidC1jcml0aWNhbCcsXG4gICAgICAgICAgbmFtZTogJ0NyaXRpY2FsIFRlY2huaWNhbCBEZWJ0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RlY2huaWNhbCBkZWJ0IHNjb3JlIGluZGljYXRlcyBjcml0aWNhbCBpc3N1ZXMnLFxuICAgICAgICAgIHR5cGU6ICdxdWFsaXR5JyxcbiAgICAgICAgICBtZXRyaWM6ICd0ZWNobmljYWxfZGVidF9zY29yZScsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDgwLFxuICAgICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgY29vbGRvd25NaW51dGVzOiAxMjAsXG4gICAgICAgICAgZXNjYWxhdGlvbk1pbnV0ZXM6IDI0MCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgICAgIHJlc3BvbnNlQWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ3NjaGVkdWxlLWRlYnQtcmVkdWN0aW9uJyxcbiAgICAgICAgICAgICAgbmFtZTogJ1NjaGVkdWxlIFRlY2huaWNhbCBEZWJ0IFJlZHVjdGlvbicsXG4gICAgICAgICAgICAgIHR5cGU6ICdjYW1wYWlnbicsXG4gICAgICAgICAgICAgIGNvbmZpZzogeyBcbiAgICAgICAgICAgICAgICBjYW1wYWlnblR5cGU6ICd0ZWNobmljYWwtZGVidC1yZWR1Y3Rpb24nLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAnaGlnaCdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29uZGl0aW9uczogW10sXG4gICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDEsXG4gICAgICAgICAgICAgIHRpbWVvdXRTZWNvbmRzOiAzMDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBbJ2NvbnNvbGUnLCAnZmlsZSddXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIHRoaXMuYWxlcnRSdWxlcyA9IGRlZmF1bHRSdWxlcztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lc2NhbGF0aW9uUnVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBkZWZhdWx0RXNjYWxhdGlvblJ1bGVzOiBFc2NhbGF0aW9uUnVsZVtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdjcml0aWNhbC1lc2NhbGF0aW9uJyxcbiAgICAgICAgICBuYW1lOiAnQ3JpdGljYWwgQWxlcnQgRXNjYWxhdGlvbicsXG4gICAgICAgICAgYWxlcnRUeXBlczogWydwZXJmb3JtYW5jZScsICdlcnJvcicsICdxdWFsaXR5JywgJ3N5c3RlbSddLFxuICAgICAgICAgIHNldmVyaXR5TGV2ZWxzOiBbJ2NyaXRpY2FsJ10sXG4gICAgICAgICAgZXNjYWxhdGlvbkRlbGF5TWludXRlczogMzAsXG4gICAgICAgICAgZXNjYWxhdGlvbkFjdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdub3RpZnktdGVhbScsXG4gICAgICAgICAgICAgIG5hbWU6ICdOb3RpZnkgRGV2ZWxvcG1lbnQgVGVhbScsXG4gICAgICAgICAgICAgIHR5cGU6ICdub3RpZmljYXRpb24nLFxuICAgICAgICAgICAgICBjb25maWc6IHsgXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NyaXRpY2FsIGFsZXJ0IHJlcXVpcmVzIGltbWVkaWF0ZSBhdHRlbnRpb24nLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxzOiBbJ2NvbnNvbGUnLCAnZmlsZSddXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNvbmRpdGlvbnM6IFtdLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogMzBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG1heEVzY2FsYXRpb25zOiAzXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2Vycm9yLWVzY2FsYXRpb24nLFxuICAgICAgICAgIG5hbWU6ICdFcnJvciBBbGVydCBFc2NhbGF0aW9uJyxcbiAgICAgICAgICBhbGVydFR5cGVzOiBbJ2Vycm9yJ10sXG4gICAgICAgICAgc2V2ZXJpdHlMZXZlbHM6IFsnZXJyb3InXSxcbiAgICAgICAgICBlc2NhbGF0aW9uRGVsYXlNaW51dGVzOiA2MCxcbiAgICAgICAgICBlc2NhbGF0aW9uQWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2F1dG9tYXRlZC1maXgtYXR0ZW1wdCcsXG4gICAgICAgICAgICAgIG5hbWU6ICdBdHRlbXB0IEF1dG9tYXRlZCBGaXgnLFxuICAgICAgICAgICAgICB0eXBlOiAnY2FtcGFpZ24nLFxuICAgICAgICAgICAgICBjb25maWc6IHsgXG4gICAgICAgICAgICAgICAgY2FtcGFpZ25UeXBlOiAnYXV0b21hdGVkLWVycm9yLWZpeCcsXG4gICAgICAgICAgICAgICAgY29uc2VydmF0aXZlOiB0cnVlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNvbmRpdGlvbnM6IFsnYXV0b21hdGlvbl9vcHBvcnR1bml0aWVzID4gNSddLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogNjAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBtYXhFc2NhbGF0aW9uczogMlxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICB0aGlzLmVzY2FsYXRpb25SdWxlcyA9IGRlZmF1bHRFc2NhbGF0aW9uUnVsZXM7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydE1vbml0b3JpbmcoKSB7XG4gICAgLy8gTW9uaXRvciBldmVyeSAyIG1pbnV0ZXNcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrQWxlcnRDb25kaXRpb25zKCk7XG4gICAgICB0aGlzLnByb2Nlc3NFc2NhbGF0aW9ucygpO1xuICAgICAgdGhpcy5jbGVhbnVwT2xkQWxlcnRzKCk7XG4gICAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gICAgfSwgMiAqIDYwICogMTAwMCk7XG5cbiAgICAvLyBTdWJzY3JpYmUgdG8gZGF0YSBzb3VyY2VzXG4gICAgYnVpbGRQZXJmb3JtYW5jZU1vbml0b3Iuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmV2YWx1YXRlUGVyZm9ybWFuY2VBbGVydHMoZGF0YSk7XG4gICAgfSk7XG5cbiAgICBlcnJvclRyYWNraW5nU3lzdGVtLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5ldmFsdWF0ZUVycm9yQWxlcnRzKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgcXVhbGl0eU1ldHJpY3NTZXJ2aWNlLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5ldmFsdWF0ZVF1YWxpdHlBbGVydHMoZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrQWxlcnRDb25kaXRpb25zKCkge1xuICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLmFsZXJ0UnVsZXMpIHtcbiAgICAgIGlmICghcnVsZS5lbmFibGVkKSBjb250aW51ZTtcblxuICAgICAgLy8gQ2hlY2sgY29vbGRvd25cbiAgICAgIGNvbnN0IGxhc3RBbGVydFRpbWUgPSB0aGlzLmxhc3RBbGVydFRpbWVzLmdldChydWxlLmlkKTtcbiAgICAgIGlmIChsYXN0QWxlcnRUaW1lICYmIChEYXRlLm5vdygpIC0gbGFzdEFsZXJ0VGltZS5nZXRUaW1lKCkpIDwgcnVsZS5jb29sZG93bk1pbnV0ZXMgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZXZhbHVhdGVSdWxlKHJ1bGUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXZhbHVhdGVSdWxlKHJ1bGU6IEFsZXJ0UnVsZSkge1xuICAgIGxldCBjdXJyZW50VmFsdWU6IG51bWJlcjtcbiAgICBsZXQgc2hvdWxkQWxlcnQgPSBmYWxzZTtcblxuICAgIC8vIEdldCBjdXJyZW50IG1ldHJpYyB2YWx1ZSBiYXNlZCBvbiBydWxlIHR5cGVcbiAgICBzd2l0Y2ggKHJ1bGUudHlwZSkge1xuICAgICAgY2FzZSAncGVyZm9ybWFuY2UnOlxuICAgICAgICBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFBlcmZvcm1hbmNlTWV0cmljKHJ1bGUubWV0cmljKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0RXJyb3JNZXRyaWMocnVsZS5tZXRyaWMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3F1YWxpdHknOlxuICAgICAgICBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFF1YWxpdHlNZXRyaWMocnVsZS5tZXRyaWMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N5c3RlbSc6XG4gICAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0U3lzdGVtTWV0cmljKHJ1bGUubWV0cmljKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRXZhbHVhdGUgY29uZGl0aW9uXG4gICAgc3dpdGNoIChydWxlLmNvbmRpdGlvbikge1xuICAgICAgY2FzZSAnZ3JlYXRlcl90aGFuJzpcbiAgICAgICAgc2hvdWxkQWxlcnQgPSBjdXJyZW50VmFsdWUgPiBydWxlLnRocmVzaG9sZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsZXNzX3RoYW4nOlxuICAgICAgICBzaG91bGRBbGVydCA9IGN1cnJlbnRWYWx1ZSA8IHJ1bGUudGhyZXNob2xkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2VxdWFscyc6XG4gICAgICAgIHNob3VsZEFsZXJ0ID0gY3VycmVudFZhbHVlID09PSBydWxlLnRocmVzaG9sZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdub3RfZXF1YWxzJzpcbiAgICAgICAgc2hvdWxkQWxlcnQgPSBjdXJyZW50VmFsdWUgIT09IHJ1bGUudGhyZXNob2xkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BlcmNlbnRhZ2VfY2hhbmdlJzpcbiAgICAgICAgLy8gVGhpcyB3b3VsZCByZXF1aXJlIGhpc3RvcmljYWwgZGF0YSBjb21wYXJpc29uXG4gICAgICAgIHNob3VsZEFsZXJ0ID0gZmFsc2U7IC8vIFBsYWNlaG9sZGVyXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChzaG91bGRBbGVydCkge1xuICAgICAgdGhpcy5jcmVhdGVBbGVydChydWxlLCBjdXJyZW50VmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0UGVyZm9ybWFuY2VNZXRyaWMobWV0cmljOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IHN1bW1hcnkgPSBidWlsZFBlcmZvcm1hbmNlTW9uaXRvci5nZXRQZXJmb3JtYW5jZVN1bW1hcnkoKTtcbiAgICBcbiAgICBzd2l0Y2ggKG1ldHJpYykge1xuICAgICAgY2FzZSAnYnVpbGRfdGltZSc6XG4gICAgICAgIHJldHVybiBzdW1tYXJ5LmF2ZXJhZ2VCdWlsZFRpbWU7XG4gICAgICBjYXNlICdjb21waWxhdGlvbl90aW1lJzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuYXZlcmFnZUNvbXBpbGF0aW9uVGltZTtcbiAgICAgIGNhc2UgJ2J1bmRsZV9zaXplJzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuYXZlcmFnZUJ1bmRsZVNpemU7XG4gICAgICBjYXNlICdtZW1vcnlfdXNhZ2UnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS5hdmVyYWdlTWVtb3J5VXNhZ2U7XG4gICAgICBjYXNlICdjYWNoZV9lZmZpY2llbmN5JzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuY2FjaGVFZmZpY2llbmN5O1xuICAgICAgY2FzZSAncGVyZm9ybWFuY2Vfc2NvcmUnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS5wZXJmb3JtYW5jZVNjb3JlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRFcnJvck1ldHJpYyhtZXRyaWM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IGVycm9yVHJhY2tpbmdTeXN0ZW0uZ2V0RXJyb3JTdW1tYXJ5KCk7XG4gICAgXG4gICAgc3dpdGNoIChtZXRyaWMpIHtcbiAgICAgIGNhc2UgJ3R5cGVzY3JpcHRfZXJyb3JzJzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkudG90YWxBY3RpdmVFcnJvcnM7XG4gICAgICBjYXNlICdsaW50aW5nX3Zpb2xhdGlvbnMnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS50b3RhbEFjdGl2ZUxpbnRWaW9sYXRpb25zO1xuICAgICAgY2FzZSAnYnVpbGRfZmFpbHVyZXMnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS50b3RhbFJlY2VudEZhaWx1cmVzO1xuICAgICAgY2FzZSAnY3JpdGljYWxfaXNzdWVzJzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuY3JpdGljYWxJc3N1ZXM7XG4gICAgICBjYXNlICdhdXRvbWF0aW9uX29wcG9ydHVuaXRpZXMnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS5hdXRvbWF0aW9uT3Bwb3J0dW5pdGllcztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0UXVhbGl0eU1ldHJpYyhtZXRyaWM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgcXVhbGl0eU1ldHJpY3MgPSBlcnJvclRyYWNraW5nU3lzdGVtLmdldEN1cnJlbnRRdWFsaXR5TWV0cmljcygpO1xuICAgIFxuICAgIGlmICghcXVhbGl0eU1ldHJpY3MpIHJldHVybiAwO1xuICAgIFxuICAgIHN3aXRjaCAobWV0cmljKSB7XG4gICAgICBjYXNlICdjb2RlX3F1YWxpdHlfc2NvcmUnOlxuICAgICAgICByZXR1cm4gcXVhbGl0eU1ldHJpY3MuY29kZVF1YWxpdHlTY29yZTtcbiAgICAgIGNhc2UgJ3RlY2huaWNhbF9kZWJ0X3Njb3JlJzpcbiAgICAgICAgcmV0dXJuIHF1YWxpdHlNZXRyaWNzLnRlY2huaWNhbERlYnRTY29yZTtcbiAgICAgIGNhc2UgJ21haW50YWluYWJpbGl0eV9pbmRleCc6XG4gICAgICAgIHJldHVybiBxdWFsaXR5TWV0cmljcy5tYWludGFpbmFiaWxpdHlJbmRleDtcbiAgICAgIGNhc2UgJ2Vycm9yX3JhdGUnOlxuICAgICAgICByZXR1cm4gcXVhbGl0eU1ldHJpY3MuZXJyb3JSYXRlO1xuICAgICAgY2FzZSAnd2FybmluZ19yYXRlJzpcbiAgICAgICAgcmV0dXJuIHF1YWxpdHlNZXRyaWNzLndhcm5pbmdSYXRlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTeXN0ZW1NZXRyaWMobWV0cmljOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHN3aXRjaCAobWV0cmljKSB7XG4gICAgICBjYXNlICdtZW1vcnlfdXNhZ2UnOlxuICAgICAgICByZXR1cm4gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xuICAgICAgY2FzZSAnY3B1X3VzYWdlJzpcbiAgICAgICAgcmV0dXJuIHByb2Nlc3MuY3B1VXNhZ2UoKS51c2VyICsgcHJvY2Vzcy5jcHVVc2FnZSgpLnN5c3RlbTtcbiAgICAgIGNhc2UgJ3VwdGltZSc6XG4gICAgICAgIHJldHVybiBwcm9jZXNzLnVwdGltZSgpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBbGVydChydWxlOiBBbGVydFJ1bGUsIGN1cnJlbnRWYWx1ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgYWxlcnQ6IEFsZXJ0ID0ge1xuICAgICAgaWQ6IGBhbGVydC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICB0eXBlOiBydWxlLnR5cGUsXG4gICAgICBzZXZlcml0eTogcnVsZS5zZXZlcml0eSxcbiAgICAgIHRpdGxlOiBydWxlLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogYCR7cnVsZS5kZXNjcmlwdGlvbn0uIEN1cnJlbnQgdmFsdWU6ICR7Y3VycmVudFZhbHVlfSwgVGhyZXNob2xkOiAke3J1bGUudGhyZXNob2xkfWAsXG4gICAgICB0aHJlc2hvbGQ6IHJ1bGUudGhyZXNob2xkLFxuICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgYWNrbm93bGVkZ2VkOiBmYWxzZSxcbiAgICAgIHJlc29sdmVkOiBmYWxzZSxcbiAgICAgIGVzY2FsYXRlZDogZmFsc2UsXG4gICAgICByZXNwb25zZUFjdGlvbnM6IHJ1bGUucmVzcG9uc2VBY3Rpb25zLm1hcChhID0+IGEubmFtZSksXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBydWxlSWQ6IHJ1bGUuaWQsXG4gICAgICAgIG1ldHJpYzogcnVsZS5tZXRyaWMsXG4gICAgICAgIGNvbmRpdGlvbjogcnVsZS5jb25kaXRpb25cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbGVydHMucHVzaChhbGVydCk7XG4gICAgdGhpcy5sYXN0QWxlcnRUaW1lcy5zZXQocnVsZS5pZCwgbmV3IERhdGUoKSk7XG5cbiAgICAvLyBMb2cgYWxlcnRcbiAgICBjb25zb2xlLmxvZyhgW0FMRVJUICR7YWxlcnQuc2V2ZXJpdHkudG9VcHBlckNhc2UoKX1dICR7YWxlcnQudGl0bGV9OiAke2FsZXJ0LmRlc2NyaXB0aW9ufWApO1xuXG4gICAgLy8gTm90aWZ5IHN1YnNjcmliZXJzXG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhhbGVydCk7XG5cbiAgICAvLyBFeGVjdXRlIGF1dG8tcmVzcG9uc2UgaWYgZW5hYmxlZFxuICAgIGlmIChydWxlLmF1dG9SZXNwb25zZSkge1xuICAgICAgdGhpcy5leGVjdXRlQWxlcnRBY3Rpb25zKGFsZXJ0LCBydWxlLnJlc3BvbnNlQWN0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gU2VuZCBub3RpZmljYXRpb25zXG4gICAgdGhpcy5zZW5kTm90aWZpY2F0aW9ucyhhbGVydCwgcnVsZS5ub3RpZmljYXRpb25DaGFubmVscyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVBbGVydEFjdGlvbnMoYWxlcnQ6IEFsZXJ0LCBhY3Rpb25zOiBBbGVydEFjdGlvbltdKSB7XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgLy8gQ2hlY2sgY29uZGl0aW9uc1xuICAgICAgaWYgKCF0aGlzLmV2YWx1YXRlQWN0aW9uQ29uZGl0aW9ucyhhY3Rpb24uY29uZGl0aW9ucywgYWxlcnQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZTogQWxlcnRSZXNwb25zZSA9IHtcbiAgICAgICAgYWxlcnRJZDogYWxlcnQuaWQsXG4gICAgICAgIGFjdGlvbklkOiBhY3Rpb24uaWQsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgIHJldHJ5Q291bnQ6IDBcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuYWxlcnRSZXNwb25zZXMucHVzaChyZXNwb25zZSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9ICdydW5uaW5nJztcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlQWN0aW9uKGFjdGlvbik7XG4gICAgICAgIFxuICAgICAgICByZXNwb25zZS5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgICAgcmVzcG9uc2UuZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJlc3BvbnNlLnJlc3VsdCA9IHJlc3VsdDtcblxuICAgICAgICBjb25zb2xlLmxvZyhgW0FsZXJ0IFJlc3BvbnNlXSBTdWNjZXNzZnVsbHkgZXhlY3V0ZWQgJHthY3Rpb24ubmFtZX0gZm9yIGFsZXJ0ICR7YWxlcnQuaWR9YCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXNwb25zZS5zdGF0dXMgPSAnZmFpbGVkJztcbiAgICAgICAgcmVzcG9uc2UuZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJlc3BvbnNlLmVycm9yID0gZXJyb3IubWVzc2FnZTtcblxuICAgICAgICBjb25zb2xlLmVycm9yKGBbQWxlcnQgUmVzcG9uc2VdIEZhaWxlZCB0byBleGVjdXRlICR7YWN0aW9uLm5hbWV9IGZvciBhbGVydCAke2FsZXJ0LmlkfTpgLCBlcnJvcik7XG5cbiAgICAgICAgLy8gUmV0cnkgaWYgY29uZmlndXJlZFxuICAgICAgICBpZiAocmVzcG9uc2UucmV0cnlDb3VudCA8IGFjdGlvbi5yZXRyeUNvdW50KSB7XG4gICAgICAgICAgcmVzcG9uc2UucmV0cnlDb3VudCsrO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5leGVjdXRlQWxlcnRBY3Rpb25zKGFsZXJ0LCBbYWN0aW9uXSk7XG4gICAgICAgICAgfSwgMzAwMDApOyAvLyBSZXRyeSBhZnRlciAzMCBzZWNvbmRzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlQWN0aW9uQ29uZGl0aW9ucyhjb25kaXRpb25zOiBzdHJpbmdbXSwgYWxlcnQ6IEFsZXJ0KTogYm9vbGVhbiB7XG4gICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgY29uZGl0aW9uIG9mIGNvbmRpdGlvbnMpIHtcbiAgICAgIGlmICghdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbihjb25kaXRpb24sIGFsZXJ0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlQ29uZGl0aW9uKGNvbmRpdGlvbjogc3RyaW5nLCBhbGVydDogQWxlcnQpOiBib29sZWFuIHtcbiAgICAvLyBTaW1wbGUgY29uZGl0aW9uIGV2YWx1YXRpb25cbiAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgYmUgbW9yZSBzb3BoaXN0aWNhdGVkXG4gICAgXG4gICAgaWYgKGNvbmRpdGlvbi5pbmNsdWRlcygnZXJyb3JfY291bnQgPicpKSB7XG4gICAgICBjb25zdCB0aHJlc2hvbGQgPSBwYXJzZUludChjb25kaXRpb24uc3BsaXQoJz4nKVsxXS50cmltKCkpO1xuICAgICAgcmV0dXJuIGFsZXJ0LmN1cnJlbnRWYWx1ZSA+IHRocmVzaG9sZDtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbmRpdGlvbi5pbmNsdWRlcygnYXV0b21hdGlvbl9vcHBvcnR1bml0aWVzID4nKSkge1xuICAgICAgY29uc3QgdGhyZXNob2xkID0gcGFyc2VJbnQoY29uZGl0aW9uLnNwbGl0KCc+JylbMV0udHJpbSgpKTtcbiAgICAgIGNvbnN0IGVycm9yU3VtbWFyeSA9IGVycm9yVHJhY2tpbmdTeXN0ZW0uZ2V0RXJyb3JTdW1tYXJ5KCk7XG4gICAgICByZXR1cm4gZXJyb3JTdW1tYXJ5LmF1dG9tYXRpb25PcHBvcnR1bml0aWVzID4gdGhyZXNob2xkO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQWN0aW9uKGFjdGlvbjogQWxlcnRBY3Rpb24pOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ0FjdGlvbiB0aW1lb3V0JykpLCBhY3Rpb24udGltZW91dFNlY29uZHMgKiAxMDAwKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGV4ZWN1dGlvbiA9IHRoaXMucGVyZm9ybUFjdGlvbihhY3Rpb24pO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmFjZShbZXhlY3V0aW9uLCB0aW1lb3V0XSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1BY3Rpb24oYWN0aW9uOiBBbGVydEFjdGlvbik6IFByb21pc2U8YW55PiB7XG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgY2FzZSAnc2NyaXB0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0ZVNjcmlwdChhY3Rpb24uY29uZmlnLnNjcmlwdCk7XG4gICAgICBjYXNlICdjb21tYW5kJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0ZUNvbW1hbmQoYWN0aW9uLmNvbmZpZy5jb21tYW5kKTtcbiAgICAgIGNhc2UgJ2NhbXBhaWduJzpcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlckNhbXBhaWduKGFjdGlvbi5jb25maWcpO1xuICAgICAgY2FzZSAnYXBpX2NhbGwnOlxuICAgICAgICByZXR1cm4gdGhpcy5tYWtlQXBpQ2FsbChhY3Rpb24uY29uZmlnKTtcbiAgICAgIGNhc2UgJ25vdGlmaWNhdGlvbic6XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmROb3RpZmljYXRpb24oYWN0aW9uLmNvbmZpZyk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gYWN0aW9uIHR5cGU6ICR7YWN0aW9uLnR5cGV9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlU2NyaXB0KHNjcmlwdE5hbWU6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gVGhpcyB3b3VsZCBleGVjdXRlIGEgc2NyaXB0IGZpbGVcbiAgICAvLyBGb3Igbm93LCByZXR1cm4gYSBwbGFjZWhvbGRlclxuICAgIGNvbnNvbGUubG9nKGBbQWxlcnQgQWN0aW9uXSBFeGVjdXRpbmcgc2NyaXB0OiAke3NjcmlwdE5hbWV9YCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYFNjcmlwdCAke3NjcmlwdE5hbWV9IGV4ZWN1dGVkYCB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQ29tbWFuZChjb21tYW5kOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIFRoaXMgd291bGQgZXhlY3V0ZSBhIHNoZWxsIGNvbW1hbmRcbiAgICAvLyBGb3Igbm93LCByZXR1cm4gYSBwbGFjZWhvbGRlclxuICAgIGNvbnNvbGUubG9nKGBbQWxlcnQgQWN0aW9uXSBFeGVjdXRpbmcgY29tbWFuZDogJHtjb21tYW5kfWApO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBDb21tYW5kICR7Y29tbWFuZH0gZXhlY3V0ZWRgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRyaWdnZXJDYW1wYWlnbihjb25maWc6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gVGhpcyB3b3VsZCBpbnRlZ3JhdGUgd2l0aCB0aGUgY2FtcGFpZ24gc3lzdGVtXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIGEgcGxhY2Vob2xkZXJcbiAgICBjb25zb2xlLmxvZyhgW0FsZXJ0IEFjdGlvbl0gVHJpZ2dlcmluZyBjYW1wYWlnbjogJHtjb25maWcuY2FtcGFpZ25UeXBlfWApO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBDYW1wYWlnbiAke2NvbmZpZy5jYW1wYWlnblR5cGV9IHRyaWdnZXJlZGAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZUFwaUNhbGwoY29uZmlnOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIFRoaXMgd291bGQgbWFrZSBhbiBIVFRQIEFQSSBjYWxsXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIGEgcGxhY2Vob2xkZXJcbiAgICBjb25zb2xlLmxvZyhgW0FsZXJ0IEFjdGlvbl0gTWFraW5nIEFQSSBjYWxsIHRvOiAke2NvbmZpZy51cmx9YCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYEFQSSBjYWxsIHRvICR7Y29uZmlnLnVybH0gY29tcGxldGVkYCB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTm90aWZpY2F0aW9uKGNvbmZpZzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zb2xlLmxvZyhgW0FsZXJ0IE5vdGlmaWNhdGlvbl0gJHtjb25maWcubWVzc2FnZX1gKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnTm90aWZpY2F0aW9uIHNlbnQnIH07XG4gIH1cblxuICBwcml2YXRlIHNlbmROb3RpZmljYXRpb25zKGFsZXJ0OiBBbGVydCwgY2hhbm5lbHM6IHN0cmluZ1tdKSB7XG4gICAgZm9yIChjb25zdCBjaGFubmVsIG9mIGNoYW5uZWxzKSB7XG4gICAgICBzd2l0Y2ggKGNoYW5uZWwpIHtcbiAgICAgICAgY2FzZSAnY29uc29sZSc6XG4gICAgICAgICAgY29uc29sZS5sb2coYFtOT1RJRklDQVRJT05dICR7YWxlcnQudGl0bGV9OiAke2FsZXJ0LmRlc2NyaXB0aW9ufWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmaWxlJzpcbiAgICAgICAgICB0aGlzLndyaXRlQWxlcnRUb0ZpbGUoYWxlcnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbTk9USUZJQ0FUSU9OXSBVbmtub3duIGNoYW5uZWw6ICR7Y2hhbm5lbH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyaXRlQWxlcnRUb0ZpbGUoYWxlcnQ6IEFsZXJ0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFsZXJ0c0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnLmtpcm8nLCAnYWxlcnRzJyk7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoYWxlcnRzRGlyKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMoYWxlcnRzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWxlcnRGaWxlID0gcGF0aC5qb2luKGFsZXJ0c0RpciwgJ2FsZXJ0cy5sb2cnKTtcbiAgICAgIGNvbnN0IGFsZXJ0TGluZSA9IGAke2FsZXJ0LnRpbWVzdGFtcC50b0lTT1N0cmluZygpfSBbJHthbGVydC5zZXZlcml0eS50b1VwcGVyQ2FzZSgpfV0gJHthbGVydC50aXRsZX06ICR7YWxlcnQuZGVzY3JpcHRpb259XFxuYDtcbiAgICAgIFxuICAgICAgZnMuYXBwZW5kRmlsZVN5bmMoYWxlcnRGaWxlLCBhbGVydExpbmUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQWxlcnRpbmcgU3lzdGVtXSBGYWlsZWQgdG8gd3JpdGUgYWxlcnQgdG8gZmlsZTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBldmFsdWF0ZVBlcmZvcm1hbmNlQWxlcnRzKGRhdGE6IGFueSkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY2FsbGVkIHdoZW4gcGVyZm9ybWFuY2UgZGF0YSBpcyB1cGRhdGVkXG4gICAgLy8gVGhlIG1haW4gbW9uaXRvcmluZyBsb29wIGhhbmRsZXMgcnVsZSBldmFsdWF0aW9uXG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlRXJyb3JBbGVydHMoZGF0YTogYW55KSB7XG4gICAgLy8gVGhpcyB3b3VsZCBiZSBjYWxsZWQgd2hlbiBlcnJvciBkYXRhIGlzIHVwZGF0ZWRcbiAgICAvLyBUaGUgbWFpbiBtb25pdG9yaW5nIGxvb3AgaGFuZGxlcyBydWxlIGV2YWx1YXRpb25cbiAgfVxuXG4gIHByaXZhdGUgZXZhbHVhdGVRdWFsaXR5QWxlcnRzKGRhdGE6IGFueSkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY2FsbGVkIHdoZW4gcXVhbGl0eSBkYXRhIGlzIHVwZGF0ZWRcbiAgICAvLyBUaGUgbWFpbiBtb25pdG9yaW5nIGxvb3AgaGFuZGxlcyBydWxlIGV2YWx1YXRpb25cbiAgfVxuXG4gIHByaXZhdGUgcHJvY2Vzc0VzY2FsYXRpb25zKCkge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBhbGVydCBvZiB0aGlzLmFsZXJ0cykge1xuICAgICAgaWYgKGFsZXJ0LnJlc29sdmVkIHx8IGFsZXJ0LmVzY2FsYXRlZCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IGFsZXJ0QWdlID0gbm93LmdldFRpbWUoKSAtIGFsZXJ0LnRpbWVzdGFtcC5nZXRUaW1lKCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZXNjYWxhdGlvblJ1bGUgb2YgdGhpcy5lc2NhbGF0aW9uUnVsZXMpIHtcbiAgICAgICAgaWYgKCFlc2NhbGF0aW9uUnVsZS5hbGVydFR5cGVzLmluY2x1ZGVzKGFsZXJ0LnR5cGUpKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFlc2NhbGF0aW9uUnVsZS5zZXZlcml0eUxldmVscy5pbmNsdWRlcyhhbGVydC5zZXZlcml0eSkpIGNvbnRpbnVlO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXNjYWxhdGlvbkRlbGF5ID0gZXNjYWxhdGlvblJ1bGUuZXNjYWxhdGlvbkRlbGF5TWludXRlcyAqIDYwICogMTAwMDtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbGVydEFnZSA+PSBlc2NhbGF0aW9uRGVsYXkpIHtcbiAgICAgICAgICB0aGlzLmVzY2FsYXRlQWxlcnQoYWxlcnQsIGVzY2FsYXRpb25SdWxlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXNjYWxhdGVBbGVydChhbGVydDogQWxlcnQsIGVzY2FsYXRpb25SdWxlOiBFc2NhbGF0aW9uUnVsZSkge1xuICAgIGFsZXJ0LmVzY2FsYXRlZCA9IHRydWU7XG4gICAgYWxlcnQuZXNjYWxhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgY29uc29sZS5sb2coYFtFU0NBTEFUSU9OXSBBbGVydCAke2FsZXJ0LmlkfSBlc2NhbGF0ZWQgdXNpbmcgcnVsZSAke2VzY2FsYXRpb25SdWxlLm5hbWV9YCk7XG5cbiAgICAvLyBFeGVjdXRlIGVzY2FsYXRpb24gYWN0aW9uc1xuICAgIHRoaXMuZXhlY3V0ZUFsZXJ0QWN0aW9ucyhhbGVydCwgZXNjYWxhdGlvblJ1bGUuZXNjYWxhdGlvbkFjdGlvbnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwT2xkQWxlcnRzKCkge1xuICAgIGNvbnN0IGN1dG9mZlRpbWUgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gMzAgZGF5c1xuICAgIFxuICAgIHRoaXMuYWxlcnRzID0gdGhpcy5hbGVydHMuZmlsdGVyKGFsZXJ0ID0+IGFsZXJ0LnRpbWVzdGFtcCA+PSBjdXRvZmZUaW1lKTtcbiAgICB0aGlzLmFsZXJ0UmVzcG9uc2VzID0gdGhpcy5hbGVydFJlc3BvbnNlcy5maWx0ZXIocmVzcG9uc2UgPT4gcmVzcG9uc2Uuc3RhcnRUaW1lID49IGN1dG9mZlRpbWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBub3RpZnlTdWJzY3JpYmVycyhhbGVydDogQWxlcnQpIHtcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2FsbGJhY2soYWxlcnQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0FsZXJ0aW5nIFN5c3RlbV0gU3Vic2NyaWJlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBQdWJsaWMgQVBJIG1ldGhvZHNcbiAgcHVibGljIHN1YnNjcmliZShjYWxsYmFjazogKGFsZXJ0OiBBbGVydCkgPT4gdm9pZCkge1xuICAgIHRoaXMuc3Vic2NyaWJlcnMuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5zdWJzY3JpYmVycy5kZWxldGUoY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIGdldEFsZXJ0cyhvcHRpb25zPzoge1xuICAgIHR5cGU/OiBzdHJpbmc7XG4gICAgc2V2ZXJpdHk/OiBzdHJpbmc7XG4gICAgcmVzb2x2ZWQ/OiBib29sZWFuO1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICB9KTogQWxlcnRbXSB7XG4gICAgbGV0IGZpbHRlcmVkID0gdGhpcy5hbGVydHM7XG5cbiAgICBpZiAob3B0aW9ucz8udHlwZSkge1xuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIoYSA9PiBhLnR5cGUgPT09IG9wdGlvbnMudHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnM/LnNldmVyaXR5KSB7XG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihhID0+IGEuc2V2ZXJpdHkgPT09IG9wdGlvbnMuc2V2ZXJpdHkpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zPy5yZXNvbHZlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihhID0+IGEucmVzb2x2ZWQgPT09IG9wdGlvbnMucmVzb2x2ZWQpO1xuICAgIH1cblxuICAgIC8vIFNvcnQgYnkgdGltZXN0YW1wIChuZXdlc3QgZmlyc3QpXG4gICAgZmlsdGVyZWQuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAuZ2V0VGltZSgpIC0gYS50aW1lc3RhbXAuZ2V0VGltZSgpKTtcblxuICAgIGlmIChvcHRpb25zPy5saW1pdCkge1xuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5zbGljZSgwLCBvcHRpb25zLmxpbWl0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyZWQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWxlcnRSdWxlcygpOiBBbGVydFJ1bGVbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWxlcnRSdWxlcztcbiAgfVxuXG4gIHB1YmxpYyBhZGRBbGVydFJ1bGUocnVsZTogT21pdDxBbGVydFJ1bGUsICdpZCc+KTogc3RyaW5nIHtcbiAgICBjb25zdCBpZCA9IGBydWxlLSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IG5ld1J1bGU6IEFsZXJ0UnVsZSA9IHsgLi4ucnVsZSwgaWQgfTtcbiAgICBcbiAgICB0aGlzLmFsZXJ0UnVsZXMucHVzaChuZXdSdWxlKTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gICAgXG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUFsZXJ0UnVsZShpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEFsZXJ0UnVsZT4pOiBib29sZWFuIHtcbiAgICBjb25zdCBydWxlSW5kZXggPSB0aGlzLmFsZXJ0UnVsZXMuZmluZEluZGV4KHIgPT4gci5pZCA9PT0gaWQpO1xuICAgIGlmIChydWxlSW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgdGhpcy5hbGVydFJ1bGVzW3J1bGVJbmRleF0gPSB7IC4uLnRoaXMuYWxlcnRSdWxlc1tydWxlSW5kZXhdLCAuLi51cGRhdGVzIH07XG4gICAgdGhpcy5zYXZlQ29uZmlndXJhdGlvbigpO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZUFsZXJ0UnVsZShpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcnVsZUluZGV4ID0gdGhpcy5hbGVydFJ1bGVzLmZpbmRJbmRleChyID0+IHIuaWQgPT09IGlkKTtcbiAgICBpZiAocnVsZUluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIHRoaXMuYWxlcnRSdWxlcy5zcGxpY2UocnVsZUluZGV4LCAxKTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgYWNrbm93bGVkZ2VBbGVydChhbGVydElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBhbGVydCA9IHRoaXMuYWxlcnRzLmZpbmQoYSA9PiBhLmlkID09PSBhbGVydElkKTtcbiAgICBpZiAoIWFsZXJ0KSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgYWxlcnQuYWNrbm93bGVkZ2VkID0gdHJ1ZTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgcmVzb2x2ZUFsZXJ0KGFsZXJ0SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFsZXJ0ID0gdGhpcy5hbGVydHMuZmluZChhID0+IGEuaWQgPT09IGFsZXJ0SWQpO1xuICAgIGlmICghYWxlcnQpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICBhbGVydC5yZXNvbHZlZCA9IHRydWU7XG4gICAgYWxlcnQucmVzb2x2ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5zYXZlQ29uZmlndXJhdGlvbigpO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGdldEFsZXJ0UmVzcG9uc2VzKGFsZXJ0SWQ/OiBzdHJpbmcpOiBBbGVydFJlc3BvbnNlW10ge1xuICAgIGlmIChhbGVydElkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hbGVydFJlc3BvbnNlcy5maWx0ZXIociA9PiByLmFsZXJ0SWQgPT09IGFsZXJ0SWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hbGVydFJlc3BvbnNlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXRBbGVydFN1bW1hcnkoKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBsYXN0MjRIb3VycyA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICBcbiAgICBjb25zdCByZWNlbnRBbGVydHMgPSB0aGlzLmFsZXJ0cy5maWx0ZXIoYSA9PiBhLnRpbWVzdGFtcCA+PSBsYXN0MjRIb3Vycyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsQWxlcnRzOiB0aGlzLmFsZXJ0cy5sZW5ndGgsXG4gICAgICByZWNlbnRBbGVydHM6IHJlY2VudEFsZXJ0cy5sZW5ndGgsXG4gICAgICB1bnJlc29sdmVkQWxlcnRzOiB0aGlzLmFsZXJ0cy5maWx0ZXIoYSA9PiAhYS5yZXNvbHZlZCkubGVuZ3RoLFxuICAgICAgY3JpdGljYWxBbGVydHM6IHRoaXMuYWxlcnRzLmZpbHRlcihhID0+IGEuc2V2ZXJpdHkgPT09ICdjcml0aWNhbCcgJiYgIWEucmVzb2x2ZWQpLmxlbmd0aCxcbiAgICAgIGVzY2FsYXRlZEFsZXJ0czogdGhpcy5hbGVydHMuZmlsdGVyKGEgPT4gYS5lc2NhbGF0ZWQgJiYgIWEucmVzb2x2ZWQpLmxlbmd0aCxcbiAgICAgIGFsZXJ0c0J5VHlwZTogdGhpcy5nZXRBbGVydENvdW50c0J5VHlwZSgpLFxuICAgICAgYWxlcnRzQnlTZXZlcml0eTogdGhpcy5nZXRBbGVydENvdW50c0J5U2V2ZXJpdHkoKSxcbiAgICAgIHJlc3BvbnNlU3VjY2Vzc1JhdGU6IHRoaXMuY2FsY3VsYXRlUmVzcG9uc2VTdWNjZXNzUmF0ZSgpLFxuICAgICAgYXZlcmFnZVJlc29sdXRpb25UaW1lOiB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VSZXNvbHV0aW9uVGltZSgpXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWxlcnRDb3VudHNCeVR5cGUoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgZm9yIChjb25zdCBhbGVydCBvZiB0aGlzLmFsZXJ0cy5maWx0ZXIoYSA9PiAhYS5yZXNvbHZlZCkpIHtcbiAgICAgIGNvdW50c1thbGVydC50eXBlXSA9IChjb3VudHNbYWxlcnQudHlwZV0gfHwgMCkgKyAxO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY291bnRzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRBbGVydENvdW50c0J5U2V2ZXJpdHkoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgZm9yIChjb25zdCBhbGVydCBvZiB0aGlzLmFsZXJ0cy5maWx0ZXIoYSA9PiAhYS5yZXNvbHZlZCkpIHtcbiAgICAgIGNvdW50c1thbGVydC5zZXZlcml0eV0gPSAoY291bnRzW2FsZXJ0LnNldmVyaXR5XSB8fCAwKSArIDE7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb3VudHM7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJlc3BvbnNlU3VjY2Vzc1JhdGUoKTogbnVtYmVyIHtcbiAgICBjb25zdCB0b3RhbFJlc3BvbnNlcyA9IHRoaXMuYWxlcnRSZXNwb25zZXMubGVuZ3RoO1xuICAgIGlmICh0b3RhbFJlc3BvbnNlcyA9PT0gMCkgcmV0dXJuIDA7XG4gICAgXG4gICAgY29uc3Qgc3VjY2Vzc2Z1bFJlc3BvbnNlcyA9IHRoaXMuYWxlcnRSZXNwb25zZXMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGg7XG4gICAgcmV0dXJuIChzdWNjZXNzZnVsUmVzcG9uc2VzIC8gdG90YWxSZXNwb25zZXMpICogMTAwO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBdmVyYWdlUmVzb2x1dGlvblRpbWUoKTogbnVtYmVyIHtcbiAgICBjb25zdCByZXNvbHZlZEFsZXJ0cyA9IHRoaXMuYWxlcnRzLmZpbHRlcihhID0+IGEucmVzb2x2ZWQgJiYgYS5yZXNvbHZlZEF0KTtcbiAgICBpZiAocmVzb2x2ZWRBbGVydHMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcbiAgICBcbiAgICBjb25zdCB0b3RhbFJlc29sdXRpb25UaW1lID0gcmVzb2x2ZWRBbGVydHMucmVkdWNlKChzdW0sIGFsZXJ0KSA9PiB7XG4gICAgICByZXR1cm4gc3VtICsgKGFsZXJ0LnJlc29sdmVkQXQhLmdldFRpbWUoKSAtIGFsZXJ0LnRpbWVzdGFtcC5nZXRUaW1lKCkpO1xuICAgIH0sIDApO1xuICAgIFxuICAgIHJldHVybiB0b3RhbFJlc29sdXRpb25UaW1lIC8gcmVzb2x2ZWRBbGVydHMubGVuZ3RoIC8gKDYwICogMTAwMCk7IC8vIFJldHVybiBpbiBtaW51dGVzXG4gIH1cblxuICBwdWJsaWMgdGVzdEFsZXJ0KHJ1bGVJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuYWxlcnRSdWxlcy5maW5kKHIgPT4gci5pZCA9PT0gcnVsZUlkKTtcbiAgICBpZiAoIXJ1bGUpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYSB0ZXN0IGFsZXJ0XG4gICAgdGhpcy5jcmVhdGVBbGVydChydWxlLCBydWxlLnRocmVzaG9sZCArIDEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCkge1xuICAgIHRoaXMuYWxlcnRzID0gW107XG4gICAgdGhpcy5hbGVydFJlc3BvbnNlcyA9IFtdO1xuICAgIHRoaXMubGFzdEFsZXJ0VGltZXMuY2xlYXIoKTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFsZXJ0aW5nU3lzdGVtID0gbmV3IEFsZXJ0aW5nU3lzdGVtKCk7XG5leHBvcnQgZGVmYXVsdCBBbGVydGluZ1N5c3RlbTsiXSwidmVyc2lvbiI6M30=