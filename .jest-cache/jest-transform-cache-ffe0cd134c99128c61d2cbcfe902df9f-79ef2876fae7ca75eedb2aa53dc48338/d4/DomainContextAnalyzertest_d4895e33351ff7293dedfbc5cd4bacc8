cf0503aa61573eaa78beefdbf1d83026
"use strict";
/**
 * Domain Context Analyzer Tests
 * Tests for domain detection, subdomain classification, and type suggestions
 */
Object.defineProperty(exports, "__esModule", { value: true });
const DomainContextAnalyzer_1 = require("../DomainContextAnalyzer");
const types_1 = require("../types");
describe('DomainContextAnalyzer', () => {
    let analyzer;
    beforeEach(() => {
        analyzer = new DomainContextAnalyzer_1.DomainContextAnalyzer();
    });
    describe('Domain Detection', () => {
        describe('Path-based Detection', () => {
            test('detects astrological domain from file paths', async () => {
                const context = {
                    filePath: 'src/calculations/culinary/planetaryInfluence.ts',
                    lineNumber: 10,
                    codeSnippet: 'const data: any = response;',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
            });
            test('detects recipe domain from file paths', async () => {
                const context = {
                    filePath: 'src/data/ingredients/vegetables.ts',
                    lineNumber: 5,
                    codeSnippet: 'const ingredient: any = {};',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.RECIPE);
            });
            test('detects campaign domain from file paths', async () => {
                const context = {
                    filePath: 'src/services/campaign/TypeScriptErrorAnalyzer.ts',
                    lineNumber: 15,
                    codeSnippet: 'const metrics: any = {};',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.CAMPAIGN);
            });
            test('detects component domain from file extensions', async () => {
                const context = {
                    filePath: 'src/components/Button.tsx',
                    lineNumber: 8,
                    codeSnippet: 'const props: any = {};',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.COMPONENT);
            });
            test('detects test domain from test file paths', async () => {
                const context = {
                    filePath: 'src/components/__tests__/Button.test.tsx',
                    lineNumber: 12,
                    codeSnippet: 'const mockData: any = {};',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: true,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.TEST);
            });
        });
        describe('Content-based Detection', () => {
            test('detects astrological domain from content patterns', async () => {
                const context = {
                    filePath: 'src/utils/someFile.ts',
                    lineNumber: 10,
                    codeSnippet: 'const planetaryPositions: any = calculatePositions();',
                    surroundingLines: [
                        'import { PlanetaryPosition } from "@/types";',
                        'function calculateElementalProperties() {',
                        '  const fire = 0.8, water = 0.2;'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
            });
            test('detects recipe domain from content patterns', async () => {
                const context = {
                    filePath: 'src/utils/someFile.ts',
                    lineNumber: 5,
                    codeSnippet: 'const ingredient: any = getIngredientData();',
                    surroundingLines: [
                        'import { Recipe, Ingredient } from "@/types";',
                        'function processCookingMethod() {',
                        '  const spices = ["cumin", "paprika"];'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.RECIPE);
            });
            test('detects campaign domain from content patterns', async () => {
                const context = {
                    filePath: 'src/utils/someFile.ts',
                    lineNumber: 8,
                    codeSnippet: 'const metrics: any = getProgressMetrics();',
                    surroundingLines: [
                        'import { CampaignConfig } from "@/types";',
                        'function validateTypeScriptErrors() {',
                        '  const lintingResults = runLinter();'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.CAMPAIGN);
            });
        });
        describe('Import-based Detection', () => {
            test('detects astrological domain from imports', async () => {
                const context = {
                    filePath: 'src/utils/calculations.ts',
                    lineNumber: 10,
                    codeSnippet: 'const data: any = response;',
                    surroundingLines: [
                        'import { astronomia } from "astronomia";',
                        'import { getReliablePlanetaryPositions } from "@/utils/reliableAstronomy";',
                        'function calculate() {'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
            });
            test('detects component domain from React imports', async () => {
                const context = {
                    filePath: 'src/utils/someFile.ts',
                    lineNumber: 5,
                    codeSnippet: 'const props: any = {};',
                    surroundingLines: [
                        'import React from "react";',
                        'import { useState } from "react";',
                        'function MyComponent() {'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.COMPONENT);
            });
            test('detects test domain from testing library imports', async () => {
                const context = {
                    filePath: 'src/utils/someFile.ts',
                    lineNumber: 8,
                    codeSnippet: 'const mockData: any = {};',
                    surroundingLines: [
                        'import { jest } from "@jest/globals";',
                        'import { render } from "@testing-library/react";',
                        'describe("Component", () => {'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const result = await analyzer.analyzeDomain(context);
                expect(result.domain).toBe(types_1.CodeDomain.TEST);
            });
        });
    });
    describe('Subdomain Detection', () => {
        test('detects planetary subdomain in astrological code', async () => {
            const context = {
                filePath: 'src/calculations/planetary/positions.ts',
                lineNumber: 10,
                codeSnippet: 'const planetaryData: any = calculatePlanetaryPositions();',
                surroundingLines: [
                    'function getPlanetDegree() {',
                    '  const longitude = 45.5;',
                    '  return convertToZodiacPosition(longitude);'
                ],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
            expect(result.subDomain).toBe('planetary');
        });
        test('detects elemental subdomain in astrological code', async () => {
            const context = {
                filePath: 'src/calculations/elemental/harmony.ts',
                lineNumber: 5,
                codeSnippet: 'const elementalProps: any = { fire: 0.8, water: 0.2 };',
                surroundingLines: [
                    'function calculateElementalCompatibility() {',
                    '  const fire = ingredient.fire;',
                    '  const earth = ingredient.earth;'
                ],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
            expect(result.subDomain).toBe('elemental');
        });
        test('detects ingredients subdomain in recipe code', async () => {
            const context = {
                filePath: 'src/data/ingredients/spices.ts',
                lineNumber: 8,
                codeSnippet: 'const spiceData: any = getSpiceProperties();',
                surroundingLines: [
                    'export const cumin: Ingredient = {',
                    '  name: "cumin",',
                    '  elementalProperties: { fire: 0.9, earth: 0.7 }'
                ],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.domain).toBe(types_1.CodeDomain.RECIPE);
            expect(result.subDomain).toBe('ingredients');
        });
        test('detects typescript-errors subdomain in campaign code', async () => {
            const context = {
                filePath: 'src/services/campaign/TypeScriptErrorAnalyzer.ts',
                lineNumber: 12,
                codeSnippet: 'const errorData: any = analyzeTypeScriptErrors();',
                surroundingLines: [
                    'function getTS2352Errors() {',
                    '  const compilationErrors = runTypeCheck();',
                    '  return filterErrorsByCode("TS2352");'
                ],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.domain).toBe(types_1.CodeDomain.CAMPAIGN);
            expect(result.subDomain).toBe('typescript-errors');
        });
    });
    describe('Type Suggestions', () => {
        test('provides astrological type suggestions', async () => {
            const context = {
                filePath: 'src/calculations/planetary.ts',
                lineNumber: 10,
                codeSnippet: 'const position: any = getPlanetaryPosition();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.suggestedTypes).toContain('PlanetaryPosition');
            expect(result.suggestedTypes).toContain('ElementalProperties');
            expect(result.suggestedTypes).toContain('unknown');
        });
        test('provides recipe type suggestions', async () => {
            const context = {
                filePath: 'src/data/recipes.ts',
                lineNumber: 5,
                codeSnippet: 'const recipe: any = getRecipeData();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.suggestedTypes).toContain('Recipe');
            expect(result.suggestedTypes).toContain('Ingredient');
            expect(result.suggestedTypes).toContain('unknown');
        });
        test('provides campaign type suggestions', async () => {
            const context = {
                filePath: 'src/services/campaign/metrics.ts',
                lineNumber: 8,
                codeSnippet: 'const metrics: any = getProgressMetrics();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.suggestedTypes).toContain('ProgressMetrics');
            expect(result.suggestedTypes).toContain('CampaignConfig');
            expect(result.suggestedTypes).toContain('Record<string, unknown>');
        });
        test('provides contextual type suggestions based on code content', async () => {
            const context = {
                filePath: 'src/services/api.ts',
                lineNumber: 10,
                codeSnippet: 'const response: any = await fetch(url);',
                surroundingLines: [
                    'async function makeApiRequest() {',
                    '  const requestData = { method: "GET" };'
                ],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.domain).toBe(types_1.CodeDomain.SERVICE);
            expect(result.suggestedTypes).toContain('ApiResponse<T>');
        });
    });
    describe('Intentionality Hints', () => {
        test('provides preservation hints for astrological code', async () => {
            const context = {
                filePath: 'src/calculations/planetary.ts',
                lineNumber: 10,
                codeSnippet: 'const planetaryData: any = externalAstrologyApi.getPositions();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.intentionalityHints).toHaveLength(2);
            expect(result.intentionalityHints[0].suggestedAction).toBe('preserve');
            expect(result.intentionalityHints[0].reason).toContain('Astrological calculations');
            expect(result.intentionalityHints[1].suggestedAction).toBe('document');
            expect(result.intentionalityHints[1].reason).toContain('Planetary position data');
        });
        test('provides replacement hints for recipe code', async () => {
            const context = {
                filePath: 'src/data/ingredients.ts',
                lineNumber: 5,
                codeSnippet: 'const ingredient: any = getIngredientData();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.intentionalityHints.some(hint => hint.suggestedAction === 'replace')).toBe(true);
            expect(result.intentionalityHints.some(hint => hint.reason.includes('specific types'))).toBe(true);
        });
        test('provides preservation hints for campaign code', async () => {
            const context = {
                filePath: 'src/services/campaign/config.ts',
                lineNumber: 8,
                codeSnippet: 'const config: any = getCampaignConfig();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.intentionalityHints.some(hint => hint.suggestedAction === 'preserve')).toBe(true);
            expect(result.intentionalityHints.some(hint => hint.reason.includes('flexibility'))).toBe(true);
        });
        test('provides preservation hints for test files', async () => {
            const context = {
                filePath: 'src/utils/__tests__/helper.test.ts',
                lineNumber: 12,
                codeSnippet: 'const mockData: any = {};',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: true,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.intentionalityHints.some(hint => hint.suggestedAction === 'preserve')).toBe(true);
            expect(result.intentionalityHints.some(hint => hint.reason.includes('test'))).toBe(true);
        });
    });
    describe('Preservation Reasons', () => {
        test('provides astrological preservation reasons', async () => {
            const context = {
                filePath: 'src/calculations/ephemeris.ts',
                lineNumber: 10,
                codeSnippet: 'const data: any = astronomyLibrary.calculate();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.preservationReasons).toContain('Astrological calculations require compatibility with external astronomical libraries');
            expect(result.preservationReasons).toContain('Planetary position data structures vary between different API sources');
        });
        test('provides campaign preservation reasons', async () => {
            const context = {
                filePath: 'src/services/campaign/intelligence.ts',
                lineNumber: 5,
                codeSnippet: 'const metrics: any = dynamicMetricsCalculation();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.preservationReasons).toContain('Campaign system needs flexibility for evolving metrics and configurations');
            expect(result.preservationReasons).toContain('Dynamic tool integration requires adaptable type structures');
        });
        test('provides test file preservation reasons', async () => {
            const context = {
                filePath: 'src/utils/helper.test.ts',
                lineNumber: 8,
                codeSnippet: 'const testData: any = createMockData();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: true,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.preservationReasons).toContain('Test flexibility for mocking and test data generation');
            expect(result.preservationReasons).toContain('Test file context allows for more flexible typing patterns');
        });
        test('provides existing comment preservation reasons', async () => {
            const context = {
                filePath: 'src/utils/helper.ts',
                lineNumber: 10,
                codeSnippet: 'const data: any = externalApi();',
                surroundingLines: [],
                hasExistingComment: true,
                existingComment: '// Intentionally any: External API compatibility',
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.preservationReasons).toContain('Existing documentation suggests intentional usage');
        });
    });
    describe('Domain-Specific Type Suggestions Method', () => {
        test('returns domain-specific suggestions for astrological domain', () => {
            const context = {
                filePath: 'src/calculations/planetary.ts',
                lineNumber: 10,
                codeSnippet: 'const position: any = getPlanetaryPosition();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.ASTROLOGICAL, context);
            expect(suggestions).toContain('PlanetaryPosition');
            expect(suggestions).toContain('ElementalProperties');
            expect(suggestions).toContain('unknown');
        });
        test('returns domain-specific suggestions for recipe domain', () => {
            const context = {
                filePath: 'src/data/ingredients.ts',
                lineNumber: 5,
                codeSnippet: 'const ingredient: any = getIngredientData();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.RECIPE, context);
            expect(suggestions).toContain('Ingredient');
            expect(suggestions).toContain('Recipe');
            expect(suggestions).toContain('unknown');
        });
        test('returns domain-specific suggestions for campaign domain', () => {
            const context = {
                filePath: 'src/services/campaign/metrics.ts',
                lineNumber: 8,
                codeSnippet: 'const metrics: any = getProgressMetrics();',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.CAMPAIGN, context);
            expect(suggestions).toContain('ProgressMetrics');
            expect(suggestions).toContain('CampaignConfig');
            expect(suggestions).toContain('Record<string, unknown>');
        });
    });
    describe('Advanced Type Suggestions', () => {
        describe('Variable Name Based Suggestions', () => {
            test('suggests specific planetary types based on variable names', () => {
                const context = {
                    filePath: 'src/calculations/planetary.ts',
                    lineNumber: 10,
                    codeSnippet: 'const sunPosition: any = calculateSunPosition();',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.ASTROLOGICAL, context);
                expect(suggestions).toContain('SunPosition');
                expect(suggestions).toContain('PlanetaryPosition');
            });
            test('suggests specific ingredient types based on variable names', () => {
                const context = {
                    filePath: 'src/data/ingredients.ts',
                    lineNumber: 5,
                    codeSnippet: 'const spiceData: any = getSpiceProperties();',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.RECIPE, context);
                expect(suggestions).toContain('Spice');
                expect(suggestions).toContain('Ingredient');
            });
            test('suggests campaign-specific types based on variable names', () => {
                const context = {
                    filePath: 'src/services/campaign/typescript.ts',
                    lineNumber: 8,
                    codeSnippet: 'const typescriptErrors: any = analyzeErrors();',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.CAMPAIGN, context);
                expect(suggestions).toContain('TypeScriptError');
                expect(suggestions).toContain('ValidationResult');
            });
        });
        describe('Pattern Based Suggestions', () => {
            test('suggests array types for any[] patterns', () => {
                const context = {
                    filePath: 'src/calculations/planetary.ts',
                    lineNumber: 10,
                    codeSnippet: 'const planets: any[] = getAllPlanets();',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.ASTROLOGICAL, context);
                expect(suggestions).toContain('Planet[]');
                expect(suggestions).toContain('PlanetaryPosition[]');
            });
            test('suggests Record types for object patterns', () => {
                const context = {
                    filePath: 'src/data/ingredients.ts',
                    lineNumber: 5,
                    codeSnippet: 'const ingredientMap: Record<string, any> = {};',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.RECIPE, context);
                expect(suggestions).toContain('Record<string, Ingredient>');
            });
            test('suggests Promise types for async patterns', () => {
                const context = {
                    filePath: 'src/services/api.ts',
                    lineNumber: 8,
                    codeSnippet: 'async function fetchData(): Promise<any> {',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.SERVICE, context);
                expect(suggestions).toContain('Promise<ApiResponse<T>>');
                expect(suggestions).toContain('Promise<ServiceData>');
            });
            test('suggests function parameter types', () => {
                const context = {
                    filePath: 'src/components/Button.tsx',
                    lineNumber: 5,
                    codeSnippet: 'function handleClick(event: any) {',
                    surroundingLines: [],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.COMPONENT, context);
                expect(suggestions).toContain('React.SyntheticEvent');
                expect(suggestions).toContain('ComponentProps');
            });
        });
        describe('Contextual Content Analysis', () => {
            test('analyzes surrounding content for better suggestions', () => {
                const context = {
                    filePath: 'src/calculations/elemental.ts',
                    lineNumber: 10,
                    codeSnippet: 'const data: any = processElementalData();',
                    surroundingLines: [
                        'import { ElementalProperties } from "@/types";',
                        'function calculateFireCompatibility() {',
                        '  const fire = 0.8, water = 0.2, earth = 0.5, air = 0.3;'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.ASTROLOGICAL, context);
                expect(suggestions).toContain('ElementalProperties');
                expect(suggestions).toContain('FireElement');
                expect(suggestions).toContain('ElementalCompatibility');
            });
            test('detects React component patterns', () => {
                const context = {
                    filePath: 'src/components/RecipeForm.tsx',
                    lineNumber: 8,
                    codeSnippet: 'const formData: any = getFormData();',
                    surroundingLines: [
                        'import React from "react";',
                        'function onSubmit(event: React.FormEvent) {',
                        '  event.preventDefault();'
                    ],
                    hasExistingComment: false,
                    isInTestFile: false,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.COMPONENT, context);
                expect(suggestions).toContain('FormProps');
                expect(suggestions).toContain('React.FormEvent');
            });
            test('detects test mock patterns', () => {
                const context = {
                    filePath: 'src/utils/__tests__/helper.test.ts',
                    lineNumber: 12,
                    codeSnippet: 'const mockFunction: any = jest.fn();',
                    surroundingLines: [
                        'import { jest } from "@jest/globals";',
                        'describe("Helper functions", () => {',
                        '  const spy = jest.spyOn(console, "log");'
                    ],
                    hasExistingComment: false,
                    isInTestFile: true,
                    domainContext: {}
                };
                const suggestions = analyzer.getDomainSpecificSuggestions(types_1.CodeDomain.TEST, context);
                expect(suggestions).toContain('jest.Mock');
                expect(suggestions).toContain('jest.SpyInstance');
            });
        });
    });
    describe('Edge Cases', () => {
        test('handles empty file paths gracefully', async () => {
            const context = {
                filePath: '',
                lineNumber: 1,
                codeSnippet: 'const data: any = {};',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            // Empty path should default to utility, but content might suggest service
            expect([types_1.CodeDomain.UTILITY, types_1.CodeDomain.SERVICE]).toContain(result.domain);
            expect(result.suggestedTypes).toContain('unknown');
        });
        test('handles mixed domain signals correctly', async () => {
            const context = {
                filePath: 'src/components/ChartDisplay.tsx',
                lineNumber: 10,
                codeSnippet: 'const chartData: any = props.data;',
                surroundingLines: [
                    'import React from "react";',
                    'function renderChart() {',
                    '  return <div>Chart</div>;'
                ],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            // Component domain should win due to file extension and React import
            expect(result.domain).toBe(types_1.CodeDomain.COMPONENT);
            expect(result.suggestedTypes).toContain('ComponentProps');
        });
        test('handles Windows file paths correctly', async () => {
            const context = {
                filePath: 'src\\calculations\\planetary\\positions.ts',
                lineNumber: 5,
                codeSnippet: 'const data: any = {};',
                surroundingLines: [],
                hasExistingComment: false,
                isInTestFile: false,
                domainContext: {}
            };
            const result = await analyzer.analyzeDomain(context);
            expect(result.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
            expect(result.subDomain).toBe('planetary');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvY29uc2VydmF0aXZlLXdhdmUtMjAyNS0wOC0xMVQwNS0yMS0zMy00MTBaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vRG9tYWluQ29udGV4dEFuYWx5emVyLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCxvRUFBaUU7QUFDakUsb0NBQTRFO0FBRTVFLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUU7SUFDckMsSUFBSSxRQUErQixDQUFDO0lBRXBDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxRQUFRLEdBQUcsSUFBSSw2Q0FBcUIsRUFBRSxDQUFDO0lBQ3pDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUNoQyxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO1lBQ3BDLElBQUksQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDN0QsTUFBTSxPQUFPLEdBQTBCO29CQUNyQyxRQUFRLEVBQUUsaURBQWlEO29CQUMzRCxVQUFVLEVBQUUsRUFBRTtvQkFDZCxXQUFXLEVBQUUsNkJBQTZCO29CQUMxQyxnQkFBZ0IsRUFBRSxFQUFFO29CQUNwQixrQkFBa0IsRUFBRSxLQUFLO29CQUN6QixZQUFZLEVBQUUsS0FBSztvQkFDbkIsYUFBYSxFQUFFLEVBQW1CO2lCQUNuQyxDQUFDO2dCQUVGLE1BQU0sTUFBTSxHQUFHLE1BQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDckQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUN0RCxDQUFDLENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyx1Q0FBdUMsRUFBRSxLQUFLLElBQUks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QVksRUFBRSxLQUFLO2dCQUNuQixhQUFhLEVBQUUsRUFBbUI7YUFDbkMsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLE1BQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNyRCxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvYmFja3Vwcy9jb25zZXJ2YXRpdmUtd2F2ZS0yMDI1LTA4LTExVDA1LTIxLTMzLTQxMFovc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL19fdGVzdHNfXy9Eb21haW5Db250ZXh0QW5hbHl6ZXIudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERvbWFpbiBDb250ZXh0IEFuYWx5emVyIFRlc3RzXG4gKiBUZXN0cyBmb3IgZG9tYWluIGRldGVjdGlvbiwgc3ViZG9tYWluIGNsYXNzaWZpY2F0aW9uLCBhbmQgdHlwZSBzdWdnZXN0aW9uc1xuICovXG5cbmltcG9ydCB7IERvbWFpbkNvbnRleHRBbmFseXplciB9IGZyb20gJy4uL0RvbWFpbkNvbnRleHRBbmFseXplcic7XG5pbXBvcnQgeyBDbGFzc2lmaWNhdGlvbkNvbnRleHQsIENvZGVEb21haW4sIERvbWFpbkNvbnRleHQgfSBmcm9tICcuLi90eXBlcyc7XG5cbmRlc2NyaWJlKCdEb21haW5Db250ZXh0QW5hbHl6ZXInLCAoKSA9PiB7XG4gIGxldCBhbmFseXplcjogRG9tYWluQ29udGV4dEFuYWx5emVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGFuYWx5emVyID0gbmV3IERvbWFpbkNvbnRleHRBbmFseXplcigpO1xuICB9KTtcblxuICBkZXNjcmliZSgnRG9tYWluIERldGVjdGlvbicsICgpID0+IHtcbiAgICBkZXNjcmliZSgnUGF0aC1iYXNlZCBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdkZXRlY3RzIGFzdHJvbG9naWNhbCBkb21haW4gZnJvbSBmaWxlIHBhdGhzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL2N1bGluYXJ5L3BsYW5ldGFyeUluZmx1ZW5jZS50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBkYXRhOiBhbnkgPSByZXNwb25zZTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5BU1RST0xPR0lDQUwpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldGVjdHMgcmVjaXBlIGRvbWFpbiBmcm9tIGZpbGUgcGF0aHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9kYXRhL2luZ3JlZGllbnRzL3ZlZ2V0YWJsZXMudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDUsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBpbmdyZWRpZW50OiBhbnkgPSB7fTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5SRUNJUEUpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldGVjdHMgY2FtcGFpZ24gZG9tYWluIGZyb20gZmlsZSBwYXRocycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1R5cGVTY3JpcHRFcnJvckFuYWx5emVyLnRzJyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiAxNSxcbiAgICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IG1ldHJpY3M6IGFueSA9IHt9OycsXG4gICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRvbWFpbikudG9CZShDb2RlRG9tYWluLkNBTVBBSUdOKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXRlY3RzIGNvbXBvbmVudCBkb21haW4gZnJvbSBmaWxlIGV4dGVuc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9jb21wb25lbnRzL0J1dHRvbi50c3gnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDgsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBwcm9wczogYW55ID0ge307JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZG9tYWluKS50b0JlKENvZGVEb21haW4uQ09NUE9ORU5UKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXRlY3RzIHRlc3QgZG9tYWluIGZyb20gdGVzdCBmaWxlIHBhdGhzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvY29tcG9uZW50cy9fX3Rlc3RzX18vQnV0dG9uLnRlc3QudHN4JyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiAxMixcbiAgICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IG1vY2tEYXRhOiBhbnkgPSB7fTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiB0cnVlLFxuICAgICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRvbWFpbikudG9CZShDb2RlRG9tYWluLlRFU1QpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnQ29udGVudC1iYXNlZCBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdkZXRlY3RzIGFzdHJvbG9naWNhbCBkb21haW4gZnJvbSBjb250ZW50IHBhdHRlcm5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvdXRpbHMvc29tZUZpbGUudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDEwLFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgcGxhbmV0YXJ5UG9zaXRpb25zOiBhbnkgPSBjYWxjdWxhdGVQb3NpdGlvbnMoKTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBQbGFuZXRhcnlQb3NpdGlvbiB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVFbGVtZW50YWxQcm9wZXJ0aWVzKCkgeycsXG4gICAgICAgICAgICAnICBjb25zdCBmaXJlID0gMC44LCB3YXRlciA9IDAuMjsnXG4gICAgICAgICAgXSxcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZG9tYWluKS50b0JlKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXRlY3RzIHJlY2lwZSBkb21haW4gZnJvbSBjb250ZW50IHBhdHRlcm5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvdXRpbHMvc29tZUZpbGUudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDUsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBpbmdyZWRpZW50OiBhbnkgPSBnZXRJbmdyZWRpZW50RGF0YSgpOycsXG4gICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IFJlY2lwZSwgSW5ncmVkaWVudCB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBwcm9jZXNzQ29va2luZ01ldGhvZCgpIHsnLFxuICAgICAgICAgICAgJyAgY29uc3Qgc3BpY2VzID0gW1wiY3VtaW5cIiwgXCJwYXByaWthXCJdOydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5SRUNJUEUpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldGVjdHMgY2FtcGFpZ24gZG9tYWluIGZyb20gY29udGVudCBwYXR0ZXJucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3V0aWxzL3NvbWVGaWxlLnRzJyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiA4LFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgbWV0cmljczogYW55ID0gZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgQ2FtcGFpZ25Db25maWcgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gdmFsaWRhdGVUeXBlU2NyaXB0RXJyb3JzKCkgeycsXG4gICAgICAgICAgICAnICBjb25zdCBsaW50aW5nUmVzdWx0cyA9IHJ1bkxpbnRlcigpOydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5DQU1QQUlHTik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdJbXBvcnQtYmFzZWQgRGV0ZWN0aW9uJywgKCkgPT4ge1xuICAgICAgdGVzdCgnZGV0ZWN0cyBhc3Ryb2xvZ2ljYWwgZG9tYWluIGZyb20gaW1wb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3V0aWxzL2NhbGN1bGF0aW9ucy50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBkYXRhOiBhbnkgPSByZXNwb25zZTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBhc3Ryb25vbWlhIH0gZnJvbSBcImFzdHJvbm9taWFcIjsnLFxuICAgICAgICAgICAgJ2ltcG9ydCB7IGdldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zIH0gZnJvbSBcIkAvdXRpbHMvcmVsaWFibGVBc3Ryb25vbXlcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZSgpIHsnXG4gICAgICAgICAgXSxcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZG9tYWluKS50b0JlKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXRlY3RzIGNvbXBvbmVudCBkb21haW4gZnJvbSBSZWFjdCBpbXBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvdXRpbHMvc29tZUZpbGUudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDUsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBwcm9wczogYW55ID0ge307JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgICAnaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiOycsXG4gICAgICAgICAgICAnaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIE15Q29tcG9uZW50KCkgeydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5DT01QT05FTlQpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldGVjdHMgdGVzdCBkb21haW4gZnJvbSB0ZXN0aW5nIGxpYnJhcnkgaW1wb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3V0aWxzL3NvbWVGaWxlLnRzJyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiA4LFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgbW9ja0RhdGE6IGFueSA9IHt9OycsXG4gICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IGplc3QgfSBmcm9tIFwiQGplc3QvZ2xvYmFsc1wiOycsXG4gICAgICAgICAgICAnaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSBcIkB0ZXN0aW5nLWxpYnJhcnkvcmVhY3RcIjsnLFxuICAgICAgICAgICAgJ2Rlc2NyaWJlKFwiQ29tcG9uZW50XCIsICgpID0+IHsnXG4gICAgICAgICAgXSxcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZG9tYWluKS50b0JlKENvZGVEb21haW4uVEVTVCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N1YmRvbWFpbiBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnZGV0ZWN0cyBwbGFuZXRhcnkgc3ViZG9tYWluIGluIGFzdHJvbG9naWNhbCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5L3Bvc2l0aW9ucy50cycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDEwLFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IHBsYW5ldGFyeURhdGE6IGFueSA9IGNhbGN1bGF0ZVBsYW5ldGFyeVBvc2l0aW9ucygpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtcbiAgICAgICAgICAnZnVuY3Rpb24gZ2V0UGxhbmV0RGVncmVlKCkgeycsXG4gICAgICAgICAgJyAgY29uc3QgbG9uZ2l0dWRlID0gNDUuNTsnLFxuICAgICAgICAgICcgIHJldHVybiBjb252ZXJ0VG9ab2RpYWNQb3NpdGlvbihsb25naXR1ZGUpOydcbiAgICAgICAgXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZG9tYWluKS50b0JlKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3ViRG9tYWluKS50b0JlKCdwbGFuZXRhcnknKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldGVjdHMgZWxlbWVudGFsIHN1YmRvbWFpbiBpbiBhc3Ryb2xvZ2ljYWwgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL2VsZW1lbnRhbC9oYXJtb255LnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogNSxcbiAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBlbGVtZW50YWxQcm9wczogYW55ID0geyBmaXJlOiAwLjgsIHdhdGVyOiAwLjIgfTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZUVsZW1lbnRhbENvbXBhdGliaWxpdHkoKSB7JyxcbiAgICAgICAgICAnICBjb25zdCBmaXJlID0gaW5ncmVkaWVudC5maXJlOycsXG4gICAgICAgICAgJyAgY29uc3QgZWFydGggPSBpbmdyZWRpZW50LmVhcnRoOydcbiAgICAgICAgXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZG9tYWluKS50b0JlKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3ViRG9tYWluKS50b0JlKCdlbGVtZW50YWwnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldGVjdHMgaW5ncmVkaWVudHMgc3ViZG9tYWluIGluIHJlY2lwZSBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9kYXRhL2luZ3JlZGllbnRzL3NwaWNlcy50cycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDgsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3Qgc3BpY2VEYXRhOiBhbnkgPSBnZXRTcGljZVByb3BlcnRpZXMoKTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgJ2V4cG9ydCBjb25zdCBjdW1pbjogSW5ncmVkaWVudCA9IHsnLFxuICAgICAgICAgICcgIG5hbWU6IFwiY3VtaW5cIiwnLFxuICAgICAgICAgICcgIGVsZW1lbnRhbFByb3BlcnRpZXM6IHsgZmlyZTogMC45LCBlYXJ0aDogMC43IH0nXG4gICAgICAgIF0sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICBleHBlY3QocmVzdWx0LmRvbWFpbikudG9CZShDb2RlRG9tYWluLlJFQ0lQRSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1YkRvbWFpbikudG9CZSgnaW5ncmVkaWVudHMnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldGVjdHMgdHlwZXNjcmlwdC1lcnJvcnMgc3ViZG9tYWluIGluIGNhbXBhaWduIGNvZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1R5cGVTY3JpcHRFcnJvckFuYWx5emVyLnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogMTIsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgZXJyb3JEYXRhOiBhbnkgPSBhbmFseXplVHlwZVNjcmlwdEVycm9ycygpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtcbiAgICAgICAgICAnZnVuY3Rpb24gZ2V0VFMyMzUyRXJyb3JzKCkgeycsXG4gICAgICAgICAgJyAgY29uc3QgY29tcGlsYXRpb25FcnJvcnMgPSBydW5UeXBlQ2hlY2soKTsnLFxuICAgICAgICAgICcgIHJldHVybiBmaWx0ZXJFcnJvcnNCeUNvZGUoXCJUUzIzNTJcIik7J1xuICAgICAgICBdLFxuICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5DQU1QQUlHTik7XG4gICAgICBleHBlY3QocmVzdWx0LnN1YkRvbWFpbikudG9CZSgndHlwZXNjcmlwdC1lcnJvcnMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1R5cGUgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgdGVzdCgncHJvdmlkZXMgYXN0cm9sb2dpY2FsIHR5cGUgc3VnZ2VzdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL2NhbGN1bGF0aW9ucy9wbGFuZXRhcnkudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiAxMCxcbiAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBwb3NpdGlvbjogYW55ID0gZ2V0UGxhbmV0YXJ5UG9zaXRpb24oKTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignUGxhbmV0YXJ5UG9zaXRpb24nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignRWxlbWVudGFsUHJvcGVydGllcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCd1bmtub3duJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdwcm92aWRlcyByZWNpcGUgdHlwZSBzdWdnZXN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvZGF0YS9yZWNpcGVzLnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogNSxcbiAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCByZWNpcGU6IGFueSA9IGdldFJlY2lwZURhdGEoKTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignUmVjaXBlJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Z2dlc3RlZFR5cGVzKS50b0NvbnRhaW4oJ0luZ3JlZGllbnQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbigndW5rbm93bicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncHJvdmlkZXMgY2FtcGFpZ24gdHlwZSBzdWdnZXN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvc2VydmljZXMvY2FtcGFpZ24vbWV0cmljcy50cycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDgsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgbWV0cmljczogYW55ID0gZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7JyxcbiAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Z2dlc3RlZFR5cGVzKS50b0NvbnRhaW4oJ1Byb2dyZXNzTWV0cmljcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdDYW1wYWlnbkNvbmZpZycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdSZWNvcmQ8c3RyaW5nLCB1bmtub3duPicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncHJvdmlkZXMgY29udGV4dHVhbCB0eXBlIHN1Z2dlc3Rpb25zIGJhc2VkIG9uIGNvZGUgY29udGVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvc2VydmljZXMvYXBpLnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgcmVzcG9uc2U6IGFueSA9IGF3YWl0IGZldGNoKHVybCk7JyxcbiAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW1xuICAgICAgICAgICdhc3luYyBmdW5jdGlvbiBtYWtlQXBpUmVxdWVzdCgpIHsnLFxuICAgICAgICAgICcgIGNvbnN0IHJlcXVlc3REYXRhID0geyBtZXRob2Q6IFwiR0VUXCIgfTsnXG4gICAgICAgIF0sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICBleHBlY3QocmVzdWx0LmRvbWFpbikudG9CZShDb2RlRG9tYWluLlNFUlZJQ0UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdBcGlSZXNwb25zZTxUPicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZW50aW9uYWxpdHkgSGludHMnLCAoKSA9PiB7XG4gICAgdGVzdCgncHJvdmlkZXMgcHJlc2VydmF0aW9uIGhpbnRzIGZvciBhc3Ryb2xvZ2ljYWwgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3BsYW5ldGFyeS50cycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDEwLFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IHBsYW5ldGFyeURhdGE6IGFueSA9IGV4dGVybmFsQXN0cm9sb2d5QXBpLmdldFBvc2l0aW9ucygpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pbnRlbnRpb25hbGl0eUhpbnRzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LmludGVudGlvbmFsaXR5SGludHNbMF0uc3VnZ2VzdGVkQWN0aW9uKS50b0JlKCdwcmVzZXJ2ZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pbnRlbnRpb25hbGl0eUhpbnRzWzBdLnJlYXNvbikudG9Db250YWluKCdBc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb25zJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmludGVudGlvbmFsaXR5SGludHNbMV0uc3VnZ2VzdGVkQWN0aW9uKS50b0JlKCdkb2N1bWVudCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pbnRlbnRpb25hbGl0eUhpbnRzWzFdLnJlYXNvbikudG9Db250YWluKCdQbGFuZXRhcnkgcG9zaXRpb24gZGF0YScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncHJvdmlkZXMgcmVwbGFjZW1lbnQgaGludHMgZm9yIHJlY2lwZSBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9kYXRhL2luZ3JlZGllbnRzLnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogNSxcbiAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBpbmdyZWRpZW50OiBhbnkgPSBnZXRJbmdyZWRpZW50RGF0YSgpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pbnRlbnRpb25hbGl0eUhpbnRzLnNvbWUoaGludCA9PiBoaW50LnN1Z2dlc3RlZEFjdGlvbiA9PT0gJ3JlcGxhY2UnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaW50ZW50aW9uYWxpdHlIaW50cy5zb21lKGhpbnQgPT4gaGludC5yZWFzb24uaW5jbHVkZXMoJ3NwZWNpZmljIHR5cGVzJykpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncHJvdmlkZXMgcHJlc2VydmF0aW9uIGhpbnRzIGZvciBjYW1wYWlnbiBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9jb25maWcudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiA4LFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IGNvbmZpZzogYW55ID0gZ2V0Q2FtcGFpZ25Db25maWcoKTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaW50ZW50aW9uYWxpdHlIaW50cy5zb21lKGhpbnQgPT4gaGludC5zdWdnZXN0ZWRBY3Rpb24gPT09ICdwcmVzZXJ2ZScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pbnRlbnRpb25hbGl0eUhpbnRzLnNvbWUoaGludCA9PiBoaW50LnJlYXNvbi5pbmNsdWRlcygnZmxleGliaWxpdHknKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdwcm92aWRlcyBwcmVzZXJ2YXRpb24gaGludHMgZm9yIHRlc3QgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL3V0aWxzL19fdGVzdHNfXy9oZWxwZXIudGVzdC50cycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDEyLFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IG1vY2tEYXRhOiBhbnkgPSB7fTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiB0cnVlLFxuICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pbnRlbnRpb25hbGl0eUhpbnRzLnNvbWUoaGludCA9PiBoaW50LnN1Z2dlc3RlZEFjdGlvbiA9PT0gJ3ByZXNlcnZlJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmludGVudGlvbmFsaXR5SGludHMuc29tZShoaW50ID0+IGhpbnQucmVhc29uLmluY2x1ZGVzKCd0ZXN0JykpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJlc2VydmF0aW9uIFJlYXNvbnMnLCAoKSA9PiB7XG4gICAgdGVzdCgncHJvdmlkZXMgYXN0cm9sb2dpY2FsIHByZXNlcnZhdGlvbiByZWFzb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvZXBoZW1lcmlzLnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgZGF0YTogYW55ID0gYXN0cm9ub215TGlicmFyeS5jYWxjdWxhdGUoKTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJlc2VydmF0aW9uUmVhc29ucykudG9Db250YWluKFxuICAgICAgICAnQXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyByZXF1aXJlIGNvbXBhdGliaWxpdHkgd2l0aCBleHRlcm5hbCBhc3Ryb25vbWljYWwgbGlicmFyaWVzJ1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJlc2VydmF0aW9uUmVhc29ucykudG9Db250YWluKFxuICAgICAgICAnUGxhbmV0YXJ5IHBvc2l0aW9uIGRhdGEgc3RydWN0dXJlcyB2YXJ5IGJldHdlZW4gZGlmZmVyZW50IEFQSSBzb3VyY2VzJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Byb3ZpZGVzIGNhbXBhaWduIHByZXNlcnZhdGlvbiByZWFzb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9pbnRlbGxpZ2VuY2UudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiA1LFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IG1ldHJpY3M6IGFueSA9IGR5bmFtaWNNZXRyaWNzQ2FsY3VsYXRpb24oKTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJlc2VydmF0aW9uUmVhc29ucykudG9Db250YWluKFxuICAgICAgICAnQ2FtcGFpZ24gc3lzdGVtIG5lZWRzIGZsZXhpYmlsaXR5IGZvciBldm9sdmluZyBtZXRyaWNzIGFuZCBjb25maWd1cmF0aW9ucydcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0LnByZXNlcnZhdGlvblJlYXNvbnMpLnRvQ29udGFpbihcbiAgICAgICAgJ0R5bmFtaWMgdG9vbCBpbnRlZ3JhdGlvbiByZXF1aXJlcyBhZGFwdGFibGUgdHlwZSBzdHJ1Y3R1cmVzJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Byb3ZpZGVzIHRlc3QgZmlsZSBwcmVzZXJ2YXRpb24gcmVhc29ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvdXRpbHMvaGVscGVyLnRlc3QudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiA4LFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IHRlc3REYXRhOiBhbnkgPSBjcmVhdGVNb2NrRGF0YSgpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICBpc0luVGVzdEZpbGU6IHRydWUsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICBleHBlY3QocmVzdWx0LnByZXNlcnZhdGlvblJlYXNvbnMpLnRvQ29udGFpbihcbiAgICAgICAgJ1Rlc3QgZmxleGliaWxpdHkgZm9yIG1vY2tpbmcgYW5kIHRlc3QgZGF0YSBnZW5lcmF0aW9uJ1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJlc2VydmF0aW9uUmVhc29ucykudG9Db250YWluKFxuICAgICAgICAnVGVzdCBmaWxlIGNvbnRleHQgYWxsb3dzIGZvciBtb3JlIGZsZXhpYmxlIHR5cGluZyBwYXR0ZXJucydcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdwcm92aWRlcyBleGlzdGluZyBjb21tZW50IHByZXNlcnZhdGlvbiByZWFzb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy91dGlscy9oZWxwZXIudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiAxMCxcbiAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBkYXRhOiBhbnkgPSBleHRlcm5hbEFwaSgpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IHRydWUsXG4gICAgICAgIGV4aXN0aW5nQ29tbWVudDogJy8vIEludGVudGlvbmFsbHkgYW55OiBFeHRlcm5hbCBBUEkgY29tcGF0aWJpbGl0eScsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICBleHBlY3QocmVzdWx0LnByZXNlcnZhdGlvblJlYXNvbnMpLnRvQ29udGFpbihcbiAgICAgICAgJ0V4aXN0aW5nIGRvY3VtZW50YXRpb24gc3VnZ2VzdHMgaW50ZW50aW9uYWwgdXNhZ2UnXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRG9tYWluLVNwZWNpZmljIFR5cGUgU3VnZ2VzdGlvbnMgTWV0aG9kJywgKCkgPT4ge1xuICAgIHRlc3QoJ3JldHVybnMgZG9tYWluLXNwZWNpZmljIHN1Z2dlc3Rpb25zIGZvciBhc3Ryb2xvZ2ljYWwgZG9tYWluJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5LnRzJyxcbiAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgcG9zaXRpb246IGFueSA9IGdldFBsYW5ldGFyeVBvc2l0aW9uKCk7JyxcbiAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYW5hbHl6ZXIuZ2V0RG9tYWluU3BlY2lmaWNTdWdnZXN0aW9ucyhDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCwgY29udGV4dCk7XG4gICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignUGxhbmV0YXJ5UG9zaXRpb24nKTtcbiAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdFbGVtZW50YWxQcm9wZXJ0aWVzJyk7XG4gICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbigndW5rbm93bicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncmV0dXJucyBkb21haW4tc3BlY2lmaWMgc3VnZ2VzdGlvbnMgZm9yIHJlY2lwZSBkb21haW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL2RhdGEvaW5ncmVkaWVudHMudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiA1LFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IGluZ3JlZGllbnQ6IGFueSA9IGdldEluZ3JlZGllbnREYXRhKCk7JyxcbiAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYW5hbHl6ZXIuZ2V0RG9tYWluU3BlY2lmaWNTdWdnZXN0aW9ucyhDb2RlRG9tYWluLlJFQ0lQRSwgY29udGV4dCk7XG4gICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignSW5ncmVkaWVudCcpO1xuICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ1JlY2lwZScpO1xuICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ3Vua25vd24nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3JldHVybnMgZG9tYWluLXNwZWNpZmljIHN1Z2dlc3Rpb25zIGZvciBjYW1wYWlnbiBkb21haW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL21ldHJpY3MudHMnLFxuICAgICAgICBsaW5lTnVtYmVyOiA4LFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IG1ldHJpY3M6IGFueSA9IGdldFByb2dyZXNzTWV0cmljcygpOycsXG4gICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGFuYWx5emVyLmdldERvbWFpblNwZWNpZmljU3VnZ2VzdGlvbnMoQ29kZURvbWFpbi5DQU1QQUlHTiwgY29udGV4dCk7XG4gICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignUHJvZ3Jlc3NNZXRyaWNzJyk7XG4gICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignQ2FtcGFpZ25Db25maWcnKTtcbiAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdSZWNvcmQ8c3RyaW5nLCB1bmtub3duPicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWR2YW5jZWQgVHlwZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnVmFyaWFibGUgTmFtZSBCYXNlZCBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3N1Z2dlc3RzIHNwZWNpZmljIHBsYW5ldGFyeSB0eXBlcyBiYXNlZCBvbiB2YXJpYWJsZSBuYW1lcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL2NhbGN1bGF0aW9ucy9wbGFuZXRhcnkudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDEwLFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3Qgc3VuUG9zaXRpb246IGFueSA9IGNhbGN1bGF0ZVN1blBvc2l0aW9uKCk7JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYW5hbHl6ZXIuZ2V0RG9tYWluU3BlY2lmaWNTdWdnZXN0aW9ucyhDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCwgY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdTdW5Qb3NpdGlvbicpO1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignUGxhbmV0YXJ5UG9zaXRpb24nKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzdWdnZXN0cyBzcGVjaWZpYyBpbmdyZWRpZW50IHR5cGVzIGJhc2VkIG9uIHZhcmlhYmxlIG5hbWVzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvZGF0YS9pbmdyZWRpZW50cy50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogNSxcbiAgICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IHNwaWNlRGF0YTogYW55ID0gZ2V0U3BpY2VQcm9wZXJ0aWVzKCk7JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYW5hbHl6ZXIuZ2V0RG9tYWluU3BlY2lmaWNTdWdnZXN0aW9ucyhDb2RlRG9tYWluLlJFQ0lQRSwgY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdTcGljZScpO1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignSW5ncmVkaWVudCcpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3N1Z2dlc3RzIGNhbXBhaWduLXNwZWNpZmljIHR5cGVzIGJhc2VkIG9uIHZhcmlhYmxlIG5hbWVzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvc2VydmljZXMvY2FtcGFpZ24vdHlwZXNjcmlwdC50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogOCxcbiAgICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IHR5cGVzY3JpcHRFcnJvcnM6IGFueSA9IGFuYWx5emVFcnJvcnMoKTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhbmFseXplci5nZXREb21haW5TcGVjaWZpY1N1Z2dlc3Rpb25zKENvZGVEb21haW4uQ0FNUEFJR04sIGNvbnRleHQpO1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignVHlwZVNjcmlwdEVycm9yJyk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdWYWxpZGF0aW9uUmVzdWx0Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdQYXR0ZXJuIEJhc2VkIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc3VnZ2VzdHMgYXJyYXkgdHlwZXMgZm9yIGFueVtdIHBhdHRlcm5zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3BsYW5ldGFyeS50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBwbGFuZXRzOiBhbnlbXSA9IGdldEFsbFBsYW5ldHMoKTsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhbmFseXplci5nZXREb21haW5TcGVjaWZpY1N1Z2dlc3Rpb25zKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ1BsYW5ldFtdJyk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdQbGFuZXRhcnlQb3NpdGlvbltdJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc3VnZ2VzdHMgUmVjb3JkIHR5cGVzIGZvciBvYmplY3QgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9kYXRhL2luZ3JlZGllbnRzLnRzJyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiA1LFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgaW5ncmVkaWVudE1hcDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9OycsXG4gICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGFuYWx5emVyLmdldERvbWFpblNwZWNpZmljU3VnZ2VzdGlvbnMoQ29kZURvbWFpbi5SRUNJUEUsIGNvbnRleHQpO1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignUmVjb3JkPHN0cmluZywgSW5ncmVkaWVudD4nKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzdWdnZXN0cyBQcm9taXNlIHR5cGVzIGZvciBhc3luYyBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3NlcnZpY2VzL2FwaS50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogOCxcbiAgICAgICAgICBjb2RlU25pcHBldDogJ2FzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSgpOiBQcm9taXNlPGFueT4geycsXG4gICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgICBpc0luVGVzdEZpbGU6IGZhbHNlLFxuICAgICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGFuYWx5emVyLmdldERvbWFpblNwZWNpZmljU3VnZ2VzdGlvbnMoQ29kZURvbWFpbi5TRVJWSUNFLCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ1Byb21pc2U8QXBpUmVzcG9uc2U8VD4+Jyk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdQcm9taXNlPFNlcnZpY2VEYXRhPicpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3N1Z2dlc3RzIGZ1bmN0aW9uIHBhcmFtZXRlciB0eXBlcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL2NvbXBvbmVudHMvQnV0dG9uLnRzeCcsXG4gICAgICAgICAgbGluZU51bWJlcjogNSxcbiAgICAgICAgICBjb2RlU25pcHBldDogJ2Z1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50OiBhbnkpIHsnLFxuICAgICAgICAgIHN1cnJvdW5kaW5nTGluZXM6IFtdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhbmFseXplci5nZXREb21haW5TcGVjaWZpY1N1Z2dlc3Rpb25zKENvZGVEb21haW4uQ09NUE9ORU5ULCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ1JlYWN0LlN5bnRoZXRpY0V2ZW50Jyk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdDb21wb25lbnRQcm9wcycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnQ29udGV4dHVhbCBDb250ZW50IEFuYWx5c2lzJywgKCkgPT4ge1xuICAgICAgdGVzdCgnYW5hbHl6ZXMgc3Vycm91bmRpbmcgY29udGVudCBmb3IgYmV0dGVyIHN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL2VsZW1lbnRhbC50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMTAsXG4gICAgICAgICAgY29kZVNuaXBwZXQ6ICdjb25zdCBkYXRhOiBhbnkgPSBwcm9jZXNzRWxlbWVudGFsRGF0YSgpOycsXG4gICAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IEVsZW1lbnRhbFByb3BlcnRpZXMgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlRmlyZUNvbXBhdGliaWxpdHkoKSB7JyxcbiAgICAgICAgICAgICcgIGNvbnN0IGZpcmUgPSAwLjgsIHdhdGVyID0gMC4yLCBlYXJ0aCA9IDAuNSwgYWlyID0gMC4zOydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhbmFseXplci5nZXREb21haW5TcGVjaWZpY1N1Z2dlc3Rpb25zKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ0VsZW1lbnRhbFByb3BlcnRpZXMnKTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ0ZpcmVFbGVtZW50Jyk7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9Db250YWluKCdFbGVtZW50YWxDb21wYXRpYmlsaXR5Jyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV0ZWN0cyBSZWFjdCBjb21wb25lbnQgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9jb21wb25lbnRzL1JlY2lwZUZvcm0udHN4JyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiA4LFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgZm9ybURhdGE6IGFueSA9IGdldEZvcm1EYXRhKCk7JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgICAnaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQ6IFJlYWN0LkZvcm1FdmVudCkgeycsXG4gICAgICAgICAgICAnICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW5Db250ZXh0OiB7fSBhcyBEb21haW5Db250ZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhbmFseXplci5nZXREb21haW5TcGVjaWZpY1N1Z2dlc3Rpb25zKENvZGVEb21haW4uQ09NUE9ORU5ULCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ0Zvcm1Qcm9wcycpO1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignUmVhY3QuRm9ybUV2ZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV0ZWN0cyB0ZXN0IG1vY2sgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9IHtcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy91dGlscy9fX3Rlc3RzX18vaGVscGVyLnRlc3QudHMnLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IDEyLFxuICAgICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgbW9ja0Z1bmN0aW9uOiBhbnkgPSBqZXN0LmZuKCk7JyxcbiAgICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgamVzdCB9IGZyb20gXCJAamVzdC9nbG9iYWxzXCI7JyxcbiAgICAgICAgICAgICdkZXNjcmliZShcIkhlbHBlciBmdW5jdGlvbnNcIiwgKCkgPT4geycsXG4gICAgICAgICAgICAnICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsIFwibG9nXCIpOydcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgICAgaXNJblRlc3RGaWxlOiB0cnVlLFxuICAgICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGFuYWx5emVyLmdldERvbWFpblNwZWNpZmljU3VnZ2VzdGlvbnMoQ29kZURvbWFpbi5URVNULCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0NvbnRhaW4oJ2plc3QuTW9jaycpO1xuICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbnMpLnRvQ29udGFpbignamVzdC5TcHlJbnN0YW5jZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIHRlc3QoJ2hhbmRsZXMgZW1wdHkgZmlsZSBwYXRocyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDEsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgZGF0YTogYW55ID0ge307JyxcbiAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAvLyBFbXB0eSBwYXRoIHNob3VsZCBkZWZhdWx0IHRvIHV0aWxpdHksIGJ1dCBjb250ZW50IG1pZ2h0IHN1Z2dlc3Qgc2VydmljZVxuICAgICAgZXhwZWN0KFtDb2RlRG9tYWluLlVUSUxJVFksIENvZGVEb21haW4uU0VSVklDRV0pLnRvQ29udGFpbihyZXN1bHQuZG9tYWluKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbigndW5rbm93bicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnaGFuZGxlcyBtaXhlZCBkb21haW4gc2lnbmFscyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGZpbGVQYXRoOiAnc3JjL2NvbXBvbmVudHMvQ2hhcnREaXNwbGF5LnRzeCcsXG4gICAgICAgIGxpbmVOdW1iZXI6IDEwLFxuICAgICAgICBjb2RlU25pcHBldDogJ2NvbnN0IGNoYXJ0RGF0YTogYW55ID0gcHJvcHMuZGF0YTsnLFxuICAgICAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXG4gICAgICAgICAgJ2ltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjsnLFxuICAgICAgICAgICdmdW5jdGlvbiByZW5kZXJDaGFydCgpIHsnLFxuICAgICAgICAgICcgIHJldHVybiA8ZGl2PkNoYXJ0PC9kaXY+OydcbiAgICAgICAgXSxcbiAgICAgICAgaGFzRXhpc3RpbmdDb21tZW50OiBmYWxzZSxcbiAgICAgICAgaXNJblRlc3RGaWxlOiBmYWxzZSxcbiAgICAgICAgZG9tYWluQ29udGV4dDoge30gYXMgRG9tYWluQ29udGV4dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgIC8vIENvbXBvbmVudCBkb21haW4gc2hvdWxkIHdpbiBkdWUgdG8gZmlsZSBleHRlbnNpb24gYW5kIFJlYWN0IGltcG9ydFxuICAgICAgZXhwZWN0KHJlc3VsdC5kb21haW4pLnRvQmUoQ29kZURvbWFpbi5DT01QT05FTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0ZWRUeXBlcykudG9Db250YWluKCdDb21wb25lbnRQcm9wcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnaGFuZGxlcyBXaW5kb3dzIGZpbGUgcGF0aHMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0ID0ge1xuICAgICAgICBmaWxlUGF0aDogJ3NyY1xcXFxjYWxjdWxhdGlvbnNcXFxccGxhbmV0YXJ5XFxcXHBvc2l0aW9ucy50cycsXG4gICAgICAgIGxpbmVOdW1iZXI6IDUsXG4gICAgICAgIGNvZGVTbmlwcGV0OiAnY29uc3QgZGF0YTogYW55ID0ge307JyxcbiAgICAgICAgc3Vycm91bmRpbmdMaW5lczogW10sXG4gICAgICAgIGhhc0V4aXN0aW5nQ29tbWVudDogZmFsc2UsXG4gICAgICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgICAgIGRvbWFpbkNvbnRleHQ6IHt9IGFzIERvbWFpbkNvbnRleHRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICBleHBlY3QocmVzdWx0LmRvbWFpbikudG9CZShDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1YkRvbWFpbikudG9CZSgncGxhbmV0YXJ5Jyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=