e1b241687c5da6b8de5e5fad625a8c02
"use strict";
/**
 * Comprehensive Tests for Astrological ESLint Rules
 *
 * Tests the custom ESLint plugin rules for astrological calculations
 * to ensure they properly validate planetary positions, elemental properties,
 * and transit date validation patterns.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const eslint_1 = require("eslint");
describe('Astrological ESLint Rules', () => {
    let eslint;
    beforeAll(() => {
        // Create ESLint instance with our custom rules
        eslint = new eslint_1.ESLint({
            baseConfig: {
                languageOptions: {
                    ecmaVersion: 2022,
                    sourceType: 'module',
                    parser: require('@typescript-eslint/parser'),
                    parserOptions: {
                        ecmaFeatures: {
                            jsx: true
                        }
                    }
                },
                plugins: {
                    astrological: require('../../eslint-plugins/astrological-rules.cjs')
                },
                rules: {
                    'astrological/preserve-planetary-constants': 'error',
                    'astrological/validate-planetary-position-structure': 'error',
                    'astrological/validate-elemental-properties': 'error',
                    'astrological/require-transit-date-validation': 'warn',
                    'astrological/preserve-fallback-values': 'error'
                }
            },
            useEslintrc: false
        });
    });
    describe('preserve-planetary-constants rule', () => {
        test('should error when modifying protected constants', async () => {
            const code = `
        const DEGREES_PER_SIGN = 30;
        DEGREES_PER_SIGN = 25; // This should error
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/preserve-planetary-constants');
            expect(messages[0].message).toContain('should not be modified');
        });
        test('should error when modifying constant object properties', async () => {
            const code = `
        const RELIABLE_POSITIONS = { sun: { sign: 'aries' } };
        RELIABLE_POSITIONS.sun = { sign: 'taurus' }; // This should error
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/preserve-planetary-constants');
            expect(messages[0].message).toContain('should not be modified');
        });
        test('should error when using update operators on constants', async () => {
            const code = `
        let MAX_LONGITUDE = 360;
        MAX_LONGITUDE++; // This should error
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/preserve-planetary-constants');
            expect(messages[0].message).toContain('should not be modified');
        });
        test('should allow using constants without modification', async () => {
            const code = `
        const DEGREES_PER_SIGN = 30;
        const angle = DEGREES_PER_SIGN * 2; // This should be fine
        console.log(RELIABLE_POSITIONS.sun.sign); // This should be fine
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
    describe('validate-planetary-position-structure rule', () => {
        test('should error when planetary position missing required properties', async () => {
            const code = `
        const position = {
          sign: 'aries',
          degree: 15
          // Missing exactLongitude and isRetrograde
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/validate-planetary-position-structure');
            expect(messages[0].message).toContain('missing required properties');
            expect(messages[0].message).toContain('exactLongitude');
            expect(messages[0].message).toContain('isRetrograde');
        });
        test('should pass when planetary position has all required properties', async () => {
            const code = `
        const position = {
          sign: 'aries',
          degree: 15.5,
          exactLongitude: 15.5,
          isRetrograde: false
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
        test('should not flag non-planetary objects', async () => {
            const code = `
        const config = {
          timeout: 5000,
          retries: 3
        };

        const user = {
          name: 'John',
          age: 30
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
    describe('validate-elemental-properties rule', () => {
        test('should error when elemental properties missing required elements', async () => {
            const code = `
        const properties = {
          Fire: 0.8,
          Water: 0.2
          // Missing Earth and Air
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/validate-elemental-properties');
            expect(messages[0].message).toContain('missing required elements');
            expect(messages[0].message).toContain('Earth');
            expect(messages[0].message).toContain('Air');
        });
        test('should error when using invalid element names', async () => {
            const code = `
        const properties = {
          Fire: 0.5,
          Water: 0.3,
          Earth: 0.1,
          Wind: 0.1 // Should be Air
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/validate-elemental-properties');
            expect(messages[0].message).toContain('Invalid element names');
            expect(messages[0].message).toContain('Wind');
        });
        test('should error when element values are out of range', async () => {
            const code = `
        const properties = {
          Fire: 1.5, // Too high
          Water: -0.1, // Too low
          Earth: 0.3,
          Air: 0.2
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(2);
            expect(messages.some(m => m.message.includes('1.5'))).toBe(true);
            expect(messages.some(m => m.message.includes('-0.1'))).toBe(true);
        });
        test('should pass when elemental properties are valid', async () => {
            const code = `
        const properties = {
          Fire: 0.7,
          Water: 0.1,
          Earth: 0.1,
          Air: 0.1
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
    describe('require-transit-date-validation rule', () => {
        test('should warn when astrological file lacks validation import', async () => {
            const code = `
        // This is in a calculations file but has no validation
        function calculatePlanetaryInfluence() {
          return { influence: 0.8 };
        }
      `;
            const results = eslint.lintText(code, {
                filePath: 'src/calculations/planetary.ts'
            });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/require-transit-date-validation');
            expect(messages[0].message).toContain('should import transit validation utilities');
        });
        test('should warn when validation is imported but not used', async () => {
            const code = `
        import { validateTransitDate } from '@/utils/astrology/transitValidation';

        function calculatePlanetaryInfluence() {
          // Validation imported but not called
          return { influence: 0.8 };
        }
      `;
            const results = eslint.lintText(code, {
                filePath: 'src/calculations/planetary.ts'
            });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/require-transit-date-validation');
            expect(messages[0].message).toContain('Consider adding transit date validation calls');
        });
        test('should pass when validation is properly used', async () => {
            const code = `
        import { validateTransitDate } from '@/utils/astrology/transitValidation';

        function calculatePlanetaryInfluence(planet, date) {
          const isValid = validateTransitDate(planet, date, 'aries', transitDates);
          return { influence: isValid ? 0.8 : 0.5 };
        }
      `;
            const results = eslint.lintText(code, {
                filePath: 'src/calculations/planetary.ts'
            });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
        test('should not flag non-astrological files', async () => {
            const code = `
        function regularFunction() {
          return { result: 'success' };
        }
      `;
            const results = eslint.lintText(code, {
                filePath: 'src/components/Button.tsx'
            });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
    describe('preserve-fallback-values rule', () => {
        test('should error when fallback variable assigned null', async () => {
            const code = `
        let FALLBACK_POSITIONS = null; // This should error
        const RELIABLE_DATA = undefined; // This should error
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(2);
            expect(messages[0].ruleId).toBe('astrological/preserve-fallback-values');
            expect(messages[1].ruleId).toBe('astrological/preserve-fallback-values');
            expect(messages.some(m => m.message.includes('FALLBACK_POSITIONS'))).toBe(true);
            expect(messages.some(m => m.message.includes('RELIABLE_DATA'))).toBe(true);
        });
        test('should error when fallback variable reassigned to null', async () => {
            const code = `
        let MARCH2025_POSITIONS = { sun: { sign: 'aries' } };
        MARCH2025_POSITIONS = null; // This should error
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(1);
            expect(messages[0].ruleId).toBe('astrological/preserve-fallback-values');
            expect(messages[0].message).toContain('should not be assigned null');
        });
        test('should allow valid fallback assignments', async () => {
            const code = `
        const FALLBACK_POSITIONS = {
          sun: { sign: 'aries', degree: 8.5 }
        };

        let RELIABLE_DATA = getReliableData
        RELIABLE_DATA = { updated: true };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
        test('should not flag non-fallback variables', async () => {
            const code = `
        let regularVariable = null;
        const anotherVar = undefined;
        regularVariable = null;
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
    describe('Integration with existing ESLint configuration', () => {
        test('should work with TypeScript files', async () => {
            const code = `
        interface PlanetaryPosition {
          sign: string;
          degree: number;
          exactLongitude: number;
          isRetrograde: boolean;
        }

        const position: PlanetaryPosition = {
          sign: 'aries',
          degree: 15.5,
          exactLongitude: 15.5,
          isRetrograde: false
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
        test('should work with React components', async () => {
            const code = `
        import React from 'react';

        interface Props {
          elementalProperties: {
            Fire: number;
            Water: number;
            Earth: number;
            Air: number;
          };
        }

        const ElementalDisplay: React.FC<Props> = ({ elementalProperties }) => {
          return <div>Elemental display</div>;
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.tsx' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
    describe('Rule performance and edge cases', () => {
        test('should handle large files efficiently', async () => {
            const largeCode = `
        ${Array(100).fill(0).map((_, i) => `
          const position${i} = {
            sign: 'aries',
            degree: ${i},
            exactLongitude: ${i},
            isRetrograde: false
          };
        `).join('\n')}
      `;
            const startTime = Date.now();
            const results = eslint.lintText(largeCode, { filePath: 'test.ts' });
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
            expect(results[0].messages).toHaveLength(0);
        });
        test('should handle malformed code gracefully', async () => {
            const malformedCode = `
        const incomplete = {
          sign: 'aries'
          // Missing comma and closing brace
      `;
            // This should not throw an error, even with malformed code
            const results = eslint.lintText(malformedCode, { filePath: 'test.ts' });
            // ESLint should handle syntax errors, our rules should not crash
            expect(results).toBeDefined();
        });
        test('should handle nested objects correctly', async () => {
            const code = `
        const planetData = {
          mercury: {
            position: {
              sign: 'gemini',
              degree: 10.5,
              exactLongitude: 70.5,
              isRetrograde: true
            },
            properties: {
              Fire: 0.3,
              Water: 0.2,
              Earth: 0.2,
              Air: 0.3
            }
          }
        };
      `;
            const results = eslint.lintText(code, { filePath: 'test.ts' });
            const messages = results[0].messages;
            expect(messages).toHaveLength(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vbGludGluZy9Bc3Ryb2xvZ2ljYWxSdWxlc1ZhbGlkYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HOztBQUdILG1DQUFnQztBQUVoQyxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLElBQUksTUFBYyxDQUFDO0lBRW5CLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYiwrQ0FBK0M7UUFDL0MsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDO1lBQ2xCLFVBQVUsRUFBRTtnQkFDVixlQUFlLEVBQUU7b0JBQ2YsV0FBVyxFQUFFLElBQUk7b0JBQ2pCLFVBQVUsRUFBRSxRQUFRO29CQUNwQixNQUFNLEVBQUUsT0FBTyxDQUFDLDJCQUEyQixDQUFDO29CQUM1QyxhQUFhLEVBQUU7d0JBQ2IsWUFBWSxFQUFFOzRCQUNaLEdBQUcsRUFBRSxJQUFJO3lCQUNWO3FCQUNGO2lCQUNGO2dCQUNELE9BQU8sRUFBRTtvQkFDUCxZQUFZLEVBQUUsT0FBTyxDQUFDLDZDQUE2QyxDQUFDO2lCQUNyRTtnQkFDRCxLQUFLLEVBQUU7b0JBQ0wsMkNBQTJDLEVBQUUsT0FBTztvQkFDcEQsb0RBQW9ELEVBQUUsT0FBTztvQkFDN0QsNENBQTRDLEVBQUUsT0FBTztvQkFDckQsOENBQThDLEVBQUUsTUFBTTtvQkFDdEQsdUNBQXVDLEVBQUUsT0FBTztpQkFDakQ7YUFDRjtZQUNELFdBQVcsRUFBRSxLQUFLO1NBQ25CLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtRQUNqRCxJQUFJLENBQUMsaURBQWlELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDakUsTUFBTSxJQUFJLEdBQUc7OztPQUdaLENBQUM7WUFFRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLFFBQVEs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O1FBQ2hDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHdDQUF3QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3hELE1BQU0sSUFBSSxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7OztPQWlCWixDQUFDO1lBRUYsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztZQUMvRCxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO1lBRXJDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvX190ZXN0c19fL2xpbnRpbmcvQXN0cm9sb2dpY2FsUnVsZXNWYWxpZGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wcmVoZW5zaXZlIFRlc3RzIGZvciBBc3Ryb2xvZ2ljYWwgRVNMaW50IFJ1bGVzXG4gKlxuICogVGVzdHMgdGhlIGN1c3RvbSBFU0xpbnQgcGx1Z2luIHJ1bGVzIGZvciBhc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb25zXG4gKiB0byBlbnN1cmUgdGhleSBwcm9wZXJseSB2YWxpZGF0ZSBwbGFuZXRhcnkgcG9zaXRpb25zLCBlbGVtZW50YWwgcHJvcGVydGllcyxcbiAqIGFuZCB0cmFuc2l0IGRhdGUgdmFsaWRhdGlvbiBwYXR0ZXJucy5cbiAqL1xuXG5cbmltcG9ydCB7IEVTTGludCB9IGZyb20gJ2VzbGludCc7XG5cbmRlc2NyaWJlKCdBc3Ryb2xvZ2ljYWwgRVNMaW50IFJ1bGVzJywgKCkgPT4ge1xuICBsZXQgZXNsaW50OiBFU0xpbnQ7XG5cbiAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICAvLyBDcmVhdGUgRVNMaW50IGluc3RhbmNlIHdpdGggb3VyIGN1c3RvbSBydWxlc1xuICAgIGVzbGludCA9IG5ldyBFU0xpbnQoe1xuICAgICAgYmFzZUNvbmZpZzoge1xuICAgICAgICBsYW5ndWFnZU9wdGlvbnM6IHtcbiAgICAgICAgICBlY21hVmVyc2lvbjogMjAyMixcbiAgICAgICAgICBzb3VyY2VUeXBlOiAnbW9kdWxlJyxcbiAgICAgICAgICBwYXJzZXI6IHJlcXVpcmUoJ0B0eXBlc2NyaXB0LWVzbGludC9wYXJzZXInKSxcbiAgICAgICAgICBwYXJzZXJPcHRpb25zOiB7XG4gICAgICAgICAgICBlY21hRmVhdHVyZXM6IHtcbiAgICAgICAgICAgICAganN4OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgYXN0cm9sb2dpY2FsOiByZXF1aXJlKCcuLi8uLi9lc2xpbnQtcGx1Z2lucy9hc3Ryb2xvZ2ljYWwtcnVsZXMuY2pzJylcbiAgICAgICAgfSxcbiAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAnYXN0cm9sb2dpY2FsL3ByZXNlcnZlLXBsYW5ldGFyeS1jb25zdGFudHMnOiAnZXJyb3InLFxuICAgICAgICAgICdhc3Ryb2xvZ2ljYWwvdmFsaWRhdGUtcGxhbmV0YXJ5LXBvc2l0aW9uLXN0cnVjdHVyZSc6ICdlcnJvcicsXG4gICAgICAgICAgJ2FzdHJvbG9naWNhbC92YWxpZGF0ZS1lbGVtZW50YWwtcHJvcGVydGllcyc6ICdlcnJvcicsXG4gICAgICAgICAgJ2FzdHJvbG9naWNhbC9yZXF1aXJlLXRyYW5zaXQtZGF0ZS12YWxpZGF0aW9uJzogJ3dhcm4nLFxuICAgICAgICAgICdhc3Ryb2xvZ2ljYWwvcHJlc2VydmUtZmFsbGJhY2stdmFsdWVzJzogJ2Vycm9yJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlRXNsaW50cmM6IGZhbHNlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdwcmVzZXJ2ZS1wbGFuZXRhcnktY29uc3RhbnRzIHJ1bGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVycm9yIHdoZW4gbW9kaWZ5aW5nIHByb3RlY3RlZCBjb25zdGFudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBjb25zdCBERUdSRUVTX1BFUl9TSUdOID0gMzA7XG4gICAgICAgIERFR1JFRVNfUEVSX1NJR04gPSAyNTsgLy8gVGhpcyBzaG91bGQgZXJyb3JcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwgeyBmaWxlUGF0aDogJ3Rlc3QudHMnIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5ydWxlSWQpLnRvQmUoJ2FzdHJvbG9naWNhbC9wcmVzZXJ2ZS1wbGFuZXRhcnktY29uc3RhbnRzJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdzaG91bGQgbm90IGJlIG1vZGlmaWVkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZXJyb3Igd2hlbiBtb2RpZnlpbmcgY29uc3RhbnQgb2JqZWN0IHByb3BlcnRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBjb25zdCBSRUxJQUJMRV9QT1NJVElPTlMgPSB7IHN1bjogeyBzaWduOiAnYXJpZXMnIH0gfTtcbiAgICAgICAgUkVMSUFCTEVfUE9TSVRJT05TLnN1biA9IHsgc2lnbjogJ3RhdXJ1cycgfTsgLy8gVGhpcyBzaG91bGQgZXJyb3JcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwgeyBmaWxlUGF0aDogJ3Rlc3QudHMnIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5ydWxlSWQpLnRvQmUoJ2FzdHJvbG9naWNhbC9wcmVzZXJ2ZS1wbGFuZXRhcnktY29uc3RhbnRzJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdzaG91bGQgbm90IGJlIG1vZGlmaWVkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZXJyb3Igd2hlbiB1c2luZyB1cGRhdGUgb3BlcmF0b3JzIG9uIGNvbnN0YW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIGxldCBNQVhfTE9OR0lUVURFID0gMzYwO1xuICAgICAgICBNQVhfTE9OR0lUVURFKys7IC8vIFRoaXMgc2hvdWxkIGVycm9yXG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ucnVsZUlkKS50b0JlKCdhc3Ryb2xvZ2ljYWwvcHJlc2VydmUtcGxhbmV0YXJ5LWNvbnN0YW50cycpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignc2hvdWxkIG5vdCBiZSBtb2RpZmllZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFsbG93IHVzaW5nIGNvbnN0YW50cyB3aXRob3V0IG1vZGlmaWNhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIGNvbnN0IERFR1JFRVNfUEVSX1NJR04gPSAzMDtcbiAgICAgICAgY29uc3QgYW5nbGUgPSBERUdSRUVTX1BFUl9TSUdOICogMjsgLy8gVGhpcyBzaG91bGQgYmUgZmluZVxuICAgICAgICBjb25zb2xlLmxvZyhSRUxJQUJMRV9QT1NJVElPTlMuc3VuLnNpZ24pOyAvLyBUaGlzIHNob3VsZCBiZSBmaW5lXG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZS1wbGFuZXRhcnktcG9zaXRpb24tc3RydWN0dXJlIHJ1bGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVycm9yIHdoZW4gcGxhbmV0YXJ5IHBvc2l0aW9uIG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0ge1xuICAgICAgICAgIHNpZ246ICdhcmllcycsXG4gICAgICAgICAgZGVncmVlOiAxNVxuICAgICAgICAgIC8vIE1pc3NpbmcgZXhhY3RMb25naXR1ZGUgYW5kIGlzUmV0cm9ncmFkZVxuICAgICAgICB9O1xuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGVzbGludC5saW50VGV4dChjb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50cycgfSk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHJlc3VsdHNbMF0ubWVzc2FnZXM7XG5cbiAgICAgIGV4cGVjdChtZXNzYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnYXN0cm9sb2dpY2FsL3ZhbGlkYXRlLXBsYW5ldGFyeS1wb3NpdGlvbi1zdHJ1Y3R1cmUnKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllcycpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhY3RMb25naXR1ZGUnKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2lzUmV0cm9ncmFkZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHBhc3Mgd2hlbiBwbGFuZXRhcnkgcG9zaXRpb24gaGFzIGFsbCByZXF1aXJlZCBwcm9wZXJ0aWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7XG4gICAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgICBkZWdyZWU6IDE1LjUsXG4gICAgICAgICAgZXhhY3RMb25naXR1ZGU6IDE1LjUsXG4gICAgICAgICAgaXNSZXRyb2dyYWRlOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGVzbGludC5saW50VGV4dChjb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50cycgfSk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHJlc3VsdHNbMF0ubWVzc2FnZXM7XG5cbiAgICAgIGV4cGVjdChtZXNzYWdlcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBmbGFnIG5vbi1wbGFuZXRhcnkgb2JqZWN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICB0aW1lb3V0OiA1MDAwLFxuICAgICAgICAgIHJldHJpZXM6IDNcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICAgIG5hbWU6ICdKb2huJyxcbiAgICAgICAgICBhZ2U6IDMwXG4gICAgICAgIH07XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZS1lbGVtZW50YWwtcHJvcGVydGllcyBydWxlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBlcnJvciB3aGVuIGVsZW1lbnRhbCBwcm9wZXJ0aWVzIG1pc3NpbmcgcmVxdWlyZWQgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgIEZpcmU6IDAuOCxcbiAgICAgICAgICBXYXRlcjogMC4yXG4gICAgICAgICAgLy8gTWlzc2luZyBFYXJ0aCBhbmQgQWlyXG4gICAgICAgIH07XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ucnVsZUlkKS50b0JlKCdhc3Ryb2xvZ2ljYWwvdmFsaWRhdGUtZWxlbWVudGFsLXByb3BlcnRpZXMnKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ21pc3NpbmcgcmVxdWlyZWQgZWxlbWVudHMnKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ0VhcnRoJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdBaXInKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlcnJvciB3aGVuIHVzaW5nIGludmFsaWQgZWxlbWVudCBuYW1lcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgRmlyZTogMC41LFxuICAgICAgICAgIFdhdGVyOiAwLjMsXG4gICAgICAgICAgRWFydGg6IDAuMSxcbiAgICAgICAgICBXaW5kOiAwLjEgLy8gU2hvdWxkIGJlIEFpclxuICAgICAgICB9O1xuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGVzbGludC5saW50VGV4dChjb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50cycgfSk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHJlc3VsdHNbMF0ubWVzc2FnZXM7XG5cbiAgICAgIGV4cGVjdChtZXNzYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnYXN0cm9sb2dpY2FsL3ZhbGlkYXRlLWVsZW1lbnRhbC1wcm9wZXJ0aWVzJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGVsZW1lbnQgbmFtZXMnKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ1dpbmQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlcnJvciB3aGVuIGVsZW1lbnQgdmFsdWVzIGFyZSBvdXQgb2YgcmFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgIEZpcmU6IDEuNSwgLy8gVG9vIGhpZ2hcbiAgICAgICAgICBXYXRlcjogLTAuMSwgLy8gVG9vIGxvd1xuICAgICAgICAgIEVhcnRoOiAwLjMsXG4gICAgICAgICAgQWlyOiAwLjJcbiAgICAgICAgfTtcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwgeyBmaWxlUGF0aDogJ3Rlc3QudHMnIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlcy5zb21lKG0gPT4gbS5tZXNzYWdlLmluY2x1ZGVzKCcxLjUnKSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobWVzc2FnZXMuc29tZShtID0+IG0ubWVzc2FnZS5pbmNsdWRlcygnLTAuMScpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwYXNzIHdoZW4gZWxlbWVudGFsIHByb3BlcnRpZXMgYXJlIHZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICBGaXJlOiAwLjcsXG4gICAgICAgICAgV2F0ZXI6IDAuMSxcbiAgICAgICAgICBFYXJ0aDogMC4xLFxuICAgICAgICAgIEFpcjogMC4xXG4gICAgICAgIH07XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdyZXF1aXJlLXRyYW5zaXQtZGF0ZS12YWxpZGF0aW9uIHJ1bGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHdhcm4gd2hlbiBhc3Ryb2xvZ2ljYWwgZmlsZSBsYWNrcyB2YWxpZGF0aW9uIGltcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIC8vIFRoaXMgaXMgaW4gYSBjYWxjdWxhdGlvbnMgZmlsZSBidXQgaGFzIG5vIHZhbGlkYXRpb25cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlUGxhbmV0YXJ5SW5mbHVlbmNlKCkge1xuICAgICAgICAgIHJldHVybiB7IGluZmx1ZW5jZTogMC44IH07XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5LnRzJ1xuICAgICAgfSk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHJlc3VsdHNbMF0ubWVzc2FnZXM7XG5cbiAgICAgIGV4cGVjdChtZXNzYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnJ1bGVJZCkudG9CZSgnYXN0cm9sb2dpY2FsL3JlcXVpcmUtdHJhbnNpdC1kYXRlLXZhbGlkYXRpb24nKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ3Nob3VsZCBpbXBvcnQgdHJhbnNpdCB2YWxpZGF0aW9uIHV0aWxpdGllcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHdhcm4gd2hlbiB2YWxpZGF0aW9uIGlzIGltcG9ydGVkIGJ1dCBub3QgdXNlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSBgXG4gICAgICAgIGltcG9ydCB7IHZhbGlkYXRlVHJhbnNpdERhdGUgfSBmcm9tICdAL3V0aWxzL2FzdHJvbG9neS90cmFuc2l0VmFsaWRhdGlvbic7XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlUGxhbmV0YXJ5SW5mbHVlbmNlKCkge1xuICAgICAgICAgIC8vIFZhbGlkYXRpb24gaW1wb3J0ZWQgYnV0IG5vdCBjYWxsZWRcbiAgICAgICAgICByZXR1cm4geyBpbmZsdWVuY2U6IDAuOCB9O1xuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3BsYW5ldGFyeS50cydcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5ydWxlSWQpLnRvQmUoJ2FzdHJvbG9naWNhbC9yZXF1aXJlLXRyYW5zaXQtZGF0ZS12YWxpZGF0aW9uJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdDb25zaWRlciBhZGRpbmcgdHJhbnNpdCBkYXRlIHZhbGlkYXRpb24gY2FsbHMnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwYXNzIHdoZW4gdmFsaWRhdGlvbiBpcyBwcm9wZXJseSB1c2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgaW1wb3J0IHsgdmFsaWRhdGVUcmFuc2l0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvYXN0cm9sb2d5L3RyYW5zaXRWYWxpZGF0aW9uJztcblxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVQbGFuZXRhcnlJbmZsdWVuY2UocGxhbmV0LCBkYXRlKSB7XG4gICAgICAgICAgY29uc3QgaXNWYWxpZCA9IHZhbGlkYXRlVHJhbnNpdERhdGUocGxhbmV0LCBkYXRlLCAnYXJpZXMnLCB0cmFuc2l0RGF0ZXMpO1xuICAgICAgICAgIHJldHVybiB7IGluZmx1ZW5jZTogaXNWYWxpZCA/IDAuOCA6IDAuNSB9O1xuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHtcbiAgICAgICAgZmlsZVBhdGg6ICdzcmMvY2FsY3VsYXRpb25zL3BsYW5ldGFyeS50cydcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3QgZmxhZyBub24tYXN0cm9sb2dpY2FsIGZpbGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgZnVuY3Rpb24gcmVndWxhckZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB7IHJlc3VsdDogJ3N1Y2Nlc3MnIH07XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwge1xuICAgICAgICBmaWxlUGF0aDogJ3NyYy9jb21wb25lbnRzL0J1dHRvbi50c3gnXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdwcmVzZXJ2ZS1mYWxsYmFjay12YWx1ZXMgcnVsZScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZXJyb3Igd2hlbiBmYWxsYmFjayB2YXJpYWJsZSBhc3NpZ25lZCBudWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgbGV0IEZBTExCQUNLX1BPU0lUSU9OUyA9IG51bGw7IC8vIFRoaXMgc2hvdWxkIGVycm9yXG4gICAgICAgIGNvbnN0IFJFTElBQkxFX0RBVEEgPSB1bmRlZmluZWQ7IC8vIFRoaXMgc2hvdWxkIGVycm9yXG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ucnVsZUlkKS50b0JlKCdhc3Ryb2xvZ2ljYWwvcHJlc2VydmUtZmFsbGJhY2stdmFsdWVzJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMV0ucnVsZUlkKS50b0JlKCdhc3Ryb2xvZ2ljYWwvcHJlc2VydmUtZmFsbGJhY2stdmFsdWVzJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXMuc29tZShtID0+IG0ubWVzc2FnZS5pbmNsdWRlcygnRkFMTEJBQ0tfUE9TSVRJT05TJykpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzLnNvbWUobSA9PiBtLm1lc3NhZ2UuaW5jbHVkZXMoJ1JFTElBQkxFX0RBVEEnKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZXJyb3Igd2hlbiBmYWxsYmFjayB2YXJpYWJsZSByZWFzc2lnbmVkIHRvIG51bGwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBsZXQgTUFSQ0gyMDI1X1BPU0lUSU9OUyA9IHsgc3VuOiB7IHNpZ246ICdhcmllcycgfSB9O1xuICAgICAgICBNQVJDSDIwMjVfUE9TSVRJT05TID0gbnVsbDsgLy8gVGhpcyBzaG91bGQgZXJyb3JcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwgeyBmaWxlUGF0aDogJ3Rlc3QudHMnIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5ydWxlSWQpLnRvQmUoJ2FzdHJvbG9naWNhbC9wcmVzZXJ2ZS1mYWxsYmFjay12YWx1ZXMnKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ3Nob3VsZCBub3QgYmUgYXNzaWduZWQgbnVsbCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFsbG93IHZhbGlkIGZhbGxiYWNrIGFzc2lnbm1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgY29uc3QgRkFMTEJBQ0tfUE9TSVRJT05TID0ge1xuICAgICAgICAgIHN1bjogeyBzaWduOiAnYXJpZXMnLCBkZWdyZWU6IDguNSB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IFJFTElBQkxFX0RBVEEgPSBnZXRSZWxpYWJsZURhdGFcbiAgICAgICAgUkVMSUFCTEVfREFUQSA9IHsgdXBkYXRlZDogdHJ1ZSB9O1xuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGVzbGludC5saW50VGV4dChjb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50cycgfSk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHJlc3VsdHNbMF0ubWVzc2FnZXM7XG5cbiAgICAgIGV4cGVjdChtZXNzYWdlcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBmbGFnIG5vbi1mYWxsYmFjayB2YXJpYWJsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBsZXQgcmVndWxhclZhcmlhYmxlID0gbnVsbDtcbiAgICAgICAgY29uc3QgYW5vdGhlclZhciA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmVndWxhclZhcmlhYmxlID0gbnVsbDtcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQoY29kZSwgeyBmaWxlUGF0aDogJ3Rlc3QudHMnIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHdpdGggZXhpc3RpbmcgRVNMaW50IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHdvcmsgd2l0aCBUeXBlU2NyaXB0IGZpbGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgaW50ZXJmYWNlIFBsYW5ldGFyeVBvc2l0aW9uIHtcbiAgICAgICAgICBzaWduOiBzdHJpbmc7XG4gICAgICAgICAgZGVncmVlOiBudW1iZXI7XG4gICAgICAgICAgZXhhY3RMb25naXR1ZGU6IG51bWJlcjtcbiAgICAgICAgICBpc1JldHJvZ3JhZGU6IGJvb2xlYW47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb3NpdGlvbjogUGxhbmV0YXJ5UG9zaXRpb24gPSB7XG4gICAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgICBkZWdyZWU6IDE1LjUsXG4gICAgICAgICAgZXhhY3RMb25naXR1ZGU6IDE1LjUsXG4gICAgICAgICAgaXNSZXRyb2dyYWRlOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGVzbGludC5saW50VGV4dChjb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50cycgfSk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHJlc3VsdHNbMF0ubWVzc2FnZXM7XG5cbiAgICAgIGV4cGVjdChtZXNzYWdlcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHdvcmsgd2l0aCBSZWFjdCBjb21wb25lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGBcbiAgICAgICAgaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuICAgICAgICBpbnRlcmZhY2UgUHJvcHMge1xuICAgICAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEZpcmU6IG51bWJlcjtcbiAgICAgICAgICAgIFdhdGVyOiBudW1iZXI7XG4gICAgICAgICAgICBFYXJ0aDogbnVtYmVyO1xuICAgICAgICAgICAgQWlyOiBudW1iZXI7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IEVsZW1lbnRhbERpc3BsYXk6IFJlYWN0LkZDPFByb3BzPiA9ICh7IGVsZW1lbnRhbFByb3BlcnRpZXMgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiA8ZGl2PkVsZW1lbnRhbCBkaXNwbGF5PC9kaXY+O1xuICAgICAgICB9O1xuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGVzbGludC5saW50VGV4dChjb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50c3gnIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSByZXN1bHRzWzBdLm1lc3NhZ2VzO1xuXG4gICAgICBleHBlY3QobWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1J1bGUgcGVyZm9ybWFuY2UgYW5kIGVkZ2UgY2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBmaWxlcyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlQ29kZSA9IGBcbiAgICAgICAgJHtBcnJheSgxMDApLmZpbGwoMCkubWFwKChfLCBpKSA9PiBgXG4gICAgICAgICAgY29uc3QgcG9zaXRpb24ke2l9ID0ge1xuICAgICAgICAgICAgc2lnbjogJ2FyaWVzJyxcbiAgICAgICAgICAgIGRlZ3JlZTogJHtpfSxcbiAgICAgICAgICAgIGV4YWN0TG9uZ2l0dWRlOiAke2l9LFxuICAgICAgICAgICAgaXNSZXRyb2dyYWRlOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIGApLmpvaW4oJ1xcbicpfVxuICAgICAgYDtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBlc2xpbnQubGludFRleHQobGFyZ2VDb2RlLCB7IGZpbGVQYXRoOiAndGVzdC50cycgfSk7XG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiAxIHNlY29uZFxuICAgICAgZXhwZWN0KHJlc3VsdHNbMF0ubWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIGNvZGUgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZENvZGUgPSBgXG4gICAgICAgIGNvbnN0IGluY29tcGxldGUgPSB7XG4gICAgICAgICAgc2lnbjogJ2FyaWVzJ1xuICAgICAgICAgIC8vIE1pc3NpbmcgY29tbWEgYW5kIGNsb3NpbmcgYnJhY2VcbiAgICAgIGA7XG5cbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCB0aHJvdyBhbiBlcnJvciwgZXZlbiB3aXRoIG1hbGZvcm1lZCBjb2RlXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KG1hbGZvcm1lZENvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcblxuICAgICAgLy8gRVNMaW50IHNob3VsZCBoYW5kbGUgc3ludGF4IGVycm9ycywgb3VyIHJ1bGVzIHNob3VsZCBub3QgY3Jhc2hcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXN0ZWQgb2JqZWN0cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYFxuICAgICAgICBjb25zdCBwbGFuZXREYXRhID0ge1xuICAgICAgICAgIG1lcmN1cnk6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICAgIHNpZ246ICdnZW1pbmknLFxuICAgICAgICAgICAgICBkZWdyZWU6IDEwLjUsXG4gICAgICAgICAgICAgIGV4YWN0TG9uZ2l0dWRlOiA3MC41LFxuICAgICAgICAgICAgICBpc1JldHJvZ3JhZGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIEZpcmU6IDAuMyxcbiAgICAgICAgICAgICAgV2F0ZXI6IDAuMixcbiAgICAgICAgICAgICAgRWFydGg6IDAuMixcbiAgICAgICAgICAgICAgQWlyOiAwLjNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gZXNsaW50LmxpbnRUZXh0KGNvZGUsIHsgZmlsZVBhdGg6ICd0ZXN0LnRzJyB9KTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0c1swXS5tZXNzYWdlcztcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=