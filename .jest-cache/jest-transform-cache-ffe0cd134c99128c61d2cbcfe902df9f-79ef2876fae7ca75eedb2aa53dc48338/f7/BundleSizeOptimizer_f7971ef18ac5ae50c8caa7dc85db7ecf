1d1dc41c8b228245f6244ba472d65e8b
"use strict";
/**
 * Bundle Size Optimization System
 * Perfect Codebase Campaign - Phase 4 Implementation
 *
 * Implements comprehensive bundle size optimization with:
 * - Bundle analysis system maintaining 420kB target
 * - Lazy loading validation for selective data fetching
 * - Bundle optimization alerts when size exceeds targets
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.BundleSizeOptimizer = void 0;
const child_process_1 = require("child_process");
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
class BundleSizeOptimizer {
    constructor() {
        this.TARGET_BUNDLE_SIZE = 420; // kB
        this.TARGET_CHUNK_SIZE = 100; // kB
        this.COMPRESSION_RATIO = 0.7; // Typical gzip compression
        this.alerts = [];
        this.analysisHistory = [];
    }
    /**
     * Analyze bundle size and composition
     */
    async analyzeBundleSize() {
        try {
            console.log('üì¶ Analyzing bundle size...');
            // Get bundle information from build output
            const bundleInfo = await this.getBundleInformation();
            const chunks = await this.analyzeChunks();
            const assets = await this.analyzeAssets();
            const dependencies = await this.analyzeDependencies();
            const totalSize = bundleInfo.totalSize;
            const compressedSize = Math.round(totalSize * this.COMPRESSION_RATIO);
            // Generate recommendations based on analysis
            const recommendations = this.generateBundleRecommendations(totalSize, chunks, assets, dependencies);
            const analysis = {
                totalSize,
                compressedSize,
                chunks,
                assets,
                dependencies,
                recommendations
            };
            // Store in history
            this.analysisHistory.push(analysis);
            if (this.analysisHistory.length > 20) {
                this.analysisHistory = this.analysisHistory.slice(-10);
            }
            // Check for alerts
            await this.checkBundleSizeAlerts(analysis);
            console.log(`üì¶ Bundle analysis complete: ${totalSize}kB total, ${compressedSize}kB compressed`);
            return analysis;
        }
        catch (error) {
            console.warn(`‚ö†Ô∏è  Bundle analysis failed: ${error.message}`);
            // Return fallback analysis
            return {
                totalSize: 0,
                compressedSize: 0,
                chunks: [],
                assets: [],
                dependencies: [],
                recommendations: ['Bundle analysis failed - check build configuration']
            };
        }
    }
    /**
     * Get bundle information from build system
     */
    async getBundleInformation() {
        try {
            // Check for Next.js build output
            if (fs.existsSync('.next')) {
                return await this.getNextJsBundleInfo();
            }
            // Check for other build outputs
            const buildDirs = ['dist', 'build', 'out'];
            for (const dir of buildDirs) {
                if (fs.existsSync(dir)) {
                    return await this.getGenericBundleInfo(dir);
                }
            }
            // Fallback: estimate from source code
            return await this.estimateBundleSize();
        }
        catch (error) {
            throw new Error(`Failed to get bundle information: ${error.message}`);
        }
    }
    /**
     * Get Next.js specific bundle information
     */
    async getNextJsBundleInfo() {
        var _a;
        try {
            // Run Next.js build analyzer if available
            if (fs.existsSync('package.json')) {
                const packageJson = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                if ((_a = packageJson.dependencies) === null || _a === void 0 ? void 0 : _a['@next/bundle-analyzer']) {
                    // Use bundle analyzer
                    const output = (0, child_process_1.execSync)('yarn analyze 2>/dev/null || echo "analyzer not available"', {
                        encoding: 'utf8',
                        stdio: 'pipe'
                    });
                    if (!output.includes('analyzer not available')) {
                        // Parse analyzer output (simplified)
                        const sizeMatch = output.match(/Total bundle size: (\d+(?:\.\d+)?)\s*kB/);
                        if (sizeMatch) {
                            return { totalSize: parseFloat(sizeMatch[1]) };
                        }
                    }
                }
            }
            // Fallback: calculate from .next directory
            const output = (0, child_process_1.execSync)('du -sk .next/static | cut -f1', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            const sizeKB = parseInt(output.trim()) || 0;
            return { totalSize: sizeKB };
        }
        catch (error) {
            throw new Error(`Failed to get Next.js bundle info: ${error.message}`);
        }
    }
    /**
     * Get generic bundle information from build directory
     */
    async getGenericBundleInfo(buildDir) {
        try {
            const output = (0, child_process_1.execSync)(`du -sk ${buildDir} | cut -f1`, {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            const sizeKB = parseInt(output.trim()) || 0;
            return { totalSize: sizeKB };
        }
        catch (error) {
            throw new Error(`Failed to get bundle info from ${buildDir}: ${error.message}`);
        }
    }
    /**
     * Estimate bundle size from source code
     */
    async estimateBundleSize() {
        try {
            // Calculate source code size as rough estimate
            const output = (0, child_process_1.execSync)('find src -name "*.ts" -o -name "*.tsx" -o -name "*.js" -o -name "*.jsx" | xargs wc -c | tail -1 | awk \'{print $1}\'', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            const sourceBytes = parseInt(output.trim()) || 0;
            const estimatedKB = Math.round(sourceBytes / 1024 * 1.5); // Rough estimate with bundling overhead
            console.log(`üì¶ Estimated bundle size from source: ${estimatedKB}kB`);
            return { totalSize: estimatedKB };
        }
        catch (error) {
            console.warn(`‚ö†Ô∏è  Bundle size estimation failed: ${error.message}`);
            return { totalSize: 400 }; // Conservative estimate
        }
    }
    /**
     * Analyze bundle chunks
     */
    async analyzeChunks() {
        try {
            const chunks = [];
            // Check for Next.js chunks
            if (fs.existsSync('.next/static/chunks')) {
                const chunkFiles = fs.readdirSync('.next/static/chunks');
                for (const file of chunkFiles) {
                    if (file.endsWith('.js')) {
                        const filePath = path.join('.next/static/chunks', file);
                        const stats = fs.statSync(filePath);
                        const sizeKB = Math.round(stats.size / 1024);
                        chunks.push({
                            name: file,
                            size: sizeKB,
                            compressedSize: Math.round(sizeKB * this.COMPRESSION_RATIO),
                            modules: [],
                            isLazyLoaded: file.includes('lazy') || file.includes('dynamic')
                        });
                    }
                }
            }
            return chunks;
        }
        catch (error) {
            console.warn(`‚ö†Ô∏è  Chunk analysis failed: ${error.message}`);
            return [];
        }
    }
    /**
     * Analyze bundle assets
     */
    async analyzeAssets() {
        try {
            const assets = [];
            // Check for static assets
            const assetDirs = ['.next/static', 'public', 'dist/assets', 'build/static'];
            for (const dir of assetDirs) {
                if (fs.existsSync(dir)) {
                    const files = this.getAllFiles(dir);
                    for (const file of files) {
                        const stats = fs.statSync(file);
                        const sizeKB = Math.round(stats.size / 1024);
                        const ext = path.extname(file).toLowerCase();
                        let type = 'other';
                        if (['.js', '.mjs'].includes(ext))
                            type = 'js';
                        else if (ext === '.css')
                            type = 'css';
                        else if (['.png', '.jpg', '.jpeg', '.gif', '.svg', '.webp'].includes(ext))
                            type = 'image';
                        else if (['.woff', '.woff2', '.ttf', '.otf'].includes(ext))
                            type = 'font';
                        assets.push({
                            name: path.relative(process.cwd(), file),
                            size: sizeKB,
                            type,
                            optimized: this.isAssetOptimized(file, type)
                        });
                    }
                }
            }
            return assets.sort((a, b) => b.size - a.size); // Sort by size descending
        }
        catch (error) {
            console.warn(`‚ö†Ô∏è  Asset analysis failed: ${error.message}`);
            return [];
        }
    }
    /**
     * Analyze dependencies for bundle impact
     */
    async analyzeDependencies() {
        try {
            const dependencies = [];
            if (!fs.existsSync('package.json')) {
                return dependencies;
            }
            const packageJson = JSON.parse(fs.readFileSync('package.json', 'utf8'));
            const deps = { ...packageJson.dependencies, ...packageJson.devDependencies };
            // Analyze major dependencies that impact bundle size
            const heavyDependencies = [
                'react', 'react-dom', 'next', '@chakra-ui/react', 'framer-motion',
                'lodash', 'moment', 'axios', 'three', 'chart.js'
            ];
            for (const [name, version] of Object.entries(deps)) {
                if (heavyDependencies.includes(name) || this.isLikelyHeavyDependency(name)) {
                    const size = await this.estimateDependencySize(name);
                    const usage = this.analyzeDependencyUsage(name);
                    const alternatives = this.suggestAlternatives(name);
                    dependencies.push({
                        name,
                        size,
                        version: version,
                        usage,
                        alternatives
                    });
                }
            }
            return dependencies.sort((a, b) => b.size - a.size);
        }
        catch (error) {
            console.warn(`‚ö†Ô∏è  Dependency analysis failed: ${error.message}`);
            return [];
        }
    }
    /**
     * Validate lazy loading implementation
     */
    async validateLazyLoading() {
        try {
            console.log('üîÑ Validating lazy loading implementation...');
            const componentsAnalyzed = await this.countComponents();
            const lazyLoadedComponents = await this.countLazyLoadedComponents();
            const potentialLazyComponents = await this.identifyPotentialLazyComponents();
            const dataFetchingOptimizations = await this.identifyDataFetchingOptimizations();
            const score = Math.round((lazyLoadedComponents / Math.max(componentsAnalyzed, 1)) * 100);
            console.log(`üîÑ Lazy loading validation complete: ${lazyLoadedComponents}/${componentsAnalyzed} components lazy loaded (${score}%)`);
            return {
                componentsAnalyzed,
                lazyLoadedComponents,
                potentialLazyComponents,
                dataFetchingOptimizations,
                score
            };
        }
        catch (error) {
            console.warn(`‚ö†Ô∏è  Lazy loading validation failed: ${error.message}`);
            return {
                componentsAnalyzed: 0,
                lazyLoadedComponents: 0,
                potentialLazyComponents: [],
                dataFetchingOptimizations: [],
                score: 0
            };
        }
    }
    /**
     * Check for bundle size alerts
     */
    async checkBundleSizeAlerts(analysis) {
        // Check total bundle size
        if (analysis.totalSize > this.TARGET_BUNDLE_SIZE) {
            this.addAlert({
                type: 'size_exceeded',
                severity: analysis.totalSize > this.TARGET_BUNDLE_SIZE * 1.2 ? 'critical' : 'warning',
                message: `Bundle size (${analysis.totalSize}kB) exceeds target (${this.TARGET_BUNDLE_SIZE}kB)`,
                currentValue: analysis.totalSize,
                targetValue: this.TARGET_BUNDLE_SIZE,
                recommendations: [
                    'Enable code splitting for large components',
                    'Implement lazy loading for non-critical features',
                    'Review and optimize large dependencies',
                    'Enable tree shaking for unused code elimination'
                ],
                timestamp: new Date()
            });
        }
        // Check individual chunks
        for (const chunk of analysis.chunks) {
            if (chunk.size > this.TARGET_CHUNK_SIZE) {
                this.addAlert({
                    type: 'chunk_too_large',
                    severity: 'warning',
                    message: `Chunk ${chunk.name} (${chunk.size}kB) exceeds recommended size (${this.TARGET_CHUNK_SIZE}kB)`,
                    currentValue: chunk.size,
                    targetValue: this.TARGET_CHUNK_SIZE,
                    recommendations: [
                        'Split large chunk into smaller modules',
                        'Implement dynamic imports for heavy components',
                        'Review chunk splitting configuration'
                    ],
                    timestamp: new Date()
                });
            }
        }
        // Check for unused dependencies
        for (const dep of analysis.dependencies) {
            if (dep.usage === 'optional' && dep.size > 50) {
                this.addAlert({
                    type: 'unused_dependency',
                    severity: 'warning',
                    message: `Large optional dependency ${dep.name} (${dep.size}kB) may be removable`,
                    currentValue: dep.size,
                    targetValue: 0,
                    recommendations: [
                        `Consider removing ${dep.name} if not essential`,
                        ...dep.alternatives.map(alt => `Consider lighter alternative: ${alt}`)
                    ],
                    timestamp: new Date()
                });
            }
        }
    }
    /**
     * Generate comprehensive bundle optimization report
     */
    async generateOptimizationReport() {
        const analysis = await this.analyzeBundleSize();
        const lazyLoadingValidation = await this.validateLazyLoading();
        // Calculate overall score (0-100)
        const sizeScore = Math.max(0, Math.min(100, (this.TARGET_BUNDLE_SIZE / Math.max(analysis.totalSize, 1)) * 100));
        const lazyLoadingScore = lazyLoadingValidation.score;
        const overallScore = Math.round((sizeScore + lazyLoadingScore) / 2);
        const targetCompliance = analysis.totalSize <= this.TARGET_BUNDLE_SIZE;
        // Generate comprehensive recommendations
        const recommendations = [];
        if (!targetCompliance) {
            recommendations.push(`Reduce bundle size by ${analysis.totalSize - this.TARGET_BUNDLE_SIZE}kB to meet target`);
        }
        if (lazyLoadingScore < 50) {
            recommendations.push('Implement lazy loading for more components to improve initial load time');
        }
        recommendations.push(...analysis.recommendations);
        return {
            timestamp: new Date(),
            analysis,
            lazyLoadingValidation,
            alerts: [...this.alerts],
            overallScore,
            targetCompliance,
            recommendations
        };
    }
    // Helper methods
    getAllFiles(dir) {
        const files = [];
        try {
            const items = fs.readdirSync(dir);
            for (const item of items) {
                const fullPath = path.join(dir, item);
                const stat = fs.statSync(fullPath);
                if (stat.isDirectory()) {
                    files.push(...this.getAllFiles(fullPath));
                }
                else {
                    files.push(fullPath);
                }
            }
        }
        catch (error) {
            // Ignore directory read errors
        }
        return files;
    }
    isAssetOptimized(filePath, type) {
        const fileName = path.basename(filePath);
        switch (type) {
            case 'image':
                return fileName.includes('.webp') || fileName.includes('optimized');
            case 'js':
                return fileName.includes('.min.') || !fileName.includes('dev');
            case 'css':
                return fileName.includes('.min.') || !fileName.includes('dev');
            default:
                return true;
        }
    }
    isLikelyHeavyDependency(name) {
        const heavyPatterns = ['ui', 'chart', 'graph', 'editor', 'calendar', 'table', 'grid'];
        return heavyPatterns.some(pattern => name.toLowerCase().includes(pattern));
    }
    async estimateDependencySize(name) {
        // Simplified size estimation based on common dependencies
        const knownSizes = {
            'react': 45,
            'react-dom': 130,
            'next': 200,
            '@chakra-ui/react': 150,
            'framer-motion': 100,
            'lodash': 70,
            'moment': 65,
            'axios': 15,
            'three': 600,
            'chart.js': 80
        };
        return knownSizes[name] || 20; // Default estimate
    }
    analyzeDependencyUsage(name) {
        // Simplified usage analysis
        const critical = ['react', 'react-dom', 'next'];
        const important = ['@chakra-ui/react', 'framer-motion'];
        if (critical.includes(name))
            return 'critical';
        if (important.includes(name))
            return 'important';
        return 'optional';
    }
    suggestAlternatives(name) {
        const alternatives = {
            'lodash': ['ramda (functional)', 'native ES6 methods'],
            'moment': ['date-fns (smaller)', 'dayjs (2kB)'],
            'axios': ['fetch API (native)', 'ky (smaller)'],
            'chart.js': ['recharts (React-specific)', 'victory (modular)']
        };
        return alternatives[name] || [];
    }
    async countComponents() {
        try {
            const output = (0, child_process_1.execSync)('find src -name "*.tsx" -o -name "*.jsx" | wc -l', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            return parseInt(output.trim()) || 0;
        }
        catch (error) {
            return 0;
        }
    }
    async countLazyLoadedComponents() {
        try {
            const output = (0, child_process_1.execSync)('grep -r "lazy\\|dynamic" src --include="*.tsx" --include="*.jsx" | wc -l', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            return parseInt(output.trim()) || 0;
        }
        catch (error) {
            return 0;
        }
    }
    async identifyPotentialLazyComponents() {
        try {
            // Find large components that could benefit from lazy loading
            const output = (0, child_process_1.execSync)('find src -name "*.tsx" -exec wc -l {} + | sort -nr | head -10 | awk \'{print $2}\'', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            return output.trim().split('\n').filter(line => line.trim());
        }
        catch (error) {
            return [];
        }
    }
    async identifyDataFetchingOptimizations() {
        const optimizations = [];
        try {
            // Check for potential data fetching optimizations
            const hasUseEffect = (0, child_process_1.execSync)('grep -r "useEffect" src --include="*.tsx" --include="*.jsx" | wc -l', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            const hasUseSWR = (0, child_process_1.execSync)('grep -r "useSWR\\|useQuery" src --include="*.tsx" --include="*.jsx" | wc -l', {
                encoding: 'utf8',
                stdio: 'pipe'
            });
            const effectCount = parseInt(hasUseEffect.trim()) || 0;
            const swr = parseInt(hasUseSWR.trim()) || 0;
            if (effectCount > swr * 2) {
                optimizations.push('Consider using SWR or React Query for data fetching optimization');
            }
            if (effectCount > 20) {
                optimizations.push('Implement data prefetching for frequently accessed data');
                optimizations.push('Consider implementing virtual scrolling for large lists');
            }
        }
        catch (error) {
            // Ignore errors in optimization detection
        }
        return optimizations;
    }
    generateBundleRecommendations(totalSize, chunks, assets, dependencies) {
        const recommendations = [];
        if (totalSize > this.TARGET_BUNDLE_SIZE) {
            recommendations.push(`Bundle size exceeds target by ${totalSize - this.TARGET_BUNDLE_SIZE}kB`);
        }
        const largeChunks = chunks.filter(chunk => chunk.size > this.TARGET_CHUNK_SIZE);
        if (largeChunks.length > 0) {
            recommendations.push(`${largeChunks.length} chunks exceed recommended size - consider code splitting`);
        }
        const unoptimizedAssets = assets.filter(asset => !asset.optimized && asset.size > 10);
        if (unoptimizedAssets.length > 0) {
            recommendations.push(`${unoptimizedAssets.length} assets could be optimized for better compression`);
        }
        const heavyDependencies = dependencies.filter(dep => dep.size > 100);
        if (heavyDependencies.length > 0) {
            recommendations.push(`Consider alternatives for ${heavyDependencies.length} heavy dependencies`);
        }
        return recommendations;
    }
    addAlert(alert) {
        this.alerts.push(alert);
        // Keep only recent alerts
        if (this.alerts.length > 50) {
            this.alerts = this.alerts.slice(-25);
        }
        // Log alert
        const severityIcon = alert.severity === 'critical' ? 'üö®' : '‚ö†Ô∏è';
        console.log(`${severityIcon} Bundle Alert: ${alert.message}`);
    }
    /**
     * Get current alerts
     */
    getCurrentAlerts() {
        return [...this.alerts];
    }
    /**
     * Clear all alerts
     */
    clearAlerts() {
        this.alerts = [];
        console.log('üì¶ Bundle optimization alerts cleared');
    }
    /**
     * Export bundle analysis data
     */
    async exportBundleData(filePath) {
        try {
            const report = await this.generateOptimizationReport();
            const exportData = {
                timestamp: new Date().toISOString(),
                report,
                history: this.analysisHistory,
                alerts: this.alerts
            };
            fs.writeFileSync(filePath, JSON.stringify(exportData, null, 2));
            console.log(`üì¶ Bundle analysis data exported to: ${filePath}`);
        }
        catch (error) {
            throw new Error(`Failed to export bundle data: ${error.message}`);
        }
    }
}
exports.BundleSizeOptimizer = BundleSizeOptimizer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9CdW5kbGVTaXplT3B0aW1pemVyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7R0FRRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCxpREFBeUM7QUFDekMsdUNBQXlCO0FBQ3pCLDJDQUE2QjtBQThEN0IsTUFBYSxtQkFBbUI7SUFPOUI7UUFOaUIsdUJBQWtCLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSztRQUMvQixzQkFBaUIsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLO1FBQzlCLHNCQUFpQixHQUFHLEdBQUcsQ0FBQyxDQUFDLDJCQUEyQjtRQUM3RCxXQUFNLEdBQThCLEVBQUUsQ0FBQztRQUN2QyxvQkFBZSxHQUFxQixFQUFFLENBQUM7SUFFaEMsQ0FBQztJQUVoQjs7T0FFRztJQUNILEtBQUssQ0FBQyxpQkFBaUI7UUFDckIsSUFBSTtZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLENBQUMsQ0FBQztZQUUzQywyQ0FBMkM7WUFDM0MsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztZQUNyRCxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUMxQyxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUMxQyxNQUFNLFlBQVksR0FBRyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBRXRELE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUM7WUFDdkMsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFFdEUsNkNBQTZDO1lBQzdDLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyw2QkFBNkIsQ0FDeEQsU0FBUyxFQUNULE1BQU0sRUFDTixN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QUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGdCQUFnQixDQUFDLFFBQWdCO1FBQ3JDLElBQUk7WUFDRixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1lBQ3ZELE1BQU0sVUFBVSxHQUFHO2dCQUNqQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7Z0JBQ25DLE1BQU07Z0JBQ04sT0FBTyxFQUFFLElBQUksQ0FBQyxlQUFlO2dCQUM3QixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07YUFDcEIsQ0FBQztZQUVGLEVBQUUsQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0NBQXdDLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FFakU7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1NBQ25FO0lBQ0gsQ0FBQztDQUNGO0FBN3BCRCxrREE2cEJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvc2VydmljZXMvY2FtcGFpZ24vQnVuZGxlU2l6ZU9wdGltaXplci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJ1bmRsZSBTaXplIE9wdGltaXphdGlvbiBTeXN0ZW1cbiAqIFBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gLSBQaGFzZSA0IEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIEltcGxlbWVudHMgY29tcHJlaGVuc2l2ZSBidW5kbGUgc2l6ZSBvcHRpbWl6YXRpb24gd2l0aDpcbiAqIC0gQnVuZGxlIGFuYWx5c2lzIHN5c3RlbSBtYWludGFpbmluZyA0MjBrQiB0YXJnZXRcbiAqIC0gTGF6eSBsb2FkaW5nIHZhbGlkYXRpb24gZm9yIHNlbGVjdGl2ZSBkYXRhIGZldGNoaW5nXG4gKiAtIEJ1bmRsZSBvcHRpbWl6YXRpb24gYWxlcnRzIHdoZW4gc2l6ZSBleGNlZWRzIHRhcmdldHNcbiAqL1xuXG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVBbmFseXNpcyB7XG4gIHRvdGFsU2l6ZTogbnVtYmVyO1xuICBjb21wcmVzc2VkU2l6ZTogbnVtYmVyO1xuICBjaHVua3M6IEJ1bmRsZUNodW5rW107XG4gIGFzc2V0czogQnVuZGxlQXNzZXRbXTtcbiAgZGVwZW5kZW5jaWVzOiBEZXBlbmRlbmN5QW5hbHlzaXNbXTtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVDaHVuayB7XG4gIG5hbWU6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xuICBjb21wcmVzc2VkU2l6ZTogbnVtYmVyO1xuICBtb2R1bGVzOiBzdHJpbmdbXTtcbiAgaXNMYXp5TG9hZGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ1bmRsZUFzc2V0IHtcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIHR5cGU6ICdqcycgfCAnY3NzJyB8ICdpbWFnZScgfCAnZm9udCcgfCAnb3RoZXInO1xuICBvcHRpbWl6ZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVwZW5kZW5jeUFuYWx5c2lzIHtcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIHZlcnNpb246IHN0cmluZztcbiAgdXNhZ2U6ICdjcml0aWNhbCcgfCAnaW1wb3J0YW50JyB8ICdvcHRpb25hbCc7XG4gIGFsdGVybmF0aXZlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF6eUxvYWRpbmdWYWxpZGF0aW9uIHtcbiAgY29tcG9uZW50c0FuYWx5emVkOiBudW1iZXI7XG4gIGxhenlMb2FkZWRDb21wb25lbnRzOiBudW1iZXI7XG4gIHBvdGVudGlhbExhenlDb21wb25lbnRzOiBzdHJpbmdbXTtcbiAgZGF0YUZldGNoaW5nT3B0aW1pemF0aW9uczogc3RyaW5nW107XG4gIHNjb3JlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnVuZGxlT3B0aW1pemF0aW9uQWxlcnQge1xuICB0eXBlOiAnc2l6ZV9leGNlZWRlZCcgfCAnY2h1bmtfdG9vX2xhcmdlJyB8ICd1bnVzZWRfZGVwZW5kZW5jeScgfCAnbGF6eV9sb2FkaW5nX29wcG9ydHVuaXR5JztcbiAgc2V2ZXJpdHk6ICd3YXJuaW5nJyB8ICdjcml0aWNhbCc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY3VycmVudFZhbHVlOiBudW1iZXI7XG4gIHRhcmdldFZhbHVlOiBudW1iZXI7XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIHRpbWVzdGFtcDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCdW5kbGVPcHRpbWl6YXRpb25SZXBvcnQge1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGFuYWx5c2lzOiBCdW5kbGVBbmFseXNpcztcbiAgbGF6eUxvYWRpbmdWYWxpZGF0aW9uOiBMYXp5TG9hZGluZ1ZhbGlkYXRpb247XG4gIGFsZXJ0czogQnVuZGxlT3B0aW1pemF0aW9uQWxlcnRbXTtcbiAgb3ZlcmFsbFNjb3JlOiBudW1iZXI7XG4gIHRhcmdldENvbXBsaWFuY2U6IGJvb2xlYW47XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBCdW5kbGVTaXplT3B0aW1pemVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBUQVJHRVRfQlVORExFX1NJWkUgPSA0MjA7IC8vIGtCXG4gIHByaXZhdGUgcmVhZG9ubHkgVEFSR0VUX0NIVU5LX1NJWkUgPSAxMDA7IC8vIGtCXG4gIHByaXZhdGUgcmVhZG9ubHkgQ09NUFJFU1NJT05fUkFUSU8gPSAwLjc7IC8vIFR5cGljYWwgZ3ppcCBjb21wcmVzc2lvblxuICBwcml2YXRlIGFsZXJ0czogQnVuZGxlT3B0aW1pemF0aW9uQWxlcnRbXSA9IFtdO1xuICBwcml2YXRlIGFuYWx5c2lzSGlzdG9yeTogQnVuZGxlQW5hbHlzaXNbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICogQW5hbHl6ZSBidW5kbGUgc2l6ZSBhbmQgY29tcG9zaXRpb25cbiAgICovXG4gIGFzeW5jIGFuYWx5emVCdW5kbGVTaXplKCk6IFByb21pc2U8QnVuZGxlQW5hbHlzaXM+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk6YgQW5hbHl6aW5nIGJ1bmRsZSBzaXplLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIEdldCBidW5kbGUgaW5mb3JtYXRpb24gZnJvbSBidWlsZCBvdXRwdXRcbiAgICAgIGNvbnN0IGJ1bmRsZUluZm8gPSBhd2FpdCB0aGlzLmdldEJ1bmRsZUluZm9ybWF0aW9uKCk7XG4gICAgICBjb25zdCBjaHVua3MgPSBhd2FpdCB0aGlzLmFuYWx5emVDaHVua3MoKTtcbiAgICAgIGNvbnN0IGFzc2V0cyA9IGF3YWl0IHRoaXMuYW5hbHl6ZUFzc2V0cygpO1xuICAgICAgY29uc3QgZGVwZW5kZW5jaWVzID0gYXdhaXQgdGhpcy5hbmFseXplRGVwZW5kZW5jaWVzKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRvdGFsU2l6ZSA9IGJ1bmRsZUluZm8udG90YWxTaXplO1xuICAgICAgY29uc3QgY29tcHJlc3NlZFNpemUgPSBNYXRoLnJvdW5kKHRvdGFsU2l6ZSAqIHRoaXMuQ09NUFJFU1NJT05fUkFUSU8pO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gYW5hbHlzaXNcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IHRoaXMuZ2VuZXJhdGVCdW5kbGVSZWNvbW1lbmRhdGlvbnMoXG4gICAgICAgIHRvdGFsU2l6ZSxcbiAgICAgICAgY2h1bmtzLFxuICAgICAgICBhc3NldHMsXG4gICAgICAgIGRlcGVuZGVuY2llc1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgYW5hbHlzaXM6IEJ1bmRsZUFuYWx5c2lzID0ge1xuICAgICAgICB0b3RhbFNpemUsXG4gICAgICAgIGNvbXByZXNzZWRTaXplLFxuICAgICAgICBjaHVua3MsXG4gICAgICAgIGFzc2V0cyxcbiAgICAgICAgZGVwZW5kZW5jaWVzLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnNcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGluIGhpc3RvcnlcbiAgICAgIHRoaXMuYW5hbHlzaXNIaXN0b3J5LnB1c2goYW5hbHlzaXMpO1xuICAgICAgaWYgKHRoaXMuYW5hbHlzaXNIaXN0b3J5Lmxlbmd0aCA+IDIwKSB7XG4gICAgICAgIHRoaXMuYW5hbHlzaXNIaXN0b3J5ID0gdGhpcy5hbmFseXNpc0hpc3Rvcnkuc2xpY2UoLTEwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGFsZXJ0c1xuICAgICAgYXdhaXQgdGhpcy5jaGVja0J1bmRsZVNpemVBbGVydHMoYW5hbHlzaXMpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+TpiBCdW5kbGUgYW5hbHlzaXMgY29tcGxldGU6ICR7dG90YWxTaXplfWtCIHRvdGFsLCAke2NvbXByZXNzZWRTaXplfWtCIGNvbXByZXNzZWRgKTtcbiAgICAgIHJldHVybiBhbmFseXNpcztcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAgQnVuZGxlIGFuYWx5c2lzIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gZmFsbGJhY2sgYW5hbHlzaXNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsU2l6ZTogMCxcbiAgICAgICAgY29tcHJlc3NlZFNpemU6IDAsXG4gICAgICAgIGNodW5rczogW10sXG4gICAgICAgIGFzc2V0czogW10sXG4gICAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydCdW5kbGUgYW5hbHlzaXMgZmFpbGVkIC0gY2hlY2sgYnVpbGQgY29uZmlndXJhdGlvbiddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYnVuZGxlIGluZm9ybWF0aW9uIGZyb20gYnVpbGQgc3lzdGVtXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldEJ1bmRsZUluZm9ybWF0aW9uKCk6IFByb21pc2U8eyB0b3RhbFNpemU6IG51bWJlciB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGZvciBOZXh0LmpzIGJ1aWxkIG91dHB1dFxuICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoJy5uZXh0JykpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TmV4dEpzQnVuZGxlSW5mbygpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3Igb3RoZXIgYnVpbGQgb3V0cHV0c1xuICAgICAgY29uc3QgYnVpbGREaXJzID0gWydkaXN0JywgJ2J1aWxkJywgJ291dCddO1xuICAgICAgZm9yIChjb25zdCBkaXIgb2YgYnVpbGREaXJzKSB7XG4gICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGRpcikpIHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRHZW5lcmljQnVuZGxlSW5mbyhkaXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZhbGxiYWNrOiBlc3RpbWF0ZSBmcm9tIHNvdXJjZSBjb2RlXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5lc3RpbWF0ZUJ1bmRsZVNpemUoKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgYnVuZGxlIGluZm9ybWF0aW9uOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBOZXh0LmpzIHNwZWNpZmljIGJ1bmRsZSBpbmZvcm1hdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXROZXh0SnNCdW5kbGVJbmZvKCk6IFByb21pc2U8eyB0b3RhbFNpemU6IG51bWJlciB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJ1biBOZXh0LmpzIGJ1aWxkIGFuYWx5emVyIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoJ3BhY2thZ2UuanNvbicpKSB7XG4gICAgICAgIGNvbnN0IHBhY2thZ2VKc29uID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoJ3BhY2thZ2UuanNvbicsICd1dGY4JykpO1xuICAgICAgICBpZiAocGFja2FnZUpzb24uZGVwZW5kZW5jaWVzPy5bJ0BuZXh0L2J1bmRsZS1hbmFseXplciddKSB7XG4gICAgICAgICAgLy8gVXNlIGJ1bmRsZSBhbmFseXplclxuICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGV4ZWNTeW5jKCd5YXJuIGFuYWx5emUgMj4vZGV2L251bGwgfHwgZWNobyBcImFuYWx5emVyIG5vdCBhdmFpbGFibGVcIicsIHtcbiAgICAgICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgICAgICBzdGRpbzogJ3BpcGUnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFvdXRwdXQuaW5jbHVkZXMoJ2FuYWx5emVyIG5vdCBhdmFpbGFibGUnKSkge1xuICAgICAgICAgICAgLy8gUGFyc2UgYW5hbHl6ZXIgb3V0cHV0IChzaW1wbGlmaWVkKVxuICAgICAgICAgICAgY29uc3Qgc2l6ZU1hdGNoID0gb3V0cHV0Lm1hdGNoKC9Ub3RhbCBidW5kbGUgc2l6ZTogKFxcZCsoPzpcXC5cXGQrKT8pXFxzKmtCLyk7XG4gICAgICAgICAgICBpZiAoc2l6ZU1hdGNoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7IHRvdGFsU2l6ZTogcGFyc2VGbG9hdChzaXplTWF0Y2hbMV0pIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZhbGxiYWNrOiBjYWxjdWxhdGUgZnJvbSAubmV4dCBkaXJlY3RvcnlcbiAgICAgIGNvbnN0IG91dHB1dCA9IGV4ZWNTeW5jKCdkdSAtc2sgLm5leHQvc3RhdGljIHwgY3V0IC1mMScsIHtcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4JyxcbiAgICAgICAgc3RkaW86ICdwaXBlJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNpemVLQiA9IHBhcnNlSW50KG91dHB1dC50cmltKCkpIHx8IDA7XG4gICAgICByZXR1cm4geyB0b3RhbFNpemU6IHNpemVLQiB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBOZXh0LmpzIGJ1bmRsZSBpbmZvOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBnZW5lcmljIGJ1bmRsZSBpbmZvcm1hdGlvbiBmcm9tIGJ1aWxkIGRpcmVjdG9yeVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXRHZW5lcmljQnVuZGxlSW5mbyhidWlsZERpcjogc3RyaW5nKTogUHJvbWlzZTx7IHRvdGFsU2l6ZTogbnVtYmVyIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoYGR1IC1zayAke2J1aWxkRGlyfSB8IGN1dCAtZjFgLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICAgIHN0ZGlvOiAncGlwZSdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBzaXplS0IgPSBwYXJzZUludChvdXRwdXQudHJpbSgpKSB8fCAwO1xuICAgICAgcmV0dXJuIHsgdG90YWxTaXplOiBzaXplS0IgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgYnVuZGxlIGluZm8gZnJvbSAke2J1aWxkRGlyfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFc3RpbWF0ZSBidW5kbGUgc2l6ZSBmcm9tIHNvdXJjZSBjb2RlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVzdGltYXRlQnVuZGxlU2l6ZSgpOiBQcm9taXNlPHsgdG90YWxTaXplOiBudW1iZXIgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYWxjdWxhdGUgc291cmNlIGNvZGUgc2l6ZSBhcyByb3VnaCBlc3RpbWF0ZVxuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoJ2ZpbmQgc3JjIC1uYW1lIFwiKi50c1wiIC1vIC1uYW1lIFwiKi50c3hcIiAtbyAtbmFtZSBcIiouanNcIiAtbyAtbmFtZSBcIiouanN4XCIgfCB4YXJncyB3YyAtYyB8IHRhaWwgLTEgfCBhd2sgXFwne3ByaW50ICQxfVxcJycsIHtcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4JyxcbiAgICAgICAgc3RkaW86ICdwaXBlJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNvdXJjZUJ5dGVzID0gcGFyc2VJbnQob3V0cHV0LnRyaW0oKSkgfHwgMDtcbiAgICAgIGNvbnN0IGVzdGltYXRlZEtCID0gTWF0aC5yb3VuZChzb3VyY2VCeXRlcyAvIDEwMjQgKiAxLjUpOyAvLyBSb3VnaCBlc3RpbWF0ZSB3aXRoIGJ1bmRsaW5nIG92ZXJoZWFkXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OmIEVzdGltYXRlZCBidW5kbGUgc2l6ZSBmcm9tIHNvdXJjZTogJHtlc3RpbWF0ZWRLQn1rQmApO1xuICAgICAgcmV0dXJuIHsgdG90YWxTaXplOiBlc3RpbWF0ZWRLQiB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBCdW5kbGUgc2l6ZSBlc3RpbWF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgcmV0dXJuIHsgdG90YWxTaXplOiA0MDAgfTsgLy8gQ29uc2VydmF0aXZlIGVzdGltYXRlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgYnVuZGxlIGNodW5rc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhbmFseXplQ2h1bmtzKCk6IFByb21pc2U8QnVuZGxlQ2h1bmtbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaHVua3M6IEJ1bmRsZUNodW5rW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIE5leHQuanMgY2h1bmtzXG4gICAgICBpZiAoZnMuZXhpc3RzU3luYygnLm5leHQvc3RhdGljL2NodW5rcycpKSB7XG4gICAgICAgIGNvbnN0IGNodW5rRmlsZXMgPSBmcy5yZWFkZGlyU3luYygnLm5leHQvc3RhdGljL2NodW5rcycpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGNodW5rRmlsZXMpIHtcbiAgICAgICAgICBpZiAoZmlsZS5lbmRzV2l0aCgnLmpzJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKCcubmV4dC9zdGF0aWMvY2h1bmtzJywgZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IGZzLnN0YXRTeW5jKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemVLQiA9IE1hdGgucm91bmQoc3RhdHMuc2l6ZSAvIDEwMjQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjaHVua3MucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IGZpbGUsXG4gICAgICAgICAgICAgIHNpemU6IHNpemVLQixcbiAgICAgICAgICAgICAgY29tcHJlc3NlZFNpemU6IE1hdGgucm91bmQoc2l6ZUtCICogdGhpcy5DT01QUkVTU0lPTl9SQVRJTyksXG4gICAgICAgICAgICAgIG1vZHVsZXM6IFtdLCAvLyBXb3VsZCBuZWVkIHdlYnBhY2sgc3RhdHMgZm9yIGRldGFpbGVkIG1vZHVsZSBpbmZvXG4gICAgICAgICAgICAgIGlzTGF6eUxvYWRlZDogZmlsZS5pbmNsdWRlcygnbGF6eScpIHx8IGZpbGUuaW5jbHVkZXMoJ2R5bmFtaWMnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBjaHVua3M7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gIENodW5rIGFuYWx5c2lzIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGJ1bmRsZSBhc3NldHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUFzc2V0cygpOiBQcm9taXNlPEJ1bmRsZUFzc2V0W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXNzZXRzOiBCdW5kbGVBc3NldFtdID0gW107XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBzdGF0aWMgYXNzZXRzXG4gICAgICBjb25zdCBhc3NldERpcnMgPSBbJy5uZXh0L3N0YXRpYycsICdwdWJsaWMnLCAnZGlzdC9hc3NldHMnLCAnYnVpbGQvc3RhdGljJ107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZGlyIG9mIGFzc2V0RGlycykge1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhkaXIpKSB7XG4gICAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmdldEFsbEZpbGVzKGRpcik7XG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IGZzLnN0YXRTeW5jKGZpbGUpO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZUtCID0gTWF0aC5yb3VuZChzdGF0cy5zaXplIC8gMTAyNCk7XG4gICAgICAgICAgICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUoZmlsZSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHR5cGU6IEJ1bmRsZUFzc2V0Wyd0eXBlJ10gPSAnb3RoZXInO1xuICAgICAgICAgICAgaWYgKFsnLmpzJywgJy5tanMnXS5pbmNsdWRlcyhleHQpKSB0eXBlID0gJ2pzJztcbiAgICAgICAgICAgIGVsc2UgaWYgKGV4dCA9PT0gJy5jc3MnKSB0eXBlID0gJ2Nzcyc7XG4gICAgICAgICAgICBlbHNlIGlmIChbJy5wbmcnLCAnLmpwZycsICcuanBlZycsICcuZ2lmJywgJy5zdmcnLCAnLndlYnAnXS5pbmNsdWRlcyhleHQpKSB0eXBlID0gJ2ltYWdlJztcbiAgICAgICAgICAgIGVsc2UgaWYgKFsnLndvZmYnLCAnLndvZmYyJywgJy50dGYnLCAnLm90ZiddLmluY2x1ZGVzKGV4dCkpIHR5cGUgPSAnZm9udCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFzc2V0cy5wdXNoKHtcbiAgICAgICAgICAgICAgbmFtZTogcGF0aC5yZWxhdGl2ZShwcm9jZXNzLmN3ZCgpLCBmaWxlKSxcbiAgICAgICAgICAgICAgc2l6ZTogc2l6ZUtCLFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBvcHRpbWl6ZWQ6IHRoaXMuaXNBc3NldE9wdGltaXplZChmaWxlLCB0eXBlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhc3NldHMuc29ydCgoYSwgYikgPT4gYi5zaXplIC0gYS5zaXplKTsgLy8gU29ydCBieSBzaXplIGRlc2NlbmRpbmdcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAgQXNzZXQgYW5hbHlzaXMgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgZGVwZW5kZW5jaWVzIGZvciBidW5kbGUgaW1wYWN0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVEZXBlbmRlbmNpZXMoKTogUHJvbWlzZTxEZXBlbmRlbmN5QW5hbHlzaXNbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZXBlbmRlbmNpZXM6IERlcGVuZGVuY3lBbmFseXNpc1tdID0gW107XG4gICAgICBcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYygncGFja2FnZS5qc29uJykpIHtcbiAgICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcGFja2FnZUpzb24gPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYygncGFja2FnZS5qc29uJywgJ3V0ZjgnKSk7XG4gICAgICBjb25zdCBkZXBzID0geyAuLi5wYWNrYWdlSnNvbi5kZXBlbmRlbmNpZXMsIC4uLnBhY2thZ2VKc29uLmRldkRlcGVuZGVuY2llcyB9O1xuICAgICAgXG4gICAgICAvLyBBbmFseXplIG1ham9yIGRlcGVuZGVuY2llcyB0aGF0IGltcGFjdCBidW5kbGUgc2l6ZVxuICAgICAgY29uc3QgaGVhdnlEZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgICdyZWFjdCcsICdyZWFjdC1kb20nLCAnbmV4dCcsICdAY2hha3JhLXVpL3JlYWN0JywgJ2ZyYW1lci1tb3Rpb24nLFxuICAgICAgICAnbG9kYXNoJywgJ21vbWVudCcsICdheGlvcycsICd0aHJlZScsICdjaGFydC5qcydcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgW25hbWUsIHZlcnNpb25dIG9mIE9iamVjdC5lbnRyaWVzKGRlcHMpKSB7XG4gICAgICAgIGlmIChoZWF2eURlcGVuZGVuY2llcy5pbmNsdWRlcyhuYW1lKSB8fCB0aGlzLmlzTGlrZWx5SGVhdnlEZXBlbmRlbmN5KG5hbWUpKSB7XG4gICAgICAgICAgY29uc3Qgc2l6ZSA9IGF3YWl0IHRoaXMuZXN0aW1hdGVEZXBlbmRlbmN5U2l6ZShuYW1lKTtcbiAgICAgICAgICBjb25zdCB1c2FnZSA9IHRoaXMuYW5hbHl6ZURlcGVuZGVuY3lVc2FnZShuYW1lKTtcbiAgICAgICAgICBjb25zdCBhbHRlcm5hdGl2ZXMgPSB0aGlzLnN1Z2dlc3RBbHRlcm5hdGl2ZXMobmFtZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uIGFzIHN0cmluZyxcbiAgICAgICAgICAgIHVzYWdlLFxuICAgICAgICAgICAgYWx0ZXJuYXRpdmVzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcy5zb3J0KChhLCBiKSA9PiBiLnNpemUgLSBhLnNpemUpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBEZXBlbmRlbmN5IGFuYWx5c2lzIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBsYXp5IGxvYWRpbmcgaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlTGF6eUxvYWRpbmcoKTogUHJvbWlzZTxMYXp5TG9hZGluZ1ZhbGlkYXRpb24+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgVmFsaWRhdGluZyBsYXp5IGxvYWRpbmcgaW1wbGVtZW50YXRpb24uLi4nKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tcG9uZW50c0FuYWx5emVkID0gYXdhaXQgdGhpcy5jb3VudENvbXBvbmVudHMoKTtcbiAgICAgIGNvbnN0IGxhenlMb2FkZWRDb21wb25lbnRzID0gYXdhaXQgdGhpcy5jb3VudExhenlMb2FkZWRDb21wb25lbnRzKCk7XG4gICAgICBjb25zdCBwb3RlbnRpYWxMYXp5Q29tcG9uZW50cyA9IGF3YWl0IHRoaXMuaWRlbnRpZnlQb3RlbnRpYWxMYXp5Q29tcG9uZW50cygpO1xuICAgICAgY29uc3QgZGF0YUZldGNoaW5nT3B0aW1pemF0aW9ucyA9IGF3YWl0IHRoaXMuaWRlbnRpZnlEYXRhRmV0Y2hpbmdPcHRpbWl6YXRpb25zKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNjb3JlID0gTWF0aC5yb3VuZCgobGF6eUxvYWRlZENvbXBvbmVudHMgLyBNYXRoLm1heChjb21wb25lbnRzQW5hbHl6ZWQsIDEpKSAqIDEwMCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIExhenkgbG9hZGluZyB2YWxpZGF0aW9uIGNvbXBsZXRlOiAke2xhenlMb2FkZWRDb21wb25lbnRzfS8ke2NvbXBvbmVudHNBbmFseXplZH0gY29tcG9uZW50cyBsYXp5IGxvYWRlZCAoJHtzY29yZX0lKWApO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb21wb25lbnRzQW5hbHl6ZWQsXG4gICAgICAgIGxhenlMb2FkZWRDb21wb25lbnRzLFxuICAgICAgICBwb3RlbnRpYWxMYXp5Q29tcG9uZW50cyxcbiAgICAgICAgZGF0YUZldGNoaW5nT3B0aW1pemF0aW9ucyxcbiAgICAgICAgc2NvcmVcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gIExhenkgbG9hZGluZyB2YWxpZGF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb21wb25lbnRzQW5hbHl6ZWQ6IDAsXG4gICAgICAgIGxhenlMb2FkZWRDb21wb25lbnRzOiAwLFxuICAgICAgICBwb3RlbnRpYWxMYXp5Q29tcG9uZW50czogW10sXG4gICAgICAgIGRhdGFGZXRjaGluZ09wdGltaXphdGlvbnM6IFtdLFxuICAgICAgICBzY29yZTogMFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIGJ1bmRsZSBzaXplIGFsZXJ0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjaGVja0J1bmRsZVNpemVBbGVydHMoYW5hbHlzaXM6IEJ1bmRsZUFuYWx5c2lzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2hlY2sgdG90YWwgYnVuZGxlIHNpemVcbiAgICBpZiAoYW5hbHlzaXMudG90YWxTaXplID4gdGhpcy5UQVJHRVRfQlVORExFX1NJWkUpIHtcbiAgICAgIHRoaXMuYWRkQWxlcnQoe1xuICAgICAgICB0eXBlOiAnc2l6ZV9leGNlZWRlZCcsXG4gICAgICAgIHNldmVyaXR5OiBhbmFseXNpcy50b3RhbFNpemUgPiB0aGlzLlRBUkdFVF9CVU5ETEVfU0laRSAqIDEuMiA/ICdjcml0aWNhbCcgOiAnd2FybmluZycsXG4gICAgICAgIG1lc3NhZ2U6IGBCdW5kbGUgc2l6ZSAoJHthbmFseXNpcy50b3RhbFNpemV9a0IpIGV4Y2VlZHMgdGFyZ2V0ICgke3RoaXMuVEFSR0VUX0JVTkRMRV9TSVpFfWtCKWAsXG4gICAgICAgIGN1cnJlbnRWYWx1ZTogYW5hbHlzaXMudG90YWxTaXplLFxuICAgICAgICB0YXJnZXRWYWx1ZTogdGhpcy5UQVJHRVRfQlVORExFX1NJWkUsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAgICAgICdFbmFibGUgY29kZSBzcGxpdHRpbmcgZm9yIGxhcmdlIGNvbXBvbmVudHMnLFxuICAgICAgICAgICdJbXBsZW1lbnQgbGF6eSBsb2FkaW5nIGZvciBub24tY3JpdGljYWwgZmVhdHVyZXMnLFxuICAgICAgICAgICdSZXZpZXcgYW5kIG9wdGltaXplIGxhcmdlIGRlcGVuZGVuY2llcycsXG4gICAgICAgICAgJ0VuYWJsZSB0cmVlIHNoYWtpbmcgZm9yIHVudXNlZCBjb2RlIGVsaW1pbmF0aW9uJ1xuICAgICAgICBdLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpbmRpdmlkdWFsIGNodW5rc1xuICAgIGZvciAoY29uc3QgY2h1bmsgb2YgYW5hbHlzaXMuY2h1bmtzKSB7XG4gICAgICBpZiAoY2h1bmsuc2l6ZSA+IHRoaXMuVEFSR0VUX0NIVU5LX1NJWkUpIHtcbiAgICAgICAgdGhpcy5hZGRBbGVydCh7XG4gICAgICAgICAgdHlwZTogJ2NodW5rX3Rvb19sYXJnZScsXG4gICAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgICAgICBtZXNzYWdlOiBgQ2h1bmsgJHtjaHVuay5uYW1lfSAoJHtjaHVuay5zaXplfWtCKSBleGNlZWRzIHJlY29tbWVuZGVkIHNpemUgKCR7dGhpcy5UQVJHRVRfQ0hVTktfU0laRX1rQilgLFxuICAgICAgICAgIGN1cnJlbnRWYWx1ZTogY2h1bmsuc2l6ZSxcbiAgICAgICAgICB0YXJnZXRWYWx1ZTogdGhpcy5UQVJHRVRfQ0hVTktfU0laRSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgICdTcGxpdCBsYXJnZSBjaHVuayBpbnRvIHNtYWxsZXIgbW9kdWxlcycsXG4gICAgICAgICAgICAnSW1wbGVtZW50IGR5bmFtaWMgaW1wb3J0cyBmb3IgaGVhdnkgY29tcG9uZW50cycsXG4gICAgICAgICAgICAnUmV2aWV3IGNodW5rIHNwbGl0dGluZyBjb25maWd1cmF0aW9uJ1xuICAgICAgICAgIF0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgdW51c2VkIGRlcGVuZGVuY2llc1xuICAgIGZvciAoY29uc3QgZGVwIG9mIGFuYWx5c2lzLmRlcGVuZGVuY2llcykge1xuICAgICAgaWYgKGRlcC51c2FnZSA9PT0gJ29wdGlvbmFsJyAmJiBkZXAuc2l6ZSA+IDUwKSB7XG4gICAgICAgIHRoaXMuYWRkQWxlcnQoe1xuICAgICAgICAgIHR5cGU6ICd1bnVzZWRfZGVwZW5kZW5jeScsXG4gICAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgICAgICBtZXNzYWdlOiBgTGFyZ2Ugb3B0aW9uYWwgZGVwZW5kZW5jeSAke2RlcC5uYW1lfSAoJHtkZXAuc2l6ZX1rQikgbWF5IGJlIHJlbW92YWJsZWAsXG4gICAgICAgICAgY3VycmVudFZhbHVlOiBkZXAuc2l6ZSxcbiAgICAgICAgICB0YXJnZXRWYWx1ZTogMCxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgIGBDb25zaWRlciByZW1vdmluZyAke2RlcC5uYW1lfSBpZiBub3QgZXNzZW50aWFsYCxcbiAgICAgICAgICAgIC4uLmRlcC5hbHRlcm5hdGl2ZXMubWFwKGFsdCA9PiBgQ29uc2lkZXIgbGlnaHRlciBhbHRlcm5hdGl2ZTogJHthbHR9YClcbiAgICAgICAgICBdLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBidW5kbGUgb3B0aW1pemF0aW9uIHJlcG9ydFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVPcHRpbWl6YXRpb25SZXBvcnQoKTogUHJvbWlzZTxCdW5kbGVPcHRpbWl6YXRpb25SZXBvcnQ+IHtcbiAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZUJ1bmRsZVNpemUoKTtcbiAgICBjb25zdCBsYXp5TG9hZGluZ1ZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlTGF6eUxvYWRpbmcoKTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgb3ZlcmFsbCBzY29yZSAoMC0xMDApXG4gICAgY29uc3Qgc2l6ZVNjb3JlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCAodGhpcy5UQVJHRVRfQlVORExFX1NJWkUgLyBNYXRoLm1heChhbmFseXNpcy50b3RhbFNpemUsIDEpKSAqIDEwMCkpO1xuICAgIGNvbnN0IGxhenlMb2FkaW5nU2NvcmUgPSBsYXp5TG9hZGluZ1ZhbGlkYXRpb24uc2NvcmU7XG4gICAgY29uc3Qgb3ZlcmFsbFNjb3JlID0gTWF0aC5yb3VuZCgoc2l6ZVNjb3JlICsgbGF6eUxvYWRpbmdTY29yZSkgLyAyKTtcbiAgICBcbiAgICBjb25zdCB0YXJnZXRDb21wbGlhbmNlID0gYW5hbHlzaXMudG90YWxTaXplIDw9IHRoaXMuVEFSR0VUX0JVTkRMRV9TSVpFO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcmVjb21tZW5kYXRpb25zXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmICghdGFyZ2V0Q29tcGxpYW5jZSkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goYFJlZHVjZSBidW5kbGUgc2l6ZSBieSAke2FuYWx5c2lzLnRvdGFsU2l6ZSAtIHRoaXMuVEFSR0VUX0JVTkRMRV9TSVpFfWtCIHRvIG1lZXQgdGFyZ2V0YCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChsYXp5TG9hZGluZ1Njb3JlIDwgNTApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdJbXBsZW1lbnQgbGF6eSBsb2FkaW5nIGZvciBtb3JlIGNvbXBvbmVudHMgdG8gaW1wcm92ZSBpbml0aWFsIGxvYWQgdGltZScpO1xuICAgIH1cbiAgICBcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5hbmFseXNpcy5yZWNvbW1lbmRhdGlvbnMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBhbmFseXNpcyxcbiAgICAgIGxhenlMb2FkaW5nVmFsaWRhdGlvbixcbiAgICAgIGFsZXJ0czogWy4uLnRoaXMuYWxlcnRzXSxcbiAgICAgIG92ZXJhbGxTY29yZSxcbiAgICAgIHRhcmdldENvbXBsaWFuY2UsXG4gICAgICByZWNvbW1lbmRhdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZHNcblxuICBwcml2YXRlIGdldEFsbEZpbGVzKGRpcjogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGZzLnJlYWRkaXJTeW5jKGRpcik7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihkaXIsIGl0ZW0pO1xuICAgICAgICBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZnVsbFBhdGgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgIGZpbGVzLnB1c2goLi4udGhpcy5nZXRBbGxGaWxlcyhmdWxsUGF0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpbGVzLnB1c2goZnVsbFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElnbm9yZSBkaXJlY3RvcnkgcmVhZCBlcnJvcnNcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbGVzO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0Fzc2V0T3B0aW1pemVkKGZpbGVQYXRoOiBzdHJpbmcsIHR5cGU6IEJ1bmRsZUFzc2V0Wyd0eXBlJ10pOiBib29sZWFuIHtcbiAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpO1xuICAgIFxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgICByZXR1cm4gZmlsZU5hbWUuaW5jbHVkZXMoJy53ZWJwJykgfHwgZmlsZU5hbWUuaW5jbHVkZXMoJ29wdGltaXplZCcpO1xuICAgICAgY2FzZSAnanMnOlxuICAgICAgICByZXR1cm4gZmlsZU5hbWUuaW5jbHVkZXMoJy5taW4uJykgfHwgIWZpbGVOYW1lLmluY2x1ZGVzKCdkZXYnKTtcbiAgICAgIGNhc2UgJ2Nzcyc6XG4gICAgICAgIHJldHVybiBmaWxlTmFtZS5pbmNsdWRlcygnLm1pbi4nKSB8fCAhZmlsZU5hbWUuaW5jbHVkZXMoJ2RldicpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpc0xpa2VseUhlYXZ5RGVwZW5kZW5jeShuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBoZWF2eVBhdHRlcm5zID0gWyd1aScsICdjaGFydCcsICdncmFwaCcsICdlZGl0b3InLCAnY2FsZW5kYXInLCAndGFibGUnLCAnZ3JpZCddO1xuICAgIHJldHVybiBoZWF2eVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGF0dGVybikpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlc3RpbWF0ZURlcGVuZGVuY3lTaXplKG5hbWU6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgLy8gU2ltcGxpZmllZCBzaXplIGVzdGltYXRpb24gYmFzZWQgb24gY29tbW9uIGRlcGVuZGVuY2llc1xuICAgIGNvbnN0IGtub3duU2l6ZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICAncmVhY3QnOiA0NSxcbiAgICAgICdyZWFjdC1kb20nOiAxMzAsXG4gICAgICAnbmV4dCc6IDIwMCxcbiAgICAgICdAY2hha3JhLXVpL3JlYWN0JzogMTUwLFxuICAgICAgJ2ZyYW1lci1tb3Rpb24nOiAxMDAsXG4gICAgICAnbG9kYXNoJzogNzAsXG4gICAgICAnbW9tZW50JzogNjUsXG4gICAgICAnYXhpb3MnOiAxNSxcbiAgICAgICd0aHJlZSc6IDYwMCxcbiAgICAgICdjaGFydC5qcyc6IDgwXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ga25vd25TaXplc1tuYW1lXSB8fCAyMDsgLy8gRGVmYXVsdCBlc3RpbWF0ZVxuICB9XG5cbiAgcHJpdmF0ZSBhbmFseXplRGVwZW5kZW5jeVVzYWdlKG5hbWU6IHN0cmluZyk6IERlcGVuZGVuY3lBbmFseXNpc1sndXNhZ2UnXSB7XG4gICAgLy8gU2ltcGxpZmllZCB1c2FnZSBhbmFseXNpc1xuICAgIGNvbnN0IGNyaXRpY2FsID0gWydyZWFjdCcsICdyZWFjdC1kb20nLCAnbmV4dCddO1xuICAgIGNvbnN0IGltcG9ydGFudCA9IFsnQGNoYWtyYS11aS9yZWFjdCcsICdmcmFtZXItbW90aW9uJ107XG4gICAgXG4gICAgaWYgKGNyaXRpY2FsLmluY2x1ZGVzKG5hbWUpKSByZXR1cm4gJ2NyaXRpY2FsJztcbiAgICBpZiAoaW1wb3J0YW50LmluY2x1ZGVzKG5hbWUpKSByZXR1cm4gJ2ltcG9ydGFudCc7XG4gICAgcmV0dXJuICdvcHRpb25hbCc7XG4gIH1cblxuICBwcml2YXRlIHN1Z2dlc3RBbHRlcm5hdGl2ZXMobmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGFsdGVybmF0aXZlczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuICAgICAgJ2xvZGFzaCc6IFsncmFtZGEgKGZ1bmN0aW9uYWwpJywgJ25hdGl2ZSBFUzYgbWV0aG9kcyddLFxuICAgICAgJ21vbWVudCc6IFsnZGF0ZS1mbnMgKHNtYWxsZXIpJywgJ2RheWpzICgya0IpJ10sXG4gICAgICAnYXhpb3MnOiBbJ2ZldGNoIEFQSSAobmF0aXZlKScsICdreSAoc21hbGxlciknXSxcbiAgICAgICdjaGFydC5qcyc6IFsncmVjaGFydHMgKFJlYWN0LXNwZWNpZmljKScsICd2aWN0b3J5IChtb2R1bGFyKSddXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gYWx0ZXJuYXRpdmVzW25hbWVdIHx8IFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjb3VudENvbXBvbmVudHMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoJ2ZpbmQgc3JjIC1uYW1lIFwiKi50c3hcIiAtbyAtbmFtZSBcIiouanN4XCIgfCB3YyAtbCcsIHtcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4JyxcbiAgICAgICAgc3RkaW86ICdwaXBlJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBwYXJzZUludChvdXRwdXQudHJpbSgpKSB8fCAwO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNvdW50TGF6eUxvYWRlZENvbXBvbmVudHMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gZXhlY1N5bmMoJ2dyZXAgLXIgXCJsYXp5XFxcXHxkeW5hbWljXCIgc3JjIC0taW5jbHVkZT1cIioudHN4XCIgLS1pbmNsdWRlPVwiKi5qc3hcIiB8IHdjIC1sJywge1xuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICBzdGRpbzogJ3BpcGUnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHBhcnNlSW50KG91dHB1dC50cmltKCkpIHx8IDA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaWRlbnRpZnlQb3RlbnRpYWxMYXp5Q29tcG9uZW50cygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZpbmQgbGFyZ2UgY29tcG9uZW50cyB0aGF0IGNvdWxkIGJlbmVmaXQgZnJvbSBsYXp5IGxvYWRpbmdcbiAgICAgIGNvbnN0IG91dHB1dCA9IGV4ZWNTeW5jKCdmaW5kIHNyYyAtbmFtZSBcIioudHN4XCIgLWV4ZWMgd2MgLWwge30gKyB8IHNvcnQgLW5yIHwgaGVhZCAtMTAgfCBhd2sgXFwne3ByaW50ICQyfVxcJycsIHtcbiAgICAgICAgZW5jb2Rpbmc6ICd1dGY4JyxcbiAgICAgICAgc3RkaW86ICdwaXBlJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBvdXRwdXQudHJpbSgpLnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGlkZW50aWZ5RGF0YUZldGNoaW5nT3B0aW1pemF0aW9ucygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3Qgb3B0aW1pemF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgZm9yIHBvdGVudGlhbCBkYXRhIGZldGNoaW5nIG9wdGltaXphdGlvbnNcbiAgICAgIGNvbnN0IGhhc1VzZUVmZmVjdCA9IGV4ZWNTeW5jKCdncmVwIC1yIFwidXNlRWZmZWN0XCIgc3JjIC0taW5jbHVkZT1cIioudHN4XCIgLS1pbmNsdWRlPVwiKi5qc3hcIiB8IHdjIC1sJywge1xuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICBzdGRpbzogJ3BpcGUnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgaGFzVXNlU1dSID0gZXhlY1N5bmMoJ2dyZXAgLXIgXCJ1c2VTV1JcXFxcfHVzZVF1ZXJ5XCIgc3JjIC0taW5jbHVkZT1cIioudHN4XCIgLS1pbmNsdWRlPVwiKi5qc3hcIiB8IHdjIC1sJywge1xuICAgICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgICBzdGRpbzogJ3BpcGUnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZWZmZWN0Q291bnQgPSBwYXJzZUludChoYXNVc2VFZmZlY3QudHJpbSgpKSB8fCAwO1xuICAgICAgY29uc3Qgc3dyID0gcGFyc2VJbnQoaGFzVXNlU1dSLnRyaW0oKSkgfHwgMDtcbiAgICAgIFxuICAgICAgaWYgKGVmZmVjdENvdW50ID4gc3dyICogMikge1xuICAgICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ0NvbnNpZGVyIHVzaW5nIFNXUiBvciBSZWFjdCBRdWVyeSBmb3IgZGF0YSBmZXRjaGluZyBvcHRpbWl6YXRpb24nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVmZmVjdENvdW50ID4gMjApIHtcbiAgICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCdJbXBsZW1lbnQgZGF0YSBwcmVmZXRjaGluZyBmb3IgZnJlcXVlbnRseSBhY2Nlc3NlZCBkYXRhJyk7XG4gICAgICAgIG9wdGltaXphdGlvbnMucHVzaCgnQ29uc2lkZXIgaW1wbGVtZW50aW5nIHZpcnR1YWwgc2Nyb2xsaW5nIGZvciBsYXJnZSBsaXN0cycpO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElnbm9yZSBlcnJvcnMgaW4gb3B0aW1pemF0aW9uIGRldGVjdGlvblxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gb3B0aW1pemF0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVCdW5kbGVSZWNvbW1lbmRhdGlvbnMoXG4gICAgdG90YWxTaXplOiBudW1iZXIsXG4gICAgY2h1bmtzOiBCdW5kbGVDaHVua1tdLFxuICAgIGFzc2V0czogQnVuZGxlQXNzZXRbXSxcbiAgICBkZXBlbmRlbmNpZXM6IERlcGVuZGVuY3lBbmFseXNpc1tdXG4gICk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgaWYgKHRvdGFsU2l6ZSA+IHRoaXMuVEFSR0VUX0JVTkRMRV9TSVpFKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgQnVuZGxlIHNpemUgZXhjZWVkcyB0YXJnZXQgYnkgJHt0b3RhbFNpemUgLSB0aGlzLlRBUkdFVF9CVU5ETEVfU0laRX1rQmApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBsYXJnZUNodW5rcyA9IGNodW5rcy5maWx0ZXIoY2h1bmsgPT4gY2h1bmsuc2l6ZSA+IHRoaXMuVEFSR0VUX0NIVU5LX1NJWkUpO1xuICAgIGlmIChsYXJnZUNodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgJHtsYXJnZUNodW5rcy5sZW5ndGh9IGNodW5rcyBleGNlZWQgcmVjb21tZW5kZWQgc2l6ZSAtIGNvbnNpZGVyIGNvZGUgc3BsaXR0aW5nYCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHVub3B0aW1pemVkQXNzZXRzID0gYXNzZXRzLmZpbHRlcihhc3NldCA9PiAhYXNzZXQub3B0aW1pemVkICYmIGFzc2V0LnNpemUgPiAxMCk7XG4gICAgaWYgKHVub3B0aW1pemVkQXNzZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKGAke3Vub3B0aW1pemVkQXNzZXRzLmxlbmd0aH0gYXNzZXRzIGNvdWxkIGJlIG9wdGltaXplZCBmb3IgYmV0dGVyIGNvbXByZXNzaW9uYCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGhlYXZ5RGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzLmZpbHRlcihkZXAgPT4gZGVwLnNpemUgPiAxMDApO1xuICAgIGlmIChoZWF2eURlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgQ29uc2lkZXIgYWx0ZXJuYXRpdmVzIGZvciAke2hlYXZ5RGVwZW5kZW5jaWVzLmxlbmd0aH0gaGVhdnkgZGVwZW5kZW5jaWVzYCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGFkZEFsZXJ0KGFsZXJ0OiBCdW5kbGVPcHRpbWl6YXRpb25BbGVydCk6IHZvaWQge1xuICAgIHRoaXMuYWxlcnRzLnB1c2goYWxlcnQpO1xuICAgIFxuICAgIC8vIEtlZXAgb25seSByZWNlbnQgYWxlcnRzXG4gICAgaWYgKHRoaXMuYWxlcnRzLmxlbmd0aCA+IDUwKSB7XG4gICAgICB0aGlzLmFsZXJ0cyA9IHRoaXMuYWxlcnRzLnNsaWNlKC0yNSk7XG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhbGVydFxuICAgIGNvbnN0IHNldmVyaXR5SWNvbiA9IGFsZXJ0LnNldmVyaXR5ID09PSAnY3JpdGljYWwnID8gJ/CfmqgnIDogJ+KaoO+4jyc7XG4gICAgY29uc29sZS5sb2coYCR7c2V2ZXJpdHlJY29ufSBCdW5kbGUgQWxlcnQ6ICR7YWxlcnQubWVzc2FnZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBhbGVydHNcbiAgICovXG4gIGdldEN1cnJlbnRBbGVydHMoKTogQnVuZGxlT3B0aW1pemF0aW9uQWxlcnRbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmFsZXJ0c107XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGFsZXJ0c1xuICAgKi9cbiAgY2xlYXJBbGVydHMoKTogdm9pZCB7XG4gICAgdGhpcy5hbGVydHMgPSBbXTtcbiAgICBjb25zb2xlLmxvZygn8J+TpiBCdW5kbGUgb3B0aW1pemF0aW9uIGFsZXJ0cyBjbGVhcmVkJyk7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3J0IGJ1bmRsZSBhbmFseXNpcyBkYXRhXG4gICAqL1xuICBhc3luYyBleHBvcnRCdW5kbGVEYXRhKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZU9wdGltaXphdGlvblJlcG9ydCgpO1xuICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJlcG9ydCxcbiAgICAgICAgaGlzdG9yeTogdGhpcy5hbmFseXNpc0hpc3RvcnksXG4gICAgICAgIGFsZXJ0czogdGhpcy5hbGVydHNcbiAgICAgIH07XG5cbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGV4cG9ydERhdGEsIG51bGwsIDIpKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OmIEJ1bmRsZSBhbmFseXNpcyBkYXRhIGV4cG9ydGVkIHRvOiAke2ZpbGVQYXRofWApO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGV4cG9ydCBidW5kbGUgZGF0YTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==