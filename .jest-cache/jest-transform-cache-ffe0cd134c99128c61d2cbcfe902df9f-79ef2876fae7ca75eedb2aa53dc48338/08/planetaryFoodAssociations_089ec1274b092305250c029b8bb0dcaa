a67fb04f2bf41b09e2cad061b57a030b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatelementalState = exports.getNutritionalSynergy = exports.getFlavorBoost = exports.getLunarPhaseBoost = exports.getZodiacBoost = exports.getDignityMultiplier = exports.calculatePlanetaryBoost = exports.planetaryFoodAssociations = void 0;
exports.planetaryFoodAssociations = {
    Sun: {
        name: 'Sun',
        elements: ['Fire'],
        qualities: ['Hot', 'Dry'],
        foodCategories: ['Fruits', 'Spices', 'Grains'],
        specificFoods: ['Oranges', 'Lemons', 'Honey', 'Saffron', 'Cinnamon', 'Wheat'],
        cuisines: ['Mediterranean', 'Indian', 'Middle Eastern'],
        elementalBoost: { 'Fire': 0.3, 'Air': 0.1 }
    },
    Moon: {
        name: 'Moon',
        elements: ['Water'],
        qualities: ['Cold', 'Moist'],
        foodCategories: ['Vegetables', 'Dairy', 'Seafood'],
        specificFoods: ['Cucumber', 'Lettuce', 'Milk', 'Yogurt', 'White fish', 'Rice'],
        cuisines: ['Japanese', 'Nordic', 'Coastal'],
        elementalBoost: { 'Water': 0.3, 'Earth': 0.1 }
    },
    Mercury: {
        name: 'Mercury',
        elements: ['Air', 'Earth'],
        qualities: ['Mixed', 'Adaptable'],
        foodCategories: ['Nuts', 'Seeds', 'Herbs'],
        specificFoods: ['Almonds', 'Fennel', 'Mint', 'Celery', 'Mixed greens'],
        cuisines: ['Fusion', 'Contemporary', 'Diverse'],
        elementalBoost: { 'Air': 0.2, 'Earth': 0.2 }
    },
    Venus: {
        name: 'Venus',
        elements: ['Earth', 'Water'],
        qualities: ['Cool', 'Moist'],
        foodCategories: ['Fruits', 'Sweets', 'Dairy'],
        specificFoods: ['Apples', 'Berries', 'Chocolate', 'Vanilla', 'Cream'],
        cuisines: ['French', 'Italian', 'Dessert-focused'],
        elementalBoost: { 'Earth': 0.2, 'Water': 0.2 }
    },
    Mars: {
        name: 'Mars',
        elements: ['Fire'],
        qualities: ['Hot', 'Dry'],
        foodCategories: ['Meats', 'Spices', 'Alcohol'],
        specificFoods: ['Red meat', 'Chili', 'Garlic', 'Onions', 'Red wine'],
        cuisines: ['Spicy', 'BBQ', 'Grilled'],
        elementalBoost: { 'Fire': 0.4 }
    },
    Jupiter: {
        name: 'Jupiter',
        elements: ['Fire', 'Air'],
        qualities: ['Warm', 'Moist'],
        foodCategories: ['Rich foods', 'Fruits', 'Meats'],
        specificFoods: ['Fig', 'Asparagus', 'Salmon', 'Sage', 'Nutmeg'],
        cuisines: ['Abundant', 'Festive', 'Celebratory'],
        elementalBoost: { 'Fire': 0.2, 'Air': 0.2 }
    },
    Saturn: {
        name: 'Saturn',
        elements: ['Earth'],
        qualities: ['Cold', 'Dry'],
        foodCategories: ['Root vegetables', 'Grains', 'Legumes'],
        specificFoods: ['Potatoes', 'Beets', 'Rye', 'Lentils', 'Black tea'],
        cuisines: ['Rustic', 'Traditional', 'Preserved'],
        elementalBoost: { 'Earth': 0.4 }
    },
    Uranus: {
        name: 'Uranus',
        elements: ['Air'],
        qualities: ['Cold', 'Dry'],
        foodCategories: ['Unusual foods', 'Novel ingredients'],
        specificFoods: ['Exotic fruits', 'Molecular gastronomy items', 'Fermented foods'],
        cuisines: ['Experimental', 'Avant-garde', 'Futuristic'],
        elementalBoost: { 'Air': 0.4 }
    },
    Neptune: {
        name: 'Neptune',
        elements: ['Water'],
        qualities: ['Cold', 'Moist'],
        foodCategories: ['Seafood', 'Alcohol', 'Elusive flavors'],
        specificFoods: ['Seaweed', 'White wine', 'Delicate fish', 'Coconut'],
        cuisines: ['Ethereal', 'Subtle', 'Inspired'],
        elementalBoost: { 'Water': 0.4 }
    },
    Pluto: {
        name: 'Pluto',
        elements: ['Water', 'Fire'],
        qualities: ['Transformative'],
        foodCategories: ['Fermented foods', 'Strong flavors', 'Transformed ingredients'],
        specificFoods: ['Dark chocolate', 'Coffee', 'Mushrooms', 'Aged cheese'],
        cuisines: ['Intense', 'Complex', 'Deep'],
        elementalBoost: { 'Water': 0.2, 'Fire': 0.2 }
    },
    Rahu: {
        name: 'Rahu',
        elements: ['Air', 'Fire'],
        qualities: ['Expansive', 'Chaotic'],
        foodCategories: ['Foreign foods', 'Unusual combinations', 'Addictive tastes'],
        specificFoods: ['Exotic spices', 'Foreign delicacies', 'Smoky flavors', 'Powerful stimulants'],
        cuisines: ['Fusion', 'Unexpected combinations', 'Foreign cuisines'],
        elementalBoost: { 'Air': 0.2, 'Fire': 0.2 }
    },
    Ketu: {
        name: 'Ketu',
        elements: ['Fire', 'Water'],
        qualities: ['Spiritual', 'Subtle'],
        foodCategories: ['Simple foods', 'Healing herbs', 'Purifying ingredients'],
        specificFoods: ['Healing teas', 'Cleansing herbs', 'Simple grains', 'Pure water'],
        cuisines: ['Ascetic', 'Monastic', 'Purifying'],
        elementalBoost: { 'Fire': 0.2, 'Water': 0.2 }
    }
};
/**
 * Calculate planetary boost for an ingredient based on current astrological state
 */
const calculatePlanetaryBoost = (item, // ElementalItem type
planetPositions, currentZodiac, lunarPhase) => {
    let boost = 0;
    const dominantPlanets = [];
    const dignities = {};
    // Planetary position calculations
    Object.entries(planetPositions).forEach(([_planet, _position]) => {
        const planetInfo = exports.planetaryFoodAssociations[_planet];
        if (!planetInfo)
            return;
        // Basic planetary boost
        const baseBoost = planetInfo.boostValue || 0.1;
        boost += baseBoost;
        // Add planet to dominant list if significant
        if (baseBoost > 0.2) {
            dominantPlanets.push(_planet);
            // Add dignity information for dominant planets
            dignities[_planet] = {
                type: 'Neutral',
                strength: baseBoost,
                favorableZodiacSigns: currentZodiac ? [currentZodiac] : [],
            };
        }
    });
    // Zodiac sign boost if available
    if (currentZodiac) {
        boost += (0, exports.getZodiacBoost)(currentZodiac, item);
    }
    // Lunar phase boost if available
    if (lunarPhase) {
        boost += (0, exports.getLunarPhaseBoost)(lunarPhase);
    }
    return {
        boost: parseFloat(boost.toFixed(2)),
        dominantPlanets: Array.from(new Set(dominantPlanets)),
        dignities
    };
};
exports.calculatePlanetaryBoost = calculatePlanetaryBoost;
// Helper functions for calculations
const getTriplicityRulers = (_zodiacSign) => {
    // Implementation depends on your zodiac mappings
    return ['Sun', 'Mars', 'Jupiter'];
};
const getSeasonalMultiplier = () => {
    // Implementation depends on your seasonal logic
    return 1.0;
};
/**
 * Get dignity multiplier for calculations
 */
const getDignityMultiplier = (dignity) => {
    const multipliers = {
        'Domicile': 1.5,
        'Exaltation': 1.3,
        'Triplicity': 1.2,
        'Term': 1.1,
        'Face': 1.05,
        'Mooltrikona': 1.4,
        'Nakshatra': 1.25,
        'Detriment': 0.7,
        'Fall': 0.5,
        'Neutral': 1.0
    };
    return multipliers[dignity] || 1.0;
};
exports.getDignityMultiplier = getDignityMultiplier;
/**
 * Get zodiac boost based on elemental properties
 */
const getZodiacBoost = (zodiacSign, item) => {
    var _a;
    // Get zodiac sign element
    const zodiacElements = {
        aries: 'Fire', leo: 'Fire', sagittarius: 'Fire',
        taurus: 'Earth', virgo: 'Earth', capricorn: 'Earth',
        gemini: 'Air', libra: 'Air', aquarius: 'Air',
        cancer: 'Water', scorpio: 'Water', pisces: 'Water'
    };
    // Normalize zodiac sign to lowercase for lookup
    const normalizedSign = zodiacSign.toLowerCase();
    const zodiacElement = zodiacElements[normalizedSign] || 'Fire';
    // Check if item has elemental properties
    const itemData = item;
    if (!itemData.elementalProperties) {
        return 0.1; // Minimum boost if no elemental data
    }
    // Calculate boost based on elemental affinity
    // Higher boost if the cuisine's dominant element matches the zodiac element
    const elementValue = itemData.elementalProperties[zodiacElement] || 0;
    const elementBoost = elementValue * 0.8; // Scale based on how strong the element is
    // Check if cuisine explicitly lists this zodiac sign as favorable
    const zodiacBoost = ((_a = itemData.zodiacInfluences) === null || _a === void 0 ? void 0 : _a.includes(normalizedSign)) ? 0.3 : 0;
    // Apply modality boost based on cardinal/fixed/mutable qualities
    let modalityBoost = 0;
    const cardinalSigns = ['aries', 'cancer', 'libra', 'capricorn'];
    const fixedSigns = ['taurus', 'leo', 'scorpio', 'aquarius'];
    // If not cardinal or fixed, it's mutable (gemini, virgo, sagittarius, pisces)
    if (cardinalSigns.includes(normalizedSign)) {
        // Cardinal signs prefer bold, distinctive cuisines
        modalityBoost = (itemData.elementalProperties['Fire'] || 0) * 0.2;
    }
    else if (fixedSigns.includes(normalizedSign)) {
        // Fixed signs prefer substantial, traditional cuisines
        modalityBoost = (itemData.elementalProperties['Earth'] || 0) * 0.2;
    }
    else {
        // Mutable signs prefer adaptable, fusion cuisines
        modalityBoost = (itemData.elementalProperties['Air'] || 0) * 0.2;
    }
    // Calculate seasonal alignment (certain cuisines are better aligned with seasons)
    const seasonalBoost = calculateSeasonalAlignment(normalizedSign, item) * 0.15;
    // Combine all boost factors
    const totalBoost = elementBoost + zodiacBoost + modalityBoost + seasonalBoost;
    // Return normalized boost value (0-1 range)
    return Math.min(0.7, Math.max(0.1, totalBoost));
};
exports.getZodiacBoost = getZodiacBoost;
// Helper function to calculate seasonal alignment
const calculateSeasonalAlignment = (zodiacSign, item) => {
    var _a;
    // Map zodiac signs to seasons
    const seasonMap = {
        'aries': 'spring', 'taurus': 'spring', 'gemini': 'spring',
        'cancer': 'summer', 'leo': 'summer', 'virgo': 'summer',
        'libra': 'autumn', 'scorpio': 'autumn', 'sagittarius': 'autumn',
        'capricorn': 'winter', 'aquarius': 'winter', 'pisces': 'winter'
    };
    const season = seasonMap[zodiacSign];
    // Seasonal elemental correspondences
    const seasonalElements = {
        'spring': 'Air',
        'summer': 'Fire',
        'autumn': 'Earth',
        'winter': 'Water'
    };
    const seasonalElement = seasonalElements[season];
    // Calculate alignment based on the cuisine's elemental properties
    // Higher value if the cuisine aligns with the season's element
    const itemData = item;
    return ((_a = itemData.elementalProperties) === null || _a === void 0 ? void 0 : _a[seasonalElement]) || 0.1;
};
/**
 * Calculate boost based on lunar phase
 */
const getLunarPhaseBoost = (lunarPhase) => {
    // New calculation based on lunar phase energy patterns
    // Different lunar phases enhance different elemental and alchemical properties
    // Map lunar phases to elemental and alchemical influences
    const lunarInfluences = {
        'new moon': { element: 'Fire', alchemical: 'Spirit', intensity: 0.8 },
        'waxing crescent': { element: 'Fire', alchemical: 'Spirit', intensity: 0.7 },
        'first quarter': { element: 'Air', alchemical: 'Substance', intensity: 0.6 },
        'waxing gibbous': { element: 'Air', alchemical: 'Substance', intensity: 0.7 },
        'full moon': { element: 'Water', alchemical: 'Essence', intensity: 0.8 },
        'waning gibbous': { element: 'Water', alchemical: 'Essence', intensity: 0.7 },
        'last quarter': { element: 'Earth', alchemical: 'Matter', intensity: 0.6 },
        'waning crescent': { element: 'Earth', alchemical: 'Matter', intensity: 0.7 }
    };
    // Get lunar influence data or provide fallback
    const influence = lunarInfluences[lunarPhase] || {
        element: 'Water',
        alchemical: 'Essence',
        intensity: 0.5
    };
    // Calculate boost based on lunar phase intensity
    // This will vary between 0.15 and 0.4 depending on the phase
    return 0.15 + (influence.intensity * 0.25);
};
exports.getLunarPhaseBoost = getLunarPhaseBoost;
/**
 * Get flavor boost from planetary associations
 */
const getFlavorBoost = (_planet, _ingredient) => {
    const ingredientData = _ingredient;
    const elementBoost = exports.planetaryFoodAssociations[_planet].elementalBoost || {};
    return Object.entries(elementBoost).reduce((acc, [element, boost]) => {
        var _a;
        return acc + (((_a = ingredientData.elementalProperties) === null || _a === void 0 ? void 0 : _a[element]) || 0) * (boost || 0);
    }, 0);
};
exports.getFlavorBoost = getFlavorBoost;
/**
 * Get nutritional synergy between ingredient and planet
 */
const getNutritionalSynergy = (_planet, _ingredient) => {
    // Implementation depends on your nutritional data
    return [];
};
exports.getNutritionalSynergy = getNutritionalSynergy;
/**
 * Format elemental balance for display
 */
const formatelementalState = (elements) => {
    const validEntries = Object.entries(elements)
        .filter(([_, val]) => Number.isFinite(val))
        .map(([elem, val]) => `${elem} ${Math.round((val || 0) * 100)}%`)
        .join(" · ");
    return validEntries;
};
exports.formatelementalState = formatelementalState;
exports.default = exports.planetaryFoodAssociations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb25zdGFudHMvcGxhbmV0YXJ5Rm9vZEFzc29jaWF0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7QUE0RGEsUUFBQSx5QkFBeUIsR0FBb0M7SUFDeEUsR0FBRyxFQUFFO1FBQ0gsSUFBSSxFQUFFLEtBQUs7UUFDWCxRQUFRLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDbEIsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztRQUN6QixjQUFjLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQztRQUM5QyxhQUFhLEVBQUUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQztRQUM3RSxRQUFRLEVBQUUsQ0FBQyxlQUFlLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixDQUFDO1FBQ3ZELGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtLQUM1QztJQUNELElBQUksRUFBRTtRQUNKLElBQUksRUFBRSxNQUFNO1FBQ1osUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ25CLFNBQVMsRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7UUFDNUIsY0FBYyxFQUFFLENBQUMsWUFBWSxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUM7UUFDbEQsYUFBYSxFQUFFLENBQUMsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7UUFDOUUsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUM7UUFDM0MsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFO0tBQy9DO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsSUFBSSxFQUFFLFNBQVM7UUFDZixRQUFRLEVBQUUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDO1FBQzFCLFNBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUM7UUFDakMsY0FBYyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDMUMsYUFBYSxFQUFFLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLGNBQWMsQ0FBQztRQUN0RSxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLFNBQVMsQ0FBQztRQUMvQyxjQUFjLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7S0FDN0M7SUFDRCxLQUFLLEVBQUU7UUFDTCxJQUFJLEVBQUUsT0FBTztRQUNiLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDNUIsU0FBUyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztRQUM1QixjQUFjLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQztRQUM3QyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDO1FBQ3JFLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsaUJBQWlCLENBQUM7UUFDbEQsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFO0tBQy9DO0lBQ0QsSUFBSSxFQUFFO1FBQ0osSUFBSSxFQUFFLE1BQU07UUFDWixRQUFRLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDbEIsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztRQUN6QixjQUFjLEVBQUUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQztRQUM5QyxhQUFhLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDO1FBQ3BFLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDO1FBQ3JDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUU7S0FDaEM7SUFDRCxPQUFPLEVBQUU7UUFDUCxJQUFJLEVBQUUsU0FBUztRQUNmLFFBQVEsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7UUFDekIsU0FBUyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztRQUM1QixjQUFjLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQztRQUNqRCxhQUFhLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDO1FBQy9ELFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxTQUFTLEVBQUUsYUFBYSxDQUFDO1FBQ2hELGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtLQUM1QztJQUNELE1BQU0sRUFBRTtRQUNOLElBQUksRUFBRSxRQUFRO1FBQ2QsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ25CLFNBQVMsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7UUFDMUIsY0FBYyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQztRQUN4RCxhQUFhLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDO1FBQ25FLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxhQUFhLEVBQUUsV0FBVyxDQUFDO1FBQ2hELGNBQWMsRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7S0FDakM7SUFDRCxNQUFNLEVBQUU7UUFDTixJQUFJLEVBQUUsUUFBUTtRQUNkLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQztRQUNqQixTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO1FBQzFCLGNBQWMsRUFBRSxDQUFDLGVBQWUsRUFBRSxtQkFBbUIsQ0FBQztRQUN0RCxhQUFhLEVBQUUsQ0FBQyxlQUFlLEVBQUUsNEJBQTRCLEVBQUUsaUJBQWlCLENBQUM7UUFDakYsUUFBUSxFQUFFLENBQUMsY0FBYyxFQUFFLGFBQWEsRUFBRSxZQUFZLENBQUM7UUFDdkQsY0FBYyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtLQUMvQjtJQUNELE9BQU8sRUFBRTtRQUNQLElBQUksRUFBRSxTQUFTO1FBQ2YsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ25CLFNBQVMsRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7UUFDNUIsY0FBYyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQztRQUN6RCxhQUFhLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxTQUFTLENBQUM7UUFDcEUsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUM7UUFDNUMsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRTtLQUNqQztJQUNELEtBQUssRUFBRTtRQUNMLElBQUksRUFBRSxPQUFPO1FBQ2IsUUFBUSxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQztRQUMzQixTQUFTLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztRQUM3QixjQUFjLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSx5QkFBeUIsQ0FBQztRQUNoRixhQUFhLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLGFBQWEsQ0FBQztRQUN2RSxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQztRQUN4QyxjQUFjLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUU7S0FDOUM7SUFDRCxJQUFJLEVBQUU7UUFDSixJQUFJLEVBQUUsTUFBTTtRQUNaLFFBQVEsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUM7UUFDekIsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQztRQUNuQyxjQUFjLEVBQUUsQ0FBQyxlQUFlLEVBQUUsc0JBQXNCLEVBQUUsa0JBQWtCLENBQUM7UUFDN0UsYUFBYSxFQUFFLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFLGVBQWUsRUFBRSxxQkFBcUIsQ0FBQztRQUM5RixRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUseUJBQXlCLEVBQUUsa0JBQWtCLENBQUM7UUFDbkUsY0FBYyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFO0tBQzVDO0lBQ0QsSUFBSSxFQUFFO1FBQ0osSUFBSSxFQUFFLE1BQU07UUFDWixRQUFRLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDO1FBQzNCLFNBQVMsRUFBRSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUM7UUFDbEMsY0FBYyxFQUFFLENBQUMsY0FBYyxFQUFFLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQztRQUMxRSxhQUFhLEVBQUUsQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLEVBQUUsZUFBZSxFQUFFLFlBQVksQ0FBQztRQUNqRixRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsQ0FBQztRQUM5QyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7S0FDOUM7Q0FDRixDQUFDO0FBYUY7O0dBRUc7QUFDSSxNQUFNLHVCQUF1QixHQUFHLENBQ3JDLElBQWEsRUFBRSxxQkFBcUI7QUFDcEMsZUFBd0MsRUFDeEMsYUFBNkIsRUFDN0IsVUFBOEIsRUFDOUIsRUFBRTtJQUNGLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNkLE1BQU0sZUFBZSxHQUFhLEVBQUUsQ0FBQztJQUNyQyxNQUFNLFNBQVMsR0FBNEMsRUFBRSxDQUFDO0lBRTlELGtDQUFrQztJQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxFQUFFLEVBQUU7UUFDL0QsTUFBTSxVQUFVLEdBQUcsaUNBQXlCLENBQUMsT0FBaUIsQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxVQUFVO1lBQUUsT0FBTztRQUV4Qix3QkFBd0I7UUFDeEIsTUFBTSxTQUFTLEdBQUcsVUFBVSxDQUFDLFVBQVUsSUFBSSxHQUFHLENBQUM7UUFDL0MsS0FBSyxJQUFJLFNBQVMsQ0FBQztRQUVuQiw2Q0FBNkM7UUFDN0MsSUFBSSxTQUFTLEdBQUcsR0FBRyxFQUFFO1lBQ25CLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFOUIsK0NBQStDO1lBQy9DLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDbkIsSUFBSSxFQUFFLFNBQTZCO2dCQUNuQyxRQUFRLEVBQUUsU0FBUztnQkFDbkIsb0JBQW9CLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2FBQzNELENBQUM7U0FDSDtJQUNILENBQUMsQ0FBQyxDQUFDO0lBRUgsaUNBQWlDO0lBQ2pDLElBQUksYUFBYSxFQUFFO1FBQ2pCLEtBQUssSUFBSSxJQUFBLHNCQUFjLEVBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzlDO0lBRUQsaUNBQWlDO0lBQ2pDLElBQUksVUFBVSxFQUFFO1FBQ2QsS0FBSyxJQUFJLElBQUEsMEJBQWtCLEVBQUMsVUFBVSxDQUFDLENBQUM7S0FDekM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLGVBQWUsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3JELFNBQVM7S0FDVixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBL0NXLFFBQUEsdUJBQXVCLDJCQStDbEM7QUFFRixvQ0FBb0M7QUFDcEMsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLFdBQTJCLEVBQVksRUFBRTtJQUNwRSxpREFBaUQ7SUFDakQsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFhLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUYsTUFBTSxxQkFBcUIsR0FBRyxHQUFXLEVBQUU7SUFDekMsZ0RBQWdEO0lBQ2hELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSSxNQUFNLG9CQUFvQixHQUFHLENBQUMsT0FBeUIsRUFBVSxFQUFFO0lBQ3hFLE1BQU0sV0FBVyxHQUFxQztRQUNwRCxVQUFVLEVBQUUsR0FBRztRQUNmLFlBQVksRUFBRSxHQUFHO1FBQ2pCLFlBQVksRUFBRSxHQUFHO1FBQ2pCLE1BQU0sRUFBRSxHQUFHO1FBQ1gsTUFBTSxFQUFFLElBQUk7UUFDWixhQUFhLEVBQUUsR0FBRztRQUNsQixXQUFXLEVBQUUsSUFBSTtRQUNqQixXQUFXLEVBQUUsR0FBRztRQUNoQixNQUFNLEVBQUUsR0FBRztRQUNYLFNBQVMsRUFBRSxHQUFHO0tBQ2YsQ0FBQztJQUNGLE9BQU8sV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNyQyxDQUFDLENBQUM7QUFkVyxRQUFBLG9CQUFvQix3QkFjL0I7QUFFRjs7R0FFRztBQUNJLE1BQU0sY0FBYyxHQUFHLENBQUMsVUFBa0IsRUFBRSxJQUFhLEVBQVUsRUFBRTs7SUFDMUUsMEJBQTBCO0lBQzFCLE1BQU0sY0FBYyxHQUF1QztRQUN6RCxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU07UUFDL0MsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPO1FBQ25ELE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSztRQUM1QyxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU87S0FDbkQsQ0FBQztJQUVGLGdEQUFnRDtJQUNoRCxNQUFNLGNBQWMsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDaEQsTUFBTSxhQUFhLEdBQUcsY0FBYyxDQUFDLGNBQTZDLENBQUMsSUFBSSxNQUFNLENBQUM7SUFFOUYseUNBQXlDO0lBQ3pDLE1BQU0sUUFBUSxHQUFHLElBQVcsQ0FBQztJQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFO1FBQ2pDLE9BQU8sR0FBRyxDQUFDLENBQUMscUNBQXFDO0tBQ2xEO0lBRUQsOENBQThDO0lBQzlDLDRFQUE0RTtJQUM1RSxNQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsbUJBQW1CLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RFLE1BQU0sWUFBWSxHQUFHLFlBQVksR0FBRyxHQUFHLENBQUMsQ0FBQywyQ0FBMkM7SUFFcEYsa0VBQWtFO0lBQ2xFLE1BQU0sV0FBVyxHQUFHLENBQUEsTUFBQSxRQUFRLENBQUMsZ0JBQWdCLDBDQUFFLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbEYsaUVBQWlFO0lBQ2pFLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQztJQUN0QixNQUFNLGFBQWEsR0FBRyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2hFLE1BQU0sVUFBVSxHQUFHLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDNUQsOEVBQThFO0lBRTlFLElBQUksYUFBYSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRTtRQUMxQyxtREFBbUQ7UUFDbkQsYUFBYSxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNuRTtTQUFNLElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRTtRQUM5Qyx1REFBdUQ7UUFDdkQsYUFBYSxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNwRTtTQUFNO1FBQ0wsa0RBQWtEO1FBQ2xELGFBQWEsR0FBRyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDbEU7SUFFRCxrRkFBa0Y7SUFDbEYsTUFBTSxhQUFhLEdBQUcsMEJBQTBCLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUU5RSw0QkFBNEI7SUFDNUIsTUFBTSxVQUFVLEdBQUcsWUFBWSxHQUFHLFdBQVcsR0FBRyxhQUFhLEdBQUcsYUFBYSxDQUFDO0lBRTlFLDRDQUE0QztJQUM1QyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDbEQsQ0FBQyxDQUFDO0FBcERXLFFBQUEsY0FBYyxrQkFvRHpCO0FBRUYsa0RBQWtEO0FBQ2xELE1BQU0sMEJBQTBCLEdBQUcsQ0FBQyxVQUFrQixFQUFFLElBQWEsRUFBVSxFQUFFOztJQUMvRSw4QkFBOEI7SUFDOUIsTUFBTSxTQUFTLEdBQTJCO1FBQ3hDLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUTtRQUN6RCxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVE7UUFDdEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLGFBQWEsRUFBRSxRQUFRO1FBQy9ELFdBQVcsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUTtLQUNoRSxDQUFDO0lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRXJDLHFDQUFxQztJQUNyQyxNQUFNLGdCQUFnQixHQUF1QztRQUMzRCxRQUFRLEVBQUUsS0FBSztRQUNmLFFBQVEsRUFBRSxNQUFNO1FBQ2hCLFFBQVEsRUFBRSxPQUFPO1FBQ2pCLFFBQVEsRUFBRSxPQUFPO0tBQ2xCLENBQUM7SUFFRixNQUFNLGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUVqRCxrRUFBa0U7SUFDbEUsK0RBQStEO0lBQy9ELE1BQU0sUUFBUSxHQUFHLElBQVcsQ0FBQztJQUM3QixPQUFPLENBQUEsTUFBQSxRQUFRLENBQUMsbUJBQW1CLDBDQUFHLGVBQWUsQ0FBQyxLQUFJLEdBQUcsQ0FBQztBQUNoRSxDQUFDLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxVQUFzQixFQUFVLEVBQUU7SUFDbkUsdURBQXVEO0lBQ3ZELCtFQUErRTtJQUUvRSwwREFBMEQ7SUFDMUQsTUFBTSxlQUFlLEdBSWhCO1FBQ0gsVUFBVSxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDckUsaUJBQWlCLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUM1RSxlQUFlLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUM1RSxnQkFBZ0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFO1FBQzdFLFdBQVcsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFO1FBQ3hFLGdCQUFnQixFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDN0UsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDMUUsaUJBQWlCLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtLQUM5RSxDQUFDO0lBRUYsK0NBQStDO0lBQy9DLE1BQU0sU0FBUyxHQUFHLGVBQWUsQ0FBQyxVQUFVLENBQUMsSUFBSTtRQUMvQyxPQUFPLEVBQUUsT0FBTztRQUNoQixVQUFVLEVBQUUsU0FBUztRQUNyQixTQUFTLEVBQUUsR0FBRztLQUNmLENBQUM7SUFFRixpREFBaUQ7SUFDakQsNkRBQTZEO0lBQzdELE9BQU8sSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUM3QyxDQUFDLENBQUM7QUE5QlcsUUFBQSxrQkFBa0Isc0JBOEI3QjtBQUVGOztHQUVHO0FBQ0ksTUFBTSxjQUFjLEdBQUcsQ0FDNUIsT0FBZSxFQUNmLFdBQW9CLEVBQ1osRUFBRTtJQUNWLE1BQU0sY0FBYyxHQUFHLFdBQWtCLENBQUM7SUFDMUMsTUFBTSxZQUFZLEdBQUcsaUNBQXlCLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQztJQUM3RSxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUU7O1FBQ25FLE9BQU8sR0FBRyxHQUFHLENBQUMsQ0FBQSxNQUFBLGNBQWMsQ0FBQyxtQkFBbUIsMENBQUcsT0FBTyxDQUFDLEtBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFlLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDN0YsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxDQUFDO0FBVFcsUUFBQSxjQUFjLGtCQVN6QjtBQUVGOztHQUVHO0FBQ0ksTUFBTSxxQkFBcUIsR0FBRyxDQUNuQyxPQUFlLEVBQ2YsV0FBb0IsRUFDVixFQUFFO0lBQ1osa0RBQWtEO0lBQ2xELE9BQU8sRUFBRSxDQUFDO0FBQ1osQ0FBQyxDQUFDO0FBTlcsUUFBQSxxQkFBcUIseUJBTWhDO0FBRUY7O0dBRUc7QUFDSSxNQUFNLG9CQUFvQixHQUFHLENBQ2xDLFFBQXlDLEVBQ2pDLEVBQUU7SUFDVixNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztTQUMxQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUMxQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO1NBQ2hFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUVmLE9BQU8sWUFBWSxDQUFDO0FBQ3RCLENBQUMsQ0FBQztBQVRXLFFBQUEsb0JBQW9CLHdCQVMvQjtBQUVGLGtCQUFlLGlDQUF5QixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvY29uc3RhbnRzL3BsYW5ldGFyeUZvb2RBc3NvY2lhdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWxlbWVudGFsQ2hhcmFjdGVyIH0gZnJvbSAnLi9wbGFuZXRhcnlFbGVtZW50cyc7XG5pbXBvcnQgeyBab2RpYWNTaWduIH0gZnJvbSAnLi96b2RpYWMnO1xuaW1wb3J0IHsgTHVuYXJQaGFzZVdpdGhTcGFjZXMgfSBmcm9tICcuLi90eXBlcy9hbGNoZW15JztcblxuLyoqXG4gKiBFbmhhbmNlZCBwbGFuZXQgdHlwZSBpbmNvcnBvcmF0aW5nIG11bHRpcGxlIGFzdHJvbG9naWNhbCB0cmFkaXRpb25zXG4gKi9cbi8qKlxuICogRXh0ZW5kZWQgUGxhbmV0IHR5cGUgZm9yIHBsYW5ldGFyeSBmb29kIGFzc29jaWF0aW9uc1xuICovXG5leHBvcnQgdHlwZSBQbGFuZXQgPSBcbiAgfCAnU3VuJyB8ICdNb29uJyB8ICdNZXJjdXJ5JyB8ICdWZW51cycgfCAnTWFycycgXG4gIHwgJ0p1cGl0ZXInIHwgJ1NhdHVybicgfCAnVXJhbnVzJyB8ICdOZXB0dW5lJyB8ICdQbHV0bydcbiAgfCAnUmFodScgfCAnS2V0dSc7XG5cbi8qKlxuICogUGxhbmV0YXJ5IGRpZ25pdHkgdHlwZXMgZm9yIGNhbGN1bGF0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIFBsYW5ldGFyeURpZ25pdHkgPSBcbiAgfCAnRG9taWNpbGUnXG4gIHwgJ0V4YWx0YXRpb24nXG4gIHwgJ1RyaXBsaWNpdHknXG4gIHwgJ1Rlcm0nXG4gIHwgJ0ZhY2UnXG4gIHwgJ01vb2x0cmlrb25hJ1xuICB8ICdOYWtzaGF0cmEnXG4gIHwgJ0RldHJpbWVudCdcbiAgfCAnRmFsbCdcbiAgfCAnTmV1dHJhbCc7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBwbGFuZXRhcnkgZGlnbml0eSBkZXRhaWxzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGxhbmV0YXJ5RGlnbml0eURldGFpbHMge1xuICB0eXBlOiBQbGFuZXRhcnlEaWduaXR5O1xuICBzdHJlbmd0aDogbnVtYmVyO1xuICBmYXZvcmFibGVab2RpYWNTaWducz86IHN0cmluZ1tdO1xuICB1bmZhdm9yYWJsZVpvZGlhY1NpZ25zPzogc3RyaW5nW107XG59XG5cbi8qKlxuICogTHVuYXIgcGhhc2Ugc3lzdGVtXG4gKi9cbmV4cG9ydCB0eXBlIEx1bmFyUGhhc2UgPSBMdW5hclBoYXNlV2l0aFNwYWNlcztcblxuLyoqXG4gKiBQbGFuZXRhcnkgZm9vZCBhc3NvY2lhdGlvbnMgc3RydWN0dXJlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9vZEFzc29jaWF0aW9uIHtcbiAgbmFtZTogc3RyaW5nO1xuICBlbGVtZW50czogc3RyaW5nW107XG4gIHF1YWxpdGllczogc3RyaW5nW107XG4gIGZvb2RDYXRlZ29yaWVzOiBzdHJpbmdbXTtcbiAgc3BlY2lmaWNGb29kczogc3RyaW5nW107XG4gIGN1aXNpbmVzOiBzdHJpbmdbXTtcbiAgY29va2luZ01ldGhvZHM/OiBzdHJpbmdbXTtcbiAgYm9vc3RWYWx1ZT86IG51bWJlcjtcbiAgZWxlbWVudGFsQm9vc3Q/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xufVxuXG5leHBvcnQgY29uc3QgcGxhbmV0YXJ5Rm9vZEFzc29jaWF0aW9uczogUmVjb3JkPFBsYW5ldCwgRm9vZEFzc29jaWF0aW9uPiA9IHtcbiAgU3VuOiB7XG4gICAgbmFtZTogJ1N1bicsXG4gICAgZWxlbWVudHM6IFsnRmlyZSddLFxuICAgIHF1YWxpdGllczogWydIb3QnLCAnRHJ5J10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnRnJ1aXRzJywgJ1NwaWNlcycsICdHcmFpbnMnXSxcbiAgICBzcGVjaWZpY0Zvb2RzOiBbJ09yYW5nZXMnLCAnTGVtb25zJywgJ0hvbmV5JywgJ1NhZmZyb24nLCAnQ2lubmFtb24nLCAnV2hlYXQnXSxcbiAgICBjdWlzaW5lczogWydNZWRpdGVycmFuZWFuJywgJ0luZGlhbicsICdNaWRkbGUgRWFzdGVybiddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdGaXJlJzogMC4zLCAnQWlyJzogMC4xIH1cbiAgfSxcbiAgTW9vbjoge1xuICAgIG5hbWU6ICdNb29uJyxcbiAgICBlbGVtZW50czogWydXYXRlciddLFxuICAgIHF1YWxpdGllczogWydDb2xkJywgJ01vaXN0J10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnVmVnZXRhYmxlcycsICdEYWlyeScsICdTZWFmb29kJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydDdWN1bWJlcicsICdMZXR0dWNlJywgJ01pbGsnLCAnWW9ndXJ0JywgJ1doaXRlIGZpc2gnLCAnUmljZSddLFxuICAgIGN1aXNpbmVzOiBbJ0phcGFuZXNlJywgJ05vcmRpYycsICdDb2FzdGFsJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ1dhdGVyJzogMC4zLCAnRWFydGgnOiAwLjEgfVxuICB9LFxuICBNZXJjdXJ5OiB7XG4gICAgbmFtZTogJ01lcmN1cnknLFxuICAgIGVsZW1lbnRzOiBbJ0FpcicsICdFYXJ0aCddLFxuICAgIHF1YWxpdGllczogWydNaXhlZCcsICdBZGFwdGFibGUnXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydOdXRzJywgJ1NlZWRzJywgJ0hlcmJzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydBbG1vbmRzJywgJ0Zlbm5lbCcsICdNaW50JywgJ0NlbGVyeScsICdNaXhlZCBncmVlbnMnXSxcbiAgICBjdWlzaW5lczogWydGdXNpb24nLCAnQ29udGVtcG9yYXJ5JywgJ0RpdmVyc2UnXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnQWlyJzogMC4yLCAnRWFydGgnOiAwLjIgfVxuICB9LFxuICBWZW51czoge1xuICAgIG5hbWU6ICdWZW51cycsXG4gICAgZWxlbWVudHM6IFsnRWFydGgnLCAnV2F0ZXInXSxcbiAgICBxdWFsaXRpZXM6IFsnQ29vbCcsICdNb2lzdCddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ0ZydWl0cycsICdTd2VldHMnLCAnRGFpcnknXSxcbiAgICBzcGVjaWZpY0Zvb2RzOiBbJ0FwcGxlcycsICdCZXJyaWVzJywgJ0Nob2NvbGF0ZScsICdWYW5pbGxhJywgJ0NyZWFtJ10sXG4gICAgY3Vpc2luZXM6IFsnRnJlbmNoJywgJ0l0YWxpYW4nLCAnRGVzc2VydC1mb2N1c2VkJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ0VhcnRoJzogMC4yLCAnV2F0ZXInOiAwLjIgfVxuICB9LFxuICBNYXJzOiB7XG4gICAgbmFtZTogJ01hcnMnLFxuICAgIGVsZW1lbnRzOiBbJ0ZpcmUnXSxcbiAgICBxdWFsaXRpZXM6IFsnSG90JywgJ0RyeSddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ01lYXRzJywgJ1NwaWNlcycsICdBbGNvaG9sJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydSZWQgbWVhdCcsICdDaGlsaScsICdHYXJsaWMnLCAnT25pb25zJywgJ1JlZCB3aW5lJ10sXG4gICAgY3Vpc2luZXM6IFsnU3BpY3knLCAnQkJRJywgJ0dyaWxsZWQnXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnRmlyZSc6IDAuNCB9XG4gIH0sXG4gIEp1cGl0ZXI6IHtcbiAgICBuYW1lOiAnSnVwaXRlcicsXG4gICAgZWxlbWVudHM6IFsnRmlyZScsICdBaXInXSxcbiAgICBxdWFsaXRpZXM6IFsnV2FybScsICdNb2lzdCddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ1JpY2ggZm9vZHMnLCAnRnJ1aXRzJywgJ01lYXRzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydGaWcnLCAnQXNwYXJhZ3VzJywgJ1NhbG1vbicsICdTYWdlJywgJ051dG1lZyddLFxuICAgIGN1aXNpbmVzOiBbJ0FidW5kYW50JywgJ0Zlc3RpdmUnLCAnQ2VsZWJyYXRvcnknXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnRmlyZSc6IDAuMiwgJ0Fpcic6IDAuMiB9XG4gIH0sXG4gIFNhdHVybjoge1xuICAgIG5hbWU6ICdTYXR1cm4nLFxuICAgIGVsZW1lbnRzOiBbJ0VhcnRoJ10sXG4gICAgcXVhbGl0aWVzOiBbJ0NvbGQnLCAnRHJ5J10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnUm9vdCB2ZWdldGFibGVzJywgJ0dyYWlucycsICdMZWd1bWVzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydQb3RhdG9lcycsICdCZWV0cycsICdSeWUnLCAnTGVudGlscycsICdCbGFjayB0ZWEnXSxcbiAgICBjdWlzaW5lczogWydSdXN0aWMnLCAnVHJhZGl0aW9uYWwnLCAnUHJlc2VydmVkJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ0VhcnRoJzogMC40IH1cbiAgfSxcbiAgVXJhbnVzOiB7XG4gICAgbmFtZTogJ1VyYW51cycsXG4gICAgZWxlbWVudHM6IFsnQWlyJ10sXG4gICAgcXVhbGl0aWVzOiBbJ0NvbGQnLCAnRHJ5J10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnVW51c3VhbCBmb29kcycsICdOb3ZlbCBpbmdyZWRpZW50cyddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnRXhvdGljIGZydWl0cycsICdNb2xlY3VsYXIgZ2FzdHJvbm9teSBpdGVtcycsICdGZXJtZW50ZWQgZm9vZHMnXSxcbiAgICBjdWlzaW5lczogWydFeHBlcmltZW50YWwnLCAnQXZhbnQtZ2FyZGUnLCAnRnV0dXJpc3RpYyddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdBaXInOiAwLjQgfVxuICB9LFxuICBOZXB0dW5lOiB7XG4gICAgbmFtZTogJ05lcHR1bmUnLFxuICAgIGVsZW1lbnRzOiBbJ1dhdGVyJ10sXG4gICAgcXVhbGl0aWVzOiBbJ0NvbGQnLCAnTW9pc3QnXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydTZWFmb29kJywgJ0FsY29ob2wnLCAnRWx1c2l2ZSBmbGF2b3JzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydTZWF3ZWVkJywgJ1doaXRlIHdpbmUnLCAnRGVsaWNhdGUgZmlzaCcsICdDb2NvbnV0J10sXG4gICAgY3Vpc2luZXM6IFsnRXRoZXJlYWwnLCAnU3VidGxlJywgJ0luc3BpcmVkJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ1dhdGVyJzogMC40IH1cbiAgfSxcbiAgUGx1dG86IHtcbiAgICBuYW1lOiAnUGx1dG8nLFxuICAgIGVsZW1lbnRzOiBbJ1dhdGVyJywgJ0ZpcmUnXSxcbiAgICBxdWFsaXRpZXM6IFsnVHJhbnNmb3JtYXRpdmUnXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydGZXJtZW50ZWQgZm9vZHMnLCAnU3Ryb25nIGZsYXZvcnMnLCAnVHJhbnNmb3JtZWQgaW5ncmVkaWVudHMnXSxcbiAgICBzcGVjaWZpY0Zvb2RzOiBbJ0RhcmsgY2hvY29sYXRlJywgJ0NvZmZlZScsICdNdXNocm9vbXMnLCAnQWdlZCBjaGVlc2UnXSxcbiAgICBjdWlzaW5lczogWydJbnRlbnNlJywgJ0NvbXBsZXgnLCAnRGVlcCddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdXYXRlcic6IDAuMiwgJ0ZpcmUnOiAwLjIgfVxuICB9LFxuICBSYWh1OiB7XG4gICAgbmFtZTogJ1JhaHUnLFxuICAgIGVsZW1lbnRzOiBbJ0FpcicsICdGaXJlJ10sXG4gICAgcXVhbGl0aWVzOiBbJ0V4cGFuc2l2ZScsICdDaGFvdGljJ10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnRm9yZWlnbiBmb29kcycsICdVbnVzdWFsIGNvbWJpbmF0aW9ucycsICdBZGRpY3RpdmUgdGFzdGVzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydFeG90aWMgc3BpY2VzJywgJ0ZvcmVpZ24gZGVsaWNhY2llcycsICdTbW9reSBmbGF2b3JzJywgJ1Bvd2VyZnVsIHN0aW11bGFudHMnXSxcbiAgICBjdWlzaW5lczogWydGdXNpb24nLCAnVW5leHBlY3RlZCBjb21iaW5hdGlvbnMnLCAnRm9yZWlnbiBjdWlzaW5lcyddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdBaXInOiAwLjIsICdGaXJlJzogMC4yIH1cbiAgfSxcbiAgS2V0dToge1xuICAgIG5hbWU6ICdLZXR1JyxcbiAgICBlbGVtZW50czogWydGaXJlJywgJ1dhdGVyJ10sXG4gICAgcXVhbGl0aWVzOiBbJ1NwaXJpdHVhbCcsICdTdWJ0bGUnXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydTaW1wbGUgZm9vZHMnLCAnSGVhbGluZyBoZXJicycsICdQdXJpZnlpbmcgaW5ncmVkaWVudHMnXSxcbiAgICBzcGVjaWZpY0Zvb2RzOiBbJ0hlYWxpbmcgdGVhcycsICdDbGVhbnNpbmcgaGVyYnMnLCAnU2ltcGxlIGdyYWlucycsICdQdXJlIHdhdGVyJ10sXG4gICAgY3Vpc2luZXM6IFsnQXNjZXRpYycsICdNb25hc3RpYycsICdQdXJpZnlpbmcnXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnRmlyZSc6IDAuMiwgJ1dhdGVyJzogMC4yIH1cbiAgfVxufTtcblxuLyoqXG4gKiBQbGFuZXRhcnkgY29va2luZyBndWlkZSBpbnRlcmZhY2UgZm9yIHJlY29tbWVuZGF0aW9uIGFsZ29yaXRobVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5ldGFyeUNvb2tpbmdHdWlkZSB7XG4gIG9wdGltYWxDb29raW5nVGVtcDogc3RyaW5nO1xuICBmbGF2b3JQYWlyaW5nczogc3RyaW5nW107XG4gIG51dHJpZW50Rm9jdXM6IHN0cmluZ1tdO1xuICBwcmVzZXJ2YXRpb25NZXRob2RzOiBzdHJpbmdbXTtcbiAgdHJhZGl0aW9uYWxSZWNpcGVzOiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgcGxhbmV0YXJ5IGJvb3N0IGZvciBhbiBpbmdyZWRpZW50IGJhc2VkIG9uIGN1cnJlbnQgYXN0cm9sb2dpY2FsIHN0YXRlXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVQbGFuZXRhcnlCb29zdCA9IChcbiAgaXRlbTogdW5rbm93biwgLy8gRWxlbWVudGFsSXRlbSB0eXBlXG4gIHBsYW5ldFBvc2l0aW9uczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN1cnJlbnRab2RpYWM/OiBzdHJpbmcgfCBudWxsLFxuICBsdW5hclBoYXNlPzogTHVuYXJQaGFzZSB8IG51bGxcbikgPT4ge1xuICBsZXQgYm9vc3QgPSAwO1xuICBjb25zdCBkb21pbmFudFBsYW5ldHM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IGRpZ25pdGllczogUmVjb3JkPHN0cmluZywgUGxhbmV0YXJ5RGlnbml0eURldGFpbHM+ID0ge307XG5cbiAgLy8gUGxhbmV0YXJ5IHBvc2l0aW9uIGNhbGN1bGF0aW9uc1xuICBPYmplY3QuZW50cmllcyhwbGFuZXRQb3NpdGlvbnMpLmZvckVhY2goKFtfcGxhbmV0LCBfcG9zaXRpb25dKSA9PiB7XG4gICAgY29uc3QgcGxhbmV0SW5mbyA9IHBsYW5ldGFyeUZvb2RBc3NvY2lhdGlvbnNbX3BsYW5ldCBhcyBQbGFuZXRdO1xuICAgIGlmICghcGxhbmV0SW5mbykgcmV0dXJuO1xuXG4gICAgLy8gQmFzaWMgcGxhbmV0YXJ5IGJvb3N0XG4gICAgY29uc3QgYmFzZUJvb3N0ID0gcGxhbmV0SW5mby5ib29zdFZhbHVlIHx8IDAuMTtcbiAgICBib29zdCArPSBiYXNlQm9vc3Q7XG5cbiAgICAvLyBBZGQgcGxhbmV0IHRvIGRvbWluYW50IGxpc3QgaWYgc2lnbmlmaWNhbnRcbiAgICBpZiAoYmFzZUJvb3N0ID4gMC4yKSB7XG4gICAgICBkb21pbmFudFBsYW5ldHMucHVzaChfcGxhbmV0KTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGRpZ25pdHkgaW5mb3JtYXRpb24gZm9yIGRvbWluYW50IHBsYW5ldHNcbiAgICAgIGRpZ25pdGllc1tfcGxhbmV0XSA9IHtcbiAgICAgICAgdHlwZTogJ05ldXRyYWwnIGFzIFBsYW5ldGFyeURpZ25pdHksXG4gICAgICAgIHN0cmVuZ3RoOiBiYXNlQm9vc3QsXG4gICAgICAgIGZhdm9yYWJsZVpvZGlhY1NpZ25zOiBjdXJyZW50Wm9kaWFjID8gW2N1cnJlbnRab2RpYWNdIDogW10sXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gWm9kaWFjIHNpZ24gYm9vc3QgaWYgYXZhaWxhYmxlXG4gIGlmIChjdXJyZW50Wm9kaWFjKSB7XG4gICAgYm9vc3QgKz0gZ2V0Wm9kaWFjQm9vc3QoY3VycmVudFpvZGlhYywgaXRlbSk7XG4gIH1cblxuICAvLyBMdW5hciBwaGFzZSBib29zdCBpZiBhdmFpbGFibGVcbiAgaWYgKGx1bmFyUGhhc2UpIHtcbiAgICBib29zdCArPSBnZXRMdW5hclBoYXNlQm9vc3QobHVuYXJQaGFzZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGJvb3N0OiBwYXJzZUZsb2F0KGJvb3N0LnRvRml4ZWQoMikpLFxuICAgIGRvbWluYW50UGxhbmV0czogQXJyYXkuZnJvbShuZXcgU2V0KGRvbWluYW50UGxhbmV0cykpLCAvLyBGaXggZm9yIFNldCBpdGVyYXRpb24gaW4gb2xkZXIgSlMgdmVyc2lvbnNcbiAgICBkaWduaXRpZXNcbiAgfTtcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGNhbGN1bGF0aW9uc1xuY29uc3QgZ2V0VHJpcGxpY2l0eVJ1bGVycyA9IChfem9kaWFjU2lnbj86IHN0cmluZyB8IG51bGwpOiBQbGFuZXRbXSA9PiB7XG4gIC8vIEltcGxlbWVudGF0aW9uIGRlcGVuZHMgb24geW91ciB6b2RpYWMgbWFwcGluZ3NcbiAgcmV0dXJuIFsnU3VuJywgJ01hcnMnLCAnSnVwaXRlciddIGFzIFBsYW5ldFtdO1xufTtcblxuY29uc3QgZ2V0U2Vhc29uYWxNdWx0aXBsaWVyID0gKCk6IG51bWJlciA9PiB7XG4gIC8vIEltcGxlbWVudGF0aW9uIGRlcGVuZHMgb24geW91ciBzZWFzb25hbCBsb2dpY1xuICByZXR1cm4gMS4wO1xufTtcblxuLyoqXG4gKiBHZXQgZGlnbml0eSBtdWx0aXBsaWVyIGZvciBjYWxjdWxhdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpZ25pdHlNdWx0aXBsaWVyID0gKGRpZ25pdHk6IFBsYW5ldGFyeURpZ25pdHkpOiBudW1iZXIgPT4ge1xuICBjb25zdCBtdWx0aXBsaWVyczogUmVjb3JkPFBsYW5ldGFyeURpZ25pdHksIG51bWJlcj4gPSB7XG4gICAgJ0RvbWljaWxlJzogMS41LFxuICAgICdFeGFsdGF0aW9uJzogMS4zLFxuICAgICdUcmlwbGljaXR5JzogMS4yLFxuICAgICdUZXJtJzogMS4xLFxuICAgICdGYWNlJzogMS4wNSxcbiAgICAnTW9vbHRyaWtvbmEnOiAxLjQsXG4gICAgJ05ha3NoYXRyYSc6IDEuMjUsXG4gICAgJ0RldHJpbWVudCc6IDAuNyxcbiAgICAnRmFsbCc6IDAuNSxcbiAgICAnTmV1dHJhbCc6IDEuMFxuICB9O1xuICByZXR1cm4gbXVsdGlwbGllcnNbZGlnbml0eV0gfHwgMS4wO1xufTtcblxuLyoqXG4gKiBHZXQgem9kaWFjIGJvb3N0IGJhc2VkIG9uIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRab2RpYWNCb29zdCA9ICh6b2RpYWNTaWduOiBzdHJpbmcsIGl0ZW06IHVua25vd24pOiBudW1iZXIgPT4ge1xuICAvLyBHZXQgem9kaWFjIHNpZ24gZWxlbWVudFxuICBjb25zdCB6b2RpYWNFbGVtZW50czogUmVjb3JkPHN0cmluZywgRWxlbWVudGFsQ2hhcmFjdGVyPiA9IHtcbiAgICBhcmllczogJ0ZpcmUnLCBsZW86ICdGaXJlJywgc2FnaXR0YXJpdXM6ICdGaXJlJyxcbiAgICB0YXVydXM6ICdFYXJ0aCcsIHZpcmdvOiAnRWFydGgnLCBjYXByaWNvcm46ICdFYXJ0aCcsXG4gICAgZ2VtaW5pOiAnQWlyJywgbGlicmE6ICdBaXInLCBhcXVhcml1czogJ0FpcicsXG4gICAgY2FuY2VyOiAnV2F0ZXInLCBzY29ycGlvOiAnV2F0ZXInLCBwaXNjZXM6ICdXYXRlcidcbiAgfTtcblxuICAvLyBOb3JtYWxpemUgem9kaWFjIHNpZ24gdG8gbG93ZXJjYXNlIGZvciBsb29rdXBcbiAgY29uc3Qgbm9ybWFsaXplZFNpZ24gPSB6b2RpYWNTaWduLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHpvZGlhY0VsZW1lbnQgPSB6b2RpYWNFbGVtZW50c1tub3JtYWxpemVkU2lnbiBhcyBrZXlvZiB0eXBlb2Ygem9kaWFjRWxlbWVudHNdIHx8ICdGaXJlJztcbiAgXG4gIC8vIENoZWNrIGlmIGl0ZW0gaGFzIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBhcyBhbnk7XG4gIGlmICghaXRlbURhdGEuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgIHJldHVybiAwLjE7IC8vIE1pbmltdW0gYm9vc3QgaWYgbm8gZWxlbWVudGFsIGRhdGFcbiAgfVxuICBcbiAgLy8gQ2FsY3VsYXRlIGJvb3N0IGJhc2VkIG9uIGVsZW1lbnRhbCBhZmZpbml0eVxuICAvLyBIaWdoZXIgYm9vc3QgaWYgdGhlIGN1aXNpbmUncyBkb21pbmFudCBlbGVtZW50IG1hdGNoZXMgdGhlIHpvZGlhYyBlbGVtZW50XG4gIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IGl0ZW1EYXRhLmVsZW1lbnRhbFByb3BlcnRpZXNbem9kaWFjRWxlbWVudF0gfHwgMDtcbiAgY29uc3QgZWxlbWVudEJvb3N0ID0gZWxlbWVudFZhbHVlICogMC44OyAvLyBTY2FsZSBiYXNlZCBvbiBob3cgc3Ryb25nIHRoZSBlbGVtZW50IGlzXG5cbiAgLy8gQ2hlY2sgaWYgY3Vpc2luZSBleHBsaWNpdGx5IGxpc3RzIHRoaXMgem9kaWFjIHNpZ24gYXMgZmF2b3JhYmxlXG4gIGNvbnN0IHpvZGlhY0Jvb3N0ID0gaXRlbURhdGEuem9kaWFjSW5mbHVlbmNlcz8uaW5jbHVkZXMobm9ybWFsaXplZFNpZ24pID8gMC4zIDogMDtcblxuICAvLyBBcHBseSBtb2RhbGl0eSBib29zdCBiYXNlZCBvbiBjYXJkaW5hbC9maXhlZC9tdXRhYmxlIHF1YWxpdGllc1xuICBsZXQgbW9kYWxpdHlCb29zdCA9IDA7XG4gIGNvbnN0IGNhcmRpbmFsU2lnbnMgPSBbJ2FyaWVzJywgJ2NhbmNlcicsICdsaWJyYScsICdjYXByaWNvcm4nXTtcbiAgY29uc3QgZml4ZWRTaWducyA9IFsndGF1cnVzJywgJ2xlbycsICdzY29ycGlvJywgJ2FxdWFyaXVzJ107XG4gIC8vIElmIG5vdCBjYXJkaW5hbCBvciBmaXhlZCwgaXQncyBtdXRhYmxlIChnZW1pbmksIHZpcmdvLCBzYWdpdHRhcml1cywgcGlzY2VzKVxuICBcbiAgaWYgKGNhcmRpbmFsU2lnbnMuaW5jbHVkZXMobm9ybWFsaXplZFNpZ24pKSB7XG4gICAgLy8gQ2FyZGluYWwgc2lnbnMgcHJlZmVyIGJvbGQsIGRpc3RpbmN0aXZlIGN1aXNpbmVzXG4gICAgbW9kYWxpdHlCb29zdCA9IChpdGVtRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzWydGaXJlJ10gfHwgMCkgKiAwLjI7XG4gIH0gZWxzZSBpZiAoZml4ZWRTaWducy5pbmNsdWRlcyhub3JtYWxpemVkU2lnbikpIHtcbiAgICAvLyBGaXhlZCBzaWducyBwcmVmZXIgc3Vic3RhbnRpYWwsIHRyYWRpdGlvbmFsIGN1aXNpbmVzXG4gICAgbW9kYWxpdHlCb29zdCA9IChpdGVtRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzWydFYXJ0aCddIHx8IDApICogMC4yO1xuICB9IGVsc2Uge1xuICAgIC8vIE11dGFibGUgc2lnbnMgcHJlZmVyIGFkYXB0YWJsZSwgZnVzaW9uIGN1aXNpbmVzXG4gICAgbW9kYWxpdHlCb29zdCA9IChpdGVtRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzWydBaXInXSB8fCAwKSAqIDAuMjtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBzZWFzb25hbCBhbGlnbm1lbnQgKGNlcnRhaW4gY3Vpc2luZXMgYXJlIGJldHRlciBhbGlnbmVkIHdpdGggc2Vhc29ucylcbiAgY29uc3Qgc2Vhc29uYWxCb29zdCA9IGNhbGN1bGF0ZVNlYXNvbmFsQWxpZ25tZW50KG5vcm1hbGl6ZWRTaWduLCBpdGVtKSAqIDAuMTU7XG4gIFxuICAvLyBDb21iaW5lIGFsbCBib29zdCBmYWN0b3JzXG4gIGNvbnN0IHRvdGFsQm9vc3QgPSBlbGVtZW50Qm9vc3QgKyB6b2RpYWNCb29zdCArIG1vZGFsaXR5Qm9vc3QgKyBzZWFzb25hbEJvb3N0O1xuICBcbiAgLy8gUmV0dXJuIG5vcm1hbGl6ZWQgYm9vc3QgdmFsdWUgKDAtMSByYW5nZSlcbiAgcmV0dXJuIE1hdGgubWluKDAuNywgTWF0aC5tYXgoMC4xLCB0b3RhbEJvb3N0KSk7XG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHNlYXNvbmFsIGFsaWdubWVudFxuY29uc3QgY2FsY3VsYXRlU2Vhc29uYWxBbGlnbm1lbnQgPSAoem9kaWFjU2lnbjogc3RyaW5nLCBpdGVtOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgLy8gTWFwIHpvZGlhYyBzaWducyB0byBzZWFzb25zXG4gIGNvbnN0IHNlYXNvbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnYXJpZXMnOiAnc3ByaW5nJywgJ3RhdXJ1cyc6ICdzcHJpbmcnLCAnZ2VtaW5pJzogJ3NwcmluZycsXG4gICAgJ2NhbmNlcic6ICdzdW1tZXInLCAnbGVvJzogJ3N1bW1lcicsICd2aXJnbyc6ICdzdW1tZXInLFxuICAgICdsaWJyYSc6ICdhdXR1bW4nLCAnc2NvcnBpbyc6ICdhdXR1bW4nLCAnc2FnaXR0YXJpdXMnOiAnYXV0dW1uJyxcbiAgICAnY2Fwcmljb3JuJzogJ3dpbnRlcicsICdhcXVhcml1cyc6ICd3aW50ZXInLCAncGlzY2VzJzogJ3dpbnRlcidcbiAgfTtcbiAgXG4gIGNvbnN0IHNlYXNvbiA9IHNlYXNvbk1hcFt6b2RpYWNTaWduXTtcbiAgXG4gIC8vIFNlYXNvbmFsIGVsZW1lbnRhbCBjb3JyZXNwb25kZW5jZXNcbiAgY29uc3Qgc2Vhc29uYWxFbGVtZW50czogUmVjb3JkPHN0cmluZywgRWxlbWVudGFsQ2hhcmFjdGVyPiA9IHtcbiAgICAnc3ByaW5nJzogJ0FpcicsXG4gICAgJ3N1bW1lcic6ICdGaXJlJyxcbiAgICAnYXV0dW1uJzogJ0VhcnRoJyxcbiAgICAnd2ludGVyJzogJ1dhdGVyJ1xuICB9O1xuICBcbiAgY29uc3Qgc2Vhc29uYWxFbGVtZW50ID0gc2Vhc29uYWxFbGVtZW50c1tzZWFzb25dO1xuICBcbiAgLy8gQ2FsY3VsYXRlIGFsaWdubWVudCBiYXNlZCBvbiB0aGUgY3Vpc2luZSdzIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gIC8vIEhpZ2hlciB2YWx1ZSBpZiB0aGUgY3Vpc2luZSBhbGlnbnMgd2l0aCB0aGUgc2Vhc29uJ3MgZWxlbWVudFxuICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0gYXMgYW55O1xuICByZXR1cm4gaXRlbURhdGEuZWxlbWVudGFsUHJvcGVydGllcz8uW3NlYXNvbmFsRWxlbWVudF0gfHwgMC4xO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGUgYm9vc3QgYmFzZWQgb24gbHVuYXIgcGhhc2VcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEx1bmFyUGhhc2VCb29zdCA9IChsdW5hclBoYXNlOiBMdW5hclBoYXNlKTogbnVtYmVyID0+IHtcbiAgLy8gTmV3IGNhbGN1bGF0aW9uIGJhc2VkIG9uIGx1bmFyIHBoYXNlIGVuZXJneSBwYXR0ZXJuc1xuICAvLyBEaWZmZXJlbnQgbHVuYXIgcGhhc2VzIGVuaGFuY2UgZGlmZmVyZW50IGVsZW1lbnRhbCBhbmQgYWxjaGVtaWNhbCBwcm9wZXJ0aWVzXG4gIFxuICAvLyBNYXAgbHVuYXIgcGhhc2VzIHRvIGVsZW1lbnRhbCBhbmQgYWxjaGVtaWNhbCBpbmZsdWVuY2VzXG4gIGNvbnN0IGx1bmFySW5mbHVlbmNlczogUmVjb3JkPEx1bmFyUGhhc2UsIHtcbiAgICBlbGVtZW50OiBFbGVtZW50YWxDaGFyYWN0ZXIsXG4gICAgYWxjaGVtaWNhbDogc3RyaW5nLFxuICAgIGludGVuc2l0eTogbnVtYmVyXG4gIH0+ID0ge1xuICAgICduZXcgbW9vbic6IHsgZWxlbWVudDogJ0ZpcmUnLCBhbGNoZW1pY2FsOiAnU3Bpcml0JywgaW50ZW5zaXR5OiAwLjggfSxcbiAgICAnd2F4aW5nIGNyZXNjZW50JzogeyBlbGVtZW50OiAnRmlyZScsIGFsY2hlbWljYWw6ICdTcGlyaXQnLCBpbnRlbnNpdHk6IDAuNyB9LFxuICAgICdmaXJzdCBxdWFydGVyJzogeyBlbGVtZW50OiAnQWlyJywgYWxjaGVtaWNhbDogJ1N1YnN0YW5jZScsIGludGVuc2l0eTogMC42IH0sXG4gICAgJ3dheGluZyBnaWJib3VzJzogeyBlbGVtZW50OiAnQWlyJywgYWxjaGVtaWNhbDogJ1N1YnN0YW5jZScsIGludGVuc2l0eTogMC43IH0sXG4gICAgJ2Z1bGwgbW9vbic6IHsgZWxlbWVudDogJ1dhdGVyJywgYWxjaGVtaWNhbDogJ0Vzc2VuY2UnLCBpbnRlbnNpdHk6IDAuOCB9LFxuICAgICd3YW5pbmcgZ2liYm91cyc6IHsgZWxlbWVudDogJ1dhdGVyJywgYWxjaGVtaWNhbDogJ0Vzc2VuY2UnLCBpbnRlbnNpdHk6IDAuNyB9LFxuICAgICdsYXN0IHF1YXJ0ZXInOiB7IGVsZW1lbnQ6ICdFYXJ0aCcsIGFsY2hlbWljYWw6ICdNYXR0ZXInLCBpbnRlbnNpdHk6IDAuNiB9LFxuICAgICd3YW5pbmcgY3Jlc2NlbnQnOiB7IGVsZW1lbnQ6ICdFYXJ0aCcsIGFsY2hlbWljYWw6ICdNYXR0ZXInLCBpbnRlbnNpdHk6IDAuNyB9XG4gIH07XG4gIFxuICAvLyBHZXQgbHVuYXIgaW5mbHVlbmNlIGRhdGEgb3IgcHJvdmlkZSBmYWxsYmFja1xuICBjb25zdCBpbmZsdWVuY2UgPSBsdW5hckluZmx1ZW5jZXNbbHVuYXJQaGFzZV0gfHwgeyBcbiAgICBlbGVtZW50OiAnV2F0ZXInLCBcbiAgICBhbGNoZW1pY2FsOiAnRXNzZW5jZScsIFxuICAgIGludGVuc2l0eTogMC41IFxuICB9O1xuICBcbiAgLy8gQ2FsY3VsYXRlIGJvb3N0IGJhc2VkIG9uIGx1bmFyIHBoYXNlIGludGVuc2l0eVxuICAvLyBUaGlzIHdpbGwgdmFyeSBiZXR3ZWVuIDAuMTUgYW5kIDAuNCBkZXBlbmRpbmcgb24gdGhlIHBoYXNlXG4gIHJldHVybiAwLjE1ICsgKGluZmx1ZW5jZS5pbnRlbnNpdHkgKiAwLjI1KTtcbn07XG5cbi8qKlxuICogR2V0IGZsYXZvciBib29zdCBmcm9tIHBsYW5ldGFyeSBhc3NvY2lhdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEZsYXZvckJvb3N0ID0gKFxuICBfcGxhbmV0OiBQbGFuZXQsXG4gIF9pbmdyZWRpZW50OiB1bmtub3duXG4pOiBudW1iZXIgPT4ge1xuICBjb25zdCBpbmdyZWRpZW50RGF0YSA9IF9pbmdyZWRpZW50IGFzIGFueTtcbiAgY29uc3QgZWxlbWVudEJvb3N0ID0gcGxhbmV0YXJ5Rm9vZEFzc29jaWF0aW9uc1tfcGxhbmV0XS5lbGVtZW50YWxCb29zdCB8fCB7fTtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGVsZW1lbnRCb29zdCkucmVkdWNlKChhY2MsIFtlbGVtZW50LCBib29zdF0pID0+IHtcbiAgICByZXR1cm4gYWNjICsgKGluZ3JlZGllbnREYXRhLmVsZW1lbnRhbFByb3BlcnRpZXM/LltlbGVtZW50XSB8fCAwKSAqIChib29zdCBhcyBudW1iZXIgfHwgMCk7XG4gIH0sIDApO1xufTtcblxuLyoqXG4gKiBHZXQgbnV0cml0aW9uYWwgc3luZXJneSBiZXR3ZWVuIGluZ3JlZGllbnQgYW5kIHBsYW5ldFxuICovXG5leHBvcnQgY29uc3QgZ2V0TnV0cml0aW9uYWxTeW5lcmd5ID0gKFxuICBfcGxhbmV0OiBQbGFuZXQsXG4gIF9pbmdyZWRpZW50OiB1bmtub3duXG4pOiBzdHJpbmdbXSA9PiB7XG4gIC8vIEltcGxlbWVudGF0aW9uIGRlcGVuZHMgb24geW91ciBudXRyaXRpb25hbCBkYXRhXG4gIHJldHVybiBbXTtcbn07XG5cbi8qKlxuICogRm9ybWF0IGVsZW1lbnRhbCBiYWxhbmNlIGZvciBkaXNwbGF5XG4gKi9cbmV4cG9ydCBjb25zdCBmb3JtYXRlbGVtZW50YWxTdGF0ZSA9IChcbiAgZWxlbWVudHM6IFBhcnRpYWw8UmVjb3JkPHN0cmluZywgbnVtYmVyPj5cbik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHZhbGlkRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGVsZW1lbnRzKVxuICAgIC5maWx0ZXIoKFtfLCB2YWxdKSA9PiBOdW1iZXIuaXNGaW5pdGUodmFsKSlcbiAgICAubWFwKChbZWxlbSwgdmFsXSkgPT4gYCR7ZWxlbX0gJHtNYXRoLnJvdW5kKCh2YWwgfHwgMCkgKiAxMDApfSVgKVxuICAgIC5qb2luKFwiIMK3IFwiKTtcbiAgXG4gIHJldHVybiB2YWxpZEVudHJpZXM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwbGFuZXRhcnlGb29kQXNzb2NpYXRpb25zO1xuIl0sInZlcnNpb24iOjN9