0cc4f157f3e21b3ce7e17afd218fc065
"use strict";
/**
 * Campaign Integration Tests
 * Tests for the campaign system integration layer
 */
Object.defineProperty(exports, "__esModule", { value: true });
const CampaignIntegration_1 = require("../CampaignIntegration");
const MetricsIntegration_1 = require("../MetricsIntegration");
describe('UnintentionalAnyCampaignController', () => {
    let controller;
    let mockConfig;
    let mockUnintentionalAnyConfig;
    beforeEach(() => {
        mockConfig = {
            phases: [],
            safetySettings: {
                maxFilesPerBatch: 15,
                buildValidationFrequency: 5,
                testValidationFrequency: 10,
                corruptionDetectionEnabled: true,
                automaticRollbackEnabled: true,
                stashRetentionDays: 7
            },
            progressTargets: {
                typeScriptErrors: 0,
                lintingWarnings: 0,
                buildTime: 10,
                enterpriseSystems: 200
            },
            toolConfiguration: {
                enhancedErrorFixer: 'test-script.js',
                explicitAnyFixer: 'test-script.js',
                unusedVariablesFixer: 'test-script.js',
                consoleStatementFixer: 'test-script.js'
            }
        };
        mockUnintentionalAnyConfig = {
            maxFilesPerBatch: 15,
            targetReductionPercentage: 15,
            confidenceThreshold: 0.8,
            enableDomainAnalysis: true,
            enableDocumentation: true,
            safetyLevel: 'CONSERVATIVE',
            validationFrequency: 5
        };
        controller = new CampaignIntegration_1.UnintentionalAnyCampaignController(mockConfig, mockUnintentionalAnyConfig);
    });
    describe('constructor', () => {
        it('should create controller with default configuration', () => {
            const defaultController = new CampaignIntegration_1.UnintentionalAnyCampaignController(mockConfig);
            const config = defaultController.getUnintentionalAnyConfig();
            expect(config.maxFilesPerBatch).toBe(15);
            expect(config.targetReductionPercentage).toBe(15);
            expect(config.confidenceThreshold).toBe(0.8);
            expect(config.safetyLevel).toBe('CONSERVATIVE');
        });
        it('should merge custom configuration with defaults', () => {
            const customConfig = {
                maxFilesPerBatch: 10,
                targetReductionPercentage: 20
            };
            const customController = new CampaignIntegration_1.UnintentionalAnyCampaignController(mockConfig, customConfig);
            const config = customController.getUnintentionalAnyConfig();
            expect(config.maxFilesPerBatch).toBe(10);
            expect(config.targetReductionPercentage).toBe(20);
            expect(config.confidenceThreshold).toBe(0.8); // Default value
        });
    });
    describe('createUnintentionalAnyEliminationConfig', () => {
        it('should create campaign configuration with unintentional any phases', () => {
            const config = CampaignIntegration_1.UnintentionalAnyCampaignController.createUnintentionalAnyEliminationConfig();
            expect(config.phases).toBeDefined();
            expect(config.phases.length).toBeGreaterThan(0);
            const phaseIds = config.phases.map(phase => phase.id);
            expect(phaseIds).toContain('unintentional-any-analysis');
            expect(phaseIds).toContain('unintentional-any-replacement');
            expect(phaseIds).toContain('intentional-any-documentation');
        });
        it('should merge base configuration with unintentional any configuration', () => {
            const baseConfig = {
                phases: [{
                        id: 'existing-phase',
                        name: 'Existing Phase',
                        description: 'Test phase',
                        tools: [],
                        successCriteria: {},
                        safetyCheckpoints: []
                    }]
            };
            const config = CampaignIntegration_1.UnintentionalAnyCampaignController.createUnintentionalAnyEliminationConfig(baseConfig);
            expect(config.phases.length).toBeGreaterThan(1);
            expect(config.phases[0].id).toBe('existing-phase');
        });
    });
    describe('getUnintentionalAnyMetrics', () => {
        it('should return metrics with default values when linting fails', async () => {
            const metrics = await controller.getUnintentionalAnyMetrics();
            expect(metrics).toBeDefined();
            expect(typeof metrics.totalAnyTypes).toBe('number');
            expect(typeof metrics.intentionalAnyTypes).toBe('number');
            expect(typeof metrics.unintentionalAnyTypes).toBe('number');
            expect(typeof metrics.documentationCoverage).toBe('number');
            expect(metrics.targetReduction).toBe(15);
        });
    });
    describe('updateUnintentionalAnyConfig', () => {
        it('should update configuration', () => {
            const newConfig = {
                maxFilesPerBatch: 20,
                targetReductionPercentage: 25
            };
            controller.updateUnintentionalAnyConfig(newConfig);
            const updatedConfig = controller.getUnintentionalAnyConfig();
            expect(updatedConfig.maxFilesPerBatch).toBe(20);
            expect(updatedConfig.targetReductionPercentage).toBe(25);
        });
    });
    describe('validateUnintentionalAnyPhaseCompletion', () => {
        it('should validate analysis phase completion', async () => {
            const mockPhase = {
                id: 'unintentional-any-analysis',
                name: 'Analysis Phase',
                description: 'Test analysis phase',
                tools: [],
                successCriteria: {},
                safetyCheckpoints: []
            };
            const mockMetrics = {
                totalAnyTypes: 10,
                intentionalAnyTypes: 5,
                unintentionalAnyTypes: 5,
                documentedAnyTypes: 3,
                documentationCoverage: 60,
                reductionFromBaseline: 0,
                targetReduction: 15
            };
            const validation = await controller.validateUnintentionalAnyPhaseCompletion(mockPhase, mockMetrics);
            expect(validation.success).toBe(false); // Build validation will fail in test environment
            expect(validation.errors.length).toBeGreaterThan(0);
        });
    });
});
describe('createUnintentionalAnyCampaignController', () => {
    it('should create controller with factory function', () => {
        const controller = (0, CampaignIntegration_1.createUnintentionalAnyCampaignController)();
        expect(controller).toBeInstanceOf(CampaignIntegration_1.UnintentionalAnyCampaignController);
        const config = controller.getUnintentionalAnyConfig();
        expect(config.maxFilesPerBatch).toBe(15);
        expect(config.targetReductionPercentage).toBe(15);
    });
    it('should create controller with custom configuration', () => {
        const customConfig = {
            maxFilesPerBatch: 10,
            targetReductionPercentage: 20
        };
        const controller = (0, CampaignIntegration_1.createUnintentionalAnyCampaignController)(undefined, customConfig);
        const config = controller.getUnintentionalAnyConfig();
        expect(config.maxFilesPerBatch).toBe(10);
        expect(config.targetReductionPercentage).toBe(20);
    });
});
describe('UnintentionalAnyIntegrationHelper', () => {
    describe('addUnintentionalAnyPhases', () => {
        it('should add unintentional any phases to existing configuration', () => {
            const existingConfig = {
                phases: [{
                        id: 'existing-phase',
                        name: 'Existing Phase',
                        description: 'Test phase',
                        tools: [],
                        successCriteria: {},
                        safetyCheckpoints: []
                    }],
                safetySettings: {
                    maxFilesPerBatch: 15,
                    buildValidationFrequency: 5,
                    testValidationFrequency: 10,
                    corruptionDetectionEnabled: true,
                    automaticRollbackEnabled: true,
                    stashRetentionDays: 7
                },
                progressTargets: {
                    typeScriptErrors: 0,
                    lintingWarnings: 0,
                    buildTime: 10,
                    enterpriseSystems: 200
                },
                toolConfiguration: {
                    enhancedErrorFixer: 'test-script.js',
                    explicitAnyFixer: 'test-script.js',
                    unusedVariablesFixer: 'test-script.js',
                    consoleStatementFixer: 'test-script.js'
                }
            };
            const updatedConfig = CampaignIntegration_1.UnintentionalAnyIntegrationHelper.addUnintentionalAnyPhases(existingConfig);
            expect(updatedConfig.phases.length).toBeGreaterThan(1);
            expect(updatedConfig.phases[0].id).toBe('existing-phase');
            const phaseIds = updatedConfig.phases.map(phase => phase.id);
            expect(phaseIds).toContain('unintentional-any-analysis');
        });
    });
    describe('createAutomationScriptCompatibility', () => {
        it('should return automation script paths', () => {
            const compatibility = CampaignIntegration_1.UnintentionalAnyIntegrationHelper.createAutomationScriptCompatibility();
            expect(compatibility.explicitAnyFixer).toContain('ProgressiveImprovementEngine');
            expect(compatibility.unintentionalAnyAnalyzer).toContain('AnyTypeClassifier');
            expect(compatibility.documentationGenerator).toContain('AutoDocumentationGenerator');
        });
    });
    describe('resolveCampaignPriorityConflicts', () => {
        it('should resolve conflicts between multiple campaigns', () => {
            const campaign1 = {
                phases: [{
                        id: 'typescript-phase',
                        name: 'TypeScript Phase',
                        description: 'Test phase',
                        tools: [],
                        successCriteria: {},
                        safetyCheckpoints: []
                    }],
                safetySettings: {
                    maxFilesPerBatch: 20,
                    buildValidationFrequency: 3,
                    testValidationFrequency: 10,
                    corruptionDetectionEnabled: true,
                    automaticRollbackEnabled: true,
                    stashRetentionDays: 7
                },
                progressTargets: {
                    typeScriptErrors: 0,
                    lintingWarnings: 0,
                    buildTime: 10,
                    enterpriseSystems: 200
                },
                toolConfiguration: {
                    enhancedErrorFixer: 'test-script.js',
                    explicitAnyFixer: 'test-script.js',
                    unusedVariablesFixer: 'test-script.js',
                    consoleStatementFixer: 'test-script.js'
                }
            };
            const campaign2 = {
                phases: [{
                        id: 'linting-phase',
                        name: 'Linting Phase',
                        description: 'Test phase',
                        tools: [],
                        successCriteria: {},
                        safetyCheckpoints: []
                    }],
                safetySettings: {
                    maxFilesPerBatch: 15,
                    buildValidationFrequency: 5,
                    testValidationFrequency: 10,
                    corruptionDetectionEnabled: true,
                    automaticRollbackEnabled: true,
                    stashRetentionDays: 7
                },
                progressTargets: {
                    typeScriptErrors: 0,
                    lintingWarnings: 0,
                    buildTime: 10,
                    enterpriseSystems: 200
                },
                toolConfiguration: {
                    enhancedErrorFixer: 'test-script.js',
                    explicitAnyFixer: 'test-script.js',
                    unusedVariablesFixer: 'test-script.js',
                    consoleStatementFixer: 'test-script.js'
                }
            };
            const priorityOrder = ['typescript', 'linting'];
            const mergedConfig = CampaignIntegration_1.UnintentionalAnyIntegrationHelper.resolveCampaignPriorityConflicts([campaign1, campaign2], priorityOrder);
            expect(mergedConfig.phases.length).toBe(2);
            expect(mergedConfig.phases[0].id).toBe('typescript-phase');
            expect(mergedConfig.phases[1].id).toBe('linting-phase');
            // Should use most conservative safety settings
            expect(mergedConfig.safetySettings.maxFilesPerBatch).toBe(15);
            expect(mergedConfig.safetySettings.buildValidationFrequency).toBe(3);
        });
    });
});
describe('UnintentionalAnyProgressTracker', () => {
    let tracker;
    beforeEach(() => {
        tracker = new MetricsIntegration_1.UnintentionalAnyProgressTracker();
    });
    describe('getUnintentionalAnyMetrics', () => {
        it('should return default metrics when linting fails', async () => {
            const metrics = await tracker.getUnintentionalAnyMetrics();
            expect(metrics).toBeDefined();
            expect(metrics.totalAnyTypes).toBe(0);
            expect(metrics.intentionalAnyTypes).toBe(0);
            expect(metrics.unintentionalAnyTypes).toBe(0);
            expect(metrics.documentationCoverage).toBe(0);
            expect(metrics.targetReduction).toBe(15);
        });
    });
    describe('setBaselineMetrics', () => {
        it('should set baseline metrics', async () => {
            await tracker.setBaselineMetrics();
            const history = tracker.getUnintentionalAnyMetricsHistory();
            expect(history.length).toBeGreaterThan(0);
        });
    });
    describe('validateUnintentionalAnyMilestone', () => {
        it('should validate baseline-established milestone', async () => {
            const isValid = await tracker.validateUnintentionalAnyMilestone('baseline-established');
            expect(typeof isValid).toBe('boolean');
        });
        it('should validate analysis-complete milestone', async () => {
            const isValid = await tracker.validateUnintentionalAnyMilestone('analysis-complete');
            expect(typeof isValid).toBe('boolean');
        });
        it('should return false for unknown milestone', async () => {
            const isValid = await tracker.validateUnintentionalAnyMilestone('unknown-milestone');
            expect(isValid).toBe(false);
        });
    });
    describe('getDashboardMetrics', () => {
        it('should return dashboard-compatible metrics', async () => {
            const dashboardMetrics = await tracker.getDashboardMetrics();
            expect(dashboardMetrics.current).toBeDefined();
            expect(dashboardMetrics.trend).toMatch(/improving|stable|declining/);
            expect(Array.isArray(dashboardMetrics.topFiles)).toBe(true);
            expect(Array.isArray(dashboardMetrics.alerts)).toBe(true);
            expect(Array.isArray(dashboardMetrics.recommendations)).toBe(true);
            expect(dashboardMetrics.lastUpdated).toBeInstanceOf(Date);
        });
    });
    describe('resetUnintentionalAnyMetricsHistory', () => {
        it('should reset metrics history', async () => {
            await tracker.setBaselineMetrics();
            expect(tracker.getUnintentionalAnyMetricsHistory().length).toBeGreaterThan(0);
            tracker.resetUnintentionalAnyMetricsHistory();
            expect(tracker.getUnintentionalAnyMetricsHistory().length).toBe(0);
        });
    });
});
describe('UnintentionalAnyCampaignScheduler', () => {
    let scheduler;
    beforeEach(() => {
        scheduler = new MetricsIntegration_1.UnintentionalAnyCampaignScheduler();
    });
    describe('shouldTriggerCampaign', () => {
        it('should return trigger decision', async () => {
            const decision = await scheduler.shouldTriggerCampaign();
            expect(decision.shouldTrigger).toBeDefined();
            expect(typeof decision.shouldTrigger).toBe('boolean');
            expect(decision.reason).toBeDefined();
            expect(decision.priority).toMatch(/low|medium|high/);
        });
    });
    describe('resolveCampaignConflicts', () => {
        it('should resolve conflicts with no active campaigns', () => {
            const resolution = scheduler.resolveCampaignConflicts([], 'unintentional-any-elimination');
            expect(resolution.canProceed).toBe(true);
            expect(resolution.conflictingCampaigns).toEqual([]);
            expect(resolution.resolution).toContain('No conflicts');
        });
        it('should detect conflicts with typescript campaigns', () => {
            const activeCampaigns = ['typescript-error-elimination', 'other-campaign'];
            const resolution = scheduler.resolveCampaignConflicts(activeCampaigns, 'unintentional-any-elimination');
            expect(resolution.conflictingCampaigns).toContain('typescript-error-elimination');
            expect(resolution.conflictingCampaigns).not.toContain('other-campaign');
        });
        it('should prevent execution when critical campaigns are active', () => {
            const activeCampaigns = ['critical-typescript-emergency'];
            const resolution = scheduler.resolveCampaignConflicts(activeCampaigns, 'unintentional-any-elimination');
            expect(resolution.canProceed).toBe(false);
            expect(resolution.resolution).toContain('Wait for critical campaigns');
        });
    });
    describe('getRecommendedExecutionTime', () => {
        it('should recommend immediate execution for low load', () => {
            const recommendation = scheduler.getRecommendedExecutionTime([], 'low');
            expect(recommendation.recommendedTime).toBeInstanceOf(Date);
            expect(recommendation.reason).toContain('immediately');
            expect(recommendation.estimatedDuration).toBeLessThan(30);
        });
        it('should delay execution for high load', () => {
            const recommendation = scheduler.getRecommendedExecutionTime(['active-campaign'], 'high');
            expect(recommendation.recommendedTime).toBeInstanceOf(Date);
            expect(recommendation.reason).toContain('later');
            expect(recommendation.estimatedDuration).toBeGreaterThan(30);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vQ2FtcGFpZ25JbnRlZ3JhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsZ0VBSWdDO0FBRWhDLDhEQUcrQjtBQVMvQixRQUFRLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO0lBQ2xELElBQUksVUFBOEMsQ0FBQztJQUNuRCxJQUFJLFVBQTBCLENBQUM7SUFDL0IsSUFBSSwwQkFBa0QsQ0FBQztJQUV2RCxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsVUFBVSxHQUFHO1lBQ1gsTUFBTSxFQUFFLEVBQUU7WUFDVixjQUFjLEVBQUU7Z0JBQ2QsZ0JBQWdCLEVBQUUsRUFBRTtnQkFDcEIsd0JBQXdCLEVBQUUsQ0FBQztnQkFDM0IsdUJBQXVCLEVBQUUsRUFBRTtnQkFDM0IsMEJBQTBCLEVBQUUsSUFBSTtnQkFDaEMsd0JBQXdCLEVBQUUsSUFBSTtnQkFDOUIsa0JBQWtCLEVBQUUsQ0FBQzthQUN0QjtZQUNELGVBQWUsRUFBRTtnQkFDZixnQkFBZ0IsRUFBRSxDQUFDO2dCQUNuQixlQUFlLEVBQUUsQ0FBQztnQkFDbEIsU0FBUyxFQUFFLEVBQUU7Z0JBQ2IsaUJBQWlCLEVBQUUsR0FBRzthQUN2QjtZQUNELGlCQUFpQixFQUFFO2dCQUNqQixrQkFBa0IsRUFBRSxnQkFBZ0I7Z0JBQ3BDLGdCQUFnQixFQUFFLGdCQUFnQjtnQkFDbEMsb0JBQW9CLEVBQUUsZ0JBQWdCO2dCQUN0QyxxQkFBcUIsRUFBRSxnQkFBZ0I7YUFDeEM7U0FDRixDQUFDO1FBRUYsMEJBQTBCLEdBQUc7WUFDM0IsZ0JBQWdCLEVBQUUsRUFBRTtZQUNwQix5QkFBeUIsRUFBRSxFQUFFO1lBQzdCLG1CQUFtQixFQUFFLEdBQUc7WUFDeEIsb0JBQW9CLEVBQUUsSUFBSTtZQUMxQixtQkFBbUIsRUFBRSxJQUFJ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TUFBTSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM1RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxjQUFjLEdBQUcsU0FBUyxDQUFDLDJCQUEyQixDQUFDLENBQUMsaUJBQWlCLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUUxRixNQUFNLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM1RCxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL19fdGVzdHNfXy9DYW1wYWlnbkludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDYW1wYWlnbiBJbnRlZ3JhdGlvbiBUZXN0c1xuICogVGVzdHMgZm9yIHRoZSBjYW1wYWlnbiBzeXN0ZW0gaW50ZWdyYXRpb24gbGF5ZXJcbiAqL1xuXG5pbXBvcnQge1xuICAgIFVuaW50ZW50aW9uYWxBbnlDYW1wYWlnbkNvbnRyb2xsZXIsXG4gICAgVW5pbnRlbnRpb25hbEFueUludGVncmF0aW9uSGVscGVyLFxuICAgIGNyZWF0ZVVuaW50ZW50aW9uYWxBbnlDYW1wYWlnbkNvbnRyb2xsZXJcbn0gZnJvbSAnLi4vQ2FtcGFpZ25JbnRlZ3JhdGlvbic7XG5cbmltcG9ydCB7XG4gICAgVW5pbnRlbnRpb25hbEFueUNhbXBhaWduU2NoZWR1bGVyLFxuICAgIFVuaW50ZW50aW9uYWxBbnlQcm9ncmVzc1RyYWNrZXJcbn0gZnJvbSAnLi4vTWV0cmljc0ludGVncmF0aW9uJztcblxuaW1wb3J0IHtcbiAgICBDYW1wYWlnbkNvbmZpZyxcbiAgICBDYW1wYWlnblBoYXNlXG59IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzL2NhbXBhaWduJztcblxuaW1wb3J0IHsgVW5pbnRlbnRpb25hbEFueUNvbmZpZyB9IGZyb20gJy4uL3R5cGVzJztcblxuZGVzY3JpYmUoJ1VuaW50ZW50aW9uYWxBbnlDYW1wYWlnbkNvbnRyb2xsZXInLCAoKSA9PiB7XG4gIGxldCBjb250cm9sbGVyOiBVbmludGVudGlvbmFsQW55Q2FtcGFpZ25Db250cm9sbGVyO1xuICBsZXQgbW9ja0NvbmZpZzogQ2FtcGFpZ25Db25maWc7XG4gIGxldCBtb2NrVW5pbnRlbnRpb25hbEFueUNvbmZpZzogVW5pbnRlbnRpb25hbEFueUNvbmZpZztcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrQ29uZmlnID0ge1xuICAgICAgcGhhc2VzOiBbXSxcbiAgICAgIHNhZmV0eVNldHRpbmdzOiB7XG4gICAgICAgIG1heEZpbGVzUGVyQmF0Y2g6IDE1LFxuICAgICAgICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDUsXG4gICAgICAgIHRlc3RWYWxpZGF0aW9uRnJlcXVlbmN5OiAxMCxcbiAgICAgICAgY29ycnVwdGlvbkRldGVjdGlvbkVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGF1dG9tYXRpY1JvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgc3Rhc2hSZXRlbnRpb25EYXlzOiA3XG4gICAgICB9LFxuICAgICAgcHJvZ3Jlc3NUYXJnZXRzOiB7XG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IDAsXG4gICAgICAgIGxpbnRpbmdXYXJuaW5nczogMCxcbiAgICAgICAgYnVpbGRUaW1lOiAxMCxcbiAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXM6IDIwMFxuICAgICAgfSxcbiAgICAgIHRvb2xDb25maWd1cmF0aW9uOiB7XG4gICAgICAgIGVuaGFuY2VkRXJyb3JGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJyxcbiAgICAgICAgZXhwbGljaXRBbnlGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJyxcbiAgICAgICAgdW51c2VkVmFyaWFibGVzRml4ZXI6ICd0ZXN0LXNjcmlwdC5qcycsXG4gICAgICAgIGNvbnNvbGVTdGF0ZW1lbnRGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICBtb2NrVW5pbnRlbnRpb25hbEFueUNvbmZpZyA9IHtcbiAgICAgIG1heEZpbGVzUGVyQmF0Y2g6IDE1LFxuICAgICAgdGFyZ2V0UmVkdWN0aW9uUGVyY2VudGFnZTogMTUsXG4gICAgICBjb25maWRlbmNlVGhyZXNob2xkOiAwLjgsXG4gICAgICBlbmFibGVEb21haW5BbmFseXNpczogdHJ1ZSxcbiAgICAgIGVuYWJsZURvY3VtZW50YXRpb246IHRydWUsXG4gICAgICBzYWZldHlMZXZlbDogJ0NPTlNFUlZBVElWRScsXG4gICAgICB2YWxpZGF0aW9uRnJlcXVlbmN5OiA1XG4gICAgfTtcblxuICAgIGNvbnRyb2xsZXIgPSBuZXcgVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlcihtb2NrQ29uZmlnLCBtb2NrVW5pbnRlbnRpb25hbEFueUNvbmZpZyk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBjb250cm9sbGVyIHdpdGggZGVmYXVsdCBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdENvbnRyb2xsZXIgPSBuZXcgVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlcihtb2NrQ29uZmlnKTtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGRlZmF1bHRDb250cm9sbGVyLmdldFVuaW50ZW50aW9uYWxBbnlDb25maWcoKTtcblxuICAgICAgZXhwZWN0KGNvbmZpZy5tYXhGaWxlc1BlckJhdGNoKS50b0JlKDE1KTtcbiAgICAgIGV4cGVjdChjb25maWcudGFyZ2V0UmVkdWN0aW9uUGVyY2VudGFnZSkudG9CZSgxNSk7XG4gICAgICBleHBlY3QoY29uZmlnLmNvbmZpZGVuY2VUaHJlc2hvbGQpLnRvQmUoMC44KTtcbiAgICAgIGV4cGVjdChjb25maWcuc2FmZXR5TGV2ZWwpLnRvQmUoJ0NPTlNFUlZBVElWRScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtZXJnZSBjdXN0b20gY29uZmlndXJhdGlvbiB3aXRoIGRlZmF1bHRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tQ29uZmlnID0ge1xuICAgICAgICBtYXhGaWxlc1BlckJhdGNoOiAxMCxcbiAgICAgICAgdGFyZ2V0UmVkdWN0aW9uUGVyY2VudGFnZTogMjBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGN1c3RvbUNvbnRyb2xsZXIgPSBuZXcgVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlcihtb2NrQ29uZmlnLCBjdXN0b21Db25maWcpO1xuICAgICAgY29uc3QgY29uZmlnID0gY3VzdG9tQ29udHJvbGxlci5nZXRVbmludGVudGlvbmFsQW55Q29uZmlnKCk7XG5cbiAgICAgIGV4cGVjdChjb25maWcubWF4RmlsZXNQZXJCYXRjaCkudG9CZSgxMCk7XG4gICAgICBleHBlY3QoY29uZmlnLnRhcmdldFJlZHVjdGlvblBlcmNlbnRhZ2UpLnRvQmUoMjApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5jb25maWRlbmNlVGhyZXNob2xkKS50b0JlKDAuOCk7IC8vIERlZmF1bHQgdmFsdWVcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZVVuaW50ZW50aW9uYWxBbnlFbGltaW5hdGlvbkNvbmZpZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBjYW1wYWlnbiBjb25maWd1cmF0aW9uIHdpdGggdW5pbnRlbnRpb25hbCBhbnkgcGhhc2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlci5jcmVhdGVVbmludGVudGlvbmFsQW55RWxpbWluYXRpb25Db25maWcoKTtcblxuICAgICAgZXhwZWN0KGNvbmZpZy5waGFzZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY29uZmlnLnBoYXNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgY29uc3QgcGhhc2VJZHMgPSBjb25maWcucGhhc2VzLm1hcChwaGFzZSA9PiBwaGFzZS5pZCk7XG4gICAgICBleHBlY3QocGhhc2VJZHMpLnRvQ29udGFpbigndW5pbnRlbnRpb25hbC1hbnktYW5hbHlzaXMnKTtcbiAgICAgIGV4cGVjdChwaGFzZUlkcykudG9Db250YWluKCd1bmludGVudGlvbmFsLWFueS1yZXBsYWNlbWVudCcpO1xuICAgICAgZXhwZWN0KHBoYXNlSWRzKS50b0NvbnRhaW4oJ2ludGVudGlvbmFsLWFueS1kb2N1bWVudGF0aW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1lcmdlIGJhc2UgY29uZmlndXJhdGlvbiB3aXRoIHVuaW50ZW50aW9uYWwgYW55IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBiYXNlQ29uZmlnID0ge1xuICAgICAgICBwaGFzZXM6IFt7XG4gICAgICAgICAgaWQ6ICdleGlzdGluZy1waGFzZScsXG4gICAgICAgICAgbmFtZTogJ0V4aXN0aW5nIFBoYXNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgcGhhc2UnLFxuICAgICAgICAgIHRvb2xzOiBbXSxcbiAgICAgICAgICBzdWNjZXNzQ3JpdGVyaWE6IHt9LFxuICAgICAgICAgIHNhZmV0eUNoZWNrcG9pbnRzOiBbXVxuICAgICAgICB9XVxuICAgICAgfTtcblxuICAgICAgY29uc3QgY29uZmlnID0gVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlci5jcmVhdGVVbmludGVudGlvbmFsQW55RWxpbWluYXRpb25Db25maWcoYmFzZUNvbmZpZyk7XG5cbiAgICAgIGV4cGVjdChjb25maWcucGhhc2VzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5waGFzZXNbMF0uaWQpLnRvQmUoJ2V4aXN0aW5nLXBoYXNlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRVbmludGVudGlvbmFsQW55TWV0cmljcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBtZXRyaWNzIHdpdGggZGVmYXVsdCB2YWx1ZXMgd2hlbiBsaW50aW5nIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VW5pbnRlbnRpb25hbEFueU1ldHJpY3MoKTtcblxuICAgICAgZXhwZWN0KG1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MudG90YWxBbnlUeXBlcykudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MuaW50ZW50aW9uYWxBbnlUeXBlcykudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MudW5pbnRlbnRpb25hbEFueVR5cGVzKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy5kb2N1bWVudGF0aW9uQ292ZXJhZ2UpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MudGFyZ2V0UmVkdWN0aW9uKS50b0JlKDE1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3VwZGF0ZVVuaW50ZW50aW9uYWxBbnlDb25maWcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHtcbiAgICAgICAgbWF4RmlsZXNQZXJCYXRjaDogMjAsXG4gICAgICAgIHRhcmdldFJlZHVjdGlvblBlcmNlbnRhZ2U6IDI1XG4gICAgICB9O1xuXG4gICAgICBjb250cm9sbGVyLnVwZGF0ZVVuaW50ZW50aW9uYWxBbnlDb25maWcobmV3Q29uZmlnKTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb25maWcgPSBjb250cm9sbGVyLmdldFVuaW50ZW50aW9uYWxBbnlDb25maWcoKTtcblxuICAgICAgZXhwZWN0KHVwZGF0ZWRDb25maWcubWF4RmlsZXNQZXJCYXRjaCkudG9CZSgyMCk7XG4gICAgICBleHBlY3QodXBkYXRlZENvbmZpZy50YXJnZXRSZWR1Y3Rpb25QZXJjZW50YWdlKS50b0JlKDI1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlVW5pbnRlbnRpb25hbEFueVBoYXNlQ29tcGxldGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGFuYWx5c2lzIHBoYXNlIGNvbXBsZXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUGhhc2U6IENhbXBhaWduUGhhc2UgPSB7XG4gICAgICAgIGlkOiAndW5pbnRlbnRpb25hbC1hbnktYW5hbHlzaXMnLFxuICAgICAgICBuYW1lOiAnQW5hbHlzaXMgUGhhc2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgYW5hbHlzaXMgcGhhc2UnLFxuICAgICAgICB0b29sczogW10sXG4gICAgICAgIHN1Y2Nlc3NDcml0ZXJpYToge30sXG4gICAgICAgIHNhZmV0eUNoZWNrcG9pbnRzOiBbXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja01ldHJpY3MgPSB7XG4gICAgICAgIHRvdGFsQW55VHlwZXM6IDEwLFxuICAgICAgICBpbnRlbnRpb25hbEFueVR5cGVzOiA1LFxuICAgICAgICB1bmludGVudGlvbmFsQW55VHlwZXM6IDUsXG4gICAgICAgIGRvY3VtZW50ZWRBbnlUeXBlczogMyxcbiAgICAgICAgZG9jdW1lbnRhdGlvbkNvdmVyYWdlOiA2MCxcbiAgICAgICAgcmVkdWN0aW9uRnJvbUJhc2VsaW5lOiAwLFxuICAgICAgICB0YXJnZXRSZWR1Y3Rpb246IDE1XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgY29udHJvbGxlci52YWxpZGF0ZVVuaW50ZW50aW9uYWxBbnlQaGFzZUNvbXBsZXRpb24obW9ja1BoYXNlLCBtb2NrTWV0cmljcyk7XG5cbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpOyAvLyBCdWlsZCB2YWxpZGF0aW9uIHdpbGwgZmFpbCBpbiB0ZXN0IGVudmlyb25tZW50XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdjcmVhdGVVbmludGVudGlvbmFsQW55Q2FtcGFpZ25Db250cm9sbGVyJywgKCkgPT4ge1xuICBpdCgnc2hvdWxkIGNyZWF0ZSBjb250cm9sbGVyIHdpdGggZmFjdG9yeSBmdW5jdGlvbicsICgpID0+IHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gY3JlYXRlVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlcigpO1xuXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIpLnRvQmVJbnN0YW5jZU9mKFVuaW50ZW50aW9uYWxBbnlDYW1wYWlnbkNvbnRyb2xsZXIpO1xuXG4gICAgY29uc3QgY29uZmlnID0gY29udHJvbGxlci5nZXRVbmludGVudGlvbmFsQW55Q29uZmlnKCk7XG4gICAgZXhwZWN0KGNvbmZpZy5tYXhGaWxlc1BlckJhdGNoKS50b0JlKDE1KTtcbiAgICBleHBlY3QoY29uZmlnLnRhcmdldFJlZHVjdGlvblBlcmNlbnRhZ2UpLnRvQmUoMTUpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNyZWF0ZSBjb250cm9sbGVyIHdpdGggY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgY3VzdG9tQ29uZmlnID0ge1xuICAgICAgbWF4RmlsZXNQZXJCYXRjaDogMTAsXG4gICAgICB0YXJnZXRSZWR1Y3Rpb25QZXJjZW50YWdlOiAyMFxuICAgIH07XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gY3JlYXRlVW5pbnRlbnRpb25hbEFueUNhbXBhaWduQ29udHJvbGxlcih1bmRlZmluZWQsIGN1c3RvbUNvbmZpZyk7XG4gICAgY29uc3QgY29uZmlnID0gY29udHJvbGxlci5nZXRVbmludGVudGlvbmFsQW55Q29uZmlnKCk7XG5cbiAgICBleHBlY3QoY29uZmlnLm1heEZpbGVzUGVyQmF0Y2gpLnRvQmUoMTApO1xuICAgIGV4cGVjdChjb25maWcudGFyZ2V0UmVkdWN0aW9uUGVyY2VudGFnZSkudG9CZSgyMCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdVbmludGVudGlvbmFsQW55SW50ZWdyYXRpb25IZWxwZXInLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdhZGRVbmludGVudGlvbmFsQW55UGhhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWRkIHVuaW50ZW50aW9uYWwgYW55IHBoYXNlcyB0byBleGlzdGluZyBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdDb25maWc6IENhbXBhaWduQ29uZmlnID0ge1xuICAgICAgICBwaGFzZXM6IFt7XG4gICAgICAgICAgaWQ6ICdleGlzdGluZy1waGFzZScsXG4gICAgICAgICAgbmFtZTogJ0V4aXN0aW5nIFBoYXNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgcGhhc2UnLFxuICAgICAgICAgIHRvb2xzOiBbXSxcbiAgICAgICAgICBzdWNjZXNzQ3JpdGVyaWE6IHt9LFxuICAgICAgICAgIHNhZmV0eUNoZWNrcG9pbnRzOiBbXVxuICAgICAgICB9XSxcbiAgICAgICAgc2FmZXR5U2V0dGluZ3M6IHtcbiAgICAgICAgICBtYXhGaWxlc1BlckJhdGNoOiAxNSxcbiAgICAgICAgICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDUsXG4gICAgICAgICAgdGVzdFZhbGlkYXRpb25GcmVxdWVuY3k6IDEwLFxuICAgICAgICAgIGNvcnJ1cHRpb25EZXRlY3Rpb25FbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGF1dG9tYXRpY1JvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBzdGFzaFJldGVudGlvbkRheXM6IDdcbiAgICAgICAgfSxcbiAgICAgICAgcHJvZ3Jlc3NUYXJnZXRzOiB7XG4gICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogMCxcbiAgICAgICAgICBsaW50aW5nV2FybmluZ3M6IDAsXG4gICAgICAgICAgYnVpbGRUaW1lOiAxMCxcbiAgICAgICAgICBlbnRlcnByaXNlU3lzdGVtczogMjAwXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2xDb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgZW5oYW5jZWRFcnJvckZpeGVyOiAndGVzdC1zY3JpcHQuanMnLFxuICAgICAgICAgIGV4cGxpY2l0QW55Rml4ZXI6ICd0ZXN0LXNjcmlwdC5qcycsXG4gICAgICAgICAgdW51c2VkVmFyaWFibGVzRml4ZXI6ICd0ZXN0LXNjcmlwdC5qcycsXG4gICAgICAgICAgY29uc29sZVN0YXRlbWVudEZpeGVyOiAndGVzdC1zY3JpcHQuanMnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRDb25maWcgPSBVbmludGVudGlvbmFsQW55SW50ZWdyYXRpb25IZWxwZXIuYWRkVW5pbnRlbnRpb25hbEFueVBoYXNlcyhleGlzdGluZ0NvbmZpZyk7XG5cbiAgICAgIGV4cGVjdCh1cGRhdGVkQ29uZmlnLnBoYXNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVkQ29uZmlnLnBoYXNlc1swXS5pZCkudG9CZSgnZXhpc3RpbmctcGhhc2UnKTtcblxuICAgICAgY29uc3QgcGhhc2VJZHMgPSB1cGRhdGVkQ29uZmlnLnBoYXNlcy5tYXAocGhhc2UgPT4gcGhhc2UuaWQpO1xuICAgICAgZXhwZWN0KHBoYXNlSWRzKS50b0NvbnRhaW4oJ3VuaW50ZW50aW9uYWwtYW55LWFuYWx5c2lzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVBdXRvbWF0aW9uU2NyaXB0Q29tcGF0aWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhdXRvbWF0aW9uIHNjcmlwdCBwYXRocycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBhdGliaWxpdHkgPSBVbmludGVudGlvbmFsQW55SW50ZWdyYXRpb25IZWxwZXIuY3JlYXRlQXV0b21hdGlvblNjcmlwdENvbXBhdGliaWxpdHkoKTtcblxuICAgICAgZXhwZWN0KGNvbXBhdGliaWxpdHkuZXhwbGljaXRBbnlGaXhlcikudG9Db250YWluKCdQcm9ncmVzc2l2ZUltcHJvdmVtZW50RW5naW5lJyk7XG4gICAgICBleHBlY3QoY29tcGF0aWJpbGl0eS51bmludGVudGlvbmFsQW55QW5hbHl6ZXIpLnRvQ29udGFpbignQW55VHlwZUNsYXNzaWZpZXInKTtcbiAgICAgIGV4cGVjdChjb21wYXRpYmlsaXR5LmRvY3VtZW50YXRpb25HZW5lcmF0b3IpLnRvQ29udGFpbignQXV0b0RvY3VtZW50YXRpb25HZW5lcmF0b3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Jlc29sdmVDYW1wYWlnblByaW9yaXR5Q29uZmxpY3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVzb2x2ZSBjb25mbGljdHMgYmV0d2VlbiBtdWx0aXBsZSBjYW1wYWlnbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW1wYWlnbjE6IENhbXBhaWduQ29uZmlnID0ge1xuICAgICAgICBwaGFzZXM6IFt7XG4gICAgICAgICAgaWQ6ICd0eXBlc2NyaXB0LXBoYXNlJyxcbiAgICAgICAgICBuYW1lOiAnVHlwZVNjcmlwdCBQaGFzZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IHBoYXNlJyxcbiAgICAgICAgICB0b29sczogW10sXG4gICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7fSxcbiAgICAgICAgICBzYWZldHlDaGVja3BvaW50czogW11cbiAgICAgICAgfV0sXG4gICAgICAgIHNhZmV0eVNldHRpbmdzOiB7XG4gICAgICAgICAgbWF4RmlsZXNQZXJCYXRjaDogMjAsXG4gICAgICAgICAgYnVpbGRWYWxpZGF0aW9uRnJlcXVlbmN5OiAzLFxuICAgICAgICAgIHRlc3RWYWxpZGF0aW9uRnJlcXVlbmN5OiAxMCxcbiAgICAgICAgICBjb3JydXB0aW9uRGV0ZWN0aW9uRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBhdXRvbWF0aWNSb2xsYmFja0VuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgc3Rhc2hSZXRlbnRpb25EYXlzOiA3XG4gICAgICAgIH0sXG4gICAgICAgIHByb2dyZXNzVGFyZ2V0czoge1xuICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IDAsXG4gICAgICAgICAgbGludGluZ1dhcm5pbmdzOiAwLFxuICAgICAgICAgIGJ1aWxkVGltZTogMTAsXG4gICAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXM6IDIwMFxuICAgICAgICB9LFxuICAgICAgICB0b29sQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgIGVuaGFuY2VkRXJyb3JGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJyxcbiAgICAgICAgICBleHBsaWNpdEFueUZpeGVyOiAndGVzdC1zY3JpcHQuanMnLFxuICAgICAgICAgIHVudXNlZFZhcmlhYmxlc0ZpeGVyOiAndGVzdC1zY3JpcHQuanMnLFxuICAgICAgICAgIGNvbnNvbGVTdGF0ZW1lbnRGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjYW1wYWlnbjI6IENhbXBhaWduQ29uZmlnID0ge1xuICAgICAgICBwaGFzZXM6IFt7XG4gICAgICAgICAgaWQ6ICdsaW50aW5nLXBoYXNlJyxcbiAgICAgICAgICBuYW1lOiAnTGludGluZyBQaGFzZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IHBoYXNlJyxcbiAgICAgICAgICB0b29sczogW10sXG4gICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7fSxcbiAgICAgICAgICBzYWZldHlDaGVja3BvaW50czogW11cbiAgICAgICAgfV0sXG4gICAgICAgIHNhZmV0eVNldHRpbmdzOiB7XG4gICAgICAgICAgbWF4RmlsZXNQZXJCYXRjaDogMTUsXG4gICAgICAgICAgYnVpbGRWYWxpZGF0aW9uRnJlcXVlbmN5OiA1LFxuICAgICAgICAgIHRlc3RWYWxpZGF0aW9uRnJlcXVlbmN5OiAxMCxcbiAgICAgICAgICBjb3JydXB0aW9uRGV0ZWN0aW9uRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBhdXRvbWF0aWNSb2xsYmFja0VuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgc3Rhc2hSZXRlbnRpb25EYXlzOiA3XG4gICAgICAgIH0sXG4gICAgICAgIHByb2dyZXNzVGFyZ2V0czoge1xuICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IDAsXG4gICAgICAgICAgbGludGluZ1dhcm5pbmdzOiAwLFxuICAgICAgICAgIGJ1aWxkVGltZTogMTAsXG4gICAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXM6IDIwMFxuICAgICAgICB9LFxuICAgICAgICB0b29sQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgIGVuaGFuY2VkRXJyb3JGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJyxcbiAgICAgICAgICBleHBsaWNpdEFueUZpeGVyOiAndGVzdC1zY3JpcHQuanMnLFxuICAgICAgICAgIHVudXNlZFZhcmlhYmxlc0ZpeGVyOiAndGVzdC1zY3JpcHQuanMnLFxuICAgICAgICAgIGNvbnNvbGVTdGF0ZW1lbnRGaXhlcjogJ3Rlc3Qtc2NyaXB0LmpzJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcmlvcml0eU9yZGVyID0gWyd0eXBlc2NyaXB0JywgJ2xpbnRpbmcnXTtcbiAgICAgIGNvbnN0IG1lcmdlZENvbmZpZyA9IFVuaW50ZW50aW9uYWxBbnlJbnRlZ3JhdGlvbkhlbHBlci5yZXNvbHZlQ2FtcGFpZ25Qcmlvcml0eUNvbmZsaWN0cyhcbiAgICAgICAgW2NhbXBhaWduMSwgY2FtcGFpZ24yXSxcbiAgICAgICAgcHJpb3JpdHlPcmRlclxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1lcmdlZENvbmZpZy5waGFzZXMubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KG1lcmdlZENvbmZpZy5waGFzZXNbMF0uaWQpLnRvQmUoJ3R5cGVzY3JpcHQtcGhhc2UnKTtcbiAgICAgIGV4cGVjdChtZXJnZWRDb25maWcucGhhc2VzWzFdLmlkKS50b0JlKCdsaW50aW5nLXBoYXNlJyk7XG5cbiAgICAgIC8vIFNob3VsZCB1c2UgbW9zdCBjb25zZXJ2YXRpdmUgc2FmZXR5IHNldHRpbmdzXG4gICAgICBleHBlY3QobWVyZ2VkQ29uZmlnLnNhZmV0eVNldHRpbmdzLm1heEZpbGVzUGVyQmF0Y2gpLnRvQmUoMTUpO1xuICAgICAgZXhwZWN0KG1lcmdlZENvbmZpZy5zYWZldHlTZXR0aW5ncy5idWlsZFZhbGlkYXRpb25GcmVxdWVuY3kpLnRvQmUoMyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdVbmludGVudGlvbmFsQW55UHJvZ3Jlc3NUcmFja2VyJywgKCkgPT4ge1xuICBsZXQgdHJhY2tlcjogVW5pbnRlbnRpb25hbEFueVByb2dyZXNzVHJhY2tlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICB0cmFja2VyID0gbmV3IFVuaW50ZW50aW9uYWxBbnlQcm9ncmVzc1RyYWNrZXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFVuaW50ZW50aW9uYWxBbnlNZXRyaWNzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGRlZmF1bHQgbWV0cmljcyB3aGVuIGxpbnRpbmcgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdHJhY2tlci5nZXRVbmludGVudGlvbmFsQW55TWV0cmljcygpO1xuXG4gICAgICBleHBlY3QobWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsQW55VHlwZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5pbnRlbnRpb25hbEFueVR5cGVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MudW5pbnRlbnRpb25hbEFueVR5cGVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MuZG9jdW1lbnRhdGlvbkNvdmVyYWdlKS50b0JlKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MudGFyZ2V0UmVkdWN0aW9uKS50b0JlKDE1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NldEJhc2VsaW5lTWV0cmljcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNldCBiYXNlbGluZSBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdHJhY2tlci5zZXRCYXNlbGluZU1ldHJpY3MoKTtcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IHRyYWNrZXIuZ2V0VW5pbnRlbnRpb25hbEFueU1ldHJpY3NIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlVW5pbnRlbnRpb25hbEFueU1pbGVzdG9uZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGJhc2VsaW5lLWVzdGFibGlzaGVkIG1pbGVzdG9uZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0cmFja2VyLnZhbGlkYXRlVW5pbnRlbnRpb25hbEFueU1pbGVzdG9uZSgnYmFzZWxpbmUtZXN0YWJsaXNoZWQnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgaXNWYWxpZCkudG9CZSgnYm9vbGVhbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbmFseXNpcy1jb21wbGV0ZSBtaWxlc3RvbmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdHJhY2tlci52YWxpZGF0ZVVuaW50ZW50aW9uYWxBbnlNaWxlc3RvbmUoJ2FuYWx5c2lzLWNvbXBsZXRlJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGlzVmFsaWQpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciB1bmtub3duIG1pbGVzdG9uZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0cmFja2VyLnZhbGlkYXRlVW5pbnRlbnRpb25hbEFueU1pbGVzdG9uZSgndW5rbm93bi1taWxlc3RvbmUnIGFzIGFueSk7XG4gICAgICBleHBlY3QoaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXREYXNoYm9hcmRNZXRyaWNzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGRhc2hib2FyZC1jb21wYXRpYmxlIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYXNoYm9hcmRNZXRyaWNzID0gYXdhaXQgdHJhY2tlci5nZXREYXNoYm9hcmRNZXRyaWNzKCk7XG5cbiAgICAgIGV4cGVjdChkYXNoYm9hcmRNZXRyaWNzLmN1cnJlbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkTWV0cmljcy50cmVuZCkudG9NYXRjaCgvaW1wcm92aW5nfHN0YWJsZXxkZWNsaW5pbmcvKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGRhc2hib2FyZE1ldHJpY3MudG9wRmlsZXMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGFzaGJvYXJkTWV0cmljcy5hbGVydHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGFzaGJvYXJkTWV0cmljcy5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZE1ldHJpY3MubGFzdFVwZGF0ZWQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVzZXRVbmludGVudGlvbmFsQW55TWV0cmljc0hpc3RvcnknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXNldCBtZXRyaWNzIGhpc3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0cmFja2VyLnNldEJhc2VsaW5lTWV0cmljcygpO1xuICAgICAgZXhwZWN0KHRyYWNrZXIuZ2V0VW5pbnRlbnRpb25hbEFueU1ldHJpY3NIaXN0b3J5KCkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIHRyYWNrZXIucmVzZXRVbmludGVudGlvbmFsQW55TWV0cmljc0hpc3RvcnkoKTtcbiAgICAgIGV4cGVjdCh0cmFja2VyLmdldFVuaW50ZW50aW9uYWxBbnlNZXRyaWNzSGlzdG9yeSgpLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1VuaW50ZW50aW9uYWxBbnlDYW1wYWlnblNjaGVkdWxlcicsICgpID0+IHtcbiAgbGV0IHNjaGVkdWxlcjogVW5pbnRlbnRpb25hbEFueUNhbXBhaWduU2NoZWR1bGVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHNjaGVkdWxlciA9IG5ldyBVbmludGVudGlvbmFsQW55Q2FtcGFpZ25TY2hlZHVsZXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Nob3VsZFRyaWdnZXJDYW1wYWlnbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cmlnZ2VyIGRlY2lzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBzY2hlZHVsZXIuc2hvdWxkVHJpZ2dlckNhbXBhaWduKCk7XG5cbiAgICAgIGV4cGVjdChkZWNpc2lvbi5zaG91bGRUcmlnZ2VyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBkZWNpc2lvbi5zaG91bGRUcmlnZ2VyKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QoZGVjaXNpb24ucmVhc29uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRlY2lzaW9uLnByaW9yaXR5KS50b01hdGNoKC9sb3d8bWVkaXVtfGhpZ2gvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Jlc29sdmVDYW1wYWlnbkNvbmZsaWN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlc29sdmUgY29uZmxpY3RzIHdpdGggbm8gYWN0aXZlIGNhbXBhaWducycsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBzY2hlZHVsZXIucmVzb2x2ZUNhbXBhaWduQ29uZmxpY3RzKFtdLCAndW5pbnRlbnRpb25hbC1hbnktZWxpbWluYXRpb24nKTtcblxuICAgICAgZXhwZWN0KHJlc29sdXRpb24uY2FuUHJvY2VlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNvbHV0aW9uLmNvbmZsaWN0aW5nQ2FtcGFpZ25zKS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChyZXNvbHV0aW9uLnJlc29sdXRpb24pLnRvQ29udGFpbignTm8gY29uZmxpY3RzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBjb25mbGljdHMgd2l0aCB0eXBlc2NyaXB0IGNhbXBhaWducycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNhbXBhaWducyA9IFsndHlwZXNjcmlwdC1lcnJvci1lbGltaW5hdGlvbicsICdvdGhlci1jYW1wYWlnbiddO1xuICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IHNjaGVkdWxlci5yZXNvbHZlQ2FtcGFpZ25Db25mbGljdHMoYWN0aXZlQ2FtcGFpZ25zLCAndW5pbnRlbnRpb25hbC1hbnktZWxpbWluYXRpb24nKTtcblxuICAgICAgZXhwZWN0KHJlc29sdXRpb24uY29uZmxpY3RpbmdDYW1wYWlnbnMpLnRvQ29udGFpbigndHlwZXNjcmlwdC1lcnJvci1lbGltaW5hdGlvbicpO1xuICAgICAgZXhwZWN0KHJlc29sdXRpb24uY29uZmxpY3RpbmdDYW1wYWlnbnMpLm5vdC50b0NvbnRhaW4oJ290aGVyLWNhbXBhaWduJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgZXhlY3V0aW9uIHdoZW4gY3JpdGljYWwgY2FtcGFpZ25zIGFyZSBhY3RpdmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVDYW1wYWlnbnMgPSBbJ2NyaXRpY2FsLXR5cGVzY3JpcHQtZW1lcmdlbmN5J107XG4gICAgICBjb25zdCByZXNvbHV0aW9uID0gc2NoZWR1bGVyLnJlc29sdmVDYW1wYWlnbkNvbmZsaWN0cyhhY3RpdmVDYW1wYWlnbnMsICd1bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbicpO1xuXG4gICAgICBleHBlY3QocmVzb2x1dGlvbi5jYW5Qcm9jZWVkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXNvbHV0aW9uLnJlc29sdXRpb24pLnRvQ29udGFpbignV2FpdCBmb3IgY3JpdGljYWwgY2FtcGFpZ25zJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRSZWNvbW1lbmRlZEV4ZWN1dGlvblRpbWUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZWNvbW1lbmQgaW1tZWRpYXRlIGV4ZWN1dGlvbiBmb3IgbG93IGxvYWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbiA9IHNjaGVkdWxlci5nZXRSZWNvbW1lbmRlZEV4ZWN1dGlvblRpbWUoW10sICdsb3cnKTtcblxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9uLnJlY29tbWVuZGVkVGltZSkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb24ucmVhc29uKS50b0NvbnRhaW4oJ2ltbWVkaWF0ZWx5Jyk7XG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb24uZXN0aW1hdGVkRHVyYXRpb24pLnRvQmVMZXNzVGhhbigzMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlbGF5IGV4ZWN1dGlvbiBmb3IgaGlnaCBsb2FkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb24gPSBzY2hlZHVsZXIuZ2V0UmVjb21tZW5kZWRFeGVjdXRpb25UaW1lKFsnYWN0aXZlLWNhbXBhaWduJ10sICdoaWdoJyk7XG5cbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbi5yZWNvbW1lbmRlZFRpbWUpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9uLnJlYXNvbikudG9Db250YWluKCdsYXRlcicpO1xuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9uLmVzdGltYXRlZER1cmF0aW9uKS50b0JlR3JlYXRlclRoYW4oMzApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9