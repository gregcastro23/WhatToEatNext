6e954aa8e1e8ad641514e4237640707f
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CookingMethodsSection = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const lucide_react_1 = require("lucide-react");
const navigation_1 = require("next/navigation");
const hooks_1 = require("@/hooks");
const useAstrologicalState_1 = require("@/hooks/useAstrologicalState");
const CookingMethods_module_css_1 = __importDefault(require("./CookingMethods.module.css"));
const cookingMethodTips_1 = require("@/utils/cookingMethodTips");
const cookingMethods_1 = require("@/data/cooking/cookingMethods");
const CookingMethodsSection = ({ methods: propMethods, onSelectMethod, selectedMethodId, showToggle = true, initiallyExpanded = false, maxDisplayed = 6, onViewMore, isMainPageVersion = false, }) => {
    const router = (0, navigation_1.useRouter)();
    const [isExpanded, setIsExpanded] = (0, react_1.useState)(initiallyExpanded);
    const [expandedMethods, setExpandedMethods] = (0, react_1.useState)({});
    const [showIngredientSearch, setShowIngredientSearch] = (0, react_1.useState)(false);
    const [searchIngredient, setSearchIngredient] = (0, react_1.useState)('');
    const [ingredientCompatibility, setIngredientCompatibility] = (0, react_1.useState)({});
    const [error, setError] = (0, react_1.useState)(null);
    const [isLoading, setIsLoading] = (0, react_1.useState)(false);
    const [showAllMethods, setShowAllMethods] = (0, react_1.useState)(false);
    // Get astrological state for timing recommendations
    const astroState = (0, useAstrologicalState_1.useAstrologicalState)();
    // Convert cooking methods data to component format and add astrological scoring
    const methods = (0, react_1.useMemo)(() => {
        if (propMethods && propMethods.length > 0) {
            return propMethods;
        }
        // Convert from data format to component format with astrological scoring
        return Object.entries(cookingMethods_1.cookingMethods).map(([key, methodData]) => {
            const method = {
                id: key,
                name: methodData.name,
                description: `${methodData.benefits.join(', ')}`,
                elementalEffect: methodData.elementalEffect,
                duration: methodData.duration,
                suitable_for: methodData.suitable_for,
                benefits: methodData.benefits,
                alchemicalProperties: methodData.alchemicalProperties,
                astrologicalInfluences: methodData.astrologicalInfluences,
                thermodynamicProperties: methodData.thermodynamicProperties,
                score: calculateAstrologicalScore(methodData, astroState)
            };
            return method;
        });
    }, [propMethods, astroState]);
    // Calculate astrological score for a cooking method
    const calculateAstrologicalScore = (methodData, astroState) => {
        var _a, _b, _c;
        let score = 0.5; // Base score
        try {
            // Planetary alignment bonus
            if (((_a = methodData.astrologicalInfluences) === null || _a === void 0 ? void 0 : _a.dominantPlanets) && astroState.activePlanets) {
                const alignedPlanets = methodData.astrologicalInfluences.dominantPlanets.filter((planet) => astroState.activePlanets.includes(planet.toLowerCase()));
                score += (alignedPlanets.length / methodData.astrologicalInfluences.dominantPlanets.length) * 0.3;
            }
            // Lunar phase bonus
            if (((_b = methodData.astrologicalInfluences) === null || _b === void 0 ? void 0 : _b.lunarPhaseEffect) && astroState.lunarPhase) {
                const phaseEffect = methodData.astrologicalInfluences.lunarPhaseEffect[astroState.lunarPhase];
                if (phaseEffect) {
                    score += (phaseEffect - 0.5) * 0.2;
                }
            }
            // Planetary hour bonus
            if (((_c = methodData.astrologicalInfluences) === null || _c === void 0 ? void 0 : _c.dominantPlanets) && astroState.currentPlanetaryHour) {
                const isHourAligned = methodData.astrologicalInfluences.dominantPlanets.some((planet) => { var _a; return planet.toLowerCase() === ((_a = astroState.currentPlanetaryHour) === null || _a === void 0 ? void 0 : _a.toLowerCase()); });
                if (isHourAligned) {
                    score += 0.15;
                }
            }
            // Thermodynamic efficiency bonus
            if (methodData.thermodynamicProperties) {
                const efficiency = (methodData.thermodynamicProperties.heat + methodData.thermodynamicProperties.reactivity) /
                    (1 + methodData.thermodynamicProperties.entropy);
                score += (efficiency - 0.5) * 0.1;
            }
        }
        catch (error) {
            console.warn('Error calculating astrological score:', error);
        }
        return Math.min(0.95, Math.max(0.35, score));
    };
    // Get top method based on score
    const topMethod = (0, react_1.useMemo)(() => {
        if (!methods.length)
            return null;
        return [...methods].sort((a, b) => {
            const scoreA = a.score !== undefined ? a.score : 0;
            const scoreB = b.score !== undefined ? b.score : 0;
            return scoreB - scoreA;
        })[0];
    }, [methods]);
    // Sort methods by score and limit display for main page version
    const displayMethods = (0, react_1.useMemo)(() => {
        const sortedMethods = [...methods].sort((a, b) => {
            const scoreA = a.score !== undefined ? a.score : 0;
            const scoreB = b.score !== undefined ? b.score : 0;
            return scoreB - scoreA;
        });
        // For main page version, limit to maxDisplayed
        if (isMainPageVersion) {
            return sortedMethods.slice(0, maxDisplayed);
        }
        return showAllMethods ? sortedMethods : sortedMethods.slice(0, 8);
    }, [methods, showAllMethods, isMainPageVersion, maxDisplayed]);
    // Use our new ingredient mapping hook
    const { suggestAlternatives, calculateCompatibility, isLoading: ingredientMappingLoading, error: ingredientMappingError } = (0, hooks_1.useIngredientMapping)();
    // Auto-expand the section if we have methods and a pre-selected method
    (0, react_1.useEffect)(() => {
        var _a;
        if (methods.length > 0) {
            // Always keep expanded if â‰¤5 methods
            if (methods.length <= 5) {
                setIsExpanded(true);
            }
            // Also expand if there's a selected method
            if (selectedMethodId) {
                setIsExpanded(true);
                // Find the selected method
                const selectedMethod = methods.find(m => m.id === selectedMethodId);
                if (selectedMethod) {
                    // If the selected method has variations, expand it
                    if ((_a = selectedMethod.variations) === null || _a === void 0 ? void 0 : _a.length) {
                        setExpandedMethods(prev => ({
                            ...prev,
                            [selectedMethodId]: true
                        }));
                    }
                    // If this is a variation, find and expand its parent method
                    const parentMethod = methods.find(m => { var _a; return (_a = m.variations) === null || _a === void 0 ? void 0 : _a.some(v => v.id === selectedMethodId); });
                    if (parentMethod) {
                        setExpandedMethods(prev => ({
                            ...prev,
                            [parentMethod.id]: true
                        }));
                    }
                }
            }
        }
    }, [methods, selectedMethodId]);
    // Handle ingredient compatibility calculation
    const calculateIngredientCompatibility = () => {
        if (!searchIngredient.trim())
            return;
        // Calculate compatibility with each cooking method based on elemental properties
        const compatibilityResults = {};
        methods.forEach(method => {
            if (method.elementalEffect) {
                // Create a compatibility object from method's elemental effect
                const methodElemental = {
                    Fire: method.elementalEffect.Fire || 0,
                    Water: method.elementalEffect.Water || 0,
                    Earth: method.elementalEffect.Earth || 0,
                    Air: method.elementalEffect.Air || 0
                };
                // Calculate compatibility between ingredient and cooking method
                const result = calculateCompatibility(searchIngredient, {
                    name: method.name,
                    elementalProperties: methodElemental,
                    category: 'cooking_method'
                });
                if (result.success) {
                    compatibilityResults[method.id] = result.compatibility;
                }
                // Also calculate for variations if they exist
                if (method.variations) {
                    method.variations.forEach(variation => {
                        // Use parent method's elemental effect if variation doesn't have one
                        const variationElemental = variation.elementalEffect || method.elementalEffect;
                        if (variationElemental) {
                            const variationResult = calculateCompatibility(searchIngredient, {
                                name: variation.name,
                                elementalProperties: variationElemental,
                                category: 'cooking_method'
                            });
                            if (variationResult.success) {
                                compatibilityResults[variation.id] = variationResult.compatibility;
                            }
                        }
                    });
                }
            }
        });
        setIngredientCompatibility(compatibilityResults);
    };
    const toggleExpanded = () => {
        // Only allow toggling if there are more than 5 methods
        if (methods.length > 5) {
            setIsExpanded(prev => !prev);
        }
    };
    const toggleMethodExpanded = (methodId, e) => {
        // Prevent the click from selecting the method
        e.stopPropagation();
        setExpandedMethods(prev => ({
            ...prev,
            [methodId]: !prev[methodId]
        }));
    };
    // Toggle ingredient search section
    const toggleIngredientSearch = () => {
        setShowIngredientSearch(prev => !prev);
        // Clear results when hiding
        if (showIngredientSearch) {
            setIngredientCompatibility({});
            setSearchIngredient('');
        }
    };
    // Handle navigation to full cooking methods page
    const handleViewMore = () => {
        if (onViewMore) {
            onViewMore();
        }
        else {
            // Default navigation to cooking methods page
            // Preserve selected method context in URL params
            const params = new URLSearchParams();
            if (selectedMethodId) {
                params.set('selected', selectedMethodId);
            }
            const url = `/cooking-methods${params.toString() ? `?${params.toString()}` : ''}`;
            router.push(url);
        }
    };
    // Handle method selection with enhanced navigation context preservation
    const handleMethodSelect = (method) => {
        if (onSelectMethod) {
            onSelectMethod(method);
        }
        // For main page version, preserve context using enhanced state preservation
        if (isMainPageVersion) {
            // Import and use the state preservation utility
            try {
                const { saveNavigationState } = require('@/utils/statePreservation');
                const { getNavigationState } = require('@/utils/statePreservation');
                const currentState = getNavigationState();
                saveNavigationState({
                    ...currentState,
                    selectedCookingMethod: {
                        id: method.id,
                        name: method.name,
                        timestamp: Date.now()
                    }
                });
            }
            catch (error) {
                console.warn('Failed to store selected method using enhanced state preservation:', error);
                // Fallback to sessionStorage
                try {
                    sessionStorage.setItem('selectedCookingMethod', JSON.stringify({
                        id: method.id,
                        name: method.name,
                        timestamp: Date.now()
                    }));
                }
                catch (fallbackError) {
                    console.warn('Failed to store selected method in session storage:', fallbackError);
                }
            }
        }
    };
    // Calculate elemental transformation capacity from alchemical properties
    const getElementalTransformations = (method) => {
        const transformations = {
            Fire: 0,
            Water: 0,
            Earth: 0,
            Air: 0
        };
        // If method has alchemical properties, use them to calculate transformations
        if (method.alchemicalProperties) {
            // Spirit primarily influences Fire and Air
            if (method.alchemicalProperties.Spirit > 0) {
                transformations.Fire += method.alchemicalProperties.Spirit * 0.6;
                transformations.Air += method.alchemicalProperties.Spirit * 0.4;
            }
            // Essence primarily influences Water and Air
            if (method.alchemicalProperties.Essence > 0) {
                transformations.Water += method.alchemicalProperties.Essence * 0.6;
                transformations.Air += method.alchemicalProperties.Essence * 0.4;
            }
            // Matter primarily influences Earth and Water
            if (method.alchemicalProperties.Matter > 0) {
                transformations.Earth += method.alchemicalProperties.Matter * 0.6;
                transformations.Water += method.alchemicalProperties.Matter * 0.4;
            }
            // Substance primarily influences Earth and Fire
            if (method.alchemicalProperties.Substance > 0) {
                transformations.Earth += method.alchemicalProperties.Substance * 0.6;
                transformations.Fire += method.alchemicalProperties.Substance * 0.4;
            }
        }
        // If no alchemical properties, use elementalEffect as directional indicators
        else if (method.elementalEffect) {
            transformations.Fire = method.elementalEffect.Fire;
            transformations.Water = method.elementalEffect.Water;
            transformations.Earth = method.elementalEffect.Earth;
            transformations.Air = method.elementalEffect.Air;
        }
        return transformations;
    };
    // Determine if an element is increased or decreased by the method
    const getElementalDirection = (value) => {
        if (value > 0.5)
            return { direction: 'increase', intensity: (value - 0.5) * 2 };
        if (value < 0.5)
            return { direction: 'decrease', intensity: (0.5 - value) * 2 };
        return { direction: 'neutral', intensity: 0 };
    };
    // Get alchemical essence label from properties
    const getAlchemicalLabel = (method) => {
        if (!method.alchemicalProperties)
            return null;
        const { Spirit, Essence, Matter, Substance } = method.alchemicalProperties;
        const alchemical = [
            { name: 'Spirit', value: Spirit || 0 },
            { name: 'Essence', value: Essence || 0 },
            { name: 'Matter', value: Matter || 0 },
            { name: 'Substance', value: Substance || 0 }
        ].sort((a, b) => b.value - a.value);
        if (alchemical[0].value === 0)
            return null;
        return {
            primary: alchemical[0].name,
            secondary: alchemical[1].name
        };
    };
    // Map compatibility score to color and label
    const getCompatibilityLabel = (score) => {
        if (score >= 0.8)
            return { label: 'Excellent', className: 'compatibility-excellent' };
        if (score >= 0.6)
            return { label: 'Good', className: 'compatibility-good' };
        if (score >= 0.4)
            return { label: 'Fair', className: 'compatibility-fair' };
        if (score >= 0.2)
            return { label: 'Poor', className: 'compatibility-poor' };
        return { label: 'Incompatible', className: 'compatibility-bad' };
    };
    // Get score class for styling
    const getScoreClass = (score) => {
        if (score >= 0.8)
            return CookingMethods_module_css_1.default['score-excellent'];
        if (score >= 0.6)
            return CookingMethods_module_css_1.default['score-good'];
        if (score >= 0.4)
            return CookingMethods_module_css_1.default['score-fair'];
        if (score >= 0.2)
            return CookingMethods_module_css_1.default['score-poor'];
        return CookingMethods_module_css_1.default['score-bad'];
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['cooking-methods-container'], children: [(0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['cooking-methods-header']} ${!showToggle ? CookingMethods_module_css_1.default['no-toggle'] : ''}`, onClick: showToggle ? toggleExpanded : undefined, children: [(0, jsx_runtime_1.jsxs)("h3", { className: CookingMethods_module_css_1.default.title, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 18, className: CookingMethods_module_css_1.default.titleIcon }), (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default.titleText, children: "Alchemical Cooking Methods" }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default.titleCount, children: ["(", methods.length, ")"] })] }), topMethod && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['top-recommendation'], children: ["Top: ", (0, jsx_runtime_1.jsx)("span", { children: topMethod.name })] })), (0, jsx_runtime_1.jsx)("button", { className: `${CookingMethods_module_css_1.default['ingredient-search-toggle']} ${showIngredientSearch ? CookingMethods_module_css_1.default.active : ''}`, onClick: (e) => {
                            e.stopPropagation();
                            toggleIngredientSearch();
                        }, title: "Check ingredient compatibility", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Search, { size: 18 }) }), showToggle && ((0, jsx_runtime_1.jsx)("button", { className: CookingMethods_module_css_1.default['toggle-button'], children: isExpanded ? (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { size: 18 }) : (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { size: 18 }) }))] }), showIngredientSearch && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['ingredient-search-container'], children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['search-form'], children: [(0, jsx_runtime_1.jsx)("input", { type: "text", placeholder: "Enter ingredient name...", value: searchIngredient, onChange: (e) => setSearchIngredient(e.target.value), className: CookingMethods_module_css_1.default['ingredient-search-input'] }), (0, jsx_runtime_1.jsx)("button", { onClick: calculateIngredientCompatibility, disabled: isLoading || !searchIngredient.trim(), className: CookingMethods_module_css_1.default['search-button'], children: isLoading ? 'Loading...' : 'Check Compatibility' })] }), error && ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['error-message'], children: error })), Object.keys(ingredientCompatibility).length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['compatibility-info'], children: (0, jsx_runtime_1.jsxs)("p", { children: ["Showing compatibility for: ", (0, jsx_runtime_1.jsx)("strong", { children: searchIngredient })] }) }))] })), isExpanded && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['cooking-methods-content'], children: [(0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['methods-grid'], children: displayMethods.map((method) => {
                            var _a, _b, _c;
                            return ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['method-card']} ${selectedMethodId === method.id ? CookingMethods_module_css_1.default.selected : ''}`, onClick: () => handleMethodSelect(method), children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['method-header'], children: [(0, jsx_runtime_1.jsx)("h4", { className: CookingMethods_module_css_1.default['method-name'], children: method.name }), method.score !== undefined && ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['method-score']} ${getScoreClass(method.score)}`, children: [(0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['score-value'], children: [Math.round(method.score * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['score-bar'], children: (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['score-bar-fill'], style: { width: `${Math.round(method.score * 100)}%` } }) })] })), ingredientCompatibility[method.id] !== undefined && ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['ingredient-compatibility']} ${CookingMethods_module_css_1.default[getCompatibilityLabel(ingredientCompatibility[method.id]).className]}`, children: [(0, jsx_runtime_1.jsx)("span", { children: getCompatibilityLabel(ingredientCompatibility[method.id]).label }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['compatibility-value'], children: [Math.round(ingredientCompatibility[method.id] * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['compatibility-bar'], children: (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['compatibility-bar-fill'], style: { width: `${Math.round(ingredientCompatibility[method.id] * 100)}%` } }) })] })), method.variations && method.variations.length > 0 && ((0, jsx_runtime_1.jsxs)("button", { className: CookingMethods_module_css_1.default['toggle-variations'], onClick: (e) => toggleMethodExpanded(method.id, e), "aria-label": expandedMethods[method.id] ? "Collapse variations" : "Expand variations", children: [(0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['variations-count'], children: method.variations.length }), expandedMethods[method.id] ?
                                                        (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { size: 16 }) :
                                                        (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { size: 16 })] }))] }), (0, jsx_runtime_1.jsx)("p", { className: CookingMethods_module_css_1.default['method-description'], children: method.description }), (0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['transformation-container'], children: [(0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['transformation-header'], children: (0, jsx_runtime_1.jsx)("span", { children: "Elemental Transformations" }) }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['elemental-transformations'], children: (() => {
                                                    const transformations = getElementalTransformations(method);
                                                    return Object.entries(transformations).map(([element, value]) => {
                                                        const { direction, intensity } = getElementalDirection(value);
                                                        const displayIntensity = Math.min(Math.round(intensity * 100), 100); // 0-100 range
                                                        // Skip elements with no significant change
                                                        if (direction === 'neutral')
                                                            return null;
                                                        return ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['transformation-item']} ${CookingMethods_module_css_1.default[element.toLowerCase()]} ${CookingMethods_module_css_1.default[`transform-${direction}`]}`, title: `${direction === 'increase' ? 'Increases' : 'Decreases'} ${element} by ${displayIntensity}%`, children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['element-icon'], children: [element === 'Fire' && (0, jsx_runtime_1.jsx)(lucide_react_1.Flame, { size: 16 }), element === 'Water' && (0, jsx_runtime_1.jsx)(lucide_react_1.Droplets, { size: 16 }), element === 'Earth' && (0, jsx_runtime_1.jsx)(lucide_react_1.Mountain, { size: 16 }), element === 'Air' && (0, jsx_runtime_1.jsx)(lucide_react_1.Wind, { size: 16 })] }), (0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['transformation-label'], children: [(0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['element-name'], children: element }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['direction-indicator'], children: direction === 'increase' ? (0, jsx_runtime_1.jsx)(lucide_react_1.ArrowUp, { size: 14 }) : direction === 'decrease' ? (0, jsx_runtime_1.jsx)(lucide_react_1.ArrowDown, { size: 14 }) : (0, jsx_runtime_1.jsx)(lucide_react_1.Minus, { size: 14 }) })] }), displayIntensity > 0 && ((0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['intensity-value'], children: [direction === 'increase' ? '+' : '-', displayIntensity, "%"] }))] }, element));
                                                    }).filter(Boolean); // Filter out null items
                                                })() })] }), method.alchemicalProperties && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['alchemical-properties'], children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['alchemy-header'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Zap, { size: 14, className: CookingMethods_module_css_1.default['alchemy-icon'] }), (0, jsx_runtime_1.jsx)("span", { children: "Alchemical Properties" })] }), getAlchemicalLabel(method) && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['alchemy-label'], children: ["Primary: ", (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['alchemy-value'], children: (_a = getAlchemicalLabel(method)) === null || _a === void 0 ? void 0 : _a.primary }), ((_b = getAlchemicalLabel(method)) === null || _b === void 0 ? void 0 : _b.secondary) && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [" | Secondary: ", (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['alchemy-value'], children: (_c = getAlchemicalLabel(method)) === null || _c === void 0 ? void 0 : _c.secondary })] }))] }))] })), method.astrologicalInfluences && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['astrological-timing'], children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['timing-header'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 14, className: CookingMethods_module_css_1.default['timing-icon'] }), (0, jsx_runtime_1.jsx)("span", { children: "Optimal Timing" })] }), (0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['timing-recommendations'], children: [method.astrologicalInfluences.dominantPlanets && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['timing-item'], children: [(0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['timing-label'], children: "Best Hours:" }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['timing-value'], children: [method.astrologicalInfluences.dominantPlanets.slice(0, 2).join(', '), " hours"] }), astroState.currentPlanetaryHour &&
                                                                method.astrologicalInfluences.dominantPlanets.some((planet) => { var _a; return planet.toLowerCase() === ((_a = astroState.currentPlanetaryHour) === null || _a === void 0 ? void 0 : _a.toLowerCase()); }) && ((0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['timing-active'], children: "\u2022 Active Now" }))] })), method.astrologicalInfluences.lunarPhaseEffect && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['timing-item'], children: [(0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['timing-label'], children: "Lunar Phase:" }), (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['timing-value'], children: Object.entries(method.astrologicalInfluences.lunarPhaseEffect)
                                                                    .sort(([, a], [, b]) => b - a)
                                                                    .slice(0, 1)
                                                                    .map(([phase]) => phase.replace('_', ' '))
                                                                    .join(', ') }), astroState.lunarPhase &&
                                                                method.astrologicalInfluences.lunarPhaseEffect[astroState.lunarPhase] &&
                                                                method.astrologicalInfluences.lunarPhaseEffect[astroState.lunarPhase] > 0.6 && ((0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['timing-active'], children: "\u2022 Favorable" }))] })), method.elementalEffect && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['timing-item'], children: [(0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['timing-label'], children: "Element:" }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['timing-value'], children: [Object.entries(method.elementalEffect)
                                                                        .sort(([, a], [, b]) => b - a)
                                                                        .slice(0, 1)
                                                                        .map(([element]) => element)
                                                                        .join(''), " dominant"] })] }))] })] })), (0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['method-details'], children: [method.duration && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['detail-item'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { size: 14, className: CookingMethods_module_css_1.default['detail-icon'] }), (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['detail-label'], children: "Duration:" }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['detail-value'], children: [method.duration.min, "-", method.duration.max, " min"] })] })), method.suitable_for && method.suitable_for.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['detail-item'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.List, { size: 14, className: CookingMethods_module_css_1.default['detail-icon'] }), (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['detail-label'], children: "Ideal for:" }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['detail-value'], children: [method.suitable_for.slice(0, 3).join(', '), method.suitable_for.length > 3 && '...'] })] })), method.benefits && method.benefits.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['detail-item'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ThumbsUp, { size: 14, className: CookingMethods_module_css_1.default['detail-icon'] }), (0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['detail-label'], children: "Benefits:" }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['detail-value'], children: [method.benefits.slice(0, 1).join(', '), method.benefits.length > 1 && '...'] })] }))] }), method.variations && method.variations.length > 0 && expandedMethods[method.id] && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['variations-container'], children: [(0, jsx_runtime_1.jsxs)("h5", { className: CookingMethods_module_css_1.default['variations-header'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Globe, { size: 14, className: CookingMethods_module_css_1.default['variations-icon'] }), "Variations & Subcategories"] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['variations-list'], children: method.variations.map((variation) => ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['variation-item']} ${selectedMethodId === variation.id ? CookingMethods_module_css_1.default.selected : ''}`, onClick: (e) => {
                                                        e.stopPropagation(); // Prevent parent click
                                                        onSelectMethod && onSelectMethod(variation);
                                                    }, children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['variation-header'], children: [(0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['variation-name'], children: variation.name }), variation.culturalOrigin && ((0, jsx_runtime_1.jsx)("span", { className: CookingMethods_module_css_1.default['cultural-origin'], children: variation.culturalOrigin })), ingredientCompatibility[variation.id] !== undefined && ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['ingredient-compatibility']} ${CookingMethods_module_css_1.default.small} ${CookingMethods_module_css_1.default[getCompatibilityLabel(ingredientCompatibility[variation.id]).className]}`, children: [(0, jsx_runtime_1.jsx)("span", { children: getCompatibilityLabel(ingredientCompatibility[variation.id]).label }), (0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['compatibility-value'], children: [Math.round(ingredientCompatibility[variation.id] * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['compatibility-bar'], children: (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['compatibility-bar-fill'], style: { width: `${Math.round(ingredientCompatibility[variation.id] * 100)}%` } }) })] })), variation.score !== undefined && ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['variation-score']} ${getScoreClass(variation.score)}`, children: [(0, jsx_runtime_1.jsxs)("span", { children: [Math.round(variation.score * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['score-bar'], children: (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['score-bar-fill'], style: { width: `${Math.round(variation.score * 100)}%` } }) })] }))] }), (variation.elementalEffect || variation.alchemicalProperties) && ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['elemental-transformations-small'], children: (() => {
                                                                const transformations = getElementalTransformations(variation);
                                                                return Object.entries(transformations).map(([element, value]) => {
                                                                    const { direction, intensity } = getElementalDirection(value);
                                                                    const displayIntensity = Math.min(Math.round(intensity * 100), 100); // 0-100 range
                                                                    // Skip elements with no significant change
                                                                    if (direction === 'neutral' || displayIntensity < 5)
                                                                        return null;
                                                                    return ((0, jsx_runtime_1.jsxs)("div", { className: `${CookingMethods_module_css_1.default['transformation-item-small']} ${CookingMethods_module_css_1.default[element.toLowerCase()]} ${CookingMethods_module_css_1.default[`transform-${direction}`]}`, title: `${direction === 'increase' ? 'Increases' : 'Decreases'} ${element} by ${displayIntensity}%`, children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['element-icon-small'], children: [element === 'Fire' && (0, jsx_runtime_1.jsx)(lucide_react_1.Flame, { size: 12 }), element === 'Water' && (0, jsx_runtime_1.jsx)(lucide_react_1.Droplets, { size: 12 }), element === 'Earth' && (0, jsx_runtime_1.jsx)(lucide_react_1.Mountain, { size: 12 }), element === 'Air' && (0, jsx_runtime_1.jsx)(lucide_react_1.Wind, { size: 12 })] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['direction-indicator-small'], children: direction === 'increase' ? (0, jsx_runtime_1.jsx)(lucide_react_1.ArrowUp, { size: 10 }) : (0, jsx_runtime_1.jsx)(lucide_react_1.ArrowDown, { size: 10 }) }), displayIntensity > 0 && ((0, jsx_runtime_1.jsxs)("span", { className: CookingMethods_module_css_1.default['intensity-value-small'], children: [direction === 'increase' ? '+' : '-', displayIntensity, "%"] }))] }, element));
                                                                }).filter(Boolean); // Filter out null items
                                                            })() }))] }, variation.id))) })] })), selectedMethodId === method.id && ((0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['expanded-details'], children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['technical-tips'], children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['section-header'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Info, { size: 14, className: CookingMethods_module_css_1.default['section-icon'] }), (0, jsx_runtime_1.jsx)("span", { children: "Expert Technical Tips" })] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['tips-grid'], children: (0, cookingMethodTips_1.getTechnicalTips)(method.name).slice(0, 5).map((tip, index) => ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['tip-item'], children: tip }, index))) })] }), (0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['ideal-ingredients'], children: [(0, jsx_runtime_1.jsxs)("div", { className: CookingMethods_module_css_1.default['section-header'], children: [(0, jsx_runtime_1.jsx)(lucide_react_1.List, { size: 14, className: CookingMethods_module_css_1.default['section-icon'] }), (0, jsx_runtime_1.jsx)("span", { children: "Ideal Ingredients" })] }), (0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['ingredients-grid'], children: (0, cookingMethodTips_1.getIdealIngredients)(method.name).slice(0, 8).map((ingredient, index) => ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['ingredient-item'], children: ingredient }, index))) })] })] }))] }, method.id));
                        }) }), isMainPageVersion && methods.length > maxDisplayed ? ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['show-more-container'], children: (0, jsx_runtime_1.jsxs)("button", { className: CookingMethods_module_css_1.default['view-more-button'], onClick: handleViewMore, children: ["View All Methods (", methods.length, " total) ", (0, jsx_runtime_1.jsx)(lucide_react_1.ExternalLink, { size: 16 })] }) })) : (methods.length > 8 && !isMainPageVersion && ((0, jsx_runtime_1.jsx)("div", { className: CookingMethods_module_css_1.default['show-more-container'], children: (0, jsx_runtime_1.jsx)("button", { className: CookingMethods_module_css_1.default['show-more-button'], onClick: () => setShowAllMethods(!showAllMethods), children: showAllMethods ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: ["Show Less ", (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { size: 16 })] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: ["Show More (", methods.length - 8, " more) ", (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { size: 16 })] })) }) })))] }))] }));
};
exports.CookingMethodsSection = CookingMethodsSection;
exports.default = exports.CookingMethodsSection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL0Nvb2tpbmdNZXRob2RzU2VjdGlvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsK0NBQTREO0FBQzVELCtDQUEyTDtBQUMzTCxnREFBNEM7QUFDNUMsbUNBQStDO0FBQy9DLHVFQUFvRTtBQUNwRSw0RkFBaUQ7QUFDakQsaUVBQWtGO0FBQ2xGLGtFQUErRDtBQW1EeEQsTUFBTSxxQkFBcUIsR0FBeUMsQ0FBQyxFQUMxRSxPQUFPLEVBQUUsV0FBVyxFQUNwQixjQUFjLEVBQ2QsZ0JBQWdCLEVBQ2hCLFVBQVUsR0FBRyxJQUFJLEVBQ2pCLGlCQUFpQixHQUFHLEtBQUssRUFDekIsWUFBWSxHQUFHLENBQUMsRUFDaEIsVUFBVSxFQUNWLGlCQUFpQixHQUFHLEtBQUssR0FDMUIsRUFBRSxFQUFFO0lBQ0gsTUFBTSxNQUFNLEdBQUcsSUFBQSxzQkFBUyxHQUFFLENBQUM7SUFDM0IsTUFBTSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUNoRSxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUEwQixFQUFFLENBQUMsQ0FBQztJQUNwRixNQUFNLENBQUMsb0JBQW9CLEVBQUUsdUJBQXVCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDeEUsTUFBTSxDQUFDLGdCQUFnQixFQUFFLG1CQUFtQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdELE1BQU0sQ0FBQyx1QkFBdUIsRUFBRSwwQkFBMEIsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBeUIsRUFBRSxDQUFDLENBQUM7SUFDbkcsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWdC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QUNQLENBQUE7eUJBQUEsQ0FBQyxHQUNFLEVBR0wsaUJBQWlCLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQ3BELGdDQUFLLFNBQVMsRUFBRSxtQ0FBTSxDQUFDLHFCQUFxQixDQUFDLFlBQzNDLG9DQUNFLFNBQVMsRUFBRSxtQ0FBTSxDQUFDLGtCQUFrQixDQUFDLEVBQ3JDLE9BQU8sRUFBRSxjQUFjLG1DQUVKLE9BQU8sQ0FBQyxNQUFNLGNBQVMsdUJBQUMsMkJBQVksSUFBQyxJQUFJLEVBQUUsRUFBRSxHQUFJLElBQzdELEdBQ0wsQ0FDUCxDQUFDLENBQUMsQ0FBQyxDQUNGLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLElBQUksQ0FDMUMsZ0NBQUssU0FBUyxFQUFFLG1DQUFNLENBQUMscUJBQXFCLENBQUMsWUFDM0MsbUNBQ0UsU0FBUyxFQUFFLG1DQUFNLENBQUMsa0JBQWtCLENBQUMsRUFDckMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUMsY0FBYyxDQUFDLFlBRWhELGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FDaEIsMkVBQVksdUJBQUMsd0JBQVMsSUFBQyxJQUFJLEVBQUUsRUFBRSxHQUFJLElBQUcsQ0FDdkMsQ0FBQyxDQUFDLENBQUMsQ0FDRiw0RUFBYyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsYUFBUSx1QkFBQywwQkFBVyxJQUFDLElBQUksRUFBRSxFQUFFLEdBQUksSUFBRyxDQUNyRSxHQUNNLEdBQ0wsQ0FDUCxDQUNGLElBQ0csQ0FDUCxJQUNHLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQXR6QlcsUUFBQSxxQkFBcUIseUJBc3pCaEM7QUFFRixrQkFBZSw2QkFBcUIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL2NvbXBvbmVudHMvQ29va2luZ01ldGhvZHNTZWN0aW9uLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENoZXZyb25Eb3duLCBDaGV2cm9uVXAsIEdsb2JlLCBGbGFtZSwgRHJvcGxldHMsIFdpbmQsIE1vdW50YWluLCBTZWFyY2gsIEFycm93VXAsIEFycm93RG93biwgWmFwLCBTcGFya2xlcywgTWludXMsIEluZm8sIExpc3QsIFRodW1ic1VwLCBDbG9jaywgRXh0ZXJuYWxMaW5rIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgeyB1c2VJbmdyZWRpZW50TWFwcGluZyB9IGZyb20gJ0AvaG9va3MnO1xuaW1wb3J0IHsgdXNlQXN0cm9sb2dpY2FsU3RhdGUgfSBmcm9tICdAL2hvb2tzL3VzZUFzdHJvbG9naWNhbFN0YXRlJztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9Db29raW5nTWV0aG9kcy5tb2R1bGUuY3NzJztcbmltcG9ydCB7IGdldFRlY2huaWNhbFRpcHMsIGdldElkZWFsSW5ncmVkaWVudHMgfSBmcm9tICdAL3V0aWxzL2Nvb2tpbmdNZXRob2RUaXBzJztcbmltcG9ydCB7IGNvb2tpbmdNZXRob2RzIH0gZnJvbSAnQC9kYXRhL2Nvb2tpbmcvY29va2luZ01ldGhvZHMnO1xuXG4vLyBEZWZpbmUgcHJvcGVyIHR5cGVzIGZvciB0aGUgbWV0aG9kc1xuaW50ZXJmYWNlIENvb2tpbmdNZXRob2Qge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHNjb3JlPzogbnVtYmVyO1xuICBjdWx0dXJhbE9yaWdpbj86IHN0cmluZztcbiAgdmFyaWF0aW9ucz86IENvb2tpbmdNZXRob2RbXTtcbiAgZWxlbWVudGFsRWZmZWN0Pzoge1xuICAgIEZpcmU6IG51bWJlcjtcbiAgICBXYXRlcjogbnVtYmVyO1xuICAgIEVhcnRoOiBudW1iZXI7XG4gICAgQWlyOiBudW1iZXI7XG4gIH07XG4gIGR1cmF0aW9uPzoge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICB9O1xuICBzdWl0YWJsZV9mb3I/OiBzdHJpbmdbXTtcbiAgYmVuZWZpdHM/OiBzdHJpbmdbXTtcbiAgYWxjaGVtaWNhbFByb3BlcnRpZXM/OiB7XG4gICAgU3Bpcml0OiBudW1iZXI7XG4gICAgRXNzZW5jZTogbnVtYmVyO1xuICAgIE1hdHRlcjogbnVtYmVyO1xuICAgIFN1YnN0YW5jZTogbnVtYmVyO1xuICB9O1xuICBhc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzPzoge1xuICAgIGRvbWluYW50UGxhbmV0cz86IHN0cmluZ1tdO1xuICAgIGx1bmFyUGhhc2VFZmZlY3Q/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgIGZhdm9yYWJsZVpvZGlhYz86IHN0cmluZ1tdO1xuICB9O1xuICB0aGVybW9keW5hbWljUHJvcGVydGllcz86IHtcbiAgICBoZWF0OiBudW1iZXI7XG4gICAgZW50cm9weTogbnVtYmVyO1xuICAgIHJlYWN0aXZpdHk6IG51bWJlcjtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIENvb2tpbmdNZXRob2RzU2VjdGlvblByb3BzIHtcbiAgbWV0aG9kcz86IENvb2tpbmdNZXRob2RbXTtcbiAgb25TZWxlY3RNZXRob2Q/OiAobWV0aG9kOiBDb29raW5nTWV0aG9kKSA9PiB2b2lkO1xuICBzZWxlY3RlZE1ldGhvZElkPzogc3RyaW5nIHwgbnVsbDtcbiAgc2hvd1RvZ2dsZT86IGJvb2xlYW47XG4gIGluaXRpYWxseUV4cGFuZGVkPzogYm9vbGVhbjtcbiAgbWF4RGlzcGxheWVkPzogbnVtYmVyO1xuICBvblZpZXdNb3JlPzogKCkgPT4gdm9pZDtcbiAgaXNNYWluUGFnZVZlcnNpb24/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgQ29va2luZ01ldGhvZHNTZWN0aW9uOiBSZWFjdC5GQzxDb29raW5nTWV0aG9kc1NlY3Rpb25Qcm9wcz4gPSAoe1xuICBtZXRob2RzOiBwcm9wTWV0aG9kcyxcbiAgb25TZWxlY3RNZXRob2QsXG4gIHNlbGVjdGVkTWV0aG9kSWQsXG4gIHNob3dUb2dnbGUgPSB0cnVlLFxuICBpbml0aWFsbHlFeHBhbmRlZCA9IGZhbHNlLFxuICBtYXhEaXNwbGF5ZWQgPSA2LFxuICBvblZpZXdNb3JlLFxuICBpc01haW5QYWdlVmVyc2lvbiA9IGZhbHNlLFxufSkgPT4ge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2lzRXhwYW5kZWQsIHNldElzRXhwYW5kZWRdID0gdXNlU3RhdGUoaW5pdGlhbGx5RXhwYW5kZWQpO1xuICBjb25zdCBbZXhwYW5kZWRNZXRob2RzLCBzZXRFeHBhbmRlZE1ldGhvZHNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgYm9vbGVhbj4+KHt9KTtcbiAgY29uc3QgW3Nob3dJbmdyZWRpZW50U2VhcmNoLCBzZXRTaG93SW5ncmVkaWVudFNlYXJjaF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWFyY2hJbmdyZWRpZW50LCBzZXRTZWFyY2hJbmdyZWRpZW50XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2luZ3JlZGllbnRDb21wYXRpYmlsaXR5LCBzZXRJbmdyZWRpZW50Q29tcGF0aWJpbGl0eV0gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+Pih7fSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93QWxsTWV0aG9kcywgc2V0U2hvd0FsbE1ldGhvZHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgLy8gR2V0IGFzdHJvbG9naWNhbCBzdGF0ZSBmb3IgdGltaW5nIHJlY29tbWVuZGF0aW9uc1xuICBjb25zdCBhc3Ryb1N0YXRlID0gdXNlQXN0cm9sb2dpY2FsU3RhdGUoKTtcbiAgXG4gIC8vIENvbnZlcnQgY29va2luZyBtZXRob2RzIGRhdGEgdG8gY29tcG9uZW50IGZvcm1hdCBhbmQgYWRkIGFzdHJvbG9naWNhbCBzY29yaW5nXG4gIGNvbnN0IG1ldGhvZHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAocHJvcE1ldGhvZHMgJiYgcHJvcE1ldGhvZHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHByb3BNZXRob2RzO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb252ZXJ0IGZyb20gZGF0YSBmb3JtYXQgdG8gY29tcG9uZW50IGZvcm1hdCB3aXRoIGFzdHJvbG9naWNhbCBzY29yaW5nXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGNvb2tpbmdNZXRob2RzKS5tYXAoKFtrZXksIG1ldGhvZERhdGFdKSA9PiB7XG4gICAgICBjb25zdCBtZXRob2Q6IENvb2tpbmdNZXRob2QgPSB7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IG1ldGhvZERhdGEubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGAke21ldGhvZERhdGEuYmVuZWZpdHMuam9pbignLCAnKX1gLFxuICAgICAgICBlbGVtZW50YWxFZmZlY3Q6IG1ldGhvZERhdGEuZWxlbWVudGFsRWZmZWN0LFxuICAgICAgICBkdXJhdGlvbjogbWV0aG9kRGF0YS5kdXJhdGlvbixcbiAgICAgICAgc3VpdGFibGVfZm9yOiBtZXRob2REYXRhLnN1aXRhYmxlX2ZvcixcbiAgICAgICAgYmVuZWZpdHM6IG1ldGhvZERhdGEuYmVuZWZpdHMsXG4gICAgICAgIGFsY2hlbWljYWxQcm9wZXJ0aWVzOiBtZXRob2REYXRhLmFsY2hlbWljYWxQcm9wZXJ0aWVzLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzOiBtZXRob2REYXRhLmFzdHJvbG9naWNhbEluZmx1ZW5jZXMsXG4gICAgICAgIHRoZXJtb2R5bmFtaWNQcm9wZXJ0aWVzOiBtZXRob2REYXRhLnRoZXJtb2R5bmFtaWNQcm9wZXJ0aWVzLFxuICAgICAgICBzY29yZTogY2FsY3VsYXRlQXN0cm9sb2dpY2FsU2NvcmUobWV0aG9kRGF0YSwgYXN0cm9TdGF0ZSlcbiAgICAgIH07XG4gICAgICByZXR1cm4gbWV0aG9kO1xuICAgIH0pO1xuICB9LCBbcHJvcE1ldGhvZHMsIGFzdHJvU3RhdGVdKTtcbiAgXG4gIC8vIENhbGN1bGF0ZSBhc3Ryb2xvZ2ljYWwgc2NvcmUgZm9yIGEgY29va2luZyBtZXRob2RcbiAgY29uc3QgY2FsY3VsYXRlQXN0cm9sb2dpY2FsU2NvcmUgPSAobWV0aG9kRGF0YTogYW55LCBhc3Ryb1N0YXRlOiBhbnkpOiBudW1iZXIgPT4ge1xuICAgIGxldCBzY29yZSA9IDAuNTsgLy8gQmFzZSBzY29yZVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBQbGFuZXRhcnkgYWxpZ25tZW50IGJvbnVzXG4gICAgICBpZiAobWV0aG9kRGF0YS5hc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzPy5kb21pbmFudFBsYW5ldHMgJiYgYXN0cm9TdGF0ZS5hY3RpdmVQbGFuZXRzKSB7XG4gICAgICAgIGNvbnN0IGFsaWduZWRQbGFuZXRzID0gbWV0aG9kRGF0YS5hc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzLmRvbWluYW50UGxhbmV0cy5maWx0ZXIoXG4gICAgICAgICAgKHBsYW5ldDogc3RyaW5nKSA9PiBhc3Ryb1N0YXRlLmFjdGl2ZVBsYW5ldHMuaW5jbHVkZXMocGxhbmV0LnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICk7XG4gICAgICAgIHNjb3JlICs9IChhbGlnbmVkUGxhbmV0cy5sZW5ndGggLyBtZXRob2REYXRhLmFzdHJvbG9naWNhbEluZmx1ZW5jZXMuZG9taW5hbnRQbGFuZXRzLmxlbmd0aCkgKiAwLjM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEx1bmFyIHBoYXNlIGJvbnVzXG4gICAgICBpZiAobWV0aG9kRGF0YS5hc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzPy5sdW5hclBoYXNlRWZmZWN0ICYmIGFzdHJvU3RhdGUubHVuYXJQaGFzZSkge1xuICAgICAgICBjb25zdCBwaGFzZUVmZmVjdCA9IG1ldGhvZERhdGEuYXN0cm9sb2dpY2FsSW5mbHVlbmNlcy5sdW5hclBoYXNlRWZmZWN0W2FzdHJvU3RhdGUubHVuYXJQaGFzZV07XG4gICAgICAgIGlmIChwaGFzZUVmZmVjdCkge1xuICAgICAgICAgIHNjb3JlICs9IChwaGFzZUVmZmVjdCAtIDAuNSkgKiAwLjI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGxhbmV0YXJ5IGhvdXIgYm9udXNcbiAgICAgIGlmIChtZXRob2REYXRhLmFzdHJvbG9naWNhbEluZmx1ZW5jZXM/LmRvbWluYW50UGxhbmV0cyAmJiBhc3Ryb1N0YXRlLmN1cnJlbnRQbGFuZXRhcnlIb3VyKSB7XG4gICAgICAgIGNvbnN0IGlzSG91ckFsaWduZWQgPSBtZXRob2REYXRhLmFzdHJvbG9naWNhbEluZmx1ZW5jZXMuZG9taW5hbnRQbGFuZXRzLnNvbWUoXG4gICAgICAgICAgKHBsYW5ldDogc3RyaW5nKSA9PiBwbGFuZXQudG9Mb3dlckNhc2UoKSA9PT0gYXN0cm9TdGF0ZS5jdXJyZW50UGxhbmV0YXJ5SG91cj8udG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgICBpZiAoaXNIb3VyQWxpZ25lZCkge1xuICAgICAgICAgIHNjb3JlICs9IDAuMTU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVGhlcm1vZHluYW1pYyBlZmZpY2llbmN5IGJvbnVzXG4gICAgICBpZiAobWV0aG9kRGF0YS50aGVybW9keW5hbWljUHJvcGVydGllcykge1xuICAgICAgICBjb25zdCBlZmZpY2llbmN5ID0gKG1ldGhvZERhdGEudGhlcm1vZHluYW1pY1Byb3BlcnRpZXMuaGVhdCArIG1ldGhvZERhdGEudGhlcm1vZHluYW1pY1Byb3BlcnRpZXMucmVhY3Rpdml0eSkgLyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKDEgKyBtZXRob2REYXRhLnRoZXJtb2R5bmFtaWNQcm9wZXJ0aWVzLmVudHJvcHkpO1xuICAgICAgICBzY29yZSArPSAoZWZmaWNpZW5jeSAtIDAuNSkgKiAwLjE7XG4gICAgICB9XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjYWxjdWxhdGluZyBhc3Ryb2xvZ2ljYWwgc2NvcmU6JywgZXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTWF0aC5taW4oMC45NSwgTWF0aC5tYXgoMC4zNSwgc2NvcmUpKTtcbiAgfTtcbiAgXG4gIC8vIEdldCB0b3AgbWV0aG9kIGJhc2VkIG9uIHNjb3JlXG4gIGNvbnN0IHRvcE1ldGhvZCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghbWV0aG9kcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBbLi4ubWV0aG9kc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3Qgc2NvcmVBID0gYS5zY29yZSAhPT0gdW5kZWZpbmVkID8gYS5zY29yZSA6IDA7XG4gICAgICBjb25zdCBzY29yZUIgPSBiLnNjb3JlICE9PSB1bmRlZmluZWQgPyBiLnNjb3JlIDogMDtcbiAgICAgIHJldHVybiBzY29yZUIgLSBzY29yZUE7XG4gICAgfSlbMF07XG4gIH0sIFttZXRob2RzXSk7XG4gIFxuICAvLyBTb3J0IG1ldGhvZHMgYnkgc2NvcmUgYW5kIGxpbWl0IGRpc3BsYXkgZm9yIG1haW4gcGFnZSB2ZXJzaW9uXG4gIGNvbnN0IGRpc3BsYXlNZXRob2RzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgc29ydGVkTWV0aG9kcyA9IFsuLi5tZXRob2RzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBzY29yZUEgPSBhLnNjb3JlICE9PSB1bmRlZmluZWQgPyBhLnNjb3JlIDogMDtcbiAgICAgIGNvbnN0IHNjb3JlQiA9IGIuc2NvcmUgIT09IHVuZGVmaW5lZCA/IGIuc2NvcmUgOiAwO1xuICAgICAgcmV0dXJuIHNjb3JlQiAtIHNjb3JlQTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGb3IgbWFpbiBwYWdlIHZlcnNpb24sIGxpbWl0IHRvIG1heERpc3BsYXllZFxuICAgIGlmIChpc01haW5QYWdlVmVyc2lvbikge1xuICAgICAgcmV0dXJuIHNvcnRlZE1ldGhvZHMuc2xpY2UoMCwgbWF4RGlzcGxheWVkKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNob3dBbGxNZXRob2RzID8gc29ydGVkTWV0aG9kcyA6IHNvcnRlZE1ldGhvZHMuc2xpY2UoMCwgOCk7XG4gIH0sIFttZXRob2RzLCBzaG93QWxsTWV0aG9kcywgaXNNYWluUGFnZVZlcnNpb24sIG1heERpc3BsYXllZF0pO1xuICBcbiAgLy8gVXNlIG91ciBuZXcgaW5ncmVkaWVudCBtYXBwaW5nIGhvb2tcbiAgY29uc3QgeyBzdWdnZXN0QWx0ZXJuYXRpdmVzLCBjYWxjdWxhdGVDb21wYXRpYmlsaXR5LCBpc0xvYWRpbmc6IGluZ3JlZGllbnRNYXBwaW5nTG9hZGluZywgZXJyb3I6IGluZ3JlZGllbnRNYXBwaW5nRXJyb3IgfSA9IHVzZUluZ3JlZGllbnRNYXBwaW5nKCk7XG4gIFxuICAvLyBBdXRvLWV4cGFuZCB0aGUgc2VjdGlvbiBpZiB3ZSBoYXZlIG1ldGhvZHMgYW5kIGEgcHJlLXNlbGVjdGVkIG1ldGhvZFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtZXRob2RzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEFsd2F5cyBrZWVwIGV4cGFuZGVkIGlmIOKJpDUgbWV0aG9kc1xuICAgICAgaWYgKG1ldGhvZHMubGVuZ3RoIDw9IDUpIHtcbiAgICAgICAgc2V0SXNFeHBhbmRlZCh0cnVlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWxzbyBleHBhbmQgaWYgdGhlcmUncyBhIHNlbGVjdGVkIG1ldGhvZFxuICAgICAgaWYgKHNlbGVjdGVkTWV0aG9kSWQpIHtcbiAgICAgICAgc2V0SXNFeHBhbmRlZCh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbmQgdGhlIHNlbGVjdGVkIG1ldGhvZFxuICAgICAgICBjb25zdCBzZWxlY3RlZE1ldGhvZCA9IG1ldGhvZHMuZmluZChtID0+IG0uaWQgPT09IHNlbGVjdGVkTWV0aG9kSWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdGVkTWV0aG9kKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHNlbGVjdGVkIG1ldGhvZCBoYXMgdmFyaWF0aW9ucywgZXhwYW5kIGl0XG4gICAgICAgICAgaWYgKHNlbGVjdGVkTWV0aG9kLnZhcmlhdGlvbnM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgc2V0RXhwYW5kZWRNZXRob2RzKHByZXYgPT4gKHtcbiAgICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgICAgW3NlbGVjdGVkTWV0aG9kSWRdOiB0cnVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSB2YXJpYXRpb24sIGZpbmQgYW5kIGV4cGFuZCBpdHMgcGFyZW50IG1ldGhvZFxuICAgICAgICAgIGNvbnN0IHBhcmVudE1ldGhvZCA9IG1ldGhvZHMuZmluZChtID0+IFxuICAgICAgICAgICAgbS52YXJpYXRpb25zPy5zb21lKHYgPT4gdi5pZCA9PT0gc2VsZWN0ZWRNZXRob2RJZClcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChwYXJlbnRNZXRob2QpIHtcbiAgICAgICAgICAgIHNldEV4cGFuZGVkTWV0aG9kcyhwcmV2ID0+ICh7XG4gICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgIFtwYXJlbnRNZXRob2QuaWRdOiB0cnVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbbWV0aG9kcywgc2VsZWN0ZWRNZXRob2RJZF0pO1xuICBcbiAgLy8gSGFuZGxlIGluZ3JlZGllbnQgY29tcGF0aWJpbGl0eSBjYWxjdWxhdGlvblxuICBjb25zdCBjYWxjdWxhdGVJbmdyZWRpZW50Q29tcGF0aWJpbGl0eSA9ICgpID0+IHtcbiAgICBpZiAoIXNlYXJjaEluZ3JlZGllbnQudHJpbSgpKSByZXR1cm47XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGNvbXBhdGliaWxpdHkgd2l0aCBlYWNoIGNvb2tpbmcgbWV0aG9kIGJhc2VkIG9uIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgY29tcGF0aWJpbGl0eVJlc3VsdHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBcbiAgICBtZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgIGlmIChtZXRob2QuZWxlbWVudGFsRWZmZWN0KSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbXBhdGliaWxpdHkgb2JqZWN0IGZyb20gbWV0aG9kJ3MgZWxlbWVudGFsIGVmZmVjdFxuICAgICAgICBjb25zdCBtZXRob2RFbGVtZW50YWwgPSB7XG4gICAgICAgICAgRmlyZTogbWV0aG9kLmVsZW1lbnRhbEVmZmVjdC5GaXJlIHx8IDAsXG4gICAgICAgICAgV2F0ZXI6IG1ldGhvZC5lbGVtZW50YWxFZmZlY3QuV2F0ZXIgfHwgMCxcbiAgICAgICAgICBFYXJ0aDogbWV0aG9kLmVsZW1lbnRhbEVmZmVjdC5FYXJ0aCB8fCAwLFxuICAgICAgICAgIEFpcjogbWV0aG9kLmVsZW1lbnRhbEVmZmVjdC5BaXIgfHwgMFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGNvbXBhdGliaWxpdHkgYmV0d2VlbiBpbmdyZWRpZW50IGFuZCBjb29raW5nIG1ldGhvZFxuICAgICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVDb21wYXRpYmlsaXR5KHNlYXJjaEluZ3JlZGllbnQsIHtcbiAgICAgICAgICBuYW1lOiBtZXRob2QubmFtZSxcbiAgICAgICAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiBtZXRob2RFbGVtZW50YWwsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdjb29raW5nX21ldGhvZCdcbiAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgY29tcGF0aWJpbGl0eVJlc3VsdHNbbWV0aG9kLmlkXSA9IHJlc3VsdC5jb21wYXRpYmlsaXR5O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBbHNvIGNhbGN1bGF0ZSBmb3IgdmFyaWF0aW9ucyBpZiB0aGV5IGV4aXN0XG4gICAgICAgIGlmIChtZXRob2QudmFyaWF0aW9ucykge1xuICAgICAgICAgIG1ldGhvZC52YXJpYXRpb25zLmZvckVhY2godmFyaWF0aW9uID0+IHtcbiAgICAgICAgICAgIC8vIFVzZSBwYXJlbnQgbWV0aG9kJ3MgZWxlbWVudGFsIGVmZmVjdCBpZiB2YXJpYXRpb24gZG9lc24ndCBoYXZlIG9uZVxuICAgICAgICAgICAgY29uc3QgdmFyaWF0aW9uRWxlbWVudGFsID0gdmFyaWF0aW9uLmVsZW1lbnRhbEVmZmVjdCB8fCBtZXRob2QuZWxlbWVudGFsRWZmZWN0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodmFyaWF0aW9uRWxlbWVudGFsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhcmlhdGlvblJlc3VsdCA9IGNhbGN1bGF0ZUNvbXBhdGliaWxpdHkoc2VhcmNoSW5ncmVkaWVudCwge1xuICAgICAgICAgICAgICAgIG5hbWU6IHZhcmlhdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IHZhcmlhdGlvbkVsZW1lbnRhbCxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ2Nvb2tpbmdfbWV0aG9kJ1xuICAgICAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAodmFyaWF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb21wYXRpYmlsaXR5UmVzdWx0c1t2YXJpYXRpb24uaWRdID0gdmFyaWF0aW9uUmVzdWx0LmNvbXBhdGliaWxpdHk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNldEluZ3JlZGllbnRDb21wYXRpYmlsaXR5KGNvbXBhdGliaWxpdHlSZXN1bHRzKTtcbiAgfTtcbiAgXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZGVkID0gKCkgPT4ge1xuICAgIC8vIE9ubHkgYWxsb3cgdG9nZ2xpbmcgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiA1IG1ldGhvZHNcbiAgICBpZiAobWV0aG9kcy5sZW5ndGggPiA1KSB7XG4gICAgICBzZXRJc0V4cGFuZGVkKHByZXYgPT4gIXByZXYpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IHRvZ2dsZU1ldGhvZEV4cGFuZGVkID0gKG1ldGhvZElkOiBzdHJpbmcsIGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBQcmV2ZW50IHRoZSBjbGljayBmcm9tIHNlbGVjdGluZyB0aGUgbWV0aG9kXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXRFeHBhbmRlZE1ldGhvZHMocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIFttZXRob2RJZF06ICFwcmV2W21ldGhvZElkXVxuICAgIH0pKTtcbiAgfTtcbiAgXG4gIC8vIFRvZ2dsZSBpbmdyZWRpZW50IHNlYXJjaCBzZWN0aW9uXG4gIGNvbnN0IHRvZ2dsZUluZ3JlZGllbnRTZWFyY2ggPSAoKSA9PiB7XG4gICAgc2V0U2hvd0luZ3JlZGllbnRTZWFyY2gocHJldiA9PiAhcHJldik7XG4gICAgLy8gQ2xlYXIgcmVzdWx0cyB3aGVuIGhpZGluZ1xuICAgIGlmIChzaG93SW5ncmVkaWVudFNlYXJjaCkge1xuICAgICAgc2V0SW5ncmVkaWVudENvbXBhdGliaWxpdHkoe30pO1xuICAgICAgc2V0U2VhcmNoSW5ncmVkaWVudCgnJyk7XG4gICAgfVxuICB9O1xuICBcbiAgLy8gSGFuZGxlIG5hdmlnYXRpb24gdG8gZnVsbCBjb29raW5nIG1ldGhvZHMgcGFnZVxuICBjb25zdCBoYW5kbGVWaWV3TW9yZSA9ICgpID0+IHtcbiAgICBpZiAob25WaWV3TW9yZSkge1xuICAgICAgb25WaWV3TW9yZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWZhdWx0IG5hdmlnYXRpb24gdG8gY29va2luZyBtZXRob2RzIHBhZ2VcbiAgICAgIC8vIFByZXNlcnZlIHNlbGVjdGVkIG1ldGhvZCBjb250ZXh0IGluIFVSTCBwYXJhbXNcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgIGlmIChzZWxlY3RlZE1ldGhvZElkKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3NlbGVjdGVkJywgc2VsZWN0ZWRNZXRob2RJZCk7XG4gICAgICB9XG4gICAgICBjb25zdCB1cmwgPSBgL2Nvb2tpbmctbWV0aG9kcyR7cGFyYW1zLnRvU3RyaW5nKCkgPyBgPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCA6ICcnfWA7XG4gICAgICByb3V0ZXIucHVzaCh1cmwpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEhhbmRsZSBtZXRob2Qgc2VsZWN0aW9uIHdpdGggZW5oYW5jZWQgbmF2aWdhdGlvbiBjb250ZXh0IHByZXNlcnZhdGlvblxuICBjb25zdCBoYW5kbGVNZXRob2RTZWxlY3QgPSAobWV0aG9kOiBDb29raW5nTWV0aG9kKSA9PiB7XG4gICAgaWYgKG9uU2VsZWN0TWV0aG9kKSB7XG4gICAgICBvblNlbGVjdE1ldGhvZChtZXRob2QpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgbWFpbiBwYWdlIHZlcnNpb24sIHByZXNlcnZlIGNvbnRleHQgdXNpbmcgZW5oYW5jZWQgc3RhdGUgcHJlc2VydmF0aW9uXG4gICAgaWYgKGlzTWFpblBhZ2VWZXJzaW9uKSB7XG4gICAgICAvLyBJbXBvcnQgYW5kIHVzZSB0aGUgc3RhdGUgcHJlc2VydmF0aW9uIHV0aWxpdHlcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2F2ZU5hdmlnYXRpb25TdGF0ZSB9ID0gcmVxdWlyZSgnQC91dGlscy9zdGF0ZVByZXNlcnZhdGlvbicpO1xuICAgICAgICBjb25zdCB7IGdldE5hdmlnYXRpb25TdGF0ZSB9ID0gcmVxdWlyZSgnQC91dGlscy9zdGF0ZVByZXNlcnZhdGlvbicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gZ2V0TmF2aWdhdGlvblN0YXRlKCk7XG4gICAgICAgIHNhdmVOYXZpZ2F0aW9uU3RhdGUoe1xuICAgICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICBzZWxlY3RlZENvb2tpbmdNZXRob2Q6IHtcbiAgICAgICAgICAgIGlkOiBtZXRob2QuaWQsXG4gICAgICAgICAgICBuYW1lOiBtZXRob2QubmFtZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzdG9yZSBzZWxlY3RlZCBtZXRob2QgdXNpbmcgZW5oYW5jZWQgc3RhdGUgcHJlc2VydmF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIHNlc3Npb25TdG9yYWdlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWRDb29raW5nTWV0aG9kJywgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgaWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgIG5hbWU6IG1ldGhvZC5uYW1lLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9IGNhdGNoIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc3RvcmUgc2VsZWN0ZWQgbWV0aG9kIGluIHNlc3Npb24gc3RvcmFnZTonLCBmYWxsYmFja0Vycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgXG4gIC8vIENhbGN1bGF0ZSBlbGVtZW50YWwgdHJhbnNmb3JtYXRpb24gY2FwYWNpdHkgZnJvbSBhbGNoZW1pY2FsIHByb3BlcnRpZXNcbiAgY29uc3QgZ2V0RWxlbWVudGFsVHJhbnNmb3JtYXRpb25zID0gKG1ldGhvZDogQ29va2luZ01ldGhvZCkgPT4ge1xuICAgIGNvbnN0IHRyYW5zZm9ybWF0aW9ucyA9IHtcbiAgICAgIEZpcmU6IDAsXG4gICAgICBXYXRlcjogMCxcbiAgICAgIEVhcnRoOiAwLFxuICAgICAgQWlyOiAwXG4gICAgfTtcblxuICAgIC8vIElmIG1ldGhvZCBoYXMgYWxjaGVtaWNhbCBwcm9wZXJ0aWVzLCB1c2UgdGhlbSB0byBjYWxjdWxhdGUgdHJhbnNmb3JtYXRpb25zXG4gICAgaWYgKG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcykge1xuICAgICAgLy8gU3Bpcml0IHByaW1hcmlseSBpbmZsdWVuY2VzIEZpcmUgYW5kIEFpclxuICAgICAgaWYgKG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcy5TcGlyaXQgPiAwKSB7XG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucy5GaXJlICs9IG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcy5TcGlyaXQgKiAwLjY7XG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucy5BaXIgKz0gbWV0aG9kLmFsY2hlbWljYWxQcm9wZXJ0aWVzLlNwaXJpdCAqIDAuNDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRXNzZW5jZSBwcmltYXJpbHkgaW5mbHVlbmNlcyBXYXRlciBhbmQgQWlyXG4gICAgICBpZiAobWV0aG9kLmFsY2hlbWljYWxQcm9wZXJ0aWVzLkVzc2VuY2UgPiAwKSB7XG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucy5XYXRlciArPSBtZXRob2QuYWxjaGVtaWNhbFByb3BlcnRpZXMuRXNzZW5jZSAqIDAuNjtcbiAgICAgICAgdHJhbnNmb3JtYXRpb25zLkFpciArPSBtZXRob2QuYWxjaGVtaWNhbFByb3BlcnRpZXMuRXNzZW5jZSAqIDAuNDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTWF0dGVyIHByaW1hcmlseSBpbmZsdWVuY2VzIEVhcnRoIGFuZCBXYXRlclxuICAgICAgaWYgKG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcy5NYXR0ZXIgPiAwKSB7XG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucy5FYXJ0aCArPSBtZXRob2QuYWxjaGVtaWNhbFByb3BlcnRpZXMuTWF0dGVyICogMC42O1xuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMuV2F0ZXIgKz0gbWV0aG9kLmFsY2hlbWljYWxQcm9wZXJ0aWVzLk1hdHRlciAqIDAuNDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3Vic3RhbmNlIHByaW1hcmlseSBpbmZsdWVuY2VzIEVhcnRoIGFuZCBGaXJlXG4gICAgICBpZiAobWV0aG9kLmFsY2hlbWljYWxQcm9wZXJ0aWVzLlN1YnN0YW5jZSA+IDApIHtcbiAgICAgICAgdHJhbnNmb3JtYXRpb25zLkVhcnRoICs9IG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcy5TdWJzdGFuY2UgKiAwLjY7XG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucy5GaXJlICs9IG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcy5TdWJzdGFuY2UgKiAwLjQ7XG4gICAgICB9XG4gICAgfSBcbiAgICAvLyBJZiBubyBhbGNoZW1pY2FsIHByb3BlcnRpZXMsIHVzZSBlbGVtZW50YWxFZmZlY3QgYXMgZGlyZWN0aW9uYWwgaW5kaWNhdG9yc1xuICAgIGVsc2UgaWYgKG1ldGhvZC5lbGVtZW50YWxFZmZlY3QpIHtcbiAgICAgIHRyYW5zZm9ybWF0aW9ucy5GaXJlID0gbWV0aG9kLmVsZW1lbnRhbEVmZmVjdC5GaXJlO1xuICAgICAgdHJhbnNmb3JtYXRpb25zLldhdGVyID0gbWV0aG9kLmVsZW1lbnRhbEVmZmVjdC5XYXRlcjtcbiAgICAgIHRyYW5zZm9ybWF0aW9ucy5FYXJ0aCA9IG1ldGhvZC5lbGVtZW50YWxFZmZlY3QuRWFydGg7XG4gICAgICB0cmFuc2Zvcm1hdGlvbnMuQWlyID0gbWV0aG9kLmVsZW1lbnRhbEVmZmVjdC5BaXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYW5zZm9ybWF0aW9ucztcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgYW4gZWxlbWVudCBpcyBpbmNyZWFzZWQgb3IgZGVjcmVhc2VkIGJ5IHRoZSBtZXRob2RcbiAgY29uc3QgZ2V0RWxlbWVudGFsRGlyZWN0aW9uID0gKHZhbHVlOiBudW1iZXIpOiB7ZGlyZWN0aW9uOiAnaW5jcmVhc2UnIHwgJ2RlY3JlYXNlJyB8ICduZXV0cmFsJywgaW50ZW5zaXR5OiBudW1iZXJ9ID0+IHtcbiAgICBpZiAodmFsdWUgPiAwLjUpIHJldHVybiB7IGRpcmVjdGlvbjogJ2luY3JlYXNlJywgaW50ZW5zaXR5OiAodmFsdWUgLSAwLjUpICogMiB9O1xuICAgIGlmICh2YWx1ZSA8IDAuNSkgcmV0dXJuIHsgZGlyZWN0aW9uOiAnZGVjcmVhc2UnLCBpbnRlbnNpdHk6ICgwLjUgLSB2YWx1ZSkgKiAyIH07XG4gICAgcmV0dXJuIHsgZGlyZWN0aW9uOiAnbmV1dHJhbCcsIGludGVuc2l0eTogMCB9O1xuICB9O1xuXG4gIC8vIEdldCBhbGNoZW1pY2FsIGVzc2VuY2UgbGFiZWwgZnJvbSBwcm9wZXJ0aWVzXG4gIGNvbnN0IGdldEFsY2hlbWljYWxMYWJlbCA9IChtZXRob2Q6IENvb2tpbmdNZXRob2QpOiB7IHByaW1hcnk6IHN0cmluZywgc2Vjb25kYXJ5OiBzdHJpbmcgfSB8IG51bGwgPT4ge1xuICAgIGlmICghbWV0aG9kLmFsY2hlbWljYWxQcm9wZXJ0aWVzKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBjb25zdCB7IFNwaXJpdCwgRXNzZW5jZSwgTWF0dGVyLCBTdWJzdGFuY2UgfSA9IG1ldGhvZC5hbGNoZW1pY2FsUHJvcGVydGllcztcbiAgICBjb25zdCBhbGNoZW1pY2FsID0gW1xuICAgICAgeyBuYW1lOiAnU3Bpcml0JywgdmFsdWU6IFNwaXJpdCB8fCAwIH0sXG4gICAgICB7IG5hbWU6ICdFc3NlbmNlJywgdmFsdWU6IEVzc2VuY2UgfHwgMCB9LFxuICAgICAgeyBuYW1lOiAnTWF0dGVyJywgdmFsdWU6IE1hdHRlciB8fCAwIH0sXG4gICAgICB7IG5hbWU6ICdTdWJzdGFuY2UnLCB2YWx1ZTogU3Vic3RhbmNlIHx8IDAgfVxuICAgIF0uc29ydCgoYSwgYikgPT4gYi52YWx1ZSAtIGEudmFsdWUpO1xuICAgIFxuICAgIGlmIChhbGNoZW1pY2FsWzBdLnZhbHVlID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcHJpbWFyeTogYWxjaGVtaWNhbFswXS5uYW1lLFxuICAgICAgc2Vjb25kYXJ5OiBhbGNoZW1pY2FsWzFdLm5hbWVcbiAgICB9O1xuICB9O1xuICBcbiAgLy8gTWFwIGNvbXBhdGliaWxpdHkgc2NvcmUgdG8gY29sb3IgYW5kIGxhYmVsXG4gIGNvbnN0IGdldENvbXBhdGliaWxpdHlMYWJlbCA9IChzY29yZTogbnVtYmVyKTogeyBsYWJlbDogc3RyaW5nOyBjbGFzc05hbWU6IHN0cmluZyB9ID0+IHtcbiAgICBpZiAoc2NvcmUgPj0gMC44KSByZXR1cm4geyBsYWJlbDogJ0V4Y2VsbGVudCcsIGNsYXNzTmFtZTogJ2NvbXBhdGliaWxpdHktZXhjZWxsZW50JyB9O1xuICAgIGlmIChzY29yZSA+PSAwLjYpIHJldHVybiB7IGxhYmVsOiAnR29vZCcsIGNsYXNzTmFtZTogJ2NvbXBhdGliaWxpdHktZ29vZCcgfTtcbiAgICBpZiAoc2NvcmUgPj0gMC40KSByZXR1cm4geyBsYWJlbDogJ0ZhaXInLCBjbGFzc05hbWU6ICdjb21wYXRpYmlsaXR5LWZhaXInIH07XG4gICAgaWYgKHNjb3JlID49IDAuMikgcmV0dXJuIHsgbGFiZWw6ICdQb29yJywgY2xhc3NOYW1lOiAnY29tcGF0aWJpbGl0eS1wb29yJyB9O1xuICAgIHJldHVybiB7IGxhYmVsOiAnSW5jb21wYXRpYmxlJywgY2xhc3NOYW1lOiAnY29tcGF0aWJpbGl0eS1iYWQnIH07XG4gIH07XG5cbiAgLy8gR2V0IHNjb3JlIGNsYXNzIGZvciBzdHlsaW5nXG4gIGNvbnN0IGdldFNjb3JlQ2xhc3MgPSAoc2NvcmU6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgaWYgKHNjb3JlID49IDAuOCkgcmV0dXJuIHN0eWxlc1snc2NvcmUtZXhjZWxsZW50J107XG4gICAgaWYgKHNjb3JlID49IDAuNikgcmV0dXJuIHN0eWxlc1snc2NvcmUtZ29vZCddO1xuICAgIGlmIChzY29yZSA+PSAwLjQpIHJldHVybiBzdHlsZXNbJ3Njb3JlLWZhaXInXTtcbiAgICBpZiAoc2NvcmUgPj0gMC4yKSByZXR1cm4gc3R5bGVzWydzY29yZS1wb29yJ107XG4gICAgcmV0dXJuIHN0eWxlc1snc2NvcmUtYmFkJ107XG4gIH07XG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2Nvb2tpbmctbWV0aG9kcy1jb250YWluZXInXX0+XG4gICAgICA8ZGl2IFxuICAgICAgICBjbGFzc05hbWU9e2Ake3N0eWxlc1snY29va2luZy1tZXRob2RzLWhlYWRlciddfSAkeyFzaG93VG9nZ2xlID8gc3R5bGVzWyduby10b2dnbGUnXSA6ICcnfWB9IFxuICAgICAgICBvbkNsaWNrPXtzaG93VG9nZ2xlID8gdG9nZ2xlRXhwYW5kZWQgOiB1bmRlZmluZWR9XG4gICAgICA+XG4gICAgICAgIDxoMyBjbGFzc05hbWU9e3N0eWxlcy50aXRsZX0+XG4gICAgICAgICAgPFNwYXJrbGVzIHNpemU9ezE4fSBjbGFzc05hbWU9e3N0eWxlcy50aXRsZUljb259IC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMudGl0bGVUZXh0fT5BbGNoZW1pY2FsIENvb2tpbmcgTWV0aG9kczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy50aXRsZUNvdW50fT4oe21ldGhvZHMubGVuZ3RofSk8L3NwYW4+XG4gICAgICAgIDwvaDM+XG4gICAgICAgIFxuICAgICAgICB7dG9wTWV0aG9kICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWyd0b3AtcmVjb21tZW5kYXRpb24nXX0+XG4gICAgICAgICAgICBUb3A6IDxzcGFuPnt0b3BNZXRob2QubmFtZX08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7LyogQWRkIGluZ3JlZGllbnQgc2VhcmNoIHRvZ2dsZSBidXR0b24gKi99XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtzdHlsZXNbJ2luZ3JlZGllbnQtc2VhcmNoLXRvZ2dsZSddfSAke3Nob3dJbmdyZWRpZW50U2VhcmNoID8gc3R5bGVzLmFjdGl2ZSA6ICcnfWB9XG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0b2dnbGVJbmdyZWRpZW50U2VhcmNoKCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICB0aXRsZT1cIkNoZWNrIGluZ3JlZGllbnQgY29tcGF0aWJpbGl0eVwiXG4gICAgICAgID5cbiAgICAgICAgICA8U2VhcmNoIHNpemU9ezE4fSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgXG4gICAgICAgIHtzaG93VG9nZ2xlICYmIChcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17c3R5bGVzWyd0b2dnbGUtYnV0dG9uJ119PlxuICAgICAgICAgICAge2lzRXhwYW5kZWQgPyA8Q2hldnJvblVwIHNpemU9ezE4fSAvPiA6IDxDaGV2cm9uRG93biBzaXplPXsxOH0gLz59XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgey8qIEluZ3JlZGllbnQgc2VhcmNoIGZvcm0gKi99XG4gICAgICB7c2hvd0luZ3JlZGllbnRTZWFyY2ggJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydpbmdyZWRpZW50LXNlYXJjaC1jb250YWluZXInXX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snc2VhcmNoLWZvcm0nXX0+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIGluZ3JlZGllbnQgbmFtZS4uLlwiXG4gICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hJbmdyZWRpZW50fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlYXJjaEluZ3JlZGllbnQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlc1snaW5ncmVkaWVudC1zZWFyY2gtaW5wdXQnXX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtjYWxjdWxhdGVJbmdyZWRpZW50Q29tcGF0aWJpbGl0eX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZyB8fCAhc2VhcmNoSW5ncmVkaWVudC50cmltKCl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzWydzZWFyY2gtYnV0dG9uJ119XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAnTG9hZGluZy4uLicgOiAnQ2hlY2sgQ29tcGF0aWJpbGl0eSd9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snZXJyb3ItbWVzc2FnZSddfT57ZXJyb3J9PC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICB7T2JqZWN0LmtleXMoaW5ncmVkaWVudENvbXBhdGliaWxpdHkpLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snY29tcGF0aWJpbGl0eS1pbmZvJ119PlxuICAgICAgICAgICAgICA8cD5TaG93aW5nIGNvbXBhdGliaWxpdHkgZm9yOiA8c3Ryb25nPntzZWFyY2hJbmdyZWRpZW50fTwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAge2lzRXhwYW5kZWQgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydjb29raW5nLW1ldGhvZHMtY29udGVudCddfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydtZXRob2RzLWdyaWQnXX0+XG4gICAgICAgICAgICB7ZGlzcGxheU1ldGhvZHMubWFwKChtZXRob2QpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICBrZXk9e21ldGhvZC5pZH0gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzdHlsZXNbJ21ldGhvZC1jYXJkJ119ICR7c2VsZWN0ZWRNZXRob2RJZCA9PT0gbWV0aG9kLmlkID8gc3R5bGVzLnNlbGVjdGVkIDogJyd9YH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVNZXRob2RTZWxlY3QobWV0aG9kKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ21ldGhvZC1oZWFkZXInXX0+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPXtzdHlsZXNbJ21ldGhvZC1uYW1lJ119PnttZXRob2QubmFtZX08L2g0PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7bWV0aG9kLnNjb3JlICE9PSB1bmRlZmluZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7c3R5bGVzWydtZXRob2Qtc2NvcmUnXX0gJHtnZXRTY29yZUNsYXNzKG1ldGhvZC5zY29yZSl9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ3Njb3JlLXZhbHVlJ119PntNYXRoLnJvdW5kKG1ldGhvZC5zY29yZSAqIDEwMCl9JTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydzY29yZS1iYXInXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydzY29yZS1iYXItZmlsbCddfSBzdHlsZT17e3dpZHRoOiBgJHtNYXRoLnJvdW5kKG1ldGhvZC5zY29yZSAqIDEwMCl9JWB9fT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogU2hvdyBpbmdyZWRpZW50IGNvbXBhdGliaWxpdHkgaWYgYXZhaWxhYmxlICovfVxuICAgICAgICAgICAgICAgICAge2luZ3JlZGllbnRDb21wYXRpYmlsaXR5W21ldGhvZC5pZF0gIT09IHVuZGVmaW5lZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtzdHlsZXNbJ2luZ3JlZGllbnQtY29tcGF0aWJpbGl0eSddfSAke3N0eWxlc1tnZXRDb21wYXRpYmlsaXR5TGFiZWwoaW5ncmVkaWVudENvbXBhdGliaWxpdHlbbWV0aG9kLmlkXSkuY2xhc3NOYW1lXX1gfT5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57Z2V0Q29tcGF0aWJpbGl0eUxhYmVsKGluZ3JlZGllbnRDb21wYXRpYmlsaXR5W21ldGhvZC5pZF0pLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1snY29tcGF0aWJpbGl0eS12YWx1ZSddfT57TWF0aC5yb3VuZChpbmdyZWRpZW50Q29tcGF0aWJpbGl0eVttZXRob2QuaWRdICogMTAwKX0lPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2NvbXBhdGliaWxpdHktYmFyJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snY29tcGF0aWJpbGl0eS1iYXItZmlsbCddfSBzdHlsZT17e3dpZHRoOiBgJHtNYXRoLnJvdW5kKGluZ3JlZGllbnRDb21wYXRpYmlsaXR5W21ldGhvZC5pZF0gKiAxMDApfSVgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAge21ldGhvZC52YXJpYXRpb25zICYmIG1ldGhvZC52YXJpYXRpb25zLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzWyd0b2dnbGUtdmFyaWF0aW9ucyddfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB0b2dnbGVNZXRob2RFeHBhbmRlZChtZXRob2QuaWQsIGUpfVxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2V4cGFuZGVkTWV0aG9kc1ttZXRob2QuaWRdID8gXCJDb2xsYXBzZSB2YXJpYXRpb25zXCIgOiBcIkV4cGFuZCB2YXJpYXRpb25zXCJ9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1sndmFyaWF0aW9ucy1jb3VudCddfT57bWV0aG9kLnZhcmlhdGlvbnMubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWRNZXRob2RzW21ldGhvZC5pZF0gPyBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uVXAgc2l6ZT17MTZ9IC8+IDogXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtzdHlsZXNbJ21ldGhvZC1kZXNjcmlwdGlvbiddfT57bWV0aG9kLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogQWx3YXlzIGRpc3BsYXkgZWxlbWVudGFsIHRyYW5zZm9ybWF0aW9uIGNhcGFjaXR5ICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RyYW5zZm9ybWF0aW9uLWNvbnRhaW5lciddfT5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RyYW5zZm9ybWF0aW9uLWhlYWRlciddfT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+RWxlbWVudGFsIFRyYW5zZm9ybWF0aW9uczwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snZWxlbWVudGFsLXRyYW5zZm9ybWF0aW9ucyddfT5cbiAgICAgICAgICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtYXRpb25zID0gZ2V0RWxlbWVudGFsVHJhbnNmb3JtYXRpb25zKG1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRyYW5zZm9ybWF0aW9ucykubWFwKChbZWxlbWVudCwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRpcmVjdGlvbiwgaW50ZW5zaXR5IH0gPSBnZXRFbGVtZW50YWxEaXJlY3Rpb24odmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheUludGVuc2l0eSA9IE1hdGgubWluKE1hdGgucm91bmQoaW50ZW5zaXR5ICogMTAwKSwgMTAwKTsgLy8gMC0xMDAgcmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBlbGVtZW50cyB3aXRoIG5vIHNpZ25pZmljYW50IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ25ldXRyYWwnKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2VsZW1lbnR9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzWyd0cmFuc2Zvcm1hdGlvbi1pdGVtJ119ICR7c3R5bGVzW2VsZW1lbnQudG9Mb3dlckNhc2UoKV19ICR7c3R5bGVzW2B0cmFuc2Zvcm0tJHtkaXJlY3Rpb259YF19YH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Ake2RpcmVjdGlvbiA9PT0gJ2luY3JlYXNlJyA/ICdJbmNyZWFzZXMnIDogJ0RlY3JlYXNlcyd9ICR7ZWxlbWVudH0gYnkgJHtkaXNwbGF5SW50ZW5zaXR5fSVgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snZWxlbWVudC1pY29uJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VsZW1lbnQgPT09ICdGaXJlJyAmJiA8RmxhbWUgc2l6ZT17MTZ9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VsZW1lbnQgPT09ICdXYXRlcicgJiYgPERyb3BsZXRzIHNpemU9ezE2fSAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbGVtZW50ID09PSAnRWFydGgnICYmIDxNb3VudGFpbiBzaXplPXsxNn0gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZWxlbWVudCA9PT0gJ0FpcicgJiYgPFdpbmQgc2l6ZT17MTZ9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RyYW5zZm9ybWF0aW9uLWxhYmVsJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ2VsZW1lbnQtbmFtZSddfT57ZWxlbWVudH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydkaXJlY3Rpb24taW5kaWNhdG9yJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlyZWN0aW9uID09PSAnaW5jcmVhc2UnID8gPEFycm93VXAgc2l6ZT17MTR9IC8+IDogZGlyZWN0aW9uID09PSAnZGVjcmVhc2UnID8gPEFycm93RG93biBzaXplPXsxNH0gLz4gOiA8TWludXMgc2l6ZT17MTR9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rpc3BsYXlJbnRlbnNpdHkgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWydpbnRlbnNpdHktdmFsdWUnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXJlY3Rpb24gPT09ICdpbmNyZWFzZScgPyAnKycgOiAnLSd9e2Rpc3BsYXlJbnRlbnNpdHl9JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7IC8vIEZpbHRlciBvdXQgbnVsbCBpdGVtc1xuICAgICAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgey8qIERpc3BsYXkgYWxjaGVtaWNhbCBwcm9wZXJ0aWVzIGlmIGF2YWlsYWJsZSAqL31cbiAgICAgICAgICAgICAgICB7bWV0aG9kLmFsY2hlbWljYWxQcm9wZXJ0aWVzICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2FsY2hlbWljYWwtcHJvcGVydGllcyddfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snYWxjaGVteS1oZWFkZXInXX0+XG4gICAgICAgICAgICAgICAgICAgICAgPFphcCBzaXplPXsxNH0gY2xhc3NOYW1lPXtzdHlsZXNbJ2FsY2hlbXktaWNvbiddfSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkFsY2hlbWljYWwgUHJvcGVydGllczwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHtnZXRBbGNoZW1pY2FsTGFiZWwobWV0aG9kKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snYWxjaGVteS1sYWJlbCddfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFByaW1hcnk6IDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWydhbGNoZW15LXZhbHVlJ119PntnZXRBbGNoZW1pY2FsTGFiZWwobWV0aG9kKT8ucHJpbWFyeX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0QWxjaGVtaWNhbExhYmVsKG1ldGhvZCk/LnNlY29uZGFyeSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDw+IHwgU2Vjb25kYXJ5OiA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1snYWxjaGVteS12YWx1ZSddfT57Z2V0QWxjaGVtaWNhbExhYmVsKG1ldGhvZCk/LnNlY29uZGFyeX08L3NwYW4+PC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogQXN0cm9sb2dpY2FsIFRpbWluZyBSZWNvbW1lbmRhdGlvbnMgKi99XG4gICAgICAgICAgICAgICAge21ldGhvZC5hc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2FzdHJvbG9naWNhbC10aW1pbmcnXX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RpbWluZy1oZWFkZXInXX0+XG4gICAgICAgICAgICAgICAgICAgICAgPFNwYXJrbGVzIHNpemU9ezE0fSBjbGFzc05hbWU9e3N0eWxlc1sndGltaW5nLWljb24nXX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5PcHRpbWFsIFRpbWluZzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RpbWluZy1yZWNvbW1lbmRhdGlvbnMnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIFBsYW5ldGFyeSBIb3VyIFJlY29tbWVuZGF0aW9uICovfVxuICAgICAgICAgICAgICAgICAgICAgIHttZXRob2QuYXN0cm9sb2dpY2FsSW5mbHVlbmNlcy5kb21pbmFudFBsYW5ldHMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1sndGltaW5nLWl0ZW0nXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWyd0aW1pbmctbGFiZWwnXX0+QmVzdCBIb3Vyczo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWyd0aW1pbmctdmFsdWUnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21ldGhvZC5hc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzLmRvbWluYW50UGxhbmV0cy5zbGljZSgwLCAyKS5qb2luKCcsICcpfSBob3Vyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHthc3Ryb1N0YXRlLmN1cnJlbnRQbGFuZXRhcnlIb3VyICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLmFzdHJvbG9naWNhbEluZmx1ZW5jZXMuZG9taW5hbnRQbGFuZXRzLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwbGFuZXQ6IHN0cmluZykgPT4gcGxhbmV0LnRvTG93ZXJDYXNlKCkgPT09IGFzdHJvU3RhdGUuY3VycmVudFBsYW5ldGFyeUhvdXI/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWyd0aW1pbmctYWN0aXZlJ119PuKAoiBBY3RpdmUgTm93PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogTHVuYXIgUGhhc2UgUmVjb21tZW5kYXRpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAge21ldGhvZC5hc3Ryb2xvZ2ljYWxJbmZsdWVuY2VzLmx1bmFyUGhhc2VFZmZlY3QgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1sndGltaW5nLWl0ZW0nXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWyd0aW1pbmctbGFiZWwnXX0+THVuYXIgUGhhc2U6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1sndGltaW5nLXZhbHVlJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyhtZXRob2QuYXN0cm9sb2dpY2FsSW5mbHVlbmNlcy5sdW5hclBoYXNlRWZmZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IChiIGFzIG51bWJlcikgLSAoYSBhcyBudW1iZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbcGhhc2VdKSA9PiBwaGFzZS5yZXBsYWNlKCdfJywgJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcsICcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHthc3Ryb1N0YXRlLmx1bmFyUGhhc2UgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QuYXN0cm9sb2dpY2FsSW5mbHVlbmNlcy5sdW5hclBoYXNlRWZmZWN0W2FzdHJvU3RhdGUubHVuYXJQaGFzZV0gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QuYXN0cm9sb2dpY2FsSW5mbHVlbmNlcy5sdW5hclBoYXNlRWZmZWN0W2FzdHJvU3RhdGUubHVuYXJQaGFzZV0gPiAwLjYgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWyd0aW1pbmctYWN0aXZlJ119PuKAoiBGYXZvcmFibGU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBFbGVtZW50YWwgVGltaW5nICovfVxuICAgICAgICAgICAgICAgICAgICAgIHttZXRob2QuZWxlbWVudGFsRWZmZWN0ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RpbWluZy1pdGVtJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1sndGltaW5nLWxhYmVsJ119PkVsZW1lbnQ6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1sndGltaW5nLXZhbHVlJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyhtZXRob2QuZWxlbWVudGFsRWZmZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbZWxlbWVudF0pID0+IGVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyl9IGRvbWluYW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogU2hvdyBkdXJhdGlvbiBhbmQgc3VpdGFibGUgaW5ncmVkaWVudHMgKi99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snbWV0aG9kLWRldGFpbHMnXX0+XG4gICAgICAgICAgICAgICAgICB7bWV0aG9kLmR1cmF0aW9uICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snZGV0YWlsLWl0ZW0nXX0+XG4gICAgICAgICAgICAgICAgICAgICAgPENsb2NrIHNpemU9ezE0fSBjbGFzc05hbWU9e3N0eWxlc1snZGV0YWlsLWljb24nXX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlc1snZGV0YWlsLWxhYmVsJ119PkR1cmF0aW9uOjwvc3Bhbj4gXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ2RldGFpbC12YWx1ZSddfT57bWV0aG9kLmR1cmF0aW9uLm1pbn0te21ldGhvZC5kdXJhdGlvbi5tYXh9IG1pbjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge21ldGhvZC5zdWl0YWJsZV9mb3IgJiYgbWV0aG9kLnN1aXRhYmxlX2Zvci5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snZGV0YWlsLWl0ZW0nXX0+XG4gICAgICAgICAgICAgICAgICAgICAgPExpc3Qgc2l6ZT17MTR9IGNsYXNzTmFtZT17c3R5bGVzWydkZXRhaWwtaWNvbiddfSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWydkZXRhaWwtbGFiZWwnXX0+SWRlYWwgZm9yOjwvc3Bhbj4gXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ2RldGFpbC12YWx1ZSddfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXRob2Quc3VpdGFibGVfZm9yLnNsaWNlKDAsIDMpLmpvaW4oJywgJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWV0aG9kLnN1aXRhYmxlX2Zvci5sZW5ndGggPiAzICYmICcuLi4nfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge21ldGhvZC5iZW5lZml0cyAmJiBtZXRob2QuYmVuZWZpdHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2RldGFpbC1pdGVtJ119PlxuICAgICAgICAgICAgICAgICAgICAgIDxUaHVtYnNVcCBzaXplPXsxNH0gY2xhc3NOYW1lPXtzdHlsZXNbJ2RldGFpbC1pY29uJ119IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ2RldGFpbC1sYWJlbCddfT5CZW5lZml0czo8L3NwYW4+IFxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWydkZXRhaWwtdmFsdWUnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWV0aG9kLmJlbmVmaXRzLnNsaWNlKDAsIDEpLmpvaW4oJywgJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWV0aG9kLmJlbmVmaXRzLmxlbmd0aCA+IDEgJiYgJy4uLid9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgey8qIFNob3cgY3VsdHVyYWwgdmFyaWF0aW9ucyBpZiBleHBhbmRlZCAqL31cbiAgICAgICAgICAgICAgICB7bWV0aG9kLnZhcmlhdGlvbnMgJiYgbWV0aG9kLnZhcmlhdGlvbnMubGVuZ3RoID4gMCAmJiBleHBhbmRlZE1ldGhvZHNbbWV0aG9kLmlkXSAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWyd2YXJpYXRpb25zLWNvbnRhaW5lciddfT5cbiAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT17c3R5bGVzWyd2YXJpYXRpb25zLWhlYWRlciddfT5cbiAgICAgICAgICAgICAgICAgICAgICA8R2xvYmUgc2l6ZT17MTR9IGNsYXNzTmFtZT17c3R5bGVzWyd2YXJpYXRpb25zLWljb24nXX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICBWYXJpYXRpb25zICYgU3ViY2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWyd2YXJpYXRpb25zLWxpc3QnXX0+XG4gICAgICAgICAgICAgICAgICAgICAge21ldGhvZC52YXJpYXRpb25zLm1hcCgodmFyaWF0aW9uKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3ZhcmlhdGlvbi5pZH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzWyd2YXJpYXRpb24taXRlbSddfSAke3NlbGVjdGVkTWV0aG9kSWQgPT09IHZhcmlhdGlvbi5pZCA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCBwYXJlbnQgY2xpY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdE1ldGhvZCAmJiBvblNlbGVjdE1ldGhvZCh2YXJpYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWyd2YXJpYXRpb24taGVhZGVyJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWyd2YXJpYXRpb24tbmFtZSddfT57dmFyaWF0aW9uLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2YXJpYXRpb24uY3VsdHVyYWxPcmlnaW4gJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ2N1bHR1cmFsLW9yaWdpbiddfT57dmFyaWF0aW9uLmN1bHR1cmFsT3JpZ2lufTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBTaG93IGluZ3JlZGllbnQgY29tcGF0aWJpbGl0eSBmb3IgdmFyaWF0aW9ucyBpZiBhdmFpbGFibGUgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2luZ3JlZGllbnRDb21wYXRpYmlsaXR5W3ZhcmlhdGlvbi5pZF0gIT09IHVuZGVmaW5lZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7c3R5bGVzWydpbmdyZWRpZW50LWNvbXBhdGliaWxpdHknXX0gJHtzdHlsZXMuc21hbGx9ICR7c3R5bGVzW2dldENvbXBhdGliaWxpdHlMYWJlbChpbmdyZWRpZW50Q29tcGF0aWJpbGl0eVt2YXJpYXRpb24uaWRdKS5jbGFzc05hbWVdfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57Z2V0Q29tcGF0aWJpbGl0eUxhYmVsKGluZ3JlZGllbnRDb21wYXRpYmlsaXR5W3ZhcmlhdGlvbi5pZF0pLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXNbJ2NvbXBhdGliaWxpdHktdmFsdWUnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge01hdGgucm91bmQoaW5ncmVkaWVudENvbXBhdGliaWxpdHlbdmFyaWF0aW9uLmlkXSAqIDEwMCl9JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2NvbXBhdGliaWxpdHktYmFyJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2NvbXBhdGliaWxpdHktYmFyLWZpbGwnXX0gc3R5bGU9e3t3aWR0aDogYCR7TWF0aC5yb3VuZChpbmdyZWRpZW50Q29tcGF0aWJpbGl0eVt2YXJpYXRpb24uaWRdICogMTAwKX0lYH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZhcmlhdGlvbi5zY29yZSAhPT0gdW5kZWZpbmVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtzdHlsZXNbJ3ZhcmlhdGlvbi1zY29yZSddfSAke2dldFNjb3JlQ2xhc3ModmFyaWF0aW9uLnNjb3JlKX1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e01hdGgucm91bmQodmFyaWF0aW9uLnNjb3JlICogMTAwKX0lPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydzY29yZS1iYXInXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snc2NvcmUtYmFyLWZpbGwnXX0gc3R5bGU9e3t3aWR0aDogYCR7TWF0aC5yb3VuZCh2YXJpYXRpb24uc2NvcmUgKiAxMDApfSVgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogU2hvdyBlbGVtZW50YWwgdHJhbnNmb3JtYXRpb25zIGZvciB2YXJpYXRpb25zIHRvbyAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgeyh2YXJpYXRpb24uZWxlbWVudGFsRWZmZWN0IHx8IHZhcmlhdGlvbi5hbGNoZW1pY2FsUHJvcGVydGllcykgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ2VsZW1lbnRhbC10cmFuc2Zvcm1hdGlvbnMtc21hbGwnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtYXRpb25zID0gZ2V0RWxlbWVudGFsVHJhbnNmb3JtYXRpb25zKHZhcmlhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModHJhbnNmb3JtYXRpb25zKS5tYXAoKFtlbGVtZW50LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRpcmVjdGlvbiwgaW50ZW5zaXR5IH0gPSBnZXRFbGVtZW50YWxEaXJlY3Rpb24odmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlJbnRlbnNpdHkgPSBNYXRoLm1pbihNYXRoLnJvdW5kKGludGVuc2l0eSAqIDEwMCksIDEwMCk7IC8vIDAtMTAwIHJhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBlbGVtZW50cyB3aXRoIG5vIHNpZ25pZmljYW50IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICduZXV0cmFsJyB8fCBkaXNwbGF5SW50ZW5zaXR5IDwgNSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17ZWxlbWVudH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzWyd0cmFuc2Zvcm1hdGlvbi1pdGVtLXNtYWxsJ119ICR7c3R5bGVzW2VsZW1lbnQudG9Mb3dlckNhc2UoKV19ICR7c3R5bGVzW2B0cmFuc2Zvcm0tJHtkaXJlY3Rpb259YF19YH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHtkaXJlY3Rpb24gPT09ICdpbmNyZWFzZScgPyAnSW5jcmVhc2VzJyA6ICdEZWNyZWFzZXMnfSAke2VsZW1lbnR9IGJ5ICR7ZGlzcGxheUludGVuc2l0eX0lYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snZWxlbWVudC1pY29uLXNtYWxsJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbGVtZW50ID09PSAnRmlyZScgJiYgPEZsYW1lIHNpemU9ezEyfSAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZWxlbWVudCA9PT0gJ1dhdGVyJyAmJiA8RHJvcGxldHMgc2l6ZT17MTJ9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbGVtZW50ID09PSAnRWFydGgnICYmIDxNb3VudGFpbiBzaXplPXsxMn0gLz59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VsZW1lbnQgPT09ICdBaXInICYmIDxXaW5kIHNpemU9ezEyfSAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydkaXJlY3Rpb24taW5kaWNhdG9yLXNtYWxsJ119PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXJlY3Rpb24gPT09ICdpbmNyZWFzZScgPyA8QXJyb3dVcCBzaXplPXsxMH0gLz4gOiA8QXJyb3dEb3duIHNpemU9ezEwfSAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheUludGVuc2l0eSA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzWydpbnRlbnNpdHktdmFsdWUtc21hbGwnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGlyZWN0aW9uID09PSAnaW5jcmVhc2UnID8gJysnIDogJy0nfXtkaXNwbGF5SW50ZW5zaXR5fSVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7IC8vIEZpbHRlciBvdXQgbnVsbCBpdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge3NlbGVjdGVkTWV0aG9kSWQgPT09IG1ldGhvZC5pZCAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzWydleHBhbmRlZC1kZXRhaWxzJ119PlxuICAgICAgICAgICAgICAgICAgICB7LyogVGVjaG5pY2FsIFRpcHMgU2VjdGlvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1sndGVjaG5pY2FsLXRpcHMnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snc2VjdGlvbi1oZWFkZXInXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5mbyBzaXplPXsxNH0gY2xhc3NOYW1lPXtzdHlsZXNbJ3NlY3Rpb24taWNvbiddfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RXhwZXJ0IFRlY2huaWNhbCBUaXBzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3RpcHMtZ3JpZCddfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRUZWNobmljYWxUaXBzKG1ldGhvZC5uYW1lKS5zbGljZSgwLCA1KS5tYXAoKHRpcCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e3N0eWxlc1sndGlwLWl0ZW0nXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RpcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7LyogSWRlYWwgSW5ncmVkaWVudHMgU2VjdGlvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snaWRlYWwtaW5ncmVkaWVudHMnXX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snc2VjdGlvbi1oZWFkZXInXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlzdCBzaXplPXsxNH0gY2xhc3NOYW1lPXtzdHlsZXNbJ3NlY3Rpb24taWNvbiddfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+SWRlYWwgSW5ncmVkaWVudHM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snaW5ncmVkaWVudHMtZ3JpZCddfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJZGVhbEluZ3JlZGllbnRzKG1ldGhvZC5uYW1lKS5zbGljZSgwLCA4KS5tYXAoKGluZ3JlZGllbnQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPXtzdHlsZXNbJ2luZ3JlZGllbnQtaXRlbSddfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5ncmVkaWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBTaG93IG1vcmUvbGVzcyBidXR0b24gb3IgVmlldyBNb3JlIGZvciBtYWluIHBhZ2UgKi99XG4gICAgICAgICAge2lzTWFpblBhZ2VWZXJzaW9uICYmIG1ldGhvZHMubGVuZ3RoID4gbWF4RGlzcGxheWVkID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlc1snc2hvdy1tb3JlLWNvbnRhaW5lciddfT5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlc1sndmlldy1tb3JlLWJ1dHRvbiddfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVZpZXdNb3JlfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgVmlldyBBbGwgTWV0aG9kcyAoe21ldGhvZHMubGVuZ3RofSB0b3RhbCkgPEV4dGVybmFsTGluayBzaXplPXsxNn0gLz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgbWV0aG9kcy5sZW5ndGggPiA4ICYmICFpc01haW5QYWdlVmVyc2lvbiAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXNbJ3Nob3ctbW9yZS1jb250YWluZXInXX0+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzWydzaG93LW1vcmUtYnV0dG9uJ119XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWxsTWV0aG9kcyghc2hvd0FsbE1ldGhvZHMpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtzaG93QWxsTWV0aG9kcyA/IChcbiAgICAgICAgICAgICAgICAgICAgPD5TaG93IExlc3MgPENoZXZyb25VcCBzaXplPXsxNn0gLz48Lz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDw+U2hvdyBNb3JlICh7bWV0aG9kcy5sZW5ndGggLSA4fSBtb3JlKSA8Q2hldnJvbkRvd24gc2l6ZT17MTZ9IC8+PC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb29raW5nTWV0aG9kc1NlY3Rpb247ICJdLCJ2ZXJzaW9uIjozfQ==