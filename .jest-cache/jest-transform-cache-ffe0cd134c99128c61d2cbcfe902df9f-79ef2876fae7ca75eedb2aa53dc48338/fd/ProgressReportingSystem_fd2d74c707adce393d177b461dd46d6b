76626afa1dd25ecf953c59619cc66921
"use strict";
/**
 * Progress Reporting System
 * Perfect Codebase Campaign - Comprehensive Progress Reports
 * Requirements: 6.4, 6.8
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProgressReportingSystem = exports.RecommendationPriority = exports.IssueSeverity = exports.AchievementImpact = exports.CampaignStatus = void 0;
const fs = __importStar(require("fs"));
const campaign_1 = require("../../types/campaign");
const MetricsCollectionSystem_1 = require("./MetricsCollectionSystem");
const MilestoneValidationSystem_1 = require("./MilestoneValidationSystem");
var CampaignStatus;
(function (CampaignStatus) {
    CampaignStatus["NOT_STARTED"] = "NOT_STARTED";
    CampaignStatus["IN_PROGRESS"] = "IN_PROGRESS";
    CampaignStatus["COMPLETED"] = "COMPLETED";
    CampaignStatus["BLOCKED"] = "BLOCKED";
    CampaignStatus["FAILED"] = "FAILED";
})(CampaignStatus || (exports.CampaignStatus = CampaignStatus = {}));
var AchievementImpact;
(function (AchievementImpact) {
    AchievementImpact["LOW"] = "LOW";
    AchievementImpact["MEDIUM"] = "MEDIUM";
    AchievementImpact["HIGH"] = "HIGH";
    AchievementImpact["CRITICAL"] = "CRITICAL";
})(AchievementImpact || (exports.AchievementImpact = AchievementImpact = {}));
var IssueSeverity;
(function (IssueSeverity) {
    IssueSeverity["LOW"] = "LOW";
    IssueSeverity["MEDIUM"] = "MEDIUM";
    IssueSeverity["HIGH"] = "HIGH";
    IssueSeverity["CRITICAL"] = "CRITICAL";
    IssueSeverity["BLOCKER"] = "BLOCKER";
})(IssueSeverity || (exports.IssueSeverity = IssueSeverity = {}));
var RecommendationPriority;
(function (RecommendationPriority) {
    RecommendationPriority["LOW"] = "LOW";
    RecommendationPriority["MEDIUM"] = "MEDIUM";
    RecommendationPriority["HIGH"] = "HIGH";
    RecommendationPriority["URGENT"] = "URGENT";
})(RecommendationPriority || (exports.RecommendationPriority = RecommendationPriority = {}));
class ProgressReportingSystem {
    constructor() {
        this.reportHistory = [];
        this.metricsCollector = new MetricsCollectionSystem_1.MetricsCollectionSystem();
        this.validationSystem = new MilestoneValidationSystem_1.MilestoneValidationSystem();
    }
    /**
     * Generate comprehensive campaign summary report
     */
    async generateCampaignSummaryReport() {
        console.log('ðŸ“Š Generating comprehensive campaign summary report...');
        const [currentMetrics, phaseValidations] = await Promise.all([
            this.metricsCollector.collectDetailedMetrics(),
            this.validationSystem.validateAllPhases(),
        ]);
        const overallStatus = this.determineOverallStatus(phaseValidations);
        const overallProgress = this.calculateOverallProgress(phaseValidations);
        const phases = this.generatePhaseProgressSummaries(phaseValidations);
        const keyAchievements = this.identifyKeyAchievements(currentMetrics, phaseValidations);
        const criticalIssues = this.identifyCriticalIssues(phaseValidations);
        const performanceMetrics = this.createPerformanceSnapshot(currentMetrics);
        const recommendations = this.generateRecommendations(phaseValidations, currentMetrics);
        const estimatedCompletion = this.estimateCompletionDate(overallProgress, currentMetrics);
        const executiveSummary = this.generateExecutiveSummary(overallStatus, overallProgress, keyAchievements, criticalIssues);
        const report = {
            campaignId: 'perfect-codebase-campaign',
            generatedAt: new Date(),
            overallStatus,
            overallProgress,
            phases,
            keyAchievements,
            criticalIssues,
            performanceMetrics,
            recommendations,
            estimatedCompletion,
            executiveSummary,
        };
        this.reportHistory.push(report);
        console.log(`âœ… Campaign summary report generated: ${overallProgress}% complete`);
        return report;
    }
    /**
     * Generate detailed phase completion report
     */
    async generatePhaseCompletionReport(phaseId) {
        console.log(`ðŸ“Š Generating phase completion report for ${phaseId}...`);
        const currentMetrics = await this.metricsCollector.collectDetailedMetrics();
        let phaseValidation;
        switch (phaseId) {
            case 'phase1':
                phaseValidation = await this.validationSystem.validatePhase1();
                break;
            case 'phase2':
                phaseValidation = await this.validationSystem.validatePhase2();
                break;
            case 'phase3':
                phaseValidation = await this.validationSystem.validatePhase3();
                break;
            case 'phase4':
                phaseValidation = await this.validationSystem.validatePhase4();
                break;
            default:
                throw new Error(`Unknown phase: ${phaseId}`);
        }
        const achievements = this.generatePhaseAchievements(phaseValidation, currentMetrics);
        const issues = this.generatePhaseIssues(phaseValidation);
        const recommendations = this.generatePhaseRecommendations(phaseValidation);
        const report = {
            phaseId: phaseValidation.phaseId,
            phaseName: phaseValidation.phaseName,
            startTime: new Date(),
            endTime: phaseValidation.overallSuccess ? new Date() : undefined,
            status: phaseValidation.overallSuccess
                ? campaign_1.PhaseStatus.COMPLETED
                : campaign_1.PhaseStatus.IN_PROGRESS,
            metrics: currentMetrics,
            achievements,
            issues,
            recommendations,
        };
        console.log(`âœ… Phase ${phaseId} report generated: ${phaseValidation.overallSuccess ? 'COMPLETED' : 'IN PROGRESS'}`);
        return report;
    }
    /**
     * Generate visualization data for charts and graphs
     */
    async generateVisualizationData() {
        console.log('ðŸ“Š Generating visualization data...');
        const snapshots = this.metricsCollector.getSnapshots();
        const phaseValidations = await this.validationSystem.validateAllPhases();
        const currentMetrics = await this.metricsCollector.collectDetailedMetrics();
        const timeSeriesData = this.generateTimeSeriesData(snapshots);
        const phaseProgressChart = this.generatePhaseProgressChart(phaseValidations);
        const errorDistributionChart = this.generateErrorDistributionChart(currentMetrics);
        const performanceTrendChart = this.generatePerformanceTrendChart(snapshots);
        return {
            timeSeriesData,
            phaseProgressChart,
            errorDistributionChart,
            performanceTrendChart,
        };
    }
    /**
     * Export comprehensive report to multiple formats
     */
    async exportReport(report, formats = ['json']) {
        const exportedFiles = [];
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
        const baseFileName = `campaign-report-${timestamp}`;
        for (const format of formats) {
            let filePath;
            let content;
            switch (format) {
                case 'json':
                    filePath = `${baseFileName}.json`;
                    content = JSON.stringify(report, null, 2);
                    break;
                case 'html':
                    filePath = `${baseFileName}.html`;
                    content = this.generateHTMLReport(report);
                    break;
                case 'markdown':
                    filePath = `${baseFileName}.md`;
                    content = this.generateMarkdownReport(report);
                    break;
                case 'csv':
                    filePath = `${baseFileName}.csv`;
                    content = this.generateCSVReport(report);
                    break;
                default:
                    continue;
            }
            fs.writeFileSync(filePath, content);
            exportedFiles.push(filePath);
            console.log(`ðŸ“„ Report exported to: ${filePath}`);
        }
        return exportedFiles;
    }
    /**
     * Generate real-time dashboard data
     */
    async generateDashboardData() {
        const [summary, visualization] = await Promise.all([
            this.generateCampaignSummaryReport(),
            this.generateVisualizationData(),
        ]);
        const recentActivity = this.generateRecentActivity();
        return {
            summary,
            visualization,
            recentActivity,
        };
    }
    /**
     * Private helper methods
     */
    determineOverallStatus(phaseValidations) {
        const completedPhases = phaseValidations.filter(p => p.overallSuccess).length;
        const totalPhases = phaseValidations.length;
        const hasBlockers = phaseValidations.some(p => p.criticalFailures.length > 0);
        if (completedPhases === totalPhases) {
            return CampaignStatus.COMPLETED;
        }
        else if (hasBlockers) {
            return CampaignStatus.BLOCKED;
        }
        else if (completedPhases > 0) {
            return CampaignStatus.IN_PROGRESS;
        }
        else {
            return CampaignStatus.NOT_STARTED;
        }
    }
    calculateOverallProgress(phaseValidations) {
        if (phaseValidations.length === 0)
            return 0;
        const totalProgress = phaseValidations.reduce((sum, phase) => sum + phase.completionPercentage, 0);
        return Math.round(totalProgress / phaseValidations.length);
    }
    generatePhaseProgressSummaries(phaseValidations) {
        return phaseValidations.map(validation => ({
            phaseId: validation.phaseId,
            phaseName: validation.phaseName,
            status: validation.overallSuccess
                ? campaign_1.PhaseStatus.COMPLETED
                : campaign_1.PhaseStatus.IN_PROGRESS,
            progress: validation.completionPercentage,
            keyMetrics: this.extractKeyMetrics(validation),
            milestones: validation.milestones.map(m => ({
                name: m.milestone,
                completed: m.success,
                completionDate: m.success ? m.timestamp : undefined,
                criticalPath: true, // All milestones are critical in this campaign
            })),
            blockers: validation.criticalFailures,
        }));
    }
    identifyKeyAchievements(metrics, phaseValidations) {
        const achievements = [];
        // TypeScript error achievements
        if (metrics.typeScriptErrors.current === 0) {
            achievements.push({
                title: 'Zero TypeScript Errors Achieved',
                description: 'Successfully eliminated all 86 TypeScript compilation errors',
                phase: 'phase1',
                achievedAt: new Date(),
                impact: AchievementImpact.CRITICAL,
                metrics: {
                    errorsEliminated: 86,
                    reductionPercentage: 100,
                },
            });
        }
        // Linting warning achievements
        if (metrics.lintingWarnings.current === 0) {
            achievements.push({
                title: 'Zero Linting Warnings Achieved',
                description: 'Successfully eliminated all 4,506 linting warnings',
                phase: 'phase2',
                achievedAt: new Date(),
                impact: AchievementImpact.CRITICAL,
                metrics: {
                    warningsEliminated: 4506,
                    reductionPercentage: 100,
                },
            });
        }
        // Enterprise system achievements
        if (metrics.enterpriseSystems.current >= 200) {
            achievements.push({
                title: 'Enterprise Intelligence Target Achieved',
                description: `Successfully created ${metrics.enterpriseSystems.current} enterprise intelligence systems`,
                phase: 'phase3',
                achievedAt: new Date(),
                impact: AchievementImpact.HIGH,
                metrics: {
                    systemsCreated: metrics.enterpriseSystems.current,
                    targetAchievement: (metrics.enterpriseSystems.current / 200) * 100,
                },
            });
        }
        // Performance achievements
        if (metrics.buildPerformance.currentTime <= 10) {
            achievements.push({
                title: 'Build Performance Target Achieved',
                description: `Build time optimized to ${metrics.buildPerformance.currentTime}s (target: 10s)`,
                phase: 'phase4',
                achievedAt: new Date(),
                impact: AchievementImpact.HIGH,
                metrics: {
                    buildTime: metrics.buildPerformance.currentTime,
                    targetTime: 10,
                    improvement: 10 - metrics.buildPerformance.currentTime,
                },
            });
        }
        return achievements;
    }
    identifyCriticalIssues(phaseValidations) {
        const issues = [];
        phaseValidations.forEach(phase => {
            phase.criticalFailures.forEach(failure => {
                issues.push({
                    title: `${phase.phaseName} Critical Failure`,
                    description: failure,
                    phase: phase.phaseId,
                    severity: IssueSeverity.CRITICAL,
                    detectedAt: new Date(),
                    estimatedResolutionTime: this.estimateResolutionTime(failure),
                });
            });
        });
        return issues;
    }
    createPerformanceSnapshot(metrics) {
        return {
            typeScriptErrors: {
                initial: 86,
                current: metrics.typeScriptErrors.current,
                reduction: metrics.typeScriptErrors.reduction,
                reductionRate: metrics.trendData.errorReductionRate,
            },
            lintingWarnings: {
                initial: 4506,
                current: metrics.lintingWarnings.current,
                reduction: metrics.lintingWarnings.reduction,
                reductionRate: metrics.trendData.warningReductionRate,
            },
            buildPerformance: {
                currentTime: metrics.buildPerformance.currentTime,
                targetTime: 10,
                improvement: metrics.trendData.buildTimeImprovement,
                cacheEfficiency: metrics.buildPerformance.cacheHitRate,
            },
            enterpriseSystems: {
                initial: 0,
                current: metrics.enterpriseSystems.current,
                target: 200,
                growthRate: metrics.trendData.systemGrowthRate,
            },
        };
    }
    generateRecommendations(phaseValidations, metrics) {
        const recommendations = [];
        phaseValidations.forEach(phase => {
            if (!phase.overallSuccess) {
                phase.nextSteps.forEach(step => {
                    recommendations.push({
                        title: `${phase.phaseName} Improvement`,
                        description: step,
                        priority: this.determinePriority(step),
                        phase: phase.phaseId,
                        estimatedImpact: this.estimateImpact(step),
                        actionItems: this.generateActionItems(step),
                    });
                });
            }
        });
        return recommendations;
    }
    estimateCompletionDate(overallProgress, metrics) {
        const completionDate = new Date();
        if (overallProgress >= 100) {
            return completionDate; // Already complete
        }
        // Estimate based on current progress rate
        const remainingProgress = 100 - overallProgress;
        const averageRate = (metrics.trendData.errorReductionRate +
            metrics.trendData.warningReductionRate +
            metrics.trendData.systemGrowthRate) /
            3;
        const estimatedHours = averageRate > 0 ? remainingProgress / averageRate : 168; // Default to 1 week
        completionDate.setHours(completionDate.getHours() + estimatedHours);
        return completionDate;
    }
    generateExecutiveSummary(status, progress, achievements, issues) {
        const statusText = status === CampaignStatus.COMPLETED
            ? 'completed successfully'
            : status === CampaignStatus.IN_PROGRESS
                ? 'in progress'
                : status === CampaignStatus.BLOCKED
                    ? 'currently blocked'
                    : 'not started';
        const achievementText = achievements.length > 0
            ? `Key achievements include: ${achievements.map(a => a.title).join(', ')}.`
            : '';
        const issueText = issues.length > 0
            ? `Critical issues requiring attention: ${issues.length} items identified.`
            : 'No critical issues identified.';
        return `The Perfect Codebase Campaign is ${statusText} with ${progress}% overall completion. ${achievementText} ${issueText}`;
    }
    generateTimeSeriesData(snapshots) {
        return snapshots.map(snapshot => ({
            timestamp: snapshot.timestamp,
            typeScriptErrors: snapshot.metrics.typeScriptErrors.current,
            lintingWarnings: snapshot.metrics.lintingWarnings.current,
            buildTime: snapshot.metrics.buildPerformance.currentTime,
            enterpriseSystems: snapshot.metrics.enterpriseSystems.current,
        }));
    }
    generatePhaseProgressChart(phaseValidations) {
        return phaseValidations.map(phase => ({
            phase: phase.phaseName,
            progress: phase.completionPercentage,
            target: 100,
            status: phase.overallSuccess
                ? campaign_1.PhaseStatus.COMPLETED
                : campaign_1.PhaseStatus.IN_PROGRESS,
        }));
    }
    generateErrorDistributionChart(metrics) {
        const errorBreakdown = metrics.errorBreakdown || {};
        const totalErrors = Object.values(errorBreakdown).reduce((sum, count) => sum + count, 0);
        return Object.entries(errorBreakdown).map(([errorType, count]) => ({
            errorType,
            count,
            percentage: totalErrors > 0 ? Math.round((count / totalErrors) * 100) : 0,
        }));
    }
    generatePerformanceTrendChart(snapshots) {
        return snapshots.map(snapshot => ({
            timestamp: snapshot.timestamp,
            buildTime: snapshot.metrics.buildPerformance.currentTime,
            memoryUsage: snapshot.metrics.buildPerformance.memoryUsage,
            cacheHitRate: snapshot.metrics.buildPerformance.cacheHitRate,
        }));
    }
    generateHTMLReport(report) {
        return `
<!DOCTYPE html>
<html>
<head>
    <title>Perfect Codebase Campaign Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .header { background: #f5f5f5; padding: 20px; border-radius: 8px; }
        .status-${report.overallStatus.toLowerCase()} { color: ${this.getStatusColor(report.overallStatus)}; }
        .progress-bar { background: #e0e0e0; height: 20px; border-radius: 10px; overflow: hidden; }
        .progress-fill { background: #4caf50; height: 100%; transition: width 0.3s; }
        .phase { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .achievement { background: #e8f5e8; padding: 10px; margin: 5px 0; border-radius: 5px; }
        .issue { background: #ffe8e8; padding: 10px; margin: 5px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Perfect Codebase Campaign Report</h1>
        <p>Generated: ${report.generatedAt.toLocaleString()}</p>
        <p class="status-${report.overallStatus.toLowerCase()}">Status: ${report.overallStatus}</p>
        <div class="progress-bar">
            <div class="progress-fill" style="width: ${report.overallProgress}%"></div>
        </div>
        <p>Progress: ${report.overallProgress}%</p>
    </div>

    <h2>Executive Summary</h2>
    <p>${report.executiveSummary}</p>

    <h2>Phase Progress</h2>
    ${report.phases
            .map(phase => `
        <div class="phase">
            <h3>${phase.phaseName}</h3>
            <p>Status: ${phase.status}</p>
            <p>Progress: ${phase.progress}%</p>
            <p>Blockers: ${phase.blockers.length > 0 ? phase.blockers.join(', ') : 'None'}</p>
        </div>
    `)
            .join('')}

    <h2>Key Achievements</h2>
    ${report.keyAchievements
            .map(achievement => `
        <div class="achievement">
            <h4>${achievement.title}</h4>
            <p>${achievement.description}</p>
            <p>Impact: ${achievement.impact}</p>
        </div>
    `)
            .join('')}

    <h2>Critical Issues</h2>
    ${report.criticalIssues
            .map(issue => `
        <div class="issue">
            <h4>${issue.title}</h4>
            <p>${issue.description}</p>
            <p>Severity: ${issue.severity}</p>
        </div>
    `)
            .join('')}
</body>
</html>`;
    }
    generateMarkdownReport(report) {
        return `# Perfect Codebase Campaign Report

**Generated:** ${report.generatedAt.toISOString()}
**Status:** ${report.overallStatus}
**Progress:** ${report.overallProgress}%

## Executive Summary

${report.executiveSummary}

## Phase Progress

${report.phases
            .map(phase => `
### ${phase.phaseName}
- **Status:** ${phase.status}
- **Progress:** ${phase.progress}%
- **Blockers:** ${phase.blockers.length > 0 ? phase.blockers.join(', ') : 'None'}
`)
            .join('')}

## Key Achievements

${report.keyAchievements
            .map(achievement => `
### ${achievement.title}
${achievement.description}
- **Impact:** ${achievement.impact}
- **Phase:** ${achievement.phase}
`)
            .join('')}

## Critical Issues

${report.criticalIssues
            .map(issue => `
### ${issue.title}
${issue.description}
- **Severity:** ${issue.severity}
- **Phase:** ${issue.phase}
`)
            .join('')}

## Performance Metrics

- **TypeScript Errors:** ${report.performanceMetrics.typeScriptErrors.current} (${report.performanceMetrics.typeScriptErrors.reduction} reduced)
- **Linting Warnings:** ${report.performanceMetrics.lintingWarnings.current} (${report.performanceMetrics.lintingWarnings.reduction} reduced)
- **Build Time:** ${report.performanceMetrics.buildPerformance.currentTime}s (target: ${report.performanceMetrics.buildPerformance.targetTime}s)
- **Enterprise Systems:** ${report.performanceMetrics.enterpriseSystems.current} (target: ${report.performanceMetrics.enterpriseSystems.target})
`;
    }
    generateCSVReport(report) {
        const headers = ['Phase', 'Status', 'Progress', 'Blockers'];
        const rows = report.phases.map(phase => [
            phase.phaseName,
            phase.status,
            phase.progress.toString(),
            phase.blockers.join('; '),
        ]);
        return [headers, ...rows].map(row => row.join(',')).join('\n');
    }
    generateRecentActivity() {
        // This would be implemented with actual activity tracking
        return [
            {
                timestamp: new Date(),
                type: 'milestone',
                description: 'Phase validation completed',
                phase: 'phase1',
            },
        ];
    }
    // Helper methods
    extractKeyMetrics(validation) {
        return {
            completionPercentage: validation.completionPercentage,
            milestonesCompleted: validation.milestones.filter(m => m.success).length,
            totalMilestones: validation.milestones.length,
            criticalFailures: validation.criticalFailures.length,
        };
    }
    generatePhaseAchievements(validation, metrics) {
        return validation.milestones
            .filter(m => m.success)
            .map(m => `${m.milestone} completed successfully`);
    }
    generatePhaseIssues(validation) {
        return validation.criticalFailures;
    }
    generatePhaseRecommendations(validation) {
        return validation.nextSteps;
    }
    estimateResolutionTime(failure) {
        // Simple heuristic based on failure type
        if (failure.includes('TypeScript'))
            return 4;
        if (failure.includes('linting'))
            return 2;
        if (failure.includes('build'))
            return 6;
        return 3;
    }
    determinePriority(step) {
        if (step.includes('critical') || step.includes('blocker'))
            return RecommendationPriority.URGENT;
        if (step.includes('error') || step.includes('failure'))
            return RecommendationPriority.HIGH;
        return RecommendationPriority.MEDIUM;
    }
    estimateImpact(step) {
        if (step.includes('zero') || step.includes('complete'))
            return 'High - Milestone completion';
        if (step.includes('reduce') || step.includes('improve'))
            return 'Medium - Incremental improvement';
        return 'Low - Maintenance task';
    }
    generateActionItems(step) {
        // Generate specific action items based on the step
        return [`Execute: ${step}`, 'Validate results', 'Update progress tracking'];
    }
    getStatusColor(status) {
        switch (status) {
            case CampaignStatus.COMPLETED:
                return '#4caf50';
            case CampaignStatus.IN_PROGRESS:
                return '#2196f3';
            case CampaignStatus.BLOCKED:
                return '#ff9800';
            case CampaignStatus.FAILED:
                return '#f44336';
            default:
                return '#757575';
        }
    }
    /**
     * Get report history
     */
    getReportHistory() {
        return [...this.reportHistory];
    }
    /**
     * Clear report history
     */
    clearReportHistory() {
        this.reportHistory = [];
        console.log('ðŸ“Š Report history cleared');
    }
}
exports.ProgressReportingSystem = ProgressReportingSystem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Qcm9ncmVzc1JlcG9ydGluZ1N5c3RlbS50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCx1Q0FBeUI7QUFFekIsbURBSzhCO0FBQzlCLHVFQUltQztBQUNuQywyRUFHcUM7QUE4SHJDLElBQVksY0FNWDtBQU5ELFdBQVksY0FBYztJQUN4Qiw2Q0FBMkIsQ0FBQTtJQUMzQiw2Q0FBMkIsQ0FBQTtJQUMzQix5Q0FBdUIsQ0FBQTtJQUN2QixxQ0FBbUIsQ0FBQTtJQUNuQixtQ0FBaUIsQ0FBQTtBQUNuQixDQUFDLEVBTlcsY0FBYyw4QkFBZCxjQUFjLFFBTXpCO0FBRUQsSUFBWSxpQkFLWDtBQUxELFdBQVksaUJBQWlCO0lBQzNCLGdDQUFXLENBQUE7SUFDWCxzQ0FBaUIsQ0FBQTtJQUNqQixrQ0FBYSxDQUFBO0lBQ2IsMENBQXFCLENBQUE7QUFDdkIsQ0FBQyxFQUxXLGlCQUFpQixpQ0FBakIsaUJBQWlCLFFBSzVCO0FBRUQsSUFBWSxhQU1YO0FBTkQsV0FBWSxhQUFhO0lBQ3ZCLDRCQUFXLENBQUE7SUFDWCxrQ0FBaUIsQ0FBQTtJQUNqQiw4QkFBYSxDQUFBO0lBQ2Isc0NBQXFCLENBQUE7SUFDckIsb0NBQW1CLENBQUE7QUFDckIsQ0FBQyxFQU5XLGFBQWEsNkJBQWIsYUFBYSxRQU14QjtBQUVELElBQVksc0JBS1g7QUFMRCxXQUFZLHNCQUFzQjtJQUNoQyxxQ0FBVyxDQUFBO0lBQ1gsMkNBQWlCLENBQUE7SUFDakIsdUNBQWEsQ0FBQTtJQUNiLDJDQUFpQixDQUFBO0FBQ25CLENBQUMsRUFMVyxzQkFBc0Isc0NBQXRCLHNCQUFzQixRQUtqQztBQUVELE1BQWEsdUJBQXVCO0lBS2xDO1FBRlEsa0JBQWEsR0FBNEIsRUFBRSxDQUFDO1FBR2xELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLGlEQUF1QixFQUFFLENB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QkFDN0IsT0FBTyxTQUFTLENBQUM7WUFDbkIsS0FBSyxjQUFjLENBQUMsT0FBTztnQkFDekIsT0FBTyxTQUFTLENBQUM7WUFDbkIsS0FBSyxjQUFjLENBQUMsTUFBTTtnQkFDeEIsT0FBTyxTQUFTLENBQUM7WUFDbkI7Z0JBQ0UsT0FBTyxTQUFTLENBQUM7U0FDcEI7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxnQkFBZ0I7UUFDZCxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUMzQyxDQUFDO0NBQ0Y7QUFud0JELDBEQW13QkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Qcm9ncmVzc1JlcG9ydGluZ1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb2dyZXNzIFJlcG9ydGluZyBTeXN0ZW1cbiAqIFBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gLSBDb21wcmVoZW5zaXZlIFByb2dyZXNzIFJlcG9ydHNcbiAqIFJlcXVpcmVtZW50czogNi40LCA2LjhcbiAqL1xuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHtcbiAgUHJvZ3Jlc3NNZXRyaWNzLFxuICBQaGFzZVJlcG9ydCxcbiAgUHJvZ3Jlc3NSZXBvcnQsXG4gIFBoYXNlU3RhdHVzLFxufSBmcm9tICcuLi8uLi90eXBlcy9jYW1wYWlnbic7XG5pbXBvcnQge1xuICBNZXRyaWNzQ29sbGVjdGlvblN5c3RlbSxcbiAgRGV0YWlsZWRNZXRyaWNzLFxuICBNZXRyaWNzU25hcHNob3QsXG59IGZyb20gJy4vTWV0cmljc0NvbGxlY3Rpb25TeXN0ZW0nO1xuaW1wb3J0IHtcbiAgTWlsZXN0b25lVmFsaWRhdGlvblN5c3RlbSxcbiAgUGhhc2VWYWxpZGF0aW9uUmVzdWx0LFxufSBmcm9tICcuL01pbGVzdG9uZVZhbGlkYXRpb25TeXN0ZW0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduU3VtbWFyeVJlcG9ydCB7XG4gIGNhbXBhaWduSWQ6IHN0cmluZztcbiAgZ2VuZXJhdGVkQXQ6IERhdGU7XG4gIG92ZXJhbGxTdGF0dXM6IENhbXBhaWduU3RhdHVzO1xuICBvdmVyYWxsUHJvZ3Jlc3M6IG51bWJlcjtcbiAgcGhhc2VzOiBQaGFzZVByb2dyZXNzU3VtbWFyeVtdO1xuICBrZXlBY2hpZXZlbWVudHM6IEFjaGlldmVtZW50W107XG4gIGNyaXRpY2FsSXNzdWVzOiBJc3N1ZVtdO1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IFBlcmZvcm1hbmNlU25hcHNob3Q7XG4gIHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXTtcbiAgZXN0aW1hdGVkQ29tcGxldGlvbjogRGF0ZTtcbiAgZXhlY3V0aXZlU3VtbWFyeTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBoYXNlUHJvZ3Jlc3NTdW1tYXJ5IHtcbiAgcGhhc2VJZDogc3RyaW5nO1xuICBwaGFzZU5hbWU6IHN0cmluZztcbiAgc3RhdHVzOiBQaGFzZVN0YXR1cztcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgc3RhcnREYXRlPzogRGF0ZTtcbiAgY29tcGxldGlvbkRhdGU/OiBEYXRlO1xuICBkdXJhdGlvbj86IG51bWJlcjsgLy8gaW4gaG91cnNcbiAga2V5TWV0cmljczogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgbWlsZXN0b25lczogTWlsZXN0b25lU3VtbWFyeVtdO1xuICBibG9ja2Vyczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWlsZXN0b25lU3VtbWFyeSB7XG4gIG5hbWU6IHN0cmluZztcbiAgY29tcGxldGVkOiBib29sZWFuO1xuICBjb21wbGV0aW9uRGF0ZT86IERhdGU7XG4gIGNyaXRpY2FsUGF0aDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY2hpZXZlbWVudCB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHBoYXNlOiBzdHJpbmc7XG4gIGFjaGlldmVkQXQ6IERhdGU7XG4gIGltcGFjdDogQWNoaWV2ZW1lbnRJbXBhY3Q7XG4gIG1ldHJpY3M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXNzdWUge1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwaGFzZTogc3RyaW5nO1xuICBzZXZlcml0eTogSXNzdWVTZXZlcml0eTtcbiAgZGV0ZWN0ZWRBdDogRGF0ZTtcbiAgcmVzb2x1dGlvbj86IHN0cmluZztcbiAgZXN0aW1hdGVkUmVzb2x1dGlvblRpbWU/OiBudW1iZXI7IC8vIGluIGhvdXJzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VTbmFwc2hvdCB7XG4gIHR5cGVTY3JpcHRFcnJvcnM6IHtcbiAgICBpbml0aWFsOiBudW1iZXI7XG4gICAgY3VycmVudDogbnVtYmVyO1xuICAgIHJlZHVjdGlvbjogbnVtYmVyO1xuICAgIHJlZHVjdGlvblJhdGU6IG51bWJlcjsgLy8gcGVyIGhvdXJcbiAgfTtcbiAgbGludGluZ1dhcm5pbmdzOiB7XG4gICAgaW5pdGlhbDogbnVtYmVyO1xuICAgIGN1cnJlbnQ6IG51bWJlcjtcbiAgICByZWR1Y3Rpb246IG51bWJlcjtcbiAgICByZWR1Y3Rpb25SYXRlOiBudW1iZXI7IC8vIHBlciBob3VyXG4gIH07XG4gIGJ1aWxkUGVyZm9ybWFuY2U6IHtcbiAgICBjdXJyZW50VGltZTogbnVtYmVyO1xuICAgIHRhcmdldFRpbWU6IG51bWJlcjtcbiAgICBpbXByb3ZlbWVudDogbnVtYmVyO1xuICAgIGNhY2hlRWZmaWNpZW5jeTogbnVtYmVyO1xuICB9O1xuICBlbnRlcnByaXNlU3lzdGVtczoge1xuICAgIGluaXRpYWw6IG51bWJlcjtcbiAgICBjdXJyZW50OiBudW1iZXI7XG4gICAgdGFyZ2V0OiBudW1iZXI7XG4gICAgZ3Jvd3RoUmF0ZTogbnVtYmVyOyAvLyBwZXIgaG91clxuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZGF0aW9uIHtcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHJpb3JpdHk6IFJlY29tbWVuZGF0aW9uUHJpb3JpdHk7XG4gIHBoYXNlOiBzdHJpbmc7XG4gIGVzdGltYXRlZEltcGFjdDogc3RyaW5nO1xuICBhY3Rpb25JdGVtczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlzdWFsaXphdGlvbkRhdGEge1xuICB0aW1lU2VyaWVzRGF0YTogVGltZVNlcmllc1BvaW50W107XG4gIHBoYXNlUHJvZ3Jlc3NDaGFydDogUGhhc2VQcm9ncmVzc1BvaW50W107XG4gIGVycm9yRGlzdHJpYnV0aW9uQ2hhcnQ6IEVycm9yRGlzdHJpYnV0aW9uUG9pbnRbXTtcbiAgcGVyZm9ybWFuY2VUcmVuZENoYXJ0OiBQZXJmb3JtYW5jZVRyZW5kUG9pbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lU2VyaWVzUG9pbnQge1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHR5cGVTY3JpcHRFcnJvcnM6IG51bWJlcjtcbiAgbGludGluZ1dhcm5pbmdzOiBudW1iZXI7XG4gIGJ1aWxkVGltZTogbnVtYmVyO1xuICBlbnRlcnByaXNlU3lzdGVtczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBoYXNlUHJvZ3Jlc3NQb2ludCB7XG4gIHBoYXNlOiBzdHJpbmc7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIHRhcmdldDogbnVtYmVyO1xuICBzdGF0dXM6IFBoYXNlU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yRGlzdHJpYnV0aW9uUG9pbnQge1xuICBlcnJvclR5cGU6IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbiAgcGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlVHJlbmRQb2ludCB7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgYnVpbGRUaW1lOiBudW1iZXI7XG4gIG1lbW9yeVVzYWdlOiBudW1iZXI7XG4gIGNhY2hlSGl0UmF0ZTogbnVtYmVyO1xufVxuXG5leHBvcnQgZW51bSBDYW1wYWlnblN0YXR1cyB7XG4gIE5PVF9TVEFSVEVEID0gJ05PVF9TVEFSVEVEJyxcbiAgSU5fUFJPR1JFU1MgPSAnSU5fUFJPR1JFU1MnLFxuICBDT01QTEVURUQgPSAnQ09NUExFVEVEJyxcbiAgQkxPQ0tFRCA9ICdCTE9DS0VEJyxcbiAgRkFJTEVEID0gJ0ZBSUxFRCcsXG59XG5cbmV4cG9ydCBlbnVtIEFjaGlldmVtZW50SW1wYWN0IHtcbiAgTE9XID0gJ0xPVycsXG4gIE1FRElVTSA9ICdNRURJVU0nLFxuICBISUdIID0gJ0hJR0gnLFxuICBDUklUSUNBTCA9ICdDUklUSUNBTCcsXG59XG5cbmV4cG9ydCBlbnVtIElzc3VlU2V2ZXJpdHkge1xuICBMT1cgPSAnTE9XJyxcbiAgTUVESVVNID0gJ01FRElVTScsXG4gIEhJR0ggPSAnSElHSCcsXG4gIENSSVRJQ0FMID0gJ0NSSVRJQ0FMJyxcbiAgQkxPQ0tFUiA9ICdCTE9DS0VSJyxcbn1cblxuZXhwb3J0IGVudW0gUmVjb21tZW5kYXRpb25Qcmlvcml0eSB7XG4gIExPVyA9ICdMT1cnLFxuICBNRURJVU0gPSAnTUVESVVNJyxcbiAgSElHSCA9ICdISUdIJyxcbiAgVVJHRU5UID0gJ1VSR0VOVCcsXG59XG5cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc1JlcG9ydGluZ1N5c3RlbSB7XG4gIHByaXZhdGUgbWV0cmljc0NvbGxlY3RvcjogTWV0cmljc0NvbGxlY3Rpb25TeXN0ZW07XG4gIHByaXZhdGUgdmFsaWRhdGlvblN5c3RlbTogTWlsZXN0b25lVmFsaWRhdGlvblN5c3RlbTtcbiAgcHJpdmF0ZSByZXBvcnRIaXN0b3J5OiBDYW1wYWlnblN1bW1hcnlSZXBvcnRbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWV0cmljc0NvbGxlY3RvciA9IG5ldyBNZXRyaWNzQ29sbGVjdGlvblN5c3RlbSgpO1xuICAgIHRoaXMudmFsaWRhdGlvblN5c3RlbSA9IG5ldyBNaWxlc3RvbmVWYWxpZGF0aW9uU3lzdGVtKCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBjYW1wYWlnbiBzdW1tYXJ5IHJlcG9ydFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVDYW1wYWlnblN1bW1hcnlSZXBvcnQoKTogUHJvbWlzZTxDYW1wYWlnblN1bW1hcnlSZXBvcnQ+IHtcbiAgICBjb25zb2xlLmxvZygn8J+TiiBHZW5lcmF0aW5nIGNvbXByZWhlbnNpdmUgY2FtcGFpZ24gc3VtbWFyeSByZXBvcnQuLi4nKTtcblxuICAgIGNvbnN0IFtjdXJyZW50TWV0cmljcywgcGhhc2VWYWxpZGF0aW9uc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLm1ldHJpY3NDb2xsZWN0b3IuY29sbGVjdERldGFpbGVkTWV0cmljcygpLFxuICAgICAgdGhpcy52YWxpZGF0aW9uU3lzdGVtLnZhbGlkYXRlQWxsUGhhc2VzKCksXG4gICAgXSk7XG5cbiAgICBjb25zdCBvdmVyYWxsU3RhdHVzID0gdGhpcy5kZXRlcm1pbmVPdmVyYWxsU3RhdHVzKHBoYXNlVmFsaWRhdGlvbnMpO1xuICAgIGNvbnN0IG92ZXJhbGxQcm9ncmVzcyA9IHRoaXMuY2FsY3VsYXRlT3ZlcmFsbFByb2dyZXNzKHBoYXNlVmFsaWRhdGlvbnMpO1xuICAgIGNvbnN0IHBoYXNlcyA9IHRoaXMuZ2VuZXJhdGVQaGFzZVByb2dyZXNzU3VtbWFyaWVzKHBoYXNlVmFsaWRhdGlvbnMpO1xuICAgIGNvbnN0IGtleUFjaGlldmVtZW50cyA9IHRoaXMuaWRlbnRpZnlLZXlBY2hpZXZlbWVudHMoXG4gICAgICBjdXJyZW50TWV0cmljcyxcbiAgICAgIHBoYXNlVmFsaWRhdGlvbnNcbiAgICApO1xuICAgIGNvbnN0IGNyaXRpY2FsSXNzdWVzID0gdGhpcy5pZGVudGlmeUNyaXRpY2FsSXNzdWVzKHBoYXNlVmFsaWRhdGlvbnMpO1xuICAgIGNvbnN0IHBlcmZvcm1hbmNlTWV0cmljcyA9IHRoaXMuY3JlYXRlUGVyZm9ybWFuY2VTbmFwc2hvdChjdXJyZW50TWV0cmljcyk7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgIHBoYXNlVmFsaWRhdGlvbnMsXG4gICAgICBjdXJyZW50TWV0cmljc1xuICAgICk7XG4gICAgY29uc3QgZXN0aW1hdGVkQ29tcGxldGlvbiA9IHRoaXMuZXN0aW1hdGVDb21wbGV0aW9uRGF0ZShcbiAgICAgIG92ZXJhbGxQcm9ncmVzcyxcbiAgICAgIGN1cnJlbnRNZXRyaWNzXG4gICAgKTtcbiAgICBjb25zdCBleGVjdXRpdmVTdW1tYXJ5ID0gdGhpcy5nZW5lcmF0ZUV4ZWN1dGl2ZVN1bW1hcnkoXG4gICAgICBvdmVyYWxsU3RhdHVzLFxuICAgICAgb3ZlcmFsbFByb2dyZXNzLFxuICAgICAga2V5QWNoaWV2ZW1lbnRzLFxuICAgICAgY3JpdGljYWxJc3N1ZXNcbiAgICApO1xuXG4gICAgY29uc3QgcmVwb3J0OiBDYW1wYWlnblN1bW1hcnlSZXBvcnQgPSB7XG4gICAgICBjYW1wYWlnbklkOiAncGVyZmVjdC1jb2RlYmFzZS1jYW1wYWlnbicsXG4gICAgICBnZW5lcmF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIG92ZXJhbGxTdGF0dXMsXG4gICAgICBvdmVyYWxsUHJvZ3Jlc3MsXG4gICAgICBwaGFzZXMsXG4gICAgICBrZXlBY2hpZXZlbWVudHMsXG4gICAgICBjcml0aWNhbElzc3VlcyxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljcyxcbiAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgIGVzdGltYXRlZENvbXBsZXRpb24sXG4gICAgICBleGVjdXRpdmVTdW1tYXJ5LFxuICAgIH07XG5cbiAgICB0aGlzLnJlcG9ydEhpc3RvcnkucHVzaChyZXBvcnQpO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYOKchSBDYW1wYWlnbiBzdW1tYXJ5IHJlcG9ydCBnZW5lcmF0ZWQ6ICR7b3ZlcmFsbFByb2dyZXNzfSUgY29tcGxldGVgXG4gICAgKTtcblxuICAgIHJldHVybiByZXBvcnQ7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZGV0YWlsZWQgcGhhc2UgY29tcGxldGlvbiByZXBvcnRcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlUGhhc2VDb21wbGV0aW9uUmVwb3J0KHBoYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8UGhhc2VSZXBvcnQ+IHtcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBHZW5lcmF0aW5nIHBoYXNlIGNvbXBsZXRpb24gcmVwb3J0IGZvciAke3BoYXNlSWR9Li4uYCk7XG5cbiAgICBjb25zdCBjdXJyZW50TWV0cmljcyA9IGF3YWl0IHRoaXMubWV0cmljc0NvbGxlY3Rvci5jb2xsZWN0RGV0YWlsZWRNZXRyaWNzKCk7XG4gICAgbGV0IHBoYXNlVmFsaWRhdGlvbjogUGhhc2VWYWxpZGF0aW9uUmVzdWx0O1xuXG4gICAgc3dpdGNoIChwaGFzZUlkKSB7XG4gICAgICBjYXNlICdwaGFzZTEnOlxuICAgICAgICBwaGFzZVZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRpb25TeXN0ZW0udmFsaWRhdGVQaGFzZTEoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwaGFzZTInOlxuICAgICAgICBwaGFzZVZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRpb25TeXN0ZW0udmFsaWRhdGVQaGFzZTIoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwaGFzZTMnOlxuICAgICAgICBwaGFzZVZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRpb25TeXN0ZW0udmFsaWRhdGVQaGFzZTMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwaGFzZTQnOlxuICAgICAgICBwaGFzZVZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRpb25TeXN0ZW0udmFsaWRhdGVQaGFzZTQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcGhhc2U6ICR7cGhhc2VJZH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBhY2hpZXZlbWVudHMgPSB0aGlzLmdlbmVyYXRlUGhhc2VBY2hpZXZlbWVudHMoXG4gICAgICBwaGFzZVZhbGlkYXRpb24sXG4gICAgICBjdXJyZW50TWV0cmljc1xuICAgICk7XG4gICAgY29uc3QgaXNzdWVzID0gdGhpcy5nZW5lcmF0ZVBoYXNlSXNzdWVzKHBoYXNlVmFsaWRhdGlvbik7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZVBoYXNlUmVjb21tZW5kYXRpb25zKHBoYXNlVmFsaWRhdGlvbik7XG5cbiAgICBjb25zdCByZXBvcnQ6IFBoYXNlUmVwb3J0ID0ge1xuICAgICAgcGhhc2VJZDogcGhhc2VWYWxpZGF0aW9uLnBoYXNlSWQsXG4gICAgICBwaGFzZU5hbWU6IHBoYXNlVmFsaWRhdGlvbi5waGFzZU5hbWUsXG4gICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCksIC8vIFRoaXMgc2hvdWxkIGJlIHRyYWNrZWQgcHJvcGVybHkgaW4gYSByZWFsIGltcGxlbWVudGF0aW9uXG4gICAgICBlbmRUaW1lOiBwaGFzZVZhbGlkYXRpb24ub3ZlcmFsbFN1Y2Nlc3MgPyBuZXcgRGF0ZSgpIDogdW5kZWZpbmVkLFxuICAgICAgc3RhdHVzOiBwaGFzZVZhbGlkYXRpb24ub3ZlcmFsbFN1Y2Nlc3NcbiAgICAgICAgPyBQaGFzZVN0YXR1cy5DT01QTEVURURcbiAgICAgICAgOiBQaGFzZVN0YXR1cy5JTl9QUk9HUkVTUyxcbiAgICAgIG1ldHJpY3M6IGN1cnJlbnRNZXRyaWNzLFxuICAgICAgYWNoaWV2ZW1lbnRzLFxuICAgICAgaXNzdWVzLFxuICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGDinIUgUGhhc2UgJHtwaGFzZUlkfSByZXBvcnQgZ2VuZXJhdGVkOiAke3BoYXNlVmFsaWRhdGlvbi5vdmVyYWxsU3VjY2VzcyA/ICdDT01QTEVURUQnIDogJ0lOIFBST0dSRVNTJ31gXG4gICAgKTtcbiAgICByZXR1cm4gcmVwb3J0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHZpc3VhbGl6YXRpb24gZGF0YSBmb3IgY2hhcnRzIGFuZCBncmFwaHNcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlVmlzdWFsaXphdGlvbkRhdGEoKTogUHJvbWlzZTxWaXN1YWxpemF0aW9uRGF0YT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5OKIEdlbmVyYXRpbmcgdmlzdWFsaXphdGlvbiBkYXRhLi4uJyk7XG5cbiAgICBjb25zdCBzbmFwc2hvdHMgPSB0aGlzLm1ldHJpY3NDb2xsZWN0b3IuZ2V0U25hcHNob3RzKCk7XG4gICAgY29uc3QgcGhhc2VWYWxpZGF0aW9ucyA9IGF3YWl0IHRoaXMudmFsaWRhdGlvblN5c3RlbS52YWxpZGF0ZUFsbFBoYXNlcygpO1xuICAgIGNvbnN0IGN1cnJlbnRNZXRyaWNzID0gYXdhaXQgdGhpcy5tZXRyaWNzQ29sbGVjdG9yLmNvbGxlY3REZXRhaWxlZE1ldHJpY3MoKTtcblxuICAgIGNvbnN0IHRpbWVTZXJpZXNEYXRhID0gdGhpcy5nZW5lcmF0ZVRpbWVTZXJpZXNEYXRhKHNuYXBzaG90cyk7XG4gICAgY29uc3QgcGhhc2VQcm9ncmVzc0NoYXJ0ID1cbiAgICAgIHRoaXMuZ2VuZXJhdGVQaGFzZVByb2dyZXNzQ2hhcnQocGhhc2VWYWxpZGF0aW9ucyk7XG4gICAgY29uc3QgZXJyb3JEaXN0cmlidXRpb25DaGFydCA9XG4gICAgICB0aGlzLmdlbmVyYXRlRXJyb3JEaXN0cmlidXRpb25DaGFydChjdXJyZW50TWV0cmljcyk7XG4gICAgY29uc3QgcGVyZm9ybWFuY2VUcmVuZENoYXJ0ID0gdGhpcy5nZW5lcmF0ZVBlcmZvcm1hbmNlVHJlbmRDaGFydChzbmFwc2hvdHMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbWVTZXJpZXNEYXRhLFxuICAgICAgcGhhc2VQcm9ncmVzc0NoYXJ0LFxuICAgICAgZXJyb3JEaXN0cmlidXRpb25DaGFydCxcbiAgICAgIHBlcmZvcm1hbmNlVHJlbmRDaGFydCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydCBjb21wcmVoZW5zaXZlIHJlcG9ydCB0byBtdWx0aXBsZSBmb3JtYXRzXG4gICAqL1xuICBhc3luYyBleHBvcnRSZXBvcnQoXG4gICAgcmVwb3J0OiBDYW1wYWlnblN1bW1hcnlSZXBvcnQsXG4gICAgZm9ybWF0czogKCdqc29uJyB8ICdodG1sJyB8ICdtYXJrZG93bicgfCAnY3N2JylbXSA9IFsnanNvbiddXG4gICk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBleHBvcnRlZEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJyk7XG4gICAgY29uc3QgYmFzZUZpbGVOYW1lID0gYGNhbXBhaWduLXJlcG9ydC0ke3RpbWVzdGFtcH1gO1xuXG4gICAgZm9yIChjb25zdCBmb3JtYXQgb2YgZm9ybWF0cykge1xuICAgICAgbGV0IGZpbGVQYXRoOiBzdHJpbmc7XG4gICAgICBsZXQgY29udGVudDogc3RyaW5nO1xuXG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICdqc29uJzpcbiAgICAgICAgICBmaWxlUGF0aCA9IGAke2Jhc2VGaWxlTmFtZX0uanNvbmA7XG4gICAgICAgICAgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KHJlcG9ydCwgbnVsbCwgMik7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICAgICAgZmlsZVBhdGggPSBgJHtiYXNlRmlsZU5hbWV9Lmh0bWxgO1xuICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmdlbmVyYXRlSFRNTFJlcG9ydChyZXBvcnQpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ21hcmtkb3duJzpcbiAgICAgICAgICBmaWxlUGF0aCA9IGAke2Jhc2VGaWxlTmFtZX0ubWRgO1xuICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmdlbmVyYXRlTWFya2Rvd25SZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdjc3YnOlxuICAgICAgICAgIGZpbGVQYXRoID0gYCR7YmFzZUZpbGVOYW1lfS5jc3ZgO1xuICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmdlbmVyYXRlQ1NWUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICBleHBvcnRlZEZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYPCfk4QgUmVwb3J0IGV4cG9ydGVkIHRvOiAke2ZpbGVQYXRofWApO1xuICAgIH1cblxuICAgIHJldHVybiBleHBvcnRlZEZpbGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJlYWwtdGltZSBkYXNoYm9hcmQgZGF0YVxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVEYXNoYm9hcmREYXRhKCk6IFByb21pc2U8e1xuICAgIHN1bW1hcnk6IENhbXBhaWduU3VtbWFyeVJlcG9ydDtcbiAgICB2aXN1YWxpemF0aW9uOiBWaXN1YWxpemF0aW9uRGF0YTtcbiAgICByZWNlbnRBY3Rpdml0eTogQWN0aXZpdHlJdGVtW107XG4gIH0+IHtcbiAgICBjb25zdCBbc3VtbWFyeSwgdmlzdWFsaXphdGlvbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmdlbmVyYXRlQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0KCksXG4gICAgICB0aGlzLmdlbmVyYXRlVmlzdWFsaXphdGlvbkRhdGEoKSxcbiAgICBdKTtcblxuICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5ID0gdGhpcy5nZW5lcmF0ZVJlY2VudEFjdGl2aXR5KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VtbWFyeSxcbiAgICAgIHZpc3VhbGl6YXRpb24sXG4gICAgICByZWNlbnRBY3Rpdml0eSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcbiAgICovXG4gIHByaXZhdGUgZGV0ZXJtaW5lT3ZlcmFsbFN0YXR1cyhcbiAgICBwaGFzZVZhbGlkYXRpb25zOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRbXVxuICApOiBDYW1wYWlnblN0YXR1cyB7XG4gICAgY29uc3QgY29tcGxldGVkUGhhc2VzID0gcGhhc2VWYWxpZGF0aW9ucy5maWx0ZXIoXG4gICAgICBwID0+IHAub3ZlcmFsbFN1Y2Nlc3NcbiAgICApLmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbFBoYXNlcyA9IHBoYXNlVmFsaWRhdGlvbnMubGVuZ3RoO1xuICAgIGNvbnN0IGhhc0Jsb2NrZXJzID0gcGhhc2VWYWxpZGF0aW9ucy5zb21lKFxuICAgICAgcCA9PiBwLmNyaXRpY2FsRmFpbHVyZXMubGVuZ3RoID4gMFxuICAgICk7XG5cbiAgICBpZiAoY29tcGxldGVkUGhhc2VzID09PSB0b3RhbFBoYXNlcykge1xuICAgICAgcmV0dXJuIENhbXBhaWduU3RhdHVzLkNPTVBMRVRFRDtcbiAgICB9IGVsc2UgaWYgKGhhc0Jsb2NrZXJzKSB7XG4gICAgICByZXR1cm4gQ2FtcGFpZ25TdGF0dXMuQkxPQ0tFRDtcbiAgICB9IGVsc2UgaWYgKGNvbXBsZXRlZFBoYXNlcyA+IDApIHtcbiAgICAgIHJldHVybiBDYW1wYWlnblN0YXR1cy5JTl9QUk9HUkVTUztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENhbXBhaWduU3RhdHVzLk5PVF9TVEFSVEVEO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlT3ZlcmFsbFByb2dyZXNzKFxuICAgIHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdXG4gICk6IG51bWJlciB7XG4gICAgaWYgKHBoYXNlVmFsaWRhdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IHRvdGFsUHJvZ3Jlc3MgPSBwaGFzZVZhbGlkYXRpb25zLnJlZHVjZShcbiAgICAgIChzdW0sIHBoYXNlKSA9PiBzdW0gKyBwaGFzZS5jb21wbGV0aW9uUGVyY2VudGFnZSxcbiAgICAgIDBcbiAgICApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsUHJvZ3Jlc3MgLyBwaGFzZVZhbGlkYXRpb25zLmxlbmd0aCk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUGhhc2VQcm9ncmVzc1N1bW1hcmllcyhcbiAgICBwaGFzZVZhbGlkYXRpb25zOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRbXVxuICApOiBQaGFzZVByb2dyZXNzU3VtbWFyeVtdIHtcbiAgICByZXR1cm4gcGhhc2VWYWxpZGF0aW9ucy5tYXAodmFsaWRhdGlvbiA9PiAoe1xuICAgICAgcGhhc2VJZDogdmFsaWRhdGlvbi5waGFzZUlkLFxuICAgICAgcGhhc2VOYW1lOiB2YWxpZGF0aW9uLnBoYXNlTmFtZSxcbiAgICAgIHN0YXR1czogdmFsaWRhdGlvbi5vdmVyYWxsU3VjY2Vzc1xuICAgICAgICA/IFBoYXNlU3RhdHVzLkNPTVBMRVRFRFxuICAgICAgICA6IFBoYXNlU3RhdHVzLklOX1BST0dSRVNTLFxuICAgICAgcHJvZ3Jlc3M6IHZhbGlkYXRpb24uY29tcGxldGlvblBlcmNlbnRhZ2UsXG4gICAgICBrZXlNZXRyaWNzOiB0aGlzLmV4dHJhY3RLZXlNZXRyaWNzKHZhbGlkYXRpb24pLFxuICAgICAgbWlsZXN0b25lczogdmFsaWRhdGlvbi5taWxlc3RvbmVzLm1hcChtID0+ICh7XG4gICAgICAgIG5hbWU6IG0ubWlsZXN0b25lLFxuICAgICAgICBjb21wbGV0ZWQ6IG0uc3VjY2VzcyxcbiAgICAgICAgY29tcGxldGlvbkRhdGU6IG0uc3VjY2VzcyA/IG0udGltZXN0YW1wIDogdW5kZWZpbmVkLFxuICAgICAgICBjcml0aWNhbFBhdGg6IHRydWUsIC8vIEFsbCBtaWxlc3RvbmVzIGFyZSBjcml0aWNhbCBpbiB0aGlzIGNhbXBhaWduXG4gICAgICB9KSksXG4gICAgICBibG9ja2VyczogdmFsaWRhdGlvbi5jcml0aWNhbEZhaWx1cmVzLFxuICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgaWRlbnRpZnlLZXlBY2hpZXZlbWVudHMoXG4gICAgbWV0cmljczogRGV0YWlsZWRNZXRyaWNzLFxuICAgIHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdXG4gICk6IEFjaGlldmVtZW50W10ge1xuICAgIGNvbnN0IGFjaGlldmVtZW50czogQWNoaWV2ZW1lbnRbXSA9IFtdO1xuXG4gICAgLy8gVHlwZVNjcmlwdCBlcnJvciBhY2hpZXZlbWVudHNcbiAgICBpZiAobWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQgPT09IDApIHtcbiAgICAgIGFjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgdGl0bGU6ICdaZXJvIFR5cGVTY3JpcHQgRXJyb3JzIEFjaGlldmVkJyxcbiAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgJ1N1Y2Nlc3NmdWxseSBlbGltaW5hdGVkIGFsbCA4NiBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGVycm9ycycsXG4gICAgICAgIHBoYXNlOiAncGhhc2UxJyxcbiAgICAgICAgYWNoaWV2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgaW1wYWN0OiBBY2hpZXZlbWVudEltcGFjdC5DUklUSUNBTCxcbiAgICAgICAgbWV0cmljczoge1xuICAgICAgICAgIGVycm9yc0VsaW1pbmF0ZWQ6IDg2LFxuICAgICAgICAgIHJlZHVjdGlvblBlcmNlbnRhZ2U6IDEwMCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIExpbnRpbmcgd2FybmluZyBhY2hpZXZlbWVudHNcbiAgICBpZiAobWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCA9PT0gMCkge1xuICAgICAgYWNoaWV2ZW1lbnRzLnB1c2goe1xuICAgICAgICB0aXRsZTogJ1plcm8gTGludGluZyBXYXJuaW5ncyBBY2hpZXZlZCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU3VjY2Vzc2Z1bGx5IGVsaW1pbmF0ZWQgYWxsIDQsNTA2IGxpbnRpbmcgd2FybmluZ3MnLFxuICAgICAgICBwaGFzZTogJ3BoYXNlMicsXG4gICAgICAgIGFjaGlldmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGltcGFjdDogQWNoaWV2ZW1lbnRJbXBhY3QuQ1JJVElDQUwsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICB3YXJuaW5nc0VsaW1pbmF0ZWQ6IDQ1MDYsXG4gICAgICAgICAgcmVkdWN0aW9uUGVyY2VudGFnZTogMTAwLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRW50ZXJwcmlzZSBzeXN0ZW0gYWNoaWV2ZW1lbnRzXG4gICAgaWYgKG1ldHJpY3MuZW50ZXJwcmlzZVN5c3RlbXMuY3VycmVudCA+PSAyMDApIHtcbiAgICAgIGFjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgdGl0bGU6ICdFbnRlcnByaXNlIEludGVsbGlnZW5jZSBUYXJnZXQgQWNoaWV2ZWQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFN1Y2Nlc3NmdWxseSBjcmVhdGVkICR7bWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50fSBlbnRlcnByaXNlIGludGVsbGlnZW5jZSBzeXN0ZW1zYCxcbiAgICAgICAgcGhhc2U6ICdwaGFzZTMnLFxuICAgICAgICBhY2hpZXZlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBpbXBhY3Q6IEFjaGlldmVtZW50SW1wYWN0LkhJR0gsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBzeXN0ZW1zQ3JlYXRlZDogbWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50LFxuICAgICAgICAgIHRhcmdldEFjaGlldmVtZW50OiAobWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50IC8gMjAwKSAqIDEwMCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm1hbmNlIGFjaGlldmVtZW50c1xuICAgIGlmIChtZXRyaWNzLmJ1aWxkUGVyZm9ybWFuY2UuY3VycmVudFRpbWUgPD0gMTApIHtcbiAgICAgIGFjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgdGl0bGU6ICdCdWlsZCBQZXJmb3JtYW5jZSBUYXJnZXQgQWNoaWV2ZWQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYEJ1aWxkIHRpbWUgb3B0aW1pemVkIHRvICR7bWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lfXMgKHRhcmdldDogMTBzKWAsXG4gICAgICAgIHBoYXNlOiAncGhhc2U0JyxcbiAgICAgICAgYWNoaWV2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgaW1wYWN0OiBBY2hpZXZlbWVudEltcGFjdC5ISUdILFxuICAgICAgICBtZXRyaWNzOiB7XG4gICAgICAgICAgYnVpbGRUaW1lOiBtZXRyaWNzLmJ1aWxkUGVyZm9ybWFuY2UuY3VycmVudFRpbWUsXG4gICAgICAgICAgdGFyZ2V0VGltZTogMTAsXG4gICAgICAgICAgaW1wcm92ZW1lbnQ6IDEwIC0gbWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjaGlldmVtZW50cztcbiAgfVxuXG4gIHByaXZhdGUgaWRlbnRpZnlDcml0aWNhbElzc3VlcyhcbiAgICBwaGFzZVZhbGlkYXRpb25zOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRbXVxuICApOiBJc3N1ZVtdIHtcbiAgICBjb25zdCBpc3N1ZXM6IElzc3VlW10gPSBbXTtcblxuICAgIHBoYXNlVmFsaWRhdGlvbnMuZm9yRWFjaChwaGFzZSA9PiB7XG4gICAgICBwaGFzZS5jcml0aWNhbEZhaWx1cmVzLmZvckVhY2goZmFpbHVyZSA9PiB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICB0aXRsZTogYCR7cGhhc2UucGhhc2VOYW1lfSBDcml0aWNhbCBGYWlsdXJlYCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZmFpbHVyZSxcbiAgICAgICAgICBwaGFzZTogcGhhc2UucGhhc2VJZCxcbiAgICAgICAgICBzZXZlcml0eTogSXNzdWVTZXZlcml0eS5DUklUSUNBTCxcbiAgICAgICAgICBkZXRlY3RlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGVzdGltYXRlZFJlc29sdXRpb25UaW1lOiB0aGlzLmVzdGltYXRlUmVzb2x1dGlvblRpbWUoZmFpbHVyZSksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQZXJmb3JtYW5jZVNuYXBzaG90KFxuICAgIG1ldHJpY3M6IERldGFpbGVkTWV0cmljc1xuICApOiBQZXJmb3JtYW5jZVNuYXBzaG90IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZVNjcmlwdEVycm9yczoge1xuICAgICAgICBpbml0aWFsOiA4NixcbiAgICAgICAgY3VycmVudDogbWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQsXG4gICAgICAgIHJlZHVjdGlvbjogbWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLnJlZHVjdGlvbixcbiAgICAgICAgcmVkdWN0aW9uUmF0ZTogbWV0cmljcy50cmVuZERhdGEuZXJyb3JSZWR1Y3Rpb25SYXRlLFxuICAgICAgfSxcbiAgICAgIGxpbnRpbmdXYXJuaW5nczoge1xuICAgICAgICBpbml0aWFsOiA0NTA2LFxuICAgICAgICBjdXJyZW50OiBtZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50LFxuICAgICAgICByZWR1Y3Rpb246IG1ldHJpY3MubGludGluZ1dhcm5pbmdzLnJlZHVjdGlvbixcbiAgICAgICAgcmVkdWN0aW9uUmF0ZTogbWV0cmljcy50cmVuZERhdGEud2FybmluZ1JlZHVjdGlvblJhdGUsXG4gICAgICB9LFxuICAgICAgYnVpbGRQZXJmb3JtYW5jZToge1xuICAgICAgICBjdXJyZW50VGltZTogbWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lLFxuICAgICAgICB0YXJnZXRUaW1lOiAxMCxcbiAgICAgICAgaW1wcm92ZW1lbnQ6IG1ldHJpY3MudHJlbmREYXRhLmJ1aWxkVGltZUltcHJvdmVtZW50LFxuICAgICAgICBjYWNoZUVmZmljaWVuY3k6IG1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jYWNoZUhpdFJhdGUsXG4gICAgICB9LFxuICAgICAgZW50ZXJwcmlzZVN5c3RlbXM6IHtcbiAgICAgICAgaW5pdGlhbDogMCxcbiAgICAgICAgY3VycmVudDogbWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50LFxuICAgICAgICB0YXJnZXQ6IDIwMCxcbiAgICAgICAgZ3Jvd3RoUmF0ZTogbWV0cmljcy50cmVuZERhdGEuc3lzdGVtR3Jvd3RoUmF0ZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoXG4gICAgcGhhc2VWYWxpZGF0aW9uczogUGhhc2VWYWxpZGF0aW9uUmVzdWx0W10sXG4gICAgbWV0cmljczogRGV0YWlsZWRNZXRyaWNzXG4gICk6IFJlY29tbWVuZGF0aW9uW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSA9IFtdO1xuXG4gICAgcGhhc2VWYWxpZGF0aW9ucy5mb3JFYWNoKHBoYXNlID0+IHtcbiAgICAgIGlmICghcGhhc2Uub3ZlcmFsbFN1Y2Nlc3MpIHtcbiAgICAgICAgcGhhc2UubmV4dFN0ZXBzLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IGAke3BoYXNlLnBoYXNlTmFtZX0gSW1wcm92ZW1lbnRgLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHN0ZXAsXG4gICAgICAgICAgICBwcmlvcml0eTogdGhpcy5kZXRlcm1pbmVQcmlvcml0eShzdGVwKSxcbiAgICAgICAgICAgIHBoYXNlOiBwaGFzZS5waGFzZUlkLFxuICAgICAgICAgICAgZXN0aW1hdGVkSW1wYWN0OiB0aGlzLmVzdGltYXRlSW1wYWN0KHN0ZXApLFxuICAgICAgICAgICAgYWN0aW9uSXRlbXM6IHRoaXMuZ2VuZXJhdGVBY3Rpb25JdGVtcyhzdGVwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgcHJpdmF0ZSBlc3RpbWF0ZUNvbXBsZXRpb25EYXRlKFxuICAgIG92ZXJhbGxQcm9ncmVzczogbnVtYmVyLFxuICAgIG1ldHJpY3M6IERldGFpbGVkTWV0cmljc1xuICApOiBEYXRlIHtcbiAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICBpZiAob3ZlcmFsbFByb2dyZXNzID49IDEwMCkge1xuICAgICAgcmV0dXJuIGNvbXBsZXRpb25EYXRlOyAvLyBBbHJlYWR5IGNvbXBsZXRlXG4gICAgfVxuXG4gICAgLy8gRXN0aW1hdGUgYmFzZWQgb24gY3VycmVudCBwcm9ncmVzcyByYXRlXG4gICAgY29uc3QgcmVtYWluaW5nUHJvZ3Jlc3MgPSAxMDAgLSBvdmVyYWxsUHJvZ3Jlc3M7XG4gICAgY29uc3QgYXZlcmFnZVJhdGUgPVxuICAgICAgKG1ldHJpY3MudHJlbmREYXRhLmVycm9yUmVkdWN0aW9uUmF0ZSArXG4gICAgICAgIG1ldHJpY3MudHJlbmREYXRhLndhcm5pbmdSZWR1Y3Rpb25SYXRlICtcbiAgICAgICAgbWV0cmljcy50cmVuZERhdGEuc3lzdGVtR3Jvd3RoUmF0ZSkgL1xuICAgICAgMztcblxuICAgIGNvbnN0IGVzdGltYXRlZEhvdXJzID1cbiAgICAgIGF2ZXJhZ2VSYXRlID4gMCA/IHJlbWFpbmluZ1Byb2dyZXNzIC8gYXZlcmFnZVJhdGUgOiAxNjg7IC8vIERlZmF1bHQgdG8gMSB3ZWVrXG4gICAgY29tcGxldGlvbkRhdGUuc2V0SG91cnMoY29tcGxldGlvbkRhdGUuZ2V0SG91cnMoKSArIGVzdGltYXRlZEhvdXJzKTtcblxuICAgIHJldHVybiBjb21wbGV0aW9uRGF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVFeGVjdXRpdmVTdW1tYXJ5KFxuICAgIHN0YXR1czogQ2FtcGFpZ25TdGF0dXMsXG4gICAgcHJvZ3Jlc3M6IG51bWJlcixcbiAgICBhY2hpZXZlbWVudHM6IEFjaGlldmVtZW50W10sXG4gICAgaXNzdWVzOiBJc3N1ZVtdXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3Qgc3RhdHVzVGV4dCA9XG4gICAgICBzdGF0dXMgPT09IENhbXBhaWduU3RhdHVzLkNPTVBMRVRFRFxuICAgICAgICA/ICdjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICA6IHN0YXR1cyA9PT0gQ2FtcGFpZ25TdGF0dXMuSU5fUFJPR1JFU1NcbiAgICAgICAgICA/ICdpbiBwcm9ncmVzcydcbiAgICAgICAgICA6IHN0YXR1cyA9PT0gQ2FtcGFpZ25TdGF0dXMuQkxPQ0tFRFxuICAgICAgICAgICAgPyAnY3VycmVudGx5IGJsb2NrZWQnXG4gICAgICAgICAgICA6ICdub3Qgc3RhcnRlZCc7XG5cbiAgICBjb25zdCBhY2hpZXZlbWVudFRleHQgPVxuICAgICAgYWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgS2V5IGFjaGlldmVtZW50cyBpbmNsdWRlOiAke2FjaGlldmVtZW50cy5tYXAoYSA9PiBhLnRpdGxlKS5qb2luKCcsICcpfS5gXG4gICAgICAgIDogJyc7XG5cbiAgICBjb25zdCBpc3N1ZVRleHQgPVxuICAgICAgaXNzdWVzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgQ3JpdGljYWwgaXNzdWVzIHJlcXVpcmluZyBhdHRlbnRpb246ICR7aXNzdWVzLmxlbmd0aH0gaXRlbXMgaWRlbnRpZmllZC5gXG4gICAgICAgIDogJ05vIGNyaXRpY2FsIGlzc3VlcyBpZGVudGlmaWVkLic7XG5cbiAgICByZXR1cm4gYFRoZSBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIGlzICR7c3RhdHVzVGV4dH0gd2l0aCAke3Byb2dyZXNzfSUgb3ZlcmFsbCBjb21wbGV0aW9uLiAke2FjaGlldmVtZW50VGV4dH0gJHtpc3N1ZVRleHR9YDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVUaW1lU2VyaWVzRGF0YShcbiAgICBzbmFwc2hvdHM6IE1ldHJpY3NTbmFwc2hvdFtdXG4gICk6IFRpbWVTZXJpZXNQb2ludFtdIHtcbiAgICByZXR1cm4gc25hcHNob3RzLm1hcChzbmFwc2hvdCA9PiAoe1xuICAgICAgdGltZXN0YW1wOiBzbmFwc2hvdC50aW1lc3RhbXAsXG4gICAgICB0eXBlU2NyaXB0RXJyb3JzOiBzbmFwc2hvdC5tZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCxcbiAgICAgIGxpbnRpbmdXYXJuaW5nczogc25hcHNob3QubWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCxcbiAgICAgIGJ1aWxkVGltZTogc25hcHNob3QubWV0cmljcy5idWlsZFBlcmZvcm1hbmNlLmN1cnJlbnRUaW1lLFxuICAgICAgZW50ZXJwcmlzZVN5c3RlbXM6IHNuYXBzaG90Lm1ldHJpY3MuZW50ZXJwcmlzZVN5c3RlbXMuY3VycmVudCxcbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUGhhc2VQcm9ncmVzc0NoYXJ0KFxuICAgIHBoYXNlVmFsaWRhdGlvbnM6IFBoYXNlVmFsaWRhdGlvblJlc3VsdFtdXG4gICk6IFBoYXNlUHJvZ3Jlc3NQb2ludFtdIHtcbiAgICByZXR1cm4gcGhhc2VWYWxpZGF0aW9ucy5tYXAocGhhc2UgPT4gKHtcbiAgICAgIHBoYXNlOiBwaGFzZS5waGFzZU5hbWUsXG4gICAgICBwcm9ncmVzczogcGhhc2UuY29tcGxldGlvblBlcmNlbnRhZ2UsXG4gICAgICB0YXJnZXQ6IDEwMCxcbiAgICAgIHN0YXR1czogcGhhc2Uub3ZlcmFsbFN1Y2Nlc3NcbiAgICAgICAgPyBQaGFzZVN0YXR1cy5DT01QTEVURURcbiAgICAgICAgOiBQaGFzZVN0YXR1cy5JTl9QUk9HUkVTUyxcbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlRXJyb3JEaXN0cmlidXRpb25DaGFydChcbiAgICBtZXRyaWNzOiBEZXRhaWxlZE1ldHJpY3NcbiAgKTogRXJyb3JEaXN0cmlidXRpb25Qb2ludFtdIHtcbiAgICBjb25zdCBlcnJvckJyZWFrZG93biA9IG1ldHJpY3MuZXJyb3JCcmVha2Rvd24gfHwge307XG4gICAgY29uc3QgdG90YWxFcnJvcnMgPSBPYmplY3QudmFsdWVzKGVycm9yQnJlYWtkb3duKS5yZWR1Y2UoXG4gICAgICAoc3VtLCBjb3VudCkgPT4gc3VtICsgY291bnQsXG4gICAgICAwXG4gICAgKTtcblxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhlcnJvckJyZWFrZG93bikubWFwKChbZXJyb3JUeXBlLCBjb3VudF0pID0+ICh7XG4gICAgICBlcnJvclR5cGUsXG4gICAgICBjb3VudCxcbiAgICAgIHBlcmNlbnRhZ2U6IHRvdGFsRXJyb3JzID4gMCA/IE1hdGgucm91bmQoKGNvdW50IC8gdG90YWxFcnJvcnMpICogMTAwKSA6IDAsXG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBlcmZvcm1hbmNlVHJlbmRDaGFydChcbiAgICBzbmFwc2hvdHM6IE1ldHJpY3NTbmFwc2hvdFtdXG4gICk6IFBlcmZvcm1hbmNlVHJlbmRQb2ludFtdIHtcbiAgICByZXR1cm4gc25hcHNob3RzLm1hcChzbmFwc2hvdCA9PiAoe1xuICAgICAgdGltZXN0YW1wOiBzbmFwc2hvdC50aW1lc3RhbXAsXG4gICAgICBidWlsZFRpbWU6IHNuYXBzaG90Lm1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jdXJyZW50VGltZSxcbiAgICAgIG1lbW9yeVVzYWdlOiBzbmFwc2hvdC5tZXRyaWNzLmJ1aWxkUGVyZm9ybWFuY2UubWVtb3J5VXNhZ2UsXG4gICAgICBjYWNoZUhpdFJhdGU6IHNuYXBzaG90Lm1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS5jYWNoZUhpdFJhdGUsXG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUhUTUxSZXBvcnQocmVwb3J0OiBDYW1wYWlnblN1bW1hcnlSZXBvcnQpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG48IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPHRpdGxlPlBlcmZlY3QgQ29kZWJhc2UgQ2FtcGFpZ24gUmVwb3J0PC90aXRsZT5cbiAgICA8c3R5bGU+XG4gICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1hcmdpbjogNDBweDsgfVxuICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogI2Y1ZjVmNTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyB9XG4gICAgICAgIC5zdGF0dXMtJHtyZXBvcnQub3ZlcmFsbFN0YXR1cy50b0xvd2VyQ2FzZSgpfSB7IGNvbG9yOiAke3RoaXMuZ2V0U3RhdHVzQ29sb3IocmVwb3J0Lm92ZXJhbGxTdGF0dXMpfTsgfVxuICAgICAgICAucHJvZ3Jlc3MtYmFyIHsgYmFja2dyb3VuZDogI2UwZTBlMDsgaGVpZ2h0OiAyMHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyB9XG4gICAgICAgIC5wcm9ncmVzcy1maWxsIHsgYmFja2dyb3VuZDogIzRjYWY1MDsgaGVpZ2h0OiAxMDAlOyB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzOyB9XG4gICAgICAgIC5waGFzZSB7IG1hcmdpbjogMjBweCAwOyBwYWRkaW5nOiAxNXB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cbiAgICAgICAgLmFjaGlldmVtZW50IHsgYmFja2dyb3VuZDogI2U4ZjVlODsgcGFkZGluZzogMTBweDsgbWFyZ2luOiA1cHggMDsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgICAgIC5pc3N1ZSB7IGJhY2tncm91bmQ6ICNmZmU4ZTg7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbjogNXB4IDA7IGJvcmRlci1yYWRpdXM6IDVweDsgfVxuICAgIDwvc3R5bGU+XG48L2hlYWQ+XG48Ym9keT5cbiAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICAgIDxoMT5QZXJmZWN0IENvZGViYXNlIENhbXBhaWduIFJlcG9ydDwvaDE+XG4gICAgICAgIDxwPkdlbmVyYXRlZDogJHtyZXBvcnQuZ2VuZXJhdGVkQXQudG9Mb2NhbGVTdHJpbmcoKX08L3A+XG4gICAgICAgIDxwIGNsYXNzPVwic3RhdHVzLSR7cmVwb3J0Lm92ZXJhbGxTdGF0dXMudG9Mb3dlckNhc2UoKX1cIj5TdGF0dXM6ICR7cmVwb3J0Lm92ZXJhbGxTdGF0dXN9PC9wPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtZmlsbFwiIHN0eWxlPVwid2lkdGg6ICR7cmVwb3J0Lm92ZXJhbGxQcm9ncmVzc30lXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cD5Qcm9ncmVzczogJHtyZXBvcnQub3ZlcmFsbFByb2dyZXNzfSU8L3A+XG4gICAgPC9kaXY+XG5cbiAgICA8aDI+RXhlY3V0aXZlIFN1bW1hcnk8L2gyPlxuICAgIDxwPiR7cmVwb3J0LmV4ZWN1dGl2ZVN1bW1hcnl9PC9wPlxuXG4gICAgPGgyPlBoYXNlIFByb2dyZXNzPC9oMj5cbiAgICAke3JlcG9ydC5waGFzZXNcbiAgICAgIC5tYXAoXG4gICAgICAgIHBoYXNlID0+IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInBoYXNlXCI+XG4gICAgICAgICAgICA8aDM+JHtwaGFzZS5waGFzZU5hbWV9PC9oMz5cbiAgICAgICAgICAgIDxwPlN0YXR1czogJHtwaGFzZS5zdGF0dXN9PC9wPlxuICAgICAgICAgICAgPHA+UHJvZ3Jlc3M6ICR7cGhhc2UucHJvZ3Jlc3N9JTwvcD5cbiAgICAgICAgICAgIDxwPkJsb2NrZXJzOiAke3BoYXNlLmJsb2NrZXJzLmxlbmd0aCA+IDAgPyBwaGFzZS5ibG9ja2Vycy5qb2luKCcsICcpIDogJ05vbmUnfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgYFxuICAgICAgKVxuICAgICAgLmpvaW4oJycpfVxuXG4gICAgPGgyPktleSBBY2hpZXZlbWVudHM8L2gyPlxuICAgICR7cmVwb3J0LmtleUFjaGlldmVtZW50c1xuICAgICAgLm1hcChcbiAgICAgICAgYWNoaWV2ZW1lbnQgPT4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWNoaWV2ZW1lbnRcIj5cbiAgICAgICAgICAgIDxoND4ke2FjaGlldmVtZW50LnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICA8cD4ke2FjaGlldmVtZW50LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgIDxwPkltcGFjdDogJHthY2hpZXZlbWVudC5pbXBhY3R9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICBgXG4gICAgICApXG4gICAgICAuam9pbignJyl9XG5cbiAgICA8aDI+Q3JpdGljYWwgSXNzdWVzPC9oMj5cbiAgICAke3JlcG9ydC5jcml0aWNhbElzc3Vlc1xuICAgICAgLm1hcChcbiAgICAgICAgaXNzdWUgPT4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiaXNzdWVcIj5cbiAgICAgICAgICAgIDxoND4ke2lzc3VlLnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICA8cD4ke2lzc3VlLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgIDxwPlNldmVyaXR5OiAke2lzc3VlLnNldmVyaXR5fTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgYFxuICAgICAgKVxuICAgICAgLmpvaW4oJycpfVxuPC9ib2R5PlxuPC9odG1sPmA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlTWFya2Rvd25SZXBvcnQocmVwb3J0OiBDYW1wYWlnblN1bW1hcnlSZXBvcnQpOiBzdHJpbmcge1xuICAgIHJldHVybiBgIyBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIFJlcG9ydFxuXG4qKkdlbmVyYXRlZDoqKiAke3JlcG9ydC5nZW5lcmF0ZWRBdC50b0lTT1N0cmluZygpfVxuKipTdGF0dXM6KiogJHtyZXBvcnQub3ZlcmFsbFN0YXR1c31cbioqUHJvZ3Jlc3M6KiogJHtyZXBvcnQub3ZlcmFsbFByb2dyZXNzfSVcblxuIyMgRXhlY3V0aXZlIFN1bW1hcnlcblxuJHtyZXBvcnQuZXhlY3V0aXZlU3VtbWFyeX1cblxuIyMgUGhhc2UgUHJvZ3Jlc3NcblxuJHtyZXBvcnQucGhhc2VzXG4gIC5tYXAoXG4gICAgcGhhc2UgPT4gYFxuIyMjICR7cGhhc2UucGhhc2VOYW1lfVxuLSAqKlN0YXR1czoqKiAke3BoYXNlLnN0YXR1c31cbi0gKipQcm9ncmVzczoqKiAke3BoYXNlLnByb2dyZXNzfSVcbi0gKipCbG9ja2VyczoqKiAke3BoYXNlLmJsb2NrZXJzLmxlbmd0aCA+IDAgPyBwaGFzZS5ibG9ja2Vycy5qb2luKCcsICcpIDogJ05vbmUnfVxuYFxuICApXG4gIC5qb2luKCcnKX1cblxuIyMgS2V5IEFjaGlldmVtZW50c1xuXG4ke3JlcG9ydC5rZXlBY2hpZXZlbWVudHNcbiAgLm1hcChcbiAgICBhY2hpZXZlbWVudCA9PiBgXG4jIyMgJHthY2hpZXZlbWVudC50aXRsZX1cbiR7YWNoaWV2ZW1lbnQuZGVzY3JpcHRpb259XG4tICoqSW1wYWN0OioqICR7YWNoaWV2ZW1lbnQuaW1wYWN0fVxuLSAqKlBoYXNlOioqICR7YWNoaWV2ZW1lbnQucGhhc2V9XG5gXG4gIClcbiAgLmpvaW4oJycpfVxuXG4jIyBDcml0aWNhbCBJc3N1ZXNcblxuJHtyZXBvcnQuY3JpdGljYWxJc3N1ZXNcbiAgLm1hcChcbiAgICBpc3N1ZSA9PiBgXG4jIyMgJHtpc3N1ZS50aXRsZX1cbiR7aXNzdWUuZGVzY3JpcHRpb259XG4tICoqU2V2ZXJpdHk6KiogJHtpc3N1ZS5zZXZlcml0eX1cbi0gKipQaGFzZToqKiAke2lzc3VlLnBoYXNlfVxuYFxuICApXG4gIC5qb2luKCcnKX1cblxuIyMgUGVyZm9ybWFuY2UgTWV0cmljc1xuXG4tICoqVHlwZVNjcmlwdCBFcnJvcnM6KiogJHtyZXBvcnQucGVyZm9ybWFuY2VNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudH0gKCR7cmVwb3J0LnBlcmZvcm1hbmNlTWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLnJlZHVjdGlvbn0gcmVkdWNlZClcbi0gKipMaW50aW5nIFdhcm5pbmdzOioqICR7cmVwb3J0LnBlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudH0gKCR7cmVwb3J0LnBlcmZvcm1hbmNlTWV0cmljcy5saW50aW5nV2FybmluZ3MucmVkdWN0aW9ufSByZWR1Y2VkKVxuLSAqKkJ1aWxkIFRpbWU6KiogJHtyZXBvcnQucGVyZm9ybWFuY2VNZXRyaWNzLmJ1aWxkUGVyZm9ybWFuY2UuY3VycmVudFRpbWV9cyAodGFyZ2V0OiAke3JlcG9ydC5wZXJmb3JtYW5jZU1ldHJpY3MuYnVpbGRQZXJmb3JtYW5jZS50YXJnZXRUaW1lfXMpXG4tICoqRW50ZXJwcmlzZSBTeXN0ZW1zOioqICR7cmVwb3J0LnBlcmZvcm1hbmNlTWV0cmljcy5lbnRlcnByaXNlU3lzdGVtcy5jdXJyZW50fSAodGFyZ2V0OiAke3JlcG9ydC5wZXJmb3JtYW5jZU1ldHJpY3MuZW50ZXJwcmlzZVN5c3RlbXMudGFyZ2V0fSlcbmA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ1NWUmVwb3J0KHJlcG9ydDogQ2FtcGFpZ25TdW1tYXJ5UmVwb3J0KTogc3RyaW5nIHtcbiAgICBjb25zdCBoZWFkZXJzID0gWydQaGFzZScsICdTdGF0dXMnLCAnUHJvZ3Jlc3MnLCAnQmxvY2tlcnMnXTtcbiAgICBjb25zdCByb3dzID0gcmVwb3J0LnBoYXNlcy5tYXAocGhhc2UgPT4gW1xuICAgICAgcGhhc2UucGhhc2VOYW1lLFxuICAgICAgcGhhc2Uuc3RhdHVzLFxuICAgICAgcGhhc2UucHJvZ3Jlc3MudG9TdHJpbmcoKSxcbiAgICAgIHBoYXNlLmJsb2NrZXJzLmpvaW4oJzsgJyksXG4gICAgXSk7XG5cbiAgICByZXR1cm4gW2hlYWRlcnMsIC4uLnJvd3NdLm1hcChyb3cgPT4gcm93LmpvaW4oJywnKSkuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVjZW50QWN0aXZpdHkoKTogQWN0aXZpdHlJdGVtW10ge1xuICAgIC8vIFRoaXMgd291bGQgYmUgaW1wbGVtZW50ZWQgd2l0aCBhY3R1YWwgYWN0aXZpdHkgdHJhY2tpbmdcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIHR5cGU6ICdtaWxlc3RvbmUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1BoYXNlIHZhbGlkYXRpb24gY29tcGxldGVkJyxcbiAgICAgICAgcGhhc2U6ICdwaGFzZTEnLFxuICAgICAgfSxcbiAgICBdO1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZHNcbiAgcHJpdmF0ZSBleHRyYWN0S2V5TWV0cmljcyhcbiAgICB2YWxpZGF0aW9uOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRcbiAgKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiB2YWxpZGF0aW9uLmNvbXBsZXRpb25QZXJjZW50YWdlLFxuICAgICAgbWlsZXN0b25lc0NvbXBsZXRlZDogdmFsaWRhdGlvbi5taWxlc3RvbmVzLmZpbHRlcihtID0+IG0uc3VjY2VzcykubGVuZ3RoLFxuICAgICAgdG90YWxNaWxlc3RvbmVzOiB2YWxpZGF0aW9uLm1pbGVzdG9uZXMubGVuZ3RoLFxuICAgICAgY3JpdGljYWxGYWlsdXJlczogdmFsaWRhdGlvbi5jcml0aWNhbEZhaWx1cmVzLmxlbmd0aCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBoYXNlQWNoaWV2ZW1lbnRzKFxuICAgIHZhbGlkYXRpb246IFBoYXNlVmFsaWRhdGlvblJlc3VsdCxcbiAgICBtZXRyaWNzOiBEZXRhaWxlZE1ldHJpY3NcbiAgKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB2YWxpZGF0aW9uLm1pbGVzdG9uZXNcbiAgICAgIC5maWx0ZXIobSA9PiBtLnN1Y2Nlc3MpXG4gICAgICAubWFwKG0gPT4gYCR7bS5taWxlc3RvbmV9IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlgKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVQaGFzZUlzc3Vlcyh2YWxpZGF0aW9uOiBQaGFzZVZhbGlkYXRpb25SZXN1bHQpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb24uY3JpdGljYWxGYWlsdXJlcztcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVQaGFzZVJlY29tbWVuZGF0aW9ucyhcbiAgICB2YWxpZGF0aW9uOiBQaGFzZVZhbGlkYXRpb25SZXN1bHRcbiAgKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB2YWxpZGF0aW9uLm5leHRTdGVwcztcbiAgfVxuXG4gIHByaXZhdGUgZXN0aW1hdGVSZXNvbHV0aW9uVGltZShmYWlsdXJlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIC8vIFNpbXBsZSBoZXVyaXN0aWMgYmFzZWQgb24gZmFpbHVyZSB0eXBlXG4gICAgaWYgKGZhaWx1cmUuaW5jbHVkZXMoJ1R5cGVTY3JpcHQnKSkgcmV0dXJuIDQ7XG4gICAgaWYgKGZhaWx1cmUuaW5jbHVkZXMoJ2xpbnRpbmcnKSkgcmV0dXJuIDI7XG4gICAgaWYgKGZhaWx1cmUuaW5jbHVkZXMoJ2J1aWxkJykpIHJldHVybiA2O1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXRlcm1pbmVQcmlvcml0eShzdGVwOiBzdHJpbmcpOiBSZWNvbW1lbmRhdGlvblByaW9yaXR5IHtcbiAgICBpZiAoc3RlcC5pbmNsdWRlcygnY3JpdGljYWwnKSB8fCBzdGVwLmluY2x1ZGVzKCdibG9ja2VyJykpXG4gICAgICByZXR1cm4gUmVjb21tZW5kYXRpb25Qcmlvcml0eS5VUkdFTlQ7XG4gICAgaWYgKHN0ZXAuaW5jbHVkZXMoJ2Vycm9yJykgfHwgc3RlcC5pbmNsdWRlcygnZmFpbHVyZScpKVxuICAgICAgcmV0dXJuIFJlY29tbWVuZGF0aW9uUHJpb3JpdHkuSElHSDtcbiAgICByZXR1cm4gUmVjb21tZW5kYXRpb25Qcmlvcml0eS5NRURJVU07XG4gIH1cblxuICBwcml2YXRlIGVzdGltYXRlSW1wYWN0KHN0ZXA6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHN0ZXAuaW5jbHVkZXMoJ3plcm8nKSB8fCBzdGVwLmluY2x1ZGVzKCdjb21wbGV0ZScpKVxuICAgICAgcmV0dXJuICdIaWdoIC0gTWlsZXN0b25lIGNvbXBsZXRpb24nO1xuICAgIGlmIChzdGVwLmluY2x1ZGVzKCdyZWR1Y2UnKSB8fCBzdGVwLmluY2x1ZGVzKCdpbXByb3ZlJykpXG4gICAgICByZXR1cm4gJ01lZGl1bSAtIEluY3JlbWVudGFsIGltcHJvdmVtZW50JztcbiAgICByZXR1cm4gJ0xvdyAtIE1haW50ZW5hbmNlIHRhc2snO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUFjdGlvbkl0ZW1zKHN0ZXA6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAvLyBHZW5lcmF0ZSBzcGVjaWZpYyBhY3Rpb24gaXRlbXMgYmFzZWQgb24gdGhlIHN0ZXBcbiAgICByZXR1cm4gW2BFeGVjdXRlOiAke3N0ZXB9YCwgJ1ZhbGlkYXRlIHJlc3VsdHMnLCAnVXBkYXRlIHByb2dyZXNzIHRyYWNraW5nJ107XG4gIH1cblxuICBwcml2YXRlIGdldFN0YXR1c0NvbG9yKHN0YXR1czogQ2FtcGFpZ25TdGF0dXMpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlIENhbXBhaWduU3RhdHVzLkNPTVBMRVRFRDpcbiAgICAgICAgcmV0dXJuICcjNGNhZjUwJztcbiAgICAgIGNhc2UgQ2FtcGFpZ25TdGF0dXMuSU5fUFJPR1JFU1M6XG4gICAgICAgIHJldHVybiAnIzIxOTZmMyc7XG4gICAgICBjYXNlIENhbXBhaWduU3RhdHVzLkJMT0NLRUQ6XG4gICAgICAgIHJldHVybiAnI2ZmOTgwMCc7XG4gICAgICBjYXNlIENhbXBhaWduU3RhdHVzLkZBSUxFRDpcbiAgICAgICAgcmV0dXJuICcjZjQ0MzM2JztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnIzc1NzU3NSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZXBvcnQgaGlzdG9yeVxuICAgKi9cbiAgZ2V0UmVwb3J0SGlzdG9yeSgpOiBDYW1wYWlnblN1bW1hcnlSZXBvcnRbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnJlcG9ydEhpc3RvcnldO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIHJlcG9ydCBoaXN0b3J5XG4gICAqL1xuICBjbGVhclJlcG9ydEhpc3RvcnkoKTogdm9pZCB7XG4gICAgdGhpcy5yZXBvcnRIaXN0b3J5ID0gW107XG4gICAgY29uc29sZS5sb2coJ/Cfk4ogUmVwb3J0IGhpc3RvcnkgY2xlYXJlZCcpO1xuICB9XG59XG5cbmludGVyZmFjZSBBY3Rpdml0eUl0ZW0ge1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHR5cGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcGhhc2U6IHN0cmluZztcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==