cc146984af1dc7a0412ae187b34ee6de
"use strict";
// Cultural Analytics and Intelligence Service
// Implements cross-cultural compatibility analysis, cultural synergy scoring,
// and fusion cuisine recommendations for the CuisineRecommender component
Object.defineProperty(exports, "__esModule", { value: true });
exports.CulturalAnalyticsService = void 0;
const culturalrules_1 = require("@/data/culturalrules");
const culinaryTraditions_1 = require("@/data/cuisines/culinaryTraditions");
const logger_1 = require("@/utils/logger");
// ===== CULTURAL GROUPS AND PROXIMITY =====
const CULTURAL_GROUPS = {
    'east_asian': {
        cuisines: ['chinese', 'japanese', 'korean', 'vietnamese', 'thai', 'sichuanese'],
        characteristics: ['rice-based', 'umami-focused', 'balance-oriented', 'seasonal'],
        sharedPrinciples: ['five elements', 'yin-yang balance', 'seasonal harmony']
    },
    'south_asian': {
        cuisines: ['indian'],
        characteristics: ['spice-complex', 'ayurvedic', 'vegetarian-friendly', 'medicinal'],
        sharedPrinciples: ['six tastes', 'dosha balance', 'medicinal cooking']
    },
    'mediterranean': {
        cuisines: ['italian', 'greek', 'spanish', 'middle-eastern', 'mediterranean'],
        characteristics: ['olive oil-based', 'herb-rich', 'seafood-focused', 'communal'],
        sharedPrinciples: ['simplicity', 'fresh ingredients', 'social dining']
    },
    'european': {
        cuisines: ['french', 'italian', 'spanish', 'greek'],
        characteristics: ['technique-focused', 'wine-paired', 'seasonal', 'refined'],
        sharedPrinciples: ['culinary artistry', 'terroir', 'classical techniques']
    },
    'latin_american': {
        cuisines: ['mexican'],
        characteristics: ['corn-based', 'chili-focused', 'indigenous-influenced', 'festive'],
        sharedPrinciples: ['indigenous wisdom', 'celebration food', 'heat balance']
    },
    'african': {
        cuisines: ['african'],
        characteristics: ['grain-based', 'communal', 'spice-rich', 'preservation-focused'],
        sharedPrinciples: ['community sharing', 'spice mastery', 'resourcefulness']
    }
};
const HISTORICAL_CONTEXTS = {
    japanese: {
        origin: 'Japan',
        historicalPeriod: '8th century - present',
        culturalInfluences: ['Buddhist philosophy', 'Shinto traditions', 'Chinese techniques', 'Portuguese tempura'],
        traditionalOccasions: ['tea ceremony', 'seasonal festivals', 'New Year celebrations'],
        modernEvolution: ['kaiseki refinement', 'bento culture', 'fusion innovations'],
        globalAdaptations: ['sushi worldwide', 'ramen culture', 'Japanese-French fusion']
    },
    chinese: {
        origin: 'China',
        historicalPeriod: '3000 BCE - present',
        culturalInfluences: ['Confucian philosophy', 'Taoist principles', 'Silk Road trade'],
        traditionalOccasions: ['Chinese New Year', 'Mid-Autumn Festival', 'family gatherings'],
        modernEvolution: ['regional specialization', 'Cantonese refinement', 'Sichuan popularity'],
        globalAdaptations: ['American Chinese', 'fusion techniques', 'dim sum culture']
    },
    indian: {
        origin: 'Indian subcontinent',
        historicalPeriod: '3000 BCE - present',
        culturalInfluences: ['Ayurvedic medicine', 'Mughal empire', 'British colonial', 'regional kingdoms'],
        traditionalOccasions: ['Diwali feasts', 'wedding celebrations', 'religious festivals'],
        modernEvolution: ['regional cuisine recognition', 'health-conscious adaptations', 'global spice trade'],
        globalAdaptations: ['curry houses worldwide', 'Indian-British fusion', 'vegetarian influence']
    },
    italian: {
        origin: 'Italy',
        historicalPeriod: 'Roman Empire - present',
        culturalInfluences: ['Roman traditions', 'Arab Sicily', 'Renaissance refinement', 'regional diversity'],
        traditionalOccasions: ['Sunday family meals', 'harvest festivals', 'religious celebrations'],
        modernEvolution: ['pasta perfection', 'pizza globalization', 'slow food movement'],
        globalAdaptations: ['Italian-American', 'pizza worldwide', 'pasta culture']
    },
    french: {
        origin: 'France',
        historicalPeriod: 'Medieval - present',
        culturalInfluences: ['Roman Gaul', 'Medieval guilds', 'Royal court cuisine', 'Revolutionary changes'],
        traditionalOccasions: ['harvest celebrations', 'religious feasts', 'family gatherings'],
        modernEvolution: ['haute cuisine development', 'nouvelle cuisine', 'bistro culture'],
        globalAdaptations: ['French technique worldwide', 'culinary schools', 'fine dining standards']
    },
    mexican: {
        origin: 'Mexico',
        historicalPeriod: 'Pre-Columbian - present',
        culturalInfluences: ['Aztec traditions', 'Mayan cuisine', 'Spanish colonization', 'indigenous wisdom'],
        traditionalOccasions: ['Day of the Dead', 'harvest festivals', 'family celebrations'],
        modernEvolution: ['regional cuisine recognition', 'street food culture', 'modern Mexican movement'],
        globalAdaptations: ['Tex-Mex fusion', 'taco culture', 'Mexican-American cuisine']
    },
    thai: {
        origin: 'Thailand',
        historicalPeriod: '13th century - present',
        culturalInfluences: ['Khmer empire', 'Chinese immigration', 'Indian spices', 'Royal court refinement'],
        traditionalOccasions: ['Songkran festival', 'Buddhist ceremonies', 'royal celebrations'],
        modernEvolution: ['street food culture', 'royal cuisine preservation', 'global popularity'],
        globalAdaptations: ['Thai restaurants worldwide', 'pad thai popularity', 'curry adaptations']
    },
    'middle-eastern': {
        origin: 'Middle East',
        historicalPeriod: 'Ancient civilizations - present',
        culturalInfluences: ['Persian empire', 'Ottoman rule', 'Arab traditions', 'Spice route trade'],
        traditionalOccasions: ['Ramadan iftar', 'wedding feasts', 'hospitality traditions'],
        modernEvolution: ['regional specialization', 'health consciousness', 'diaspora influence'],
        globalAdaptations: ['Mediterranean diet', 'hummus popularity', 'Middle Eastern fusion']
    }
};
// ===== CULTURAL ANALYTICS SERVICE =====
class CulturalAnalyticsService {
    /**
     * Calculate cultural synergy score between cuisines (5% weight in 7-factor algorithm)
     */
    static calculateCulturalSynergy(primaryCuisine, secondaryCuisines = [], options = {}) {
        try {
            const primaryGroup = this.getCulturalGroup(primaryCuisine);
            const allCuisines = [primaryCuisine, ...secondaryCuisines];
            // Base synergy calculation
            let synergyScore = 0.7; // Base score
            let proximityBonus = 0;
            let diversityBonus = 0;
            const reasoning = [];
            // Calculate proximity bonus (same cultural group)
            const sameGroupCuisines = secondaryCuisines.filter(cuisine => this.getCulturalGroup(cuisine) === primaryGroup);
            if (sameGroupCuisines.length > 0) {
                proximityBonus = 0.15;
                synergyScore += proximityBonus;
                reasoning.push(`High cultural proximity within ${primaryGroup} group (+${proximityBonus})`);
            }
            // Calculate diversity bonus (different but compatible groups)
            const uniqueGroups = new Set(allCuisines.map(c => this.getCulturalGroup(c)));
            if (uniqueGroups.size > 1 && uniqueGroups.size <= 3) {
                diversityBonus = 0.1;
                synergyScore += diversityBonus;
                reasoning.push(`Cultural diversity bonus for ${uniqueGroups.size} cultural groups (+${diversityBonus})`);
            }
            // Apply seasonal cultural preferences
            if (options.season) {
                const seasonalBonus = this.calculateSeasonalCulturalBonus(primaryCuisine, options.season);
                synergyScore += seasonalBonus;
                if (seasonalBonus > 0) {
                    reasoning.push(`Seasonal cultural alignment for ${options.season} (+${seasonalBonus.toFixed(2)})`);
                }
            }
            // Cap the score at 1.0
            synergyScore = Math.min(1.0, synergyScore);
            return {
                score: synergyScore,
                reasoning,
                culturalGroup: primaryGroup,
                proximityBonus,
                diversityBonus
            };
        }
        catch (error) {
            logger_1.logger.error('Error calculating cultural synergy:', error);
            return {
                score: 0.7,
                reasoning: ['Default cultural synergy applied due to calculation error'],
                culturalGroup: 'unknown',
                proximityBonus: 0,
                diversityBonus: 0
            };
        }
    }
    /**
     * Generate comprehensive cultural analytics for a cuisine
     */
    static generateCulturalAnalytics(cuisineName, elementalProfile, astrologicalState) {
        try {
            const culturalRulesData = culturalrules_1.culturalRules[cuisineName];
            const culinaryTradition = culinaryTraditions_1.culinaryTraditions[cuisineName];
            const historicalContext = HISTORICAL_CONTEXTS[cuisineName];
            // Calculate cultural compatibility with current astrological state
            const culturalCompatibility = this.calculateAstrologicalCulturalCompatibility(cuisineName, astrologicalState);
            // Calculate cultural synergy
            const synergyData = this.calculateCulturalSynergy(cuisineName);
            // Generate historical significance
            const historicalSignificance = this.generateHistoricalSignificance(cuisineName, historicalContext);
            // Generate cultural context
            const culturalContext = this.generateCulturalContext(cuisineName, historicalContext);
            // Calculate fusion potential
            const fusionPotential = this.calculateFusionPotential(cuisineName, elementalProfile);
            // Calculate cultural diversity score
            const culturalDiversityScore = this.calculateCulturalDiversityScore(cuisineName);
            // Extract traditional principles
            const traditionalPrinciples = (culturalRulesData === null || culturalRulesData === void 0 ? void 0 : culturalRulesData.principles) || [];
            // Generate modern adaptations
            const modernAdaptations = this.generateModernAdaptations(cuisineName, historicalContext);
            return {
                culturalSynergy: synergyData.score,
                culturalCompatibility,
                historicalSignificance,
                culturalContext,
                fusionPotential,
                culturalDiversityScore,
                traditionalPrinciples,
                modernAdaptations
            };
        }
        catch (error) {
            logger_1.logger.error('Error generating cultural analytics:', error);
            return this.getDefaultCulturalAnalytics(cuisineName);
        }
    }
    /**
     * Generate fusion cuisine recommendations
     */
    static generateFusionRecommendations(primaryCuisine, availableCuisines, maxRecommendations = 3) {
        try {
            const fusionRecommendations = [];
            // Filter out the primary cuisine and evaluate fusion potential
            const candidateCuisines = availableCuisines.filter(c => c !== primaryCuisine);
            for (const secondaryCuisine of candidateCuisines) {
                const fusionData = this.calculateFusionCompatibility(primaryCuisine, secondaryCuisine);
                if (fusionData.fusionScore > 0.6) { // Only recommend good fusion potential
                    const fusionRecommendation = {
                        name: this.generateFusionName(primaryCuisine, secondaryCuisine),
                        parentCuisines: [primaryCuisine, secondaryCuisine],
                        fusionScore: fusionData.fusionScore,
                        culturalHarmony: fusionData.culturalHarmony,
                        recommendedDishes: this.generateFusionDishes(primaryCuisine, secondaryCuisine),
                        culturalNotes: this.generateFusionCulturalNotes(primaryCuisine, secondaryCuisine),
                        blendRatio: fusionData.blendRatio,
                        seasonalOptimization: this.calculateSeasonalFusionOptimization(primaryCuisine, secondaryCuisine)
                    };
                    fusionRecommendations.push(fusionRecommendation);
                }
            }
            // Sort by fusion score and return top recommendations
            return fusionRecommendations
                .sort((a, b) => b.fusionScore - a.fusionScore)
                .slice(0, maxRecommendations);
        }
        catch (error) {
            logger_1.logger.error('Error generating fusion recommendations:', error);
            return [];
        }
    }
    // ===== PRIVATE HELPER METHODS =====
    static getCulturalGroup(cuisine) {
        for (const [groupName, groupData] of Object.entries(CULTURAL_GROUPS)) {
            if (groupData.cuisines.includes(cuisine)) {
                return groupName;
            }
        }
        return 'other';
    }
    static calculateSeasonalCulturalBonus(cuisine, season) {
        var _a;
        const culinaryTradition = culinaryTraditions_1.culinaryTraditions[cuisine];
        if (!((_a = culinaryTradition === null || culinaryTradition === void 0 ? void 0 : culinaryTradition.astrologicalProfile) === null || _a === void 0 ? void 0 : _a.seasonalPreference)) {
            return 0;
        }
        const seasonalPrefs = culinaryTradition.astrologicalProfile.seasonalPreference;
        if (seasonalPrefs.includes(season) || seasonalPrefs.includes('all')) {
            return 0.05;
        }
        return 0;
    }
    static calculateAstrologicalCulturalCompatibility(cuisine, astrologicalState) {
        const culinaryTradition = culinaryTraditions_1.culinaryTraditions[cuisine];
        if (!(culinaryTradition === null || culinaryTradition === void 0 ? void 0 : culinaryTradition.astrologicalProfile)) {
            return 0.7; // Default compatibility
        }
        const { favorableZodiac } = culinaryTradition.astrologicalProfile;
        const isZodiacFavorable = favorableZodiac.includes(astrologicalState.zodiacSign.toLowerCase());
        return isZodiacFavorable ? 0.9 : 0.7;
    }
    static generateHistoricalSignificance(cuisine, context) {
        if (!context) {
            return `${cuisine} cuisine has deep cultural roots and represents centuries of culinary evolution.`;
        }
        return `${cuisine} cuisine originated in ${context.origin} during ${context.historicalPeriod}, ` +
            `influenced by ${context.culturalInfluences.slice(0, 2).join(' and ')}. ` +
            `It has evolved through ${context.modernEvolution[0]} and adapted globally through ${context.globalAdaptations[0]}.`;
    }
    static generateCulturalContext(cuisine, context) {
        if (!context) {
            return `${cuisine} cuisine reflects the cultural values and traditions of its region.`;
        }
        return `Traditionally served during ${context.traditionalOccasions[0]} and other cultural celebrations, ` +
            `${cuisine} cuisine embodies the principles of ${context.culturalInfluences[0]}. ` +
            `Modern adaptations include ${context.modernEvolution.slice(0, 2).join(' and ')}.`;
    }
    static calculateFusionPotential(cuisine, elementalProfile) {
        const culinaryTradition = culinaryTraditions_1.culinaryTraditions[cuisine];
        if (!culinaryTradition)
            return 0.7;
        // Calculate based on elemental balance - more balanced = higher fusion potential
        const elementalValues = Object.values(elementalProfile);
        const balance = 1 - (Math.max(...elementalValues) - Math.min(...elementalValues));
        return Math.max(0.5, Math.min(1.0, balance + 0.3));
    }
    static calculateCulturalDiversityScore(cuisine) {
        const historicalContext = HISTORICAL_CONTEXTS[cuisine];
        if (!historicalContext)
            return 0.5;
        // Score based on number of cultural influences
        const influenceCount = historicalContext.culturalInfluences.length;
        const adaptationCount = historicalContext.globalAdaptations.length;
        return Math.min(1.0, (influenceCount * 0.1) + (adaptationCount * 0.15) + 0.3);
    }
    static generateModernAdaptations(cuisine, context) {
        if (!context) {
            return [`Modern ${cuisine} cuisine adaptations`, `Contemporary ${cuisine} techniques`];
        }
        return [
            ...context.modernEvolution,
            ...context.globalAdaptations.map(adaptation => `Global: ${adaptation}`)
        ];
    }
    static calculateFusionCompatibility(cuisine1, cuisine2) {
        const group1 = this.getCulturalGroup(cuisine1);
        const group2 = this.getCulturalGroup(cuisine2);
        let fusionScore = 0.7; // Base fusion potential
        let culturalHarmony = 0.7;
        let blendRatio = 0.5; // Default 50/50
        // Same cultural group - high harmony, moderate fusion potential
        if (group1 === group2) {
            culturalHarmony = 0.9;
            fusionScore = 0.75;
        }
        // Different but compatible groups - high fusion potential
        else if ((group1 === 'mediterranean' && group2 === 'european') ||
            (group1 === 'european' && group2 === 'mediterranean') ||
            (group1 === 'east_asian' && ['south_asian', 'mediterranean'].includes(group2))) {
            fusionScore = 0.85;
            culturalHarmony = 0.8;
        }
        // Very different groups - moderate fusion potential but interesting diversity
        else {
            fusionScore = 0.8;
            culturalHarmony = 0.7;
        }
        return { fusionScore, culturalHarmony, blendRatio };
    }
    static generateFusionName(cuisine1, cuisine2) {
        const combinations = {
            'japanese-italian': 'Nikkei-Italian',
            'chinese-french': 'Sino-French',
            'indian-mexican': 'Indo-Mexican',
            'thai-mediterranean': 'Thai-Mediterranean',
            'korean-mexican': 'K-Mex',
            'vietnamese-french': 'Franco-Vietnamese'
        };
        const key1 = `${cuisine1}-${cuisine2}`;
        const key2 = `${cuisine2}-${cuisine1}`;
        return combinations[key1] || combinations[key2] || `${cuisine1}-${cuisine2} Fusion`;
    }
    static generateFusionDishes(cuisine1, cuisine2) {
        const fusionDishes = {
            'japanese-italian': ['Ramen Carbonara', 'Sushi Pizza', 'Miso Risotto'],
            'chinese-french': ['Five-Spice Duck Confit', 'Dim Sum Quiche', 'Soy-Glazed Coq au Vin'],
            'indian-mexican': ['Curry Tacos', 'Tandoori Quesadillas', 'Masala Burritos'],
            'thai-mediterranean': ['Tom Yum Pasta', 'Pad Thai Paella', 'Green Curry Risotto'],
            'korean-mexican': ['Kimchi Tacos', 'Bulgogi Burritos', 'Korean BBQ Quesadillas']
        };
        const key1 = `${cuisine1}-${cuisine2}`;
        const key2 = `${cuisine2}-${cuisine1}`;
        return fusionDishes[key1] || fusionDishes[key2] || [
            `${cuisine1}-style ${cuisine2} dish`,
            `${cuisine2}-inspired ${cuisine1} creation`,
            `Fusion ${cuisine1}-${cuisine2} specialty`
        ];
    }
    static generateFusionCulturalNotes(cuisine1, cuisine2) {
        return [
            `Combines the traditional techniques of ${cuisine1} with the flavors of ${cuisine2}`,
            `Represents a harmonious blend of two distinct culinary traditions`,
            `Modern fusion approach respecting both cultural heritages`,
            `Innovative interpretation suitable for contemporary dining`
        ];
    }
    static calculateSeasonalFusionOptimization(cuisine1, cuisine2) {
        var _a, _b;
        // Simple seasonal optimization based on cuisine characteristics
        const optimization = {
            spring: 0.8,
            summer: 0.8,
            autumn: 0.8,
            winter: 0.8
        };
        // Adjust based on cuisine seasonal preferences
        const tradition1 = culinaryTraditions_1.culinaryTraditions[cuisine1];
        const tradition2 = culinaryTraditions_1.culinaryTraditions[cuisine2];
        if (((_a = tradition1 === null || tradition1 === void 0 ? void 0 : tradition1.seasonalPreferences) === null || _a === void 0 ? void 0 : _a.includes('all')) || ((_b = tradition2 === null || tradition2 === void 0 ? void 0 : tradition2.seasonalPreferences) === null || _b === void 0 ? void 0 : _b.includes('all'))) {
            Object.keys(optimization).forEach(season => {
                optimization[season] = 0.9;
            });
        }
        return optimization;
    }
    static getDefaultCulturalAnalytics(cuisineName) {
        return {
            culturalSynergy: 0.7,
            culturalCompatibility: 0.7,
            historicalSignificance: `${cuisineName} cuisine has rich cultural traditions and historical significance.`,
            culturalContext: `${cuisineName} cuisine reflects the cultural values and culinary heritage of its region.`,
            fusionPotential: 0.7,
            culturalDiversityScore: 0.6,
            traditionalPrinciples: ['Traditional cooking methods', 'Cultural food combinations', 'Seasonal ingredients'],
            modernAdaptations: ['Contemporary techniques', 'Global influences', 'Modern presentations']
        };
    }
}
exports.CulturalAnalyticsService = CulturalAnalyticsService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9DdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDhDQUE4QztBQUM5Qyw4RUFBOEU7QUFDOUUsMEVBQTBFOzs7QUFFMUUsd0RBQWlGO0FBQ2pGLDJFQUF3RjtBQUV4RiwyQ0FBd0M7QUEyQ3hDLDRDQUE0QztBQUU1QyxNQUFNLGVBQWUsR0FBRztJQUN0QixZQUFZLEVBQUU7UUFDWixRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFlBQVksQ0FBQztRQUMvRSxlQUFlLEVBQUUsQ0FBQyxZQUFZLEVBQUUsZUFBZSxFQUFFLGtCQUFrQixFQUFFLFVBQVUsQ0FBQztRQUNoRixnQkFBZ0IsRUFBRSxDQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsQ0FBQztLQUM1RTtJQUNELGFBQWEsRUFBRTtRQUNiLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQztRQUNwQixlQUFlLEVBQUUsQ0FBQyxlQUFlLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLFdBQVcsQ0FBQztRQUNuRixnQkFBZ0IsRUFBRSxDQUFDLFlBQVksRUFBRSxlQUFlLEVBQUUsbUJBQW1CLENBQUM7S0FDdkU7SUFDRCxlQUFlLEVBQUU7UUFDZixRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRSxlQUFlLENBQUM7UUFDNUUsZUFBZSxFQUFFLENBQUMsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLGlCQUFpQixFQUFFLFVBQVUsQ0FBQztRQUNoRixnQkFBZ0IsRUFBRSxDQUFDLFlBQVksRUFBRSxtQkFBbUIsRUFBRSxlQUFlLENBQUM7S0FDdkU7SUFDRCxVQUFVLEVBQUU7UUFDVixRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUM7UUFD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c0IsRUFBRSxHQUFHLFdBQVcsb0VBQW9FO1lBQzFHLGVBQWUsRUFBRSxHQUFHLFdBQVcsNEVBQTRFO1lBQzNHLGVBQWUsRUFBRSxHQUFHO1lBQ3BCLHNCQUFzQixFQUFFLEdBQUc7WUFDM0IscUJBQXFCLEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSw0QkFBNEIsRUFBRSxzQkFBc0IsQ0FBQztZQUM1RyxpQkFBaUIsRUFBRSxDQUFDLHlCQUF5QixFQUFFLG1CQUFtQixFQUFFLHNCQUFzQixDQUFDO1NBQzVGLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUEvWEQsNERBK1hDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvc2VydmljZXMvQ3VsdHVyYWxBbmFseXRpY3NTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEN1bHR1cmFsIEFuYWx5dGljcyBhbmQgSW50ZWxsaWdlbmNlIFNlcnZpY2Vcbi8vIEltcGxlbWVudHMgY3Jvc3MtY3VsdHVyYWwgY29tcGF0aWJpbGl0eSBhbmFseXNpcywgY3VsdHVyYWwgc3luZXJneSBzY29yaW5nLFxuLy8gYW5kIGZ1c2lvbiBjdWlzaW5lIHJlY29tbWVuZGF0aW9ucyBmb3IgdGhlIEN1aXNpbmVSZWNvbW1lbmRlciBjb21wb25lbnRcblxuaW1wb3J0IHsgY3VsdHVyYWxSdWxlcywgZ2V0Q3VsdHVyYWxSZWNvbW1lbmRhdGlvbnMgfSBmcm9tICdAL2RhdGEvY3VsdHVyYWxydWxlcyc7XG5pbXBvcnQgeyBjdWxpbmFyeVRyYWRpdGlvbnMsIEN1aXNpbmVQcm9maWxlIH0gZnJvbSAnQC9kYXRhL2N1aXNpbmVzL2N1bGluYXJ5VHJhZGl0aW9ucyc7XG5pbXBvcnQgeyBFbGVtZW50YWxQcm9wZXJ0aWVzLCBab2RpYWNTaWduLCBMdW5hclBoYXNlIH0gZnJvbSAnQC90eXBlcy9hbGNoZW15JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcblxuLy8gPT09PT0gSU5URVJGQUNFUyA9PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1bHR1cmFsQW5hbHl0aWNzIHtcbiAgY3VsdHVyYWxTeW5lcmd5OiBudW1iZXI7XG4gIGN1bHR1cmFsQ29tcGF0aWJpbGl0eTogbnVtYmVyO1xuICBoaXN0b3JpY2FsU2lnbmlmaWNhbmNlOiBzdHJpbmc7XG4gIGN1bHR1cmFsQ29udGV4dDogc3RyaW5nO1xuICBmdXNpb25Qb3RlbnRpYWw6IG51bWJlcjtcbiAgY3VsdHVyYWxEaXZlcnNpdHlTY29yZTogbnVtYmVyO1xuICB0cmFkaXRpb25hbFByaW5jaXBsZXM6IHN0cmluZ1tdO1xuICBtb2Rlcm5BZGFwdGF0aW9uczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VsdHVyYWxTeW5lcmd5U2NvcmUge1xuICBzY29yZTogbnVtYmVyO1xuICByZWFzb25pbmc6IHN0cmluZ1tdO1xuICBjdWx0dXJhbEdyb3VwOiBzdHJpbmc7XG4gIHByb3hpbWl0eUJvbnVzOiBudW1iZXI7XG4gIGRpdmVyc2l0eUJvbnVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRnVzaW9uQ3Vpc2luZVJlY29tbWVuZGF0aW9uIHtcbiAgbmFtZTogc3RyaW5nO1xuICBwYXJlbnRDdWlzaW5lczogc3RyaW5nW107XG4gIGZ1c2lvblNjb3JlOiBudW1iZXI7XG4gIGN1bHR1cmFsSGFybW9ueTogbnVtYmVyO1xuICByZWNvbW1lbmRlZERpc2hlczogc3RyaW5nW107XG4gIGN1bHR1cmFsTm90ZXM6IHN0cmluZ1tdO1xuICBibGVuZFJhdGlvOiBudW1iZXI7XG4gIHNlYXNvbmFsT3B0aW1pemF0aW9uOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1bHR1cmFsQ29udGV4dCB7XG4gIG9yaWdpbjogc3RyaW5nO1xuICBoaXN0b3JpY2FsUGVyaW9kOiBzdHJpbmc7XG4gIGN1bHR1cmFsSW5mbHVlbmNlczogc3RyaW5nW107XG4gIHRyYWRpdGlvbmFsT2NjYXNpb25zOiBzdHJpbmdbXTtcbiAgbW9kZXJuRXZvbHV0aW9uOiBzdHJpbmdbXTtcbiAgZ2xvYmFsQWRhcHRhdGlvbnM6IHN0cmluZ1tdO1xufVxuXG4vLyA9PT09PSBDVUxUVVJBTCBHUk9VUFMgQU5EIFBST1hJTUlUWSA9PT09PVxuXG5jb25zdCBDVUxUVVJBTF9HUk9VUFMgPSB7XG4gICdlYXN0X2FzaWFuJzoge1xuICAgIGN1aXNpbmVzOiBbJ2NoaW5lc2UnLCAnamFwYW5lc2UnLCAna29yZWFuJywgJ3ZpZXRuYW1lc2UnLCAndGhhaScsICdzaWNodWFuZXNlJ10sXG4gICAgY2hhcmFjdGVyaXN0aWNzOiBbJ3JpY2UtYmFzZWQnLCAndW1hbWktZm9jdXNlZCcsICdiYWxhbmNlLW9yaWVudGVkJywgJ3NlYXNvbmFsJ10sXG4gICAgc2hhcmVkUHJpbmNpcGxlczogWydmaXZlIGVsZW1lbnRzJywgJ3lpbi15YW5nIGJhbGFuY2UnLCAnc2Vhc29uYWwgaGFybW9ueSddXG4gIH0sXG4gICdzb3V0aF9hc2lhbic6IHtcbiAgICBjdWlzaW5lczogWydpbmRpYW4nXSxcbiAgICBjaGFyYWN0ZXJpc3RpY3M6IFsnc3BpY2UtY29tcGxleCcsICdheXVydmVkaWMnLCAndmVnZXRhcmlhbi1mcmllbmRseScsICdtZWRpY2luYWwnXSxcbiAgICBzaGFyZWRQcmluY2lwbGVzOiBbJ3NpeCB0YXN0ZXMnLCAnZG9zaGEgYmFsYW5jZScsICdtZWRpY2luYWwgY29va2luZyddXG4gIH0sXG4gICdtZWRpdGVycmFuZWFuJzoge1xuICAgIGN1aXNpbmVzOiBbJ2l0YWxpYW4nLCAnZ3JlZWsnLCAnc3BhbmlzaCcsICdtaWRkbGUtZWFzdGVybicsICdtZWRpdGVycmFuZWFuJ10sXG4gICAgY2hhcmFjdGVyaXN0aWNzOiBbJ29saXZlIG9pbC1iYXNlZCcsICdoZXJiLXJpY2gnLCAnc2VhZm9vZC1mb2N1c2VkJywgJ2NvbW11bmFsJ10sXG4gICAgc2hhcmVkUHJpbmNpcGxlczogWydzaW1wbGljaXR5JywgJ2ZyZXNoIGluZ3JlZGllbnRzJywgJ3NvY2lhbCBkaW5pbmcnXVxuICB9LFxuICAnZXVyb3BlYW4nOiB7XG4gICAgY3Vpc2luZXM6IFsnZnJlbmNoJywgJ2l0YWxpYW4nLCAnc3BhbmlzaCcsICdncmVlayddLFxuICAgIGNoYXJhY3RlcmlzdGljczogWyd0ZWNobmlxdWUtZm9jdXNlZCcsICd3aW5lLXBhaXJlZCcsICdzZWFzb25hbCcsICdyZWZpbmVkJ10sXG4gICAgc2hhcmVkUHJpbmNpcGxlczogWydjdWxpbmFyeSBhcnRpc3RyeScsICd0ZXJyb2lyJywgJ2NsYXNzaWNhbCB0ZWNobmlxdWVzJ11cbiAgfSxcbiAgJ2xhdGluX2FtZXJpY2FuJzoge1xuICAgIGN1aXNpbmVzOiBbJ21leGljYW4nXSxcbiAgICBjaGFyYWN0ZXJpc3RpY3M6IFsnY29ybi1iYXNlZCcsICdjaGlsaS1mb2N1c2VkJywgJ2luZGlnZW5vdXMtaW5mbHVlbmNlZCcsICdmZXN0aXZlJ10sXG4gICAgc2hhcmVkUHJpbmNpcGxlczogWydpbmRpZ2Vub3VzIHdpc2RvbScsICdjZWxlYnJhdGlvbiBmb29kJywgJ2hlYXQgYmFsYW5jZSddXG4gIH0sXG4gICdhZnJpY2FuJzoge1xuICAgIGN1aXNpbmVzOiBbJ2FmcmljYW4nXSxcbiAgICBjaGFyYWN0ZXJpc3RpY3M6IFsnZ3JhaW4tYmFzZWQnLCAnY29tbXVuYWwnLCAnc3BpY2UtcmljaCcsICdwcmVzZXJ2YXRpb24tZm9jdXNlZCddLFxuICAgIHNoYXJlZFByaW5jaXBsZXM6IFsnY29tbXVuaXR5IHNoYXJpbmcnLCAnc3BpY2UgbWFzdGVyeScsICdyZXNvdXJjZWZ1bG5lc3MnXVxuICB9XG59O1xuXG5jb25zdCBISVNUT1JJQ0FMX0NPTlRFWFRTOiBSZWNvcmQ8c3RyaW5nLCBDdWx0dXJhbENvbnRleHQ+ID0ge1xuICBqYXBhbmVzZToge1xuICAgIG9yaWdpbjogJ0phcGFuJyxcbiAgICBoaXN0b3JpY2FsUGVyaW9kOiAnOHRoIGNlbnR1cnkgLSBwcmVzZW50JyxcbiAgICBjdWx0dXJhbEluZmx1ZW5jZXM6IFsnQnVkZGhpc3QgcGhpbG9zb3BoeScsICdTaGludG8gdHJhZGl0aW9ucycsICdDaGluZXNlIHRlY2huaXF1ZXMnLCAnUG9ydHVndWVzZSB0ZW1wdXJhJ10sXG4gICAgdHJhZGl0aW9uYWxPY2Nhc2lvbnM6IFsndGVhIGNlcmVtb255JywgJ3NlYXNvbmFsIGZlc3RpdmFscycsICdOZXcgWWVhciBjZWxlYnJhdGlvbnMnXSxcbiAgICBtb2Rlcm5Fdm9sdXRpb246IFsna2Fpc2VraSByZWZpbmVtZW50JywgJ2JlbnRvIGN1bHR1cmUnLCAnZnVzaW9uIGlubm92YXRpb25zJ10sXG4gICAgZ2xvYmFsQWRhcHRhdGlvbnM6IFsnc3VzaGkgd29ybGR3aWRlJywgJ3JhbWVuIGN1bHR1cmUnLCAnSmFwYW5lc2UtRnJlbmNoIGZ1c2lvbiddXG4gIH0sXG4gIGNoaW5lc2U6IHtcbiAgICBvcmlnaW46ICdDaGluYScsXG4gICAgaGlzdG9yaWNhbFBlcmlvZDogJzMwMDAgQkNFIC0gcHJlc2VudCcsXG4gICAgY3VsdHVyYWxJbmZsdWVuY2VzOiBbJ0NvbmZ1Y2lhbiBwaGlsb3NvcGh5JywgJ1Rhb2lzdCBwcmluY2lwbGVzJywgJ1NpbGsgUm9hZCB0cmFkZSddLFxuICAgIHRyYWRpdGlvbmFsT2NjYXNpb25zOiBbJ0NoaW5lc2UgTmV3IFllYXInLCAnTWlkLUF1dHVtbiBGZXN0aXZhbCcsICdmYW1pbHkgZ2F0aGVyaW5ncyddLFxuICAgIG1vZGVybkV2b2x1dGlvbjogWydyZWdpb25hbCBzcGVjaWFsaXphdGlvbicsICdDYW50b25lc2UgcmVmaW5lbWVudCcsICdTaWNodWFuIHBvcHVsYXJpdHknXSxcbiAgICBnbG9iYWxBZGFwdGF0aW9uczogWydBbWVyaWNhbiBDaGluZXNlJywgJ2Z1c2lvbiB0ZWNobmlxdWVzJywgJ2RpbSBzdW0gY3VsdHVyZSddXG4gIH0sXG4gIGluZGlhbjoge1xuICAgIG9yaWdpbjogJ0luZGlhbiBzdWJjb250aW5lbnQnLFxuICAgIGhpc3RvcmljYWxQZXJpb2Q6ICczMDAwIEJDRSAtIHByZXNlbnQnLFxuICAgIGN1bHR1cmFsSW5mbHVlbmNlczogWydBeXVydmVkaWMgbWVkaWNpbmUnLCAnTXVnaGFsIGVtcGlyZScsICdCcml0aXNoIGNvbG9uaWFsJywgJ3JlZ2lvbmFsIGtpbmdkb21zJ10sXG4gICAgdHJhZGl0aW9uYWxPY2Nhc2lvbnM6IFsnRGl3YWxpIGZlYXN0cycsICd3ZWRkaW5nIGNlbGVicmF0aW9ucycsICdyZWxpZ2lvdXMgZmVzdGl2YWxzJ10sXG4gICAgbW9kZXJuRXZvbHV0aW9uOiBbJ3JlZ2lvbmFsIGN1aXNpbmUgcmVjb2duaXRpb24nLCAnaGVhbHRoLWNvbnNjaW91cyBhZGFwdGF0aW9ucycsICdnbG9iYWwgc3BpY2UgdHJhZGUnXSxcbiAgICBnbG9iYWxBZGFwdGF0aW9uczogWydjdXJyeSBob3VzZXMgd29ybGR3aWRlJywgJ0luZGlhbi1Ccml0aXNoIGZ1c2lvbicsICd2ZWdldGFyaWFuIGluZmx1ZW5jZSddXG4gIH0sXG4gIGl0YWxpYW46IHtcbiAgICBvcmlnaW46ICdJdGFseScsXG4gICAgaGlzdG9yaWNhbFBlcmlvZDogJ1JvbWFuIEVtcGlyZSAtIHByZXNlbnQnLFxuICAgIGN1bHR1cmFsSW5mbHVlbmNlczogWydSb21hbiB0cmFkaXRpb25zJywgJ0FyYWIgU2ljaWx5JywgJ1JlbmFpc3NhbmNlIHJlZmluZW1lbnQnLCAncmVnaW9uYWwgZGl2ZXJzaXR5J10sXG4gICAgdHJhZGl0aW9uYWxPY2Nhc2lvbnM6IFsnU3VuZGF5IGZhbWlseSBtZWFscycsICdoYXJ2ZXN0IGZlc3RpdmFscycsICdyZWxpZ2lvdXMgY2VsZWJyYXRpb25zJ10sXG4gICAgbW9kZXJuRXZvbHV0aW9uOiBbJ3Bhc3RhIHBlcmZlY3Rpb24nLCAncGl6emEgZ2xvYmFsaXphdGlvbicsICdzbG93IGZvb2QgbW92ZW1lbnQnXSxcbiAgICBnbG9iYWxBZGFwdGF0aW9uczogWydJdGFsaWFuLUFtZXJpY2FuJywgJ3BpenphIHdvcmxkd2lkZScsICdwYXN0YSBjdWx0dXJlJ11cbiAgfSxcbiAgZnJlbmNoOiB7XG4gICAgb3JpZ2luOiAnRnJhbmNlJyxcbiAgICBoaXN0b3JpY2FsUGVyaW9kOiAnTWVkaWV2YWwgLSBwcmVzZW50JyxcbiAgICBjdWx0dXJhbEluZmx1ZW5jZXM6IFsnUm9tYW4gR2F1bCcsICdNZWRpZXZhbCBndWlsZHMnLCAnUm95YWwgY291cnQgY3Vpc2luZScsICdSZXZvbHV0aW9uYXJ5IGNoYW5nZXMnXSxcbiAgICB0cmFkaXRpb25hbE9jY2FzaW9uczogWydoYXJ2ZXN0IGNlbGVicmF0aW9ucycsICdyZWxpZ2lvdXMgZmVhc3RzJywgJ2ZhbWlseSBnYXRoZXJpbmdzJ10sXG4gICAgbW9kZXJuRXZvbHV0aW9uOiBbJ2hhdXRlIGN1aXNpbmUgZGV2ZWxvcG1lbnQnLCAnbm91dmVsbGUgY3Vpc2luZScsICdiaXN0cm8gY3VsdHVyZSddLFxuICAgIGdsb2JhbEFkYXB0YXRpb25zOiBbJ0ZyZW5jaCB0ZWNobmlxdWUgd29ybGR3aWRlJywgJ2N1bGluYXJ5IHNjaG9vbHMnLCAnZmluZSBkaW5pbmcgc3RhbmRhcmRzJ11cbiAgfSxcbiAgbWV4aWNhbjoge1xuICAgIG9yaWdpbjogJ01leGljbycsXG4gICAgaGlzdG9yaWNhbFBlcmlvZDogJ1ByZS1Db2x1bWJpYW4gLSBwcmVzZW50JyxcbiAgICBjdWx0dXJhbEluZmx1ZW5jZXM6IFsnQXp0ZWMgdHJhZGl0aW9ucycsICdNYXlhbiBjdWlzaW5lJywgJ1NwYW5pc2ggY29sb25pemF0aW9uJywgJ2luZGlnZW5vdXMgd2lzZG9tJ10sXG4gICAgdHJhZGl0aW9uYWxPY2Nhc2lvbnM6IFsnRGF5IG9mIHRoZSBEZWFkJywgJ2hhcnZlc3QgZmVzdGl2YWxzJywgJ2ZhbWlseSBjZWxlYnJhdGlvbnMnXSxcbiAgICBtb2Rlcm5Fdm9sdXRpb246IFsncmVnaW9uYWwgY3Vpc2luZSByZWNvZ25pdGlvbicsICdzdHJlZXQgZm9vZCBjdWx0dXJlJywgJ21vZGVybiBNZXhpY2FuIG1vdmVtZW50J10sXG4gICAgZ2xvYmFsQWRhcHRhdGlvbnM6IFsnVGV4LU1leCBmdXNpb24nLCAndGFjbyBjdWx0dXJlJywgJ01leGljYW4tQW1lcmljYW4gY3Vpc2luZSddXG4gIH0sXG4gIHRoYWk6IHtcbiAgICBvcmlnaW46ICdUaGFpbGFuZCcsXG4gICAgaGlzdG9yaWNhbFBlcmlvZDogJzEzdGggY2VudHVyeSAtIHByZXNlbnQnLFxuICAgIGN1bHR1cmFsSW5mbHVlbmNlczogWydLaG1lciBlbXBpcmUnLCAnQ2hpbmVzZSBpbW1pZ3JhdGlvbicsICdJbmRpYW4gc3BpY2VzJywgJ1JveWFsIGNvdXJ0IHJlZmluZW1lbnQnXSxcbiAgICB0cmFkaXRpb25hbE9jY2FzaW9uczogWydTb25na3JhbiBmZXN0aXZhbCcsICdCdWRkaGlzdCBjZXJlbW9uaWVzJywgJ3JveWFsIGNlbGVicmF0aW9ucyddLFxuICAgIG1vZGVybkV2b2x1dGlvbjogWydzdHJlZXQgZm9vZCBjdWx0dXJlJywgJ3JveWFsIGN1aXNpbmUgcHJlc2VydmF0aW9uJywgJ2dsb2JhbCBwb3B1bGFyaXR5J10sXG4gICAgZ2xvYmFsQWRhcHRhdGlvbnM6IFsnVGhhaSByZXN0YXVyYW50cyB3b3JsZHdpZGUnLCAncGFkIHRoYWkgcG9wdWxhcml0eScsICdjdXJyeSBhZGFwdGF0aW9ucyddXG4gIH0sXG4gICdtaWRkbGUtZWFzdGVybic6IHtcbiAgICBvcmlnaW46ICdNaWRkbGUgRWFzdCcsXG4gICAgaGlzdG9yaWNhbFBlcmlvZDogJ0FuY2llbnQgY2l2aWxpemF0aW9ucyAtIHByZXNlbnQnLFxuICAgIGN1bHR1cmFsSW5mbHVlbmNlczogWydQZXJzaWFuIGVtcGlyZScsICdPdHRvbWFuIHJ1bGUnLCAnQXJhYiB0cmFkaXRpb25zJywgJ1NwaWNlIHJvdXRlIHRyYWRlJ10sXG4gICAgdHJhZGl0aW9uYWxPY2Nhc2lvbnM6IFsnUmFtYWRhbiBpZnRhcicsICd3ZWRkaW5nIGZlYXN0cycsICdob3NwaXRhbGl0eSB0cmFkaXRpb25zJ10sXG4gICAgbW9kZXJuRXZvbHV0aW9uOiBbJ3JlZ2lvbmFsIHNwZWNpYWxpemF0aW9uJywgJ2hlYWx0aCBjb25zY2lvdXNuZXNzJywgJ2RpYXNwb3JhIGluZmx1ZW5jZSddLFxuICAgIGdsb2JhbEFkYXB0YXRpb25zOiBbJ01lZGl0ZXJyYW5lYW4gZGlldCcsICdodW1tdXMgcG9wdWxhcml0eScsICdNaWRkbGUgRWFzdGVybiBmdXNpb24nXVxuICB9XG59O1xuXG4vLyA9PT09PSBDVUxUVVJBTCBBTkFMWVRJQ1MgU0VSVklDRSA9PT09PVxuXG5leHBvcnQgY2xhc3MgQ3VsdHVyYWxBbmFseXRpY3NTZXJ2aWNlIHtcbiAgXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgY3VsdHVyYWwgc3luZXJneSBzY29yZSBiZXR3ZWVuIGN1aXNpbmVzICg1JSB3ZWlnaHQgaW4gNy1mYWN0b3IgYWxnb3JpdGhtKVxuICAgKi9cbiAgc3RhdGljIGNhbGN1bGF0ZUN1bHR1cmFsU3luZXJneShcbiAgICBwcmltYXJ5Q3Vpc2luZTogc3RyaW5nLFxuICAgIHNlY29uZGFyeUN1aXNpbmVzOiBzdHJpbmdbXSA9IFtdLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGluY2x1ZGVIaXN0b3JpY2FsQ29udGV4dD86IGJvb2xlYW47XG4gICAgICBpbmNsdWRlRnVzaW9uUG90ZW50aWFsPzogYm9vbGVhbjtcbiAgICAgIHNlYXNvbj86IHN0cmluZztcbiAgICB9ID0ge31cbiAgKTogQ3VsdHVyYWxTeW5lcmd5U2NvcmUge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmltYXJ5R3JvdXAgPSB0aGlzLmdldEN1bHR1cmFsR3JvdXAocHJpbWFyeUN1aXNpbmUpO1xuICAgICAgY29uc3QgYWxsQ3Vpc2luZXMgPSBbcHJpbWFyeUN1aXNpbmUsIC4uLnNlY29uZGFyeUN1aXNpbmVzXTtcbiAgICAgIFxuICAgICAgLy8gQmFzZSBzeW5lcmd5IGNhbGN1bGF0aW9uXG4gICAgICBsZXQgc3luZXJneVNjb3JlID0gMC43OyAvLyBCYXNlIHNjb3JlXG4gICAgICBsZXQgcHJveGltaXR5Qm9udXMgPSAwO1xuICAgICAgbGV0IGRpdmVyc2l0eUJvbnVzID0gMDtcbiAgICAgIGNvbnN0IHJlYXNvbmluZzogc3RyaW5nW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHByb3hpbWl0eSBib251cyAoc2FtZSBjdWx0dXJhbCBncm91cClcbiAgICAgIGNvbnN0IHNhbWVHcm91cEN1aXNpbmVzID0gc2Vjb25kYXJ5Q3Vpc2luZXMuZmlsdGVyKGN1aXNpbmUgPT4gXG4gICAgICAgIHRoaXMuZ2V0Q3VsdHVyYWxHcm91cChjdWlzaW5lKSA9PT0gcHJpbWFyeUdyb3VwXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoc2FtZUdyb3VwQ3Vpc2luZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwcm94aW1pdHlCb251cyA9IDAuMTU7XG4gICAgICAgIHN5bmVyZ3lTY29yZSArPSBwcm94aW1pdHlCb251cztcbiAgICAgICAgcmVhc29uaW5nLnB1c2goYEhpZ2ggY3VsdHVyYWwgcHJveGltaXR5IHdpdGhpbiAke3ByaW1hcnlHcm91cH0gZ3JvdXAgKCske3Byb3hpbWl0eUJvbnVzfSlgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGRpdmVyc2l0eSBib251cyAoZGlmZmVyZW50IGJ1dCBjb21wYXRpYmxlIGdyb3VwcylcbiAgICAgIGNvbnN0IHVuaXF1ZUdyb3VwcyA9IG5ldyBTZXQoYWxsQ3Vpc2luZXMubWFwKGMgPT4gdGhpcy5nZXRDdWx0dXJhbEdyb3VwKGMpKSk7XG4gICAgICBpZiAodW5pcXVlR3JvdXBzLnNpemUgPiAxICYmIHVuaXF1ZUdyb3Vwcy5zaXplIDw9IDMpIHtcbiAgICAgICAgZGl2ZXJzaXR5Qm9udXMgPSAwLjE7XG4gICAgICAgIHN5bmVyZ3lTY29yZSArPSBkaXZlcnNpdHlCb251cztcbiAgICAgICAgcmVhc29uaW5nLnB1c2goYEN1bHR1cmFsIGRpdmVyc2l0eSBib251cyBmb3IgJHt1bmlxdWVHcm91cHMuc2l6ZX0gY3VsdHVyYWwgZ3JvdXBzICgrJHtkaXZlcnNpdHlCb251c30pYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IHNlYXNvbmFsIGN1bHR1cmFsIHByZWZlcmVuY2VzXG4gICAgICBpZiAob3B0aW9ucy5zZWFzb24pIHtcbiAgICAgICAgY29uc3Qgc2Vhc29uYWxCb251cyA9IHRoaXMuY2FsY3VsYXRlU2Vhc29uYWxDdWx0dXJhbEJvbnVzKHByaW1hcnlDdWlzaW5lLCBvcHRpb25zLnNlYXNvbik7XG4gICAgICAgIHN5bmVyZ3lTY29yZSArPSBzZWFzb25hbEJvbnVzO1xuICAgICAgICBpZiAoc2Vhc29uYWxCb251cyA+IDApIHtcbiAgICAgICAgICByZWFzb25pbmcucHVzaChgU2Vhc29uYWwgY3VsdHVyYWwgYWxpZ25tZW50IGZvciAke29wdGlvbnMuc2Vhc29ufSAoKyR7c2Vhc29uYWxCb251cy50b0ZpeGVkKDIpfSlgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDYXAgdGhlIHNjb3JlIGF0IDEuMFxuICAgICAgc3luZXJneVNjb3JlID0gTWF0aC5taW4oMS4wLCBzeW5lcmd5U2NvcmUpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzY29yZTogc3luZXJneVNjb3JlLFxuICAgICAgICByZWFzb25pbmcsXG4gICAgICAgIGN1bHR1cmFsR3JvdXA6IHByaW1hcnlHcm91cCxcbiAgICAgICAgcHJveGltaXR5Qm9udXMsXG4gICAgICAgIGRpdmVyc2l0eUJvbnVzXG4gICAgICB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY2FsY3VsYXRpbmcgY3VsdHVyYWwgc3luZXJneTonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzY29yZTogMC43LFxuICAgICAgICByZWFzb25pbmc6IFsnRGVmYXVsdCBjdWx0dXJhbCBzeW5lcmd5IGFwcGxpZWQgZHVlIHRvIGNhbGN1bGF0aW9uIGVycm9yJ10sXG4gICAgICAgIGN1bHR1cmFsR3JvdXA6ICd1bmtub3duJyxcbiAgICAgICAgcHJveGltaXR5Qm9udXM6IDAsXG4gICAgICAgIGRpdmVyc2l0eUJvbnVzOiAwXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgY3VsdHVyYWwgYW5hbHl0aWNzIGZvciBhIGN1aXNpbmVcbiAgICovXG4gIHN0YXRpYyBnZW5lcmF0ZUN1bHR1cmFsQW5hbHl0aWNzKFxuICAgIGN1aXNpbmVOYW1lOiBzdHJpbmcsXG4gICAgZWxlbWVudGFsUHJvZmlsZTogRWxlbWVudGFsUHJvcGVydGllcyxcbiAgICBhc3Ryb2xvZ2ljYWxTdGF0ZToge1xuICAgICAgem9kaWFjU2lnbjogWm9kaWFjU2lnbjtcbiAgICAgIGx1bmFyUGhhc2U6IEx1bmFyUGhhc2U7XG4gICAgfVxuICApOiBDdWx0dXJhbEFuYWx5dGljcyB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1bHR1cmFsUnVsZXNEYXRhID0gY3VsdHVyYWxSdWxlc1tjdWlzaW5lTmFtZV07XG4gICAgICBjb25zdCBjdWxpbmFyeVRyYWRpdGlvbiA9IGN1bGluYXJ5VHJhZGl0aW9uc1tjdWlzaW5lTmFtZV07XG4gICAgICBjb25zdCBoaXN0b3JpY2FsQ29udGV4dCA9IEhJU1RPUklDQUxfQ09OVEVYVFNbY3Vpc2luZU5hbWVdO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgY3VsdHVyYWwgY29tcGF0aWJpbGl0eSB3aXRoIGN1cnJlbnQgYXN0cm9sb2dpY2FsIHN0YXRlXG4gICAgICBjb25zdCBjdWx0dXJhbENvbXBhdGliaWxpdHkgPSB0aGlzLmNhbGN1bGF0ZUFzdHJvbG9naWNhbEN1bHR1cmFsQ29tcGF0aWJpbGl0eShcbiAgICAgICAgY3Vpc2luZU5hbWUsXG4gICAgICAgIGFzdHJvbG9naWNhbFN0YXRlXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgY3VsdHVyYWwgc3luZXJneVxuICAgICAgY29uc3Qgc3luZXJneURhdGEgPSB0aGlzLmNhbGN1bGF0ZUN1bHR1cmFsU3luZXJneShjdWlzaW5lTmFtZSk7XG4gICAgICBcbiAgICAgIC8vIEdlbmVyYXRlIGhpc3RvcmljYWwgc2lnbmlmaWNhbmNlXG4gICAgICBjb25zdCBoaXN0b3JpY2FsU2lnbmlmaWNhbmNlID0gdGhpcy5nZW5lcmF0ZUhpc3RvcmljYWxTaWduaWZpY2FuY2UoY3Vpc2luZU5hbWUsIGhpc3RvcmljYWxDb250ZXh0KTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY3VsdHVyYWwgY29udGV4dFxuICAgICAgY29uc3QgY3VsdHVyYWxDb250ZXh0ID0gdGhpcy5nZW5lcmF0ZUN1bHR1cmFsQ29udGV4dChjdWlzaW5lTmFtZSwgaGlzdG9yaWNhbENvbnRleHQpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZnVzaW9uIHBvdGVudGlhbFxuICAgICAgY29uc3QgZnVzaW9uUG90ZW50aWFsID0gdGhpcy5jYWxjdWxhdGVGdXNpb25Qb3RlbnRpYWwoY3Vpc2luZU5hbWUsIGVsZW1lbnRhbFByb2ZpbGUpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgY3VsdHVyYWwgZGl2ZXJzaXR5IHNjb3JlXG4gICAgICBjb25zdCBjdWx0dXJhbERpdmVyc2l0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVDdWx0dXJhbERpdmVyc2l0eVNjb3JlKGN1aXNpbmVOYW1lKTtcbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCB0cmFkaXRpb25hbCBwcmluY2lwbGVzXG4gICAgICBjb25zdCB0cmFkaXRpb25hbFByaW5jaXBsZXMgPSBjdWx0dXJhbFJ1bGVzRGF0YT8ucHJpbmNpcGxlcyB8fCBbXTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgbW9kZXJuIGFkYXB0YXRpb25zXG4gICAgICBjb25zdCBtb2Rlcm5BZGFwdGF0aW9ucyA9IHRoaXMuZ2VuZXJhdGVNb2Rlcm5BZGFwdGF0aW9ucyhjdWlzaW5lTmFtZSwgaGlzdG9yaWNhbENvbnRleHQpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjdWx0dXJhbFN5bmVyZ3k6IHN5bmVyZ3lEYXRhLnNjb3JlLFxuICAgICAgICBjdWx0dXJhbENvbXBhdGliaWxpdHksXG4gICAgICAgIGhpc3RvcmljYWxTaWduaWZpY2FuY2UsXG4gICAgICAgIGN1bHR1cmFsQ29udGV4dCxcbiAgICAgICAgZnVzaW9uUG90ZW50aWFsLFxuICAgICAgICBjdWx0dXJhbERpdmVyc2l0eVNjb3JlLFxuICAgICAgICB0cmFkaXRpb25hbFByaW5jaXBsZXMsXG4gICAgICAgIG1vZGVybkFkYXB0YXRpb25zXG4gICAgICB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBjdWx0dXJhbCBhbmFseXRpY3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdEN1bHR1cmFsQW5hbHl0aWNzKGN1aXNpbmVOYW1lKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBmdXNpb24gY3Vpc2luZSByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHN0YXRpYyBnZW5lcmF0ZUZ1c2lvblJlY29tbWVuZGF0aW9ucyhcbiAgICBwcmltYXJ5Q3Vpc2luZTogc3RyaW5nLFxuICAgIGF2YWlsYWJsZUN1aXNpbmVzOiBzdHJpbmdbXSxcbiAgICBtYXhSZWNvbW1lbmRhdGlvbnM6IG51bWJlciA9IDNcbiAgKTogRnVzaW9uQ3Vpc2luZVJlY29tbWVuZGF0aW9uW10ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmdXNpb25SZWNvbW1lbmRhdGlvbnM6IEZ1c2lvbkN1aXNpbmVSZWNvbW1lbmRhdGlvbltdID0gW107XG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHByaW1hcnkgY3Vpc2luZSBhbmQgZXZhbHVhdGUgZnVzaW9uIHBvdGVudGlhbFxuICAgICAgY29uc3QgY2FuZGlkYXRlQ3Vpc2luZXMgPSBhdmFpbGFibGVDdWlzaW5lcy5maWx0ZXIoYyA9PiBjICE9PSBwcmltYXJ5Q3Vpc2luZSk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3Qgc2Vjb25kYXJ5Q3Vpc2luZSBvZiBjYW5kaWRhdGVDdWlzaW5lcykge1xuICAgICAgICBjb25zdCBmdXNpb25EYXRhID0gdGhpcy5jYWxjdWxhdGVGdXNpb25Db21wYXRpYmlsaXR5KHByaW1hcnlDdWlzaW5lLCBzZWNvbmRhcnlDdWlzaW5lKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmdXNpb25EYXRhLmZ1c2lvblNjb3JlID4gMC42KSB7IC8vIE9ubHkgcmVjb21tZW5kIGdvb2QgZnVzaW9uIHBvdGVudGlhbFxuICAgICAgICAgIGNvbnN0IGZ1c2lvblJlY29tbWVuZGF0aW9uOiBGdXNpb25DdWlzaW5lUmVjb21tZW5kYXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmdlbmVyYXRlRnVzaW9uTmFtZShwcmltYXJ5Q3Vpc2luZSwgc2Vjb25kYXJ5Q3Vpc2luZSksXG4gICAgICAgICAgICBwYXJlbnRDdWlzaW5lczogW3ByaW1hcnlDdWlzaW5lLCBzZWNvbmRhcnlDdWlzaW5lXSxcbiAgICAgICAgICAgIGZ1c2lvblNjb3JlOiBmdXNpb25EYXRhLmZ1c2lvblNjb3JlLFxuICAgICAgICAgICAgY3VsdHVyYWxIYXJtb255OiBmdXNpb25EYXRhLmN1bHR1cmFsSGFybW9ueSxcbiAgICAgICAgICAgIHJlY29tbWVuZGVkRGlzaGVzOiB0aGlzLmdlbmVyYXRlRnVzaW9uRGlzaGVzKHByaW1hcnlDdWlzaW5lLCBzZWNvbmRhcnlDdWlzaW5lKSxcbiAgICAgICAgICAgIGN1bHR1cmFsTm90ZXM6IHRoaXMuZ2VuZXJhdGVGdXNpb25DdWx0dXJhbE5vdGVzKHByaW1hcnlDdWlzaW5lLCBzZWNvbmRhcnlDdWlzaW5lKSxcbiAgICAgICAgICAgIGJsZW5kUmF0aW86IGZ1c2lvbkRhdGEuYmxlbmRSYXRpbyxcbiAgICAgICAgICAgIHNlYXNvbmFsT3B0aW1pemF0aW9uOiB0aGlzLmNhbGN1bGF0ZVNlYXNvbmFsRnVzaW9uT3B0aW1pemF0aW9uKHByaW1hcnlDdWlzaW5lLCBzZWNvbmRhcnlDdWlzaW5lKVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgZnVzaW9uUmVjb21tZW5kYXRpb25zLnB1c2goZnVzaW9uUmVjb21tZW5kYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNvcnQgYnkgZnVzaW9uIHNjb3JlIGFuZCByZXR1cm4gdG9wIHJlY29tbWVuZGF0aW9uc1xuICAgICAgcmV0dXJuIGZ1c2lvblJlY29tbWVuZGF0aW9uc1xuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5mdXNpb25TY29yZSAtIGEuZnVzaW9uU2NvcmUpXG4gICAgICAgIC5zbGljZSgwLCBtYXhSZWNvbW1lbmRhdGlvbnMpO1xuICAgICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGZ1c2lvbiByZWNvbW1lbmRhdGlvbnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gPT09PT0gUFJJVkFURSBIRUxQRVIgTUVUSE9EUyA9PT09PVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0Q3VsdHVyYWxHcm91cChjdWlzaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGZvciAoY29uc3QgW2dyb3VwTmFtZSwgZ3JvdXBEYXRhXSBvZiBPYmplY3QuZW50cmllcyhDVUxUVVJBTF9HUk9VUFMpKSB7XG4gICAgICBpZiAoZ3JvdXBEYXRhLmN1aXNpbmVzLmluY2x1ZGVzKGN1aXNpbmUpKSB7XG4gICAgICAgIHJldHVybiBncm91cE5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnb3RoZXInO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVTZWFzb25hbEN1bHR1cmFsQm9udXMoY3Vpc2luZTogc3RyaW5nLCBzZWFzb246IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgY3VsaW5hcnlUcmFkaXRpb24gPSBjdWxpbmFyeVRyYWRpdGlvbnNbY3Vpc2luZV07XG4gICAgaWYgKCFjdWxpbmFyeVRyYWRpdGlvbj8uYXN0cm9sb2dpY2FsUHJvZmlsZT8uc2Vhc29uYWxQcmVmZXJlbmNlKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2Vhc29uYWxQcmVmcyA9IGN1bGluYXJ5VHJhZGl0aW9uLmFzdHJvbG9naWNhbFByb2ZpbGUuc2Vhc29uYWxQcmVmZXJlbmNlO1xuICAgIGlmIChzZWFzb25hbFByZWZzLmluY2x1ZGVzKHNlYXNvbikgfHwgc2Vhc29uYWxQcmVmcy5pbmNsdWRlcygnYWxsJykpIHtcbiAgICAgIHJldHVybiAwLjA1O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gMDtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgY2FsY3VsYXRlQXN0cm9sb2dpY2FsQ3VsdHVyYWxDb21wYXRpYmlsaXR5KFxuICAgIGN1aXNpbmU6IHN0cmluZyxcbiAgICBhc3Ryb2xvZ2ljYWxTdGF0ZTogeyB6b2RpYWNTaWduOiBab2RpYWNTaWduOyBsdW5hclBoYXNlOiBMdW5hclBoYXNlIH1cbiAgKTogbnVtYmVyIHtcbiAgICBjb25zdCBjdWxpbmFyeVRyYWRpdGlvbiA9IGN1bGluYXJ5VHJhZGl0aW9uc1tjdWlzaW5lXTtcbiAgICBpZiAoIWN1bGluYXJ5VHJhZGl0aW9uPy5hc3Ryb2xvZ2ljYWxQcm9maWxlKSB7XG4gICAgICByZXR1cm4gMC43OyAvLyBEZWZhdWx0IGNvbXBhdGliaWxpdHlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBmYXZvcmFibGVab2RpYWMgfSA9IGN1bGluYXJ5VHJhZGl0aW9uLmFzdHJvbG9naWNhbFByb2ZpbGU7XG4gICAgY29uc3QgaXNab2RpYWNGYXZvcmFibGUgPSBmYXZvcmFibGVab2RpYWMuaW5jbHVkZXMoYXN0cm9sb2dpY2FsU3RhdGUuem9kaWFjU2lnbi50b0xvd2VyQ2FzZSgpKTtcbiAgICBcbiAgICByZXR1cm4gaXNab2RpYWNGYXZvcmFibGUgPyAwLjkgOiAwLjc7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlSGlzdG9yaWNhbFNpZ25pZmljYW5jZShjdWlzaW5lOiBzdHJpbmcsIGNvbnRleHQ/OiBDdWx0dXJhbENvbnRleHQpOiBzdHJpbmcge1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgcmV0dXJuIGAke2N1aXNpbmV9IGN1aXNpbmUgaGFzIGRlZXAgY3VsdHVyYWwgcm9vdHMgYW5kIHJlcHJlc2VudHMgY2VudHVyaWVzIG9mIGN1bGluYXJ5IGV2b2x1dGlvbi5gO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYCR7Y3Vpc2luZX0gY3Vpc2luZSBvcmlnaW5hdGVkIGluICR7Y29udGV4dC5vcmlnaW59IGR1cmluZyAke2NvbnRleHQuaGlzdG9yaWNhbFBlcmlvZH0sIGAgK1xuICAgICAgICAgICBgaW5mbHVlbmNlZCBieSAke2NvbnRleHQuY3VsdHVyYWxJbmZsdWVuY2VzLnNsaWNlKDAsIDIpLmpvaW4oJyBhbmQgJyl9LiBgICtcbiAgICAgICAgICAgYEl0IGhhcyBldm9sdmVkIHRocm91Z2ggJHtjb250ZXh0Lm1vZGVybkV2b2x1dGlvblswXX0gYW5kIGFkYXB0ZWQgZ2xvYmFsbHkgdGhyb3VnaCAke2NvbnRleHQuZ2xvYmFsQWRhcHRhdGlvbnNbMF19LmA7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlQ3VsdHVyYWxDb250ZXh0KGN1aXNpbmU6IHN0cmluZywgY29udGV4dD86IEN1bHR1cmFsQ29udGV4dCk6IHN0cmluZyB7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm4gYCR7Y3Vpc2luZX0gY3Vpc2luZSByZWZsZWN0cyB0aGUgY3VsdHVyYWwgdmFsdWVzIGFuZCB0cmFkaXRpb25zIG9mIGl0cyByZWdpb24uYDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGBUcmFkaXRpb25hbGx5IHNlcnZlZCBkdXJpbmcgJHtjb250ZXh0LnRyYWRpdGlvbmFsT2NjYXNpb25zWzBdfSBhbmQgb3RoZXIgY3VsdHVyYWwgY2VsZWJyYXRpb25zLCBgICtcbiAgICAgICAgICAgYCR7Y3Vpc2luZX0gY3Vpc2luZSBlbWJvZGllcyB0aGUgcHJpbmNpcGxlcyBvZiAke2NvbnRleHQuY3VsdHVyYWxJbmZsdWVuY2VzWzBdfS4gYCArXG4gICAgICAgICAgIGBNb2Rlcm4gYWRhcHRhdGlvbnMgaW5jbHVkZSAke2NvbnRleHQubW9kZXJuRXZvbHV0aW9uLnNsaWNlKDAsIDIpLmpvaW4oJyBhbmQgJyl9LmA7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZUZ1c2lvblBvdGVudGlhbChjdWlzaW5lOiBzdHJpbmcsIGVsZW1lbnRhbFByb2ZpbGU6IEVsZW1lbnRhbFByb3BlcnRpZXMpOiBudW1iZXIge1xuICAgIGNvbnN0IGN1bGluYXJ5VHJhZGl0aW9uID0gY3VsaW5hcnlUcmFkaXRpb25zW2N1aXNpbmVdO1xuICAgIGlmICghY3VsaW5hcnlUcmFkaXRpb24pIHJldHVybiAwLjc7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGJhc2VkIG9uIGVsZW1lbnRhbCBiYWxhbmNlIC0gbW9yZSBiYWxhbmNlZCA9IGhpZ2hlciBmdXNpb24gcG90ZW50aWFsXG4gICAgY29uc3QgZWxlbWVudGFsVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhlbGVtZW50YWxQcm9maWxlKTtcbiAgICBjb25zdCBiYWxhbmNlID0gMSAtIChNYXRoLm1heCguLi5lbGVtZW50YWxWYWx1ZXMpIC0gTWF0aC5taW4oLi4uZWxlbWVudGFsVmFsdWVzKSk7XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWF4KDAuNSwgTWF0aC5taW4oMS4wLCBiYWxhbmNlICsgMC4zKSk7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZUN1bHR1cmFsRGl2ZXJzaXR5U2NvcmUoY3Vpc2luZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBoaXN0b3JpY2FsQ29udGV4dCA9IEhJU1RPUklDQUxfQ09OVEVYVFNbY3Vpc2luZV07XG4gICAgaWYgKCFoaXN0b3JpY2FsQ29udGV4dCkgcmV0dXJuIDAuNTtcbiAgICBcbiAgICAvLyBTY29yZSBiYXNlZCBvbiBudW1iZXIgb2YgY3VsdHVyYWwgaW5mbHVlbmNlc1xuICAgIGNvbnN0IGluZmx1ZW5jZUNvdW50ID0gaGlzdG9yaWNhbENvbnRleHQuY3VsdHVyYWxJbmZsdWVuY2VzLmxlbmd0aDtcbiAgICBjb25zdCBhZGFwdGF0aW9uQ291bnQgPSBoaXN0b3JpY2FsQ29udGV4dC5nbG9iYWxBZGFwdGF0aW9ucy5sZW5ndGg7XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWluKDEuMCwgKGluZmx1ZW5jZUNvdW50ICogMC4xKSArIChhZGFwdGF0aW9uQ291bnQgKiAwLjE1KSArIDAuMyk7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlTW9kZXJuQWRhcHRhdGlvbnMoY3Vpc2luZTogc3RyaW5nLCBjb250ZXh0PzogQ3VsdHVyYWxDb250ZXh0KTogc3RyaW5nW10ge1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgcmV0dXJuIFtgTW9kZXJuICR7Y3Vpc2luZX0gY3Vpc2luZSBhZGFwdGF0aW9uc2AsIGBDb250ZW1wb3JhcnkgJHtjdWlzaW5lfSB0ZWNobmlxdWVzYF07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBbXG4gICAgICAuLi5jb250ZXh0Lm1vZGVybkV2b2x1dGlvbixcbiAgICAgIC4uLmNvbnRleHQuZ2xvYmFsQWRhcHRhdGlvbnMubWFwKGFkYXB0YXRpb24gPT4gYEdsb2JhbDogJHthZGFwdGF0aW9ufWApXG4gICAgXTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgY2FsY3VsYXRlRnVzaW9uQ29tcGF0aWJpbGl0eShjdWlzaW5lMTogc3RyaW5nLCBjdWlzaW5lMjogc3RyaW5nKToge1xuICAgIGZ1c2lvblNjb3JlOiBudW1iZXI7XG4gICAgY3VsdHVyYWxIYXJtb255OiBudW1iZXI7XG4gICAgYmxlbmRSYXRpbzogbnVtYmVyO1xuICB9IHtcbiAgICBjb25zdCBncm91cDEgPSB0aGlzLmdldEN1bHR1cmFsR3JvdXAoY3Vpc2luZTEpO1xuICAgIGNvbnN0IGdyb3VwMiA9IHRoaXMuZ2V0Q3VsdHVyYWxHcm91cChjdWlzaW5lMik7XG4gICAgXG4gICAgbGV0IGZ1c2lvblNjb3JlID0gMC43OyAvLyBCYXNlIGZ1c2lvbiBwb3RlbnRpYWxcbiAgICBsZXQgY3VsdHVyYWxIYXJtb255ID0gMC43O1xuICAgIGxldCBibGVuZFJhdGlvID0gMC41OyAvLyBEZWZhdWx0IDUwLzUwXG4gICAgXG4gICAgLy8gU2FtZSBjdWx0dXJhbCBncm91cCAtIGhpZ2ggaGFybW9ueSwgbW9kZXJhdGUgZnVzaW9uIHBvdGVudGlhbFxuICAgIGlmIChncm91cDEgPT09IGdyb3VwMikge1xuICAgICAgY3VsdHVyYWxIYXJtb255ID0gMC45O1xuICAgICAgZnVzaW9uU2NvcmUgPSAwLjc1O1xuICAgIH1cbiAgICAvLyBEaWZmZXJlbnQgYnV0IGNvbXBhdGlibGUgZ3JvdXBzIC0gaGlnaCBmdXNpb24gcG90ZW50aWFsXG4gICAgZWxzZSBpZiAoKGdyb3VwMSA9PT0gJ21lZGl0ZXJyYW5lYW4nICYmIGdyb3VwMiA9PT0gJ2V1cm9wZWFuJykgfHxcbiAgICAgICAgICAgICAoZ3JvdXAxID09PSAnZXVyb3BlYW4nICYmIGdyb3VwMiA9PT0gJ21lZGl0ZXJyYW5lYW4nKSB8fFxuICAgICAgICAgICAgIChncm91cDEgPT09ICdlYXN0X2FzaWFuJyAmJiBbJ3NvdXRoX2FzaWFuJywgJ21lZGl0ZXJyYW5lYW4nXS5pbmNsdWRlcyhncm91cDIpKSkge1xuICAgICAgZnVzaW9uU2NvcmUgPSAwLjg1O1xuICAgICAgY3VsdHVyYWxIYXJtb255ID0gMC44O1xuICAgIH1cbiAgICAvLyBWZXJ5IGRpZmZlcmVudCBncm91cHMgLSBtb2RlcmF0ZSBmdXNpb24gcG90ZW50aWFsIGJ1dCBpbnRlcmVzdGluZyBkaXZlcnNpdHlcbiAgICBlbHNlIHtcbiAgICAgIGZ1c2lvblNjb3JlID0gMC44O1xuICAgICAgY3VsdHVyYWxIYXJtb255ID0gMC43O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBmdXNpb25TY29yZSwgY3VsdHVyYWxIYXJtb255LCBibGVuZFJhdGlvIH07XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRnVzaW9uTmFtZShjdWlzaW5lMTogc3RyaW5nLCBjdWlzaW5lMjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb21iaW5hdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnamFwYW5lc2UtaXRhbGlhbic6ICdOaWtrZWktSXRhbGlhbicsXG4gICAgICAnY2hpbmVzZS1mcmVuY2gnOiAnU2luby1GcmVuY2gnLFxuICAgICAgJ2luZGlhbi1tZXhpY2FuJzogJ0luZG8tTWV4aWNhbicsXG4gICAgICAndGhhaS1tZWRpdGVycmFuZWFuJzogJ1RoYWktTWVkaXRlcnJhbmVhbicsXG4gICAgICAna29yZWFuLW1leGljYW4nOiAnSy1NZXgnLFxuICAgICAgJ3ZpZXRuYW1lc2UtZnJlbmNoJzogJ0ZyYW5jby1WaWV0bmFtZXNlJ1xuICAgIH07XG4gICAgXG4gICAgY29uc3Qga2V5MSA9IGAke2N1aXNpbmUxfS0ke2N1aXNpbmUyfWA7XG4gICAgY29uc3Qga2V5MiA9IGAke2N1aXNpbmUyfS0ke2N1aXNpbmUxfWA7XG4gICAgXG4gICAgcmV0dXJuIGNvbWJpbmF0aW9uc1trZXkxXSB8fCBjb21iaW5hdGlvbnNba2V5Ml0gfHwgYCR7Y3Vpc2luZTF9LSR7Y3Vpc2luZTJ9IEZ1c2lvbmA7XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRnVzaW9uRGlzaGVzKGN1aXNpbmUxOiBzdHJpbmcsIGN1aXNpbmUyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZnVzaW9uRGlzaGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgICAnamFwYW5lc2UtaXRhbGlhbic6IFsnUmFtZW4gQ2FyYm9uYXJhJywgJ1N1c2hpIFBpenphJywgJ01pc28gUmlzb3R0byddLFxuICAgICAgJ2NoaW5lc2UtZnJlbmNoJzogWydGaXZlLVNwaWNlIER1Y2sgQ29uZml0JywgJ0RpbSBTdW0gUXVpY2hlJywgJ1NveS1HbGF6ZWQgQ29xIGF1IFZpbiddLFxuICAgICAgJ2luZGlhbi1tZXhpY2FuJzogWydDdXJyeSBUYWNvcycsICdUYW5kb29yaSBRdWVzYWRpbGxhcycsICdNYXNhbGEgQnVycml0b3MnXSxcbiAgICAgICd0aGFpLW1lZGl0ZXJyYW5lYW4nOiBbJ1RvbSBZdW0gUGFzdGEnLCAnUGFkIFRoYWkgUGFlbGxhJywgJ0dyZWVuIEN1cnJ5IFJpc290dG8nXSxcbiAgICAgICdrb3JlYW4tbWV4aWNhbic6IFsnS2ltY2hpIFRhY29zJywgJ0J1bGdvZ2kgQnVycml0b3MnLCAnS29yZWFuIEJCUSBRdWVzYWRpbGxhcyddXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBrZXkxID0gYCR7Y3Vpc2luZTF9LSR7Y3Vpc2luZTJ9YDtcbiAgICBjb25zdCBrZXkyID0gYCR7Y3Vpc2luZTJ9LSR7Y3Vpc2luZTF9YDtcbiAgICBcbiAgICByZXR1cm4gZnVzaW9uRGlzaGVzW2tleTFdIHx8IGZ1c2lvbkRpc2hlc1trZXkyXSB8fCBbXG4gICAgICBgJHtjdWlzaW5lMX0tc3R5bGUgJHtjdWlzaW5lMn0gZGlzaGAsXG4gICAgICBgJHtjdWlzaW5lMn0taW5zcGlyZWQgJHtjdWlzaW5lMX0gY3JlYXRpb25gLFxuICAgICAgYEZ1c2lvbiAke2N1aXNpbmUxfS0ke2N1aXNpbmUyfSBzcGVjaWFsdHlgXG4gICAgXTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVGdXNpb25DdWx0dXJhbE5vdGVzKGN1aXNpbmUxOiBzdHJpbmcsIGN1aXNpbmUyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGBDb21iaW5lcyB0aGUgdHJhZGl0aW9uYWwgdGVjaG5pcXVlcyBvZiAke2N1aXNpbmUxfSB3aXRoIHRoZSBmbGF2b3JzIG9mICR7Y3Vpc2luZTJ9YCxcbiAgICAgIGBSZXByZXNlbnRzIGEgaGFybW9uaW91cyBibGVuZCBvZiB0d28gZGlzdGluY3QgY3VsaW5hcnkgdHJhZGl0aW9uc2AsXG4gICAgICBgTW9kZXJuIGZ1c2lvbiBhcHByb2FjaCByZXNwZWN0aW5nIGJvdGggY3VsdHVyYWwgaGVyaXRhZ2VzYCxcbiAgICAgIGBJbm5vdmF0aXZlIGludGVycHJldGF0aW9uIHN1aXRhYmxlIGZvciBjb250ZW1wb3JhcnkgZGluaW5nYFxuICAgIF07XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZVNlYXNvbmFsRnVzaW9uT3B0aW1pemF0aW9uKGN1aXNpbmUxOiBzdHJpbmcsIGN1aXNpbmUyOiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHtcbiAgICAvLyBTaW1wbGUgc2Vhc29uYWwgb3B0aW1pemF0aW9uIGJhc2VkIG9uIGN1aXNpbmUgY2hhcmFjdGVyaXN0aWNzXG4gICAgY29uc3Qgb3B0aW1pemF0aW9uOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgc3ByaW5nOiAwLjgsXG4gICAgICBzdW1tZXI6IDAuOCxcbiAgICAgIGF1dHVtbjogMC44LFxuICAgICAgd2ludGVyOiAwLjhcbiAgICB9O1xuICAgIFxuICAgIC8vIEFkanVzdCBiYXNlZCBvbiBjdWlzaW5lIHNlYXNvbmFsIHByZWZlcmVuY2VzXG4gICAgY29uc3QgdHJhZGl0aW9uMSA9IGN1bGluYXJ5VHJhZGl0aW9uc1tjdWlzaW5lMV07XG4gICAgY29uc3QgdHJhZGl0aW9uMiA9IGN1bGluYXJ5VHJhZGl0aW9uc1tjdWlzaW5lMl07XG4gICAgXG4gICAgaWYgKHRyYWRpdGlvbjE/LnNlYXNvbmFsUHJlZmVyZW5jZXM/LmluY2x1ZGVzKCdhbGwnKSB8fCB0cmFkaXRpb24yPy5zZWFzb25hbFByZWZlcmVuY2VzPy5pbmNsdWRlcygnYWxsJykpIHtcbiAgICAgIE9iamVjdC5rZXlzKG9wdGltaXphdGlvbikuZm9yRWFjaChzZWFzb24gPT4ge1xuICAgICAgICBvcHRpbWl6YXRpb25bc2Vhc29uXSA9IDAuOTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gb3B0aW1pemF0aW9uO1xuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBnZXREZWZhdWx0Q3VsdHVyYWxBbmFseXRpY3MoY3Vpc2luZU5hbWU6IHN0cmluZyk6IEN1bHR1cmFsQW5hbHl0aWNzIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VsdHVyYWxTeW5lcmd5OiAwLjcsXG4gICAgICBjdWx0dXJhbENvbXBhdGliaWxpdHk6IDAuNyxcbiAgICAgIGhpc3RvcmljYWxTaWduaWZpY2FuY2U6IGAke2N1aXNpbmVOYW1lfSBjdWlzaW5lIGhhcyByaWNoIGN1bHR1cmFsIHRyYWRpdGlvbnMgYW5kIGhpc3RvcmljYWwgc2lnbmlmaWNhbmNlLmAsXG4gICAgICBjdWx0dXJhbENvbnRleHQ6IGAke2N1aXNpbmVOYW1lfSBjdWlzaW5lIHJlZmxlY3RzIHRoZSBjdWx0dXJhbCB2YWx1ZXMgYW5kIGN1bGluYXJ5IGhlcml0YWdlIG9mIGl0cyByZWdpb24uYCxcbiAgICAgIGZ1c2lvblBvdGVudGlhbDogMC43LFxuICAgICAgY3VsdHVyYWxEaXZlcnNpdHlTY29yZTogMC42LFxuICAgICAgdHJhZGl0aW9uYWxQcmluY2lwbGVzOiBbJ1RyYWRpdGlvbmFsIGNvb2tpbmcgbWV0aG9kcycsICdDdWx0dXJhbCBmb29kIGNvbWJpbmF0aW9ucycsICdTZWFzb25hbCBpbmdyZWRpZW50cyddLFxuICAgICAgbW9kZXJuQWRhcHRhdGlvbnM6IFsnQ29udGVtcG9yYXJ5IHRlY2huaXF1ZXMnLCAnR2xvYmFsIGluZmx1ZW5jZXMnLCAnTW9kZXJuIHByZXNlbnRhdGlvbnMnXVxuICAgIH07XG4gIH1cbn0iXSwidmVyc2lvbiI6M30=