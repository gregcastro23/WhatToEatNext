4b283593f322038d3b7e5c7d85cea4a8
"use strict";
/**
 * Enterprise Intelligence Generator
 * Perfect Codebase Campaign - Phase 3 Implementation
 *
 * Generates enterprise intelligence systems from unused exports,
 * transforming technical debt into active analytical capabilities.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.EnterpriseIntelligenceGenerator = exports.GenerationComplexity = exports.IntegrationPriority = exports.IntegrationMethod = exports.CapabilityComplexity = void 0;
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
var CapabilityComplexity;
(function (CapabilityComplexity) {
    CapabilityComplexity["BASIC"] = "BASIC";
    CapabilityComplexity["INTERMEDIATE"] = "INTERMEDIATE";
    CapabilityComplexity["ADVANCED"] = "ADVANCED";
    CapabilityComplexity["EXPERT"] = "EXPERT";
})(CapabilityComplexity || (exports.CapabilityComplexity = CapabilityComplexity = {}));
var IntegrationMethod;
(function (IntegrationMethod) {
    IntegrationMethod["DIRECT_IMPORT"] = "DIRECT_IMPORT";
    IntegrationMethod["DEPENDENCY_INJECTION"] = "DEPENDENCY_INJECTION";
    IntegrationMethod["EVENT_DRIVEN"] = "EVENT_DRIVEN";
    IntegrationMethod["API_ENDPOINT"] = "API_ENDPOINT";
})(IntegrationMethod || (exports.IntegrationMethod = IntegrationMethod = {}));
var IntegrationPriority;
(function (IntegrationPriority) {
    IntegrationPriority["IMMEDIATE"] = "IMMEDIATE";
    IntegrationPriority["HIGH"] = "HIGH";
    IntegrationPriority["MEDIUM"] = "MEDIUM";
    IntegrationPriority["LOW"] = "LOW";
})(IntegrationPriority || (exports.IntegrationPriority = IntegrationPriority = {}));
var GenerationComplexity;
(function (GenerationComplexity) {
    GenerationComplexity["SIMPLE"] = "SIMPLE";
    GenerationComplexity["MODERATE"] = "MODERATE";
    GenerationComplexity["COMPLEX"] = "COMPLEX";
    GenerationComplexity["VERY_COMPLEX"] = "VERY_COMPLEX";
})(GenerationComplexity || (exports.GenerationComplexity = GenerationComplexity = {}));
class EnterpriseIntelligenceGenerator {
    templates;
    outputDirectory;
    constructor(outputDirectory = 'src/intelligence') {
        this.outputDirectory = outputDirectory;
        this.templates = new Map();
        this.initializeTemplates();
    }
    /**
     * Generate intelligence systems from transformation candidates
     */
    async generateIntelligenceSystems(fileAnalyses) {
        console.log('ðŸ§  Starting enterprise intelligence generation...');
        const results = [];
        for (const fileAnalysis of fileAnalyses) {
            for (const candidate of fileAnalysis.transformationCandidates) {
                try {
                    const result = await this.generateIntelligenceSystem(candidate, fileAnalysis.filePath);
                    results.push(result);
                    console.log(`âœ… Generated: ${result.systemName}`);
                }
                catch (error) {
                    console.warn(`âš ï¸  Failed to generate intelligence system for ${candidate.export.exportName}:`, error);
                }
            }
        }
        console.log(`ðŸŽ‰ Generated ${results.length} intelligence systems ?? undefined`);
        return results;
    }
    /**
     * Generate a single intelligence system
     */
    async generateIntelligenceSystem(candidate, originalFilePath) {
        const template = this.selectTemplate(candidate);
        const systemName = candidate.intelligenceSystemName;
        const capabilities = this.generateCapabilities(candidate, template);
        const integrationPoints = this.generateIntegrationPoints(candidate, originalFilePath);
        const generatedCode = this.generateCode(candidate, template, capabilities);
        const estimatedValue = this.calculateEstimatedValue(candidate, capabilities);
        const complexity = this.assessGenerationComplexity(candidate, capabilities);
        // Ensure output directory exists
        await this.ensureOutputDirectory();
        // Write the generated intelligence system
        const outputPath = path.join(this.outputDirectory, `${systemName}.ts`);
        await fs.promises.writeFile(outputPath, generatedCode);
        return {
            systemName,
            filePath: outputPath,
            originalExport: candidate.export,
            generatedCode,
            capabilities,
            integrationPoints,
            estimatedValue,
            complexity,
        };
    }
    /**
     * Select appropriate template for the candidate
     */
    selectTemplate(candidate) {
        const exportType = candidate.export.exportType;
        switch (exportType) {
            case 'function':
                return (this.templates.get('FUNCTION_INTELLIGENCE') || this.templates.get('DEFAULT'));
            case 'class':
                return (this.templates.get('CLASS_INTELLIGENCE') || this.templates.get('DEFAULT'));
            case 'interface':
            case 'type':
                return (this.templates.get('TYPE_INTELLIGENCE') || this.templates.get('DEFAULT'));
            case 'const':
            case 'variable':
                return (this.templates.get('DATA_INTELLIGENCE') || this.templates.get('DEFAULT'));
            default:
                return this.templates.get('DEFAULT');
        }
    }
    /**
     * Generate capabilities for the intelligence system
     */
    generateCapabilities(candidate, template) {
        const baseCapabilities = [...template.capabilities];
        const exportType = candidate.export.exportType;
        const complexity = candidate.transformationComplexity;
        // Add type-specific capabilities
        switch (exportType) {
            case 'function':
                baseCapabilities.push({
                    name: 'analyzeFunction',
                    description: `Analyze the behavior and patterns of ${candidate.export.exportName}`,
                    implementation: this.generateFunctionAnalysisCode(candidate),
                    complexity: CapabilityComplexity.INTERMEDIATE,
                });
                break;
            case 'class':
                baseCapabilities.push({
                    name: 'analyzeClassStructure',
                    description: `Analyze the structure and methods of ${candidate.export.exportName}`,
                    implementation: this.generateClassAnalysisCode(candidate),
                    complexity: CapabilityComplexity.ADVANCED,
                });
                break;
            case 'interface':
            case 'type':
                baseCapabilities.push({
                    name: 'analyzeTypeStructure',
                    description: `Analyze the type structure and relationships of ${candidate.export.exportName}`,
                    implementation: this.generateTypeAnalysisCode(candidate),
                    complexity: CapabilityComplexity.BASIC,
                });
                break;
            case 'const':
            case 'variable':
                baseCapabilities.push({
                    name: 'analyzeDataPatterns',
                    description: `Analyze data patterns and usage of ${candidate.export.exportName}`,
                    implementation: this.generateDataAnalysisCode(candidate),
                    complexity: CapabilityComplexity.INTERMEDIATE,
                });
                break;
        }
        // Add complexity-based capabilities
        if (complexity === 'COMPLEX' || complexity === 'VERY_COMPLEX') {
            baseCapabilities.push({
                name: 'generateAdvancedInsights',
                description: 'Generate advanced insights and recommendations',
                implementation: this.generateAdvancedInsightsCode(candidate),
                complexity: CapabilityComplexity.EXPERT,
            });
        }
        return baseCapabilities;
    }
    /**
     * Generate integration points for the intelligence system
     */
    generateIntegrationPoints(candidate, originalFilePath) {
        const integrationPoints = [];
        const systemName = candidate.intelligenceSystemName;
        // Main application integration
        integrationPoints.push({
            target: 'src/app/intelligence/index.ts',
            method: IntegrationMethod.DIRECT_IMPORT,
            code: `import { ${systemName} } from '../intelligence/${systemName}';`,
            priority: IntegrationPriority.HIGH,
        });
        // Dashboard integration
        integrationPoints.push({
            target: 'src/components/dashboard/IntelligenceDashboard.tsx',
            method: IntegrationMethod.DEPENDENCY_INJECTION,
            code: this.generateDashboardIntegrationCode(systemName),
            priority: IntegrationPriority.MEDIUM,
        });
        // API integration
        integrationPoints.push({
            target: 'src/api/intelligence/route.ts',
            method: IntegrationMethod.API_ENDPOINT,
            code: this.generateAPIIntegrationCode(systemName),
            priority: IntegrationPriority.LOW,
        });
        // Original file integration (if safe)
        if (candidate.safetyScore > 80) {
            integrationPoints.push({
                target: originalFilePath,
                method: IntegrationMethod.DIRECT_IMPORT,
                code: `// Intelligence system available: ${systemName}`,
                priority: IntegrationPriority.LOW,
            });
        }
        return integrationPoints;
    }
    /**
     * Generate the complete code for the intelligence system
     */
    generateCode(candidate, template, capabilities) {
        const systemName = candidate.intelligenceSystemName;
        const originalName = candidate.export.exportName;
        const exportType = candidate.export.exportType;
        const code = `/**
 * ${systemName}
 * Generated Enterprise Intelligence System
 * 
 * Original Export: ${originalName} (${exportType})
 * Transformation Date: ${new Date().toISOString()}
 * Estimated Value: ${candidate.estimatedBenefit}/100
 */

export interface ${systemName}Config {
  enableAnalytics: boolean;
  enableRecommendations: boolean;
  enableDemonstrations: boolean;
  cacheResults: boolean;
  logLevel: 'debug' | 'info' | 'warn' | 'error';
}

export interface ${systemName}Analytics {
  usageCount: number;
  performanceMetrics: PerformanceMetrics;
  patternAnalysis: PatternAnalysis;
  recommendations: Recommendation[];
}

export interface PerformanceMetrics {
  averageExecutionTime: number;
  memoryUsage: number;
  cacheHitRate: number;
  errorRate: number;
}

export interface PatternAnalysis {
  commonPatterns: string[];
  anomalies: string[];
  trends: TrendData[];
  insights: string[];
}

export interface Recommendation {
  id: string;
  type: 'optimization' | 'enhancement' | 'integration' | 'maintenance';
  priority: 'low' | 'medium' | 'high' | 'critical';
  description: string;
  implementation: string;
  estimatedImpact: number;
}

export interface TrendData {
  metric: string;
  values: number[];
  timestamps: Date[];
  trend: 'increasing' | 'decreasing' | 'stable' | 'volatile';
}

export class ${systemName} {
  private config: ${systemName}Config;
  private analytics: ${systemName}Analytics;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  // Intentionally any: Enterprise intelligence cache stores diverse analytical data types
  private cache: Map<string, any>;

  constructor(config: Partial<${systemName}Config> = {}) {
    this.config = {
      enableAnalytics: true,
      enableRecommendations: true,
      enableDemonstrations: true,
      cacheResults: true,
      logLevel: 'info',
      ...config
    };

    this.analytics = {
      usageCount: 0,
      performanceMetrics: {
        averageExecutionTime: 0,
        memoryUsage: 0,
        cacheHitRate: 0,
        errorRate: 0
      },
      patternAnalysis: {
        commonPatterns: [],
        anomalies: [],
        trends: [],
        insights: []
      },
      recommendations: []
    };

    this.cache = new Map();
  }

  /**
   * Analyze patterns and generate insights
   */
  async analyzePatterns(data?: any): Promise<PatternAnalysis> {
    const startTime = performance.now();
    
    try {
      this.analytics.usageCount++;
      
      const analysis: PatternAnalysis = {
        commonPatterns: this.identifyCommonPatterns(data),
        anomalies: this.detectAnomalies(data),
        trends: this.analyzeTrends(data),
        insights: this.generateInsights(data)
      };

      if (this.config.cacheResults) {
        this.cache.set('lastAnalysis', analysis);
      }

      this.updatePerformanceMetrics(startTime);
      return analysis;
    } catch (error) {
      this.handleError('analyzePatterns', error);
      throw error;
    }
  }

  /**
   * Generate recommendations based on analysis
   */
  async generateRecommendations(context?: any): Promise<Recommendation[]> {
    if (!this.config.enableRecommendations) {
      return [];
    }

    const startTime = performance.now();
    
    try {
      const recommendations: Recommendation[] = [
        {
          id: \`rec-\${Date.now()}-1\`,
          type: 'optimization',
          priority: 'medium',
          description: \`Optimize \${originalName} usage patterns\`,
          implementation: 'Consider implementing caching or memoization',
          estimatedImpact: 75
        },
        {
          id: \`rec-\${Date.now()}-2\`,
          type: 'integration',
          priority: 'high',
          description: \`Integrate \${originalName} with monitoring systems\`,
          implementation: 'Add performance tracking and alerting',
          estimatedImpact: 85
        },
        {
          id: \`rec-\${Date.now()}-3\`,
          type: 'enhancement',
          priority: 'low',
          description: \`Enhance \${originalName} with additional features\`,
          implementation: 'Add validation, error handling, and logging',
          estimatedImpact: 60
        }
      ];

      this.analytics.recommendations = recommendations;
      this.updatePerformanceMetrics(startTime);
      
      return recommendations;
    } catch (error) {
      this.handleError('generateRecommendations', error);
      return [];
    }
  }

  /**
   * Demonstrate system capabilities
   */
  async demonstrateCapabilities(): Promise<Record<string, any>> {
    if (!this.config.enableDemonstrations) {
      return {};
    }

    const startTime = performance.now();
    
    try {
      const demonstration = {
        systemName: '${systemName}',
        originalExport: '${originalName}',
        capabilities: [
${capabilities.map(cap => `          '${cap.name}': '${cap.description}'`).join(',\n')}
        ],
        sampleAnalysis: await this.analyzePatterns({ sample: true }),
        sampleRecommendations: await this.generateRecommendations({ sample: true }),
        performanceMetrics: this.analytics.performanceMetrics,
        configuration: this.config
      };

      this.updatePerformanceMetrics(startTime);
      return demonstration;
    } catch (error) {
      this.handleError('demonstrateCapabilities', error);
      return {};
    }
  }

${capabilities
            .map(cap => `  /**
   * ${cap.description}
   */
  private ${cap.name}(data?: any): any {
    ${cap.implementation}
  }`)
            .join('\n\n')}

  /**
   * Get current analytics
   */
  getAnalytics(): ${systemName}Analytics {
    return { ...this.analytics };
  }

  /**
   * Update configuration
   */
  updateConfig(newConfig: Partial<${systemName}Config>): void {
    this.config = { ...this.config, ...newConfig };
  }

  /**
   * Clear cache
   */
  clearCache(): void {
    this.cache.clear();
  }

  /**
   * Reset analytics
   */
  resetAnalytics(): void {
    this.analytics = {
      usageCount: 0,
      performanceMetrics: {
        averageExecutionTime: 0,
        memoryUsage: 0,
        cacheHitRate: 0,
        errorRate: 0
      },
      patternAnalysis: {
        commonPatterns: [],
        anomalies: [],
        trends: [],
        insights: []
      },
      recommendations: []
    };
  }

  private identifyCommonPatterns(data?: any): string[] {
    // Implementation would analyze data for common patterns
    return [
      'Pattern A: High frequency usage during peak hours',
      'Pattern B: Consistent error rates in specific scenarios',
      'Pattern C: Performance degradation with large datasets'
    ];
  }

  private detectAnomalies(data?: any): string[] {
    // Implementation would detect anomalies in the data
    return [
      'Anomaly: Unusual spike in memory usage',
      'Anomaly: Unexpected error pattern detected'
    ];
  }

  private analyzeTrends(data?: any): TrendData[] {
    // Implementation would analyze trends over time
    return [
      {
        metric: 'usage',
        values: [10, 15, 12, 18, 20],
        timestamps: [new Date(), new Date(), new Date(), new Date(), new Date()],
        trend: 'increasing'
      }
    ];
  }

  private generateInsights(data?: any): string[] {
    // Implementation would generate actionable insights
    return [
      \`\${originalName} shows potential for optimization\`,
      'Consider implementing caching for better performance',
      'Monitor usage patterns for capacity planning'
    ];
  }

  private updatePerformanceMetrics(startTime: number): void {
    const executionTime = performance.now() - startTime;
    const currentAvg = this.analytics.performanceMetrics.averageExecutionTime;
    const count = this.analytics.usageCount;
    
    this.analytics.performanceMetrics.averageExecutionTime = 
      (currentAvg * (count - 1) + executionTime) / count;
  }

  private handleError(method: string, error: any): void {
    if (this.config.logLevel === 'debug' || this.config.logLevel === 'error') {
      console.error(\`\${systemName}.\${method} error:\`, error);
    }
    
    this.analytics.performanceMetrics.errorRate = 
      (this.analytics.performanceMetrics.errorRate * (this.analytics.usageCount - 1) + 1) / 
      this.analytics.usageCount;
  }
}

// Export singleton instance for easy usage
export const ${systemName.toLowerCase()} = new ${systemName}();

// Export factory function for custom configurations
export const create${systemName} = (config?: Partial<${systemName}Config>) => 
  new ${systemName}(config);
`;
        return code;
    }
    /**
     * Initialize intelligence system templates
     */
    initializeTemplates() {
        // Default template
        this.templates.set('DEFAULT', {
            name: 'Default Intelligence System',
            description: 'Basic intelligence system with analytics and recommendations',
            template: 'default',
            capabilities: [
                {
                    name: 'collectMetrics',
                    description: 'Collect and analyze usage metrics',
                    implementation: 'return { timestamp: new Date(), metrics: {} };',
                    complexity: CapabilityComplexity.BASIC,
                },
                {
                    name: 'generateBasicInsights',
                    description: 'Generate basic insights from collected data',
                    implementation: 'return ["Basic insight 1", "Basic insight 2"];',
                    complexity: CapabilityComplexity.BASIC,
                },
            ],
            integrationPoints: [],
        });
        // Function-specific template
        this.templates.set('FUNCTION_INTELLIGENCE', {
            name: 'Function Intelligence System',
            description: 'Intelligence system specialized for function analysis',
            template: 'function',
            capabilities: [
                {
                    name: 'analyzeFunctionCalls',
                    description: 'Analyze function call patterns and performance',
                    implementation: 'return { callCount: 0, averageTime: 0, parameters: [] };',
                    complexity: CapabilityComplexity.INTERMEDIATE,
                },
                {
                    name: 'optimizeFunctionUsage',
                    description: 'Suggest optimizations for function usage',
                    implementation: 'return ["Consider memoization", "Add input validation"];',
                    complexity: CapabilityComplexity.ADVANCED,
                },
            ],
            integrationPoints: [],
        });
        // Class-specific template
        this.templates.set('CLASS_INTELLIGENCE', {
            name: 'Class Intelligence System',
            description: 'Intelligence system specialized for class analysis',
            template: 'class',
            capabilities: [
                {
                    name: 'analyzeClassUsage',
                    description: 'Analyze class instantiation and method usage patterns',
                    implementation: 'return { instances: 0, methodCalls: {}, inheritance: [] };',
                    complexity: CapabilityComplexity.ADVANCED,
                },
                {
                    name: 'suggestClassImprovements',
                    description: 'Suggest improvements to class design',
                    implementation: 'return ["Consider composition over inheritance", "Add interface segregation"];',
                    complexity: CapabilityComplexity.EXPERT,
                },
            ],
            integrationPoints: [],
        });
        // Type-specific template
        this.templates.set('TYPE_INTELLIGENCE', {
            name: 'Type Intelligence System',
            description: 'Intelligence system specialized for type analysis',
            template: 'type',
            capabilities: [
                {
                    name: 'analyzeTypeUsage',
                    description: 'Analyze type usage patterns and relationships',
                    implementation: 'return { usageCount: 0, relationships: [], violations: [] };',
                    complexity: CapabilityComplexity.BASIC,
                },
                {
                    name: 'validateTypeConsistency',
                    description: 'Validate type consistency across the codebase',
                    implementation: 'return { consistent: true, issues: [] };',
                    complexity: CapabilityComplexity.INTERMEDIATE,
                },
            ],
            integrationPoints: [],
        });
        // Data-specific template
        this.templates.set('DATA_INTELLIGENCE', {
            name: 'Data Intelligence System',
            description: 'Intelligence system specialized for data analysis',
            template: 'data',
            capabilities: [
                {
                    name: 'analyzeDataPatterns',
                    description: 'Analyze data structure and usage patterns',
                    implementation: 'return { structure: {}, patterns: [], anomalies: [] };',
                    complexity: CapabilityComplexity.INTERMEDIATE,
                },
                {
                    name: 'validateDataIntegrity',
                    description: 'Validate data integrity and consistency',
                    implementation: 'return { valid: true, errors: [], warnings: [] };',
                    complexity: CapabilityComplexity.ADVANCED,
                },
            ],
            integrationPoints: [],
        });
    }
    /**
     * Generate function analysis code
     */
    generateFunctionAnalysisCode(candidate) {
        return `
    // Analyze function behavior and patterns
    const analysis = {
      functionName: '${candidate.export.exportName}',
      complexity: ${candidate.export.complexity},
      callPatterns: this.trackCallPatterns(data),
      performance: this.measurePerformance(data),
      recommendations: this.generateFunctionRecommendations(data)
    };
    return analysis;
    `;
    }
    /**
     * Generate class analysis code
     */
    generateClassAnalysisCode(candidate) {
        return `
    // Analyze class structure and usage
    const analysis = {
      className: '${candidate.export.exportName}',
      methods: this.analyzeClassMethods(data),
      properties: this.analyzeClassProperties(data),
      inheritance: this.analyzeInheritance(data),
      instantiation: this.trackInstantiation(data)
    };
    return analysis;
    `;
    }
    /**
     * Generate type analysis code
     */
    generateTypeAnalysisCode(candidate) {
        return `
    // Analyze type structure and relationships
    const analysis = {
      typeName: '${candidate.export.exportName}',
      structure: this.analyzeTypeStructure(data),
      relationships: this.findTypeRelationships(data),
      usage: this.trackTypeUsage(data),
      compatibility: this.checkTypeCompatibility(data)
    };
    return analysis;
    `;
    }
    /**
     * Generate data analysis code
     */
    generateDataAnalysisCode(candidate) {
        return `
    // Analyze data patterns and usage
    const analysis = {
      dataName: '${candidate.export.exportName}',
      patterns: this.identifyDataPatterns(data),
      usage: this.trackDataUsage(data),
      validation: this.validateDataStructure(data),
      optimization: this.suggestDataOptimizations(data)
    };
    return analysis;
    `;
    }
    /**
     * Generate advanced insights code
     */
    generateAdvancedInsightsCode(candidate) {
        return `
    // Generate advanced insights and recommendations
    const insights = {
      predictiveAnalysis: this.performPredictiveAnalysis(data),
      optimizationOpportunities: this.identifyOptimizations(data),
      riskAssessment: this.assessRisks(data),
      strategicRecommendations: this.generateStrategicRecommendations(data)
    };
    return insights;
    `;
    }
    /**
     * Generate dashboard integration code
     */
    generateDashboardIntegrationCode(systemName) {
        return `
// Dashboard integration for ${systemName}
const ${systemName.toLowerCase()}Widget = {
  title: '${systemName}',
  component: () => <IntelligenceWidget system={${systemName.toLowerCase()}} />,
  priority: 'medium',
  refreshInterval: 30000
};
`;
    }
    /**
     * Generate API integration code
     */
    generateAPIIntegrationCode(systemName) {
        return `
// API endpoint for ${systemName}
app.get('/api/intelligence/${systemName.toLowerCase()}', async (req, res) => {
  try {
    const analytics = await ${systemName.toLowerCase()}.analyzePatterns(req.query);
    const recommendations = await ${systemName.toLowerCase()}.generateRecommendations(req.query);
    res.json({ analytics, recommendations });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});
`;
    }
    /**
     * Calculate estimated value of the intelligence system
     */
    calculateEstimatedValue(candidate, capabilities) {
        let value = candidate.estimatedBenefit;
        // Add value based on capabilities
        capabilities.forEach(capability => {
            switch (capability.complexity) {
                case CapabilityComplexity.BASIC:
                    value += 10;
                    break;
                case CapabilityComplexity.INTERMEDIATE:
                    value += 20;
                    break;
                case CapabilityComplexity.ADVANCED:
                    value += 35;
                    break;
                case CapabilityComplexity.EXPERT:
                    value += 50;
                    break;
            }
        });
        return Math.min(100, value);
    }
    /**
     * Assess generation complexity
     */
    assessGenerationComplexity(candidate, capabilities) {
        const baseComplexity = candidate.transformationComplexity;
        const capabilityComplexity = capabilities.reduce((max, cap) => {
            const complexityValue = {
                [CapabilityComplexity.BASIC]: 1,
                [CapabilityComplexity.INTERMEDIATE]: 2,
                [CapabilityComplexity.ADVANCED]: 3,
                [CapabilityComplexity.EXPERT]: 4,
            }[cap.complexity];
            return Math.max(max, complexityValue);
        }, 0);
        const totalComplexity = {
            SIMPLE: 1,
            MODERATE: 2,
            COMPLEX: 3,
            VERY_COMPLEX: 4,
        }[baseComplexity] + capabilityComplexity;
        if (totalComplexity <= 3)
            return GenerationComplexity.SIMPLE;
        if (totalComplexity <= 5)
            return GenerationComplexity.MODERATE;
        if (totalComplexity <= 7)
            return GenerationComplexity.COMPLEX;
        return GenerationComplexity.VERY_COMPLEX;
    }
    /**
     * Ensure output directory exists
     */
    async ensureOutputDirectory() {
        try {
            await fs.promises.access(this.outputDirectory);
        }
        catch {
            await fs.promises.mkdir(this.outputDirectory, { recursive: true });
        }
    }
    /**
     * Generate summary of all generated systems
     */
    generateSummary(results) {
        const totalSystemsGenerated = results.length;
        const totalCapabilitiesAdded = results.reduce((sum, r) => sum + r.capabilities.length, 0);
        const totalIntegrationPoints = results.reduce((sum, r) => sum + r.integrationPoints.length, 0);
        const averageComplexity = results.reduce((sum, r) => {
            const complexityValue = {
                [GenerationComplexity.SIMPLE]: 1,
                [GenerationComplexity.MODERATE]: 2,
                [GenerationComplexity.COMPLEX]: 3,
                [GenerationComplexity.VERY_COMPLEX]: 4,
            }[r.complexity];
            return sum + complexityValue;
        }, 0) / results.length;
        const estimatedTotalValue = results.reduce((sum, r) => sum + r.estimatedValue, 0);
        const generationsByCategory = {};
        results.forEach(r => {
            const category = r.originalExport.exportType;
            generationsByCategory[category] = (generationsByCategory[category] || 0) + 1;
        });
        return {
            totalSystemsGenerated,
            totalCapabilitiesAdded,
            totalIntegrationPoints,
            averageComplexity,
            estimatedTotalValue,
            generationsByCategory,
        };
    }
    /**
     * Generate integration guide
     */
    generateIntegrationGuide(results) {
        const guide = [
            '# Enterprise Intelligence Systems Integration Guide',
            '',
            '## Overview',
            `Generated ${results.length} intelligence systems from unused exports.`,
            '',
            '## Integration Steps',
            '',
            '### 1. Import Intelligence Systems',
            '```typescript',
            '// Add to your main application',
            ...results
                .slice(0, 5)
                .map(r => `import { ${r.systemName.toLowerCase()} } from './intelligence/${r.systemName}';`),
            '```',
            '',
            '### 2. Initialize Systems',
            '```typescript',
            'const intelligenceSystems = [',
            ...results.slice(0, 5).map(r => `  ${r.systemName.toLowerCase()},`),
            '];',
            '```',
            '',
            '### 3. Dashboard Integration',
            'Add intelligence widgets to your dashboard:',
            '```typescript',
            ...results
                .slice(0, 3)
                .map(r => r.integrationPoints.find(ip => ip.target.includes('Dashboard'))?.code || '')
                .filter(Boolean),
            '```',
            '',
            '### 4. API Integration',
            'Expose intelligence systems via API:',
            '```typescript',
            ...results
                .slice(0, 3)
                .map(r => r.integrationPoints.find(ip => ip.target.includes('api'))?.code || '')
                .filter(Boolean),
            '```',
            '',
            '## System Capabilities',
            '',
            ...results
                .slice(0, 10)
                .map(r => [
                `### ${r.systemName}`,
                `- Original Export: ${r.originalExport.exportName}`,
                `- Estimated Value: ${r.estimatedValue}/100`,
                `- Capabilities: ${r.capabilities.length}`,
                `- Integration Points: ${r.integrationPoints.length}`,
                '',
            ])
                .flat(),
            '',
            '## Next Steps',
            '1. Review generated intelligence systems',
            '2. Customize configurations as needed',
            '3. Integrate with existing monitoring',
            '4. Set up automated testing',
            '5. Deploy to production environment',
        ];
        return guide.join('\n');
    }
}
exports.EnterpriseIntelligenceGenerator = EnterpriseIntelligenceGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvY29uc2VydmF0aXZlLXdhdmUtMjAyNS0wOC0xMVQwNS0yMS0zMy00MTBaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9FbnRlcnByaXNlSW50ZWxsaWdlbmNlR2VuZXJhdG9yLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7O0dBTUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsdUNBQXlCO0FBQ3pCLDJDQUE2QjtBQThDN0IsSUFBWSxvQkFLWDtBQUxELFdBQVksb0JBQW9CO0lBQzlCLHVDQUFlLENBQUE7SUFDZixxREFBNkIsQ0FBQTtJQUM3Qiw2Q0FBcUIsQ0FBQTtJQUNyQix5Q0FBaUIsQ0FBQTtBQUNuQixDQUFDLEVBTFcsb0JBQW9CLG9DQUFwQixvQkFBb0IsUUFLL0I7QUFFRCxJQUFZLGlCQUtYO0FBTEQsV0FBWSxpQkFBaUI7SUFDM0Isb0RBQStCLENBQUE7SUFDL0Isa0VBQTZDLENBQUE7SUFDN0Msa0RBQTZCLENBQUE7SUFDN0Isa0RBQTZCLENBQUE7QUFDL0IsQ0FBQyxFQUxXLGlCQUFpQixpQ0FBakIsaUJBQWlCLFFBSzVCO0FBRUQsSUFBWSxtQkFLWDtBQUxELFdBQVksbUJBQW1CO0lBQzdCLDhDQUF1QixDQUFBO0lBQ3ZCLG9DQUFhLENBQUE7SUFDYix3Q0FBaUIsQ0FBQTtJQUNqQixrQ0FBVyxDQUFBO0FBQ2IsQ0FBQyxFQUxXLG1CQUFtQixtQ0FBbkIsbUJBQW1CLFFBSzlCO0FBRUQsSUFBWSxvQkFLWDtBQUxELFdBQVksb0JBQW9CO0lBQzlCLHlDQUFpQixDQUFBO0lBQ2pCLDZDQUFxQixDQUFBO0lBQ3JCLDJDQUFtQixDQUFBO0lBQ25CLHFEQUE2QixDQUFBO0FBQy9CLENBQUMsRUFMVyxvQkFBb0Isb0NBQXBCLG9CQUFvQixRQUsvQjtBQUVELE1BQWEsK0JBQStCO0lBQ3pCLFNBQVMsQ0FBMEM7SUFDbkQsZUFBZSxDQUFTO0lBRXpDLFlBQVksa0JBQTBCLGtCQUFrQjtR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LENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztpQkFDWCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDO2lCQUMvRSxNQUFNLENBQUMsT0FBTyxDQUFDO1lBQ2xCLEtBQUs7WUFDTCxFQUFFO1lBQ0Ysd0JBQXdCO1lBQ3hCLEVBQUU7WUFDRixHQUFHLE9BQU87aUJBQ1AsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7aUJBQ1osR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ1IsT0FBTyxDQUFDLENBQUMsVUFBVSxFQUFFO2dCQUNyQixzQkFBc0IsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUU7Z0JBQ25ELHNCQUFzQixDQUFDLENBQUMsY0FBYyxNQUFNO2dCQUM1QyxtQkFBbUIsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUU7Z0JBQzFDLHlCQUF5QixDQUFDLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFO2dCQUNyRCxFQUFFO2FBQ0gsQ0FBQztpQkFDRCxJQUFJLEVBQUU7WUFDVCxFQUFFO1lBQ0YsZUFBZTtZQUNmLDBDQUEwQztZQUMxQyx1Q0FBdUM7WUFDdkMsdUNBQXVDO1lBQ3ZDLDZCQUE2QjtZQUM3QixxQ0FBcUM7U0FDdEMsQ0FBQztRQUVGLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0Y7QUF0N0JELDBFQXM3QkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvY29uc2VydmF0aXZlLXdhdmUtMjAyNS0wOC0xMVQwNS0yMS0zMy00MTBaL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9FbnRlcnByaXNlSW50ZWxsaWdlbmNlR2VuZXJhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2UgR2VuZXJhdG9yXG4gKiBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIC0gUGhhc2UgMyBJbXBsZW1lbnRhdGlvblxuICpcbiAqIEdlbmVyYXRlcyBlbnRlcnByaXNlIGludGVsbGlnZW5jZSBzeXN0ZW1zIGZyb20gdW51c2VkIGV4cG9ydHMsXG4gKiB0cmFuc2Zvcm1pbmcgdGVjaG5pY2FsIGRlYnQgaW50byBhY3RpdmUgYW5hbHl0aWNhbCBjYXBhYmlsaXRpZXMuXG4gKi9cblxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgVW51c2VkRXhwb3J0LCBUcmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZSwgRmlsZUFuYWx5c2lzIH0gZnJvbSAnLi9VbnVzZWRFeHBvcnRBbmFseXplcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZWxsaWdlbmNlU3lzdGVtVGVtcGxhdGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHRlbXBsYXRlOiBzdHJpbmc7XG4gIGNhcGFiaWxpdGllczogSW50ZWxsaWdlbmNlQ2FwYWJpbGl0eVtdO1xuICBpbnRlZ3JhdGlvblBvaW50czogSW50ZWdyYXRpb25Qb2ludFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEludGVsbGlnZW5jZUNhcGFiaWxpdHkge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGltcGxlbWVudGF0aW9uOiBzdHJpbmc7XG4gIGNvbXBsZXhpdHk6IENhcGFiaWxpdHlDb21wbGV4aXR5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEludGVncmF0aW9uUG9pbnQge1xuICB0YXJnZXQ6IHN0cmluZztcbiAgbWV0aG9kOiBJbnRlZ3JhdGlvbk1ldGhvZDtcbiAgY29kZTogc3RyaW5nO1xuICBwcmlvcml0eTogSW50ZWdyYXRpb25Qcmlvcml0eTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0aW9uUmVzdWx0IHtcbiAgc3lzdGVtTmFtZTogc3RyaW5nO1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBvcmlnaW5hbEV4cG9ydDogVW51c2VkRXhwb3J0O1xuICBnZW5lcmF0ZWRDb2RlOiBzdHJpbmc7XG4gIGNhcGFiaWxpdGllczogSW50ZWxsaWdlbmNlQ2FwYWJpbGl0eVtdO1xuICBpbnRlZ3JhdGlvblBvaW50czogSW50ZWdyYXRpb25Qb2ludFtdO1xuICBlc3RpbWF0ZWRWYWx1ZTogbnVtYmVyO1xuICBjb21wbGV4aXR5OiBHZW5lcmF0aW9uQ29tcGxleGl0eTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0aW9uU3VtbWFyeSB7XG4gIHRvdGFsU3lzdGVtc0dlbmVyYXRlZDogbnVtYmVyO1xuICB0b3RhbENhcGFiaWxpdGllc0FkZGVkOiBudW1iZXI7XG4gIHRvdGFsSW50ZWdyYXRpb25Qb2ludHM6IG51bWJlcjtcbiAgYXZlcmFnZUNvbXBsZXhpdHk6IG51bWJlcjtcbiAgZXN0aW1hdGVkVG90YWxWYWx1ZTogbnVtYmVyO1xuICBnZW5lcmF0aW9uc0J5Q2F0ZWdvcnk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBlbnVtIENhcGFiaWxpdHlDb21wbGV4aXR5IHtcbiAgQkFTSUMgPSAnQkFTSUMnLFxuICBJTlRFUk1FRElBVEUgPSAnSU5URVJNRURJQVRFJyxcbiAgQURWQU5DRUQgPSAnQURWQU5DRUQnLFxuICBFWFBFUlQgPSAnRVhQRVJUJyxcbn1cblxuZXhwb3J0IGVudW0gSW50ZWdyYXRpb25NZXRob2Qge1xuICBESVJFQ1RfSU1QT1JUID0gJ0RJUkVDVF9JTVBPUlQnLFxuICBERVBFTkRFTkNZX0lOSkVDVElPTiA9ICdERVBFTkRFTkNZX0lOSkVDVElPTicsXG4gIEVWRU5UX0RSSVZFTiA9ICdFVkVOVF9EUklWRU4nLFxuICBBUElfRU5EUE9JTlQgPSAnQVBJX0VORFBPSU5UJyxcbn1cblxuZXhwb3J0IGVudW0gSW50ZWdyYXRpb25Qcmlvcml0eSB7XG4gIElNTUVESUFURSA9ICdJTU1FRElBVEUnLFxuICBISUdIID0gJ0hJR0gnLFxuICBNRURJVU0gPSAnTUVESVVNJyxcbiAgTE9XID0gJ0xPVycsXG59XG5cbmV4cG9ydCBlbnVtIEdlbmVyYXRpb25Db21wbGV4aXR5IHtcbiAgU0lNUExFID0gJ1NJTVBMRScsXG4gIE1PREVSQVRFID0gJ01PREVSQVRFJyxcbiAgQ09NUExFWCA9ICdDT01QTEVYJyxcbiAgVkVSWV9DT01QTEVYID0gJ1ZFUllfQ09NUExFWCcsXG59XG5cbmV4cG9ydCBjbGFzcyBFbnRlcnByaXNlSW50ZWxsaWdlbmNlR2VuZXJhdG9yIHtcbiAgcHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZXM6IE1hcDxzdHJpbmcsIEludGVsbGlnZW5jZVN5c3RlbVRlbXBsYXRlPjtcbiAgcHJpdmF0ZSByZWFkb25seSBvdXRwdXREaXJlY3Rvcnk6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihvdXRwdXREaXJlY3Rvcnk6IHN0cmluZyA9ICdzcmMvaW50ZWxsaWdlbmNlJykge1xuICAgIHRoaXMub3V0cHV0RGlyZWN0b3J5ID0gb3V0cHV0RGlyZWN0b3J5O1xuICAgIHRoaXMudGVtcGxhdGVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVRlbXBsYXRlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGludGVsbGlnZW5jZSBzeXN0ZW1zIGZyb20gdHJhbnNmb3JtYXRpb24gY2FuZGlkYXRlc1xuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVJbnRlbGxpZ2VuY2VTeXN0ZW1zKGZpbGVBbmFseXNlczogRmlsZUFuYWx5c2lzW10pOiBQcm9taXNlPEdlbmVyYXRpb25SZXN1bHRbXT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn6egIFN0YXJ0aW5nIGVudGVycHJpc2UgaW50ZWxsaWdlbmNlIGdlbmVyYXRpb24uLi4nKTtcblxuICAgIGNvbnN0IHJlc3VsdHM6IEdlbmVyYXRpb25SZXN1bHRbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBmaWxlQW5hbHlzaXMgb2YgZmlsZUFuYWx5c2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBmaWxlQW5hbHlzaXMudHJhbnNmb3JtYXRpb25DYW5kaWRhdGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUludGVsbGlnZW5jZVN5c3RlbShjYW5kaWRhdGUsIGZpbGVBbmFseXNpcy5maWxlUGF0aCk7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBHZW5lcmF0ZWQ6ICR7cmVzdWx0LnN5c3RlbU5hbWV9YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYOKaoO+4jyAgRmFpbGVkIHRvIGdlbmVyYXRlIGludGVsbGlnZW5jZSBzeXN0ZW0gZm9yICR7Y2FuZGlkYXRlLmV4cG9ydC5leHBvcnROYW1lfTpgLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn46JIEdlbmVyYXRlZCAke3Jlc3VsdHMubGVuZ3RofSBpbnRlbGxpZ2VuY2Ugc3lzdGVtcyA/PyB1bmRlZmluZWRgKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHNpbmdsZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlSW50ZWxsaWdlbmNlU3lzdGVtKFxuICAgIGNhbmRpZGF0ZTogVHJhbnNmb3JtYXRpb25DYW5kaWRhdGUsXG4gICAgb3JpZ2luYWxGaWxlUGF0aDogc3RyaW5nLFxuICApOiBQcm9taXNlPEdlbmVyYXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuc2VsZWN0VGVtcGxhdGUoY2FuZGlkYXRlKTtcbiAgICBjb25zdCBzeXN0ZW1OYW1lID0gY2FuZGlkYXRlLmludGVsbGlnZW5jZVN5c3RlbU5hbWU7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdGhpcy5nZW5lcmF0ZUNhcGFiaWxpdGllcyhjYW5kaWRhdGUsIHRlbXBsYXRlKTtcbiAgICBjb25zdCBpbnRlZ3JhdGlvblBvaW50cyA9IHRoaXMuZ2VuZXJhdGVJbnRlZ3JhdGlvblBvaW50cyhjYW5kaWRhdGUsIG9yaWdpbmFsRmlsZVBhdGgpO1xuICAgIGNvbnN0IGdlbmVyYXRlZENvZGUgPSB0aGlzLmdlbmVyYXRlQ29kZShjYW5kaWRhdGUsIHRlbXBsYXRlLCBjYXBhYmlsaXRpZXMpO1xuICAgIGNvbnN0IGVzdGltYXRlZFZhbHVlID0gdGhpcy5jYWxjdWxhdGVFc3RpbWF0ZWRWYWx1ZShjYW5kaWRhdGUsIGNhcGFiaWxpdGllcyk7XG4gICAgY29uc3QgY29tcGxleGl0eSA9IHRoaXMuYXNzZXNzR2VuZXJhdGlvbkNvbXBsZXhpdHkoY2FuZGlkYXRlLCBjYXBhYmlsaXRpZXMpO1xuXG4gICAgLy8gRW5zdXJlIG91dHB1dCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVPdXRwdXREaXJlY3RvcnkoKTtcblxuICAgIC8vIFdyaXRlIHRoZSBnZW5lcmF0ZWQgaW50ZWxsaWdlbmNlIHN5c3RlbVxuICAgIGNvbnN0IG91dHB1dFBhdGggPSBwYXRoLmpvaW4odGhpcy5vdXRwdXREaXJlY3RvcnksIGAke3N5c3RlbU5hbWV9LnRzYCk7XG4gICAgYXdhaXQgZnMucHJvbWlzZXMud3JpdGVGaWxlKG91dHB1dFBhdGgsIGdlbmVyYXRlZENvZGUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN5c3RlbU5hbWUsXG4gICAgICBmaWxlUGF0aDogb3V0cHV0UGF0aCxcbiAgICAgIG9yaWdpbmFsRXhwb3J0OiBjYW5kaWRhdGUuZXhwb3J0LFxuICAgICAgZ2VuZXJhdGVkQ29kZSxcbiAgICAgIGNhcGFiaWxpdGllcyxcbiAgICAgIGludGVncmF0aW9uUG9pbnRzLFxuICAgICAgZXN0aW1hdGVkVmFsdWUsXG4gICAgICBjb21wbGV4aXR5LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGFwcHJvcHJpYXRlIHRlbXBsYXRlIGZvciB0aGUgY2FuZGlkYXRlXG4gICAqL1xuICBwcml2YXRlIHNlbGVjdFRlbXBsYXRlKGNhbmRpZGF0ZTogVHJhbnNmb3JtYXRpb25DYW5kaWRhdGUpOiBJbnRlbGxpZ2VuY2VTeXN0ZW1UZW1wbGF0ZSB7XG4gICAgY29uc3QgZXhwb3J0VHlwZSA9IGNhbmRpZGF0ZS5leHBvcnQuZXhwb3J0VHlwZTtcblxuICAgIHN3aXRjaCAoZXhwb3J0VHlwZSkge1xuICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICByZXR1cm4gKHRoaXMudGVtcGxhdGVzLmdldCgnRlVOQ1RJT05fSU5URUxMSUdFTkNFJykgfHwgdGhpcy50ZW1wbGF0ZXMuZ2V0KCdERUZBVUxUJykpITtcbiAgICAgIGNhc2UgJ2NsYXNzJzpcbiAgICAgICAgcmV0dXJuICh0aGlzLnRlbXBsYXRlcy5nZXQoJ0NMQVNTX0lOVEVMTElHRU5DRScpIHx8IHRoaXMudGVtcGxhdGVzLmdldCgnREVGQVVMVCcpKSE7XG4gICAgICBjYXNlICdpbnRlcmZhY2UnOlxuICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgIHJldHVybiAodGhpcy50ZW1wbGF0ZXMuZ2V0KCdUWVBFX0lOVEVMTElHRU5DRScpIHx8IHRoaXMudGVtcGxhdGVzLmdldCgnREVGQVVMVCcpKSE7XG4gICAgICBjYXNlICdjb25zdCc6XG4gICAgICBjYXNlICd2YXJpYWJsZSc6XG4gICAgICAgIHJldHVybiAodGhpcy50ZW1wbGF0ZXMuZ2V0KCdEQVRBX0lOVEVMTElHRU5DRScpIHx8IHRoaXMudGVtcGxhdGVzLmdldCgnREVGQVVMVCcpKSE7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXMuZ2V0KCdERUZBVUxUJykhO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjYXBhYmlsaXRpZXMgZm9yIHRoZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ2FwYWJpbGl0aWVzKFxuICAgIGNhbmRpZGF0ZTogVHJhbnNmb3JtYXRpb25DYW5kaWRhdGUsXG4gICAgdGVtcGxhdGU6IEludGVsbGlnZW5jZVN5c3RlbVRlbXBsYXRlLFxuICApOiBJbnRlbGxpZ2VuY2VDYXBhYmlsaXR5W10ge1xuICAgIGNvbnN0IGJhc2VDYXBhYmlsaXRpZXMgPSBbLi4udGVtcGxhdGUuY2FwYWJpbGl0aWVzXTtcbiAgICBjb25zdCBleHBvcnRUeXBlID0gY2FuZGlkYXRlLmV4cG9ydC5leHBvcnRUeXBlO1xuICAgIGNvbnN0IGNvbXBsZXhpdHkgPSBjYW5kaWRhdGUudHJhbnNmb3JtYXRpb25Db21wbGV4aXR5O1xuXG4gICAgLy8gQWRkIHR5cGUtc3BlY2lmaWMgY2FwYWJpbGl0aWVzXG4gICAgc3dpdGNoIChleHBvcnRUeXBlKSB7XG4gICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgIGJhc2VDYXBhYmlsaXRpZXMucHVzaCh7XG4gICAgICAgICAgbmFtZTogJ2FuYWx5emVGdW5jdGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBBbmFseXplIHRoZSBiZWhhdmlvciBhbmQgcGF0dGVybnMgb2YgJHtjYW5kaWRhdGUuZXhwb3J0LmV4cG9ydE5hbWV9YCxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQW5hbHlzaXNDb2RlKGNhbmRpZGF0ZSksXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuSU5URVJNRURJQVRFLFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NsYXNzJzpcbiAgICAgICAgYmFzZUNhcGFiaWxpdGllcy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiAnYW5hbHl6ZUNsYXNzU3RydWN0dXJlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEFuYWx5emUgdGhlIHN0cnVjdHVyZSBhbmQgbWV0aG9kcyBvZiAke2NhbmRpZGF0ZS5leHBvcnQuZXhwb3J0TmFtZX1gLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uOiB0aGlzLmdlbmVyYXRlQ2xhc3NBbmFseXNpc0NvZGUoY2FuZGlkYXRlKSxcbiAgICAgICAgICBjb21wbGV4aXR5OiBDYXBhYmlsaXR5Q29tcGxleGl0eS5BRFZBTkNFRCxcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdpbnRlcmZhY2UnOlxuICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgIGJhc2VDYXBhYmlsaXRpZXMucHVzaCh7XG4gICAgICAgICAgbmFtZTogJ2FuYWx5emVUeXBlU3RydWN0dXJlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEFuYWx5emUgdGhlIHR5cGUgc3RydWN0dXJlIGFuZCByZWxhdGlvbnNoaXBzIG9mICR7Y2FuZGlkYXRlLmV4cG9ydC5leHBvcnROYW1lfWAsXG4gICAgICAgICAgaW1wbGVtZW50YXRpb246IHRoaXMuZ2VuZXJhdGVUeXBlQW5hbHlzaXNDb2RlKGNhbmRpZGF0ZSksXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuQkFTSUMsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29uc3QnOlxuICAgICAgY2FzZSAndmFyaWFibGUnOlxuICAgICAgICBiYXNlQ2FwYWJpbGl0aWVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6ICdhbmFseXplRGF0YVBhdHRlcm5zJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEFuYWx5emUgZGF0YSBwYXR0ZXJucyBhbmQgdXNhZ2Ugb2YgJHtjYW5kaWRhdGUuZXhwb3J0LmV4cG9ydE5hbWV9YCxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogdGhpcy5nZW5lcmF0ZURhdGFBbmFseXNpc0NvZGUoY2FuZGlkYXRlKSxcbiAgICAgICAgICBjb21wbGV4aXR5OiBDYXBhYmlsaXR5Q29tcGxleGl0eS5JTlRFUk1FRElBVEUsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBBZGQgY29tcGxleGl0eS1iYXNlZCBjYXBhYmlsaXRpZXNcbiAgICBpZiAoY29tcGxleGl0eSA9PT0gJ0NPTVBMRVgnIHx8IGNvbXBsZXhpdHkgPT09ICdWRVJZX0NPTVBMRVgnKSB7XG4gICAgICBiYXNlQ2FwYWJpbGl0aWVzLnB1c2goe1xuICAgICAgICBuYW1lOiAnZ2VuZXJhdGVBZHZhbmNlZEluc2lnaHRzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdHZW5lcmF0ZSBhZHZhbmNlZCBpbnNpZ2h0cyBhbmQgcmVjb21tZW5kYXRpb25zJyxcbiAgICAgICAgaW1wbGVtZW50YXRpb246IHRoaXMuZ2VuZXJhdGVBZHZhbmNlZEluc2lnaHRzQ29kZShjYW5kaWRhdGUpLFxuICAgICAgICBjb21wbGV4aXR5OiBDYXBhYmlsaXR5Q29tcGxleGl0eS5FWFBFUlQsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZUNhcGFiaWxpdGllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBpbnRlZ3JhdGlvbiBwb2ludHMgZm9yIHRoZSBpbnRlbGxpZ2VuY2Ugc3lzdGVtXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlSW50ZWdyYXRpb25Qb2ludHMoXG4gICAgY2FuZGlkYXRlOiBUcmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZSxcbiAgICBvcmlnaW5hbEZpbGVQYXRoOiBzdHJpbmcsXG4gICk6IEludGVncmF0aW9uUG9pbnRbXSB7XG4gICAgY29uc3QgaW50ZWdyYXRpb25Qb2ludHM6IEludGVncmF0aW9uUG9pbnRbXSA9IFtdO1xuICAgIGNvbnN0IHN5c3RlbU5hbWUgPSBjYW5kaWRhdGUuaW50ZWxsaWdlbmNlU3lzdGVtTmFtZTtcblxuICAgIC8vIE1haW4gYXBwbGljYXRpb24gaW50ZWdyYXRpb25cbiAgICBpbnRlZ3JhdGlvblBvaW50cy5wdXNoKHtcbiAgICAgIHRhcmdldDogJ3NyYy9hcHAvaW50ZWxsaWdlbmNlL2luZGV4LnRzJyxcbiAgICAgIG1ldGhvZDogSW50ZWdyYXRpb25NZXRob2QuRElSRUNUX0lNUE9SVCxcbiAgICAgIGNvZGU6IGBpbXBvcnQgeyAke3N5c3RlbU5hbWV9IH0gZnJvbSAnLi4vaW50ZWxsaWdlbmNlLyR7c3lzdGVtTmFtZX0nO2AsXG4gICAgICBwcmlvcml0eTogSW50ZWdyYXRpb25Qcmlvcml0eS5ISUdILFxuICAgIH0pO1xuXG4gICAgLy8gRGFzaGJvYXJkIGludGVncmF0aW9uXG4gICAgaW50ZWdyYXRpb25Qb2ludHMucHVzaCh7XG4gICAgICB0YXJnZXQ6ICdzcmMvY29tcG9uZW50cy9kYXNoYm9hcmQvSW50ZWxsaWdlbmNlRGFzaGJvYXJkLnRzeCcsXG4gICAgICBtZXRob2Q6IEludGVncmF0aW9uTWV0aG9kLkRFUEVOREVOQ1lfSU5KRUNUSU9OLFxuICAgICAgY29kZTogdGhpcy5nZW5lcmF0ZURhc2hib2FyZEludGVncmF0aW9uQ29kZShzeXN0ZW1OYW1lKSxcbiAgICAgIHByaW9yaXR5OiBJbnRlZ3JhdGlvblByaW9yaXR5Lk1FRElVTSxcbiAgICB9KTtcblxuICAgIC8vIEFQSSBpbnRlZ3JhdGlvblxuICAgIGludGVncmF0aW9uUG9pbnRzLnB1c2goe1xuICAgICAgdGFyZ2V0OiAnc3JjL2FwaS9pbnRlbGxpZ2VuY2Uvcm91dGUudHMnLFxuICAgICAgbWV0aG9kOiBJbnRlZ3JhdGlvbk1ldGhvZC5BUElfRU5EUE9JTlQsXG4gICAgICBjb2RlOiB0aGlzLmdlbmVyYXRlQVBJSW50ZWdyYXRpb25Db2RlKHN5c3RlbU5hbWUpLFxuICAgICAgcHJpb3JpdHk6IEludGVncmF0aW9uUHJpb3JpdHkuTE9XLFxuICAgIH0pO1xuXG4gICAgLy8gT3JpZ2luYWwgZmlsZSBpbnRlZ3JhdGlvbiAoaWYgc2FmZSlcbiAgICBpZiAoY2FuZGlkYXRlLnNhZmV0eVNjb3JlID4gODApIHtcbiAgICAgIGludGVncmF0aW9uUG9pbnRzLnB1c2goe1xuICAgICAgICB0YXJnZXQ6IG9yaWdpbmFsRmlsZVBhdGgsXG4gICAgICAgIG1ldGhvZDogSW50ZWdyYXRpb25NZXRob2QuRElSRUNUX0lNUE9SVCxcbiAgICAgICAgY29kZTogYC8vIEludGVsbGlnZW5jZSBzeXN0ZW0gYXZhaWxhYmxlOiAke3N5c3RlbU5hbWV9YCxcbiAgICAgICAgcHJpb3JpdHk6IEludGVncmF0aW9uUHJpb3JpdHkuTE9XLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludGVncmF0aW9uUG9pbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRoZSBjb21wbGV0ZSBjb2RlIGZvciB0aGUgaW50ZWxsaWdlbmNlIHN5c3RlbVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvZGUoXG4gICAgY2FuZGlkYXRlOiBUcmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZSxcbiAgICB0ZW1wbGF0ZTogSW50ZWxsaWdlbmNlU3lzdGVtVGVtcGxhdGUsXG4gICAgY2FwYWJpbGl0aWVzOiBJbnRlbGxpZ2VuY2VDYXBhYmlsaXR5W10sXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3Qgc3lzdGVtTmFtZSA9IGNhbmRpZGF0ZS5pbnRlbGxpZ2VuY2VTeXN0ZW1OYW1lO1xuICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGNhbmRpZGF0ZS5leHBvcnQuZXhwb3J0TmFtZTtcbiAgICBjb25zdCBleHBvcnRUeXBlID0gY2FuZGlkYXRlLmV4cG9ydC5leHBvcnRUeXBlO1xuXG4gICAgY29uc3QgY29kZSA9IGAvKipcbiAqICR7c3lzdGVtTmFtZX1cbiAqIEdlbmVyYXRlZCBFbnRlcnByaXNlIEludGVsbGlnZW5jZSBTeXN0ZW1cbiAqIFxuICogT3JpZ2luYWwgRXhwb3J0OiAke29yaWdpbmFsTmFtZX0gKCR7ZXhwb3J0VHlwZX0pXG4gKiBUcmFuc2Zvcm1hdGlvbiBEYXRlOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cbiAqIEVzdGltYXRlZCBWYWx1ZTogJHtjYW5kaWRhdGUuZXN0aW1hdGVkQmVuZWZpdH0vMTAwXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSAke3N5c3RlbU5hbWV9Q29uZmlnIHtcbiAgZW5hYmxlQW5hbHl0aWNzOiBib29sZWFuO1xuICBlbmFibGVSZWNvbW1lbmRhdGlvbnM6IGJvb2xlYW47XG4gIGVuYWJsZURlbW9uc3RyYXRpb25zOiBib29sZWFuO1xuICBjYWNoZVJlc3VsdHM6IGJvb2xlYW47XG4gIGxvZ0xldmVsOiAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSAke3N5c3RlbU5hbWV9QW5hbHl0aWNzIHtcbiAgdXNhZ2VDb3VudDogbnVtYmVyO1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IFBlcmZvcm1hbmNlTWV0cmljcztcbiAgcGF0dGVybkFuYWx5c2lzOiBQYXR0ZXJuQW5hbHlzaXM7XG4gIHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3Mge1xuICBhdmVyYWdlRXhlY3V0aW9uVGltZTogbnVtYmVyO1xuICBtZW1vcnlVc2FnZTogbnVtYmVyO1xuICBjYWNoZUhpdFJhdGU6IG51bWJlcjtcbiAgZXJyb3JSYXRlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0dGVybkFuYWx5c2lzIHtcbiAgY29tbW9uUGF0dGVybnM6IHN0cmluZ1tdO1xuICBhbm9tYWxpZXM6IHN0cmluZ1tdO1xuICB0cmVuZHM6IFRyZW5kRGF0YVtdO1xuICBpbnNpZ2h0czogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb21tZW5kYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAnb3B0aW1pemF0aW9uJyB8ICdlbmhhbmNlbWVudCcgfCAnaW50ZWdyYXRpb24nIHwgJ21haW50ZW5hbmNlJztcbiAgcHJpb3JpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpbXBsZW1lbnRhdGlvbjogc3RyaW5nO1xuICBlc3RpbWF0ZWRJbXBhY3Q6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmVuZERhdGEge1xuICBtZXRyaWM6IHN0cmluZztcbiAgdmFsdWVzOiBudW1iZXJbXTtcbiAgdGltZXN0YW1wczogRGF0ZVtdO1xuICB0cmVuZDogJ2luY3JlYXNpbmcnIHwgJ2RlY3JlYXNpbmcnIHwgJ3N0YWJsZScgfCAndm9sYXRpbGUnO1xufVxuXG5leHBvcnQgY2xhc3MgJHtzeXN0ZW1OYW1lfSB7XG4gIHByaXZhdGUgY29uZmlnOiAke3N5c3RlbU5hbWV9Q29uZmlnO1xuICBwcml2YXRlIGFuYWx5dGljczogJHtzeXN0ZW1OYW1lfUFuYWx5dGljcztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgLy8gSW50ZW50aW9uYWxseSBhbnk6IEVudGVycHJpc2UgaW50ZWxsaWdlbmNlIGNhY2hlIHN0b3JlcyBkaXZlcnNlIGFuYWx5dGljYWwgZGF0YSB0eXBlc1xuICBwcml2YXRlIGNhY2hlOiBNYXA8c3RyaW5nLCBhbnk+O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUGFydGlhbDwke3N5c3RlbU5hbWV9Q29uZmlnPiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBlbmFibGVBbmFseXRpY3M6IHRydWUsXG4gICAgICBlbmFibGVSZWNvbW1lbmRhdGlvbnM6IHRydWUsXG4gICAgICBlbmFibGVEZW1vbnN0cmF0aW9uczogdHJ1ZSxcbiAgICAgIGNhY2hlUmVzdWx0czogdHJ1ZSxcbiAgICAgIGxvZ0xldmVsOiAnaW5mbycsXG4gICAgICAuLi5jb25maWdcbiAgICB9O1xuXG4gICAgdGhpcy5hbmFseXRpY3MgPSB7XG4gICAgICB1c2FnZUNvdW50OiAwLFxuICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzOiB7XG4gICAgICAgIGF2ZXJhZ2VFeGVjdXRpb25UaW1lOiAwLFxuICAgICAgICBtZW1vcnlVc2FnZTogMCxcbiAgICAgICAgY2FjaGVIaXRSYXRlOiAwLFxuICAgICAgICBlcnJvclJhdGU6IDBcbiAgICAgIH0sXG4gICAgICBwYXR0ZXJuQW5hbHlzaXM6IHtcbiAgICAgICAgY29tbW9uUGF0dGVybnM6IFtdLFxuICAgICAgICBhbm9tYWxpZXM6IFtdLFxuICAgICAgICB0cmVuZHM6IFtdLFxuICAgICAgICBpbnNpZ2h0czogW11cbiAgICAgIH0sXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtdXG4gICAgfTtcblxuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBwYXR0ZXJucyBhbmQgZ2VuZXJhdGUgaW5zaWdodHNcbiAgICovXG4gIGFzeW5jIGFuYWx5emVQYXR0ZXJucyhkYXRhPzogYW55KTogUHJvbWlzZTxQYXR0ZXJuQW5hbHlzaXM+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgdGhpcy5hbmFseXRpY3MudXNhZ2VDb3VudCsrO1xuICAgICAgXG4gICAgICBjb25zdCBhbmFseXNpczogUGF0dGVybkFuYWx5c2lzID0ge1xuICAgICAgICBjb21tb25QYXR0ZXJuczogdGhpcy5pZGVudGlmeUNvbW1vblBhdHRlcm5zKGRhdGEpLFxuICAgICAgICBhbm9tYWxpZXM6IHRoaXMuZGV0ZWN0QW5vbWFsaWVzKGRhdGEpLFxuICAgICAgICB0cmVuZHM6IHRoaXMuYW5hbHl6ZVRyZW5kcyhkYXRhKSxcbiAgICAgICAgaW5zaWdodHM6IHRoaXMuZ2VuZXJhdGVJbnNpZ2h0cyhkYXRhKVxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhY2hlUmVzdWx0cykge1xuICAgICAgICB0aGlzLmNhY2hlLnNldCgnbGFzdEFuYWx5c2lzJywgYW5hbHlzaXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljcyhzdGFydFRpbWUpO1xuICAgICAgcmV0dXJuIGFuYWx5c2lzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKCdhbmFseXplUGF0dGVybnMnLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGFuYWx5c2lzXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhjb250ZXh0PzogYW55KTogUHJvbWlzZTxSZWNvbW1lbmRhdGlvbltdPiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVSZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBSZWNvbW1lbmRhdGlvbltdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFxcYHJlYy1cXCR7RGF0ZS5ub3coKX0tMVxcYCxcbiAgICAgICAgICB0eXBlOiAnb3B0aW1pemF0aW9uJyxcbiAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bScsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFxcYE9wdGltaXplIFxcJHtvcmlnaW5hbE5hbWV9IHVzYWdlIHBhdHRlcm5zXFxgLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAnQ29uc2lkZXIgaW1wbGVtZW50aW5nIGNhY2hpbmcgb3IgbWVtb2l6YXRpb24nLFxuICAgICAgICAgIGVzdGltYXRlZEltcGFjdDogNzVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcXGByZWMtXFwke0RhdGUubm93KCl9LTJcXGAsXG4gICAgICAgICAgdHlwZTogJ2ludGVncmF0aW9uJyxcbiAgICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcXGBJbnRlZ3JhdGUgXFwke29yaWdpbmFsTmFtZX0gd2l0aCBtb25pdG9yaW5nIHN5c3RlbXNcXGAsXG4gICAgICAgICAgaW1wbGVtZW50YXRpb246ICdBZGQgcGVyZm9ybWFuY2UgdHJhY2tpbmcgYW5kIGFsZXJ0aW5nJyxcbiAgICAgICAgICBlc3RpbWF0ZWRJbXBhY3Q6IDg1XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXFxgcmVjLVxcJHtEYXRlLm5vdygpfS0zXFxgLFxuICAgICAgICAgIHR5cGU6ICdlbmhhbmNlbWVudCcsXG4gICAgICAgICAgcHJpb3JpdHk6ICdsb3cnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcXGBFbmhhbmNlIFxcJHtvcmlnaW5hbE5hbWV9IHdpdGggYWRkaXRpb25hbCBmZWF0dXJlc1xcYCxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogJ0FkZCB2YWxpZGF0aW9uLCBlcnJvciBoYW5kbGluZywgYW5kIGxvZ2dpbmcnLFxuICAgICAgICAgIGVzdGltYXRlZEltcGFjdDogNjBcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgdGhpcy5hbmFseXRpY3MucmVjb21tZW5kYXRpb25zID0gcmVjb21tZW5kYXRpb25zO1xuICAgICAgdGhpcy51cGRhdGVQZXJmb3JtYW5jZU1ldHJpY3Moc3RhcnRUaW1lKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcignZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMnLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbW9uc3RyYXRlIHN5c3RlbSBjYXBhYmlsaXRpZXNcbiAgICovXG4gIGFzeW5jIGRlbW9uc3RyYXRlQ2FwYWJpbGl0aWVzKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgYW55Pj4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlRGVtb25zdHJhdGlvbnMpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGVtb25zdHJhdGlvbiA9IHtcbiAgICAgICAgc3lzdGVtTmFtZTogJyR7c3lzdGVtTmFtZX0nLFxuICAgICAgICBvcmlnaW5hbEV4cG9ydDogJyR7b3JpZ2luYWxOYW1lfScsXG4gICAgICAgIGNhcGFiaWxpdGllczogW1xuJHtjYXBhYmlsaXRpZXMubWFwKGNhcCA9PiBgICAgICAgICAgICcke2NhcC5uYW1lfSc6ICcke2NhcC5kZXNjcmlwdGlvbn0nYCkuam9pbignLFxcbicpfVxuICAgICAgICBdLFxuICAgICAgICBzYW1wbGVBbmFseXNpczogYXdhaXQgdGhpcy5hbmFseXplUGF0dGVybnMoeyBzYW1wbGU6IHRydWUgfSksXG4gICAgICAgIHNhbXBsZVJlY29tbWVuZGF0aW9uczogYXdhaXQgdGhpcy5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyh7IHNhbXBsZTogdHJ1ZSB9KSxcbiAgICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzOiB0aGlzLmFuYWx5dGljcy5wZXJmb3JtYW5jZU1ldHJpY3MsXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IHRoaXMuY29uZmlnXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljcyhzdGFydFRpbWUpO1xuICAgICAgcmV0dXJuIGRlbW9uc3RyYXRpb247XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoJ2RlbW9uc3RyYXRlQ2FwYWJpbGl0aWVzJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfVxuXG4ke2NhcGFiaWxpdGllc1xuICAubWFwKFxuICAgIGNhcCA9PiBgICAvKipcbiAgICogJHtjYXAuZGVzY3JpcHRpb259XG4gICAqL1xuICBwcml2YXRlICR7Y2FwLm5hbWV9KGRhdGE/OiBhbnkpOiBhbnkge1xuICAgICR7Y2FwLmltcGxlbWVudGF0aW9ufVxuICB9YCxcbiAgKVxuICAuam9pbignXFxuXFxuJyl9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGFuYWx5dGljc1xuICAgKi9cbiAgZ2V0QW5hbHl0aWNzKCk6ICR7c3lzdGVtTmFtZX1BbmFseXRpY3Mge1xuICAgIHJldHVybiB7IC4uLnRoaXMuYW5hbHl0aWNzIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWc6IFBhcnRpYWw8JHtzeXN0ZW1OYW1lfUNvbmZpZz4pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLm5ld0NvbmZpZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGNhY2hlXG4gICAqL1xuICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBhbmFseXRpY3NcbiAgICovXG4gIHJlc2V0QW5hbHl0aWNzKCk6IHZvaWQge1xuICAgIHRoaXMuYW5hbHl0aWNzID0ge1xuICAgICAgdXNhZ2VDb3VudDogMCxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICBhdmVyYWdlRXhlY3V0aW9uVGltZTogMCxcbiAgICAgICAgbWVtb3J5VXNhZ2U6IDAsXG4gICAgICAgIGNhY2hlSGl0UmF0ZTogMCxcbiAgICAgICAgZXJyb3JSYXRlOiAwXG4gICAgICB9LFxuICAgICAgcGF0dGVybkFuYWx5c2lzOiB7XG4gICAgICAgIGNvbW1vblBhdHRlcm5zOiBbXSxcbiAgICAgICAgYW5vbWFsaWVzOiBbXSxcbiAgICAgICAgdHJlbmRzOiBbXSxcbiAgICAgICAgaW5zaWdodHM6IFtdXG4gICAgICB9LFxuICAgICAgcmVjb21tZW5kYXRpb25zOiBbXVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGlkZW50aWZ5Q29tbW9uUGF0dGVybnMoZGF0YT86IGFueSk6IHN0cmluZ1tdIHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBhbmFseXplIGRhdGEgZm9yIGNvbW1vbiBwYXR0ZXJuc1xuICAgIHJldHVybiBbXG4gICAgICAnUGF0dGVybiBBOiBIaWdoIGZyZXF1ZW5jeSB1c2FnZSBkdXJpbmcgcGVhayBob3VycycsXG4gICAgICAnUGF0dGVybiBCOiBDb25zaXN0ZW50IGVycm9yIHJhdGVzIGluIHNwZWNpZmljIHNjZW5hcmlvcycsXG4gICAgICAnUGF0dGVybiBDOiBQZXJmb3JtYW5jZSBkZWdyYWRhdGlvbiB3aXRoIGxhcmdlIGRhdGFzZXRzJ1xuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGRldGVjdEFub21hbGllcyhkYXRhPzogYW55KTogc3RyaW5nW10ge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIHdvdWxkIGRldGVjdCBhbm9tYWxpZXMgaW4gdGhlIGRhdGFcbiAgICByZXR1cm4gW1xuICAgICAgJ0Fub21hbHk6IFVudXN1YWwgc3Bpa2UgaW4gbWVtb3J5IHVzYWdlJyxcbiAgICAgICdBbm9tYWx5OiBVbmV4cGVjdGVkIGVycm9yIHBhdHRlcm4gZGV0ZWN0ZWQnXG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgYW5hbHl6ZVRyZW5kcyhkYXRhPzogYW55KTogVHJlbmREYXRhW10ge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIHdvdWxkIGFuYWx5emUgdHJlbmRzIG92ZXIgdGltZVxuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIG1ldHJpYzogJ3VzYWdlJyxcbiAgICAgICAgdmFsdWVzOiBbMTAsIDE1LCAxMiwgMTgsIDIwXSxcbiAgICAgICAgdGltZXN0YW1wczogW25ldyBEYXRlKCksIG5ldyBEYXRlKCksIG5ldyBEYXRlKCksIG5ldyBEYXRlKCksIG5ldyBEYXRlKCldLFxuICAgICAgICB0cmVuZDogJ2luY3JlYXNpbmcnXG4gICAgICB9XG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVJbnNpZ2h0cyhkYXRhPzogYW55KTogc3RyaW5nW10ge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIHdvdWxkIGdlbmVyYXRlIGFjdGlvbmFibGUgaW5zaWdodHNcbiAgICByZXR1cm4gW1xuICAgICAgXFxgXFwke29yaWdpbmFsTmFtZX0gc2hvd3MgcG90ZW50aWFsIGZvciBvcHRpbWl6YXRpb25cXGAsXG4gICAgICAnQ29uc2lkZXIgaW1wbGVtZW50aW5nIGNhY2hpbmcgZm9yIGJldHRlciBwZXJmb3JtYW5jZScsXG4gICAgICAnTW9uaXRvciB1c2FnZSBwYXR0ZXJucyBmb3IgY2FwYWNpdHkgcGxhbm5pbmcnXG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGVyZm9ybWFuY2VNZXRyaWNzKHN0YXJ0VGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgZXhlY3V0aW9uVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgIGNvbnN0IGN1cnJlbnRBdmcgPSB0aGlzLmFuYWx5dGljcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZUV4ZWN1dGlvblRpbWU7XG4gICAgY29uc3QgY291bnQgPSB0aGlzLmFuYWx5dGljcy51c2FnZUNvdW50O1xuICAgIFxuICAgIHRoaXMuYW5hbHl0aWNzLnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlRXhlY3V0aW9uVGltZSA9IFxuICAgICAgKGN1cnJlbnRBdmcgKiAoY291bnQgLSAxKSArIGV4ZWN1dGlvblRpbWUpIC8gY291bnQ7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUVycm9yKG1ldGhvZDogc3RyaW5nLCBlcnJvcjogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmxvZ0xldmVsID09PSAnZGVidWcnIHx8IHRoaXMuY29uZmlnLmxvZ0xldmVsID09PSAnZXJyb3InKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxcYFxcJHtzeXN0ZW1OYW1lfS5cXCR7bWV0aG9kfSBlcnJvcjpcXGAsIGVycm9yKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5hbmFseXRpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSA9IFxuICAgICAgKHRoaXMuYW5hbHl0aWNzLnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgKiAodGhpcy5hbmFseXRpY3MudXNhZ2VDb3VudCAtIDEpICsgMSkgLyBcbiAgICAgIHRoaXMuYW5hbHl0aWNzLnVzYWdlQ291bnQ7XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZSBmb3IgZWFzeSB1c2FnZVxuZXhwb3J0IGNvbnN0ICR7c3lzdGVtTmFtZS50b0xvd2VyQ2FzZSgpfSA9IG5ldyAke3N5c3RlbU5hbWV9KCk7XG5cbi8vIEV4cG9ydCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBjdXN0b20gY29uZmlndXJhdGlvbnNcbmV4cG9ydCBjb25zdCBjcmVhdGUke3N5c3RlbU5hbWV9ID0gKGNvbmZpZz86IFBhcnRpYWw8JHtzeXN0ZW1OYW1lfUNvbmZpZz4pID0+IFxuICBuZXcgJHtzeXN0ZW1OYW1lfShjb25maWcpO1xuYDtcblxuICAgIHJldHVybiBjb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgaW50ZWxsaWdlbmNlIHN5c3RlbSB0ZW1wbGF0ZXNcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVRlbXBsYXRlcygpOiB2b2lkIHtcbiAgICAvLyBEZWZhdWx0IHRlbXBsYXRlXG4gICAgdGhpcy50ZW1wbGF0ZXMuc2V0KCdERUZBVUxUJywge1xuICAgICAgbmFtZTogJ0RlZmF1bHQgSW50ZWxsaWdlbmNlIFN5c3RlbScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0Jhc2ljIGludGVsbGlnZW5jZSBzeXN0ZW0gd2l0aCBhbmFseXRpY3MgYW5kIHJlY29tbWVuZGF0aW9ucycsXG4gICAgICB0ZW1wbGF0ZTogJ2RlZmF1bHQnLFxuICAgICAgY2FwYWJpbGl0aWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnY29sbGVjdE1ldHJpY3MnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29sbGVjdCBhbmQgYW5hbHl6ZSB1c2FnZSBtZXRyaWNzJyxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogJ3JldHVybiB7IHRpbWVzdGFtcDogbmV3IERhdGUoKSwgbWV0cmljczoge30gfTsnLFxuICAgICAgICAgIGNvbXBsZXhpdHk6IENhcGFiaWxpdHlDb21wbGV4aXR5LkJBU0lDLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2dlbmVyYXRlQmFzaWNJbnNpZ2h0cycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdHZW5lcmF0ZSBiYXNpYyBpbnNpZ2h0cyBmcm9tIGNvbGxlY3RlZCBkYXRhJyxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogJ3JldHVybiBbXCJCYXNpYyBpbnNpZ2h0IDFcIiwgXCJCYXNpYyBpbnNpZ2h0IDJcIl07JyxcbiAgICAgICAgICBjb21wbGV4aXR5OiBDYXBhYmlsaXR5Q29tcGxleGl0eS5CQVNJQyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBpbnRlZ3JhdGlvblBvaW50czogW10sXG4gICAgfSk7XG5cbiAgICAvLyBGdW5jdGlvbi1zcGVjaWZpYyB0ZW1wbGF0ZVxuICAgIHRoaXMudGVtcGxhdGVzLnNldCgnRlVOQ1RJT05fSU5URUxMSUdFTkNFJywge1xuICAgICAgbmFtZTogJ0Z1bmN0aW9uIEludGVsbGlnZW5jZSBTeXN0ZW0nLFxuICAgICAgZGVzY3JpcHRpb246ICdJbnRlbGxpZ2VuY2Ugc3lzdGVtIHNwZWNpYWxpemVkIGZvciBmdW5jdGlvbiBhbmFseXNpcycsXG4gICAgICB0ZW1wbGF0ZTogJ2Z1bmN0aW9uJyxcbiAgICAgIGNhcGFiaWxpdGllczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2FuYWx5emVGdW5jdGlvbkNhbGxzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgZnVuY3Rpb24gY2FsbCBwYXR0ZXJucyBhbmQgcGVyZm9ybWFuY2UnLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAncmV0dXJuIHsgY2FsbENvdW50OiAwLCBhdmVyYWdlVGltZTogMCwgcGFyYW1ldGVyczogW10gfTsnLFxuICAgICAgICAgIGNvbXBsZXhpdHk6IENhcGFiaWxpdHlDb21wbGV4aXR5LklOVEVSTUVESUFURSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdvcHRpbWl6ZUZ1bmN0aW9uVXNhZ2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU3VnZ2VzdCBvcHRpbWl6YXRpb25zIGZvciBmdW5jdGlvbiB1c2FnZScsXG4gICAgICAgICAgaW1wbGVtZW50YXRpb246ICdyZXR1cm4gW1wiQ29uc2lkZXIgbWVtb2l6YXRpb25cIiwgXCJBZGQgaW5wdXQgdmFsaWRhdGlvblwiXTsnLFxuICAgICAgICAgIGNvbXBsZXhpdHk6IENhcGFiaWxpdHlDb21wbGV4aXR5LkFEVkFOQ0VELFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGludGVncmF0aW9uUG9pbnRzOiBbXSxcbiAgICB9KTtcblxuICAgIC8vIENsYXNzLXNwZWNpZmljIHRlbXBsYXRlXG4gICAgdGhpcy50ZW1wbGF0ZXMuc2V0KCdDTEFTU19JTlRFTExJR0VOQ0UnLCB7XG4gICAgICBuYW1lOiAnQ2xhc3MgSW50ZWxsaWdlbmNlIFN5c3RlbScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0ludGVsbGlnZW5jZSBzeXN0ZW0gc3BlY2lhbGl6ZWQgZm9yIGNsYXNzIGFuYWx5c2lzJyxcbiAgICAgIHRlbXBsYXRlOiAnY2xhc3MnLFxuICAgICAgY2FwYWJpbGl0aWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnYW5hbHl6ZUNsYXNzVXNhZ2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSBjbGFzcyBpbnN0YW50aWF0aW9uIGFuZCBtZXRob2QgdXNhZ2UgcGF0dGVybnMnLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAncmV0dXJuIHsgaW5zdGFuY2VzOiAwLCBtZXRob2RDYWxsczoge30sIGluaGVyaXRhbmNlOiBbXSB9OycsXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuQURWQU5DRUQsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnc3VnZ2VzdENsYXNzSW1wcm92ZW1lbnRzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1N1Z2dlc3QgaW1wcm92ZW1lbnRzIHRvIGNsYXNzIGRlc2lnbicsXG4gICAgICAgICAgaW1wbGVtZW50YXRpb246XG4gICAgICAgICAgICAncmV0dXJuIFtcIkNvbnNpZGVyIGNvbXBvc2l0aW9uIG92ZXIgaW5oZXJpdGFuY2VcIiwgXCJBZGQgaW50ZXJmYWNlIHNlZ3JlZ2F0aW9uXCJdOycsXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuRVhQRVJULFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGludGVncmF0aW9uUG9pbnRzOiBbXSxcbiAgICB9KTtcblxuICAgIC8vIFR5cGUtc3BlY2lmaWMgdGVtcGxhdGVcbiAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ1RZUEVfSU5URUxMSUdFTkNFJywge1xuICAgICAgbmFtZTogJ1R5cGUgSW50ZWxsaWdlbmNlIFN5c3RlbScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0ludGVsbGlnZW5jZSBzeXN0ZW0gc3BlY2lhbGl6ZWQgZm9yIHR5cGUgYW5hbHlzaXMnLFxuICAgICAgdGVtcGxhdGU6ICd0eXBlJyxcbiAgICAgIGNhcGFiaWxpdGllczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ2FuYWx5emVUeXBlVXNhZ2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSB0eXBlIHVzYWdlIHBhdHRlcm5zIGFuZCByZWxhdGlvbnNoaXBzJyxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogJ3JldHVybiB7IHVzYWdlQ291bnQ6IDAsIHJlbGF0aW9uc2hpcHM6IFtdLCB2aW9sYXRpb25zOiBbXSB9OycsXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuQkFTSUMsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndmFsaWRhdGVUeXBlQ29uc2lzdGVuY3knLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVmFsaWRhdGUgdHlwZSBjb25zaXN0ZW5jeSBhY3Jvc3MgdGhlIGNvZGViYXNlJyxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogJ3JldHVybiB7IGNvbnNpc3RlbnQ6IHRydWUsIGlzc3VlczogW10gfTsnLFxuICAgICAgICAgIGNvbXBsZXhpdHk6IENhcGFiaWxpdHlDb21wbGV4aXR5LklOVEVSTUVESUFURSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBpbnRlZ3JhdGlvblBvaW50czogW10sXG4gICAgfSk7XG5cbiAgICAvLyBEYXRhLXNwZWNpZmljIHRlbXBsYXRlXG4gICAgdGhpcy50ZW1wbGF0ZXMuc2V0KCdEQVRBX0lOVEVMTElHRU5DRScsIHtcbiAgICAgIG5hbWU6ICdEYXRhIEludGVsbGlnZW5jZSBTeXN0ZW0nLFxuICAgICAgZGVzY3JpcHRpb246ICdJbnRlbGxpZ2VuY2Ugc3lzdGVtIHNwZWNpYWxpemVkIGZvciBkYXRhIGFuYWx5c2lzJyxcbiAgICAgIHRlbXBsYXRlOiAnZGF0YScsXG4gICAgICBjYXBhYmlsaXRpZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdhbmFseXplRGF0YVBhdHRlcm5zJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgZGF0YSBzdHJ1Y3R1cmUgYW5kIHVzYWdlIHBhdHRlcm5zJyxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogJ3JldHVybiB7IHN0cnVjdHVyZToge30sIHBhdHRlcm5zOiBbXSwgYW5vbWFsaWVzOiBbXSB9OycsXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuSU5URVJNRURJQVRFLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3ZhbGlkYXRlRGF0YUludGVncml0eScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdWYWxpZGF0ZSBkYXRhIGludGVncml0eSBhbmQgY29uc2lzdGVuY3knLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAncmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIHdhcm5pbmdzOiBbXSB9OycsXG4gICAgICAgICAgY29tcGxleGl0eTogQ2FwYWJpbGl0eUNvbXBsZXhpdHkuQURWQU5DRUQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgaW50ZWdyYXRpb25Qb2ludHM6IFtdLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGZ1bmN0aW9uIGFuYWx5c2lzIGNvZGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVGdW5jdGlvbkFuYWx5c2lzQ29kZShjYW5kaWRhdGU6IFRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgIC8vIEFuYWx5emUgZnVuY3Rpb24gYmVoYXZpb3IgYW5kIHBhdHRlcm5zXG4gICAgY29uc3QgYW5hbHlzaXMgPSB7XG4gICAgICBmdW5jdGlvbk5hbWU6ICcke2NhbmRpZGF0ZS5leHBvcnQuZXhwb3J0TmFtZX0nLFxuICAgICAgY29tcGxleGl0eTogJHtjYW5kaWRhdGUuZXhwb3J0LmNvbXBsZXhpdHl9LFxuICAgICAgY2FsbFBhdHRlcm5zOiB0aGlzLnRyYWNrQ2FsbFBhdHRlcm5zKGRhdGEpLFxuICAgICAgcGVyZm9ybWFuY2U6IHRoaXMubWVhc3VyZVBlcmZvcm1hbmNlKGRhdGEpLFxuICAgICAgcmVjb21tZW5kYXRpb25zOiB0aGlzLmdlbmVyYXRlRnVuY3Rpb25SZWNvbW1lbmRhdGlvbnMoZGF0YSlcbiAgICB9O1xuICAgIHJldHVybiBhbmFseXNpcztcbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNsYXNzIGFuYWx5c2lzIGNvZGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDbGFzc0FuYWx5c2lzQ29kZShjYW5kaWRhdGU6IFRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgIC8vIEFuYWx5emUgY2xhc3Mgc3RydWN0dXJlIGFuZCB1c2FnZVxuICAgIGNvbnN0IGFuYWx5c2lzID0ge1xuICAgICAgY2xhc3NOYW1lOiAnJHtjYW5kaWRhdGUuZXhwb3J0LmV4cG9ydE5hbWV9JyxcbiAgICAgIG1ldGhvZHM6IHRoaXMuYW5hbHl6ZUNsYXNzTWV0aG9kcyhkYXRhKSxcbiAgICAgIHByb3BlcnRpZXM6IHRoaXMuYW5hbHl6ZUNsYXNzUHJvcGVydGllcyhkYXRhKSxcbiAgICAgIGluaGVyaXRhbmNlOiB0aGlzLmFuYWx5emVJbmhlcml0YW5jZShkYXRhKSxcbiAgICAgIGluc3RhbnRpYXRpb246IHRoaXMudHJhY2tJbnN0YW50aWF0aW9uKGRhdGEpXG4gICAgfTtcbiAgICByZXR1cm4gYW5hbHlzaXM7XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB0eXBlIGFuYWx5c2lzIGNvZGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVUeXBlQW5hbHlzaXNDb2RlKGNhbmRpZGF0ZTogVHJhbnNmb3JtYXRpb25DYW5kaWRhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG4gICAgLy8gQW5hbHl6ZSB0eXBlIHN0cnVjdHVyZSBhbmQgcmVsYXRpb25zaGlwc1xuICAgIGNvbnN0IGFuYWx5c2lzID0ge1xuICAgICAgdHlwZU5hbWU6ICcke2NhbmRpZGF0ZS5leHBvcnQuZXhwb3J0TmFtZX0nLFxuICAgICAgc3RydWN0dXJlOiB0aGlzLmFuYWx5emVUeXBlU3RydWN0dXJlKGRhdGEpLFxuICAgICAgcmVsYXRpb25zaGlwczogdGhpcy5maW5kVHlwZVJlbGF0aW9uc2hpcHMoZGF0YSksXG4gICAgICB1c2FnZTogdGhpcy50cmFja1R5cGVVc2FnZShkYXRhKSxcbiAgICAgIGNvbXBhdGliaWxpdHk6IHRoaXMuY2hlY2tUeXBlQ29tcGF0aWJpbGl0eShkYXRhKVxuICAgIH07XG4gICAgcmV0dXJuIGFuYWx5c2lzO1xuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZGF0YSBhbmFseXNpcyBjb2RlXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRGF0YUFuYWx5c2lzQ29kZShjYW5kaWRhdGU6IFRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgIC8vIEFuYWx5emUgZGF0YSBwYXR0ZXJucyBhbmQgdXNhZ2VcbiAgICBjb25zdCBhbmFseXNpcyA9IHtcbiAgICAgIGRhdGFOYW1lOiAnJHtjYW5kaWRhdGUuZXhwb3J0LmV4cG9ydE5hbWV9JyxcbiAgICAgIHBhdHRlcm5zOiB0aGlzLmlkZW50aWZ5RGF0YVBhdHRlcm5zKGRhdGEpLFxuICAgICAgdXNhZ2U6IHRoaXMudHJhY2tEYXRhVXNhZ2UoZGF0YSksXG4gICAgICB2YWxpZGF0aW9uOiB0aGlzLnZhbGlkYXRlRGF0YVN0cnVjdHVyZShkYXRhKSxcbiAgICAgIG9wdGltaXphdGlvbjogdGhpcy5zdWdnZXN0RGF0YU9wdGltaXphdGlvbnMoZGF0YSlcbiAgICB9O1xuICAgIHJldHVybiBhbmFseXNpcztcbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGFkdmFuY2VkIGluc2lnaHRzIGNvZGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVBZHZhbmNlZEluc2lnaHRzQ29kZShjYW5kaWRhdGU6IFRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgIC8vIEdlbmVyYXRlIGFkdmFuY2VkIGluc2lnaHRzIGFuZCByZWNvbW1lbmRhdGlvbnNcbiAgICBjb25zdCBpbnNpZ2h0cyA9IHtcbiAgICAgIHByZWRpY3RpdmVBbmFseXNpczogdGhpcy5wZXJmb3JtUHJlZGljdGl2ZUFuYWx5c2lzKGRhdGEpLFxuICAgICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogdGhpcy5pZGVudGlmeU9wdGltaXphdGlvbnMoZGF0YSksXG4gICAgICByaXNrQXNzZXNzbWVudDogdGhpcy5hc3Nlc3NSaXNrcyhkYXRhKSxcbiAgICAgIHN0cmF0ZWdpY1JlY29tbWVuZGF0aW9uczogdGhpcy5nZW5lcmF0ZVN0cmF0ZWdpY1JlY29tbWVuZGF0aW9ucyhkYXRhKVxuICAgIH07XG4gICAgcmV0dXJuIGluc2lnaHRzO1xuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZGFzaGJvYXJkIGludGVncmF0aW9uIGNvZGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVEYXNoYm9hcmRJbnRlZ3JhdGlvbkNvZGUoc3lzdGVtTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuLy8gRGFzaGJvYXJkIGludGVncmF0aW9uIGZvciAke3N5c3RlbU5hbWV9XG5jb25zdCAke3N5c3RlbU5hbWUudG9Mb3dlckNhc2UoKX1XaWRnZXQgPSB7XG4gIHRpdGxlOiAnJHtzeXN0ZW1OYW1lfScsXG4gIGNvbXBvbmVudDogKCkgPT4gPEludGVsbGlnZW5jZVdpZGdldCBzeXN0ZW09eyR7c3lzdGVtTmFtZS50b0xvd2VyQ2FzZSgpfX0gLz4sXG4gIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgcmVmcmVzaEludGVydmFsOiAzMDAwMFxufTtcbmA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgQVBJIGludGVncmF0aW9uIGNvZGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVBUElJbnRlZ3JhdGlvbkNvZGUoc3lzdGVtTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuLy8gQVBJIGVuZHBvaW50IGZvciAke3N5c3RlbU5hbWV9XG5hcHAuZ2V0KCcvYXBpL2ludGVsbGlnZW5jZS8ke3N5c3RlbU5hbWUudG9Mb3dlckNhc2UoKX0nLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbmFseXRpY3MgPSBhd2FpdCAke3N5c3RlbU5hbWUudG9Mb3dlckNhc2UoKX0uYW5hbHl6ZVBhdHRlcm5zKHJlcS5xdWVyeSk7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgJHtzeXN0ZW1OYW1lLnRvTG93ZXJDYXNlKCl9LmdlbmVyYXRlUmVjb21tZW5kYXRpb25zKHJlcS5xdWVyeSk7XG4gICAgcmVzLmpzb24oeyBhbmFseXRpY3MsIHJlY29tbWVuZGF0aW9ucyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59KTtcbmA7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGVzdGltYXRlZCB2YWx1ZSBvZiB0aGUgaW50ZWxsaWdlbmNlIHN5c3RlbVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVFc3RpbWF0ZWRWYWx1ZShcbiAgICBjYW5kaWRhdGU6IFRyYW5zZm9ybWF0aW9uQ2FuZGlkYXRlLFxuICAgIGNhcGFiaWxpdGllczogSW50ZWxsaWdlbmNlQ2FwYWJpbGl0eVtdLFxuICApOiBudW1iZXIge1xuICAgIGxldCB2YWx1ZSA9IGNhbmRpZGF0ZS5lc3RpbWF0ZWRCZW5lZml0O1xuXG4gICAgLy8gQWRkIHZhbHVlIGJhc2VkIG9uIGNhcGFiaWxpdGllc1xuICAgIGNhcGFiaWxpdGllcy5mb3JFYWNoKGNhcGFiaWxpdHkgPT4ge1xuICAgICAgc3dpdGNoIChjYXBhYmlsaXR5LmNvbXBsZXhpdHkpIHtcbiAgICAgICAgY2FzZSBDYXBhYmlsaXR5Q29tcGxleGl0eS5CQVNJQzpcbiAgICAgICAgICB2YWx1ZSArPSAxMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDYXBhYmlsaXR5Q29tcGxleGl0eS5JTlRFUk1FRElBVEU6XG4gICAgICAgICAgdmFsdWUgKz0gMjA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FwYWJpbGl0eUNvbXBsZXhpdHkuQURWQU5DRUQ6XG4gICAgICAgICAgdmFsdWUgKz0gMzU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FwYWJpbGl0eUNvbXBsZXhpdHkuRVhQRVJUOlxuICAgICAgICAgIHZhbHVlICs9IDUwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE1hdGgubWluKDEwMCwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzc2VzcyBnZW5lcmF0aW9uIGNvbXBsZXhpdHlcbiAgICovXG4gIHByaXZhdGUgYXNzZXNzR2VuZXJhdGlvbkNvbXBsZXhpdHkoXG4gICAgY2FuZGlkYXRlOiBUcmFuc2Zvcm1hdGlvbkNhbmRpZGF0ZSxcbiAgICBjYXBhYmlsaXRpZXM6IEludGVsbGlnZW5jZUNhcGFiaWxpdHlbXSxcbiAgKTogR2VuZXJhdGlvbkNvbXBsZXhpdHkge1xuICAgIGNvbnN0IGJhc2VDb21wbGV4aXR5ID0gY2FuZGlkYXRlLnRyYW5zZm9ybWF0aW9uQ29tcGxleGl0eTtcbiAgICBjb25zdCBjYXBhYmlsaXR5Q29tcGxleGl0eSA9IGNhcGFiaWxpdGllcy5yZWR1Y2UoKG1heCwgY2FwKSA9PiB7XG4gICAgICBjb25zdCBjb21wbGV4aXR5VmFsdWUgPSB7XG4gICAgICAgIFtDYXBhYmlsaXR5Q29tcGxleGl0eS5CQVNJQ106IDEsXG4gICAgICAgIFtDYXBhYmlsaXR5Q29tcGxleGl0eS5JTlRFUk1FRElBVEVdOiAyLFxuICAgICAgICBbQ2FwYWJpbGl0eUNvbXBsZXhpdHkuQURWQU5DRURdOiAzLFxuICAgICAgICBbQ2FwYWJpbGl0eUNvbXBsZXhpdHkuRVhQRVJUXTogNCxcbiAgICAgIH1bY2FwLmNvbXBsZXhpdHldO1xuICAgICAgcmV0dXJuIE1hdGgubWF4KG1heCwgY29tcGxleGl0eVZhbHVlKTtcbiAgICB9LCAwKTtcblxuICAgIGNvbnN0IHRvdGFsQ29tcGxleGl0eSA9XG4gICAgICB7XG4gICAgICAgIFNJTVBMRTogMSxcbiAgICAgICAgTU9ERVJBVEU6IDIsXG4gICAgICAgIENPTVBMRVg6IDMsXG4gICAgICAgIFZFUllfQ09NUExFWDogNCxcbiAgICAgIH1bYmFzZUNvbXBsZXhpdHldICsgY2FwYWJpbGl0eUNvbXBsZXhpdHk7XG5cbiAgICBpZiAodG90YWxDb21wbGV4aXR5IDw9IDMpIHJldHVybiBHZW5lcmF0aW9uQ29tcGxleGl0eS5TSU1QTEU7XG4gICAgaWYgKHRvdGFsQ29tcGxleGl0eSA8PSA1KSByZXR1cm4gR2VuZXJhdGlvbkNvbXBsZXhpdHkuTU9ERVJBVEU7XG4gICAgaWYgKHRvdGFsQ29tcGxleGl0eSA8PSA3KSByZXR1cm4gR2VuZXJhdGlvbkNvbXBsZXhpdHkuQ09NUExFWDtcbiAgICByZXR1cm4gR2VuZXJhdGlvbkNvbXBsZXhpdHkuVkVSWV9DT01QTEVYO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBvdXRwdXQgZGlyZWN0b3J5IGV4aXN0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVPdXRwdXREaXJlY3RvcnkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLnByb21pc2VzLmFjY2Vzcyh0aGlzLm91dHB1dERpcmVjdG9yeSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBhd2FpdCBmcy5wcm9taXNlcy5ta2Rpcih0aGlzLm91dHB1dERpcmVjdG9yeSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHN1bW1hcnkgb2YgYWxsIGdlbmVyYXRlZCBzeXN0ZW1zXG4gICAqL1xuICBnZW5lcmF0ZVN1bW1hcnkocmVzdWx0czogR2VuZXJhdGlvblJlc3VsdFtdKTogR2VuZXJhdGlvblN1bW1hcnkge1xuICAgIGNvbnN0IHRvdGFsU3lzdGVtc0dlbmVyYXRlZCA9IHJlc3VsdHMubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ2FwYWJpbGl0aWVzQWRkZWQgPSByZXN1bHRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLmNhcGFiaWxpdGllcy5sZW5ndGgsIDApO1xuICAgIGNvbnN0IHRvdGFsSW50ZWdyYXRpb25Qb2ludHMgPSByZXN1bHRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLmludGVncmF0aW9uUG9pbnRzLmxlbmd0aCwgMCk7XG4gICAgY29uc3QgYXZlcmFnZUNvbXBsZXhpdHkgPVxuICAgICAgcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4ge1xuICAgICAgICBjb25zdCBjb21wbGV4aXR5VmFsdWUgPSB7XG4gICAgICAgICAgW0dlbmVyYXRpb25Db21wbGV4aXR5LlNJTVBMRV06IDEsXG4gICAgICAgICAgW0dlbmVyYXRpb25Db21wbGV4aXR5Lk1PREVSQVRFXTogMixcbiAgICAgICAgICBbR2VuZXJhdGlvbkNvbXBsZXhpdHkuQ09NUExFWF06IDMsXG4gICAgICAgICAgW0dlbmVyYXRpb25Db21wbGV4aXR5LlZFUllfQ09NUExFWF06IDQsXG4gICAgICAgIH1bci5jb21wbGV4aXR5XTtcbiAgICAgICAgcmV0dXJuIHN1bSArIGNvbXBsZXhpdHlWYWx1ZTtcbiAgICAgIH0sIDApIC8gcmVzdWx0cy5sZW5ndGg7XG4gICAgY29uc3QgZXN0aW1hdGVkVG90YWxWYWx1ZSA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuZXN0aW1hdGVkVmFsdWUsIDApO1xuXG4gICAgY29uc3QgZ2VuZXJhdGlvbnNCeUNhdGVnb3J5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgcmVzdWx0cy5mb3JFYWNoKHIgPT4ge1xuICAgICAgY29uc3QgY2F0ZWdvcnkgPSByLm9yaWdpbmFsRXhwb3J0LmV4cG9ydFR5cGU7XG4gICAgICBnZW5lcmF0aW9uc0J5Q2F0ZWdvcnlbY2F0ZWdvcnldID0gKGdlbmVyYXRpb25zQnlDYXRlZ29yeVtjYXRlZ29yeV0gfHwgMCkgKyAxO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsU3lzdGVtc0dlbmVyYXRlZCxcbiAgICAgIHRvdGFsQ2FwYWJpbGl0aWVzQWRkZWQsXG4gICAgICB0b3RhbEludGVncmF0aW9uUG9pbnRzLFxuICAgICAgYXZlcmFnZUNvbXBsZXhpdHksXG4gICAgICBlc3RpbWF0ZWRUb3RhbFZhbHVlLFxuICAgICAgZ2VuZXJhdGlvbnNCeUNhdGVnb3J5LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgaW50ZWdyYXRpb24gZ3VpZGVcbiAgICovXG4gIGdlbmVyYXRlSW50ZWdyYXRpb25HdWlkZShyZXN1bHRzOiBHZW5lcmF0aW9uUmVzdWx0W10pOiBzdHJpbmcge1xuICAgIGNvbnN0IGd1aWRlID0gW1xuICAgICAgJyMgRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2UgU3lzdGVtcyBJbnRlZ3JhdGlvbiBHdWlkZScsXG4gICAgICAnJyxcbiAgICAgICcjIyBPdmVydmlldycsXG4gICAgICBgR2VuZXJhdGVkICR7cmVzdWx0cy5sZW5ndGh9IGludGVsbGlnZW5jZSBzeXN0ZW1zIGZyb20gdW51c2VkIGV4cG9ydHMuYCxcbiAgICAgICcnLFxuICAgICAgJyMjIEludGVncmF0aW9uIFN0ZXBzJyxcbiAgICAgICcnLFxuICAgICAgJyMjIyAxLiBJbXBvcnQgSW50ZWxsaWdlbmNlIFN5c3RlbXMnLFxuICAgICAgJ2BgYHR5cGVzY3JpcHQnLFxuICAgICAgJy8vIEFkZCB0byB5b3VyIG1haW4gYXBwbGljYXRpb24nLFxuICAgICAgLi4ucmVzdWx0c1xuICAgICAgICAuc2xpY2UoMCwgNSlcbiAgICAgICAgLm1hcChcbiAgICAgICAgICByID0+IGBpbXBvcnQgeyAke3Iuc3lzdGVtTmFtZS50b0xvd2VyQ2FzZSgpfSB9IGZyb20gJy4vaW50ZWxsaWdlbmNlLyR7ci5zeXN0ZW1OYW1lfSc7YCxcbiAgICAgICAgKSxcbiAgICAgICdgYGAnLFxuICAgICAgJycsXG4gICAgICAnIyMjIDIuIEluaXRpYWxpemUgU3lzdGVtcycsXG4gICAgICAnYGBgdHlwZXNjcmlwdCcsXG4gICAgICAnY29uc3QgaW50ZWxsaWdlbmNlU3lzdGVtcyA9IFsnLFxuICAgICAgLi4ucmVzdWx0cy5zbGljZSgwLCA1KS5tYXAociA9PiBgICAke3Iuc3lzdGVtTmFtZS50b0xvd2VyQ2FzZSgpfSxgKSxcbiAgICAgICddOycsXG4gICAgICAnYGBgJyxcbiAgICAgICcnLFxuICAgICAgJyMjIyAzLiBEYXNoYm9hcmQgSW50ZWdyYXRpb24nLFxuICAgICAgJ0FkZCBpbnRlbGxpZ2VuY2Ugd2lkZ2V0cyB0byB5b3VyIGRhc2hib2FyZDonLFxuICAgICAgJ2BgYHR5cGVzY3JpcHQnLFxuICAgICAgLi4ucmVzdWx0c1xuICAgICAgICAuc2xpY2UoMCwgMylcbiAgICAgICAgLm1hcChyID0+IHIuaW50ZWdyYXRpb25Qb2ludHMuZmluZChpcCA9PiBpcC50YXJnZXQuaW5jbHVkZXMoJ0Rhc2hib2FyZCcpKT8uY29kZSB8fCAnJylcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKSxcbiAgICAgICdgYGAnLFxuICAgICAgJycsXG4gICAgICAnIyMjIDQuIEFQSSBJbnRlZ3JhdGlvbicsXG4gICAgICAnRXhwb3NlIGludGVsbGlnZW5jZSBzeXN0ZW1zIHZpYSBBUEk6JyxcbiAgICAgICdgYGB0eXBlc2NyaXB0JyxcbiAgICAgIC4uLnJlc3VsdHNcbiAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgIC5tYXAociA9PiByLmludGVncmF0aW9uUG9pbnRzLmZpbmQoaXAgPT4gaXAudGFyZ2V0LmluY2x1ZGVzKCdhcGknKSk/LmNvZGUgfHwgJycpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbiksXG4gICAgICAnYGBgJyxcbiAgICAgICcnLFxuICAgICAgJyMjIFN5c3RlbSBDYXBhYmlsaXRpZXMnLFxuICAgICAgJycsXG4gICAgICAuLi5yZXN1bHRzXG4gICAgICAgIC5zbGljZSgwLCAxMClcbiAgICAgICAgLm1hcChyID0+IFtcbiAgICAgICAgICBgIyMjICR7ci5zeXN0ZW1OYW1lfWAsXG4gICAgICAgICAgYC0gT3JpZ2luYWwgRXhwb3J0OiAke3Iub3JpZ2luYWxFeHBvcnQuZXhwb3J0TmFtZX1gLFxuICAgICAgICAgIGAtIEVzdGltYXRlZCBWYWx1ZTogJHtyLmVzdGltYXRlZFZhbHVlfS8xMDBgLFxuICAgICAgICAgIGAtIENhcGFiaWxpdGllczogJHtyLmNhcGFiaWxpdGllcy5sZW5ndGh9YCxcbiAgICAgICAgICBgLSBJbnRlZ3JhdGlvbiBQb2ludHM6ICR7ci5pbnRlZ3JhdGlvblBvaW50cy5sZW5ndGh9YCxcbiAgICAgICAgICAnJyxcbiAgICAgICAgXSlcbiAgICAgICAgLmZsYXQoKSxcbiAgICAgICcnLFxuICAgICAgJyMjIE5leHQgU3RlcHMnLFxuICAgICAgJzEuIFJldmlldyBnZW5lcmF0ZWQgaW50ZWxsaWdlbmNlIHN5c3RlbXMnLFxuICAgICAgJzIuIEN1c3RvbWl6ZSBjb25maWd1cmF0aW9ucyBhcyBuZWVkZWQnLFxuICAgICAgJzMuIEludGVncmF0ZSB3aXRoIGV4aXN0aW5nIG1vbml0b3JpbmcnLFxuICAgICAgJzQuIFNldCB1cCBhdXRvbWF0ZWQgdGVzdGluZycsXG4gICAgICAnNS4gRGVwbG95IHRvIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQnLFxuICAgIF07XG5cbiAgICByZXR1cm4gZ3VpZGUuam9pbignXFxuJyk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==