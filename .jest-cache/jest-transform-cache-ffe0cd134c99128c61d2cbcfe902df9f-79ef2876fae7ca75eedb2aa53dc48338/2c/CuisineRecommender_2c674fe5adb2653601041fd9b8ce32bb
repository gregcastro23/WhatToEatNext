436d72c9ddab37ac1d8703529d69d87d
"use strict";
'use client';
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const logger_1 = require("@/utils/logger");
const lucide_react_1 = require("lucide-react");
const cuisineRecommender_1 = require("@/utils/cuisineRecommender");
const monicaKalchmCalculations_1 = require("@/utils/monicaKalchmCalculations");
const CulturalAnalyticsService_1 = require("@/services/CulturalAnalyticsService");
const hooks_1 = require("@/contexts/AlchemicalContext/hooks");
const recipes_1 = require("@/data/recipes");
const RecipeRecommendations_1 = __importDefault(require("./RecipeRecommendations"));
const SauceRecommendations_1 = __importDefault(require("./SauceRecommendations"));
const AdvancedSearchFilters_1 = __importDefault(require("./AdvancedSearchFilters"));
const naturalLanguageProcessor_1 = require("@/utils/naturalLanguageProcessor");
const useRecommendationAnalytics_1 = require("@/hooks/useRecommendationAnalytics");
const PerformanceAnalyticsDashboard_1 = __importDefault(require("@/components/analytics/PerformanceAnalyticsDashboard"));
const EnterpriseIntelligencePanel_1 = __importDefault(require("@/components/intelligence/EnterpriseIntelligencePanel"));
// ========== HELPER FUNCTIONS ==========
const getSafeScore = (score) => {
    const numScore = typeof score === 'number' ? score : parseFloat(String(score));
    return !isNaN(numScore) ? numScore : 0.5;
};
const getCurrentSeason = () => {
    const now = new Date();
    const month = now.getMonth(); // 0 = January, 11 = December
    if (month >= 2 && month <= 4)
        return 'spring';
    if (month >= 5 && month <= 7)
        return 'summer';
    if (month >= 8 && month <= 10)
        return 'autumn';
    return 'winter';
};
// Calculate alchemical balance optimization score
const calculateAlchemicalBalance = (alchemicalProperties) => {
    if (!alchemicalProperties)
        return 0.5;
    const { Spirit, Essence, Matter, Substance } = alchemicalProperties;
    // Calculate balance based on how evenly distributed the alchemical properties are
    const values = [Spirit, Essence, Matter, Substance];
    const mean = values.reduce((sum, val) => sum + val, 0) / values.length;
    const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length;
    const standardDeviation = Math.sqrt(variance);
    // Lower standard deviation = better balance
    // Normalize to 0-1 scale where 1 is perfect balance
    const balanceScore = Math.max(0, 1 - (standardDeviation / mean));
    return Math.min(1, Math.max(0, balanceScore));
};
// Calculate seasonal optimization score for cuisine
const calculateSeasonalOptimization = (cuisineName, season) => {
    // Seasonal preferences for different cuisines
    const seasonalPreferences = {
        'italian': { spring: 0.9, summer: 0.95, autumn: 0.85, winter: 0.8 },
        'chinese': { spring: 0.85, summer: 0.8, autumn: 0.9, winter: 0.95 },
        'japanese': { spring: 0.95, summer: 0.85, autumn: 0.9, winter: 0.8 },
        'indian': { spring: 0.8, summer: 0.7, autumn: 0.85, winter: 0.9 },
        'thai': { spring: 0.85, summer: 0.95, autumn: 0.8, winter: 0.7 },
        'mexican': { spring: 0.9, summer: 0.95, autumn: 0.85, winter: 0.8 },
        'french': { spring: 0.9, summer: 0.85, autumn: 0.95, winter: 0.9 },
        'mediterranean': { spring: 0.95, summer: 0.95, autumn: 0.85, winter: 0.75 },
        'middle-eastern': { spring: 0.85, summer: 0.9, autumn: 0.8, winter: 0.85 }
    };
    const cuisineKey = cuisineName.toLowerCase();
    const preferences = seasonalPreferences[cuisineKey];
    if (preferences && preferences[season]) {
        return preferences[season];
    }
    // Default seasonal optimization
    return 0.8;
};
// Calculate Kalchm harmony score for recipe recommendations
const calculateRecipeKalchmHarmony = (recipeThermodynamics, cuisineThermodynamics) => {
    if (!recipeThermodynamics)
        return 0.7;
    // If we have cuisine thermodynamics, compare them
    if (cuisineThermodynamics) {
        const kalchmRatio = Math.min(recipeThermodynamics.kalchm, cuisineThermodynamics.kalchm) /
            Math.max(recipeThermodynamics.kalchm, cuisineThermodynamics.kalchm);
        const monicaHarmony = 1 - Math.abs(recipeThermodynamics.monica - cuisineThermodynamics.monica) / 5;
        return Math.max(0, Math.min(1, (kalchmRatio * 0.6) + (monicaHarmony * 0.4)));
    }
    // Otherwise, score based on thermodynamic stability
    const stabilityScore = Math.max(0, 1 - Math.abs(recipeThermodynamics.gregsEnergy) / 5);
    const kalchmScore = Math.min(1, recipeThermodynamics.kalchm / 2); // Normalize Kalchm
    return Math.max(0, Math.min(1, (stabilityScore * 0.5) + (kalchmScore * 0.5)));
};
// Calculate thermodynamic optimization for recipes
const calculateThermodynamicOptimization = (thermodynamics, currentElementalProfile) => {
    if (!thermodynamics)
        return 0.7;
    // Calculate optimization based on thermodynamic efficiency
    const heatEfficiency = Math.max(0, Math.min(1, thermodynamics.heat));
    const entropyBalance = Math.max(0, 1 - thermodynamics.entropy / 2);
    const reactivityOptimal = Math.max(0, 1 - Math.abs(thermodynamics.reactivity - 1) / 2);
    // Weight the factors for overall optimization
    const optimization = (heatEfficiency * 0.4) + (entropyBalance * 0.3) + (reactivityOptimal * 0.3);
    return Math.max(0, Math.min(1, optimization));
};
const buildCompleteRecipe = (recipe, cuisineName) => {
    const defaultElementalProperties = {
        Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25
    };
    const matchScore = typeof recipe.matchScore === 'number' ? recipe.matchScore : 0.85;
    return {
        id: recipe.id || `recipe-${Math.random().toString(36).substring(2, 9)}`,
        name: recipe.name || `${cuisineName} Recipe`,
        description: recipe.description || `A traditional recipe from ${cuisineName} cuisine.`,
        cuisine: recipe.cuisine || cuisineName,
        matchPercentage: recipe.matchPercentage || Math.round(matchScore * 100),
        matchScore,
        elementalProperties: recipe.elementalProperties || defaultElementalProperties,
        ingredients: Array.isArray(recipe.ingredients) ? recipe.ingredients : [],
        instructions: Array.isArray(recipe.instructions) ? recipe.instructions : [],
        cookTime: String(recipe.cookTime || "30 minutes"),
        prepTime: String(recipe.prepTime || "15 minutes"),
        servingSize: typeof recipe.servingSize === 'number' ? recipe.servingSize : 4,
        difficulty: String(recipe.difficulty || "Medium"),
        ...recipe
    };
};
// ========== ERROR BOUNDARY COMPONENT ==========
class CuisineRecommenderErrorBoundary extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.handleRetry = () => {
            if (this.state.retryCount < 3) {
                this.setState(prevState => ({
                    hasError: false,
                    error: null,
                    retryCount: prevState.retryCount + 1
                }));
                this.props.onRetry();
            }
        };
        this.state = { hasError: false, error: null, retryCount: 0 };
    }
    static getDerivedStateFromError(error) {
        return { hasError: true, error, retryCount: 0 };
    }
    componentDidCatch(error, errorInfo) {
        logger_1.logger.error('CuisineRecommender Error:', error, errorInfo);
    }
    render() {
        if (this.state.hasError) {
            return ((0, jsx_runtime_1.jsxs)("div", { className: "p-6 bg-red-50 border border-red-200 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2 mb-3", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertCircle, { className: "text-red-500", size: 20 }), (0, jsx_runtime_1.jsx)("h3", { className: "text-red-800 font-medium", children: "Something went wrong" })] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-red-600 text-sm mb-4", children: ["We encountered an error loading the cuisine recommendations.", this.state.retryCount < 3 && " You can try again."] }), this.state.retryCount < 3 && ((0, jsx_runtime_1.jsxs)("button", { onClick: this.handleRetry, className: "flex items-center space-x-2 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded transition-colors", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.RefreshCw, { size: 16 }), (0, jsx_runtime_1.jsxs)("span", { children: ["Try Again (", 3 - this.state.retryCount, " attempts left)"] })] }))] }));
        }
        return this.props.children;
    }
}
// ========== LOADING COMPONENT ==========
const LoadingComponent = ({ loadingState }) => ((0, jsx_runtime_1.jsxs)("div", { className: "p-6 flex flex-col items-center justify-center space-y-3 bg-white rounded-lg shadow", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-10 h-10 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg font-medium", children: "Loading cuisine recommendations..." }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-500", children: loadingState.step }), (0, jsx_runtime_1.jsx)("div", { className: "w-full max-w-xs bg-gray-200 rounded-full h-2", children: (0, jsx_runtime_1.jsx)("div", { className: "bg-blue-500 h-2 rounded-full transition-all duration-300", style: { width: `${loadingState.progress}%` } }) })] }));
// ========== MAIN COMPONENT ==========
function CuisineRecommender() {
    var _a, _b;
    // ========== CONTEXT AND STATE ==========
    const alchemicalContext = (0, hooks_1.useAlchemical)();
    const { planetaryPositions = {}, state } = alchemicalContext !== null && alchemicalContext !== void 0 ? alchemicalContext : {};
    const { astrologicalState = { zodiacSign: 'aries', lunarPhase: 'new moon' } } = state !== null && state !== void 0 ? state : {};
    const { zodiacSign: currentZodiac, lunarPhase } = astrologicalState;
    // Component state
    const [selectedCuisine, setSelectedCuisine] = (0, react_1.useState)(null);
    const [cuisineRecommendations, setCuisineRecommendations] = (0, react_1.useState)([]);
    const [loadingState, setLoadingState] = (0, react_1.useState)({
        isLoading: true,
        step: 'Initializing...',
        progress: 0
    });
    const [error, setError] = (0, react_1.useState)(null);
    const [matchingRecipes, setMatchingRecipes] = (0, react_1.useState)([]);
    const [sauceRecommendations, setSauceRecommendations] = (0, react_1.useState)([]);
    // Cultural Analytics state
    const [culturalAnalytics, setCulturalAnalytics] = (0, react_1.useState)({});
    const [fusionRecommendations, setFusionRecommendations] = (0, react_1.useState)([]);
    // UI state
    const [showCuisineDetails, setShowCuisineDetails] = (0, react_1.useState)(false);
    const [selectedRecipe, setSelectedRecipe] = (0, react_1.useState)(null);
    const [showCulturalAnalytics, setShowCulturalAnalytics] = (0, react_1.useState)(false);
    const [showFusionRecommendations, setShowFusionRecommendations] = (0, react_1.useState)(false);
    // Advanced Search and Filtering state
    const [searchFilters, setSearchFilters] = (0, react_1.useState)({
        query: '',
        dietaryRestrictions: [],
        difficultyLevel: [],
        cookingTime: { min: 0, max: 480 },
        cuisineTypes: [],
        mealTypes: [],
        spiciness: [],
        ingredients: []
    });
    const [searchIntent, setSearchIntent] = (0, react_1.useState)(null);
    const [filteredCuisines, setFilteredCuisines] = (0, react_1.useState)([]);
    const [originalCuisines, setOriginalCuisines] = (0, react_1.useState)([]);
    // Performance Analytics and Caching state
    const [showPerformanceAnalytics, setShowPerformanceAnalytics] = (0, react_1.useState)(false);
    // Enterprise Intelligence state
    const [showEnterpriseIntelligence, setShowEnterpriseIntelligence] = (0, react_1.useState)(false);
    const [enterpriseIntelligenceAnalysis, setEnterpriseIntelligenceAnalysis] = (0, react_1.useState)(null);
    // Analytics hooks
    const [analyticsState, analyticsActions] = (0, useRecommendationAnalytics_1.useRecommendationAnalytics)({
        enablePerformanceTracking: true,
        enableCaching: true,
        enableInteractionTracking: true,
        metricsUpdateInterval: 5000
    });
    const { trackClick, trackView, trackExpand, trackSearch, trackFilter } = (0, useRecommendationAnalytics_1.useInteractionTracking)();
    // ========== MEMOIZED VALUES ==========
    const currentMomentElementalProfile = (0, react_1.useMemo)(() => {
        var _a;
        const elementalState = (state === null || state === void 0 ? void 0 : state.elementalState) || ((_a = state === null || state === void 0 ? void 0 : state.astrologicalState) === null || _a === void 0 ? void 0 : _a.elementalState);
        if (elementalState) {
            return elementalState;
        }
        if (currentZodiac) {
            return (0, cuisineRecommender_1.calculateElementalProfileFromZodiac)(currentZodiac);
        }
        return { Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25 };
    }, [state, currentZodiac]);
    const astrologicalStateForRecommendations = (0, react_1.useMemo)(() => ({
        zodiacSign: String(currentZodiac || 'aries'),
        lunarPhase: String(lunarPhase || 'new moon'),
        planetaryPositions: planetaryPositions || {},
    }), [currentZodiac, lunarPhase, planetaryPositions]);
    // ========== DATA LOADING ==========
    const loadCuisineData = (0, react_1.useCallback)(async () => {
        var _a, _b;
        // Start performance tracking
        const endTiming = analyticsActions.startTiming('cuisine_recommendation_load');
        const loadStartTime = performance.now();
        try {
            setLoadingState({ isLoading: true, step: 'Getting astrological state...', progress: 10 });
            setError(null);
            // Check cache first
            const cacheKey = `cuisine_recommendations_${JSON.stringify(currentMomentElementalProfile)}_${JSON.stringify(astrologicalStateForRecommendations)}`;
            const cachedRecommendations = analyticsActions.getCachedRecommendation(cacheKey);
            if (cachedRecommendations) {
                logger_1.logger.info('Using cached cuisine recommendations');
                setCuisineRecommendations(cachedRecommendations.cuisines);
                setOriginalCuisines(cachedRecommendations.cuisines);
                setFilteredCuisines(cachedRecommendations.cuisines);
                setCulturalAnalytics(cachedRecommendations.culturalAnalytics);
                setFusionRecommendations(cachedRecommendations.fusionRecommendations);
                setSauceRecommendations(cachedRecommendations.sauces);
                const loadTime = performance.now() - loadStartTime;
                analyticsActions.recordLoadTime(loadTime);
                endTiming();
                setLoadingState({ isLoading: false, step: 'Complete!', progress: 100 });
                return;
            }
            // Small delay to show loading state
            await new Promise(resolve => setTimeout(resolve, 100));
            setLoadingState({ isLoading: true, step: 'Generating cuisine recommendations...', progress: 30 });
            const recommendations = (0, cuisineRecommender_1.getCuisineRecommendations)(currentMomentElementalProfile, astrologicalStateForRecommendations, { count: 12, includeRegional: true });
            setLoadingState({ isLoading: true, step: 'Loading recipe data...', progress: 50 });
            const recipes = await (0, recipes_1.getAllRecipes)();
            setLoadingState({ isLoading: true, step: 'Calculating Monica/Kalchm compatibility...', progress: 65 });
            // Enhanced recommendations with Monica/Kalchm integration
            const enhancedRecommendations = recommendations.map(cuisine => {
                // Ensure elemental properties are properly typed
                const cuisineElemental = cuisine.elementalProperties ||
                    { Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25 };
                // Perform comprehensive enhanced analysis
                const enhancedAnalysis = (0, monicaKalchmCalculations_1.performEnhancedAnalysis)({ elemental: cuisineElemental }, currentMomentElementalProfile);
                // Calculate Monica compatibility
                const monicaCompatibility = (0, monicaKalchmCalculations_1.calculateMonicaKalchmCompatibility)({ elemental: cuisineElemental }, { elemental: currentMomentElementalProfile });
                // Calculate moment Monica constant for user and cuisine
                const userMonica = (0, monicaKalchmCalculations_1.calculateMomentMonicaConstant)(currentMomentElementalProfile);
                const cuisineMonica = (0, monicaKalchmCalculations_1.calculateMomentMonicaConstant)(cuisineElemental);
                // Calculate thermodynamic harmony score
                const thermodynamicHarmony = Math.max(0, 1 - Math.abs(enhancedAnalysis.thermodynamicMetrics.gregsEnergy) / 10);
                // Calculate alchemical balance optimization
                const alchemicalBalance = calculateAlchemicalBalance(enhancedAnalysis.alchemicalProperties);
                // Calculate cultural synergy score (5% weight in 7-factor algorithm)
                const culturalSynergyData = CulturalAnalyticsService_1.CulturalAnalyticsService.calculateCulturalSynergy(cuisine.name.toLowerCase(), [], { season: getCurrentSeason() });
                // Enhanced 7-factor scoring algorithm:
                // 1. Original astrological score (50%)
                // 2. Monica/Kalchm compatibility (20%)
                // 3. Thermodynamic harmony (10%)
                // 4. Alchemical balance (10%)
                // 5. Cultural synergy (5%)
                // 6. Confidence factor (3%)
                // 7. Seasonal optimization (2%)
                const originalScore = getSafeScore(cuisine.score);
                const seasonalOptimization = calculateSeasonalOptimization(cuisine.name, getCurrentSeason());
                const enhancedScore = ((originalScore * 0.50) +
                    (monicaCompatibility * 0.20) +
                    (thermodynamicHarmony * 0.10) +
                    (alchemicalBalance * 0.10) +
                    (culturalSynergyData.score * 0.05) +
                    (enhancedAnalysis.confidence * 0.03) +
                    (seasonalOptimization * 0.02));
                // Log enhanced analytics integration for verification
                logger_1.logger.info(`Enhanced Monica/Kalchm Analytics for ${cuisine.name}:`, {
                    originalScore,
                    monicaCompatibility,
                    thermodynamicHarmony,
                    alchemicalBalance,
                    culturalSynergy: culturalSynergyData.score,
                    confidence: enhancedAnalysis.confidence,
                    seasonalOptimization,
                    enhancedScore,
                    thermodynamicMetrics: enhancedAnalysis.thermodynamicMetrics
                });
                return {
                    ...cuisine,
                    score: enhancedScore,
                    matchPercentage: Math.round(enhancedScore * 100),
                    monicaCompatibility,
                    userMonica,
                    cuisineMonica,
                    thermodynamicHarmony,
                    alchemicalBalance,
                    enhancedAnalysis,
                    reasoning: [
                        ...(cuisine.reasoning || []),
                        `Monica compatibility: ${Math.round(monicaCompatibility * 100)}%`,
                        `Thermodynamic harmony: ${Math.round(thermodynamicHarmony * 100)}%`,
                        `Alchemical balance: ${Math.round(alchemicalBalance * 100)}%`
                    ]
                };
            });
            setLoadingState({ isLoading: true, step: 'Matching recipes to cuisines...', progress: 75 });
            const cuisinesWithRecipes = enhancedRecommendations.map(cuisine => {
                const matching = recipes.filter(recipe => recipe.cuisine && recipe.cuisine.toLowerCase() === cuisine.name.toLowerCase());
                // Enhanced recipe building with Monica/Kalchm integration
                const enhancedRecipes = matching.map(recipe => {
                    var _a;
                    const baseRecipe = buildCompleteRecipe(recipe, cuisine.name);
                    // Perform enhanced analysis on recipe
                    if (baseRecipe.elementalProperties) {
                        const analysis = (0, monicaKalchmCalculations_1.performEnhancedAnalysis)({ elemental: baseRecipe.elementalProperties }, currentMomentElementalProfile);
                        // Calculate Kalchm harmony score for recipe
                        const kalchmHarmony = calculateRecipeKalchmHarmony(analysis.thermodynamicMetrics, (_a = cuisine.enhancedAnalysis) === null || _a === void 0 ? void 0 : _a.thermodynamicMetrics);
                        // Calculate recipe thermodynamic optimization
                        const thermodynamicOptimization = calculateThermodynamicOptimization(analysis.thermodynamicMetrics, currentMomentElementalProfile);
                        // Enhanced recipe scoring with thermodynamic properties
                        const originalScore = baseRecipe.matchScore || 0.85;
                        const enhancedRecipeScore = ((originalScore * 0.60) +
                            (analysis.compatibilityScore * 0.25) +
                            (kalchmHarmony * 0.10) +
                            (thermodynamicOptimization * 0.05));
                        return {
                            ...baseRecipe,
                            enhancedAnalysis: analysis,
                            monicaScore: analysis.thermodynamicMetrics.monica,
                            kalchmScore: analysis.thermodynamicMetrics.kalchm,
                            kalchmHarmony,
                            thermodynamicOptimization,
                            compatibilityScore: analysis.compatibilityScore,
                            confidence: analysis.confidence,
                            matchScore: enhancedRecipeScore,
                            matchPercentage: Math.round(enhancedRecipeScore * 100)
                        };
                    }
                    return baseRecipe;
                });
                return {
                    ...cuisine,
                    recipes: enhancedRecipes
                };
            });
            setCuisineRecommendations(cuisinesWithRecipes);
            setOriginalCuisines(cuisinesWithRecipes);
            setFilteredCuisines(cuisinesWithRecipes);
            setLoadingState({ isLoading: true, step: 'Analyzing cultural intelligence...', progress: 80 });
            // Generate cultural analytics for each cuisine
            const culturalAnalyticsData = {};
            for (const cuisine of cuisinesWithRecipes) {
                try {
                    const analytics = CulturalAnalyticsService_1.CulturalAnalyticsService.generateCulturalAnalytics(cuisine.name.toLowerCase(), cuisine.elementalProperties || { Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25 }, astrologicalStateForRecommendations);
                    culturalAnalyticsData[cuisine.id] = analytics;
                }
                catch (error) {
                    logger_1.logger.warn(`Failed to generate cultural analytics for ${cuisine.name}:`, error);
                }
            }
            setCulturalAnalytics(culturalAnalyticsData);
            // Generate fusion recommendations
            const availableCuisineNames = cuisinesWithRecipes.map(c => c.name.toLowerCase());
            const topCuisine = (_b = (_a = cuisinesWithRecipes[0]) === null || _a === void 0 ? void 0 : _a.name) === null || _b === void 0 ? void 0 : _b.toLowerCase();
            if (topCuisine) {
                const fusionRecs = CulturalAnalyticsService_1.CulturalAnalyticsService.generateFusionRecommendations(topCuisine, availableCuisineNames, 3);
                setFusionRecommendations(fusionRecs);
            }
            setLoadingState({ isLoading: true, step: 'Harmonizing sauces...', progress: 90 });
            const topSauces = (0, cuisineRecommender_1.generateTopSauceRecommendations)(currentMomentElementalProfile, 6, astrologicalStateForRecommendations);
            setSauceRecommendations(topSauces);
            // Calculate overall confidence score for caching
            const overallConfidence = analyticsActions.calculateConfidence({
                astrologicalAlignment: 0.9,
                elementalHarmony: 0.85,
                culturalRelevance: 0.8,
                seasonalOptimization: calculateSeasonalOptimization('average', getCurrentSeason()),
                userPreferenceMatch: 0.8,
                dataQuality: 0.95
            });
            // Cache the complete recommendation set with confidence-based TTL
            const cacheData = {
                cuisines: cuisinesWithRecipes,
                culturalAnalytics: culturalAnalyticsData,
                fusionRecommendations: fusionRecs,
                sauces: topSauces
            };
            analyticsActions.cacheRecommendation(cacheKey, cacheData, overallConfidence.overallScore);
            // Record final load time
            const totalLoadTime = performance.now() - loadStartTime;
            analyticsActions.recordLoadTime(totalLoadTime);
            endTiming();
            logger_1.logger.info(`Cuisine recommendations loaded in ${totalLoadTime.toFixed(2)}ms with confidence ${overallConfidence.overallScore.toFixed(2)}`);
            setLoadingState({ isLoading: false, step: 'Complete!', progress: 100 });
        }
        catch (err) {
            logger_1.logger.error('Error loading cuisine data:', err);
            setError('Failed to load cuisine recommendations. Please try again.');
            setLoadingState({ isLoading: false, step: 'Error', progress: 0 });
            // Record error in analytics
            const errorLoadTime = performance.now() - loadStartTime;
            analyticsActions.recordLoadTime(errorLoadTime);
            endTiming();
        }
    }, [currentMomentElementalProfile, astrologicalStateForRecommendations, analyticsActions]);
    // ========== EFFECTS ==========
    (0, react_1.useEffect)(() => {
        loadCuisineData();
    }, [loadCuisineData]);
    // ========== EVENT HANDLERS ==========
    const handleCuisineSelect = (0, react_1.useCallback)((cuisineId) => {
        var _a;
        // Track user interaction
        const selectedData = cuisineRecommendations.find(c => c.id === cuisineId);
        trackClick(`cuisine_${cuisineId}`, {
            cuisineName: selectedData === null || selectedData === void 0 ? void 0 : selectedData.name,
            matchPercentage: selectedData === null || selectedData === void 0 ? void 0 : selectedData.matchPercentage,
            isExpanding: selectedCuisine !== cuisineId
        });
        if (selectedCuisine === cuisineId) {
            setShowCuisineDetails(!showCuisineDetails);
            trackExpand(`cuisine_details_${cuisineId}`, {
                action: showCuisineDetails ? 'collapse' : 'expand'
            });
            return;
        }
        setSelectedCuisine(cuisineId);
        setShowCuisineDetails(true);
        if (((_a = selectedData === null || selectedData === void 0 ? void 0 : selectedData.recipes) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            setMatchingRecipes(selectedData.recipes);
        }
        else {
            setMatchingRecipes([]);
        }
    }, [selectedCuisine, showCuisineDetails, cuisineRecommendations, trackClick, trackExpand]);
    const handleRetry = (0, react_1.useCallback)(() => {
        setError(null);
        loadCuisineData();
    }, [loadCuisineData]);
    // ========== ADVANCED SEARCH AND FILTERING HANDLERS ==========
    const handleFiltersChange = (0, react_1.useCallback)((filters) => {
        setSearchFilters(filters);
        // Process natural language query if present
        if (filters.query.trim()) {
            const intent = (0, naturalLanguageProcessor_1.processNaturalLanguageQuery)(filters.query);
            setSearchIntent(intent);
            // Merge extracted filters with manual filters
            const mergedFilters = {
                ...filters,
                ...intent.extractedFilters,
                // Preserve manual selections over extracted ones for arrays
                dietaryRestrictions: [
                    ...new Set([
                        ...filters.dietaryRestrictions,
                        ...(intent.extractedFilters.dietaryRestrictions || [])
                    ])
                ],
                cuisineTypes: [
                    ...new Set([
                        ...filters.cuisineTypes,
                        ...(intent.extractedFilters.cuisineTypes || [])
                    ])
                ],
                difficultyLevel: [
                    ...new Set([
                        ...filters.difficultyLevel,
                        ...(intent.extractedFilters.difficultyLevel || [])
                    ])
                ]
            };
            // Apply enhanced search and filtering
            let filtered = originalCuisines;
            // Apply text search first
            if (intent.query.trim()) {
                filtered = (0, naturalLanguageProcessor_1.enhancedSearch)(filtered, intent.query, ['name', 'description']);
            }
            // Apply filters
            filtered = (0, naturalLanguageProcessor_1.applyFilters)(filtered, mergedFilters);
            setFilteredCuisines(filtered);
        }
        else {
            // No query, just apply filters
            const filtered = (0, naturalLanguageProcessor_1.applyFilters)(originalCuisines, filters);
            setFilteredCuisines(filtered);
            setSearchIntent(null);
        }
    }, [originalCuisines]);
    const handleSearch = (0, react_1.useCallback)((query) => {
        // Track search interaction
        trackSearch(query, {
            originalResultCount: originalCuisines.length,
            timestamp: Date.now()
        });
        const intent = (0, naturalLanguageProcessor_1.processNaturalLanguageQuery)(query);
        setSearchIntent(intent);
        // Update filters with extracted information
        const updatedFilters = {
            ...searchFilters,
            query,
            ...intent.extractedFilters
        };
        setSearchFilters(updatedFilters);
        // Apply enhanced search
        let filtered = originalCuisines;
        if (intent.query.trim()) {
            filtered = (0, naturalLanguageProcessor_1.enhancedSearch)(filtered, intent.query, ['name', 'description']);
        }
        filtered = (0, naturalLanguageProcessor_1.applyFilters)(filtered, updatedFilters);
        setFilteredCuisines(filtered);
        // Track filter results
        trackFilter('search_results', {
            query,
            resultCount: filtered.length,
            originalCount: originalCuisines.length,
            confidence: intent.confidence
        });
    }, [searchFilters, originalCuisines, trackSearch, trackFilter]);
    // ========== RENDER HELPERS ==========
    const selectedCuisineData = (0, react_1.useMemo)(() => cuisineRecommendations.find(c => c.id === selectedCuisine), [cuisineRecommendations, selectedCuisine]);
    // ========== RENDER ==========
    if (loadingState.isLoading) {
        return (0, jsx_runtime_1.jsx)(LoadingComponent, { loadingState: loadingState });
    }
    if (error) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2 mb-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertCircle, { size: 20 }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Error" })] }), (0, jsx_runtime_1.jsx)("p", { className: "mb-3", children: error }), (0, jsx_runtime_1.jsxs)("button", { onClick: handleRetry, className: "flex items-center space-x-2 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.RefreshCw, { size: 16 }), (0, jsx_runtime_1.jsx)("span", { children: "Retry" })] })] }));
    }
    return ((0, jsx_runtime_1.jsx)(CuisineRecommenderErrorBoundary, { onRetry: handleRetry, children: (0, jsx_runtime_1.jsxs)("div", { className: "bg-white rounded-lg shadow p-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-3", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-xl font-medium", children: "Celestial Cuisine Guide" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsxs)("button", { onClick: () => setShowEnterpriseIntelligence(!showEnterpriseIntelligence), className: `flex items-center space-x-1 px-3 py-1 text-sm rounded transition-colors ${showEnterpriseIntelligence
                                        ? 'bg-purple-100 text-purple-700'
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`, title: "Toggle Enterprise Intelligence", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Brain, { size: 14 }), (0, jsx_runtime_1.jsx)("span", { children: "Intelligence" })] }), (0, jsx_runtime_1.jsxs)("button", { onClick: () => setShowPerformanceAnalytics(!showPerformanceAnalytics), className: `flex items-center space-x-1 px-3 py-1 text-sm rounded transition-colors ${showPerformanceAnalytics
                                        ? 'bg-blue-100 text-blue-700'
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`, title: "Toggle Performance Analytics", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.BarChart3, { size: 14 }), (0, jsx_runtime_1.jsx)("span", { children: "Analytics" })] })] })] }), showPerformanceAnalytics && ((0, jsx_runtime_1.jsx)("div", { className: "mb-6", children: (0, jsx_runtime_1.jsx)(PerformanceAnalyticsDashboard_1.default, { className: "border-t pt-4", compact: false, showDetails: true }) })), showEnterpriseIntelligence && ((0, jsx_runtime_1.jsx)("div", { className: "mb-6", children: (0, jsx_runtime_1.jsx)(EnterpriseIntelligencePanel_1.default, { recipeData: selectedCuisine ? cuisineRecommendations.find(c => c.id === selectedCuisine) : null, ingredientData: { ingredients: matchingRecipes }, astrologicalContext: {
                            zodiacSign: astrologicalStateForRecommendations.zodiacSign,
                            lunarPhase: astrologicalStateForRecommendations.lunarPhase,
                            elementalProperties: currentMomentElementalProfile,
                            planetaryPositions: astrologicalStateForRecommendations.planetaryPositions
                        }, className: "border-t pt-4", showDetailedMetrics: true, autoAnalyze: true, onAnalysisComplete: (analysis) => {
                            setEnterpriseIntelligenceAnalysis(analysis);
                            logger_1.logger.info('Enterprise Intelligence Analysis completed:', {
                                overallScore: analysis.overallScore,
                                systemHealth: analysis.systemHealth
                            });
                        } }) })), !showPerformanceAnalytics && analyticsState.metrics && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 flex items-center justify-between text-xs text-gray-500 bg-gray-50 px-3 py-2 rounded", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Zap, { size: 12, className: "text-blue-500" }), (0, jsx_runtime_1.jsxs)("span", { children: ["Load: ", analyticsState.metrics.loadTime.toFixed(0), "ms"] })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex items-center space-x-1", children: (0, jsx_runtime_1.jsxs)("span", { children: ["Cache: ", (analyticsState.cacheStats.hitRate * 100).toFixed(0), "%"] }) }), (0, jsx_runtime_1.jsx)("div", { className: "flex items-center space-x-1", children: (0, jsx_runtime_1.jsxs)("span", { children: ["Score: ", analyticsState.performanceTrends.performanceScore.toFixed(0), "/100"] }) })] }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setShowPerformanceAnalytics(true), className: "text-blue-600 hover:text-blue-800 underline", children: "View Details" })] })), (0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsx)(AdvancedSearchFilters_1.default, { onFiltersChange: handleFiltersChange, onSearch: handleSearch, availableCuisines: originalCuisines.map(c => c.name.toLowerCase()), className: "mb-4" }), searchIntent && searchIntent.confidence > 0.5 && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2 mb-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 16, className: "text-blue-500" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm font-medium text-blue-700", children: "Search Intelligence" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded", children: [Math.round(searchIntent.confidence * 100), "% confidence"] })] }), searchIntent.suggestions.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "text-sm text-blue-600", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Suggestions: " }), searchIntent.suggestions.slice(0, 3).join(', ')] }))] })), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between mb-4 text-sm text-gray-600", children: [(0, jsx_runtime_1.jsxs)("span", { children: ["Showing ", filteredCuisines.length, " of ", originalCuisines.length, " cuisines", searchFilters.query && ` for "${searchFilters.query}"`] }), filteredCuisines.length !== originalCuisines.length && ((0, jsx_runtime_1.jsx)("button", { onClick: () => {
                                        setSearchFilters({
                                            query: '',
                                            dietaryRestrictions: [],
                                            difficultyLevel: [],
                                            cookingTime: { min: 0, max: 480 },
                                            cuisineTypes: [],
                                            mealTypes: [],
                                            spiciness: [],
                                            ingredients: []
                                        });
                                        setFilteredCuisines(originalCuisines);
                                        setSearchIntent(null);
                                    }, className: "text-blue-600 hover:text-blue-800 underline", children: "Clear filters" }))] })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4", children: filteredCuisines.map(cuisine => {
                        var _a, _b;
                        return ((0, jsx_runtime_1.jsxs)("div", { className: `rounded border p-3 cursor-pointer transition-all duration-200 hover:shadow-md ${selectedCuisine === cuisine.id ? 'border-blue-400 bg-blue-50' : 'border-gray-200'}`, onClick: () => handleCuisineSelect(cuisine.id), children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-2", children: [(0, jsx_runtime_1.jsx)("h3", { className: "font-medium text-sm", children: cuisine.name }), (0, jsx_runtime_1.jsxs)("span", { className: `text-xs px-2 py-1 rounded ${(0, cuisineRecommender_1.getMatchScoreClass)(getSafeScore(cuisine.score))}`, children: [cuisine.matchPercentage, "%"] })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-600 mb-2 line-clamp-2", title: cuisine.description, children: cuisine.description }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2 text-xs text-gray-500", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 14, className: "text-yellow-500" }), (0, jsx_runtime_1.jsx)("span", { children: (_a = cuisine.reasoning) === null || _a === void 0 ? void 0 : _a[0] })] }), ((_b = cuisine.reasoning) === null || _b === void 0 ? void 0 : _b[1]) && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2 text-xs text-gray-500 mt-1", children: [cuisine.reasoning[1].includes('Favorable') ?
                                            (0, jsx_runtime_1.jsx)(lucide_react_1.Star, { size: 14, className: "text-green-500" }) :
                                            (0, jsx_runtime_1.jsx)(lucide_react_1.Moon, { size: 14, className: "text-blue-500" }), (0, jsx_runtime_1.jsx)("span", { children: cuisine.reasoning[1] })] }))] }, cuisine.id));
                    }) }), (0, jsx_runtime_1.jsx)("div", { className: "mt-6 pt-4 border-t border-gray-200", children: (0, jsx_runtime_1.jsx)(SauceRecommendations_1.default, { sauces: sauceRecommendations, currentElementalProfile: currentMomentElementalProfile, currentZodiac: currentZodiac, lunarPhase: lunarPhase, currentSeason: getCurrentSeason(), maxDisplayed: 6, onSauceSelect: (sauce) => {
                            logger_1.logger.info('Sauce selected:', sauce.name);
                            // Future: Add sauce selection logic here
                        } }) }), selectedCuisineData && showCuisineDetails && ((0, jsx_runtime_1.jsxs)("div", { className: "mt-4 pt-3 border-t border-gray-200", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-2", children: [(0, jsx_runtime_1.jsxs)("h3", { className: "font-semibold text-lg", children: [selectedCuisineData.name, " Cuisine"] }), (0, jsx_runtime_1.jsxs)("span", { className: `text-xs px-2 py-1 rounded ${(0, cuisineRecommender_1.getMatchScoreClass)(getSafeScore(selectedCuisineData.score))}`, children: [selectedCuisineData.matchPercentage, "% match"] })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-600 mb-3", children: selectedCuisineData.description }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-gray-50 p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium mb-2", children: "Elemental Properties" }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-2 gap-2", children: Object.entries(selectedCuisineData.elementalProperties || {}).map(([element, value]) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: element }), (0, jsx_runtime_1.jsx)("div", { className: "w-20 bg-gray-200 rounded-full h-2.5", children: (0, jsx_runtime_1.jsx)("div", { className: "h-2.5 rounded-full bg-blue-500", style: { width: `${Math.round(Number(value) * 100)}%` } }) })] }, element))) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-gray-50 p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium mb-2", children: "Recommendation Reasoning" }), (0, jsx_runtime_1.jsx)("ul", { className: "list-disc pl-4 text-sm text-gray-600", children: (_a = selectedCuisineData.reasoning) === null || _a === void 0 ? void 0 : _a.map((reason, i) => (0, jsx_runtime_1.jsx)("li", { children: reason }, i)) })] })] }), selectedCuisineData.monicaCompatibility && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg border", children: [(0, jsx_runtime_1.jsxs)("h4", { className: "text-sm font-medium mb-3 flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 16, className: "text-purple-500 mr-2" }), "Alchemical Compatibility Analysis"] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-purple-600", children: [Math.round((selectedCuisineData.monicaCompatibility || 0) * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Monica Compatibility" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-lg font-semibold text-blue-600", children: (selectedCuisineData.userMonica || 1.0).toFixed(2) }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Your Monica Constant" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-lg font-semibold text-green-600", children: (selectedCuisineData.cuisineMonica || 1.0).toFixed(2) }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Cuisine Monica" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-lg font-semibold text-orange-600", children: Math.abs((selectedCuisineData.userMonica || 1.0) - (selectedCuisineData.cuisineMonica || 1.0)) < 0.5 ? 'High' : 'Medium' }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Harmony Level" })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "mt-3 text-xs text-gray-600", children: "Monica constants measure alchemical transformation potential. Closer values indicate better compatibility." })] })), selectedCuisineData.enhancedAnalysis && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 bg-gradient-to-r from-green-50 to-teal-50 p-4 rounded-lg border", children: [(0, jsx_runtime_1.jsxs)("h4", { className: "text-sm font-medium mb-3 flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { size: 16, className: "text-green-500 mr-2" }), "Enhanced Thermodynamic Analysis"] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-3 mb-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-green-600", children: [Math.round((selectedCuisineData.thermodynamicHarmony || 0) * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Thermodynamic Harmony" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-teal-600", children: [Math.round((selectedCuisineData.alchemicalBalance || 0) * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Alchemical Balance" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-lg font-semibold text-blue-600", children: (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.kalchm || 1.0).toFixed(2) }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Kalchm Constant" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-lg font-semibold text-purple-600", children: (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.gregsEnergy || 0).toFixed(2) }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Greg's Energy" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Heat Efficiency" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.heat || 0).toFixed(3) }), (0, jsx_runtime_1.jsx)("div", { className: "w-16 bg-gray-200 rounded-full h-2", children: (0, jsx_runtime_1.jsx)("div", { className: "h-2 rounded-full bg-red-500", style: { width: `${Math.min(100, Math.max(0, (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.heat || 0) * 100))}%` } }) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Entropy Balance" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.entropy || 0).toFixed(3) }), (0, jsx_runtime_1.jsx)("div", { className: "w-16 bg-gray-200 rounded-full h-2", children: (0, jsx_runtime_1.jsx)("div", { className: "h-2 rounded-full bg-yellow-500", style: { width: `${Math.min(100, Math.max(0, (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.entropy || 0) * 50))}%` } }) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Reactivity" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.reactivity || 0).toFixed(3) }), (0, jsx_runtime_1.jsx)("div", { className: "w-16 bg-gray-200 rounded-full h-2", children: (0, jsx_runtime_1.jsx)("div", { className: "h-2 rounded-full bg-orange-500", style: { width: `${Math.min(100, Math.max(0, (selectedCuisineData.enhancedAnalysis.thermodynamicMetrics.reactivity || 0) * 50))}%` } }) })] })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "mt-3 text-xs text-gray-600", children: "Enhanced thermodynamic analysis integrates heat efficiency, entropy balance, and reactivity for optimal culinary recommendations." })] })), ((_b = selectedCuisineData.enhancedAnalysis) === null || _b === void 0 ? void 0 : _b.alchemicalProperties) && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 bg-gradient-to-r from-yellow-50 to-amber-50 p-4 rounded-lg border", children: [(0, jsx_runtime_1.jsxs)("h4", { className: "text-sm font-medium mb-3 flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 16, className: "text-yellow-500 mr-2" }), "Alchemical Properties Balance"] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-3", children: Object.entries(selectedCuisineData.enhancedAnalysis.alchemicalProperties).map(([property, value]) => ((0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-lg font-semibold text-amber-600", children: (Number(value) || 0).toFixed(2) }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: property }), (0, jsx_runtime_1.jsx)("div", { className: "w-full bg-gray-200 rounded-full h-2 mt-1", children: (0, jsx_runtime_1.jsx)("div", { className: "h-2 rounded-full bg-amber-500", style: { width: `${Math.min(100, Math.max(0, (Number(value) || 0) * 100))}%` } }) })] }, property))) }), (0, jsx_runtime_1.jsx)("div", { className: "mt-3 text-xs text-gray-600", children: "Alchemical balance optimization contributes 10% weight to the enhanced 7-factor scoring algorithm." })] })), culturalAnalytics[selectedCuisineData.id] && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-3", children: [(0, jsx_runtime_1.jsxs)("h4", { className: "text-sm font-medium flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { size: 16, className: "text-amber-500 mr-2" }), "Cultural Analytics & Intelligence"] }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setShowCulturalAnalytics(!showCulturalAnalytics), className: "text-xs px-2 py-1 bg-amber-100 hover:bg-amber-200 rounded transition-colors", children: showCulturalAnalytics ? 'Hide Details' : 'Show Details' })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-3 mb-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-amber-600", children: [Math.round(culturalAnalytics[selectedCuisineData.id].culturalSynergy * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Cultural Synergy" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-orange-600", children: [Math.round(culturalAnalytics[selectedCuisineData.id].culturalCompatibility * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Astrological Compatibility" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-yellow-600", children: [Math.round(culturalAnalytics[selectedCuisineData.id].fusionPotential * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Fusion Potential" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-lg font-semibold text-red-600", children: [Math.round(culturalAnalytics[selectedCuisineData.id].culturalDiversityScore * 100), "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-600", children: "Cultural Diversity" })] })] }), showCulturalAnalytics && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-3 mt-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Historical Significance" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-700", children: culturalAnalytics[selectedCuisineData.id].historicalSignificance })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Cultural Context" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-700", children: culturalAnalytics[selectedCuisineData.id].culturalContext })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Traditional Principles" }), (0, jsx_runtime_1.jsx)("ul", { className: "list-disc pl-4 text-xs text-gray-700", children: culturalAnalytics[selectedCuisineData.id].traditionalPrinciples.slice(0, 3).map((principle, i) => ((0, jsx_runtime_1.jsx)("li", { children: principle }, i))) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium mb-2", children: "Modern Adaptations" }), (0, jsx_runtime_1.jsx)("ul", { className: "list-disc pl-4 text-xs text-gray-700", children: culturalAnalytics[selectedCuisineData.id].modernAdaptations.slice(0, 3).map((adaptation, i) => ((0, jsx_runtime_1.jsx)("li", { children: adaptation }, i))) })] })] })] })), (0, jsx_runtime_1.jsx)("div", { className: "mt-3 text-xs text-gray-600", children: "Cultural synergy contributes 5% weight to the 7-factor recommendation algorithm." })] })), fusionRecommendations.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg border", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-3", children: [(0, jsx_runtime_1.jsxs)("h4", { className: "text-sm font-medium flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 16, className: "text-indigo-500 mr-2" }), "Fusion Cuisine Recommendations"] }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setShowFusionRecommendations(!showFusionRecommendations), className: "text-xs px-2 py-1 bg-indigo-100 hover:bg-indigo-200 rounded transition-colors", children: showFusionRecommendations ? 'Hide Fusion' : 'Show Fusion' })] }), showFusionRecommendations && ((0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: fusionRecommendations.map((fusion, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "bg-white p-3 rounded border", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-2", children: [(0, jsx_runtime_1.jsx)("h5", { className: "text-sm font-medium", children: fusion.name }), (0, jsx_runtime_1.jsxs)("div", { className: "flex space-x-2", children: [(0, jsx_runtime_1.jsxs)("span", { className: "text-xs px-2 py-1 bg-indigo-100 rounded", children: [Math.round(fusion.fusionScore * 100), "% Fusion"] }), (0, jsx_runtime_1.jsxs)("span", { className: "text-xs px-2 py-1 bg-purple-100 rounded", children: [Math.round(fusion.culturalHarmony * 100), "% Harmony"] })] })] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-xs text-gray-600 mb-2", children: ["Blend of ", fusion.parentCuisines.join(' and '), " cuisines"] }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-2", children: [(0, jsx_runtime_1.jsx)("h6", { className: "text-xs font-medium mb-1", children: "Recommended Dishes:" }), (0, jsx_runtime_1.jsx)("div", { className: "flex flex-wrap gap-1", children: fusion.recommendedDishes.map((dish, i) => ((0, jsx_runtime_1.jsx)("span", { className: "text-xs px-2 py-1 bg-gray-100 rounded", children: dish }, i))) })] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-gray-700", children: (0, jsx_runtime_1.jsx)("p", { children: fusion.culturalNotes[0] }) })] }, index))) })), (0, jsx_runtime_1.jsx)("div", { className: "mt-3 text-xs text-gray-600", children: "Fusion recommendations based on cultural compatibility and culinary harmony analysis." })] })), (0, jsx_runtime_1.jsx)("div", { className: "mt-4", children: (0, jsx_runtime_1.jsx)(RecipeRecommendations_1.default, { recipes: matchingRecipes, cuisineName: selectedCuisineData.name, currentElementalProfile: currentMomentElementalProfile, maxDisplayed: 6, onRecipeSelect: (recipe) => {
                                    logger_1.logger.info('Recipe selected:', recipe.name);
                                    setSelectedRecipe(recipe);
                                } }) }), selectedRecipe && ((0, jsx_runtime_1.jsx)("div", { className: "mt-6 pt-4 border-t border-gray-200", children: (0, jsx_runtime_1.jsx)(SauceRecommendations_1.default, { sauces: sauceRecommendations, cuisineName: selectedCuisineData.name, selectedRecipe: selectedRecipe, currentElementalProfile: currentMomentElementalProfile, currentZodiac: currentZodiac, lunarPhase: lunarPhase, currentSeason: getCurrentSeason(), maxDisplayed: 4, onSauceSelect: (sauce) => {
                                    logger_1.logger.info('Sauce selected for recipe:', sauce.name, 'with', selectedRecipe.name);
                                    // Future: Add sauce-recipe pairing logic here
                                } }) }))] }))] }) }));
}
exports.default = CuisineRecommender;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL0N1aXNpbmVSZWNvbW1lbmRlci50c3giLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFYiwrQ0FBeUU7QUFDekUsMkNBQXdDO0FBQ3hDLCtDQVNzQjtBQUN0QixtRUFLb0M7QUFDcEMsK0VBSTBDO0FBQzFDLGtGQUk2QztBQU03Qyw4REFBbUU7QUFDbkUsNENBQStDO0FBRS9DLG9GQUE0RDtBQUM1RCxrRkFBMEQ7QUFDMUQsb0ZBQStFO0FBQy9FLCtFQUswQztBQUMxQyxtRkFBd0c7QUFDeEcseUhBQWlHO0FBQ2pHLHdIQUFnRztBQXVEaEcseUNBQXlDO0FBRXpDLE1BQU0sWUFBWSxHQUFHLENBQUMsS0FBYyxFQUFVLEVBQUU7SUFDOUMsTUFBTSxRQUFRLEdBQUcsT0FBTyxLQUFLLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUMvRSxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUMzQyxDQUFDLENBQUM7QUFFRixNQUFNLGdCQUFnQixHQUFHLEdBQVcsRUFBRTtJQUNwQyxNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO0lBQ3ZCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLDZCQUE2QjtJQUUzRCxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUks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LENBQ1AsSUFDRyxDQUNQLElBQ0csR0FDMEIsQ0FDbkMsQ0FBQztBQUNKLENBQUM7QUE5a0NELHFDQThrQ0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb21wb25lbnRzL0N1aXNpbmVSZWNvbW1lbmRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQge1xuICBTcGFya2xlcyxcbiAgU3RhcixcbiAgTW9vbixcbiAgQWxlcnRDaXJjbGUsXG4gIFJlZnJlc2hDdyxcbiAgQmFyQ2hhcnQzLFxuICBaYXAsXG4gIEJyYWluXG59IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyBcbiAgZ2V0Q3Vpc2luZVJlY29tbWVuZGF0aW9ucyxcbiAgZ2VuZXJhdGVUb3BTYXVjZVJlY29tbWVuZGF0aW9ucyxcbiAgZ2V0TWF0Y2hTY29yZUNsYXNzLFxuICBjYWxjdWxhdGVFbGVtZW50YWxQcm9maWxlRnJvbVpvZGlhYyxcbn0gZnJvbSAnQC91dGlscy9jdWlzaW5lUmVjb21tZW5kZXInO1xuaW1wb3J0IHsgXG4gIGNhbGN1bGF0ZU1vbWVudE1vbmljYUNvbnN0YW50LFxuICBwZXJmb3JtRW5oYW5jZWRBbmFseXNpcyxcbiAgY2FsY3VsYXRlTW9uaWNhS2FsY2htQ29tcGF0aWJpbGl0eSxcbn0gZnJvbSAnQC91dGlscy9tb25pY2FLYWxjaG1DYWxjdWxhdGlvbnMnO1xuaW1wb3J0IHsgXG4gIEN1bHR1cmFsQW5hbHl0aWNzU2VydmljZSxcbiAgQ3VsdHVyYWxBbmFseXRpY3MsXG4gIEZ1c2lvbkN1aXNpbmVSZWNvbW1lbmRhdGlvbiBcbn0gZnJvbSAnQC9zZXJ2aWNlcy9DdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UnO1xuaW1wb3J0IHtcbiAgRWxlbWVudGFsUHJvcGVydGllcyxcbiAgWm9kaWFjU2lnbixcbiAgTHVuYXJQaGFzZSxcbn0gZnJvbSAnQC90eXBlcy9hbGNoZW15JztcbmltcG9ydCB7IHVzZUFsY2hlbWljYWwgfSBmcm9tICdAL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJztcbmltcG9ydCB7IGdldEFsbFJlY2lwZXMgfSBmcm9tICdAL2RhdGEvcmVjaXBlcyc7XG5pbXBvcnQgeyBSZWNpcGUgfSBmcm9tICdAL3R5cGVzL3JlY2lwZSc7XG5pbXBvcnQgUmVjaXBlUmVjb21tZW5kYXRpb25zIGZyb20gJy4vUmVjaXBlUmVjb21tZW5kYXRpb25zJztcbmltcG9ydCBTYXVjZVJlY29tbWVuZGF0aW9ucyBmcm9tICcuL1NhdWNlUmVjb21tZW5kYXRpb25zJztcbmltcG9ydCBBZHZhbmNlZFNlYXJjaEZpbHRlcnMsIHsgU2VhcmNoRmlsdGVycyB9IGZyb20gJy4vQWR2YW5jZWRTZWFyY2hGaWx0ZXJzJztcbmltcG9ydCB7IFxuICBwcm9jZXNzTmF0dXJhbExhbmd1YWdlUXVlcnksIFxuICBlbmhhbmNlZFNlYXJjaCwgXG4gIGFwcGx5RmlsdGVycyxcbiAgU2VhcmNoSW50ZW50IFxufSBmcm9tICdAL3V0aWxzL25hdHVyYWxMYW5ndWFnZVByb2Nlc3Nvcic7XG5pbXBvcnQgeyB1c2VSZWNvbW1lbmRhdGlvbkFuYWx5dGljcywgdXNlSW50ZXJhY3Rpb25UcmFja2luZyB9IGZyb20gJ0AvaG9va3MvdXNlUmVjb21tZW5kYXRpb25BbmFseXRpY3MnO1xuaW1wb3J0IFBlcmZvcm1hbmNlQW5hbHl0aWNzRGFzaGJvYXJkIGZyb20gJ0AvY29tcG9uZW50cy9hbmFseXRpY3MvUGVyZm9ybWFuY2VBbmFseXRpY3NEYXNoYm9hcmQnO1xuaW1wb3J0IEVudGVycHJpc2VJbnRlbGxpZ2VuY2VQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvaW50ZWxsaWdlbmNlL0VudGVycHJpc2VJbnRlbGxpZ2VuY2VQYW5lbCc7XG5cbi8vID09PT09PT09PT0gSU5URVJGQUNFUyA9PT09PT09PT09XG5cbmludGVyZmFjZSBDdWlzaW5lRGF0YSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGVsZW1lbnRhbFByb3BlcnRpZXM/OiBFbGVtZW50YWxQcm9wZXJ0aWVzO1xuICBtYXRjaFBlcmNlbnRhZ2U/OiBudW1iZXI7XG4gIHNjb3JlPzogbnVtYmVyO1xuICByZWFzb25pbmc/OiBzdHJpbmdbXTtcbiAgcmVjaXBlcz86IFJlY2lwZURhdGFbXTtcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuaW50ZXJmYWNlIFJlY2lwZURhdGEge1xuICBpZD86IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGN1aXNpbmU/OiBzdHJpbmc7XG4gIG1hdGNoUGVyY2VudGFnZT86IG51bWJlcjtcbiAgbWF0Y2hTY29yZT86IG51bWJlcjtcbiAgZWxlbWVudGFsUHJvcGVydGllcz86IEVsZW1lbnRhbFByb3BlcnRpZXM7XG4gIGluZ3JlZGllbnRzPzogdW5rbm93bltdO1xuICBpbnN0cnVjdGlvbnM/OiB1bmtub3duW107XG4gIGNvb2tUaW1lPzogc3RyaW5nO1xuICBwcmVwVGltZT86IHN0cmluZztcbiAgc2VydmluZ1NpemU/OiBudW1iZXI7XG4gIGRpZmZpY3VsdHk/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IHVua25vd247XG59XG5cbmludGVyZmFjZSBTYXVjZURhdGEge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBtYXRjaFBlcmNlbnRhZ2U/OiBudW1iZXI7XG4gIHNjb3JlPzogbnVtYmVyO1xuICByZWFzb25pbmc/OiBzdHJpbmdbXTtcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuaW50ZXJmYWNlIEVycm9yQm91bmRhcnlTdGF0ZSB7XG4gIGhhc0Vycm9yOiBib29sZWFuO1xuICBlcnJvcjogRXJyb3IgfCBudWxsO1xuICByZXRyeUNvdW50OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBMb2FkaW5nU3RhdGUge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIHN0ZXA6IHN0cmluZztcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbn1cblxuLy8gPT09PT09PT09PSBIRUxQRVIgRlVOQ1RJT05TID09PT09PT09PT1cblxuY29uc3QgZ2V0U2FmZVNjb3JlID0gKHNjb3JlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgY29uc3QgbnVtU2NvcmUgPSB0eXBlb2Ygc2NvcmUgPT09ICdudW1iZXInID8gc2NvcmUgOiBwYXJzZUZsb2F0KFN0cmluZyhzY29yZSkpO1xuICByZXR1cm4gIWlzTmFOKG51bVNjb3JlKSA/IG51bVNjb3JlIDogMC41O1xufTtcblxuY29uc3QgZ2V0Q3VycmVudFNlYXNvbiA9ICgpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBtb250aCA9IG5vdy5nZXRNb250aCgpOyAvLyAwID0gSmFudWFyeSwgMTEgPSBEZWNlbWJlclxuICBcbiAgaWYgKG1vbnRoID49IDIgJiYgbW9udGggPD0gNCkgcmV0dXJuICdzcHJpbmcnO1xuICBpZiAobW9udGggPj0gNSAmJiBtb250aCA8PSA3KSByZXR1cm4gJ3N1bW1lcic7XG4gIGlmIChtb250aCA+PSA4ICYmIG1vbnRoIDw9IDEwKSByZXR1cm4gJ2F1dHVtbic7XG4gIHJldHVybiAnd2ludGVyJztcbn07XG5cbi8vIENhbGN1bGF0ZSBhbGNoZW1pY2FsIGJhbGFuY2Ugb3B0aW1pemF0aW9uIHNjb3JlXG5jb25zdCBjYWxjdWxhdGVBbGNoZW1pY2FsQmFsYW5jZSA9IChhbGNoZW1pY2FsUHJvcGVydGllczogYW55KTogbnVtYmVyID0+IHtcbiAgaWYgKCFhbGNoZW1pY2FsUHJvcGVydGllcykgcmV0dXJuIDAuNTtcbiAgXG4gIGNvbnN0IHsgU3Bpcml0LCBFc3NlbmNlLCBNYXR0ZXIsIFN1YnN0YW5jZSB9ID0gYWxjaGVtaWNhbFByb3BlcnRpZXM7XG4gIFxuICAvLyBDYWxjdWxhdGUgYmFsYW5jZSBiYXNlZCBvbiBob3cgZXZlbmx5IGRpc3RyaWJ1dGVkIHRoZSBhbGNoZW1pY2FsIHByb3BlcnRpZXMgYXJlXG4gIGNvbnN0IHZhbHVlcyA9IFtTcGlyaXQsIEVzc2VuY2UsIE1hdHRlciwgU3Vic3RhbmNlXTtcbiAgY29uc3QgbWVhbiA9IHZhbHVlcy5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwsIDApIC8gdmFsdWVzLmxlbmd0aDtcbiAgY29uc3QgdmFyaWFuY2UgPSB2YWx1ZXMucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgTWF0aC5wb3codmFsIC0gbWVhbiwgMiksIDApIC8gdmFsdWVzLmxlbmd0aDtcbiAgY29uc3Qgc3RhbmRhcmREZXZpYXRpb24gPSBNYXRoLnNxcnQodmFyaWFuY2UpO1xuICBcbiAgLy8gTG93ZXIgc3RhbmRhcmQgZGV2aWF0aW9uID0gYmV0dGVyIGJhbGFuY2VcbiAgLy8gTm9ybWFsaXplIHRvIDAtMSBzY2FsZSB3aGVyZSAxIGlzIHBlcmZlY3QgYmFsYW5jZVxuICBjb25zdCBiYWxhbmNlU2NvcmUgPSBNYXRoLm1heCgwLCAxIC0gKHN0YW5kYXJkRGV2aWF0aW9uIC8gbWVhbikpO1xuICBcbiAgcmV0dXJuIE1hdGgubWluKDEsIE1hdGgubWF4KDAsIGJhbGFuY2VTY29yZSkpO1xufTtcblxuLy8gQ2FsY3VsYXRlIHNlYXNvbmFsIG9wdGltaXphdGlvbiBzY29yZSBmb3IgY3Vpc2luZVxuY29uc3QgY2FsY3VsYXRlU2Vhc29uYWxPcHRpbWl6YXRpb24gPSAoY3Vpc2luZU5hbWU6IHN0cmluZywgc2Vhc29uOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xuICAvLyBTZWFzb25hbCBwcmVmZXJlbmNlcyBmb3IgZGlmZmVyZW50IGN1aXNpbmVzXG4gIGNvbnN0IHNlYXNvbmFsUHJlZmVyZW5jZXM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0ge1xuICAgICdpdGFsaWFuJzogeyBzcHJpbmc6IDAuOSwgc3VtbWVyOiAwLjk1LCBhdXR1bW46IDAuODUsIHdpbnRlcjogMC44IH0sXG4gICAgJ2NoaW5lc2UnOiB7IHNwcmluZzogMC44NSwgc3VtbWVyOiAwLjgsIGF1dHVtbjogMC45LCB3aW50ZXI6IDAuOTUgfSxcbiAgICAnamFwYW5lc2UnOiB7IHNwcmluZzogMC45NSwgc3VtbWVyOiAwLjg1LCBhdXR1bW46IDAuOSwgd2ludGVyOiAwLjggfSxcbiAgICAnaW5kaWFuJzogeyBzcHJpbmc6IDAuOCwgc3VtbWVyOiAwLjcsIGF1dHVtbjogMC44NSwgd2ludGVyOiAwLjkgfSxcbiAgICAndGhhaSc6IHsgc3ByaW5nOiAwLjg1LCBzdW1tZXI6IDAuOTUsIGF1dHVtbjogMC44LCB3aW50ZXI6IDAuNyB9LFxuICAgICdtZXhpY2FuJzogeyBzcHJpbmc6IDAuOSwgc3VtbWVyOiAwLjk1LCBhdXR1bW46IDAuODUsIHdpbnRlcjogMC44IH0sXG4gICAgJ2ZyZW5jaCc6IHsgc3ByaW5nOiAwLjksIHN1bW1lcjogMC44NSwgYXV0dW1uOiAwLjk1LCB3aW50ZXI6IDAuOSB9LFxuICAgICdtZWRpdGVycmFuZWFuJzogeyBzcHJpbmc6IDAuOTUsIHN1bW1lcjogMC45NSwgYXV0dW1uOiAwLjg1LCB3aW50ZXI6IDAuNzUgfSxcbiAgICAnbWlkZGxlLWVhc3Rlcm4nOiB7IHNwcmluZzogMC44NSwgc3VtbWVyOiAwLjksIGF1dHVtbjogMC44LCB3aW50ZXI6IDAuODUgfVxuICB9O1xuICBcbiAgY29uc3QgY3Vpc2luZUtleSA9IGN1aXNpbmVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHByZWZlcmVuY2VzID0gc2Vhc29uYWxQcmVmZXJlbmNlc1tjdWlzaW5lS2V5XTtcbiAgXG4gIGlmIChwcmVmZXJlbmNlcyAmJiBwcmVmZXJlbmNlc1tzZWFzb25dKSB7XG4gICAgcmV0dXJuIHByZWZlcmVuY2VzW3NlYXNvbl07XG4gIH1cbiAgXG4gIC8vIERlZmF1bHQgc2Vhc29uYWwgb3B0aW1pemF0aW9uXG4gIHJldHVybiAwLjg7XG59O1xuXG4vLyBDYWxjdWxhdGUgS2FsY2htIGhhcm1vbnkgc2NvcmUgZm9yIHJlY2lwZSByZWNvbW1lbmRhdGlvbnNcbmNvbnN0IGNhbGN1bGF0ZVJlY2lwZUthbGNobUhhcm1vbnkgPSAoXG4gIHJlY2lwZVRoZXJtb2R5bmFtaWNzOiBhbnksXG4gIGN1aXNpbmVUaGVybW9keW5hbWljcz86IGFueVxuKTogbnVtYmVyID0+IHtcbiAgaWYgKCFyZWNpcGVUaGVybW9keW5hbWljcykgcmV0dXJuIDAuNztcbiAgXG4gIC8vIElmIHdlIGhhdmUgY3Vpc2luZSB0aGVybW9keW5hbWljcywgY29tcGFyZSB0aGVtXG4gIGlmIChjdWlzaW5lVGhlcm1vZHluYW1pY3MpIHtcbiAgICBjb25zdCBrYWxjaG1SYXRpbyA9IE1hdGgubWluKHJlY2lwZVRoZXJtb2R5bmFtaWNzLmthbGNobSwgY3Vpc2luZVRoZXJtb2R5bmFtaWNzLmthbGNobSkgLyBcbiAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgocmVjaXBlVGhlcm1vZHluYW1pY3Mua2FsY2htLCBjdWlzaW5lVGhlcm1vZHluYW1pY3Mua2FsY2htKTtcbiAgICBjb25zdCBtb25pY2FIYXJtb255ID0gMSAtIE1hdGguYWJzKHJlY2lwZVRoZXJtb2R5bmFtaWNzLm1vbmljYSAtIGN1aXNpbmVUaGVybW9keW5hbWljcy5tb25pY2EpIC8gNTtcbiAgICBcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKGthbGNobVJhdGlvICogMC42KSArIChtb25pY2FIYXJtb255ICogMC40KSkpO1xuICB9XG4gIFxuICAvLyBPdGhlcndpc2UsIHNjb3JlIGJhc2VkIG9uIHRoZXJtb2R5bmFtaWMgc3RhYmlsaXR5XG4gIGNvbnN0IHN0YWJpbGl0eVNjb3JlID0gTWF0aC5tYXgoMCwgMSAtIE1hdGguYWJzKHJlY2lwZVRoZXJtb2R5bmFtaWNzLmdyZWdzRW5lcmd5KSAvIDUpO1xuICBjb25zdCBrYWxjaG1TY29yZSA9IE1hdGgubWluKDEsIHJlY2lwZVRoZXJtb2R5bmFtaWNzLmthbGNobSAvIDIpOyAvLyBOb3JtYWxpemUgS2FsY2htXG4gIFxuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKHN0YWJpbGl0eVNjb3JlICogMC41KSArIChrYWxjaG1TY29yZSAqIDAuNSkpKTtcbn07XG5cbi8vIENhbGN1bGF0ZSB0aGVybW9keW5hbWljIG9wdGltaXphdGlvbiBmb3IgcmVjaXBlc1xuY29uc3QgY2FsY3VsYXRlVGhlcm1vZHluYW1pY09wdGltaXphdGlvbiA9IChcbiAgdGhlcm1vZHluYW1pY3M6IGFueSxcbiAgY3VycmVudEVsZW1lbnRhbFByb2ZpbGU6IEVsZW1lbnRhbFByb3BlcnRpZXNcbik6IG51bWJlciA9PiB7XG4gIGlmICghdGhlcm1vZHluYW1pY3MpIHJldHVybiAwLjc7XG4gIFxuICAvLyBDYWxjdWxhdGUgb3B0aW1pemF0aW9uIGJhc2VkIG9uIHRoZXJtb2R5bmFtaWMgZWZmaWNpZW5jeVxuICBjb25zdCBoZWF0RWZmaWNpZW5jeSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHRoZXJtb2R5bmFtaWNzLmhlYXQpKTtcbiAgY29uc3QgZW50cm9weUJhbGFuY2UgPSBNYXRoLm1heCgwLCAxIC0gdGhlcm1vZHluYW1pY3MuZW50cm9weSAvIDIpO1xuICBjb25zdCByZWFjdGl2aXR5T3B0aW1hbCA9IE1hdGgubWF4KDAsIDEgLSBNYXRoLmFicyh0aGVybW9keW5hbWljcy5yZWFjdGl2aXR5IC0gMSkgLyAyKTtcbiAgXG4gIC8vIFdlaWdodCB0aGUgZmFjdG9ycyBmb3Igb3ZlcmFsbCBvcHRpbWl6YXRpb25cbiAgY29uc3Qgb3B0aW1pemF0aW9uID0gKGhlYXRFZmZpY2llbmN5ICogMC40KSArIChlbnRyb3B5QmFsYW5jZSAqIDAuMykgKyAocmVhY3Rpdml0eU9wdGltYWwgKiAwLjMpO1xuICBcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG9wdGltaXphdGlvbikpO1xufTtcblxuY29uc3QgYnVpbGRDb21wbGV0ZVJlY2lwZSA9IChyZWNpcGU6IFJlY2lwZSwgY3Vpc2luZU5hbWU6IHN0cmluZyk6IFJlY2lwZURhdGEgPT4ge1xuICBjb25zdCBkZWZhdWx0RWxlbWVudGFsUHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllcyA9IHsgXG4gICAgRmlyZTogMC4yNSwgV2F0ZXI6IDAuMjUsIEVhcnRoOiAwLjI1LCBBaXI6IDAuMjUgXG4gIH07XG4gIFxuICBjb25zdCBtYXRjaFNjb3JlID0gdHlwZW9mIHJlY2lwZS5tYXRjaFNjb3JlID09PSAnbnVtYmVyJyA/IHJlY2lwZS5tYXRjaFNjb3JlIDogMC44NTtcbiAgXG4gIHJldHVybiB7XG4gICAgaWQ6IHJlY2lwZS5pZCB8fCBgcmVjaXBlLSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWAsXG4gICAgbmFtZTogcmVjaXBlLm5hbWUgfHwgYCR7Y3Vpc2luZU5hbWV9IFJlY2lwZWAsXG4gICAgZGVzY3JpcHRpb246IHJlY2lwZS5kZXNjcmlwdGlvbiB8fCBgQSB0cmFkaXRpb25hbCByZWNpcGUgZnJvbSAke2N1aXNpbmVOYW1lfSBjdWlzaW5lLmAsXG4gICAgY3Vpc2luZTogcmVjaXBlLmN1aXNpbmUgfHwgY3Vpc2luZU5hbWUsXG4gICAgbWF0Y2hQZXJjZW50YWdlOiByZWNpcGUubWF0Y2hQZXJjZW50YWdlIHx8IE1hdGgucm91bmQobWF0Y2hTY29yZSAqIDEwMCksXG4gICAgbWF0Y2hTY29yZSxcbiAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiByZWNpcGUuZWxlbWVudGFsUHJvcGVydGllcyB8fCBkZWZhdWx0RWxlbWVudGFsUHJvcGVydGllcyxcbiAgICBpbmdyZWRpZW50czogQXJyYXkuaXNBcnJheShyZWNpcGUuaW5ncmVkaWVudHMpID8gcmVjaXBlLmluZ3JlZGllbnRzIDogW10sXG4gICAgaW5zdHJ1Y3Rpb25zOiBBcnJheS5pc0FycmF5KHJlY2lwZS5pbnN0cnVjdGlvbnMpID8gcmVjaXBlLmluc3RydWN0aW9ucyA6IFtdLFxuICAgIGNvb2tUaW1lOiBTdHJpbmcocmVjaXBlLmNvb2tUaW1lIHx8IFwiMzAgbWludXRlc1wiKSxcbiAgICBwcmVwVGltZTogU3RyaW5nKHJlY2lwZS5wcmVwVGltZSB8fCBcIjE1IG1pbnV0ZXNcIiksXG4gICAgc2VydmluZ1NpemU6IHR5cGVvZiByZWNpcGUuc2VydmluZ1NpemUgPT09ICdudW1iZXInID8gcmVjaXBlLnNlcnZpbmdTaXplIDogNCxcbiAgICBkaWZmaWN1bHR5OiBTdHJpbmcocmVjaXBlLmRpZmZpY3VsdHkgfHwgXCJNZWRpdW1cIiksXG4gICAgLi4ucmVjaXBlXG4gIH07XG59O1xuXG4vLyA9PT09PT09PT09IEVSUk9SIEJPVU5EQVJZIENPTVBPTkVOVCA9PT09PT09PT09XG5cbmNsYXNzIEN1aXNpbmVSZWNvbW1lbmRlckVycm9yQm91bmRhcnkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8XG4gIHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTsgb25SZXRyeTogKCkgPT4gdm9pZCB9LFxuICBFcnJvckJvdW5kYXJ5U3RhdGVcbj4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlOyBvblJldHJ5OiAoKSA9PiB2b2lkIH0pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgaGFzRXJyb3I6IGZhbHNlLCBlcnJvcjogbnVsbCwgcmV0cnlDb3VudDogMCB9O1xuICB9XG5cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihlcnJvcjogRXJyb3IpOiBFcnJvckJvdW5kYXJ5U3RhdGUge1xuICAgIHJldHVybiB7IGhhc0Vycm9yOiB0cnVlLCBlcnJvciwgcmV0cnlDb3VudDogMCB9O1xuICB9XG5cbiAgY29tcG9uZW50RGlkQ2F0Y2goZXJyb3I6IEVycm9yLCBlcnJvckluZm86IFJlYWN0LkVycm9ySW5mbykge1xuICAgIGxvZ2dlci5lcnJvcignQ3Vpc2luZVJlY29tbWVuZGVyIEVycm9yOicsIGVycm9yLCBlcnJvckluZm8pO1xuICB9XG5cbiAgaGFuZGxlUmV0cnkgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUucmV0cnlDb3VudCA8IDMpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIHJldHJ5Q291bnQ6IHByZXZTdGF0ZS5yZXRyeUNvdW50ICsgMVxuICAgICAgfSkpO1xuICAgICAgdGhpcy5wcm9wcy5vblJldHJ5KCk7XG4gICAgfVxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTYgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgbWItM1wiPlxuICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMFwiIHNpemU9ezIwfSAvPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtcmVkLTgwMCBmb250LW1lZGl1bVwiPlNvbWV0aGluZyB3ZW50IHdyb25nPC9oMz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgdGV4dC1zbSBtYi00XCI+XG4gICAgICAgICAgICBXZSBlbmNvdW50ZXJlZCBhbiBlcnJvciBsb2FkaW5nIHRoZSBjdWlzaW5lIHJlY29tbWVuZGF0aW9ucy4gXG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5yZXRyeUNvdW50IDwgMyAmJiBcIiBZb3UgY2FuIHRyeSBhZ2Fpbi5cIn1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAge3RoaXMuc3RhdGUucmV0cnlDb3VudCA8IDMgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZVJldHJ5fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgcHgtNCBweS0yIGJnLXJlZC0xMDAgaG92ZXI6YmctcmVkLTIwMCB0ZXh0LXJlZC03MDAgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxSZWZyZXNoQ3cgc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgIDxzcGFuPlRyeSBBZ2FpbiAoezMgLSB0aGlzLnN0YXRlLnJldHJ5Q291bnR9IGF0dGVtcHRzIGxlZnQpPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICB9XG59XG5cbi8vID09PT09PT09PT0gTE9BRElORyBDT01QT05FTlQgPT09PT09PT09PVxuXG5jb25zdCBMb2FkaW5nQ29tcG9uZW50OiBSZWFjdC5GQzx7IGxvYWRpbmdTdGF0ZTogTG9hZGluZ1N0YXRlIH0+ID0gKHsgbG9hZGluZ1N0YXRlIH0pID0+IChcbiAgPGRpdiBjbGFzc05hbWU9XCJwLTYgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc3BhY2UteS0zIGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93XCI+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgYm9yZGVyLTQgYm9yZGVyLWJsdWUtMjAwIGJvcmRlci10LWJsdWUtNTAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW5cIj48L2Rpdj5cbiAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtXCI+TG9hZGluZyBjdWlzaW5lIHJlY29tbWVuZGF0aW9ucy4uLjwvcD5cbiAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj57bG9hZGluZ1N0YXRlLnN0ZXB9PC9wPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LXhzIGJnLWdyYXktMjAwIHJvdW5kZWQtZnVsbCBoLTJcIj5cbiAgICAgIDxkaXYgXG4gICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtNTAwIGgtMiByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwXCIgXG4gICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHtsb2FkaW5nU3RhdGUucHJvZ3Jlc3N9JWAgfX1cbiAgICAgID48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4pO1xuXG4vLyA9PT09PT09PT09IE1BSU4gQ09NUE9ORU5UID09PT09PT09PT1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3Vpc2luZVJlY29tbWVuZGVyKCkge1xuICAvLyA9PT09PT09PT09IENPTlRFWFQgQU5EIFNUQVRFID09PT09PT09PT1cbiAgY29uc3QgYWxjaGVtaWNhbENvbnRleHQgPSB1c2VBbGNoZW1pY2FsKCk7XG4gIGNvbnN0IHsgcGxhbmV0YXJ5UG9zaXRpb25zID0ge30sIHN0YXRlIH0gPSBhbGNoZW1pY2FsQ29udGV4dCA/PyB7fTtcbiAgY29uc3QgeyBhc3Ryb2xvZ2ljYWxTdGF0ZSA9IHsgem9kaWFjU2lnbjogJ2FyaWVzJywgbHVuYXJQaGFzZTogJ25ldyBtb29uJyB9IH0gPSBzdGF0ZSA/PyB7fTtcbiAgY29uc3QgeyB6b2RpYWNTaWduOiBjdXJyZW50Wm9kaWFjLCBsdW5hclBoYXNlIH0gPSBhc3Ryb2xvZ2ljYWxTdGF0ZTtcblxuICAvLyBDb21wb25lbnQgc3RhdGVcbiAgY29uc3QgW3NlbGVjdGVkQ3Vpc2luZSwgc2V0U2VsZWN0ZWRDdWlzaW5lXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3Vpc2luZVJlY29tbWVuZGF0aW9ucywgc2V0Q3Vpc2luZVJlY29tbWVuZGF0aW9uc10gPSB1c2VTdGF0ZTxDdWlzaW5lRGF0YVtdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nU3RhdGUsIHNldExvYWRpbmdTdGF0ZV0gPSB1c2VTdGF0ZTxMb2FkaW5nU3RhdGU+KHtcbiAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgc3RlcDogJ0luaXRpYWxpemluZy4uLicsXG4gICAgcHJvZ3Jlc3M6IDBcbiAgfSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFttYXRjaGluZ1JlY2lwZXMsIHNldE1hdGNoaW5nUmVjaXBlc10gPSB1c2VTdGF0ZTxSZWNpcGVEYXRhW10+KFtdKTtcbiAgY29uc3QgW3NhdWNlUmVjb21tZW5kYXRpb25zLCBzZXRTYXVjZVJlY29tbWVuZGF0aW9uc10gPSB1c2VTdGF0ZTxTYXVjZURhdGFbXT4oW10pO1xuICBcbiAgLy8gQ3VsdHVyYWwgQW5hbHl0aWNzIHN0YXRlXG4gIGNvbnN0IFtjdWx0dXJhbEFuYWx5dGljcywgc2V0Q3VsdHVyYWxBbmFseXRpY3NdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgQ3VsdHVyYWxBbmFseXRpY3M+Pih7fSk7XG4gIGNvbnN0IFtmdXNpb25SZWNvbW1lbmRhdGlvbnMsIHNldEZ1c2lvblJlY29tbWVuZGF0aW9uc10gPSB1c2VTdGF0ZTxGdXNpb25DdWlzaW5lUmVjb21tZW5kYXRpb25bXT4oW10pO1xuICBcbiAgLy8gVUkgc3RhdGVcbiAgY29uc3QgW3Nob3dDdWlzaW5lRGV0YWlscywgc2V0U2hvd0N1aXNpbmVEZXRhaWxzXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkUmVjaXBlLCBzZXRTZWxlY3RlZFJlY2lwZV0gPSB1c2VTdGF0ZTxSZWNpcGVEYXRhIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzaG93Q3VsdHVyYWxBbmFseXRpY3MsIHNldFNob3dDdWx0dXJhbEFuYWx5dGljc10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtzaG93RnVzaW9uUmVjb21tZW5kYXRpb25zLCBzZXRTaG93RnVzaW9uUmVjb21tZW5kYXRpb25zXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgXG4gIC8vIEFkdmFuY2VkIFNlYXJjaCBhbmQgRmlsdGVyaW5nIHN0YXRlXG4gIGNvbnN0IFtzZWFyY2hGaWx0ZXJzLCBzZXRTZWFyY2hGaWx0ZXJzXSA9IHVzZVN0YXRlPFNlYXJjaEZpbHRlcnM+KHtcbiAgICBxdWVyeTogJycsXG4gICAgZGlldGFyeVJlc3RyaWN0aW9uczogW10sXG4gICAgZGlmZmljdWx0eUxldmVsOiBbXSxcbiAgICBjb29raW5nVGltZTogeyBtaW46IDAsIG1heDogNDgwIH0sXG4gICAgY3Vpc2luZVR5cGVzOiBbXSxcbiAgICBtZWFsVHlwZXM6IFtdLFxuICAgIHNwaWNpbmVzczogW10sXG4gICAgaW5ncmVkaWVudHM6IFtdXG4gIH0pO1xuICBjb25zdCBbc2VhcmNoSW50ZW50LCBzZXRTZWFyY2hJbnRlbnRdID0gdXNlU3RhdGU8U2VhcmNoSW50ZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtmaWx0ZXJlZEN1aXNpbmVzLCBzZXRGaWx0ZXJlZEN1aXNpbmVzXSA9IHVzZVN0YXRlPEN1aXNpbmVEYXRhW10+KFtdKTtcbiAgY29uc3QgW29yaWdpbmFsQ3Vpc2luZXMsIHNldE9yaWdpbmFsQ3Vpc2luZXNdID0gdXNlU3RhdGU8Q3Vpc2luZURhdGFbXT4oW10pO1xuXG4gIC8vIFBlcmZvcm1hbmNlIEFuYWx5dGljcyBhbmQgQ2FjaGluZyBzdGF0ZVxuICBjb25zdCBbc2hvd1BlcmZvcm1hbmNlQW5hbHl0aWNzLCBzZXRTaG93UGVyZm9ybWFuY2VBbmFseXRpY3NdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBcbiAgLy8gRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2Ugc3RhdGVcbiAgY29uc3QgW3Nob3dFbnRlcnByaXNlSW50ZWxsaWdlbmNlLCBzZXRTaG93RW50ZXJwcmlzZUludGVsbGlnZW5jZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtlbnRlcnByaXNlSW50ZWxsaWdlbmNlQW5hbHlzaXMsIHNldEVudGVycHJpc2VJbnRlbGxpZ2VuY2VBbmFseXNpc10gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xuICBcbiAgLy8gQW5hbHl0aWNzIGhvb2tzXG4gIGNvbnN0IFthbmFseXRpY3NTdGF0ZSwgYW5hbHl0aWNzQWN0aW9uc10gPSB1c2VSZWNvbW1lbmRhdGlvbkFuYWx5dGljcyh7XG4gICAgZW5hYmxlUGVyZm9ybWFuY2VUcmFja2luZzogdHJ1ZSxcbiAgICBlbmFibGVDYWNoaW5nOiB0cnVlLFxuICAgIGVuYWJsZUludGVyYWN0aW9uVHJhY2tpbmc6IHRydWUsXG4gICAgbWV0cmljc1VwZGF0ZUludGVydmFsOiA1MDAwXG4gIH0pO1xuICBcbiAgY29uc3QgeyB0cmFja0NsaWNrLCB0cmFja1ZpZXcsIHRyYWNrRXhwYW5kLCB0cmFja1NlYXJjaCwgdHJhY2tGaWx0ZXIgfSA9IHVzZUludGVyYWN0aW9uVHJhY2tpbmcoKTtcblxuICAvLyA9PT09PT09PT09IE1FTU9JWkVEIFZBTFVFUyA9PT09PT09PT09XG4gIFxuICBjb25zdCBjdXJyZW50TW9tZW50RWxlbWVudGFsUHJvZmlsZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnRhbFN0YXRlID0gKHN0YXRlIGFzIGFueSk/LmVsZW1lbnRhbFN0YXRlIHx8IChzdGF0ZSBhcyBhbnkpPy5hc3Ryb2xvZ2ljYWxTdGF0ZT8uZWxlbWVudGFsU3RhdGU7XG4gICAgaWYgKGVsZW1lbnRhbFN0YXRlKSB7XG4gICAgICByZXR1cm4gZWxlbWVudGFsU3RhdGUgYXMgRWxlbWVudGFsUHJvcGVydGllcztcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRab2RpYWMpIHtcbiAgICAgIHJldHVybiBjYWxjdWxhdGVFbGVtZW50YWxQcm9maWxlRnJvbVpvZGlhYyhjdXJyZW50Wm9kaWFjIGFzIFpvZGlhY1NpZ24pO1xuICAgIH1cbiAgICByZXR1cm4geyBGaXJlOiAwLjI1LCBXYXRlcjogMC4yNSwgRWFydGg6IDAuMjUsIEFpcjogMC4yNSB9O1xuICB9LCBbc3RhdGUsIGN1cnJlbnRab2RpYWNdKTtcblxuICBjb25zdCBhc3Ryb2xvZ2ljYWxTdGF0ZUZvclJlY29tbWVuZGF0aW9ucyA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICB6b2RpYWNTaWduOiBTdHJpbmcoY3VycmVudFpvZGlhYyB8fCAnYXJpZXMnKSBhcyBab2RpYWNTaWduLFxuICAgIGx1bmFyUGhhc2U6IFN0cmluZyhsdW5hclBoYXNlIHx8ICduZXcgbW9vbicpIGFzIEx1bmFyUGhhc2UsXG4gICAgcGxhbmV0YXJ5UG9zaXRpb25zOiBwbGFuZXRhcnlQb3NpdGlvbnMgfHwge30sXG4gIH0pLCBbY3VycmVudFpvZGlhYywgbHVuYXJQaGFzZSwgcGxhbmV0YXJ5UG9zaXRpb25zXSk7XG5cbiAgLy8gPT09PT09PT09PSBEQVRBIExPQURJTkcgPT09PT09PT09PVxuXG4gIGNvbnN0IGxvYWRDdWlzaW5lRGF0YSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAvLyBTdGFydCBwZXJmb3JtYW5jZSB0cmFja2luZ1xuICAgIGNvbnN0IGVuZFRpbWluZyA9IGFuYWx5dGljc0FjdGlvbnMuc3RhcnRUaW1pbmcoJ2N1aXNpbmVfcmVjb21tZW5kYXRpb25fbG9hZCcpO1xuICAgIGNvbnN0IGxvYWRTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZ1N0YXRlKHsgaXNMb2FkaW5nOiB0cnVlLCBzdGVwOiAnR2V0dGluZyBhc3Ryb2xvZ2ljYWwgc3RhdGUuLi4nLCBwcm9ncmVzczogMTAgfSk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYGN1aXNpbmVfcmVjb21tZW5kYXRpb25zXyR7SlNPTi5zdHJpbmdpZnkoY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGUpfV8ke0pTT04uc3RyaW5naWZ5KGFzdHJvbG9naWNhbFN0YXRlRm9yUmVjb21tZW5kYXRpb25zKX1gO1xuICAgICAgY29uc3QgY2FjaGVkUmVjb21tZW5kYXRpb25zID0gYW5hbHl0aWNzQWN0aW9ucy5nZXRDYWNoZWRSZWNvbW1lbmRhdGlvbjx7XG4gICAgICAgIGN1aXNpbmVzOiBDdWlzaW5lRGF0YVtdO1xuICAgICAgICBjdWx0dXJhbEFuYWx5dGljczogUmVjb3JkPHN0cmluZywgQ3VsdHVyYWxBbmFseXRpY3M+O1xuICAgICAgICBmdXNpb25SZWNvbW1lbmRhdGlvbnM6IEZ1c2lvbkN1aXNpbmVSZWNvbW1lbmRhdGlvbltdO1xuICAgICAgICBzYXVjZXM6IFNhdWNlRGF0YVtdO1xuICAgICAgfT4oY2FjaGVLZXkpO1xuICAgICAgXG4gICAgICBpZiAoY2FjaGVkUmVjb21tZW5kYXRpb25zKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKCdVc2luZyBjYWNoZWQgY3Vpc2luZSByZWNvbW1lbmRhdGlvbnMnKTtcbiAgICAgICAgc2V0Q3Vpc2luZVJlY29tbWVuZGF0aW9ucyhjYWNoZWRSZWNvbW1lbmRhdGlvbnMuY3Vpc2luZXMpO1xuICAgICAgICBzZXRPcmlnaW5hbEN1aXNpbmVzKGNhY2hlZFJlY29tbWVuZGF0aW9ucy5jdWlzaW5lcyk7XG4gICAgICAgIHNldEZpbHRlcmVkQ3Vpc2luZXMoY2FjaGVkUmVjb21tZW5kYXRpb25zLmN1aXNpbmVzKTtcbiAgICAgICAgc2V0Q3VsdHVyYWxBbmFseXRpY3MoY2FjaGVkUmVjb21tZW5kYXRpb25zLmN1bHR1cmFsQW5hbHl0aWNzKTtcbiAgICAgICAgc2V0RnVzaW9uUmVjb21tZW5kYXRpb25zKGNhY2hlZFJlY29tbWVuZGF0aW9ucy5mdXNpb25SZWNvbW1lbmRhdGlvbnMpO1xuICAgICAgICBzZXRTYXVjZVJlY29tbWVuZGF0aW9ucyhjYWNoZWRSZWNvbW1lbmRhdGlvbnMuc2F1Y2VzKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxvYWRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBsb2FkU3RhcnRUaW1lO1xuICAgICAgICBhbmFseXRpY3NBY3Rpb25zLnJlY29yZExvYWRUaW1lKGxvYWRUaW1lKTtcbiAgICAgICAgZW5kVGltaW5nKCk7XG4gICAgICAgIFxuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoeyBpc0xvYWRpbmc6IGZhbHNlLCBzdGVwOiAnQ29tcGxldGUhJywgcHJvZ3Jlc3M6IDEwMCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTbWFsbCBkZWxheSB0byBzaG93IGxvYWRpbmcgc3RhdGVcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgIFxuICAgICAgc2V0TG9hZGluZ1N0YXRlKHsgaXNMb2FkaW5nOiB0cnVlLCBzdGVwOiAnR2VuZXJhdGluZyBjdWlzaW5lIHJlY29tbWVuZGF0aW9ucy4uLicsIHByb2dyZXNzOiAzMCB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gZ2V0Q3Vpc2luZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGUsXG4gICAgICAgIGFzdHJvbG9naWNhbFN0YXRlRm9yUmVjb21tZW5kYXRpb25zLFxuICAgICAgICB7IGNvdW50OiAxMiwgaW5jbHVkZVJlZ2lvbmFsOiB0cnVlIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIHNldExvYWRpbmdTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSwgc3RlcDogJ0xvYWRpbmcgcmVjaXBlIGRhdGEuLi4nLCBwcm9ncmVzczogNTAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlY2lwZXMgPSBhd2FpdCBnZXRBbGxSZWNpcGVzKCk7XG4gICAgICBcbiAgICAgIHNldExvYWRpbmdTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSwgc3RlcDogJ0NhbGN1bGF0aW5nIE1vbmljYS9LYWxjaG0gY29tcGF0aWJpbGl0eS4uLicsIHByb2dyZXNzOiA2NSB9KTtcbiAgICAgIFxuICAgICAgLy8gRW5oYW5jZWQgcmVjb21tZW5kYXRpb25zIHdpdGggTW9uaWNhL0thbGNobSBpbnRlZ3JhdGlvblxuICAgICAgY29uc3QgZW5oYW5jZWRSZWNvbW1lbmRhdGlvbnMgPSByZWNvbW1lbmRhdGlvbnMubWFwKGN1aXNpbmUgPT4ge1xuICAgICAgICAvLyBFbnN1cmUgZWxlbWVudGFsIHByb3BlcnRpZXMgYXJlIHByb3Blcmx5IHR5cGVkXG4gICAgICAgIGNvbnN0IGN1aXNpbmVFbGVtZW50YWw6IEVsZW1lbnRhbFByb3BlcnRpZXMgPSBjdWlzaW5lLmVsZW1lbnRhbFByb3BlcnRpZXMgfHwgXG4gICAgICAgICAgeyBGaXJlOiAwLjI1LCBXYXRlcjogMC4yNSwgRWFydGg6IDAuMjUsIEFpcjogMC4yNSB9O1xuICAgICAgICBcbiAgICAgICAgLy8gUGVyZm9ybSBjb21wcmVoZW5zaXZlIGVuaGFuY2VkIGFuYWx5c2lzXG4gICAgICAgIGNvbnN0IGVuaGFuY2VkQW5hbHlzaXMgPSBwZXJmb3JtRW5oYW5jZWRBbmFseXNpcyhcbiAgICAgICAgICB7IGVsZW1lbnRhbDogY3Vpc2luZUVsZW1lbnRhbCB9LFxuICAgICAgICAgIGN1cnJlbnRNb21lbnRFbGVtZW50YWxQcm9maWxlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhdGUgTW9uaWNhIGNvbXBhdGliaWxpdHlcbiAgICAgICAgY29uc3QgbW9uaWNhQ29tcGF0aWJpbGl0eSA9IGNhbGN1bGF0ZU1vbmljYUthbGNobUNvbXBhdGliaWxpdHkoXG4gICAgICAgICAgeyBlbGVtZW50YWw6IGN1aXNpbmVFbGVtZW50YWwgfSxcbiAgICAgICAgICB7IGVsZW1lbnRhbDogY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGUgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIG1vbWVudCBNb25pY2EgY29uc3RhbnQgZm9yIHVzZXIgYW5kIGN1aXNpbmVcbiAgICAgICAgY29uc3QgdXNlck1vbmljYSA9IGNhbGN1bGF0ZU1vbWVudE1vbmljYUNvbnN0YW50KGN1cnJlbnRNb21lbnRFbGVtZW50YWxQcm9maWxlKTtcbiAgICAgICAgY29uc3QgY3Vpc2luZU1vbmljYSA9IGNhbGN1bGF0ZU1vbWVudE1vbmljYUNvbnN0YW50KGN1aXNpbmVFbGVtZW50YWwpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZXJtb2R5bmFtaWMgaGFybW9ueSBzY29yZVxuICAgICAgICBjb25zdCB0aGVybW9keW5hbWljSGFybW9ueSA9IE1hdGgubWF4KDAsIDEgLSBNYXRoLmFicyhlbmhhbmNlZEFuYWx5c2lzLnRoZXJtb2R5bmFtaWNNZXRyaWNzLmdyZWdzRW5lcmd5KSAvIDEwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBhbGNoZW1pY2FsIGJhbGFuY2Ugb3B0aW1pemF0aW9uXG4gICAgICAgIGNvbnN0IGFsY2hlbWljYWxCYWxhbmNlID0gY2FsY3VsYXRlQWxjaGVtaWNhbEJhbGFuY2UoZW5oYW5jZWRBbmFseXNpcy5hbGNoZW1pY2FsUHJvcGVydGllcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhdGUgY3VsdHVyYWwgc3luZXJneSBzY29yZSAoNSUgd2VpZ2h0IGluIDctZmFjdG9yIGFsZ29yaXRobSlcbiAgICAgICAgY29uc3QgY3VsdHVyYWxTeW5lcmd5RGF0YSA9IEN1bHR1cmFsQW5hbHl0aWNzU2VydmljZS5jYWxjdWxhdGVDdWx0dXJhbFN5bmVyZ3koXG4gICAgICAgICAgY3Vpc2luZS5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgW10sXG4gICAgICAgICAgeyBzZWFzb246IGdldEN1cnJlbnRTZWFzb24oKSB9XG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbmhhbmNlZCA3LWZhY3RvciBzY29yaW5nIGFsZ29yaXRobTpcbiAgICAgICAgLy8gMS4gT3JpZ2luYWwgYXN0cm9sb2dpY2FsIHNjb3JlICg1MCUpXG4gICAgICAgIC8vIDIuIE1vbmljYS9LYWxjaG0gY29tcGF0aWJpbGl0eSAoMjAlKVxuICAgICAgICAvLyAzLiBUaGVybW9keW5hbWljIGhhcm1vbnkgKDEwJSlcbiAgICAgICAgLy8gNC4gQWxjaGVtaWNhbCBiYWxhbmNlICgxMCUpXG4gICAgICAgIC8vIDUuIEN1bHR1cmFsIHN5bmVyZ3kgKDUlKVxuICAgICAgICAvLyA2LiBDb25maWRlbmNlIGZhY3RvciAoMyUpXG4gICAgICAgIC8vIDcuIFNlYXNvbmFsIG9wdGltaXphdGlvbiAoMiUpXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU2NvcmUgPSBnZXRTYWZlU2NvcmUoY3Vpc2luZS5zY29yZSk7XG4gICAgICAgIGNvbnN0IHNlYXNvbmFsT3B0aW1pemF0aW9uID0gY2FsY3VsYXRlU2Vhc29uYWxPcHRpbWl6YXRpb24oY3Vpc2luZS5uYW1lLCBnZXRDdXJyZW50U2Vhc29uKCkpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZW5oYW5jZWRTY29yZSA9IChcbiAgICAgICAgICAob3JpZ2luYWxTY29yZSAqIDAuNTApICsgXG4gICAgICAgICAgKG1vbmljYUNvbXBhdGliaWxpdHkgKiAwLjIwKSArIFxuICAgICAgICAgICh0aGVybW9keW5hbWljSGFybW9ueSAqIDAuMTApICsgXG4gICAgICAgICAgKGFsY2hlbWljYWxCYWxhbmNlICogMC4xMCkgKyBcbiAgICAgICAgICAoY3VsdHVyYWxTeW5lcmd5RGF0YS5zY29yZSAqIDAuMDUpICsgXG4gICAgICAgICAgKGVuaGFuY2VkQW5hbHlzaXMuY29uZmlkZW5jZSAqIDAuMDMpICsgXG4gICAgICAgICAgKHNlYXNvbmFsT3B0aW1pemF0aW9uICogMC4wMilcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExvZyBlbmhhbmNlZCBhbmFseXRpY3MgaW50ZWdyYXRpb24gZm9yIHZlcmlmaWNhdGlvblxuICAgICAgICBsb2dnZXIuaW5mbyhgRW5oYW5jZWQgTW9uaWNhL0thbGNobSBBbmFseXRpY3MgZm9yICR7Y3Vpc2luZS5uYW1lfTpgLCB7XG4gICAgICAgICAgb3JpZ2luYWxTY29yZSxcbiAgICAgICAgICBtb25pY2FDb21wYXRpYmlsaXR5LFxuICAgICAgICAgIHRoZXJtb2R5bmFtaWNIYXJtb255LFxuICAgICAgICAgIGFsY2hlbWljYWxCYWxhbmNlLFxuICAgICAgICAgIGN1bHR1cmFsU3luZXJneTogY3VsdHVyYWxTeW5lcmd5RGF0YS5zY29yZSxcbiAgICAgICAgICBjb25maWRlbmNlOiBlbmhhbmNlZEFuYWx5c2lzLmNvbmZpZGVuY2UsXG4gICAgICAgICAgc2Vhc29uYWxPcHRpbWl6YXRpb24sXG4gICAgICAgICAgZW5oYW5jZWRTY29yZSxcbiAgICAgICAgICB0aGVybW9keW5hbWljTWV0cmljczogZW5oYW5jZWRBbmFseXNpcy50aGVybW9keW5hbWljTWV0cmljc1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uY3Vpc2luZSxcbiAgICAgICAgICBzY29yZTogZW5oYW5jZWRTY29yZSxcbiAgICAgICAgICBtYXRjaFBlcmNlbnRhZ2U6IE1hdGgucm91bmQoZW5oYW5jZWRTY29yZSAqIDEwMCksXG4gICAgICAgICAgbW9uaWNhQ29tcGF0aWJpbGl0eSxcbiAgICAgICAgICB1c2VyTW9uaWNhLFxuICAgICAgICAgIGN1aXNpbmVNb25pY2EsXG4gICAgICAgICAgdGhlcm1vZHluYW1pY0hhcm1vbnksXG4gICAgICAgICAgYWxjaGVtaWNhbEJhbGFuY2UsXG4gICAgICAgICAgZW5oYW5jZWRBbmFseXNpcyxcbiAgICAgICAgICByZWFzb25pbmc6IFtcbiAgICAgICAgICAgIC4uLihjdWlzaW5lLnJlYXNvbmluZyB8fCBbXSksXG4gICAgICAgICAgICBgTW9uaWNhIGNvbXBhdGliaWxpdHk6ICR7TWF0aC5yb3VuZChtb25pY2FDb21wYXRpYmlsaXR5ICogMTAwKX0lYCxcbiAgICAgICAgICAgIGBUaGVybW9keW5hbWljIGhhcm1vbnk6ICR7TWF0aC5yb3VuZCh0aGVybW9keW5hbWljSGFybW9ueSAqIDEwMCl9JWAsXG4gICAgICAgICAgICBgQWxjaGVtaWNhbCBiYWxhbmNlOiAke01hdGgucm91bmQoYWxjaGVtaWNhbEJhbGFuY2UgKiAxMDApfSVgXG4gICAgICAgICAgXVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHNldExvYWRpbmdTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSwgc3RlcDogJ01hdGNoaW5nIHJlY2lwZXMgdG8gY3Vpc2luZXMuLi4nLCBwcm9ncmVzczogNzUgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGN1aXNpbmVzV2l0aFJlY2lwZXMgPSBlbmhhbmNlZFJlY29tbWVuZGF0aW9ucy5tYXAoY3Vpc2luZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nID0gcmVjaXBlcy5maWx0ZXIocmVjaXBlID0+IFxuICAgICAgICAgIHJlY2lwZS5jdWlzaW5lICYmIHJlY2lwZS5jdWlzaW5lLnRvTG93ZXJDYXNlKCkgPT09IGN1aXNpbmUubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbmhhbmNlZCByZWNpcGUgYnVpbGRpbmcgd2l0aCBNb25pY2EvS2FsY2htIGludGVncmF0aW9uXG4gICAgICAgIGNvbnN0IGVuaGFuY2VkUmVjaXBlcyA9IG1hdGNoaW5nLm1hcChyZWNpcGUgPT4ge1xuICAgICAgICAgIGNvbnN0IGJhc2VSZWNpcGUgPSBidWlsZENvbXBsZXRlUmVjaXBlKHJlY2lwZSwgY3Vpc2luZS5uYW1lKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQZXJmb3JtIGVuaGFuY2VkIGFuYWx5c2lzIG9uIHJlY2lwZVxuICAgICAgICAgIGlmIChiYXNlUmVjaXBlLmVsZW1lbnRhbFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFuYWx5c2lzID0gcGVyZm9ybUVuaGFuY2VkQW5hbHlzaXMoXG4gICAgICAgICAgICAgIHsgZWxlbWVudGFsOiBiYXNlUmVjaXBlLmVsZW1lbnRhbFByb3BlcnRpZXMgfSxcbiAgICAgICAgICAgICAgY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBLYWxjaG0gaGFybW9ueSBzY29yZSBmb3IgcmVjaXBlXG4gICAgICAgICAgICBjb25zdCBrYWxjaG1IYXJtb255ID0gY2FsY3VsYXRlUmVjaXBlS2FsY2htSGFybW9ueShcbiAgICAgICAgICAgICAgYW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3MsXG4gICAgICAgICAgICAgIChjdWlzaW5lIGFzIGFueSkuZW5oYW5jZWRBbmFseXNpcz8udGhlcm1vZHluYW1pY01ldHJpY3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSByZWNpcGUgdGhlcm1vZHluYW1pYyBvcHRpbWl6YXRpb25cbiAgICAgICAgICAgIGNvbnN0IHRoZXJtb2R5bmFtaWNPcHRpbWl6YXRpb24gPSBjYWxjdWxhdGVUaGVybW9keW5hbWljT3B0aW1pemF0aW9uKFxuICAgICAgICAgICAgICBhbmFseXNpcy50aGVybW9keW5hbWljTWV0cmljcyxcbiAgICAgICAgICAgICAgY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVuaGFuY2VkIHJlY2lwZSBzY29yaW5nIHdpdGggdGhlcm1vZHluYW1pYyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFNjb3JlID0gYmFzZVJlY2lwZS5tYXRjaFNjb3JlIHx8IDAuODU7XG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlZFJlY2lwZVNjb3JlID0gKFxuICAgICAgICAgICAgICAob3JpZ2luYWxTY29yZSAqIDAuNjApICsgXG4gICAgICAgICAgICAgIChhbmFseXNpcy5jb21wYXRpYmlsaXR5U2NvcmUgKiAwLjI1KSArIFxuICAgICAgICAgICAgICAoa2FsY2htSGFybW9ueSAqIDAuMTApICsgXG4gICAgICAgICAgICAgICh0aGVybW9keW5hbWljT3B0aW1pemF0aW9uICogMC4wNSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmJhc2VSZWNpcGUsXG4gICAgICAgICAgICAgIGVuaGFuY2VkQW5hbHlzaXM6IGFuYWx5c2lzLFxuICAgICAgICAgICAgICBtb25pY2FTY29yZTogYW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3MubW9uaWNhLFxuICAgICAgICAgICAgICBrYWxjaG1TY29yZTogYW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3Mua2FsY2htLFxuICAgICAgICAgICAgICBrYWxjaG1IYXJtb255LFxuICAgICAgICAgICAgICB0aGVybW9keW5hbWljT3B0aW1pemF0aW9uLFxuICAgICAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IGFuYWx5c2lzLmNvbXBhdGliaWxpdHlTY29yZSxcbiAgICAgICAgICAgICAgY29uZmlkZW5jZTogYW5hbHlzaXMuY29uZmlkZW5jZSxcbiAgICAgICAgICAgICAgbWF0Y2hTY29yZTogZW5oYW5jZWRSZWNpcGVTY29yZSxcbiAgICAgICAgICAgICAgbWF0Y2hQZXJjZW50YWdlOiBNYXRoLnJvdW5kKGVuaGFuY2VkUmVjaXBlU2NvcmUgKiAxMDApXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gYmFzZVJlY2lwZTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmN1aXNpbmUsXG4gICAgICAgICAgcmVjaXBlczogZW5oYW5jZWRSZWNpcGVzXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHNldEN1aXNpbmVSZWNvbW1lbmRhdGlvbnMoY3Vpc2luZXNXaXRoUmVjaXBlcyk7XG4gICAgICBzZXRPcmlnaW5hbEN1aXNpbmVzKGN1aXNpbmVzV2l0aFJlY2lwZXMpO1xuICAgICAgc2V0RmlsdGVyZWRDdWlzaW5lcyhjdWlzaW5lc1dpdGhSZWNpcGVzKTtcblxuICAgICAgc2V0TG9hZGluZ1N0YXRlKHsgaXNMb2FkaW5nOiB0cnVlLCBzdGVwOiAnQW5hbHl6aW5nIGN1bHR1cmFsIGludGVsbGlnZW5jZS4uLicsIHByb2dyZXNzOiA4MCB9KTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY3VsdHVyYWwgYW5hbHl0aWNzIGZvciBlYWNoIGN1aXNpbmVcbiAgICAgIGNvbnN0IGN1bHR1cmFsQW5hbHl0aWNzRGF0YTogUmVjb3JkPHN0cmluZywgQ3VsdHVyYWxBbmFseXRpY3M+ID0ge307XG4gICAgICBmb3IgKGNvbnN0IGN1aXNpbmUgb2YgY3Vpc2luZXNXaXRoUmVjaXBlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGFuYWx5dGljcyA9IEN1bHR1cmFsQW5hbHl0aWNzU2VydmljZS5nZW5lcmF0ZUN1bHR1cmFsQW5hbHl0aWNzKFxuICAgICAgICAgICAgY3Vpc2luZS5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICBjdWlzaW5lLmVsZW1lbnRhbFByb3BlcnRpZXMgfHwgeyBGaXJlOiAwLjI1LCBXYXRlcjogMC4yNSwgRWFydGg6IDAuMjUsIEFpcjogMC4yNSB9LFxuICAgICAgICAgICAgYXN0cm9sb2dpY2FsU3RhdGVGb3JSZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICAgIGN1bHR1cmFsQW5hbHl0aWNzRGF0YVtjdWlzaW5lLmlkXSA9IGFuYWx5dGljcztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGdlbmVyYXRlIGN1bHR1cmFsIGFuYWx5dGljcyBmb3IgJHtjdWlzaW5lLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0Q3VsdHVyYWxBbmFseXRpY3MoY3VsdHVyYWxBbmFseXRpY3NEYXRhKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgZnVzaW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgYXZhaWxhYmxlQ3Vpc2luZU5hbWVzID0gY3Vpc2luZXNXaXRoUmVjaXBlcy5tYXAoYyA9PiBjLm5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICBjb25zdCB0b3BDdWlzaW5lID0gY3Vpc2luZXNXaXRoUmVjaXBlc1swXT8ubmFtZT8udG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICh0b3BDdWlzaW5lKSB7XG4gICAgICAgIGNvbnN0IGZ1c2lvblJlY3MgPSBDdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UuZ2VuZXJhdGVGdXNpb25SZWNvbW1lbmRhdGlvbnMoXG4gICAgICAgICAgdG9wQ3Vpc2luZSxcbiAgICAgICAgICBhdmFpbGFibGVDdWlzaW5lTmFtZXMsXG4gICAgICAgICAgM1xuICAgICAgICApO1xuICAgICAgICBzZXRGdXNpb25SZWNvbW1lbmRhdGlvbnMoZnVzaW9uUmVjcyk7XG4gICAgICB9XG5cbiAgICAgIHNldExvYWRpbmdTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSwgc3RlcDogJ0hhcm1vbml6aW5nIHNhdWNlcy4uLicsIHByb2dyZXNzOiA5MCB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgdG9wU2F1Y2VzID0gZ2VuZXJhdGVUb3BTYXVjZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGUsXG4gICAgICAgIDYsXG4gICAgICAgIGFzdHJvbG9naWNhbFN0YXRlRm9yUmVjb21tZW5kYXRpb25zXG4gICAgICApO1xuICAgICAgc2V0U2F1Y2VSZWNvbW1lbmRhdGlvbnModG9wU2F1Y2VzIGFzIFNhdWNlRGF0YVtdKTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIG92ZXJhbGwgY29uZmlkZW5jZSBzY29yZSBmb3IgY2FjaGluZ1xuICAgICAgY29uc3Qgb3ZlcmFsbENvbmZpZGVuY2UgPSBhbmFseXRpY3NBY3Rpb25zLmNhbGN1bGF0ZUNvbmZpZGVuY2Uoe1xuICAgICAgICBhc3Ryb2xvZ2ljYWxBbGlnbm1lbnQ6IDAuOSxcbiAgICAgICAgZWxlbWVudGFsSGFybW9ueTogMC44NSxcbiAgICAgICAgY3VsdHVyYWxSZWxldmFuY2U6IDAuOCxcbiAgICAgICAgc2Vhc29uYWxPcHRpbWl6YXRpb246IGNhbGN1bGF0ZVNlYXNvbmFsT3B0aW1pemF0aW9uKCdhdmVyYWdlJywgZ2V0Q3VycmVudFNlYXNvbigpKSxcbiAgICAgICAgdXNlclByZWZlcmVuY2VNYXRjaDogMC44LFxuICAgICAgICBkYXRhUXVhbGl0eTogMC45NVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENhY2hlIHRoZSBjb21wbGV0ZSByZWNvbW1lbmRhdGlvbiBzZXQgd2l0aCBjb25maWRlbmNlLWJhc2VkIFRUTFxuICAgICAgY29uc3QgY2FjaGVEYXRhID0ge1xuICAgICAgICBjdWlzaW5lczogY3Vpc2luZXNXaXRoUmVjaXBlcyxcbiAgICAgICAgY3VsdHVyYWxBbmFseXRpY3M6IGN1bHR1cmFsQW5hbHl0aWNzRGF0YSxcbiAgICAgICAgZnVzaW9uUmVjb21tZW5kYXRpb25zOiBmdXNpb25SZWNzLFxuICAgICAgICBzYXVjZXM6IHRvcFNhdWNlc1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgYW5hbHl0aWNzQWN0aW9ucy5jYWNoZVJlY29tbWVuZGF0aW9uKGNhY2hlS2V5LCBjYWNoZURhdGEsIG92ZXJhbGxDb25maWRlbmNlLm92ZXJhbGxTY29yZSk7XG4gICAgICBcbiAgICAgIC8vIFJlY29yZCBmaW5hbCBsb2FkIHRpbWVcbiAgICAgIGNvbnN0IHRvdGFsTG9hZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGxvYWRTdGFydFRpbWU7XG4gICAgICBhbmFseXRpY3NBY3Rpb25zLnJlY29yZExvYWRUaW1lKHRvdGFsTG9hZFRpbWUpO1xuICAgICAgZW5kVGltaW5nKCk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGBDdWlzaW5lIHJlY29tbWVuZGF0aW9ucyBsb2FkZWQgaW4gJHt0b3RhbExvYWRUaW1lLnRvRml4ZWQoMil9bXMgd2l0aCBjb25maWRlbmNlICR7b3ZlcmFsbENvbmZpZGVuY2Uub3ZlcmFsbFNjb3JlLnRvRml4ZWQoMil9YCk7XG5cbiAgICAgIHNldExvYWRpbmdTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UsIHN0ZXA6ICdDb21wbGV0ZSEnLCBwcm9ncmVzczogMTAwIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBsb2FkaW5nIGN1aXNpbmUgZGF0YTonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGN1aXNpbmUgcmVjb21tZW5kYXRpb25zLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgICAgc2V0TG9hZGluZ1N0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc3RlcDogJ0Vycm9yJywgcHJvZ3Jlc3M6IDAgfSk7XG4gICAgICBcbiAgICAgIC8vIFJlY29yZCBlcnJvciBpbiBhbmFseXRpY3NcbiAgICAgIGNvbnN0IGVycm9yTG9hZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGxvYWRTdGFydFRpbWU7XG4gICAgICBhbmFseXRpY3NBY3Rpb25zLnJlY29yZExvYWRUaW1lKGVycm9yTG9hZFRpbWUpO1xuICAgICAgZW5kVGltaW5nKCk7XG4gICAgfVxuICB9LCBbY3VycmVudE1vbWVudEVsZW1lbnRhbFByb2ZpbGUsIGFzdHJvbG9naWNhbFN0YXRlRm9yUmVjb21tZW5kYXRpb25zLCBhbmFseXRpY3NBY3Rpb25zXSk7XG5cbiAgLy8gPT09PT09PT09PSBFRkZFQ1RTID09PT09PT09PT1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvYWRDdWlzaW5lRGF0YSgpO1xuICB9LCBbbG9hZEN1aXNpbmVEYXRhXSk7XG5cbiAgLy8gPT09PT09PT09PSBFVkVOVCBIQU5ETEVSUyA9PT09PT09PT09XG5cbiAgY29uc3QgaGFuZGxlQ3Vpc2luZVNlbGVjdCA9IHVzZUNhbGxiYWNrKChjdWlzaW5lSWQ6IHN0cmluZykgPT4ge1xuICAgIC8vIFRyYWNrIHVzZXIgaW50ZXJhY3Rpb25cbiAgICBjb25zdCBzZWxlY3RlZERhdGEgPSBjdWlzaW5lUmVjb21tZW5kYXRpb25zLmZpbmQoYyA9PiBjLmlkID09PSBjdWlzaW5lSWQpO1xuICAgIHRyYWNrQ2xpY2soYGN1aXNpbmVfJHtjdWlzaW5lSWR9YCwge1xuICAgICAgY3Vpc2luZU5hbWU6IHNlbGVjdGVkRGF0YT8ubmFtZSxcbiAgICAgIG1hdGNoUGVyY2VudGFnZTogc2VsZWN0ZWREYXRhPy5tYXRjaFBlcmNlbnRhZ2UsXG4gICAgICBpc0V4cGFuZGluZzogc2VsZWN0ZWRDdWlzaW5lICE9PSBjdWlzaW5lSWRcbiAgICB9KTtcblxuICAgIGlmIChzZWxlY3RlZEN1aXNpbmUgPT09IGN1aXNpbmVJZCkge1xuICAgICAgc2V0U2hvd0N1aXNpbmVEZXRhaWxzKCFzaG93Q3Vpc2luZURldGFpbHMpO1xuICAgICAgdHJhY2tFeHBhbmQoYGN1aXNpbmVfZGV0YWlsc18ke2N1aXNpbmVJZH1gLCB7XG4gICAgICAgIGFjdGlvbjogc2hvd0N1aXNpbmVEZXRhaWxzID8gJ2NvbGxhcHNlJyA6ICdleHBhbmQnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgc2V0U2VsZWN0ZWRDdWlzaW5lKGN1aXNpbmVJZCk7XG4gICAgc2V0U2hvd0N1aXNpbmVEZXRhaWxzKHRydWUpO1xuXG4gICAgaWYgKHNlbGVjdGVkRGF0YT8ucmVjaXBlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgc2V0TWF0Y2hpbmdSZWNpcGVzKHNlbGVjdGVkRGF0YS5yZWNpcGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TWF0Y2hpbmdSZWNpcGVzKFtdKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZEN1aXNpbmUsIHNob3dDdWlzaW5lRGV0YWlscywgY3Vpc2luZVJlY29tbWVuZGF0aW9ucywgdHJhY2tDbGljaywgdHJhY2tFeHBhbmRdKTtcblxuICBjb25zdCBoYW5kbGVSZXRyeSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgICBsb2FkQ3Vpc2luZURhdGEoKTtcbiAgfSwgW2xvYWRDdWlzaW5lRGF0YV0pO1xuXG4gIC8vID09PT09PT09PT0gQURWQU5DRUQgU0VBUkNIIEFORCBGSUxURVJJTkcgSEFORExFUlMgPT09PT09PT09PVxuXG4gIGNvbnN0IGhhbmRsZUZpbHRlcnNDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZmlsdGVyczogU2VhcmNoRmlsdGVycykgPT4ge1xuICAgIHNldFNlYXJjaEZpbHRlcnMoZmlsdGVycyk7XG4gICAgXG4gICAgLy8gUHJvY2VzcyBuYXR1cmFsIGxhbmd1YWdlIHF1ZXJ5IGlmIHByZXNlbnRcbiAgICBpZiAoZmlsdGVycy5xdWVyeS50cmltKCkpIHtcbiAgICAgIGNvbnN0IGludGVudCA9IHByb2Nlc3NOYXR1cmFsTGFuZ3VhZ2VRdWVyeShmaWx0ZXJzLnF1ZXJ5KTtcbiAgICAgIHNldFNlYXJjaEludGVudChpbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyBNZXJnZSBleHRyYWN0ZWQgZmlsdGVycyB3aXRoIG1hbnVhbCBmaWx0ZXJzXG4gICAgICBjb25zdCBtZXJnZWRGaWx0ZXJzID0ge1xuICAgICAgICAuLi5maWx0ZXJzLFxuICAgICAgICAuLi5pbnRlbnQuZXh0cmFjdGVkRmlsdGVycyxcbiAgICAgICAgLy8gUHJlc2VydmUgbWFudWFsIHNlbGVjdGlvbnMgb3ZlciBleHRyYWN0ZWQgb25lcyBmb3IgYXJyYXlzXG4gICAgICAgIGRpZXRhcnlSZXN0cmljdGlvbnM6IFtcbiAgICAgICAgICAuLi5uZXcgU2V0KFtcbiAgICAgICAgICAgIC4uLmZpbHRlcnMuZGlldGFyeVJlc3RyaWN0aW9ucyxcbiAgICAgICAgICAgIC4uLihpbnRlbnQuZXh0cmFjdGVkRmlsdGVycy5kaWV0YXJ5UmVzdHJpY3Rpb25zIHx8IFtdKVxuICAgICAgICAgIF0pXG4gICAgICAgIF0sXG4gICAgICAgIGN1aXNpbmVUeXBlczogW1xuICAgICAgICAgIC4uLm5ldyBTZXQoW1xuICAgICAgICAgICAgLi4uZmlsdGVycy5jdWlzaW5lVHlwZXMsXG4gICAgICAgICAgICAuLi4oaW50ZW50LmV4dHJhY3RlZEZpbHRlcnMuY3Vpc2luZVR5cGVzIHx8IFtdKVxuICAgICAgICAgIF0pXG4gICAgICAgIF0sXG4gICAgICAgIGRpZmZpY3VsdHlMZXZlbDogW1xuICAgICAgICAgIC4uLm5ldyBTZXQoW1xuICAgICAgICAgICAgLi4uZmlsdGVycy5kaWZmaWN1bHR5TGV2ZWwsXG4gICAgICAgICAgICAuLi4oaW50ZW50LmV4dHJhY3RlZEZpbHRlcnMuZGlmZmljdWx0eUxldmVsIHx8IFtdKVxuICAgICAgICAgIF0pXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IGVuaGFuY2VkIHNlYXJjaCBhbmQgZmlsdGVyaW5nXG4gICAgICBsZXQgZmlsdGVyZWQgPSBvcmlnaW5hbEN1aXNpbmVzO1xuICAgICAgXG4gICAgICAvLyBBcHBseSB0ZXh0IHNlYXJjaCBmaXJzdFxuICAgICAgaWYgKGludGVudC5xdWVyeS50cmltKCkpIHtcbiAgICAgICAgZmlsdGVyZWQgPSBlbmhhbmNlZFNlYXJjaChmaWx0ZXJlZCwgaW50ZW50LnF1ZXJ5LCBbJ25hbWUnLCAnZGVzY3JpcHRpb24nXSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFwcGx5IGZpbHRlcnNcbiAgICAgIGZpbHRlcmVkID0gYXBwbHlGaWx0ZXJzKGZpbHRlcmVkLCBtZXJnZWRGaWx0ZXJzKTtcbiAgICAgIFxuICAgICAgc2V0RmlsdGVyZWRDdWlzaW5lcyhmaWx0ZXJlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIHF1ZXJ5LCBqdXN0IGFwcGx5IGZpbHRlcnNcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gYXBwbHlGaWx0ZXJzKG9yaWdpbmFsQ3Vpc2luZXMsIGZpbHRlcnMpO1xuICAgICAgc2V0RmlsdGVyZWRDdWlzaW5lcyhmaWx0ZXJlZCk7XG4gICAgICBzZXRTZWFyY2hJbnRlbnQobnVsbCk7XG4gICAgfVxuICB9LCBbb3JpZ2luYWxDdWlzaW5lc10pO1xuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IHVzZUNhbGxiYWNrKChxdWVyeTogc3RyaW5nKSA9PiB7XG4gICAgLy8gVHJhY2sgc2VhcmNoIGludGVyYWN0aW9uXG4gICAgdHJhY2tTZWFyY2gocXVlcnksIHtcbiAgICAgIG9yaWdpbmFsUmVzdWx0Q291bnQ6IG9yaWdpbmFsQ3Vpc2luZXMubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbnRlbnQgPSBwcm9jZXNzTmF0dXJhbExhbmd1YWdlUXVlcnkocXVlcnkpO1xuICAgIHNldFNlYXJjaEludGVudChpbnRlbnQpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBmaWx0ZXJzIHdpdGggZXh0cmFjdGVkIGluZm9ybWF0aW9uXG4gICAgY29uc3QgdXBkYXRlZEZpbHRlcnMgPSB7XG4gICAgICAuLi5zZWFyY2hGaWx0ZXJzLFxuICAgICAgcXVlcnksXG4gICAgICAuLi5pbnRlbnQuZXh0cmFjdGVkRmlsdGVyc1xuICAgIH07XG4gICAgXG4gICAgc2V0U2VhcmNoRmlsdGVycyh1cGRhdGVkRmlsdGVycyk7XG4gICAgXG4gICAgLy8gQXBwbHkgZW5oYW5jZWQgc2VhcmNoXG4gICAgbGV0IGZpbHRlcmVkID0gb3JpZ2luYWxDdWlzaW5lcztcbiAgICBcbiAgICBpZiAoaW50ZW50LnF1ZXJ5LnRyaW0oKSkge1xuICAgICAgZmlsdGVyZWQgPSBlbmhhbmNlZFNlYXJjaChmaWx0ZXJlZCwgaW50ZW50LnF1ZXJ5LCBbJ25hbWUnLCAnZGVzY3JpcHRpb24nXSk7XG4gICAgfVxuICAgIFxuICAgIGZpbHRlcmVkID0gYXBwbHlGaWx0ZXJzKGZpbHRlcmVkLCB1cGRhdGVkRmlsdGVycyk7XG4gICAgc2V0RmlsdGVyZWRDdWlzaW5lcyhmaWx0ZXJlZCk7XG5cbiAgICAvLyBUcmFjayBmaWx0ZXIgcmVzdWx0c1xuICAgIHRyYWNrRmlsdGVyKCdzZWFyY2hfcmVzdWx0cycsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgcmVzdWx0Q291bnQ6IGZpbHRlcmVkLmxlbmd0aCxcbiAgICAgIG9yaWdpbmFsQ291bnQ6IG9yaWdpbmFsQ3Vpc2luZXMubGVuZ3RoLFxuICAgICAgY29uZmlkZW5jZTogaW50ZW50LmNvbmZpZGVuY2VcbiAgICB9KTtcbiAgfSwgW3NlYXJjaEZpbHRlcnMsIG9yaWdpbmFsQ3Vpc2luZXMsIHRyYWNrU2VhcmNoLCB0cmFja0ZpbHRlcl0pO1xuXG4gIC8vID09PT09PT09PT0gUkVOREVSIEhFTFBFUlMgPT09PT09PT09PVxuXG4gIGNvbnN0IHNlbGVjdGVkQ3Vpc2luZURhdGEgPSB1c2VNZW1vKCgpID0+IFxuICAgIGN1aXNpbmVSZWNvbW1lbmRhdGlvbnMuZmluZChjID0+IGMuaWQgPT09IHNlbGVjdGVkQ3Vpc2luZSksXG4gICAgW2N1aXNpbmVSZWNvbW1lbmRhdGlvbnMsIHNlbGVjdGVkQ3Vpc2luZV1cbiAgKTtcblxuICAvLyA9PT09PT09PT09IFJFTkRFUiA9PT09PT09PT09XG5cbiAgaWYgKGxvYWRpbmdTdGF0ZS5pc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gPExvYWRpbmdDb21wb25lbnQgbG9hZGluZ1N0YXRlPXtsb2FkaW5nU3RhdGV9IC8+O1xuICB9XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJnLXJlZC01MCBib3JkZXIgYm9yZGVyLXJlZC0yMDAgdGV4dC1yZWQtNzAwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgbWItMlwiPlxuICAgICAgICAgIDxBbGVydENpcmNsZSBzaXplPXsyMH0gLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPkVycm9yPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItM1wiPntlcnJvcn08L3A+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZXRyeX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgcHgtMyBweS0xIGJnLXJlZC0xMDAgaG92ZXI6YmctcmVkLTIwMCByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxSZWZyZXNoQ3cgc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgPHNwYW4+UmV0cnk8L3NwYW4+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEN1aXNpbmVSZWNvbW1lbmRlckVycm9yQm91bmRhcnkgb25SZXRyeT17aGFuZGxlUmV0cnl9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdyBwLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItM1wiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtbWVkaXVtXCI+Q2VsZXN0aWFsIEN1aXNpbmUgR3VpZGU8L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dFbnRlcnByaXNlSW50ZWxsaWdlbmNlKCFzaG93RW50ZXJwcmlzZUludGVsbGlnZW5jZSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMSBweC0zIHB5LTEgdGV4dC1zbSByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgc2hvd0VudGVycHJpc2VJbnRlbGxpZ2VuY2UgXG4gICAgICAgICAgICAgICAgICA/ICdiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTcwMCcgXG4gICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNjAwIGhvdmVyOmJnLWdyYXktMjAwJ1xuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgdGl0bGU9XCJUb2dnbGUgRW50ZXJwcmlzZSBJbnRlbGxpZ2VuY2VcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QnJhaW4gc2l6ZT17MTR9IC8+XG4gICAgICAgICAgICAgIDxzcGFuPkludGVsbGlnZW5jZTwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UGVyZm9ybWFuY2VBbmFseXRpY3MoIXNob3dQZXJmb3JtYW5jZUFuYWx5dGljcyl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMSBweC0zIHB5LTEgdGV4dC1zbSByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgc2hvd1BlcmZvcm1hbmNlQW5hbHl0aWNzIFxuICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTcwMCcgXG4gICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNjAwIGhvdmVyOmJnLWdyYXktMjAwJ1xuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgdGl0bGU9XCJUb2dnbGUgUGVyZm9ybWFuY2UgQW5hbHl0aWNzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEJhckNoYXJ0MyBzaXplPXsxNH0gLz5cbiAgICAgICAgICAgICAgPHNwYW4+QW5hbHl0aWNzPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBQZXJmb3JtYW5jZSBBbmFseXRpY3MgRGFzaGJvYXJkICovfVxuICAgICAgICB7c2hvd1BlcmZvcm1hbmNlQW5hbHl0aWNzICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgICAgIDxQZXJmb3JtYW5jZUFuYWx5dGljc0Rhc2hib2FyZCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYm9yZGVyLXQgcHQtNFwiXG4gICAgICAgICAgICAgIGNvbXBhY3Q9e2ZhbHNlfVxuICAgICAgICAgICAgICBzaG93RGV0YWlscz17dHJ1ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIEVudGVycHJpc2UgSW50ZWxsaWdlbmNlIFBhbmVsICovfVxuICAgICAgICB7c2hvd0VudGVycHJpc2VJbnRlbGxpZ2VuY2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICAgICAgPEVudGVycHJpc2VJbnRlbGxpZ2VuY2VQYW5lbFxuICAgICAgICAgICAgICByZWNpcGVEYXRhPXtzZWxlY3RlZEN1aXNpbmUgPyBjdWlzaW5lUmVjb21tZW5kYXRpb25zLmZpbmQoYyA9PiBjLmlkID09PSBzZWxlY3RlZEN1aXNpbmUpIDogbnVsbH1cbiAgICAgICAgICAgICAgaW5ncmVkaWVudERhdGE9e3sgaW5ncmVkaWVudHM6IG1hdGNoaW5nUmVjaXBlcyB9fVxuICAgICAgICAgICAgICBhc3Ryb2xvZ2ljYWxDb250ZXh0PXt7XG4gICAgICAgICAgICAgICAgem9kaWFjU2lnbjogYXN0cm9sb2dpY2FsU3RhdGVGb3JSZWNvbW1lbmRhdGlvbnMuem9kaWFjU2lnbixcbiAgICAgICAgICAgICAgICBsdW5hclBoYXNlOiBhc3Ryb2xvZ2ljYWxTdGF0ZUZvclJlY29tbWVuZGF0aW9ucy5sdW5hclBoYXNlLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IGN1cnJlbnRNb21lbnRFbGVtZW50YWxQcm9maWxlLFxuICAgICAgICAgICAgICAgIHBsYW5ldGFyeVBvc2l0aW9uczogYXN0cm9sb2dpY2FsU3RhdGVGb3JSZWNvbW1lbmRhdGlvbnMucGxhbmV0YXJ5UG9zaXRpb25zXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJvcmRlci10IHB0LTRcIlxuICAgICAgICAgICAgICBzaG93RGV0YWlsZWRNZXRyaWNzPXt0cnVlfVxuICAgICAgICAgICAgICBhdXRvQW5hbHl6ZT17dHJ1ZX1cbiAgICAgICAgICAgICAgb25BbmFseXNpc0NvbXBsZXRlPXsoYW5hbHlzaXMpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRFbnRlcnByaXNlSW50ZWxsaWdlbmNlQW5hbHlzaXMoYW5hbHlzaXMpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdFbnRlcnByaXNlIEludGVsbGlnZW5jZSBBbmFseXNpcyBjb21wbGV0ZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgb3ZlcmFsbFNjb3JlOiBhbmFseXNpcy5vdmVyYWxsU2NvcmUsXG4gICAgICAgICAgICAgICAgICBzeXN0ZW1IZWFsdGg6IGFuYWx5c2lzLnN5c3RlbUhlYWx0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogQ29tcGFjdCBQZXJmb3JtYW5jZSBJbmRpY2F0b3IgKGFsd2F5cyB2aXNpYmxlKSAqL31cbiAgICAgICAgeyFzaG93UGVyZm9ybWFuY2VBbmFseXRpY3MgJiYgYW5hbHl0aWNzU3RhdGUubWV0cmljcyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIHRleHQtZ3JheS01MDAgYmctZ3JheS01MCBweC0zIHB5LTIgcm91bmRlZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICA8WmFwIHNpemU9ezEyfSBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNTAwXCIgLz5cbiAgICAgICAgICAgICAgICA8c3Bhbj5Mb2FkOiB7YW5hbHl0aWNzU3RhdGUubWV0cmljcy5sb2FkVGltZS50b0ZpeGVkKDApfW1zPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj5DYWNoZTogeyhhbmFseXRpY3NTdGF0ZS5jYWNoZVN0YXRzLmhpdFJhdGUgKiAxMDApLnRvRml4ZWQoMCl9JTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0xXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+U2NvcmU6IHthbmFseXRpY3NTdGF0ZS5wZXJmb3JtYW5jZVRyZW5kcy5wZXJmb3JtYW5jZVNjb3JlLnRvRml4ZWQoMCl9LzEwMDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1BlcmZvcm1hbmNlQW5hbHl0aWNzKHRydWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNjAwIGhvdmVyOnRleHQtYmx1ZS04MDAgdW5kZXJsaW5lXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgVmlldyBEZXRhaWxzXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogQWR2YW5jZWQgU2VhcmNoIGFuZCBGaWx0ZXJpbmcgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICAgIDxBZHZhbmNlZFNlYXJjaEZpbHRlcnNcbiAgICAgICAgICAgIG9uRmlsdGVyc0NoYW5nZT17aGFuZGxlRmlsdGVyc0NoYW5nZX1cbiAgICAgICAgICAgIG9uU2VhcmNoPXtoYW5kbGVTZWFyY2h9XG4gICAgICAgICAgICBhdmFpbGFibGVDdWlzaW5lcz17b3JpZ2luYWxDdWlzaW5lcy5tYXAoYyA9PiBjLm5hbWUudG9Mb3dlckNhc2UoKSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtYi00XCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBTZWFyY2ggSW50ZW50IERpc3BsYXkgKi99XG4gICAgICAgICAge3NlYXJjaEludGVudCAmJiBzZWFyY2hJbnRlbnQuY29uZmlkZW5jZSA+IDAuNSAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgcC0zIGJnLWJsdWUtNTAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIG1iLTJcIj5cbiAgICAgICAgICAgICAgICA8U3BhcmtsZXMgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cInRleHQtYmx1ZS01MDBcIiAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ibHVlLTcwMFwiPlNlYXJjaCBJbnRlbGxpZ2VuY2U8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtNjAwIHB4LTIgcHktMSByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChzZWFyY2hJbnRlbnQuY29uZmlkZW5jZSAqIDEwMCl9JSBjb25maWRlbmNlXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge3NlYXJjaEludGVudC5zdWdnZXN0aW9ucy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5TdWdnZXN0aW9uczogPC9zcGFuPlxuICAgICAgICAgICAgICAgICAge3NlYXJjaEludGVudC5zdWdnZXN0aW9ucy5zbGljZSgwLCAzKS5qb2luKCcsICcpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogUmVzdWx0cyBTdW1tYXJ5ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTQgdGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgU2hvd2luZyB7ZmlsdGVyZWRDdWlzaW5lcy5sZW5ndGh9IG9mIHtvcmlnaW5hbEN1aXNpbmVzLmxlbmd0aH0gY3Vpc2luZXNcbiAgICAgICAgICAgICAge3NlYXJjaEZpbHRlcnMucXVlcnkgJiYgYCBmb3IgXCIke3NlYXJjaEZpbHRlcnMucXVlcnl9XCJgfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAge2ZpbHRlcmVkQ3Vpc2luZXMubGVuZ3RoICE9PSBvcmlnaW5hbEN1aXNpbmVzLmxlbmd0aCAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRTZWFyY2hGaWx0ZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6ICcnLFxuICAgICAgICAgICAgICAgICAgICBkaWV0YXJ5UmVzdHJpY3Rpb25zOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY29va2luZ1RpbWU6IHsgbWluOiAwLCBtYXg6IDQ4MCB9LFxuICAgICAgICAgICAgICAgICAgICBjdWlzaW5lVHlwZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBtZWFsVHlwZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBzcGljaW5lc3M6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50czogW11cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgc2V0RmlsdGVyZWRDdWlzaW5lcyhvcmlnaW5hbEN1aXNpbmVzKTtcbiAgICAgICAgICAgICAgICAgIHNldFNlYXJjaEludGVudChudWxsKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDAgaG92ZXI6dGV4dC1ibHVlLTgwMCB1bmRlcmxpbmVcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ2xlYXIgZmlsdGVyc1xuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBDdWlzaW5lIEdyaWQgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyBnYXAtMyBtYi00XCI+XG4gICAgICAgICAge2ZpbHRlcmVkQ3Vpc2luZXMubWFwKGN1aXNpbmUgPT4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBrZXk9e2N1aXNpbmUuaWR9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHJvdW5kZWQgYm9yZGVyIHAtMyBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgaG92ZXI6c2hhZG93LW1kICR7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRDdWlzaW5lID09PSBjdWlzaW5lLmlkID8gJ2JvcmRlci1ibHVlLTQwMCBiZy1ibHVlLTUwJyA6ICdib3JkZXItZ3JheS0yMDAnXG4gICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVDdWlzaW5lU2VsZWN0KGN1aXNpbmUuaWQpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0yXCI+XG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtc21cIj57Y3Vpc2luZS5uYW1lfTwvaDM+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgdGV4dC14cyBweC0yIHB5LTEgcm91bmRlZCAke2dldE1hdGNoU2NvcmVDbGFzcyhnZXRTYWZlU2NvcmUoY3Vpc2luZS5zY29yZSkpfWB9PlxuICAgICAgICAgICAgICAgICAge2N1aXNpbmUubWF0Y2hQZXJjZW50YWdlfSVcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDAgbWItMiBsaW5lLWNsYW1wLTJcIiB0aXRsZT17Y3Vpc2luZS5kZXNjcmlwdGlvbn0+XG4gICAgICAgICAgICAgICAge2N1aXNpbmUuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgPFNwYXJrbGVzIHNpemU9ezE0fSBjbGFzc05hbWU9XCJ0ZXh0LXllbGxvdy01MDBcIiAvPlxuICAgICAgICAgICAgICAgIDxzcGFuPntjdWlzaW5lLnJlYXNvbmluZz8uWzBdfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtjdWlzaW5lLnJlYXNvbmluZz8uWzFdICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxuICAgICAgICAgICAgICAgICAge2N1aXNpbmUucmVhc29uaW5nWzFdLmluY2x1ZGVzKCdGYXZvcmFibGUnKSA/IFxuICAgICAgICAgICAgICAgICAgICA8U3RhciBzaXplPXsxNH0gY2xhc3NOYW1lPVwidGV4dC1ncmVlbi01MDBcIiAvPiA6IFxuICAgICAgICAgICAgICAgICAgICA8TW9vbiBzaXplPXsxNH0gY2xhc3NOYW1lPVwidGV4dC1ibHVlLTUwMFwiIC8+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICA8c3Bhbj57Y3Vpc2luZS5yZWFzb25pbmdbMV19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBFbmhhbmNlZCBTYXVjZSBSZWNvbW1lbmRhdGlvbnMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNiBwdC00IGJvcmRlci10IGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgIDxTYXVjZVJlY29tbWVuZGF0aW9uc1xuICAgICAgICAgICAgc2F1Y2VzPXtzYXVjZVJlY29tbWVuZGF0aW9uc31cbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlPXtjdXJyZW50TW9tZW50RWxlbWVudGFsUHJvZmlsZX1cbiAgICAgICAgICAgIGN1cnJlbnRab2RpYWM9e2N1cnJlbnRab2RpYWN9XG4gICAgICAgICAgICBsdW5hclBoYXNlPXtsdW5hclBoYXNlfVxuICAgICAgICAgICAgY3VycmVudFNlYXNvbj17Z2V0Q3VycmVudFNlYXNvbigpfVxuICAgICAgICAgICAgbWF4RGlzcGxheWVkPXs2fVxuICAgICAgICAgICAgb25TYXVjZVNlbGVjdD17KHNhdWNlKSA9PiB7XG4gICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdTYXVjZSBzZWxlY3RlZDonLCBzYXVjZS5uYW1lKTtcbiAgICAgICAgICAgICAgLy8gRnV0dXJlOiBBZGQgc2F1Y2Ugc2VsZWN0aW9uIGxvZ2ljIGhlcmVcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFNlbGVjdGVkIEN1aXNpbmUgRGV0YWlscyAqL31cbiAgICAgICAge3NlbGVjdGVkQ3Vpc2luZURhdGEgJiYgc2hvd0N1aXNpbmVEZXRhaWxzICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcHQtMyBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTJcIj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1sZ1wiPntzZWxlY3RlZEN1aXNpbmVEYXRhLm5hbWV9IEN1aXNpbmU8L2gzPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2B0ZXh0LXhzIHB4LTIgcHktMSByb3VuZGVkICR7Z2V0TWF0Y2hTY29yZUNsYXNzKGdldFNhZmVTY29yZShzZWxlY3RlZEN1aXNpbmVEYXRhLnNjb3JlKSl9YH0+XG4gICAgICAgICAgICAgICAge3NlbGVjdGVkQ3Vpc2luZURhdGEubWF0Y2hQZXJjZW50YWdlfSUgbWF0Y2hcbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgbWItM1wiPntzZWxlY3RlZEN1aXNpbmVEYXRhLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00IG1iLTRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTUwIHAtMyByb3VuZGVkIGJvcmRlclwiPlxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTJcIj5FbGVtZW50YWwgUHJvcGVydGllczwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICB7T2JqZWN0LmVudHJpZXMoc2VsZWN0ZWRDdWlzaW5lRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzIHx8IHt9KS5tYXAoKFtlbGVtZW50LCB2YWx1ZV0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2VsZW1lbnR9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc21cIj57ZWxlbWVudH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIwIGJnLWdyYXktMjAwIHJvdW5kZWQtZnVsbCBoLTIuNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC0yLjUgcm91bmRlZC1mdWxsIGJnLWJsdWUtNTAwXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHtNYXRoLnJvdW5kKE51bWJlcih2YWx1ZSkgKiAxMDApfSVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktNTAgcC0zIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbWItMlwiPlJlY29tbWVuZGF0aW9uIFJlYXNvbmluZzwvaDQ+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cImxpc3QtZGlzYyBwbC00IHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAge3NlbGVjdGVkQ3Vpc2luZURhdGEucmVhc29uaW5nPy5tYXAoKHJlYXNvbiwgaSkgPT4gPGxpIGtleT17aX0+e3JlYXNvbn08L2xpPil9XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIE1vbmljYS9LYWxjaG0gVGhlcm1vZHluYW1pYyBNZXRyaWNzICovfVxuICAgICAgICAgICAgeyhzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkubW9uaWNhQ29tcGF0aWJpbGl0eSAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwIHRvLWJsdWUtNTAgcC00IHJvdW5kZWQtbGcgYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbWItMyBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPFNwYXJrbGVzIHNpemU9ezE2fSBjbGFzc05hbWU9XCJ0ZXh0LXB1cnBsZS01MDAgbXItMlwiIC8+XG4gICAgICAgICAgICAgICAgICBBbGNoZW1pY2FsIENvbXBhdGliaWxpdHkgQW5hbHlzaXNcbiAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBtZDpncmlkLWNvbHMtNCBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXB1cnBsZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZCgoKHNlbGVjdGVkQ3Vpc2luZURhdGEgYXMgYW55KS5tb25pY2FDb21wYXRpYmlsaXR5IHx8IDApICogMTAwKX0lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPk1vbmljYSBDb21wYXRpYmlsaXR5PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ibHVlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIHsoKHNlbGVjdGVkQ3Vpc2luZURhdGEgYXMgYW55KS51c2VyTW9uaWNhIHx8IDEuMCkudG9GaXhlZCgyKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+WW91ciBNb25pY2EgQ29uc3RhbnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyZWVuLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIHsoKHNlbGVjdGVkQ3Vpc2luZURhdGEgYXMgYW55KS5jdWlzaW5lTW9uaWNhIHx8IDEuMCkudG9GaXhlZCgyKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+Q3Vpc2luZSBNb25pY2E8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LW9yYW5nZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7TWF0aC5hYnMoKChzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkudXNlck1vbmljYSB8fCAxLjApIC0gKChzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkuY3Vpc2luZU1vbmljYSB8fCAxLjApKSA8IDAuNSA/ICdIaWdoJyA6ICdNZWRpdW0nfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5IYXJtb255IExldmVsPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgICBNb25pY2EgY29uc3RhbnRzIG1lYXN1cmUgYWxjaGVtaWNhbCB0cmFuc2Zvcm1hdGlvbiBwb3RlbnRpYWwuIENsb3NlciB2YWx1ZXMgaW5kaWNhdGUgYmV0dGVyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIEVuaGFuY2VkIFRoZXJtb2R5bmFtaWMgTWV0cmljcyBEaXNwbGF5ICovfVxuICAgICAgICAgICAgeyhzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkuZW5oYW5jZWRBbmFseXNpcyAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBiZy1ncmFkaWVudC10by1yIGZyb20tZ3JlZW4tNTAgdG8tdGVhbC01MCBwLTQgcm91bmRlZC1sZyBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0zIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8U3RhciBzaXplPXsxNn0gY2xhc3NOYW1lPVwidGV4dC1ncmVlbi01MDAgbXItMlwiIC8+XG4gICAgICAgICAgICAgICAgICBFbmhhbmNlZCBUaGVybW9keW5hbWljIEFuYWx5c2lzXG4gICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgbWQ6Z3JpZC1jb2xzLTQgZ2FwLTMgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyZWVuLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtNYXRoLnJvdW5kKCgoc2VsZWN0ZWRDdWlzaW5lRGF0YSBhcyBhbnkpLnRoZXJtb2R5bmFtaWNIYXJtb255IHx8IDApICogMTAwKX0lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPlRoZXJtb2R5bmFtaWMgSGFybW9ueTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtdGVhbC02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZCgoKHNlbGVjdGVkQ3Vpc2luZURhdGEgYXMgYW55KS5hbGNoZW1pY2FsQmFsYW5jZSB8fCAwKSAqIDEwMCl9JVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5BbGNoZW1pY2FsIEJhbGFuY2U8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgeygoc2VsZWN0ZWRDdWlzaW5lRGF0YSBhcyBhbnkpLmVuaGFuY2VkQW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3Mua2FsY2htIHx8IDEuMCkudG9GaXhlZCgyKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+S2FsY2htIENvbnN0YW50PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1wdXJwbGUtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgeygoc2VsZWN0ZWRDdWlzaW5lRGF0YSBhcyBhbnkpLmVuaGFuY2VkQW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3MuZ3JlZ3NFbmVyZ3kgfHwgMCkudG9GaXhlZCgyKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+R3JlZydzIEVuZXJneTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkIGJvcmRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0yXCI+SGVhdCBFZmZpY2llbmN5PC9oNT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+eygoc2VsZWN0ZWRDdWlzaW5lRGF0YSBhcyBhbnkpLmVuaGFuY2VkQW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3MuaGVhdCB8fCAwKS50b0ZpeGVkKDMpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTYgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC0yIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHtNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsICgoc2VsZWN0ZWRDdWlzaW5lRGF0YSBhcyBhbnkpLmVuaGFuY2VkQW5hbHlzaXMudGhlcm1vZHluYW1pY01ldHJpY3MuaGVhdCB8fCAwKSAqIDEwMCkpfSVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC0zIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTJcIj5FbnRyb3B5IEJhbGFuY2U8L2g1PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc21cIj57KChzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkuZW5oYW5jZWRBbmFseXNpcy50aGVybW9keW5hbWljTWV0cmljcy5lbnRyb3B5IHx8IDApLnRvRml4ZWQoMyl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xNiBiZy1ncmF5LTIwMCByb3VuZGVkLWZ1bGwgaC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTIgcm91bmRlZC1mdWxsIGJnLXllbGxvdy01MDBcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke01hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgKChzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkuZW5oYW5jZWRBbmFseXNpcy50aGVybW9keW5hbWljTWV0cmljcy5lbnRyb3B5IHx8IDApICogNTApKX0lYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkIGJvcmRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0yXCI+UmVhY3Rpdml0eTwvaDU+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbVwiPnsoKHNlbGVjdGVkQ3Vpc2luZURhdGEgYXMgYW55KS5lbmhhbmNlZEFuYWx5c2lzLnRoZXJtb2R5bmFtaWNNZXRyaWNzLnJlYWN0aXZpdHkgfHwgMCkudG9GaXhlZCgzKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE2IGJnLWdyYXktMjAwIHJvdW5kZWQtZnVsbCBoLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMiByb3VuZGVkLWZ1bGwgYmctb3JhbmdlLTUwMFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7TWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCAoKHNlbGVjdGVkQ3Vpc2luZURhdGEgYXMgYW55KS5lbmhhbmNlZEFuYWx5c2lzLnRoZXJtb2R5bmFtaWNNZXRyaWNzLnJlYWN0aXZpdHkgfHwgMCkgKiA1MCkpfSVgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAgRW5oYW5jZWQgdGhlcm1vZHluYW1pYyBhbmFseXNpcyBpbnRlZ3JhdGVzIGhlYXQgZWZmaWNpZW5jeSwgZW50cm9weSBiYWxhbmNlLCBhbmQgcmVhY3Rpdml0eSBmb3Igb3B0aW1hbCBjdWxpbmFyeSByZWNvbW1lbmRhdGlvbnMuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIEFsY2hlbWljYWwgUHJvcGVydGllcyBEaXNwbGF5ICovfVxuICAgICAgICAgICAgeyhzZWxlY3RlZEN1aXNpbmVEYXRhIGFzIGFueSkuZW5oYW5jZWRBbmFseXNpcz8uYWxjaGVtaWNhbFByb3BlcnRpZXMgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgYmctZ3JhZGllbnQtdG8tciBmcm9tLXllbGxvdy01MCB0by1hbWJlci01MCBwLTQgcm91bmRlZC1sZyBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0zIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8U3BhcmtsZXMgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cInRleHQteWVsbG93LTUwMCBtci0yXCIgLz5cbiAgICAgICAgICAgICAgICAgIEFsY2hlbWljYWwgUHJvcGVydGllcyBCYWxhbmNlXG4gICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgbWQ6Z3JpZC1jb2xzLTQgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcygoc2VsZWN0ZWRDdWlzaW5lRGF0YSBhcyBhbnkpLmVuaGFuY2VkQW5hbHlzaXMuYWxjaGVtaWNhbFByb3BlcnRpZXMpLm1hcCgoW3Byb3BlcnR5LCB2YWx1ZV0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3Byb3BlcnR5fSBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtYW1iZXItNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7KE51bWJlcih2YWx1ZSkgfHwgMCkudG9GaXhlZCgyKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPntwcm9wZXJ0eX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBiZy1ncmF5LTIwMCByb3VuZGVkLWZ1bGwgaC0yIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMiByb3VuZGVkLWZ1bGwgYmctYW1iZXItNTAwXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHtNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIChOdW1iZXIodmFsdWUpIHx8IDApICogMTAwKSl9JWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgICBBbGNoZW1pY2FsIGJhbGFuY2Ugb3B0aW1pemF0aW9uIGNvbnRyaWJ1dGVzIDEwJSB3ZWlnaHQgdG8gdGhlIGVuaGFuY2VkIDctZmFjdG9yIHNjb3JpbmcgYWxnb3JpdGhtLlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBDdWx0dXJhbCBBbmFseXRpY3MgYW5kIEludGVsbGlnZW5jZSBTZWN0aW9uICovfVxuICAgICAgICAgICAge2N1bHR1cmFsQW5hbHl0aWNzW3NlbGVjdGVkQ3Vpc2luZURhdGEuaWRdICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IGJnLWdyYWRpZW50LXRvLXIgZnJvbS1hbWJlci01MCB0by1vcmFuZ2UtNTAgcC00IHJvdW5kZWQtbGcgYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPFN0YXIgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cInRleHQtYW1iZXItNTAwIG1yLTJcIiAvPlxuICAgICAgICAgICAgICAgICAgICBDdWx0dXJhbCBBbmFseXRpY3MgJiBJbnRlbGxpZ2VuY2VcbiAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dDdWx0dXJhbEFuYWx5dGljcyghc2hvd0N1bHR1cmFsQW5hbHl0aWNzKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyBweC0yIHB5LTEgYmctYW1iZXItMTAwIGhvdmVyOmJnLWFtYmVyLTIwMCByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3Nob3dDdWx0dXJhbEFuYWx5dGljcyA/ICdIaWRlIERldGFpbHMnIDogJ1Nob3cgRGV0YWlscyd9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgbWQ6Z3JpZC1jb2xzLTQgZ2FwLTMgbWItM1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWFtYmVyLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtNYXRoLnJvdW5kKGN1bHR1cmFsQW5hbHl0aWNzW3NlbGVjdGVkQ3Vpc2luZURhdGEuaWRdLmN1bHR1cmFsU3luZXJneSAqIDEwMCl9JVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5DdWx0dXJhbCBTeW5lcmd5PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1vcmFuZ2UtNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAge01hdGgucm91bmQoY3VsdHVyYWxBbmFseXRpY3Nbc2VsZWN0ZWRDdWlzaW5lRGF0YS5pZF0uY3VsdHVyYWxDb21wYXRpYmlsaXR5ICogMTAwKX0lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPkFzdHJvbG9naWNhbCBDb21wYXRpYmlsaXR5PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC15ZWxsb3ctNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAge01hdGgucm91bmQoY3VsdHVyYWxBbmFseXRpY3Nbc2VsZWN0ZWRDdWlzaW5lRGF0YS5pZF0uZnVzaW9uUG90ZW50aWFsICogMTAwKX0lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPkZ1c2lvbiBQb3RlbnRpYWw8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXJlZC02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChjdWx0dXJhbEFuYWx5dGljc1tzZWxlY3RlZEN1aXNpbmVEYXRhLmlkXS5jdWx0dXJhbERpdmVyc2l0eVNjb3JlICogMTAwKX0lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPkN1bHR1cmFsIERpdmVyc2l0eTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge3Nob3dDdWx0dXJhbEFuYWx5dGljcyAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMyBtdC00XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC0zIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbWItMlwiPkhpc3RvcmljYWwgU2lnbmlmaWNhbmNlPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS03MDBcIj57Y3VsdHVyYWxBbmFseXRpY3Nbc2VsZWN0ZWRDdWlzaW5lRGF0YS5pZF0uaGlzdG9yaWNhbFNpZ25pZmljYW5jZX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTMgcm91bmRlZCBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0yXCI+Q3VsdHVyYWwgQ29udGV4dDwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNzAwXCI+e2N1bHR1cmFsQW5hbHl0aWNzW3NlbGVjdGVkQ3Vpc2luZURhdGEuaWRdLmN1bHR1cmFsQ29udGV4dH08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTMgcm91bmRlZCBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTJcIj5UcmFkaXRpb25hbCBQcmluY2lwbGVzPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJsaXN0LWRpc2MgcGwtNCB0ZXh0LXhzIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2N1bHR1cmFsQW5hbHl0aWNzW3NlbGVjdGVkQ3Vpc2luZURhdGEuaWRdLnRyYWRpdGlvbmFsUHJpbmNpcGxlcy5zbGljZSgwLCAzKS5tYXAoKHByaW5jaXBsZSwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2l9PntwcmluY2lwbGV9PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC0zIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0yXCI+TW9kZXJuIEFkYXB0YXRpb25zPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJsaXN0LWRpc2MgcGwtNCB0ZXh0LXhzIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2N1bHR1cmFsQW5hbHl0aWNzW3NlbGVjdGVkQ3Vpc2luZURhdGEuaWRdLm1vZGVybkFkYXB0YXRpb25zLnNsaWNlKDAsIDMpLm1hcCgoYWRhcHRhdGlvbiwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2l9PnthZGFwdGF0aW9ufTwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyB0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICAgIEN1bHR1cmFsIHN5bmVyZ3kgY29udHJpYnV0ZXMgNSUgd2VpZ2h0IHRvIHRoZSA3LWZhY3RvciByZWNvbW1lbmRhdGlvbiBhbGdvcml0aG0uXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIEZ1c2lvbiBDdWlzaW5lIFJlY29tbWVuZGF0aW9ucyAqL31cbiAgICAgICAgICAgIHtmdXNpb25SZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCBiZy1ncmFkaWVudC10by1yIGZyb20taW5kaWdvLTUwIHRvLXB1cnBsZS01MCBwLTQgcm91bmRlZC1sZyBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8U3BhcmtsZXMgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cInRleHQtaW5kaWdvLTUwMCBtci0yXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgRnVzaW9uIEN1aXNpbmUgUmVjb21tZW5kYXRpb25zXG4gICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93RnVzaW9uUmVjb21tZW5kYXRpb25zKCFzaG93RnVzaW9uUmVjb21tZW5kYXRpb25zKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyBweC0yIHB5LTEgYmctaW5kaWdvLTEwMCBob3ZlcjpiZy1pbmRpZ28tMjAwIHJvdW5kZWQgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7c2hvd0Z1c2lvblJlY29tbWVuZGF0aW9ucyA/ICdIaWRlIEZ1c2lvbicgOiAnU2hvdyBGdXNpb24nfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge3Nob3dGdXNpb25SZWNvbW1lbmRhdGlvbnMgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAge2Z1c2lvblJlY29tbWVuZGF0aW9ucy5tYXAoKGZ1c2lvbiwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkIGJvcmRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPntmdXNpb24ubmFtZX08L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBweC0yIHB5LTEgYmctaW5kaWdvLTEwMCByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChmdXNpb24uZnVzaW9uU2NvcmUgKiAxMDApfSUgRnVzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgcHgtMiBweS0xIGJnLXB1cnBsZS0xMDAgcm91bmRlZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge01hdGgucm91bmQoZnVzaW9uLmN1bHR1cmFsSGFybW9ueSAqIDEwMCl9JSBIYXJtb255XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDAgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBCbGVuZCBvZiB7ZnVzaW9uLnBhcmVudEN1aXNpbmVzLmpvaW4oJyBhbmQgJyl9IGN1aXNpbmVzXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aDYgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSBtYi0xXCI+UmVjb21tZW5kZWQgRGlzaGVzOjwvaDY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZnVzaW9uLnJlY29tbWVuZGVkRGlzaGVzLm1hcCgoZGlzaCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtpfSBjbGFzc05hbWU9XCJ0ZXh0LXhzIHB4LTIgcHktMSBiZy1ncmF5LTEwMCByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkaXNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57ZnVzaW9uLmN1bHR1cmFsTm90ZXNbMF19PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgICBGdXNpb24gcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGN1bHR1cmFsIGNvbXBhdGliaWxpdHkgYW5kIGN1bGluYXJ5IGhhcm1vbnkgYW5hbHlzaXMuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIEVuaGFuY2VkIFJlY2lwZSBSZWNvbW1lbmRhdGlvbnMgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTRcIj5cbiAgICAgICAgICAgICAgPFJlY2lwZVJlY29tbWVuZGF0aW9uc1xuICAgICAgICAgICAgICAgIHJlY2lwZXM9e21hdGNoaW5nUmVjaXBlc31cbiAgICAgICAgICAgICAgICBjdWlzaW5lTmFtZT17c2VsZWN0ZWRDdWlzaW5lRGF0YS5uYW1lfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlPXtjdXJyZW50TW9tZW50RWxlbWVudGFsUHJvZmlsZX1cbiAgICAgICAgICAgICAgICBtYXhEaXNwbGF5ZWQ9ezZ9XG4gICAgICAgICAgICAgICAgb25SZWNpcGVTZWxlY3Q9eyhyZWNpcGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdSZWNpcGUgc2VsZWN0ZWQ6JywgcmVjaXBlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRSZWNpcGUocmVjaXBlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBSZWNpcGUtU3BlY2lmaWMgU2F1Y2UgUmVjb21tZW5kYXRpb25zICovfVxuICAgICAgICAgICAge3NlbGVjdGVkUmVjaXBlICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02IHB0LTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgICAgPFNhdWNlUmVjb21tZW5kYXRpb25zXG4gICAgICAgICAgICAgICAgICBzYXVjZXM9e3NhdWNlUmVjb21tZW5kYXRpb25zfVxuICAgICAgICAgICAgICAgICAgY3Vpc2luZU5hbWU9e3NlbGVjdGVkQ3Vpc2luZURhdGEubmFtZX1cbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUmVjaXBlPXtzZWxlY3RlZFJlY2lwZX1cbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50YWxQcm9maWxlPXtjdXJyZW50TW9tZW50RWxlbWVudGFsUHJvZmlsZX1cbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRab2RpYWM9e2N1cnJlbnRab2RpYWN9XG4gICAgICAgICAgICAgICAgICBsdW5hclBoYXNlPXtsdW5hclBoYXNlfVxuICAgICAgICAgICAgICAgICAgY3VycmVudFNlYXNvbj17Z2V0Q3VycmVudFNlYXNvbigpfVxuICAgICAgICAgICAgICAgICAgbWF4RGlzcGxheWVkPXs0fVxuICAgICAgICAgICAgICAgICAgb25TYXVjZVNlbGVjdD17KHNhdWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdTYXVjZSBzZWxlY3RlZCBmb3IgcmVjaXBlOicsIHNhdWNlLm5hbWUsICd3aXRoJywgc2VsZWN0ZWRSZWNpcGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZ1dHVyZTogQWRkIHNhdWNlLXJlY2lwZSBwYWlyaW5nIGxvZ2ljIGhlcmVcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9DdWlzaW5lUmVjb21tZW5kZXJFcnJvckJvdW5kYXJ5PlxuICApO1xufSJdLCJ2ZXJzaW9uIjozfQ==