4b59e072f5ce77f40ca70ea2584d2d6f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateSimilarityScore = exports.findRelatedRecipes = exports.calculateCuisineSimilarity = exports.getCuisineElementalMatch = exports.getRecipesForCuisineMatch = exports.getCuisineProfile = exports.getCuisineMatchScore = exports.getRelatedCuisines = exports.getFusionSuggestions = exports.getRecommendedCuisines = exports.calculateCuisineFlavorMatch = exports.cuisineFlavorProfiles = void 0;
exports.cuisineFlavorProfiles = {
    // Mediterranean Cuisines
    greek: {
        id: 'greek',
        name: 'Greek',
        description: 'Fresh, herb-forward cuisine centered around olive oil, vegetables, and seafood.',
        flavorProfiles: {
            spicy: 0.3,
            sweet: 0.4,
            sour: 0.5,
            bitter: 0.4,
            salty: 0.6,
            umami: 0.5,
        },
        elementalAlignment: {
            Fire: 0.3,
            Earth: 0.3,
            Water: 0.3,
            Air: 0.1,
        },
        signatureTechniques: ['grilling', 'braising', 'marinating'],
        signatureIngredients: [
            'olive oil',
            'tomatoes',
            'lemons',
            'herbs',
            'garlic',
        ],
        traditionalMealPatterns: ['small plates', 'family-style', 'late dining'],
        planetaryResonance: ['Sun', 'Mercury', 'Neptune'],
        seasonalPreference: ['summer', 'spring'],
        dietarySuitability: ['vegetarian', 'pescatarian', 'Mediterranean'],
    },
    french: {
        id: 'french',
        name: 'French',
        description: 'Sophisticated cuisine built on rich foundations and precise techniques.',
        flavorProfiles: {
            spicy: 0.1,
            sweet: 0.5,
            sour: 0.4,
            bitter: 0.3,
            salty: 0.5,
            umami: 0.8,
        },
        elementalAlignment: {
            Earth: 0.55,
            Water: 0.25,
            Fire: 0.1,
            Air: 0.1,
        },
        signatureTechniques: ['sautéing', 'sous vide', 'flambéing', 'reduction'],
        signatureIngredients: [
            'butter',
            'wine',
            'cream',
            'shallots',
            'herbs de provence',
        ],
        traditionalMealPatterns: ['course-based dining', 'wine pairings', 'sauces'],
        planetaryResonance: ['Venus', 'Moon', 'Jupiter'],
        seasonalPreference: ['all'],
        regionalVariants: ['provencal', 'alsatian', 'normandy'],
        dietarySuitability: ['vegetarian-adaptable', 'dairy-rich'],
    },
    italian: {
        id: 'italian',
        name: 'Italian',
        description: 'Ingredient-focused cuisine celebrating regional specialties and simplicity.',
        flavorProfiles: {
            spicy: 0.3,
            sweet: 0.4,
            sour: 0.5,
            bitter: 0.3,
            salty: 0.6,
            umami: 0.7,
        },
        elementalAlignment: {
            Earth: 0.5,
            Fire: 0.3,
            Water: 0.1,
            Air: 0.1,
        },
        signatureTechniques: [
            'al dente pasta cooking',
            'slow simmering',
            'grilling',
        ],
        signatureIngredients: [
            'tomatoes',
            'olive oil',
            'basil',
            'parmesan',
            'garlic',
        ],
        traditionalMealPatterns: ['antipasti', 'primi', 'secondi', 'family-style'],
        planetaryResonance: ['Jupiter', 'Venus', 'Sun'],
        seasonalPreference: ['summer', 'fall'],
        regionalVariants: ['sicilian', 'tuscan', 'neapolitan'],
        dietarySuitability: ['vegetarian-friendly', 'Mediterranean'],
    },
    // Asian Cuisines
    japanese: {
        id: 'japanese',
        name: 'Japanese',
        description: 'Delicate cuisine emphasizing pure flavors, seasonality, and presentation.',
        flavorProfiles: {
            spicy: 0.2,
            sweet: 0.3,
            sour: 0.4,
            bitter: 0.3,
            salty: 0.6,
            umami: 0.9,
        },
        elementalAlignment: {
            Water: 0.65,
            Earth: 0.2,
            Air: 0.1,
            Fire: 0.05,
        },
        signatureTechniques: [
            'raw preparation',
            'steaming',
            'quick grilling',
            'fermentation',
        ],
        signatureIngredients: ['dashi', 'soy sauce', 'mirin', 'rice', 'seaweed'],
        traditionalMealPatterns: [
            'seasonal focus',
            'multiple small dishes',
            'ichiju-sansai',
        ],
        planetaryResonance: ['Moon', 'Mercury', 'Neptune'],
        seasonalPreference: ['spring', 'winter'],
        regionalVariants: ['osaka', 'tokyo', 'kyoto', 'okinawan'],
        dietarySuitability: ['pescatarian', 'low-fat', 'gluten-free-options'],
    },
    korean: {
        id: 'korean',
        name: 'Korean',
        description: 'Bold, harmonious cuisine with balanced flavors and textural contrasts.',
        flavorProfiles: {
            spicy: 0.8,
            sweet: 0.4,
            sour: 0.6,
            bitter: 0.2,
            salty: 0.6,
            umami: 0.7,
        },
        elementalAlignment: {
            Fire: 0.5,
            Earth: 0.3,
            Water: 0.1,
            Air: 0.1,
        },
        signatureTechniques: ['fermentation', 'grilling', 'stewing'],
        signatureIngredients: [
            'gochujang',
            'kimchi',
            'sesame',
            'garlic',
            'soy sauce',
        ],
        traditionalMealPatterns: ['banchan', 'communal dining', 'balanced meals'],
        planetaryResonance: ['Mars', 'Pluto', 'Jupiter'],
        seasonalPreference: ['all'],
        dietarySuitability: [
            'vegetarian-options',
            'fermented-foods',
            'gluten-free-adaptable',
        ],
    },
    chinese: {
        id: 'chinese',
        name: 'Chinese',
        description: 'Diverse, ancient cuisine with emphasis on balance, texture, and technique.',
        flavorProfiles: {
            spicy: 0.5,
            sweet: 0.4,
            sour: 0.4,
            bitter: 0.3,
            salty: 0.6,
            umami: 0.7,
        },
        elementalAlignment: {
            Fire: 0.3,
            Earth: 0.4,
            Water: 0.2,
            Air: 0.1,
        },
        signatureTechniques: [
            'stir-frying',
            'steaming',
            'braising',
            'double-frying',
        ],
        signatureIngredients: [
            'soy sauce',
            'rice',
            'ginger',
            'garlic',
            'scallions',
        ],
        traditionalMealPatterns: [
            'balance of flavors and textures',
            'shared dishes',
            'rice-based',
        ],
        planetaryResonance: ['Saturn', 'Jupiter', 'Mercury'],
        seasonalPreference: ['all'],
        regionalVariants: ['sichuanese', 'cantonese', 'shanghainese', 'hunanese'],
        dietarySuitability: ['vegetarian-adaptable', 'diverse-options'],
    },
    sichuanese: {
        id: 'sichuanese',
        name: 'Sichuanese',
        description: 'Complex, layered cuisine known for bold spices and numbing heat.',
        flavorProfiles: {
            spicy: 0.9,
            sweet: 0.3,
            sour: 0.5,
            bitter: 0.4,
            salty: 0.5,
            umami: 0.6,
        },
        elementalAlignment: {
            Fire: 0.7,
            Earth: 0.1,
            Water: 0.1,
            Air: 0.1,
        },
        signatureTechniques: [
            'dry-frying',
            'double-frying',
            'stir-frying',
            'steaming',
        ],
        signatureIngredients: [
            'Sichuan peppercorns',
            'dried chilies',
            'doubanjiang',
            'garlic',
            'ginger',
        ],
        traditionalMealPatterns: [
            'balance of flavors and textures',
            'shared dishes',
        ],
        planetaryResonance: ['Mars', 'Uranus', 'Pluto'],
        seasonalPreference: ['winter', 'fall'],
        parentCuisine: 'chinese',
        dietarySuitability: ['vegetarian-friendly', 'gluten-free-friendly'],
    },
    cantonese: {
        id: 'cantonese',
        name: 'Cantonese',
        description: 'Fresh, delicate cuisine that emphasizes the natural flavors of ingredients.',
        flavorProfiles: {
            spicy: 0.2,
            sweet: 0.6,
            sour: 0.3,
            bitter: 0.3,
            salty: 0.5,
            umami: 0.7,
        },
        elementalAlignment: {
            Water: 0.4,
            Earth: 0.3,
            Fire: 0.2,
            Air: 0.1,
        },
        signatureTechniques: [
            'steaming',
            'stir-frying',
            'roasting',
            'double-boiling',
        ],
        signatureIngredients: [
            'fresh seafood',
            'soy sauce',
            'ginger',
            'scallions',
            'rice wine',
        ],
        traditionalMealPatterns: ['family-style', 'dim sum', 'fresh ingredients'],
        planetaryResonance: ['Moon', 'Venus', 'Mercury'],
        seasonalPreference: ['spring', 'summer'],
        parentCuisine: 'chinese',
        dietarySuitability: ['vegetarian-friendly', 'gluten-free-friendly'],
    },
    // American Cuisines
    mexican: {
        id: 'mexican',
        name: 'Mexican',
        description: 'Diverse cuisine with ancient roots, emphasizing corn, chilies, and herbs.',
        flavorProfiles: {
            spicy: 0.7,
            sweet: 0.3,
            sour: 0.5,
            bitter: 0.2,
            salty: 0.5,
            umami: 0.4,
        },
        elementalAlignment: {
            Fire: 0.55,
            Earth: 0.25,
            Water: 0.1,
            Air: 0.1,
        },
        signatureTechniques: [
            'nixtamalization',
            'grilling',
            'slow cooking',
            'frying',
        ],
        signatureIngredients: ['corn', 'chilies', 'tomatoes', 'avocado', 'lime'],
        traditionalMealPatterns: [
            'multiple elements combined',
            'salsas and condiments',
        ],
        planetaryResonance: ['Sun', 'Mars', 'Jupiter'],
        seasonalPreference: ['summer', 'fall'],
        regionalVariants: ['oaxacan', 'yucatecan', 'northern'],
        dietarySuitability: [
            'vegetarian-adaptable',
            'corn-based',
            'gluten-free-options',
        ],
    },
    thai: {
        id: 'thai',
        name: 'Thai',
        description: 'Vibrant cuisine balancing sweet, sour, salty, and spicy elements.',
        flavorProfiles: {
            spicy: 0.8,
            sweet: 0.7,
            sour: 0.7,
            bitter: 0.3,
            salty: 0.6,
            umami: 0.5,
        },
        elementalAlignment: {
            Fire: 0.4,
            Water: 0.3,
            Earth: 0.2,
            Air: 0.1,
        },
        signatureTechniques: ['stir-frying', 'pounding', 'grilling', 'steaming'],
        signatureIngredients: [
            'lemongrass',
            'fish sauce',
            'chilies',
            'coconut milk',
            'thai basil',
        ],
        traditionalMealPatterns: [
            'balance of flavors',
            'shared dishes',
            'rice-centric',
        ],
        planetaryResonance: ['Venus', 'Mars', 'Sun'],
        seasonalPreference: ['summer', 'spring'],
        regionalVariants: ['northern', 'southern', 'isaan', 'central'],
        dietarySuitability: ['vegetarian-adaptable', 'gluten-free-friendly'],
    },
    indian: {
        id: 'indian',
        name: 'Indian',
        description: 'Rich, diverse cuisine with layered spices and regional distinctions.',
        flavorProfiles: {
            spicy: 0.8,
            sweet: 0.4,
            sour: 0.5,
            bitter: 0.3,
            salty: 0.6,
            umami: 0.4,
        },
        elementalAlignment: {
            Fire: 0.5,
            Earth: 0.3,
            Water: 0.1,
            Air: 0.1,
        },
        signatureTechniques: [
            'tempering',
            'slow cooking',
            'tandoor',
            'curry-making',
        ],
        signatureIngredients: [
            'garam masala',
            'ghee',
            'chilies',
            'turmeric',
            'ginger-garlic',
        ],
        traditionalMealPatterns: [
            'thali',
            'variety of flavors',
            'balanced nutrition',
        ],
        planetaryResonance: ['Mars', 'Sun', 'Jupiter'],
        seasonalPreference: ['all'],
        regionalVariants: ['punjabi', 'bengali', 'south indian', 'gujarati'],
        dietarySuitability: ['vegetarian', 'vegan-options', 'gluten-free-friendly'],
    },
    // More cuisines as needed...
};
/**
 * Calculate match between recipe's flavor profile and cuisine's expected profile
 */
const calculateCuisineFlavorMatch = (recipeFlavorProfile, cuisineName) => {
    // Validate inputs
    if (!recipeFlavorProfile || typeof recipeFlavorProfile !== 'object') {
        // console.error(`Invalid recipe flavor profile provided for cuisine match calculation`);
        return 0.5;
    }
    const cuisineProfile = getCuisineProfile(cuisineName);
    if (!cuisineProfile) {
        // console.error(`Cuisine profile not found for: ${cuisineName}`);
        return 0.5;
    }
    // Ensure all flavor values are valid numbers
    const validatedRecipeProfile = {};
    for (const [flavor, value] of Object.entries(recipeFlavorProfile)) {
        if (typeof value === 'number' && !isNaN(value)) {
            validatedRecipeProfile[flavor] = value;
        }
        else {
            // console.error(`Invalid ${flavor} value in recipe flavor profile: ${value}`);
            validatedRecipeProfile[flavor] = 0;
        }
    }
    let matchScore = 0;
    let totalWeight = 0;
    // Compare recipe flavors to cuisine's typical flavor profile - ensuring valid values
    for (const [flavor, recipeValue] of Object.entries(validatedRecipeProfile)) {
        const cuisineValue = cuisineProfile.flavorProfiles[flavor] || 0;
        // Calculate similarity with a more nuanced and effective formula
        const difference = Math.abs(recipeValue - cuisineValue);
        // Use an exponential similarity formula for sharper differentiation
        const similarity = Math.pow(1 - difference, 2.5);
        // More sophisticated weighting system based on cuisine's signature flavors
        let weight = 1.0;
        // Higher weights for dominant flavors in the cuisine
        if (cuisineValue > 0.8)
            weight = 8.0;
        else if (cuisineValue > 0.6)
            weight = 6.0;
        else if (cuisineValue > 0.4)
            weight = 3.0;
        else if (cuisineValue > 0.2)
            weight = 1.5;
        else
            weight = 0.5; // Very low weight for non-characteristic flavors
        // Identify "defining absence" - when a cuisine distinctly lacks a flavor
        if (cuisineValue < 0.2 && recipeValue > 0.6) {
            // Heavy penalty for having strong flavors that should be absent
            matchScore -= (recipeValue - cuisineValue) * 4.0;
            totalWeight += 4.0;
        }
        else {
            matchScore += similarity * weight;
            totalWeight += weight;
        }
    }
    // Normalize to 0-1 range - prevent division by zero
    const normalizedScore = totalWeight > 0 ? Math.max(0, matchScore / totalWeight) : 0.5;
    // Apply non-linear transformation to create better differentiation
    let transformedScore;
    if (normalizedScore < 0.3) {
        transformedScore = normalizedScore * 0.5;
    }
    else if (normalizedScore < 0.6) {
        transformedScore = 0.15 + (normalizedScore - 0.3) * 1.3;
    }
    else if (normalizedScore < 0.8) {
        transformedScore = 0.54 + (normalizedScore - 0.6) * 1.6;
    }
    else {
        transformedScore = 0.86 + (normalizedScore - 0.8) * 1.4;
    }
    // Ensure result is valid and in proper range
    return Math.min(Math.max(transformedScore, 0), 1);
};
exports.calculateCuisineFlavorMatch = calculateCuisineFlavorMatch;
/**
 * Get recommended cuisines for a recipe based on flavor profile similarity,
 * including parent-child cuisine relationships
 */
const getRecommendedCuisines = (recipeFlavorProfile) => {
    const results = Object.entries(exports.cuisineFlavorProfiles)
        .map(([cuisineName, _profile]) => {
        var _a;
        // Skip child cuisines that have a parent - will handle them separately
        if (_profile.parentCuisine)
            return null;
        const matchScore = (0, exports.calculateCuisineFlavorMatch)(recipeFlavorProfile, cuisineName);
        return {
            cuisine: cuisineName,
            matchScore,
            isParent: !!((_a = _profile.regionalVariants) === null || _a === void 0 ? void 0 : _a.length),
        };
    })
        .filter((result) => result !== null && result.matchScore > 0.6);
    // Add regional variants with good matches
    const regionalResults = [];
    Object.entries(exports.cuisineFlavorProfiles)
        .filter(([_, _profile]) => _profile.parentCuisine)
        .forEach(([cuisineName, _profile]) => {
        const matchScore = (0, exports.calculateCuisineFlavorMatch)(recipeFlavorProfile, cuisineName);
        if (matchScore > 0.65) {
            // Higher threshold for regional variants
            regionalResults.push({
                cuisine: cuisineName,
                matchScore,
                isParent: false,
            });
        }
    });
    // Combine and sort by match score
    return [...results, ...regionalResults]
        .sort((a, b) => b.matchScore - a.matchScore)
        .map(({ cuisine, matchScore }) => ({ cuisine, matchScore }));
};
exports.getRecommendedCuisines = getRecommendedCuisines;
/**
 * Get fusion suggestions based on compatible cuisine flavor profiles,
 * with improved handling of regional cuisine relationships
 */
const getFusionSuggestions = (cuisine1, cuisine2) => {
    const profile1 = getCuisineProfile(cuisine1);
    const profile2 = getCuisineProfile(cuisine2);
    if (!profile1 || !profile2) {
        return { compatibility: 0, techniques: [], ingredients: [] };
    }
    // Calculate flavor profile compatibility
    let flavorSimilarity = 0;
    Object.entries(profile1.flavorProfiles).forEach(([flavor, value1]) => {
        const value2 = profile2.flavorProfiles[flavor];
        flavorSimilarity += 1 - Math.abs(value1 - value2);
    });
    flavorSimilarity /= 6; // Normalize
    // Shared planetary resonance increases compatibility
    const sharedPlanets = profile1.planetaryResonance.filter((planet) => profile2.planetaryResonance.includes(planet));
    const planetaryCompatibility = sharedPlanets.length /
        Math.max(profile1.planetaryResonance.length, profile2.planetaryResonance.length);
    // Overall compatibility score
    const compatibility = flavorSimilarity * 0.6 + planetaryCompatibility * 0.4;
    // Fusion suggestions
    const techniques = [
        ...new Set([
            ...profile1.signatureTechniques.slice(0, 2),
            ...profile2.signatureTechniques.slice(0, 2),
        ]),
    ];
    const ingredients = [
        ...new Set([
            ...profile1.signatureIngredients.slice(0, 3),
            ...profile2.signatureIngredients.slice(0, 3),
        ]),
    ];
    return {
        compatibility: compatibility,
        techniques,
        ingredients,
    };
};
exports.getFusionSuggestions = getFusionSuggestions;
/**
 * Get cuisines related to the input cuisine, like regional variants or related traditions
 * Now returns an empty array to maintain compatibility without generating errors
 */
function getRelatedCuisines(cuisineName) {
    if (!cuisineName)
        return [];
    // Return empty array to maintain compatibility without checking regional variants
    return [];
}
exports.getRelatedCuisines = getRelatedCuisines;
/**
 * Calculate match score between two cuisines based on their flavor profiles
 */
function getCuisineMatchScore(cuisine1, cuisine2) {
    // Get cuisine profiles
    const profile1 = getCuisineProfile(cuisine1);
    const profile2 = getCuisineProfile(cuisine2);
    if (!profile1 || !profile2)
        return 0;
    // Calculate similarity based on elemental properties
    let similarityScore = 0;
    let totalWeight = 0;
    // Compare elemental properties (most important)
    if (profile1.elementalProperties && profile2.elementalProperties) {
        const elements = ['Fire', 'Water', 'Earth', 'Air'];
        let elementalSimilarity = 0;
        elements.forEach((element) => {
            var _a, _b;
            const val1 = ((_a = profile1.elementalProperties) === null || _a === void 0 ? void 0 : _a[element]) || 0;
            const val2 = ((_b = profile2.elementalProperties) === null || _b === void 0 ? void 0 : _b[element]) || 0;
            // Calculate similarity (1 minus the absolute difference)
            elementalSimilarity += 1 - Math.abs(val1 - val2);
        });
        // Normalize and weight elemental similarity (60%)
        similarityScore += (elementalSimilarity / 4) * 0.6;
        totalWeight += 0.6;
    }
    // Compare flavor intensities (20%)
    if (profile1.flavorIntensities && profile2.flavorIntensities) {
        const flavors = ['sweet', 'salty', 'sour', 'bitter', 'umami', 'spicy'];
        let flavorSimilarity = 0;
        flavors.forEach((flavor) => {
            var _a, _b;
            const val1 = ((_a = profile1.flavorIntensities) === null || _a === void 0 ? void 0 : _a[flavor]) || 0;
            const val2 = ((_b = profile2.flavorIntensities) === null || _b === void 0 ? void 0 : _b[flavor]) || 0;
            // Calculate similarity (1 minus the absolute difference)
            flavorSimilarity += 1 - Math.abs(val1 - val2);
        });
        // Normalize and weight flavor similarity (20%)
        similarityScore += (flavorSimilarity / 6) * 0.2;
        totalWeight += 0.2;
    }
    // Bonus for parent-child relationship (20%)
    const cuisines = [cuisine1.toLowerCase(), cuisine2.toLowerCase()];
    const relatedCuisines1 = getRelatedCuisines(cuisine1);
    const relatedCuisines2 = getRelatedCuisines(cuisine2);
    if (relatedCuisines1.some((rc) => rc.toLowerCase() === cuisines[1]) ||
        relatedCuisines2.some((rc) => rc.toLowerCase() === cuisines[0])) {
        similarityScore += 0.2;
        totalWeight += 0.2;
    }
    // Normalize final score if we have weights
    return totalWeight > 0 ? similarityScore / totalWeight : 0;
}
exports.getCuisineMatchScore = getCuisineMatchScore;
/**
 * Get a cuisine profile by name
 */
function getCuisineProfile(cuisineName) {
    const normalizedName = cuisineName.toLowerCase();
    return Object.values(exports.cuisineFlavorProfiles).find((c) => c.name.toLowerCase() === normalizedName);
}
exports.getCuisineProfile = getCuisineProfile;
/**
 * Get recipes that match a particular cuisine based on flavor profiles
 */
function getRecipesForCuisineMatch(cuisineName, recipes, limit = 8) {
    var _a, _b;
    if (!cuisineName) {
        console.warn('getRecipesForCuisineMatch called with empty cuisineName');
        return [];
    }
    console.log(`getRecipesForCuisineMatch called for "${cuisineName}" with ${(recipes === null || recipes === void 0 ? void 0 : recipes.length) || 0} recipes`);
    // Normalize the cuisine name to ensure case-insensitive matching
    const normalizedCuisineName = cuisineName.toLowerCase().trim();
    // Create a mock recipe generator for fallback if needed
    const createMockRecipes = (count = 3) => {
        console.log(`Creating ${count} mock recipes for "${cuisineName}"`);
        const mockRecipes = [];
        // Common dishes by cuisine - add more as needed
        const cuisineDishes = {
            'italian': ['Spaghetti Carbonara', 'Margherita Pizza', 'Risotto', 'Lasagna', 'Tiramisu'],
            'french': ['Coq au Vin', 'Beef Bourguignon', 'Ratatouille', 'Quiche Lorraine', 'Crème Brûlée'],
            'japanese': ['Sushi', 'Ramen', 'Tempura', 'Yakitori', 'Miso Soup'],
            'chinese': ['Kung Pao Chicken', 'Dim Sum', 'Mapo Tofu', 'Peking Duck', 'Hot Pot'],
            'indian': ['Butter Chicken', 'Biryani', 'Tikka Masala', 'Samosas', 'Naan'],
            'mexican': ['Tacos', 'Enchiladas', 'Guacamole', 'Mole Poblano', 'Chiles Rellenos'],
            'thai': ['Pad Thai', 'Green Curry', 'Tom Yum Soup', 'Mango Sticky Rice', 'Som Tam'],
            'greek': ['Moussaka', 'Souvlaki', 'Greek Salad', 'Spanakopita', 'Baklava'],
            'american': ['Burger', 'BBQ Ribs', 'Mac and Cheese', 'Apple Pie', 'Fried Chicken'],
            'african': ['Jollof Rice', 'Bobotie', 'Tagine', 'Piri Piri Chicken', 'Injera'],
        };
        // Get dishes specific to this cuisine or use general names
        const dishNames = cuisineDishes[normalizedCuisineName] ||
            [`${cuisineName} Specialty`, `Traditional ${cuisineName} Dish`, `${cuisineName} Delight`];
        // Common ingredients for each dish
        const commonIngredients = [
            { name: "Salt", amount: 1, unit: "tsp" },
            { name: "Pepper", amount: 0.5, unit: "tsp" },
            { name: "Olive Oil", amount: 2, unit: "tbsp" },
        ];
        // Generate mock recipes
        for (let i = 0; i < Math.min(count, dishNames.length); i++) {
            mockRecipes.push({
                id: `mock-${normalizedCuisineName}-${i}`,
                name: dishNames[i],
                description: `A traditional ${cuisineName} recipe featuring local ingredients and authentic flavors.`,
                cuisine: cuisineName,
                ingredients: [...commonIngredients],
                instructions: ["Prepare ingredients", "Cook according to traditional methods", "Serve and enjoy!"],
                timeToMake: "30 minutes",
                servingSize: 4,
                matchScore: 0.85 + (Math.random() * 0.15),
                matchPercentage: Math.round((0.85 + Math.random() * 0.15) * 100),
                elementalProperties: {
                    Fire: 0.25,
                    Water: 0.25,
                    Earth: 0.25,
                    Air: 0.25
                },
                isMockData: true
            });
        }
        return mockRecipes;
    };
    try {
        // Special handling for American and African cuisines that have been problematic
        if (normalizedCuisineName === 'american' ||
            normalizedCuisineName === 'african') {
            console.log(`Using specialized handling for ${cuisineName}`);
            try {
                // First, try LocalRecipeService
                const { LocalRecipeService } = require('../services/LocalRecipeService');
                // Clear cache to ensure fresh data
                LocalRecipeService.clearCache();
                const localRecipes = LocalRecipeService.getRecipesByCuisine(cuisineName);
                console.log(`LocalRecipeService returned ${(localRecipes === null || localRecipes === void 0 ? void 0 : localRecipes.length) || 0} recipes for ${cuisineName}`);
                if (localRecipes && localRecipes.length > 0) {
                    // Apply high match scores to local recipes
                    return localRecipes
                        .map((recipe) => ({
                        ...recipe,
                        matchScore: 0.85 + Math.random() * 0.15,
                        matchPercentage: Math.round((0.85 + Math.random() * 0.15) * 100), // For display
                    }))
                        .slice(0, limit);
                }
                // If LocalRecipeService didn't work, try direct import
                let cuisine;
                try {
                    if (normalizedCuisineName === 'american') {
                        const { american } = require('../data/cuisines/american');
                        cuisine = american;
                    }
                    else {
                        const { african } = require('../data/cuisines/african');
                        cuisine = african;
                    }
                }
                catch (importError) {
                    console.error(`Error importing special cuisine data for ${cuisineName}:`, importError);
                }
                if (cuisine && cuisine.dishes) {
                    console.log(`Direct import successful for ${cuisineName}, extracting recipes from dishes`);
                    // Extract recipes from all meal types
                    const allRecipes = [];
                    const mealTypes = ['breakfast', 'lunch', 'dinner', 'dessert'];
                    for (const mealType of mealTypes) {
                        if (((_a = cuisine.dishes[mealType]) === null || _a === void 0 ? void 0 : _a.all) &&
                            Array.isArray(cuisine.dishes[mealType].all)) {
                            console.log(`Found ${cuisine.dishes[mealType].all.length} ${mealType} recipes for ${cuisineName}`);
                            const mealRecipes = cuisine.dishes[mealType].all.map((recipe) => ({
                                ...recipe,
                                cuisine: cuisineName,
                                matchScore: 0.9,
                                matchPercentage: 90,
                                mealType: [mealType],
                            }));
                            allRecipes.push(...mealRecipes);
                        }
                        // Also check seasonal recipes
                        const seasons = ['spring', 'summer', 'autumn', 'winter'];
                        for (const season of seasons) {
                            if (((_b = cuisine.dishes[mealType]) === null || _b === void 0 ? void 0 : _b[season]) &&
                                Array.isArray(cuisine.dishes[mealType][season])) {
                                console.log(`Found ${cuisine.dishes[mealType][season].length} ${season} ${mealType} recipes for ${cuisineName}`);
                                const seasonalRecipes = cuisine.dishes[mealType][season].map((recipe) => ({
                                    ...recipe,
                                    cuisine: cuisineName,
                                    matchScore: 0.85,
                                    matchPercentage: 85,
                                    mealType: [mealType],
                                    season: [season],
                                }));
                                allRecipes.push(...seasonalRecipes);
                            }
                        }
                    }
                    // Remove duplicates by name
                    const uniqueRecipes = allRecipes.filter((recipe, index, self) => index === self.findIndex((r) => r.name === recipe.name));
                    if (uniqueRecipes.length > 0) {
                        console.log(`Returning ${uniqueRecipes.length} unique recipes for ${cuisineName}`);
                        return uniqueRecipes.slice(0, limit);
                    }
                }
            }
            catch (error) {
                console.error(`Error in special handling for ${cuisineName}:`, error);
            }
        }
        // If special handling didn't return anything or cuisine isn't American/African,
        // continue with the standard approach
        // If no recipes are provided or empty array, try to fetch from LocalRecipeService
        if (!Array.isArray(recipes) || recipes.length === 0) {
            try {
                console.log(`No recipes array provided, trying LocalRecipeService for ${cuisineName}`);
                const { LocalRecipeService } = require('../services/LocalRecipeService');
                const localRecipes = LocalRecipeService.getRecipesByCuisine(cuisineName);
                console.log(`Fetched ${(localRecipes === null || localRecipes === void 0 ? void 0 : localRecipes.length) || 0} recipes directly from LocalRecipeService for ${cuisineName}`);
                if (localRecipes && localRecipes.length > 0) {
                    // Apply high match scores to local recipes
                    return localRecipes
                        .map((recipe) => ({
                        ...recipe,
                        matchScore: 0.8 + Math.random() * 0.2,
                        matchPercentage: Math.round((0.8 + Math.random() * 0.2) * 100), // For display
                    }))
                        .slice(0, limit);
                }
                else {
                    console.log(`LocalRecipeService returned no recipes for ${cuisineName}, using mock data`);
                    return createMockRecipes(limit);
                }
            }
            catch (error) {
                console.error(`Error fetching recipes from LocalRecipeService for ${cuisineName}:`, error);
                return createMockRecipes(limit);
            }
        }
        // Get the cuisine profile
        const cuisineProfile = getCuisineProfile(cuisineName);
        if (!cuisineProfile) {
            console.warn(`No cuisine profile found for ${cuisineName}, using direct matches only`);
            // Even without a profile, we can still try direct matches
        }
        // Different tiers of matches with varied scoring
        // Direct exact cuisine matches (highest priority)
        const exactCuisineMatches = recipes.filter((recipe) => {
            var _a, _b, _c, _d;
            const recipeData = recipe;
            return ((_a = recipeData === null || recipeData === void 0 ? void 0 : recipeData.cuisine) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === normalizedCuisineName ||
                ((_c = (_b = recipeData === null || recipeData === void 0 ? void 0 : recipeData.cuisine) === null || _b === void 0 ? void 0 : _b.toLowerCase()) === null || _c === void 0 ? void 0 : _c.includes(normalizedCuisineName)) ||
                normalizedCuisineName.includes((_d = recipeData === null || recipeData === void 0 ? void 0 : recipeData.cuisine) === null || _d === void 0 ? void 0 : _d.toLowerCase());
        });
        console.log(`Found ${exactCuisineMatches.length} exact cuisine matches for ${cuisineName}`);
        // Regional variant matches
        const regionalMatches = recipes.filter((recipe) => {
            var _a, _b, _c, _d;
            const recipeData = recipe;
            return !exactCuisineMatches.includes(recipe) && (((_a = recipeData === null || recipeData === void 0 ? void 0 : recipeData.regionalCuisine) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === normalizedCuisineName ||
                ((_c = (_b = recipeData === null || recipeData === void 0 ? void 0 : recipeData.regionalCuisine) === null || _b === void 0 ? void 0 : _b.toLowerCase()) === null || _c === void 0 ? void 0 : _c.includes(normalizedCuisineName)) ||
                normalizedCuisineName.includes((_d = recipeData === null || recipeData === void 0 ? void 0 : recipeData.regionalCuisine) === null || _d === void 0 ? void 0 : _d.toLowerCase()));
        });
        console.log(`Found ${regionalMatches.length} regional matches for ${cuisineName}`);
        // Calculate match scores for all other recipes
        const otherRecipes = recipes.filter((recipe) => !exactCuisineMatches.includes(recipe) && !regionalMatches.includes(recipe));
        // Skip other recipe scoring if we already have enough direct matches
        let scoredOtherRecipes = [];
        if (exactCuisineMatches.length + regionalMatches.length < limit && cuisineProfile) {
            // Score recipe matches using various factors
            scoredOtherRecipes = otherRecipes
                .map((recipe) => {
                var _a;
                try {
                    const recipeData = recipe;
                    const scoreComponents = [];
                    let totalWeight = 0;
                    // Base flavor profile match (weight: 0.4)
                    if (cuisineProfile && (recipeData === null || recipeData === void 0 ? void 0 : recipeData.flavorProfile)) {
                        const flavorScore = calculateFlavorProfileMatch(recipeData.flavorProfile, cuisineProfile.flavorProfiles);
                        scoreComponents.push(flavorScore * 0.4);
                        totalWeight += 0.4;
                    }
                    // Ingredient similarity (weight: 0.3)
                    if (cuisineProfile.signatureIngredients && (recipeData === null || recipeData === void 0 ? void 0 : recipeData.ingredients)) {
                        const recipeIngredientNames = recipeData.ingredients.map((ing) => {
                            var _a;
                            const ingData = ing;
                            return typeof ing === 'string' ? ing.toLowerCase() : ((_a = ingData === null || ingData === void 0 ? void 0 : ingData.name) === null || _a === void 0 ? void 0 : _a.toLowerCase()) || '';
                        });
                        const commonIngredients = cuisineProfile.signatureIngredients.filter((ing) => recipeIngredientNames.some((ri) => ri === null || ri === void 0 ? void 0 : ri.includes(ing.toLowerCase())));
                        // Calculate score based on how many signature ingredients are used
                        const ingredientScore = commonIngredients.length /
                            Math.max(cuisineProfile.signatureIngredients.length, 1);
                        scoreComponents.push(ingredientScore * 0.3);
                        totalWeight += 0.3;
                    }
                    // Technique similarity (weight: 0.2)
                    if (cuisineProfile.signatureTechniques && (recipeData === null || recipeData === void 0 ? void 0 : recipeData.cookingMethods)) {
                        const recipeTechniques = Array.isArray(recipeData.cookingMethods)
                            ? recipeData.cookingMethods.map((tech) => (tech === null || tech === void 0 ? void 0 : tech.toLowerCase()) || '')
                            : [((_a = recipeData.cookingMethods) === null || _a === void 0 ? void 0 : _a.toLowerCase()) || ''];
                        const commonTechniques = cuisineProfile.signatureTechniques.filter((tech) => recipeTechniques.some((rt) => rt === null || rt === void 0 ? void 0 : rt.includes(tech.toLowerCase())));
                        const techniqueScore = commonTechniques.length /
                            Math.max(cuisineProfile.signatureTechniques.length, 1);
                        scoreComponents.push(techniqueScore * 0.2);
                        totalWeight += 0.2;
                    }
                    // Elemental alignment (weight: 0.1)
                    if (cuisineProfile.elementalAlignment &&
                        (recipeData === null || recipeData === void 0 ? void 0 : recipeData.elementalProperties)) {
                        const elementScore = (0, exports.calculateSimilarityScore)(cuisineProfile.elementalAlignment, recipeData.elementalProperties);
                        scoreComponents.push(elementScore * 0.1);
                        totalWeight += 0.1;
                    }
                    // Calculate final score
                    let finalScore = 0;
                    if (totalWeight > 0) {
                        // Weighted average of all components
                        finalScore = scoreComponents.reduce((sum, score) => sum + score, 0) / totalWeight;
                        // Normalize score to ensure it's between 0 and 1
                        finalScore = Math.max(0, Math.min(1, finalScore));
                    }
                    else {
                        // Default score if no components could be calculated
                        finalScore = 0.5;
                    }
                    return {
                        ...recipe,
                        matchScore: finalScore,
                        matchPercentage: Math.round(finalScore * 100),
                    };
                }
                catch (scoreError) {
                    console.error(`Error scoring recipe match for ${cuisineName}:`, scoreError);
                    return {
                        ...recipe,
                        matchScore: 0.5,
                        matchPercentage: 50,
                    };
                }
            })
                .filter((recipe) => (recipe === null || recipe === void 0 ? void 0 : recipe.matchScore) >= 0.5) // Only include reasonably good matches
                .sort((a, b) => b.matchScore - a.matchScore); // Sort by score (high to low)
        }
        console.log(`Found ${scoredOtherRecipes.length} scored other recipes for ${cuisineName}`);
        // Combine all matches, prioritizing direct matches, then regional, then others
        const allMatches = [
            ...exactCuisineMatches.map((recipe) => ({
                ...recipe,
                matchScore: 0.9 + Math.random() * 0.1,
                matchPercentage: Math.round((0.9 + Math.random() * 0.1) * 100),
            })),
            ...regionalMatches.map((recipe) => ({
                ...recipe,
                matchScore: 0.8 + Math.random() * 0.1,
                matchPercentage: Math.round((0.8 + Math.random() * 0.1) * 100),
            })),
            ...scoredOtherRecipes.slice(0, limit - exactCuisineMatches.length - regionalMatches.length),
        ];
        // Remove duplicates by name
        const uniqueMatches = allMatches.filter((recipe, index, self) => {
            const recipeData = recipe;
            return index === self.findIndex((r) => (r === null || r === void 0 ? void 0 : r.name) === (recipeData === null || recipeData === void 0 ? void 0 : recipeData.name));
        });
        // Sort by match score
        const sortedMatches = uniqueMatches.sort((a, b) => b.matchScore - a.matchScore);
        console.log(`Returning ${sortedMatches.length} sorted matches for ${cuisineName}`);
        // Use mock data if we didn't find enough recipes
        if (sortedMatches.length < Math.min(3, limit)) {
            const mockRecipes = createMockRecipes(limit - sortedMatches.length);
            return [...sortedMatches, ...mockRecipes].slice(0, limit);
        }
        return sortedMatches.slice(0, limit);
    }
    catch (error) {
        console.error(`Error in getRecipesForCuisineMatch for ${cuisineName}:`, error);
        return createMockRecipes(limit);
    }
}
exports.getRecipesForCuisineMatch = getRecipesForCuisineMatch;
// Helper function to calculate flavor profile match
function calculateFlavorProfileMatch(recipeProfile, cuisineProfile) {
    let similarity = 0;
    let count = 0;
    const recipeData = recipeProfile;
    const cuisineData = cuisineProfile;
    // Compare common flavor dimensions
    const flavors = ['spicy', 'sweet', 'sour', 'bitter', 'salty', 'umami'];
    flavors.forEach((flavor) => {
        if ((recipeData === null || recipeData === void 0 ? void 0 : recipeData[flavor]) !== undefined &&
            (cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData[flavor]) !== undefined) {
            similarity +=
                1 - Math.abs(recipeData[flavor] - cuisineData[flavor]);
            count++;
        }
    });
    return count > 0 ? similarity / count : 0.5;
}
const getCuisineElementalMatch = (cuisineName, elementalProps) => {
    let matchScore = 0;
    let totalWeight = 0;
    // Get the cuisine profile
    const cuisine = exports.cuisineFlavorProfiles[cuisineName.toLowerCase()];
    if (!cuisine)
        return 0.5; // Default neutral match if cuisine not found
    // Compare elemental compatibility
    if (cuisine.elementalProperties) {
        Object.keys(elementalProps).forEach((element) => {
            var _a;
            const elementKey = element;
            const cuisineValue = ((_a = cuisine.elementalProperties) === null || _a === void 0 ? void 0 : _a[elementKey]) || 0;
            const targetValue = elementalProps[elementKey] || 0;
            // Calculate similarity - the closer the values, the better the match
            const similarity = 1 - Math.abs(cuisineValue - targetValue);
            // Weight important elements more heavily
            const weight = Math.max(cuisineValue, targetValue) * 2;
            matchScore += similarity * weight;
            totalWeight += weight;
        });
    }
    return totalWeight > 0 ? matchScore / totalWeight : 0.5;
};
exports.getCuisineElementalMatch = getCuisineElementalMatch;
const calculateCuisineSimilarity = (cuisine1, cuisine2) => {
    const profile1 = getCuisineProfile(cuisine1);
    const profile2 = getCuisineProfile(cuisine2);
    if (!profile1 || !profile2) {
        return 0.5; // Default neutral similarity if profiles not found
    }
    let similarityScore = 0;
    let totalWeight = 0;
    // Elemental similarity (weight: 0.4)
    const elements = ['Fire', 'Water', 'Earth', 'Air'];
    let elementalSimilarity = 0;
    let elementCount = 0;
    elements.forEach((element) => {
        var _a, _b;
        const elementKey = element;
        const val1 = ((_a = profile1.elementalProperties) === null || _a === void 0 ? void 0 : _a[elementKey]) || 0;
        const val2 = ((_b = profile2.elementalProperties) === null || _b === void 0 ? void 0 : _b[elementKey]) || 0;
        elementalSimilarity += 1 - Math.abs(val1 - val2);
        elementCount++;
    });
    const normalizedElementalSimilarity = elementCount > 0 ? elementalSimilarity / elementCount : 0.5;
    similarityScore += normalizedElementalSimilarity * 0.4;
    totalWeight += 0.4;
    // Flavor profile similarity (weight: 0.6)
    const flavors = ['sweet', 'salty', 'sour', 'bitter', 'umami', 'spicy'];
    let flavorSimilarity = 0;
    let flavorCount = 0;
    flavors.forEach((flavor) => {
        var _a, _b;
        const val1 = ((_a = profile1.flavorIntensities) === null || _a === void 0 ? void 0 : _a[flavor]) || 0;
        const val2 = ((_b = profile2.flavorIntensities) === null || _b === void 0 ? void 0 : _b[flavor]) || 0;
        flavorSimilarity += 1 - Math.abs(val1 - val2);
        flavorCount++;
    });
    const normalizedFlavorSimilarity = flavorCount > 0 ? flavorSimilarity / flavorCount : 0.5;
    similarityScore += normalizedFlavorSimilarity * 0.6;
    totalWeight += 0.6;
    return totalWeight > 0 ? similarityScore / totalWeight : 0.5;
};
exports.calculateCuisineSimilarity = calculateCuisineSimilarity;
const findRelatedRecipes = (recipeName, recipes, count = 3) => {
    const scoredRecipes = recipes
        .map((recipe) => {
        const scoreComponents = [];
        const totalWeight = 0;
        // Simple name similarity scoring
        const nameSimilarity = recipe.name && recipeName ?
            (recipe.name.toLowerCase().includes(recipeName.toLowerCase()) ? 0.8 : 0.2) : 0.2;
        return {
            ...recipe,
            score: nameSimilarity
        };
    })
        .sort((a, b) => b.score - a.score)
        .slice(0, count);
    return scoredRecipes;
};
exports.findRelatedRecipes = findRelatedRecipes;
const calculateSimilarityScore = (elementalProps1, elementalProps2) => {
    let similarity = 0;
    let count = 0;
    // Compare elemental properties
    const elements = ['Fire', 'Water', 'Earth', 'Air'];
    elements.forEach(element => {
        const val1 = elementalProps1[element] || 0;
        const val2 = elementalProps2[element] || 0;
        similarity += 1 - Math.abs(val1 - val2);
        count++;
    });
    return count > 0 ? similarity / count : 0.5;
};
exports.calculateSimilarityScore = calculateSimilarityScore;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9kYXRhL2N1aXNpbmVGbGF2b3JQcm9maWxlcy50cyIsIm1hcHBpbmdzIjoiOzs7QUFnQ2EsUUFBQSxxQkFBcUIsR0FBeUM7SUFDekUseUJBQXlCO0lBQ3pCLEtBQUssRUFBRTtRQUNMLEVBQUUsRUFBRSxPQUFPO1FBQ1gsSUFBSSxFQUFFLE9BQU87UUFDYixXQUFXLEVBQ1QsaUZBQWlGO1FBQ25GLGNBQWMsRUFBRTtZQUNkLEtBQUssRUFBRSxHQUFHO1lBQ1YsS0FBSyxFQUFFLEdBQUc7WUFDVixJQUFJLEVBQUUsR0FBRztZQUNULE1BQU0sRUFBRSxHQUFHO1lBQ1gsS0FBSyxFQUFFLEdBQUc7WUFDVixLQUFLLEVBQUUsR0FBRztTQUNYO1FBQ0Qsa0JBQWtCLEVBQUU7WUFDbEIsSUFBSSxFQUFFLEdBQUc7WUFDVCxLQUFLLEVBQUUsR0FBRztZQUNWLEtBQUssRUFBRSxHQUFHO1lBQ1YsR0FBRyxFQUFFLEdBQUc7U0FDVDtRQUNELG1CQUFtQixFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxZQUFZLENBQUM7UUFDM0Qsb0JBQW9CLEVBQUU7WUFDcEIsV0FBVztZQUNYLFVBQVU7WUFDVixRQUFRO1lBQ1IsT0FBTztZQUNQLFFBQVE7U0FDVDtRQUNELHVCQUF1QixFQUFFLENBQUMsY0FBYyxFQUFFLGNBQWMsRUFBRSxhQUFhLENBQUM7UUFDeEUsa0JBQWtCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztRQUNqRCxrQkFBa0IsRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUM7UUFDeEMsa0JBQWtCLEVBQUUsQ0FBQyxZQUFZLEVBQUUsYUFBYSxFQUFFLGVBQWUsQ0FBQztLQUNuRTtJQUVELE1BQU0sRUFBRTtRQUNOLEVBQUUsRUFBRSxRQUFRO1FBQ1osSUFBSSxFQUFFLFFBQVE7UUFDZCxXQUFXLEVBQ1QseUVBQXlFO1FBQzNFLGNBQWMsRUFBRTtZQUNkLEtBQUssRUFBRSxH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QUNqQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRW5CLE9BQU8sYUFBYSxDQUFDO0FBQ3ZCLENBQUMsQ0FBQztBQXZCVyxRQUFBLGtCQUFrQixzQkF1QjdCO0FBRUssTUFBTSx3QkFBd0IsR0FBRyxDQUN0QyxlQUFvQyxFQUNwQyxlQUFvQyxFQUM1QixFQUFFO0lBQ1YsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztJQUVkLCtCQUErQjtJQUMvQixNQUFNLFFBQVEsR0FBa0MsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUVsRixRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ3pCLE1BQU0sSUFBSSxHQUFHLGVBQWUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxVQUFVLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3hDLEtBQUssRUFBRSxDQUFDO0lBQ1YsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUM5QyxDQUFDLENBQUM7QUFsQlcsUUFBQSx3QkFBd0IsNEJBa0JuQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL2RhdGEvY3Vpc2luZUZsYXZvclByb2ZpbGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRWxlbWVudGFsUHJvcGVydGllcyB9IGZyb20gJ0AvdHlwZXMvYWxjaGVteSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3Vpc2luZUZsYXZvclByb2ZpbGUge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBmbGF2b3JQcm9maWxlczoge1xuICAgIHNwaWN5OiBudW1iZXI7XG4gICAgc3dlZXQ6IG51bWJlcjtcbiAgICBzb3VyOiBudW1iZXI7XG4gICAgYml0dGVyOiBudW1iZXI7XG4gICAgc2FsdHk6IG51bWJlcjtcbiAgICB1bWFtaTogbnVtYmVyO1xuICB9O1xuICBlbGVtZW50YWxBbGlnbm1lbnQ6IEVsZW1lbnRhbFByb3BlcnRpZXM7XG4gIHNpZ25hdHVyZVRlY2huaXF1ZXM6IHN0cmluZ1tdO1xuICBzaWduYXR1cmVJbmdyZWRpZW50czogc3RyaW5nW107XG4gIHRyYWRpdGlvbmFsTWVhbFBhdHRlcm5zOiBzdHJpbmdbXTtcbiAgcGxhbmV0YXJ5UmVzb25hbmNlOiBzdHJpbmdbXTsgLy8gUGxhbmV0cyB0aGF0IHJlc29uYXRlIHdpdGggdGhpcyBjdWlzaW5lXG4gIHNlYXNvbmFsUHJlZmVyZW5jZTogc3RyaW5nW107IC8vIFNlYXNvbnMgd2hlbiB0aGlzIGN1aXNpbmUgc2hpbmVzXG4gIHBhcmVudEN1aXNpbmU/OiBzdHJpbmc7IC8vIFBhcmVudCBjdWlzaW5lIGZvciByZWdpb25hbCB2YXJpYW50c1xuICByZWdpb25hbFZhcmlhbnRzPzogc3RyaW5nW107IC8vIFJlZ2lvbmFsIHZhcmlhbnRzIG9mIHRoaXMgY3Vpc2luZVxuICBkaWV0YXJ5U3VpdGFiaWxpdHk/OiBzdHJpbmdbXTtcbiAgZWxlbWVudGFsUHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGZsYXZvckludGVuc2l0aWVzPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgdGFzdGluZ05vdGVzPzogc3RyaW5nW107XG4gIHByaW1hcnlJbmdyZWRpZW50cz86IHN0cmluZ1tdO1xuICBjb21tb25Db29raW5nTWV0aG9kcz86IHN0cmluZ1tdO1xuICBzaWduYXR1cmVEaXNoZXM/OiBzdHJpbmdbXTtcbiAgY3VsdHVyYWxDb250ZXh0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgY3Vpc2luZUZsYXZvclByb2ZpbGVzOiBSZWNvcmQ8c3RyaW5nLCBDdWlzaW5lRmxhdm9yUHJvZmlsZT4gPSB7XG4gIC8vIE1lZGl0ZXJyYW5lYW4gQ3Vpc2luZXNcbiAgZ3JlZWs6IHtcbiAgICBpZDogJ2dyZWVrJyxcbiAgICBuYW1lOiAnR3JlZWsnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0ZyZXNoLCBoZXJiLWZvcndhcmQgY3Vpc2luZSBjZW50ZXJlZCBhcm91bmQgb2xpdmUgb2lsLCB2ZWdldGFibGVzLCBhbmQgc2VhZm9vZC4nLFxuICAgIGZsYXZvclByb2ZpbGVzOiB7XG4gICAgICBzcGljeTogMC4zLFxuICAgICAgc3dlZXQ6IDAuNCxcbiAgICAgIHNvdXI6IDAuNSxcbiAgICAgIGJpdHRlcjogMC40LFxuICAgICAgc2FsdHk6IDAuNixcbiAgICAgIHVtYW1pOiAwLjUsXG4gICAgfSxcbiAgICBlbGVtZW50YWxBbGlnbm1lbnQ6IHtcbiAgICAgIEZpcmU6IDAuMyxcbiAgICAgIEVhcnRoOiAwLjMsXG4gICAgICBXYXRlcjogMC4zLFxuICAgICAgQWlyOiAwLjEsXG4gICAgfSxcbiAgICBzaWduYXR1cmVUZWNobmlxdWVzOiBbJ2dyaWxsaW5nJywgJ2JyYWlzaW5nJywgJ21hcmluYXRpbmcnXSxcbiAgICBzaWduYXR1cmVJbmdyZWRpZW50czogW1xuICAgICAgJ29saXZlIG9pbCcsXG4gICAgICAndG9tYXRvZXMnLFxuICAgICAgJ2xlbW9ucycsXG4gICAgICAnaGVyYnMnLFxuICAgICAgJ2dhcmxpYycsXG4gICAgXSxcbiAgICB0cmFkaXRpb25hbE1lYWxQYXR0ZXJuczogWydzbWFsbCBwbGF0ZXMnLCAnZmFtaWx5LXN0eWxlJywgJ2xhdGUgZGluaW5nJ10sXG4gICAgcGxhbmV0YXJ5UmVzb25hbmNlOiBbJ1N1bicsICdNZXJjdXJ5JywgJ05lcHR1bmUnXSxcbiAgICBzZWFzb25hbFByZWZlcmVuY2U6IFsnc3VtbWVyJywgJ3NwcmluZyddLFxuICAgIGRpZXRhcnlTdWl0YWJpbGl0eTogWyd2ZWdldGFyaWFuJywgJ3Blc2NhdGFyaWFuJywgJ01lZGl0ZXJyYW5lYW4nXSxcbiAgfSxcblxuICBmcmVuY2g6IHtcbiAgICBpZDogJ2ZyZW5jaCcsXG4gICAgbmFtZTogJ0ZyZW5jaCcsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnU29waGlzdGljYXRlZCBjdWlzaW5lIGJ1aWx0IG9uIHJpY2ggZm91bmRhdGlvbnMgYW5kIHByZWNpc2UgdGVjaG5pcXVlcy4nLFxuICAgIGZsYXZvclByb2ZpbGVzOiB7XG4gICAgICBzcGljeTogMC4xLFxuICAgICAgc3dlZXQ6IDAuNSxcbiAgICAgIHNvdXI6IDAuNCxcbiAgICAgIGJpdHRlcjogMC4zLFxuICAgICAgc2FsdHk6IDAuNSxcbiAgICAgIHVtYW1pOiAwLjgsXG4gICAgfSxcbiAgICBlbGVtZW50YWxBbGlnbm1lbnQ6IHtcbiAgICAgIEVhcnRoOiAwLjU1LFxuICAgICAgV2F0ZXI6IDAuMjUsXG4gICAgICBGaXJlOiAwLjEsXG4gICAgICBBaXI6IDAuMSxcbiAgICB9LFxuICAgIHNpZ25hdHVyZVRlY2huaXF1ZXM6IFsnc2F1dMOpaW5nJywgJ3NvdXMgdmlkZScsICdmbGFtYsOpaW5nJywgJ3JlZHVjdGlvbiddLFxuICAgIHNpZ25hdHVyZUluZ3JlZGllbnRzOiBbXG4gICAgICAnYnV0dGVyJyxcbiAgICAgICd3aW5lJyxcbiAgICAgICdjcmVhbScsXG4gICAgICAnc2hhbGxvdHMnLFxuICAgICAgJ2hlcmJzIGRlIHByb3ZlbmNlJyxcbiAgICBdLFxuICAgIHRyYWRpdGlvbmFsTWVhbFBhdHRlcm5zOiBbJ2NvdXJzZS1iYXNlZCBkaW5pbmcnLCAnd2luZSBwYWlyaW5ncycsICdzYXVjZXMnXSxcbiAgICBwbGFuZXRhcnlSZXNvbmFuY2U6IFsnVmVudXMnLCAnTW9vbicsICdKdXBpdGVyJ10sXG4gICAgc2Vhc29uYWxQcmVmZXJlbmNlOiBbJ2FsbCddLFxuICAgIHJlZ2lvbmFsVmFyaWFudHM6IFsncHJvdmVuY2FsJywgJ2Fsc2F0aWFuJywgJ25vcm1hbmR5J10sXG4gICAgZGlldGFyeVN1aXRhYmlsaXR5OiBbJ3ZlZ2V0YXJpYW4tYWRhcHRhYmxlJywgJ2RhaXJ5LXJpY2gnXSxcbiAgfSxcblxuICBpdGFsaWFuOiB7XG4gICAgaWQ6ICdpdGFsaWFuJyxcbiAgICBuYW1lOiAnSXRhbGlhbicsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnSW5ncmVkaWVudC1mb2N1c2VkIGN1aXNpbmUgY2VsZWJyYXRpbmcgcmVnaW9uYWwgc3BlY2lhbHRpZXMgYW5kIHNpbXBsaWNpdHkuJyxcbiAgICBmbGF2b3JQcm9maWxlczoge1xuICAgICAgc3BpY3k6IDAuMyxcbiAgICAgIHN3ZWV0OiAwLjQsXG4gICAgICBzb3VyOiAwLjUsXG4gICAgICBiaXR0ZXI6IDAuMyxcbiAgICAgIHNhbHR5OiAwLjYsXG4gICAgICB1bWFtaTogMC43LFxuICAgIH0sXG4gICAgZWxlbWVudGFsQWxpZ25tZW50OiB7XG4gICAgICBFYXJ0aDogMC41LFxuICAgICAgRmlyZTogMC4zLFxuICAgICAgV2F0ZXI6IDAuMSxcbiAgICAgIEFpcjogMC4xLFxuICAgIH0sXG4gICAgc2lnbmF0dXJlVGVjaG5pcXVlczogW1xuICAgICAgJ2FsIGRlbnRlIHBhc3RhIGNvb2tpbmcnLFxuICAgICAgJ3Nsb3cgc2ltbWVyaW5nJyxcbiAgICAgICdncmlsbGluZycsXG4gICAgXSxcbiAgICBzaWduYXR1cmVJbmdyZWRpZW50czogW1xuICAgICAgJ3RvbWF0b2VzJyxcbiAgICAgICdvbGl2ZSBvaWwnLFxuICAgICAgJ2Jhc2lsJyxcbiAgICAgICdwYXJtZXNhbicsXG4gICAgICAnZ2FybGljJyxcbiAgICBdLFxuICAgIHRyYWRpdGlvbmFsTWVhbFBhdHRlcm5zOiBbJ2FudGlwYXN0aScsICdwcmltaScsICdzZWNvbmRpJywgJ2ZhbWlseS1zdHlsZSddLFxuICAgIHBsYW5ldGFyeVJlc29uYW5jZTogWydKdXBpdGVyJywgJ1ZlbnVzJywgJ1N1biddLFxuICAgIHNlYXNvbmFsUHJlZmVyZW5jZTogWydzdW1tZXInLCAnZmFsbCddLFxuICAgIHJlZ2lvbmFsVmFyaWFudHM6IFsnc2ljaWxpYW4nLCAndHVzY2FuJywgJ25lYXBvbGl0YW4nXSxcbiAgICBkaWV0YXJ5U3VpdGFiaWxpdHk6IFsndmVnZXRhcmlhbi1mcmllbmRseScsICdNZWRpdGVycmFuZWFuJ10sXG4gIH0sXG5cbiAgLy8gQXNpYW4gQ3Vpc2luZXNcbiAgamFwYW5lc2U6IHtcbiAgICBpZDogJ2phcGFuZXNlJyxcbiAgICBuYW1lOiAnSmFwYW5lc2UnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0RlbGljYXRlIGN1aXNpbmUgZW1waGFzaXppbmcgcHVyZSBmbGF2b3JzLCBzZWFzb25hbGl0eSwgYW5kIHByZXNlbnRhdGlvbi4nLFxuICAgIGZsYXZvclByb2ZpbGVzOiB7XG4gICAgICBzcGljeTogMC4yLFxuICAgICAgc3dlZXQ6IDAuMyxcbiAgICAgIHNvdXI6IDAuNCxcbiAgICAgIGJpdHRlcjogMC4zLFxuICAgICAgc2FsdHk6IDAuNixcbiAgICAgIHVtYW1pOiAwLjksXG4gICAgfSxcbiAgICBlbGVtZW50YWxBbGlnbm1lbnQ6IHtcbiAgICAgIFdhdGVyOiAwLjY1LFxuICAgICAgRWFydGg6IDAuMixcbiAgICAgIEFpcjogMC4xLFxuICAgICAgRmlyZTogMC4wNSxcbiAgICB9LFxuICAgIHNpZ25hdHVyZVRlY2huaXF1ZXM6IFtcbiAgICAgICdyYXcgcHJlcGFyYXRpb24nLFxuICAgICAgJ3N0ZWFtaW5nJyxcbiAgICAgICdxdWljayBncmlsbGluZycsXG4gICAgICAnZmVybWVudGF0aW9uJyxcbiAgICBdLFxuICAgIHNpZ25hdHVyZUluZ3JlZGllbnRzOiBbJ2Rhc2hpJywgJ3NveSBzYXVjZScsICdtaXJpbicsICdyaWNlJywgJ3NlYXdlZWQnXSxcbiAgICB0cmFkaXRpb25hbE1lYWxQYXR0ZXJuczogW1xuICAgICAgJ3NlYXNvbmFsIGZvY3VzJyxcbiAgICAgICdtdWx0aXBsZSBzbWFsbCBkaXNoZXMnLFxuICAgICAgJ2ljaGlqdS1zYW5zYWknLFxuICAgIF0sXG4gICAgcGxhbmV0YXJ5UmVzb25hbmNlOiBbJ01vb24nLCAnTWVyY3VyeScsICdOZXB0dW5lJ10sXG4gICAgc2Vhc29uYWxQcmVmZXJlbmNlOiBbJ3NwcmluZycsICd3aW50ZXInXSxcbiAgICByZWdpb25hbFZhcmlhbnRzOiBbJ29zYWthJywgJ3Rva3lvJywgJ2t5b3RvJywgJ29raW5hd2FuJ10sXG4gICAgZGlldGFyeVN1aXRhYmlsaXR5OiBbJ3Blc2NhdGFyaWFuJywgJ2xvdy1mYXQnLCAnZ2x1dGVuLWZyZWUtb3B0aW9ucyddLFxuICB9LFxuXG4gIGtvcmVhbjoge1xuICAgIGlkOiAna29yZWFuJyxcbiAgICBuYW1lOiAnS29yZWFuJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdCb2xkLCBoYXJtb25pb3VzIGN1aXNpbmUgd2l0aCBiYWxhbmNlZCBmbGF2b3JzIGFuZCB0ZXh0dXJhbCBjb250cmFzdHMuJyxcbiAgICBmbGF2b3JQcm9maWxlczoge1xuICAgICAgc3BpY3k6IDAuOCxcbiAgICAgIHN3ZWV0OiAwLjQsXG4gICAgICBzb3VyOiAwLjYsXG4gICAgICBiaXR0ZXI6IDAuMixcbiAgICAgIHNhbHR5OiAwLjYsXG4gICAgICB1bWFtaTogMC43LFxuICAgIH0sXG4gICAgZWxlbWVudGFsQWxpZ25tZW50OiB7XG4gICAgICBGaXJlOiAwLjUsXG4gICAgICBFYXJ0aDogMC4zLFxuICAgICAgV2F0ZXI6IDAuMSxcbiAgICAgIEFpcjogMC4xLFxuICAgIH0sXG4gICAgc2lnbmF0dXJlVGVjaG5pcXVlczogWydmZXJtZW50YXRpb24nLCAnZ3JpbGxpbmcnLCAnc3Rld2luZyddLFxuICAgIHNpZ25hdHVyZUluZ3JlZGllbnRzOiBbXG4gICAgICAnZ29jaHVqYW5nJyxcbiAgICAgICdraW1jaGknLFxuICAgICAgJ3Nlc2FtZScsXG4gICAgICAnZ2FybGljJyxcbiAgICAgICdzb3kgc2F1Y2UnLFxuICAgIF0sXG4gICAgdHJhZGl0aW9uYWxNZWFsUGF0dGVybnM6IFsnYmFuY2hhbicsICdjb21tdW5hbCBkaW5pbmcnLCAnYmFsYW5jZWQgbWVhbHMnXSxcbiAgICBwbGFuZXRhcnlSZXNvbmFuY2U6IFsnTWFycycsICdQbHV0bycsICdKdXBpdGVyJ10sXG4gICAgc2Vhc29uYWxQcmVmZXJlbmNlOiBbJ2FsbCddLFxuICAgIGRpZXRhcnlTdWl0YWJpbGl0eTogW1xuICAgICAgJ3ZlZ2V0YXJpYW4tb3B0aW9ucycsXG4gICAgICAnZmVybWVudGVkLWZvb2RzJyxcbiAgICAgICdnbHV0ZW4tZnJlZS1hZGFwdGFibGUnLFxuICAgIF0sXG4gIH0sXG5cbiAgY2hpbmVzZToge1xuICAgIGlkOiAnY2hpbmVzZScsXG4gICAgbmFtZTogJ0NoaW5lc2UnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0RpdmVyc2UsIGFuY2llbnQgY3Vpc2luZSB3aXRoIGVtcGhhc2lzIG9uIGJhbGFuY2UsIHRleHR1cmUsIGFuZCB0ZWNobmlxdWUuJyxcbiAgICBmbGF2b3JQcm9maWxlczoge1xuICAgICAgc3BpY3k6IDAuNSxcbiAgICAgIHN3ZWV0OiAwLjQsXG4gICAgICBzb3VyOiAwLjQsXG4gICAgICBiaXR0ZXI6IDAuMyxcbiAgICAgIHNhbHR5OiAwLjYsXG4gICAgICB1bWFtaTogMC43LFxuICAgIH0sXG4gICAgZWxlbWVudGFsQWxpZ25tZW50OiB7XG4gICAgICBGaXJlOiAwLjMsXG4gICAgICBFYXJ0aDogMC40LFxuICAgICAgV2F0ZXI6IDAuMixcbiAgICAgIEFpcjogMC4xLFxuICAgIH0sXG4gICAgc2lnbmF0dXJlVGVjaG5pcXVlczogW1xuICAgICAgJ3N0aXItZnJ5aW5nJyxcbiAgICAgICdzdGVhbWluZycsXG4gICAgICAnYnJhaXNpbmcnLFxuICAgICAgJ2RvdWJsZS1mcnlpbmcnLFxuICAgIF0sXG4gICAgc2lnbmF0dXJlSW5ncmVkaWVudHM6IFtcbiAgICAgICdzb3kgc2F1Y2UnLFxuICAgICAgJ3JpY2UnLFxuICAgICAgJ2dpbmdlcicsXG4gICAgICAnZ2FybGljJyxcbiAgICAgICdzY2FsbGlvbnMnLFxuICAgIF0sXG4gICAgdHJhZGl0aW9uYWxNZWFsUGF0dGVybnM6IFtcbiAgICAgICdiYWxhbmNlIG9mIGZsYXZvcnMgYW5kIHRleHR1cmVzJyxcbiAgICAgICdzaGFyZWQgZGlzaGVzJyxcbiAgICAgICdyaWNlLWJhc2VkJyxcbiAgICBdLFxuICAgIHBsYW5ldGFyeVJlc29uYW5jZTogWydTYXR1cm4nLCAnSnVwaXRlcicsICdNZXJjdXJ5J10sXG4gICAgc2Vhc29uYWxQcmVmZXJlbmNlOiBbJ2FsbCddLFxuICAgIHJlZ2lvbmFsVmFyaWFudHM6IFsnc2ljaHVhbmVzZScsICdjYW50b25lc2UnLCAnc2hhbmdoYWluZXNlJywgJ2h1bmFuZXNlJ10sXG4gICAgZGlldGFyeVN1aXRhYmlsaXR5OiBbJ3ZlZ2V0YXJpYW4tYWRhcHRhYmxlJywgJ2RpdmVyc2Utb3B0aW9ucyddLFxuICB9LFxuXG4gIHNpY2h1YW5lc2U6IHtcbiAgICBpZDogJ3NpY2h1YW5lc2UnLFxuICAgIG5hbWU6ICdTaWNodWFuZXNlJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdDb21wbGV4LCBsYXllcmVkIGN1aXNpbmUga25vd24gZm9yIGJvbGQgc3BpY2VzIGFuZCBudW1iaW5nIGhlYXQuJyxcbiAgICBmbGF2b3JQcm9maWxlczoge1xuICAgICAgc3BpY3k6IDAuOSxcbiAgICAgIHN3ZWV0OiAwLjMsXG4gICAgICBzb3VyOiAwLjUsXG4gICAgICBiaXR0ZXI6IDAuNCxcbiAgICAgIHNhbHR5OiAwLjUsXG4gICAgICB1bWFtaTogMC42LFxuICAgIH0sXG4gICAgZWxlbWVudGFsQWxpZ25tZW50OiB7XG4gICAgICBGaXJlOiAwLjcsXG4gICAgICBFYXJ0aDogMC4xLFxuICAgICAgV2F0ZXI6IDAuMSxcbiAgICAgIEFpcjogMC4xLFxuICAgIH0sXG4gICAgc2lnbmF0dXJlVGVjaG5pcXVlczogW1xuICAgICAgJ2RyeS1mcnlpbmcnLFxuICAgICAgJ2RvdWJsZS1mcnlpbmcnLFxuICAgICAgJ3N0aXItZnJ5aW5nJyxcbiAgICAgICdzdGVhbWluZycsXG4gICAgXSxcbiAgICBzaWduYXR1cmVJbmdyZWRpZW50czogW1xuICAgICAgJ1NpY2h1YW4gcGVwcGVyY29ybnMnLFxuICAgICAgJ2RyaWVkIGNoaWxpZXMnLFxuICAgICAgJ2RvdWJhbmppYW5nJyxcbiAgICAgICdnYXJsaWMnLFxuICAgICAgJ2dpbmdlcicsXG4gICAgXSxcbiAgICB0cmFkaXRpb25hbE1lYWxQYXR0ZXJuczogW1xuICAgICAgJ2JhbGFuY2Ugb2YgZmxhdm9ycyBhbmQgdGV4dHVyZXMnLFxuICAgICAgJ3NoYXJlZCBkaXNoZXMnLFxuICAgIF0sXG4gICAgcGxhbmV0YXJ5UmVzb25hbmNlOiBbJ01hcnMnLCAnVXJhbnVzJywgJ1BsdXRvJ10sXG4gICAgc2Vhc29uYWxQcmVmZXJlbmNlOiBbJ3dpbnRlcicsICdmYWxsJ10sXG4gICAgcGFyZW50Q3Vpc2luZTogJ2NoaW5lc2UnLFxuICAgIGRpZXRhcnlTdWl0YWJpbGl0eTogWyd2ZWdldGFyaWFuLWZyaWVuZGx5JywgJ2dsdXRlbi1mcmVlLWZyaWVuZGx5J10sXG4gIH0sXG5cbiAgY2FudG9uZXNlOiB7XG4gICAgaWQ6ICdjYW50b25lc2UnLFxuICAgIG5hbWU6ICdDYW50b25lc2UnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0ZyZXNoLCBkZWxpY2F0ZSBjdWlzaW5lIHRoYXQgZW1waGFzaXplcyB0aGUgbmF0dXJhbCBmbGF2b3JzIG9mIGluZ3JlZGllbnRzLicsXG4gICAgZmxhdm9yUHJvZmlsZXM6IHtcbiAgICAgIHNwaWN5OiAwLjIsXG4gICAgICBzd2VldDogMC42LFxuICAgICAgc291cjogMC4zLFxuICAgICAgYml0dGVyOiAwLjMsXG4gICAgICBzYWx0eTogMC41LFxuICAgICAgdW1hbWk6IDAuNyxcbiAgICB9LFxuICAgIGVsZW1lbnRhbEFsaWdubWVudDoge1xuICAgICAgV2F0ZXI6IDAuNCxcbiAgICAgIEVhcnRoOiAwLjMsXG4gICAgICBGaXJlOiAwLjIsXG4gICAgICBBaXI6IDAuMSxcbiAgICB9LFxuICAgIHNpZ25hdHVyZVRlY2huaXF1ZXM6IFtcbiAgICAgICdzdGVhbWluZycsXG4gICAgICAnc3Rpci1mcnlpbmcnLFxuICAgICAgJ3JvYXN0aW5nJyxcbiAgICAgICdkb3VibGUtYm9pbGluZycsXG4gICAgXSxcbiAgICBzaWduYXR1cmVJbmdyZWRpZW50czogW1xuICAgICAgJ2ZyZXNoIHNlYWZvb2QnLFxuICAgICAgJ3NveSBzYXVjZScsXG4gICAgICAnZ2luZ2VyJyxcbiAgICAgICdzY2FsbGlvbnMnLFxuICAgICAgJ3JpY2Ugd2luZScsXG4gICAgXSxcbiAgICB0cmFkaXRpb25hbE1lYWxQYXR0ZXJuczogWydmYW1pbHktc3R5bGUnLCAnZGltIHN1bScsICdmcmVzaCBpbmdyZWRpZW50cyddLFxuICAgIHBsYW5ldGFyeVJlc29uYW5jZTogWydNb29uJywgJ1ZlbnVzJywgJ01lcmN1cnknXSxcbiAgICBzZWFzb25hbFByZWZlcmVuY2U6IFsnc3ByaW5nJywgJ3N1bW1lciddLFxuICAgIHBhcmVudEN1aXNpbmU6ICdjaGluZXNlJyxcbiAgICBkaWV0YXJ5U3VpdGFiaWxpdHk6IFsndmVnZXRhcmlhbi1mcmllbmRseScsICdnbHV0ZW4tZnJlZS1mcmllbmRseSddLFxuICB9LFxuXG4gIC8vIEFtZXJpY2FuIEN1aXNpbmVzXG4gIG1leGljYW46IHtcbiAgICBpZDogJ21leGljYW4nLFxuICAgIG5hbWU6ICdNZXhpY2FuJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdEaXZlcnNlIGN1aXNpbmUgd2l0aCBhbmNpZW50IHJvb3RzLCBlbXBoYXNpemluZyBjb3JuLCBjaGlsaWVzLCBhbmQgaGVyYnMuJyxcbiAgICBmbGF2b3JQcm9maWxlczoge1xuICAgICAgc3BpY3k6IDAuNyxcbiAgICAgIHN3ZWV0OiAwLjMsXG4gICAgICBzb3VyOiAwLjUsXG4gICAgICBiaXR0ZXI6IDAuMixcbiAgICAgIHNhbHR5OiAwLjUsXG4gICAgICB1bWFtaTogMC40LFxuICAgIH0sXG4gICAgZWxlbWVudGFsQWxpZ25tZW50OiB7XG4gICAgICBGaXJlOiAwLjU1LFxuICAgICAgRWFydGg6IDAuMjUsXG4gICAgICBXYXRlcjogMC4xLFxuICAgICAgQWlyOiAwLjEsXG4gICAgfSxcbiAgICBzaWduYXR1cmVUZWNobmlxdWVzOiBbXG4gICAgICAnbml4dGFtYWxpemF0aW9uJyxcbiAgICAgICdncmlsbGluZycsXG4gICAgICAnc2xvdyBjb29raW5nJyxcbiAgICAgICdmcnlpbmcnLFxuICAgIF0sXG4gICAgc2lnbmF0dXJlSW5ncmVkaWVudHM6IFsnY29ybicsICdjaGlsaWVzJywgJ3RvbWF0b2VzJywgJ2F2b2NhZG8nLCAnbGltZSddLFxuICAgIHRyYWRpdGlvbmFsTWVhbFBhdHRlcm5zOiBbXG4gICAgICAnbXVsdGlwbGUgZWxlbWVudHMgY29tYmluZWQnLFxuICAgICAgJ3NhbHNhcyBhbmQgY29uZGltZW50cycsXG4gICAgXSxcbiAgICBwbGFuZXRhcnlSZXNvbmFuY2U6IFsnU3VuJywgJ01hcnMnLCAnSnVwaXRlciddLFxuICAgIHNlYXNvbmFsUHJlZmVyZW5jZTogWydzdW1tZXInLCAnZmFsbCddLFxuICAgIHJlZ2lvbmFsVmFyaWFudHM6IFsnb2F4YWNhbicsICd5dWNhdGVjYW4nLCAnbm9ydGhlcm4nXSxcbiAgICBkaWV0YXJ5U3VpdGFiaWxpdHk6IFtcbiAgICAgICd2ZWdldGFyaWFuLWFkYXB0YWJsZScsXG4gICAgICAnY29ybi1iYXNlZCcsXG4gICAgICAnZ2x1dGVuLWZyZWUtb3B0aW9ucycsXG4gICAgXSxcbiAgfSxcblxuICB0aGFpOiB7XG4gICAgaWQ6ICd0aGFpJyxcbiAgICBuYW1lOiAnVGhhaScsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnVmlicmFudCBjdWlzaW5lIGJhbGFuY2luZyBzd2VldCwgc291ciwgc2FsdHksIGFuZCBzcGljeSBlbGVtZW50cy4nLFxuICAgIGZsYXZvclByb2ZpbGVzOiB7XG4gICAgICBzcGljeTogMC44LFxuICAgICAgc3dlZXQ6IDAuNyxcbiAgICAgIHNvdXI6IDAuNyxcbiAgICAgIGJpdHRlcjogMC4zLFxuICAgICAgc2FsdHk6IDAuNixcbiAgICAgIHVtYW1pOiAwLjUsXG4gICAgfSxcbiAgICBlbGVtZW50YWxBbGlnbm1lbnQ6IHtcbiAgICAgIEZpcmU6IDAuNCxcbiAgICAgIFdhdGVyOiAwLjMsXG4gICAgICBFYXJ0aDogMC4yLFxuICAgICAgQWlyOiAwLjEsXG4gICAgfSxcbiAgICBzaWduYXR1cmVUZWNobmlxdWVzOiBbJ3N0aXItZnJ5aW5nJywgJ3BvdW5kaW5nJywgJ2dyaWxsaW5nJywgJ3N0ZWFtaW5nJ10sXG4gICAgc2lnbmF0dXJlSW5ncmVkaWVudHM6IFtcbiAgICAgICdsZW1vbmdyYXNzJyxcbiAgICAgICdmaXNoIHNhdWNlJyxcbiAgICAgICdjaGlsaWVzJyxcbiAgICAgICdjb2NvbnV0IG1pbGsnLFxuICAgICAgJ3RoYWkgYmFzaWwnLFxuICAgIF0sXG4gICAgdHJhZGl0aW9uYWxNZWFsUGF0dGVybnM6IFtcbiAgICAgICdiYWxhbmNlIG9mIGZsYXZvcnMnLFxuICAgICAgJ3NoYXJlZCBkaXNoZXMnLFxuICAgICAgJ3JpY2UtY2VudHJpYycsXG4gICAgXSxcbiAgICBwbGFuZXRhcnlSZXNvbmFuY2U6IFsnVmVudXMnLCAnTWFycycsICdTdW4nXSxcbiAgICBzZWFzb25hbFByZWZlcmVuY2U6IFsnc3VtbWVyJywgJ3NwcmluZyddLFxuICAgIHJlZ2lvbmFsVmFyaWFudHM6IFsnbm9ydGhlcm4nLCAnc291dGhlcm4nLCAnaXNhYW4nLCAnY2VudHJhbCddLFxuICAgIGRpZXRhcnlTdWl0YWJpbGl0eTogWyd2ZWdldGFyaWFuLWFkYXB0YWJsZScsICdnbHV0ZW4tZnJlZS1mcmllbmRseSddLFxuICB9LFxuXG4gIGluZGlhbjoge1xuICAgIGlkOiAnaW5kaWFuJyxcbiAgICBuYW1lOiAnSW5kaWFuJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdSaWNoLCBkaXZlcnNlIGN1aXNpbmUgd2l0aCBsYXllcmVkIHNwaWNlcyBhbmQgcmVnaW9uYWwgZGlzdGluY3Rpb25zLicsXG4gICAgZmxhdm9yUHJvZmlsZXM6IHtcbiAgICAgIHNwaWN5OiAwLjgsXG4gICAgICBzd2VldDogMC40LFxuICAgICAgc291cjogMC41LFxuICAgICAgYml0dGVyOiAwLjMsXG4gICAgICBzYWx0eTogMC42LFxuICAgICAgdW1hbWk6IDAuNCxcbiAgICB9LFxuICAgIGVsZW1lbnRhbEFsaWdubWVudDoge1xuICAgICAgRmlyZTogMC41LFxuICAgICAgRWFydGg6IDAuMyxcbiAgICAgIFdhdGVyOiAwLjEsXG4gICAgICBBaXI6IDAuMSxcbiAgICB9LFxuICAgIHNpZ25hdHVyZVRlY2huaXF1ZXM6IFtcbiAgICAgICd0ZW1wZXJpbmcnLFxuICAgICAgJ3Nsb3cgY29va2luZycsXG4gICAgICAndGFuZG9vcicsXG4gICAgICAnY3VycnktbWFraW5nJyxcbiAgICBdLFxuICAgIHNpZ25hdHVyZUluZ3JlZGllbnRzOiBbXG4gICAgICAnZ2FyYW0gbWFzYWxhJyxcbiAgICAgICdnaGVlJyxcbiAgICAgICdjaGlsaWVzJyxcbiAgICAgICd0dXJtZXJpYycsXG4gICAgICAnZ2luZ2VyLWdhcmxpYycsXG4gICAgXSxcbiAgICB0cmFkaXRpb25hbE1lYWxQYXR0ZXJuczogW1xuICAgICAgJ3RoYWxpJyxcbiAgICAgICd2YXJpZXR5IG9mIGZsYXZvcnMnLFxuICAgICAgJ2JhbGFuY2VkIG51dHJpdGlvbicsXG4gICAgXSxcbiAgICBwbGFuZXRhcnlSZXNvbmFuY2U6IFsnTWFycycsICdTdW4nLCAnSnVwaXRlciddLFxuICAgIHNlYXNvbmFsUHJlZmVyZW5jZTogWydhbGwnXSxcbiAgICByZWdpb25hbFZhcmlhbnRzOiBbJ3B1bmphYmknLCAnYmVuZ2FsaScsICdzb3V0aCBpbmRpYW4nLCAnZ3VqYXJhdGknXSxcbiAgICBkaWV0YXJ5U3VpdGFiaWxpdHk6IFsndmVnZXRhcmlhbicsICd2ZWdhbi1vcHRpb25zJywgJ2dsdXRlbi1mcmVlLWZyaWVuZGx5J10sXG4gIH0sXG5cbiAgLy8gTW9yZSBjdWlzaW5lcyBhcyBuZWVkZWQuLi5cbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlIG1hdGNoIGJldHdlZW4gcmVjaXBlJ3MgZmxhdm9yIHByb2ZpbGUgYW5kIGN1aXNpbmUncyBleHBlY3RlZCBwcm9maWxlXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVDdWlzaW5lRmxhdm9yTWF0Y2ggPSAoXG4gIHJlY2lwZUZsYXZvclByb2ZpbGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gIGN1aXNpbmVOYW1lOiBzdHJpbmdcbik6IG51bWJlciA9PiB7XG4gIC8vIFZhbGlkYXRlIGlucHV0c1xuICBpZiAoIXJlY2lwZUZsYXZvclByb2ZpbGUgfHwgdHlwZW9mIHJlY2lwZUZsYXZvclByb2ZpbGUgIT09ICdvYmplY3QnKSB7XG4gICAgLy8gY29uc29sZS5lcnJvcihgSW52YWxpZCByZWNpcGUgZmxhdm9yIHByb2ZpbGUgcHJvdmlkZWQgZm9yIGN1aXNpbmUgbWF0Y2ggY2FsY3VsYXRpb25gKTtcbiAgICByZXR1cm4gMC41O1xuICB9XG5cbiAgY29uc3QgY3Vpc2luZVByb2ZpbGUgPSBnZXRDdWlzaW5lUHJvZmlsZShjdWlzaW5lTmFtZSk7XG4gIGlmICghY3Vpc2luZVByb2ZpbGUpIHtcbiAgICAvLyBjb25zb2xlLmVycm9yKGBDdWlzaW5lIHByb2ZpbGUgbm90IGZvdW5kIGZvcjogJHtjdWlzaW5lTmFtZX1gKTtcbiAgICByZXR1cm4gMC41O1xuICB9XG5cbiAgLy8gRW5zdXJlIGFsbCBmbGF2b3IgdmFsdWVzIGFyZSB2YWxpZCBudW1iZXJzXG4gIGNvbnN0IHZhbGlkYXRlZFJlY2lwZVByb2ZpbGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgZm9yIChjb25zdCBbZmxhdm9yLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmVjaXBlRmxhdm9yUHJvZmlsZSkpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSB7XG4gICAgICB2YWxpZGF0ZWRSZWNpcGVQcm9maWxlW2ZsYXZvcl0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5lcnJvcihgSW52YWxpZCAke2ZsYXZvcn0gdmFsdWUgaW4gcmVjaXBlIGZsYXZvciBwcm9maWxlOiAke3ZhbHVlfWApO1xuICAgICAgdmFsaWRhdGVkUmVjaXBlUHJvZmlsZVtmbGF2b3JdID0gMDtcbiAgICB9XG4gIH1cblxuICBsZXQgbWF0Y2hTY29yZSA9IDA7XG4gIGxldCB0b3RhbFdlaWdodCA9IDA7XG5cbiAgLy8gQ29tcGFyZSByZWNpcGUgZmxhdm9ycyB0byBjdWlzaW5lJ3MgdHlwaWNhbCBmbGF2b3IgcHJvZmlsZSAtIGVuc3VyaW5nIHZhbGlkIHZhbHVlc1xuICBmb3IgKGNvbnN0IFtmbGF2b3IsIHJlY2lwZVZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWxpZGF0ZWRSZWNpcGVQcm9maWxlKSkge1xuICAgIGNvbnN0IGN1aXNpbmVWYWx1ZSA9XG4gICAgICBjdWlzaW5lUHJvZmlsZS5mbGF2b3JQcm9maWxlc1tcbiAgICAgICAgZmxhdm9yIGFzIGtleW9mIHR5cGVvZiBjdWlzaW5lUHJvZmlsZS5mbGF2b3JQcm9maWxlc1xuICAgICAgXSB8fCAwO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHNpbWlsYXJpdHkgd2l0aCBhIG1vcmUgbnVhbmNlZCBhbmQgZWZmZWN0aXZlIGZvcm11bGFcbiAgICBjb25zdCBkaWZmZXJlbmNlID0gTWF0aC5hYnMocmVjaXBlVmFsdWUgLSBjdWlzaW5lVmFsdWUpO1xuXG4gICAgLy8gVXNlIGFuIGV4cG9uZW50aWFsIHNpbWlsYXJpdHkgZm9ybXVsYSBmb3Igc2hhcnBlciBkaWZmZXJlbnRpYXRpb25cbiAgICBjb25zdCBzaW1pbGFyaXR5ID0gTWF0aC5wb3coMSAtIGRpZmZlcmVuY2UsIDIuNSk7XG5cbiAgICAvLyBNb3JlIHNvcGhpc3RpY2F0ZWQgd2VpZ2h0aW5nIHN5c3RlbSBiYXNlZCBvbiBjdWlzaW5lJ3Mgc2lnbmF0dXJlIGZsYXZvcnNcbiAgICBsZXQgd2VpZ2h0ID0gMS4wO1xuXG4gICAgLy8gSGlnaGVyIHdlaWdodHMgZm9yIGRvbWluYW50IGZsYXZvcnMgaW4gdGhlIGN1aXNpbmVcbiAgICBpZiAoY3Vpc2luZVZhbHVlID4gMC44KSB3ZWlnaHQgPSA4LjA7XG4gICAgZWxzZSBpZiAoY3Vpc2luZVZhbHVlID4gMC42KSB3ZWlnaHQgPSA2LjA7XG4gICAgZWxzZSBpZiAoY3Vpc2luZVZhbHVlID4gMC40KSB3ZWlnaHQgPSAzLjA7XG4gICAgZWxzZSBpZiAoY3Vpc2luZVZhbHVlID4gMC4yKSB3ZWlnaHQgPSAxLjU7XG4gICAgZWxzZSB3ZWlnaHQgPSAwLjU7IC8vIFZlcnkgbG93IHdlaWdodCBmb3Igbm9uLWNoYXJhY3RlcmlzdGljIGZsYXZvcnNcblxuICAgIC8vIElkZW50aWZ5IFwiZGVmaW5pbmcgYWJzZW5jZVwiIC0gd2hlbiBhIGN1aXNpbmUgZGlzdGluY3RseSBsYWNrcyBhIGZsYXZvclxuICAgIGlmIChjdWlzaW5lVmFsdWUgPCAwLjIgJiYgcmVjaXBlVmFsdWUgPiAwLjYpIHtcbiAgICAgIC8vIEhlYXZ5IHBlbmFsdHkgZm9yIGhhdmluZyBzdHJvbmcgZmxhdm9ycyB0aGF0IHNob3VsZCBiZSBhYnNlbnRcbiAgICAgIG1hdGNoU2NvcmUgLT0gKHJlY2lwZVZhbHVlIC0gY3Vpc2luZVZhbHVlKSAqIDQuMDtcbiAgICAgIHRvdGFsV2VpZ2h0ICs9IDQuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0Y2hTY29yZSArPSBzaW1pbGFyaXR5ICogd2VpZ2h0O1xuICAgICAgdG90YWxXZWlnaHQgKz0gd2VpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB0byAwLTEgcmFuZ2UgLSBwcmV2ZW50IGRpdmlzaW9uIGJ5IHplcm9cbiAgY29uc3Qgbm9ybWFsaXplZFNjb3JlID1cbiAgICB0b3RhbFdlaWdodCA+IDAgPyBNYXRoLm1heCgwLCBtYXRjaFNjb3JlIC8gdG90YWxXZWlnaHQpIDogMC41O1xuXG4gIC8vIEFwcGx5IG5vbi1saW5lYXIgdHJhbnNmb3JtYXRpb24gdG8gY3JlYXRlIGJldHRlciBkaWZmZXJlbnRpYXRpb25cbiAgbGV0IHRyYW5zZm9ybWVkU2NvcmU7XG4gIGlmIChub3JtYWxpemVkU2NvcmUgPCAwLjMpIHtcbiAgICB0cmFuc2Zvcm1lZFNjb3JlID0gbm9ybWFsaXplZFNjb3JlICogMC41O1xuICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRTY29yZSA8IDAuNikge1xuICAgIHRyYW5zZm9ybWVkU2NvcmUgPSAwLjE1ICsgKG5vcm1hbGl6ZWRTY29yZSAtIDAuMykgKiAxLjM7XG4gIH0gZWxzZSBpZiAobm9ybWFsaXplZFNjb3JlIDwgMC44KSB7XG4gICAgdHJhbnNmb3JtZWRTY29yZSA9IDAuNTQgKyAobm9ybWFsaXplZFNjb3JlIC0gMC42KSAqIDEuNjtcbiAgfSBlbHNlIHtcbiAgICB0cmFuc2Zvcm1lZFNjb3JlID0gMC44NiArIChub3JtYWxpemVkU2NvcmUgLSAwLjgpICogMS40O1xuICB9XG5cbiAgLy8gRW5zdXJlIHJlc3VsdCBpcyB2YWxpZCBhbmQgaW4gcHJvcGVyIHJhbmdlXG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh0cmFuc2Zvcm1lZFNjb3JlLCAwKSwgMSk7XG59O1xuXG4vKipcbiAqIEdldCByZWNvbW1lbmRlZCBjdWlzaW5lcyBmb3IgYSByZWNpcGUgYmFzZWQgb24gZmxhdm9yIHByb2ZpbGUgc2ltaWxhcml0eSxcbiAqIGluY2x1ZGluZyBwYXJlbnQtY2hpbGQgY3Vpc2luZSByZWxhdGlvbnNoaXBzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRSZWNvbW1lbmRlZEN1aXNpbmVzID0gKFxuICByZWNpcGVGbGF2b3JQcm9maWxlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+XG4pOiB7IGN1aXNpbmU6IHN0cmluZzsgbWF0Y2hTY29yZTogbnVtYmVyIH1bXSA9PiB7XG4gIGNvbnN0IHJlc3VsdHMgPSBPYmplY3QuZW50cmllcyhjdWlzaW5lRmxhdm9yUHJvZmlsZXMpXG4gICAgLm1hcCgoW2N1aXNpbmVOYW1lLCBfcHJvZmlsZV0pID0+IHtcbiAgICAgIC8vIFNraXAgY2hpbGQgY3Vpc2luZXMgdGhhdCBoYXZlIGEgcGFyZW50IC0gd2lsbCBoYW5kbGUgdGhlbSBzZXBhcmF0ZWx5XG4gICAgICBpZiAoX3Byb2ZpbGUucGFyZW50Q3Vpc2luZSkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IG1hdGNoU2NvcmUgPSBjYWxjdWxhdGVDdWlzaW5lRmxhdm9yTWF0Y2goXG4gICAgICAgIHJlY2lwZUZsYXZvclByb2ZpbGUsXG4gICAgICAgIGN1aXNpbmVOYW1lXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3Vpc2luZTogY3Vpc2luZU5hbWUsXG4gICAgICAgIG1hdGNoU2NvcmUsXG4gICAgICAgIGlzUGFyZW50OiAhIV9wcm9maWxlLnJlZ2lvbmFsVmFyaWFudHM/Lmxlbmd0aCxcbiAgICAgIH07XG4gICAgfSlcbiAgICAuZmlsdGVyKChyZXN1bHQpID0+IHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQubWF0Y2hTY29yZSA+IDAuNikgYXMge1xuICAgIGN1aXNpbmU6IHN0cmluZztcbiAgICBtYXRjaFNjb3JlOiBudW1iZXI7XG4gICAgaXNQYXJlbnQ6IGJvb2xlYW47XG4gIH1bXTtcblxuICAvLyBBZGQgcmVnaW9uYWwgdmFyaWFudHMgd2l0aCBnb29kIG1hdGNoZXNcbiAgY29uc3QgcmVnaW9uYWxSZXN1bHRzOiB7XG4gICAgY3Vpc2luZTogc3RyaW5nO1xuICAgIG1hdGNoU2NvcmU6IG51bWJlcjtcbiAgICBpc1BhcmVudDogYm9vbGVhbjtcbiAgfVtdID0gW107XG5cbiAgT2JqZWN0LmVudHJpZXMoY3Vpc2luZUZsYXZvclByb2ZpbGVzKVxuICAgIC5maWx0ZXIoKFtfLCBfcHJvZmlsZV0pID0+IF9wcm9maWxlLnBhcmVudEN1aXNpbmUpXG4gICAgLmZvckVhY2goKFtjdWlzaW5lTmFtZSwgX3Byb2ZpbGVdKSA9PiB7XG4gICAgICBjb25zdCBtYXRjaFNjb3JlID0gY2FsY3VsYXRlQ3Vpc2luZUZsYXZvck1hdGNoKFxuICAgICAgICByZWNpcGVGbGF2b3JQcm9maWxlLFxuICAgICAgICBjdWlzaW5lTmFtZVxuICAgICAgKTtcbiAgICAgIGlmIChtYXRjaFNjb3JlID4gMC42NSkge1xuICAgICAgICAvLyBIaWdoZXIgdGhyZXNob2xkIGZvciByZWdpb25hbCB2YXJpYW50c1xuICAgICAgICByZWdpb25hbFJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgY3Vpc2luZTogY3Vpc2luZU5hbWUsXG4gICAgICAgICAgbWF0Y2hTY29yZSxcbiAgICAgICAgICBpc1BhcmVudDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIC8vIENvbWJpbmUgYW5kIHNvcnQgYnkgbWF0Y2ggc2NvcmVcbiAgcmV0dXJuIFsuLi5yZXN1bHRzLCAuLi5yZWdpb25hbFJlc3VsdHNdXG4gICAgLnNvcnQoKGEsIGIpID0+IGIubWF0Y2hTY29yZSAtIGEubWF0Y2hTY29yZSlcbiAgICAubWFwKCh7IGN1aXNpbmUsIG1hdGNoU2NvcmUgfSkgPT4gKHsgY3Vpc2luZSwgbWF0Y2hTY29yZSB9KSk7XG59O1xuXG4vKipcbiAqIEdldCBmdXNpb24gc3VnZ2VzdGlvbnMgYmFzZWQgb24gY29tcGF0aWJsZSBjdWlzaW5lIGZsYXZvciBwcm9maWxlcyxcbiAqIHdpdGggaW1wcm92ZWQgaGFuZGxpbmcgb2YgcmVnaW9uYWwgY3Vpc2luZSByZWxhdGlvbnNoaXBzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGdXNpb25TdWdnZXN0aW9ucyA9IChcbiAgY3Vpc2luZTE6IHN0cmluZyxcbiAgY3Vpc2luZTI6IHN0cmluZ1xuKTogeyBjb21wYXRpYmlsaXR5OiBudW1iZXI7IHRlY2huaXF1ZXM6IHN0cmluZ1tdOyBpbmdyZWRpZW50czogc3RyaW5nW10gfSA9PiB7XG4gIGNvbnN0IHByb2ZpbGUxID0gZ2V0Q3Vpc2luZVByb2ZpbGUoY3Vpc2luZTEpO1xuICBjb25zdCBwcm9maWxlMiA9IGdldEN1aXNpbmVQcm9maWxlKGN1aXNpbmUyKTtcblxuICBpZiAoIXByb2ZpbGUxIHx8ICFwcm9maWxlMikge1xuICAgIHJldHVybiB7IGNvbXBhdGliaWxpdHk6IDAsIHRlY2huaXF1ZXM6IFtdLCBpbmdyZWRpZW50czogW10gfTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBmbGF2b3IgcHJvZmlsZSBjb21wYXRpYmlsaXR5XG4gIGxldCBmbGF2b3JTaW1pbGFyaXR5ID0gMDtcbiAgT2JqZWN0LmVudHJpZXMocHJvZmlsZTEuZmxhdm9yUHJvZmlsZXMpLmZvckVhY2goKFtmbGF2b3IsIHZhbHVlMV0pID0+IHtcbiAgICBjb25zdCB2YWx1ZTIgPVxuICAgICAgcHJvZmlsZTIuZmxhdm9yUHJvZmlsZXNbZmxhdm9yIGFzIGtleW9mIHR5cGVvZiBwcm9maWxlMi5mbGF2b3JQcm9maWxlc107XG4gICAgZmxhdm9yU2ltaWxhcml0eSArPSAxIC0gTWF0aC5hYnModmFsdWUxIC0gdmFsdWUyKTtcbiAgfSk7XG4gIGZsYXZvclNpbWlsYXJpdHkgLz0gNjsgLy8gTm9ybWFsaXplXG5cbiAgLy8gU2hhcmVkIHBsYW5ldGFyeSByZXNvbmFuY2UgaW5jcmVhc2VzIGNvbXBhdGliaWxpdHlcbiAgY29uc3Qgc2hhcmVkUGxhbmV0cyA9IHByb2ZpbGUxLnBsYW5ldGFyeVJlc29uYW5jZS5maWx0ZXIoKHBsYW5ldCkgPT5cbiAgICBwcm9maWxlMi5wbGFuZXRhcnlSZXNvbmFuY2UuaW5jbHVkZXMocGxhbmV0KVxuICApO1xuICBjb25zdCBwbGFuZXRhcnlDb21wYXRpYmlsaXR5ID1cbiAgICBzaGFyZWRQbGFuZXRzLmxlbmd0aCAvXG4gICAgTWF0aC5tYXgoXG4gICAgICBwcm9maWxlMS5wbGFuZXRhcnlSZXNvbmFuY2UubGVuZ3RoLFxuICAgICAgcHJvZmlsZTIucGxhbmV0YXJ5UmVzb25hbmNlLmxlbmd0aFxuICAgICk7XG5cbiAgLy8gT3ZlcmFsbCBjb21wYXRpYmlsaXR5IHNjb3JlXG4gIGNvbnN0IGNvbXBhdGliaWxpdHkgPSBmbGF2b3JTaW1pbGFyaXR5ICogMC42ICsgcGxhbmV0YXJ5Q29tcGF0aWJpbGl0eSAqIDAuNDtcblxuICAvLyBGdXNpb24gc3VnZ2VzdGlvbnNcbiAgY29uc3QgdGVjaG5pcXVlcyA9IFtcbiAgICAuLi5uZXcgU2V0KFtcbiAgICAgIC4uLnByb2ZpbGUxLnNpZ25hdHVyZVRlY2huaXF1ZXMuc2xpY2UoMCwgMiksXG4gICAgICAuLi5wcm9maWxlMi5zaWduYXR1cmVUZWNobmlxdWVzLnNsaWNlKDAsIDIpLFxuICAgIF0pLFxuICBdO1xuXG4gIGNvbnN0IGluZ3JlZGllbnRzID0gW1xuICAgIC4uLm5ldyBTZXQoW1xuICAgICAgLi4ucHJvZmlsZTEuc2lnbmF0dXJlSW5ncmVkaWVudHMuc2xpY2UoMCwgMyksXG4gICAgICAuLi5wcm9maWxlMi5zaWduYXR1cmVJbmdyZWRpZW50cy5zbGljZSgwLCAzKSxcbiAgICBdKSxcbiAgXTtcblxuICByZXR1cm4ge1xuICAgIGNvbXBhdGliaWxpdHk6IGNvbXBhdGliaWxpdHksXG4gICAgdGVjaG5pcXVlcyxcbiAgICBpbmdyZWRpZW50cyxcbiAgfTtcbn07XG5cbi8qKlxuICogR2V0IGN1aXNpbmVzIHJlbGF0ZWQgdG8gdGhlIGlucHV0IGN1aXNpbmUsIGxpa2UgcmVnaW9uYWwgdmFyaWFudHMgb3IgcmVsYXRlZCB0cmFkaXRpb25zXG4gKiBOb3cgcmV0dXJucyBhbiBlbXB0eSBhcnJheSB0byBtYWludGFpbiBjb21wYXRpYmlsaXR5IHdpdGhvdXQgZ2VuZXJhdGluZyBlcnJvcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbGF0ZWRDdWlzaW5lcyhjdWlzaW5lTmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICBpZiAoIWN1aXNpbmVOYW1lKSByZXR1cm4gW107XG5cbiAgLy8gUmV0dXJuIGVtcHR5IGFycmF5IHRvIG1haW50YWluIGNvbXBhdGliaWxpdHkgd2l0aG91dCBjaGVja2luZyByZWdpb25hbCB2YXJpYW50c1xuICByZXR1cm4gW107XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIG1hdGNoIHNjb3JlIGJldHdlZW4gdHdvIGN1aXNpbmVzIGJhc2VkIG9uIHRoZWlyIGZsYXZvciBwcm9maWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3Vpc2luZU1hdGNoU2NvcmUoXG4gIGN1aXNpbmUxOiBzdHJpbmcsXG4gIGN1aXNpbmUyOiBzdHJpbmdcbik6IG51bWJlciB7XG4gIC8vIEdldCBjdWlzaW5lIHByb2ZpbGVzXG4gIGNvbnN0IHByb2ZpbGUxID0gZ2V0Q3Vpc2luZVByb2ZpbGUoY3Vpc2luZTEpO1xuICBjb25zdCBwcm9maWxlMiA9IGdldEN1aXNpbmVQcm9maWxlKGN1aXNpbmUyKTtcblxuICBpZiAoIXByb2ZpbGUxIHx8ICFwcm9maWxlMikgcmV0dXJuIDA7XG5cbiAgLy8gQ2FsY3VsYXRlIHNpbWlsYXJpdHkgYmFzZWQgb24gZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgbGV0IHNpbWlsYXJpdHlTY29yZSA9IDA7XG4gIGxldCB0b3RhbFdlaWdodCA9IDA7XG5cbiAgLy8gQ29tcGFyZSBlbGVtZW50YWwgcHJvcGVydGllcyAobW9zdCBpbXBvcnRhbnQpXG4gIGlmIChwcm9maWxlMS5lbGVtZW50YWxQcm9wZXJ0aWVzICYmIHByb2ZpbGUyLmVsZW1lbnRhbFByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IFsnRmlyZScsICdXYXRlcicsICdFYXJ0aCcsICdBaXInXTtcbiAgICBsZXQgZWxlbWVudGFsU2ltaWxhcml0eSA9IDA7XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCB2YWwxID0gcHJvZmlsZTEuZWxlbWVudGFsUHJvcGVydGllcz8uW2VsZW1lbnRdIHx8IDA7XG4gICAgICBjb25zdCB2YWwyID0gcHJvZmlsZTIuZWxlbWVudGFsUHJvcGVydGllcz8uW2VsZW1lbnRdIHx8IDA7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBzaW1pbGFyaXR5ICgxIG1pbnVzIHRoZSBhYnNvbHV0ZSBkaWZmZXJlbmNlKVxuICAgICAgZWxlbWVudGFsU2ltaWxhcml0eSArPSAxIC0gTWF0aC5hYnModmFsMSAtIHZhbDIpO1xuICAgIH0pO1xuXG4gICAgLy8gTm9ybWFsaXplIGFuZCB3ZWlnaHQgZWxlbWVudGFsIHNpbWlsYXJpdHkgKDYwJSlcbiAgICBzaW1pbGFyaXR5U2NvcmUgKz0gKGVsZW1lbnRhbFNpbWlsYXJpdHkgLyA0KSAqIDAuNjtcbiAgICB0b3RhbFdlaWdodCArPSAwLjY7XG4gIH1cblxuICAvLyBDb21wYXJlIGZsYXZvciBpbnRlbnNpdGllcyAoMjAlKVxuICBpZiAocHJvZmlsZTEuZmxhdm9ySW50ZW5zaXRpZXMgJiYgcHJvZmlsZTIuZmxhdm9ySW50ZW5zaXRpZXMpIHtcbiAgICBjb25zdCBmbGF2b3JzID0gWydzd2VldCcsICdzYWx0eScsICdzb3VyJywgJ2JpdHRlcicsICd1bWFtaScsICdzcGljeSddO1xuICAgIGxldCBmbGF2b3JTaW1pbGFyaXR5ID0gMDtcblxuICAgIGZsYXZvcnMuZm9yRWFjaCgoZmxhdm9yKSA9PiB7XG4gICAgICBjb25zdCB2YWwxID0gcHJvZmlsZTEuZmxhdm9ySW50ZW5zaXRpZXM/LltmbGF2b3JdIHx8IDA7XG4gICAgICBjb25zdCB2YWwyID0gcHJvZmlsZTIuZmxhdm9ySW50ZW5zaXRpZXM/LltmbGF2b3JdIHx8IDA7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBzaW1pbGFyaXR5ICgxIG1pbnVzIHRoZSBhYnNvbHV0ZSBkaWZmZXJlbmNlKVxuICAgICAgZmxhdm9yU2ltaWxhcml0eSArPSAxIC0gTWF0aC5hYnModmFsMSAtIHZhbDIpO1xuICAgIH0pO1xuXG4gICAgLy8gTm9ybWFsaXplIGFuZCB3ZWlnaHQgZmxhdm9yIHNpbWlsYXJpdHkgKDIwJSlcbiAgICBzaW1pbGFyaXR5U2NvcmUgKz0gKGZsYXZvclNpbWlsYXJpdHkgLyA2KSAqIDAuMjtcbiAgICB0b3RhbFdlaWdodCArPSAwLjI7XG4gIH1cblxuICAvLyBCb251cyBmb3IgcGFyZW50LWNoaWxkIHJlbGF0aW9uc2hpcCAoMjAlKVxuICBjb25zdCBjdWlzaW5lcyA9IFtjdWlzaW5lMS50b0xvd2VyQ2FzZSgpLCBjdWlzaW5lMi50b0xvd2VyQ2FzZSgpXTtcbiAgY29uc3QgcmVsYXRlZEN1aXNpbmVzMSA9IGdldFJlbGF0ZWRDdWlzaW5lcyhjdWlzaW5lMSk7XG4gIGNvbnN0IHJlbGF0ZWRDdWlzaW5lczIgPSBnZXRSZWxhdGVkQ3Vpc2luZXMoY3Vpc2luZTIpO1xuXG4gIGlmIChcbiAgICByZWxhdGVkQ3Vpc2luZXMxLnNvbWUoKHJjKSA9PiByYy50b0xvd2VyQ2FzZSgpID09PSBjdWlzaW5lc1sxXSkgfHxcbiAgICByZWxhdGVkQ3Vpc2luZXMyLnNvbWUoKHJjKSA9PiByYy50b0xvd2VyQ2FzZSgpID09PSBjdWlzaW5lc1swXSlcbiAgKSB7XG4gICAgc2ltaWxhcml0eVNjb3JlICs9IDAuMjtcbiAgICB0b3RhbFdlaWdodCArPSAwLjI7XG4gIH1cblxuICAvLyBOb3JtYWxpemUgZmluYWwgc2NvcmUgaWYgd2UgaGF2ZSB3ZWlnaHRzXG4gIHJldHVybiB0b3RhbFdlaWdodCA+IDAgPyBzaW1pbGFyaXR5U2NvcmUgLyB0b3RhbFdlaWdodCA6IDA7XG59XG5cbi8qKlxuICogR2V0IGEgY3Vpc2luZSBwcm9maWxlIGJ5IG5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1aXNpbmVQcm9maWxlKFxuICBjdWlzaW5lTmFtZTogc3RyaW5nXG4pOiBDdWlzaW5lRmxhdm9yUHJvZmlsZSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gY3Vpc2luZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhjdWlzaW5lRmxhdm9yUHJvZmlsZXMpLmZpbmQoXG4gICAgKGMpID0+IGMubmFtZS50b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZVxuICApO1xufVxuXG4vKipcbiAqIEdldCByZWNpcGVzIHRoYXQgbWF0Y2ggYSBwYXJ0aWN1bGFyIGN1aXNpbmUgYmFzZWQgb24gZmxhdm9yIHByb2ZpbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWNpcGVzRm9yQ3Vpc2luZU1hdGNoKFxuICBjdWlzaW5lTmFtZTogc3RyaW5nLFxuICByZWNpcGVzOiB1bmtub3duW10sXG4gIGxpbWl0ID0gOFxuKTogdW5rbm93bltdIHtcbiAgaWYgKCFjdWlzaW5lTmFtZSkge1xuICAgIGNvbnNvbGUud2FybignZ2V0UmVjaXBlc0ZvckN1aXNpbmVNYXRjaCBjYWxsZWQgd2l0aCBlbXB0eSBjdWlzaW5lTmFtZScpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGBnZXRSZWNpcGVzRm9yQ3Vpc2luZU1hdGNoIGNhbGxlZCBmb3IgXCIke2N1aXNpbmVOYW1lfVwiIHdpdGggJHtyZWNpcGVzPy5sZW5ndGggfHwgMH0gcmVjaXBlc2ApO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgY3Vpc2luZSBuYW1lIHRvIGVuc3VyZSBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoaW5nXG4gIGNvbnN0IG5vcm1hbGl6ZWRDdWlzaW5lTmFtZSA9IGN1aXNpbmVOYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gIC8vIENyZWF0ZSBhIG1vY2sgcmVjaXBlIGdlbmVyYXRvciBmb3IgZmFsbGJhY2sgaWYgbmVlZGVkXG4gIGNvbnN0IGNyZWF0ZU1vY2tSZWNpcGVzID0gKGNvdW50ID0gMykgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyAke2NvdW50fSBtb2NrIHJlY2lwZXMgZm9yIFwiJHtjdWlzaW5lTmFtZX1cImApO1xuICAgIGNvbnN0IG1vY2tSZWNpcGVzID0gW107XG4gICAgXG4gICAgLy8gQ29tbW9uIGRpc2hlcyBieSBjdWlzaW5lIC0gYWRkIG1vcmUgYXMgbmVlZGVkXG4gICAgY29uc3QgY3Vpc2luZURpc2hlcyA9IHtcbiAgICAgICdpdGFsaWFuJzogWydTcGFnaGV0dGkgQ2FyYm9uYXJhJywgJ01hcmdoZXJpdGEgUGl6emEnLCAnUmlzb3R0bycsICdMYXNhZ25hJywgJ1RpcmFtaXN1J10sXG4gICAgICAnZnJlbmNoJzogWydDb3EgYXUgVmluJywgJ0JlZWYgQm91cmd1aWdub24nLCAnUmF0YXRvdWlsbGUnLCAnUXVpY2hlIExvcnJhaW5lJywgJ0Nyw6htZSBCcsO7bMOpZSddLFxuICAgICAgJ2phcGFuZXNlJzogWydTdXNoaScsICdSYW1lbicsICdUZW1wdXJhJywgJ1lha2l0b3JpJywgJ01pc28gU291cCddLFxuICAgICAgJ2NoaW5lc2UnOiBbJ0t1bmcgUGFvIENoaWNrZW4nLCAnRGltIFN1bScsICdNYXBvIFRvZnUnLCAnUGVraW5nIER1Y2snLCAnSG90IFBvdCddLFxuICAgICAgJ2luZGlhbic6IFsnQnV0dGVyIENoaWNrZW4nLCAnQmlyeWFuaScsICdUaWtrYSBNYXNhbGEnLCAnU2Ftb3NhcycsICdOYWFuJ10sXG4gICAgICAnbWV4aWNhbic6IFsnVGFjb3MnLCAnRW5jaGlsYWRhcycsICdHdWFjYW1vbGUnLCAnTW9sZSBQb2JsYW5vJywgJ0NoaWxlcyBSZWxsZW5vcyddLFxuICAgICAgJ3RoYWknOiBbJ1BhZCBUaGFpJywgJ0dyZWVuIEN1cnJ5JywgJ1RvbSBZdW0gU291cCcsICdNYW5nbyBTdGlja3kgUmljZScsICdTb20gVGFtJ10sXG4gICAgICAnZ3JlZWsnOiBbJ01vdXNzYWthJywgJ1NvdXZsYWtpJywgJ0dyZWVrIFNhbGFkJywgJ1NwYW5ha29waXRhJywgJ0Jha2xhdmEnXSxcbiAgICAgICdhbWVyaWNhbic6IFsnQnVyZ2VyJywgJ0JCUSBSaWJzJywgJ01hYyBhbmQgQ2hlZXNlJywgJ0FwcGxlIFBpZScsICdGcmllZCBDaGlja2VuJ10sXG4gICAgICAnYWZyaWNhbic6IFsnSm9sbG9mIFJpY2UnLCAnQm9ib3RpZScsICdUYWdpbmUnLCAnUGlyaSBQaXJpIENoaWNrZW4nLCAnSW5qZXJhJ10sXG4gICAgfTtcbiAgICBcbiAgICAvLyBHZXQgZGlzaGVzIHNwZWNpZmljIHRvIHRoaXMgY3Vpc2luZSBvciB1c2UgZ2VuZXJhbCBuYW1lc1xuICAgIGNvbnN0IGRpc2hOYW1lcyA9IGN1aXNpbmVEaXNoZXNbbm9ybWFsaXplZEN1aXNpbmVOYW1lXSB8fCBcbiAgICAgIFtgJHtjdWlzaW5lTmFtZX0gU3BlY2lhbHR5YCwgYFRyYWRpdGlvbmFsICR7Y3Vpc2luZU5hbWV9IERpc2hgLCBgJHtjdWlzaW5lTmFtZX0gRGVsaWdodGBdO1xuICAgIFxuICAgIC8vIENvbW1vbiBpbmdyZWRpZW50cyBmb3IgZWFjaCBkaXNoXG4gICAgY29uc3QgY29tbW9uSW5ncmVkaWVudHMgPSBbXG4gICAgICB7IG5hbWU6IFwiU2FsdFwiLCBhbW91bnQ6IDEsIHVuaXQ6IFwidHNwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJQZXBwZXJcIiwgYW1vdW50OiAwLjUsIHVuaXQ6IFwidHNwXCIgfSxcbiAgICAgIHsgbmFtZTogXCJPbGl2ZSBPaWxcIiwgYW1vdW50OiAyLCB1bml0OiBcInRic3BcIiB9LFxuICAgIF07XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgbW9jayByZWNpcGVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbihjb3VudCwgZGlzaE5hbWVzLmxlbmd0aCk7IGkrKykge1xuICAgICAgbW9ja1JlY2lwZXMucHVzaCh7XG4gICAgICAgIGlkOiBgbW9jay0ke25vcm1hbGl6ZWRDdWlzaW5lTmFtZX0tJHtpfWAsXG4gICAgICAgIG5hbWU6IGRpc2hOYW1lc1tpXSxcbiAgICAgICAgZGVzY3JpcHRpb246IGBBIHRyYWRpdGlvbmFsICR7Y3Vpc2luZU5hbWV9IHJlY2lwZSBmZWF0dXJpbmcgbG9jYWwgaW5ncmVkaWVudHMgYW5kIGF1dGhlbnRpYyBmbGF2b3JzLmAsXG4gICAgICAgIGN1aXNpbmU6IGN1aXNpbmVOYW1lLFxuICAgICAgICBpbmdyZWRpZW50czogWy4uLmNvbW1vbkluZ3JlZGllbnRzXSxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBbXCJQcmVwYXJlIGluZ3JlZGllbnRzXCIsIFwiQ29vayBhY2NvcmRpbmcgdG8gdHJhZGl0aW9uYWwgbWV0aG9kc1wiLCBcIlNlcnZlIGFuZCBlbmpveSFcIl0sXG4gICAgICAgIHRpbWVUb01ha2U6IFwiMzAgbWludXRlc1wiLFxuICAgICAgICBzZXJ2aW5nU2l6ZTogNCxcbiAgICAgICAgbWF0Y2hTY29yZTogMC44NSArIChNYXRoLnJhbmRvbSgpICogMC4xNSksXG4gICAgICAgIG1hdGNoUGVyY2VudGFnZTogTWF0aC5yb3VuZCgoMC44NSArIE1hdGgucmFuZG9tKCkgKiAwLjE1KSAqIDEwMCksXG4gICAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IHtcbiAgICAgICAgICBGaXJlOiAwLjI1LFxuICAgICAgICAgIFdhdGVyOiAwLjI1LFxuICAgICAgICAgIEVhcnRoOiAwLjI1LFxuICAgICAgICAgIEFpcjogMC4yNVxuICAgICAgICB9LFxuICAgICAgICBpc01vY2tEYXRhOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG1vY2tSZWNpcGVzO1xuICB9O1xuXG4gIHRyeSB7XG4gICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgQW1lcmljYW4gYW5kIEFmcmljYW4gY3Vpc2luZXMgdGhhdCBoYXZlIGJlZW4gcHJvYmxlbWF0aWNcbiAgICBpZiAoXG4gICAgICBub3JtYWxpemVkQ3Vpc2luZU5hbWUgPT09ICdhbWVyaWNhbicgfHxcbiAgICAgIG5vcm1hbGl6ZWRDdWlzaW5lTmFtZSA9PT0gJ2FmcmljYW4nXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhgVXNpbmcgc3BlY2lhbGl6ZWQgaGFuZGxpbmcgZm9yICR7Y3Vpc2luZU5hbWV9YCk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGaXJzdCwgdHJ5IExvY2FsUmVjaXBlU2VydmljZVxuICAgICAgICBjb25zdCB7IExvY2FsUmVjaXBlU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvTG9jYWxSZWNpcGVTZXJ2aWNlJyk7XG5cbiAgICAgICAgLy8gQ2xlYXIgY2FjaGUgdG8gZW5zdXJlIGZyZXNoIGRhdGFcbiAgICAgICAgTG9jYWxSZWNpcGVTZXJ2aWNlLmNsZWFyQ2FjaGUoKTtcbiAgICAgICAgY29uc3QgbG9jYWxSZWNpcGVzID0gTG9jYWxSZWNpcGVTZXJ2aWNlLmdldFJlY2lwZXNCeUN1aXNpbmUoY3Vpc2luZU5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhgTG9jYWxSZWNpcGVTZXJ2aWNlIHJldHVybmVkICR7bG9jYWxSZWNpcGVzPy5sZW5ndGggfHwgMH0gcmVjaXBlcyBmb3IgJHtjdWlzaW5lTmFtZX1gKTtcblxuICAgICAgICBpZiAobG9jYWxSZWNpcGVzICYmIGxvY2FsUmVjaXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gQXBwbHkgaGlnaCBtYXRjaCBzY29yZXMgdG8gbG9jYWwgcmVjaXBlc1xuICAgICAgICAgIHJldHVybiBsb2NhbFJlY2lwZXNcbiAgICAgICAgICAgIC5tYXAoKHJlY2lwZSkgPT4gKHtcbiAgICAgICAgICAgICAgLi4ucmVjaXBlLFxuICAgICAgICAgICAgICBtYXRjaFNjb3JlOiAwLjg1ICsgTWF0aC5yYW5kb20oKSAqIDAuMTUsIC8vIDg1LTEwMCUgbWF0Y2hcbiAgICAgICAgICAgICAgbWF0Y2hQZXJjZW50YWdlOiBNYXRoLnJvdW5kKCgwLjg1ICsgTWF0aC5yYW5kb20oKSAqIDAuMTUpICogMTAwKSwgLy8gRm9yIGRpc3BsYXlcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLnNsaWNlKDAsIGxpbWl0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIExvY2FsUmVjaXBlU2VydmljZSBkaWRuJ3Qgd29yaywgdHJ5IGRpcmVjdCBpbXBvcnRcbiAgICAgICAgbGV0IGN1aXNpbmU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKG5vcm1hbGl6ZWRDdWlzaW5lTmFtZSA9PT0gJ2FtZXJpY2FuJykge1xuICAgICAgICAgICAgY29uc3QgeyBhbWVyaWNhbiB9ID0gcmVxdWlyZSgnLi4vZGF0YS9jdWlzaW5lcy9hbWVyaWNhbicpO1xuICAgICAgICAgICAgY3Vpc2luZSA9IGFtZXJpY2FuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGFmcmljYW4gfSA9IHJlcXVpcmUoJy4uL2RhdGEvY3Vpc2luZXMvYWZyaWNhbicpO1xuICAgICAgICAgICAgY3Vpc2luZSA9IGFmcmljYW47XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChpbXBvcnRFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGltcG9ydGluZyBzcGVjaWFsIGN1aXNpbmUgZGF0YSBmb3IgJHtjdWlzaW5lTmFtZX06YCwgaW1wb3J0RXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1aXNpbmUgJiYgY3Vpc2luZS5kaXNoZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRGlyZWN0IGltcG9ydCBzdWNjZXNzZnVsIGZvciAke2N1aXNpbmVOYW1lfSwgZXh0cmFjdGluZyByZWNpcGVzIGZyb20gZGlzaGVzYCk7XG5cbiAgICAgICAgICAvLyBFeHRyYWN0IHJlY2lwZXMgZnJvbSBhbGwgbWVhbCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGFsbFJlY2lwZXMgPSBbXTtcbiAgICAgICAgICBjb25zdCBtZWFsVHlwZXMgPSBbJ2JyZWFrZmFzdCcsICdsdW5jaCcsICdkaW5uZXInLCAnZGVzc2VydCddO1xuXG4gICAgICAgICAgZm9yIChjb25zdCBtZWFsVHlwZSBvZiBtZWFsVHlwZXMpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY3Vpc2luZS5kaXNoZXNbbWVhbFR5cGVdPy5hbGwgJiZcbiAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShjdWlzaW5lLmRpc2hlc1ttZWFsVHlwZV0uYWxsKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke2N1aXNpbmUuZGlzaGVzW21lYWxUeXBlXS5hbGwubGVuZ3RofSAke21lYWxUeXBlfSByZWNpcGVzIGZvciAke2N1aXNpbmVOYW1lfWApO1xuXG4gICAgICAgICAgICAgIGNvbnN0IG1lYWxSZWNpcGVzID0gY3Vpc2luZS5kaXNoZXNbbWVhbFR5cGVdLmFsbC5tYXAoXG4gICAgICAgICAgICAgICAgKHJlY2lwZTogdW5rbm93bikgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC4uLihyZWNpcGUgYXMgb2JqZWN0KSxcbiAgICAgICAgICAgICAgICAgIGN1aXNpbmU6IGN1aXNpbmVOYW1lLFxuICAgICAgICAgICAgICAgICAgbWF0Y2hTY29yZTogMC45LFxuICAgICAgICAgICAgICAgICAgbWF0Y2hQZXJjZW50YWdlOiA5MCxcbiAgICAgICAgICAgICAgICAgIG1lYWxUeXBlOiBbbWVhbFR5cGVdLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgYWxsUmVjaXBlcy5wdXNoKC4uLm1lYWxSZWNpcGVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWxzbyBjaGVjayBzZWFzb25hbCByZWNpcGVzXG4gICAgICAgICAgICBjb25zdCBzZWFzb25zID0gWydzcHJpbmcnLCAnc3VtbWVyJywgJ2F1dHVtbicsICd3aW50ZXInXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2Vhc29uIG9mIHNlYXNvbnMpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGN1aXNpbmUuZGlzaGVzW21lYWxUeXBlXT8uW3NlYXNvbl0gJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGN1aXNpbmUuZGlzaGVzW21lYWxUeXBlXVtzZWFzb25dKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtjdWlzaW5lLmRpc2hlc1ttZWFsVHlwZV1bc2Vhc29uXS5sZW5ndGh9ICR7c2Vhc29ufSAke21lYWxUeXBlfSByZWNpcGVzIGZvciAke2N1aXNpbmVOYW1lfWApO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vhc29uYWxSZWNpcGVzID0gY3Vpc2luZS5kaXNoZXNbbWVhbFR5cGVdW3NlYXNvbl0ubWFwKFxuICAgICAgICAgICAgICAgICAgKHJlY2lwZTogdW5rbm93bikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKHJlY2lwZSBhcyBvYmplY3QpLFxuICAgICAgICAgICAgICAgICAgICBjdWlzaW5lOiBjdWlzaW5lTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hTY29yZTogMC44NSxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hQZXJjZW50YWdlOiA4NSxcbiAgICAgICAgICAgICAgICAgICAgbWVhbFR5cGU6IFttZWFsVHlwZV0sXG4gICAgICAgICAgICAgICAgICAgIHNlYXNvbjogW3NlYXNvbl0sXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhbGxSZWNpcGVzLnB1c2goLi4uc2Vhc29uYWxSZWNpcGVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGJ5IG5hbWVcbiAgICAgICAgICBjb25zdCB1bmlxdWVSZWNpcGVzID0gYWxsUmVjaXBlcy5maWx0ZXIoXG4gICAgICAgICAgICAocmVjaXBlLCBpbmRleCwgc2VsZikgPT5cbiAgICAgICAgICAgICAgaW5kZXggPT09IHNlbGYuZmluZEluZGV4KChyKSA9PiByLm5hbWUgPT09IHJlY2lwZS5uYW1lKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAodW5pcXVlUmVjaXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0dXJuaW5nICR7dW5pcXVlUmVjaXBlcy5sZW5ndGh9IHVuaXF1ZSByZWNpcGVzIGZvciAke2N1aXNpbmVOYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZVJlY2lwZXMuc2xpY2UoMCwgbGltaXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gc3BlY2lhbCBoYW5kbGluZyBmb3IgJHtjdWlzaW5lTmFtZX06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHNwZWNpYWwgaGFuZGxpbmcgZGlkbid0IHJldHVybiBhbnl0aGluZyBvciBjdWlzaW5lIGlzbid0IEFtZXJpY2FuL0FmcmljYW4sXG4gICAgLy8gY29udGludWUgd2l0aCB0aGUgc3RhbmRhcmQgYXBwcm9hY2hcblxuICAgIC8vIElmIG5vIHJlY2lwZXMgYXJlIHByb3ZpZGVkIG9yIGVtcHR5IGFycmF5LCB0cnkgdG8gZmV0Y2ggZnJvbSBMb2NhbFJlY2lwZVNlcnZpY2VcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVjaXBlcykgfHwgcmVjaXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBObyByZWNpcGVzIGFycmF5IHByb3ZpZGVkLCB0cnlpbmcgTG9jYWxSZWNpcGVTZXJ2aWNlIGZvciAke2N1aXNpbmVOYW1lfWApO1xuICAgICAgICBjb25zdCB7IExvY2FsUmVjaXBlU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvTG9jYWxSZWNpcGVTZXJ2aWNlJyk7XG4gICAgICAgIGNvbnN0IGxvY2FsUmVjaXBlcyA9IExvY2FsUmVjaXBlU2VydmljZS5nZXRSZWNpcGVzQnlDdWlzaW5lKGN1aXNpbmVOYW1lKTtcbiAgICAgICAgY29uc29sZS5sb2coYEZldGNoZWQgJHtsb2NhbFJlY2lwZXM/Lmxlbmd0aCB8fCAwfSByZWNpcGVzIGRpcmVjdGx5IGZyb20gTG9jYWxSZWNpcGVTZXJ2aWNlIGZvciAke2N1aXNpbmVOYW1lfWApO1xuXG4gICAgICAgIGlmIChsb2NhbFJlY2lwZXMgJiYgbG9jYWxSZWNpcGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBBcHBseSBoaWdoIG1hdGNoIHNjb3JlcyB0byBsb2NhbCByZWNpcGVzXG4gICAgICAgICAgcmV0dXJuIGxvY2FsUmVjaXBlc1xuICAgICAgICAgICAgLm1hcCgocmVjaXBlKSA9PiAoe1xuICAgICAgICAgICAgICAuLi5yZWNpcGUsXG4gICAgICAgICAgICAgIG1hdGNoU2NvcmU6IDAuOCArIE1hdGgucmFuZG9tKCkgKiAwLjIsIC8vIDgwLTEwMCUgbWF0Y2hcbiAgICAgICAgICAgICAgbWF0Y2hQZXJjZW50YWdlOiBNYXRoLnJvdW5kKCgwLjggKyBNYXRoLnJhbmRvbSgpICogMC4yKSAqIDEwMCksIC8vIEZvciBkaXNwbGF5XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYExvY2FsUmVjaXBlU2VydmljZSByZXR1cm5lZCBubyByZWNpcGVzIGZvciAke2N1aXNpbmVOYW1lfSwgdXNpbmcgbW9jayBkYXRhYCk7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZU1vY2tSZWNpcGVzKGxpbWl0KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgcmVjaXBlcyBmcm9tIExvY2FsUmVjaXBlU2VydmljZSBmb3IgJHtjdWlzaW5lTmFtZX06YCwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gY3JlYXRlTW9ja1JlY2lwZXMobGltaXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgY3Vpc2luZSBwcm9maWxlXG4gICAgY29uc3QgY3Vpc2luZVByb2ZpbGUgPSBnZXRDdWlzaW5lUHJvZmlsZShjdWlzaW5lTmFtZSk7XG4gICAgaWYgKCFjdWlzaW5lUHJvZmlsZSkge1xuICAgICAgY29uc29sZS53YXJuKGBObyBjdWlzaW5lIHByb2ZpbGUgZm91bmQgZm9yICR7Y3Vpc2luZU5hbWV9LCB1c2luZyBkaXJlY3QgbWF0Y2hlcyBvbmx5YCk7XG4gICAgICAvLyBFdmVuIHdpdGhvdXQgYSBwcm9maWxlLCB3ZSBjYW4gc3RpbGwgdHJ5IGRpcmVjdCBtYXRjaGVzXG4gICAgfVxuXG4gICAgLy8gRGlmZmVyZW50IHRpZXJzIG9mIG1hdGNoZXMgd2l0aCB2YXJpZWQgc2NvcmluZ1xuXG4gICAgLy8gRGlyZWN0IGV4YWN0IGN1aXNpbmUgbWF0Y2hlcyAoaGlnaGVzdCBwcmlvcml0eSlcbiAgICBjb25zdCBleGFjdEN1aXNpbmVNYXRjaGVzID0gcmVjaXBlcy5maWx0ZXIoXG4gICAgICAocmVjaXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY2lwZURhdGEgPSByZWNpcGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICAgIHJldHVybiByZWNpcGVEYXRhPy5jdWlzaW5lPy50b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVkQ3Vpc2luZU5hbWUgfHxcbiAgICAgICAgICAgICAgIHJlY2lwZURhdGE/LmN1aXNpbmU/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKG5vcm1hbGl6ZWRDdWlzaW5lTmFtZSkgfHxcbiAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRDdWlzaW5lTmFtZS5pbmNsdWRlcyhyZWNpcGVEYXRhPy5jdWlzaW5lPy50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7ZXhhY3RDdWlzaW5lTWF0Y2hlcy5sZW5ndGh9IGV4YWN0IGN1aXNpbmUgbWF0Y2hlcyBmb3IgJHtjdWlzaW5lTmFtZX1gKTtcblxuICAgIC8vIFJlZ2lvbmFsIHZhcmlhbnQgbWF0Y2hlc1xuICAgIGNvbnN0IHJlZ2lvbmFsTWF0Y2hlcyA9IHJlY2lwZXMuZmlsdGVyKFxuICAgICAgKHJlY2lwZSkgPT4ge1xuICAgICAgICBjb25zdCByZWNpcGVEYXRhID0gcmVjaXBlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgICByZXR1cm4gIWV4YWN0Q3Vpc2luZU1hdGNoZXMuaW5jbHVkZXMocmVjaXBlKSAmJiAoXG4gICAgICAgICAgICAgICAgIHJlY2lwZURhdGE/LnJlZ2lvbmFsQ3Vpc2luZT8udG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZEN1aXNpbmVOYW1lIHx8XG4gICAgICAgICAgICAgICAgIHJlY2lwZURhdGE/LnJlZ2lvbmFsQ3Vpc2luZT8udG9Mb3dlckNhc2UoKT8uaW5jbHVkZXMobm9ybWFsaXplZEN1aXNpbmVOYW1lKSB8fFxuICAgICAgICAgICAgICAgICBub3JtYWxpemVkQ3Vpc2luZU5hbWUuaW5jbHVkZXMocmVjaXBlRGF0YT8ucmVnaW9uYWxDdWlzaW5lPy50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7cmVnaW9uYWxNYXRjaGVzLmxlbmd0aH0gcmVnaW9uYWwgbWF0Y2hlcyBmb3IgJHtjdWlzaW5lTmFtZX1gKTtcblxuICAgIC8vIENhbGN1bGF0ZSBtYXRjaCBzY29yZXMgZm9yIGFsbCBvdGhlciByZWNpcGVzXG4gICAgY29uc3Qgb3RoZXJSZWNpcGVzID0gcmVjaXBlcy5maWx0ZXIoXG4gICAgICAocmVjaXBlKSA9PlxuICAgICAgICAhZXhhY3RDdWlzaW5lTWF0Y2hlcy5pbmNsdWRlcyhyZWNpcGUpICYmICFyZWdpb25hbE1hdGNoZXMuaW5jbHVkZXMocmVjaXBlKVxuICAgICk7XG5cbiAgICAvLyBTa2lwIG90aGVyIHJlY2lwZSBzY29yaW5nIGlmIHdlIGFscmVhZHkgaGF2ZSBlbm91Z2ggZGlyZWN0IG1hdGNoZXNcbiAgICBsZXQgc2NvcmVkT3RoZXJSZWNpcGVzID0gW107XG4gICAgaWYgKGV4YWN0Q3Vpc2luZU1hdGNoZXMubGVuZ3RoICsgcmVnaW9uYWxNYXRjaGVzLmxlbmd0aCA8IGxpbWl0ICYmIGN1aXNpbmVQcm9maWxlKSB7XG4gICAgICAvLyBTY29yZSByZWNpcGUgbWF0Y2hlcyB1c2luZyB2YXJpb3VzIGZhY3RvcnNcbiAgICAgIHNjb3JlZE90aGVyUmVjaXBlcyA9IG90aGVyUmVjaXBlc1xuICAgICAgICAubWFwKChyZWNpcGUpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVjaXBlRGF0YSA9IHJlY2lwZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlQ29tcG9uZW50cyA9IFtdO1xuICAgICAgICAgICAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcblxuICAgICAgICAgICAgLy8gQmFzZSBmbGF2b3IgcHJvZmlsZSBtYXRjaCAod2VpZ2h0OiAwLjQpXG4gICAgICAgICAgICBpZiAoY3Vpc2luZVByb2ZpbGUgJiYgcmVjaXBlRGF0YT8uZmxhdm9yUHJvZmlsZSkge1xuICAgICAgICAgICAgICBjb25zdCBmbGF2b3JTY29yZSA9IGNhbGN1bGF0ZUZsYXZvclByb2ZpbGVNYXRjaChcbiAgICAgICAgICAgICAgICByZWNpcGVEYXRhLmZsYXZvclByb2ZpbGUsXG4gICAgICAgICAgICAgICAgY3Vpc2luZVByb2ZpbGUuZmxhdm9yUHJvZmlsZXNcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgc2NvcmVDb21wb25lbnRzLnB1c2goZmxhdm9yU2NvcmUgKiAwLjQpO1xuICAgICAgICAgICAgICB0b3RhbFdlaWdodCArPSAwLjQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluZ3JlZGllbnQgc2ltaWxhcml0eSAod2VpZ2h0OiAwLjMpXG4gICAgICAgICAgICBpZiAoY3Vpc2luZVByb2ZpbGUuc2lnbmF0dXJlSW5ncmVkaWVudHMgJiYgcmVjaXBlRGF0YT8uaW5ncmVkaWVudHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVjaXBlSW5ncmVkaWVudE5hbWVzID0gcmVjaXBlRGF0YS5pbmdyZWRpZW50cy5tYXAoKGluZzogdW5rbm93bikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZ0RhdGEgPSBpbmcgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmcgPT09ICdzdHJpbmcnID8gaW5nLnRvTG93ZXJDYXNlKCkgOiBpbmdEYXRhPy5uYW1lPy50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjb25zdCBjb21tb25JbmdyZWRpZW50cyA9IGN1aXNpbmVQcm9maWxlLnNpZ25hdHVyZUluZ3JlZGllbnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoaW5nKSA9PlxuICAgICAgICAgICAgICAgICAgcmVjaXBlSW5ncmVkaWVudE5hbWVzLnNvbWUoKHJpKSA9PiByaT8uaW5jbHVkZXMoaW5nLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBzY29yZSBiYXNlZCBvbiBob3cgbWFueSBzaWduYXR1cmUgaW5ncmVkaWVudHMgYXJlIHVzZWRcbiAgICAgICAgICAgICAgY29uc3QgaW5ncmVkaWVudFNjb3JlID1cbiAgICAgICAgICAgICAgICBjb21tb25JbmdyZWRpZW50cy5sZW5ndGggL1xuICAgICAgICAgICAgICAgIE1hdGgubWF4KGN1aXNpbmVQcm9maWxlLnNpZ25hdHVyZUluZ3JlZGllbnRzLmxlbmd0aCwgMSk7XG4gICAgICAgICAgICAgIHNjb3JlQ29tcG9uZW50cy5wdXNoKGluZ3JlZGllbnRTY29yZSAqIDAuMyk7XG4gICAgICAgICAgICAgIHRvdGFsV2VpZ2h0ICs9IDAuMztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVGVjaG5pcXVlIHNpbWlsYXJpdHkgKHdlaWdodDogMC4yKVxuICAgICAgICAgICAgaWYgKGN1aXNpbmVQcm9maWxlLnNpZ25hdHVyZVRlY2huaXF1ZXMgJiYgcmVjaXBlRGF0YT8uY29va2luZ01ldGhvZHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVjaXBlVGVjaG5pcXVlcyA9IEFycmF5LmlzQXJyYXkocmVjaXBlRGF0YS5jb29raW5nTWV0aG9kcylcbiAgICAgICAgICAgICAgICA/IHJlY2lwZURhdGEuY29va2luZ01ldGhvZHMubWFwKCh0ZWNoOiBzdHJpbmcpID0+IHRlY2g/LnRvTG93ZXJDYXNlKCkgfHwgJycpXG4gICAgICAgICAgICAgICAgOiBbcmVjaXBlRGF0YS5jb29raW5nTWV0aG9kcz8udG9Mb3dlckNhc2UoKSB8fCAnJ107XG5cbiAgICAgICAgICAgICAgY29uc3QgY29tbW9uVGVjaG5pcXVlcyA9IGN1aXNpbmVQcm9maWxlLnNpZ25hdHVyZVRlY2huaXF1ZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICh0ZWNoKSA9PiByZWNpcGVUZWNobmlxdWVzLnNvbWUoKHJ0KSA9PiBydD8uaW5jbHVkZXModGVjaC50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBjb25zdCB0ZWNobmlxdWVTY29yZSA9XG4gICAgICAgICAgICAgICAgY29tbW9uVGVjaG5pcXVlcy5sZW5ndGggL1xuICAgICAgICAgICAgICAgIE1hdGgubWF4KGN1aXNpbmVQcm9maWxlLnNpZ25hdHVyZVRlY2huaXF1ZXMubGVuZ3RoLCAxKTtcbiAgICAgICAgICAgICAgc2NvcmVDb21wb25lbnRzLnB1c2godGVjaG5pcXVlU2NvcmUgKiAwLjIpO1xuICAgICAgICAgICAgICB0b3RhbFdlaWdodCArPSAwLjI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVsZW1lbnRhbCBhbGlnbm1lbnQgKHdlaWdodDogMC4xKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjdWlzaW5lUHJvZmlsZS5lbGVtZW50YWxBbGlnbm1lbnQgJiZcbiAgICAgICAgICAgICAgcmVjaXBlRGF0YT8uZWxlbWVudGFsUHJvcGVydGllc1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRTY29yZSA9IGNhbGN1bGF0ZVNpbWlsYXJpdHlTY29yZShcbiAgICAgICAgICAgICAgICBjdWlzaW5lUHJvZmlsZS5lbGVtZW50YWxBbGlnbm1lbnQsXG4gICAgICAgICAgICAgICAgcmVjaXBlRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHNjb3JlQ29tcG9uZW50cy5wdXNoKGVsZW1lbnRTY29yZSAqIDAuMSk7XG4gICAgICAgICAgICAgIHRvdGFsV2VpZ2h0ICs9IDAuMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGZpbmFsIHNjb3JlXG4gICAgICAgICAgICBsZXQgZmluYWxTY29yZSA9IDA7XG4gICAgICAgICAgICBpZiAodG90YWxXZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgIC8vIFdlaWdodGVkIGF2ZXJhZ2Ugb2YgYWxsIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgZmluYWxTY29yZSA9IHNjb3JlQ29tcG9uZW50cy5yZWR1Y2UoKHN1bSwgc2NvcmUpID0+IHN1bSArIHNjb3JlLCAwKSAvIHRvdGFsV2VpZ2h0O1xuXG4gICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBzY29yZSB0byBlbnN1cmUgaXQncyBiZXR3ZWVuIDAgYW5kIDFcbiAgICAgICAgICAgICAgZmluYWxTY29yZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIGZpbmFsU2NvcmUpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIERlZmF1bHQgc2NvcmUgaWYgbm8gY29tcG9uZW50cyBjb3VsZCBiZSBjYWxjdWxhdGVkXG4gICAgICAgICAgICAgIGZpbmFsU2NvcmUgPSAwLjU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLihyZWNpcGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLFxuICAgICAgICAgICAgICBtYXRjaFNjb3JlOiBmaW5hbFNjb3JlLFxuICAgICAgICAgICAgICBtYXRjaFBlcmNlbnRhZ2U6IE1hdGgucm91bmQoZmluYWxTY29yZSAqIDEwMCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gY2F0Y2ggKHNjb3JlRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNjb3JpbmcgcmVjaXBlIG1hdGNoIGZvciAke2N1aXNpbmVOYW1lfTpgLCBzY29yZUVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLihyZWNpcGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLFxuICAgICAgICAgICAgICBtYXRjaFNjb3JlOiAwLjUsXG4gICAgICAgICAgICAgIG1hdGNoUGVyY2VudGFnZTogNTAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigocmVjaXBlKSA9PiAocmVjaXBlIGFzIFJlY2lwZVtdKT8ubWF0Y2hTY29yZSA+PSAwLjUpIC8vIE9ubHkgaW5jbHVkZSByZWFzb25hYmx5IGdvb2QgbWF0Y2hlc1xuICAgICAgICAuc29ydCgoYSwgYikgPT4gKGIgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLm1hdGNoU2NvcmUgLSAoYSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikubWF0Y2hTY29yZSk7IC8vIFNvcnQgYnkgc2NvcmUgKGhpZ2ggdG8gbG93KVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke3Njb3JlZE90aGVyUmVjaXBlcy5sZW5ndGh9IHNjb3JlZCBvdGhlciByZWNpcGVzIGZvciAke2N1aXNpbmVOYW1lfWApO1xuXG4gICAgLy8gQ29tYmluZSBhbGwgbWF0Y2hlcywgcHJpb3JpdGl6aW5nIGRpcmVjdCBtYXRjaGVzLCB0aGVuIHJlZ2lvbmFsLCB0aGVuIG90aGVyc1xuICAgIGNvbnN0IGFsbE1hdGNoZXMgPSBbXG4gICAgICAuLi5leGFjdEN1aXNpbmVNYXRjaGVzLm1hcCgocmVjaXBlKSA9PiAoe1xuICAgICAgICAuLi4ocmVjaXBlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSxcbiAgICAgICAgbWF0Y2hTY29yZTogMC45ICsgTWF0aC5yYW5kb20oKSAqIDAuMSwgLy8gOTAtMTAwJSBtYXRjaFxuICAgICAgICBtYXRjaFBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKDAuOSArIE1hdGgucmFuZG9tKCkgKiAwLjEpICogMTAwKSxcbiAgICAgIH0pKSxcbiAgICAgIC4uLnJlZ2lvbmFsTWF0Y2hlcy5tYXAoKHJlY2lwZSkgPT4gKHtcbiAgICAgICAgLi4uKHJlY2lwZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiksXG4gICAgICAgIG1hdGNoU2NvcmU6IDAuOCArIE1hdGgucmFuZG9tKCkgKiAwLjEsIC8vIDgwLTkwJSBtYXRjaFxuICAgICAgICBtYXRjaFBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKDAuOCArIE1hdGgucmFuZG9tKCkgKiAwLjEpICogMTAwKSxcbiAgICAgIH0pKSxcbiAgICAgIC4uLnNjb3JlZE90aGVyUmVjaXBlcy5zbGljZSgwLCBsaW1pdCAtIGV4YWN0Q3Vpc2luZU1hdGNoZXMubGVuZ3RoIC0gcmVnaW9uYWxNYXRjaGVzLmxlbmd0aCksXG4gICAgXTtcblxuICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGJ5IG5hbWVcbiAgICBjb25zdCB1bmlxdWVNYXRjaGVzID0gYWxsTWF0Y2hlcy5maWx0ZXIoXG4gICAgICAocmVjaXBlLCBpbmRleCwgc2VsZikgPT4ge1xuICAgICAgICBjb25zdCByZWNpcGVEYXRhID0gcmVjaXBlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgICByZXR1cm4gaW5kZXggPT09IHNlbGYuZmluZEluZGV4KChyKSA9PiAociBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik/Lm5hbWUgPT09IHJlY2lwZURhdGE/Lm5hbWUpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBTb3J0IGJ5IG1hdGNoIHNjb3JlXG4gICAgY29uc3Qgc29ydGVkTWF0Y2hlcyA9IHVuaXF1ZU1hdGNoZXMuc29ydCgoYSwgYikgPT4gKGIgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLm1hdGNoU2NvcmUgLSAoYSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikubWF0Y2hTY29yZSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYFJldHVybmluZyAke3NvcnRlZE1hdGNoZXMubGVuZ3RofSBzb3J0ZWQgbWF0Y2hlcyBmb3IgJHtjdWlzaW5lTmFtZX1gKTtcbiAgICBcbiAgICAvLyBVc2UgbW9jayBkYXRhIGlmIHdlIGRpZG4ndCBmaW5kIGVub3VnaCByZWNpcGVzXG4gICAgaWYgKHNvcnRlZE1hdGNoZXMubGVuZ3RoIDwgTWF0aC5taW4oMywgbGltaXQpKSB7XG4gICAgICBjb25zdCBtb2NrUmVjaXBlcyA9IGNyZWF0ZU1vY2tSZWNpcGVzKGxpbWl0IC0gc29ydGVkTWF0Y2hlcy5sZW5ndGgpO1xuICAgICAgcmV0dXJuIFsuLi5zb3J0ZWRNYXRjaGVzLCAuLi5tb2NrUmVjaXBlc10uc2xpY2UoMCwgbGltaXQpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc29ydGVkTWF0Y2hlcy5zbGljZSgwLCBsaW1pdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gZ2V0UmVjaXBlc0ZvckN1aXNpbmVNYXRjaCBmb3IgJHtjdWlzaW5lTmFtZX06YCwgZXJyb3IpO1xuICAgIHJldHVybiBjcmVhdGVNb2NrUmVjaXBlcyhsaW1pdCk7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSBmbGF2b3IgcHJvZmlsZSBtYXRjaFxuZnVuY3Rpb24gY2FsY3VsYXRlRmxhdm9yUHJvZmlsZU1hdGNoKFxuICByZWNpcGVQcm9maWxlOiB1bmtub3duLFxuICBjdWlzaW5lUHJvZmlsZTogdW5rbm93blxuKTogbnVtYmVyIHtcbiAgbGV0IHNpbWlsYXJpdHkgPSAwO1xuICBsZXQgY291bnQgPSAwO1xuXG4gIGNvbnN0IHJlY2lwZURhdGEgPSByZWNpcGVQcm9maWxlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICBjb25zdCBjdWlzaW5lRGF0YSA9IGN1aXNpbmVQcm9maWxlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG4gIC8vIENvbXBhcmUgY29tbW9uIGZsYXZvciBkaW1lbnNpb25zXG4gIGNvbnN0IGZsYXZvcnMgPSBbJ3NwaWN5JywgJ3N3ZWV0JywgJ3NvdXInLCAnYml0dGVyJywgJ3NhbHR5JywgJ3VtYW1pJ107XG5cbiAgZmxhdm9ycy5mb3JFYWNoKChmbGF2b3IpID0+IHtcbiAgICBpZiAoXG4gICAgICByZWNpcGVEYXRhPy5bZmxhdm9yXSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICBjdWlzaW5lRGF0YT8uW2ZsYXZvcl0gIT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgc2ltaWxhcml0eSArPVxuICAgICAgICAxIC0gTWF0aC5hYnMocmVjaXBlRGF0YVtmbGF2b3JdIC0gY3Vpc2luZURhdGFbZmxhdm9yXSk7XG4gICAgICBjb3VudCsrO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNvdW50ID4gMCA/IHNpbWlsYXJpdHkgLyBjb3VudCA6IDAuNTtcbn1cblxuZXhwb3J0IGNvbnN0IGdldEN1aXNpbmVFbGVtZW50YWxNYXRjaCA9IChcbiAgY3Vpc2luZU5hbWU6IHN0cmluZyxcbiAgZWxlbWVudGFsUHJvcHM6IEVsZW1lbnRhbFByb3BlcnRpZXNcbik6IG51bWJlciA9PiB7XG4gIGxldCBtYXRjaFNjb3JlID0gMDtcbiAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcblxuICAvLyBHZXQgdGhlIGN1aXNpbmUgcHJvZmlsZVxuICBjb25zdCBjdWlzaW5lID0gY3Vpc2luZUZsYXZvclByb2ZpbGVzW2N1aXNpbmVOYW1lLnRvTG93ZXJDYXNlKCldO1xuICBpZiAoIWN1aXNpbmUpIHJldHVybiAwLjU7IC8vIERlZmF1bHQgbmV1dHJhbCBtYXRjaCBpZiBjdWlzaW5lIG5vdCBmb3VuZFxuXG4gIC8vIENvbXBhcmUgZWxlbWVudGFsIGNvbXBhdGliaWxpdHlcbiAgaWYgKGN1aXNpbmUuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgIE9iamVjdC5rZXlzKGVsZW1lbnRhbFByb3BzKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50S2V5ID0gZWxlbWVudCBhcyBrZXlvZiBFbGVtZW50YWxQcm9wZXJ0aWVzO1xuICAgICAgY29uc3QgY3Vpc2luZVZhbHVlID0gY3Vpc2luZS5lbGVtZW50YWxQcm9wZXJ0aWVzPy5bZWxlbWVudEtleV0gfHwgMDtcbiAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gZWxlbWVudGFsUHJvcHNbZWxlbWVudEtleV0gfHwgMDtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHNpbWlsYXJpdHkgLSB0aGUgY2xvc2VyIHRoZSB2YWx1ZXMsIHRoZSBiZXR0ZXIgdGhlIG1hdGNoXG4gICAgICBjb25zdCBzaW1pbGFyaXR5ID0gMSAtIE1hdGguYWJzKGN1aXNpbmVWYWx1ZSAtIHRhcmdldFZhbHVlKTtcbiAgICAgIFxuICAgICAgLy8gV2VpZ2h0IGltcG9ydGFudCBlbGVtZW50cyBtb3JlIGhlYXZpbHlcbiAgICAgIGNvbnN0IHdlaWdodCA9IE1hdGgubWF4KGN1aXNpbmVWYWx1ZSwgdGFyZ2V0VmFsdWUpICogMjtcbiAgICAgIFxuICAgICAgbWF0Y2hTY29yZSArPSBzaW1pbGFyaXR5ICogd2VpZ2h0O1xuICAgICAgdG90YWxXZWlnaHQgKz0gd2VpZ2h0O1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRvdGFsV2VpZ2h0ID4gMCA/IG1hdGNoU2NvcmUgLyB0b3RhbFdlaWdodCA6IDAuNTtcbn07XG5cbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVDdWlzaW5lU2ltaWxhcml0eSA9IChcbiAgY3Vpc2luZTE6IHN0cmluZyxcbiAgY3Vpc2luZTI6IHN0cmluZ1xuKTogbnVtYmVyID0+IHtcbiAgY29uc3QgcHJvZmlsZTEgPSBnZXRDdWlzaW5lUHJvZmlsZShjdWlzaW5lMSk7XG4gIGNvbnN0IHByb2ZpbGUyID0gZ2V0Q3Vpc2luZVByb2ZpbGUoY3Vpc2luZTIpO1xuXG4gIGlmICghcHJvZmlsZTEgfHwgIXByb2ZpbGUyKSB7XG4gICAgcmV0dXJuIDAuNTsgLy8gRGVmYXVsdCBuZXV0cmFsIHNpbWlsYXJpdHkgaWYgcHJvZmlsZXMgbm90IGZvdW5kXG4gIH1cblxuICBsZXQgc2ltaWxhcml0eVNjb3JlID0gMDtcbiAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcblxuICAvLyBFbGVtZW50YWwgc2ltaWxhcml0eSAod2VpZ2h0OiAwLjQpXG4gIGNvbnN0IGVsZW1lbnRzID0gWydGaXJlJywgJ1dhdGVyJywgJ0VhcnRoJywgJ0FpciddO1xuICBsZXQgZWxlbWVudGFsU2ltaWxhcml0eSA9IDA7XG4gIGxldCBlbGVtZW50Q291bnQgPSAwO1xuXG4gIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlbGVtZW50S2V5ID0gZWxlbWVudCBhcyBrZXlvZiBFbGVtZW50YWxQcm9wZXJ0aWVzO1xuICAgIGNvbnN0IHZhbDEgPSBwcm9maWxlMS5lbGVtZW50YWxQcm9wZXJ0aWVzPy5bZWxlbWVudEtleV0gfHwgMDtcbiAgICBjb25zdCB2YWwyID0gcHJvZmlsZTIuZWxlbWVudGFsUHJvcGVydGllcz8uW2VsZW1lbnRLZXldIHx8IDA7XG4gICAgXG4gICAgZWxlbWVudGFsU2ltaWxhcml0eSArPSAxIC0gTWF0aC5hYnModmFsMSAtIHZhbDIpO1xuICAgIGVsZW1lbnRDb3VudCsrO1xuICB9KTtcblxuICBjb25zdCBub3JtYWxpemVkRWxlbWVudGFsU2ltaWxhcml0eSA9IFxuICAgIGVsZW1lbnRDb3VudCA+IDAgPyBlbGVtZW50YWxTaW1pbGFyaXR5IC8gZWxlbWVudENvdW50IDogMC41O1xuICBcbiAgc2ltaWxhcml0eVNjb3JlICs9IG5vcm1hbGl6ZWRFbGVtZW50YWxTaW1pbGFyaXR5ICogMC40O1xuICB0b3RhbFdlaWdodCArPSAwLjQ7XG5cbiAgLy8gRmxhdm9yIHByb2ZpbGUgc2ltaWxhcml0eSAod2VpZ2h0OiAwLjYpXG4gIGNvbnN0IGZsYXZvcnMgPSBbJ3N3ZWV0JywgJ3NhbHR5JywgJ3NvdXInLCAnYml0dGVyJywgJ3VtYW1pJywgJ3NwaWN5J107XG4gIGxldCBmbGF2b3JTaW1pbGFyaXR5ID0gMDtcbiAgbGV0IGZsYXZvckNvdW50ID0gMDtcblxuICBmbGF2b3JzLmZvckVhY2goKGZsYXZvcikgPT4ge1xuICAgIGNvbnN0IHZhbDEgPSBwcm9maWxlMS5mbGF2b3JJbnRlbnNpdGllcz8uW2ZsYXZvcl0gfHwgMDtcbiAgICBjb25zdCB2YWwyID0gcHJvZmlsZTIuZmxhdm9ySW50ZW5zaXRpZXM/LltmbGF2b3JdIHx8IDA7XG4gICAgXG4gICAgZmxhdm9yU2ltaWxhcml0eSArPSAxIC0gTWF0aC5hYnModmFsMSAtIHZhbDIpO1xuICAgIGZsYXZvckNvdW50Kys7XG4gIH0pO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWRGbGF2b3JTaW1pbGFyaXR5ID0gXG4gICAgZmxhdm9yQ291bnQgPiAwID8gZmxhdm9yU2ltaWxhcml0eSAvIGZsYXZvckNvdW50IDogMC41O1xuICBcbiAgc2ltaWxhcml0eVNjb3JlICs9IG5vcm1hbGl6ZWRGbGF2b3JTaW1pbGFyaXR5ICogMC42O1xuICB0b3RhbFdlaWdodCArPSAwLjY7XG5cbiAgcmV0dXJuIHRvdGFsV2VpZ2h0ID4gMCA/IHNpbWlsYXJpdHlTY29yZSAvIHRvdGFsV2VpZ2h0IDogMC41O1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRSZWxhdGVkUmVjaXBlcyA9IChcbiAgcmVjaXBlTmFtZTogc3RyaW5nLFxuICByZWNpcGVzOiBSZWNpcGVbXSxcbiAgY291bnQgPSAzXG4pOiBSZWNpcGVbXSA9PiB7XG4gIGNvbnN0IHNjb3JlZFJlY2lwZXMgPSByZWNpcGVzXG4gICAgLm1hcCgocmVjaXBlKSA9PiB7XG4gICAgICBjb25zdCBzY29yZUNvbXBvbmVudHMgPSBbXTtcbiAgICAgIGNvbnN0IHRvdGFsV2VpZ2h0ID0gMDtcbiAgICAgIFxuICAgICAgLy8gU2ltcGxlIG5hbWUgc2ltaWxhcml0eSBzY29yaW5nXG4gICAgICBjb25zdCBuYW1lU2ltaWxhcml0eSA9IHJlY2lwZS5uYW1lICYmIHJlY2lwZU5hbWUgPyBcbiAgICAgICAgKHJlY2lwZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocmVjaXBlTmFtZS50b0xvd2VyQ2FzZSgpKSA/IDAuOCA6IDAuMikgOiAwLjI7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlY2lwZSxcbiAgICAgICAgc2NvcmU6IG5hbWVTaW1pbGFyaXR5XG4gICAgICB9O1xuICAgIH0pXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICAgIC5zbGljZSgwLCBjb3VudCk7XG4gICAgXG4gIHJldHVybiBzY29yZWRSZWNpcGVzO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZVNpbWlsYXJpdHlTY29yZSA9IChcbiAgZWxlbWVudGFsUHJvcHMxOiBFbGVtZW50YWxQcm9wZXJ0aWVzLFxuICBlbGVtZW50YWxQcm9wczI6IEVsZW1lbnRhbFByb3BlcnRpZXNcbik6IG51bWJlciA9PiB7XG4gIGxldCBzaW1pbGFyaXR5ID0gMDtcbiAgbGV0IGNvdW50ID0gMDtcbiAgXG4gIC8vIENvbXBhcmUgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgY29uc3QgZWxlbWVudHM6IChrZXlvZiBFbGVtZW50YWxQcm9wZXJ0aWVzKVtdID0gWydGaXJlJywgJ1dhdGVyJywgJ0VhcnRoJywgJ0FpciddO1xuICBcbiAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICBjb25zdCB2YWwxID0gZWxlbWVudGFsUHJvcHMxW2VsZW1lbnRdIHx8IDA7XG4gICAgY29uc3QgdmFsMiA9IGVsZW1lbnRhbFByb3BzMltlbGVtZW50XSB8fCAwO1xuICAgIHNpbWlsYXJpdHkgKz0gMSAtIE1hdGguYWJzKHZhbDEgLSB2YWwyKTtcbiAgICBjb3VudCsrO1xuICB9KTtcbiAgXG4gIHJldHVybiBjb3VudCA+IDAgPyBzaW1pbGFyaXR5IC8gY291bnQgOiAwLjU7XG59O1xuIl0sInZlcnNpb24iOjN9