6918806c0b7d479f91e181888a77ca4a
"use strict";
/**
 * Domain-Specific Testing
 * Tests for astrological code analysis and preservation, recipe/ingredient type suggestions,
 * campaign system flexibility preservation, and service layer interface suggestions
 */
Object.defineProperty(exports, "__esModule", { value: true });
const AnyTypeClassifier_1 = require("../AnyTypeClassifier");
const DomainContextAnalyzer_1 = require("../DomainContextAnalyzer");
const SafeTypeReplacer_1 = require("../SafeTypeReplacer");
const types_1 = require("../types");
describe('Domain-Specific Testing', () => {
    let classifier;
    let analyzer;
    let replacer;
    beforeEach(() => {
        classifier = new AnyTypeClassifier_1.AnyTypeClassifier();
        analyzer = new DomainContextAnalyzer_1.DomainContextAnalyzer();
        replacer = new SafeTypeReplacer_1.SafeTypeReplacer();
    });
    const createDomainContext = (codeSnippet, filePath, domain, surroundingLines = [], hasComment = false, comment) => ({
        filePath,
        lineNumber: 1,
        codeSnippet,
        surroundingLines,
        hasExistingComment: hasComment,
        existingComment: comment,
        isInTestFile: filePath.includes('.test.') || filePath.includes('.spec.'),
        domainContext: {
            domain,
            intentionalityHints: [],
            suggestedTypes: [],
            preservationReasons: []
        }
    });
    describe('Astrological Code Analysis and Preservation', () => {
        describe('Planetary Position Data Preservation', () => {
            test('should preserve planetary position API responses', async () => {
                const context = createDomainContext('const planetaryPositions: any = await getReliablePlanetaryPositions();', 'src/calculations/planetary/positions.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { getReliablePlanetaryPositions } from "@/utils/reliableAstronomy";',
                    'export async function calculateCurrentPositions() {'
                ]);
                const domainAnalysis = await analyzer.analyzeDomain(context);
                expect(domainAnalysis.domain).toBe(types_1.CodeDomain.ASTROLOGICAL);
                expect(domainAnalysis.preservationReasons).toContain('Astrological calculations require compatibility with external astronomical libraries');
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('planetary position data');
            });
            test('should preserve ephemeris data from external sources', async () => {
                const context = createDomainContext('const ephemerisData: any = astronomyEngine.getEphemeris(date);', 'src/calculations/ephemeris/calculator.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { astronomyEngine } from "astronomy-engine";',
                    'function calculateTransits(startDate: Date, endDate: Date) {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('external astronomical data');
                expect(classification.requiresDocumentation).toBe(true);
            });
            test('should preserve Swiss Ephemeris compatibility', async () => {
                const context = createDomainContext('const swissData: any = swisseph.calc_ut(julianDay, planet);', 'src/calculations/swiss-ephemeris/wrapper.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import * as swisseph from "swisseph";',
                    'export function calculatePlanetPosition(planet: number, date: Date): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('Swiss Ephemeris');
            });
            test('should preserve NASA JPL Horizons API responses', async () => {
                const context = createDomainContext('const horizonsResponse: any = await nasaJplApi.getHorizonsData(params);', 'src/services/astronomy/nasa-jpl.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'class NasaJplService {',
                    '  async fetchPlanetaryData(params: HorizonsParams): Promise<any> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('NASA JPL');
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
            });
        });
        describe('Elemental Properties Preservation', () => {
            test('should preserve dynamic elemental calculations', async () => {
                const context = createDomainContext('const elementalBalance: any = calculateElementalHarmony(ingredients);', 'src/calculations/elemental/harmony.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { ElementalProperties } from "@/types";',
                    'function calculateCompatibility(source: ElementalProperties, target: ElementalProperties): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('elemental');
            });
            test('should suggest specific types for elemental properties when possible', async () => {
                const context = createDomainContext('const fireValue: any = ingredient.fire;', 'src/calculations/elemental/properties.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'interface ElementalProperties {',
                    '  fire: number;',
                    '  water: number;'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('number');
            });
            test('should preserve complex elemental compatibility matrices', async () => {
                const context = createDomainContext('const compatibilityMatrix: Record<string, unknown> = buildElementalMatrix();', 'src/calculations/elemental/compatibility.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function buildElementalMatrix(): Record<string, unknown> {',
                    '  return { Fire: { Fire: 0.9, Water: 0.7 } };'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('dynamic');
            });
        });
        describe('Transit and Timing Calculations', () => {
            test('should preserve transit date validation logic', async () => {
                const context = createDomainContext('const transitData: any = validateTransitDate(planet, date, sign);', 'src/utils/planetaryConsistencyCheck.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'export function validateTransitDate(planet: string, date: Date, sign: string): any {',
                    '  const planetData = require(`@/data/planets/${planet.toLowerCase()}`);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('transit date');
            });
            test('should preserve retrograde motion calculations', async () => {
                const context = createDomainContext('const retrogradeData: any = calculateRetrogradePhases(planet, year);', 'src/calculations/retrograde/motion.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function calculateRetrogradePhases(planet: string, year: number): any {',
                    '  const phases = getRetrogradePhases(planet, year);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('retrograde');
            });
        });
        describe('Astrological Chart Calculations', () => {
            test('should preserve house system calculations', async () => {
                const context = createDomainContext('const houseData: any = calculateHouses(latitude, longitude, time);', 'src/calculations/houses/systems.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'import { HouseSystem } from "@/types/astrology";',
                    'export function calculateHouses(lat: number, lon: number, time: Date): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('house');
            });
            test('should preserve aspect calculations', async () => {
                const context = createDomainContext('const aspects: any[] = calculateAspects(planetPositions);', 'src/calculations/aspects/calculator.ts', types_1.CodeDomain.ASTROLOGICAL, [
                    'function calculateAspects(positions: PlanetaryPosition[]): unknown[] {',
                    '  const aspects = [];'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
            });
        });
    });
    describe('Recipe/Ingredient Type Suggestions', () => {
        describe('Ingredient Data Type Suggestions', () => {
            test('should suggest Ingredient interface for ingredient data', async () => {
                const context = createDomainContext('const ingredient: any = getIngredientData(name);', 'src/data/ingredients/processor.ts', types_1.CodeDomain.RECIPE, [
                    'import { Ingredient } from "@/types";',
                    'export function processIngredient(name: string): Ingredient {'
                ]);
                const domainAnalysis = await analyzer.analyzeDomain(context);
                expect(domainAnalysis.suggestedTypes).toContain('Ingredient');
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('Ingredient');
            });
            test('should suggest specific ingredient subtypes', async () => {
                const contexts = [
                    createDomainContext('const spice: any = getSpiceProperties(name);', 'src/data/ingredients/spices.ts', types_1.CodeDomain.RECIPE),
                    createDomainContext('const herb: any = getHerbData(name);', 'src/data/ingredients/herbs.ts', types_1.CodeDomain.RECIPE),
                    createDomainContext('const vegetable: any = getVegetableInfo(name);', 'src/data/ingredients/vegetables.ts', types_1.CodeDomain.RECIPE)
                ];
                for (const context of contexts) {
                    const domainAnalysis = await analyzer.analyzeDomain(context);
                    const classification = await classifier.classify(context);
                    expect(classification.isIntentional).toBe(false);
                    expect(domainAnalysis.suggestedTypes.length).toBeGreaterThan(0);
                    if (context.filePath.includes('spices')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Spice');
                    }
                    else if (context.filePath.includes('herbs')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Herb');
                    }
                    else if (context.filePath.includes('vegetables')) {
                        expect(domainAnalysis.suggestedTypes).toContain('Vegetable');
                    }
                }
            });
            test('should suggest array types for ingredient collections', async () => {
                const context = createDomainContext('const ingredients: any[] = getAllIngredients();', 'src/data/ingredients/collection.ts', types_1.CodeDomain.RECIPE, [
                    'export function getAllIngredients(): Ingredient[] {',
                    '  return ingredientDatabase.getAll();'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
                expect(classification.suggestedReplacement).toBe('Ingredient[]');
            });
            test('should suggest nutritional info types', async () => {
                const context = createDomainContext('const nutrition: any = getNutritionalData(ingredient);', 'src/data/nutrition/calculator.ts', types_1.CodeDomain.RECIPE, [
                    'import { NutritionalInfo } from "@/types";',
                    'function calculateNutrition(ingredient: Ingredient): NutritionalInfo {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('NutritionalInfo');
            });
        });
        describe('Recipe Data Type Suggestions', () => {
            test('should suggest Recipe interface for recipe data', async () => {
                const context = createDomainContext('const recipe: any = buildRecipe(ingredients, instructions);', 'src/data/recipes/builder.ts', types_1.CodeDomain.RECIPE, [
                    'import { Recipe, Ingredient, CookingInstruction } from "@/types";',
                    'export function buildRecipe(ingredients: Ingredient[], instructions: CookingInstruction[]): Recipe {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('Recipe');
            });
            test('should suggest cooking method types', async () => {
                const context = createDomainContext('const method: any = selectCookingMethod(ingredients);', 'src/data/cooking/methods.ts', types_1.CodeDomain.RECIPE, [
                    'import { CookingMethod } from "@/types";',
                    'export function selectOptimalMethod(ingredients: Ingredient[]): CookingMethod {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CookingMethod');
            });
            test('should suggest cuisine type for cultural data', async () => {
                const context = createDomainContext('const cuisine: any = identifyCuisineType(recipe);', 'src/data/cuisines/classifier.ts', types_1.CodeDomain.RECIPE, [
                    'import { CuisineType } from "@/types";',
                    'function classifyCuisine(recipe: Recipe): CuisineType {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CuisineType');
            });
        });
        describe('External Food API Preservation', () => {
            test('should preserve Spoonacular API responses', async () => {
                const context = createDomainContext('const spoonacularData: any = await spoonacularApi.getRecipe(id);', 'src/services/external/spoonacular.ts', types_1.CodeDomain.RECIPE, [
                    'class SpoonacularService {',
                    '  async fetchRecipeData(recipeId: number): Promise<any> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
                expect(classification.reasoning).toContain('API');
            });
            test('should preserve USDA Food Data Central responses', async () => {
                const context = createDomainContext('const usdaResponse: any = await usdaApi.getFoodData(fdcId);', 'src/services/external/usda.ts', types_1.CodeDomain.RECIPE, [
                    'async function fetchNutritionalData(fdcId: string): Promise<any> {',
                    '  const response = await fetch(`https://api.nal.usda.gov/fdc/v1/food/${fdcId}`);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('USDA');
            });
        });
        describe('Elemental Properties in Recipe Context', () => {
            test('should suggest ElementalProperties for ingredient elements', async () => {
                const context = createDomainContext('const elements: any = ingredient.elementalProperties;', 'src/data/ingredients/elemental.ts', types_1.CodeDomain.RECIPE, [
                    'interface Ingredient {',
                    '  elementalProperties: ElementalProperties;',
                    '}'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ElementalProperties');
            });
            test('should preserve dynamic elemental calculations in recipes', async () => {
                const context = createDomainContext('const harmony: any = calculateRecipeHarmony(recipe);', 'src/calculations/recipe/harmony.ts', types_1.CodeDomain.RECIPE, [
                    'function calculateRecipeHarmony(recipe: Recipe): any {',
                    '  return recipe.ingredients.reduce((harmony, ingredient) => {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('harmony');
            });
        });
    });
    describe('Campaign System Flexibility Preservation', () => {
        describe('Dynamic Configuration Preservation', () => {
            test('should preserve campaign configuration flexibility', async () => {
                const context = createDomainContext('const campaignConfig: any = loadDynamicConfig(environment);', 'src/services/campaign/ConfigLoader.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class ConfigLoader {',
                    '  loadDynamicConfig(env: string): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.category).toBe(types_1.AnyTypeCategory.DYNAMIC_CONFIG);
                expect(classification.reasoning).toContain('dynamic');
            });
            test('should preserve adaptive strategy configurations', async () => {
                const context = createDomainContext('const adaptiveSettings: any = calculateOptimalSettings(metrics);', 'src/services/campaign/AdaptiveStrategy.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class AdaptiveStrategy {',
                    '  calculateOptimalSettings(metrics: ProgressMetrics): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('adaptive');
            });
            test('should preserve intelligence system configurations', async () => {
                const context = createDomainContext('const intelligenceConfig: any = buildIntelligenceSystem(params);', 'src/services/campaign/IntelligenceSystem.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class IntelligenceSystem {',
                    '  buildIntelligenceSystem(params: IntelligenceParams): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('intelligence');
            });
        });
        describe('Metrics and Progress Tracking', () => {
            test('should suggest specific types for well-defined metrics', async () => {
                const context = createDomainContext('const progress: any = calculateProgress();', 'src/services/campaign/ProgressTracker.ts', types_1.CodeDomain.CAMPAIGN, [
                    'import { ProgressMetrics } from "@/types";',
                    'function calculateProgress(): ProgressMetrics {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ProgressMetrics');
            });
            test('should preserve dynamic metrics calculations', async () => {
                const context = createDomainContext('const dynamicMetrics: any = aggregateMetrics(sources);', 'src/services/campaign/MetricsAggregator.ts', types_1.CodeDomain.CAMPAIGN, [
                    'function aggregateMetrics(sources: MetricsSource[]): any {',
                    '  return sources.reduce((agg, source) => ({ ...agg, ...source.getMetrics() }), {});'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('dynamic');
            });
            test('should suggest TypeScriptError for error analysis', async () => {
                const context = createDomainContext('const errors: any[] = analyzeTypeScriptErrors();', 'src/services/campaign/TypeScriptErrorAnalyzer.ts', types_1.CodeDomain.CAMPAIGN, [
                    'import { TypeScriptError } from "@/types";',
                    'function analyzeTypeScriptErrors(): TypeScriptError[] {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('TypeScriptError[]');
            });
        });
        describe('Tool Integration Flexibility', () => {
            test('should preserve tool integration configurations', async () => {
                const context = createDomainContext('const toolConfig: any = integrateExternalTool(toolName, settings);', 'src/services/campaign/ToolIntegration.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class ToolIntegration {',
                    '  integrateExternalTool(name: string, settings: unknown): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('tool integration');
            });
            test('should preserve validation framework flexibility', async () => {
                const context = createDomainContext('const validationResult: any = runValidation(rules, data);', 'src/services/campaign/ValidationFramework.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class ValidationFramework {',
                    '  runValidation(rules: ValidationRule[], data: unknown): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('validation');
            });
        });
        describe('Safety Protocol Flexibility', () => {
            test('should preserve safety event handling', async () => {
                const context = createDomainContext('const safetyEvent: any = createSafetyEvent(type, data);', 'src/services/campaign/SafetyProtocol.ts', types_1.CodeDomain.CAMPAIGN, [
                    'class SafetyProtocol {',
                    '  createSafetyEvent(type: SafetyEventType, data: unknown): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('safety');
            });
            test('should preserve rollback mechanism flexibility', async () => {
                const context = createDomainContext('const rollbackData: any = prepareRollback(changes);', 'src/services/campaign/RollbackManager.ts', types_1.CodeDomain.CAMPAIGN, [
                    'export class RollbackManager {',
                    '  prepareRollback(changes: FileChange[]): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('rollback');
            });
        });
    });
    describe('Service Layer Interface Suggestions', () => {
        describe('API Service Interface Suggestions', () => {
            test('should suggest ApiResponse for API service responses', async () => {
                const context = createDomainContext('const response: any = await this.httpClient.get(endpoint);', 'src/services/api/BaseApiService.ts', types_1.CodeDomain.SERVICE, [
                    'export class BaseApiService {',
                    '  async get<T>(endpoint: string): Promise<ApiResponse<T>> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ApiResponse<T>');
            });
            test('should suggest specific service interfaces', async () => {
                const contexts = [
                    createDomainContext('const service: any = new RecommendationService();', 'src/services/RecommendationService.ts', types_1.CodeDomain.SERVICE),
                    createDomainContext('const astroService: any = new AstrologicalService();', 'src/services/AstrologicalService.ts', types_1.CodeDomain.SERVICE),
                    createDomainContext('const recipeService: any = new RecipeService();', 'src/services/RecipeService.ts', types_1.CodeDomain.SERVICE)
                ];
                for (const context of contexts) {
                    const classification = await classifier.classify(context);
                    expect(classification.isIntentional).toBe(false);
                    if (context.filePath.includes('Recommendation')) {
                        expect(classification.suggestedReplacement).toBe('RecommendationService');
                    }
                    else if (context.filePath.includes('Astrological')) {
                        expect(classification.suggestedReplacement).toBe('AstrologicalService');
                    }
                    else if (context.filePath.includes('Recipe')) {
                        expect(classification.suggestedReplacement).toBe('RecipeService');
                    }
                }
            });
            test('should preserve external service integration flexibility', async () => {
                const context = createDomainContext('const externalService: any = createExternalServiceClient(config);', 'src/services/external/ExternalServiceFactory.ts', types_1.CodeDomain.SERVICE, [
                    'export class ExternalServiceFactory {',
                    '  createExternalServiceClient(config: ServiceConfig): any {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('external service');
            });
        });
        describe('Data Transformation Service Suggestions', () => {
            test('should suggest specific transformer interfaces', async () => {
                const context = createDomainContext('const transformer: any = new DataTransformer();', 'src/services/data/DataTransformer.ts', types_1.CodeDomain.SERVICE, [
                    'export class DataTransformer {',
                    '  transform<T, U>(data: T): U {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('DataTransformer');
            });
            test('should suggest mapper interfaces for data mapping', async () => {
                const context = createDomainContext('const mapper: any = createMapper(sourceSchema, targetSchema);', 'src/services/data/SchemaMapper.ts', types_1.CodeDomain.SERVICE, [
                    'export function createMapper(source: Schema, target: Schema): any {',
                    '  return new SchemaMapper(source, target);'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('SchemaMapper');
            });
        });
        describe('Caching Service Interface Suggestions', () => {
            test('should suggest cache interface types', async () => {
                const context = createDomainContext('const cache: any = new CacheService();', 'src/services/cache/CacheService.ts', types_1.CodeDomain.SERVICE, [
                    'export class CacheService {',
                    '  get<T>(key: string): Promise<T | null> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CacheService');
            });
            test('should suggest cache entry types', async () => {
                const context = createDomainContext('const entry: any = cache.get(key);', 'src/services/cache/CacheManager.ts', types_1.CodeDomain.SERVICE, [
                    'class CacheManager {',
                    '  async getCacheEntry(key: string): Promise<CacheEntry | null> {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('CacheEntry | null');
            });
        });
        describe('Validation Service Interface Suggestions', () => {
            test('should suggest validation result interfaces', async () => {
                const context = createDomainContext('const result: any = validator.validate(data);', 'src/services/validation/ValidationService.ts', types_1.CodeDomain.SERVICE, [
                    'export class ValidationService {',
                    '  validate(data: unknown): ValidationResult {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ValidationResult');
            });
            test('should suggest schema validation interfaces', async () => {
                const context = createDomainContext('const schema: any = buildValidationSchema(rules);', 'src/services/validation/SchemaBuilder.ts', types_1.CodeDomain.SERVICE, [
                    'import { ValidationSchema } from "@/types";',
                    'function buildValidationSchema(rules: ValidationRule[]): ValidationSchema {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ValidationSchema');
            });
        });
        describe('Service Error Handling', () => {
            test('should preserve service error handling flexibility', async () => {
                const context = createDomainContext('const error: any = new ServiceError(message, code);', 'src/services/errors/ServiceError.ts', types_1.CodeDomain.SERVICE, [
                    'export class ServiceError extends Error {',
                    '  constructor(message: string, code: string, details?: unknown) {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(true);
                expect(classification.reasoning).toContain('error');
            });
            test('should suggest specific error types when available', async () => {
                const context = createDomainContext('const apiError: any = handleApiError(response);', 'src/services/errors/ApiErrorHandler.ts', types_1.CodeDomain.SERVICE, [
                    'import { ApiError } from "@/types";',
                    'function handleApiError(response: Response): ApiError {'
                ]);
                const classification = await classifier.classify(context);
                expect(classification.isIntentional).toBe(false);
                expect(classification.suggestedReplacement).toBe('ApiError');
            });
        });
    });
    describe('Cross-Domain Integration', () => {
        test('should handle mixed domain contexts appropriately', async () => {
            // Test a service that integrates astrological calculations with recipe recommendations
            const context = createDomainContext('const recommendation: any = await astroRecipeService.getRecommendation(userChart, preferences);', 'src/services/AstrologicalRecipeService.ts', types_1.CodeDomain.SERVICE, [
                'export class AstrologicalRecipeService {',
                '  async getRecommendation(chart: AstrologyChart, prefs: UserPreferences): Promise<RecipeRecommendation> {'
            ]);
            const classification = await classifier.classify(context);
            expect(classification.isIntentional).toBe(false);
            expect(classification.suggestedReplacement).toBe('RecipeRecommendation');
        });
        test('should preserve campaign system integration with domain services', async () => {
            const context = createDomainContext('const campaignData: any = integrateDomainServices(services);', 'src/services/campaign/DomainIntegration.ts', types_1.CodeDomain.CAMPAIGN, [
                'class DomainIntegration {',
                '  integrateDomainServices(services: DomainService[]): any {'
            ]);
            const classification = await classifier.classify(context);
            expect(classification.isIntentional).toBe(true);
            expect(classification.reasoning).toContain('integration');
        });
    });
    describe('Type Replacement Integration', () => {
        test('should apply domain-specific replacements correctly', async () => {
            const replacements = [
                {
                    original: 'any',
                    replacement: 'Ingredient',
                    filePath: 'src/data/ingredients/processor.ts',
                    lineNumber: 1,
                    confidence: 0.9,
                    validationRequired: true
                },
                {
                    original: 'any',
                    replacement: 'PlanetaryPosition',
                    filePath: 'src/calculations/planetary/positions.ts',
                    lineNumber: 1,
                    confidence: 0.8,
                    validationRequired: true
                },
                {
                    original: 'any',
                    replacement: 'ProgressMetrics',
                    filePath: 'src/services/campaign/ProgressTracker.ts',
                    lineNumber: 1,
                    confidence: 0.9,
                    validationRequired: true
                }
            ];
            // Mock file system for domain-specific content
            jest.spyOn(require('fs'), 'readFileSync').mockImplementation((path) => {
                if (path.includes('ingredients'))
                    return 'const ingredient: any = getData();';
                if (path.includes('planetary'))
                    return 'const position: any = calculate();';
                if (path.includes('campaign'))
                    return 'const metrics: unknown = getProgress();';
                return 'backup content';
            });
            jest.spyOn(require('fs'), 'writeFileSync').mockImplementation(() => undefined);
            jest.spyOn(require('fs'), 'existsSync').mockReturnValue(true);
            // Mock successful compilation
            jest.spyOn(require('child_process'), 'execSync').mockReturnValue('');
            const results = await Promise.all(replacements.map(replacement => replacer.applyReplacement(replacement)));
            results.forEach(result => {
                expect(result.success).toBe(true);
                expect(result.appliedReplacements).toHaveLength(1);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vRG9tYWluU3BlY2lmaWNUZXN0aW5nLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgsNERBQXlEO0FBQ3pELG9FQUFpRTtBQUNqRSwwREFBdUQ7QUFDdkQsb0NBS2tCO0FBRWxCLFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7SUFDdkMsSUFBSSxVQUE2QixDQUFDO0lBQ2xDLElBQUksUUFBK0IsQ0FBQztJQUNwQyxJQUFJLFFBQTBCLENBQUM7SUFFL0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFVBQVUsR0FBRyxJQUFJLHFDQUFpQixFQUFFLENBQUM7UUFDckMsUUFBUSxHQUFHLElBQUksNkNBQXFCLEVBQUUsQ0FBQztRQUN2QyxRQUFRLEdBQUcsSUFBSSxtQ0FBZ0IsRUFBRSxDQUFDO0lBQ3BDLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxtQkFBbUIsR0FBRyxDQUMxQixXQUFtQixFQUNuQixRQUFnQixFQUNoQixNQUFrQixFQUNsQixtQkFBNkIsRUFBRSxFQUMvQixVQUFVLEdBQUcsS0FBSyxFQUNsQixPQUFnQixFQUNPLEVBQUUsQ0FBQyxDQUFDO1FBQzNCLFFBQVE7UUFDUixVQUFVLEVBQUUsQ0FBQztRQUNiLFdBQVc7UUFDWCxnQkFBZ0I7UUFDaEIsa0JBQWtCLEVBQUUsVUFBVTtRQUM5QixlQUFlLEVBQUUsT0FBTztRQUN4QixZQUFZLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztRQUN4RSxhQUFhLEVBQUU7WUFDYixNQUFNO1lBQ04sbUJBQW1CLEVBQUUsRUFBRTtZQUN2QixjQUFjLEVBQUUsRUFBRTtZQUNsQixtQkFBbUIsRUFBRSxFQUFFO1NBQ3hCO0tBQ0YsQ0FBQyxD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QUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRTlELDhCQUE4QjtZQUM5QixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFckUsTUFBTSxPQUFPLEdBQUcsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUMvQixZQUFZLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQ3hFLENBQUM7WUFFRixPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUN2QixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL19fdGVzdHNfXy9Eb21haW5TcGVjaWZpY1Rlc3RpbmcudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERvbWFpbi1TcGVjaWZpYyBUZXN0aW5nXG4gKiBUZXN0cyBmb3IgYXN0cm9sb2dpY2FsIGNvZGUgYW5hbHlzaXMgYW5kIHByZXNlcnZhdGlvbiwgcmVjaXBlL2luZ3JlZGllbnQgdHlwZSBzdWdnZXN0aW9ucyxcbiAqIGNhbXBhaWduIHN5c3RlbSBmbGV4aWJpbGl0eSBwcmVzZXJ2YXRpb24sIGFuZCBzZXJ2aWNlIGxheWVyIGludGVyZmFjZSBzdWdnZXN0aW9uc1xuICovXG5cbmltcG9ydCB7IEFueVR5cGVDbGFzc2lmaWVyIH0gZnJvbSAnLi4vQW55VHlwZUNsYXNzaWZpZXInO1xuaW1wb3J0IHsgRG9tYWluQ29udGV4dEFuYWx5emVyIH0gZnJvbSAnLi4vRG9tYWluQ29udGV4dEFuYWx5emVyJztcbmltcG9ydCB7IFNhZmVUeXBlUmVwbGFjZXIgfSBmcm9tICcuLi9TYWZlVHlwZVJlcGxhY2VyJztcbmltcG9ydCB7XG4gICAgQW55VHlwZUNhdGVnb3J5LFxuICAgIENsYXNzaWZpY2F0aW9uQ29udGV4dCxcbiAgICBDb2RlRG9tYWluLFxuICAgIFR5cGVSZXBsYWNlbWVudFxufSBmcm9tICcuLi90eXBlcyc7XG5cbmRlc2NyaWJlKCdEb21haW4tU3BlY2lmaWMgVGVzdGluZycsICgpID0+IHtcbiAgbGV0IGNsYXNzaWZpZXI6IEFueVR5cGVDbGFzc2lmaWVyO1xuICBsZXQgYW5hbHl6ZXI6IERvbWFpbkNvbnRleHRBbmFseXplcjtcbiAgbGV0IHJlcGxhY2VyOiBTYWZlVHlwZVJlcGxhY2VyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNsYXNzaWZpZXIgPSBuZXcgQW55VHlwZUNsYXNzaWZpZXIoKTtcbiAgICBhbmFseXplciA9IG5ldyBEb21haW5Db250ZXh0QW5hbHl6ZXIoKTtcbiAgICByZXBsYWNlciA9IG5ldyBTYWZlVHlwZVJlcGxhY2VyKCk7XG4gIH0pO1xuXG4gIGNvbnN0IGNyZWF0ZURvbWFpbkNvbnRleHQgPSAoXG4gICAgY29kZVNuaXBwZXQ6IHN0cmluZyxcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIGRvbWFpbjogQ29kZURvbWFpbixcbiAgICBzdXJyb3VuZGluZ0xpbmVzOiBzdHJpbmdbXSA9IFtdLFxuICAgIGhhc0NvbW1lbnQgPSBmYWxzZSxcbiAgICBjb21tZW50Pzogc3RyaW5nXG4gICk6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9PiAoe1xuICAgIGZpbGVQYXRoLFxuICAgIGxpbmVOdW1iZXI6IDEsXG4gICAgY29kZVNuaXBwZXQsXG4gICAgc3Vycm91bmRpbmdMaW5lcyxcbiAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGhhc0NvbW1lbnQsXG4gICAgZXhpc3RpbmdDb21tZW50OiBjb21tZW50LFxuICAgIGlzSW5UZXN0RmlsZTogZmlsZVBhdGguaW5jbHVkZXMoJy50ZXN0LicpIHx8IGZpbGVQYXRoLmluY2x1ZGVzKCcuc3BlYy4nKSxcbiAgICBkb21haW5Db250ZXh0OiB7XG4gICAgICBkb21haW4sXG4gICAgICBpbnRlbnRpb25hbGl0eUhpbnRzOiBbXSxcbiAgICAgIHN1Z2dlc3RlZFR5cGVzOiBbXSxcbiAgICAgIHByZXNlcnZhdGlvblJlYXNvbnM6IFtdXG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnQXN0cm9sb2dpY2FsIENvZGUgQW5hbHlzaXMgYW5kIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICBkZXNjcmliZSgnUGxhbmV0YXJ5IFBvc2l0aW9uIERhdGEgUHJlc2VydmF0aW9uJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHBsYW5ldGFyeSBwb3NpdGlvbiBBUEkgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcGxhbmV0YXJ5UG9zaXRpb25zOiBhbnkgPSBhd2FpdCBnZXRSZWxpYWJsZVBsYW5ldGFyeVBvc2l0aW9ucygpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5L3Bvc2l0aW9ucy50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5BU1RST0xPR0lDQUwsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IGdldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zIH0gZnJvbSBcIkAvdXRpbHMvcmVsaWFibGVBc3Ryb25vbXlcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVDdXJyZW50UG9zaXRpb25zKCkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZG9tYWluQW5hbHlzaXMgPSBhd2FpdCBhbmFseXplci5hbmFseXplRG9tYWluKGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMuZG9tYWluKS50b0JlKENvZGVEb21haW4uQVNUUk9MT0dJQ0FMKTtcbiAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLnByZXNlcnZhdGlvblJlYXNvbnMpLnRvQ29udGFpbihcbiAgICAgICAgICAnQXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyByZXF1aXJlIGNvbXBhdGliaWxpdHkgd2l0aCBleHRlcm5hbCBhc3Ryb25vbWljYWwgbGlicmFyaWVzJ1xuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdwbGFuZXRhcnkgcG9zaXRpb24gZGF0YScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBlcGhlbWVyaXMgZGF0YSBmcm9tIGV4dGVybmFsIHNvdXJjZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBlcGhlbWVyaXNEYXRhOiBhbnkgPSBhc3Ryb25vbXlFbmdpbmUuZ2V0RXBoZW1lcmlzKGRhdGUpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvZXBoZW1lcmlzL2NhbGN1bGF0b3IudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBhc3Ryb25vbXlFbmdpbmUgfSBmcm9tIFwiYXN0cm9ub215LWVuZ2luZVwiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlVHJhbnNpdHMoc3RhcnREYXRlOiBEYXRlLCBlbmREYXRlOiBEYXRlKSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2V4dGVybmFsIGFzdHJvbm9taWNhbCBkYXRhJyk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZXF1aXJlc0RvY3VtZW50YXRpb24pLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIFN3aXNzIEVwaGVtZXJpcyBjb21wYXRpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3Qgc3dpc3NEYXRhOiBhbnkgPSBzd2lzc2VwaC5jYWxjX3V0KGp1bGlhbkRheSwgcGxhbmV0KTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL3N3aXNzLWVwaGVtZXJpcy93cmFwcGVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0ICogYXMgc3dpc3NlcGggZnJvbSBcInN3aXNzZXBoXCI7JyxcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUGxhbmV0UG9zaXRpb24ocGxhbmV0OiBudW1iZXIsIGRhdGU6IERhdGUpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEkpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ1N3aXNzIEVwaGVtZXJpcycpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBOQVNBIEpQTCBIb3Jpem9ucyBBUEkgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgaG9yaXpvbnNSZXNwb25zZTogYW55ID0gYXdhaXQgbmFzYUpwbEFwaS5nZXRIb3Jpem9uc0RhdGEocGFyYW1zKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvYXN0cm9ub215L25hc2EtanBsLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnY2xhc3MgTmFzYUpwbFNlcnZpY2UgeycsXG4gICAgICAgICAgICAnICBhc3luYyBmZXRjaFBsYW5ldGFyeURhdGEocGFyYW1zOiBIb3Jpem9uc1BhcmFtcyk6IFByb21pc2U8YW55PiB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ05BU0EgSlBMJyk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0VsZW1lbnRhbCBQcm9wZXJ0aWVzIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBkeW5hbWljIGVsZW1lbnRhbCBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBlbGVtZW50YWxCYWxhbmNlOiBhbnkgPSBjYWxjdWxhdGVFbGVtZW50YWxIYXJtb255KGluZ3JlZGllbnRzKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2VsZW1lbnRhbC9oYXJtb255LnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgRWxlbWVudGFsUHJvcGVydGllcyB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVDb21wYXRpYmlsaXR5KHNvdXJjZTogRWxlbWVudGFsUHJvcGVydGllcywgdGFyZ2V0OiBFbGVtZW50YWxQcm9wZXJ0aWVzKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZWxlbWVudGFsJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc3BlY2lmaWMgdHlwZXMgZm9yIGVsZW1lbnRhbCBwcm9wZXJ0aWVzIHdoZW4gcG9zc2libGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBmaXJlVmFsdWU6IGFueSA9IGluZ3JlZGllbnQuZmlyZTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2VsZW1lbnRhbC9wcm9wZXJ0aWVzLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW50ZXJmYWNlIEVsZW1lbnRhbFByb3BlcnRpZXMgeycsXG4gICAgICAgICAgICAnICBmaXJlOiBudW1iZXI7JyxcbiAgICAgICAgICAgICcgIHdhdGVyOiBudW1iZXI7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdudW1iZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgY29tcGxleCBlbGVtZW50YWwgY29tcGF0aWJpbGl0eSBtYXRyaWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGNvbXBhdGliaWxpdHlNYXRyaXg6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gYnVpbGRFbGVtZW50YWxNYXRyaXgoKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2VsZW1lbnRhbC9jb21wYXRpYmlsaXR5LnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gYnVpbGRFbGVtZW50YWxNYXRyaXgoKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4geycsXG4gICAgICAgICAgICAnICByZXR1cm4geyBGaXJlOiB7IEZpcmU6IDAuOSwgV2F0ZXI6IDAuNyB9IH07J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2R5bmFtaWMnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1RyYW5zaXQgYW5kIFRpbWluZyBDYWxjdWxhdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgdHJhbnNpdCBkYXRlIHZhbGlkYXRpb24gbG9naWMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCB0cmFuc2l0RGF0YTogYW55ID0gdmFsaWRhdGVUcmFuc2l0RGF0ZShwbGFuZXQsIGRhdGUsIHNpZ24pOycsXG4gICAgICAgICAgJ3NyYy91dGlscy9wbGFuZXRhcnlDb25zaXN0ZW5jeUNoZWNrLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVHJhbnNpdERhdGUocGxhbmV0OiBzdHJpbmcsIGRhdGU6IERhdGUsIHNpZ246IHN0cmluZyk6IGFueSB7JyxcbiAgICAgICAgICAgICcgIGNvbnN0IHBsYW5ldERhdGEgPSByZXF1aXJlKGBAL2RhdGEvcGxhbmV0cy8ke3BsYW5ldC50b0xvd2VyQ2FzZSgpfWApOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCd0cmFuc2l0IGRhdGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgcmV0cm9ncmFkZSBtb3Rpb24gY2FsY3VsYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcmV0cm9ncmFkZURhdGE6IGFueSA9IGNhbGN1bGF0ZVJldHJvZ3JhZGVQaGFzZXMocGxhbmV0LCB5ZWFyKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL3JldHJvZ3JhZGUvbW90aW9uLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlUmV0cm9ncmFkZVBoYXNlcyhwbGFuZXQ6IHN0cmluZywgeWVhcjogbnVtYmVyKTogYW55IHsnLFxuICAgICAgICAgICAgJyAgY29uc3QgcGhhc2VzID0gZ2V0UmV0cm9ncmFkZVBoYXNlcyhwbGFuZXQsIHllYXIpOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdyZXRyb2dyYWRlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdBc3Ryb2xvZ2ljYWwgQ2hhcnQgQ2FsY3VsYXRpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGhvdXNlIHN5c3RlbSBjYWxjdWxhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBob3VzZURhdGE6IGFueSA9IGNhbGN1bGF0ZUhvdXNlcyhsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lKTsnLFxuICAgICAgICAgICdzcmMvY2FsY3VsYXRpb25zL2hvdXNlcy9zeXN0ZW1zLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgSG91c2VTeXN0ZW0gfSBmcm9tIFwiQC90eXBlcy9hc3Ryb2xvZ3lcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVIb3VzZXMobGF0OiBudW1iZXIsIGxvbjogbnVtYmVyLCB0aW1lOiBEYXRlKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignaG91c2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgYXNwZWN0IGNhbGN1bGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGFzcGVjdHM6IGFueVtdID0gY2FsY3VsYXRlQXNwZWN0cyhwbGFuZXRQb3NpdGlvbnMpOycsXG4gICAgICAgICAgJ3NyYy9jYWxjdWxhdGlvbnMvYXNwZWN0cy9jYWxjdWxhdG9yLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2FsY3VsYXRlQXNwZWN0cyhwb3NpdGlvbnM6IFBsYW5ldGFyeVBvc2l0aW9uW10pOiB1bmtub3duW10geycsXG4gICAgICAgICAgICAnICBjb25zdCBhc3BlY3RzID0gW107J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkFSUkFZX1RZUEUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWNpcGUvSW5ncmVkaWVudCBUeXBlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdJbmdyZWRpZW50IERhdGEgVHlwZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IEluZ3JlZGllbnQgaW50ZXJmYWNlIGZvciBpbmdyZWRpZW50IGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBpbmdyZWRpZW50OiBhbnkgPSBnZXRJbmdyZWRpZW50RGF0YShuYW1lKTsnLFxuICAgICAgICAgICdzcmMvZGF0YS9pbmdyZWRpZW50cy9wcm9jZXNzb3IudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdpbXBvcnQgeyBJbmdyZWRpZW50IH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBwcm9jZXNzSW5ncmVkaWVudChuYW1lOiBzdHJpbmcpOiBJbmdyZWRpZW50IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGRvbWFpbkFuYWx5c2lzID0gYXdhaXQgYW5hbHl6ZXIuYW5hbHl6ZURvbWFpbihjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLnN1Z2dlc3RlZFR5cGVzKS50b0NvbnRhaW4oJ0luZ3JlZGllbnQnKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdJbmdyZWRpZW50Jyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc3BlY2lmaWMgaW5ncmVkaWVudCBzdWJ0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dHMgPSBbXG4gICAgICAgICAgY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAgICdjb25zdCBzcGljZTogYW55ID0gZ2V0U3BpY2VQcm9wZXJ0aWVzKG5hbWUpOycsXG4gICAgICAgICAgICAnc3JjL2RhdGEvaW5ncmVkaWVudHMvc3BpY2VzLnRzJyxcbiAgICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFXG4gICAgICAgICAgKSxcbiAgICAgICAgICBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICAgJ2NvbnN0IGhlcmI6IGFueSA9IGdldEhlcmJEYXRhKG5hbWUpOycsXG4gICAgICAgICAgICAnc3JjL2RhdGEvaW5ncmVkaWVudHMvaGVyYnMudHMnLFxuICAgICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEVcbiAgICAgICAgICApLFxuICAgICAgICAgIGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgICAnY29uc3QgdmVnZXRhYmxlOiBhbnkgPSBnZXRWZWdldGFibGVJbmZvKG5hbWUpOycsXG4gICAgICAgICAgICAnc3JjL2RhdGEvaW5ncmVkaWVudHMvdmVnZXRhYmxlcy50cycsXG4gICAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRVxuICAgICAgICAgIClcbiAgICAgICAgXTtcblxuICAgICAgICBmb3IgKGNvbnN0IGNvbnRleHQgb2YgY29udGV4dHMpIHtcbiAgICAgICAgICBjb25zdCBkb21haW5BbmFseXNpcyA9IGF3YWl0IGFuYWx5emVyLmFuYWx5emVEb21haW4oY29udGV4dCk7XG4gICAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuXG4gICAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgIGV4cGVjdChkb21haW5BbmFseXNpcy5zdWdnZXN0ZWRUeXBlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgICAgIGlmIChjb250ZXh0LmZpbGVQYXRoLmluY2x1ZGVzKCdzcGljZXMnKSkge1xuICAgICAgICAgICAgZXhwZWN0KGRvbWFpbkFuYWx5c2lzLnN1Z2dlc3RlZFR5cGVzKS50b0NvbnRhaW4oJ1NwaWNlJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0LmZpbGVQYXRoLmluY2x1ZGVzKCdoZXJicycpKSB7XG4gICAgICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignSGVyYicpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5maWxlUGF0aC5pbmNsdWRlcygndmVnZXRhYmxlcycpKSB7XG4gICAgICAgICAgICBleHBlY3QoZG9tYWluQW5hbHlzaXMuc3VnZ2VzdGVkVHlwZXMpLnRvQ29udGFpbignVmVnZXRhYmxlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgYXJyYXkgdHlwZXMgZm9yIGluZ3JlZGllbnQgY29sbGVjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBpbmdyZWRpZW50czogYW55W10gPSBnZXRBbGxJbmdyZWRpZW50cygpOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL2luZ3JlZGllbnRzL2NvbGxlY3Rpb24udHMnLFxuICAgICAgICAgIENvZGVEb21haW4uUkVDSVBFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgZnVuY3Rpb24gZ2V0QWxsSW5ncmVkaWVudHMoKTogSW5ncmVkaWVudFtdIHsnLFxuICAgICAgICAgICAgJyAgcmV0dXJuIGluZ3JlZGllbnREYXRhYmFzZS5nZXRBbGwoKTsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkFSUkFZX1RZUEUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0luZ3JlZGllbnRbXScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IG51dHJpdGlvbmFsIGluZm8gdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBudXRyaXRpb246IGFueSA9IGdldE51dHJpdGlvbmFsRGF0YShpbmdyZWRpZW50KTsnLFxuICAgICAgICAgICdzcmMvZGF0YS9udXRyaXRpb24vY2FsY3VsYXRvci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IE51dHJpdGlvbmFsSW5mbyB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBjYWxjdWxhdGVOdXRyaXRpb24oaW5ncmVkaWVudDogSW5ncmVkaWVudCk6IE51dHJpdGlvbmFsSW5mbyB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdOdXRyaXRpb25hbEluZm8nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1JlY2lwZSBEYXRhIFR5cGUgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBSZWNpcGUgaW50ZXJmYWNlIGZvciByZWNpcGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHJlY2lwZTogYW55ID0gYnVpbGRSZWNpcGUoaW5ncmVkaWVudHMsIGluc3RydWN0aW9ucyk7JyxcbiAgICAgICAgICAnc3JjL2RhdGEvcmVjaXBlcy9idWlsZGVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgUmVjaXBlLCBJbmdyZWRpZW50LCBDb29raW5nSW5zdHJ1Y3Rpb24gfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUmVjaXBlKGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10sIGluc3RydWN0aW9uczogQ29va2luZ0luc3RydWN0aW9uW10pOiBSZWNpcGUgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnUmVjaXBlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgY29va2luZyBtZXRob2QgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBtZXRob2Q6IGFueSA9IHNlbGVjdENvb2tpbmdNZXRob2QoaW5ncmVkaWVudHMpOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL2Nvb2tpbmcvbWV0aG9kcy50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IENvb2tpbmdNZXRob2QgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE9wdGltYWxNZXRob2QoaW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSk6IENvb2tpbmdNZXRob2QgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQ29va2luZ01ldGhvZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IGN1aXNpbmUgdHlwZSBmb3IgY3VsdHVyYWwgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGN1aXNpbmU6IGFueSA9IGlkZW50aWZ5Q3Vpc2luZVR5cGUocmVjaXBlKTsnLFxuICAgICAgICAgICdzcmMvZGF0YS9jdWlzaW5lcy9jbGFzc2lmaWVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgQ3Vpc2luZVR5cGUgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gY2xhc3NpZnlDdWlzaW5lKHJlY2lwZTogUmVjaXBlKTogQ3Vpc2luZVR5cGUgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQ3Vpc2luZVR5cGUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0V4dGVybmFsIEZvb2QgQVBJIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBTcG9vbmFjdWxhciBBUEkgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3Qgc3Bvb25hY3VsYXJEYXRhOiBhbnkgPSBhd2FpdCBzcG9vbmFjdWxhckFwaS5nZXRSZWNpcGUoaWQpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9leHRlcm5hbC9zcG9vbmFjdWxhci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2NsYXNzIFNwb29uYWN1bGFyU2VydmljZSB7JyxcbiAgICAgICAgICAgICcgIGFzeW5jIGZldGNoUmVjaXBlRGF0YShyZWNpcGVJZDogbnVtYmVyKTogUHJvbWlzZTxhbnk+IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdBUEknKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgVVNEQSBGb29kIERhdGEgQ2VudHJhbCByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCB1c2RhUmVzcG9uc2U6IGFueSA9IGF3YWl0IHVzZGFBcGkuZ2V0Rm9vZERhdGEoZmRjSWQpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9leHRlcm5hbC91c2RhLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnYXN5bmMgZnVuY3Rpb24gZmV0Y2hOdXRyaXRpb25hbERhdGEoZmRjSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7JyxcbiAgICAgICAgICAgICcgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm5hbC51c2RhLmdvdi9mZGMvdjEvZm9vZC8ke2ZkY0lkfWApOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdVU0RBJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdFbGVtZW50YWwgUHJvcGVydGllcyBpbiBSZWNpcGUgQ29udGV4dCcsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IEVsZW1lbnRhbFByb3BlcnRpZXMgZm9yIGluZ3JlZGllbnQgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBlbGVtZW50czogYW55ID0gaW5ncmVkaWVudC5lbGVtZW50YWxQcm9wZXJ0aWVzOycsXG4gICAgICAgICAgJ3NyYy9kYXRhL2luZ3JlZGllbnRzL2VsZW1lbnRhbC50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ludGVyZmFjZSBJbmdyZWRpZW50IHsnLFxuICAgICAgICAgICAgJyAgZWxlbWVudGFsUHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllczsnLFxuICAgICAgICAgICAgJ30nXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0VsZW1lbnRhbFByb3BlcnRpZXMnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgZHluYW1pYyBlbGVtZW50YWwgY2FsY3VsYXRpb25zIGluIHJlY2lwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBoYXJtb255OiBhbnkgPSBjYWxjdWxhdGVSZWNpcGVIYXJtb255KHJlY2lwZSk7JyxcbiAgICAgICAgICAnc3JjL2NhbGN1bGF0aW9ucy9yZWNpcGUvaGFybW9ueS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5SRUNJUEUsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZVJlY2lwZUhhcm1vbnkocmVjaXBlOiBSZWNpcGUpOiBhbnkgeycsXG4gICAgICAgICAgICAnICByZXR1cm4gcmVjaXBlLmluZ3JlZGllbnRzLnJlZHVjZSgoaGFybW9ueSwgaW5ncmVkaWVudCkgPT4geydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdoYXJtb255Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhbXBhaWduIFN5c3RlbSBGbGV4aWJpbGl0eSBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ0R5bmFtaWMgQ29uZmlndXJhdGlvbiBQcmVzZXJ2YXRpb24nLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgY2FtcGFpZ24gY29uZmlndXJhdGlvbiBmbGV4aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGNhbXBhaWduQ29uZmlnOiBhbnkgPSBsb2FkRHluYW1pY0NvbmZpZyhlbnZpcm9ubWVudCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL0NvbmZpZ0xvYWRlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIENvbmZpZ0xvYWRlciB7JyxcbiAgICAgICAgICAgICcgIGxvYWREeW5hbWljQ29uZmlnKGVudjogc3RyaW5nKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuRFlOQU1JQ19DT05GSUcpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2R5bmFtaWMnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgYWRhcHRpdmUgc3RyYXRlZ3kgY29uZmlndXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBhZGFwdGl2ZVNldHRpbmdzOiBhbnkgPSBjYWxjdWxhdGVPcHRpbWFsU2V0dGluZ3MobWV0cmljcyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL0FkYXB0aXZlU3RyYXRlZ3kudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2NsYXNzIEFkYXB0aXZlU3RyYXRlZ3kgeycsXG4gICAgICAgICAgICAnICBjYWxjdWxhdGVPcHRpbWFsU2V0dGluZ3MobWV0cmljczogUHJvZ3Jlc3NNZXRyaWNzKTogYW55IHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignYWRhcHRpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgaW50ZWxsaWdlbmNlIHN5c3RlbSBjb25maWd1cmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGludGVsbGlnZW5jZUNvbmZpZzogYW55ID0gYnVpbGRJbnRlbGxpZ2VuY2VTeXN0ZW0ocGFyYW1zKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vSW50ZWxsaWdlbmNlU3lzdGVtLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgSW50ZWxsaWdlbmNlU3lzdGVtIHsnLFxuICAgICAgICAgICAgJyAgYnVpbGRJbnRlbGxpZ2VuY2VTeXN0ZW0ocGFyYW1zOiBJbnRlbGxpZ2VuY2VQYXJhbXMpOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCdpbnRlbGxpZ2VuY2UnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ01ldHJpY3MgYW5kIFByb2dyZXNzIFRyYWNraW5nJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc3BlY2lmaWMgdHlwZXMgZm9yIHdlbGwtZGVmaW5lZCBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcHJvZ3Jlc3M6IGFueSA9IGNhbGN1bGF0ZVByb2dyZXNzKCk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1Byb2dyZXNzVHJhY2tlci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgUHJvZ3Jlc3NNZXRyaWNzIH0gZnJvbSBcIkAvdHlwZXNcIjsnLFxuICAgICAgICAgICAgJ2Z1bmN0aW9uIGNhbGN1bGF0ZVByb2dyZXNzKCk6IFByb2dyZXNzTWV0cmljcyB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdQcm9ncmVzc01ldHJpY3MnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgcHJlc2VydmUgZHluYW1pYyBtZXRyaWNzIGNhbGN1bGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGR5bmFtaWNNZXRyaWNzOiBhbnkgPSBhZ2dyZWdhdGVNZXRyaWNzKHNvdXJjZXMpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9NZXRyaWNzQWdncmVnYXRvci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZnVuY3Rpb24gYWdncmVnYXRlTWV0cmljcyhzb3VyY2VzOiBNZXRyaWNzU291cmNlW10pOiBhbnkgeycsXG4gICAgICAgICAgICAnICByZXR1cm4gc291cmNlcy5yZWR1Y2UoKGFnZywgc291cmNlKSA9PiAoeyAuLi5hZ2csIC4uLnNvdXJjZS5nZXRNZXRyaWNzKCkgfSksIHt9KTsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZHluYW1pYycpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IFR5cGVTY3JpcHRFcnJvciBmb3IgZXJyb3IgYW5hbHlzaXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBlcnJvcnM6IGFueVtdID0gYW5hbHl6ZVR5cGVTY3JpcHRFcnJvcnMoKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vVHlwZVNjcmlwdEVycm9yQW5hbHl6ZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IFR5cGVTY3JpcHRFcnJvciB9IGZyb20gXCJAL3R5cGVzXCI7JyxcbiAgICAgICAgICAgICdmdW5jdGlvbiBhbmFseXplVHlwZVNjcmlwdEVycm9ycygpOiBUeXBlU2NyaXB0RXJyb3JbXSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdUeXBlU2NyaXB0RXJyb3JbXScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnVG9vbCBJbnRlZ3JhdGlvbiBGbGV4aWJpbGl0eScsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSB0b29sIGludGVncmF0aW9uIGNvbmZpZ3VyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgdG9vbENvbmZpZzogYW55ID0gaW50ZWdyYXRlRXh0ZXJuYWxUb29sKHRvb2xOYW1lLCBzZXR0aW5ncyk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1Rvb2xJbnRlZ3JhdGlvbi50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5DQU1QQUlHTixcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnY2xhc3MgVG9vbEludGVncmF0aW9uIHsnLFxuICAgICAgICAgICAgJyAgaW50ZWdyYXRlRXh0ZXJuYWxUb29sKG5hbWU6IHN0cmluZywgc2V0dGluZ3M6IHVua25vd24pOiBhbnkgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnJlYXNvbmluZykudG9Db250YWluKCd0b29sIGludGVncmF0aW9uJyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHZhbGlkYXRpb24gZnJhbWV3b3JrIGZsZXhpYmlsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgdmFsaWRhdGlvblJlc3VsdDogYW55ID0gcnVuVmFsaWRhdGlvbihydWxlcywgZGF0YSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1ZhbGlkYXRpb25GcmFtZXdvcmsudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRnJhbWV3b3JrIHsnLFxuICAgICAgICAgICAgJyAgcnVuVmFsaWRhdGlvbihydWxlczogVmFsaWRhdGlvblJ1bGVbXSwgZGF0YTogdW5rbm93bik6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3ZhbGlkYXRpb24nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1NhZmV0eSBQcm90b2NvbCBGbGV4aWJpbGl0eScsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSBzYWZldHkgZXZlbnQgaGFuZGxpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBzYWZldHlFdmVudDogYW55ID0gY3JlYXRlU2FmZXR5RXZlbnQodHlwZSwgZGF0YSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1NhZmV0eVByb3RvY29sLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdjbGFzcyBTYWZldHlQcm90b2NvbCB7JyxcbiAgICAgICAgICAgICcgIGNyZWF0ZVNhZmV0eUV2ZW50KHR5cGU6IFNhZmV0eUV2ZW50VHlwZSwgZGF0YTogdW5rbm93bik6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3NhZmV0eScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBwcmVzZXJ2ZSByb2xsYmFjayBtZWNoYW5pc20gZmxleGliaWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCByb2xsYmFja0RhdGE6IGFueSA9IHByZXBhcmVSb2xsYmFjayhjaGFuZ2VzKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FtcGFpZ24vUm9sbGJhY2tNYW5hZ2VyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLkNBTVBBSUdOLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgUm9sbGJhY2tNYW5hZ2VyIHsnLFxuICAgICAgICAgICAgJyAgcHJlcGFyZVJvbGxiYWNrKGNoYW5nZXM6IEZpbGVDaGFuZ2VbXSk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ3JvbGxiYWNrJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlcnZpY2UgTGF5ZXIgSW50ZXJmYWNlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdBUEkgU2VydmljZSBJbnRlcmZhY2UgU3VnZ2VzdGlvbnMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBBcGlSZXNwb25zZSBmb3IgQVBJIHNlcnZpY2UgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgcmVzcG9uc2U6IGFueSA9IGF3YWl0IHRoaXMuaHR0cENsaWVudC5nZXQoZW5kcG9pbnQpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9hcGkvQmFzZUFwaVNlcnZpY2UudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnZXhwb3J0IGNsYXNzIEJhc2VBcGlTZXJ2aWNlIHsnLFxuICAgICAgICAgICAgJyAgYXN5bmMgZ2V0PFQ+KGVuZHBvaW50OiBzdHJpbmcpOiBQcm9taXNlPEFwaVJlc3BvbnNlPFQ+PiB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdBcGlSZXNwb25zZTxUPicpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHNwZWNpZmljIHNlcnZpY2UgaW50ZXJmYWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dHMgPSBbXG4gICAgICAgICAgY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAgICdjb25zdCBzZXJ2aWNlOiBhbnkgPSBuZXcgUmVjb21tZW5kYXRpb25TZXJ2aWNlKCk7JyxcbiAgICAgICAgICAgICdzcmMvc2VydmljZXMvUmVjb21tZW5kYXRpb25TZXJ2aWNlLnRzJyxcbiAgICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRVxuICAgICAgICAgICksXG4gICAgICAgICAgY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAgICdjb25zdCBhc3Ryb1NlcnZpY2U6IGFueSA9IG5ldyBBc3Ryb2xvZ2ljYWxTZXJ2aWNlKCk7JyxcbiAgICAgICAgICAgICdzcmMvc2VydmljZXMvQXN0cm9sb2dpY2FsU2VydmljZS50cycsXG4gICAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0VcbiAgICAgICAgICApLFxuICAgICAgICAgIGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgICAnY29uc3QgcmVjaXBlU2VydmljZTogYW55ID0gbmV3IFJlY2lwZVNlcnZpY2UoKTsnLFxuICAgICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9SZWNpcGVTZXJ2aWNlLnRzJyxcbiAgICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRVxuICAgICAgICAgIClcbiAgICAgICAgXTtcblxuICAgICAgICBmb3IgKGNvbnN0IGNvbnRleHQgb2YgY29udGV4dHMpIHtcbiAgICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQuZmlsZVBhdGguaW5jbHVkZXMoJ1JlY29tbWVuZGF0aW9uJykpIHtcbiAgICAgICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnUmVjb21tZW5kYXRpb25TZXJ2aWNlJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0LmZpbGVQYXRoLmluY2x1ZGVzKCdBc3Ryb2xvZ2ljYWwnKSkge1xuICAgICAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdBc3Ryb2xvZ2ljYWxTZXJ2aWNlJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0LmZpbGVQYXRoLmluY2x1ZGVzKCdSZWNpcGUnKSkge1xuICAgICAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdSZWNpcGVTZXJ2aWNlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGV4dGVybmFsIHNlcnZpY2UgaW50ZWdyYXRpb24gZmxleGliaWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBleHRlcm5hbFNlcnZpY2U6IGFueSA9IGNyZWF0ZUV4dGVybmFsU2VydmljZUNsaWVudChjb25maWcpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9leHRlcm5hbC9FeHRlcm5hbFNlcnZpY2VGYWN0b3J5LnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBFeHRlcm5hbFNlcnZpY2VGYWN0b3J5IHsnLFxuICAgICAgICAgICAgJyAgY3JlYXRlRXh0ZXJuYWxTZXJ2aWNlQ2xpZW50KGNvbmZpZzogU2VydmljZUNvbmZpZyk6IGFueSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucmVhc29uaW5nKS50b0NvbnRhaW4oJ2V4dGVybmFsIHNlcnZpY2UnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0RhdGEgVHJhbnNmb3JtYXRpb24gU2VydmljZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHNwZWNpZmljIHRyYW5zZm9ybWVyIGludGVyZmFjZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCB0cmFuc2Zvcm1lcjogYW55ID0gbmV3IERhdGFUcmFuc2Zvcm1lcigpOycsXG4gICAgICAgICAgJ3NyYy9zZXJ2aWNlcy9kYXRhL0RhdGFUcmFuc2Zvcm1lci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgRGF0YVRyYW5zZm9ybWVyIHsnLFxuICAgICAgICAgICAgJyAgdHJhbnNmb3JtPFQsIFU+KGRhdGE6IFQpOiBVIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ0RhdGFUcmFuc2Zvcm1lcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IG1hcHBlciBpbnRlcmZhY2VzIGZvciBkYXRhIG1hcHBpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBtYXBwZXI6IGFueSA9IGNyZWF0ZU1hcHBlcihzb3VyY2VTY2hlbWEsIHRhcmdldFNjaGVtYSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2RhdGEvU2NoZW1hTWFwcGVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYXBwZXIoc291cmNlOiBTY2hlbWEsIHRhcmdldDogU2NoZW1hKTogYW55IHsnLFxuICAgICAgICAgICAgJyAgcmV0dXJuIG5ldyBTY2hlbWFNYXBwZXIoc291cmNlLCB0YXJnZXQpOydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnU2NoZW1hTWFwcGVyJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdDYWNoaW5nIFNlcnZpY2UgSW50ZXJmYWNlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3QgY2FjaGUgaW50ZXJmYWNlIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRG9tYWluQ29udGV4dChcbiAgICAgICAgICAnY29uc3QgY2FjaGU6IGFueSA9IG5ldyBDYWNoZVNlcnZpY2UoKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FjaGUvQ2FjaGVTZXJ2aWNlLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2V4cG9ydCBjbGFzcyBDYWNoZVNlcnZpY2UgeycsXG4gICAgICAgICAgICAnICBnZXQ8VD4oa2V5OiBzdHJpbmcpOiBQcm9taXNlPFQgfCBudWxsPiB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdDYWNoZVNlcnZpY2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBjYWNoZSBlbnRyeSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGVudHJ5OiBhbnkgPSBjYWNoZS5nZXQoa2V5KTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvY2FjaGUvQ2FjaGVNYW5hZ2VyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2NsYXNzIENhY2hlTWFuYWdlciB7JyxcbiAgICAgICAgICAgICcgIGFzeW5jIGdldENhY2hlRW50cnkoa2V5OiBzdHJpbmcpOiBQcm9taXNlPENhY2hlRW50cnkgfCBudWxsPiB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdDYWNoZUVudHJ5IHwgbnVsbCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnVmFsaWRhdGlvbiBTZXJ2aWNlIEludGVyZmFjZSBTdWdnZXN0aW9ucycsICgpID0+IHtcbiAgICAgIHRlc3QoJ3Nob3VsZCBzdWdnZXN0IHZhbGlkYXRpb24gcmVzdWx0IGludGVyZmFjZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCByZXN1bHQ6IGFueSA9IHZhbGlkYXRvci52YWxpZGF0ZShkYXRhKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvdmFsaWRhdGlvbi9WYWxpZGF0aW9uU2VydmljZS50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgVmFsaWRhdGlvblNlcnZpY2UgeycsXG4gICAgICAgICAgICAnICB2YWxpZGF0ZShkYXRhOiB1bmtub3duKTogVmFsaWRhdGlvblJlc3VsdCB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdWYWxpZGF0aW9uUmVzdWx0Jyk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnc2hvdWxkIHN1Z2dlc3Qgc2NoZW1hIHZhbGlkYXRpb24gaW50ZXJmYWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IHNjaGVtYTogYW55ID0gYnVpbGRWYWxpZGF0aW9uU2NoZW1hKHJ1bGVzKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvdmFsaWRhdGlvbi9TY2hlbWFCdWlsZGVyLnRzJyxcbiAgICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgJ2ltcG9ydCB7IFZhbGlkYXRpb25TY2hlbWEgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gYnVpbGRWYWxpZGF0aW9uU2NoZW1hKHJ1bGVzOiBWYWxpZGF0aW9uUnVsZVtdKTogVmFsaWRhdGlvblNjaGVtYSB7J1xuICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdWYWxpZGF0aW9uU2NoZW1hJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdTZXJ2aWNlIEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIHNlcnZpY2UgZXJyb3IgaGFuZGxpbmcgZmxleGliaWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAgICdjb25zdCBlcnJvcjogYW55ID0gbmV3IFNlcnZpY2VFcnJvcihtZXNzYWdlLCBjb2RlKTsnLFxuICAgICAgICAgICdzcmMvc2VydmljZXMvZXJyb3JzL1NlcnZpY2VFcnJvci50cycsXG4gICAgICAgICAgQ29kZURvbWFpbi5TRVJWSUNFLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdleHBvcnQgY2xhc3MgU2VydmljZUVycm9yIGV4dGVuZHMgRXJyb3IgeycsXG4gICAgICAgICAgICAnICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IHN0cmluZywgZGV0YWlscz86IHVua25vd24pIHsnXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsYXNzaWZpY2F0aW9uID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignZXJyb3InKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdzaG91bGQgc3VnZ2VzdCBzcGVjaWZpYyBlcnJvciB0eXBlcyB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZURvbWFpbkNvbnRleHQoXG4gICAgICAgICAgJ2NvbnN0IGFwaUVycm9yOiBhbnkgPSBoYW5kbGVBcGlFcnJvcihyZXNwb25zZSk7JyxcbiAgICAgICAgICAnc3JjL3NlcnZpY2VzL2Vycm9ycy9BcGlFcnJvckhhbmRsZXIudHMnLFxuICAgICAgICAgIENvZGVEb21haW4uU0VSVklDRSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnaW1wb3J0IHsgQXBpRXJyb3IgfSBmcm9tIFwiQC90eXBlc1wiOycsXG4gICAgICAgICAgICAnZnVuY3Rpb24gaGFuZGxlQXBpRXJyb3IocmVzcG9uc2U6IFJlc3BvbnNlKTogQXBpRXJyb3IgeydcbiAgICAgICAgICBdXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5zdWdnZXN0ZWRSZXBsYWNlbWVudCkudG9CZSgnQXBpRXJyb3InKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ3Jvc3MtRG9tYWluIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWl4ZWQgZG9tYWluIGNvbnRleHRzIGFwcHJvcHJpYXRlbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IGEgc2VydmljZSB0aGF0IGludGVncmF0ZXMgYXN0cm9sb2dpY2FsIGNhbGN1bGF0aW9ucyB3aXRoIHJlY2lwZSByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAnY29uc3QgcmVjb21tZW5kYXRpb246IGFueSA9IGF3YWl0IGFzdHJvUmVjaXBlU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbih1c2VyQ2hhcnQsIHByZWZlcmVuY2VzKTsnLFxuICAgICAgICAnc3JjL3NlcnZpY2VzL0FzdHJvbG9naWNhbFJlY2lwZVNlcnZpY2UudHMnLFxuICAgICAgICBDb2RlRG9tYWluLlNFUlZJQ0UsXG4gICAgICAgIFtcbiAgICAgICAgICAnZXhwb3J0IGNsYXNzIEFzdHJvbG9naWNhbFJlY2lwZVNlcnZpY2UgeycsXG4gICAgICAgICAgJyAgYXN5bmMgZ2V0UmVjb21tZW5kYXRpb24oY2hhcnQ6IEFzdHJvbG9neUNoYXJ0LCBwcmVmczogVXNlclByZWZlcmVuY2VzKTogUHJvbWlzZTxSZWNpcGVSZWNvbW1lbmRhdGlvbj4geydcbiAgICAgICAgXVxuICAgICAgKTtcblxuICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGNsYXNzaWZpY2F0aW9uLnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdSZWNpcGVSZWNvbW1lbmRhdGlvbicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGNhbXBhaWduIHN5c3RlbSBpbnRlZ3JhdGlvbiB3aXRoIGRvbWFpbiBzZXJ2aWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVEb21haW5Db250ZXh0KFxuICAgICAgICAnY29uc3QgY2FtcGFpZ25EYXRhOiBhbnkgPSBpbnRlZ3JhdGVEb21haW5TZXJ2aWNlcyhzZXJ2aWNlcyk7JyxcbiAgICAgICAgJ3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9Eb21haW5JbnRlZ3JhdGlvbi50cycsXG4gICAgICAgIENvZGVEb21haW4uQ0FNUEFJR04sXG4gICAgICAgIFtcbiAgICAgICAgICAnY2xhc3MgRG9tYWluSW50ZWdyYXRpb24geycsXG4gICAgICAgICAgJyAgaW50ZWdyYXRlRG9tYWluU2VydmljZXMoc2VydmljZXM6IERvbWFpblNlcnZpY2VbXSk6IGFueSB7J1xuICAgICAgICBdXG4gICAgICApO1xuXG4gICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICBleHBlY3QoY2xhc3NpZmljYXRpb24uaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5yZWFzb25pbmcpLnRvQ29udGFpbignaW50ZWdyYXRpb24nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1R5cGUgUmVwbGFjZW1lbnQgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGFwcGx5IGRvbWFpbi1zcGVjaWZpYyByZXBsYWNlbWVudHMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnRzOiBUeXBlUmVwbGFjZW1lbnRbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIG9yaWdpbmFsOiAnYW55JyxcbiAgICAgICAgICByZXBsYWNlbWVudDogJ0luZ3JlZGllbnQnLFxuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL2RhdGEvaW5ncmVkaWVudHMvcHJvY2Vzc29yLnRzJyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiAxLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgICAgICB2YWxpZGF0aW9uUmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9yaWdpbmFsOiAnYW55JyxcbiAgICAgICAgICByZXBsYWNlbWVudDogJ1BsYW5ldGFyeVBvc2l0aW9uJyxcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5L3Bvc2l0aW9ucy50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMSxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjgsXG4gICAgICAgICAgdmFsaWRhdGlvblJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBvcmlnaW5hbDogJ2FueScsXG4gICAgICAgICAgcmVwbGFjZW1lbnQ6ICdQcm9ncmVzc01ldHJpY3MnLFxuICAgICAgICAgIGZpbGVQYXRoOiAnc3JjL3NlcnZpY2VzL2NhbXBhaWduL1Byb2dyZXNzVHJhY2tlci50cycsXG4gICAgICAgICAgbGluZU51bWJlcjogMSxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgICAgdmFsaWRhdGlvblJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIC8vIE1vY2sgZmlsZSBzeXN0ZW0gZm9yIGRvbWFpbi1zcGVjaWZpYyBjb250ZW50XG4gICAgICBqZXN0LnNweU9uKHJlcXVpcmUoJ2ZzJyksICdyZWFkRmlsZVN5bmMnKS5tb2NrSW1wbGVtZW50YXRpb24oKHBhdGg6IHVua25vd24pID0+IHtcbiAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoJ2luZ3JlZGllbnRzJykpIHJldHVybiAnY29uc3QgaW5ncmVkaWVudDogYW55ID0gZ2V0RGF0YSgpOyc7XG4gICAgICAgIGlmIChwYXRoLmluY2x1ZGVzKCdwbGFuZXRhcnknKSkgcmV0dXJuICdjb25zdCBwb3NpdGlvbjogYW55ID0gY2FsY3VsYXRlKCk7JztcbiAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoJ2NhbXBhaWduJykpIHJldHVybiAnY29uc3QgbWV0cmljczogdW5rbm93biA9IGdldFByb2dyZXNzKCk7JztcbiAgICAgICAgcmV0dXJuICdiYWNrdXAgY29udGVudCc7XG4gICAgICB9KTtcblxuICAgICAgamVzdC5zcHlPbihyZXF1aXJlKCdmcycpLCAnd3JpdGVGaWxlU3luYycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB1bmRlZmluZWQpO1xuICAgICAgamVzdC5zcHlPbihyZXF1aXJlKCdmcycpLCAnZXhpc3RzU3luYycpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcblxuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIGNvbXBpbGF0aW9uXG4gICAgICBqZXN0LnNweU9uKHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKSwgJ2V4ZWNTeW5jJykubW9ja1JldHVyblZhbHVlKCcnKTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByZXBsYWNlbWVudHMubWFwKHJlcGxhY2VtZW50ID0+IHJlcGxhY2VyLmFwcGx5UmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpKVxuICAgICAgKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5hcHBsaWVkUmVwbGFjZW1lbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==