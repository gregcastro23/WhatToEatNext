903375d8831b39d641de2fdc24a16e65
"use strict";
/* eslint-disable @typescript-eslint/no-explicit-anyno-console, @typescript-eslint/no-unused-vars, max-lines-per-function -- Campaign/test file with intentional patterns */
/**
 * Campaign System Test Integration Tests
 *
 * Comprehensive tests for campaign system test integration functionality,
 * including mocking, isolation, and memory management.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const campaign_1 = require("../../types/campaign");
const CampaignTestController_1 = require("../utils/CampaignTestController");
const campaignTestUtils_1 = require("../utils/campaignTestUtils");
describe('Campaign System Test Integration', () => {
    // Test isolation and cleanup
    afterEach(async () => {
        // Ensure cleanup after each test
        try {
            void CampaignTestController_1.campaignTestController.cleanupAfterTest('test-cleanup');
        }
        catch (error) {
            // // console.warn('Cleanup warning:', error);
        }
    });
    afterAll(async () => {
        // Force cleanup of singleton instances
        const { CampaignTestController } = await Promise.resolve().then(() => __importStar(require('../utils/CampaignTestController')));
        void CampaignTestController.forceCleanup();
    });
    describe('Campaign System Mocking', () => {
        it('should initialize mock campaign system without running actual builds', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'mock-initialization-test',
                preventActualBuilds: true,
                preventGitOperations: true
            });
            try {
                // Verify mock instances are created
                expect(context.controller).toBeDefined();
                expect(context.tracker).toBeDefined();
                expect(context.safety).toBeDefined();
                // Verify test isolation is active
                void campaignTestUtils_1.campaignTestAssertions.testIsolationActive(context);
                // Verify environment variables are set for test isolation
                expect(process.env.NODE_ENV).toBe('test');
                expect(process.env.DISABLE_ACTUAL_BUILDS).toBe('true');
                expect(process.env.DISABLE_GIT_OPERATIONS).toBe('true');
                // Test that mock controller doesn't run actual scripts
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                const result = await context.controller.executePhase(mockPhase);
                expect(result.success).toBe(true);
                expect(result.executionTime).toBeGreaterThan(0);
                expect(result.safetyEvents).toBeDefined();
                // Verify no actual build processes were triggered
                expect(result.filesProcessed).toBeGreaterThan(0); // Mock processing
                expect(result.errorsFixed).toBeGreaterThan(0); // Mock fixes
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('mock-initialization-test');
            }
        });
        it('should prevent actual TypeScript compilation during tests', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'prevent-tsc-test',
                preventActualBuilds: true
            });
            try {
                // Mock TypeScript error count should not run actual tsc
                const errorCount = context.tracker.getTypeScriptErrorCount();
                expect(typeof errorCount).toBe('number');
                expect(errorCount).toBeGreaterThanOrEqual(0);
                // Mock error breakdown should not run actual analysis
                const breakdown = context.tracker.getTypeScriptErrorBreakdown();
                expect(typeof breakdown).toBe('object');
                expect(Object.keys(breakdown).length).toBeGreaterThan(0);
                // Verify that actual tsc command was not executed
                // (This is ensured by the mock implementation)
                expect(breakdown['TS2352']).toBeDefined();
                expect(breakdown['TS2339']).toBeDefined();
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('prevent-tsc-test');
            }
        });
        it('should prevent actual git operations during tests', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'prevent-git-test',
                preventGitOperations: true
            });
            try {
                // Mock stash creation should not run actual git commands
                const stashId = context.safety.createStash('checkpoint', 'test');
                expect(typeof stashId).toBe('string');
                expect(stashId).toContain('mock_stash_');
                // Mock stash application should not run actual git commands
                const stashResult = context.safety.applyStash(String(stashId));
                expect(stashResult).toBeDefined();
                // Mock git state validation should not run actual git commands
                const validation = await context.safety.validateGitState();
                expect(validation.success).toBe(true);
                // Verify safety events were recorded
                const safetyEvents = context.safety.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
                expect(safetyEvents.some(e => e.type === campaign_1.SafetyEventType.CHECKPOINT_CREATED)).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('prevent-git-test');
            }
        });
    });
    describe('Test-Safe Progress Tracking', () => {
        it('should track progress without memory leaks', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'memory-safe-tracking-test',
                enableMemoryMonitoring: true,
                mockProgressTracking: true
            });
            try {
                expect(context.testSafeTracker).toBeDefined();
                if (context.testSafeTracker) {
                    // Start tracking
                    context.testSafeTracker.startTracking('memory-test');
                    // Simulate multiple progress updates
                    for (let i = 0; i < 10; i++) {
                        context.testSafeTracker.updateMetrics({
                            typeScriptErrors: { current: 86 - i * 5,
                                target: 0,
                                reduction: i * 5,
                                percentage: Math.round(((i * 5) / 86) * 100)
                            }
                        }, `update-${i}`);
                    }
                    // Get progress history
                    const history = context.testSafeTracker.getProgressHistory();
                    expect(history.length).toBeGreaterThan(0);
                    expect(history.length).toBeLessThanOrEqual(20); // Should be limited to prevent memory issues
                    // Validate memory usage
                    const memoryStats = context.testSafeTracker.getMemoryStatistics();
                    if (memoryStats != null) {
                        expect(memoryStats.memoryEfficient).toBe(true);
                    }
                    // Stop tracking
                    context.testSafeTracker.stopTracking('memory-test');
                }
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('memory-safe-tracking-test');
            }
        });
        it('should simulate realistic progress over time', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'progress-simulation-test',
                mockProgressTracking: true
            });
            try {
                if (context.testSafeTracker) {
                    const initialMetrics = await context.testSafeTracker.getProgressMetrics();
                    // Simulate progress to target metrics
                    const targetMetrics = {
                        typeScriptErrors: { current: 0, target: 0, reduction: 86, percentage: 100 },
                        lintingWarnings: { current: 0, target: 0, reduction: 4506, percentage: 100 }
                    };
                    context.testSafeTracker.simulateProgress(targetMetrics, 1000, 'simulation-test');
                    const finalMetrics = await context.testSafeTracker.getProgressMetrics();
                    // Verify progress was made
                    expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(initialMetrics.typeScriptErrors.current);
                    expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(initialMetrics.lintingWarnings.current);
                }
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('progress-simulation-test');
            }
        });
        it('should generate comprehensive progress reports', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'progress-report-test',
                mockProgressTracking: true
            });
            try {
                // Generate progress report
                const report = await context.tracker.generateProgressReport();
                expect(report).toBeDefined();
                expect(report.campaignId).toBe('mock-campaign');
                expect(report.overallProgress).toBeGreaterThanOrEqual(0);
                expect(report.overallProgress).toBeLessThanOrEqual(100);
                expect(report.phases).toBeDefined();
                expect(report.phases.length).toBeGreaterThan(0);
                expect(report.currentMetrics).toBeDefined();
                expect(report.targetMetrics).toBeDefined();
                expect(report.estimatedCompletion).toBeInstanceOf(Date);
                // Verify phase reports
                const phase = (await report).phases[0];
                expect(phase.phaseId).toBeDefined();
                expect(phase.phaseName).toBeDefined();
                expect(phase.status).toBeDefined();
                expect(phase.metrics).toBeDefined();
                expect(Array.isArray(phase.achievements)).toBe(true);
                expect(Array.isArray(phase.issues)).toBe(true);
                expect(Array.isArray(phase.recommendations)).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('progress-report-test');
            }
        });
    });
    describe('Campaign Pause/Resume Functionality', () => {
        it('should pause campaign operations for test isolation', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'pause-resume-test'
            });
            try {
                // Verify campaign is paused
                expect(context.testController.isPaused()).toBe(true);
                expect(context.controller.isPaused()).toBe(true);
                // Attempt to execute phase while paused should handle gracefully
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                await expect(context.controller.executePhase(mockPhase)).rejects.toThrow('Campaign is paused');
                // Resume campaign
                context.testController.resumeCampaignAfterTest('pause-resume-test');
                expect(context.testController.isPaused()).toBe(false);
                expect(context.controller.isPaused()).toBe(false);
                // Should be able to execute phase after resume
                const result = await context.controller.executePhase(mockPhase);
                expect(result.success).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('pause-resume-test');
            }
        });
        it('should maintain test isolation across multiple tests', async () => {
            // First test
            const context1 = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'isolation-test-1'
            });
            try {
                context1.testController.updateMockMetrics({
                    typeScriptErrors: { current: 10, target: 0, reduction: 76, percentage: 88 }
                }, 'isolation-test-1');
                const metrics1 = await context1.tracker.getProgressMetrics();
                expect(metrics1.typeScriptErrors.current).toBe(10);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('isolation-test-1');
            }
            // Second test should have clean state
            const context2 = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'isolation-test-2'
            });
            try {
                const metrics2 = await context2.tracker.getProgressMetrics();
                // Should not have the modified metrics from test 1
                expect(metrics2.typeScriptErrors.current).not.toBe(10);
                expect(metrics2.typeScriptErrors.current).toBeGreaterThan(10); // Should be initial value
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('isolation-test-2');
            }
        });
        it('should handle concurrent test isolation', async () => {
            // This test verifies that the singleton pattern works correctly
            // and doesn't cause conflicts between concurrent test setups
            const testPromises = [
                (0, campaignTestUtils_1.withCampaignTestIsolation)('concurrent-test-1', async (context) => {
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { current: 20, target: 0, reduction: 66, percentage: 77 }
                    }, 'concurrent-test-1');
                    const metrics = await context.tracker.getProgressMetrics();
                    expect(metrics.typeScriptErrors.current).toBe(20);
                    return 'test-1-complete';
                }),
                (0, campaignTestUtils_1.withCampaignTestIsolation)('concurrent-test-2', async (context) => {
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { current: 30, target: 0, reduction: 56, percentage: 65 }
                    }, 'concurrent-test-2');
                    const metrics = await context.tracker.getProgressMetrics();
                    expect(metrics.typeScriptErrors.current).toBe(30);
                    return 'test-2-complete';
                })
            ];
            const results = await Promise.all(testPromises);
            expect(results).toEqual(['test-1-complete', 'test-2-complete']);
        });
    });
    describe('Memory Management', () => {
        it('should prevent memory leaks during campaign operations', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'memory-leak-prevention-test',
                enableMemoryMonitoring: true
            });
            try {
                // Perform multiple operations that could cause memory leaks
                for (let i = 0; i < 20; i++) {
                    const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                    context.controller.executePhase(mockPhase);
                    // Update metrics
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { current: 86 - i, target: 0, reduction: i, percentage: Math.round((i / 86) * 100) }
                    }, `iteration-${i}`);
                    // Create safety checkpoints
                    context.safety.createStash(`Checkpoint ${i}`, 'test-phase');
                }
                // Validate memory usage
                void campaignTestUtils_1.campaignTestAssertions.memoryUsageAcceptable(context);
                // Verify that safety events are properly managed (not accumulating indefinitely)
                const safetyEvents = context.controller.getSafetyEvents();
                expect(safetyEvents.length).toBeLessThan(100); // Should be limited to prevent memory issues
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('memory-leak-prevention-test');
            }
        });
        it('should cleanup resources properly after test completion', async () => {
            // Setup and use campaign test
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'resource-cleanup-test',
                enableMemoryMonitoring: true
            });
            // Perform some operations
            const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
            context.controller.executePhase(mockPhase);
            if (context.testSafeTracker) {
                context.testSafeTracker.startTracking('cleanup-test');
                context.testSafeTracker.updateMetrics({
                    typeScriptErrors: { current: 50, target: 0, reduction: 50, percentage: 50 }
                }, 'cleanup-test');
            }
            // Cleanup
            (0, campaignTestUtils_1.cleanupCampaignTest)('resource-cleanup-test');
            // Verify cleanup was effective
            expect(context.testController.isPaused()).toBe(false);
            expect(context.testController.isIsolated()).toBe(false);
            // Test-safe tracker should be cleaned up
            if (context.testSafeTracker) {
                const validation = context.testSafeTracker.validateTrackingState();
                // Should not be tracking anymore
                expect(validation.success).toBe(true);
            }
        });
    });
    describe('Complete Campaign Test Scenarios', () => {
        it('should execute TypeScript error reduction scenario', async () => {
            const scenario = campaignTestUtils_1.campaignTestData.typeScriptErrorReduction();
            const _config = (0, campaignTestUtils_1.createMockCampaignConfig)();
            const { context: _context, results, finalMetrics, safetyEvents: _safetyEvents } = await (0, campaignTestUtils_1.executeCampaignTestScenario)(scenario, _config);
            try {
                // Verify phase execution
                expect(results.length).toBe(1);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(results[0]);
                // Verify progress improvement
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(scenario.initialMetrics, finalMetrics);
                // Verify safety events
                campaignTestUtils_1.campaignTestAssertions.safetyEventsRecorded(_safetyEvents, scenario.expectedSafetyEvents);
                // Verify final state
                expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(scenario.initialMetrics.typeScriptErrors.current);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)(scenario.name);
            }
        });
        it('should execute linting warning cleanup scenario', async () => {
            const scenario = campaignTestUtils_1.campaignTestData.lintingWarningCleanup();
            const _config = (0, campaignTestUtils_1.createMockCampaignConfig)();
            const { context: _context, results, finalMetrics, safetyEvents: _safetyEvents } = await (0, campaignTestUtils_1.executeCampaignTestScenario)(scenario, _config);
            try {
                // Verify phase execution
                expect(results.length).toBe(1);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(results[0]);
                // Verify progress improvement
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(scenario.initialMetrics, finalMetrics);
                // Verify linting-specific improvements
                expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(scenario.initialMetrics.lintingWarnings.current);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)(scenario.name);
            }
        });
        it('should handle campaign failures gracefully', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'failure-handling-test'
            });
            try {
                // Create a phase that will fail
                const failingPhase = {
                    ...(0, campaignTestUtils_1.createMockCampaignConfig)().phases[0],
                    successCriteria: { typeScriptErrors: -1, // Impossible criteria
                    }
                };
                // Mock the controller to simulate failure
                void jest.spyOn(context.controller, 'executePhase').mockRejectedValueOnce(new Error('Mock failure'));
                // Execute phase and expect it to handle failure
                await expect(context.controller.executePhase(failingPhase)).rejects.toThrow('Mock failure');
                // Verify safety events were recorded for the failure
                const safetyEvents = context.controller.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('failure-handling-test');
            }
        });
    });
    describe('Integration Validation', () => {
        it('should validate complete campaign system integration', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'integration-validation-test',
                enableMemoryMonitoring: true,
                preventActualBuilds: true,
                preventGitOperations: true,
                mockProgressTracking: true
            });
            try {
                // Validate test isolation
                const isolation = (0, campaignTestUtils_1.validateCampaignTestIsolation)(await context);
                expect(isolation.isValid).toBe(true);
                expect(isolation.issues).toHaveLength(0);
                // Test all major components
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                // 1. Execute campaign phase
                const resolvedContext = await context;
                const phaseResult = await resolvedContext.controller.executePhase(mockPhase);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(phaseResult);
                // 2. Track progress
                const initialMetrics = await (await context).tracker.getProgressMetrics();
                context.testController.updateMockMetrics({
                    typeScriptErrors: { current: 25, target: 0, reduction: 61, percentage: 71 }
                }, 'integration-test');
                const updatedMetrics = await (await context).tracker.getProgressMetrics();
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(initialMetrics, updatedMetrics);
                // 3. Safety operations
                const stashId = (await context).safety.createStash('Integration test stash', 'test-phase');
                expect(stashId).toBeDefined();
                (await context).safety.applyStash(String(stashId));
                // 4. Generate reports
                const report = await context.tracker.generateProgressReport();
                expect(report).toBeDefined();
                expect(report.phases.length).toBeGreaterThan(0);
                // 5. Validate memory usage
                void campaignTestUtils_1.campaignTestAssertions.memoryUsageAcceptable(context);
                // 6. Verify all safety events
                const safetyEvents = (await context).controller.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
                campaignTestUtils_1.campaignTestAssertions.safetyEventsRecorded(safetyEvents, [campaign_1.SafetyEventType.CHECKPOINT_CREATED]);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('integration-validation-test');
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5tYWxmb3JtZWQtc3ludGF4LWJhY2t1cC0xNzU3NDg0NTM5MzA2L3NyY19fX3Rlc3RzX19fY2FtcGFpZ25fQ2FtcGFpZ25TeXN0ZW1UZXN0SW50ZWdyYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUEsNEtBQTRLO0FBQzVLOzs7OztHQUtHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsbURBRThCO0FBQzlCLDRFQUF5RTtBQUN6RSxrRUFTb0M7QUFFcEMsUUFBUSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtJQUNoRCw2QkFBNkI7SUFDN0IsU0FBUyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLGlDQUFpQztRQUNqQyxJQUFJO1lBQ0YsS0FBSywrQ0FBc0IsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUM5RDtRQUFDLE9BQU8sS0FBVSxFQUFFO1lBQ25CLDhDQUE4QztTQUMvQztJQUNILENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ2xCLHVDQUF1QztRQUN2QyxNQUFNLEVBQUUsc0JBQXNCLEVBQUUsR0FBRyx3REFBYSxpQ0FBaUMsR0FBQyxDQUFDO1FBQ25GLEtBQUssc0JBQXNCLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1FBQ3ZDLEVBQUUsQ0FBQyxzRUFBc0UsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwRixNQUFNLE9BQU8sR0FBUSxNQUFNLElBQUEscUNBQWlCLEVBQUM7Z0JBQ2pELFFBQVEsRUFBRSwwQkFBMEI7Z0JBQzlCLG1CQUFtQixFQUFFLElBQUk7Z0JBQ3pCLG9CQUFvQixFQUFFLElBQUk7YUFDM0IsQ0FBQyxDQUFDO1lBRUgsSUFBSTtnQkFDRixvQ0FBb0M7Z0JBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFD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QVcsQ0FBQyx3QkFBd0IsRUFBRSxZQUFZLENBQUMsQ0FBQztnQkFDaEcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUM5QixDQUFDLE1BQU0sT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFFbkQsc0JBQXNCO2dCQUN0QixNQUFNLE1BQU0sR0FBUSxNQUFNLE9BQU8sQ0FBQyxPQUFPLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztnQkFDbkUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUM3QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRWhELDJCQUEyQjtnQkFDM0IsS0FBSywwQ0FBc0IsQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFFM0QsOEJBQThCO2dCQUM5QixNQUFNLFlBQVksR0FBUSxDQUFDLE1BQU0sT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxDQUFDO2dCQUN2RSxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDL0MsMENBQXNCLENBQUMsb0JBQW9CLENBQUMsWUFBWSxFQUFFLENBQUMsMEJBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7YUFDakc7b0JBQVM7Z0JBQ1IsSUFBQSx1Q0FBbUIsRUFBQyw2QkFBNkIsQ0FBQyxDQUFDO2FBQ3BEO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC8ubWFsZm9ybWVkLXN5bnRheC1iYWNrdXAtMTc1NzQ4NDUzOTMwNi9zcmNfX190ZXN0c19fX2NhbXBhaWduX0NhbXBhaWduU3lzdGVtVGVzdEludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueW5vLWNvbnNvbGUsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycywgbWF4LWxpbmVzLXBlci1mdW5jdGlvbiAtLSBDYW1wYWlnbi90ZXN0IGZpbGUgd2l0aCBpbnRlbnRpb25hbCBwYXR0ZXJucyAqL1xuLyoqXG4gKiBDYW1wYWlnbiBTeXN0ZW0gVGVzdCBJbnRlZ3JhdGlvbiBUZXN0c1xuICpcbiAqIENvbXByZWhlbnNpdmUgdGVzdHMgZm9yIGNhbXBhaWduIHN5c3RlbSB0ZXN0IGludGVncmF0aW9uIGZ1bmN0aW9uYWxpdHksXG4gKiBpbmNsdWRpbmcgbW9ja2luZywgaXNvbGF0aW9uLCBhbmQgbWVtb3J5IG1hbmFnZW1lbnQuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBTYWZldHlFdmVudFR5cGVcbn0gZnJvbSAnLi4vLi4vdHlwZXMvY2FtcGFpZ24nO1xuaW1wb3J0IHsgY2FtcGFpZ25UZXN0Q29udHJvbGxlciB9IGZyb20gJy4uL3V0aWxzL0NhbXBhaWduVGVzdENvbnRyb2xsZXInO1xuaW1wb3J0IHtcbiAgICBjYW1wYWlnblRlc3RBc3NlcnRpb25zLFxuICAgIGNhbXBhaWduVGVzdERhdGEsXG4gICAgY2xlYW51cENhbXBhaWduVGVzdCxcbiAgICBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcsXG4gICAgZXhlY3V0ZUNhbXBhaWduVGVzdFNjZW5hcmlvLFxuICAgIHNldHVwQ2FtcGFpZ25UZXN0LFxuICAgIHZhbGlkYXRlQ2FtcGFpZ25UZXN0SXNvbGF0aW9uLFxuICAgIHdpdGhDYW1wYWlnblRlc3RJc29sYXRpb25cbn0gZnJvbSAnLi4vdXRpbHMvY2FtcGFpZ25UZXN0VXRpbHMnO1xuXG5kZXNjcmliZSgnQ2FtcGFpZ24gU3lzdGVtIFRlc3QgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIC8vIFRlc3QgaXNvbGF0aW9uIGFuZCBjbGVhbnVwXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gRW5zdXJlIGNsZWFudXAgYWZ0ZXIgZWFjaCB0ZXN0XG4gICAgdHJ5IHtcbiAgICAgIHZvaWQgY2FtcGFpZ25UZXN0Q29udHJvbGxlci5jbGVhbnVwQWZ0ZXJUZXN0KCd0ZXN0LWNsZWFudXAnKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyAvLyBjb25zb2xlLndhcm4oJ0NsZWFudXAgd2FybmluZzonLCBlcnJvcik7XG4gICAgfVxuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gRm9yY2UgY2xlYW51cCBvZiBzaW5nbGV0b24gaW5zdGFuY2VzXG4gICAgY29uc3QgeyBDYW1wYWlnblRlc3RDb250cm9sbGVyIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3V0aWxzL0NhbXBhaWduVGVzdENvbnRyb2xsZXInKTtcbiAgICB2b2lkIENhbXBhaWduVGVzdENvbnRyb2xsZXIuZm9yY2VDbGVhbnVwKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW1wYWlnbiBTeXN0ZW0gTW9ja2luZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgbW9jayBjYW1wYWlnbiBzeXN0ZW0gd2l0aG91dCBydW5uaW5nIGFjdHVhbCBidWlsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gIHRlc3ROYW1lOiAnbW9jay1pbml0aWFsaXphdGlvbi10ZXN0JyxcbiAgICAgICAgcHJldmVudEFjdHVhbEJ1aWxkczogdHJ1ZSxcbiAgICAgICAgcHJldmVudEdpdE9wZXJhdGlvbnM6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgbW9jayBpbnN0YW5jZXMgYXJlIGNyZWF0ZWRcbiAgICAgICAgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlcikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQudHJhY2tlcikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQuc2FmZXR5KS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAgIC8vIFZlcmlmeSB0ZXN0IGlzb2xhdGlvbiBpcyBhY3RpdmVcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnRlc3RJc29sYXRpb25BY3RpdmUoY29udGV4dCk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgc2V0IGZvciB0ZXN0IGlzb2xhdGlvblxuICAgICAgICBleHBlY3QocHJvY2Vzcy5lbnYuTk9ERV9FTlYpLnRvQmUoJ3Rlc3QnKTtcbiAgICAgICAgZXhwZWN0KHByb2Nlc3MuZW52LkRJU0FCTEVfQUNUVUFMX0JVSUxEUykudG9CZSgndHJ1ZScpO1xuICAgICAgICBleHBlY3QocHJvY2Vzcy5lbnYuRElTQUJMRV9HSVRfT1BFUkFUSU9OUykudG9CZSgndHJ1ZScpO1xuXG4gICAgICAgIC8vIFRlc3QgdGhhdCBtb2NrIGNvbnRyb2xsZXIgZG9lc24ndCBydW4gYWN0dWFsIHNjcmlwdHNcbiAgICAgICAgY29uc3QgbW9ja1BoYXNlOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKS5waGFzZXNbMF07XG4gICAgICAgIGNvbnN0IHJlc3VsdDogYW55ID0gYXdhaXQgY29udGV4dC5jb250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrUGhhc2UpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5leGVjdXRpb25UaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc2FmZXR5RXZlbnRzKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBubyBhY3R1YWwgYnVpbGQgcHJvY2Vzc2VzIHdlcmUgdHJpZ2dlcmVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZXNQcm9jZXNzZWQpLnRvQmVHcmVhdGVyVGhhbigwKTsgLy8gTW9jayBwcm9jZXNzaW5nXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzRml4ZWQpLnRvQmVHcmVhdGVyVGhhbigwKTsgLy8gTW9jayBmaXhlc1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgnbW9jay1pbml0aWFsaXphdGlvbi10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgYWN0dWFsIFR5cGVTY3JpcHQgY29tcGlsYXRpb24gZHVyaW5nIHRlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICB0ZXN0TmFtZTogJ3ByZXZlbnQtdHNjLXRlc3QnLFxuICAgICAgICBwcmV2ZW50QWN0dWFsQnVpbGRzOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTW9jayBUeXBlU2NyaXB0IGVycm9yIGNvdW50IHNob3VsZCBub3QgcnVuIGFjdHVhbCB0c2NcbiAgICAgICAgY29uc3QgZXJyb3JDb3VudDogYW55ID0gY29udGV4dC50cmFja2VyLmdldFR5cGVTY3JpcHRFcnJvckNvdW50KCk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgZXJyb3JDb3VudCkudG9CZSgnbnVtYmVyJyk7XG4gICAgICAgIGV4cGVjdChlcnJvckNvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuXG4gICAgICAgIC8vIE1vY2sgZXJyb3IgYnJlYWtkb3duIHNob3VsZCBub3QgcnVuIGFjdHVhbCBhbmFseXNpc1xuICAgICAgICBjb25zdCBicmVha2Rvd246IGFueSA9IGNvbnRleHQudHJhY2tlci5nZXRUeXBlU2NyaXB0RXJyb3JCcmVha2Rvd24oKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBicmVha2Rvd24pLnRvQmUoJ29iamVjdCcpO1xuICAgICAgICBleHBlY3QoT2JqZWN0LmtleXMoYnJlYWtkb3duKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgICAvLyBWZXJpZnkgdGhhdCBhY3R1YWwgdHNjIGNvbW1hbmQgd2FzIG5vdCBleGVjdXRlZFxuICAgICAgICAvLyAoVGhpcyBpcyBlbnN1cmVkIGJ5IHRoZSBtb2NrIGltcGxlbWVudGF0aW9uKVxuICAgICAgICBleHBlY3QoYnJlYWtkb3duWydUUzIzNTInXSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGJyZWFrZG93blsnVFMyMzM5J10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdwcmV2ZW50LXRzYy10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgYWN0dWFsIGdpdCBvcGVyYXRpb25zIGR1cmluZyB0ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgdGVzdE5hbWU6ICdwcmV2ZW50LWdpdC10ZXN0JyxcbiAgICAgICAgcHJldmVudEdpdE9wZXJhdGlvbnM6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBNb2NrIHN0YXNoIGNyZWF0aW9uIHNob3VsZCBub3QgcnVuIGFjdHVhbCBnaXQgY29tbWFuZHNcbiAgICAgICAgY29uc3Qgc3Rhc2hJZDogYW55ID0gY29udGV4dC5zYWZldHkuY3JlYXRlU3Rhc2goJ2NoZWNrcG9pbnQnLCAndGVzdCcpO1xuICAgICAgICBleHBlY3QodHlwZW9mIHN0YXNoSWQpLnRvQmUoJ3N0cmluZycpO1xuICAgICAgICBleHBlY3Qoc3Rhc2hJZCkudG9Db250YWluKCdtb2NrX3N0YXNoXycpO1xuXG4gICAgICAgIC8vIE1vY2sgc3Rhc2ggYXBwbGljYXRpb24gc2hvdWxkIG5vdCBydW4gYWN0dWFsIGdpdCBjb21tYW5kc1xuICAgICAgICBjb25zdCBzdGFzaFJlc3VsdDogYW55ID0gY29udGV4dC5zYWZldHkuYXBwbHlTdGFzaChTdHJpbmcoc3Rhc2hJZCkpO1xuICAgICAgICBleHBlY3Qoc3Rhc2hSZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgLy8gTW9jayBnaXQgc3RhdGUgdmFsaWRhdGlvbiBzaG91bGQgbm90IHJ1biBhY3R1YWwgZ2l0IGNvbW1hbmRzXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb246IGFueSA9IGF3YWl0IGNvbnRleHQuc2FmZXR5LnZhbGlkYXRlR2l0U3RhdGUoKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRpb24uc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgICAvLyBWZXJpZnkgc2FmZXR5IGV2ZW50cyB3ZXJlIHJlY29yZGVkXG4gICAgICAgIGNvbnN0IHNhZmV0eUV2ZW50czogYW55ID0gY29udGV4dC5zYWZldHkuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMuc29tZShlID0+IGUudHlwZSA9PT0gU2FmZXR5RXZlbnRUeXBlLkNIRUNLUE9JTlRfQ1JFQVRFRCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdwcmV2ZW50LWdpdC10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUZXN0LVNhZmUgUHJvZ3Jlc3MgVHJhY2tpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0cmFjayBwcm9ncmVzcyB3aXRob3V0IG1lbW9yeSBsZWFrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgdGVzdE5hbWU6ICdtZW1vcnktc2FmZS10cmFja2luZy10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgICAgbW9ja1Byb2dyZXNzVHJhY2tpbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBleHBlY3QoY29udGV4dC50ZXN0U2FmZVRyYWNrZXIpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQudGVzdFNhZmVUcmFja2VyKSB7XG4gICAgICAgICAgLy8gU3RhcnQgdHJhY2tpbmdcbiAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5zdGFydFRyYWNraW5nKCdtZW1vcnktdGVzdCcpO1xuXG4gICAgICAgICAgLy8gU2ltdWxhdGUgbXVsdGlwbGUgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci51cGRhdGVNZXRyaWNzKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiA4NiAtIGkgKiA1LFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAwLFxuICAgICAgICAgICAgICAgICAgcmVkdWN0aW9uOiBpICogNSxcbiAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKChpICogNSkgLyA4NikgKiAxMDApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBgdXBkYXRlLSR7aX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBHZXQgcHJvZ3Jlc3MgaGlzdG9yeVxuICAgICAgICAgIGNvbnN0IGhpc3Rvcnk6IGFueSA9IGNvbnRleHQudGVzdFNhZmVUcmFja2VyLmdldFByb2dyZXNzSGlzdG9yeSgpO1xuICAgICAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgyMCk7IC8vIFNob3VsZCBiZSBsaW1pdGVkIHRvIHByZXZlbnQgbWVtb3J5IGlzc3Vlc1xuXG4gICAgICAgICAgLy8gVmFsaWRhdGUgbWVtb3J5IHVzYWdlXG4gICAgICAgICAgY29uc3QgbWVtb3J5U3RhdHM6IGFueSA9IGNvbnRleHQudGVzdFNhZmVUcmFja2VyLmdldE1lbW9yeVN0YXRpc3RpY3MoKTtcbiAgICAgICAgICBpZiAobWVtb3J5U3RhdHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgZXhwZWN0KG1lbW9yeVN0YXRzLm1lbW9yeUVmZmljaWVudCkudG9CZSh0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTdG9wIHRyYWNraW5nXG4gICAgICAgICAgY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuc3RvcFRyYWNraW5nKCdtZW1vcnktdGVzdCcpO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdtZW1vcnktc2FmZS10cmFja2luZy10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNpbXVsYXRlIHJlYWxpc3RpYyBwcm9ncmVzcyBvdmVyIHRpbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gIHRlc3ROYW1lOiAncHJvZ3Jlc3Mtc2ltdWxhdGlvbi10ZXN0JyxcbiAgICAgICAgbW9ja1Byb2dyZXNzVHJhY2tpbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoY29udGV4dC50ZXN0U2FmZVRyYWNrZXIpIHtcbiAgICAgICAgICBjb25zdCBpbml0aWFsTWV0cmljczogYW55ID0gYXdhaXQgY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgcHJvZ3Jlc3MgdG8gdGFyZ2V0IG1ldHJpY3NcbiAgICAgICAgICBjb25zdCB0YXJnZXRNZXRyaWNzOiBhbnkgPSB7XG4gIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDg2LCBwZXJjZW50YWdlOiAxMDAgfSxcbiAgICAgICAgICAgIGxpbnRpbmdXYXJuaW5nczogeyBjdXJyZW50OiAwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogNDUwNiwgcGVyY2VudGFnZTogMTAwIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuc2ltdWxhdGVQcm9ncmVzcyh0YXJnZXRNZXRyaWNzLCAxMDAwLCAnc2ltdWxhdGlvbi10ZXN0Jyk7XG5cbiAgICAgICAgICBjb25zdCBmaW5hbE1ldHJpY3M6IGFueSA9IGF3YWl0IGNvbnRleHQudGVzdFNhZmVUcmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuXG4gICAgICAgICAgLy8gVmVyaWZ5IHByb2dyZXNzIHdhcyBtYWRlXG4gICAgICAgICAgZXhwZWN0KGZpbmFsTWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQpLnRvQmVMZXNzVGhhbk9yRXF1YWwoaW5pdGlhbE1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KTtcbiAgICAgICAgICBleHBlY3QoZmluYWxNZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50KS50b0JlTGVzc1RoYW5PckVxdWFsKGluaXRpYWxNZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgncHJvZ3Jlc3Mtc2ltdWxhdGlvbi10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcHJvZ3Jlc3MgcmVwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgdGVzdE5hbWU6ICdwcm9ncmVzcy1yZXBvcnQtdGVzdCcsXG4gICAgICAgIG1vY2tQcm9ncmVzc1RyYWNraW5nOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2VuZXJhdGUgcHJvZ3Jlc3MgcmVwb3J0XG4gICAgICAgIGNvbnN0IHJlcG9ydDogYW55ID0gYXdhaXQgY29udGV4dC50cmFja2VyLmdlbmVyYXRlUHJvZ3Jlc3NSZXBvcnQoKTtcblxuICAgICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LmNhbXBhaWduSWQpLnRvQmUoJ21vY2stY2FtcGFpZ24nKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5vdmVyYWxsUHJvZ3Jlc3MpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQub3ZlcmFsbFByb2dyZXNzKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQucGhhc2VzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LnBoYXNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5jdXJyZW50TWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC50YXJnZXRNZXRyaWNzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LmVzdGltYXRlZENvbXBsZXRpb24pLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBwaGFzZSByZXBvcnRzXG4gICAgICAgIGNvbnN0IHBoYXNlOiBhbnkgPSAoYXdhaXQgcmVwb3J0KS5waGFzZXNbMF07XG4gICAgICAgIGV4cGVjdChwaGFzZS5waGFzZUlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocGhhc2UucGhhc2VOYW1lKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocGhhc2Uuc3RhdHVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocGhhc2UubWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGhhc2UuYWNoaWV2ZW1lbnRzKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGhhc2UuaXNzdWVzKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGhhc2UucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3Byb2dyZXNzLXJlcG9ydC10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW1wYWlnbiBQYXVzZS9SZXN1bWUgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHBhdXNlIGNhbXBhaWduIG9wZXJhdGlvbnMgZm9yIHRlc3QgaXNvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICB0ZXN0TmFtZTogJ3BhdXNlLXJlc3VtZS10ZXN0J1xuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmeSBjYW1wYWlnbiBpcyBwYXVzZWRcbiAgICAgICAgZXhwZWN0KGNvbnRleHQudGVzdENvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlci5pc1BhdXNlZCgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gZXhlY3V0ZSBwaGFzZSB3aGlsZSBwYXVzZWQgc2hvdWxkIGhhbmRsZSBncmFjZWZ1bGx5XG4gICAgICAgIGNvbnN0IG1vY2tQaGFzZTogYW55ID0gY3JlYXRlTW9ja0NhbXBhaWduQ29uZmlnKCkucGhhc2VzWzBdO1xuICAgICAgICBhd2FpdCBleHBlY3QoY29udGV4dC5jb250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrUGhhc2UpKS5yZWplY3RzLnRvVGhyb3coJ0NhbXBhaWduIGlzIHBhdXNlZCcpO1xuXG4gICAgICAgIC8vIFJlc3VtZSBjYW1wYWlnblxuICAgICAgICBjb250ZXh0LnRlc3RDb250cm9sbGVyLnJlc3VtZUNhbXBhaWduQWZ0ZXJUZXN0KCdwYXVzZS1yZXN1bWUtdGVzdCcpO1xuICAgICAgICBleHBlY3QoY29udGV4dC50ZXN0Q29udHJvbGxlci5pc1BhdXNlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlci5pc1BhdXNlZCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgICAvLyBTaG91bGQgYmUgYWJsZSB0byBleGVjdXRlIHBoYXNlIGFmdGVyIHJlc3VtZVxuICAgICAgICBjb25zdCByZXN1bHQ6IGFueSA9IGF3YWl0IGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgncGF1c2UtcmVzdW1lLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gdGVzdCBpc29sYXRpb24gYWNyb3NzIG11bHRpcGxlIHRlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRmlyc3QgdGVzdFxuICAgICAgY29uc3QgY29udGV4dDE6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgdGVzdE5hbWU6ICdpc29sYXRpb24tdGVzdC0xJ1xuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnRleHQxLnRlc3RDb250cm9sbGVyLnVwZGF0ZU1vY2tNZXRyaWNzKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogMTAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA3NiwgcGVyY2VudGFnZTogODggfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2lzb2xhdGlvbi10ZXN0LTEnLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBtZXRyaWNzMTogYW55ID0gYXdhaXQgY29udGV4dDEudHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpY3MxLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZSgxMCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdpc29sYXRpb24tdGVzdC0xJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlY29uZCB0ZXN0IHNob3VsZCBoYXZlIGNsZWFuIHN0YXRlXG4gICAgICBjb25zdCBjb250ZXh0MjogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICB0ZXN0TmFtZTogJ2lzb2xhdGlvbi10ZXN0LTInXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0cmljczI6IGFueSA9IGF3YWl0IGNvbnRleHQyLnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgIC8vIFNob3VsZCBub3QgaGF2ZSB0aGUgbW9kaWZpZWQgbWV0cmljcyBmcm9tIHRlc3QgMVxuICAgICAgICBleHBlY3QobWV0cmljczIudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS5ub3QudG9CZSgxMCk7XG4gICAgICAgIGV4cGVjdChtZXRyaWNzMi50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQpLnRvQmVHcmVhdGVyVGhhbigxMCk7IC8vIFNob3VsZCBiZSBpbml0aWFsIHZhbHVlXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdpc29sYXRpb24tdGVzdC0yJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHRlc3QgaXNvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGhpcyB0ZXN0IHZlcmlmaWVzIHRoYXQgdGhlIHNpbmdsZXRvbiBwYXR0ZXJuIHdvcmtzIGNvcnJlY3RseVxuICAgICAgLy8gYW5kIGRvZXNuJ3QgY2F1c2UgY29uZmxpY3RzIGJldHdlZW4gY29uY3VycmVudCB0ZXN0IHNldHVwc1xuXG4gICAgICBjb25zdCB0ZXN0UHJvbWlzZXM6IGFueSA9IFtcbiAgICAgICAgd2l0aENhbXBhaWduVGVzdElzb2xhdGlvbignY29uY3VycmVudC10ZXN0LTEnLCBhc3luYyBjb250ZXh0ID0+IHtcbiAgICAgICAgICBjb250ZXh0LnRlc3RDb250cm9sbGVyLnVwZGF0ZU1vY2tNZXRyaWNzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDIwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogNjYsIHBlcmNlbnRhZ2U6IDc3IH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY29uY3VycmVudC10ZXN0LTEnLFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgbWV0cmljczogYW55ID0gYXdhaXQgY29udGV4dC50cmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgICAgICAgIGV4cGVjdChtZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZSgyMCk7XG4gICAgICAgICAgcmV0dXJuICd0ZXN0LTEtY29tcGxldGUnO1xuICAgICAgICB9KSxcblxuICAgICAgICB3aXRoQ2FtcGFpZ25UZXN0SXNvbGF0aW9uKCdjb25jdXJyZW50LXRlc3QtMicsIGFzeW5jIGNvbnRleHQgPT4ge1xuICAgICAgICAgIGNvbnRleHQudGVzdENvbnRyb2xsZXIudXBkYXRlTW9ja01ldHJpY3MoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogMzAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA1NiwgcGVyY2VudGFnZTogNjUgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjb25jdXJyZW50LXRlc3QtMicsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBtZXRyaWNzOiBhbnkgPSBhd2FpdCBjb250ZXh0LnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgICAgZXhwZWN0KG1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlKDMwKTtcbiAgICAgICAgICByZXR1cm4gJ3Rlc3QtMi1jb21wbGV0ZSc7XG4gICAgICAgIH0pXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHRzOiBhbnkgPSBhd2FpdCBQcm9taXNlLmFsbCh0ZXN0UHJvbWlzZXMpO1xuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvRXF1YWwoWyd0ZXN0LTEtY29tcGxldGUnLCAndGVzdC0yLWNvbXBsZXRlJ10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWVtb3J5IE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IG1lbW9yeSBsZWFrcyBkdXJpbmcgY2FtcGFpZ24gb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgdGVzdE5hbWU6ICdtZW1vcnktbGVhay1wcmV2ZW50aW9uLXRlc3QnLFxuICAgICAgICBlbmFibGVNZW1vcnlNb25pdG9yaW5nOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gUGVyZm9ybSBtdWx0aXBsZSBvcGVyYXRpb25zIHRoYXQgY291bGQgY2F1c2UgbWVtb3J5IGxlYWtzXG4gICAgICAgIGZvciAobGV0IGk6IGFueSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgbW9ja1BoYXNlOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKS5waGFzZXNbMF07XG4gICAgICAgICAgY29udGV4dC5jb250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrUGhhc2UpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIG1ldHJpY3NcbiAgICAgICAgICBjb250ZXh0LnRlc3RDb250cm9sbGVyLnVwZGF0ZU1vY2tNZXRyaWNzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDg2IC0gaSwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IGksIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKGkgLyA4NikgKiAxMDApIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBgaXRlcmF0aW9uLSR7aX1gLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgc2FmZXR5IGNoZWNrcG9pbnRzXG4gICAgICAgICAgY29udGV4dC5zYWZldHkuY3JlYXRlU3Rhc2goYENoZWNrcG9pbnQgJHtpfWAsICd0ZXN0LXBoYXNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLm1lbW9yeVVzYWdlQWNjZXB0YWJsZShjb250ZXh0KTtcblxuICAgICAgICAvLyBWZXJpZnkgdGhhdCBzYWZldHkgZXZlbnRzIGFyZSBwcm9wZXJseSBtYW5hZ2VkIChub3QgYWNjdW11bGF0aW5nIGluZGVmaW5pdGVseSlcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LmNvbnRyb2xsZXIuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGJlIGxpbWl0ZWQgdG8gcHJldmVudCBtZW1vcnkgaXNzdWVzXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdtZW1vcnktbGVhay1wcmV2ZW50aW9uLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYW51cCByZXNvdXJjZXMgcHJvcGVybHkgYWZ0ZXIgdGVzdCBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2V0dXAgYW5kIHVzZSBjYW1wYWlnbiB0ZXN0XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gIHRlc3ROYW1lOiAncmVzb3VyY2UtY2xlYW51cC10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFBlcmZvcm0gc29tZSBvcGVyYXRpb25zXG4gICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcbiAgICAgIGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKTtcblxuICAgICAgaWYgKGNvbnRleHQudGVzdFNhZmVUcmFja2VyKSB7XG4gICAgICAgIGNvbnRleHQudGVzdFNhZmVUcmFja2VyLnN0YXJ0VHJhY2tpbmcoJ2NsZWFudXAtdGVzdCcpO1xuICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci51cGRhdGVNZXRyaWNzKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogNTAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA1MCwgcGVyY2VudGFnZTogNTAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2NsZWFudXAtdGVzdCcsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFudXBcbiAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3Jlc291cmNlLWNsZWFudXAtdGVzdCcpO1xuXG4gICAgICAvLyBWZXJpZnkgY2xlYW51cCB3YXMgZWZmZWN0aXZlXG4gICAgICBleHBlY3QoY29udGV4dC50ZXN0Q29udHJvbGxlci5pc1BhdXNlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjb250ZXh0LnRlc3RDb250cm9sbGVyLmlzSXNvbGF0ZWQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIFRlc3Qtc2FmZSB0cmFja2VyIHNob3VsZCBiZSBjbGVhbmVkIHVwXG4gICAgICBpZiAoY29udGV4dC50ZXN0U2FmZVRyYWNrZXIpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbjogYW55ID0gY29udGV4dC50ZXN0U2FmZVRyYWNrZXIudmFsaWRhdGVUcmFja2luZ1N0YXRlKCk7XG4gICAgICAgIC8vIFNob3VsZCBub3QgYmUgdHJhY2tpbmcgYW55bW9yZVxuICAgICAgICBleHBlY3QodmFsaWRhdGlvbi5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tcGxldGUgQ2FtcGFpZ24gVGVzdCBTY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIFR5cGVTY3JpcHQgZXJyb3IgcmVkdWN0aW9uIHNjZW5hcmlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NlbmFyaW86IGFueSA9IGNhbXBhaWduVGVzdERhdGEudHlwZVNjcmlwdEVycm9yUmVkdWN0aW9uKCk7XG4gICAgICBjb25zdCBfY29uZmlnOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY29udGV4dDogX2NvbnRleHQsXG4gICAgICAgIHJlc3VsdHMsXG4gICAgICAgIGZpbmFsTWV0cmljcyxcbiAgICAgICAgc2FmZXR5RXZlbnRzOiBfc2FmZXR5RXZlbnRzXG4gICAgICB9ID0gYXdhaXQgZXhlY3V0ZUNhbXBhaWduVGVzdFNjZW5hcmlvKHNjZW5hcmlvLCBfY29uZmlnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmeSBwaGFzZSBleGVjdXRpb25cbiAgICAgICAgZXhwZWN0KHJlc3VsdHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMucGhhc2VDb21wbGV0ZWRTdWNjZXNzZnVsbHkocmVzdWx0c1swXSk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHByb2dyZXNzIGltcHJvdmVtZW50XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5wcm9ncmVzc0ltcHJvdmVkKHNjZW5hcmlvLmluaXRpYWxNZXRyaWNzLCBmaW5hbE1ldHJpY3MpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBzYWZldHkgZXZlbnRzXG4gICAgICAgIGNhbXBhaWduVGVzdEFzc2VydGlvbnMuc2FmZXR5RXZlbnRzUmVjb3JkZWQoX3NhZmV0eUV2ZW50cywgc2NlbmFyaW8uZXhwZWN0ZWRTYWZldHlFdmVudHMpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBmaW5hbCBzdGF0ZVxuICAgICAgICBleHBlY3QoZmluYWxNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZUxlc3NUaGFuT3JFcXVhbChcbiAgICAgICAgICBzY2VuYXJpby5pbml0aWFsTWV0cmljcy50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQsXG4gICAgICAgICk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KHNjZW5hcmlvLm5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIGxpbnRpbmcgd2FybmluZyBjbGVhbnVwIHNjZW5hcmlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NlbmFyaW86IGFueSA9IGNhbXBhaWduVGVzdERhdGEubGludGluZ1dhcm5pbmdDbGVhbnVwKCk7XG4gICAgICBjb25zdCBfY29uZmlnOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY29udGV4dDogX2NvbnRleHQsXG4gICAgICAgIHJlc3VsdHMsXG4gICAgICAgIGZpbmFsTWV0cmljcyxcbiAgICAgICAgc2FmZXR5RXZlbnRzOiBfc2FmZXR5RXZlbnRzXG4gICAgICB9ID0gYXdhaXQgZXhlY3V0ZUNhbXBhaWduVGVzdFNjZW5hcmlvKHNjZW5hcmlvLCBfY29uZmlnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmeSBwaGFzZSBleGVjdXRpb25cbiAgICAgICAgZXhwZWN0KHJlc3VsdHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMucGhhc2VDb21wbGV0ZWRTdWNjZXNzZnVsbHkocmVzdWx0c1swXSk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHByb2dyZXNzIGltcHJvdmVtZW50XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5wcm9ncmVzc0ltcHJvdmVkKHNjZW5hcmlvLmluaXRpYWxNZXRyaWNzLCBmaW5hbE1ldHJpY3MpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBsaW50aW5nLXNwZWNpZmljIGltcHJvdmVtZW50c1xuICAgICAgICBleHBlY3QoZmluYWxNZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50KS50b0JlTGVzc1RoYW5PckVxdWFsKFxuICAgICAgICAgIHNjZW5hcmlvLmluaXRpYWxNZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50LFxuICAgICAgICApO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdChzY2VuYXJpby5uYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNhbXBhaWduIGZhaWx1cmVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gIHRlc3ROYW1lOiAnZmFpbHVyZS1oYW5kbGluZy10ZXN0J1xuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIHBoYXNlIHRoYXQgd2lsbCBmYWlsXG4gICAgICAgIGNvbnN0IGZhaWxpbmdQaGFzZTogYW55ID0ge1xuICAgICAgICAgIC4uLmNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXSxcbiAgICAgICAgICBzdWNjZXNzQ3JpdGVyaWE6IHsgdHlwZVNjcmlwdEVycm9yczogLTEsIC8vIEltcG9zc2libGUgY3JpdGVyaWFcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTW9jayB0aGUgY29udHJvbGxlciB0byBzaW11bGF0ZSBmYWlsdXJlXG4gICAgICAgIHZvaWQgamVzdC5zcHlPbihjb250ZXh0LmNvbnRyb2xsZXIsICdleGVjdXRlUGhhc2UnKS5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdNb2NrIGZhaWx1cmUnKSk7XG5cbiAgICAgICAgLy8gRXhlY3V0ZSBwaGFzZSBhbmQgZXhwZWN0IGl0IHRvIGhhbmRsZSBmYWlsdXJlXG4gICAgICAgIGF3YWl0IGV4cGVjdChjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKGZhaWxpbmdQaGFzZSkpLnJlamVjdHMudG9UaHJvdygnTW9jayBmYWlsdXJlJyk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHNhZmV0eSBldmVudHMgd2VyZSByZWNvcmRlZCBmb3IgdGhlIGZhaWx1cmVcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LmNvbnRyb2xsZXIuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdmYWlsdXJlLWhhbmRsaW5nLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb21wbGV0ZSBjYW1wYWlnbiBzeXN0ZW0gaW50ZWdyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gIHRlc3ROYW1lOiAnaW50ZWdyYXRpb24tdmFsaWRhdGlvbi10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgICAgcHJldmVudEFjdHVhbEJ1aWxkczogdHJ1ZSxcbiAgICAgICAgcHJldmVudEdpdE9wZXJhdGlvbnM6IHRydWUsXG4gICAgICAgIG1vY2tQcm9ncmVzc1RyYWNraW5nOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVmFsaWRhdGUgdGVzdCBpc29sYXRpb25cbiAgICAgICAgY29uc3QgaXNvbGF0aW9uOiBhbnkgPSB2YWxpZGF0ZUNhbXBhaWduVGVzdElzb2xhdGlvbihhd2FpdCBjb250ZXh0KTtcbiAgICAgICAgZXhwZWN0KGlzb2xhdGlvbi5pc1ZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoaXNvbGF0aW9uLmlzc3VlcykudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICAgIC8vIFRlc3QgYWxsIG1ham9yIGNvbXBvbmVudHNcbiAgICAgICAgY29uc3QgbW9ja1BoYXNlOiBhbnkgPSBjcmVhdGVNb2NrQ2FtcGFpZ25Db25maWcoKS5waGFzZXNbMF07XG5cbiAgICAgICAgLy8gMS4gRXhlY3V0ZSBjYW1wYWlnbiBwaGFzZVxuICAgICAgICBjb25zdCByZXNvbHZlZENvbnRleHQ6IGFueSA9IGF3YWl0IGNvbnRleHQ7XG4gICAgICAgIGNvbnN0IHBoYXNlUmVzdWx0OiBhbnkgPSBhd2FpdCByZXNvbHZlZENvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKTtcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnBoYXNlQ29tcGxldGVkU3VjY2Vzc2Z1bGx5KHBoYXNlUmVzdWx0KTtcblxuICAgICAgICAvLyAyLiBUcmFjayBwcm9ncmVzc1xuICAgICAgICBjb25zdCBpbml0aWFsTWV0cmljczogYW55ID0gYXdhaXQgKGF3YWl0IGNvbnRleHQpLnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgIGNvbnRleHQudGVzdENvbnRyb2xsZXIudXBkYXRlTW9ja01ldHJpY3MoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiAyNSwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDYxLCBwZXJjZW50YWdlOiA3MSB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICAnaW50ZWdyYXRpb24tdGVzdCcsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRNZXRyaWNzOiBhbnkgPSBhd2FpdCAoYXdhaXQgY29udGV4dCkudHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnByb2dyZXNzSW1wcm92ZWQoaW5pdGlhbE1ldHJpY3MsIHVwZGF0ZWRNZXRyaWNzKTtcblxuICAgICAgICAvLyAzLiBTYWZldHkgb3BlcmF0aW9uc1xuICAgICAgICBjb25zdCBzdGFzaElkOiBhbnkgPSAoYXdhaXQgY29udGV4dCkuc2FmZXR5LmNyZWF0ZVN0YXNoKCdJbnRlZ3JhdGlvbiB0ZXN0IHN0YXNoJywgJ3Rlc3QtcGhhc2UnKTtcbiAgICAgICAgZXhwZWN0KHN0YXNoSWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIChhd2FpdCBjb250ZXh0KS5zYWZldHkuYXBwbHlTdGFzaChTdHJpbmcoc3Rhc2hJZCkpO1xuXG4gICAgICAgIC8vIDQuIEdlbmVyYXRlIHJlcG9ydHNcbiAgICAgICAgY29uc3QgcmVwb3J0OiBhbnkgPSBhd2FpdCBjb250ZXh0LnRyYWNrZXIuZ2VuZXJhdGVQcm9ncmVzc1JlcG9ydCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVwb3J0LnBoYXNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgICAvLyA1LiBWYWxpZGF0ZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLm1lbW9yeVVzYWdlQWNjZXB0YWJsZShjb250ZXh0KTtcblxuICAgICAgICAvLyA2LiBWZXJpZnkgYWxsIHNhZmV0eSBldmVudHNcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSAoYXdhaXQgY29udGV4dCkuY29udHJvbGxlci5nZXRTYWZldHlFdmVudHMoKTtcbiAgICAgICAgZXhwZWN0KHNhZmV0eUV2ZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5zYWZldHlFdmVudHNSZWNvcmRlZChzYWZldHlFdmVudHMsIFtTYWZldHlFdmVudFR5cGUuQ0hFQ0tQT0lOVF9DUkVBVEVEXSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdpbnRlZ3JhdGlvbi12YWxpZGF0aW9uLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==