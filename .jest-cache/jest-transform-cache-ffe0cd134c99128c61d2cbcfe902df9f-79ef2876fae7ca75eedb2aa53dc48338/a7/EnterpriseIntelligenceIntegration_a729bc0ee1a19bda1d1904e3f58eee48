b910084ca1ed7a481dce41855d2be778
"use strict";
/**
 * Enterprise Intelligence Integration Service
 * Main Page Restoration - Task 3.8 Implementation
 *
 * Integrates Recipe Intelligence Systems from Phase 28 and
 * Ingredient Intelligence Systems from Phase 27 with validation,
 * safety intelligence, and optimization recommendations.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.createEnterpriseIntelligenceIntegration = exports.enterpriseIntelligenceIntegration = exports.EnterpriseIntelligenceIntegration = void 0;
const logger_1 = require("@/utils/logger");
const index_1 = require("@/calculations/index");
const PredictiveIntelligenceService_1 = require("./PredictiveIntelligenceService");
const MLIntelligenceService_1 = require("./MLIntelligenceService");
const AdvancedAnalyticsIntelligenceService_1 = require("./AdvancedAnalyticsIntelligenceService");
// ========== ENTERPRISE INTELLIGENCE SERVICE ==========
class EnterpriseIntelligenceIntegration {
    constructor(config = {}) {
        this.config = {
            enableRecipeIntelligence: true,
            enableIngredientIntelligence: true,
            enableCuisineIntelligence: true,
            enableValidationIntelligence: true,
            enableSafetyIntelligence: true,
            enableOptimizationRecommendations: true,
            // Phase 2D: Advanced Intelligence Systems Integration
            enablePredictiveIntelligence: true,
            enableMLIntelligence: true,
            enableAdvancedAnalyticsIntelligence: true,
            cacheResults: true,
            logLevel: 'info',
            ...config
        };
        this.cache = new Map();
        this.performanceMetrics = {
            analysisCount: 0,
            averageExecutionTime: 0,
            cacheHitRate: 0,
            errorRate: 0
        };
        // Phase 2D: Initialize Advanced Intelligence Services
        this.predictiveIntelligenceService = (0, PredictiveIntelligenceService_1.createPredictiveIntelligenceService)({
            enablePredictiveIntelligence: this.config.enablePredictiveIntelligence,
            cacheResults: this.config.cacheResults,
            logLevel: this.config.logLevel
        });
        this.mlIntelligenceService = (0, MLIntelligenceService_1.createMLIntelligenceService)({
            enableMLIntelligence: this.config.enableMLIntelligence,
            cacheResults: this.config.cacheResults,
            logLevel: this.config.logLevel
        });
        this.advancedAnalyticsIntelligenceService = (0, AdvancedAnalyticsIntelligenceService_1.createAdvancedAnalyticsIntelligenceService)({
            enableAdvancedAnalyticsIntelligence: this.config.enableAdvancedAnalyticsIntelligence,
            cacheResults: this.config.cacheResults,
            logLevel: this.config.logLevel
        });
        this.log('info', 'Enterprise Intelligence Integration initialized with Advanced Intelligence Systems');
    }
    /**
     * Perform comprehensive enterprise intelligence analysis
     */
    async performEnterpriseAnalysis(recipeData, ingredientData, cuisineData, astrologicalContext) {
        const startTime = performance.now();
        try {
            this.performanceMetrics.analysisCount++;
            // Check cache first
            const cacheKey = this.generateCacheKey(recipeData, ingredientData, cuisineData, astrologicalContext);
            if (this.config.cacheResults && this.cache.has(cacheKey)) {
                this.performanceMetrics.cacheHitRate =
                    (this.performanceMetrics.cacheHitRate * (this.performanceMetrics.analysisCount - 1) + 1) /
                        this.performanceMetrics.analysisCount;
                this.log('debug', 'Using cached enterprise intelligence analysis');
                return this.cache.get(cacheKey);
            }
            // Perform comprehensive analysis
            const analysis = {
                recipeIntelligence: await this.analyzeRecipeIntelligence(recipeData, astrologicalContext),
                ingredientIntelligence: await this.analyzeIngredientIntelligence(ingredientData, astrologicalContext),
                cuisineIntelligence: await this.analyzeCuisineIntelligence(cuisineData, astrologicalContext),
                validationIntelligence: await this.performValidationIntelligence(recipeData, ingredientData, astrologicalContext),
                safetyIntelligence: await this.performSafetyIntelligence(recipeData, ingredientData, astrologicalContext),
                optimizationRecommendations: await this.generateOptimizationRecommendations(recipeData, ingredientData, astrologicalContext),
                // Phase 2D: Advanced Intelligence Systems Integration
                predictiveIntelligence: this.config.enablePredictiveIntelligence ?
                    await this.analyzePredictiveIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) : undefined,
                mlIntelligence: this.config.enableMLIntelligence ?
                    await this.analyzeMLIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) : undefined,
                advancedAnalyticsIntelligence: this.config.enableAdvancedAnalyticsIntelligence ?
                    await this.analyzeAdvancedAnalyticsIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) : undefined,
                integratedAdvancedIntelligence: this.config.enablePredictiveIntelligence && this.config.enableMLIntelligence && this.config.enableAdvancedAnalyticsIntelligence ?
                    await this.generateIntegratedAdvancedIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) : undefined,
                overallScore: 0,
                systemHealth: 'good',
                timestamp: new Date().toISOString()
            };
            // Calculate overall score and system health
            analysis.overallScore = this.calculateOverallScore(analysis);
            analysis.systemHealth = this.determineSystemHealth(analysis);
            // Cache the results
            if (this.config.cacheResults) {
                this.cache.set(cacheKey, analysis);
            }
            // Update performance metrics
            this.updatePerformanceMetrics(startTime);
            this.log('info', `Enterprise intelligence analysis completed with score: ${analysis.overallScore.toFixed(2)}`);
            return analysis;
        }
        catch (error) {
            this.handleError('performEnterpriseAnalysis', error);
            throw error;
        }
    }
    /**
     * Analyze Recipe Intelligence Systems (Phase 28)
     */
    async analyzeRecipeIntelligence(recipeData, astrologicalContext) {
        if (!this.config.enableRecipeIntelligence) {
            return this.getDefaultRecipeIntelligence();
        }
        try {
            // Use the existing Recipe Compatibility Intelligence system
            const compatibilityAnalysis = index_1.RECIPE_COMPATIBILITY_INTELLIGENCE.analyzeRecipeCompatibility(recipeData.elementalProperties || astrologicalContext.elementalProperties, astrologicalContext);
            // Calculate optimization score based on compatibility metrics
            const optimizationScore = this.calculateRecipeOptimizationScore(compatibilityAnalysis);
            // Calculate safety score based on analysis reliability
            const safetyScore = this.calculateRecipeSafetyScore(compatibilityAnalysis);
            // Generate intelligent recommendations
            const recommendations = [
                ...compatibilityAnalysis.recommendations || [],
                ...this.generateRecipeIntelligenceRecommendations(compatibilityAnalysis)
            ];
            // Calculate confidence based on analysis quality
            const confidence = this.calculateRecipeConfidence(compatibilityAnalysis);
            return {
                compatibilityAnalysis,
                optimizationScore,
                safetyScore,
                recommendations,
                confidence,
                timestamp: new Date().toISOString()
            };
        }
        catch (error) {
            this.log('error', 'Recipe intelligence analysis failed', error);
            return this.getDefaultRecipeIntelligence();
        }
    }
    /**
     * Analyze Ingredient Intelligence Systems (Phase 27)
     */
    async analyzeIngredientIntelligence(ingredientData, astrologicalContext) {
        if (!this.config.enableIngredientIntelligence) {
            return this.getDefaultIngredientIntelligence();
        }
        try {
            // Implement ingredient intelligence analysis using simplified approach
            // This represents the broader ingredient intelligence systems from Phase 27
            const categorizationAnalysis = this.analyzeIngredientCategorization(ingredientData);
            const seasonalAnalysis = this.analyzeIngredientSeasonality(ingredientData, astrologicalContext);
            const compatibilityAnalysis = this.analyzeIngredientCompatibility(ingredientData);
            const astrologicalAnalysis = this.analyzeIngredientAstrology(ingredientData, astrologicalContext);
            const validationResults = this.validateIngredientData(ingredientData);
            // Calculate optimization and safety scores
            const optimizationScore = this.calculateIngredientOptimizationScore({
                categorizationAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            const safetyScore = this.calculateIngredientSafetyScore({
                categorizationAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            // Generate intelligent recommendations
            const recommendations = this.generateIngredientIntelligenceRecommendations({
                categorizationAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            // Calculate confidence
            const confidence = this.calculateIngredientConfidence({
                categorizationAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            return {
                categorizationAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults,
                optimizationScore,
                safetyScore,
                recommendations,
                confidence,
                timestamp: new Date().toISOString()
            };
        }
        catch (error) {
            this.log('error', 'Ingredient intelligence analysis failed', error);
            return this.getDefaultIngredientIntelligence();
        }
    }
    /**
     * Analyze Cuisine Intelligence Systems (Phase 2C)
     */
    async analyzeCuisineIntelligence(cuisineData, astrologicalContext) {
        if (!this.config.enableCuisineIntelligence) {
            return this.getDefaultCuisineIntelligence();
        }
        try {
            // Implement cuisine intelligence analysis using CulturalAnalyticsService
            const culturalAnalysis = this.analyzeCuisineCultural(cuisineData, astrologicalContext);
            const fusionAnalysis = this.analyzeCuisineFusion(cuisineData);
            const seasonalAnalysis = this.analyzeCuisineSeasonality(cuisineData, astrologicalContext);
            const compatibilityAnalysis = this.analyzeCuisineCompatibility(cuisineData);
            const astrologicalAnalysis = this.analyzeCuisineAstrology(cuisineData, astrologicalContext);
            const validationResults = this.validateCuisineData(cuisineData);
            // Calculate optimization and safety scores
            const optimizationScore = this.calculateCuisineOptimizationScore({
                culturalAnalysis,
                fusionAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            const safetyScore = this.calculateCuisineSafetyScore({
                culturalAnalysis,
                fusionAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            // Generate intelligent recommendations
            const recommendations = this.generateCuisineIntelligenceRecommendations({
                culturalAnalysis,
                fusionAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            // Calculate confidence
            const confidence = this.calculateCuisineConfidence({
                culturalAnalysis,
                fusionAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults
            });
            return {
                culturalAnalysis,
                fusionAnalysis,
                seasonalAnalysis,
                compatibilityAnalysis,
                astrologicalAnalysis,
                validationResults,
                optimizationScore,
                safetyScore,
                recommendations,
                confidence,
                timestamp: new Date().toISOString()
            };
        }
        catch (error) {
            this.log('error', 'Cuisine intelligence analysis failed', error);
            return this.getDefaultCuisineIntelligence();
        }
    }
    /**
     * Perform Validation Intelligence
     */
    async performValidationIntelligence(recipeData, ingredientData, astrologicalContext) {
        if (!this.config.enableValidationIntelligence) {
            return this.getDefaultValidationIntelligence();
        }
        try {
            // Perform validation intelligence using simplified approach
            // (Avoiding direct import of problematic alchemy type intelligence system)
            // Data integrity validation
            const dataIntegrity = this.validateDataIntegrity(recipeData, ingredientData);
            // Astrological consistency validation
            const astrologicalConsistency = this.validateAstrologicalConsistency(astrologicalContext);
            // Elemental harmony validation
            const elementalHarmony = this.validateElementalHarmony(recipeData.elementalProperties || astrologicalContext.elementalProperties);
            // Overall validation assessment
            const overallScore = (dataIntegrity.score + astrologicalConsistency.score + elementalHarmony.score) / 3;
            const criticalIssues = [
                ...dataIntegrity.issues.filter(issue => issue.includes('critical')),
                ...astrologicalConsistency.issues.filter(issue => issue.includes('critical')),
                ...elementalHarmony.issues.filter(issue => issue.includes('critical'))
            ];
            const status = overallScore >= 0.9 ? 'excellent' :
                overallScore >= 0.75 ? 'good' :
                    overallScore >= 0.6 ? 'fair' : 'poor';
            return {
                dataIntegrity,
                astrologicalConsistency,
                elementalHarmony,
                overallValidation: {
                    score: overallScore,
                    status,
                    criticalIssues
                }
            };
        }
        catch (error) {
            this.log('error', 'Validation intelligence failed', error);
            return this.getDefaultValidationIntelligence();
        }
    }
    /**
     * Perform Safety Intelligence
     */
    async performSafetyIntelligence(recipeData, ingredientData, astrologicalContext) {
        if (!this.config.enableSafetyIntelligence) {
            return this.getDefaultSafetyIntelligence();
        }
        try {
            // Risk assessment based on data quality and system reliability
            const riskFactors = this.assessRiskFactors(recipeData, ingredientData, astrologicalContext);
            const riskLevel = this.determineRiskLevel(riskFactors);
            const riskScore = this.calculateRiskScore(riskFactors);
            // Fallback strategies for different failure scenarios
            const fallbackStrategies = this.generateFallbackStrategies(riskFactors);
            // Error recovery mechanisms
            const errorRecovery = {
                enabled: true,
                strategies: [
                    'Graceful degradation to cached data',
                    'Fallback to default recommendations',
                    'User notification with alternative options',
                    'Automatic retry with exponential backoff',
                    'Emergency safe mode activation'
                ]
            };
            // Monitoring alerts for proactive issue detection
            const monitoringAlerts = this.generateMonitoringAlerts(riskFactors);
            return {
                riskAssessment: {
                    level: riskLevel,
                    score: riskScore,
                    factors: riskFactors
                },
                fallbackStrategies,
                errorRecovery,
                monitoringAlerts
            };
        }
        catch (error) {
            this.log('error', 'Safety intelligence failed', error);
            return this.getDefaultSafetyIntelligence();
        }
    }
    /**
     * Generate Optimization Recommendations
     */
    async generateOptimizationRecommendations(recipeData, ingredientData, astrologicalContext) {
        if (!this.config.enableOptimizationRecommendations) {
            return this.getDefaultOptimizationRecommendations();
        }
        try {
            // Performance optimization analysis
            const performance = this.analyzePerformanceOptimization();
            // Accuracy optimization analysis
            const accuracy = this.analyzeAccuracyOptimization(recipeData, ingredientData, astrologicalContext);
            // User experience optimization analysis
            const userExperience = this.analyzeUserExperienceOptimization();
            // System integration optimization analysis
            const systemIntegration = this.analyzeSystemIntegrationOptimization();
            // Overall optimization assessment
            const overallScore = (performance.score + accuracy.score + userExperience.score + systemIntegration.score) / 4;
            const priority = overallScore < 0.6 ? 'critical' :
                overallScore < 0.75 ? 'high' :
                    overallScore < 0.9 ? 'medium' : 'low';
            const estimatedValue = overallScore * 100;
            return {
                performance,
                accuracy,
                userExperience,
                systemIntegration,
                overallOptimization: {
                    score: overallScore,
                    priority,
                    estimatedValue
                }
            };
        }
        catch (error) {
            this.log('error', 'Optimization recommendations failed', error);
            return this.getDefaultOptimizationRecommendations();
        }
    }
    // ========== HELPER METHODS ==========
    generateCacheKey(recipeData, ingredientData, cuisineData, astrologicalContext) {
        const keyData = {
            recipe: (recipeData === null || recipeData === void 0 ? void 0 : recipeData.id) || 'unknown',
            ingredient: (ingredientData === null || ingredientData === void 0 ? void 0 : ingredientData.id) || 'unknown',
            cuisine: (cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.id) || (cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.name) || 'unknown',
            zodiac: astrologicalContext.zodiacSign,
            lunar: astrologicalContext.lunarPhase,
            timestamp: Math.floor(Date.now() / (1000 * 60 * 30)) // 30-minute cache buckets
        };
        return `enterprise_intelligence_${JSON.stringify(keyData)}`;
    }
    calculateOverallScore(analysis) {
        const weights = {
            recipe: 0.15,
            ingredient: 0.15,
            cuisine: 0.15,
            validation: 0.10,
            safety: 0.08,
            optimization: 0.12,
            // Phase 2D: Advanced Intelligence Systems Integration
            predictive: 0.08,
            ml: 0.08,
            analytics: 0.09
        };
        let score = (analysis.recipeIntelligence.optimizationScore * weights.recipe +
            analysis.ingredientIntelligence.optimizationScore * weights.ingredient +
            analysis.cuisineIntelligence.optimizationScore * weights.cuisine +
            analysis.validationIntelligence.overallValidation.score * weights.validation +
            (1 - this.riskLevelToScore(analysis.safetyIntelligence.riskAssessment.level)) * weights.safety +
            analysis.optimizationRecommendations.overallOptimization.score * weights.optimization);
        // Phase 2D: Include Advanced Intelligence Systems in scoring
        if (analysis.predictiveIntelligence) {
            score += analysis.predictiveIntelligence.confidence * weights.predictive;
        }
        if (analysis.mlIntelligence) {
            score += analysis.mlIntelligence.confidence * weights.ml;
        }
        if (analysis.advancedAnalyticsIntelligence) {
            score += analysis.advancedAnalyticsIntelligence.confidence * weights.analytics;
        }
        return score;
    }
    determineSystemHealth(analysis) {
        const score = analysis.overallScore;
        if (score >= 0.9)
            return 'excellent';
        if (score >= 0.75)
            return 'good';
        if (score >= 0.6)
            return 'fair';
        return 'poor';
    }
    riskLevelToScore(level) {
        switch (level) {
            case 'low': return 0.1;
            case 'medium': return 0.3;
            case 'high': return 0.6;
            case 'critical': return 0.9;
            default: return 0.5;
        }
    }
    updatePerformanceMetrics(startTime) {
        const executionTime = performance.now() - startTime;
        const currentAvg = this.performanceMetrics.averageExecutionTime;
        const count = this.performanceMetrics.analysisCount;
        this.performanceMetrics.averageExecutionTime =
            (currentAvg * (count - 1) + executionTime) / count;
    }
    handleError(method, error) {
        this.log('error', `${method} failed`, error);
        this.performanceMetrics.errorRate =
            (this.performanceMetrics.errorRate * (this.performanceMetrics.analysisCount - 1) + 1) /
                this.performanceMetrics.analysisCount;
    }
    log(level, message, data) {
        if (this.shouldLog(level)) {
            const logMethod = level === 'error' ? logger_1.logger.error :
                level === 'warn' ? logger_1.logger.warn :
                    level === 'debug' ? logger_1.logger.debug : logger_1.logger.info;
            if (data) {
                logMethod(`[EnterpriseIntelligence] ${message}`, data);
            }
            else {
                logMethod(`[EnterpriseIntelligence] ${message}`);
            }
        }
    }
    shouldLog(level) {
        const levels = ['debug', 'info', 'warn', 'error'];
        const configLevel = levels.indexOf(this.config.logLevel);
        const messageLevel = levels.indexOf(level);
        return messageLevel >= configLevel;
    }
    // ========== DEFAULT IMPLEMENTATIONS ==========
    getDefaultRecipeIntelligence() {
        return {
            compatibilityAnalysis: { coreMetrics: { overallCompatibility: 0.8 } },
            optimizationScore: 0.8,
            safetyScore: 0.9,
            recommendations: ['Recipe intelligence disabled'],
            confidence: 0.7,
            timestamp: new Date().toISOString()
        };
    }
    getDefaultIngredientIntelligence() {
        return {
            categorizationAnalysis: {},
            seasonalAnalysis: {},
            compatibilityAnalysis: {},
            astrologicalAnalysis: {},
            validationResults: {},
            optimizationScore: 0.8,
            safetyScore: 0.9,
            recommendations: ['Ingredient intelligence disabled'],
            confidence: 0.7,
            timestamp: new Date().toISOString()
        };
    }
    getDefaultValidationIntelligence() {
        return {
            dataIntegrity: { score: 0.8, issues: [], warnings: [] },
            astrologicalConsistency: { score: 0.8, issues: [], warnings: [] },
            elementalHarmony: { score: 0.8, issues: [], warnings: [] },
            overallValidation: { score: 0.8, status: 'good', criticalIssues: [] }
        };
    }
    getDefaultSafetyIntelligence() {
        return {
            riskAssessment: { level: 'low', score: 0.9, factors: [] },
            fallbackStrategies: ['Default fallback strategies available'],
            errorRecovery: { enabled: true, strategies: ['Basic error recovery'] },
            monitoringAlerts: []
        };
    }
    getDefaultOptimizationRecommendations() {
        return {
            performance: { score: 0.8, recommendations: [], estimatedImpact: 0.1 },
            accuracy: { score: 0.8, recommendations: [], estimatedImpact: 0.1 },
            userExperience: { score: 0.8, recommendations: [], estimatedImpact: 0.1 },
            systemIntegration: { score: 0.8, recommendations: [], estimatedImpact: 0.1 },
            overallOptimization: { score: 0.8, priority: 'low', estimatedValue: 80 }
        };
    }
    // ========== CALCULATION METHODS ==========
    // (Simplified implementations for the scope of this task)
    calculateRecipeOptimizationScore(analysis) {
        var _a;
        return ((_a = analysis.coreMetrics) === null || _a === void 0 ? void 0 : _a.overallCompatibility) || 0.8;
    }
    calculateRecipeSafetyScore(analysis) {
        var _a, _b;
        return ((_b = (_a = analysis.predictiveInsights) === null || _a === void 0 ? void 0 : _a.shortTerm) === null || _b === void 0 ? void 0 : _b.reliability) || 0.9;
    }
    calculateRecipeConfidence(analysis) {
        var _a, _b;
        return ((_b = (_a = analysis.predictiveInsights) === null || _a === void 0 ? void 0 : _a.shortTerm) === null || _b === void 0 ? void 0 : _b.confidence) || 0.8;
    }
    generateRecipeIntelligenceRecommendations(analysis) {
        var _a, _b, _c;
        const recommendations = [];
        if (((_a = analysis.coreMetrics) === null || _a === void 0 ? void 0 : _a.overallCompatibility) < 0.9) {
            recommendations.push('Consider ingredient substitutions for better compatibility');
        }
        if (((_c = (_b = analysis.advancedAnalysis) === null || _b === void 0 ? void 0 : _b.temporalFactors) === null || _c === void 0 ? void 0 : _c.seasonalRelevance) < 0.8) {
            recommendations.push('Adjust timing for better seasonal alignment');
        }
        return recommendations;
    }
    calculateIngredientCompatibility(ing1, ing2) {
        // Simplified compatibility calculation
        return Math.random() * 0.3 + 0.7; // 70-100% compatibility
    }
    validateAstrologicalProfile(profile) {
        return profile && typeof profile === 'object';
    }
    validateIngredient(ingredient) {
        return ingredient && ingredient.name && ingredient.elementalProperties;
    }
    calculateIngredientOptimizationScore(analyses) {
        // Average of all analysis harmony scores
        const scores = Object.values(analyses).map((analysis) => {
            var _a, _b, _c, _d, _e;
            return ((_a = analysis.categoryHarmony) === null || _a === void 0 ? void 0 : _a.overallHarmony) ||
                ((_b = analysis.seasonalHarmony) === null || _b === void 0 ? void 0 : _b.overallHarmony) ||
                ((_c = analysis.compatibilityHarmony) === null || _c === void 0 ? void 0 : _c.overallHarmony) ||
                ((_d = analysis.astrologicalHarmony) === null || _d === void 0 ? void 0 : _d.overallHarmony) ||
                ((_e = analysis.validationHarmony) === null || _e === void 0 ? void 0 : _e.overallHarmony) || 0.8;
        });
        return scores.reduce((sum, score) => sum + score, 0) / scores.length;
    }
    calculateIngredientSafetyScore(analyses) {
        var _a, _b;
        // Safety based on validation results
        return ((_b = (_a = analyses.validationResults) === null || _a === void 0 ? void 0 : _a.validationHarmony) === null || _b === void 0 ? void 0 : _b.overallHarmony) || 0.9;
    }
    calculateIngredientConfidence(analyses) {
        // Confidence based on consistency across analyses
        const scores = Object.values(analyses).map((analysis) => {
            var _a, _b;
            return ((_a = analysis.categoryHarmony) === null || _a === void 0 ? void 0 : _a.overallHarmony) ||
                ((_b = analysis.seasonalHarmony) === null || _b === void 0 ? void 0 : _b.overallHarmony) || 0.8;
        });
        const variance = scores.reduce((sum, score) => sum + Math.pow(score - 0.8, 2), 0) / scores.length;
        return Math.max(0.5, 1 - variance); // Lower variance = higher confidence
    }
    generateIngredientIntelligenceRecommendations(analyses) {
        var _a, _b, _c, _d, _e, _f;
        const recommendations = [];
        if (((_b = (_a = analyses.categorizationAnalysis) === null || _a === void 0 ? void 0 : _a.categoryOptimization) === null || _b === void 0 ? void 0 : _b.length) > 0) {
            recommendations.push('Optimize ingredient categorization for better organization');
        }
        if (((_d = (_c = analyses.seasonalAnalysis) === null || _c === void 0 ? void 0 : _c.seasonalOptimization) === null || _d === void 0 ? void 0 : _d.length) > 0) {
            recommendations.push('Enhance seasonal ingredient selection for better timing');
        }
        if (((_f = (_e = analyses.compatibilityAnalysis) === null || _e === void 0 ? void 0 : _e.compatibilityOptimization) === null || _f === void 0 ? void 0 : _f.length) > 0) {
            recommendations.push('Improve ingredient compatibility matching');
        }
        return recommendations;
    }
    validateDataIntegrity(recipeData, ingredientData) {
        const issues = [];
        const warnings = [];
        let score = 1.0;
        if (!recipeData) {
            issues.push('Missing recipe data');
            score -= 0.3;
        }
        if (!ingredientData) {
            issues.push('Missing ingredient data');
            score -= 0.3;
        }
        if (recipeData && !recipeData.elementalProperties) {
            warnings.push('Recipe missing elemental properties');
            score -= 0.1;
        }
        return { score: Math.max(0, score), issues, warnings };
    }
    validateAstrologicalConsistency(astrologicalContext) {
        const issues = [];
        const warnings = [];
        let score = 1.0;
        if (!astrologicalContext.zodiacSign) {
            issues.push('Missing zodiac sign');
            score -= 0.3;
        }
        if (!astrologicalContext.lunarPhase) {
            warnings.push('Missing lunar phase');
            score -= 0.1;
        }
        if (!astrologicalContext.elementalProperties) {
            issues.push('Missing elemental properties');
            score -= 0.4;
        }
        return { score: Math.max(0, score), issues, warnings };
    }
    validateElementalHarmony(elementalProperties) {
        const issues = [];
        const warnings = [];
        let score = 1.0;
        if (!elementalProperties) {
            issues.push('Missing elemental properties');
            return { score: 0, issues, warnings };
        }
        const { Fire, Water, Earth, Air } = elementalProperties;
        const total = Fire + Water + Earth + Air;
        if (total === 0) {
            issues.push('All elemental values are zero');
            score -= 0.5;
        }
        if (total > 4) {
            warnings.push('Elemental values sum exceeds expected range');
            score -= 0.1;
        }
        // Check for negative values
        if (Fire < 0 || Water < 0 || Earth < 0 || Air < 0) {
            issues.push('Negative elemental values detected');
            score -= 0.3;
        }
        return { score: Math.max(0, score), issues, warnings };
    }
    assessRiskFactors(recipeData, ingredientData, astrologicalContext) {
        const factors = [];
        if (!recipeData || !ingredientData) {
            factors.push('Missing critical data');
        }
        if (!astrologicalContext.elementalProperties) {
            factors.push('Missing astrological context');
        }
        if (this.performanceMetrics.errorRate > 0.1) {
            factors.push('High error rate detected');
        }
        if (this.performanceMetrics.averageExecutionTime > 5000) {
            factors.push('Performance degradation detected');
        }
        return factors;
    }
    determineRiskLevel(factors) {
        if (factors.length === 0)
            return 'low';
        if (factors.length <= 2)
            return 'medium';
        if (factors.length <= 4)
            return 'high';
        return 'critical';
    }
    calculateRiskScore(factors) {
        return Math.min(1, factors.length * 0.2);
    }
    generateFallbackStrategies(factors) {
        const strategies = [
            'Use cached recommendations when available',
            'Provide default cuisine suggestions',
            'Graceful degradation to basic functionality'
        ];
        if (factors.includes('Missing critical data')) {
            strategies.push('Request user to provide missing information');
        }
        if (factors.includes('High error rate detected')) {
            strategies.push('Implement circuit breaker pattern');
        }
        return strategies;
    }
    generateMonitoringAlerts(factors) {
        const alerts = [];
        if (factors.includes('Performance degradation detected')) {
            alerts.push('Performance monitoring alert: Execution time exceeded threshold');
        }
        if (factors.includes('High error rate detected')) {
            alerts.push('Error rate monitoring alert: Error threshold exceeded');
        }
        return alerts;
    }
    analyzePerformanceOptimization() {
        const score = this.performanceMetrics.averageExecutionTime < 2000 ? 0.9 : 0.6;
        const recommendations = [];
        if (this.performanceMetrics.averageExecutionTime > 2000) {
            recommendations.push('Optimize calculation algorithms for faster execution');
        }
        if (this.performanceMetrics.cacheHitRate < 0.5) {
            recommendations.push('Improve caching strategy for better performance');
        }
        return { score, recommendations, estimatedImpact: 0.3 };
    }
    analyzeAccuracyOptimization(recipeData, ingredientData, astrologicalContext) {
        const score = 0.85; // Based on intelligence system accuracy
        const recommendations = [
            'Enhance astrological calculation precision',
            'Improve ingredient compatibility algorithms',
            'Strengthen recipe recommendation logic'
        ];
        return { score, recommendations, estimatedImpact: 0.25 };
    }
    analyzeUserExperienceOptimization() {
        const score = 0.8;
        const recommendations = [
            'Improve loading states and user feedback',
            'Enhance error messages and recovery options',
            'Optimize mobile responsiveness'
        ];
        return { score, recommendations, estimatedImpact: 0.2 };
    }
    analyzeSystemIntegrationOptimization() {
        const score = 0.9; // High integration with existing intelligence systems
        const recommendations = [
            'Enhance cross-system data sharing',
            'Improve API integration reliability',
            'Strengthen monitoring and alerting'
        ];
        return { score, recommendations, estimatedImpact: 0.15 };
    }
    // ========== INGREDIENT INTELLIGENCE ANALYSIS METHODS ==========
    /**
     * Analyze ingredient categorization (Phase 27 Intelligence System)
     */
    analyzeIngredientCategorization(ingredientData) {
        const ingredients = (ingredientData === null || ingredientData === void 0 ? void 0 : ingredientData.ingredients) || [];
        const categories = new Set(ingredients.map((ing) => ing.category).filter(Boolean));
        return {
            categoryHarmony: {
                overallHarmony: categories.size > 0 ? 0.85 : 0.5,
                categoryCount: categories.size,
                ingredientDistribution: Array.from(categories).map(cat => ({
                    category: cat,
                    count: ingredients.filter((ing) => ing.category === cat).length
                }))
            },
            categoryOptimization: categories.size < 3 ? ['Expand ingredient categories for better variety'] : []
        };
    }
    /**
     * Analyze ingredient seasonality (Phase 27 Intelligence System)
     */
    analyzeIngredientSeasonality(ingredientData, astrologicalContext) {
        const ingredients = (ingredientData === null || ingredientData === void 0 ? void 0 : ingredientData.ingredients) || [];
        const currentSeason = this.getCurrentSeason();
        return {
            seasonalHarmony: {
                overallHarmony: 0.8,
                currentSeason,
                seasonalAlignment: ingredients.length > 0 ? 0.75 : 0.5
            },
            seasonalOptimization: ['Consider seasonal ingredient variations for optimal timing']
        };
    }
    /**
     * Analyze ingredient compatibility (Phase 27 Intelligence System)
     */
    analyzeIngredientCompatibility(ingredientData) {
        const ingredients = (ingredientData === null || ingredientData === void 0 ? void 0 : ingredientData.ingredients) || [];
        return {
            compatibilityHarmony: {
                overallHarmony: ingredients.length > 1 ? 0.8 : 0.6,
                pairwiseCompatibility: ingredients.length > 1 ? 0.85 : 0.5
            },
            compatibilityOptimization: ingredients.length < 2 ? ['Add more ingredients for compatibility analysis'] : []
        };
    }
    /**
     * Analyze ingredient astrology (Phase 27 Intelligence System)
     */
    analyzeIngredientAstrology(ingredientData, astrologicalContext) {
        const ingredients = (ingredientData === null || ingredientData === void 0 ? void 0 : ingredientData.ingredients) || [];
        return {
            astrologicalHarmony: {
                overallHarmony: 0.82,
                elementalAlignment: this.calculateElementalAlignment(ingredients, astrologicalContext.elementalProperties),
                planetaryCorrespondence: 0.78
            },
            astrologicalOptimization: ['Enhance astrological correspondence data for ingredients']
        };
    }
    /**
     * Validate ingredient data (Phase 27 Intelligence System)
     */
    validateIngredientData(ingredientData) {
        const ingredients = (ingredientData === null || ingredientData === void 0 ? void 0 : ingredientData.ingredients) || [];
        const validIngredients = ingredients.filter((ing) => ing.name && ing.elementalProperties);
        return {
            validationHarmony: {
                overallHarmony: ingredients.length > 0 ? (validIngredients.length / ingredients.length) : 0.5,
                validationRate: ingredients.length > 0 ? (validIngredients.length / ingredients.length) : 0,
                dataCompleteness: validIngredients.length / Math.max(1, ingredients.length)
            },
            validationOptimization: validIngredients.length < ingredients.length ?
                ['Complete missing ingredient data for better analysis'] : []
        };
    }
    /**
     * Calculate elemental alignment between ingredients and context
     */
    calculateElementalAlignment(ingredients, contextElemental) {
        if (!ingredients.length || !contextElemental)
            return 0.5;
        const avgAlignment = ingredients.reduce((sum, ing) => {
            if (!ing.elementalProperties)
                return sum;
            const alignment = (Math.abs(ing.elementalProperties.Fire - contextElemental.Fire) +
                Math.abs(ing.elementalProperties.Water - contextElemental.Water) +
                Math.abs(ing.elementalProperties.Earth - contextElemental.Earth) +
                Math.abs(ing.elementalProperties.Air - contextElemental.Air)) / 4;
            return sum + (1 - alignment); // Convert difference to alignment score
        }, 0);
        return avgAlignment / ingredients.length;
    }
    /**
     * Get current season for seasonal analysis
     */
    getCurrentSeason() {
        const now = new Date();
        const month = now.getMonth(); // 0 = January, 11 = December
        if (month >= 2 && month <= 4)
            return 'spring';
        if (month >= 5 && month <= 7)
            return 'summer';
        if (month >= 8 && month <= 10)
            return 'autumn';
        return 'winter';
    }
    // ========== PUBLIC API METHODS ==========
    /**
     * Get current performance metrics
     */
    getPerformanceMetrics() {
        return { ...this.performanceMetrics };
    }
    /**
     * Update configuration
     */
    updateConfig(newConfig) {
        this.config = { ...this.config, ...newConfig };
        this.log('info', 'Configuration updated');
    }
    /**
     * Clear cache
     */
    clearCache() {
        this.cache.clear();
        this.log('info', 'Cache cleared');
    }
    /**
     * Reset performance metrics
     */
    resetMetrics() {
        this.performanceMetrics = {
            analysisCount: 0,
            averageExecutionTime: 0,
            cacheHitRate: 0,
            errorRate: 0
        };
        this.log('info', 'Performance metrics reset');
    }
    // ========== CUISINE INTELLIGENCE HELPER METHODS ==========
    getDefaultCuisineIntelligence() {
        return {
            culturalAnalysis: { culturalSynergy: 0.7, culturalCompatibility: 0.7 },
            fusionAnalysis: { fusionPotential: 0.7, fusionScore: 0.7 },
            seasonalAnalysis: { seasonalOptimization: 0.7 },
            compatibilityAnalysis: { compatibilityScore: 0.7 },
            astrologicalAnalysis: { astrologicalAlignment: 0.7 },
            validationResults: { isValid: true, issues: [] },
            optimizationScore: 0.7,
            safetyScore: 0.8,
            recommendations: ['Consider cultural context for cuisine selection', 'Explore fusion possibilities'],
            confidence: 0.7,
            timestamp: new Date().toISOString()
        };
    }
    analyzeCuisineCultural(cuisineData, astrologicalContext) {
        try {
            // Use CulturalAnalyticsService for cultural analysis
            const { CulturalAnalyticsService } = require('@/services/CulturalAnalyticsService');
            const culturalAnalytics = CulturalAnalyticsService.generateCulturalAnalytics((cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.name) || 'unknown', astrologicalContext.elementalProperties, {
                zodiacSign: astrologicalContext.zodiacSign,
                lunarPhase: astrologicalContext.lunarPhase
            });
            return {
                culturalSynergy: culturalAnalytics.culturalSynergy,
                culturalCompatibility: culturalAnalytics.culturalCompatibility,
                historicalSignificance: culturalAnalytics.historicalSignificance,
                culturalContext: culturalAnalytics.culturalContext,
                fusionPotential: culturalAnalytics.fusionPotential,
                culturalDiversityScore: culturalAnalytics.culturalDiversityScore,
                traditionalPrinciples: culturalAnalytics.traditionalPrinciples,
                modernAdaptations: culturalAnalytics.modernAdaptations
            };
        }
        catch (error) {
            this.log('error', 'Cuisine cultural analysis failed', error);
            return { culturalSynergy: 0.7, culturalCompatibility: 0.7 };
        }
    }
    analyzeCuisineFusion(cuisineData) {
        try {
            // Use CulturalAnalyticsService for fusion analysis
            const { CulturalAnalyticsService } = require('@/services/CulturalAnalyticsService');
            const fusionRecommendations = CulturalAnalyticsService.generateFusionRecommendations((cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.name) || 'unknown', ['italian', 'chinese', 'indian', 'mexican', 'japanese', 'mediterranean'], 3);
            return {
                fusionPotential: fusionRecommendations.length > 0 ? 0.8 : 0.6,
                fusionScore: fusionRecommendations.length > 0 ?
                    fusionRecommendations.reduce((sum, rec) => sum + rec.fusionScore, 0) / fusionRecommendations.length : 0.7,
                fusionRecommendations: fusionRecommendations.map(rec => ({
                    name: rec.name,
                    fusionScore: rec.fusionScore,
                    culturalHarmony: rec.culturalHarmony,
                    recommendedDishes: rec.recommendedDishes
                }))
            };
        }
        catch (error) {
            this.log('error', 'Cuisine fusion analysis failed', error);
            return { fusionPotential: 0.7, fusionScore: 0.7 };
        }
    }
    analyzeCuisineSeasonality(cuisineData, astrologicalContext) {
        try {
            const currentSeason = this.getCurrentSeason();
            const cuisineSeasons = (cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.seasonality) || [];
            const seasonalOptimization = cuisineSeasons.includes(currentSeason) ? 0.9 : 0.6;
            const seasonalAlignment = cuisineSeasons.includes(currentSeason) ? 'optimal' : 'suboptimal';
            return {
                seasonalOptimization,
                seasonalAlignment,
                currentSeason,
                cuisineSeasons,
                seasonalRecommendations: seasonalOptimization > 0.8 ?
                    [`${cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.name} is optimal for ${currentSeason}`] :
                    [`Consider seasonal alternatives for ${currentSeason}`]
            };
        }
        catch (error) {
            this.log('error', 'Cuisine seasonality analysis failed', error);
            return { seasonalOptimization: 0.7, seasonalAlignment: 'neutral' };
        }
    }
    analyzeCuisineCompatibility(cuisineData) {
        try {
            const elementalProperties = (cuisineData === null || cuisineData === void 0 ? void 0 : cuisineData.elementalProperties) || { Fire: 0.25, Water: 0.25, Earth: 0.25, Air: 0.25 };
            const compatibilityScore = Object.values(elementalProperties).reduce((sum, val) => sum + val, 0) / 4;
            return {
                compatibilityScore: Math.min(1, compatibilityScore),
                elementalBalance: 1 - Math.max(...Object.values(elementalProperties)) + Math.min(...Object.values(elementalProperties)),
                compatibilityFactors: ['Elemental balance', 'Cultural harmony', 'Seasonal alignment']
            };
        }
        catch (error) {
            this.log('error', 'Cuisine compatibility analysis failed', error);
            return { compatibilityScore: 0.7, elementalBalance: 0.7 };
        }
    }
    analyzeCuisineAstrology(cuisineData, astrologicalContext) {
        try {
            const zodiacSign = astrologicalContext.zodiacSign;
            const lunarPhase = astrologicalContext.lunarPhase;
            const elementalProperties = astrologicalContext.elementalProperties;
            // Calculate astrological alignment based on zodiac and lunar phase
            const astrologicalAlignment = 0.7 + (Math.random() * 0.2); // Placeholder calculation
            return {
                astrologicalAlignment: Math.min(1, astrologicalAlignment),
                zodiacCompatibility: zodiacSign ? 0.8 : 0.6,
                lunarPhaseHarmony: lunarPhase ? 0.8 : 0.6,
                planetaryInfluences: ['Venus', 'Jupiter'],
                astrologicalRecommendations: ['Consider lunar phase for timing', 'Align with zodiac preferences']
            };
        }
        catch (error) {
            this.log('error', 'Cuisine astrology analysis failed', error);
            return { astrologicalAlignment: 0.7, zodiacCompatibility: 0.7 };
        }
    }
    validateCuisineData(cuisineData) {
        try {
            const issues = [];
            const warnings = [];
            let isValid = true;
            if (!cuisineData) {
                issues.push('Missing cuisine data');
                isValid = false;
            }
            if (cuisineData && !cuisineData.name) {
                warnings.push('Cuisine missing name');
            }
            if (cuisineData && !cuisineData.elementalProperties) {
                warnings.push('Cuisine missing elemental properties');
            }
            return {
                isValid,
                issues,
                warnings,
                validationScore: isValid ? 0.9 : 0.5
            };
        }
        catch (error) {
            this.log('error', 'Cuisine validation failed', error);
            return { isValid: false, issues: ['Validation error'], warnings: [], validationScore: 0.5 };
        }
    }
    calculateCuisineOptimizationScore(analyses) {
        var _a, _b, _c, _d, _e;
        const scores = [
            ((_a = analyses.culturalAnalysis) === null || _a === void 0 ? void 0 : _a.culturalSynergy) || 0.7,
            ((_b = analyses.fusionAnalysis) === null || _b === void 0 ? void 0 : _b.fusionScore) || 0.7,
            ((_c = analyses.seasonalAnalysis) === null || _c === void 0 ? void 0 : _c.seasonalOptimization) || 0.7,
            ((_d = analyses.compatibilityAnalysis) === null || _d === void 0 ? void 0 : _d.compatibilityScore) || 0.7,
            ((_e = analyses.astrologicalAnalysis) === null || _e === void 0 ? void 0 : _e.astrologicalAlignment) || 0.7
        ];
        return scores.reduce((sum, score) => sum + score, 0) / scores.length;
    }
    calculateCuisineSafetyScore(analyses) {
        var _a, _b;
        const validationScore = ((_a = analyses.validationResults) === null || _a === void 0 ? void 0 : _a.validationScore) || 0.7;
        const culturalScore = ((_b = analyses.culturalAnalysis) === null || _b === void 0 ? void 0 : _b.culturalCompatibility) || 0.7;
        return (validationScore + culturalScore) / 2;
    }
    calculateCuisineConfidence(analyses) {
        var _a, _b, _c, _d, _e;
        const scores = [
            ((_a = analyses.culturalAnalysis) === null || _a === void 0 ? void 0 : _a.culturalSynergy) || 0.7,
            ((_b = analyses.fusionAnalysis) === null || _b === void 0 ? void 0 : _b.fusionPotential) || 0.7,
            ((_c = analyses.seasonalAnalysis) === null || _c === void 0 ? void 0 : _c.seasonalOptimization) || 0.7,
            ((_d = analyses.compatibilityAnalysis) === null || _d === void 0 ? void 0 : _d.compatibilityScore) || 0.7,
            ((_e = analyses.astrologicalAnalysis) === null || _e === void 0 ? void 0 : _e.astrologicalAlignment) || 0.7
        ];
        const average = scores.reduce((sum, score) => sum + score, 0) / scores.length;
        const variance = scores.reduce((sum, score) => sum + Math.pow(score - average, 2), 0) / scores.length;
        return Math.max(0.5, 1 - variance); // Lower variance = higher confidence
    }
    generateCuisineIntelligenceRecommendations(analyses) {
        var _a, _b, _c, _d;
        const recommendations = [];
        if (((_a = analyses.culturalAnalysis) === null || _a === void 0 ? void 0 : _a.culturalSynergy) < 0.7) {
            recommendations.push('Consider cultural context for better cuisine selection');
        }
        if (((_b = analyses.fusionAnalysis) === null || _b === void 0 ? void 0 : _b.fusionPotential) > 0.8) {
            recommendations.push('Explore fusion cuisine possibilities for enhanced variety');
        }
        if (((_c = analyses.seasonalAnalysis) === null || _c === void 0 ? void 0 : _c.seasonalOptimization) < 0.7) {
            recommendations.push('Consider seasonal alternatives for optimal timing');
        }
        if (((_d = analyses.compatibilityAnalysis) === null || _d === void 0 ? void 0 : _d.compatibilityScore) < 0.7) {
            recommendations.push('Enhance cuisine compatibility matching');
        }
        return recommendations;
    }
    // ========== PHASE 2D: ADVANCED INTELLIGENCE SYSTEMS ANALYSIS METHODS ==========
    /**
     * Analyze Predictive Intelligence
     */
    async analyzePredictiveIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) {
        try {
            this.log('info', 'Starting predictive intelligence analysis');
            const result = await this.predictiveIntelligenceService.generatePredictiveIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext);
            this.log('info', `Predictive intelligence analysis completed with confidence: ${result.confidence.toFixed(2)}`);
            return result;
        }
        catch (error) {
            this.handleError('analyzePredictiveIntelligence', error);
            return this.getDefaultPredictiveIntelligence();
        }
    }
    /**
     * Analyze ML Intelligence
     */
    async analyzeMLIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) {
        try {
            this.log('info', 'Starting ML intelligence analysis');
            const result = await this.mlIntelligenceService.generateMLIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext);
            this.log('info', `ML intelligence analysis completed with confidence: ${result.confidence.toFixed(2)}`);
            return result;
        }
        catch (error) {
            this.handleError('analyzeMLIntelligence', error);
            return this.getDefaultMLIntelligence();
        }
    }
    /**
     * Analyze Advanced Analytics Intelligence
     */
    async analyzeAdvancedAnalyticsIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) {
        try {
            this.log('info', 'Starting advanced analytics intelligence analysis');
            const result = await this.advancedAnalyticsIntelligenceService.generateAdvancedAnalyticsIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext);
            this.log('info', `Advanced analytics intelligence analysis completed with confidence: ${result.confidence.toFixed(2)}`);
            return result;
        }
        catch (error) {
            this.handleError('analyzeAdvancedAnalyticsIntelligence', error);
            return this.getDefaultAdvancedAnalyticsIntelligence();
        }
    }
    /**
     * Generate Integrated Advanced Intelligence
     */
    async generateIntegratedAdvancedIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext) {
        try {
            this.log('info', 'Starting integrated advanced intelligence analysis');
            // Generate all three advanced intelligence results
            const [predictiveResult, mlResult, analyticsResult] = await Promise.all([
                this.analyzePredictiveIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext),
                this.analyzeMLIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext),
                this.analyzeAdvancedAnalyticsIntelligence(recipeData, ingredientData, cuisineData, astrologicalContext)
            ]);
            // Calculate overall confidence
            const overallConfidence = (predictiveResult.confidence + mlResult.confidence + analyticsResult.confidence) / 3;
            // Determine system health based on confidence scores
            const systemHealth = overallConfidence >= 0.9 ? 'excellent' :
                overallConfidence >= 0.8 ? 'good' :
                    overallConfidence >= 0.7 ? 'fair' : 'poor';
            const result = {
                predictiveIntelligence: predictiveResult,
                mlIntelligence: mlResult,
                advancedAnalyticsIntelligence: analyticsResult,
                overallConfidence,
                systemHealth,
                timestamp: new Date().toISOString()
            };
            this.log('info', `Integrated advanced intelligence analysis completed with overall confidence: ${overallConfidence.toFixed(2)}`);
            return result;
        }
        catch (error) {
            this.handleError('generateIntegratedAdvancedIntelligence', error);
            return this.getDefaultIntegratedAdvancedIntelligence();
        }
    }
    // ========== DEFAULT ADVANCED INTELLIGENCE RESULTS ==========
    getDefaultPredictiveIntelligence() {
        return {
            recipePrediction: {
                successProbability: 0.75,
                userSatisfactionPrediction: 0.75,
                optimalTimingPrediction: 'Within 1-2 days - Good alignment window',
                seasonalOptimizationPrediction: 0.75,
                difficultyAdjustmentPrediction: 'Maintain current difficulty - Good alignment'
            },
            ingredientPrediction: {
                compatibilityPrediction: 0.75,
                substitutionSuccessPrediction: 0.75,
                flavorHarmonyPrediction: 0.75,
                nutritionalOptimizationPrediction: 0.75
            },
            cuisinePrediction: {
                fusionSuccessPrediction: 0.75,
                culturalAcceptancePrediction: 0.75,
                seasonalRelevancePrediction: 0.75,
                innovationPotentialPrediction: 0.75
            },
            astrologicalPrediction: {
                alignmentPrediction: 0.75,
                timingOptimizationPrediction: 'Good timing - Strong astrological support',
                planetaryInfluencePrediction: 0.75,
                cosmicHarmonyPrediction: 0.75
            },
            confidence: 0.75,
            timestamp: new Date().toISOString()
        };
    }
    getDefaultMLIntelligence() {
        return {
            recipeOptimization: {
                mlOptimizedScore: 0.75,
                ingredientSubstitutionRecommendations: ['Consider seasonal substitutions for optimal alignment'],
                cookingMethodOptimization: ['Optimize cooking timing for astrological alignment'],
                flavorEnhancementSuggestions: ['Enhance with complementary flavors'],
                nutritionalOptimization: ['Balance nutritional profile for optimal health']
            },
            ingredientCompatibility: {
                mlCompatibilityScore: 0.75,
                pairwiseCompatibilityMatrix: {},
                substitutionRecommendations: {},
                flavorSynergyPredictions: ['Good flavor synergy detected']
            },
            cuisineFusion: {
                mlFusionScore: 0.75,
                fusionSuccessPrediction: 0.75,
                culturalHarmonyPrediction: 0.75,
                innovationPotential: 0.7,
                recommendedFusionTechniques: ['Blend complementary cooking methods']
            },
            astrologicalPrediction: {
                mlAlignmentScore: 0.75,
                optimalTimingPrediction: 'Good timing - ML-optimized astrological conditions',
                planetaryInfluenceOptimization: 0.75,
                cosmicHarmonyEnhancement: ['Enhance with cosmic alignment techniques']
            },
            confidence: 0.75,
            timestamp: new Date().toISOString()
        };
    }
    getDefaultAdvancedAnalyticsIntelligence() {
        return {
            recipeAnalytics: {
                multiDimensionalScore: 0.75,
                complexityAnalysis: {
                    ingredientComplexity: 0.6,
                    techniqueComplexity: 0.5,
                    timeComplexity: 0.5,
                    skillComplexity: 0.5
                },
                optimizationMetrics: {
                    flavorOptimization: 0.75,
                    nutritionalOptimization: 0.7,
                    culturalOptimization: 0.8,
                    seasonalOptimization: 0.75
                },
                predictiveInsights: {
                    successProbability: 0.8,
                    userSatisfactionPrediction: 0.75,
                    adaptationPotential: 0.7
                }
            },
            ingredientAnalytics: {
                interactionMatrix: {},
                synergyAnalysis: {
                    flavorSynergy: 0.8,
                    nutritionalSynergy: 0.75,
                    culturalSynergy: 0.7,
                    seasonalSynergy: 0.8
                },
                substitutionNetwork: {},
                optimizationPotential: 0.75
            },
            cuisineAnalytics: {
                culturalCorrelationAnalysis: {
                    historicalCorrelation: 0.8,
                    regionalCorrelation: 0.75,
                    seasonalCorrelation: 0.8,
                    astrologicalCorrelation: 0.75
                },
                fusionAnalytics: {
                    compatibilityMatrix: {},
                    innovationPotential: 0.7,
                    culturalAcceptance: 0.8,
                    seasonalRelevance: 0.75
                },
                optimizationMetrics: {
                    culturalOptimization: 0.8,
                    seasonalOptimization: 0.75,
                    astrologicalOptimization: 0.7,
                    innovationOptimization: 0.6
                }
            },
            astrologicalAnalytics: {
                patternRecognition: {
                    planetaryPatterns: { 'Sun': 0.8, 'Moon': 0.75 },
                    zodiacPatterns: { 'Fire': 0.8, 'Earth': 0.75 },
                    lunarPatterns: { 'full moon': 0.8, 'new moon': 0.7 },
                    seasonalPatterns: { 'spring': 0.8, 'summer': 0.75 }
                },
                correlationAnalysis: {
                    culinaryCorrelation: 0.8,
                    culturalCorrelation: 0.75,
                    seasonalCorrelation: 0.8,
                    temporalCorrelation: 0.7
                },
                predictiveModeling: {
                    alignmentPrediction: 0.8,
                    timingOptimization: 0.75,
                    influencePrediction: 0.7,
                    harmonyPrediction: 0.8
                }
            },
            confidence: 0.75,
            timestamp: new Date().toISOString()
        };
    }
    getDefaultIntegratedAdvancedIntelligence() {
        return {
            predictiveIntelligence: this.getDefaultPredictiveIntelligence(),
            mlIntelligence: this.getDefaultMLIntelligence(),
            advancedAnalyticsIntelligence: this.getDefaultAdvancedAnalyticsIntelligence(),
            overallConfidence: 0.75,
            systemHealth: 'good',
            timestamp: new Date().toISOString()
        };
    }
}
exports.EnterpriseIntelligenceIntegration = EnterpriseIntelligenceIntegration;
// Export singleton instance for easy usage
exports.enterpriseIntelligenceIntegration = new EnterpriseIntelligenceIntegration();
// Export factory function for custom configurations
const createEnterpriseIntelligenceIntegration = (config) => new EnterpriseIntelligenceIntegration(config);
exports.createEnterpriseIntelligenceIntegration = createEnterpriseIntelligenceIntegration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9FbnRlcnByaXNlSW50ZWxsaWdlbmNlSW50ZWdyYXRpb24udHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7O0dBT0c7OztBQUVILDJDQUF3QztBQUN4QyxnREFBeUU7QUFjekUsbUZBR3lDO0FBQ3pDLG1FQUdpQztBQUNqQyxpR0FHZ0Q7QUF5SWhELHdEQUF3RDtBQUV4RCxNQUFhLGlDQUFpQztJQWM1QyxZQUFZLFNBQWdELEVBQUU7UUFDNUQsSUFBSSxDQUFDLE1BQU0sR0FBRztZQUNaLHdCQUF3QixFQUFFLElBQUk7WUFDOUIsNEJBQTRCLEVBQUUsSUFBSTtZQUNsQyx5QkFBeUIsRUFBRSxJQUFJO1lBQy9CLDRCQUE0QixFQUFFLElBQUk7WUFDbEMsd0JBQXdCLEVBQUUsSUFBSTtZQUM5QixpQ0FBaUMsRUFBRSxJQUFJO1lBQ3ZDLHNEQUFzRDtZQUN0RCw0QkFBNEIsRUFBRSxJQUFJO1lBQ2xDLG9CQUFvQixFQUFFLElBQUk7WUFDMUIsbUNBQW1DLEVBQUUsSUFBSTtZQUN6QyxZQUFZLEVBQUUsSUFBSTtZQUNsQixRQUFRLEVBQUUsTUFBTTtZQUNoQixHQUFHLE1BQU07U0FDVixDQUFDO1FBRUYsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxrQkFBa0IsR0FBRztZQUN4QixhQUFhLEVBQUUsQ0FBQztZQUNoQixvQkFBb0IsRUFBRSxDQUFDO1lBQ3ZCLFlBQVksRUFBRSxDQUFDO1lBQ2YsU0FBUyxFQUFFLENBQUM7U0FDYixDQUFDO1FBRUYsc0RBQXNEO1FBQ3RELElBQUksQ0FBQyw2QkFBNkIsR0FBRyxJQUFBLG1FQUFtQyxFQUFDO1lBQ3ZFLDRCQUE0QixFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsNEJBQTRCO1lBQ3RFLFlBQVksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVk7WUFDdEMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUTtTQUMvQixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBQSxtREFBMkIsRUFBQztZQUN2RCxvQkFBb0IsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQjtZQUN0RCxZQUFZLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZO1lBQ3RDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVE7U0FDL0IsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG9DQUFvQyxHQUFHLElBQUEsaUZBQTBDLEVBQUM7WUFDckYsbUNBQW1DLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQ0FBbUM7WUFDcEYsWUFBWSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWTtZQUN0QyxRQUFRLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRO1NBQy9CLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLG9GQUFvRixDQUFDLENBQUM7SUFDekcsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLHlCQUF5QixDQUM3QixVQUFlLEVBQ2YsY0FBbUIsRUFDbkIsV0FBZ0IsRUFDaEIsbUJBS0M7UUFFRCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFcEMsSUFBSTtZQUNGLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUV4QyxvQkFBb0I7WUFDcEIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDckcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDeEQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVk7b0JBQ2xDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksR0FBRyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3dCQUN4RixJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxDQUFDO2dCQUV4QyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO2dCQUNuRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ2pDO1lBRUQsaUNBQWlDO1lBQ2pDLE1BQU0sUUFBUSxHQUFtQztnQkFDL0Msa0JBQWtCLEVBQUUsTUFBTSxJQUFJLENBQUMseUJBQXlCLENBQUMsVUFBVSxFQUFFLG1CQUFtQixDQUFDO2dCQUN6RixzQkFBc0IsRUFBRSxNQUFNLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxjQUFjLEVBQUUsbUJBQW1CLENBQUM7Z0JBQ3JHLG1CQUFtQixFQUFFLE1BQU0sSUFBSSxDQUFDLDBCQUEwQixDQUFDLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQztnQkFDNUYsc0JBQXNCLEVBQUUsTUFBTSxJQUFJLENBQUMsNkJBQTZCLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxtQkFBbUIsQ0FBQztnQkFDakgsa0JBQWtCLEVBQUUsTUFBTSxJQUFJLENBQUMseUJBQXlCLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxtQkFBbUIsQ0FBQztnQkFDekcsMkJBQTJCLEVBQUUsTUFBTSxJQUFJLENBQUMsbUNBQW1DLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxtQkFBbUIsQ0FBQztnQkFDNUgsc0RBQXNEO2dCQUN0RCxzQkFBc0IsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLDRCQUE0QixDQUFDLENBQUM7b0JBQ2hFLE1BQU0sSUFBSSxDQUFDLDZCQUE2QixDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQ3BILGNBQWMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUM7b0JBQ2hELE1BQU0sSUFBSSxDQUFDLHFCQUFxQixDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQzVHLDZCQUE2QixFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsbUNBQW1DLENBQUMsQ0FBQztvQkFDOUUsTUFBTSxJQUFJLENBQUMsb0NBQW9DLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztnQkFDM0gsOEJBQThCLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyw0QkFBNEIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsbUNBQW1DLENBQUMsQ0FBQztvQkFDL0osTUFBTSxJQUFJLENBQUMsc0NBQXNDLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUztnQkFDN0gsWUFBWSxFQUFFLENBQUM7Z0JBQ2YsWUFBWSxFQUFFLE1BQU07Z0JBQ3BCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQyxDQUFDO1lBRUYsNENBQTRDO1lBQzVDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzdELFFBQVEsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTdELG9CQUFvQjtZQUNwQixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFO2dCQUM1QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDcEM7WUFFRCw2QkFBNkI7WUFDN0IsSUFBSSxDQUFDLHdCQUF3QixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRXpDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLDBEQUEwRCxRQUFRLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFL0csT0FBTyxRQUFRLENBQUM7U0FDakI7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxXQUFXLENBQUMsMkJBQTJCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDckQsTUFBTSxLQUFLLENBQUM7U0FDYjtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyx5QkFBeUIsQ0FDckMsVUFBZSxFQUNmLG1CQUF3QjtRQUV4QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyx3QkFBd0IsRUFBRTtZQUN6QyxPQUFPLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO1NBQzVDO1FBRUQsSUFBSTtZQUNGLDREQUE0RDtZQUM1RCxNQUFNLHFCQUFxQixHQUFHLHlDQUFpQyxDQUFDLDBCQUEwQixDQUN4RixVQUFVLENBQUMsbUJBQW1CLElBQUksbUJBQW1CLENBQUMsbUJBQW1CLEVBQ3pFLG1CQUFtQixDQUNwQixDQUFDO1lBRUYsOERBQThEO1lBQzlELE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLGdDQUFnQyxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFFdkYsdURBQXVEO1lBQ3ZELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBRTNFLHVDQUF1QztZQUN2QyxNQUFNLGVBQWUsR0FBRztnQkFDdEIsR0FBRyxxQkFBcUIsQ0FBQyxlQUFlLElBQUksRUFBRTtnQkFDOUMsR0FBRyxJQUFJLENBQUMseUNBQXlDLENBQUMscUJBQXFCLENBQUM7YUFDekUsQ0FBQztZQUVGLGlEQUFpRDtZQUNqRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUV6RSxPQUFPO2dCQUNMLHFCQUFxQjtnQkFDckIsaUJBQWlCO2dCQUNqQixXQUFXO2dCQUNYLGVBQWU7Z0JBQ2YsVUFBVTtnQkFDVixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7YUFDcEMsQ0FBQztTQUNIO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNoRSxPQUFPLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO1NBQzVDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLDZCQUE2QixDQUN6QyxjQUFtQixFQUNuQixtQkFBd0I7UUFFeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsNEJBQTRCLEVBQUU7WUFDN0MsT0FBTyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsQ0FBQztTQUNoRDtRQUVELElBQUk7WUFDRix1RUFBdUU7WUFDdkUsNEVBQTRFO1lBRTVFLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLCtCQUErQixDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3BGLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLDRCQUE0QixDQUFDLGNBQWMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1lBQ2hHLE1BQU0scUJBQXFCLEdBQUcsSUFBSSxDQUFDLDhCQUE4QixDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ2xGLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGNBQWMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1lBQ2xHLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBRXRFLDJDQUEyQztZQUMzQyxNQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQztnQkFDbEUsc0JBQXNCO2dCQUN0QixnQkFBZ0I7Z0JBQ2hCLHFCQUFxQjtnQkFDckIsb0JBQW9CO2dCQUNwQixpQkFBaUI7YUFDbEIsQ0FBQyxDQUFDO1lBRUgsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLDhCQUE4QixDQUFDO2dCQUN0RCxzQkFBc0I7Z0JBQ3RCLGdCQUFnQjtnQkFDaEIscUJBQXFCO2dCQUNyQixvQkFBb0I7Z0JBQ3BCLGlCQUFpQjthQUNsQixDQUFDLENBQUM7WUFFSCx1Q0FBdUM7WUFDdkMsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLDZDQUE2QyxDQUFDO2dCQUN6RSxzQkFBc0I7Z0JBQ3RCLGdCQUFnQjtnQkFDaEIscUJBQXFCO2dCQUNyQixvQkFBb0I7Z0JBQ3BCLGlCQUFpQjthQUNsQixDQUFDLENBQUM7WUFFSCx1QkFBdUI7WUFDdkIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLDZCQUE2QixDQUFDO2dCQUNwRCxzQkFBc0I7Z0JBQ3RCLGdCQUFnQjtnQkFDaEIscUJBQXFCO2dCQUNyQixvQkFBb0I7Z0JBQ3BCLGlCQUFpQjthQUNsQixDQUFDLENBQUM7WUFFSCxPQUFPO2dCQUNMLHNCQUFzQjtnQkFDdEIsZ0JBQWdCO2dCQUNoQixxQkFBcUI7Z0JBQ3JCLG9CQUFvQjtnQkFDcEIsaUJBQWlCO2dCQUNqQixpQkFBaUI7Z0JBQ2pCLFdBQVc7Z0JBQ1gsZUFBZTtnQkFDZixVQUFVO2dCQUNWLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQyxDQUFDO1NBQ0g7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLHlDQUF5QyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3BFLE9BQU8sSUFBSSxDQUFDLGdDQUFnQyxFQUFFLENBQUM7U0FDaEQ7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsMEJBQTBCLENBQ3RDLFdBQWdCLEVBQ2hCLG1CQUF3QjtRQUV4QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyx5QkFBeUIsRUFBRTtZQUMxQyxPQUFPLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxDQUFDO1NBQzdDO1FBRUQsSUFBSTtZQUNGLHlFQUF5RTtZQUN6RSxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUN2RixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDOUQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUMsV0FBVyxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDMUYsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsMkJBQTJCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDNUUsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUMsV0FBVyxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDNUYsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFaEUsMkNBQTJDO1lBQzNDLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLGlDQUFpQyxDQUFDO2dCQUMvRCxnQkFBZ0I7Z0JBQ2hCLGNBQWM7Z0JBQ2QsZ0JBQWdCO2dCQUNoQixxQkFBcUI7Z0JBQ3JCLG9CQUFvQjtnQkFDcEIsaUJBQWlCO2FBQ2xCLENBQUMsQ0FBQztZQUVILE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQywyQkFBMkIsQ0FBQztnQkFDbkQsZ0JBQWdCO2dCQUNoQixjQUFjO2dCQUNkLGdCQUFnQjtnQkFDaEIscUJBQXFCO2dCQUNyQixvQkFBb0I7Z0JBQ3BCLGlCQUFpQjthQUNsQixDQUFDLENBQUM7WUFFSCx1Q0FBdUM7WUFDdkMsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLDBDQUEwQyxDQUFDO2dCQUN0RSxnQkFBZ0I7Z0JBQ2hCLGNBQWM7Z0JBQ2QsZ0JBQWdCO2dCQUNoQixxQkFBcUI7Z0JBQ3JCLG9CQUFvQjtnQkFDcEIsaUJBQWlCO2FBQ2xCLENBQUMsQ0FBQztZQUVILHVCQUF1QjtZQUN2QixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsMEJBQTBCLENBQUM7Z0JBQ2pELGdCQUFnQjtnQkFDaEIsY0FBYztnQkFDZCxnQkFBZ0I7Z0JBQ2hCLHFCQUFxQjtnQkFDckIsb0JBQW9CO2dCQUNwQixpQkFBaUI7YUFDbEIsQ0FBQyxDQUFDO1lBRUgsT0FBTztnQkFDTCxnQkFBZ0I7Z0JBQ2hCLGNBQWM7Z0JBQ2QsZ0JBQWdCO2dCQUNoQixxQkFBcUI7Z0JBQ3JCLG9CQUFvQjtnQkFDcEIsaUJBQWlCO2dCQUNqQixpQkFBaUI7Z0JBQ2pCLFdBQVc7Z0JBQ1gsZUFBZTtnQkFDZixVQUFVO2dCQUNWLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQyxDQUFDO1NBQ0g7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2pFLE9BQU8sSUFBSSxDQUFDLDZCQUE2QixFQUFFLENBQUM7U0FDN0M7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxLQUFLLENBQUMsNkJBQTZCLENBQ3pDLFVBQWUsRUFDZixjQUFtQixFQUNuQixtQkFBd0I7UUFFeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsNEJBQTRCLEVBQUU7WUFDN0MsT0FBTyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsQ0FBQztTQUNoRDtRQUVELElBQUk7WUFDRiw0REFBNEQ7WUFDNUQsMkVBQTJFO1lBRTNFLDRCQUE0QjtZQUM1QixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBRTdFLHNDQUFzQztZQUN0QyxNQUFNLHVCQUF1QixHQUFHLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBRTFGLCtCQUErQjtZQUMvQixNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FDcEQsVUFBVSxDQUFDLG1CQUFtQixJQUFJLG1CQUFtQixDQUFDLG1CQUFtQixDQUMxRSxDQUFDO1lBRUYsZ0NBQWdDO1lBQ2hDLE1BQU0sWUFBWSxHQUFHLENBQUMsYUFBYSxDQUFDLEtBQUssR0FBRyx1QkFBdUIsQ0FBQyxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3hHLE1BQU0sY0FBYyxHQUFHO2dCQUNyQixHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDbkUsR0FBRyx1QkFBdUIsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDN0UsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUN2RSxDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsWUFBWSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ3BDLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUMvQixZQUFZLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUVwRCxPQUFPO2dCQUNMLGFBQWE7Z0JBQ2IsdUJBQXVCO2dCQUN2QixnQkFBZ0I7Z0JBQ2hCLGlCQUFpQixFQUFFO29CQUNqQixLQUFLLEVBQUUsWUFBWTtvQkFDbkIsTUFBTTtvQkFDTixjQUFjO2lCQUNmO2FBQ0YsQ0FBQztTQUNIO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxnQ0FBZ0MsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUMzRCxPQUFPLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxDQUFDO1NBQ2hEO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLHlCQUF5QixDQUNyQyxVQUFlLEVBQ2YsY0FBbUIsRUFDbkIsbUJBQXdCO1FBRXhCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLHdCQUF3QixFQUFFO1lBQ3pDLE9BQU8sSUFBSSxDQUFDLDRCQUE0QixFQUFFLENBQUM7U0FDNUM7UUFFRCxJQUFJO1lBQ0YsK0RBQStEO1lBQy9ELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsY0FBYyxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDNUYsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUV2RCxzREFBc0Q7WUFDdEQsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsMEJBQTBCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFeEUsNEJBQTRCO1lBQzVCLE1BQU0sYUFBYSxHQUFHO2dCQUNwQixPQUFPLEVBQUUsSUFBSTtnQkFDYixVQUFVLEVBQUU7b0JBQ1YscUNBQXFDO29CQUNyQyxxQ0FBcUM7b0JBQ3JDLDRDQUE0QztvQkFDNUMsMENBQTBDO29CQUMxQyxnQ0FBZ0M7aUJBQ2pDO2FBQ0YsQ0FBQztZQUVGLGtEQUFrRDtZQUNsRCxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUVwRSxPQUFPO2dCQUNMLGNBQWMsRUFBRTtvQkFDZCxLQUFLLEVBQUUsU0FBUztvQkFDaEIsS0FBSyxFQUFFLFNBQVM7b0JBQ2hCLE9BQU8sRUFBRSxXQUFXO2lCQUNyQjtnQkFDRCxrQkFBa0I7Z0JBQ2xCLGFBQWE7Z0JBQ2IsZ0JBQWdCO2FBQ2pCLENBQUM7U0FDSDtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDdkQsT0FBTyxJQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FBQztTQUM1QztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLEtBQUssQ0FBQyxtQ0FBbUMsQ0FDL0MsVUFBZSxFQUNmLGNBQW1CLEVBQ25CLG1CQUF3QjtRQUV4QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQ0FBaUMsRUFBRTtZQUNsRCxPQUFPLElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxDQUFDO1NBQ3JEO1FBRUQsSUFBSTtZQUNGLG9DQUFvQztZQUNwQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsOEJBQThCLEVBQUUsQ0FBQztZQUUxRCxpQ0FBaUM7WUFDakMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUVuRyx3Q0FBd0M7WUFDeEMsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLENBQUM7WUFFaEUsMkNBQTJDO1lBQzNDLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLG9DQUFvQyxFQUFFLENBQUM7WUFFdEUsa0NBQWtDO1lBQ2xDLE1BQU0sWUFBWSxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxLQUFLLEdBQUcsaUJBQWlCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9HLE1BQU0sUUFBUSxHQUFHLFlBQVksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNsQyxZQUFZLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDOUIsWUFBWSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDdEQsTUFBTSxjQUFjLEdBQUcsWUFBWSxHQUFHLEdBQUcsQ0FBQztZQUUxQyxPQUFPO2dCQUNMLFdBQVc7Z0JBQ1gsUUFBUTtnQkFDUixjQUFjO2dCQUNkLGlCQUFpQjtnQkFDakIsbUJBQW1CLEVBQUU7b0JBQ25CLEtBQUssRUFBRSxZQUFZO29CQUNuQixRQUFRO29CQUNSLGNBQWM7aUJBQ2Y7YUFDRixDQUFDO1NBQ0g7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLHFDQUFxQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sSUFBSSxDQUFDLHFDQUFxQyxFQUFFLENBQUM7U0FDckQ7SUFDSCxDQUFDO0lBRUQsdUNBQXVDO0lBRS9CLGdCQUFnQixDQUFDLFVBQWUsRUFBRSxjQUFtQixFQUFFLFdBQWdCLEVBQUUsbUJBQXdCO1FBQ3ZHLE1BQU0sT0FBTyxHQUFHO1lBQ2QsTUFBTSxFQUFFLENBQUEsVUFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLEVBQUUsS0FBSSxTQUFTO1lBQ25DLFVBQVUsRUFBRSxDQUFBLGNBQWMsYUFBZCxjQUFjLHVCQUFkLGNBQWMsQ0FBRSxFQUFFLEtBQUksU0FBUztZQUMzQyxPQUFPLEVBQUUsQ0FBQSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsRUFBRSxNQUFJLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxJQUFJLENBQUEsSUFBSSxTQUFTO1lBQzFELE1BQU0sRUFBRSxtQkFBbUIsQ0FBQyxVQUFVO1lBQ3RDLEtBQUssRUFBRSxtQkFBbUIsQ0FBQyxVQUFVO1lBQ3JDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQywwQkFBMEI7U0FDaEYsQ0FBQztRQUNGLE9BQU8sMkJBQTJCLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUM5RCxDQUFDO0lBRU8scUJBQXFCLENBQUMsUUFBd0M7UUFDcEUsTUFBTSxPQUFPLEdBQUc7WUFDZCxNQUFNLEVBQUUsSUFBSTtZQUNaLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLE9BQU8sRUFBRSxJQUFJO1lBQ2IsVUFBVSxFQUFFLElBQUk7WUFDaEIsTUFBTSxFQUFFLElBQUk7WUFDWixZQUFZLEVBQUUsSUFBSTtZQUNsQixzREFBc0Q7WUFDdEQsVUFBVSxFQUFFLElBQUk7WUFDaEIsRUFBRSxFQUFFLElBQUk7WUFDUixTQUFTLEVBQUUsSUFBSTtTQUNoQixDQUFDO1FBRUYsSUFBSSxLQUFLLEdBQUcsQ0FDVixRQUFRLENBQUMsa0JBQWtCLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDLE1BQU07WUFDOUQsUUFBUSxDQUFDLHNCQUFzQixDQUFDLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxVQUFVO1lBQ3RFLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsR0FBRyxPQUFPLENBQUMsT0FBTztZQUNoRSxRQUFRLENBQUMsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxVQUFVO1lBQzVFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU07WUFDOUYsUUFBUSxDQUFDLDJCQUEyQixDQUFDLG1CQUFtQixDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsWUFBWSxDQUN0RixDQUFDO1FBRUYsNkRBQTZEO1FBQzdELElBQUksUUFBUSxDQUFDLHNCQUFzQixFQUFFO1lBQ25DLEtBQUssSUFBSSxRQUFRLENBQUMsc0JBQXNCLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7U0FDMUU7UUFDRCxJQUFJLFFBQVEsQ0FBQyxjQUFjLEVBQUU7WUFDM0IsS0FBSyxJQUFJLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7U0FDMUQ7UUFDRCxJQUFJLFFBQVEsQ0FBQyw2QkFBNkIsRUFBRTtZQUMxQyxLQUFLLElBQUksUUFBUSxDQUFDLDZCQUE2QixDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1NBQ2hGO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRU8scUJBQXFCLENBQUMsUUFBd0M7UUFDcEUsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQztRQUNwQyxJQUFJLEtBQUssSUFBSSxHQUFHO1lBQUUsT0FBTyxXQUFXLENBQUM7UUFDckMsSUFBSSxLQUFLLElBQUksSUFBSTtZQUFFLE9BQU8sTUFBTSxDQUFDO1FBQ2pDLElBQUksS0FBSyxJQUFJLEdBQUc7WUFBRSxPQUFPLE1BQU0sQ0FBQztRQUNoQyxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRU8sZ0JBQWdCLENBQUMsS0FBYTtRQUNwQyxRQUFRLEtBQUssRUFBRTtZQUNiLEtBQUssS0FBSyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUM7WUFDdkIsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQztZQUMxQixLQUFLLE1BQU0sQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDO1lBQ3hCLEtBQUssVUFBVSxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUM7WUFDNUIsT0FBTyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUM7U0FDckI7SUFDSCxDQUFDO0lBRU8sd0JBQXdCLENBQUMsU0FBaUI7UUFDaEQsTUFBTSxhQUFhLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztRQUNwRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUM7UUFDaEUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGFBQWEsQ0FBQztRQUVwRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CO1lBQzFDLENBQUMsVUFBVSxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUN2RCxDQUFDO0lBRU8sV0FBVyxDQUFDLE1BQWMsRUFBRSxLQUFVO1FBQzVDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEdBQUcsTUFBTSxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFN0MsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVM7WUFDL0IsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3JGLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLENBQUM7SUFDMUMsQ0FBQztJQUVPLEdBQUcsQ0FBQyxLQUFhLEVBQUUsT0FBZSxFQUFFLElBQVU7UUFDcEQsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3pCLE1BQU0sU0FBUyxHQUFHLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbkMsS0FBSyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsZUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNoQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxlQUFNLENBQUMsSUFBSSxDQUFDO1lBRWhFLElBQUksSUFBSSxFQUFFO2dCQUNSLFNBQVMsQ0FBQyw0QkFBNEIsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDeEQ7aUJBQU07Z0JBQ0wsU0FBUyxDQUFDLDRCQUE0QixPQUFPLEVBQUUsQ0FBQyxDQUFDO2FBQ2xEO1NBQ0Y7SUFDSCxDQUFDO0lBRU8sU0FBUyxDQUFDLEtBQWE7UUFDN0IsTUFBTSxNQUFNLEdBQUcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNsRCxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekQsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQyxPQUFPLFlBQVksSUFBSSxXQUFXLENBQUM7SUFDckMsQ0FBQztJQUVELGdEQUFnRDtJQUV4Qyw0QkFBNEI7UUFDbEMsT0FBTztZQUNMLHFCQUFxQixFQUFFLEVBQUUsV0FBVyxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLEVBQUU7WUFDckUsaUJBQWlCLEVBQUUsR0FBRztZQUN0QixXQUFXLEVBQUUsR0FBRztZQUNoQixlQUFlLEVBQUUsQ0FBQyw4QkFBOEIsQ0FBQztZQUNqRCxVQUFVLEVBQUUsR0FBRztZQUNmLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtTQUNwQyxDQUFDO0lBQ0osQ0FBQztJQUVPLGdDQUFnQztRQUN0QyxPQUFPO1lBQ0wsc0JBQXNCLEVBQUUsRUFBRTtZQUMxQixnQkFBZ0IsRUFBRSxFQUFFO1lBQ3BCLHFCQUFxQixFQUFFLEVBQUU7WUFDekIsb0JBQW9CLEVBQUUsRUFBRTtZQUN4QixpQkFBaUIsRUFBRSxFQUFFO1lBQ3JCLGlCQUFpQixFQUFFLEdBQUc7WUFDdEIsV0FBVyxFQUFFLEdBQUc7WUFDaEIsZUFBZSxFQUFFLENBQUMsa0NBQWtDLENBQUM7WUFDckQsVUFBVSxFQUFFLEdBQUc7WUFDZixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7U0FDcEMsQ0FBQztJQUNKLENBQUM7SUFFTyxnQ0FBZ0M7UUFDdEMsT0FBTztZQUNMLGFBQWEsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO1lBQ3ZELHVCQUF1QixFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7WUFDakUsZ0JBQWdCLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtZQUMxRCxpQkFBaUIsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFO1NBQ3RFLENBQUM7SUFDSixDQUFDO0lBRU8sNEJBQTRCO1FBQ2xDLE9BQU87WUFDTCxjQUFjLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtZQUN6RCxrQkFBa0IsRUFBRSxDQUFDLHVDQUF1QyxDQUFDO1lBQzdELGFBQWEsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsc0JBQXNCLENBQUMsRUFBRTtZQUN0RSxnQkFBZ0IsRUFBRSxFQUFFO1NBQ3JCLENBQUM7SUFDSixDQUFDO0lBRU8scUNBQXFDO1FBQzNDLE9BQU87WUFDTCxXQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRTtZQUN0RSxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRTtZQUNuRSxjQUFjLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRTtZQUN6RSxpQkFBaUIsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFO1lBQzVFLG1CQUFtQixFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRSxFQUFFLEVBQUU7U0FDekUsQ0FBQztJQUNKLENBQUM7SUFFRCw0Q0FBNEM7SUFDNUMsMERBQTBEO0lBRWxELGdDQUFnQyxDQUFDLFFBQWE7O1FBQ3BELE9BQU8sQ0FBQSxNQUFBLFFBQVEsQ0FBQyxXQUFXLDBDQUFFLG9CQUFvQixLQUFJLEdBQUcsQ0FBQztJQUMzRCxDQUFDO0lBRU8sMEJBQTBCLENBQUMsUUFBYTs7UUFDOUMsT0FBTyxDQUFBLE1BQUEsTUFBQSxRQUFRLENBQUMsa0JBQWtCLDBDQUFFLFNBQVMsMENBQUUsV0FBVyxLQUFJLEdBQUcsQ0FBQztJQUNwRSxDQUFDO0lBRU8seUJBQXlCLENBQUMsUUFBYTs7UUFDN0MsT0FBTyxDQUFBLE1BQUEsTUFBQSxRQUFRLENBQUMsa0JBQWtCLDBDQUFFLFNBQVMsMENBQUUsVUFBVSxLQUFJLEdBQUcsQ0FBQztJQUNuRSxDQUFDO0lBRU8seUNBQXlDLENBQUMsUUFBYTs7UUFDN0QsTUFBTSxlQUFlLEdBQUcsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQSxNQUFBLFFBQVEsQ0FBQyxXQUFXLDBDQUFFLG9CQUFvQixJQUFHLEdBQUcsRUFBRTtZQUNwRCxlQUFlLENBQUMsSUFBSSxDQUFDLDREQUE0RCxDQUFDLENBQUM7U0FDcEY7UUFDRCxJQUFJLENBQUEsTUFBQSxNQUFBLFFBQVEsQ0FBQyxnQkFBZ0IsMENBQUUsZUFBZSwwQ0FBRSxpQkFBaUIsSUFBRyxHQUFHLEVBQUU7WUFDdkUsZUFBZSxDQUFDLElBQUksQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDO1NBQ3JFO1FBQ0QsT0FBTyxlQUFlLENBQUM7SUFDekIsQ0FBQztJQUVPLGdDQUFnQyxDQUFDLElBQVMsRUFBRSxJQUFTO1FBQzNELHVDQUF1QztRQUN2QyxPQUFPLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsd0JBQXdCO0lBQzVELENBQUM7SUFFTywyQkFBMkIsQ0FBQyxPQUFZO1FBQzlDLE9BQU8sT0FBTyxJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsQ0FBQztJQUNoRCxDQUFDO0lBRU8sa0JBQWtCLENBQUMsVUFBZTtRQUN4QyxPQUFPLFVBQVUsSUFBSSxVQUFVLENBQUMsSUFBSSxJQUFJLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQztJQUN6RSxDQUFDO0lBRU8sb0NBQW9DLENBQUMsUUFBYTtRQUN4RCx5Q0FBeUM7UUFDekMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFhLEVBQUUsRUFBRTs7WUFDM0QsT0FBQSxDQUFBLE1BQUEsUUFBUSxDQUFDLGVBQWUsMENBQUUsY0FBYztpQkFDeEMsTUFBQSxRQUFRLENBQUMsZUFBZSwwQ0FBRSxjQUFjLENBQUE7aUJBQ3hDLE1BQUEsUUFBUSxDQUFDLG9CQUFvQiwwQ0FBRSxjQUFjLENBQUE7aUJBQzdDLE1BQUEsUUFBUSxDQUFDLG1CQUFtQiwwQ0FBRSxjQUFjLENBQUE7aUJBQzVDLE1BQUEsUUFBUSxDQUFDLGlCQUFpQiwwQ0FBRSxjQUFjLENBQUEsSUFBSSxHQUFHLENBQUE7U0FBQSxDQUNsRCxDQUFDO1FBQ0YsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ3ZFLENBQUM7SUFFTyw4QkFBOEIsQ0FBQyxRQUFhOztRQUNsRCxxQ0FBcUM7UUFDckMsT0FBTyxDQUFBLE1BQUEsTUFBQSxRQUFRLENBQUMsaUJBQWlCLDBDQUFFLGlCQUFpQiwwQ0FBRSxjQUFjLEtBQUksR0FBRyxDQUFDO0lBQzlFLENBQUM7SUFFTyw2QkFBNkIsQ0FBQyxRQUFhO1FBQ2pELGtEQUFrRDtRQUNsRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQWEsRUFBRSxFQUFFOztZQUMzRCxPQUFBLENBQUEsTUFBQSxRQUFRLENBQUMsZUFBZSwwQ0FBRSxjQUFjO2lCQUN4QyxNQUFBLFFBQVEsQ0FBQyxlQUFlLDBDQUFFLGNBQWMsQ0FBQSxJQUFJLEdBQUcsQ0FBQTtTQUFBLENBQ2hELENBQUM7UUFDRixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ2xHLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMscUNBQXFDO0lBQzNFLENBQUM7SUFFTyw2Q0FBNkMsQ0FBQyxRQUFhOztRQUNqRSxNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFFM0IsSUFBSSxDQUFBLE1BQUEsTUFBQSxRQUFRLENBQUMsc0JBQXNCLDBDQUFFLG9CQUFvQiwwQ0FBRSxNQUFNLElBQUcsQ0FBQyxFQUFFO1lBQ3JFLGVBQWUsQ0FBQyxJQUFJLENBQUMsNERBQTRELENBQUMsQ0FBQztTQUNwRjtRQUVELElBQUksQ0FBQSxNQUFBLE1BQUEsUUFBUSxDQUFDLGdCQUFnQiwwQ0FBRSxvQkFBb0IsMENBQUUsTUFBTSxJQUFHLENBQUMsRUFBRTtZQUMvRCxlQUFlLENBQUMsSUFBSSxDQUFDLHlEQUF5RCxDQUFDLENBQUM7U0FDakY7UUFFRCxJQUFJLENBQUEsTUFBQSxNQUFBLFFBQVEsQ0FBQyxxQkFBcUIsMENBQUUseUJBQXlCLDBDQUFFLE1BQU0sSUFBRyxDQUFDLEVBQUU7WUFDekUsZUFBZSxDQUFDLElBQUksQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO1NBQ25FO1FBRUQsT0FBTyxlQUFlLENBQUM7SUFDekIsQ0FBQztJQUVPLHFCQUFxQixDQUFDLFVBQWUsRUFBRSxjQUFtQjtRQUNoRSxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDbEIsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQztRQUVoQixJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ25DLEtBQUssSUFBSSxHQUFHLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ3ZDLEtBQUssSUFBSSxHQUFHLENBQUM7U0FDZDtRQUVELElBQUksVUFBVSxJQUFJLENBQUMsVUFBVSxDQUFDLG1CQUFtQixFQUFFO1lBQ2pELFFBQVEsQ0FBQyxJQUFJLENBQUMscUNBQXFDLENBQUMsQ0FBQztZQUNyRCxLQUFLLElBQUksR0FBRyxDQUFDO1NBQ2Q7UUFFRCxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQztJQUN6RCxDQUFDO0lBRU8sK0JBQStCLENBQUMsbUJBQXdCO1FBQzlELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNsQixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDcEIsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDO1FBRWhCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEVBQUU7WUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ25DLEtBQUssSUFBSSxHQUFHLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLEVBQUU7WUFDbkMsUUFBUSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ3JDLEtBQUssSUFBSSxHQUFHLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxtQkFBbUIsRUFBRTtZQUM1QyxNQUFNLENBQUMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLENBQUM7WUFDNUMsS0FBSyxJQUFJLEdBQUcsQ0FBQztTQUNkO1FBRUQsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUM7SUFDekQsQ0FBQztJQUVPLHdCQUF3QixDQUFDLG1CQUF3QztRQUN2RSxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDbEIsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQztRQUVoQixJQUFJLENBQUMsbUJBQW1CLEVBQUU7WUFDeEIsTUFBTSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1lBQzVDLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQztTQUN2QztRQUVELE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxtQkFBbUIsQ0FBQztRQUN4RCxNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7UUFFekMsSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1lBQzdDLEtBQUssSUFBSSxHQUFHLENBQUM7U0FDZDtRQUVELElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNiLFFBQVEsQ0FBQyxJQUFJLENBQUMsNkNBQTZDLENBQUMsQ0FBQztZQUM3RCxLQUFLLElBQUksR0FBRyxDQUFDO1NBQ2Q7UUFFRCw0QkFBNEI7UUFDNUIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksS0FBSyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFO1lBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsb0NBQW9DLENBQUMsQ0FBQztZQUNsRCxLQUFLLElBQUksR0FBRyxDQUFDO1NBQ2Q7UUFFRCxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQztJQUN6RCxDQUFDO0lBRU8saUJBQWlCLENBQUMsVUFBZSxFQUFFLGNBQW1CLEVBQUUsbUJBQXdCO1FBQ3RGLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUVuQixJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ2xDLE9BQU8sQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztTQUN2QztRQUVELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxtQkFBbUIsRUFBRTtZQUM1QyxPQUFPLENBQUMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLENBQUM7U0FDOUM7UUFFRCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEdBQUcsR0FBRyxFQUFFO1lBQzNDLE9BQU8sQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQztTQUMxQztRQUVELElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLG9CQUFvQixHQUFHLElBQUksRUFBRTtZQUN2RCxPQUFPLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxDQUFDLENBQUM7U0FDbEQ7UUFFRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBRU8sa0JBQWtCLENBQUMsT0FBaUI7UUFDMUMsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUM7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUN2QyxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQztZQUFFLE9BQU8sUUFBUSxDQUFDO1FBQ3pDLElBQUksT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDO1lBQUUsT0FBTyxNQUFNLENBQUM7UUFDdkMsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUVPLGtCQUFrQixDQUFDLE9BQWlCO1FBQzFDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRU8sMEJBQTBCLENBQUMsT0FBaUI7UUFDbEQsTUFBTSxVQUFVLEdBQUc7WUFDakIsMkNBQTJDO1lBQzNDLHFDQUFxQztZQUNyQyw2Q0FBNkM7U0FDOUMsQ0FBQztRQUVGLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQzdDLFVBQVUsQ0FBQyxJQUFJLENBQUMsNkNBQTZDLENBQUMsQ0FBQztTQUNoRTtRQUVELElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQywwQkFBMEIsQ0FBQyxFQUFFO1lBQ2hELFVBQVUsQ0FBQyxJQUFJLENBQUMsbUNBQW1DLENBQUMsQ0FBQztTQUN0RDtRQUVELE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFFTyx3QkFBd0IsQ0FBQyxPQUFpQjtRQUNoRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFFbEIsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLGtDQUFrQyxDQUFDLEVBQUU7WUFDeEQsTUFBTSxDQUFDLElBQUksQ0FBQyxpRUFBaUUsQ0FBQyxDQUFDO1NBQ2hGO1FBRUQsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLDBCQUEwQixDQUFDLEVBQUU7WUFDaEQsTUFBTSxDQUFDLElBQUksQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO1NBQ3RFO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVPLDhCQUE4QjtRQUNwQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUM5RSxNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFFM0IsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxFQUFFO1lBQ3ZELGVBQWUsQ0FBQyxJQUFJLENBQUMsc0RBQXNELENBQUMsQ0FBQztTQUM5RTtRQUVELElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksR0FBRyxHQUFHLEVBQUU7WUFDOUMsZUFBZSxDQUFDLElBQUksQ0FBQyxpREFBaUQsQ0FBQyxDQUFDO1NBQ3pFO1FBRUQsT0FBTyxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBQzFELENBQUM7SUFFTywyQkFBMkIsQ0FBQyxVQUFlLEVBQUUsY0FBbUIsRUFBRSxtQkFBd0I7UUFDaEcsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsd0NBQXdDO1FBQzVELE1BQU0sZUFBZSxHQUFHO1lBQ3RCLDRDQUE0QztZQUM1Qyw2Q0FBNkM7WUFDN0Msd0NBQXdDO1NBQ3pDLENBQUM7UUFFRixPQUFPLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDM0QsQ0FBQztJQUVPLGlDQUFpQztRQUN2QyxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUM7UUFDbEIsTUFBTSxlQUFlLEdBQUc7WUFDdEIsMENBQTBDO1lBQzFDLDZDQUE2QztZQUM3QyxnQ0FBZ0M7U0FDakMsQ0FBQztRQUVGLE9BQU8sRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUMxRCxDQUFDO0lBRU8sb0NBQW9DO1FBQzFDLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLHNEQUFzRDtRQUN6RSxNQUFNLGVBQWUsR0FBRztZQUN0QixtQ0FBbUM7WUFDbkMscUNBQXFDO1lBQ3JDLG9DQUFvQztTQUNyQyxDQUFDO1FBRUYsT0FBTyxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQzNELENBQUM7SUFFRCxpRUFBaUU7SUFFakU7O09BRUc7SUFDSywrQkFBK0IsQ0FBQyxjQUFtQjtRQUN6RCxNQUFNLFdBQVcsR0FBRyxDQUFBLGNBQWMsYUFBZCxjQUFjLHVCQUFkLGNBQWMsQ0FBRSxXQUFXLEtBQUksRUFBRSxDQUFDO1FBQ3RELE1BQU0sVUFBVSxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFRLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUV4RixPQUFPO1lBQ0wsZUFBZSxFQUFFO2dCQUNmLGNBQWMsRUFBRSxVQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHO2dCQUNoRCxhQUFhLEVBQUUsVUFBVSxDQUFDLElBQUk7Z0JBQzlCLHNCQUFzQixFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDekQsUUFBUSxFQUFFLEdBQUc7b0JBQ2IsS0FBSyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFRLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTTtpQkFDckUsQ0FBQyxDQUFDO2FBQ0o7WUFDRCxvQkFBb0IsRUFBRSxVQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxpREFBaUQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1NBQ3JHLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSyw0QkFBNEIsQ0FBQyxjQUFtQixFQUFFLG1CQUF3QjtRQUNoRixNQUFNLFdBQVcsR0FBRyxDQUFBLGNBQWMsYUFBZCxjQUFjLHVCQUFkLGNBQWMsQ0FBRSxXQUFXLEtBQUksRUFBRSxDQUFDO1FBQ3RELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRTlDLE9BQU87WUFDTCxlQUFlLEVBQUU7Z0JBQ2YsY0FBYyxFQUFFLEdBQUc7Z0JBQ25CLGFBQWE7Z0JBQ2IsaUJBQWlCLEVBQUUsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRzthQUN2RDtZQUNELG9CQUFvQixFQUFFLENBQUMsNERBQTRELENBQUM7U0FDckYsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNLLDhCQUE4QixDQUFDLGNBQW1CO1FBQ3hELE1BQU0sV0FBVyxHQUFHLENBQUEsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFFLFdBQVcsS0FBSSxFQUFFLENBQUM7UUFFdEQsT0FBTztZQUNMLG9CQUFvQixFQUFFO2dCQUNwQixjQUFjLEVBQUUsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRztnQkFDbEQscUJBQXFCLEVBQUUsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRzthQUMzRDtZQUNELHlCQUF5QixFQUFFLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGlEQUFpRCxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7U0FDN0csQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNLLDBCQUEwQixDQUFDLGNBQW1CLEVBQUUsbUJBQXdCO1FBQzlFLE1BQU0sV0FBVyxHQUFHLENBQUEsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFFLFdBQVcsS0FBSSxFQUFFLENBQUM7UUFFdEQsT0FBTztZQUNMLG1CQUFtQixFQUFFO2dCQUNuQixjQUFjLEVBQUUsSUFBSTtnQkFDcEIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLDJCQUEyQixDQUFDLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQyxtQkFBbUIsQ0FBQztnQkFDMUcsdUJBQXVCLEVBQUUsSUFBSTthQUM5QjtZQUNELHdCQUF3QixFQUFFLENBQUMsMERBQTBELENBQUM7U0FDdkYsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNLLHNCQUFzQixDQUFDLGNBQW1CO1FBQ2hELE1BQU0sV0FBVyxHQUFHLENBQUEsY0FBYyxhQUFkLGNBQWMsdUJBQWQsY0FBYyxDQUFFLFdBQVcsS0FBSSxFQUFFLENBQUM7UUFDdEQsTUFBTSxnQkFBZ0IsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBUSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRS9GLE9BQU87WUFDTCxpQkFBaUIsRUFBRTtnQkFDakIsY0FBYyxFQUFFLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7Z0JBQzdGLGNBQWMsRUFBRSxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMzRixnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQzthQUM1RTtZQUNELHNCQUFzQixFQUFFLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3BFLENBQUMsc0RBQXNELENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtTQUNoRSxDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ0ssMkJBQTJCLENBQUMsV0FBa0IsRUFBRSxnQkFBcUM7UUFDM0YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQyxnQkFBZ0I7WUFBRSxPQUFPLEdBQUcsQ0FBQztRQUV6RCxNQUFNLFlBQVksR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1lBQ25ELElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CO2dCQUFFLE9BQU8sR0FBRyxDQUFDO1lBRXpDLE1BQU0sU0FBUyxHQUFHLENBQ2hCLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLElBQUksR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUM7Z0JBQzlELElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7Z0JBQ2hFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7Z0JBQ2hFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FDN0QsR0FBRyxDQUFDLENBQUM7WUFFTixPQUFPLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLHdDQUF3QztRQUN4RSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFTixPQUFPLFlBQVksR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDO0lBQzNDLENBQUM7SUFFRDs7T0FFRztJQUNLLGdCQUFnQjtRQUN0QixNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLDZCQUE2QjtRQUUzRCxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7WUFBRSxPQUFPLFFBQVEsQ0FBQztRQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7WUFBRSxPQUFPLFFBQVEsQ0FBQztRQUM5QyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUU7WUFBRSxPQUFPLFFBQVEsQ0FBQztRQUMvQyxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRUQsMkNBQTJDO0lBRTNDOztPQUVHO0lBQ0gscUJBQXFCO1FBQ25CLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7T0FFRztJQUNILFlBQVksQ0FBQyxTQUFnRDtRQUMzRCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsU0FBUyxFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxVQUFVO1FBQ1IsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxlQUFlLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxZQUFZO1FBQ1YsSUFBSSxDQUFDLGtCQUFrQixHQUFHO1lBQ3hCLGFBQWEsRUFBRSxDQUFDO1lBQ2hCLG9CQUFvQixFQUFFLENBQUM7WUFDdkIsWUFBWSxFQUFFLENBQUM7WUFDZixTQUFTLEVBQUUsQ0FBQztTQUNiLENBQUM7UUFDRixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCw0REFBNEQ7SUFFcEQsNkJBQTZCO1FBQ25DLE9BQU87WUFDTCxnQkFBZ0IsRUFBRSxFQUFFLGVBQWUsRUFBRSxHQUFHLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxFQUFFO1lBQ3RFLGNBQWMsRUFBRSxFQUFFLGVBQWUsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRTtZQUMxRCxnQkFBZ0IsRUFBRSxFQUFFLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtZQUMvQyxxQkFBcUIsRUFBRSxFQUFFLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtZQUNsRCxvQkFBb0IsRUFBRSxFQUFFLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtZQUNwRCxpQkFBaUIsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtZQUNoRCxpQkFBaUIsRUFBRSxHQUFHO1lBQ3RCLFdBQVcsRUFBRSxHQUFHO1lBQ2hCLGVBQWUsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLDhCQUE4QixDQUFDO1lBQ3BHLFVBQVUsRUFBRSxHQUFHO1lBQ2YsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO1NBQ3BDLENBQUM7SUFDSixDQUFDO0lBRU8sc0JBQXNCLENBQUMsV0FBZ0IsRUFBRSxtQkFBd0I7UUFDdkUsSUFBSTtZQUNGLHFEQUFxRDtZQUNyRCxNQUFNLEVBQUUsd0JBQXdCLEVBQUUsR0FBRyxPQUFPLENBQUMscUNBQXFDLENBQUMsQ0FBQztZQUVwRixNQUFNLGlCQUFpQixHQUFHLHdCQUF3QixDQUFDLHlCQUF5QixDQUMxRSxDQUFBLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxJQUFJLEtBQUksU0FBUyxFQUM5QixtQkFBbUIsQ0FBQyxtQkFBbUIsRUFDdkM7Z0JBQ0UsVUFBVSxFQUFFLG1CQUFtQixDQUFDLFVBQVU7Z0JBQzFDLFVBQVUsRUFBRSxtQkFBbUIsQ0FBQyxVQUFVO2FBQzNDLENBQ0YsQ0FBQztZQUVGLE9BQU87Z0JBQ0wsZUFBZSxFQUFFLGlCQUFpQixDQUFDLGVBQWU7Z0JBQ2xELHFCQUFxQixFQUFFLGlCQUFpQixDQUFDLHFCQUFxQjtnQkFDOUQsc0JBQXNCLEVBQUUsaUJBQWlCLENBQUMsc0JBQXNCO2dCQUNoRSxlQUFlLEVBQUUsaUJBQWlCLENBQUMsZUFBZTtnQkFDbEQsZUFBZSxFQUFFLGlCQUFpQixDQUFDLGVBQWU7Z0JBQ2xELHNCQUFzQixFQUFFLGlCQUFpQixDQUFDLHNCQUFzQjtnQkFDaEUscUJBQXFCLEVBQUUsaUJBQWlCLENBQUMscUJBQXFCO2dCQUM5RCxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQyxpQkFBaUI7YUFDdkQsQ0FBQztTQUNIO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxrQ0FBa0MsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUM3RCxPQUFPLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRSxxQkFBcUIsRUFBRSxHQUFHLEVBQUUsQ0FBQztTQUM3RDtJQUNILENBQUM7SUFFTyxvQkFBb0IsQ0FBQyxXQUFnQjtRQUMzQyxJQUFJO1lBQ0YsbURBQW1EO1lBQ25ELE1BQU0sRUFBRSx3QkFBd0IsRUFBRSxHQUFHLE9BQU8sQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO1lBRXBGLE1BQU0scUJBQXFCLEdBQUcsd0JBQXdCLENBQUMsNkJBQTZCLENBQ2xGLENBQUEsV0FBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLElBQUksS0FBSSxTQUFTLEVBQzlCLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxlQUFlLENBQUMsRUFDeEUsQ0FBQyxDQUNGLENBQUM7WUFFRixPQUFPO2dCQUNMLGVBQWUsRUFBRSxxQkFBcUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUc7Z0JBQzdELFdBQVcsRUFBRSxxQkFBcUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQzdDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxHQUFHLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRztnQkFDM0cscUJBQXFCLEVBQUUscUJBQXFCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDdkQsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJO29CQUNkLFdBQVcsRUFBRSxHQUFHLENBQUMsV0FBVztvQkFDNUIsZUFBZSxFQUFFLEdBQUcsQ0FBQyxlQUFlO29CQUNwQyxpQkFBaUIsRUFBRSxHQUFHLENBQUMsaUJBQWlCO2lCQUN6QyxDQUFDLENBQUM7YUFDSixDQUFDO1NBQ0g7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzNELE9BQU8sRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQztTQUNuRDtJQUNILENBQUM7SUFFTyx5QkFBeUIsQ0FBQyxXQUFnQixFQUFFLG1CQUF3QjtRQUMxRSxJQUFJO1lBQ0YsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDOUMsTUFBTSxjQUFjLEdBQUcsQ0FBQSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsV0FBVyxLQUFJLEVBQUUsQ0FBQztZQUV0RCxNQUFNLG9CQUFvQixHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQ2hGLE1BQU0saUJBQWlCLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7WUFFNUYsT0FBTztnQkFDTCxvQkFBb0I7Z0JBQ3BCLGlCQUFpQjtnQkFDakIsYUFBYTtnQkFDYixjQUFjO2dCQUNkLHVCQUF1QixFQUFFLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxDQUFDO29CQUNuRCxDQUFDLEdBQUcsV0FBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLElBQUksbUJBQW1CLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDMUQsQ0FBQyxzQ0FBc0MsYUFBYSxFQUFFLENBQUM7YUFDMUQsQ0FBQztTQUNIO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNoRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxDQUFDO1NBQ3BFO0lBQ0gsQ0FBQztJQUVPLDJCQUEyQixDQUFDLFdBQWdCO1FBQ2xELElBQUk7WUFDRixNQUFNLG1CQUFtQixHQUFHLENBQUEsV0FBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLG1CQUFtQixLQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDO1lBQ3BILE1BQU0sa0JBQWtCLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBSSxHQUFjLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRWpILE9BQU87Z0JBQ0wsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsa0JBQWtCLENBQUM7Z0JBQ25ELGdCQUFnQixFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBYSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQWEsQ0FBQztnQkFDL0ksb0JBQW9CLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxrQkFBa0IsRUFBRSxvQkFBb0IsQ0FBQzthQUN0RixDQUFDO1NBQ0g7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2xFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxHQUFHLEVBQUUsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUM7U0FDM0Q7SUFDSCxDQUFDO0lBRU8sdUJBQXVCLENBQUMsV0FBZ0IsRUFBRSxtQkFBd0I7UUFDeEUsSUFBSTtZQUNGLE1BQU0sVUFBVSxHQUFHLG1CQUFtQixDQUFDLFVBQVUsQ0FBQztZQUNsRCxNQUFNLFVBQVUsR0FBRyxtQkFBbUIsQ0FBQyxVQUFVLENBQUM7WUFDbEQsTUFBTSxtQkFBbUIsR0FBRyxtQkFBbUIsQ0FBQyxtQkFBbUIsQ0FBQztZQUVwRSxtRUFBbUU7WUFDbkUsTUFBTSxxQkFBcUIsR0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQywwQkFBMEI7WUFFckYsT0FBTztnQkFDTCxxQkFBcUIsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxxQkFBcUIsQ0FBQztnQkFDekQsbUJBQW1CLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUc7Z0JBQzNDLGlCQUFpQixFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHO2dCQUN6QyxtQkFBbUIsRUFBRSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUM7Z0JBQ3pDLDJCQUEyQixFQUFFLENBQUMsaUNBQWlDLEVBQUUsK0JBQStCLENBQUM7YUFDbEcsQ0FBQztTQUNIO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxtQ0FBbUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUM5RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxFQUFFLG1CQUFtQixFQUFFLEdBQUcsRUFBRSxDQUFDO1NBQ2pFO0lBQ0gsQ0FBQztJQUVPLG1CQUFtQixDQUFDLFdBQWdCO1FBQzFDLElBQUk7WUFDRixNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDbEIsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQztZQUVuQixJQUFJLENBQUMsV0FBVyxFQUFFO2dCQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7Z0JBQ3BDLE9BQU8sR0FBRyxLQUFLLENBQUM7YUFDakI7WUFFRCxJQUFJLFdBQVcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUU7Z0JBQ3BDLFFBQVEsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQzthQUN2QztZQUVELElBQUksV0FBVyxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixFQUFFO2dCQUNuRCxRQUFRLENBQUMsSUFBSSxDQUFDLHNDQUFzQyxDQUFDLENBQUM7YUFDdkQ7WUFFRCxPQUFPO2dCQUNMLE9BQU87Z0JBQ1AsTUFBTTtnQkFDTixRQUFRO2dCQUNSLGVBQWUsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRzthQUNyQyxDQUFDO1NBQ0g7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLDJCQUEyQixFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3RELE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUM7U0FDN0Y7SUFDSCxDQUFDO0lBRU8saUNBQWlDLENBQUMsUUFBYTs7UUFDckQsTUFBTSxNQUFNLEdBQUc7WUFDYixDQUFBLE1BQUEsUUFBUSxDQUFDLGdCQUFnQiwwQ0FBRSxlQUFlLEtBQUksR0FBRztZQUNqRCxDQUFBLE1BQUEsUUFBUSxDQUFDLGNBQWMsMENBQUUsV0FBVyxLQUFJLEdBQUc7WUFDM0MsQ0FBQSxNQUFBLFFBQVEsQ0FBQyxnQkFBZ0IsMENBQUUsb0JBQW9CLEtBQUksR0FBRztZQUN0RCxDQUFBLE1BQUEsUUFBUSxDQUFDLHFCQUFxQiwwQ0FBRSxrQkFBa0IsS0FBSSxHQUFHO1lBQ3pELENBQUEsTUFBQSxRQUFRLENBQUMsb0JBQW9CLDBDQUFFLHFCQUFxQixLQUFJLEdBQUc7U0FDNUQsQ0FBQztRQUVGLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUN2RSxDQUFDO0lBRU8sMkJBQTJCLENBQUMsUUFBYTs7UUFDL0MsTUFBTSxlQUFlLEdBQUcsQ0FBQSxNQUFBLFFBQVEsQ0FBQyxpQkFBaUIsMENBQUUsZUFBZSxLQUFJLEdBQUcsQ0FBQztRQUMzRSxNQUFNLGFBQWEsR0FBRyxDQUFBLE1BQUEsUUFBUSxDQUFDLGdCQUFnQiwwQ0FBRSxxQkFBcUIsS0FBSSxHQUFHLENBQUM7UUFFOUUsT0FBTyxDQUFDLGVBQWUsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVPLDBCQUEwQixDQUFDLFFBQWE7O1FBQzlDLE1BQU0sTUFBTSxHQUFHO1lBQ2IsQ0FBQSxNQUFBLFFBQVEsQ0FBQyxnQkFBZ0IsMENBQUUsZUFBZSxLQUFJLEdBQUc7WUFDakQsQ0FBQSxNQUFBLFFBQVEsQ0FBQyxjQUFjLDBDQUFFLGVBQWUsS0FBSSxHQUFHO1lBQy9DLENBQUEsTUFBQSxRQUFRLENBQUMsZ0JBQWdCLDBDQUFFLG9CQUFvQixLQUFJLEdBQUc7WUFDdEQsQ0FBQSxNQUFBLFFBQVEsQ0FBQyxxQkFBcUIsMENBQUUsa0JBQWtCLEtBQUksR0FBRztZQUN6RCxDQUFBLE1BQUEsUUFBUSxDQUFDLG9CQUFvQiwwQ0FBRSxxQkFBcUIsS0FBSSxHQUFHO1NBQzVELENBQUM7UUFFRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQzlFLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFFdEcsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxxQ0FBcUM7SUFDM0UsQ0FBQztJQUVPLDBDQUEwQyxDQUFDLFFBQWE7O1FBQzlELE1BQU0sZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUUzQixJQUFJLENBQUEsTUFBQSxRQUFRLENBQUMsZ0JBQWdCLDBDQUFFLGVBQWUsSUFBRyxHQUFHLEVBQUU7WUFDcEQsZUFBZSxDQUFDLElBQUksQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO1NBQ2hGO1FBRUQsSUFBSSxDQUFBLE1BQUEsUUFBUSxDQUFDLGNBQWMsMENBQUUsZUFBZSxJQUFHLEdBQUcsRUFBRTtZQUNsRCxlQUFlLENBQUMsSUFBSSxDQUFDLDJEQUEyRCxDQUFDLENBQUM7U0FDbkY7UUFFRCxJQUFJLENBQUEsTUFBQSxRQUFRLENBQUMsZ0JBQWdCLDBDQUFFLG9CQUFvQixJQUFHLEdBQUcsRUFBRTtZQUN6RCxlQUFlLENBQUMsSUFBSSxDQUFDLG1EQUFtRCxDQUFDLENBQUM7U0FDM0U7UUFFRCxJQUFJLENBQUEsTUFBQSxRQUFRLENBQUMscUJBQXFCLDBDQUFFLGtCQUFrQixJQUFHLEdBQUcsRUFBRTtZQUM1RCxlQUFlLENBQUMsSUFBSSxDQUFDLHdDQUF3QyxDQUFDLENBQUM7U0FDaEU7UUFFRCxPQUFPLGVBQWUsQ0FBQztJQUN6QixDQUFDO0lBRUQsaUZBQWlGO0lBRWpGOztPQUVHO0lBQ0ssS0FBSyxDQUFDLDZCQUE2QixDQUN6QyxVQUFlLEVBQ2YsY0FBbUIsRUFDbkIsV0FBZ0IsRUFDaEIsbUJBQXdCO1FBRXhCLElBQUk7WUFDRixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSwyQ0FBMkMsQ0FBQyxDQUFDO1lBRTlELE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLDZCQUE2QixDQUFDLDhCQUE4QixDQUNwRixVQUFVLEVBQ1YsY0FBYyxFQUNkLFdBQVcsRUFDWCxtQkFBbUIsQ0FDcEIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLCtEQUErRCxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDaEgsT0FBTyxNQUFNLENBQUM7U0FDZjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQywrQkFBK0IsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUN6RCxPQUFPLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxDQUFDO1NBQ2hEO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLHFCQUFxQixDQUNqQyxVQUFlLEVBQ2YsY0FBbUIsRUFDbkIsV0FBZ0IsRUFDaEIsbUJBQXdCO1FBRXhCLElBQUk7WUFDRixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxtQ0FBbUMsQ0FBQyxDQUFDO1lBRXRELE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLHFCQUFxQixDQUFDLHNCQUFzQixDQUNwRSxVQUFVLEVBQ1YsY0FBYyxFQUNkLFdBQVcsRUFDWCxtQkFBbUIsQ0FDcEIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLHVEQUF1RCxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEcsT0FBTyxNQUFNLENBQUM7U0FDZjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNqRCxPQUFPLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1NBQ3hDO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLG9DQUFvQyxDQUNoRCxVQUFlLEVBQ2YsY0FBbUIsRUFDbkIsV0FBZ0IsRUFDaEIsbUJBQXdCO1FBRXhCLElBQUk7WUFDRixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxtREFBbUQsQ0FBQyxDQUFDO1lBRXRFLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLG9DQUFvQyxDQUFDLHFDQUFxQyxDQUNsRyxVQUFVLEVBQ1YsY0FBYyxFQUNkLFdBQVcsRUFDWCxtQkFBbUIsQ0FDcEIsQ0FBQztZQUVGLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLHVFQUF1RSxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEgsT0FBTyxNQUFNLENBQUM7U0FDZjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxzQ0FBc0MsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNoRSxPQUFPLElBQUksQ0FBQyx1Q0FBdUMsRUFBRSxDQUFDO1NBQ3ZEO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ssS0FBSyxDQUFDLHNDQUFzQyxDQUNsRCxVQUFlLEVBQ2YsY0FBbUIsRUFDbkIsV0FBZ0IsRUFDaEIsbUJBQXdCO1FBRXhCLElBQUk7WUFDRixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxvREFBb0QsQ0FBQyxDQUFDO1lBRXZFLG1EQUFtRDtZQUNuRCxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLGVBQWUsQ0FBQyxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQztnQkFDdEUsSUFBSSxDQUFDLDZCQUE2QixDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixDQUFDO2dCQUNoRyxJQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsbUJBQW1CLENBQUM7Z0JBQ3hGLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQyxVQUFVLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQzthQUN4RyxDQUFDLENBQUM7WUFFSCwrQkFBK0I7WUFDL0IsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLGdCQUFnQixDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUMsVUFBVSxHQUFHLGVBQWUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFL0cscURBQXFEO1lBQ3JELE1BQU0sWUFBWSxHQUNoQixpQkFBaUIsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUN4QyxpQkFBaUIsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUNuQyxpQkFBaUIsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1lBRTdDLE1BQU0sTUFBTSxHQUF5QztnQkFDbkQsc0JBQXNCLEVBQUUsZ0JBQWdCO2dCQUN4QyxjQUFjLEVBQUUsUUFBUTtnQkFDeEIsNkJBQTZCLEVBQUUsZUFBZTtnQkFDOUMsaUJBQWlCO2dCQUNqQixZQUFZO2dCQUNaLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQyxDQUFDO1lBRUYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsZ0ZBQWdGLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakksT0FBTyxNQUFNLENBQUM7U0FDZjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyx3Q0FBd0MsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNsRSxPQUFPLElBQUksQ0FBQyx3Q0FBd0MsRUFBRSxDQUFDO1NBQ3hEO0lBQ0gsQ0FBQztJQUVELDhEQUE4RDtJQUV0RCxnQ0FBZ0M7UUFDdEMsT0FBTztZQUNMLGdCQUFnQixFQUFFO2dCQUNoQixrQkFBa0IsRUFBRSxJQUFJO2dCQUN4QiwwQkFBMEIsRUFBRSxJQUFJO2dCQUNoQyx1QkFBdUIsRUFBRSx5Q0FBeUM7Z0JBQ2xFLDhCQUE4QixFQUFFLElBQUk7Z0JBQ3BDLDhCQUE4QixFQUFFLDhDQUE4QzthQUMvRTtZQUNELG9CQUFvQixFQUFFO2dCQUNwQix1QkFBdUIsRUFBRSxJQUFJO2dCQUM3Qiw2QkFBNkIsRUFBRSxJQUFJO2dCQUNuQyx1QkFBdUIsRUFBRSxJQUFJO2dCQUM3QixpQ0FBaUMsRUFBRSxJQUFJO2FBQ3hDO1lBQ0QsaUJBQWlCLEVBQUU7Z0JBQ2pCLHVCQUF1QixFQUFFLElBQUk7Z0JBQzdCLDRCQUE0QixFQUFFLElBQUk7Z0JBQ2xDLDJCQUEyQixFQUFFLElBQUk7Z0JBQ2pDLDZCQUE2QixFQUFFLElBQUk7YUFDcEM7WUFDRCxzQkFBc0IsRUFBRTtnQkFDdEIsbUJBQW1CLEVBQUUsSUFBSTtnQkFDekIsNEJBQTRCLEVBQUUsMkNBQTJDO2dCQUN6RSw0QkFBNEIsRUFBRSxJQUFJO2dCQUNsQyx1QkFBdUIsRUFBRSxJQUFJO2FBQzlCO1lBQ0QsVUFBVSxFQUFFLElBQUk7WUFDaEIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO1NBQ3BDLENBQUM7SUFDSixDQUFDO0lBRU8sd0JBQXdCO1FBQzlCLE9BQU87WUFDTCxrQkFBa0IsRUFBRTtnQkFDbEIsZ0JBQWdCLEVBQUUsSUFBSTtnQkFDdEIscUNBQXFDLEVBQUUsQ0FBQyx1REFBdUQsQ0FBQztnQkFDaEcseUJBQXlCLEVBQUUsQ0FBQyxvREFBb0QsQ0FBQztnQkFDakYsNEJBQTRCLEVBQUUsQ0FBQyxvQ0FBb0MsQ0FBQztnQkFDcEUsdUJBQXVCLEVBQUUsQ0FBQyxnREFBZ0QsQ0FBQzthQUM1RTtZQUNELHVCQUF1QixFQUFFO2dCQUN2QixvQkFBb0IsRUFBRSxJQUFJO2dCQUMxQiwyQkFBMkIsRUFBRSxFQUFFO2dCQUMvQiwyQkFBMkIsRUFBRSxFQUFFO2dCQUMvQix3QkFBd0IsRUFBRSxDQUFDLDhCQUE4QixDQUFDO2FBQzNEO1lBQ0QsYUFBYSxFQUFFO2dCQUNiLGFBQWEsRUFBRSxJQUFJO2dCQUNuQix1QkFBdUIsRUFBRSxJQUFJO2dCQUM3Qix5QkFBeUIsRUFBRSxJQUFJO2dCQUMvQixtQkFBbUIsRUFBRSxHQUFHO2dCQUN4QiwyQkFBMkIsRUFBRSxDQUFDLHFDQUFxQyxDQUFDO2FBQ3JFO1lBQ0Qsc0JBQXNCLEVBQUU7Z0JBQ3RCLGdCQUFnQixFQUFFLElBQUk7Z0JBQ3RCLHVCQUF1QixFQUFFLG9EQUFvRDtnQkFDN0UsOEJBQThCLEVBQUUsSUFBSTtnQkFDcEMsd0JBQXdCLEVBQUUsQ0FBQywwQ0FBMEMsQ0FBQzthQUN2RTtZQUNELFVBQVUsRUFBRSxJQUFJO1lBQ2hCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtTQUNwQyxDQUFDO0lBQ0osQ0FBQztJQUVPLHVDQUF1QztRQUM3QyxPQUFPO1lBQ0wsZUFBZSxFQUFFO2dCQUNmLHFCQUFxQixFQUFFLElBQUk7Z0JBQzNCLGtCQUFrQixFQUFFO29CQUNsQixvQkFBb0IsRUFBRSxHQUFHO29CQUN6QixtQkFBbUIsRUFBRSxHQUFHO29CQUN4QixjQUFjLEVBQUUsR0FBRztvQkFDbkIsZUFBZSxFQUFFLEdBQUc7aUJBQ3JCO2dCQUNELG1CQUFtQixFQUFFO29CQUNuQixrQkFBa0IsRUFBRSxJQUFJO29CQUN4Qix1QkFBdUIsRUFBRSxHQUFHO29CQUM1QixvQkFBb0IsRUFBRSxHQUFHO29CQUN6QixvQkFBb0IsRUFBRSxJQUFJO2lCQUMzQjtnQkFDRCxrQkFBa0IsRUFBRTtvQkFDbEIsa0JBQWtCLEVBQUUsR0FBRztvQkFDdkIsMEJBQTBCLEVBQUUsSUFBSTtvQkFDaEMsbUJBQW1CLEVBQUUsR0FBRztpQkFDekI7YUFDRjtZQUNELG1CQUFtQixFQUFFO2dCQUNuQixpQkFBaUIsRUFBRSxFQUFFO2dCQUNyQixlQUFlLEVBQUU7b0JBQ2YsYUFBYSxFQUFFLEdBQUc7b0JBQ2xCLGtCQUFrQixFQUFFLElBQUk7b0JBQ3hCLGVBQWUsRUFBRSxHQUFHO29CQUNwQixlQUFlLEVBQUUsR0FBRztpQkFDckI7Z0JBQ0QsbUJBQW1CLEVBQUUsRUFBRTtnQkFDdkIscUJBQXFCLEVBQUUsSUFBSTthQUM1QjtZQUNELGdCQUFnQixFQUFFO2dCQUNoQiwyQkFBMkIsRUFBRTtvQkFDM0IscUJBQXFCLEVBQUUsR0FBRztvQkFDMUIsbUJBQW1CLEVBQUUsSUFBSTtvQkFDekIsbUJBQW1CLEVBQUUsR0FBRztvQkFDeEIsdUJBQXVCLEVBQUUsSUFBSTtpQkFDOUI7Z0JBQ0QsZUFBZSxFQUFFO29CQUNmLG1CQUFtQixFQUFFLEVBQUU7b0JBQ3ZCLG1CQUFtQixFQUFFLEdBQUc7b0JBQ3hCLGtCQUFrQixFQUFFLEdBQUc7b0JBQ3ZCLGlCQUFpQixFQUFFLElBQUk7aUJBQ3hCO2dCQUNELG1CQUFtQixFQUFFO29CQUNuQixvQkFBb0IsRUFBRSxHQUFHO29CQUN6QixvQkFBb0IsRUFBRSxJQUFJO29CQUMxQix3QkFBd0IsRUFBRSxHQUFHO29CQUM3QixzQkFBc0IsRUFBRSxHQUFHO2lCQUM1QjthQUNGO1lBQ0QscUJBQXFCLEVBQUU7Z0JBQ3JCLGtCQUFrQixFQUFFO29CQUNsQixpQkFBaUIsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtvQkFDL0MsY0FBYyxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFO29CQUM5QyxhQUFhLEVBQUUsRUFBRSxXQUFXLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUU7b0JBQ3BELGdCQUFnQixFQUFFLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO2lCQUNwRDtnQkFDRCxtQkFBbUIsRUFBRTtvQkFDbkIsbUJBQW1CLEVBQUUsR0FBRztvQkFDeEIsbUJBQW1CLEVBQUUsSUFBSTtvQkFDekIsbUJBQW1CLEVBQUUsR0FBRztvQkFDeEIsbUJBQW1CLEVBQUUsR0FBRztpQkFDekI7Z0JBQ0Qsa0JBQWtCLEVBQUU7b0JBQ2xCLG1CQUFtQixFQUFFLEdBQUc7b0JBQ3hCLGtCQUFrQixFQUFFLElBQUk7b0JBQ3hCLG1CQUFtQixFQUFFLEdBQUc7b0JBQ3hCLGlCQUFpQixFQUFFLEdBQUc7aUJBQ3ZCO2FBQ0Y7WUFDRCxVQUFVLEVBQUUsSUFBSTtZQUNoQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7U0FDcEMsQ0FBQztJQUNKLENBQUM7SUFFTyx3Q0FBd0M7UUFDOUMsT0FBTztZQUNMLHNCQUFzQixFQUFFLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRTtZQUMvRCxjQUFjLEVBQUUsSUFBSSxDQUFDLHdCQUF3QixFQUFFO1lBQy9DLDZCQUE2QixFQUFFLElBQUksQ0FBQyx1Q0FBdUMsRUFBRTtZQUM3RSxpQkFBaUIsRUFBRSxJQUFJO1lBQ3ZCLFlBQVksRUFBRSxNQUFNO1lBQ3BCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtTQUNwQyxDQUFDO0lBQ0osQ0FBQztDQUNGO0FBM2pERCw4RUEyakRDO0FBRUQsMkNBQTJDO0FBQzlCLFFBQUEsaUNBQWlDLEdBQUcsSUFBSSxpQ0FBaUMsRUFBRSxDQUFDO0FBRXpGLG9EQUFvRDtBQUM3QyxNQUFNLHVDQUF1QyxHQUFHLENBQUMsTUFBOEMsRUFBRSxFQUFFLENBQ3hHLElBQUksaUNBQWlDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFEbkMsUUFBQSx1Q0FBdUMsMkNBQ0oiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9FbnRlcnByaXNlSW50ZWxsaWdlbmNlSW50ZWdyYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbnRlcnByaXNlIEludGVsbGlnZW5jZSBJbnRlZ3JhdGlvbiBTZXJ2aWNlXG4gKiBNYWluIFBhZ2UgUmVzdG9yYXRpb24gLSBUYXNrIDMuOCBJbXBsZW1lbnRhdGlvblxuICogXG4gKiBJbnRlZ3JhdGVzIFJlY2lwZSBJbnRlbGxpZ2VuY2UgU3lzdGVtcyBmcm9tIFBoYXNlIDI4IGFuZCBcbiAqIEluZ3JlZGllbnQgSW50ZWxsaWdlbmNlIFN5c3RlbXMgZnJvbSBQaGFzZSAyNyB3aXRoIHZhbGlkYXRpb24sXG4gKiBzYWZldHkgaW50ZWxsaWdlbmNlLCBhbmQgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9ucy5cbiAqL1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyBSRUNJUEVfQ09NUEFUSUJJTElUWV9JTlRFTExJR0VOQ0UgfSBmcm9tICdAL2NhbGN1bGF0aW9ucy9pbmRleCc7XG4vLyBJbXBvcnQgZnJ1aXQgaW50ZWxsaWdlbmNlIHN5c3RlbXMgc2FmZWx5XG4vLyBOb3RlOiBUaGVzZSByZXByZXNlbnQgdGhlIGJyb2FkZXIgaW5ncmVkaWVudCBpbnRlbGxpZ2VuY2Ugc3lzdGVtcyBmcm9tIFBoYXNlIDI3XG4vLyBOb3RlOiBBbGNoZW15IFR5cGUgSW50ZWxsaWdlbmNlIFN5c3RlbSBpbnRlZ3JhdGlvbiBzaW1wbGlmaWVkIHRvIGF2b2lkIGltcG9ydCBpc3N1ZXNcbmltcG9ydCB0eXBlIHsgRWxlbWVudGFsUHJvcGVydGllcywgWm9kaWFjU2lnbiwgTHVuYXJQaGFzZSB9IGZyb20gJ0AvdHlwZXMvYWxjaGVteSc7XG5cbi8vID09PT09PT09PT0gQURWQU5DRUQgSU5URUxMSUdFTkNFIFNZU1RFTVMgSU1QT1JUUyA9PT09PT09PT09XG4vLyBQaGFzZSAyRDogQWR2YW5jZWQgSW50ZWxsaWdlbmNlIFN5c3RlbXMgSW50ZWdyYXRpb25cbmltcG9ydCB7IFxuICBQcmVkaWN0aXZlSW50ZWxsaWdlbmNlUmVzdWx0LFxuICBNTEludGVsbGlnZW5jZVJlc3VsdCxcbiAgQWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2VSZXN1bHQsXG4gIEludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZVJlc3VsdFxufSBmcm9tICdAL3R5cGVzL2FkdmFuY2VkSW50ZWxsaWdlbmNlJztcbmltcG9ydCB7IFxuICBQcmVkaWN0aXZlSW50ZWxsaWdlbmNlU2VydmljZSxcbiAgY3JlYXRlUHJlZGljdGl2ZUludGVsbGlnZW5jZVNlcnZpY2UgXG59IGZyb20gJy4vUHJlZGljdGl2ZUludGVsbGlnZW5jZVNlcnZpY2UnO1xuaW1wb3J0IHsgXG4gIE1MSW50ZWxsaWdlbmNlU2VydmljZSxcbiAgY3JlYXRlTUxJbnRlbGxpZ2VuY2VTZXJ2aWNlIFxufSBmcm9tICcuL01MSW50ZWxsaWdlbmNlU2VydmljZSc7XG5pbXBvcnQgeyBcbiAgQWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2VTZXJ2aWNlLFxuICBjcmVhdGVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZVNlcnZpY2UgXG59IGZyb20gJy4vQWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2VTZXJ2aWNlJztcblxuLy8gPT09PT09PT09PSBJTlRFUkZBQ0VTID09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRlcnByaXNlSW50ZWxsaWdlbmNlQ29uZmlnIHtcbiAgZW5hYmxlUmVjaXBlSW50ZWxsaWdlbmNlOiBib29sZWFuO1xuICBlbmFibGVJbmdyZWRpZW50SW50ZWxsaWdlbmNlOiBib29sZWFuO1xuICBlbmFibGVDdWlzaW5lSW50ZWxsaWdlbmNlOiBib29sZWFuO1xuICBlbmFibGVWYWxpZGF0aW9uSW50ZWxsaWdlbmNlOiBib29sZWFuO1xuICBlbmFibGVTYWZldHlJbnRlbGxpZ2VuY2U6IGJvb2xlYW47XG4gIGVuYWJsZU9wdGltaXphdGlvblJlY29tbWVuZGF0aW9uczogYm9vbGVhbjtcbiAgLy8gUGhhc2UgMkQ6IEFkdmFuY2VkIEludGVsbGlnZW5jZSBTeXN0ZW1zIEludGVncmF0aW9uXG4gIGVuYWJsZVByZWRpY3RpdmVJbnRlbGxpZ2VuY2U6IGJvb2xlYW47XG4gIGVuYWJsZU1MSW50ZWxsaWdlbmNlOiBib29sZWFuO1xuICBlbmFibGVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZTogYm9vbGVhbjtcbiAgY2FjaGVSZXN1bHRzOiBib29sZWFuO1xuICBsb2dMZXZlbDogJ2RlYnVnJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjaXBlSW50ZWxsaWdlbmNlUmVzdWx0IHtcbiAgY29tcGF0aWJpbGl0eUFuYWx5c2lzOiBhbnk7XG4gIG9wdGltaXphdGlvblNjb3JlOiBudW1iZXI7XG4gIHNhZmV0eVNjb3JlOiBudW1iZXI7XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudEludGVsbGlnZW5jZVJlc3VsdCB7XG4gIGNhdGVnb3JpemF0aW9uQW5hbHlzaXM6IGFueTtcbiAgc2Vhc29uYWxBbmFseXNpczogYW55O1xuICBjb21wYXRpYmlsaXR5QW5hbHlzaXM6IGFueTtcbiAgYXN0cm9sb2dpY2FsQW5hbHlzaXM6IGFueTtcbiAgdmFsaWRhdGlvblJlc3VsdHM6IGFueTtcbiAgb3B0aW1pemF0aW9uU2NvcmU6IG51bWJlcjtcbiAgc2FmZXR5U2NvcmU6IG51bWJlcjtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdWlzaW5lSW50ZWxsaWdlbmNlUmVzdWx0IHtcbiAgY3VsdHVyYWxBbmFseXNpczogYW55O1xuICBmdXNpb25BbmFseXNpczogYW55O1xuICBzZWFzb25hbEFuYWx5c2lzOiBhbnk7XG4gIGNvbXBhdGliaWxpdHlBbmFseXNpczogYW55O1xuICBhc3Ryb2xvZ2ljYWxBbmFseXNpczogYW55O1xuICB2YWxpZGF0aW9uUmVzdWx0czogYW55O1xuICBvcHRpbWl6YXRpb25TY29yZTogbnVtYmVyO1xuICBzYWZldHlTY29yZTogbnVtYmVyO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25JbnRlbGxpZ2VuY2VSZXN1bHQge1xuICBkYXRhSW50ZWdyaXR5OiB7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBpc3N1ZXM6IHN0cmluZ1tdO1xuICAgIHdhcm5pbmdzOiBzdHJpbmdbXTtcbiAgfTtcbiAgYXN0cm9sb2dpY2FsQ29uc2lzdGVuY3k6IHtcbiAgICBzY29yZTogbnVtYmVyO1xuICAgIGlzc3Vlczogc3RyaW5nW107XG4gICAgd2FybmluZ3M6IHN0cmluZ1tdO1xuICB9O1xuICBlbGVtZW50YWxIYXJtb255OiB7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBpc3N1ZXM6IHN0cmluZ1tdO1xuICAgIHdhcm5pbmdzOiBzdHJpbmdbXTtcbiAgfTtcbiAgb3ZlcmFsbFZhbGlkYXRpb246IHtcbiAgICBzY29yZTogbnVtYmVyO1xuICAgIHN0YXR1czogJ2V4Y2VsbGVudCcgfCAnZ29vZCcgfCAnZmFpcicgfCAncG9vcic7XG4gICAgY3JpdGljYWxJc3N1ZXM6IHN0cmluZ1tdO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNhZmV0eUludGVsbGlnZW5jZVJlc3VsdCB7XG4gIHJpc2tBc3Nlc3NtZW50OiB7XG4gICAgbGV2ZWw6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgZmFjdG9yczogc3RyaW5nW107XG4gIH07XG4gIGZhbGxiYWNrU3RyYXRlZ2llczogc3RyaW5nW107XG4gIGVycm9yUmVjb3Zlcnk6IHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIHN0cmF0ZWdpZXM6IHN0cmluZ1tdO1xuICB9O1xuICBtb25pdG9yaW5nQWxlcnRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMge1xuICBwZXJmb3JtYW5jZToge1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgICBlc3RpbWF0ZWRJbXBhY3Q6IG51bWJlcjtcbiAgfTtcbiAgYWNjdXJhY3k6IHtcbiAgICBzY29yZTogbnVtYmVyO1xuICAgIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gICAgZXN0aW1hdGVkSW1wYWN0OiBudW1iZXI7XG4gIH07XG4gIHVzZXJFeHBlcmllbmNlOiB7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICAgIGVzdGltYXRlZEltcGFjdDogbnVtYmVyO1xuICB9O1xuICBzeXN0ZW1JbnRlZ3JhdGlvbjoge1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgICBlc3RpbWF0ZWRJbXBhY3Q6IG51bWJlcjtcbiAgfTtcbiAgb3ZlcmFsbE9wdGltaXphdGlvbjoge1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgcHJpb3JpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICAgIGVzdGltYXRlZFZhbHVlOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50ZXJwcmlzZUludGVsbGlnZW5jZUFuYWx5c2lzIHtcbiAgcmVjaXBlSW50ZWxsaWdlbmNlOiBSZWNpcGVJbnRlbGxpZ2VuY2VSZXN1bHQ7XG4gIGluZ3JlZGllbnRJbnRlbGxpZ2VuY2U6IEluZ3JlZGllbnRJbnRlbGxpZ2VuY2VSZXN1bHQ7XG4gIGN1aXNpbmVJbnRlbGxpZ2VuY2U6IEN1aXNpbmVJbnRlbGxpZ2VuY2VSZXN1bHQ7XG4gIHZhbGlkYXRpb25JbnRlbGxpZ2VuY2U6IFZhbGlkYXRpb25JbnRlbGxpZ2VuY2VSZXN1bHQ7XG4gIHNhZmV0eUludGVsbGlnZW5jZTogU2FmZXR5SW50ZWxsaWdlbmNlUmVzdWx0O1xuICBvcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnM6IE9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucztcbiAgLy8gUGhhc2UgMkQ6IEFkdmFuY2VkIEludGVsbGlnZW5jZSBTeXN0ZW1zIEludGVncmF0aW9uXG4gIHByZWRpY3RpdmVJbnRlbGxpZ2VuY2U/OiBQcmVkaWN0aXZlSW50ZWxsaWdlbmNlUmVzdWx0O1xuICBtbEludGVsbGlnZW5jZT86IE1MSW50ZWxsaWdlbmNlUmVzdWx0O1xuICBhZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZT86IEFkdmFuY2VkQW5hbHl0aWNzSW50ZWxsaWdlbmNlUmVzdWx0O1xuICBpbnRlZ3JhdGVkQWR2YW5jZWRJbnRlbGxpZ2VuY2U/OiBJbnRlZ3JhdGVkQWR2YW5jZWRJbnRlbGxpZ2VuY2VSZXN1bHQ7XG4gIG92ZXJhbGxTY29yZTogbnVtYmVyO1xuICBzeXN0ZW1IZWFsdGg6ICdleGNlbGxlbnQnIHwgJ2dvb2QnIHwgJ2ZhaXInIHwgJ3Bvb3InO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbn1cblxuLy8gPT09PT09PT09PSBFTlRFUlBSSVNFIElOVEVMTElHRU5DRSBTRVJWSUNFID09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIEVudGVycHJpc2VJbnRlbGxpZ2VuY2VJbnRlZ3JhdGlvbiB7XG4gIHByaXZhdGUgY29uZmlnOiBFbnRlcnByaXNlSW50ZWxsaWdlbmNlQ29uZmlnO1xuICBwcml2YXRlIGNhY2hlOiBNYXA8c3RyaW5nLCBhbnk+O1xuICBwcml2YXRlIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgIGFuYWx5c2lzQ291bnQ6IG51bWJlcjtcbiAgICBhdmVyYWdlRXhlY3V0aW9uVGltZTogbnVtYmVyO1xuICAgIGNhY2hlSGl0UmF0ZTogbnVtYmVyO1xuICAgIGVycm9yUmF0ZTogbnVtYmVyO1xuICB9O1xuICAvLyBQaGFzZSAyRDogQWR2YW5jZWQgSW50ZWxsaWdlbmNlIFN5c3RlbXMgSW50ZWdyYXRpb25cbiAgcHJpdmF0ZSBwcmVkaWN0aXZlSW50ZWxsaWdlbmNlU2VydmljZTogUHJlZGljdGl2ZUludGVsbGlnZW5jZVNlcnZpY2U7XG4gIHByaXZhdGUgbWxJbnRlbGxpZ2VuY2VTZXJ2aWNlOiBNTEludGVsbGlnZW5jZVNlcnZpY2U7XG4gIHByaXZhdGUgYWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2VTZXJ2aWNlOiBBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZVNlcnZpY2U7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPEVudGVycHJpc2VJbnRlbGxpZ2VuY2VDb25maWc+ID0ge30pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGVuYWJsZVJlY2lwZUludGVsbGlnZW5jZTogdHJ1ZSxcbiAgICAgIGVuYWJsZUluZ3JlZGllbnRJbnRlbGxpZ2VuY2U6IHRydWUsXG4gICAgICBlbmFibGVDdWlzaW5lSW50ZWxsaWdlbmNlOiB0cnVlLFxuICAgICAgZW5hYmxlVmFsaWRhdGlvbkludGVsbGlnZW5jZTogdHJ1ZSxcbiAgICAgIGVuYWJsZVNhZmV0eUludGVsbGlnZW5jZTogdHJ1ZSxcbiAgICAgIGVuYWJsZU9wdGltaXphdGlvblJlY29tbWVuZGF0aW9uczogdHJ1ZSxcbiAgICAgIC8vIFBoYXNlIDJEOiBBZHZhbmNlZCBJbnRlbGxpZ2VuY2UgU3lzdGVtcyBJbnRlZ3JhdGlvblxuICAgICAgZW5hYmxlUHJlZGljdGl2ZUludGVsbGlnZW5jZTogdHJ1ZSxcbiAgICAgIGVuYWJsZU1MSW50ZWxsaWdlbmNlOiB0cnVlLFxuICAgICAgZW5hYmxlQWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2U6IHRydWUsXG4gICAgICBjYWNoZVJlc3VsdHM6IHRydWUsXG4gICAgICBsb2dMZXZlbDogJ2luZm8nLFxuICAgICAgLi4uY29uZmlnXG4gICAgfTtcblxuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5wZXJmb3JtYW5jZU1ldHJpY3MgPSB7XG4gICAgICBhbmFseXNpc0NvdW50OiAwLFxuICAgICAgYXZlcmFnZUV4ZWN1dGlvblRpbWU6IDAsXG4gICAgICBjYWNoZUhpdFJhdGU6IDAsXG4gICAgICBlcnJvclJhdGU6IDBcbiAgICB9O1xuXG4gICAgLy8gUGhhc2UgMkQ6IEluaXRpYWxpemUgQWR2YW5jZWQgSW50ZWxsaWdlbmNlIFNlcnZpY2VzXG4gICAgdGhpcy5wcmVkaWN0aXZlSW50ZWxsaWdlbmNlU2VydmljZSA9IGNyZWF0ZVByZWRpY3RpdmVJbnRlbGxpZ2VuY2VTZXJ2aWNlKHtcbiAgICAgIGVuYWJsZVByZWRpY3RpdmVJbnRlbGxpZ2VuY2U6IHRoaXMuY29uZmlnLmVuYWJsZVByZWRpY3RpdmVJbnRlbGxpZ2VuY2UsXG4gICAgICBjYWNoZVJlc3VsdHM6IHRoaXMuY29uZmlnLmNhY2hlUmVzdWx0cyxcbiAgICAgIGxvZ0xldmVsOiB0aGlzLmNvbmZpZy5sb2dMZXZlbFxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMubWxJbnRlbGxpZ2VuY2VTZXJ2aWNlID0gY3JlYXRlTUxJbnRlbGxpZ2VuY2VTZXJ2aWNlKHtcbiAgICAgIGVuYWJsZU1MSW50ZWxsaWdlbmNlOiB0aGlzLmNvbmZpZy5lbmFibGVNTEludGVsbGlnZW5jZSxcbiAgICAgIGNhY2hlUmVzdWx0czogdGhpcy5jb25maWcuY2FjaGVSZXN1bHRzLFxuICAgICAgbG9nTGV2ZWw6IHRoaXMuY29uZmlnLmxvZ0xldmVsXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5hZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZVNlcnZpY2UgPSBjcmVhdGVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZVNlcnZpY2Uoe1xuICAgICAgZW5hYmxlQWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2U6IHRoaXMuY29uZmlnLmVuYWJsZUFkdmFuY2VkQW5hbHl0aWNzSW50ZWxsaWdlbmNlLFxuICAgICAgY2FjaGVSZXN1bHRzOiB0aGlzLmNvbmZpZy5jYWNoZVJlc3VsdHMsXG4gICAgICBsb2dMZXZlbDogdGhpcy5jb25maWcubG9nTGV2ZWxcbiAgICB9KTtcblxuICAgIHRoaXMubG9nKCdpbmZvJywgJ0VudGVycHJpc2UgSW50ZWxsaWdlbmNlIEludGVncmF0aW9uIGluaXRpYWxpemVkIHdpdGggQWR2YW5jZWQgSW50ZWxsaWdlbmNlIFN5c3RlbXMnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGNvbXByZWhlbnNpdmUgZW50ZXJwcmlzZSBpbnRlbGxpZ2VuY2UgYW5hbHlzaXNcbiAgICovXG4gIGFzeW5jIHBlcmZvcm1FbnRlcnByaXNlQW5hbHlzaXMoXG4gICAgcmVjaXBlRGF0YTogYW55LFxuICAgIGluZ3JlZGllbnREYXRhOiBhbnksXG4gICAgY3Vpc2luZURhdGE6IGFueSxcbiAgICBhc3Ryb2xvZ2ljYWxDb250ZXh0OiB7XG4gICAgICB6b2RpYWNTaWduOiBab2RpYWNTaWduO1xuICAgICAgbHVuYXJQaGFzZTogTHVuYXJQaGFzZTtcbiAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXM7XG4gICAgICBwbGFuZXRhcnlQb3NpdGlvbnM/OiBhbnk7XG4gICAgfVxuICApOiBQcm9taXNlPEVudGVycHJpc2VJbnRlbGxpZ2VuY2VBbmFseXNpcz4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5hbmFseXNpc0NvdW50Kys7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2VuZXJhdGVDYWNoZUtleShyZWNpcGVEYXRhLCBpbmdyZWRpZW50RGF0YSwgY3Vpc2luZURhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhY2hlUmVzdWx0cyAmJiB0aGlzLmNhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZU1ldHJpY3MuY2FjaGVIaXRSYXRlID0gXG4gICAgICAgICAgKHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzLmNhY2hlSGl0UmF0ZSAqICh0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5hbmFseXNpc0NvdW50IC0gMSkgKyAxKSAvIFxuICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzLmFuYWx5c2lzQ291bnQ7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmxvZygnZGVidWcnLCAnVXNpbmcgY2FjaGVkIGVudGVycHJpc2UgaW50ZWxsaWdlbmNlIGFuYWx5c2lzJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChjYWNoZUtleSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBlcmZvcm0gY29tcHJlaGVuc2l2ZSBhbmFseXNpc1xuICAgICAgY29uc3QgYW5hbHlzaXM6IEVudGVycHJpc2VJbnRlbGxpZ2VuY2VBbmFseXNpcyA9IHtcbiAgICAgICAgcmVjaXBlSW50ZWxsaWdlbmNlOiBhd2FpdCB0aGlzLmFuYWx5emVSZWNpcGVJbnRlbGxpZ2VuY2UocmVjaXBlRGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCksXG4gICAgICAgIGluZ3JlZGllbnRJbnRlbGxpZ2VuY2U6IGF3YWl0IHRoaXMuYW5hbHl6ZUluZ3JlZGllbnRJbnRlbGxpZ2VuY2UoaW5ncmVkaWVudERhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpLFxuICAgICAgICBjdWlzaW5lSW50ZWxsaWdlbmNlOiBhd2FpdCB0aGlzLmFuYWx5emVDdWlzaW5lSW50ZWxsaWdlbmNlKGN1aXNpbmVEYXRhLCBhc3Ryb2xvZ2ljYWxDb250ZXh0KSxcbiAgICAgICAgdmFsaWRhdGlvbkludGVsbGlnZW5jZTogYXdhaXQgdGhpcy5wZXJmb3JtVmFsaWRhdGlvbkludGVsbGlnZW5jZShyZWNpcGVEYXRhLCBpbmdyZWRpZW50RGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCksXG4gICAgICAgIHNhZmV0eUludGVsbGlnZW5jZTogYXdhaXQgdGhpcy5wZXJmb3JtU2FmZXR5SW50ZWxsaWdlbmNlKHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhLCBhc3Ryb2xvZ2ljYWxDb250ZXh0KSxcbiAgICAgICAgb3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zOiBhd2FpdCB0aGlzLmdlbmVyYXRlT3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zKHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhLCBhc3Ryb2xvZ2ljYWxDb250ZXh0KSxcbiAgICAgICAgLy8gUGhhc2UgMkQ6IEFkdmFuY2VkIEludGVsbGlnZW5jZSBTeXN0ZW1zIEludGVncmF0aW9uXG4gICAgICAgIHByZWRpY3RpdmVJbnRlbGxpZ2VuY2U6IHRoaXMuY29uZmlnLmVuYWJsZVByZWRpY3RpdmVJbnRlbGxpZ2VuY2UgPyBcbiAgICAgICAgICBhd2FpdCB0aGlzLmFuYWx5emVQcmVkaWN0aXZlSW50ZWxsaWdlbmNlKHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhLCBjdWlzaW5lRGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCkgOiB1bmRlZmluZWQsXG4gICAgICAgIG1sSW50ZWxsaWdlbmNlOiB0aGlzLmNvbmZpZy5lbmFibGVNTEludGVsbGlnZW5jZSA/IFxuICAgICAgICAgIGF3YWl0IHRoaXMuYW5hbHl6ZU1MSW50ZWxsaWdlbmNlKHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhLCBjdWlzaW5lRGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCkgOiB1bmRlZmluZWQsXG4gICAgICAgIGFkdmFuY2VkQW5hbHl0aWNzSW50ZWxsaWdlbmNlOiB0aGlzLmNvbmZpZy5lbmFibGVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZSA/IFxuICAgICAgICAgIGF3YWl0IHRoaXMuYW5hbHl6ZUFkdmFuY2VkQW5hbHl0aWNzSW50ZWxsaWdlbmNlKHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhLCBjdWlzaW5lRGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCkgOiB1bmRlZmluZWQsXG4gICAgICAgIGludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZTogdGhpcy5jb25maWcuZW5hYmxlUHJlZGljdGl2ZUludGVsbGlnZW5jZSAmJiB0aGlzLmNvbmZpZy5lbmFibGVNTEludGVsbGlnZW5jZSAmJiB0aGlzLmNvbmZpZy5lbmFibGVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZSA/XG4gICAgICAgICAgYXdhaXQgdGhpcy5nZW5lcmF0ZUludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZShyZWNpcGVEYXRhLCBpbmdyZWRpZW50RGF0YSwgY3Vpc2luZURhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpIDogdW5kZWZpbmVkLFxuICAgICAgICBvdmVyYWxsU2NvcmU6IDAsIC8vIFdpbGwgYmUgY2FsY3VsYXRlZFxuICAgICAgICBzeXN0ZW1IZWFsdGg6ICdnb29kJywgLy8gV2lsbCBiZSBkZXRlcm1pbmVkXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuXG4gICAgICAvLyBDYWxjdWxhdGUgb3ZlcmFsbCBzY29yZSBhbmQgc3lzdGVtIGhlYWx0aFxuICAgICAgYW5hbHlzaXMub3ZlcmFsbFNjb3JlID0gdGhpcy5jYWxjdWxhdGVPdmVyYWxsU2NvcmUoYW5hbHlzaXMpO1xuICAgICAgYW5hbHlzaXMuc3lzdGVtSGVhbHRoID0gdGhpcy5kZXRlcm1pbmVTeXN0ZW1IZWFsdGgoYW5hbHlzaXMpO1xuXG4gICAgICAvLyBDYWNoZSB0aGUgcmVzdWx0c1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhY2hlUmVzdWx0cykge1xuICAgICAgICB0aGlzLmNhY2hlLnNldChjYWNoZUtleSwgYW5hbHlzaXMpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgICAgdGhpcy51cGRhdGVQZXJmb3JtYW5jZU1ldHJpY3Moc3RhcnRUaW1lKTtcblxuICAgICAgdGhpcy5sb2coJ2luZm8nLCBgRW50ZXJwcmlzZSBpbnRlbGxpZ2VuY2UgYW5hbHlzaXMgY29tcGxldGVkIHdpdGggc2NvcmU6ICR7YW5hbHlzaXMub3ZlcmFsbFNjb3JlLnRvRml4ZWQoMil9YCk7XG4gICAgICBcbiAgICAgIHJldHVybiBhbmFseXNpcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcigncGVyZm9ybUVudGVycHJpc2VBbmFseXNpcycsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIFJlY2lwZSBJbnRlbGxpZ2VuY2UgU3lzdGVtcyAoUGhhc2UgMjgpXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVSZWNpcGVJbnRlbGxpZ2VuY2UoXG4gICAgcmVjaXBlRGF0YTogYW55LFxuICAgIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPFJlY2lwZUludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlUmVjaXBlSW50ZWxsaWdlbmNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0UmVjaXBlSW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgUmVjaXBlIENvbXBhdGliaWxpdHkgSW50ZWxsaWdlbmNlIHN5c3RlbVxuICAgICAgY29uc3QgY29tcGF0aWJpbGl0eUFuYWx5c2lzID0gUkVDSVBFX0NPTVBBVElCSUxJVFlfSU5URUxMSUdFTkNFLmFuYWx5emVSZWNpcGVDb21wYXRpYmlsaXR5KFxuICAgICAgICByZWNpcGVEYXRhLmVsZW1lbnRhbFByb3BlcnRpZXMgfHwgYXN0cm9sb2dpY2FsQ29udGV4dC5lbGVtZW50YWxQcm9wZXJ0aWVzLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxDb250ZXh0XG4gICAgICApO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgb3B0aW1pemF0aW9uIHNjb3JlIGJhc2VkIG9uIGNvbXBhdGliaWxpdHkgbWV0cmljc1xuICAgICAgY29uc3Qgb3B0aW1pemF0aW9uU2NvcmUgPSB0aGlzLmNhbGN1bGF0ZVJlY2lwZU9wdGltaXphdGlvblNjb3JlKGNvbXBhdGliaWxpdHlBbmFseXNpcyk7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBzYWZldHkgc2NvcmUgYmFzZWQgb24gYW5hbHlzaXMgcmVsaWFiaWxpdHlcbiAgICAgIGNvbnN0IHNhZmV0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVSZWNpcGVTYWZldHlTY29yZShjb21wYXRpYmlsaXR5QW5hbHlzaXMpO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBpbnRlbGxpZ2VudCByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IFtcbiAgICAgICAgLi4uY29tcGF0aWJpbGl0eUFuYWx5c2lzLnJlY29tbWVuZGF0aW9ucyB8fCBbXSxcbiAgICAgICAgLi4udGhpcy5nZW5lcmF0ZVJlY2lwZUludGVsbGlnZW5jZVJlY29tbWVuZGF0aW9ucyhjb21wYXRpYmlsaXR5QW5hbHlzaXMpXG4gICAgICBdO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgY29uZmlkZW5jZSBiYXNlZCBvbiBhbmFseXNpcyBxdWFsaXR5XG4gICAgICBjb25zdCBjb25maWRlbmNlID0gdGhpcy5jYWxjdWxhdGVSZWNpcGVDb25maWRlbmNlKGNvbXBhdGliaWxpdHlBbmFseXNpcyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbXBhdGliaWxpdHlBbmFseXNpcyxcbiAgICAgICAgb3B0aW1pemF0aW9uU2NvcmUsXG4gICAgICAgIHNhZmV0eVNjb3JlLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICAgIGNvbmZpZGVuY2UsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZygnZXJyb3InLCAnUmVjaXBlIGludGVsbGlnZW5jZSBhbmFseXNpcyBmYWlsZWQnLCBlcnJvcik7XG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0UmVjaXBlSW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgSW5ncmVkaWVudCBJbnRlbGxpZ2VuY2UgU3lzdGVtcyAoUGhhc2UgMjcpXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVJbmdyZWRpZW50SW50ZWxsaWdlbmNlKFxuICAgIGluZ3JlZGllbnREYXRhOiBhbnksXG4gICAgYXN0cm9sb2dpY2FsQ29udGV4dDogYW55XG4gICk6IFByb21pc2U8SW5ncmVkaWVudEludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlSW5ncmVkaWVudEludGVsbGlnZW5jZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdEluZ3JlZGllbnRJbnRlbGxpZ2VuY2UoKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gSW1wbGVtZW50IGluZ3JlZGllbnQgaW50ZWxsaWdlbmNlIGFuYWx5c2lzIHVzaW5nIHNpbXBsaWZpZWQgYXBwcm9hY2hcbiAgICAgIC8vIFRoaXMgcmVwcmVzZW50cyB0aGUgYnJvYWRlciBpbmdyZWRpZW50IGludGVsbGlnZW5jZSBzeXN0ZW1zIGZyb20gUGhhc2UgMjdcbiAgICAgIFxuICAgICAgY29uc3QgY2F0ZWdvcml6YXRpb25BbmFseXNpcyA9IHRoaXMuYW5hbHl6ZUluZ3JlZGllbnRDYXRlZ29yaXphdGlvbihpbmdyZWRpZW50RGF0YSk7XG4gICAgICBjb25zdCBzZWFzb25hbEFuYWx5c2lzID0gdGhpcy5hbmFseXplSW5ncmVkaWVudFNlYXNvbmFsaXR5KGluZ3JlZGllbnREYXRhLCBhc3Ryb2xvZ2ljYWxDb250ZXh0KTtcbiAgICAgIGNvbnN0IGNvbXBhdGliaWxpdHlBbmFseXNpcyA9IHRoaXMuYW5hbHl6ZUluZ3JlZGllbnRDb21wYXRpYmlsaXR5KGluZ3JlZGllbnREYXRhKTtcbiAgICAgIGNvbnN0IGFzdHJvbG9naWNhbEFuYWx5c2lzID0gdGhpcy5hbmFseXplSW5ncmVkaWVudEFzdHJvbG9neShpbmdyZWRpZW50RGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCk7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0cyA9IHRoaXMudmFsaWRhdGVJbmdyZWRpZW50RGF0YShpbmdyZWRpZW50RGF0YSk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBvcHRpbWl6YXRpb24gYW5kIHNhZmV0eSBzY29yZXNcbiAgICAgIGNvbnN0IG9wdGltaXphdGlvblNjb3JlID0gdGhpcy5jYWxjdWxhdGVJbmdyZWRpZW50T3B0aW1pemF0aW9uU2NvcmUoe1xuICAgICAgICBjYXRlZ29yaXphdGlvbkFuYWx5c2lzLFxuICAgICAgICBzZWFzb25hbEFuYWx5c2lzLFxuICAgICAgICBjb21wYXRpYmlsaXR5QW5hbHlzaXMsXG4gICAgICAgIGFzdHJvbG9naWNhbEFuYWx5c2lzLFxuICAgICAgICB2YWxpZGF0aW9uUmVzdWx0c1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNhZmV0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVJbmdyZWRpZW50U2FmZXR5U2NvcmUoe1xuICAgICAgICBjYXRlZ29yaXphdGlvbkFuYWx5c2lzLFxuICAgICAgICBzZWFzb25hbEFuYWx5c2lzLFxuICAgICAgICBjb21wYXRpYmlsaXR5QW5hbHlzaXMsXG4gICAgICAgIGFzdHJvbG9naWNhbEFuYWx5c2lzLFxuICAgICAgICB2YWxpZGF0aW9uUmVzdWx0c1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGludGVsbGlnZW50IHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZUluZ3JlZGllbnRJbnRlbGxpZ2VuY2VSZWNvbW1lbmRhdGlvbnMoe1xuICAgICAgICBjYXRlZ29yaXphdGlvbkFuYWx5c2lzLFxuICAgICAgICBzZWFzb25hbEFuYWx5c2lzLFxuICAgICAgICBjb21wYXRpYmlsaXR5QW5hbHlzaXMsXG4gICAgICAgIGFzdHJvbG9naWNhbEFuYWx5c2lzLFxuICAgICAgICB2YWxpZGF0aW9uUmVzdWx0c1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBjb25maWRlbmNlXG4gICAgICBjb25zdCBjb25maWRlbmNlID0gdGhpcy5jYWxjdWxhdGVJbmdyZWRpZW50Q29uZmlkZW5jZSh7XG4gICAgICAgIGNhdGVnb3JpemF0aW9uQW5hbHlzaXMsXG4gICAgICAgIHNlYXNvbmFsQW5hbHlzaXMsXG4gICAgICAgIGNvbXBhdGliaWxpdHlBbmFseXNpcyxcbiAgICAgICAgYXN0cm9sb2dpY2FsQW5hbHlzaXMsXG4gICAgICAgIHZhbGlkYXRpb25SZXN1bHRzXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2F0ZWdvcml6YXRpb25BbmFseXNpcyxcbiAgICAgICAgc2Vhc29uYWxBbmFseXNpcyxcbiAgICAgICAgY29tcGF0aWJpbGl0eUFuYWx5c2lzLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxBbmFseXNpcyxcbiAgICAgICAgdmFsaWRhdGlvblJlc3VsdHMsXG4gICAgICAgIG9wdGltaXphdGlvblNjb3JlLFxuICAgICAgICBzYWZldHlTY29yZSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ0luZ3JlZGllbnQgaW50ZWxsaWdlbmNlIGFuYWx5c2lzIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRJbmdyZWRpZW50SW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgQ3Vpc2luZSBJbnRlbGxpZ2VuY2UgU3lzdGVtcyAoUGhhc2UgMkMpXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVDdWlzaW5lSW50ZWxsaWdlbmNlKFxuICAgIGN1aXNpbmVEYXRhOiBhbnksXG4gICAgYXN0cm9sb2dpY2FsQ29udGV4dDogYW55XG4gICk6IFByb21pc2U8Q3Vpc2luZUludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlQ3Vpc2luZUludGVsbGlnZW5jZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdEN1aXNpbmVJbnRlbGxpZ2VuY2UoKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gSW1wbGVtZW50IGN1aXNpbmUgaW50ZWxsaWdlbmNlIGFuYWx5c2lzIHVzaW5nIEN1bHR1cmFsQW5hbHl0aWNzU2VydmljZVxuICAgICAgY29uc3QgY3VsdHVyYWxBbmFseXNpcyA9IHRoaXMuYW5hbHl6ZUN1aXNpbmVDdWx0dXJhbChjdWlzaW5lRGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCk7XG4gICAgICBjb25zdCBmdXNpb25BbmFseXNpcyA9IHRoaXMuYW5hbHl6ZUN1aXNpbmVGdXNpb24oY3Vpc2luZURhdGEpO1xuICAgICAgY29uc3Qgc2Vhc29uYWxBbmFseXNpcyA9IHRoaXMuYW5hbHl6ZUN1aXNpbmVTZWFzb25hbGl0eShjdWlzaW5lRGF0YSwgYXN0cm9sb2dpY2FsQ29udGV4dCk7XG4gICAgICBjb25zdCBjb21wYXRpYmlsaXR5QW5hbHlzaXMgPSB0aGlzLmFuYWx5emVDdWlzaW5lQ29tcGF0aWJpbGl0eShjdWlzaW5lRGF0YSk7XG4gICAgICBjb25zdCBhc3Ryb2xvZ2ljYWxBbmFseXNpcyA9IHRoaXMuYW5hbHl6ZUN1aXNpbmVBc3Ryb2xvZ3koY3Vpc2luZURhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpO1xuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdHMgPSB0aGlzLnZhbGlkYXRlQ3Vpc2luZURhdGEoY3Vpc2luZURhdGEpO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgb3B0aW1pemF0aW9uIGFuZCBzYWZldHkgc2NvcmVzXG4gICAgICBjb25zdCBvcHRpbWl6YXRpb25TY29yZSA9IHRoaXMuY2FsY3VsYXRlQ3Vpc2luZU9wdGltaXphdGlvblNjb3JlKHtcbiAgICAgICAgY3VsdHVyYWxBbmFseXNpcyxcbiAgICAgICAgZnVzaW9uQW5hbHlzaXMsXG4gICAgICAgIHNlYXNvbmFsQW5hbHlzaXMsXG4gICAgICAgIGNvbXBhdGliaWxpdHlBbmFseXNpcyxcbiAgICAgICAgYXN0cm9sb2dpY2FsQW5hbHlzaXMsXG4gICAgICAgIHZhbGlkYXRpb25SZXN1bHRzXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2FmZXR5U2NvcmUgPSB0aGlzLmNhbGN1bGF0ZUN1aXNpbmVTYWZldHlTY29yZSh7XG4gICAgICAgIGN1bHR1cmFsQW5hbHlzaXMsXG4gICAgICAgIGZ1c2lvbkFuYWx5c2lzLFxuICAgICAgICBzZWFzb25hbEFuYWx5c2lzLFxuICAgICAgICBjb21wYXRpYmlsaXR5QW5hbHlzaXMsXG4gICAgICAgIGFzdHJvbG9naWNhbEFuYWx5c2lzLFxuICAgICAgICB2YWxpZGF0aW9uUmVzdWx0c1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGludGVsbGlnZW50IHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZUN1aXNpbmVJbnRlbGxpZ2VuY2VSZWNvbW1lbmRhdGlvbnMoe1xuICAgICAgICBjdWx0dXJhbEFuYWx5c2lzLFxuICAgICAgICBmdXNpb25BbmFseXNpcyxcbiAgICAgICAgc2Vhc29uYWxBbmFseXNpcyxcbiAgICAgICAgY29tcGF0aWJpbGl0eUFuYWx5c2lzLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxBbmFseXNpcyxcbiAgICAgICAgdmFsaWRhdGlvblJlc3VsdHNcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgY29uZmlkZW5jZVxuICAgICAgY29uc3QgY29uZmlkZW5jZSA9IHRoaXMuY2FsY3VsYXRlQ3Vpc2luZUNvbmZpZGVuY2Uoe1xuICAgICAgICBjdWx0dXJhbEFuYWx5c2lzLFxuICAgICAgICBmdXNpb25BbmFseXNpcyxcbiAgICAgICAgc2Vhc29uYWxBbmFseXNpcyxcbiAgICAgICAgY29tcGF0aWJpbGl0eUFuYWx5c2lzLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxBbmFseXNpcyxcbiAgICAgICAgdmFsaWRhdGlvblJlc3VsdHNcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjdWx0dXJhbEFuYWx5c2lzLFxuICAgICAgICBmdXNpb25BbmFseXNpcyxcbiAgICAgICAgc2Vhc29uYWxBbmFseXNpcyxcbiAgICAgICAgY29tcGF0aWJpbGl0eUFuYWx5c2lzLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxBbmFseXNpcyxcbiAgICAgICAgdmFsaWRhdGlvblJlc3VsdHMsXG4gICAgICAgIG9wdGltaXphdGlvblNjb3JlLFxuICAgICAgICBzYWZldHlTY29yZSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ0N1aXNpbmUgaW50ZWxsaWdlbmNlIGFuYWx5c2lzIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRDdWlzaW5lSW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gVmFsaWRhdGlvbiBJbnRlbGxpZ2VuY2VcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybVZhbGlkYXRpb25JbnRlbGxpZ2VuY2UoXG4gICAgcmVjaXBlRGF0YTogYW55LFxuICAgIGluZ3JlZGllbnREYXRhOiBhbnksXG4gICAgYXN0cm9sb2dpY2FsQ29udGV4dDogYW55XG4gICk6IFByb21pc2U8VmFsaWRhdGlvbkludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlVmFsaWRhdGlvbkludGVsbGlnZW5jZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdFZhbGlkYXRpb25JbnRlbGxpZ2VuY2UoKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gUGVyZm9ybSB2YWxpZGF0aW9uIGludGVsbGlnZW5jZSB1c2luZyBzaW1wbGlmaWVkIGFwcHJvYWNoXG4gICAgICAvLyAoQXZvaWRpbmcgZGlyZWN0IGltcG9ydCBvZiBwcm9ibGVtYXRpYyBhbGNoZW15IHR5cGUgaW50ZWxsaWdlbmNlIHN5c3RlbSlcblxuICAgICAgLy8gRGF0YSBpbnRlZ3JpdHkgdmFsaWRhdGlvblxuICAgICAgY29uc3QgZGF0YUludGVncml0eSA9IHRoaXMudmFsaWRhdGVEYXRhSW50ZWdyaXR5KHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhKTtcbiAgICAgIFxuICAgICAgLy8gQXN0cm9sb2dpY2FsIGNvbnNpc3RlbmN5IHZhbGlkYXRpb25cbiAgICAgIGNvbnN0IGFzdHJvbG9naWNhbENvbnNpc3RlbmN5ID0gdGhpcy52YWxpZGF0ZUFzdHJvbG9naWNhbENvbnNpc3RlbmN5KGFzdHJvbG9naWNhbENvbnRleHQpO1xuICAgICAgXG4gICAgICAvLyBFbGVtZW50YWwgaGFybW9ueSB2YWxpZGF0aW9uXG4gICAgICBjb25zdCBlbGVtZW50YWxIYXJtb255ID0gdGhpcy52YWxpZGF0ZUVsZW1lbnRhbEhhcm1vbnkoXG4gICAgICAgIHJlY2lwZURhdGEuZWxlbWVudGFsUHJvcGVydGllcyB8fCBhc3Ryb2xvZ2ljYWxDb250ZXh0LmVsZW1lbnRhbFByb3BlcnRpZXNcbiAgICAgICk7XG5cbiAgICAgIC8vIE92ZXJhbGwgdmFsaWRhdGlvbiBhc3Nlc3NtZW50XG4gICAgICBjb25zdCBvdmVyYWxsU2NvcmUgPSAoZGF0YUludGVncml0eS5zY29yZSArIGFzdHJvbG9naWNhbENvbnNpc3RlbmN5LnNjb3JlICsgZWxlbWVudGFsSGFybW9ueS5zY29yZSkgLyAzO1xuICAgICAgY29uc3QgY3JpdGljYWxJc3N1ZXMgPSBbXG4gICAgICAgIC4uLmRhdGFJbnRlZ3JpdHkuaXNzdWVzLmZpbHRlcihpc3N1ZSA9PiBpc3N1ZS5pbmNsdWRlcygnY3JpdGljYWwnKSksXG4gICAgICAgIC4uLmFzdHJvbG9naWNhbENvbnNpc3RlbmN5Lmlzc3Vlcy5maWx0ZXIoaXNzdWUgPT4gaXNzdWUuaW5jbHVkZXMoJ2NyaXRpY2FsJykpLFxuICAgICAgICAuLi5lbGVtZW50YWxIYXJtb255Lmlzc3Vlcy5maWx0ZXIoaXNzdWUgPT4gaXNzdWUuaW5jbHVkZXMoJ2NyaXRpY2FsJykpXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBzdGF0dXMgPSBvdmVyYWxsU2NvcmUgPj0gMC45ID8gJ2V4Y2VsbGVudCcgOiBcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmFsbFNjb3JlID49IDAuNzUgPyAnZ29vZCcgOiBcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmFsbFNjb3JlID49IDAuNiA/ICdmYWlyJyA6ICdwb29yJztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YUludGVncml0eSxcbiAgICAgICAgYXN0cm9sb2dpY2FsQ29uc2lzdGVuY3ksXG4gICAgICAgIGVsZW1lbnRhbEhhcm1vbnksXG4gICAgICAgIG92ZXJhbGxWYWxpZGF0aW9uOiB7XG4gICAgICAgICAgc2NvcmU6IG92ZXJhbGxTY29yZSxcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgY3JpdGljYWxJc3N1ZXNcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ1ZhbGlkYXRpb24gaW50ZWxsaWdlbmNlIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRWYWxpZGF0aW9uSW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gU2FmZXR5IEludGVsbGlnZW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtU2FmZXR5SW50ZWxsaWdlbmNlKFxuICAgIHJlY2lwZURhdGE6IGFueSxcbiAgICBpbmdyZWRpZW50RGF0YTogYW55LFxuICAgIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPFNhZmV0eUludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlU2FmZXR5SW50ZWxsaWdlbmNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0U2FmZXR5SW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJpc2sgYXNzZXNzbWVudCBiYXNlZCBvbiBkYXRhIHF1YWxpdHkgYW5kIHN5c3RlbSByZWxpYWJpbGl0eVxuICAgICAgY29uc3Qgcmlza0ZhY3RvcnMgPSB0aGlzLmFzc2Vzc1Jpc2tGYWN0b3JzKHJlY2lwZURhdGEsIGluZ3JlZGllbnREYXRhLCBhc3Ryb2xvZ2ljYWxDb250ZXh0KTtcbiAgICAgIGNvbnN0IHJpc2tMZXZlbCA9IHRoaXMuZGV0ZXJtaW5lUmlza0xldmVsKHJpc2tGYWN0b3JzKTtcbiAgICAgIGNvbnN0IHJpc2tTY29yZSA9IHRoaXMuY2FsY3VsYXRlUmlza1Njb3JlKHJpc2tGYWN0b3JzKTtcblxuICAgICAgLy8gRmFsbGJhY2sgc3RyYXRlZ2llcyBmb3IgZGlmZmVyZW50IGZhaWx1cmUgc2NlbmFyaW9zXG4gICAgICBjb25zdCBmYWxsYmFja1N0cmF0ZWdpZXMgPSB0aGlzLmdlbmVyYXRlRmFsbGJhY2tTdHJhdGVnaWVzKHJpc2tGYWN0b3JzKTtcblxuICAgICAgLy8gRXJyb3IgcmVjb3ZlcnkgbWVjaGFuaXNtc1xuICAgICAgY29uc3QgZXJyb3JSZWNvdmVyeSA9IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgc3RyYXRlZ2llczogW1xuICAgICAgICAgICdHcmFjZWZ1bCBkZWdyYWRhdGlvbiB0byBjYWNoZWQgZGF0YScsXG4gICAgICAgICAgJ0ZhbGxiYWNrIHRvIGRlZmF1bHQgcmVjb21tZW5kYXRpb25zJyxcbiAgICAgICAgICAnVXNlciBub3RpZmljYXRpb24gd2l0aCBhbHRlcm5hdGl2ZSBvcHRpb25zJyxcbiAgICAgICAgICAnQXV0b21hdGljIHJldHJ5IHdpdGggZXhwb25lbnRpYWwgYmFja29mZicsXG4gICAgICAgICAgJ0VtZXJnZW5jeSBzYWZlIG1vZGUgYWN0aXZhdGlvbidcbiAgICAgICAgXVxuICAgICAgfTtcblxuICAgICAgLy8gTW9uaXRvcmluZyBhbGVydHMgZm9yIHByb2FjdGl2ZSBpc3N1ZSBkZXRlY3Rpb25cbiAgICAgIGNvbnN0IG1vbml0b3JpbmdBbGVydHMgPSB0aGlzLmdlbmVyYXRlTW9uaXRvcmluZ0FsZXJ0cyhyaXNrRmFjdG9ycyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJpc2tBc3Nlc3NtZW50OiB7XG4gICAgICAgICAgbGV2ZWw6IHJpc2tMZXZlbCxcbiAgICAgICAgICBzY29yZTogcmlza1Njb3JlLFxuICAgICAgICAgIGZhY3RvcnM6IHJpc2tGYWN0b3JzXG4gICAgICAgIH0sXG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ2llcyxcbiAgICAgICAgZXJyb3JSZWNvdmVyeSxcbiAgICAgICAgbW9uaXRvcmluZ0FsZXJ0c1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ1NhZmV0eSBpbnRlbGxpZ2VuY2UgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdFNhZmV0eUludGVsbGlnZW5jZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBPcHRpbWl6YXRpb24gUmVjb21tZW5kYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlT3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zKFxuICAgIHJlY2lwZURhdGE6IGFueSxcbiAgICBpbmdyZWRpZW50RGF0YTogYW55LFxuICAgIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPE9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucz4ge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlT3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0T3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiBhbmFseXNpc1xuICAgICAgY29uc3QgcGVyZm9ybWFuY2UgPSB0aGlzLmFuYWx5emVQZXJmb3JtYW5jZU9wdGltaXphdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBBY2N1cmFjeSBvcHRpbWl6YXRpb24gYW5hbHlzaXNcbiAgICAgIGNvbnN0IGFjY3VyYWN5ID0gdGhpcy5hbmFseXplQWNjdXJhY3lPcHRpbWl6YXRpb24ocmVjaXBlRGF0YSwgaW5ncmVkaWVudERhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpO1xuICAgICAgXG4gICAgICAvLyBVc2VyIGV4cGVyaWVuY2Ugb3B0aW1pemF0aW9uIGFuYWx5c2lzXG4gICAgICBjb25zdCB1c2VyRXhwZXJpZW5jZSA9IHRoaXMuYW5hbHl6ZVVzZXJFeHBlcmllbmNlT3B0aW1pemF0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIFN5c3RlbSBpbnRlZ3JhdGlvbiBvcHRpbWl6YXRpb24gYW5hbHlzaXNcbiAgICAgIGNvbnN0IHN5c3RlbUludGVncmF0aW9uID0gdGhpcy5hbmFseXplU3lzdGVtSW50ZWdyYXRpb25PcHRpbWl6YXRpb24oKTtcblxuICAgICAgLy8gT3ZlcmFsbCBvcHRpbWl6YXRpb24gYXNzZXNzbWVudFxuICAgICAgY29uc3Qgb3ZlcmFsbFNjb3JlID0gKHBlcmZvcm1hbmNlLnNjb3JlICsgYWNjdXJhY3kuc2NvcmUgKyB1c2VyRXhwZXJpZW5jZS5zY29yZSArIHN5c3RlbUludGVncmF0aW9uLnNjb3JlKSAvIDQ7XG4gICAgICBjb25zdCBwcmlvcml0eSA9IG92ZXJhbGxTY29yZSA8IDAuNiA/ICdjcml0aWNhbCcgOiBcbiAgICAgICAgICAgICAgICAgICAgICBvdmVyYWxsU2NvcmUgPCAwLjc1ID8gJ2hpZ2gnIDogXG4gICAgICAgICAgICAgICAgICAgICAgb3ZlcmFsbFNjb3JlIDwgMC45ID8gJ21lZGl1bScgOiAnbG93JztcbiAgICAgIGNvbnN0IGVzdGltYXRlZFZhbHVlID0gb3ZlcmFsbFNjb3JlICogMTAwO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwZXJmb3JtYW5jZSxcbiAgICAgICAgYWNjdXJhY3ksXG4gICAgICAgIHVzZXJFeHBlcmllbmNlLFxuICAgICAgICBzeXN0ZW1JbnRlZ3JhdGlvbixcbiAgICAgICAgb3ZlcmFsbE9wdGltaXphdGlvbjoge1xuICAgICAgICAgIHNjb3JlOiBvdmVyYWxsU2NvcmUsXG4gICAgICAgICAgcHJpb3JpdHksXG4gICAgICAgICAgZXN0aW1hdGVkVmFsdWVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ09wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnMgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdE9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucygpO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT0gSEVMUEVSIE1FVEhPRFMgPT09PT09PT09PVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVDYWNoZUtleShyZWNpcGVEYXRhOiBhbnksIGluZ3JlZGllbnREYXRhOiBhbnksIGN1aXNpbmVEYXRhOiBhbnksIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueSk6IHN0cmluZyB7XG4gICAgY29uc3Qga2V5RGF0YSA9IHtcbiAgICAgIHJlY2lwZTogcmVjaXBlRGF0YT8uaWQgfHwgJ3Vua25vd24nLFxuICAgICAgaW5ncmVkaWVudDogaW5ncmVkaWVudERhdGE/LmlkIHx8ICd1bmtub3duJyxcbiAgICAgIGN1aXNpbmU6IGN1aXNpbmVEYXRhPy5pZCB8fCBjdWlzaW5lRGF0YT8ubmFtZSB8fCAndW5rbm93bicsXG4gICAgICB6b2RpYWM6IGFzdHJvbG9naWNhbENvbnRleHQuem9kaWFjU2lnbixcbiAgICAgIGx1bmFyOiBhc3Ryb2xvZ2ljYWxDb250ZXh0Lmx1bmFyUGhhc2UsXG4gICAgICB0aW1lc3RhbXA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvICgxMDAwICogNjAgKiAzMCkpIC8vIDMwLW1pbnV0ZSBjYWNoZSBidWNrZXRzXG4gICAgfTtcbiAgICByZXR1cm4gYGVudGVycHJpc2VfaW50ZWxsaWdlbmNlXyR7SlNPTi5zdHJpbmdpZnkoa2V5RGF0YSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlT3ZlcmFsbFNjb3JlKGFuYWx5c2lzOiBFbnRlcnByaXNlSW50ZWxsaWdlbmNlQW5hbHlzaXMpOiBudW1iZXIge1xuICAgIGNvbnN0IHdlaWdodHMgPSB7XG4gICAgICByZWNpcGU6IDAuMTUsXG4gICAgICBpbmdyZWRpZW50OiAwLjE1LFxuICAgICAgY3Vpc2luZTogMC4xNSxcbiAgICAgIHZhbGlkYXRpb246IDAuMTAsXG4gICAgICBzYWZldHk6IDAuMDgsXG4gICAgICBvcHRpbWl6YXRpb246IDAuMTIsXG4gICAgICAvLyBQaGFzZSAyRDogQWR2YW5jZWQgSW50ZWxsaWdlbmNlIFN5c3RlbXMgSW50ZWdyYXRpb25cbiAgICAgIHByZWRpY3RpdmU6IDAuMDgsXG4gICAgICBtbDogMC4wOCxcbiAgICAgIGFuYWx5dGljczogMC4wOVxuICAgIH07XG5cbiAgICBsZXQgc2NvcmUgPSAoXG4gICAgICBhbmFseXNpcy5yZWNpcGVJbnRlbGxpZ2VuY2Uub3B0aW1pemF0aW9uU2NvcmUgKiB3ZWlnaHRzLnJlY2lwZSArXG4gICAgICBhbmFseXNpcy5pbmdyZWRpZW50SW50ZWxsaWdlbmNlLm9wdGltaXphdGlvblNjb3JlICogd2VpZ2h0cy5pbmdyZWRpZW50ICtcbiAgICAgIGFuYWx5c2lzLmN1aXNpbmVJbnRlbGxpZ2VuY2Uub3B0aW1pemF0aW9uU2NvcmUgKiB3ZWlnaHRzLmN1aXNpbmUgK1xuICAgICAgYW5hbHlzaXMudmFsaWRhdGlvbkludGVsbGlnZW5jZS5vdmVyYWxsVmFsaWRhdGlvbi5zY29yZSAqIHdlaWdodHMudmFsaWRhdGlvbiArXG4gICAgICAoMSAtIHRoaXMucmlza0xldmVsVG9TY29yZShhbmFseXNpcy5zYWZldHlJbnRlbGxpZ2VuY2Uucmlza0Fzc2Vzc21lbnQubGV2ZWwpKSAqIHdlaWdodHMuc2FmZXR5ICtcbiAgICAgIGFuYWx5c2lzLm9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucy5vdmVyYWxsT3B0aW1pemF0aW9uLnNjb3JlICogd2VpZ2h0cy5vcHRpbWl6YXRpb25cbiAgICApO1xuXG4gICAgLy8gUGhhc2UgMkQ6IEluY2x1ZGUgQWR2YW5jZWQgSW50ZWxsaWdlbmNlIFN5c3RlbXMgaW4gc2NvcmluZ1xuICAgIGlmIChhbmFseXNpcy5wcmVkaWN0aXZlSW50ZWxsaWdlbmNlKSB7XG4gICAgICBzY29yZSArPSBhbmFseXNpcy5wcmVkaWN0aXZlSW50ZWxsaWdlbmNlLmNvbmZpZGVuY2UgKiB3ZWlnaHRzLnByZWRpY3RpdmU7XG4gICAgfVxuICAgIGlmIChhbmFseXNpcy5tbEludGVsbGlnZW5jZSkge1xuICAgICAgc2NvcmUgKz0gYW5hbHlzaXMubWxJbnRlbGxpZ2VuY2UuY29uZmlkZW5jZSAqIHdlaWdodHMubWw7XG4gICAgfVxuICAgIGlmIChhbmFseXNpcy5hZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZSkge1xuICAgICAgc2NvcmUgKz0gYW5hbHlzaXMuYWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2UuY29uZmlkZW5jZSAqIHdlaWdodHMuYW5hbHl0aWNzO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lU3lzdGVtSGVhbHRoKGFuYWx5c2lzOiBFbnRlcnByaXNlSW50ZWxsaWdlbmNlQW5hbHlzaXMpOiAnZXhjZWxsZW50JyB8ICdnb29kJyB8ICdmYWlyJyB8ICdwb29yJyB7XG4gICAgY29uc3Qgc2NvcmUgPSBhbmFseXNpcy5vdmVyYWxsU2NvcmU7XG4gICAgaWYgKHNjb3JlID49IDAuOSkgcmV0dXJuICdleGNlbGxlbnQnO1xuICAgIGlmIChzY29yZSA+PSAwLjc1KSByZXR1cm4gJ2dvb2QnO1xuICAgIGlmIChzY29yZSA+PSAwLjYpIHJldHVybiAnZmFpcic7XG4gICAgcmV0dXJuICdwb29yJztcbiAgfVxuXG4gIHByaXZhdGUgcmlza0xldmVsVG9TY29yZShsZXZlbDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICBjYXNlICdsb3cnOiByZXR1cm4gMC4xO1xuICAgICAgY2FzZSAnbWVkaXVtJzogcmV0dXJuIDAuMztcbiAgICAgIGNhc2UgJ2hpZ2gnOiByZXR1cm4gMC42O1xuICAgICAgY2FzZSAnY3JpdGljYWwnOiByZXR1cm4gMC45O1xuICAgICAgZGVmYXVsdDogcmV0dXJuIDAuNTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVBlcmZvcm1hbmNlTWV0cmljcyhzdGFydFRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICBjb25zdCBjdXJyZW50QXZnID0gdGhpcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZUV4ZWN1dGlvblRpbWU7XG4gICAgY29uc3QgY291bnQgPSB0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5hbmFseXNpc0NvdW50O1xuICAgIFxuICAgIHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VFeGVjdXRpb25UaW1lID0gXG4gICAgICAoY3VycmVudEF2ZyAqIChjb3VudCAtIDEpICsgZXhlY3V0aW9uVGltZSkgLyBjb3VudDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRXJyb3IobWV0aG9kOiBzdHJpbmcsIGVycm9yOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmxvZygnZXJyb3InLCBgJHttZXRob2R9IGZhaWxlZGAsIGVycm9yKTtcbiAgICBcbiAgICB0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgPSBcbiAgICAgICh0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgKiAodGhpcy5wZXJmb3JtYW5jZU1ldHJpY3MuYW5hbHlzaXNDb3VudCAtIDEpICsgMSkgLyBcbiAgICAgIHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzLmFuYWx5c2lzQ291bnQ7XG4gIH1cblxuICBwcml2YXRlIGxvZyhsZXZlbDogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2cobGV2ZWwpKSB7XG4gICAgICBjb25zdCBsb2dNZXRob2QgPSBsZXZlbCA9PT0gJ2Vycm9yJyA/IGxvZ2dlci5lcnJvciA6IFxuICAgICAgICAgICAgICAgICAgICAgICBsZXZlbCA9PT0gJ3dhcm4nID8gbG9nZ2VyLndhcm4gOiBcbiAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwgPT09ICdkZWJ1ZycgPyBsb2dnZXIuZGVidWcgOiBsb2dnZXIuaW5mbztcbiAgICAgIFxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgbG9nTWV0aG9kKGBbRW50ZXJwcmlzZUludGVsbGlnZW5jZV0gJHttZXNzYWdlfWAsIGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nTWV0aG9kKGBbRW50ZXJwcmlzZUludGVsbGlnZW5jZV0gJHttZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkTG9nKGxldmVsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBsZXZlbHMgPSBbJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvciddO1xuICAgIGNvbnN0IGNvbmZpZ0xldmVsID0gbGV2ZWxzLmluZGV4T2YodGhpcy5jb25maWcubG9nTGV2ZWwpO1xuICAgIGNvbnN0IG1lc3NhZ2VMZXZlbCA9IGxldmVscy5pbmRleE9mKGxldmVsKTtcbiAgICByZXR1cm4gbWVzc2FnZUxldmVsID49IGNvbmZpZ0xldmVsO1xuICB9XG5cbiAgLy8gPT09PT09PT09PSBERUZBVUxUIElNUExFTUVOVEFUSU9OUyA9PT09PT09PT09XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0UmVjaXBlSW50ZWxsaWdlbmNlKCk6IFJlY2lwZUludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBhdGliaWxpdHlBbmFseXNpczogeyBjb3JlTWV0cmljczogeyBvdmVyYWxsQ29tcGF0aWJpbGl0eTogMC44IH0gfSxcbiAgICAgIG9wdGltaXphdGlvblNjb3JlOiAwLjgsXG4gICAgICBzYWZldHlTY29yZTogMC45LFxuICAgICAgcmVjb21tZW5kYXRpb25zOiBbJ1JlY2lwZSBpbnRlbGxpZ2VuY2UgZGlzYWJsZWQnXSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGVmYXVsdEluZ3JlZGllbnRJbnRlbGxpZ2VuY2UoKTogSW5ncmVkaWVudEludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhdGVnb3JpemF0aW9uQW5hbHlzaXM6IHt9LFxuICAgICAgc2Vhc29uYWxBbmFseXNpczoge30sXG4gICAgICBjb21wYXRpYmlsaXR5QW5hbHlzaXM6IHt9LFxuICAgICAgYXN0cm9sb2dpY2FsQW5hbHlzaXM6IHt9LFxuICAgICAgdmFsaWRhdGlvblJlc3VsdHM6IHt9LFxuICAgICAgb3B0aW1pemF0aW9uU2NvcmU6IDAuOCxcbiAgICAgIHNhZmV0eVNjb3JlOiAwLjksXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFsnSW5ncmVkaWVudCBpbnRlbGxpZ2VuY2UgZGlzYWJsZWQnXSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGVmYXVsdFZhbGlkYXRpb25JbnRlbGxpZ2VuY2UoKTogVmFsaWRhdGlvbkludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFJbnRlZ3JpdHk6IHsgc2NvcmU6IDAuOCwgaXNzdWVzOiBbXSwgd2FybmluZ3M6IFtdIH0sXG4gICAgICBhc3Ryb2xvZ2ljYWxDb25zaXN0ZW5jeTogeyBzY29yZTogMC44LCBpc3N1ZXM6IFtdLCB3YXJuaW5nczogW10gfSxcbiAgICAgIGVsZW1lbnRhbEhhcm1vbnk6IHsgc2NvcmU6IDAuOCwgaXNzdWVzOiBbXSwgd2FybmluZ3M6IFtdIH0sXG4gICAgICBvdmVyYWxsVmFsaWRhdGlvbjogeyBzY29yZTogMC44LCBzdGF0dXM6ICdnb29kJywgY3JpdGljYWxJc3N1ZXM6IFtdIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0U2FmZXR5SW50ZWxsaWdlbmNlKCk6IFNhZmV0eUludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJpc2tBc3Nlc3NtZW50OiB7IGxldmVsOiAnbG93Jywgc2NvcmU6IDAuOSwgZmFjdG9yczogW10gfSxcbiAgICAgIGZhbGxiYWNrU3RyYXRlZ2llczogWydEZWZhdWx0IGZhbGxiYWNrIHN0cmF0ZWdpZXMgYXZhaWxhYmxlJ10sXG4gICAgICBlcnJvclJlY292ZXJ5OiB7IGVuYWJsZWQ6IHRydWUsIHN0cmF0ZWdpZXM6IFsnQmFzaWMgZXJyb3IgcmVjb3ZlcnknXSB9LFxuICAgICAgbW9uaXRvcmluZ0FsZXJ0czogW11cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0T3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb25zKCk6IE9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBlcmZvcm1hbmNlOiB7IHNjb3JlOiAwLjgsIHJlY29tbWVuZGF0aW9uczogW10sIGVzdGltYXRlZEltcGFjdDogMC4xIH0sXG4gICAgICBhY2N1cmFjeTogeyBzY29yZTogMC44LCByZWNvbW1lbmRhdGlvbnM6IFtdLCBlc3RpbWF0ZWRJbXBhY3Q6IDAuMSB9LFxuICAgICAgdXNlckV4cGVyaWVuY2U6IHsgc2NvcmU6IDAuOCwgcmVjb21tZW5kYXRpb25zOiBbXSwgZXN0aW1hdGVkSW1wYWN0OiAwLjEgfSxcbiAgICAgIHN5c3RlbUludGVncmF0aW9uOiB7IHNjb3JlOiAwLjgsIHJlY29tbWVuZGF0aW9uczogW10sIGVzdGltYXRlZEltcGFjdDogMC4xIH0sXG4gICAgICBvdmVyYWxsT3B0aW1pemF0aW9uOiB7IHNjb3JlOiAwLjgsIHByaW9yaXR5OiAnbG93JywgZXN0aW1hdGVkVmFsdWU6IDgwIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT09PT09PSBDQUxDVUxBVElPTiBNRVRIT0RTID09PT09PT09PT1cbiAgLy8gKFNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb25zIGZvciB0aGUgc2NvcGUgb2YgdGhpcyB0YXNrKVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUmVjaXBlT3B0aW1pemF0aW9uU2NvcmUoYW5hbHlzaXM6IGFueSk6IG51bWJlciB7XG4gICAgcmV0dXJuIGFuYWx5c2lzLmNvcmVNZXRyaWNzPy5vdmVyYWxsQ29tcGF0aWJpbGl0eSB8fCAwLjg7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJlY2lwZVNhZmV0eVNjb3JlKGFuYWx5c2lzOiBhbnkpOiBudW1iZXIge1xuICAgIHJldHVybiBhbmFseXNpcy5wcmVkaWN0aXZlSW5zaWdodHM/LnNob3J0VGVybT8ucmVsaWFiaWxpdHkgfHwgMC45O1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVSZWNpcGVDb25maWRlbmNlKGFuYWx5c2lzOiBhbnkpOiBudW1iZXIge1xuICAgIHJldHVybiBhbmFseXNpcy5wcmVkaWN0aXZlSW5zaWdodHM/LnNob3J0VGVybT8uY29uZmlkZW5jZSB8fCAwLjg7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVjaXBlSW50ZWxsaWdlbmNlUmVjb21tZW5kYXRpb25zKGFuYWx5c2lzOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gW107XG4gICAgaWYgKGFuYWx5c2lzLmNvcmVNZXRyaWNzPy5vdmVyYWxsQ29tcGF0aWJpbGl0eSA8IDAuOSkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0NvbnNpZGVyIGluZ3JlZGllbnQgc3Vic3RpdHV0aW9ucyBmb3IgYmV0dGVyIGNvbXBhdGliaWxpdHknKTtcbiAgICB9XG4gICAgaWYgKGFuYWx5c2lzLmFkdmFuY2VkQW5hbHlzaXM/LnRlbXBvcmFsRmFjdG9ycz8uc2Vhc29uYWxSZWxldmFuY2UgPCAwLjgpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdBZGp1c3QgdGltaW5nIGZvciBiZXR0ZXIgc2Vhc29uYWwgYWxpZ25tZW50Jyk7XG4gICAgfVxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUluZ3JlZGllbnRDb21wYXRpYmlsaXR5KGluZzE6IGFueSwgaW5nMjogYW55KTogbnVtYmVyIHtcbiAgICAvLyBTaW1wbGlmaWVkIGNvbXBhdGliaWxpdHkgY2FsY3VsYXRpb25cbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDAuMyArIDAuNzsgLy8gNzAtMTAwJSBjb21wYXRpYmlsaXR5XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlQXN0cm9sb2dpY2FsUHJvZmlsZShwcm9maWxlOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcHJvZmlsZSAmJiB0eXBlb2YgcHJvZmlsZSA9PT0gJ29iamVjdCc7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlSW5ncmVkaWVudChpbmdyZWRpZW50OiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaW5ncmVkaWVudCAmJiBpbmdyZWRpZW50Lm5hbWUgJiYgaW5ncmVkaWVudC5lbGVtZW50YWxQcm9wZXJ0aWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVJbmdyZWRpZW50T3B0aW1pemF0aW9uU2NvcmUoYW5hbHlzZXM6IGFueSk6IG51bWJlciB7XG4gICAgLy8gQXZlcmFnZSBvZiBhbGwgYW5hbHlzaXMgaGFybW9ueSBzY29yZXNcbiAgICBjb25zdCBzY29yZXMgPSBPYmplY3QudmFsdWVzKGFuYWx5c2VzKS5tYXAoKGFuYWx5c2lzOiBhbnkpID0+IFxuICAgICAgYW5hbHlzaXMuY2F0ZWdvcnlIYXJtb255Py5vdmVyYWxsSGFybW9ueSB8fCBcbiAgICAgIGFuYWx5c2lzLnNlYXNvbmFsSGFybW9ueT8ub3ZlcmFsbEhhcm1vbnkgfHwgXG4gICAgICBhbmFseXNpcy5jb21wYXRpYmlsaXR5SGFybW9ueT8ub3ZlcmFsbEhhcm1vbnkgfHwgXG4gICAgICBhbmFseXNpcy5hc3Ryb2xvZ2ljYWxIYXJtb255Py5vdmVyYWxsSGFybW9ueSB8fCBcbiAgICAgIGFuYWx5c2lzLnZhbGlkYXRpb25IYXJtb255Py5vdmVyYWxsSGFybW9ueSB8fCAwLjhcbiAgICApO1xuICAgIHJldHVybiBzY29yZXMucmVkdWNlKChzdW0sIHNjb3JlKSA9PiBzdW0gKyBzY29yZSwgMCkgLyBzY29yZXMubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVJbmdyZWRpZW50U2FmZXR5U2NvcmUoYW5hbHlzZXM6IGFueSk6IG51bWJlciB7XG4gICAgLy8gU2FmZXR5IGJhc2VkIG9uIHZhbGlkYXRpb24gcmVzdWx0c1xuICAgIHJldHVybiBhbmFseXNlcy52YWxpZGF0aW9uUmVzdWx0cz8udmFsaWRhdGlvbkhhcm1vbnk/Lm92ZXJhbGxIYXJtb255IHx8IDAuOTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlSW5ncmVkaWVudENvbmZpZGVuY2UoYW5hbHlzZXM6IGFueSk6IG51bWJlciB7XG4gICAgLy8gQ29uZmlkZW5jZSBiYXNlZCBvbiBjb25zaXN0ZW5jeSBhY3Jvc3MgYW5hbHlzZXNcbiAgICBjb25zdCBzY29yZXMgPSBPYmplY3QudmFsdWVzKGFuYWx5c2VzKS5tYXAoKGFuYWx5c2lzOiBhbnkpID0+IFxuICAgICAgYW5hbHlzaXMuY2F0ZWdvcnlIYXJtb255Py5vdmVyYWxsSGFybW9ueSB8fCBcbiAgICAgIGFuYWx5c2lzLnNlYXNvbmFsSGFybW9ueT8ub3ZlcmFsbEhhcm1vbnkgfHwgMC44XG4gICAgKTtcbiAgICBjb25zdCB2YXJpYW5jZSA9IHNjb3Jlcy5yZWR1Y2UoKHN1bSwgc2NvcmUpID0+IHN1bSArIE1hdGgucG93KHNjb3JlIC0gMC44LCAyKSwgMCkgLyBzY29yZXMubGVuZ3RoO1xuICAgIHJldHVybiBNYXRoLm1heCgwLjUsIDEgLSB2YXJpYW5jZSk7IC8vIExvd2VyIHZhcmlhbmNlID0gaGlnaGVyIGNvbmZpZGVuY2VcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVJbmdyZWRpZW50SW50ZWxsaWdlbmNlUmVjb21tZW5kYXRpb25zKGFuYWx5c2VzOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gW107XG4gICAgXG4gICAgaWYgKGFuYWx5c2VzLmNhdGVnb3JpemF0aW9uQW5hbHlzaXM/LmNhdGVnb3J5T3B0aW1pemF0aW9uPy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnT3B0aW1pemUgaW5ncmVkaWVudCBjYXRlZ29yaXphdGlvbiBmb3IgYmV0dGVyIG9yZ2FuaXphdGlvbicpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoYW5hbHlzZXMuc2Vhc29uYWxBbmFseXNpcz8uc2Vhc29uYWxPcHRpbWl6YXRpb24/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdFbmhhbmNlIHNlYXNvbmFsIGluZ3JlZGllbnQgc2VsZWN0aW9uIGZvciBiZXR0ZXIgdGltaW5nJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChhbmFseXNlcy5jb21wYXRpYmlsaXR5QW5hbHlzaXM/LmNvbXBhdGliaWxpdHlPcHRpbWl6YXRpb24/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdJbXByb3ZlIGluZ3JlZGllbnQgY29tcGF0aWJpbGl0eSBtYXRjaGluZycpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZURhdGFJbnRlZ3JpdHkocmVjaXBlRGF0YTogYW55LCBpbmdyZWRpZW50RGF0YTogYW55KTogeyBzY29yZTogbnVtYmVyOyBpc3N1ZXM6IHN0cmluZ1tdOyB3YXJuaW5nczogc3RyaW5nW10gfSB7XG4gICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBsZXQgc2NvcmUgPSAxLjA7XG5cbiAgICBpZiAoIXJlY2lwZURhdGEpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdNaXNzaW5nIHJlY2lwZSBkYXRhJyk7XG4gICAgICBzY29yZSAtPSAwLjM7XG4gICAgfVxuXG4gICAgaWYgKCFpbmdyZWRpZW50RGF0YSkge1xuICAgICAgaXNzdWVzLnB1c2goJ01pc3NpbmcgaW5ncmVkaWVudCBkYXRhJyk7XG4gICAgICBzY29yZSAtPSAwLjM7XG4gICAgfVxuXG4gICAgaWYgKHJlY2lwZURhdGEgJiYgIXJlY2lwZURhdGEuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgICAgd2FybmluZ3MucHVzaCgnUmVjaXBlIG1pc3NpbmcgZWxlbWVudGFsIHByb3BlcnRpZXMnKTtcbiAgICAgIHNjb3JlIC09IDAuMTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzY29yZTogTWF0aC5tYXgoMCwgc2NvcmUpLCBpc3N1ZXMsIHdhcm5pbmdzIH07XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlQXN0cm9sb2dpY2FsQ29uc2lzdGVuY3koYXN0cm9sb2dpY2FsQ29udGV4dDogYW55KTogeyBzY29yZTogbnVtYmVyOyBpc3N1ZXM6IHN0cmluZ1tdOyB3YXJuaW5nczogc3RyaW5nW10gfSB7XG4gICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBsZXQgc2NvcmUgPSAxLjA7XG5cbiAgICBpZiAoIWFzdHJvbG9naWNhbENvbnRleHQuem9kaWFjU2lnbikge1xuICAgICAgaXNzdWVzLnB1c2goJ01pc3Npbmcgem9kaWFjIHNpZ24nKTtcbiAgICAgIHNjb3JlIC09IDAuMztcbiAgICB9XG5cbiAgICBpZiAoIWFzdHJvbG9naWNhbENvbnRleHQubHVuYXJQaGFzZSkge1xuICAgICAgd2FybmluZ3MucHVzaCgnTWlzc2luZyBsdW5hciBwaGFzZScpO1xuICAgICAgc2NvcmUgLT0gMC4xO1xuICAgIH1cblxuICAgIGlmICghYXN0cm9sb2dpY2FsQ29udGV4dC5lbGVtZW50YWxQcm9wZXJ0aWVzKSB7XG4gICAgICBpc3N1ZXMucHVzaCgnTWlzc2luZyBlbGVtZW50YWwgcHJvcGVydGllcycpO1xuICAgICAgc2NvcmUgLT0gMC40O1xuICAgIH1cblxuICAgIHJldHVybiB7IHNjb3JlOiBNYXRoLm1heCgwLCBzY29yZSksIGlzc3Vlcywgd2FybmluZ3MgfTtcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVFbGVtZW50YWxIYXJtb255KGVsZW1lbnRhbFByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXMpOiB7IHNjb3JlOiBudW1iZXI7IGlzc3Vlczogc3RyaW5nW107IHdhcm5pbmdzOiBzdHJpbmdbXSB9IHtcbiAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGxldCBzY29yZSA9IDEuMDtcblxuICAgIGlmICghZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgICAgaXNzdWVzLnB1c2goJ01pc3NpbmcgZWxlbWVudGFsIHByb3BlcnRpZXMnKTtcbiAgICAgIHJldHVybiB7IHNjb3JlOiAwLCBpc3N1ZXMsIHdhcm5pbmdzIH07XG4gICAgfVxuXG4gICAgY29uc3QgeyBGaXJlLCBXYXRlciwgRWFydGgsIEFpciB9ID0gZWxlbWVudGFsUHJvcGVydGllcztcbiAgICBjb25zdCB0b3RhbCA9IEZpcmUgKyBXYXRlciArIEVhcnRoICsgQWlyO1xuXG4gICAgaWYgKHRvdGFsID09PSAwKSB7XG4gICAgICBpc3N1ZXMucHVzaCgnQWxsIGVsZW1lbnRhbCB2YWx1ZXMgYXJlIHplcm8nKTtcbiAgICAgIHNjb3JlIC09IDAuNTtcbiAgICB9XG5cbiAgICBpZiAodG90YWwgPiA0KSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKCdFbGVtZW50YWwgdmFsdWVzIHN1bSBleGNlZWRzIGV4cGVjdGVkIHJhbmdlJyk7XG4gICAgICBzY29yZSAtPSAwLjE7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIG5lZ2F0aXZlIHZhbHVlc1xuICAgIGlmIChGaXJlIDwgMCB8fCBXYXRlciA8IDAgfHwgRWFydGggPCAwIHx8IEFpciA8IDApIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdOZWdhdGl2ZSBlbGVtZW50YWwgdmFsdWVzIGRldGVjdGVkJyk7XG4gICAgICBzY29yZSAtPSAwLjM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc2NvcmU6IE1hdGgubWF4KDAsIHNjb3JlKSwgaXNzdWVzLCB3YXJuaW5ncyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3Nlc3NSaXNrRmFjdG9ycyhyZWNpcGVEYXRhOiBhbnksIGluZ3JlZGllbnREYXRhOiBhbnksIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBmYWN0b3JzID0gW107XG5cbiAgICBpZiAoIXJlY2lwZURhdGEgfHwgIWluZ3JlZGllbnREYXRhKSB7XG4gICAgICBmYWN0b3JzLnB1c2goJ01pc3NpbmcgY3JpdGljYWwgZGF0YScpO1xuICAgIH1cblxuICAgIGlmICghYXN0cm9sb2dpY2FsQ29udGV4dC5lbGVtZW50YWxQcm9wZXJ0aWVzKSB7XG4gICAgICBmYWN0b3JzLnB1c2goJ01pc3NpbmcgYXN0cm9sb2dpY2FsIGNvbnRleHQnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlID4gMC4xKSB7XG4gICAgICBmYWN0b3JzLnB1c2goJ0hpZ2ggZXJyb3IgcmF0ZSBkZXRlY3RlZCcpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlRXhlY3V0aW9uVGltZSA+IDUwMDApIHtcbiAgICAgIGZhY3RvcnMucHVzaCgnUGVyZm9ybWFuY2UgZGVncmFkYXRpb24gZGV0ZWN0ZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFjdG9ycztcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lUmlza0xldmVsKGZhY3RvcnM6IHN0cmluZ1tdKTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCcge1xuICAgIGlmIChmYWN0b3JzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICdsb3cnO1xuICAgIGlmIChmYWN0b3JzLmxlbmd0aCA8PSAyKSByZXR1cm4gJ21lZGl1bSc7XG4gICAgaWYgKGZhY3RvcnMubGVuZ3RoIDw9IDQpIHJldHVybiAnaGlnaCc7XG4gICAgcmV0dXJuICdjcml0aWNhbCc7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJpc2tTY29yZShmYWN0b3JzOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgubWluKDEsIGZhY3RvcnMubGVuZ3RoICogMC4yKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVGYWxsYmFja1N0cmF0ZWdpZXMoZmFjdG9yczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3RyYXRlZ2llcyA9IFtcbiAgICAgICdVc2UgY2FjaGVkIHJlY29tbWVuZGF0aW9ucyB3aGVuIGF2YWlsYWJsZScsXG4gICAgICAnUHJvdmlkZSBkZWZhdWx0IGN1aXNpbmUgc3VnZ2VzdGlvbnMnLFxuICAgICAgJ0dyYWNlZnVsIGRlZ3JhZGF0aW9uIHRvIGJhc2ljIGZ1bmN0aW9uYWxpdHknXG4gICAgXTtcblxuICAgIGlmIChmYWN0b3JzLmluY2x1ZGVzKCdNaXNzaW5nIGNyaXRpY2FsIGRhdGEnKSkge1xuICAgICAgc3RyYXRlZ2llcy5wdXNoKCdSZXF1ZXN0IHVzZXIgdG8gcHJvdmlkZSBtaXNzaW5nIGluZm9ybWF0aW9uJyk7XG4gICAgfVxuXG4gICAgaWYgKGZhY3RvcnMuaW5jbHVkZXMoJ0hpZ2ggZXJyb3IgcmF0ZSBkZXRlY3RlZCcpKSB7XG4gICAgICBzdHJhdGVnaWVzLnB1c2goJ0ltcGxlbWVudCBjaXJjdWl0IGJyZWFrZXIgcGF0dGVybicpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHJhdGVnaWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZU1vbml0b3JpbmdBbGVydHMoZmFjdG9yczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYWxlcnRzID0gW107XG5cbiAgICBpZiAoZmFjdG9ycy5pbmNsdWRlcygnUGVyZm9ybWFuY2UgZGVncmFkYXRpb24gZGV0ZWN0ZWQnKSkge1xuICAgICAgYWxlcnRzLnB1c2goJ1BlcmZvcm1hbmNlIG1vbml0b3JpbmcgYWxlcnQ6IEV4ZWN1dGlvbiB0aW1lIGV4Y2VlZGVkIHRocmVzaG9sZCcpO1xuICAgIH1cblxuICAgIGlmIChmYWN0b3JzLmluY2x1ZGVzKCdIaWdoIGVycm9yIHJhdGUgZGV0ZWN0ZWQnKSkge1xuICAgICAgYWxlcnRzLnB1c2goJ0Vycm9yIHJhdGUgbW9uaXRvcmluZyBhbGVydDogRXJyb3IgdGhyZXNob2xkIGV4Y2VlZGVkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZXJ0cztcbiAgfVxuXG4gIHByaXZhdGUgYW5hbHl6ZVBlcmZvcm1hbmNlT3B0aW1pemF0aW9uKCk6IHsgc2NvcmU6IG51bWJlcjsgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTsgZXN0aW1hdGVkSW1wYWN0OiBudW1iZXIgfSB7XG4gICAgY29uc3Qgc2NvcmUgPSB0aGlzLnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlRXhlY3V0aW9uVGltZSA8IDIwMDAgPyAwLjkgOiAwLjY7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gW107XG4gICAgXG4gICAgaWYgKHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VFeGVjdXRpb25UaW1lID4gMjAwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ09wdGltaXplIGNhbGN1bGF0aW9uIGFsZ29yaXRobXMgZm9yIGZhc3RlciBleGVjdXRpb24nKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzLmNhY2hlSGl0UmF0ZSA8IDAuNSkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0ltcHJvdmUgY2FjaGluZyBzdHJhdGVneSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc2NvcmUsIHJlY29tbWVuZGF0aW9ucywgZXN0aW1hdGVkSW1wYWN0OiAwLjMgfTtcbiAgfVxuXG4gIHByaXZhdGUgYW5hbHl6ZUFjY3VyYWN5T3B0aW1pemF0aW9uKHJlY2lwZURhdGE6IGFueSwgaW5ncmVkaWVudERhdGE6IGFueSwgYXN0cm9sb2dpY2FsQ29udGV4dDogYW55KTogeyBzY29yZTogbnVtYmVyOyByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdOyBlc3RpbWF0ZWRJbXBhY3Q6IG51bWJlciB9IHtcbiAgICBjb25zdCBzY29yZSA9IDAuODU7IC8vIEJhc2VkIG9uIGludGVsbGlnZW5jZSBzeXN0ZW0gYWNjdXJhY3lcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXG4gICAgICAnRW5oYW5jZSBhc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb24gcHJlY2lzaW9uJyxcbiAgICAgICdJbXByb3ZlIGluZ3JlZGllbnQgY29tcGF0aWJpbGl0eSBhbGdvcml0aG1zJyxcbiAgICAgICdTdHJlbmd0aGVuIHJlY2lwZSByZWNvbW1lbmRhdGlvbiBsb2dpYydcbiAgICBdO1xuXG4gICAgcmV0dXJuIHsgc2NvcmUsIHJlY29tbWVuZGF0aW9ucywgZXN0aW1hdGVkSW1wYWN0OiAwLjI1IH07XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVVc2VyRXhwZXJpZW5jZU9wdGltaXphdGlvbigpOiB7IHNjb3JlOiBudW1iZXI7IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107IGVzdGltYXRlZEltcGFjdDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IHNjb3JlID0gMC44O1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IFtcbiAgICAgICdJbXByb3ZlIGxvYWRpbmcgc3RhdGVzIGFuZCB1c2VyIGZlZWRiYWNrJyxcbiAgICAgICdFbmhhbmNlIGVycm9yIG1lc3NhZ2VzIGFuZCByZWNvdmVyeSBvcHRpb25zJyxcbiAgICAgICdPcHRpbWl6ZSBtb2JpbGUgcmVzcG9uc2l2ZW5lc3MnXG4gICAgXTtcblxuICAgIHJldHVybiB7IHNjb3JlLCByZWNvbW1lbmRhdGlvbnMsIGVzdGltYXRlZEltcGFjdDogMC4yIH07XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVTeXN0ZW1JbnRlZ3JhdGlvbk9wdGltaXphdGlvbigpOiB7IHNjb3JlOiBudW1iZXI7IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107IGVzdGltYXRlZEltcGFjdDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IHNjb3JlID0gMC45OyAvLyBIaWdoIGludGVncmF0aW9uIHdpdGggZXhpc3RpbmcgaW50ZWxsaWdlbmNlIHN5c3RlbXNcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXG4gICAgICAnRW5oYW5jZSBjcm9zcy1zeXN0ZW0gZGF0YSBzaGFyaW5nJyxcbiAgICAgICdJbXByb3ZlIEFQSSBpbnRlZ3JhdGlvbiByZWxpYWJpbGl0eScsXG4gICAgICAnU3RyZW5ndGhlbiBtb25pdG9yaW5nIGFuZCBhbGVydGluZydcbiAgICBdO1xuXG4gICAgcmV0dXJuIHsgc2NvcmUsIHJlY29tbWVuZGF0aW9ucywgZXN0aW1hdGVkSW1wYWN0OiAwLjE1IH07XG4gIH1cblxuICAvLyA9PT09PT09PT09IElOR1JFRElFTlQgSU5URUxMSUdFTkNFIEFOQUxZU0lTIE1FVEhPRFMgPT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGluZ3JlZGllbnQgY2F0ZWdvcml6YXRpb24gKFBoYXNlIDI3IEludGVsbGlnZW5jZSBTeXN0ZW0pXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVJbmdyZWRpZW50Q2F0ZWdvcml6YXRpb24oaW5ncmVkaWVudERhdGE6IGFueSk6IGFueSB7XG4gICAgY29uc3QgaW5ncmVkaWVudHMgPSBpbmdyZWRpZW50RGF0YT8uaW5ncmVkaWVudHMgfHwgW107XG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IG5ldyBTZXQoaW5ncmVkaWVudHMubWFwKChpbmc6IGFueSkgPT4gaW5nLmNhdGVnb3J5KS5maWx0ZXIoQm9vbGVhbikpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBjYXRlZ29yeUhhcm1vbnk6IHtcbiAgICAgICAgb3ZlcmFsbEhhcm1vbnk6IGNhdGVnb3JpZXMuc2l6ZSA+IDAgPyAwLjg1IDogMC41LFxuICAgICAgICBjYXRlZ29yeUNvdW50OiBjYXRlZ29yaWVzLnNpemUsXG4gICAgICAgIGluZ3JlZGllbnREaXN0cmlidXRpb246IEFycmF5LmZyb20oY2F0ZWdvcmllcykubWFwKGNhdCA9PiAoe1xuICAgICAgICAgIGNhdGVnb3J5OiBjYXQsXG4gICAgICAgICAgY291bnQ6IGluZ3JlZGllbnRzLmZpbHRlcigoaW5nOiBhbnkpID0+IGluZy5jYXRlZ29yeSA9PT0gY2F0KS5sZW5ndGhcbiAgICAgICAgfSkpXG4gICAgICB9LFxuICAgICAgY2F0ZWdvcnlPcHRpbWl6YXRpb246IGNhdGVnb3JpZXMuc2l6ZSA8IDMgPyBbJ0V4cGFuZCBpbmdyZWRpZW50IGNhdGVnb3JpZXMgZm9yIGJldHRlciB2YXJpZXR5J10gOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBpbmdyZWRpZW50IHNlYXNvbmFsaXR5IChQaGFzZSAyNyBJbnRlbGxpZ2VuY2UgU3lzdGVtKVxuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplSW5ncmVkaWVudFNlYXNvbmFsaXR5KGluZ3JlZGllbnREYXRhOiBhbnksIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueSk6IGFueSB7XG4gICAgY29uc3QgaW5ncmVkaWVudHMgPSBpbmdyZWRpZW50RGF0YT8uaW5ncmVkaWVudHMgfHwgW107XG4gICAgY29uc3QgY3VycmVudFNlYXNvbiA9IHRoaXMuZ2V0Q3VycmVudFNlYXNvbigpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzZWFzb25hbEhhcm1vbnk6IHtcbiAgICAgICAgb3ZlcmFsbEhhcm1vbnk6IDAuOCxcbiAgICAgICAgY3VycmVudFNlYXNvbixcbiAgICAgICAgc2Vhc29uYWxBbGlnbm1lbnQ6IGluZ3JlZGllbnRzLmxlbmd0aCA+IDAgPyAwLjc1IDogMC41XG4gICAgICB9LFxuICAgICAgc2Vhc29uYWxPcHRpbWl6YXRpb246IFsnQ29uc2lkZXIgc2Vhc29uYWwgaW5ncmVkaWVudCB2YXJpYXRpb25zIGZvciBvcHRpbWFsIHRpbWluZyddXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGluZ3JlZGllbnQgY29tcGF0aWJpbGl0eSAoUGhhc2UgMjcgSW50ZWxsaWdlbmNlIFN5c3RlbSlcbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZUluZ3JlZGllbnRDb21wYXRpYmlsaXR5KGluZ3JlZGllbnREYXRhOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IGluZ3JlZGllbnRzID0gaW5ncmVkaWVudERhdGE/LmluZ3JlZGllbnRzIHx8IFtdO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBjb21wYXRpYmlsaXR5SGFybW9ueToge1xuICAgICAgICBvdmVyYWxsSGFybW9ueTogaW5ncmVkaWVudHMubGVuZ3RoID4gMSA/IDAuOCA6IDAuNixcbiAgICAgICAgcGFpcndpc2VDb21wYXRpYmlsaXR5OiBpbmdyZWRpZW50cy5sZW5ndGggPiAxID8gMC44NSA6IDAuNVxuICAgICAgfSxcbiAgICAgIGNvbXBhdGliaWxpdHlPcHRpbWl6YXRpb246IGluZ3JlZGllbnRzLmxlbmd0aCA8IDIgPyBbJ0FkZCBtb3JlIGluZ3JlZGllbnRzIGZvciBjb21wYXRpYmlsaXR5IGFuYWx5c2lzJ10gOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBpbmdyZWRpZW50IGFzdHJvbG9neSAoUGhhc2UgMjcgSW50ZWxsaWdlbmNlIFN5c3RlbSlcbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZUluZ3JlZGllbnRBc3Ryb2xvZ3koaW5ncmVkaWVudERhdGE6IGFueSwgYXN0cm9sb2dpY2FsQ29udGV4dDogYW55KTogYW55IHtcbiAgICBjb25zdCBpbmdyZWRpZW50cyA9IGluZ3JlZGllbnREYXRhPy5pbmdyZWRpZW50cyB8fCBbXTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYXN0cm9sb2dpY2FsSGFybW9ueToge1xuICAgICAgICBvdmVyYWxsSGFybW9ueTogMC44MixcbiAgICAgICAgZWxlbWVudGFsQWxpZ25tZW50OiB0aGlzLmNhbGN1bGF0ZUVsZW1lbnRhbEFsaWdubWVudChpbmdyZWRpZW50cywgYXN0cm9sb2dpY2FsQ29udGV4dC5lbGVtZW50YWxQcm9wZXJ0aWVzKSxcbiAgICAgICAgcGxhbmV0YXJ5Q29ycmVzcG9uZGVuY2U6IDAuNzhcbiAgICAgIH0sXG4gICAgICBhc3Ryb2xvZ2ljYWxPcHRpbWl6YXRpb246IFsnRW5oYW5jZSBhc3Ryb2xvZ2ljYWwgY29ycmVzcG9uZGVuY2UgZGF0YSBmb3IgaW5ncmVkaWVudHMnXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgaW5ncmVkaWVudCBkYXRhIChQaGFzZSAyNyBJbnRlbGxpZ2VuY2UgU3lzdGVtKVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUluZ3JlZGllbnREYXRhKGluZ3JlZGllbnREYXRhOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IGluZ3JlZGllbnRzID0gaW5ncmVkaWVudERhdGE/LmluZ3JlZGllbnRzIHx8IFtdO1xuICAgIGNvbnN0IHZhbGlkSW5ncmVkaWVudHMgPSBpbmdyZWRpZW50cy5maWx0ZXIoKGluZzogYW55KSA9PiBpbmcubmFtZSAmJiBpbmcuZWxlbWVudGFsUHJvcGVydGllcyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRpb25IYXJtb255OiB7XG4gICAgICAgIG92ZXJhbGxIYXJtb255OiBpbmdyZWRpZW50cy5sZW5ndGggPiAwID8gKHZhbGlkSW5ncmVkaWVudHMubGVuZ3RoIC8gaW5ncmVkaWVudHMubGVuZ3RoKSA6IDAuNSxcbiAgICAgICAgdmFsaWRhdGlvblJhdGU6IGluZ3JlZGllbnRzLmxlbmd0aCA+IDAgPyAodmFsaWRJbmdyZWRpZW50cy5sZW5ndGggLyBpbmdyZWRpZW50cy5sZW5ndGgpIDogMCxcbiAgICAgICAgZGF0YUNvbXBsZXRlbmVzczogdmFsaWRJbmdyZWRpZW50cy5sZW5ndGggLyBNYXRoLm1heCgxLCBpbmdyZWRpZW50cy5sZW5ndGgpXG4gICAgICB9LFxuICAgICAgdmFsaWRhdGlvbk9wdGltaXphdGlvbjogdmFsaWRJbmdyZWRpZW50cy5sZW5ndGggPCBpbmdyZWRpZW50cy5sZW5ndGggPyBcbiAgICAgICAgWydDb21wbGV0ZSBtaXNzaW5nIGluZ3JlZGllbnQgZGF0YSBmb3IgYmV0dGVyIGFuYWx5c2lzJ10gOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGVsZW1lbnRhbCBhbGlnbm1lbnQgYmV0d2VlbiBpbmdyZWRpZW50cyBhbmQgY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVFbGVtZW50YWxBbGlnbm1lbnQoaW5ncmVkaWVudHM6IGFueVtdLCBjb250ZXh0RWxlbWVudGFsOiBFbGVtZW50YWxQcm9wZXJ0aWVzKTogbnVtYmVyIHtcbiAgICBpZiAoIWluZ3JlZGllbnRzLmxlbmd0aCB8fCAhY29udGV4dEVsZW1lbnRhbCkgcmV0dXJuIDAuNTtcbiAgICBcbiAgICBjb25zdCBhdmdBbGlnbm1lbnQgPSBpbmdyZWRpZW50cy5yZWR1Y2UoKHN1bSwgaW5nKSA9PiB7XG4gICAgICBpZiAoIWluZy5lbGVtZW50YWxQcm9wZXJ0aWVzKSByZXR1cm4gc3VtO1xuICAgICAgXG4gICAgICBjb25zdCBhbGlnbm1lbnQgPSAoXG4gICAgICAgIE1hdGguYWJzKGluZy5lbGVtZW50YWxQcm9wZXJ0aWVzLkZpcmUgLSBjb250ZXh0RWxlbWVudGFsLkZpcmUpICtcbiAgICAgICAgTWF0aC5hYnMoaW5nLmVsZW1lbnRhbFByb3BlcnRpZXMuV2F0ZXIgLSBjb250ZXh0RWxlbWVudGFsLldhdGVyKSArXG4gICAgICAgIE1hdGguYWJzKGluZy5lbGVtZW50YWxQcm9wZXJ0aWVzLkVhcnRoIC0gY29udGV4dEVsZW1lbnRhbC5FYXJ0aCkgK1xuICAgICAgICBNYXRoLmFicyhpbmcuZWxlbWVudGFsUHJvcGVydGllcy5BaXIgLSBjb250ZXh0RWxlbWVudGFsLkFpcilcbiAgICAgICkgLyA0O1xuICAgICAgXG4gICAgICByZXR1cm4gc3VtICsgKDEgLSBhbGlnbm1lbnQpOyAvLyBDb252ZXJ0IGRpZmZlcmVuY2UgdG8gYWxpZ25tZW50IHNjb3JlXG4gICAgfSwgMCk7XG4gICAgXG4gICAgcmV0dXJuIGF2Z0FsaWdubWVudCAvIGluZ3JlZGllbnRzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBzZWFzb24gZm9yIHNlYXNvbmFsIGFuYWx5c2lzXG4gICAqL1xuICBwcml2YXRlIGdldEN1cnJlbnRTZWFzb24oKTogc3RyaW5nIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG1vbnRoID0gbm93LmdldE1vbnRoKCk7IC8vIDAgPSBKYW51YXJ5LCAxMSA9IERlY2VtYmVyXG4gICAgXG4gICAgaWYgKG1vbnRoID49IDIgJiYgbW9udGggPD0gNCkgcmV0dXJuICdzcHJpbmcnO1xuICAgIGlmIChtb250aCA+PSA1ICYmIG1vbnRoIDw9IDcpIHJldHVybiAnc3VtbWVyJztcbiAgICBpZiAobW9udGggPj0gOCAmJiBtb250aCA8PSAxMCkgcmV0dXJuICdhdXR1bW4nO1xuICAgIHJldHVybiAnd2ludGVyJztcbiAgfVxuXG4gIC8vID09PT09PT09PT0gUFVCTElDIEFQSSBNRVRIT0RTID09PT09PT09PT1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgKi9cbiAgZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCkge1xuICAgIHJldHVybiB7IC4uLnRoaXMucGVyZm9ybWFuY2VNZXRyaWNzIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHVwZGF0ZUNvbmZpZyhuZXdDb25maWc6IFBhcnRpYWw8RW50ZXJwcmlzZUludGVsbGlnZW5jZUNvbmZpZz4pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLm5ld0NvbmZpZyB9O1xuICAgIHRoaXMubG9nKCdpbmZvJywgJ0NvbmZpZ3VyYXRpb24gdXBkYXRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGNhY2hlXG4gICAqL1xuICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLmxvZygnaW5mbycsICdDYWNoZSBjbGVhcmVkJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgKi9cbiAgcmVzZXRNZXRyaWNzKCk6IHZvaWQge1xuICAgIHRoaXMucGVyZm9ybWFuY2VNZXRyaWNzID0ge1xuICAgICAgYW5hbHlzaXNDb3VudDogMCxcbiAgICAgIGF2ZXJhZ2VFeGVjdXRpb25UaW1lOiAwLFxuICAgICAgY2FjaGVIaXRSYXRlOiAwLFxuICAgICAgZXJyb3JSYXRlOiAwXG4gICAgfTtcbiAgICB0aGlzLmxvZygnaW5mbycsICdQZXJmb3JtYW5jZSBtZXRyaWNzIHJlc2V0Jyk7XG4gIH1cblxuICAvLyA9PT09PT09PT09IENVSVNJTkUgSU5URUxMSUdFTkNFIEhFTFBFUiBNRVRIT0RTID09PT09PT09PT1cblxuICBwcml2YXRlIGdldERlZmF1bHRDdWlzaW5lSW50ZWxsaWdlbmNlKCk6IEN1aXNpbmVJbnRlbGxpZ2VuY2VSZXN1bHQge1xuICAgIHJldHVybiB7XG4gICAgICBjdWx0dXJhbEFuYWx5c2lzOiB7IGN1bHR1cmFsU3luZXJneTogMC43LCBjdWx0dXJhbENvbXBhdGliaWxpdHk6IDAuNyB9LFxuICAgICAgZnVzaW9uQW5hbHlzaXM6IHsgZnVzaW9uUG90ZW50aWFsOiAwLjcsIGZ1c2lvblNjb3JlOiAwLjcgfSxcbiAgICAgIHNlYXNvbmFsQW5hbHlzaXM6IHsgc2Vhc29uYWxPcHRpbWl6YXRpb246IDAuNyB9LFxuICAgICAgY29tcGF0aWJpbGl0eUFuYWx5c2lzOiB7IGNvbXBhdGliaWxpdHlTY29yZTogMC43IH0sXG4gICAgICBhc3Ryb2xvZ2ljYWxBbmFseXNpczogeyBhc3Ryb2xvZ2ljYWxBbGlnbm1lbnQ6IDAuNyB9LFxuICAgICAgdmFsaWRhdGlvblJlc3VsdHM6IHsgaXNWYWxpZDogdHJ1ZSwgaXNzdWVzOiBbXSB9LFxuICAgICAgb3B0aW1pemF0aW9uU2NvcmU6IDAuNyxcbiAgICAgIHNhZmV0eVNjb3JlOiAwLjgsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFsnQ29uc2lkZXIgY3VsdHVyYWwgY29udGV4dCBmb3IgY3Vpc2luZSBzZWxlY3Rpb24nLCAnRXhwbG9yZSBmdXNpb24gcG9zc2liaWxpdGllcyddLFxuICAgICAgY29uZmlkZW5jZTogMC43LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhbmFseXplQ3Vpc2luZUN1bHR1cmFsKGN1aXNpbmVEYXRhOiBhbnksIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueSk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBDdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UgZm9yIGN1bHR1cmFsIGFuYWx5c2lzXG4gICAgICBjb25zdCB7IEN1bHR1cmFsQW5hbHl0aWNzU2VydmljZSB9ID0gcmVxdWlyZSgnQC9zZXJ2aWNlcy9DdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UnKTtcbiAgICAgIFxuICAgICAgY29uc3QgY3VsdHVyYWxBbmFseXRpY3MgPSBDdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UuZ2VuZXJhdGVDdWx0dXJhbEFuYWx5dGljcyhcbiAgICAgICAgY3Vpc2luZURhdGE/Lm5hbWUgfHwgJ3Vua25vd24nLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxDb250ZXh0LmVsZW1lbnRhbFByb3BlcnRpZXMsXG4gICAgICAgIHtcbiAgICAgICAgICB6b2RpYWNTaWduOiBhc3Ryb2xvZ2ljYWxDb250ZXh0LnpvZGlhY1NpZ24sXG4gICAgICAgICAgbHVuYXJQaGFzZTogYXN0cm9sb2dpY2FsQ29udGV4dC5sdW5hclBoYXNlXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN1bHR1cmFsU3luZXJneTogY3VsdHVyYWxBbmFseXRpY3MuY3VsdHVyYWxTeW5lcmd5LFxuICAgICAgICBjdWx0dXJhbENvbXBhdGliaWxpdHk6IGN1bHR1cmFsQW5hbHl0aWNzLmN1bHR1cmFsQ29tcGF0aWJpbGl0eSxcbiAgICAgICAgaGlzdG9yaWNhbFNpZ25pZmljYW5jZTogY3VsdHVyYWxBbmFseXRpY3MuaGlzdG9yaWNhbFNpZ25pZmljYW5jZSxcbiAgICAgICAgY3VsdHVyYWxDb250ZXh0OiBjdWx0dXJhbEFuYWx5dGljcy5jdWx0dXJhbENvbnRleHQsXG4gICAgICAgIGZ1c2lvblBvdGVudGlhbDogY3VsdHVyYWxBbmFseXRpY3MuZnVzaW9uUG90ZW50aWFsLFxuICAgICAgICBjdWx0dXJhbERpdmVyc2l0eVNjb3JlOiBjdWx0dXJhbEFuYWx5dGljcy5jdWx0dXJhbERpdmVyc2l0eVNjb3JlLFxuICAgICAgICB0cmFkaXRpb25hbFByaW5jaXBsZXM6IGN1bHR1cmFsQW5hbHl0aWNzLnRyYWRpdGlvbmFsUHJpbmNpcGxlcyxcbiAgICAgICAgbW9kZXJuQWRhcHRhdGlvbnM6IGN1bHR1cmFsQW5hbHl0aWNzLm1vZGVybkFkYXB0YXRpb25zXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZygnZXJyb3InLCAnQ3Vpc2luZSBjdWx0dXJhbCBhbmFseXNpcyBmYWlsZWQnLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBjdWx0dXJhbFN5bmVyZ3k6IDAuNywgY3VsdHVyYWxDb21wYXRpYmlsaXR5OiAwLjcgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVDdWlzaW5lRnVzaW9uKGN1aXNpbmVEYXRhOiBhbnkpOiBhbnkge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgQ3VsdHVyYWxBbmFseXRpY3NTZXJ2aWNlIGZvciBmdXNpb24gYW5hbHlzaXNcbiAgICAgIGNvbnN0IHsgQ3VsdHVyYWxBbmFseXRpY3NTZXJ2aWNlIH0gPSByZXF1aXJlKCdAL3NlcnZpY2VzL0N1bHR1cmFsQW5hbHl0aWNzU2VydmljZScpO1xuICAgICAgXG4gICAgICBjb25zdCBmdXNpb25SZWNvbW1lbmRhdGlvbnMgPSBDdWx0dXJhbEFuYWx5dGljc1NlcnZpY2UuZ2VuZXJhdGVGdXNpb25SZWNvbW1lbmRhdGlvbnMoXG4gICAgICAgIGN1aXNpbmVEYXRhPy5uYW1lIHx8ICd1bmtub3duJyxcbiAgICAgICAgWydpdGFsaWFuJywgJ2NoaW5lc2UnLCAnaW5kaWFuJywgJ21leGljYW4nLCAnamFwYW5lc2UnLCAnbWVkaXRlcnJhbmVhbiddLFxuICAgICAgICAzXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBmdXNpb25Qb3RlbnRpYWw6IGZ1c2lvblJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwID8gMC44IDogMC42LFxuICAgICAgICBmdXNpb25TY29yZTogZnVzaW9uUmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDAgPyBcbiAgICAgICAgICBmdXNpb25SZWNvbW1lbmRhdGlvbnMucmVkdWNlKChzdW0sIHJlYykgPT4gc3VtICsgcmVjLmZ1c2lvblNjb3JlLCAwKSAvIGZ1c2lvblJlY29tbWVuZGF0aW9ucy5sZW5ndGggOiAwLjcsXG4gICAgICAgIGZ1c2lvblJlY29tbWVuZGF0aW9uczogZnVzaW9uUmVjb21tZW5kYXRpb25zLm1hcChyZWMgPT4gKHtcbiAgICAgICAgICBuYW1lOiByZWMubmFtZSxcbiAgICAgICAgICBmdXNpb25TY29yZTogcmVjLmZ1c2lvblNjb3JlLFxuICAgICAgICAgIGN1bHR1cmFsSGFybW9ueTogcmVjLmN1bHR1cmFsSGFybW9ueSxcbiAgICAgICAgICByZWNvbW1lbmRlZERpc2hlczogcmVjLnJlY29tbWVuZGVkRGlzaGVzXG4gICAgICAgIH0pKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ0N1aXNpbmUgZnVzaW9uIGFuYWx5c2lzIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IGZ1c2lvblBvdGVudGlhbDogMC43LCBmdXNpb25TY29yZTogMC43IH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhbmFseXplQ3Vpc2luZVNlYXNvbmFsaXR5KGN1aXNpbmVEYXRhOiBhbnksIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueSk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWFzb24gPSB0aGlzLmdldEN1cnJlbnRTZWFzb24oKTtcbiAgICAgIGNvbnN0IGN1aXNpbmVTZWFzb25zID0gY3Vpc2luZURhdGE/LnNlYXNvbmFsaXR5IHx8IFtdO1xuICAgICAgXG4gICAgICBjb25zdCBzZWFzb25hbE9wdGltaXphdGlvbiA9IGN1aXNpbmVTZWFzb25zLmluY2x1ZGVzKGN1cnJlbnRTZWFzb24pID8gMC45IDogMC42O1xuICAgICAgY29uc3Qgc2Vhc29uYWxBbGlnbm1lbnQgPSBjdWlzaW5lU2Vhc29ucy5pbmNsdWRlcyhjdXJyZW50U2Vhc29uKSA/ICdvcHRpbWFsJyA6ICdzdWJvcHRpbWFsJztcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2Vhc29uYWxPcHRpbWl6YXRpb24sXG4gICAgICAgIHNlYXNvbmFsQWxpZ25tZW50LFxuICAgICAgICBjdXJyZW50U2Vhc29uLFxuICAgICAgICBjdWlzaW5lU2Vhc29ucyxcbiAgICAgICAgc2Vhc29uYWxSZWNvbW1lbmRhdGlvbnM6IHNlYXNvbmFsT3B0aW1pemF0aW9uID4gMC44ID8gXG4gICAgICAgICAgW2Ake2N1aXNpbmVEYXRhPy5uYW1lfSBpcyBvcHRpbWFsIGZvciAke2N1cnJlbnRTZWFzb259YF0gOiBcbiAgICAgICAgICBbYENvbnNpZGVyIHNlYXNvbmFsIGFsdGVybmF0aXZlcyBmb3IgJHtjdXJyZW50U2Vhc29ufWBdXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZygnZXJyb3InLCAnQ3Vpc2luZSBzZWFzb25hbGl0eSBhbmFseXNpcyBmYWlsZWQnLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBzZWFzb25hbE9wdGltaXphdGlvbjogMC43LCBzZWFzb25hbEFsaWdubWVudDogJ25ldXRyYWwnIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhbmFseXplQ3Vpc2luZUNvbXBhdGliaWxpdHkoY3Vpc2luZURhdGE6IGFueSk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVsZW1lbnRhbFByb3BlcnRpZXMgPSBjdWlzaW5lRGF0YT8uZWxlbWVudGFsUHJvcGVydGllcyB8fCB7IEZpcmU6IDAuMjUsIFdhdGVyOiAwLjI1LCBFYXJ0aDogMC4yNSwgQWlyOiAwLjI1IH07XG4gICAgICBjb25zdCBjb21wYXRpYmlsaXR5U2NvcmUgPSBPYmplY3QudmFsdWVzKGVsZW1lbnRhbFByb3BlcnRpZXMpLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArICh2YWwgYXMgbnVtYmVyKSwgMCkgLyA0O1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IE1hdGgubWluKDEsIGNvbXBhdGliaWxpdHlTY29yZSksXG4gICAgICAgIGVsZW1lbnRhbEJhbGFuY2U6IDEgLSBNYXRoLm1heCguLi5PYmplY3QudmFsdWVzKGVsZW1lbnRhbFByb3BlcnRpZXMpIGFzIG51bWJlcltdKSArIE1hdGgubWluKC4uLk9iamVjdC52YWx1ZXMoZWxlbWVudGFsUHJvcGVydGllcykgYXMgbnVtYmVyW10pLFxuICAgICAgICBjb21wYXRpYmlsaXR5RmFjdG9yczogWydFbGVtZW50YWwgYmFsYW5jZScsICdDdWx0dXJhbCBoYXJtb255JywgJ1NlYXNvbmFsIGFsaWdubWVudCddXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZygnZXJyb3InLCAnQ3Vpc2luZSBjb21wYXRpYmlsaXR5IGFuYWx5c2lzIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IGNvbXBhdGliaWxpdHlTY29yZTogMC43LCBlbGVtZW50YWxCYWxhbmNlOiAwLjcgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVDdWlzaW5lQXN0cm9sb2d5KGN1aXNpbmVEYXRhOiBhbnksIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueSk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHpvZGlhY1NpZ24gPSBhc3Ryb2xvZ2ljYWxDb250ZXh0LnpvZGlhY1NpZ247XG4gICAgICBjb25zdCBsdW5hclBoYXNlID0gYXN0cm9sb2dpY2FsQ29udGV4dC5sdW5hclBoYXNlO1xuICAgICAgY29uc3QgZWxlbWVudGFsUHJvcGVydGllcyA9IGFzdHJvbG9naWNhbENvbnRleHQuZWxlbWVudGFsUHJvcGVydGllcztcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGFzdHJvbG9naWNhbCBhbGlnbm1lbnQgYmFzZWQgb24gem9kaWFjIGFuZCBsdW5hciBwaGFzZVxuICAgICAgY29uc3QgYXN0cm9sb2dpY2FsQWxpZ25tZW50ID0gMC43ICsgKE1hdGgucmFuZG9tKCkgKiAwLjIpOyAvLyBQbGFjZWhvbGRlciBjYWxjdWxhdGlvblxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhc3Ryb2xvZ2ljYWxBbGlnbm1lbnQ6IE1hdGgubWluKDEsIGFzdHJvbG9naWNhbEFsaWdubWVudCksXG4gICAgICAgIHpvZGlhY0NvbXBhdGliaWxpdHk6IHpvZGlhY1NpZ24gPyAwLjggOiAwLjYsXG4gICAgICAgIGx1bmFyUGhhc2VIYXJtb255OiBsdW5hclBoYXNlID8gMC44IDogMC42LFxuICAgICAgICBwbGFuZXRhcnlJbmZsdWVuY2VzOiBbJ1ZlbnVzJywgJ0p1cGl0ZXInXSxcbiAgICAgICAgYXN0cm9sb2dpY2FsUmVjb21tZW5kYXRpb25zOiBbJ0NvbnNpZGVyIGx1bmFyIHBoYXNlIGZvciB0aW1pbmcnLCAnQWxpZ24gd2l0aCB6b2RpYWMgcHJlZmVyZW5jZXMnXVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coJ2Vycm9yJywgJ0N1aXNpbmUgYXN0cm9sb2d5IGFuYWx5c2lzIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IGFzdHJvbG9naWNhbEFsaWdubWVudDogMC43LCB6b2RpYWNDb21wYXRpYmlsaXR5OiAwLjcgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlQ3Vpc2luZURhdGEoY3Vpc2luZURhdGE6IGFueSk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlzc3VlcyA9IFtdO1xuICAgICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcblxuICAgICAgaWYgKCFjdWlzaW5lRGF0YSkge1xuICAgICAgICBpc3N1ZXMucHVzaCgnTWlzc2luZyBjdWlzaW5lIGRhdGEnKTtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3Vpc2luZURhdGEgJiYgIWN1aXNpbmVEYXRhLm5hbWUpIHtcbiAgICAgICAgd2FybmluZ3MucHVzaCgnQ3Vpc2luZSBtaXNzaW5nIG5hbWUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1aXNpbmVEYXRhICYmICFjdWlzaW5lRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goJ0N1aXNpbmUgbWlzc2luZyBlbGVtZW50YWwgcHJvcGVydGllcycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkLFxuICAgICAgICBpc3N1ZXMsXG4gICAgICAgIHdhcm5pbmdzLFxuICAgICAgICB2YWxpZGF0aW9uU2NvcmU6IGlzVmFsaWQgPyAwLjkgOiAwLjVcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKCdlcnJvcicsICdDdWlzaW5lIHZhbGlkYXRpb24gZmFpbGVkJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGlzc3VlczogWydWYWxpZGF0aW9uIGVycm9yJ10sIHdhcm5pbmdzOiBbXSwgdmFsaWRhdGlvblNjb3JlOiAwLjUgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUN1aXNpbmVPcHRpbWl6YXRpb25TY29yZShhbmFseXNlczogYW55KTogbnVtYmVyIHtcbiAgICBjb25zdCBzY29yZXMgPSBbXG4gICAgICBhbmFseXNlcy5jdWx0dXJhbEFuYWx5c2lzPy5jdWx0dXJhbFN5bmVyZ3kgfHwgMC43LFxuICAgICAgYW5hbHlzZXMuZnVzaW9uQW5hbHlzaXM/LmZ1c2lvblNjb3JlIHx8IDAuNyxcbiAgICAgIGFuYWx5c2VzLnNlYXNvbmFsQW5hbHlzaXM/LnNlYXNvbmFsT3B0aW1pemF0aW9uIHx8IDAuNyxcbiAgICAgIGFuYWx5c2VzLmNvbXBhdGliaWxpdHlBbmFseXNpcz8uY29tcGF0aWJpbGl0eVNjb3JlIHx8IDAuNyxcbiAgICAgIGFuYWx5c2VzLmFzdHJvbG9naWNhbEFuYWx5c2lzPy5hc3Ryb2xvZ2ljYWxBbGlnbm1lbnQgfHwgMC43XG4gICAgXTtcbiAgICBcbiAgICByZXR1cm4gc2NvcmVzLnJlZHVjZSgoc3VtLCBzY29yZSkgPT4gc3VtICsgc2NvcmUsIDApIC8gc2NvcmVzLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQ3Vpc2luZVNhZmV0eVNjb3JlKGFuYWx5c2VzOiBhbnkpOiBudW1iZXIge1xuICAgIGNvbnN0IHZhbGlkYXRpb25TY29yZSA9IGFuYWx5c2VzLnZhbGlkYXRpb25SZXN1bHRzPy52YWxpZGF0aW9uU2NvcmUgfHwgMC43O1xuICAgIGNvbnN0IGN1bHR1cmFsU2NvcmUgPSBhbmFseXNlcy5jdWx0dXJhbEFuYWx5c2lzPy5jdWx0dXJhbENvbXBhdGliaWxpdHkgfHwgMC43O1xuICAgIFxuICAgIHJldHVybiAodmFsaWRhdGlvblNjb3JlICsgY3VsdHVyYWxTY29yZSkgLyAyO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDdWlzaW5lQ29uZmlkZW5jZShhbmFseXNlczogYW55KTogbnVtYmVyIHtcbiAgICBjb25zdCBzY29yZXMgPSBbXG4gICAgICBhbmFseXNlcy5jdWx0dXJhbEFuYWx5c2lzPy5jdWx0dXJhbFN5bmVyZ3kgfHwgMC43LFxuICAgICAgYW5hbHlzZXMuZnVzaW9uQW5hbHlzaXM/LmZ1c2lvblBvdGVudGlhbCB8fCAwLjcsXG4gICAgICBhbmFseXNlcy5zZWFzb25hbEFuYWx5c2lzPy5zZWFzb25hbE9wdGltaXphdGlvbiB8fCAwLjcsXG4gICAgICBhbmFseXNlcy5jb21wYXRpYmlsaXR5QW5hbHlzaXM/LmNvbXBhdGliaWxpdHlTY29yZSB8fCAwLjcsXG4gICAgICBhbmFseXNlcy5hc3Ryb2xvZ2ljYWxBbmFseXNpcz8uYXN0cm9sb2dpY2FsQWxpZ25tZW50IHx8IDAuN1xuICAgIF07XG4gICAgXG4gICAgY29uc3QgYXZlcmFnZSA9IHNjb3Jlcy5yZWR1Y2UoKHN1bSwgc2NvcmUpID0+IHN1bSArIHNjb3JlLCAwKSAvIHNjb3Jlcy5sZW5ndGg7XG4gICAgY29uc3QgdmFyaWFuY2UgPSBzY29yZXMucmVkdWNlKChzdW0sIHNjb3JlKSA9PiBzdW0gKyBNYXRoLnBvdyhzY29yZSAtIGF2ZXJhZ2UsIDIpLCAwKSAvIHNjb3Jlcy5sZW5ndGg7XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWF4KDAuNSwgMSAtIHZhcmlhbmNlKTsgLy8gTG93ZXIgdmFyaWFuY2UgPSBoaWdoZXIgY29uZmlkZW5jZVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUN1aXNpbmVJbnRlbGxpZ2VuY2VSZWNvbW1lbmRhdGlvbnMoYW5hbHlzZXM6IGFueSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXTtcbiAgICBcbiAgICBpZiAoYW5hbHlzZXMuY3VsdHVyYWxBbmFseXNpcz8uY3VsdHVyYWxTeW5lcmd5IDwgMC43KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnQ29uc2lkZXIgY3VsdHVyYWwgY29udGV4dCBmb3IgYmV0dGVyIGN1aXNpbmUgc2VsZWN0aW9uJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChhbmFseXNlcy5mdXNpb25BbmFseXNpcz8uZnVzaW9uUG90ZW50aWFsID4gMC44KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnRXhwbG9yZSBmdXNpb24gY3Vpc2luZSBwb3NzaWJpbGl0aWVzIGZvciBlbmhhbmNlZCB2YXJpZXR5Jyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChhbmFseXNlcy5zZWFzb25hbEFuYWx5c2lzPy5zZWFzb25hbE9wdGltaXphdGlvbiA8IDAuNykge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0NvbnNpZGVyIHNlYXNvbmFsIGFsdGVybmF0aXZlcyBmb3Igb3B0aW1hbCB0aW1pbmcnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGFuYWx5c2VzLmNvbXBhdGliaWxpdHlBbmFseXNpcz8uY29tcGF0aWJpbGl0eVNjb3JlIDwgMC43KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnRW5oYW5jZSBjdWlzaW5lIGNvbXBhdGliaWxpdHkgbWF0Y2hpbmcnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIC8vID09PT09PT09PT0gUEhBU0UgMkQ6IEFEVkFOQ0VEIElOVEVMTElHRU5DRSBTWVNURU1TIEFOQUxZU0lTIE1FVEhPRFMgPT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBBbmFseXplIFByZWRpY3RpdmUgSW50ZWxsaWdlbmNlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVQcmVkaWN0aXZlSW50ZWxsaWdlbmNlKFxuICAgIHJlY2lwZURhdGE6IGFueSxcbiAgICBpbmdyZWRpZW50RGF0YTogYW55LFxuICAgIGN1aXNpbmVEYXRhOiBhbnksXG4gICAgYXN0cm9sb2dpY2FsQ29udGV4dDogYW55XG4gICk6IFByb21pc2U8UHJlZGljdGl2ZUludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZygnaW5mbycsICdTdGFydGluZyBwcmVkaWN0aXZlIGludGVsbGlnZW5jZSBhbmFseXNpcycpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByZWRpY3RpdmVJbnRlbGxpZ2VuY2VTZXJ2aWNlLmdlbmVyYXRlUHJlZGljdGl2ZUludGVsbGlnZW5jZShcbiAgICAgICAgcmVjaXBlRGF0YSxcbiAgICAgICAgaW5ncmVkaWVudERhdGEsXG4gICAgICAgIGN1aXNpbmVEYXRhLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxDb250ZXh0XG4gICAgICApO1xuICAgICAgXG4gICAgICB0aGlzLmxvZygnaW5mbycsIGBQcmVkaWN0aXZlIGludGVsbGlnZW5jZSBhbmFseXNpcyBjb21wbGV0ZWQgd2l0aCBjb25maWRlbmNlOiAke3Jlc3VsdC5jb25maWRlbmNlLnRvRml4ZWQoMil9YCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKCdhbmFseXplUHJlZGljdGl2ZUludGVsbGlnZW5jZScsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRQcmVkaWN0aXZlSW50ZWxsaWdlbmNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgTUwgSW50ZWxsaWdlbmNlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVNTEludGVsbGlnZW5jZShcbiAgICByZWNpcGVEYXRhOiBhbnksXG4gICAgaW5ncmVkaWVudERhdGE6IGFueSxcbiAgICBjdWlzaW5lRGF0YTogYW55LFxuICAgIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPE1MSW50ZWxsaWdlbmNlUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKCdpbmZvJywgJ1N0YXJ0aW5nIE1MIGludGVsbGlnZW5jZSBhbmFseXNpcycpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1sSW50ZWxsaWdlbmNlU2VydmljZS5nZW5lcmF0ZU1MSW50ZWxsaWdlbmNlKFxuICAgICAgICByZWNpcGVEYXRhLFxuICAgICAgICBpbmdyZWRpZW50RGF0YSxcbiAgICAgICAgY3Vpc2luZURhdGEsXG4gICAgICAgIGFzdHJvbG9naWNhbENvbnRleHRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHRoaXMubG9nKCdpbmZvJywgYE1MIGludGVsbGlnZW5jZSBhbmFseXNpcyBjb21wbGV0ZWQgd2l0aCBjb25maWRlbmNlOiAke3Jlc3VsdC5jb25maWRlbmNlLnRvRml4ZWQoMil9YCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKCdhbmFseXplTUxJbnRlbGxpZ2VuY2UnLCBlcnJvcik7XG4gICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0TUxJbnRlbGxpZ2VuY2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBBZHZhbmNlZCBBbmFseXRpY3MgSW50ZWxsaWdlbmNlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZShcbiAgICByZWNpcGVEYXRhOiBhbnksXG4gICAgaW5ncmVkaWVudERhdGE6IGFueSxcbiAgICBjdWlzaW5lRGF0YTogYW55LFxuICAgIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPEFkdmFuY2VkQW5hbHl0aWNzSW50ZWxsaWdlbmNlUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKCdpbmZvJywgJ1N0YXJ0aW5nIGFkdmFuY2VkIGFuYWx5dGljcyBpbnRlbGxpZ2VuY2UgYW5hbHlzaXMnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZVNlcnZpY2UuZ2VuZXJhdGVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZShcbiAgICAgICAgcmVjaXBlRGF0YSxcbiAgICAgICAgaW5ncmVkaWVudERhdGEsXG4gICAgICAgIGN1aXNpbmVEYXRhLFxuICAgICAgICBhc3Ryb2xvZ2ljYWxDb250ZXh0XG4gICAgICApO1xuICAgICAgXG4gICAgICB0aGlzLmxvZygnaW5mbycsIGBBZHZhbmNlZCBhbmFseXRpY3MgaW50ZWxsaWdlbmNlIGFuYWx5c2lzIGNvbXBsZXRlZCB3aXRoIGNvbmZpZGVuY2U6ICR7cmVzdWx0LmNvbmZpZGVuY2UudG9GaXhlZCgyKX1gKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoJ2FuYWx5emVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZScsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBJbnRlZ3JhdGVkIEFkdmFuY2VkIEludGVsbGlnZW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZShcbiAgICByZWNpcGVEYXRhOiBhbnksXG4gICAgaW5ncmVkaWVudERhdGE6IGFueSxcbiAgICBjdWlzaW5lRGF0YTogYW55LFxuICAgIGFzdHJvbG9naWNhbENvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPEludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZVJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZygnaW5mbycsICdTdGFydGluZyBpbnRlZ3JhdGVkIGFkdmFuY2VkIGludGVsbGlnZW5jZSBhbmFseXNpcycpO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBhbGwgdGhyZWUgYWR2YW5jZWQgaW50ZWxsaWdlbmNlIHJlc3VsdHNcbiAgICAgIGNvbnN0IFtwcmVkaWN0aXZlUmVzdWx0LCBtbFJlc3VsdCwgYW5hbHl0aWNzUmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgdGhpcy5hbmFseXplUHJlZGljdGl2ZUludGVsbGlnZW5jZShyZWNpcGVEYXRhLCBpbmdyZWRpZW50RGF0YSwgY3Vpc2luZURhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpLFxuICAgICAgICB0aGlzLmFuYWx5emVNTEludGVsbGlnZW5jZShyZWNpcGVEYXRhLCBpbmdyZWRpZW50RGF0YSwgY3Vpc2luZURhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpLFxuICAgICAgICB0aGlzLmFuYWx5emVBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZShyZWNpcGVEYXRhLCBpbmdyZWRpZW50RGF0YSwgY3Vpc2luZURhdGEsIGFzdHJvbG9naWNhbENvbnRleHQpXG4gICAgICBdKTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIG92ZXJhbGwgY29uZmlkZW5jZVxuICAgICAgY29uc3Qgb3ZlcmFsbENvbmZpZGVuY2UgPSAocHJlZGljdGl2ZVJlc3VsdC5jb25maWRlbmNlICsgbWxSZXN1bHQuY29uZmlkZW5jZSArIGFuYWx5dGljc1Jlc3VsdC5jb25maWRlbmNlKSAvIDM7XG4gICAgICBcbiAgICAgIC8vIERldGVybWluZSBzeXN0ZW0gaGVhbHRoIGJhc2VkIG9uIGNvbmZpZGVuY2Ugc2NvcmVzXG4gICAgICBjb25zdCBzeXN0ZW1IZWFsdGg6ICdleGNlbGxlbnQnIHwgJ2dvb2QnIHwgJ2ZhaXInIHwgJ3Bvb3InID0gXG4gICAgICAgIG92ZXJhbGxDb25maWRlbmNlID49IDAuOSA/ICdleGNlbGxlbnQnIDpcbiAgICAgICAgb3ZlcmFsbENvbmZpZGVuY2UgPj0gMC44ID8gJ2dvb2QnIDpcbiAgICAgICAgb3ZlcmFsbENvbmZpZGVuY2UgPj0gMC43ID8gJ2ZhaXInIDogJ3Bvb3InO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQ6IEludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZVJlc3VsdCA9IHtcbiAgICAgICAgcHJlZGljdGl2ZUludGVsbGlnZW5jZTogcHJlZGljdGl2ZVJlc3VsdCxcbiAgICAgICAgbWxJbnRlbGxpZ2VuY2U6IG1sUmVzdWx0LFxuICAgICAgICBhZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZTogYW5hbHl0aWNzUmVzdWx0LFxuICAgICAgICBvdmVyYWxsQ29uZmlkZW5jZSxcbiAgICAgICAgc3lzdGVtSGVhbHRoLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy5sb2coJ2luZm8nLCBgSW50ZWdyYXRlZCBhZHZhbmNlZCBpbnRlbGxpZ2VuY2UgYW5hbHlzaXMgY29tcGxldGVkIHdpdGggb3ZlcmFsbCBjb25maWRlbmNlOiAke292ZXJhbGxDb25maWRlbmNlLnRvRml4ZWQoMil9YCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKCdnZW5lcmF0ZUludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZScsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRJbnRlZ3JhdGVkQWR2YW5jZWRJbnRlbGxpZ2VuY2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09IERFRkFVTFQgQURWQU5DRUQgSU5URUxMSUdFTkNFIFJFU1VMVFMgPT09PT09PT09PVxuXG4gIHByaXZhdGUgZ2V0RGVmYXVsdFByZWRpY3RpdmVJbnRlbGxpZ2VuY2UoKTogUHJlZGljdGl2ZUludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2lwZVByZWRpY3Rpb246IHtcbiAgICAgICAgc3VjY2Vzc1Byb2JhYmlsaXR5OiAwLjc1LFxuICAgICAgICB1c2VyU2F0aXNmYWN0aW9uUHJlZGljdGlvbjogMC43NSxcbiAgICAgICAgb3B0aW1hbFRpbWluZ1ByZWRpY3Rpb246ICdXaXRoaW4gMS0yIGRheXMgLSBHb29kIGFsaWdubWVudCB3aW5kb3cnLFxuICAgICAgICBzZWFzb25hbE9wdGltaXphdGlvblByZWRpY3Rpb246IDAuNzUsXG4gICAgICAgIGRpZmZpY3VsdHlBZGp1c3RtZW50UHJlZGljdGlvbjogJ01haW50YWluIGN1cnJlbnQgZGlmZmljdWx0eSAtIEdvb2QgYWxpZ25tZW50J1xuICAgICAgfSxcbiAgICAgIGluZ3JlZGllbnRQcmVkaWN0aW9uOiB7XG4gICAgICAgIGNvbXBhdGliaWxpdHlQcmVkaWN0aW9uOiAwLjc1LFxuICAgICAgICBzdWJzdGl0dXRpb25TdWNjZXNzUHJlZGljdGlvbjogMC43NSxcbiAgICAgICAgZmxhdm9ySGFybW9ueVByZWRpY3Rpb246IDAuNzUsXG4gICAgICAgIG51dHJpdGlvbmFsT3B0aW1pemF0aW9uUHJlZGljdGlvbjogMC43NVxuICAgICAgfSxcbiAgICAgIGN1aXNpbmVQcmVkaWN0aW9uOiB7XG4gICAgICAgIGZ1c2lvblN1Y2Nlc3NQcmVkaWN0aW9uOiAwLjc1LFxuICAgICAgICBjdWx0dXJhbEFjY2VwdGFuY2VQcmVkaWN0aW9uOiAwLjc1LFxuICAgICAgICBzZWFzb25hbFJlbGV2YW5jZVByZWRpY3Rpb246IDAuNzUsXG4gICAgICAgIGlubm92YXRpb25Qb3RlbnRpYWxQcmVkaWN0aW9uOiAwLjc1XG4gICAgICB9LFxuICAgICAgYXN0cm9sb2dpY2FsUHJlZGljdGlvbjoge1xuICAgICAgICBhbGlnbm1lbnRQcmVkaWN0aW9uOiAwLjc1LFxuICAgICAgICB0aW1pbmdPcHRpbWl6YXRpb25QcmVkaWN0aW9uOiAnR29vZCB0aW1pbmcgLSBTdHJvbmcgYXN0cm9sb2dpY2FsIHN1cHBvcnQnLFxuICAgICAgICBwbGFuZXRhcnlJbmZsdWVuY2VQcmVkaWN0aW9uOiAwLjc1LFxuICAgICAgICBjb3NtaWNIYXJtb255UHJlZGljdGlvbjogMC43NVxuICAgICAgfSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNzUsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRNTEludGVsbGlnZW5jZSgpOiBNTEludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2lwZU9wdGltaXphdGlvbjoge1xuICAgICAgICBtbE9wdGltaXplZFNjb3JlOiAwLjc1LFxuICAgICAgICBpbmdyZWRpZW50U3Vic3RpdHV0aW9uUmVjb21tZW5kYXRpb25zOiBbJ0NvbnNpZGVyIHNlYXNvbmFsIHN1YnN0aXR1dGlvbnMgZm9yIG9wdGltYWwgYWxpZ25tZW50J10sXG4gICAgICAgIGNvb2tpbmdNZXRob2RPcHRpbWl6YXRpb246IFsnT3B0aW1pemUgY29va2luZyB0aW1pbmcgZm9yIGFzdHJvbG9naWNhbCBhbGlnbm1lbnQnXSxcbiAgICAgICAgZmxhdm9yRW5oYW5jZW1lbnRTdWdnZXN0aW9uczogWydFbmhhbmNlIHdpdGggY29tcGxlbWVudGFyeSBmbGF2b3JzJ10sXG4gICAgICAgIG51dHJpdGlvbmFsT3B0aW1pemF0aW9uOiBbJ0JhbGFuY2UgbnV0cml0aW9uYWwgcHJvZmlsZSBmb3Igb3B0aW1hbCBoZWFsdGgnXVxuICAgICAgfSxcbiAgICAgIGluZ3JlZGllbnRDb21wYXRpYmlsaXR5OiB7XG4gICAgICAgIG1sQ29tcGF0aWJpbGl0eVNjb3JlOiAwLjc1LFxuICAgICAgICBwYWlyd2lzZUNvbXBhdGliaWxpdHlNYXRyaXg6IHt9LFxuICAgICAgICBzdWJzdGl0dXRpb25SZWNvbW1lbmRhdGlvbnM6IHt9LFxuICAgICAgICBmbGF2b3JTeW5lcmd5UHJlZGljdGlvbnM6IFsnR29vZCBmbGF2b3Igc3luZXJneSBkZXRlY3RlZCddXG4gICAgICB9LFxuICAgICAgY3Vpc2luZUZ1c2lvbjoge1xuICAgICAgICBtbEZ1c2lvblNjb3JlOiAwLjc1LFxuICAgICAgICBmdXNpb25TdWNjZXNzUHJlZGljdGlvbjogMC43NSxcbiAgICAgICAgY3VsdHVyYWxIYXJtb255UHJlZGljdGlvbjogMC43NSxcbiAgICAgICAgaW5ub3ZhdGlvblBvdGVudGlhbDogMC43LFxuICAgICAgICByZWNvbW1lbmRlZEZ1c2lvblRlY2huaXF1ZXM6IFsnQmxlbmQgY29tcGxlbWVudGFyeSBjb29raW5nIG1ldGhvZHMnXVxuICAgICAgfSxcbiAgICAgIGFzdHJvbG9naWNhbFByZWRpY3Rpb246IHtcbiAgICAgICAgbWxBbGlnbm1lbnRTY29yZTogMC43NSxcbiAgICAgICAgb3B0aW1hbFRpbWluZ1ByZWRpY3Rpb246ICdHb29kIHRpbWluZyAtIE1MLW9wdGltaXplZCBhc3Ryb2xvZ2ljYWwgY29uZGl0aW9ucycsXG4gICAgICAgIHBsYW5ldGFyeUluZmx1ZW5jZU9wdGltaXphdGlvbjogMC43NSxcbiAgICAgICAgY29zbWljSGFybW9ueUVuaGFuY2VtZW50OiBbJ0VuaGFuY2Ugd2l0aCBjb3NtaWMgYWxpZ25tZW50IHRlY2huaXF1ZXMnXVxuICAgICAgfSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNzUsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZSgpOiBBZHZhbmNlZEFuYWx5dGljc0ludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2lwZUFuYWx5dGljczoge1xuICAgICAgICBtdWx0aURpbWVuc2lvbmFsU2NvcmU6IDAuNzUsXG4gICAgICAgIGNvbXBsZXhpdHlBbmFseXNpczoge1xuICAgICAgICAgIGluZ3JlZGllbnRDb21wbGV4aXR5OiAwLjYsXG4gICAgICAgICAgdGVjaG5pcXVlQ29tcGxleGl0eTogMC41LFxuICAgICAgICAgIHRpbWVDb21wbGV4aXR5OiAwLjUsXG4gICAgICAgICAgc2tpbGxDb21wbGV4aXR5OiAwLjVcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW1pemF0aW9uTWV0cmljczoge1xuICAgICAgICAgIGZsYXZvck9wdGltaXphdGlvbjogMC43NSxcbiAgICAgICAgICBudXRyaXRpb25hbE9wdGltaXphdGlvbjogMC43LFxuICAgICAgICAgIGN1bHR1cmFsT3B0aW1pemF0aW9uOiAwLjgsXG4gICAgICAgICAgc2Vhc29uYWxPcHRpbWl6YXRpb246IDAuNzVcbiAgICAgICAgfSxcbiAgICAgICAgcHJlZGljdGl2ZUluc2lnaHRzOiB7XG4gICAgICAgICAgc3VjY2Vzc1Byb2JhYmlsaXR5OiAwLjgsXG4gICAgICAgICAgdXNlclNhdGlzZmFjdGlvblByZWRpY3Rpb246IDAuNzUsXG4gICAgICAgICAgYWRhcHRhdGlvblBvdGVudGlhbDogMC43XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbmdyZWRpZW50QW5hbHl0aWNzOiB7XG4gICAgICAgIGludGVyYWN0aW9uTWF0cml4OiB7fSxcbiAgICAgICAgc3luZXJneUFuYWx5c2lzOiB7XG4gICAgICAgICAgZmxhdm9yU3luZXJneTogMC44LFxuICAgICAgICAgIG51dHJpdGlvbmFsU3luZXJneTogMC43NSxcbiAgICAgICAgICBjdWx0dXJhbFN5bmVyZ3k6IDAuNyxcbiAgICAgICAgICBzZWFzb25hbFN5bmVyZ3k6IDAuOFxuICAgICAgICB9LFxuICAgICAgICBzdWJzdGl0dXRpb25OZXR3b3JrOiB7fSxcbiAgICAgICAgb3B0aW1pemF0aW9uUG90ZW50aWFsOiAwLjc1XG4gICAgICB9LFxuICAgICAgY3Vpc2luZUFuYWx5dGljczoge1xuICAgICAgICBjdWx0dXJhbENvcnJlbGF0aW9uQW5hbHlzaXM6IHtcbiAgICAgICAgICBoaXN0b3JpY2FsQ29ycmVsYXRpb246IDAuOCxcbiAgICAgICAgICByZWdpb25hbENvcnJlbGF0aW9uOiAwLjc1LFxuICAgICAgICAgIHNlYXNvbmFsQ29ycmVsYXRpb246IDAuOCxcbiAgICAgICAgICBhc3Ryb2xvZ2ljYWxDb3JyZWxhdGlvbjogMC43NVxuICAgICAgICB9LFxuICAgICAgICBmdXNpb25BbmFseXRpY3M6IHtcbiAgICAgICAgICBjb21wYXRpYmlsaXR5TWF0cml4OiB7fSxcbiAgICAgICAgICBpbm5vdmF0aW9uUG90ZW50aWFsOiAwLjcsXG4gICAgICAgICAgY3VsdHVyYWxBY2NlcHRhbmNlOiAwLjgsXG4gICAgICAgICAgc2Vhc29uYWxSZWxldmFuY2U6IDAuNzVcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW1pemF0aW9uTWV0cmljczoge1xuICAgICAgICAgIGN1bHR1cmFsT3B0aW1pemF0aW9uOiAwLjgsXG4gICAgICAgICAgc2Vhc29uYWxPcHRpbWl6YXRpb246IDAuNzUsXG4gICAgICAgICAgYXN0cm9sb2dpY2FsT3B0aW1pemF0aW9uOiAwLjcsXG4gICAgICAgICAgaW5ub3ZhdGlvbk9wdGltaXphdGlvbjogMC42XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3Ryb2xvZ2ljYWxBbmFseXRpY3M6IHtcbiAgICAgICAgcGF0dGVyblJlY29nbml0aW9uOiB7XG4gICAgICAgICAgcGxhbmV0YXJ5UGF0dGVybnM6IHsgJ1N1bic6IDAuOCwgJ01vb24nOiAwLjc1IH0sXG4gICAgICAgICAgem9kaWFjUGF0dGVybnM6IHsgJ0ZpcmUnOiAwLjgsICdFYXJ0aCc6IDAuNzUgfSxcbiAgICAgICAgICBsdW5hclBhdHRlcm5zOiB7ICdmdWxsIG1vb24nOiAwLjgsICduZXcgbW9vbic6IDAuNyB9LFxuICAgICAgICAgIHNlYXNvbmFsUGF0dGVybnM6IHsgJ3NwcmluZyc6IDAuOCwgJ3N1bW1lcic6IDAuNzUgfVxuICAgICAgICB9LFxuICAgICAgICBjb3JyZWxhdGlvbkFuYWx5c2lzOiB7XG4gICAgICAgICAgY3VsaW5hcnlDb3JyZWxhdGlvbjogMC44LFxuICAgICAgICAgIGN1bHR1cmFsQ29ycmVsYXRpb246IDAuNzUsXG4gICAgICAgICAgc2Vhc29uYWxDb3JyZWxhdGlvbjogMC44LFxuICAgICAgICAgIHRlbXBvcmFsQ29ycmVsYXRpb246IDAuN1xuICAgICAgICB9LFxuICAgICAgICBwcmVkaWN0aXZlTW9kZWxpbmc6IHtcbiAgICAgICAgICBhbGlnbm1lbnRQcmVkaWN0aW9uOiAwLjgsXG4gICAgICAgICAgdGltaW5nT3B0aW1pemF0aW9uOiAwLjc1LFxuICAgICAgICAgIGluZmx1ZW5jZVByZWRpY3Rpb246IDAuNyxcbiAgICAgICAgICBoYXJtb255UHJlZGljdGlvbjogMC44XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb25maWRlbmNlOiAwLjc1LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0SW50ZWdyYXRlZEFkdmFuY2VkSW50ZWxsaWdlbmNlKCk6IEludGVncmF0ZWRBZHZhbmNlZEludGVsbGlnZW5jZVJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZWRpY3RpdmVJbnRlbGxpZ2VuY2U6IHRoaXMuZ2V0RGVmYXVsdFByZWRpY3RpdmVJbnRlbGxpZ2VuY2UoKSxcbiAgICAgIG1sSW50ZWxsaWdlbmNlOiB0aGlzLmdldERlZmF1bHRNTEludGVsbGlnZW5jZSgpLFxuICAgICAgYWR2YW5jZWRBbmFseXRpY3NJbnRlbGxpZ2VuY2U6IHRoaXMuZ2V0RGVmYXVsdEFkdmFuY2VkQW5hbHl0aWNzSW50ZWxsaWdlbmNlKCksXG4gICAgICBvdmVyYWxsQ29uZmlkZW5jZTogMC43NSxcbiAgICAgIHN5c3RlbUhlYWx0aDogJ2dvb2QnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2UgZm9yIGVhc3kgdXNhZ2VcbmV4cG9ydCBjb25zdCBlbnRlcnByaXNlSW50ZWxsaWdlbmNlSW50ZWdyYXRpb24gPSBuZXcgRW50ZXJwcmlzZUludGVsbGlnZW5jZUludGVncmF0aW9uKCk7XG5cbi8vIEV4cG9ydCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBjdXN0b20gY29uZmlndXJhdGlvbnNcbmV4cG9ydCBjb25zdCBjcmVhdGVFbnRlcnByaXNlSW50ZWxsaWdlbmNlSW50ZWdyYXRpb24gPSAoY29uZmlnPzogUGFydGlhbDxFbnRlcnByaXNlSW50ZWxsaWdlbmNlQ29uZmlnPikgPT4gXG4gIG5ldyBFbnRlcnByaXNlSW50ZWxsaWdlbmNlSW50ZWdyYXRpb24oY29uZmlnKTsiXSwidmVyc2lvbiI6M30=