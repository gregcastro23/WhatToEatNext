e96317f0e0045b8397496f4a968be9c4
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatelementalState = exports.getNutritionalSynergy = exports.getFlavorBoost = exports.getLunarPhaseBoost = exports.getZodiacBoost = exports.getDignityMultiplier = exports.calculatePlanetaryBoost = exports.planetaryFoodAssociations = void 0;
exports.planetaryFoodAssociations = {
    Sun: {
        name: 'Sun',
        elements: ['Fire'],
        qualities: ['Hot', 'Dry'],
        foodCategories: ['Fruits', 'Spices', 'Grains'],
        specificFoods: ['Oranges', 'Lemons', 'Honey', 'Saffron', 'Cinnamon', 'Wheat'],
        cuisines: ['Mediterranean', 'Indian', 'Middle Eastern'],
        elementalBoost: { 'Fire': 0.3, 'Air': 0.1 }
    },
    Moon: {
        name: 'Moon',
        elements: ['Water'],
        qualities: ['Cold', 'Moist'],
        foodCategories: ['Vegetables', 'Dairy', 'Seafood'],
        specificFoods: ['Cucumber', 'Lettuce', 'Milk', 'Yogurt', 'White fish', 'Rice'],
        cuisines: ['Japanese', 'Nordic', 'Coastal'],
        elementalBoost: { 'Water': 0.3, 'Earth': 0.1 }
    },
    Mercury: {
        name: 'Mercury',
        elements: ['Air', 'Earth'],
        qualities: ['Mixed', 'Adaptable'],
        foodCategories: ['Nuts', 'Seeds', 'Herbs'],
        specificFoods: ['Almonds', 'Fennel', 'Mint', 'Celery', 'Mixed greens'],
        cuisines: ['Fusion', 'Contemporary', 'Diverse'],
        elementalBoost: { 'Air': 0.2, 'Earth': 0.2 }
    },
    Venus: {
        name: 'Venus',
        elements: ['Earth', 'Water'],
        qualities: ['Cool', 'Moist'],
        foodCategories: ['Fruits', 'Sweets', 'Dairy'],
        specificFoods: ['Apples', 'Berries', 'Chocolate', 'Vanilla', 'Cream'],
        cuisines: ['French', 'Italian', 'Dessert-focused'],
        elementalBoost: { 'Earth': 0.2, 'Water': 0.2 }
    },
    Mars: {
        name: 'Mars',
        elements: ['Fire'],
        qualities: ['Hot', 'Dry'],
        foodCategories: ['Meats', 'Spices', 'Alcohol'],
        specificFoods: ['Red meat', 'Chili', 'Garlic', 'Onions', 'Red wine'],
        cuisines: ['Spicy', 'BBQ', 'Grilled'],
        elementalBoost: { 'Fire': 0.4 }
    },
    Jupiter: {
        name: 'Jupiter',
        elements: ['Fire', 'Air'],
        qualities: ['Warm', 'Moist'],
        foodCategories: ['Rich foods', 'Fruits', 'Meats'],
        specificFoods: ['Fig', 'Asparagus', 'Salmon', 'Sage', 'Nutmeg'],
        cuisines: ['Abundant', 'Festive', 'Celebratory'],
        elementalBoost: { 'Fire': 0.2, 'Air': 0.2 }
    },
    Saturn: {
        name: 'Saturn',
        elements: ['Earth'],
        qualities: ['Cold', 'Dry'],
        foodCategories: ['Root vegetables', 'Grains', 'Legumes'],
        specificFoods: ['Potatoes', 'Beets', 'Rye', 'Lentils', 'Black tea'],
        cuisines: ['Rustic', 'Traditional', 'Preserved'],
        elementalBoost: { 'Earth': 0.4 }
    },
    Uranus: {
        name: 'Uranus',
        elements: ['Air'],
        qualities: ['Cold', 'Dry'],
        foodCategories: ['Unusual foods', 'Novel ingredients'],
        specificFoods: ['Exotic fruits', 'Molecular gastronomy items', 'Fermented foods'],
        cuisines: ['Experimental', 'Avant-garde', 'Futuristic'],
        elementalBoost: { 'Air': 0.4 }
    },
    Neptune: {
        name: 'Neptune',
        elements: ['Water'],
        qualities: ['Cold', 'Moist'],
        foodCategories: ['Seafood', 'Alcohol', 'Elusive flavors'],
        specificFoods: ['Seaweed', 'White wine', 'Delicate fish', 'Coconut'],
        cuisines: ['Ethereal', 'Subtle', 'Inspired'],
        elementalBoost: { 'Water': 0.4 }
    },
    Pluto: {
        name: 'Pluto',
        elements: ['Water', 'Fire'],
        qualities: ['Transformative'],
        foodCategories: ['Fermented foods', 'Strong flavors', 'Transformed ingredients'],
        specificFoods: ['Dark chocolate', 'Coffee', 'Mushrooms', 'Aged cheese'],
        cuisines: ['Intense', 'Complex', 'Deep'],
        elementalBoost: { 'Water': 0.2, 'Fire': 0.2 }
    },
    Rahu: {
        name: 'Rahu',
        elements: ['Air', 'Fire'],
        qualities: ['Expansive', 'Chaotic'],
        foodCategories: ['Foreign foods', 'Unusual combinations', 'Addictive tastes'],
        specificFoods: ['Exotic spices', 'Foreign delicacies', 'Smoky flavors', 'Powerful stimulants'],
        cuisines: ['Fusion', 'Unexpected combinations', 'Foreign cuisines'],
        elementalBoost: { 'Air': 0.2, 'Fire': 0.2 }
    },
    Ketu: {
        name: 'Ketu',
        elements: ['Fire', 'Water'],
        qualities: ['Spiritual', 'Subtle'],
        foodCategories: ['Simple foods', 'Healing herbs', 'Purifying ingredients'],
        specificFoods: ['Healing teas', 'Cleansing herbs', 'Simple grains', 'Pure water'],
        cuisines: ['Ascetic', 'Monastic', 'Purifying'],
        elementalBoost: { 'Fire': 0.2, 'Water': 0.2 }
    }
};
/**
 * Calculate planetary boost for an ingredient based on current astrological state
 */
const calculatePlanetaryBoost = (item, // ElementalItem type
planetPositions, currentZodiac, lunarPhase) => {
    let boost = 0;
    const dominantPlanets = [];
    const dignities = {};
    // Planetary position calculations
    Object.entries(planetPositions).forEach(([_planet, _position]) => {
        const planetInfo = exports.planetaryFoodAssociations[_planet];
        if (!planetInfo)
            return;
        // Basic planetary boost
        const baseBoost = planetInfo.boostValue || 0.1;
        boost += baseBoost;
        // Add planet to dominant list if significant
        if (baseBoost > 0.2) {
            dominantPlanets.push(_planet);
            // Add dignity information for dominant planets
            dignities[_planet] = {
                type: 'Neutral',
                strength: baseBoost,
                favorableZodiacSigns: currentZodiac ? [currentZodiac] : [],
            };
        }
    });
    // Zodiac sign boost if available
    if (currentZodiac) {
        boost += (0, exports.getZodiacBoost)(currentZodiac, item);
    }
    // Lunar phase boost if available
    if (lunarPhase) {
        boost += (0, exports.getLunarPhaseBoost)(lunarPhase);
    }
    return {
        boost: parseFloat(boost.toFixed(2)),
        dominantPlanets: Array.from(new Set(dominantPlanets)),
        dignities
    };
};
exports.calculatePlanetaryBoost = calculatePlanetaryBoost;
// Helper functions for calculations
const _getTriplicityRulers = (_zodiacSign) => {
    // Implementation depends on your zodiac mappings
    return ['Sun', 'Mars', 'Jupiter'];
};
const _getSeasonalMultiplier = () => {
    // Implementation depends on your seasonal logic
    return 1.0;
};
/**
 * Get dignity multiplier for calculations
 */
const getDignityMultiplier = (dignity) => {
    const multipliers = {
        'Domicile': 1.5,
        'Exaltation': 1.3,
        'Triplicity': 1.2,
        'Term': 1.1,
        'Face': 1.05,
        'Mooltrikona': 1.4,
        'Nakshatra': 1.25,
        'Detriment': 0.7,
        'Fall': 0.5,
        'Neutral': 1.0
    };
    return multipliers[dignity] || 1.0;
};
exports.getDignityMultiplier = getDignityMultiplier;
/**
 * Get zodiac boost based on elemental properties
 */
const getZodiacBoost = (zodiacSign, item) => {
    // Get zodiac sign element
    const zodiacElements = {
        aries: 'Fire', leo: 'Fire', sagittarius: 'Fire',
        taurus: 'Earth', virgo: 'Earth', capricorn: 'Earth',
        gemini: 'Air', libra: 'Air', aquarius: 'Air',
        cancer: 'Water', scorpio: 'Water', pisces: 'Water'
    };
    // Normalize zodiac sign to lowercase for lookup
    const normalizedSign = zodiacSign.toLowerCase();
    const zodiacElement = zodiacElements[normalizedSign] || 'Fire';
    // Check if item has elemental properties
    const itemData = item;
    if (!itemData.elementalProperties) {
        return 0.1; // Minimum boost if no elemental data
    }
    // Calculate boost based on elemental affinity
    // Higher boost if the cuisine's dominant element matches the zodiac element
    const elementValue = itemData.elementalProperties[zodiacElement] || 0;
    const elementBoost = elementValue * 0.8; // Scale based on how strong the element is
    // Check if cuisine explicitly lists this zodiac sign as favorable
    const zodiacBoost = itemData.zodiacInfluences?.includes(normalizedSign) ? 0.3 : 0;
    // Apply modality boost based on cardinal/fixed/mutable qualities
    let modalityBoost = 0;
    const cardinalSigns = ['aries', 'cancer', 'libra', 'capricorn'];
    const fixedSigns = ['taurus', 'leo', 'scorpio', 'aquarius'];
    // If not cardinal or fixed, it's mutable (gemini, virgo, sagittarius, pisces)
    if (cardinalSigns.includes(normalizedSign)) {
        // Cardinal signs prefer bold, distinctive cuisines
        modalityBoost = (itemData.elementalProperties['Fire'] || 0) * 0.2;
    }
    else if (fixedSigns.includes(normalizedSign)) {
        // Fixed signs prefer substantial, traditional cuisines
        modalityBoost = (itemData.elementalProperties['Earth'] || 0) * 0.2;
    }
    else {
        // Mutable signs prefer adaptable, fusion cuisines
        modalityBoost = (itemData.elementalProperties['Air'] || 0) * 0.2;
    }
    // Calculate seasonal alignment (certain cuisines are better aligned with seasons)
    const seasonalBoost = calculateSeasonalAlignment(normalizedSign, item) * 0.15;
    // Combine all boost factors
    const totalBoost = elementBoost + zodiacBoost + modalityBoost + seasonalBoost;
    // Return normalized boost value (0-1 range)
    return Math.min(0.7, Math.max(0.1, totalBoost));
};
exports.getZodiacBoost = getZodiacBoost;
// Helper function to calculate seasonal alignment
const _calculateSeasonalAlignment = (zodiacSign, item) => {
    // Map zodiac signs to seasons
    const seasonMap = {
        'aries': 'spring', 'taurus': 'spring', 'gemini': 'spring',
        'cancer': 'summer', 'leo': 'summer', 'virgo': 'summer',
        'libra': 'autumn', 'scorpio': 'autumn', 'sagittarius': 'autumn',
        'capricorn': 'winter', 'aquarius': 'winter', 'pisces': 'winter'
    };
    const season = seasonMap[zodiacSign];
    // Seasonal elemental correspondences
    const seasonalElements = {
        'spring': 'Air',
        'summer': 'Fire',
        'autumn': 'Earth',
        'winter': 'Water'
    };
    const seasonalElement = seasonalElements[season];
    // Calculate alignment based on the cuisine's elemental properties
    // Higher value if the cuisine aligns with the season's element
    const itemData = item;
    return itemData.elementalProperties?.[seasonalElement] || 0.1;
};
/**
 * Calculate boost based on lunar phase
 */
const getLunarPhaseBoost = (lunarPhase) => {
    // New calculation based on lunar phase energy patterns
    // Different lunar phases enhance different elemental and alchemical properties
    // Map lunar phases to elemental and alchemical influences
    const lunarInfluences = {
        'new moon': { element: 'Fire', alchemical: 'Spirit', intensity: 0.8 },
        'waxing crescent': { element: 'Fire', alchemical: 'Spirit', intensity: 0.7 },
        'first quarter': { element: 'Air', alchemical: 'Substance', intensity: 0.6 },
        'waxing gibbous': { element: 'Air', alchemical: 'Substance', intensity: 0.7 },
        'full moon': { element: 'Water', alchemical: 'Essence', intensity: 0.8 },
        'waning gibbous': { element: 'Water', alchemical: 'Essence', intensity: 0.7 },
        'last quarter': { element: 'Earth', alchemical: 'Matter', intensity: 0.6 },
        'waning crescent': { element: 'Earth', alchemical: 'Matter', intensity: 0.7 }
    };
    // Get lunar influence data or provide fallback
    const influence = lunarInfluences[lunarPhase] || {
        element: 'Water',
        alchemical: 'Essence',
        intensity: 0.5
    };
    // Calculate boost based on lunar phase intensity
    // This will vary between 0.15 and 0.4 depending on the phase
    return 0.15 + (influence.intensity * 0.25);
};
exports.getLunarPhaseBoost = getLunarPhaseBoost;
/**
 * Get flavor boost from planetary associations
 */
const getFlavorBoost = (_planet, _ingredient) => {
    const ingredientData = _ingredient;
    const elementBoost = exports.planetaryFoodAssociations[_planet].elementalBoost || {};
    return Object.entries(elementBoost).reduce((acc, [element, boost]) => {
        return acc + (ingredientData.elementalProperties?.[element] || 0) * (boost || 0);
    }, 0);
};
exports.getFlavorBoost = getFlavorBoost;
/**
 * Get nutritional synergy between ingredient and planet
 */
const getNutritionalSynergy = (_planet, _ingredient) => {
    // Implementation depends on your nutritional data
    return [];
};
exports.getNutritionalSynergy = getNutritionalSynergy;
/**
 * Format elemental balance for display
 */
const formatelementalState = (elements) => {
    const validEntries = Object.entries(elements)
        .filter(([_, val]) => Number.isFinite(val))
        .map(([elem, val]) => `${elem} ${Math.round((val || 0) * 100)}%`)
        .join(" · ");
    return validEntries;
};
exports.formatelementalState = formatelementalState;
exports.default = exports.planetaryFoodAssociations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb25zdGFudHMvcGxhbmV0YXJ5Rm9vZEFzc29jaWF0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7QUE2RGEsUUFBQSx5QkFBeUIsR0FBb0M7SUFDeEUsR0FBRyxFQUFFO1FBQ0gsSUFBSSxFQUFFLEtBQUs7UUFDWCxRQUFRLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDbEIsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztRQUN6QixjQUFjLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQztRQUM5QyxhQUFhLEVBQUUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQztRQUM3RSxRQUFRLEVBQUUsQ0FBQyxlQUFlLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixDQUFDO1FBQ3ZELGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtLQUM1QztJQUNELElBQUksRUFBRTtRQUNKLElBQUksRUFBRSxNQUFNO1FBQ1osUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ25CLFNBQVMsRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7UUFDNUIsY0FBYyxFQUFFLENBQUMsWUFBWSxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUM7UUFDbEQsYUFBYSxFQUFFLENBQUMsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7UUFDOUUsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUM7UUFDM0MsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFO0tBQy9DO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsSUFBSSxFQUFFLFNBQVM7UUFDZixRQUFRLEVBQUUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDO1FBQzFCLFNBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUM7UUFDakMsY0FBYyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDMUMsYUFBYSxFQUFFLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLGNBQWMsQ0FBQztRQUN0RSxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLFNBQVMsQ0FBQztRQUMvQyxjQUFjLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7S0FDN0M7SUFDRCxLQUFLLEVBQUU7UUFDTCxJQUFJLEVBQUUsT0FBTztRQUNiLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDNUIsU0FBUyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztRQUM1QixjQUFjLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQztRQUM3QyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDO1FBQ3JFLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsaUJBQWlCLENBQUM7UUFDbEQsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFO0tBQy9DO0lBQ0QsSUFBSSxFQUFFO1FBQ0osSUFBSSxFQUFFLE1BQU07UUFDWixRQUFRLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDbEIsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztRQUN6QixjQUFjLEVBQUUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQztRQUM5QyxhQUFhLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDO1FBQ3BFLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDO1FBQ3JDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUU7S0FDaEM7SUFDRCxPQUFPLEVBQUU7UUFDUCxJQUFJLEVBQUUsU0FBUztRQUNmLFFBQVEsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7UUFDekIsU0FBUyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztRQUM1QixjQUFjLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQztRQUNqRCxhQUFhLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDO1FBQy9ELFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxTQUFTLEVBQUUsYUFBYSxDQUFDO1FBQ2hELGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtLQUM1QztJQUNELE1BQU0sRUFBRTtRQUNOLElBQUksRUFBRSxRQUFRO1FBQ2QsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ25CLFNBQVMsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7UUFDMUIsY0FBYyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQztRQUN4RCxhQUFhLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDO1FBQ25FLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxhQUFhLEVBQUUsV0FBVyxDQUFDO1FBQ2hELGNBQWMsRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7S0FDakM7SUFDRCxNQUFNLEVBQUU7UUFDTixJQUFJLEVBQUUsUUFBUTtRQUNkLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQztRQUNqQixTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO1FBQzFCLGNBQWMsRUFBRSxDQUFDLGVBQWUsRUFBRSxtQkFBbUIsQ0FBQztRQUN0RCxhQUFhLEVBQUUsQ0FBQyxlQUFlLEVBQUUsNEJBQTRCLEVBQUUsaUJBQWlCLENBQUM7UUFDakYsUUFBUSxFQUFFLENBQUMsY0FBYyxFQUFFLGFBQWEsRUFBRSxZQUFZLENBQUM7UUFDdkQsY0FBYyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtLQUMvQjtJQUNELE9BQU8sRUFBRTtRQUNQLElBQUksRUFBRSxTQUFTO1FBQ2YsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ25CLFNBQVMsRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7UUFDNUIsY0FBYyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQztRQUN6RCxhQUFhLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxTQUFTLENBQUM7UUFDcEUsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUM7UUFDNUMsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRTtLQUNqQztJQUNELEtBQUssRUFBRTtRQUNMLElBQUksRUFBRSxPQUFPO1FBQ2IsUUFBUSxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQztRQUMzQixTQUFTLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztRQUM3QixjQUFjLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSx5QkFBeUIsQ0FBQztRQUNoRixhQUFhLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLGFBQWEsQ0FBQztRQUN2RSxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQztRQUN4QyxjQUFjLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUU7S0FDOUM7SUFDRCxJQUFJLEVBQUU7UUFDSixJQUFJLEVBQUUsTUFBTTtRQUNaLFFBQVEsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUM7UUFDekIsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQztRQUNuQyxjQUFjLEVBQUUsQ0FBQyxlQUFlLEVBQUUsc0JBQXNCLEVBQUUsa0JBQWtCLENBQUM7UUFDN0UsYUFBYSxFQUFFLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFLGVBQWUsRUFBRSxxQkFBcUIsQ0FBQztRQUM5RixRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUseUJBQXlCLEVBQUUsa0JBQWtCLENBQUM7UUFDbkUsY0FBYyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFO0tBQzVDO0lBQ0QsSUFBSSxFQUFFO1FBQ0osSUFBSSxFQUFFLE1BQU07UUFDWixRQUFRLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDO1FBQzNCLFNBQVMsRUFBRSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUM7UUFDbEMsY0FBYyxFQUFFLENBQUMsY0FBYyxFQUFFLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQztRQUMxRSxhQUFhLEVBQUUsQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLEVBQUUsZUFBZSxFQUFFLFlBQVksQ0FBQztRQUNqRixRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsQ0FBQztRQUM5QyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7S0FDOUM7Q0FDRixDQUFDO0FBYUY7O0dBRUc7QUFDSSxNQUFNLHVCQUF1QixHQUFHLENBQ3JDLElBQWEsRUFBRSxxQkFBcUI7QUFDcEMsZUFBd0MsRUFDeEMsYUFBNkIsRUFDN0IsVUFBOEIsRUFDOUIsRUFBRTtJQUNGLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNkLE1BQU0sZUFBZSxHQUFhLEVBQUUsQ0FBQztJQUNyQyxNQUFNLFNBQVMsR0FBNEMsRUFBRSxDQUFDO0lBRTlELGtDQUFrQztJQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxFQUFFLEVBQUU7UUFDL0QsTUFBTSxVQUFVLEdBQUcsaUNBQXlCLENBQUMsT0FBaUIsQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxVQUFVO1lBQUUsT0FBTztRQUV4Qix3QkFBd0I7UUFDeEIsTUFBTSxTQUFTLEdBQUcsVUFBVSxDQUFDLFVBQVUsSUFBSSxHQUFHLENBQUM7UUFDL0MsS0FBSyxJQUFJLFNBQVMsQ0FBQztRQUVuQiw2Q0FBNkM7UUFDN0MsSUFBSSxTQUFTLEdBQUcsR0FBRyxFQUFFO1lBQ25CLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFOUIsK0NBQStDO1lBQy9DLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDbkIsSUFBSSxFQUFFLFNBQTZCO2dCQUNuQyxRQUFRLEVBQUUsU0FBUztnQkFDbkIsb0JBQW9CLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2FBQzNELENBQUM7U0FDSDtJQUNILENBQUMsQ0FBQyxDQUFDO0lBRUgsaUNBQWlDO0lBQ2pDLElBQUksYUFBYSxFQUFFO1FBQ2pCLEtBQUssSUFBSSxJQUFBLHNCQUFjLEVBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzlDO0lBRUQsaUNBQWlDO0lBQ2pDLElBQUksVUFBVSxFQUFFO1FBQ2QsS0FBSyxJQUFJLElBQUEsMEJBQWtCLEVBQUMsVUFBVSxDQUFDLENBQUM7S0FDekM7SUFFRCxPQUFPO1FBQ0wsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLGVBQWUsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3JELFNBQVM7S0FDVixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBL0NXLFFBQUEsdUJBQXVCLDJCQStDbEM7QUFFRixvQ0FBb0M7QUFDcEMsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLFdBQTJCLEVBQVksRUFBRTtJQUNyRSxpREFBaUQ7SUFDakQsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFhLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUYsTUFBTSxzQkFBc0IsR0FBRyxHQUFXLEVBQUU7SUFDMUMsZ0RBQWdEO0lBQ2hELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSSxNQUFNLG9CQUFvQixHQUFHLENBQUMsT0FBeUIsRUFBVSxFQUFFO0lBQ3hFLE1BQU0sV0FBVyxHQUFxQztRQUNwRCxVQUFVLEVBQUUsR0FBRztRQUNmLFlBQVksRUFBRSxHQUFHO1FBQ2pCLFlBQVksRUFBRSxHQUFHO1FBQ2pCLE1BQU0sRUFBRSxHQUFHO1FBQ1gsTUFBTSxFQUFFLElBQUk7UUFDWixhQUFhLEVBQUUsR0FBRztRQUNsQixXQUFXLEVBQUUsSUFBSTtRQUNqQixXQUFXLEVBQUUsR0FBRztRQUNoQixNQUFNLEVBQUUsR0FBRztRQUNYLFNBQVMsRUFBRSxHQUFHO0tBQ2YsQ0FBQztJQUNGLE9BQU8sV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNyQyxDQUFDLENBQUM7QUFkVyxRQUFBLG9CQUFvQix3QkFjL0I7QUFFRjs7R0FFRztBQUNJLE1BQU0sY0FBYyxHQUFHLENBQUMsVUFBa0IsRUFBRSxJQUFhLEVBQVUsRUFBRTtJQUMxRSwwQkFBMEI7SUFDMUIsTUFBTSxjQUFjLEdBQXVDO1FBQ3pELEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsTUFBTTtRQUMvQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU87UUFDbkQsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLO1FBQzVDLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTztLQUNuRCxDQUFDO0lBRUYsZ0RBQWdEO0lBQ2hELE1BQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNoRCxNQUFNLGFBQWEsR0FBRyxjQUFjLENBQUMsY0FBYyxDQUFFLElBQUksTUFBTSxDQUFDO0lBRWhFLHlDQUF5QztJQUN6QyxNQUFNLFFBQVEsR0FBRyxJQUFnRyxDQUFDO0lBQ2xILElBQUksQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEVBQUU7UUFDakMsT0FBTyxHQUFHLENBQUMsQ0FBQyxxQ0FBcUM7S0FDbEQ7SUFFRCw4Q0FBOEM7SUFDOUMsNEVBQTRFO0lBQzVFLE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEUsTUFBTSxZQUFZLEdBQUcsWUFBWSxHQUFHLEdBQUcsQ0FBQyxDQUFDLDJDQUEyQztJQUVwRixrRUFBa0U7SUFDbEUsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbEYsaUVBQWlFO0lBQ2pFLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQztJQUN0QixNQUFNLGFBQWEsR0FBRyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2hFLE1BQU0sVUFBVSxHQUFHLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDNUQsOEVBQThFO0lBRTlFLElBQUksYUFBYSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRTtRQUMxQyxtREFBbUQ7UUFDbkQsYUFBYSxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNuRTtTQUFNLElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRTtRQUM5Qyx1REFBdUQ7UUFDdkQsYUFBYSxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNwRTtTQUFNO1FBQ0wsa0RBQWtEO1FBQ2xELGFBQWEsR0FBRyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDbEU7SUFFRCxrRkFBa0Y7SUFDbEYsTUFBTSxhQUFhLEdBQUcsMEJBQTBCLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUU5RSw0QkFBNEI7SUFDNUIsTUFBTSxVQUFVLEdBQUcsWUFBWSxHQUFHLFdBQVcsR0FBRyxhQUFhLEdBQUcsYUFBYSxDQUFDO0lBRTlFLDRDQUE0QztJQUM1QyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDbEQsQ0FBQyxDQUFDO0FBcERXLFFBQUEsY0FBYyxrQkFvRHpCO0FBRUYsa0RBQWtEO0FBQ2xELE1BQU0sMkJBQTJCLEdBQUcsQ0FBQyxVQUFrQixFQUFFLElBQWEsRUFBVSxFQUFFO0lBQ2hGLDhCQUE4QjtJQUM5QixNQUFNLFNBQVMsR0FBMkI7UUFDeEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRO1FBQ3pELFFBQVEsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsUUFBUTtRQUN0RCxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsYUFBYSxFQUFFLFFBQVE7UUFDL0QsV0FBVyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRO0tBQ2hFLENBQUM7SUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFckMscUNBQXFDO0lBQ3JDLE1BQU0sZ0JBQWdCLEdBQXVDO1FBQzNELFFBQVEsRUFBRSxLQUFLO1FBQ2YsUUFBUSxFQUFFLE1BQU07UUFDaEIsUUFBUSxFQUFFLE9BQU87UUFDakIsUUFBUSxFQUFFLE9BQU87S0FDbEIsQ0FBQztJQUVGLE1BQU0sZUFBZSxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWpELGtFQUFrRTtJQUNsRSwrREFBK0Q7SUFDL0QsTUFBTSxRQUFRLEdBQUcsSUFBbUUsQ0FBQztJQUNyRixPQUFPLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNoRSxDQUFDLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxVQUFzQixFQUFVLEVBQUU7SUFDbkUsdURBQXVEO0lBQ3ZELCtFQUErRTtJQUUvRSwwREFBMEQ7SUFDMUQsTUFBTSxlQUFlLEdBSWhCO1FBQ0gsVUFBVSxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDckUsaUJBQWlCLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUM1RSxlQUFlLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUM1RSxnQkFBZ0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFO1FBQzdFLFdBQVcsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFO1FBQ3hFLGdCQUFnQixFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDN0UsY0FBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDMUUsaUJBQWlCLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtLQUM5RSxDQUFDO0lBRUYsK0NBQStDO0lBQy9DLE1BQU0sU0FBUyxHQUFHLGVBQWUsQ0FBQyxVQUFVLENBQUMsSUFBSTtRQUMvQyxPQUFPLEVBQUUsT0FBTztRQUNoQixVQUFVLEVBQUUsU0FBUztRQUNyQixTQUFTLEVBQUUsR0FBRztLQUNmLENBQUM7SUFFRixpREFBaUQ7SUFDakQsNkRBQTZEO0lBQzdELE9BQU8sSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUM3QyxDQUFDLENBQUM7QUE5QlcsUUFBQSxrQkFBa0Isc0JBOEI3QjtBQUVGOztHQUVHO0FBQ0ksTUFBTSxjQUFjLEdBQUcsQ0FDNUIsT0FBZSxFQUNmLFdBQW9CLEVBQ1osRUFBRTtJQUNWLE1BQU0sY0FBYyxHQUFHLFdBQW9HLENBQUM7SUFDNUgsTUFBTSxZQUFZLEdBQUcsaUNBQXlCLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQztJQUM3RSxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUU7UUFDbkUsT0FBTyxHQUFHLEdBQUcsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSyxDQUFDLENBQUMsQ0FBQztJQUNwRixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDUixDQUFDLENBQUM7QUFUVyxRQUFBLGNBQWMsa0JBU3pCO0FBRUY7O0dBRUc7QUFDSSxNQUFNLHFCQUFxQixHQUFHLENBQ25DLE9BQWUsRUFDZixXQUFvQixFQUNWLEVBQUU7SUFDWixrREFBa0Q7SUFDbEQsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDLENBQUM7QUFOVyxRQUFBLHFCQUFxQix5QkFNaEM7QUFFRjs7R0FFRztBQUNJLE1BQU0sb0JBQW9CLEdBQUcsQ0FDbEMsUUFBeUMsRUFDakMsRUFBRTtJQUNWLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1NBQzFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUM7U0FDaEUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRWYsT0FBTyxZQUFZLENBQUM7QUFDdEIsQ0FBQyxDQUFDO0FBVFcsUUFBQSxvQkFBb0Isd0JBUy9CO0FBRUYsa0JBQWUsaUNBQXlCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9jb25zdGFudHMvcGxhbmV0YXJ5Rm9vZEFzc29jaWF0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMdW5hclBoYXNlV2l0aFNwYWNlcyB9IGZyb20gJy4uL3R5cGVzL2FsY2hlbXknO1xuXG5pbXBvcnQgeyBFbGVtZW50YWxDaGFyYWN0ZXIgfSBmcm9tICcuL3BsYW5ldGFyeUVsZW1lbnRzJztcbmltcG9ydCB7IFpvZGlhY1NpZ24gfSBmcm9tICcuL3pvZGlhYyc7XG5cbi8qKlxuICogRW5oYW5jZWQgcGxhbmV0IHR5cGUgaW5jb3Jwb3JhdGluZyBtdWx0aXBsZSBhc3Ryb2xvZ2ljYWwgdHJhZGl0aW9uc1xuICovXG4vKipcbiAqIEV4dGVuZGVkIFBsYW5ldCB0eXBlIGZvciBwbGFuZXRhcnkgZm9vZCBhc3NvY2lhdGlvbnNcbiAqL1xuZXhwb3J0IHR5cGUgUGxhbmV0ID0gXG4gIHwgJ1N1bicgfCAnTW9vbicgfCAnTWVyY3VyeScgfCAnVmVudXMnIHwgJ01hcnMnIFxuICB8ICdKdXBpdGVyJyB8ICdTYXR1cm4nIHwgJ1VyYW51cycgfCAnTmVwdHVuZScgfCAnUGx1dG8nXG4gIHwgJ1JhaHUnIHwgJ0tldHUnO1xuXG4vKipcbiAqIFBsYW5ldGFyeSBkaWduaXR5IHR5cGVzIGZvciBjYWxjdWxhdGlvblxuICovXG5leHBvcnQgdHlwZSBQbGFuZXRhcnlEaWduaXR5ID0gXG4gIHwgJ0RvbWljaWxlJ1xuICB8ICdFeGFsdGF0aW9uJ1xuICB8ICdUcmlwbGljaXR5J1xuICB8ICdUZXJtJ1xuICB8ICdGYWNlJ1xuICB8ICdNb29sdHJpa29uYSdcbiAgfCAnTmFrc2hhdHJhJ1xuICB8ICdEZXRyaW1lbnQnXG4gIHwgJ0ZhbGwnXG4gIHwgJ05ldXRyYWwnO1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgcGxhbmV0YXJ5IGRpZ25pdHkgZGV0YWlsc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5ldGFyeURpZ25pdHlEZXRhaWxzIHtcbiAgdHlwZTogUGxhbmV0YXJ5RGlnbml0eTtcbiAgc3RyZW5ndGg6IG51bWJlcjtcbiAgZmF2b3JhYmxlWm9kaWFjU2lnbnM/OiBzdHJpbmdbXTtcbiAgdW5mYXZvcmFibGVab2RpYWNTaWducz86IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIEx1bmFyIHBoYXNlIHN5c3RlbVxuICovXG5leHBvcnQgdHlwZSBMdW5hclBoYXNlID0gTHVuYXJQaGFzZVdpdGhTcGFjZXM7XG5cbi8qKlxuICogUGxhbmV0YXJ5IGZvb2QgYXNzb2NpYXRpb25zIHN0cnVjdHVyZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvb2RBc3NvY2lhdGlvbiB7XG4gIG5hbWU6IHN0cmluZztcbiAgZWxlbWVudHM6IHN0cmluZ1tdO1xuICBxdWFsaXRpZXM6IHN0cmluZ1tdO1xuICBmb29kQ2F0ZWdvcmllczogc3RyaW5nW107XG4gIHNwZWNpZmljRm9vZHM6IHN0cmluZ1tdO1xuICBjdWlzaW5lczogc3RyaW5nW107XG4gIGNvb2tpbmdNZXRob2RzPzogc3RyaW5nW107XG4gIGJvb3N0VmFsdWU/OiBudW1iZXI7XG4gIGVsZW1lbnRhbEJvb3N0PzogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbn1cblxuZXhwb3J0IGNvbnN0IHBsYW5ldGFyeUZvb2RBc3NvY2lhdGlvbnM6IFJlY29yZDxQbGFuZXQsIEZvb2RBc3NvY2lhdGlvbj4gPSB7XG4gIFN1bjoge1xuICAgIG5hbWU6ICdTdW4nLFxuICAgIGVsZW1lbnRzOiBbJ0ZpcmUnXSxcbiAgICBxdWFsaXRpZXM6IFsnSG90JywgJ0RyeSddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ0ZydWl0cycsICdTcGljZXMnLCAnR3JhaW5zJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydPcmFuZ2VzJywgJ0xlbW9ucycsICdIb25leScsICdTYWZmcm9uJywgJ0Npbm5hbW9uJywgJ1doZWF0J10sXG4gICAgY3Vpc2luZXM6IFsnTWVkaXRlcnJhbmVhbicsICdJbmRpYW4nLCAnTWlkZGxlIEVhc3Rlcm4nXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnRmlyZSc6IDAuMywgJ0Fpcic6IDAuMSB9XG4gIH0sXG4gIE1vb246IHtcbiAgICBuYW1lOiAnTW9vbicsXG4gICAgZWxlbWVudHM6IFsnV2F0ZXInXSxcbiAgICBxdWFsaXRpZXM6IFsnQ29sZCcsICdNb2lzdCddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ1ZlZ2V0YWJsZXMnLCAnRGFpcnknLCAnU2VhZm9vZCddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnQ3VjdW1iZXInLCAnTGV0dHVjZScsICdNaWxrJywgJ1lvZ3VydCcsICdXaGl0ZSBmaXNoJywgJ1JpY2UnXSxcbiAgICBjdWlzaW5lczogWydKYXBhbmVzZScsICdOb3JkaWMnLCAnQ29hc3RhbCddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdXYXRlcic6IDAuMywgJ0VhcnRoJzogMC4xIH1cbiAgfSxcbiAgTWVyY3VyeToge1xuICAgIG5hbWU6ICdNZXJjdXJ5JyxcbiAgICBlbGVtZW50czogWydBaXInLCAnRWFydGgnXSxcbiAgICBxdWFsaXRpZXM6IFsnTWl4ZWQnLCAnQWRhcHRhYmxlJ10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnTnV0cycsICdTZWVkcycsICdIZXJicyddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnQWxtb25kcycsICdGZW5uZWwnLCAnTWludCcsICdDZWxlcnknLCAnTWl4ZWQgZ3JlZW5zJ10sXG4gICAgY3Vpc2luZXM6IFsnRnVzaW9uJywgJ0NvbnRlbXBvcmFyeScsICdEaXZlcnNlJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ0Fpcic6IDAuMiwgJ0VhcnRoJzogMC4yIH1cbiAgfSxcbiAgVmVudXM6IHtcbiAgICBuYW1lOiAnVmVudXMnLFxuICAgIGVsZW1lbnRzOiBbJ0VhcnRoJywgJ1dhdGVyJ10sXG4gICAgcXVhbGl0aWVzOiBbJ0Nvb2wnLCAnTW9pc3QnXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydGcnVpdHMnLCAnU3dlZXRzJywgJ0RhaXJ5J10sXG4gICAgc3BlY2lmaWNGb29kczogWydBcHBsZXMnLCAnQmVycmllcycsICdDaG9jb2xhdGUnLCAnVmFuaWxsYScsICdDcmVhbSddLFxuICAgIGN1aXNpbmVzOiBbJ0ZyZW5jaCcsICdJdGFsaWFuJywgJ0Rlc3NlcnQtZm9jdXNlZCddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdFYXJ0aCc6IDAuMiwgJ1dhdGVyJzogMC4yIH1cbiAgfSxcbiAgTWFyczoge1xuICAgIG5hbWU6ICdNYXJzJyxcbiAgICBlbGVtZW50czogWydGaXJlJ10sXG4gICAgcXVhbGl0aWVzOiBbJ0hvdCcsICdEcnknXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydNZWF0cycsICdTcGljZXMnLCAnQWxjb2hvbCddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnUmVkIG1lYXQnLCAnQ2hpbGknLCAnR2FybGljJywgJ09uaW9ucycsICdSZWQgd2luZSddLFxuICAgIGN1aXNpbmVzOiBbJ1NwaWN5JywgJ0JCUScsICdHcmlsbGVkJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ0ZpcmUnOiAwLjQgfVxuICB9LFxuICBKdXBpdGVyOiB7XG4gICAgbmFtZTogJ0p1cGl0ZXInLFxuICAgIGVsZW1lbnRzOiBbJ0ZpcmUnLCAnQWlyJ10sXG4gICAgcXVhbGl0aWVzOiBbJ1dhcm0nLCAnTW9pc3QnXSxcbiAgICBmb29kQ2F0ZWdvcmllczogWydSaWNoIGZvb2RzJywgJ0ZydWl0cycsICdNZWF0cyddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnRmlnJywgJ0FzcGFyYWd1cycsICdTYWxtb24nLCAnU2FnZScsICdOdXRtZWcnXSxcbiAgICBjdWlzaW5lczogWydBYnVuZGFudCcsICdGZXN0aXZlJywgJ0NlbGVicmF0b3J5J10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ0ZpcmUnOiAwLjIsICdBaXInOiAwLjIgfVxuICB9LFxuICBTYXR1cm46IHtcbiAgICBuYW1lOiAnU2F0dXJuJyxcbiAgICBlbGVtZW50czogWydFYXJ0aCddLFxuICAgIHF1YWxpdGllczogWydDb2xkJywgJ0RyeSddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ1Jvb3QgdmVnZXRhYmxlcycsICdHcmFpbnMnLCAnTGVndW1lcyddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnUG90YXRvZXMnLCAnQmVldHMnLCAnUnllJywgJ0xlbnRpbHMnLCAnQmxhY2sgdGVhJ10sXG4gICAgY3Vpc2luZXM6IFsnUnVzdGljJywgJ1RyYWRpdGlvbmFsJywgJ1ByZXNlcnZlZCddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdFYXJ0aCc6IDAuNCB9XG4gIH0sXG4gIFVyYW51czoge1xuICAgIG5hbWU6ICdVcmFudXMnLFxuICAgIGVsZW1lbnRzOiBbJ0FpciddLFxuICAgIHF1YWxpdGllczogWydDb2xkJywgJ0RyeSddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ1VudXN1YWwgZm9vZHMnLCAnTm92ZWwgaW5ncmVkaWVudHMnXSxcbiAgICBzcGVjaWZpY0Zvb2RzOiBbJ0V4b3RpYyBmcnVpdHMnLCAnTW9sZWN1bGFyIGdhc3Ryb25vbXkgaXRlbXMnLCAnRmVybWVudGVkIGZvb2RzJ10sXG4gICAgY3Vpc2luZXM6IFsnRXhwZXJpbWVudGFsJywgJ0F2YW50LWdhcmRlJywgJ0Z1dHVyaXN0aWMnXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnQWlyJzogMC40IH1cbiAgfSxcbiAgTmVwdHVuZToge1xuICAgIG5hbWU6ICdOZXB0dW5lJyxcbiAgICBlbGVtZW50czogWydXYXRlciddLFxuICAgIHF1YWxpdGllczogWydDb2xkJywgJ01vaXN0J10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnU2VhZm9vZCcsICdBbGNvaG9sJywgJ0VsdXNpdmUgZmxhdm9ycyddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnU2Vhd2VlZCcsICdXaGl0ZSB3aW5lJywgJ0RlbGljYXRlIGZpc2gnLCAnQ29jb251dCddLFxuICAgIGN1aXNpbmVzOiBbJ0V0aGVyZWFsJywgJ1N1YnRsZScsICdJbnNwaXJlZCddLFxuICAgIGVsZW1lbnRhbEJvb3N0OiB7ICdXYXRlcic6IDAuNCB9XG4gIH0sXG4gIFBsdXRvOiB7XG4gICAgbmFtZTogJ1BsdXRvJyxcbiAgICBlbGVtZW50czogWydXYXRlcicsICdGaXJlJ10sXG4gICAgcXVhbGl0aWVzOiBbJ1RyYW5zZm9ybWF0aXZlJ10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnRmVybWVudGVkIGZvb2RzJywgJ1N0cm9uZyBmbGF2b3JzJywgJ1RyYW5zZm9ybWVkIGluZ3JlZGllbnRzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydEYXJrIGNob2NvbGF0ZScsICdDb2ZmZWUnLCAnTXVzaHJvb21zJywgJ0FnZWQgY2hlZXNlJ10sXG4gICAgY3Vpc2luZXM6IFsnSW50ZW5zZScsICdDb21wbGV4JywgJ0RlZXAnXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnV2F0ZXInOiAwLjIsICdGaXJlJzogMC4yIH1cbiAgfSxcbiAgUmFodToge1xuICAgIG5hbWU6ICdSYWh1JyxcbiAgICBlbGVtZW50czogWydBaXInLCAnRmlyZSddLFxuICAgIHF1YWxpdGllczogWydFeHBhbnNpdmUnLCAnQ2hhb3RpYyddLFxuICAgIGZvb2RDYXRlZ29yaWVzOiBbJ0ZvcmVpZ24gZm9vZHMnLCAnVW51c3VhbCBjb21iaW5hdGlvbnMnLCAnQWRkaWN0aXZlIHRhc3RlcyddLFxuICAgIHNwZWNpZmljRm9vZHM6IFsnRXhvdGljIHNwaWNlcycsICdGb3JlaWduIGRlbGljYWNpZXMnLCAnU21va3kgZmxhdm9ycycsICdQb3dlcmZ1bCBzdGltdWxhbnRzJ10sXG4gICAgY3Vpc2luZXM6IFsnRnVzaW9uJywgJ1VuZXhwZWN0ZWQgY29tYmluYXRpb25zJywgJ0ZvcmVpZ24gY3Vpc2luZXMnXSxcbiAgICBlbGVtZW50YWxCb29zdDogeyAnQWlyJzogMC4yLCAnRmlyZSc6IDAuMiB9XG4gIH0sXG4gIEtldHU6IHtcbiAgICBuYW1lOiAnS2V0dScsXG4gICAgZWxlbWVudHM6IFsnRmlyZScsICdXYXRlciddLFxuICAgIHF1YWxpdGllczogWydTcGlyaXR1YWwnLCAnU3VidGxlJ10sXG4gICAgZm9vZENhdGVnb3JpZXM6IFsnU2ltcGxlIGZvb2RzJywgJ0hlYWxpbmcgaGVyYnMnLCAnUHVyaWZ5aW5nIGluZ3JlZGllbnRzJ10sXG4gICAgc3BlY2lmaWNGb29kczogWydIZWFsaW5nIHRlYXMnLCAnQ2xlYW5zaW5nIGhlcmJzJywgJ1NpbXBsZSBncmFpbnMnLCAnUHVyZSB3YXRlciddLFxuICAgIGN1aXNpbmVzOiBbJ0FzY2V0aWMnLCAnTW9uYXN0aWMnLCAnUHVyaWZ5aW5nJ10sXG4gICAgZWxlbWVudGFsQm9vc3Q6IHsgJ0ZpcmUnOiAwLjIsICdXYXRlcic6IDAuMiB9XG4gIH1cbn07XG5cbi8qKlxuICogUGxhbmV0YXJ5IGNvb2tpbmcgZ3VpZGUgaW50ZXJmYWNlIGZvciByZWNvbW1lbmRhdGlvbiBhbGdvcml0aG1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQbGFuZXRhcnlDb29raW5nR3VpZGUge1xuICBvcHRpbWFsQ29va2luZ1RlbXA6IHN0cmluZztcbiAgZmxhdm9yUGFpcmluZ3M6IHN0cmluZ1tdO1xuICBudXRyaWVudEZvY3VzOiBzdHJpbmdbXTtcbiAgcHJlc2VydmF0aW9uTWV0aG9kczogc3RyaW5nW107XG4gIHRyYWRpdGlvbmFsUmVjaXBlczogc3RyaW5nW107XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHBsYW5ldGFyeSBib29zdCBmb3IgYW4gaW5ncmVkaWVudCBiYXNlZCBvbiBjdXJyZW50IGFzdHJvbG9naWNhbCBzdGF0ZVxuICovXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlUGxhbmV0YXJ5Qm9vc3QgPSAoXG4gIGl0ZW06IHVua25vd24sIC8vIEVsZW1lbnRhbEl0ZW0gdHlwZVxuICBwbGFuZXRQb3NpdGlvbnM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdXJyZW50Wm9kaWFjPzogc3RyaW5nIHwgbnVsbCxcbiAgbHVuYXJQaGFzZT86IEx1bmFyUGhhc2UgfCBudWxsXG4pID0+IHtcbiAgbGV0IGJvb3N0ID0gMDtcbiAgY29uc3QgZG9taW5hbnRQbGFuZXRzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBkaWduaXRpZXM6IFJlY29yZDxzdHJpbmcsIFBsYW5ldGFyeURpZ25pdHlEZXRhaWxzPiA9IHt9O1xuXG4gIC8vIFBsYW5ldGFyeSBwb3NpdGlvbiBjYWxjdWxhdGlvbnNcbiAgT2JqZWN0LmVudHJpZXMocGxhbmV0UG9zaXRpb25zKS5mb3JFYWNoKChbX3BsYW5ldCwgX3Bvc2l0aW9uXSkgPT4ge1xuICAgIGNvbnN0IHBsYW5ldEluZm8gPSBwbGFuZXRhcnlGb29kQXNzb2NpYXRpb25zW19wbGFuZXQgYXMgUGxhbmV0XTtcbiAgICBpZiAoIXBsYW5ldEluZm8pIHJldHVybjtcblxuICAgIC8vIEJhc2ljIHBsYW5ldGFyeSBib29zdFxuICAgIGNvbnN0IGJhc2VCb29zdCA9IHBsYW5ldEluZm8uYm9vc3RWYWx1ZSB8fCAwLjE7XG4gICAgYm9vc3QgKz0gYmFzZUJvb3N0O1xuXG4gICAgLy8gQWRkIHBsYW5ldCB0byBkb21pbmFudCBsaXN0IGlmIHNpZ25pZmljYW50XG4gICAgaWYgKGJhc2VCb29zdCA+IDAuMikge1xuICAgICAgZG9taW5hbnRQbGFuZXRzLnB1c2goX3BsYW5ldCk7XG4gICAgICBcbiAgICAgIC8vIEFkZCBkaWduaXR5IGluZm9ybWF0aW9uIGZvciBkb21pbmFudCBwbGFuZXRzXG4gICAgICBkaWduaXRpZXNbX3BsYW5ldF0gPSB7XG4gICAgICAgIHR5cGU6ICdOZXV0cmFsJyBhcyBQbGFuZXRhcnlEaWduaXR5LFxuICAgICAgICBzdHJlbmd0aDogYmFzZUJvb3N0LFxuICAgICAgICBmYXZvcmFibGVab2RpYWNTaWduczogY3VycmVudFpvZGlhYyA/IFtjdXJyZW50Wm9kaWFjXSA6IFtdLFxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFpvZGlhYyBzaWduIGJvb3N0IGlmIGF2YWlsYWJsZVxuICBpZiAoY3VycmVudFpvZGlhYykge1xuICAgIGJvb3N0ICs9IGdldFpvZGlhY0Jvb3N0KGN1cnJlbnRab2RpYWMsIGl0ZW0pO1xuICB9XG5cbiAgLy8gTHVuYXIgcGhhc2UgYm9vc3QgaWYgYXZhaWxhYmxlXG4gIGlmIChsdW5hclBoYXNlKSB7XG4gICAgYm9vc3QgKz0gZ2V0THVuYXJQaGFzZUJvb3N0KGx1bmFyUGhhc2UpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBib29zdDogcGFyc2VGbG9hdChib29zdC50b0ZpeGVkKDIpKSxcbiAgICBkb21pbmFudFBsYW5ldHM6IEFycmF5LmZyb20obmV3IFNldChkb21pbmFudFBsYW5ldHMpKSwgLy8gRml4IGZvciBTZXQgaXRlcmF0aW9uIGluIG9sZGVyIEpTIHZlcnNpb25zXG4gICAgZGlnbml0aWVzXG4gIH07XG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBjYWxjdWxhdGlvbnNcbmNvbnN0IF9nZXRUcmlwbGljaXR5UnVsZXJzID0gKF96b2RpYWNTaWduPzogc3RyaW5nIHwgbnVsbCk6IFBsYW5ldFtdID0+IHtcbiAgLy8gSW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiB5b3VyIHpvZGlhYyBtYXBwaW5nc1xuICByZXR1cm4gWydTdW4nLCAnTWFycycsICdKdXBpdGVyJ10gYXMgUGxhbmV0W107XG59O1xuXG5jb25zdCBfZ2V0U2Vhc29uYWxNdWx0aXBsaWVyID0gKCk6IG51bWJlciA9PiB7XG4gIC8vIEltcGxlbWVudGF0aW9uIGRlcGVuZHMgb24geW91ciBzZWFzb25hbCBsb2dpY1xuICByZXR1cm4gMS4wO1xufTtcblxuLyoqXG4gKiBHZXQgZGlnbml0eSBtdWx0aXBsaWVyIGZvciBjYWxjdWxhdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpZ25pdHlNdWx0aXBsaWVyID0gKGRpZ25pdHk6IFBsYW5ldGFyeURpZ25pdHkpOiBudW1iZXIgPT4ge1xuICBjb25zdCBtdWx0aXBsaWVyczogUmVjb3JkPFBsYW5ldGFyeURpZ25pdHksIG51bWJlcj4gPSB7XG4gICAgJ0RvbWljaWxlJzogMS41LFxuICAgICdFeGFsdGF0aW9uJzogMS4zLFxuICAgICdUcmlwbGljaXR5JzogMS4yLFxuICAgICdUZXJtJzogMS4xLFxuICAgICdGYWNlJzogMS4wNSxcbiAgICAnTW9vbHRyaWtvbmEnOiAxLjQsXG4gICAgJ05ha3NoYXRyYSc6IDEuMjUsXG4gICAgJ0RldHJpbWVudCc6IDAuNyxcbiAgICAnRmFsbCc6IDAuNSxcbiAgICAnTmV1dHJhbCc6IDEuMFxuICB9O1xuICByZXR1cm4gbXVsdGlwbGllcnNbZGlnbml0eV0gfHwgMS4wO1xufTtcblxuLyoqXG4gKiBHZXQgem9kaWFjIGJvb3N0IGJhc2VkIG9uIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRab2RpYWNCb29zdCA9ICh6b2RpYWNTaWduOiBzdHJpbmcsIGl0ZW06IHVua25vd24pOiBudW1iZXIgPT4ge1xuICAvLyBHZXQgem9kaWFjIHNpZ24gZWxlbWVudFxuICBjb25zdCB6b2RpYWNFbGVtZW50czogUmVjb3JkPHN0cmluZywgRWxlbWVudGFsQ2hhcmFjdGVyPiA9IHtcbiAgICBhcmllczogJ0ZpcmUnLCBsZW86ICdGaXJlJywgc2FnaXR0YXJpdXM6ICdGaXJlJyxcbiAgICB0YXVydXM6ICdFYXJ0aCcsIHZpcmdvOiAnRWFydGgnLCBjYXByaWNvcm46ICdFYXJ0aCcsXG4gICAgZ2VtaW5pOiAnQWlyJywgbGlicmE6ICdBaXInLCBhcXVhcml1czogJ0FpcicsXG4gICAgY2FuY2VyOiAnV2F0ZXInLCBzY29ycGlvOiAnV2F0ZXInLCBwaXNjZXM6ICdXYXRlcidcbiAgfTtcblxuICAvLyBOb3JtYWxpemUgem9kaWFjIHNpZ24gdG8gbG93ZXJjYXNlIGZvciBsb29rdXBcbiAgY29uc3Qgbm9ybWFsaXplZFNpZ24gPSB6b2RpYWNTaWduLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHpvZGlhY0VsZW1lbnQgPSB6b2RpYWNFbGVtZW50c1tub3JtYWxpemVkU2lnbiBdIHx8ICdGaXJlJztcbiAgXG4gIC8vIENoZWNrIGlmIGl0ZW0gaGFzIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBhcyB1bmtub3duIGFzIHsgZWxlbWVudGFsUHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj47IHpvZGlhY0luZmx1ZW5jZXM/OiBzdHJpbmdbXSB9O1xuICBpZiAoIWl0ZW1EYXRhLmVsZW1lbnRhbFByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gMC4xOyAvLyBNaW5pbXVtIGJvb3N0IGlmIG5vIGVsZW1lbnRhbCBkYXRhXG4gIH1cbiAgXG4gIC8vIENhbGN1bGF0ZSBib29zdCBiYXNlZCBvbiBlbGVtZW50YWwgYWZmaW5pdHlcbiAgLy8gSGlnaGVyIGJvb3N0IGlmIHRoZSBjdWlzaW5lJ3MgZG9taW5hbnQgZWxlbWVudCBtYXRjaGVzIHRoZSB6b2RpYWMgZWxlbWVudFxuICBjb25zdCBlbGVtZW50VmFsdWUgPSBpdGVtRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzW3pvZGlhY0VsZW1lbnRdIHx8IDA7XG4gIGNvbnN0IGVsZW1lbnRCb29zdCA9IGVsZW1lbnRWYWx1ZSAqIDAuODsgLy8gU2NhbGUgYmFzZWQgb24gaG93IHN0cm9uZyB0aGUgZWxlbWVudCBpc1xuXG4gIC8vIENoZWNrIGlmIGN1aXNpbmUgZXhwbGljaXRseSBsaXN0cyB0aGlzIHpvZGlhYyBzaWduIGFzIGZhdm9yYWJsZVxuICBjb25zdCB6b2RpYWNCb29zdCA9IGl0ZW1EYXRhLnpvZGlhY0luZmx1ZW5jZXM/LmluY2x1ZGVzKG5vcm1hbGl6ZWRTaWduKSA/IDAuMyA6IDA7XG5cbiAgLy8gQXBwbHkgbW9kYWxpdHkgYm9vc3QgYmFzZWQgb24gY2FyZGluYWwvZml4ZWQvbXV0YWJsZSBxdWFsaXRpZXNcbiAgbGV0IG1vZGFsaXR5Qm9vc3QgPSAwO1xuICBjb25zdCBjYXJkaW5hbFNpZ25zID0gWydhcmllcycsICdjYW5jZXInLCAnbGlicmEnLCAnY2Fwcmljb3JuJ107XG4gIGNvbnN0IGZpeGVkU2lnbnMgPSBbJ3RhdXJ1cycsICdsZW8nLCAnc2NvcnBpbycsICdhcXVhcml1cyddO1xuICAvLyBJZiBub3QgY2FyZGluYWwgb3IgZml4ZWQsIGl0J3MgbXV0YWJsZSAoZ2VtaW5pLCB2aXJnbywgc2FnaXR0YXJpdXMsIHBpc2NlcylcbiAgXG4gIGlmIChjYXJkaW5hbFNpZ25zLmluY2x1ZGVzKG5vcm1hbGl6ZWRTaWduKSkge1xuICAgIC8vIENhcmRpbmFsIHNpZ25zIHByZWZlciBib2xkLCBkaXN0aW5jdGl2ZSBjdWlzaW5lc1xuICAgIG1vZGFsaXR5Qm9vc3QgPSAoaXRlbURhdGEuZWxlbWVudGFsUHJvcGVydGllc1snRmlyZSddIHx8IDApICogMC4yO1xuICB9IGVsc2UgaWYgKGZpeGVkU2lnbnMuaW5jbHVkZXMobm9ybWFsaXplZFNpZ24pKSB7XG4gICAgLy8gRml4ZWQgc2lnbnMgcHJlZmVyIHN1YnN0YW50aWFsLCB0cmFkaXRpb25hbCBjdWlzaW5lc1xuICAgIG1vZGFsaXR5Qm9vc3QgPSAoaXRlbURhdGEuZWxlbWVudGFsUHJvcGVydGllc1snRWFydGgnXSB8fCAwKSAqIDAuMjtcbiAgfSBlbHNlIHtcbiAgICAvLyBNdXRhYmxlIHNpZ25zIHByZWZlciBhZGFwdGFibGUsIGZ1c2lvbiBjdWlzaW5lc1xuICAgIG1vZGFsaXR5Qm9vc3QgPSAoaXRlbURhdGEuZWxlbWVudGFsUHJvcGVydGllc1snQWlyJ10gfHwgMCkgKiAwLjI7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgc2Vhc29uYWwgYWxpZ25tZW50IChjZXJ0YWluIGN1aXNpbmVzIGFyZSBiZXR0ZXIgYWxpZ25lZCB3aXRoIHNlYXNvbnMpXG4gIGNvbnN0IHNlYXNvbmFsQm9vc3QgPSBjYWxjdWxhdGVTZWFzb25hbEFsaWdubWVudChub3JtYWxpemVkU2lnbiwgaXRlbSkgKiAwLjE1O1xuICBcbiAgLy8gQ29tYmluZSBhbGwgYm9vc3QgZmFjdG9yc1xuICBjb25zdCB0b3RhbEJvb3N0ID0gZWxlbWVudEJvb3N0ICsgem9kaWFjQm9vc3QgKyBtb2RhbGl0eUJvb3N0ICsgc2Vhc29uYWxCb29zdDtcbiAgXG4gIC8vIFJldHVybiBub3JtYWxpemVkIGJvb3N0IHZhbHVlICgwLTEgcmFuZ2UpXG4gIHJldHVybiBNYXRoLm1pbigwLjcsIE1hdGgubWF4KDAuMSwgdG90YWxCb29zdCkpO1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSBzZWFzb25hbCBhbGlnbm1lbnRcbmNvbnN0IF9jYWxjdWxhdGVTZWFzb25hbEFsaWdubWVudCA9ICh6b2RpYWNTaWduOiBzdHJpbmcsIGl0ZW06IHVua25vd24pOiBudW1iZXIgPT4ge1xuICAvLyBNYXAgem9kaWFjIHNpZ25zIHRvIHNlYXNvbnNcbiAgY29uc3Qgc2Vhc29uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdhcmllcyc6ICdzcHJpbmcnLCAndGF1cnVzJzogJ3NwcmluZycsICdnZW1pbmknOiAnc3ByaW5nJyxcbiAgICAnY2FuY2VyJzogJ3N1bW1lcicsICdsZW8nOiAnc3VtbWVyJywgJ3ZpcmdvJzogJ3N1bW1lcicsXG4gICAgJ2xpYnJhJzogJ2F1dHVtbicsICdzY29ycGlvJzogJ2F1dHVtbicsICdzYWdpdHRhcml1cyc6ICdhdXR1bW4nLFxuICAgICdjYXByaWNvcm4nOiAnd2ludGVyJywgJ2FxdWFyaXVzJzogJ3dpbnRlcicsICdwaXNjZXMnOiAnd2ludGVyJ1xuICB9O1xuICBcbiAgY29uc3Qgc2Vhc29uID0gc2Vhc29uTWFwW3pvZGlhY1NpZ25dO1xuICBcbiAgLy8gU2Vhc29uYWwgZWxlbWVudGFsIGNvcnJlc3BvbmRlbmNlc1xuICBjb25zdCBzZWFzb25hbEVsZW1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBFbGVtZW50YWxDaGFyYWN0ZXI+ID0ge1xuICAgICdzcHJpbmcnOiAnQWlyJyxcbiAgICAnc3VtbWVyJzogJ0ZpcmUnLFxuICAgICdhdXR1bW4nOiAnRWFydGgnLFxuICAgICd3aW50ZXInOiAnV2F0ZXInXG4gIH07XG4gIFxuICBjb25zdCBzZWFzb25hbEVsZW1lbnQgPSBzZWFzb25hbEVsZW1lbnRzW3NlYXNvbl07XG4gIFxuICAvLyBDYWxjdWxhdGUgYWxpZ25tZW50IGJhc2VkIG9uIHRoZSBjdWlzaW5lJ3MgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgLy8gSGlnaGVyIHZhbHVlIGlmIHRoZSBjdWlzaW5lIGFsaWducyB3aXRoIHRoZSBzZWFzb24ncyBlbGVtZW50XG4gIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBhcyB1bmtub3duIGFzIHsgZWxlbWVudGFsUHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfTtcbiAgcmV0dXJuIGl0ZW1EYXRhLmVsZW1lbnRhbFByb3BlcnRpZXM/LltzZWFzb25hbEVsZW1lbnRdIHx8IDAuMTtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlIGJvb3N0IGJhc2VkIG9uIGx1bmFyIHBoYXNlXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRMdW5hclBoYXNlQm9vc3QgPSAobHVuYXJQaGFzZTogTHVuYXJQaGFzZSk6IG51bWJlciA9PiB7XG4gIC8vIE5ldyBjYWxjdWxhdGlvbiBiYXNlZCBvbiBsdW5hciBwaGFzZSBlbmVyZ3kgcGF0dGVybnNcbiAgLy8gRGlmZmVyZW50IGx1bmFyIHBoYXNlcyBlbmhhbmNlIGRpZmZlcmVudCBlbGVtZW50YWwgYW5kIGFsY2hlbWljYWwgcHJvcGVydGllc1xuICBcbiAgLy8gTWFwIGx1bmFyIHBoYXNlcyB0byBlbGVtZW50YWwgYW5kIGFsY2hlbWljYWwgaW5mbHVlbmNlc1xuICBjb25zdCBsdW5hckluZmx1ZW5jZXM6IFJlY29yZDxMdW5hclBoYXNlLCB7XG4gICAgZWxlbWVudDogRWxlbWVudGFsQ2hhcmFjdGVyLFxuICAgIGFsY2hlbWljYWw6IHN0cmluZyxcbiAgICBpbnRlbnNpdHk6IG51bWJlclxuICB9PiA9IHtcbiAgICAnbmV3IG1vb24nOiB7IGVsZW1lbnQ6ICdGaXJlJywgYWxjaGVtaWNhbDogJ1NwaXJpdCcsIGludGVuc2l0eTogMC44IH0sXG4gICAgJ3dheGluZyBjcmVzY2VudCc6IHsgZWxlbWVudDogJ0ZpcmUnLCBhbGNoZW1pY2FsOiAnU3Bpcml0JywgaW50ZW5zaXR5OiAwLjcgfSxcbiAgICAnZmlyc3QgcXVhcnRlcic6IHsgZWxlbWVudDogJ0FpcicsIGFsY2hlbWljYWw6ICdTdWJzdGFuY2UnLCBpbnRlbnNpdHk6IDAuNiB9LFxuICAgICd3YXhpbmcgZ2liYm91cyc6IHsgZWxlbWVudDogJ0FpcicsIGFsY2hlbWljYWw6ICdTdWJzdGFuY2UnLCBpbnRlbnNpdHk6IDAuNyB9LFxuICAgICdmdWxsIG1vb24nOiB7IGVsZW1lbnQ6ICdXYXRlcicsIGFsY2hlbWljYWw6ICdFc3NlbmNlJywgaW50ZW5zaXR5OiAwLjggfSxcbiAgICAnd2FuaW5nIGdpYmJvdXMnOiB7IGVsZW1lbnQ6ICdXYXRlcicsIGFsY2hlbWljYWw6ICdFc3NlbmNlJywgaW50ZW5zaXR5OiAwLjcgfSxcbiAgICAnbGFzdCBxdWFydGVyJzogeyBlbGVtZW50OiAnRWFydGgnLCBhbGNoZW1pY2FsOiAnTWF0dGVyJywgaW50ZW5zaXR5OiAwLjYgfSxcbiAgICAnd2FuaW5nIGNyZXNjZW50JzogeyBlbGVtZW50OiAnRWFydGgnLCBhbGNoZW1pY2FsOiAnTWF0dGVyJywgaW50ZW5zaXR5OiAwLjcgfVxuICB9O1xuICBcbiAgLy8gR2V0IGx1bmFyIGluZmx1ZW5jZSBkYXRhIG9yIHByb3ZpZGUgZmFsbGJhY2tcbiAgY29uc3QgaW5mbHVlbmNlID0gbHVuYXJJbmZsdWVuY2VzW2x1bmFyUGhhc2VdIHx8IHsgXG4gICAgZWxlbWVudDogJ1dhdGVyJywgXG4gICAgYWxjaGVtaWNhbDogJ0Vzc2VuY2UnLCBcbiAgICBpbnRlbnNpdHk6IDAuNSBcbiAgfTtcbiAgXG4gIC8vIENhbGN1bGF0ZSBib29zdCBiYXNlZCBvbiBsdW5hciBwaGFzZSBpbnRlbnNpdHlcbiAgLy8gVGhpcyB3aWxsIHZhcnkgYmV0d2VlbiAwLjE1IGFuZCAwLjQgZGVwZW5kaW5nIG9uIHRoZSBwaGFzZVxuICByZXR1cm4gMC4xNSArIChpbmZsdWVuY2UuaW50ZW5zaXR5ICogMC4yNSk7XG59O1xuXG4vKipcbiAqIEdldCBmbGF2b3IgYm9vc3QgZnJvbSBwbGFuZXRhcnkgYXNzb2NpYXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGbGF2b3JCb29zdCA9IChcbiAgX3BsYW5ldDogUGxhbmV0LFxuICBfaW5ncmVkaWVudDogdW5rbm93blxuKTogbnVtYmVyID0+IHtcbiAgY29uc3QgaW5ncmVkaWVudERhdGEgPSBfaW5ncmVkaWVudCBhcyB1bmtub3duIGFzIHsgbmFtZT86IHN0cmluZzsgcGxhbmV0YXJ5UnVsZXJzPzogc3RyaW5nW107IGVsZW1lbnRhbENoYXJhY3Rlcj86IHN0cmluZyB9O1xuICBjb25zdCBlbGVtZW50Qm9vc3QgPSBwbGFuZXRhcnlGb29kQXNzb2NpYXRpb25zW19wbGFuZXRdLmVsZW1lbnRhbEJvb3N0IHx8IHt9O1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZWxlbWVudEJvb3N0KS5yZWR1Y2UoKGFjYywgW2VsZW1lbnQsIGJvb3N0XSkgPT4ge1xuICAgIHJldHVybiBhY2MgKyAoaW5ncmVkaWVudERhdGEuZWxlbWVudGFsUHJvcGVydGllcz8uW2VsZW1lbnRdIHx8IDApICogKGJvb3N0ICB8fCAwKTtcbiAgfSwgMCk7XG59O1xuXG4vKipcbiAqIEdldCBudXRyaXRpb25hbCBzeW5lcmd5IGJldHdlZW4gaW5ncmVkaWVudCBhbmQgcGxhbmV0XG4gKi9cbmV4cG9ydCBjb25zdCBnZXROdXRyaXRpb25hbFN5bmVyZ3kgPSAoXG4gIF9wbGFuZXQ6IFBsYW5ldCxcbiAgX2luZ3JlZGllbnQ6IHVua25vd25cbik6IHN0cmluZ1tdID0+IHtcbiAgLy8gSW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiB5b3VyIG51dHJpdGlvbmFsIGRhdGFcbiAgcmV0dXJuIFtdO1xufTtcblxuLyoqXG4gKiBGb3JtYXQgZWxlbWVudGFsIGJhbGFuY2UgZm9yIGRpc3BsYXlcbiAqL1xuZXhwb3J0IGNvbnN0IGZvcm1hdGVsZW1lbnRhbFN0YXRlID0gKFxuICBlbGVtZW50czogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PlxuKTogc3RyaW5nID0+IHtcbiAgY29uc3QgdmFsaWRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpXG4gICAgLmZpbHRlcigoW18sIHZhbF0pID0+IE51bWJlci5pc0Zpbml0ZSh2YWwpKVxuICAgIC5tYXAoKFtlbGVtLCB2YWxdKSA9PiBgJHtlbGVtfSAke01hdGgucm91bmQoKHZhbCB8fCAwKSAqIDEwMCl9JWApXG4gICAgLmpvaW4oXCIgwrcgXCIpO1xuICBcbiAgcmV0dXJuIHZhbGlkRW50cmllcztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBsYW5ldGFyeUZvb2RBc3NvY2lhdGlvbnM7XG4iXSwidmVyc2lvbiI6M30=