3ec503283ef31d69f053321a5f78b166
"use strict";
/**
 * AnyTypeClassifier Tests
 * Unit tests for the Any Type Classifier component
 */
Object.defineProperty(exports, "__esModule", { value: true });
const AnyTypeClassifier_1 = require("../AnyTypeClassifier");
const types_1 = require("../types");
describe('AnyTypeClassifier', () => {
    let classifier;
    beforeEach(() => {
        classifier = new AnyTypeClassifier_1.AnyTypeClassifier();
    });
    const createContext = (codeSnippet, options = {}) => ({
        filePath: 'test.ts',
        lineNumber: 1,
        codeSnippet,
        surroundingLines: [],
        hasExistingComment: false,
        isInTestFile: false,
        domainContext: {
            domain: types_1.CodeDomain.UTILITY,
            intentionalityHints: [],
            suggestedTypes: [],
            preservationReasons: []
        },
        ...options
    });
    describe('Error Handling Classification', () => {
        test('classifies error handling any as intentional', async () => {
            const context = createContext('} catch (error: any) {');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(true);
            expect(result.category).toBe(types_1.AnyTypeCategory.ERROR_HANDLING);
            expect(result.confidence).toBeGreaterThan(0.8);
        });
        test('classifies error variable as intentional', async () => {
            const context = createContext('const error: any = e;');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(true);
            expect(result.category).toBe(types_1.AnyTypeCategory.ERROR_HANDLING);
        });
    });
    describe('Array Type Classification', () => {
        test('classifies simple array any as unintentional', async () => {
            const context = createContext('const items: any[] = [];');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(false);
            expect(result.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
            expect(result.suggestedReplacement).toBe('unknown[]');
            expect(result.confidence).toBeGreaterThan(0.9);
        });
        test('classifies Array<any> as unintentional', async () => {
            const context = createContext('const items: Array<any> = [];');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(false);
            expect(result.category).toBe(types_1.AnyTypeCategory.ARRAY_TYPE);
        });
    });
    describe('Record Type Classification', () => {
        test('classifies Record<string, any> as unintentional', async () => {
            const context = createContext('const data: Record<string, any> = {};');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(false);
            expect(result.category).toBe(types_1.AnyTypeCategory.RECORD_TYPE);
            expect(result.suggestedReplacement).toBe('Record<string, unknown>');
        });
        test('classifies index signature as unintentional', async () => {
            const context = createContext('{ [key: string]: any }');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(false);
            expect(result.category).toBe(types_1.AnyTypeCategory.RECORD_TYPE);
        });
    });
    describe('Existing Documentation', () => {
        test('respects existing intentional documentation', async () => {
            const context = createContext('const data: any = response;', {
                hasExistingComment: true,
                existingComment: '// Intentionally any: External API response'
            });
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(true);
            expect(result.confidence).toBeGreaterThan(0.9);
            expect(result.requiresDocumentation).toBe(false);
        });
    });
    describe('Test File Context', () => {
        test('classifies test mocks as intentional', async () => {
            const context = createContext('const mockFn = jest.fn() as any;', { isInTestFile: true });
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(true);
            expect(result.category).toBe(types_1.AnyTypeCategory.TEST_MOCK);
        });
    });
    describe('Domain-Specific Analysis', () => {
        test('analyzes astrological domain context', async () => {
            const context = createContext('const planetaryPositions: any = data;', {
                filePath: 'src/calculations/planetary/positions.ts',
                domainContext: {
                    domain: types_1.CodeDomain.ASTROLOGICAL,
                    intentionalityHints: [],
                    suggestedTypes: [],
                    preservationReasons: []
                }
            });
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(true);
            expect(result.category).toBe(types_1.AnyTypeCategory.EXTERNAL_API);
            expect(result.reasoning).toContain('astrological');
        });
        test('analyzes recipe domain context', async () => {
            const context = createContext('const ingredient: any = data;', {
                filePath: 'src/data/ingredients/herbs.ts',
                domainContext: {
                    domain: types_1.CodeDomain.RECIPE,
                    intentionalityHints: [],
                    suggestedTypes: [],
                    preservationReasons: []
                }
            });
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(false);
            expect(result.suggestedReplacement).toBe('Ingredient | Recipe');
        });
    });
    describe('Batch Processing', () => {
        test('processes multiple contexts in batch', async () => {
            const contexts = [
                createContext('const items: any[] = [];'),
                createContext('} catch (error: any) {'),
                createContext('const data: Record<string, any> = {};')
            ];
            const results = await classifier.classifyBatch(contexts);
            expect(results).toHaveLength(3);
            expect(results[0].isIntentional).toBe(false); // array type
            expect(results[1].isIntentional).toBe(true); // error handling
            expect(results[2].isIntentional).toBe(false); // record type
        });
        test('handles classification errors gracefully in batch', async () => {
            const contexts = [
                createContext('const valid: any[] = [];'),
                // This would cause an error in a real scenario
                createContext('') // empty context
            ];
            const results = await classifier.classifyBatch(contexts);
            expect(results).toHaveLength(2);
            expect(results[0].isIntentional).toBe(false);
            // Second result should be a safe fallback
            expect(results[1].isIntentional).toBe(true); // Conservative fallback
            expect(results[1].confidence).toBeLessThan(0.5);
        });
    });
    describe('Edge Cases', () => {
        test('handles empty code snippet', async () => {
            const context = createContext('');
            const result = await classifier.classify(context);
            expect(result.isIntentional).toBe(false);
            expect(result.confidence).toBeLessThan(0.7);
        });
        test('handles complex nested any types', async () => {
            const context = createContext('const complex: Record<string, any[]> = {};');
            const result = await classifier.classify(context);
            // Should detect the Record pattern
            expect(result.category).toBe(types_1.AnyTypeCategory.RECORD_TYPE);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vQW55VHlwZUNsYXNzaWZpZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILDREQUF5RDtBQUN6RCxvQ0FBOEU7QUFFOUUsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUNqQyxJQUFJLFVBQTZCLENBQUM7SUFFbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFVBQVUsR0FBRyxJQUFJLHFDQUFpQixFQUFFLENBQUM7SUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLGFBQWEsR0FBRyxDQUFDLFdBQW1CLEVBQUUsVUFBMEMsRUFBRSxFQUF5QixFQUFFLENBQUMsQ0FBQztRQUNuSCxRQUFRLEVBQUUsU0FBUztRQUNuQixVQUFVLEVBQUUsQ0FBQztRQUNiLFdBQVc7UUFDWCxnQkFBZ0IsRUFBRSxFQUFFO1FBQ3BCLGtCQUFrQixFQUFFLEtBQUs7UUFDekIsWUFBWSxFQUFFLEtBQUs7UUFDbkIsYUFBYSxFQUFFO1lBQ2IsTUFBTSxFQUFFLGtCQUFVLENBQUMsT0FBTztZQUMxQixtQkFBbUIsRUFBRSxFQUFFO1lBQ3ZCLGNBQWMsRUFBRSxFQUFFO1lBQ2xCLG1CQUFtQixFQUFFLEVBQUU7U0FDeEI7UUFDRCxHQUFHLE9BQU87S0FDWCxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1FBQzdDLElBQUksQ0FBQyw4Q0FBOEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5RCxNQUFNLE9BQU8sR0FBRyxhQUFhLENBQUMsd0JBQXdCLENBQUMsQ0FBQztZQUN4RCxNQUFNLE1BQU0sR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFbEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxJ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QUFNLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFbEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsa0NBQWtDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbEQsTUFBTSxPQUFPLEdBQUcsYUFBYSxDQUFDLDRDQUE0QyxDQUFDLENBQUM7WUFDNUUsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRWxELG1DQUFtQztZQUNuQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL19fdGVzdHNfXy9BbnlUeXBlQ2xhc3NpZmllci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQW55VHlwZUNsYXNzaWZpZXIgVGVzdHNcbiAqIFVuaXQgdGVzdHMgZm9yIHRoZSBBbnkgVHlwZSBDbGFzc2lmaWVyIGNvbXBvbmVudFxuICovXG5cbmltcG9ydCB7IEFueVR5cGVDbGFzc2lmaWVyIH0gZnJvbSAnLi4vQW55VHlwZUNsYXNzaWZpZXInO1xuaW1wb3J0IHsgQW55VHlwZUNhdGVnb3J5LCBDbGFzc2lmaWNhdGlvbkNvbnRleHQsIENvZGVEb21haW4gfSBmcm9tICcuLi90eXBlcyc7XG5cbmRlc2NyaWJlKCdBbnlUeXBlQ2xhc3NpZmllcicsICgpID0+IHtcbiAgbGV0IGNsYXNzaWZpZXI6IEFueVR5cGVDbGFzc2lmaWVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNsYXNzaWZpZXIgPSBuZXcgQW55VHlwZUNsYXNzaWZpZXIoKTtcbiAgfSk7XG5cbiAgY29uc3QgY3JlYXRlQ29udGV4dCA9IChjb2RlU25pcHBldDogc3RyaW5nLCBvcHRpb25zOiBQYXJ0aWFsPENsYXNzaWZpY2F0aW9uQ29udGV4dD4gPSB7fSk6IENsYXNzaWZpY2F0aW9uQ29udGV4dCA9PiAoe1xuICAgIGZpbGVQYXRoOiAndGVzdC50cycsXG4gICAgbGluZU51bWJlcjogMSxcbiAgICBjb2RlU25pcHBldCxcbiAgICBzdXJyb3VuZGluZ0xpbmVzOiBbXSxcbiAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IGZhbHNlLFxuICAgIGlzSW5UZXN0RmlsZTogZmFsc2UsXG4gICAgZG9tYWluQ29udGV4dDoge1xuICAgICAgZG9tYWluOiBDb2RlRG9tYWluLlVUSUxJVFksXG4gICAgICBpbnRlbnRpb25hbGl0eUhpbnRzOiBbXSxcbiAgICAgIHN1Z2dlc3RlZFR5cGVzOiBbXSxcbiAgICAgIHByZXNlcnZhdGlvblJlYXNvbnM6IFtdXG4gICAgfSxcbiAgICAuLi5vcHRpb25zXG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBDbGFzc2lmaWNhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdjbGFzc2lmaWVzIGVycm9yIGhhbmRsaW5nIGFueSBhcyBpbnRlbnRpb25hbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KCd9IGNhdGNoIChlcnJvcjogYW55KSB7Jyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5FUlJPUl9IQU5ETElORyk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbigwLjgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnY2xhc3NpZmllcyBlcnJvciB2YXJpYWJsZSBhcyBpbnRlbnRpb25hbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KCdjb25zdCBlcnJvcjogYW55ID0gZTsnKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkVSUk9SX0hBTkRMSU5HKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FycmF5IFR5cGUgQ2xhc3NpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnY2xhc3NpZmllcyBzaW1wbGUgYXJyYXkgYW55IGFzIHVuaW50ZW50aW9uYWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dCgnY29uc3QgaXRlbXM6IGFueVtdID0gW107Jyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCd1bmtub3duW10nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29uZmlkZW5jZSkudG9CZUdyZWF0ZXJUaGFuKDAuOSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdjbGFzc2lmaWVzIEFycmF5PGFueT4gYXMgdW5pbnRlbnRpb25hbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KCdjb25zdCBpdGVtczogQXJyYXk8YW55PiA9IFtdOycpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkFSUkFZX1RZUEUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVjb3JkIFR5cGUgQ2xhc3NpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnY2xhc3NpZmllcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IGFzIHVuaW50ZW50aW9uYWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dCgnY29uc3QgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9OycpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ludGVudGlvbmFsKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LlJFQ09SRF9UWVBFKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGVkUmVwbGFjZW1lbnQpLnRvQmUoJ1JlY29yZDxzdHJpbmcsIHVua25vd24+Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdjbGFzc2lmaWVzIGluZGV4IHNpZ25hdHVyZSBhcyB1bmludGVudGlvbmFsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUNvbnRleHQoJ3sgW2tleTogc3RyaW5nXTogYW55IH0nKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5SRUNPUkRfVFlQRSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFeGlzdGluZyBEb2N1bWVudGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Jlc3BlY3RzIGV4aXN0aW5nIGludGVudGlvbmFsIGRvY3VtZW50YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dChcbiAgICAgICAgJ2NvbnN0IGRhdGE6IGFueSA9IHJlc3BvbnNlOycsXG4gICAgICAgIHtcbiAgICAgICAgICBoYXNFeGlzdGluZ0NvbW1lbnQ6IHRydWUsXG4gICAgICAgICAgZXhpc3RpbmdDb21tZW50OiAnLy8gSW50ZW50aW9uYWxseSBhbnk6IEV4dGVybmFsIEFQSSByZXNwb25zZSdcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeShjb250ZXh0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb25maWRlbmNlKS50b0JlR3JlYXRlclRoYW4oMC45KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVxdWlyZXNEb2N1bWVudGF0aW9uKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rlc3QgRmlsZSBDb250ZXh0JywgKCkgPT4ge1xuICAgIHRlc3QoJ2NsYXNzaWZpZXMgdGVzdCBtb2NrcyBhcyBpbnRlbnRpb25hbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KFxuICAgICAgICAnY29uc3QgbW9ja0ZuID0gamVzdC5mbigpIGFzIGFueTsnLFxuICAgICAgICB7IGlzSW5UZXN0RmlsZTogdHJ1ZSB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNhdGVnb3J5KS50b0JlKEFueVR5cGVDYXRlZ29yeS5URVNUX01PQ0spO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRG9tYWluLVNwZWNpZmljIEFuYWx5c2lzJywgKCkgPT4ge1xuICAgIHRlc3QoJ2FuYWx5emVzIGFzdHJvbG9naWNhbCBkb21haW4gY29udGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KFxuICAgICAgICAnY29uc3QgcGxhbmV0YXJ5UG9zaXRpb25zOiBhbnkgPSBkYXRhOycsXG4gICAgICAgIHtcbiAgICAgICAgICBmaWxlUGF0aDogJ3NyYy9jYWxjdWxhdGlvbnMvcGxhbmV0YXJ5L3Bvc2l0aW9ucy50cycsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge1xuICAgICAgICAgICAgZG9tYWluOiBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTCxcbiAgICAgICAgICAgIGludGVudGlvbmFsaXR5SGludHM6IFtdLFxuICAgICAgICAgICAgc3VnZ2VzdGVkVHlwZXM6IFtdLFxuICAgICAgICAgICAgcHJlc2VydmF0aW9uUmVhc29uczogW11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNJbnRlbnRpb25hbCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY2F0ZWdvcnkpLnRvQmUoQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlYXNvbmluZykudG9Db250YWluKCdhc3Ryb2xvZ2ljYWwnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2FuYWx5emVzIHJlY2lwZSBkb21haW4gY29udGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KFxuICAgICAgICAnY29uc3QgaW5ncmVkaWVudDogYW55ID0gZGF0YTsnLFxuICAgICAgICB7XG4gICAgICAgICAgZmlsZVBhdGg6ICdzcmMvZGF0YS9pbmdyZWRpZW50cy9oZXJicy50cycsXG4gICAgICAgICAgZG9tYWluQ29udGV4dDoge1xuICAgICAgICAgICAgZG9tYWluOiBDb2RlRG9tYWluLlJFQ0lQRSxcbiAgICAgICAgICAgIGludGVudGlvbmFsaXR5SGludHM6IFtdLFxuICAgICAgICAgICAgc3VnZ2VzdGVkVHlwZXM6IFtdLFxuICAgICAgICAgICAgcHJlc2VydmF0aW9uUmVhc29uczogW11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Z2dlc3RlZFJlcGxhY2VtZW50KS50b0JlKCdJbmdyZWRpZW50IHwgUmVjaXBlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCYXRjaCBQcm9jZXNzaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Byb2Nlc3NlcyBtdWx0aXBsZSBjb250ZXh0cyBpbiBiYXRjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHRzID0gW1xuICAgICAgICBjcmVhdGVDb250ZXh0KCdjb25zdCBpdGVtczogYW55W10gPSBbXTsnKSxcbiAgICAgICAgY3JlYXRlQ29udGV4dCgnfSBjYXRjaCAoZXJyb3I6IGFueSkgeycpLFxuICAgICAgICBjcmVhdGVDb250ZXh0KCdjb25zdCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307JylcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5QmF0Y2goY29udGV4dHMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMF0uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7IC8vIGFycmF5IHR5cGVcbiAgICAgIGV4cGVjdChyZXN1bHRzWzFdLmlzSW50ZW50aW9uYWwpLnRvQmUodHJ1ZSk7ICAvLyBlcnJvciBoYW5kbGluZ1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMl0uaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7IC8vIHJlY29yZCB0eXBlXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdoYW5kbGVzIGNsYXNzaWZpY2F0aW9uIGVycm9ycyBncmFjZWZ1bGx5IGluIGJhdGNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dHMgPSBbXG4gICAgICAgIGNyZWF0ZUNvbnRleHQoJ2NvbnN0IHZhbGlkOiBhbnlbXSA9IFtdOycpLFxuICAgICAgICAvLyBUaGlzIHdvdWxkIGNhdXNlIGFuIGVycm9yIGluIGEgcmVhbCBzY2VuYXJpb1xuICAgICAgICBjcmVhdGVDb250ZXh0KCcnKSAvLyBlbXB0eSBjb250ZXh0XG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgY2xhc3NpZmllci5jbGFzc2lmeUJhdGNoKGNvbnRleHRzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzWzBdLmlzSW50ZW50aW9uYWwpLnRvQmUoZmFsc2UpO1xuICAgICAgLy8gU2Vjb25kIHJlc3VsdCBzaG91bGQgYmUgYSBzYWZlIGZhbGxiYWNrXG4gICAgICBleHBlY3QocmVzdWx0c1sxXS5pc0ludGVudGlvbmFsKS50b0JlKHRydWUpOyAvLyBDb25zZXJ2YXRpdmUgZmFsbGJhY2tcbiAgICAgIGV4cGVjdChyZXN1bHRzWzFdLmNvbmZpZGVuY2UpLnRvQmVMZXNzVGhhbigwLjUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICB0ZXN0KCdoYW5kbGVzIGVtcHR5IGNvZGUgc25pcHBldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVDb250ZXh0KCcnKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsYXNzaWZpZXIuY2xhc3NpZnkoY29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNJbnRlbnRpb25hbCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbmZpZGVuY2UpLnRvQmVMZXNzVGhhbigwLjcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnaGFuZGxlcyBjb21wbGV4IG5lc3RlZCBhbnkgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQ29udGV4dCgnY29uc3QgY29tcGxleDogUmVjb3JkPHN0cmluZywgYW55W10+ID0ge307Jyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KGNvbnRleHQpO1xuXG4gICAgICAvLyBTaG91bGQgZGV0ZWN0IHRoZSBSZWNvcmQgcGF0dGVyblxuICAgICAgZXhwZWN0KHJlc3VsdC5jYXRlZ29yeSkudG9CZShBbnlUeXBlQ2F0ZWdvcnkuUkVDT1JEX1RZUEUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9