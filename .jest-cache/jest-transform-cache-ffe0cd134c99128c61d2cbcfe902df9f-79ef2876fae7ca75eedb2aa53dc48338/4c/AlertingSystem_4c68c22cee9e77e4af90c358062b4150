34924be1626538f69f358e3cdc7f71b9
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.alertingSystem = void 0;
const BuildPerformanceMonitor_1 = require("./BuildPerformanceMonitor");
const ErrorTrackingSystem_1 = require("./ErrorTrackingSystem");
const QualityMetricsService_1 = require("./QualityMetricsService");
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
class AlertingSystem {
    constructor() {
        this.alerts = [];
        this.alertRules = [];
        this.escalationRules = [];
        this.alertResponses = [];
        this.subscribers = new Set();
        this.lastAlertTimes = new Map();
        this.loadConfiguration();
        this.initializeDefaultRules();
        this.startMonitoring();
    }
    loadConfiguration() {
        try {
            const configPath = path_1.default.join(process.cwd(), '.kiro', 'settings', 'alerting-config.json');
            if (fs_1.default.existsSync(configPath)) {
                const config = JSON.parse(fs_1.default.readFileSync(configPath, 'utf8'));
                this.alertRules = config.alertRules || [];
                this.escalationRules = config.escalationRules || [];
                this.alerts = config.alerts || [];
                this.alertResponses = config.alertResponses || [];
            }
        }
        catch (error) {
            console.warn('[Alerting System] Failed to load configuration:', error);
        }
    }
    saveConfiguration() {
        try {
            const settingsDir = path_1.default.join(process.cwd(), '.kiro', 'settings');
            if (!fs_1.default.existsSync(settingsDir)) {
                fs_1.default.mkdirSync(settingsDir, { recursive: true });
            }
            const configPath = path_1.default.join(settingsDir, 'alerting-config.json');
            const config = {
                alertRules: this.alertRules,
                escalationRules: this.escalationRules,
                alerts: this.alerts.slice(-500),
                alertResponses: this.alertResponses.slice(-200), // Keep last 200 responses
            };
            fs_1.default.writeFileSync(configPath, JSON.stringify(config, null, 2));
        }
        catch (error) {
            console.error('[Alerting System] Failed to save configuration:', error);
        }
    }
    initializeDefaultRules() {
        if (this.alertRules.length === 0) {
            const defaultRules = [
                {
                    id: 'build-time-critical',
                    name: 'Critical Build Time',
                    description: 'Build time exceeds critical threshold',
                    type: 'performance',
                    metric: 'build_time',
                    condition: 'greater_than',
                    threshold: 120000,
                    severity: 'critical',
                    enabled: true,
                    cooldownMinutes: 15,
                    escalationMinutes: 30,
                    autoResponse: true,
                    responseActions: [
                        {
                            id: 'analyze-build-bottlenecks',
                            name: 'Analyze Build Bottlenecks',
                            type: 'script',
                            config: { script: 'analyze-build-performance.js' },
                            conditions: [],
                            retryCount: 2,
                            timeoutSeconds: 300,
                        },
                        {
                            id: 'clear-build-cache',
                            name: 'Clear Build Cache',
                            type: 'command',
                            config: { command: 'yarn cache clean' },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 60,
                        },
                    ],
                    notificationChannels: ['console', 'file'],
                },
                {
                    id: 'typescript-errors-high',
                    name: 'High TypeScript Error Count',
                    description: 'TypeScript errors exceed acceptable threshold',
                    type: 'error',
                    metric: 'typescript_errors',
                    condition: 'greater_than',
                    threshold: 1000,
                    severity: 'error',
                    enabled: true,
                    cooldownMinutes: 30,
                    escalationMinutes: 60,
                    autoResponse: true,
                    responseActions: [
                        {
                            id: 'trigger-error-campaign',
                            name: 'Trigger Error Reduction Campaign',
                            type: 'campaign',
                            config: {
                                campaignType: 'typescript-error-reduction',
                                maxFiles: 20,
                                safetyLevel: 'HIGH',
                            },
                            conditions: ['error_count > 500'],
                            retryCount: 1,
                            timeoutSeconds: 1800,
                        },
                    ],
                    notificationChannels: ['console', 'file'],
                },
                {
                    id: 'code-quality-low',
                    name: 'Low Code Quality Score',
                    description: 'Code quality score below acceptable threshold',
                    type: 'quality',
                    metric: 'code_quality_score',
                    condition: 'less_than',
                    threshold: 60,
                    severity: 'warning',
                    enabled: true,
                    cooldownMinutes: 60,
                    escalationMinutes: 120,
                    autoResponse: false,
                    responseActions: [
                        {
                            id: 'generate-quality-report',
                            name: 'Generate Quality Report',
                            type: 'script',
                            config: { script: 'generate-quality-report.js' },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 120,
                        },
                    ],
                    notificationChannels: ['console', 'file'],
                },
                {
                    id: 'memory-usage-high',
                    name: 'High Memory Usage',
                    description: 'Memory usage exceeds safe threshold',
                    type: 'system',
                    metric: 'memory_usage',
                    condition: 'greater_than',
                    threshold: 512 * 1024 * 1024,
                    severity: 'warning',
                    enabled: true,
                    cooldownMinutes: 10,
                    escalationMinutes: 30,
                    autoResponse: true,
                    responseActions: [
                        {
                            id: 'garbage-collect',
                            name: 'Force Garbage Collection',
                            type: 'script',
                            config: { script: 'force-gc.js' },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 30,
                        },
                    ],
                    notificationChannels: ['console'],
                },
                {
                    id: 'technical-debt-critical',
                    name: 'Critical Technical Debt',
                    description: 'Technical debt score indicates critical issues',
                    type: 'quality',
                    metric: 'technical_debt_score',
                    condition: 'greater_than',
                    threshold: 80,
                    severity: 'critical',
                    enabled: true,
                    cooldownMinutes: 120,
                    escalationMinutes: 240,
                    autoResponse: false,
                    responseActions: [
                        {
                            id: 'schedule-debt-reduction',
                            name: 'Schedule Technical Debt Reduction',
                            type: 'campaign',
                            config: {
                                campaignType: 'technical-debt-reduction',
                                priority: 'high',
                            },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 300,
                        },
                    ],
                    notificationChannels: ['console', 'file'],
                },
            ];
            this.alertRules = defaultRules;
        }
        if (this.escalationRules.length === 0) {
            const defaultEscalationRules = [
                {
                    id: 'critical-escalation',
                    name: 'Critical Alert Escalation',
                    alertTypes: ['performance', 'error', 'quality', 'system'],
                    severityLevels: ['critical'],
                    escalationDelayMinutes: 30,
                    escalationActions: [
                        {
                            id: 'notify-team',
                            name: 'Notify Development Team',
                            type: 'notification',
                            config: {
                                message: 'Critical alert requires immediate attention',
                                channels: ['console', 'file'],
                            },
                            conditions: [],
                            retryCount: 1,
                            timeoutSeconds: 30,
                        },
                    ],
                    maxEscalations: 3,
                },
                {
                    id: 'error-escalation',
                    name: 'Error Alert Escalation',
                    alertTypes: ['error'],
                    severityLevels: ['error'],
                    escalationDelayMinutes: 60,
                    escalationActions: [
                        {
                            id: 'automated-fix-attempt',
                            name: 'Attempt Automated Fix',
                            type: 'campaign',
                            config: {
                                campaignType: 'automated-error-fix',
                                conservative: true,
                            },
                            conditions: ['automation_opportunities > 5'],
                            retryCount: 1,
                            timeoutSeconds: 600,
                        },
                    ],
                    maxEscalations: 2,
                },
            ];
            this.escalationRules = defaultEscalationRules;
        }
    }
    startMonitoring() {
        // Monitor every 2 minutes
        setInterval(() => {
            this.checkAlertConditions();
            this.processEscalations();
            this.cleanupOldAlerts();
            this.saveConfiguration();
        }, 2 * 60 * 1000);
        // Subscribe to data sources
        BuildPerformanceMonitor_1.buildPerformanceMonitor.subscribe(data => {
            this.evaluatePerformanceAlerts(data);
        });
        ErrorTrackingSystem_1.errorTrackingSystem.subscribe(data => {
            this.evaluateErrorAlerts(data);
        });
        QualityMetricsService_1.qualityMetricsService.subscribe(data => {
            this.evaluateQualityAlerts(data);
        });
    }
    checkAlertConditions() {
        for (const rule of this.alertRules) {
            if (!rule.enabled)
                continue;
            // Check cooldown
            const lastAlertTime = this.lastAlertTimes.get(rule.id);
            if (lastAlertTime &&
                Date.now() - lastAlertTime.getTime() < rule.cooldownMinutes * 60 * 1000) {
                continue;
            }
            this.evaluateRule(rule);
        }
    }
    evaluateRule(rule) {
        let currentValue;
        let shouldAlert = false;
        // Get current metric value based on rule type
        switch (rule.type) {
            case 'performance':
                currentValue = this.getPerformanceMetric(rule.metric);
                break;
            case 'error':
                currentValue = this.getErrorMetric(rule.metric);
                break;
            case 'quality':
                currentValue = this.getQualityMetric(rule.metric);
                break;
            case 'system':
                currentValue = this.getSystemMetric(rule.metric);
                break;
            default:
                return;
        }
        // Evaluate condition
        switch (rule.condition) {
            case 'greater_than':
                shouldAlert = currentValue > rule.threshold;
                break;
            case 'less_than':
                shouldAlert = currentValue < rule.threshold;
                break;
            case 'equals':
                shouldAlert = currentValue === rule.threshold;
                break;
            case 'not_equals':
                shouldAlert = currentValue !== rule.threshold;
                break;
            case 'percentage_change':
                // This would require historical data comparison
                shouldAlert = false; // Placeholder
                break;
        }
        if (shouldAlert) {
            this.createAlert(rule, currentValue);
        }
    }
    getPerformanceMetric(metric) {
        const summary = BuildPerformanceMonitor_1.buildPerformanceMonitor.getPerformanceSummary();
        switch (metric) {
            case 'build_time':
                return summary.averageBuildTime;
            case 'compilation_time':
                return summary.averageCompilationTime;
            case 'bundle_size':
                return summary.averageBundleSize;
            case 'memory_usage':
                return summary.averageMemoryUsage;
            case 'cache_efficiency':
                return summary.cacheEfficiency;
            case 'performance_score':
                return summary.performanceScore;
            default:
                return 0;
        }
    }
    getErrorMetric(metric) {
        const summary = ErrorTrackingSystem_1.errorTrackingSystem.getErrorSummary();
        switch (metric) {
            case 'typescript_errors':
                return summary.totalActiveErrors;
            case 'linting_violations':
                return summary.totalActiveLintViolations;
            case 'build_failures':
                return summary.totalRecentFailures;
            case 'critical_issues':
                return summary.criticalIssues;
            case 'automation_opportunities':
                return summary.automationOpportunities;
            default:
                return 0;
        }
    }
    getQualityMetric(metric) {
        const qualityMetrics = ErrorTrackingSystem_1.errorTrackingSystem.getCurrentQualityMetrics();
        if (!qualityMetrics)
            return 0;
        switch (metric) {
            case 'code_quality_score':
                return qualityMetrics.codeQualityScore;
            case 'technical_debt_score':
                return qualityMetrics.technicalDebtScore;
            case 'maintainability_index':
                return qualityMetrics.maintainabilityIndex;
            case 'error_rate':
                return qualityMetrics.errorRate;
            case 'warning_rate':
                return qualityMetrics.warningRate;
            default:
                return 0;
        }
    }
    getSystemMetric(metric) {
        switch (metric) {
            case 'memory_usage':
                return process.memoryUsage().heapUsed;
            case 'cpu_usage':
                return process.cpuUsage().user + process.cpuUsage().system;
            case 'uptime':
                return process.uptime();
            default:
                return 0;
        }
    }
    createAlert(rule, currentValue) {
        const alert = {
            id: `alert-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
            type: rule.type,
            severity: rule.severity,
            title: rule.name,
            description: `${rule.description}. Current value: ${currentValue}, Threshold: ${rule.threshold}`,
            threshold: rule.threshold,
            currentValue,
            timestamp: new Date(),
            acknowledged: false,
            resolved: false,
            escalated: false,
            responseActions: rule.responseActions.map(a => a.name),
            metadata: {
                ruleId: rule.id,
                metric: rule.metric,
                condition: rule.condition,
            },
        };
        this.alerts.push(alert);
        this.lastAlertTimes.set(rule.id, new Date());
        // Log alert
        console.log(`[ALERT ${alert.severity.toUpperCase()}] ${alert.title}: ${alert.description}`);
        // Notify subscribers
        this.notifySubscribers(alert);
        // Execute auto-response if enabled
        if (rule.autoResponse) {
            this.executeAlertActions(alert, rule.responseActions);
        }
        // Send notifications
        this.sendNotifications(alert, rule.notificationChannels);
    }
    async executeAlertActions(alert, actions) {
        for (const action of actions) {
            // Check conditions
            if (!this.evaluateActionConditions(action.conditions, alert)) {
                continue;
            }
            const response = {
                alertId: alert.id,
                actionId: action.id,
                status: 'pending',
                startTime: new Date(),
                retryCount: 0,
            };
            this.alertResponses.push(response);
            try {
                response.status = 'running';
                const result = await this.executeAction(action);
                response.status = 'completed';
                response.endTime = new Date();
                response.result = result;
                console.log(`[Alert Response] Successfully executed ${action.name} for alert ${alert.id}`);
            }
            catch (error) {
                response.status = 'failed';
                response.endTime = new Date();
                response.error = error.message;
                console.error(`[Alert Response] Failed to execute ${action.name} for alert ${alert.id}:`, error);
                // Retry if configured
                if (response.retryCount < action.retryCount) {
                    response.retryCount++;
                    setTimeout(() => {
                        this.executeAlertActions(alert, [action]);
                    }, 30000); // Retry after 30 seconds
                }
            }
        }
    }
    evaluateActionConditions(conditions, alert) {
        if (conditions.length === 0)
            return true;
        for (const condition of conditions) {
            if (!this.evaluateCondition(condition, alert)) {
                return false;
            }
        }
        return true;
    }
    evaluateCondition(condition, alert) {
        // Simple condition evaluation
        // In a real implementation, this would be more sophisticated
        if (condition.includes('error_count >')) {
            const threshold = parseInt(condition.split('>')[1].trim());
            return alert.currentValue > threshold;
        }
        if (condition.includes('automation_opportunities >')) {
            const threshold = parseInt(condition.split('>')[1].trim());
            const errorSummary = ErrorTrackingSystem_1.errorTrackingSystem.getErrorSummary();
            return errorSummary.automationOpportunities > threshold;
        }
        return true;
    }
    async executeAction(action) {
        const timeout = new Promise((_, reject) => {
            setTimeout(() => reject(new Error('Action timeout')), action.timeoutSeconds * 1000);
        });
        const execution = this.performAction(action);
        return Promise.race([execution, timeout]);
    }
    async performAction(action) {
        switch (action.type) {
            case 'script':
                return this.executeScript(action.config.script);
            case 'command':
                return this.executeCommand(action.config.command);
            case 'campaign':
                return this.triggerCampaign(action.config);
            case 'api_call':
                return this.makeApiCall(action.config);
            case 'notification':
                return this.sendNotification(action.config);
            default:
                throw new Error(`Unknown action type: ${action.type}`);
        }
    }
    async executeScript(scriptName) {
        // This would execute a script file
        // For now, return a placeholder
        console.log(`[Alert Action] Executing script: ${scriptName}`);
        return { success: true, message: `Script ${scriptName} executed` };
    }
    async executeCommand(command) {
        // This would execute a shell command
        // For now, return a placeholder
        console.log(`[Alert Action] Executing command: ${command}`);
        return { success: true, message: `Command ${command} executed` };
    }
    async triggerCampaign(config) {
        // This would integrate with the campaign system
        // For now, return a placeholder
        console.log(`[Alert Action] Triggering campaign: ${config.campaignType}`);
        return {
            success: true,
            message: `Campaign ${config.campaignType} triggered`,
        };
    }
    async makeApiCall(config) {
        // This would make an HTTP API call
        // For now, return a placeholder
        console.log(`[Alert Action] Making API call to: ${config.url}`);
        return { success: true, message: `API call to ${config.url} completed` };
    }
    async sendNotification(config) {
        console.log(`[Alert Notification] ${config.message}`);
        return { success: true, message: 'Notification sent' };
    }
    sendNotifications(alert, channels) {
        for (const channel of channels) {
            switch (channel) {
                case 'console':
                    console.log(`[NOTIFICATION] ${alert.title}: ${alert.description}`);
                    break;
                case 'file':
                    this.writeAlertToFile(alert);
                    break;
                default:
                    console.log(`[NOTIFICATION] Unknown channel: ${channel}`);
            }
        }
    }
    writeAlertToFile(alert) {
        try {
            const alertsDir = path_1.default.join(process.cwd(), '.kiro', 'alerts');
            if (!fs_1.default.existsSync(alertsDir)) {
                fs_1.default.mkdirSync(alertsDir, { recursive: true });
            }
            const alertFile = path_1.default.join(alertsDir, 'alerts.log');
            const alertLine = `${alert.timestamp.toISOString()} [${alert.severity.toUpperCase()}] ${alert.title}: ${alert.description}\n`;
            fs_1.default.appendFileSync(alertFile, alertLine);
        }
        catch (error) {
            console.error('[Alerting System] Failed to write alert to file:', error);
        }
    }
    evaluatePerformanceAlerts(data) {
        // This would be called when performance data is updated
        // The main monitoring loop handles rule evaluation
    }
    evaluateErrorAlerts(data) {
        // This would be called when error data is updated
        // The main monitoring loop handles rule evaluation
    }
    evaluateQualityAlerts(data) {
        // This would be called when quality data is updated
        // The main monitoring loop handles rule evaluation
    }
    processEscalations() {
        const now = new Date();
        for (const alert of this.alerts) {
            if (alert.resolved || alert.escalated)
                continue;
            const alertAge = now.getTime() - alert.timestamp.getTime();
            for (const escalationRule of this.escalationRules) {
                if (!escalationRule.alertTypes.includes(alert.type))
                    continue;
                if (!escalationRule.severityLevels.includes(alert.severity))
                    continue;
                const escalationDelay = escalationRule.escalationDelayMinutes * 60 * 1000;
                if (alertAge >= escalationDelay) {
                    this.escalateAlert(alert, escalationRule);
                    break;
                }
            }
        }
    }
    escalateAlert(alert, escalationRule) {
        alert.escalated = true;
        alert.escalatedAt = new Date();
        console.log(`[ESCALATION] Alert ${alert.id} escalated using rule ${escalationRule.name}`);
        // Execute escalation actions
        this.executeAlertActions(alert, escalationRule.escalationActions);
    }
    cleanupOldAlerts() {
        const cutoffTime = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000); // 30 days
        this.alerts = this.alerts.filter(alert => alert.timestamp >= cutoffTime);
        this.alertResponses = this.alertResponses.filter(response => response.startTime >= cutoffTime);
    }
    notifySubscribers(alert) {
        this.subscribers.forEach(callback => {
            try {
                callback(alert);
            }
            catch (error) {
                console.error('[Alerting System] Subscriber error:', error);
            }
        });
    }
    // Public API methods
    subscribe(callback) {
        this.subscribers.add(callback);
        return () => this.subscribers.delete(callback);
    }
    getAlerts(options) {
        let filtered = this.alerts;
        if (options === null || options === void 0 ? void 0 : options.type) {
            filtered = filtered.filter(a => a.type === options.type);
        }
        if (options === null || options === void 0 ? void 0 : options.severity) {
            filtered = filtered.filter(a => a.severity === options.severity);
        }
        if ((options === null || options === void 0 ? void 0 : options.resolved) !== undefined) {
            filtered = filtered.filter(a => a.resolved === options.resolved);
        }
        // Sort by timestamp (newest first)
        filtered.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
        if (options === null || options === void 0 ? void 0 : options.limit) {
            filtered = filtered.slice(0, options.limit);
        }
        return filtered;
    }
    getAlertRules() {
        return this.alertRules;
    }
    addAlertRule(rule) {
        const id = `rule-${Date.now()}`;
        const newRule = { ...rule, id };
        this.alertRules.push(newRule);
        this.saveConfiguration();
        return id;
    }
    updateAlertRule(id, updates) {
        const ruleIndex = this.alertRules.findIndex(r => r.id === id);
        if (ruleIndex === -1)
            return false;
        this.alertRules[ruleIndex] = { ...this.alertRules[ruleIndex], ...updates };
        this.saveConfiguration();
        return true;
    }
    deleteAlertRule(id) {
        const ruleIndex = this.alertRules.findIndex(r => r.id === id);
        if (ruleIndex === -1)
            return false;
        this.alertRules.splice(ruleIndex, 1);
        this.saveConfiguration();
        return true;
    }
    acknowledgeAlert(alertId) {
        const alert = this.alerts.find(a => a.id === alertId);
        if (!alert)
            return false;
        alert.acknowledged = true;
        this.saveConfiguration();
        return true;
    }
    resolveAlert(alertId) {
        const alert = this.alerts.find(a => a.id === alertId);
        if (!alert)
            return false;
        alert.resolved = true;
        alert.resolvedAt = new Date();
        this.saveConfiguration();
        return true;
    }
    getAlertResponses(alertId) {
        if (alertId) {
            return this.alertResponses.filter(r => r.alertId === alertId);
        }
        return this.alertResponses;
    }
    getAlertSummary() {
        const now = new Date();
        const last24Hours = new Date(now.getTime() - 24 * 60 * 60 * 1000);
        const recentAlerts = this.alerts.filter(a => a.timestamp >= last24Hours);
        return {
            totalAlerts: this.alerts.length,
            recentAlerts: recentAlerts.length,
            unresolvedAlerts: this.alerts.filter(a => !a.resolved).length,
            criticalAlerts: this.alerts.filter(a => a.severity === 'critical' && !a.resolved).length,
            escalatedAlerts: this.alerts.filter(a => a.escalated && !a.resolved)
                .length,
            alertsByType: this.getAlertCountsByType(),
            alertsBySeverity: this.getAlertCountsBySeverity(),
            responseSuccessRate: this.calculateResponseSuccessRate(),
            averageResolutionTime: this.calculateAverageResolutionTime(),
        };
    }
    getAlertCountsByType() {
        const counts = {};
        for (const alert of this.alerts.filter(a => !a.resolved)) {
            counts[alert.type] = (counts[alert.type] || 0) + 1;
        }
        return counts;
    }
    getAlertCountsBySeverity() {
        const counts = {};
        for (const alert of this.alerts.filter(a => !a.resolved)) {
            counts[alert.severity] = (counts[alert.severity] || 0) + 1;
        }
        return counts;
    }
    calculateResponseSuccessRate() {
        const totalResponses = this.alertResponses.length;
        if (totalResponses === 0)
            return 0;
        const successfulResponses = this.alertResponses.filter(r => r.status === 'completed').length;
        return (successfulResponses / totalResponses) * 100;
    }
    calculateAverageResolutionTime() {
        const resolvedAlerts = this.alerts.filter(a => a.resolved && a.resolvedAt);
        if (resolvedAlerts.length === 0)
            return 0;
        const totalResolutionTime = resolvedAlerts.reduce((sum, alert) => {
            return sum + (alert.resolvedAt.getTime() - alert.timestamp.getTime());
        }, 0);
        return totalResolutionTime / resolvedAlerts.length / (60 * 1000); // Return in minutes
    }
    testAlert(ruleId) {
        const rule = this.alertRules.find(r => r.id === ruleId);
        if (!rule)
            return false;
        // Create a test alert
        this.createAlert(rule, rule.threshold + 1);
        return true;
    }
    reset() {
        this.alerts = [];
        this.alertResponses = [];
        this.lastAlertTimes.clear();
        this.saveConfiguration();
    }
}
exports.alertingSystem = new AlertingSystem();
exports.default = AlertingSystem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9BbGVydGluZ1N5c3RlbS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSx1RUFBb0U7QUFDcEUsK0RBQTREO0FBQzVELG1FQUFnRTtBQUNoRSw0Q0FBb0I7QUFDcEIsZ0RBQXdCO0FBeUV4QixNQUFNLGNBQWM7SUFRbEI7UUFQUSxXQUFNLEdBQVksRUFBRSxDQUFDO1FBQ3JCLGVBQVUsR0FBZ0IsRUFBRSxDQUFDO1FBQzdCLG9CQUFlLEdBQXFCLEVBQUUsQ0FBQztRQUN2QyxtQkFBYyxHQUFvQixFQUFFLENBQUM7UUFDckMsZ0JBQVcsR0FBZ0MsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNyRCxtQkFBYyxHQUFzQixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBR3BELElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRU8saUJBQWlCO1FBQ3ZCLElBQUk7WUFDRixNQUFNLFVBQVUsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUMxQixPQUFPLENBQUMsR0FBRyxFQUFFLEVBQ2IsT0FBTyxFQUNQLFVBQVUsRUFDVixzQkFBc0IsQ0FDdkIsQ0FBQztZQUNGLElBQUksWUFBRSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRTtnQkFDN0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFFLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUMvRCxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDO2dCQUMxQyxJQUFJLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDO2dCQUNwRCxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLElB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LENBQUM7UUFDekIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM1QixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0NBQ0Y7QUFFWSxRQUFBLGNBQWMsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDO0FBQ25ELGtCQUFlLGNBQWMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL0FsZXJ0aW5nU3lzdGVtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkUGVyZm9ybWFuY2VNb25pdG9yIH0gZnJvbSAnLi9CdWlsZFBlcmZvcm1hbmNlTW9uaXRvcic7XG5pbXBvcnQgeyBlcnJvclRyYWNraW5nU3lzdGVtIH0gZnJvbSAnLi9FcnJvclRyYWNraW5nU3lzdGVtJztcbmltcG9ydCB7IHF1YWxpdHlNZXRyaWNzU2VydmljZSB9IGZyb20gJy4vUXVhbGl0eU1ldHJpY3NTZXJ2aWNlJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuZXhwb3J0IGludGVyZmFjZSBBbGVydCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdwZXJmb3JtYW5jZScgfCAnZXJyb3InIHwgJ3F1YWxpdHknIHwgJ3N5c3RlbSc7XG4gIHNldmVyaXR5OiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ2NyaXRpY2FsJztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdGhyZXNob2xkOiBudW1iZXI7XG4gIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGFja25vd2xlZGdlZDogYm9vbGVhbjtcbiAgcmVzb2x2ZWQ6IGJvb2xlYW47XG4gIHJlc29sdmVkQXQ/OiBEYXRlO1xuICBlc2NhbGF0ZWQ6IGJvb2xlYW47XG4gIGVzY2FsYXRlZEF0PzogRGF0ZTtcbiAgcmVzcG9uc2VBY3Rpb25zOiBzdHJpbmdbXTtcbiAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRSdWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB0eXBlOiAncGVyZm9ybWFuY2UnIHwgJ2Vycm9yJyB8ICdxdWFsaXR5JyB8ICdzeXN0ZW0nO1xuICBtZXRyaWM6IHN0cmluZztcbiAgY29uZGl0aW9uOlxuICAgIHwgJ2dyZWF0ZXJfdGhhbidcbiAgICB8ICdsZXNzX3RoYW4nXG4gICAgfCAnZXF1YWxzJ1xuICAgIHwgJ25vdF9lcXVhbHMnXG4gICAgfCAncGVyY2VudGFnZV9jaGFuZ2UnO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgc2V2ZXJpdHk6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnY3JpdGljYWwnO1xuICBlbmFibGVkOiBib29sZWFuO1xuICBjb29sZG93bk1pbnV0ZXM6IG51bWJlcjtcbiAgZXNjYWxhdGlvbk1pbnV0ZXM6IG51bWJlcjtcbiAgYXV0b1Jlc3BvbnNlOiBib29sZWFuO1xuICByZXNwb25zZUFjdGlvbnM6IEFsZXJ0QWN0aW9uW107XG4gIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGVydEFjdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogJ3NjcmlwdCcgfCAnY29tbWFuZCcgfCAnYXBpX2NhbGwnIHwgJ2NhbXBhaWduJyB8ICdub3RpZmljYXRpb24nO1xuICBjb25maWc6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGNvbmRpdGlvbnM6IHN0cmluZ1tdO1xuICByZXRyeUNvdW50OiBudW1iZXI7XG4gIHRpbWVvdXRTZWNvbmRzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXNjYWxhdGlvblJ1bGUge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGFsZXJ0VHlwZXM6IHN0cmluZ1tdO1xuICBzZXZlcml0eUxldmVsczogc3RyaW5nW107XG4gIGVzY2FsYXRpb25EZWxheU1pbnV0ZXM6IG51bWJlcjtcbiAgZXNjYWxhdGlvbkFjdGlvbnM6IEFsZXJ0QWN0aW9uW107XG4gIG1heEVzY2FsYXRpb25zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRSZXNwb25zZSB7XG4gIGFsZXJ0SWQ6IHN0cmluZztcbiAgYWN0aW9uSWQ6IHN0cmluZztcbiAgc3RhdHVzOiAncGVuZGluZycgfCAncnVubmluZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnO1xuICBzdGFydFRpbWU6IERhdGU7XG4gIGVuZFRpbWU/OiBEYXRlO1xuICByZXN1bHQ/OiBhbnk7XG4gIGVycm9yPzogc3RyaW5nO1xuICByZXRyeUNvdW50OiBudW1iZXI7XG59XG5cbmNsYXNzIEFsZXJ0aW5nU3lzdGVtIHtcbiAgcHJpdmF0ZSBhbGVydHM6IEFsZXJ0W10gPSBbXTtcbiAgcHJpdmF0ZSBhbGVydFJ1bGVzOiBBbGVydFJ1bGVbXSA9IFtdO1xuICBwcml2YXRlIGVzY2FsYXRpb25SdWxlczogRXNjYWxhdGlvblJ1bGVbXSA9IFtdO1xuICBwcml2YXRlIGFsZXJ0UmVzcG9uc2VzOiBBbGVydFJlc3BvbnNlW10gPSBbXTtcbiAgcHJpdmF0ZSBzdWJzY3JpYmVyczogU2V0PChhbGVydDogQWxlcnQpID0+IHZvaWQ+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGxhc3RBbGVydFRpbWVzOiBNYXA8c3RyaW5nLCBEYXRlPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxvYWRDb25maWd1cmF0aW9uKCk7XG4gICAgdGhpcy5pbml0aWFsaXplRGVmYXVsdFJ1bGVzKCk7XG4gICAgdGhpcy5zdGFydE1vbml0b3JpbmcoKTtcbiAgfVxuXG4gIHByaXZhdGUgbG9hZENvbmZpZ3VyYXRpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbmZpZ1BhdGggPSBwYXRoLmpvaW4oXG4gICAgICAgIHByb2Nlc3MuY3dkKCksXG4gICAgICAgICcua2lybycsXG4gICAgICAgICdzZXR0aW5ncycsXG4gICAgICAgICdhbGVydGluZy1jb25maWcuanNvbidcbiAgICAgICk7XG4gICAgICBpZiAoZnMuZXhpc3RzU3luYyhjb25maWdQYXRoKSkge1xuICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhjb25maWdQYXRoLCAndXRmOCcpKTtcbiAgICAgICAgdGhpcy5hbGVydFJ1bGVzID0gY29uZmlnLmFsZXJ0UnVsZXMgfHwgW107XG4gICAgICAgIHRoaXMuZXNjYWxhdGlvblJ1bGVzID0gY29uZmlnLmVzY2FsYXRpb25SdWxlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5hbGVydHMgPSBjb25maWcuYWxlcnRzIHx8IFtdO1xuICAgICAgICB0aGlzLmFsZXJ0UmVzcG9uc2VzID0gY29uZmlnLmFsZXJ0UmVzcG9uc2VzIHx8IFtdO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tBbGVydGluZyBTeXN0ZW1dIEZhaWxlZCB0byBsb2FkIGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2F2ZUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNldHRpbmdzRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICcua2lybycsICdzZXR0aW5ncycpO1xuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHNldHRpbmdzRGlyKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMoc2V0dGluZ3NEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25maWdQYXRoID0gcGF0aC5qb2luKHNldHRpbmdzRGlyLCAnYWxlcnRpbmctY29uZmlnLmpzb24nKTtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgYWxlcnRSdWxlczogdGhpcy5hbGVydFJ1bGVzLFxuICAgICAgICBlc2NhbGF0aW9uUnVsZXM6IHRoaXMuZXNjYWxhdGlvblJ1bGVzLFxuICAgICAgICBhbGVydHM6IHRoaXMuYWxlcnRzLnNsaWNlKC01MDApLCAvLyBLZWVwIGxhc3QgNTAwIGFsZXJ0c1xuICAgICAgICBhbGVydFJlc3BvbnNlczogdGhpcy5hbGVydFJlc3BvbnNlcy5zbGljZSgtMjAwKSwgLy8gS2VlcCBsYXN0IDIwMCByZXNwb25zZXNcbiAgICAgIH07XG5cbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoY29uZmlnUGF0aCwgSlNPTi5zdHJpbmdpZnkoY29uZmlnLCBudWxsLCAyKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBbGVydGluZyBTeXN0ZW1dIEZhaWxlZCB0byBzYXZlIGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRSdWxlcygpIHtcbiAgICBpZiAodGhpcy5hbGVydFJ1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZGVmYXVsdFJ1bGVzOiBBbGVydFJ1bGVbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnYnVpbGQtdGltZS1jcml0aWNhbCcsXG4gICAgICAgICAgbmFtZTogJ0NyaXRpY2FsIEJ1aWxkIFRpbWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQnVpbGQgdGltZSBleGNlZWRzIGNyaXRpY2FsIHRocmVzaG9sZCcsXG4gICAgICAgICAgdHlwZTogJ3BlcmZvcm1hbmNlJyxcbiAgICAgICAgICBtZXRyaWM6ICdidWlsZF90aW1lJyxcbiAgICAgICAgICBjb25kaXRpb246ICdncmVhdGVyX3RoYW4nLFxuICAgICAgICAgIHRocmVzaG9sZDogMTIwMDAwLCAvLyAyIG1pbnV0ZXNcbiAgICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGNvb2xkb3duTWludXRlczogMTUsXG4gICAgICAgICAgZXNjYWxhdGlvbk1pbnV0ZXM6IDMwLFxuICAgICAgICAgIGF1dG9SZXNwb25zZTogdHJ1ZSxcbiAgICAgICAgICByZXNwb25zZUFjdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdhbmFseXplLWJ1aWxkLWJvdHRsZW5lY2tzJyxcbiAgICAgICAgICAgICAgbmFtZTogJ0FuYWx5emUgQnVpbGQgQm90dGxlbmVja3MnLFxuICAgICAgICAgICAgICB0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgICAgICAgY29uZmlnOiB7IHNjcmlwdDogJ2FuYWx5emUtYnVpbGQtcGVyZm9ybWFuY2UuanMnIH0sXG4gICAgICAgICAgICAgIGNvbmRpdGlvbnM6IFtdLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAyLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogMzAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjbGVhci1idWlsZC1jYWNoZScsXG4gICAgICAgICAgICAgIG5hbWU6ICdDbGVhciBCdWlsZCBDYWNoZScsXG4gICAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgICAgY29uZmlnOiB7IGNvbW1hbmQ6ICd5YXJuIGNhY2hlIGNsZWFuJyB9LFxuICAgICAgICAgICAgICBjb25kaXRpb25zOiBbXSxcbiAgICAgICAgICAgICAgcmV0cnlDb3VudDogMSxcbiAgICAgICAgICAgICAgdGltZW91dFNlY29uZHM6IDYwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBbJ2NvbnNvbGUnLCAnZmlsZSddLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd0eXBlc2NyaXB0LWVycm9ycy1oaWdoJyxcbiAgICAgICAgICBuYW1lOiAnSGlnaCBUeXBlU2NyaXB0IEVycm9yIENvdW50JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1R5cGVTY3JpcHQgZXJyb3JzIGV4Y2VlZCBhY2NlcHRhYmxlIHRocmVzaG9sZCcsXG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBtZXRyaWM6ICd0eXBlc2NyaXB0X2Vycm9ycycsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDEwMDAsXG4gICAgICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDMwLFxuICAgICAgICAgIGVzY2FsYXRpb25NaW51dGVzOiA2MCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2VBY3Rpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAndHJpZ2dlci1lcnJvci1jYW1wYWlnbicsXG4gICAgICAgICAgICAgIG5hbWU6ICdUcmlnZ2VyIEVycm9yIFJlZHVjdGlvbiBDYW1wYWlnbicsXG4gICAgICAgICAgICAgIHR5cGU6ICdjYW1wYWlnbicsXG4gICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIGNhbXBhaWduVHlwZTogJ3R5cGVzY3JpcHQtZXJyb3ItcmVkdWN0aW9uJyxcbiAgICAgICAgICAgICAgICBtYXhGaWxlczogMjAsXG4gICAgICAgICAgICAgICAgc2FmZXR5TGV2ZWw6ICdISUdIJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29uZGl0aW9uczogWydlcnJvcl9jb3VudCA+IDUwMCddLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogMTgwMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBub3RpZmljYXRpb25DaGFubmVsczogWydjb25zb2xlJywgJ2ZpbGUnXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnY29kZS1xdWFsaXR5LWxvdycsXG4gICAgICAgICAgbmFtZTogJ0xvdyBDb2RlIFF1YWxpdHkgU2NvcmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29kZSBxdWFsaXR5IHNjb3JlIGJlbG93IGFjY2VwdGFibGUgdGhyZXNob2xkJyxcbiAgICAgICAgICB0eXBlOiAncXVhbGl0eScsXG4gICAgICAgICAgbWV0cmljOiAnY29kZV9xdWFsaXR5X3Njb3JlJyxcbiAgICAgICAgICBjb25kaXRpb246ICdsZXNzX3RoYW4nLFxuICAgICAgICAgIHRocmVzaG9sZDogNjAsXG4gICAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGNvb2xkb3duTWludXRlczogNjAsXG4gICAgICAgICAgZXNjYWxhdGlvbk1pbnV0ZXM6IDEyMCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgICAgIHJlc3BvbnNlQWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2dlbmVyYXRlLXF1YWxpdHktcmVwb3J0JyxcbiAgICAgICAgICAgICAgbmFtZTogJ0dlbmVyYXRlIFF1YWxpdHkgUmVwb3J0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgIGNvbmZpZzogeyBzY3JpcHQ6ICdnZW5lcmF0ZS1xdWFsaXR5LXJlcG9ydC5qcycgfSxcbiAgICAgICAgICAgICAgY29uZGl0aW9uczogW10sXG4gICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDEsXG4gICAgICAgICAgICAgIHRpbWVvdXRTZWNvbmRzOiAxMjAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgbm90aWZpY2F0aW9uQ2hhbm5lbHM6IFsnY29uc29sZScsICdmaWxlJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21lbW9yeS11c2FnZS1oaWdoJyxcbiAgICAgICAgICBuYW1lOiAnSGlnaCBNZW1vcnkgVXNhZ2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTWVtb3J5IHVzYWdlIGV4Y2VlZHMgc2FmZSB0aHJlc2hvbGQnLFxuICAgICAgICAgIHR5cGU6ICdzeXN0ZW0nLFxuICAgICAgICAgIG1ldHJpYzogJ21lbW9yeV91c2FnZScsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDUxMiAqIDEwMjQgKiAxMDI0LCAvLyA1MTJNQlxuICAgICAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjb29sZG93bk1pbnV0ZXM6IDEwLFxuICAgICAgICAgIGVzY2FsYXRpb25NaW51dGVzOiAzMCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2VBY3Rpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnZ2FyYmFnZS1jb2xsZWN0JyxcbiAgICAgICAgICAgICAgbmFtZTogJ0ZvcmNlIEdhcmJhZ2UgQ29sbGVjdGlvbicsXG4gICAgICAgICAgICAgIHR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgICAgICBjb25maWc6IHsgc2NyaXB0OiAnZm9yY2UtZ2MuanMnIH0sXG4gICAgICAgICAgICAgIGNvbmRpdGlvbnM6IFtdLFxuICAgICAgICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICAgICAgICB0aW1lb3V0U2Vjb25kczogMzAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgbm90aWZpY2F0aW9uQ2hhbm5lbHM6IFsnY29uc29sZSddLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd0ZWNobmljYWwtZGVidC1jcml0aWNhbCcsXG4gICAgICAgICAgbmFtZTogJ0NyaXRpY2FsIFRlY2huaWNhbCBEZWJ0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RlY2huaWNhbCBkZWJ0IHNjb3JlIGluZGljYXRlcyBjcml0aWNhbCBpc3N1ZXMnLFxuICAgICAgICAgIHR5cGU6ICdxdWFsaXR5JyxcbiAgICAgICAgICBtZXRyaWM6ICd0ZWNobmljYWxfZGVidF9zY29yZScsXG4gICAgICAgICAgY29uZGl0aW9uOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICB0aHJlc2hvbGQ6IDgwLFxuICAgICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgY29vbGRvd25NaW51dGVzOiAxMjAsXG4gICAgICAgICAgZXNjYWxhdGlvbk1pbnV0ZXM6IDI0MCxcbiAgICAgICAgICBhdXRvUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgICAgIHJlc3BvbnNlQWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ3NjaGVkdWxlLWRlYnQtcmVkdWN0aW9uJyxcbiAgICAgICAgICAgICAgbmFtZTogJ1NjaGVkdWxlIFRlY2huaWNhbCBEZWJ0IFJlZHVjdGlvbicsXG4gICAgICAgICAgICAgIHR5cGU6ICdjYW1wYWlnbicsXG4gICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIGNhbXBhaWduVHlwZTogJ3RlY2huaWNhbC1kZWJ0LXJlZHVjdGlvbicsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29uZGl0aW9uczogW10sXG4gICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDEsXG4gICAgICAgICAgICAgIHRpbWVvdXRTZWNvbmRzOiAzMDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgbm90aWZpY2F0aW9uQ2hhbm5lbHM6IFsnY29uc29sZScsICdmaWxlJ10sXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICB0aGlzLmFsZXJ0UnVsZXMgPSBkZWZhdWx0UnVsZXM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXNjYWxhdGlvblJ1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZGVmYXVsdEVzY2FsYXRpb25SdWxlczogRXNjYWxhdGlvblJ1bGVbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnY3JpdGljYWwtZXNjYWxhdGlvbicsXG4gICAgICAgICAgbmFtZTogJ0NyaXRpY2FsIEFsZXJ0IEVzY2FsYXRpb24nLFxuICAgICAgICAgIGFsZXJ0VHlwZXM6IFsncGVyZm9ybWFuY2UnLCAnZXJyb3InLCAncXVhbGl0eScsICdzeXN0ZW0nXSxcbiAgICAgICAgICBzZXZlcml0eUxldmVsczogWydjcml0aWNhbCddLFxuICAgICAgICAgIGVzY2FsYXRpb25EZWxheU1pbnV0ZXM6IDMwLFxuICAgICAgICAgIGVzY2FsYXRpb25BY3Rpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnbm90aWZ5LXRlYW0nLFxuICAgICAgICAgICAgICBuYW1lOiAnTm90aWZ5IERldmVsb3BtZW50IFRlYW0nLFxuICAgICAgICAgICAgICB0eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NyaXRpY2FsIGFsZXJ0IHJlcXVpcmVzIGltbWVkaWF0ZSBhdHRlbnRpb24nLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxzOiBbJ2NvbnNvbGUnLCAnZmlsZSddLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb25kaXRpb25zOiBbXSxcbiAgICAgICAgICAgICAgcmV0cnlDb3VudDogMSxcbiAgICAgICAgICAgICAgdGltZW91dFNlY29uZHM6IDMwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG1heEVzY2FsYXRpb25zOiAzLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdlcnJvci1lc2NhbGF0aW9uJyxcbiAgICAgICAgICBuYW1lOiAnRXJyb3IgQWxlcnQgRXNjYWxhdGlvbicsXG4gICAgICAgICAgYWxlcnRUeXBlczogWydlcnJvciddLFxuICAgICAgICAgIHNldmVyaXR5TGV2ZWxzOiBbJ2Vycm9yJ10sXG4gICAgICAgICAgZXNjYWxhdGlvbkRlbGF5TWludXRlczogNjAsXG4gICAgICAgICAgZXNjYWxhdGlvbkFjdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdhdXRvbWF0ZWQtZml4LWF0dGVtcHQnLFxuICAgICAgICAgICAgICBuYW1lOiAnQXR0ZW1wdCBBdXRvbWF0ZWQgRml4JyxcbiAgICAgICAgICAgICAgdHlwZTogJ2NhbXBhaWduJyxcbiAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY2FtcGFpZ25UeXBlOiAnYXV0b21hdGVkLWVycm9yLWZpeCcsXG4gICAgICAgICAgICAgICAgY29uc2VydmF0aXZlOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb25kaXRpb25zOiBbJ2F1dG9tYXRpb25fb3Bwb3J0dW5pdGllcyA+IDUnXSxcbiAgICAgICAgICAgICAgcmV0cnlDb3VudDogMSxcbiAgICAgICAgICAgICAgdGltZW91dFNlY29uZHM6IDYwMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBtYXhFc2NhbGF0aW9uczogMixcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIHRoaXMuZXNjYWxhdGlvblJ1bGVzID0gZGVmYXVsdEVzY2FsYXRpb25SdWxlcztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0TW9uaXRvcmluZygpIHtcbiAgICAvLyBNb25pdG9yIGV2ZXJ5IDIgbWludXRlc1xuICAgIHNldEludGVydmFsKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLmNoZWNrQWxlcnRDb25kaXRpb25zKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc0VzY2FsYXRpb25zKCk7XG4gICAgICAgIHRoaXMuY2xlYW51cE9sZEFsZXJ0cygpO1xuICAgICAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gICAgICB9LFxuICAgICAgMiAqIDYwICogMTAwMFxuICAgICk7XG5cbiAgICAvLyBTdWJzY3JpYmUgdG8gZGF0YSBzb3VyY2VzXG4gICAgYnVpbGRQZXJmb3JtYW5jZU1vbml0b3Iuc3Vic2NyaWJlKGRhdGEgPT4ge1xuICAgICAgdGhpcy5ldmFsdWF0ZVBlcmZvcm1hbmNlQWxlcnRzKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgZXJyb3JUcmFja2luZ1N5c3RlbS5zdWJzY3JpYmUoZGF0YSA9PiB7XG4gICAgICB0aGlzLmV2YWx1YXRlRXJyb3JBbGVydHMoZGF0YSk7XG4gICAgfSk7XG5cbiAgICBxdWFsaXR5TWV0cmljc1NlcnZpY2Uuc3Vic2NyaWJlKGRhdGEgPT4ge1xuICAgICAgdGhpcy5ldmFsdWF0ZVF1YWxpdHlBbGVydHMoZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrQWxlcnRDb25kaXRpb25zKCkge1xuICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLmFsZXJ0UnVsZXMpIHtcbiAgICAgIGlmICghcnVsZS5lbmFibGVkKSBjb250aW51ZTtcblxuICAgICAgLy8gQ2hlY2sgY29vbGRvd25cbiAgICAgIGNvbnN0IGxhc3RBbGVydFRpbWUgPSB0aGlzLmxhc3RBbGVydFRpbWVzLmdldChydWxlLmlkKTtcbiAgICAgIGlmIChcbiAgICAgICAgbGFzdEFsZXJ0VGltZSAmJlxuICAgICAgICBEYXRlLm5vdygpIC0gbGFzdEFsZXJ0VGltZS5nZXRUaW1lKCkgPCBydWxlLmNvb2xkb3duTWludXRlcyAqIDYwICogMTAwMFxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmV2YWx1YXRlUnVsZShydWxlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlUnVsZShydWxlOiBBbGVydFJ1bGUpIHtcbiAgICBsZXQgY3VycmVudFZhbHVlOiBudW1iZXI7XG4gICAgbGV0IHNob3VsZEFsZXJ0ID0gZmFsc2U7XG5cbiAgICAvLyBHZXQgY3VycmVudCBtZXRyaWMgdmFsdWUgYmFzZWQgb24gcnVsZSB0eXBlXG4gICAgc3dpdGNoIChydWxlLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3BlcmZvcm1hbmNlJzpcbiAgICAgICAgY3VycmVudFZhbHVlID0gdGhpcy5nZXRQZXJmb3JtYW5jZU1ldHJpYyhydWxlLm1ldHJpYyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICBjdXJyZW50VmFsdWUgPSB0aGlzLmdldEVycm9yTWV0cmljKHJ1bGUubWV0cmljKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdxdWFsaXR5JzpcbiAgICAgICAgY3VycmVudFZhbHVlID0gdGhpcy5nZXRRdWFsaXR5TWV0cmljKHJ1bGUubWV0cmljKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzeXN0ZW0nOlxuICAgICAgICBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFN5c3RlbU1ldHJpYyhydWxlLm1ldHJpYyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEV2YWx1YXRlIGNvbmRpdGlvblxuICAgIHN3aXRjaCAocnVsZS5jb25kaXRpb24pIHtcbiAgICAgIGNhc2UgJ2dyZWF0ZXJfdGhhbic6XG4gICAgICAgIHNob3VsZEFsZXJ0ID0gY3VycmVudFZhbHVlID4gcnVsZS50aHJlc2hvbGQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGVzc190aGFuJzpcbiAgICAgICAgc2hvdWxkQWxlcnQgPSBjdXJyZW50VmFsdWUgPCBydWxlLnRocmVzaG9sZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlcXVhbHMnOlxuICAgICAgICBzaG91bGRBbGVydCA9IGN1cnJlbnRWYWx1ZSA9PT0gcnVsZS50aHJlc2hvbGQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbm90X2VxdWFscyc6XG4gICAgICAgIHNob3VsZEFsZXJ0ID0gY3VycmVudFZhbHVlICE9PSBydWxlLnRocmVzaG9sZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwZXJjZW50YWdlX2NoYW5nZSc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgcmVxdWlyZSBoaXN0b3JpY2FsIGRhdGEgY29tcGFyaXNvblxuICAgICAgICBzaG91bGRBbGVydCA9IGZhbHNlOyAvLyBQbGFjZWhvbGRlclxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkQWxlcnQpIHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQocnVsZSwgY3VycmVudFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFBlcmZvcm1hbmNlTWV0cmljKG1ldHJpYzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBzdW1tYXJ5ID0gYnVpbGRQZXJmb3JtYW5jZU1vbml0b3IuZ2V0UGVyZm9ybWFuY2VTdW1tYXJ5KCk7XG5cbiAgICBzd2l0Y2ggKG1ldHJpYykge1xuICAgICAgY2FzZSAnYnVpbGRfdGltZSc6XG4gICAgICAgIHJldHVybiBzdW1tYXJ5LmF2ZXJhZ2VCdWlsZFRpbWU7XG4gICAgICBjYXNlICdjb21waWxhdGlvbl90aW1lJzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuYXZlcmFnZUNvbXBpbGF0aW9uVGltZTtcbiAgICAgIGNhc2UgJ2J1bmRsZV9zaXplJzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuYXZlcmFnZUJ1bmRsZVNpemU7XG4gICAgICBjYXNlICdtZW1vcnlfdXNhZ2UnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS5hdmVyYWdlTWVtb3J5VXNhZ2U7XG4gICAgICBjYXNlICdjYWNoZV9lZmZpY2llbmN5JzpcbiAgICAgICAgcmV0dXJuIHN1bW1hcnkuY2FjaGVFZmZpY2llbmN5O1xuICAgICAgY2FzZSAncGVyZm9ybWFuY2Vfc2NvcmUnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS5wZXJmb3JtYW5jZVNjb3JlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRFcnJvck1ldHJpYyhtZXRyaWM6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IGVycm9yVHJhY2tpbmdTeXN0ZW0uZ2V0RXJyb3JTdW1tYXJ5KCk7XG5cbiAgICBzd2l0Y2ggKG1ldHJpYykge1xuICAgICAgY2FzZSAndHlwZXNjcmlwdF9lcnJvcnMnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS50b3RhbEFjdGl2ZUVycm9ycztcbiAgICAgIGNhc2UgJ2xpbnRpbmdfdmlvbGF0aW9ucyc6XG4gICAgICAgIHJldHVybiBzdW1tYXJ5LnRvdGFsQWN0aXZlTGludFZpb2xhdGlvbnM7XG4gICAgICBjYXNlICdidWlsZF9mYWlsdXJlcyc6XG4gICAgICAgIHJldHVybiBzdW1tYXJ5LnRvdGFsUmVjZW50RmFpbHVyZXM7XG4gICAgICBjYXNlICdjcml0aWNhbF9pc3N1ZXMnOlxuICAgICAgICByZXR1cm4gc3VtbWFyeS5jcml0aWNhbElzc3VlcztcbiAgICAgIGNhc2UgJ2F1dG9tYXRpb25fb3Bwb3J0dW5pdGllcyc6XG4gICAgICAgIHJldHVybiBzdW1tYXJ5LmF1dG9tYXRpb25PcHBvcnR1bml0aWVzO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRRdWFsaXR5TWV0cmljKG1ldHJpYzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBxdWFsaXR5TWV0cmljcyA9IGVycm9yVHJhY2tpbmdTeXN0ZW0uZ2V0Q3VycmVudFF1YWxpdHlNZXRyaWNzKCk7XG5cbiAgICBpZiAoIXF1YWxpdHlNZXRyaWNzKSByZXR1cm4gMDtcblxuICAgIHN3aXRjaCAobWV0cmljKSB7XG4gICAgICBjYXNlICdjb2RlX3F1YWxpdHlfc2NvcmUnOlxuICAgICAgICByZXR1cm4gcXVhbGl0eU1ldHJpY3MuY29kZVF1YWxpdHlTY29yZTtcbiAgICAgIGNhc2UgJ3RlY2huaWNhbF9kZWJ0X3Njb3JlJzpcbiAgICAgICAgcmV0dXJuIHF1YWxpdHlNZXRyaWNzLnRlY2huaWNhbERlYnRTY29yZTtcbiAgICAgIGNhc2UgJ21haW50YWluYWJpbGl0eV9pbmRleCc6XG4gICAgICAgIHJldHVybiBxdWFsaXR5TWV0cmljcy5tYWludGFpbmFiaWxpdHlJbmRleDtcbiAgICAgIGNhc2UgJ2Vycm9yX3JhdGUnOlxuICAgICAgICByZXR1cm4gcXVhbGl0eU1ldHJpY3MuZXJyb3JSYXRlO1xuICAgICAgY2FzZSAnd2FybmluZ19yYXRlJzpcbiAgICAgICAgcmV0dXJuIHF1YWxpdHlNZXRyaWNzLndhcm5pbmdSYXRlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTeXN0ZW1NZXRyaWMobWV0cmljOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHN3aXRjaCAobWV0cmljKSB7XG4gICAgICBjYXNlICdtZW1vcnlfdXNhZ2UnOlxuICAgICAgICByZXR1cm4gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xuICAgICAgY2FzZSAnY3B1X3VzYWdlJzpcbiAgICAgICAgcmV0dXJuIHByb2Nlc3MuY3B1VXNhZ2UoKS51c2VyICsgcHJvY2Vzcy5jcHVVc2FnZSgpLnN5c3RlbTtcbiAgICAgIGNhc2UgJ3VwdGltZSc6XG4gICAgICAgIHJldHVybiBwcm9jZXNzLnVwdGltZSgpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBbGVydChydWxlOiBBbGVydFJ1bGUsIGN1cnJlbnRWYWx1ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgYWxlcnQ6IEFsZXJ0ID0ge1xuICAgICAgaWQ6IGBhbGVydC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICB0eXBlOiBydWxlLnR5cGUsXG4gICAgICBzZXZlcml0eTogcnVsZS5zZXZlcml0eSxcbiAgICAgIHRpdGxlOiBydWxlLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogYCR7cnVsZS5kZXNjcmlwdGlvbn0uIEN1cnJlbnQgdmFsdWU6ICR7Y3VycmVudFZhbHVlfSwgVGhyZXNob2xkOiAke3J1bGUudGhyZXNob2xkfWAsXG4gICAgICB0aHJlc2hvbGQ6IHJ1bGUudGhyZXNob2xkLFxuICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgYWNrbm93bGVkZ2VkOiBmYWxzZSxcbiAgICAgIHJlc29sdmVkOiBmYWxzZSxcbiAgICAgIGVzY2FsYXRlZDogZmFsc2UsXG4gICAgICByZXNwb25zZUFjdGlvbnM6IHJ1bGUucmVzcG9uc2VBY3Rpb25zLm1hcChhID0+IGEubmFtZSksXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBydWxlSWQ6IHJ1bGUuaWQsXG4gICAgICAgIG1ldHJpYzogcnVsZS5tZXRyaWMsXG4gICAgICAgIGNvbmRpdGlvbjogcnVsZS5jb25kaXRpb24sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmFsZXJ0cy5wdXNoKGFsZXJ0KTtcbiAgICB0aGlzLmxhc3RBbGVydFRpbWVzLnNldChydWxlLmlkLCBuZXcgRGF0ZSgpKTtcblxuICAgIC8vIExvZyBhbGVydFxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFtBTEVSVCAke2FsZXJ0LnNldmVyaXR5LnRvVXBwZXJDYXNlKCl9XSAke2FsZXJ0LnRpdGxlfTogJHthbGVydC5kZXNjcmlwdGlvbn1gXG4gICAgKTtcblxuICAgIC8vIE5vdGlmeSBzdWJzY3JpYmVyc1xuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoYWxlcnQpO1xuXG4gICAgLy8gRXhlY3V0ZSBhdXRvLXJlc3BvbnNlIGlmIGVuYWJsZWRcbiAgICBpZiAocnVsZS5hdXRvUmVzcG9uc2UpIHtcbiAgICAgIHRoaXMuZXhlY3V0ZUFsZXJ0QWN0aW9ucyhhbGVydCwgcnVsZS5yZXNwb25zZUFjdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIFNlbmQgbm90aWZpY2F0aW9uc1xuICAgIHRoaXMuc2VuZE5vdGlmaWNhdGlvbnMoYWxlcnQsIHJ1bGUubm90aWZpY2F0aW9uQ2hhbm5lbHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQWxlcnRBY3Rpb25zKGFsZXJ0OiBBbGVydCwgYWN0aW9uczogQWxlcnRBY3Rpb25bXSkge1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgIC8vIENoZWNrIGNvbmRpdGlvbnNcbiAgICAgIGlmICghdGhpcy5ldmFsdWF0ZUFjdGlvbkNvbmRpdGlvbnMoYWN0aW9uLmNvbmRpdGlvbnMsIGFsZXJ0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2U6IEFsZXJ0UmVzcG9uc2UgPSB7XG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0LmlkLFxuICAgICAgICBhY3Rpb25JZDogYWN0aW9uLmlkLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLFxuICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5hbGVydFJlc3BvbnNlcy5wdXNoKHJlc3BvbnNlKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0gJ3J1bm5pbmcnO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBY3Rpb24oYWN0aW9uKTtcblxuICAgICAgICByZXNwb25zZS5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgICAgcmVzcG9uc2UuZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJlc3BvbnNlLnJlc3VsdCA9IHJlc3VsdDtcblxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgW0FsZXJ0IFJlc3BvbnNlXSBTdWNjZXNzZnVsbHkgZXhlY3V0ZWQgJHthY3Rpb24ubmFtZX0gZm9yIGFsZXJ0ICR7YWxlcnQuaWR9YFxuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgICAgIHJlc3BvbnNlLmVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXNwb25zZS5lcnJvciA9IGVycm9yLm1lc3NhZ2U7XG5cbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBgW0FsZXJ0IFJlc3BvbnNlXSBGYWlsZWQgdG8gZXhlY3V0ZSAke2FjdGlvbi5uYW1lfSBmb3IgYWxlcnQgJHthbGVydC5pZH06YCxcbiAgICAgICAgICBlcnJvclxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFJldHJ5IGlmIGNvbmZpZ3VyZWRcbiAgICAgICAgaWYgKHJlc3BvbnNlLnJldHJ5Q291bnQgPCBhY3Rpb24ucmV0cnlDb3VudCkge1xuICAgICAgICAgIHJlc3BvbnNlLnJldHJ5Q291bnQrKztcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUFsZXJ0QWN0aW9ucyhhbGVydCwgW2FjdGlvbl0pO1xuICAgICAgICAgIH0sIDMwMDAwKTsgLy8gUmV0cnkgYWZ0ZXIgMzAgc2Vjb25kc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBldmFsdWF0ZUFjdGlvbkNvbmRpdGlvbnMoXG4gICAgY29uZGl0aW9uczogc3RyaW5nW10sXG4gICAgYWxlcnQ6IEFsZXJ0XG4gICk6IGJvb2xlYW4ge1xuICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBvZiBjb25kaXRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuZXZhbHVhdGVDb25kaXRpb24oY29uZGl0aW9uLCBhbGVydCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBldmFsdWF0ZUNvbmRpdGlvbihjb25kaXRpb246IHN0cmluZywgYWxlcnQ6IEFsZXJ0KTogYm9vbGVhbiB7XG4gICAgLy8gU2ltcGxlIGNvbmRpdGlvbiBldmFsdWF0aW9uXG4gICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIGJlIG1vcmUgc29waGlzdGljYXRlZFxuXG4gICAgaWYgKGNvbmRpdGlvbi5pbmNsdWRlcygnZXJyb3JfY291bnQgPicpKSB7XG4gICAgICBjb25zdCB0aHJlc2hvbGQgPSBwYXJzZUludChjb25kaXRpb24uc3BsaXQoJz4nKVsxXS50cmltKCkpO1xuICAgICAgcmV0dXJuIGFsZXJ0LmN1cnJlbnRWYWx1ZSA+IHRocmVzaG9sZDtcbiAgICB9XG5cbiAgICBpZiAoY29uZGl0aW9uLmluY2x1ZGVzKCdhdXRvbWF0aW9uX29wcG9ydHVuaXRpZXMgPicpKSB7XG4gICAgICBjb25zdCB0aHJlc2hvbGQgPSBwYXJzZUludChjb25kaXRpb24uc3BsaXQoJz4nKVsxXS50cmltKCkpO1xuICAgICAgY29uc3QgZXJyb3JTdW1tYXJ5ID0gZXJyb3JUcmFja2luZ1N5c3RlbS5nZXRFcnJvclN1bW1hcnkoKTtcbiAgICAgIHJldHVybiBlcnJvclN1bW1hcnkuYXV0b21hdGlvbk9wcG9ydHVuaXRpZXMgPiB0aHJlc2hvbGQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVBY3Rpb24oYWN0aW9uOiBBbGVydEFjdGlvbik6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgdGltZW91dCA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICgpID0+IHJlamVjdChuZXcgRXJyb3IoJ0FjdGlvbiB0aW1lb3V0JykpLFxuICAgICAgICBhY3Rpb24udGltZW91dFNlY29uZHMgKiAxMDAwXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZXhlY3V0aW9uID0gdGhpcy5wZXJmb3JtQWN0aW9uKGFjdGlvbik7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtleGVjdXRpb24sIHRpbWVvdXRdKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUFjdGlvbihhY3Rpb246IEFsZXJ0QWN0aW9uKTogUHJvbWlzZTxhbnk+IHtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdzY3JpcHQnOlxuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlU2NyaXB0KGFjdGlvbi5jb25maWcuc2NyaXB0KTtcbiAgICAgIGNhc2UgJ2NvbW1hbmQnOlxuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlQ29tbWFuZChhY3Rpb24uY29uZmlnLmNvbW1hbmQpO1xuICAgICAgY2FzZSAnY2FtcGFpZ24nOlxuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyQ2FtcGFpZ24oYWN0aW9uLmNvbmZpZyk7XG4gICAgICBjYXNlICdhcGlfY2FsbCc6XG4gICAgICAgIHJldHVybiB0aGlzLm1ha2VBcGlDYWxsKGFjdGlvbi5jb25maWcpO1xuICAgICAgY2FzZSAnbm90aWZpY2F0aW9uJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZE5vdGlmaWNhdGlvbihhY3Rpb24uY29uZmlnKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBhY3Rpb24gdHlwZTogJHthY3Rpb24udHlwZX1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVTY3JpcHQoc2NyaXB0TmFtZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBUaGlzIHdvdWxkIGV4ZWN1dGUgYSBzY3JpcHQgZmlsZVxuICAgIC8vIEZvciBub3csIHJldHVybiBhIHBsYWNlaG9sZGVyXG4gICAgY29uc29sZS5sb2coYFtBbGVydCBBY3Rpb25dIEV4ZWN1dGluZyBzY3JpcHQ6ICR7c2NyaXB0TmFtZX1gKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgU2NyaXB0ICR7c2NyaXB0TmFtZX0gZXhlY3V0ZWRgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVDb21tYW5kKGNvbW1hbmQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gVGhpcyB3b3VsZCBleGVjdXRlIGEgc2hlbGwgY29tbWFuZFxuICAgIC8vIEZvciBub3csIHJldHVybiBhIHBsYWNlaG9sZGVyXG4gICAgY29uc29sZS5sb2coYFtBbGVydCBBY3Rpb25dIEV4ZWN1dGluZyBjb21tYW5kOiAke2NvbW1hbmR9YCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYENvbW1hbmQgJHtjb21tYW5kfSBleGVjdXRlZGAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHJpZ2dlckNhbXBhaWduKGNvbmZpZzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBUaGlzIHdvdWxkIGludGVncmF0ZSB3aXRoIHRoZSBjYW1wYWlnbiBzeXN0ZW1cbiAgICAvLyBGb3Igbm93LCByZXR1cm4gYSBwbGFjZWhvbGRlclxuICAgIGNvbnNvbGUubG9nKGBbQWxlcnQgQWN0aW9uXSBUcmlnZ2VyaW5nIGNhbXBhaWduOiAke2NvbmZpZy5jYW1wYWlnblR5cGV9YCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBgQ2FtcGFpZ24gJHtjb25maWcuY2FtcGFpZ25UeXBlfSB0cmlnZ2VyZWRgLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VBcGlDYWxsKGNvbmZpZzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBUaGlzIHdvdWxkIG1ha2UgYW4gSFRUUCBBUEkgY2FsbFxuICAgIC8vIEZvciBub3csIHJldHVybiBhIHBsYWNlaG9sZGVyXG4gICAgY29uc29sZS5sb2coYFtBbGVydCBBY3Rpb25dIE1ha2luZyBBUEkgY2FsbCB0bzogJHtjb25maWcudXJsfWApO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBBUEkgY2FsbCB0byAke2NvbmZpZy51cmx9IGNvbXBsZXRlZGAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZE5vdGlmaWNhdGlvbihjb25maWc6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc29sZS5sb2coYFtBbGVydCBOb3RpZmljYXRpb25dICR7Y29uZmlnLm1lc3NhZ2V9YCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ05vdGlmaWNhdGlvbiBzZW50JyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBzZW5kTm90aWZpY2F0aW9ucyhhbGVydDogQWxlcnQsIGNoYW5uZWxzOiBzdHJpbmdbXSkge1xuICAgIGZvciAoY29uc3QgY2hhbm5lbCBvZiBjaGFubmVscykge1xuICAgICAgc3dpdGNoIChjaGFubmVsKSB7XG4gICAgICAgIGNhc2UgJ2NvbnNvbGUnOlxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbTk9USUZJQ0FUSU9OXSAke2FsZXJ0LnRpdGxlfTogJHthbGVydC5kZXNjcmlwdGlvbn1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgICAgdGhpcy53cml0ZUFsZXJ0VG9GaWxlKGFsZXJ0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW05PVElGSUNBVElPTl0gVW5rbm93biBjaGFubmVsOiAke2NoYW5uZWx9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cml0ZUFsZXJ0VG9GaWxlKGFsZXJ0OiBBbGVydCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhbGVydHNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJy5raXJvJywgJ2FsZXJ0cycpO1xuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGFsZXJ0c0RpcikpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKGFsZXJ0c0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFsZXJ0RmlsZSA9IHBhdGguam9pbihhbGVydHNEaXIsICdhbGVydHMubG9nJyk7XG4gICAgICBjb25zdCBhbGVydExpbmUgPSBgJHthbGVydC50aW1lc3RhbXAudG9JU09TdHJpbmcoKX0gWyR7YWxlcnQuc2V2ZXJpdHkudG9VcHBlckNhc2UoKX1dICR7YWxlcnQudGl0bGV9OiAke2FsZXJ0LmRlc2NyaXB0aW9ufVxcbmA7XG5cbiAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKGFsZXJ0RmlsZSwgYWxlcnRMaW5lKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0FsZXJ0aW5nIFN5c3RlbV0gRmFpbGVkIHRvIHdyaXRlIGFsZXJ0IHRvIGZpbGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXZhbHVhdGVQZXJmb3JtYW5jZUFsZXJ0cyhkYXRhOiBhbnkpIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGxlZCB3aGVuIHBlcmZvcm1hbmNlIGRhdGEgaXMgdXBkYXRlZFxuICAgIC8vIFRoZSBtYWluIG1vbml0b3JpbmcgbG9vcCBoYW5kbGVzIHJ1bGUgZXZhbHVhdGlvblxuICB9XG5cbiAgcHJpdmF0ZSBldmFsdWF0ZUVycm9yQWxlcnRzKGRhdGE6IGFueSkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY2FsbGVkIHdoZW4gZXJyb3IgZGF0YSBpcyB1cGRhdGVkXG4gICAgLy8gVGhlIG1haW4gbW9uaXRvcmluZyBsb29wIGhhbmRsZXMgcnVsZSBldmFsdWF0aW9uXG4gIH1cblxuICBwcml2YXRlIGV2YWx1YXRlUXVhbGl0eUFsZXJ0cyhkYXRhOiBhbnkpIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGxlZCB3aGVuIHF1YWxpdHkgZGF0YSBpcyB1cGRhdGVkXG4gICAgLy8gVGhlIG1haW4gbW9uaXRvcmluZyBsb29wIGhhbmRsZXMgcnVsZSBldmFsdWF0aW9uXG4gIH1cblxuICBwcml2YXRlIHByb2Nlc3NFc2NhbGF0aW9ucygpIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4gICAgZm9yIChjb25zdCBhbGVydCBvZiB0aGlzLmFsZXJ0cykge1xuICAgICAgaWYgKGFsZXJ0LnJlc29sdmVkIHx8IGFsZXJ0LmVzY2FsYXRlZCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IGFsZXJ0QWdlID0gbm93LmdldFRpbWUoKSAtIGFsZXJ0LnRpbWVzdGFtcC5nZXRUaW1lKCk7XG5cbiAgICAgIGZvciAoY29uc3QgZXNjYWxhdGlvblJ1bGUgb2YgdGhpcy5lc2NhbGF0aW9uUnVsZXMpIHtcbiAgICAgICAgaWYgKCFlc2NhbGF0aW9uUnVsZS5hbGVydFR5cGVzLmluY2x1ZGVzKGFsZXJ0LnR5cGUpKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFlc2NhbGF0aW9uUnVsZS5zZXZlcml0eUxldmVscy5pbmNsdWRlcyhhbGVydC5zZXZlcml0eSkpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IGVzY2FsYXRpb25EZWxheSA9XG4gICAgICAgICAgZXNjYWxhdGlvblJ1bGUuZXNjYWxhdGlvbkRlbGF5TWludXRlcyAqIDYwICogMTAwMDtcblxuICAgICAgICBpZiAoYWxlcnRBZ2UgPj0gZXNjYWxhdGlvbkRlbGF5KSB7XG4gICAgICAgICAgdGhpcy5lc2NhbGF0ZUFsZXJ0KGFsZXJ0LCBlc2NhbGF0aW9uUnVsZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVzY2FsYXRlQWxlcnQoYWxlcnQ6IEFsZXJ0LCBlc2NhbGF0aW9uUnVsZTogRXNjYWxhdGlvblJ1bGUpIHtcbiAgICBhbGVydC5lc2NhbGF0ZWQgPSB0cnVlO1xuICAgIGFsZXJ0LmVzY2FsYXRlZEF0ID0gbmV3IERhdGUoKTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFtFU0NBTEFUSU9OXSBBbGVydCAke2FsZXJ0LmlkfSBlc2NhbGF0ZWQgdXNpbmcgcnVsZSAke2VzY2FsYXRpb25SdWxlLm5hbWV9YFxuICAgICk7XG5cbiAgICAvLyBFeGVjdXRlIGVzY2FsYXRpb24gYWN0aW9uc1xuICAgIHRoaXMuZXhlY3V0ZUFsZXJ0QWN0aW9ucyhhbGVydCwgZXNjYWxhdGlvblJ1bGUuZXNjYWxhdGlvbkFjdGlvbnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwT2xkQWxlcnRzKCkge1xuICAgIGNvbnN0IGN1dG9mZlRpbWUgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gMzAgZGF5c1xuXG4gICAgdGhpcy5hbGVydHMgPSB0aGlzLmFsZXJ0cy5maWx0ZXIoYWxlcnQgPT4gYWxlcnQudGltZXN0YW1wID49IGN1dG9mZlRpbWUpO1xuICAgIHRoaXMuYWxlcnRSZXNwb25zZXMgPSB0aGlzLmFsZXJ0UmVzcG9uc2VzLmZpbHRlcihcbiAgICAgIHJlc3BvbnNlID0+IHJlc3BvbnNlLnN0YXJ0VGltZSA+PSBjdXRvZmZUaW1lXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgbm90aWZ5U3Vic2NyaWJlcnMoYWxlcnQ6IEFsZXJ0KSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNhbGxiYWNrKGFsZXJ0KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBbGVydGluZyBTeXN0ZW1dIFN1YnNjcmliZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gUHVibGljIEFQSSBtZXRob2RzXG4gIHB1YmxpYyBzdWJzY3JpYmUoY2FsbGJhY2s6IChhbGVydDogQWxlcnQpID0+IHZvaWQpIHtcbiAgICB0aGlzLnN1YnNjcmliZXJzLmFkZChjYWxsYmFjayk7XG4gICAgcmV0dXJuICgpID0+IHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBbGVydHMob3B0aW9ucz86IHtcbiAgICB0eXBlPzogc3RyaW5nO1xuICAgIHNldmVyaXR5Pzogc3RyaW5nO1xuICAgIHJlc29sdmVkPzogYm9vbGVhbjtcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgfSk6IEFsZXJ0W10ge1xuICAgIGxldCBmaWx0ZXJlZCA9IHRoaXMuYWxlcnRzO1xuXG4gICAgaWYgKG9wdGlvbnM/LnR5cGUpIHtcbiAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQuZmlsdGVyKGEgPT4gYS50eXBlID09PSBvcHRpb25zLnR5cGUpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zPy5zZXZlcml0eSkge1xuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIoYSA9PiBhLnNldmVyaXR5ID09PSBvcHRpb25zLnNldmVyaXR5KTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucz8ucmVzb2x2ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIoYSA9PiBhLnJlc29sdmVkID09PSBvcHRpb25zLnJlc29sdmVkKTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IGJ5IHRpbWVzdGFtcCAobmV3ZXN0IGZpcnN0KVxuICAgIGZpbHRlcmVkLnNvcnQoKGEsIGIpID0+IGIudGltZXN0YW1wLmdldFRpbWUoKSAtIGEudGltZXN0YW1wLmdldFRpbWUoKSk7XG5cbiAgICBpZiAob3B0aW9ucz8ubGltaXQpIHtcbiAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQuc2xpY2UoMCwgb3B0aW9ucy5saW1pdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcmVkO1xuICB9XG5cbiAgcHVibGljIGdldEFsZXJ0UnVsZXMoKTogQWxlcnRSdWxlW10ge1xuICAgIHJldHVybiB0aGlzLmFsZXJ0UnVsZXM7XG4gIH1cblxuICBwdWJsaWMgYWRkQWxlcnRSdWxlKHJ1bGU6IE9taXQ8QWxlcnRSdWxlLCAnaWQnPik6IHN0cmluZyB7XG4gICAgY29uc3QgaWQgPSBgcnVsZS0ke0RhdGUubm93KCl9YDtcbiAgICBjb25zdCBuZXdSdWxlOiBBbGVydFJ1bGUgPSB7IC4uLnJ1bGUsIGlkIH07XG5cbiAgICB0aGlzLmFsZXJ0UnVsZXMucHVzaChuZXdSdWxlKTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG5cbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQWxlcnRSdWxlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8QWxlcnRSdWxlPik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJ1bGVJbmRleCA9IHRoaXMuYWxlcnRSdWxlcy5maW5kSW5kZXgociA9PiByLmlkID09PSBpZCk7XG4gICAgaWYgKHJ1bGVJbmRleCA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICAgIHRoaXMuYWxlcnRSdWxlc1tydWxlSW5kZXhdID0geyAuLi50aGlzLmFsZXJ0UnVsZXNbcnVsZUluZGV4XSwgLi4udXBkYXRlcyB9O1xuICAgIHRoaXMuc2F2ZUNvbmZpZ3VyYXRpb24oKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZUFsZXJ0UnVsZShpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcnVsZUluZGV4ID0gdGhpcy5hbGVydFJ1bGVzLmZpbmRJbmRleChyID0+IHIuaWQgPT09IGlkKTtcbiAgICBpZiAocnVsZUluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgdGhpcy5hbGVydFJ1bGVzLnNwbGljZShydWxlSW5kZXgsIDEpO1xuICAgIHRoaXMuc2F2ZUNvbmZpZ3VyYXRpb24oKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGFja25vd2xlZGdlQWxlcnQoYWxlcnRJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFsZXJ0cy5maW5kKGEgPT4gYS5pZCA9PT0gYWxlcnRJZCk7XG4gICAgaWYgKCFhbGVydCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgYWxlcnQuYWNrbm93bGVkZ2VkID0gdHJ1ZTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNvbHZlQWxlcnQoYWxlcnRJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFsZXJ0cy5maW5kKGEgPT4gYS5pZCA9PT0gYWxlcnRJZCk7XG4gICAgaWYgKCFhbGVydCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgYWxlcnQucmVzb2x2ZWQgPSB0cnVlO1xuICAgIGFsZXJ0LnJlc29sdmVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuc2F2ZUNvbmZpZ3VyYXRpb24oKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGdldEFsZXJ0UmVzcG9uc2VzKGFsZXJ0SWQ/OiBzdHJpbmcpOiBBbGVydFJlc3BvbnNlW10ge1xuICAgIGlmIChhbGVydElkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hbGVydFJlc3BvbnNlcy5maWx0ZXIociA9PiByLmFsZXJ0SWQgPT09IGFsZXJ0SWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hbGVydFJlc3BvbnNlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXRBbGVydFN1bW1hcnkoKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBsYXN0MjRIb3VycyA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcblxuICAgIGNvbnN0IHJlY2VudEFsZXJ0cyA9IHRoaXMuYWxlcnRzLmZpbHRlcihhID0+IGEudGltZXN0YW1wID49IGxhc3QyNEhvdXJzKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEFsZXJ0czogdGhpcy5hbGVydHMubGVuZ3RoLFxuICAgICAgcmVjZW50QWxlcnRzOiByZWNlbnRBbGVydHMubGVuZ3RoLFxuICAgICAgdW5yZXNvbHZlZEFsZXJ0czogdGhpcy5hbGVydHMuZmlsdGVyKGEgPT4gIWEucmVzb2x2ZWQpLmxlbmd0aCxcbiAgICAgIGNyaXRpY2FsQWxlcnRzOiB0aGlzLmFsZXJ0cy5maWx0ZXIoXG4gICAgICAgIGEgPT4gYS5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJyAmJiAhYS5yZXNvbHZlZFxuICAgICAgKS5sZW5ndGgsXG4gICAgICBlc2NhbGF0ZWRBbGVydHM6IHRoaXMuYWxlcnRzLmZpbHRlcihhID0+IGEuZXNjYWxhdGVkICYmICFhLnJlc29sdmVkKVxuICAgICAgICAubGVuZ3RoLFxuICAgICAgYWxlcnRzQnlUeXBlOiB0aGlzLmdldEFsZXJ0Q291bnRzQnlUeXBlKCksXG4gICAgICBhbGVydHNCeVNldmVyaXR5OiB0aGlzLmdldEFsZXJ0Q291bnRzQnlTZXZlcml0eSgpLFxuICAgICAgcmVzcG9uc2VTdWNjZXNzUmF0ZTogdGhpcy5jYWxjdWxhdGVSZXNwb25zZVN1Y2Nlc3NSYXRlKCksXG4gICAgICBhdmVyYWdlUmVzb2x1dGlvblRpbWU6IHRoaXMuY2FsY3VsYXRlQXZlcmFnZVJlc29sdXRpb25UaW1lKCksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWxlcnRDb3VudHNCeVR5cGUoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IGFsZXJ0IG9mIHRoaXMuYWxlcnRzLmZpbHRlcihhID0+ICFhLnJlc29sdmVkKSkge1xuICAgICAgY291bnRzW2FsZXJ0LnR5cGVdID0gKGNvdW50c1thbGVydC50eXBlXSB8fCAwKSArIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50cztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWxlcnRDb3VudHNCeVNldmVyaXR5KCk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4ge1xuICAgIGNvbnN0IGNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBhbGVydCBvZiB0aGlzLmFsZXJ0cy5maWx0ZXIoYSA9PiAhYS5yZXNvbHZlZCkpIHtcbiAgICAgIGNvdW50c1thbGVydC5zZXZlcml0eV0gPSAoY291bnRzW2FsZXJ0LnNldmVyaXR5XSB8fCAwKSArIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50cztcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUmVzcG9uc2VTdWNjZXNzUmF0ZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IHRvdGFsUmVzcG9uc2VzID0gdGhpcy5hbGVydFJlc3BvbnNlcy5sZW5ndGg7XG4gICAgaWYgKHRvdGFsUmVzcG9uc2VzID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IHN1Y2Nlc3NmdWxSZXNwb25zZXMgPSB0aGlzLmFsZXJ0UmVzcG9uc2VzLmZpbHRlcihcbiAgICAgIHIgPT4gci5zdGF0dXMgPT09ICdjb21wbGV0ZWQnXG4gICAgKS5sZW5ndGg7XG4gICAgcmV0dXJuIChzdWNjZXNzZnVsUmVzcG9uc2VzIC8gdG90YWxSZXNwb25zZXMpICogMTAwO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBdmVyYWdlUmVzb2x1dGlvblRpbWUoKTogbnVtYmVyIHtcbiAgICBjb25zdCByZXNvbHZlZEFsZXJ0cyA9IHRoaXMuYWxlcnRzLmZpbHRlcihhID0+IGEucmVzb2x2ZWQgJiYgYS5yZXNvbHZlZEF0KTtcbiAgICBpZiAocmVzb2x2ZWRBbGVydHMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IHRvdGFsUmVzb2x1dGlvblRpbWUgPSByZXNvbHZlZEFsZXJ0cy5yZWR1Y2UoKHN1bSwgYWxlcnQpID0+IHtcbiAgICAgIHJldHVybiBzdW0gKyAoYWxlcnQucmVzb2x2ZWRBdCEuZ2V0VGltZSgpIC0gYWxlcnQudGltZXN0YW1wLmdldFRpbWUoKSk7XG4gICAgfSwgMCk7XG5cbiAgICByZXR1cm4gdG90YWxSZXNvbHV0aW9uVGltZSAvIHJlc29sdmVkQWxlcnRzLmxlbmd0aCAvICg2MCAqIDEwMDApOyAvLyBSZXR1cm4gaW4gbWludXRlc1xuICB9XG5cbiAgcHVibGljIHRlc3RBbGVydChydWxlSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmFsZXJ0UnVsZXMuZmluZChyID0+IHIuaWQgPT09IHJ1bGVJZCk7XG4gICAgaWYgKCFydWxlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDcmVhdGUgYSB0ZXN0IGFsZXJ0XG4gICAgdGhpcy5jcmVhdGVBbGVydChydWxlLCBydWxlLnRocmVzaG9sZCArIDEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCkge1xuICAgIHRoaXMuYWxlcnRzID0gW107XG4gICAgdGhpcy5hbGVydFJlc3BvbnNlcyA9IFtdO1xuICAgIHRoaXMubGFzdEFsZXJ0VGltZXMuY2xlYXIoKTtcbiAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFsZXJ0aW5nU3lzdGVtID0gbmV3IEFsZXJ0aW5nU3lzdGVtKCk7XG5leHBvcnQgZGVmYXVsdCBBbGVydGluZ1N5c3RlbTtcbiJdLCJ2ZXJzaW9uIjozfQ==