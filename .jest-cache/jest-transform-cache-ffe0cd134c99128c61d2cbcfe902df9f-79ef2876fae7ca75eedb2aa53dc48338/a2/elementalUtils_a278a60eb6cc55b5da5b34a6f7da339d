ef11bac96ae2343a51dd60bb9dbced84
"use strict";
// src/utils/elementalUtils.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateElementalAffinity = exports.fixRawIngredientMappings = exports.fixIngredientMappings = exports.fixIngredientMapping = exports.ensureLowercaseFormat = exports.getDefaultElementalProperties = exports.getCurrentElementalState = exports.enhanceOilProperties = exports.enhanceVegetableTransformations = exports.getStrengtheningElement = exports.getElementalRelationship = exports.getBalancingElement = exports.ensureCompleteElementalProperties = exports.getElementStrength = exports.getPrimaryElement = exports.normalizeElementalValues = exports.transformItemsWithPlanetaryPositions = exports.elements = exports.elementalInteractions = exports.elementalFunctions = exports.elementalUtils = exports.getMissingElements = exports.validateElementalRequirements = exports.standardizeRecipeElements = exports.normalizeProperties = exports.validateElementalProperties = void 0;
const elementalConstants_1 = require("@/constants/elementalConstants");
const planetaryFoodAssociations_1 = require("@/constants/planetaryFoodAssociations");
const ElementalCalculator_1 = require("@/services/ElementalCalculator");
const validation_1 = require("@/utils/validation");
const elementalMappings_1 = require("./elementalMappings");
Object.defineProperty(exports, "elementalFunctions", { enumerable: true, get: function () { return elementalMappings_1.elementalFunctions; } });
Object.defineProperty(exports, "elementalInteractions", { enumerable: true, get: function () { return elementalMappings_1.elementalInteractions; } });
Object.defineProperty(exports, "elements", { enumerable: true, get: function () { return elementalMappings_1.elements; } });
// Missing ELEMENTAL_CHARACTERISTICS constant
const ELEMENTAL_CHARACTERISTICS = {
    Fire: {
        cookingTechniques: ['grilling', 'roasting', 'searing', 'flambéing'],
        timeOfDay: ['morning', 'noon'],
        qualities: ['energetic', 'transformative', 'intense'],
        temperature: 'hot'
    },
    Water: {
        cookingTechniques: ['boiling', 'steaming', 'poaching', 'braising'],
        timeOfDay: ['evening', 'night'],
        qualities: ['flowing', 'cooling', 'nurturing'],
        temperature: 'cool'
    },
    Earth: {
        cookingTechniques: ['baking', 'slow-cooking', 'roasting', 'smoking'],
        timeOfDay: ['afternoon', 'evening'],
        qualities: ['grounding', 'stable', 'nourishing'],
        temperature: 'moderate'
    },
    Air: {
        cookingTechniques: ['whipping', 'frying', 'sautéing', 'dehydrating'],
        timeOfDay: ['morning', 'midday'],
        qualities: ['light', 'airy', 'quick'],
        temperature: 'variable'
    }
};
// AlchemicalProperty type imported from @/constants/planetaryElements
/**
 * Validates that elemental properties contain valid values
 * @param properties The elemental properties to validate
 * @returns True if properties are valid, false otherwise
 */
const validateElementalProperties = (properties) => {
    // If properties is null or undefined, return false immediately
    if (!properties) {
        console.warn('Warning: properties is null or undefined in validateElementalProperties');
        return false;
    }
    // Check if all required elements exist
    const requiredElements = ['Fire', 'Water', 'Earth', 'Air'];
    for (const element of requiredElements) {
        if (typeof properties[element] !== 'number') {
            console.warn(`Warning: properties.${element} is not a number in validateElementalProperties`);
            return false;
        }
        // Check if values are between 0 and 1
        if (properties[element] < 0 || properties[element] > 1) {
            (0, validation_1.logUnexpectedValue)('validateElementalProperties', {
                message: `Element value out of range: ${element} = ${properties[element]}`,
                element,
                value: properties[element],
            });
            return false;
        }
    }
    // Optionally check if properties sum to 1 (or close to it due to floating point)
    const sum = Object.values(properties).reduce((acc, val) => acc + val, 0);
    const isCloseToOne = Math.abs(sum - 1) < 0.01;
    if (!isCloseToOne) {
        (0, validation_1.logUnexpectedValue)('validateElementalProperties', {
            message: `Elemental properties do not sum to 1: ${sum}`,
            sum,
            properties,
        });
    }
    return true;
};
exports.validateElementalProperties = validateElementalProperties;
/**
 * Normalizes elemental properties to ensure they sum to 1
 * @param properties The elemental properties to normalize
 * @returns Normalized elemental properties
 */
const normalizeProperties = (properties) => {
    // Handle null or undefined
    if (!properties) {
        console.warn('Warning: properties is null or undefined in normalizeProperties');
        return { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES };
    }
    // Fill in any missing properties with defaults
    const completeProperties = {
        Fire: properties.Fire ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Fire,
        Water: properties.Water ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Water,
        Earth: properties.Earth ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Earth,
        Air: properties.Air ?? elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES.Air,
    };
    const sum = Object.values(completeProperties).reduce((acc, val) => acc + val, 0);
    if (sum === 0) {
        // If sum is 0, return balanced default
        console.warn('Warning: properties sum is 0 in normalizeProperties');
        return { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES };
    }
    // Normalize each value
    return Object.entries(completeProperties).reduce((acc, [key, value]) => {
        if ((0, validation_1.isElementalPropertyKey)(key)) {
            acc[key] = value / sum;
        }
        else {
            // This shouldn't happen with the type-safety above, but just in case
            console.warn(`Warning: invalid key ${key} in normalizeProperties`);
        }
        return acc;
    }, { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES });
};
exports.normalizeProperties = normalizeProperties;
/**
 * Standardizes elemental properties for recipes, ensuring all recipes have
 * properly normalized elemental values
 * @param recipe The recipe to standardize
 * @returns Recipe with standardized elemental properties
 */
const standardizeRecipeElements = (recipe) => {
    // Handle null /undefined recipe
    if (!recipe) {
        console.warn('Warning: recipe is null or undefined in standardizeRecipeElements');
        return {
            elementalProperties: { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES }
        };
    }
    // If recipe doesn't have elemental properties, use current elemental state
    if (!recipe.elementalProperties) {
        const currentState = ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
        return {
            ...recipe,
            elementalProperties: currentState,
        };
    }
    // Normalize properties to ensure they sum to 1
    return {
        ...recipe,
        elementalProperties: (0, exports.normalizeProperties)(recipe.elementalProperties),
    };
};
exports.standardizeRecipeElements = standardizeRecipeElements;
const validateElementalRequirements = (properties) => {
    return (0, validation_1.isElementalProperties)(properties);
};
exports.validateElementalRequirements = validateElementalRequirements;
/**
 * Gets the elements that are missing or significantly lower than ideal balance in the provided properties
 * @param properties The elemental properties to check
 * @returns Array of elements that are missing or low
 */
function getMissingElements(properties) {
    if (!properties) {
        return ['Fire', 'Water', 'Earth', 'Air'];
    }
    const missing = [];
    const _idealBalance = 0.25; // Each element should ideally be 25%
    const threshold = 0.15; // Consider missing if below 15%
    for (const element of ['Fire', 'Water', 'Earth', 'Air']) {
        const value = properties[element] || 0;
        if (value < threshold) {
            missing.push(element);
        }
    }
    return missing;
}
exports.getMissingElements = getMissingElements;
exports.elementalUtils = {
    validateProperties: exports.validateElementalRequirements,
    normalizeProperties: exports.normalizeProperties,
    standardizeRecipeElements: exports.standardizeRecipeElements,
    getMissingElements,
    calculateelementalState(recipe) {
        if (!recipe?.ingredients.length) {
            return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
        }
        // Create a safe default balance to start
        const balance = { ...elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES };
        // Get total amount for percentage calculations
        const totalAmount = recipe.ingredients.reduce((sum, ing) => {
            const amount = ing.amount ?? 1; // Default to 1 if amount is missing
            return sum + amount;
        }, 0);
        // Handle the special case where there are no ingredients with amount
        if (totalAmount === 0) {
            return balance;
        }
        // Initialize balance with 0 values
        Object.keys(balance).forEach(el => {
            if ((0, validation_1.isElementalPropertyKey)(el)) {
                balance[el] = 0;
            }
        });
        // Process each ingredient
        recipe.ingredients.forEach(ing => {
            const amount = ing.amount ?? 1; // Default to 1 if amount is missing
            if (ing.elementalProperties) {
                // For each element in the ingredient
                Object.entries(ing.elementalProperties).forEach(([element, value]) => {
                    if ((0, validation_1.isElementalPropertyKey)(element)) {
                        balance[element] += (value * amount) / totalAmount;
                    }
                });
            }
        });
        // Normalize to ensure they sum to 1
        return (0, exports.normalizeProperties)(balance);
    },
    combineProperties(a, b, bWeight = 0.5) {
        const combinedProps = {};
        const aWeight = 1 - bWeight;
        Object.keys(a).forEach((key) => {
            const element = key;
            combinedProps[element] =
                a[element] * aWeight + (b[element] || 0) * bWeight;
        });
        return combinedProps;
    },
    getelementalState(recipe) {
        if (!recipe.ingredients.length) {
            return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
        }
        const combinedProperties = recipe.ingredients.reduce((acc, ingredient) => {
            const props = ingredient.elementalProperties ||
                ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
            return {
                Fire: acc.Fire + props.Fire,
                Water: acc.Water + props.Water,
                Earth: acc.Earth + props.Earth,
                Air: acc.Air + props.Air,
            };
        }, { Fire: 0, Water: 0, Earth: 0, Air: 0 });
        return (0, exports.normalizeProperties)(combinedProperties);
    },
    /**
     * Gets a complementary element that works well with the given element
     * All elements work well together in their own way
     * @param element The element to find a complement for
     * @returns The complementary element
     */
    getComplementaryElement(element) {
        // Each element complements all others, but we return one suggestion
        // based on traditional culinary pairings
        const complementary = {
            Fire: 'Fire',
            Water: 'Water',
            Earth: 'Earth',
            Air: 'Air', // Air reinforces itself
        };
        return complementary[element];
    },
    /**
     * Gets the elemental characteristics for a specific element
     * @param element The element to get characteristics for
     * @returns The elemental characteristics
     */
    getElementalCharacteristics(element) {
        return ELEMENTAL_CHARACTERISTICS[element];
    },
    /**
     * Gets a complete elemental profile that includes properties and characteristics
     * @param properties The elemental properties
     * @returns A complete elemental profile
     */
    getElementalProfile(properties) {
        // Find the dominant element
        const entries = Object.entries(properties);
        let dominantElement = 'Fire';
        let maxValue = 0;
        for (const [element, value] of entries) {
            if (value > maxValue) {
                dominantElement = element;
                maxValue = value;
            }
        }
        return {
            dominant: dominantElement,
            balance: properties,
            characteristics: [this.getElementalCharacteristics(dominantElement)],
        };
    },
    /**
     * Gets the suggested cooking techniques based on elemental properties
     * @param properties The elemental properties
     * @returns Array of recommended cooking techniques
     */
    getSuggestedCookingTechniques(properties) {
        const techniques = [];
        const threshold = 0.3; // Only consider elements above this threshold for recommendations
        if (properties.Fire > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Fire.cookingTechniques.slice(0, 2));
        }
        if (properties.Water > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Water.cookingTechniques.slice(0, 2));
        }
        if (properties.Earth > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Earth.cookingTechniques.slice(0, 2));
        }
        if (properties.Air > threshold) {
            techniques.push(...ELEMENTAL_CHARACTERISTICS.Air.cookingTechniques.slice(0, 2));
        }
        // Return unique techniques or a default if none meet the threshold
        return techniques.length > 0
            ? Array.from(new Set(techniques))
            : ['Balanced cooking'];
    },
    /**
     * Gets the complementary ingredients based on elemental properties
     * @param properties The elemental properties
     * @returns Array of recommended complementary ingredients
     */
    getRecommendedTimeOfDay(properties) {
        const _times = [];
        const threshold = 0.3; // Only consider elements above this threshold for recommendations
        const weightedTimes = [];
        // Add times based on the elemental balance, weighted by their values
        if (properties.Fire > threshold) {
            for (let i = 0; i < Math.ceil(properties.Fire * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Fire.timeOfDay);
            }
        }
        if (properties.Water > threshold) {
            for (let i = 0; i < Math.ceil(properties.Water * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Water.timeOfDay);
            }
        }
        if (properties.Earth > threshold) {
            for (let i = 0; i < Math.ceil(properties.Earth * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Earth.timeOfDay);
            }
        }
        if (properties.Air > threshold) {
            for (let i = 0; i < Math.ceil(properties.Air * 10); i++) {
                weightedTimes.push(...ELEMENTAL_CHARACTERISTICS.Air.timeOfDay);
            }
        }
        // Return unique times or a default if none meet the threshold
        return weightedTimes.length > 0
            ? Array.from(new Set(weightedTimes))
            : ['Any time'];
    },
    // Get the default elemental properties
    getDefaultElementalProperties() {
        return elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES;
    },
    // Export the default elemental properties constant for direct access
    DEFAULT_ELEMENTAL_PROPERTIES: elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES,
    /**
     * Gets the current elemental state from the ElementalCalculator service
     * Pattern OO-3: Utility Import Alignment - Standalone export for TS2614 compatibility
     */
    getCurrentElementalState() {
        return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
    },
    /**
     * Pattern OO-3: Utility Import Alignment - Format consistency helper
     * Ensures elemental property keys are in lowercase format
     */
    ensureLowercaseFormat(properties) {
        if (!properties || typeof properties !== 'object') {
            return properties;
        }
        const lowercaseProps = {};
        for (const [key, value] of Object.entries(properties)) {
            // Convert capitalized element names to lowercase
            const lowerKey = key.toLowerCase();
            lowercaseProps[lowerKey] = value;
        }
        return lowercaseProps;
    },
};
exports.default = exports.elementalUtils;
/**
 * Transform a list of elemental items based on planetary positions
 *
 * @param items Items to transform
 * @param planetaryPositions Current planetary positions
 * @param isDaytime Whether it is currently day
 * @param currentZodiac Current zodiac sign
 * @param lunarPhase Current lunar phase
 * @param elementalBoosts Optional elemental boosts to apply
 * @param planetaryBoosts Optional planetary boosts to apply
 * @returns Transformed alchemical items
 */
const _ELEMENT_WEIGHTS = {
    Fire: 1.8,
    Water: 1.2,
    Earth: 0.9,
    Air: 1.5,
};
// Add this function if uniqueness score is needed
function _calculateUniqueness(elements, planetaryInfluence) {
    // Calculate variance of elemental properties
    const values = Object.values(elements);
    const mean = values.reduce((sum, val) => sum + val, 0) / values.length;
    const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) /
        values.length;
    // Combine with planetary influence
    return Math.min(1, variance * (1 + planetaryInfluence));
}
// Or modify the transformation to remove uniqueness score if not needed
function transformItemsWithPlanetaryPositions(items, planetaryPositions, isDaytime = true, currentZodiac, lunarPhase, tarotElementBoosts, tarotPlanetaryBoosts) {
    return items.map((item) => {
        const { boost: planetaryInfluence } = (0, planetaryFoodAssociations_1.calculatePlanetaryBoost)(item, planetaryPositions, currentZodiac, lunarPhase);
        // Scale elemental properties
        const scaledElements = Object.fromEntries(Object.entries(item.elementalProperties).map(([element, value]) => [
            element,
            value * (1 + (planetaryInfluence || 0)),
        ]));
        // Calculate alchemical properties from elemental properties
        // This follows the same relationships as in the alchemical system:
        // - Spirit is related to Fire (transformation) and Air (connection)
        // - Essence is related to Water (fluidity) and Fire (vitality)
        // - Matter is related to Earth (stability) and Water (cohesion)
        // - Substance is related to Air (structure) and Earth (form)
        const spirit = scaledElements.Fire * 0.6 + scaledElements.Air * 0.4;
        const essence = scaledElements.Water * 0.6 + scaledElements.Fire * 0.4;
        const matter = scaledElements.Earth * 0.7 + scaledElements.Water * 0.3;
        const substance = scaledElements.Air * 0.6 + scaledElements.Earth * 0.4;
        // Apply tarot boosts if available
        const boostedSpirit = spirit * (tarotPlanetaryBoosts?.Spirit || 1.0);
        const boostedEssence = essence * (tarotPlanetaryBoosts?.Essence || 1.0);
        const boostedMatter = matter * (tarotPlanetaryBoosts?.Matter || 1.0);
        const boostedSubstance = substance * (tarotPlanetaryBoosts?.Substance || 1.0);
        // Calculate energy metrics using the formulas from alchemicalCalculations.ts
        const fire = scaledElements.Fire;
        const water = scaledElements.Water;
        const air = scaledElements.Air;
        const earth = scaledElements.Earth;
        // Ensure we have non-zero values for denominator
        const safeValueForHeat = (val) => Math.max(val, 0.01);
        // Heat formula: (spirit^2 + fire^2) / ((substance || 1) + essence + matter + water + air + earth)^2
        const heat = (Math.pow(safeValueForHeat(boostedSpirit), 2) + Math.pow(safeValueForHeat(fire), 2)) /
            Math.pow(safeValueForHeat(boostedSubstance + boostedEssence + boostedMatter + water + air + earth), 2);
        // Entropy formula: (spirit^2 + substance^2 + fire^2 + air^2) / ((essence || 1) + matter + earth + water)^2
        const entropy = (Math.pow(safeValueForHeat(boostedSpirit), 2) + Math.pow(safeValueForHeat(boostedSubstance), 2) +
            Math.pow(safeValueForHeat(fire), 2) + Math.pow(safeValueForHeat(air), 2)) /
            Math.pow(safeValueForHeat(boostedEssence + boostedMatter + earth + water), 2);
        // Reactivity formula: (spirit^2 + substance^2 + essence^2 + fire^2 + air^2 + water^2) / ((matter || 1) + earth)^2
        const reactivity = (Math.pow(safeValueForHeat(boostedSpirit), 2) + Math.pow(safeValueForHeat(boostedSubstance), 2) +
            Math.pow(safeValueForHeat(boostedEssence), 2) + Math.pow(safeValueForHeat(fire), 2) +
            Math.pow(safeValueForHeat(air), 2) + Math.pow(safeValueForHeat(water), 2)) /
            Math.pow(safeValueForHeat(boostedMatter + earth), 2);
        // Greg's Energy formula with consistent scaling
        const rawGregsEnergy = heat - reactivity * entropy;
        const scaledGregsEnergy = (rawGregsEnergy + 1) / 2; // Convert from range (-1,1) to (0,1)
        const gregsEnergy = Math.max(0.1, Math.min(1.0, scaledGregsEnergy));
        // Normalize all energy values to ensure they're in the 0-1 range
        const normalizedHeat = Math.max(0.1, Math.min(1.0, heat));
        const normalizedEntropy = Math.max(0.1, Math.min(1.0, entropy));
        const normalizedReactivity = Math.max(0.1, Math.min(1.0, reactivity));
        // Calculate dominant element based on scaled elements
        const dominantElement = Object.entries(scaledElements).sort(([_keyA, valueA], [_keyB, valueB]) => valueB - valueA)[0][0];
        // Calculate dominant alchemical property
        const alchemicalProperties = {
            Spirit: boostedSpirit,
            Essence: boostedEssence,
            Matter: boostedMatter,
            Substance: boostedSubstance,
        };
        const dominantAlchemicalProperty = Object.entries(alchemicalProperties).sort(([_keyA, valueA], [_keyB, valueB]) => valueB - valueA)[0][0];
        // Extract dominant planets based on planetary positions if available
        let dominantPlanets = [];
        if (planetaryPositions) {
            // Get top 3 planets with highest values or dignity
            const planetEntries = Object.entries(planetaryPositions).filter(([planet, _]) => planet !== 'isDaytime' && planet !== 'currentZodiac');
            // Handle different position data formats
            dominantPlanets = planetEntries
                .sort(([_, valA], [__, valB]) => {
                // Sort by strength /dignity if available
                if (typeof valA === 'object' && typeof valB === 'object') {
                    const dataA = valA;
                    const dataB = valB;
                    const strengthA = Number(dataA.strength) || 0;
                    const strengthB = Number(dataB.strength) || 0;
                    return strengthB - strengthA;
                }
                // Default sort for simple numeric values
                return Number(valB) - Number(valA);
            })
                .slice(0, 3)
                .map(([planet, _]) => planet);
        }
        // Ensure we have planetary dignities data
        const planetaryDignities = {};
        // Handle NaN values or infinity for all properties
        const _ensureSafeNumber = (val) => {
            if (isNaN(val) || !isFinite(val))
                return 0.2;
            return val;
        };
        // Apply safe arithmetic operations with proper type checking
        const safeValueForArithmetic = (val) => Math.max(val, 0.01);
        const _safeAdd = (a, b) => safeValueForArithmetic(a) + safeValueForArithmetic(b);
        const _safeMultiply = (a, b) => safeValueForArithmetic(a) * safeValueForArithmetic(b);
        return {
            id: item.id,
            name: item.name,
            elementalProperties: item.elementalProperties,
            transformedElementalProperties: scaledElements,
            alchemicalProperties: {
                Spirit: boostedSpirit,
                Essence: boostedEssence,
                Matter: boostedMatter,
                Substance: boostedSubstance,
            },
            heat: normalizedHeat,
            entropy: normalizedEntropy,
            reactivity: normalizedReactivity,
            gregsEnergy: gregsEnergy,
            dominantElement,
            dominantAlchemicalProperty,
            planetaryBoost: planetaryInfluence,
            dominantPlanets,
            planetaryDignities,
        };
    });
}
exports.transformItemsWithPlanetaryPositions = transformItemsWithPlanetaryPositions;
// New differentiation functions
const _applyNonLinearScaling = (props) => ({
    Fire: Math.tanh(props.Fire * 2),
    Water: 1 - Math.exp(-props.Water * 3),
    Earth: props.Earth ** 1.5,
    Air: Math.sin((props.Air * Math.PI) / 2),
});
const _calculateUniquenessScore = (item) => {
    const variance = Object.values(item.elementalProperties).reduce((acc, val) => acc + Math.abs(val - 0.5), 0);
    return Math.min(1, variance * 2);
};
// Add or update the normalizeElementalValues function
function normalizeElementalValues(values) {
    const total = Object.values(values).reduce((sum, val) => sum + val, 0);
    // If total is zero or close to zero, return default distribution
    if (total < 0.01) {
        return {
            Fire: 0.25,
            Water: 0.25,
            Earth: 0.25,
            Air: 0.25,
        };
    }
    // Normalize values to sum to 1.0
    return {
        Fire: values.Fire / total,
        Water: values.Water / total,
        Earth: values.Earth / total,
        Air: values.Air / total,
    };
}
exports.normalizeElementalValues = normalizeElementalValues;
// Get the primary element regardless of format
function getPrimaryElement(elementalAffinity) {
    const affinityData = elementalAffinity;
    return (affinityData.base || affinityData.element || 'Fire');
}
exports.getPrimaryElement = getPrimaryElement;
// Get element strength if available
function getElementStrength(elementalAffinity) {
    const affinityData = elementalAffinity;
    const strength = affinityData.strength;
    return typeof strength === 'number' ? strength : 1;
}
exports.getElementStrength = getElementStrength;
/**
 * Ensures all required elemental properties are present
 * @param properties The elemental properties to validate and complete
 * @returns Complete elemental properties
 */
const ensureCompleteElementalProperties = (properties) => {
    return {
        Fire: properties.Fire ?? 0.25,
        Water: properties.Water ?? 0.25,
        Earth: properties.Earth ?? 0.25,
        Air: properties.Air ?? 0.25,
    };
};
exports.ensureCompleteElementalProperties = ensureCompleteElementalProperties;
/**
 * WARNING: getBalancingElement is legacy and does not comply with current elemental logic principles (no opposing/balancing elements). Review usage and refactor/remove if not needed.
 */
function getBalancingElement(element) {
    // Elements work best with themselves - reinforcing the current energy
    return element;
}
exports.getBalancingElement = getBalancingElement;
/**
 * WARNING: getElementalRelationship is legacy and may not comply with current elemental logic principles.
 * All element combinations are harmonious; avoid using "opposing" or "controlling" logic.
 */
function getElementalRelationship(element1, element2) {
    if (element1 === element2) {
        return 'same';
    }
    // The generating cycle for 4-element system: Fire → Earth → Water → Air → Fire
    const generatingCycle = {
        Fire: 'Earth',
        Earth: 'Water',
        Water: 'Air',
        Air: 'Fire',
    };
    // The controlling cycle for 4-element system: Fire → Air → Earth → Water → Fire
    const controllingCycle = {
        Fire: 'Air',
        Air: 'Earth',
        Earth: 'Water',
        Water: 'Fire',
    };
    if (generatingCycle[element1] === element2) {
        return 'generating'; // element1 generates element2
    }
    else if (generatingCycle[element2] === element1) {
        return 'weakened-by'; // element2 generates element1
    }
    else if (controllingCycle[element1] === element2) {
        return 'controlling'; // element1 controls element2
    }
    else if (controllingCycle[element2] === element1) {
        return 'controlled-by'; // element2 controls element1
    }
    else {
        return 'neutral';
    }
}
exports.getElementalRelationship = getElementalRelationship;
/**
 * Gets the element that strengthens the provided element
 */
function getStrengtheningElement(element) {
    // The element that generates the provided element will strengthen it
    const strengthMap = {
        Fire: 'Air',
        Earth: 'Fire',
        Water: 'Earth',
        Air: 'Water', // Water strengthens Air
    };
    return strengthMap[element];
}
exports.getStrengtheningElement = getStrengtheningElement;
/**
 * Enhance vegetable transformations by adding thermodynamic effects to different cooking methods
 * @param vegetables The collection of vegetables to enhance
 * @returns Enhanced vegetables with complete transformation properties
 */
function enhanceVegetableTransformations(vegetables) {
    return Object.entries(vegetables).reduce((acc, [key, vegetable]) => {
        // Skip if not an object
        if (typeof vegetable !== 'object' || vegetable === null) {
            acc[key] = vegetable;
            return acc;
        }
        const enhanced = { ...vegetable };
        // Create transformation if it doesn't exist
        if (!enhanced.elementalTransformation) {
            // Get the dominant element
            const elementalProps = enhanced.elementalProperties || {
                Earth: 0.3,
                Water: 0.3,
                Air: 0.2,
                Fire: 0.2,
            };
            let dominantElement = 'Earth';
            let highestValue = 0;
            for (const [element, value] of Object.entries(elementalProps)) {
                if (typeof value === 'number' && value > highestValue) {
                    dominantElement = element;
                    highestValue = value;
                }
            }
            // Set default transformations based on dominant element
            enhanced.elementalTransformation = {
                whenCooked: { [dominantElement]: 0.1, Fire: 0.05 },
                whenDried: { Earth: 0.1, Air: 0.05 },
                whenFermented: { Water: 0.1, Air: 0.05 },
            };
        }
        // Add thermodynamic changes if they don't exist
        const transformation = enhanced.elementalTransformation;
        if (transformation &&
            !transformation.thermodynamicChanges) {
            transformation.thermodynamicChanges = {
                cooked: {
                    heat: 0.1,
                    entropy: 0.05,
                    reactivity: 0.05,
                },
                dried: {
                    heat: -0.05,
                    entropy: -0.1,
                    reactivity: -0.05,
                },
                fermented: {
                    entropy: 0.2,
                    reactivity: 0.15,
                    stabilityIndex: -0.1,
                },
                roasted: {
                    heat: 0.2,
                    entropy: 0.1,
                    energy: 0.15,
                },
                steamed: {
                    heat: 0.05,
                    moisture: 0.2,
                    reactivity: 0.05,
                },
            };
        }
        // Add elementalSignature if it doesn't exist
        if (!enhanced.elementalSignature && enhanced.elementalProperties) {
            enhanced.elementalSignature = Object.entries(enhanced.elementalProperties)
                .sort((a, b) => {
                // Apply Pattern KK-1: Explicit Type Assertion for arithmetic operations
                const valueA = Number(a[1]) || 0;
                const valueB = Number(b[1]) || 0;
                return valueB - valueA;
            })
                .map(([element, value]) => [element, Number(value)]);
        }
        // Add sensory profiles if they don't exist
        if (!enhanced.sensoryProfile) {
            // Default sensory profile based on vegetable subCategory
            const subCategory = enhanced.subCategory || 'vegetable';
            const profiles = {
                'leafy green': {
                    taste: {
                        bitter: 0.6,
                        sweet: 0.2,
                        umami: 0.1,
                        salty: 0.05,
                        sour: 0.05,
                        spicy: 0,
                    },
                    aroma: {
                        herbal: 0.5,
                        earthy: 0.3,
                        floral: 0.1,
                        fruity: 0.05,
                        woody: 0.05,
                        spicy: 0,
                    },
                    texture: {
                        crisp: 0.7,
                        tender: 0.2,
                        silky: 0.1,
                        chewy: 0,
                        creamy: 0,
                        crunchy: 0,
                    },
                },
                root: {
                    taste: {
                        sweet: 0.5,
                        earthy: 0.3,
                        bitter: 0.1,
                        umami: 0.1,
                        salty: 0,
                        spicy: 0,
                    },
                    aroma: {
                        earthy: 0.6,
                        woody: 0.2,
                        herbal: 0.1,
                        fruity: 0.1,
                        floral: 0,
                        spicy: 0,
                    },
                    texture: {
                        crunchy: 0.6,
                        chewy: 0.2,
                        tender: 0.2,
                        crisp: 0,
                        silky: 0,
                        creamy: 0,
                    },
                },
                allium: {
                    taste: {
                        pungent: 0.6,
                        sweet: 0.2,
                        umami: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        spicy: 0.7,
                        earthy: 0.2,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                        woody: 0,
                    },
                    texture: {
                        crunchy: 0.5,
                        chewy: 0.3,
                        tender: 0.2,
                        crisp: 0,
                        silky: 0,
                        creamy: 0,
                    },
                },
                cruciferous: {
                    taste: {
                        bitter: 0.5,
                        sweet: 0.2,
                        spicy: 0.2,
                        umami: 0.1,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.4,
                        sulfurous: 0.3,
                        woody: 0.2,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                    },
                    texture: {
                        crunchy: 0.7,
                        crisp: 0.2,
                        tender: 0.1,
                        chewy: 0,
                        silky: 0,
                        creamy: 0,
                    },
                },
                nightshade: {
                    taste: {
                        umami: 0.5,
                        sweet: 0.3,
                        sour: 0.1,
                        bitter: 0.1,
                        salty: 0,
                        spicy: 0,
                    },
                    aroma: {
                        fruity: 0.5,
                        earthy: 0.3,
                        herbal: 0.2,
                        floral: 0,
                        woody: 0,
                        spicy: 0,
                    },
                    texture: {
                        tender: 0.5,
                        juicy: 0.3,
                        chewy: 0.2,
                        crisp: 0,
                        crunchy: 0,
                        silky: 0,
                    },
                },
                squash: {
                    taste: {
                        sweet: 0.6,
                        earthy: 0.2,
                        nutty: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.4,
                        sweet: 0.4,
                        woody: 0.1,
                        herbal: 0.1,
                        floral: 0,
                        spicy: 0,
                    },
                    texture: {
                        tender: 0.4,
                        creamy: 0.3,
                        chewy: 0.2,
                        crisp: 0.1,
                        crunchy: 0,
                        silky: 0,
                    },
                },
                legume: {
                    taste: {
                        earthy: 0.5,
                        sweet: 0.3,
                        umami: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.6,
                        nutty: 0.3,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                        spicy: 0,
                    },
                    texture: {
                        tender: 0.4,
                        creamy: 0.3,
                        chewy: 0.3,
                        crisp: 0,
                        crunchy: 0,
                        silky: 0,
                    },
                },
                starchy: {
                    taste: {
                        sweet: 0.5,
                        earthy: 0.3,
                        umami: 0.2,
                        bitter: 0,
                        salty: 0,
                        sour: 0,
                    },
                    aroma: {
                        earthy: 0.7,
                        nutty: 0.2,
                        herbal: 0.1,
                        floral: 0,
                        fruity: 0,
                        spicy: 0,
                    },
                    texture: {
                        starchy: 0.6,
                        tender: 0.2,
                        creamy: 0.2,
                        crisp: 0,
                        crunchy: 0,
                        silky: 0,
                    },
                },
            };
            // Select appropriate profile or use default
            const profile = profiles[String(subCategory)] || {
                taste: {
                    sweet: 0.25,
                    bitter: 0.25,
                    umami: 0.25,
                    salty: 0.15,
                    sour: 0.1,
                    spicy: 0,
                },
                aroma: {
                    earthy: 0.3,
                    herbal: 0.3,
                    woody: 0.2,
                    fruity: 0.1,
                    floral: 0.1,
                    spicy: 0,
                },
                texture: {
                    tender: 0.3,
                    crunchy: 0.3,
                    crisp: 0.2,
                    chewy: 0.1,
                    creamy: 0.1,
                    silky: 0,
                },
            };
            enhanced.sensoryProfile = profile;
        }
        acc[key] = enhanced;
        return acc;
    }, {});
}
exports.enhanceVegetableTransformations = enhanceVegetableTransformations;
/**
 * Enhances oil properties with additional culinary, sensory, and transformation details
 * @param oils Record of oil ingredients
 * @returns Enhanced oil ingredients with complete properties
 */
function enhanceOilProperties(oils) {
    return Object.entries(oils).reduce((acc, [key, oil]) => {
        // Start with the original oil
        const enhancedOil = { ...oil };
        // Ensure basic properties exist
        enhancedOil.category = String(enhancedOil.category || 'oil');
        enhancedOil.elementalProperties = String(JSON.stringify(enhancedOil.elementalProperties || {
            Fire: 0.3,
            Water: 0.2,
            Earth: 0.3,
            Air: 0.2,
        }));
        enhancedOil.qualities = String(Array.isArray(enhancedOil.qualities)
            ? JSON.stringify(enhancedOil.qualities)
            : JSON.stringify([]));
        // Create default sensory profile if none exists
        if (!enhancedOil.sensoryProfile) {
            const oilType = key.toLowerCase();
            const isFruity = oilType.includes('olive') || oilType.includes('avocado');
            const isNutty = oilType.includes('nut') ||
                oilType.includes('sesame') ||
                oilType.includes('walnut') ||
                oilType.includes('almond') ||
                oilType.includes('peanut');
            const isFloral = oilType.includes('sunflower') || oilType.includes('safflower');
            const isNeutral = oilType.includes('vegetable') ||
                oilType.includes('canola') ||
                oilType.includes('grapeseed');
            const isTropical = oilType.includes('coconut') || oilType.includes('palm');
            enhancedOil.sensoryProfile = String(JSON.stringify({
                taste: {
                    sweet: isFruity || isTropical ? 0.6 : 0.2,
                    bitter: isNutty ? 0.4 : 0.1,
                    umami: isNutty ? 0.5 : 0.2,
                    rich: isNutty || isFruity ? 0.7 : 0.4,
                },
                aroma: {
                    fruity: isFruity ? 0.8 : 0.1,
                    nutty: isNutty ? 0.8 : 0.1,
                    floral: isFloral ? 0.7 : 0.1,
                    neutral: isNeutral ? 0.9 : 0.2,
                    tropical: isTropical ? 0.8 : 0.1,
                },
                texture: {
                    viscosity: isTropical || oilType.includes('olive') ? 0.7 : 0.5,
                    mouthfeel: isFruity || isNutty ? 0.8 : 0.5,
                    richness: isFruity || isNutty || isTropical ? 0.7 : 0.4,
                },
            }));
        }
        // Enhance culinary applications if present
        if (enhancedOil.culinaryApplications) {
            // Ensure all application types are properly structured
            Object.entries(enhancedOil.culinaryApplications).forEach(([appType, application]) => {
                if (application && typeof application === 'object') {
                    const appData = application;
                    enhancedOil.culinaryApplications[appType] = String(JSON.stringify({
                        ...application,
                        elementalEffect: appData.elementalEffect || {
                            Fire: appType === 'frying' ||
                                appType === 'cooking' ||
                                appType === 'highHeat'
                                ? 0.2
                                : 0.1,
                            Water: appType === 'dressing' || appType === 'marinade' ? 0.2 : 0.1,
                            Earth: appType === 'baking' || appType === 'roasting' ? 0.2 : 0.1,
                            Air: appType === 'emulsion' || appType === 'whipping' ? 0.2 : 0.1,
                        },
                        alchemicalEffect: appData.alchemicalEffect || {
                            spirit: appType === 'finishing' || appType === 'infusion' ? 0.2 : 0.1,
                            essence: appType === 'dressing' || appType === 'marinade' ? 0.2 : 0.1,
                            matter: appType === 'baking' || appType === 'cooking' ? 0.2 : 0.1,
                            substance: appType === 'frying' || appType === 'highHeat' ? 0.2 : 0.1,
                        },
                    }));
                }
            });
        }
        else {
            // Create default culinary applications based on smoke point and oil type
            const smokePointData = enhancedOil.smokePoint;
            const smokePoint = Number(smokePointData.fahrenheit) || 0;
            const isHighHeat = smokePoint > 400;
            const isMediumHeat = smokePoint > 325 && smokePoint <= 400;
            const isLowHeat = smokePoint <= 325;
            const isFinishing = key.toLowerCase().includes('olive') ||
                key.toLowerCase().includes('walnut') ||
                key.toLowerCase().includes('sesame') ||
                key.toLowerCase().includes('pumpkin');
            enhancedOil.culinaryApplications = String(JSON.stringify({
                ...(isHighHeat
                    ? {
                        frying: {
                            notes: ['Excellent for high-heat cooking'],
                            techniques: ['Deep frying', 'Stir-frying', 'Sautéing'],
                            elementalEffect: { Fire: 0.3, Earth: 0.1 },
                            alchemicalEffect: { substance: 0.3, matter: 0.2 },
                        },
                    }
                    : {}),
                ...(isMediumHeat
                    ? {
                        cooking: {
                            notes: ['Good for medium-heat cooking'],
                            techniques: ['Sautéing', 'Pan frying', 'Roasting'],
                            elementalEffect: { Fire: 0.2, Earth: 0.2 },
                            alchemicalEffect: { matter: 0.3, essence: 0.1 },
                        },
                    }
                    : {}),
                ...(isLowHeat || isFinishing
                    ? {
                        finishing: {
                            notes: ['Best used unheated or low heat'],
                            techniques: ['Drizzling', 'Dressings', 'Dips'],
                            elementalEffect: { Water: 0.3, Air: 0.2 },
                            alchemicalEffect: { spirit: 0.3, essence: 0.2 },
                        },
                    }
                    : {}),
                ...(enhancedOil.subCategory === 'baking' ||
                    key.toLowerCase().includes('coconut')
                    ? {
                        baking: {
                            notes: ['Suitable for baked goods'],
                            techniques: ['Cakes', 'Cookies', 'Breads'],
                            elementalEffect: { Earth: 0.3, Fire: 0.1 },
                            alchemicalEffect: { matter: 0.3, substance: 0.1 },
                        },
                    }
                    : {}),
            }));
        }
        // Add cooking transformations if they don't exist
        if (!enhancedOil.elementalTransformation) {
            enhancedOil.elementalTransformation = String(JSON.stringify({
                whenHeated: {
                    Fire: 0.2,
                    Air: 0.1,
                    Water: -0.1,
                    Earth: -0.05,
                },
                whenCooled: {
                    Water: 0.1,
                    Earth: 0.2,
                    Fire: -0.1,
                    Air: -0.05,
                },
                whenMixed: {
                    Air: 0.15,
                    Water: 0.1,
                    Fire: -0.05,
                    Earth: -0.05,
                },
                whenInfused: {
                    Air: 0.2,
                    Fire: 0.1,
                    Earth: -0.05,
                    Water: -0.05,
                },
            }));
        }
        // Add thermodynamic properties if they don't exist
        if (!enhancedOil.thermodynamicProperties) {
            // Base on smoke point if available
            const smokePointData = enhancedOil.smokePoint;
            const smokePoint = Number(smokePointData.fahrenheit) || 350;
            const normalizedSmokePoint = (smokePoint - 300) / 250; // Normalize between 300-550°F
            const heatValue = 0.5 + normalizedSmokePoint * 0.4; // Scale 0.5-0.9
            enhancedOil.thermodynamicProperties = String(JSON.stringify({
                heat: Math.min(Math.max(heatValue, 0.3), 0.9),
                entropy: 0.4,
                reactivity: 0.6,
                energy: 0.7,
            }));
        }
        // Add recommended cooking methods if they don't exist
        if (!enhancedOil.recommendedCookingMethods) {
            const smokePointData = enhancedOil.smokePoint;
            const smokePoint = Number(smokePointData.fahrenheit) || 0;
            const methods = [];
            if (smokePoint > 400) {
                methods.push({ name: 'deepFrying', potency: 0.9 });
                methods.push({ name: 'stirFrying', potency: 0.9 });
                methods.push({ name: 'sautéing', potency: 0.8 });
            }
            if (smokePoint > 350) {
                methods.push({ name: 'roasting', potency: 0.7 });
                methods.push({ name: 'baking', potency: 0.7 });
            }
            if (enhancedOil.subCategory === 'finishing' || smokePoint < 350) {
                methods.push({ name: 'dressing', potency: 0.9 });
                methods.push({ name: 'marinating', potency: 0.8 });
                methods.push({ name: 'drizzling', potency: 1.0 });
            }
            enhancedOil.recommendedCookingMethods = String(JSON.stringify(methods));
        }
        acc[key] = enhancedOil;
        return acc;
    }, {});
}
exports.enhanceOilProperties = enhanceOilProperties;
/**
 * Pattern OO-3: Utility Import Alignment - Standalone exports for TS2614 compatibility
 */
function getCurrentElementalState() {
    return ElementalCalculator_1.ElementalCalculator.getCurrentElementalState();
}
exports.getCurrentElementalState = getCurrentElementalState;
function getDefaultElementalProperties() {
    return elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES;
}
exports.getDefaultElementalProperties = getDefaultElementalProperties;
function ensureLowercaseFormat(properties) {
    if (!properties || typeof properties !== 'object') {
        return properties;
    }
    const lowercaseProps = {};
    for (const [key, value] of Object.entries(properties)) {
        // Convert capitalized element names to lowercase
        const lowerKey = key.toLowerCase();
        lowercaseProps[lowerKey] = value;
    }
    return lowercaseProps;
}
exports.ensureLowercaseFormat = ensureLowercaseFormat;
/**
 * Ensures the returned object always matches the IngredientMapping interface at runtime.
 */
const fixIngredientMapping = (mapping, key) => {
    // Format key into a readable name if no name is provided
    const formattedName = key
        .split('_')
        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
        .join(' ');
    // Ensure all required elements exist in elementalProperties
    const elementalProperties = mapping.elementalProperties
        ? (0, exports.ensureCompleteElementalProperties)(mapping.elementalProperties)
        : elementalConstants_1.DEFAULT_ELEMENTAL_PROPERTIES;
    // Add runtime type guard (minimal, since normalization is already enforced)
    const requiredKeys = ['name', 'category', 'elementalProperties'];
    for (const k of requiredKeys) {
        if (!(k in mapping)) {
            throw new Error(`fixIngredientMapping: Missing required key '${k}' for ingredient '${key}'`);
        }
    }
    // Ensure astrologicalProfile has minimal structure if present but empty
    if (mapping.astrologicalProfile && typeof mapping.astrologicalProfile === 'object' && Object.keys(mapping.astrologicalProfile).length === 0) {
        mapping.astrologicalProfile = {
            rulingPlanets: [],
            favorableZodiac: []
        };
    }
    return {
        ...mapping,
        name: mapping.name || formattedName,
        elementalProperties,
    };
};
exports.fixIngredientMapping = fixIngredientMapping;
/**
 * Normalizes all ingredient mappings and guarantees type safety for downstream usage.
 */
const fixIngredientMappings = (ingredients) => {
    const result = {};
    Object.entries(ingredients).forEach(([key, mapping]) => {
        result[key] = (0, exports.fixIngredientMapping)(mapping, key);
    });
    return result;
};
exports.fixIngredientMappings = fixIngredientMappings;
/**
 * Fixes ingredient mappings by ensuring all required properties are present
 * @param ingredients Raw ingredient mappings
 * @returns Fixed ingredient mappings
 */
function fixRawIngredientMappings(ingredients) {
    return Object.entries(ingredients).reduce((acc, [key, value]) => {
        // Skip null or undefined values
        if (!value)
            return acc;
        const valueData = value;
        // Ensure elemental properties are normalized
        const elementalProperties = (0, exports.normalizeProperties)(valueData.elementalProperties || {});
        // Create a standardized astrological profile if one doesn't exist
        const astroProfile = valueData.astrologicalProfile || {};
        // Determine base elemental affinity if not provided
        if (!astroProfile.elementalAffinity) {
            const strongestElement = Object.entries(elementalProperties)
                .sort(([, a], [, b]) => b - a)[0][0]
                .toLowerCase();
            astroProfile.elementalAffinity = {
                base: strongestElement,
            };
        }
        acc[key] = {
            ...value,
            name: valueData.name || key.replace(/_/g, ' '),
            category: valueData.category || 'ingredient',
            elementalProperties,
            astrologicalProfile: astroProfile,
        };
        return acc;
    }, {});
}
exports.fixRawIngredientMappings = fixRawIngredientMappings;
/**
 * Calculate the affinity between two elements based on the Five Elements theory
 * Returns a value between 0 and 1, where:
 * - 1.0: Same element (perfect affinity)
 * - 0.8: Element is generated by (child of) the other
 * - 0.6: Element generates (parent of) the other
 * - 0.4: Neutral relationship
 * - 0.2: Element is controlled by the other
 * - 0.0: Element controls the other (weakest affinity)
 */
function calculateElementalAffinity(element1, element2) {
    const relationship = getElementalRelationship(element1, element2);
    switch (relationship) {
        case 'same':
            return 1.0;
        case 'generating':
            return 0.8;
        case 'controlled-by':
            return 0.6;
        case 'neutral':
            return 0.4;
        case 'weakened-by':
            return 0.2;
        case 'controlling':
            return 0.0;
        default:
            return 0.4;
    }
}
exports.calculateElementalAffinity = calculateElementalAffinity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy91dGlscy9lbGVtZW50YWxVdGlscy50cyIsIm1hcHBpbmdzIjoiO0FBQUEsOEJBQThCOzs7QUFHOUIsdUVBQThFO0FBRTlFLHFGQUcrQztBQUUvQyx3RUFBcUU7QUFZckUsbURBSTRCO0FBRzVCLDJEQUk2QjtBQXdjcEIsbUdBM2NMLHNDQUFrQixPQTJjSztBQUFFLHNHQTFjekIseUNBQXFCLE9BMGN5QjtBQUFFLHlGQXpjaEQsNEJBQVEsT0F5Y2dEO0FBdGM1RCw2Q0FBNkM7QUFDN0MsTUFBTSx5QkFBeUIsR0FBRztJQUNoQyxJQUFJLEVBQUU7UUFDSixpQkFBaUIsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQztRQUNuRSxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDO1FBQzlCLFNBQVMsRUFBRSxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLENBQUM7UUFDckQsV0FBVyxFQUFFLEtBQUs7S0FDbkI7SUFDRCxLQUFLLEVBQUU7UUFDTCxpQkFBaUIsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQztRQUNsRSxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO1FBQy9CLFNBQVMsRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDO1FBQzlDLFdBQVcsRUFBRSxNQUFNO0tBQ3BCO0lBQ0QsS0FBSyxFQUFFO1FBQ0wsaUJBQWlCLEVBQUUsQ0FBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUM7UUFDcEUsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQztRQUNuQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLFlBQVksQ0FBQztRQUNoRCxXQUFXLEVBQUUsVUFBVTtLQUN4QjtJQUNELEdBQUcsRUFBRTtRQUNILGlC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SSxZQUFZO1lBQzVDLG1CQUFtQjtZQUNuQixtQkFBbUIsRUFBRSxZQUFZO1NBQ2xDLENBQUM7UUFFRixPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNULENBQUM7QUFyQ0QsNERBcUNDO0FBVUQ7Ozs7Ozs7OztHQVNHO0FBQ0gsU0FBZ0IsMEJBQTBCLENBQ3hDLFFBQWlCLEVBQ2pCLFFBQWlCO0lBRWpCLE1BQU0sWUFBWSxHQUFHLHdCQUF3QixDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUVsRSxRQUFRLFlBQVksRUFBRTtRQUNwQixLQUFLLE1BQU07WUFDVCxPQUFPLEdBQUcsQ0FBQztRQUNiLEtBQUssWUFBWTtZQUNmLE9BQU8sR0FBRyxDQUFDO1FBQ2IsS0FBSyxlQUFlO1lBQ2xCLE9BQU8sR0FBRyxDQUFDO1FBQ2IsS0FBSyxTQUFTO1lBQ1osT0FBTyxHQUFHLENBQUM7UUFDYixLQUFLLGFBQWE7WUFDaEIsT0FBTyxHQUFHLENBQUM7UUFDYixLQUFLLGFBQWE7WUFDaEIsT0FBTyxHQUFHLENBQUM7UUFDYjtZQUNFLE9BQU8sR0FBRyxDQUFDO0tBQ2Q7QUFDSCxDQUFDO0FBdEJELGdFQXNCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3V0aWxzL2VsZW1lbnRhbFV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9lbGVtZW50YWxVdGlscy50c1xuXG5pbXBvcnQgeyBBbGNoZW1pY2FsSXRlbSB9IGZyb20gJ0AvY2FsY3VsYXRpb25zL2FsY2hlbWljYWxUcmFuc2Zvcm1hdGlvbic7XG5pbXBvcnQgeyBERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTIH0gZnJvbSAnQC9jb25zdGFudHMvZWxlbWVudGFsQ29uc3RhbnRzJztcbmltcG9ydCB7IEFsY2hlbWljYWxQcm9wZXJ0eSwgRWxlbWVudGFsQ2hhcmFjdGVyIH0gZnJvbSAnQC9jb25zdGFudHMvcGxhbmV0YXJ5RWxlbWVudHMnO1xuaW1wb3J0IHtcbiAgICBMdW5hclBoYXNlLFxuICAgIGNhbGN1bGF0ZVBsYW5ldGFyeUJvb3N0LFxufSBmcm9tICdAL2NvbnN0YW50cy9wbGFuZXRhcnlGb29kQXNzb2NpYXRpb25zJztcbmltcG9ydCB0eXBlIHsgSW5ncmVkaWVudE1hcHBpbmcgfSBmcm9tICdAL2RhdGEvaW5ncmVkaWVudHMvdHlwZXMnO1xuaW1wb3J0IHsgRWxlbWVudGFsQ2FsY3VsYXRvciB9IGZyb20gJ0Avc2VydmljZXMvRWxlbWVudGFsQ2FsY3VsYXRvcic7XG5pbXBvcnQgdHlwZSB7XG4gICAgRWxlbWVudCxcbiAgICBFbGVtZW50YWxBZmZpbml0eSxcbiAgICBFbGVtZW50YWxDaGFyYWN0ZXJpc3RpY3MsXG4gICAgRWxlbWVudGFsUHJvZmlsZSxcbiAgICBFbGVtZW50YWxQcm9wZXJ0aWVzLFxuICAgIFJlY2lwZSxcbn0gZnJvbSAnQC90eXBlcy9hbGNoZW15JztcbmltcG9ydCB7XG4gICAgRWxlbWVudGFsSXRlbSxcbn0gZnJvbSAnQC90eXBlcy9hbGNoZW15JztcbmltcG9ydCB7XG4gICAgaXNFbGVtZW50YWxQcm9wZXJ0aWVzLFxuICAgIGlzRWxlbWVudGFsUHJvcGVydHlLZXksXG4gICAgbG9nVW5leHBlY3RlZFZhbHVlXG59IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGlvbic7XG5cblxuaW1wb3J0IHtcbiAgICBlbGVtZW50YWxGdW5jdGlvbnMsXG4gICAgZWxlbWVudGFsSW50ZXJhY3Rpb25zLFxuICAgIGVsZW1lbnRzLFxufSBmcm9tICcuL2VsZW1lbnRhbE1hcHBpbmdzJztcblxuLy8gTWlzc2luZyBFTEVNRU5UQUxfQ0hBUkFDVEVSSVNUSUNTIGNvbnN0YW50XG5jb25zdCBFTEVNRU5UQUxfQ0hBUkFDVEVSSVNUSUNTID0ge1xuICBGaXJlOiB7XG4gICAgY29va2luZ1RlY2huaXF1ZXM6IFsnZ3JpbGxpbmcnLCAncm9hc3RpbmcnLCAnc2VhcmluZycsICdmbGFtYsOpaW5nJ10sXG4gICAgdGltZU9mRGF5OiBbJ21vcm5pbmcnLCAnbm9vbiddLFxuICAgIHF1YWxpdGllczogWydlbmVyZ2V0aWMnLCAndHJhbnNmb3JtYXRpdmUnLCAnaW50ZW5zZSddLFxuICAgIHRlbXBlcmF0dXJlOiAnaG90J1xuICB9LFxuICBXYXRlcjoge1xuICAgIGNvb2tpbmdUZWNobmlxdWVzOiBbJ2JvaWxpbmcnLCAnc3RlYW1pbmcnLCAncG9hY2hpbmcnLCAnYnJhaXNpbmcnXSxcbiAgICB0aW1lT2ZEYXk6IFsnZXZlbmluZycsICduaWdodCddLFxuICAgIHF1YWxpdGllczogWydmbG93aW5nJywgJ2Nvb2xpbmcnLCAnbnVydHVyaW5nJ10sXG4gICAgdGVtcGVyYXR1cmU6ICdjb29sJ1xuICB9LFxuICBFYXJ0aDoge1xuICAgIGNvb2tpbmdUZWNobmlxdWVzOiBbJ2Jha2luZycsICdzbG93LWNvb2tpbmcnLCAncm9hc3RpbmcnLCAnc21va2luZyddLFxuICAgIHRpbWVPZkRheTogWydhZnRlcm5vb24nLCAnZXZlbmluZyddLFxuICAgIHF1YWxpdGllczogWydncm91bmRpbmcnLCAnc3RhYmxlJywgJ25vdXJpc2hpbmcnXSxcbiAgICB0ZW1wZXJhdHVyZTogJ21vZGVyYXRlJ1xuICB9LFxuICBBaXI6IHtcbiAgICBjb29raW5nVGVjaG5pcXVlczogWyd3aGlwcGluZycsICdmcnlpbmcnLCAnc2F1dMOpaW5nJywgJ2RlaHlkcmF0aW5nJ10sXG4gICAgdGltZU9mRGF5OiBbJ21vcm5pbmcnLCAnbWlkZGF5J10sXG4gICAgcXVhbGl0aWVzOiBbJ2xpZ2h0JywgJ2FpcnknLCAncXVpY2snXSxcbiAgICB0ZW1wZXJhdHVyZTogJ3ZhcmlhYmxlJ1xuICB9XG59O1xuXG4vLyBBbGNoZW1pY2FsUHJvcGVydHkgdHlwZSBpbXBvcnRlZCBmcm9tIEAvY29uc3RhbnRzL3BsYW5ldGFyeUVsZW1lbnRzXG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgZWxlbWVudGFsIHByb3BlcnRpZXMgY29udGFpbiB2YWxpZCB2YWx1ZXNcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIFRoZSBlbGVtZW50YWwgcHJvcGVydGllcyB0byB2YWxpZGF0ZVxuICogQHJldHVybnMgVHJ1ZSBpZiBwcm9wZXJ0aWVzIGFyZSB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXMgPSAoXG4gIHByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXNcbik6IGJvb2xlYW4gPT4ge1xuICAvLyBJZiBwcm9wZXJ0aWVzIGlzIG51bGwgb3IgdW5kZWZpbmVkLCByZXR1cm4gZmFsc2UgaW1tZWRpYXRlbHlcbiAgaWYgKCFwcm9wZXJ0aWVzKSB7XG4gICAgY29uc29sZS53YXJuKCdXYXJuaW5nOiBwcm9wZXJ0aWVzIGlzIG51bGwgb3IgdW5kZWZpbmVkIGluIHZhbGlkYXRlRWxlbWVudGFsUHJvcGVydGllcycpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIGFsbCByZXF1aXJlZCBlbGVtZW50cyBleGlzdFxuICBjb25zdCByZXF1aXJlZEVsZW1lbnRzID0gWydGaXJlJywgJ1dhdGVyJywgJ0VhcnRoJywgJ0FpciddO1xuICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgcmVxdWlyZWRFbGVtZW50cykge1xuICAgIGlmICh0eXBlb2YgcHJvcGVydGllc1tlbGVtZW50XSAhPT0gJ251bWJlcicpIHtcbiAgICAgIGNvbnNvbGUud2FybihgV2FybmluZzogcHJvcGVydGllcy4ke2VsZW1lbnR9IGlzIG5vdCBhIG51bWJlciBpbiB2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXNgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB2YWx1ZXMgYXJlIGJldHdlZW4gMCBhbmQgMVxuICAgIGlmIChwcm9wZXJ0aWVzW2VsZW1lbnRdIDwgMCB8fCBwcm9wZXJ0aWVzW2VsZW1lbnRdID4gMSkge1xuICAgICAgbG9nVW5leHBlY3RlZFZhbHVlKCd2YWxpZGF0ZUVsZW1lbnRhbFByb3BlcnRpZXMnLCB7XG4gICAgICAgIG1lc3NhZ2U6IGBFbGVtZW50IHZhbHVlIG91dCBvZiByYW5nZTogJHtlbGVtZW50fSA9ICR7cHJvcGVydGllc1tlbGVtZW50XX1gLFxuICAgICAgICBlbGVtZW50LFxuICAgICAgICB2YWx1ZTogcHJvcGVydGllc1tlbGVtZW50XSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIE9wdGlvbmFsbHkgY2hlY2sgaWYgcHJvcGVydGllcyBzdW0gdG8gMSAob3IgY2xvc2UgdG8gaXQgZHVlIHRvIGZsb2F0aW5nIHBvaW50KVxuICBjb25zdCBzdW0gPSBPYmplY3QudmFsdWVzKHByb3BlcnRpZXMpLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCwgMCk7XG4gIGNvbnN0IGlzQ2xvc2VUb09uZSA9IE1hdGguYWJzKHN1bSAtIDEpIDwgMC4wMTtcblxuICBpZiAoIWlzQ2xvc2VUb09uZSkge1xuICAgIGxvZ1VuZXhwZWN0ZWRWYWx1ZSgndmFsaWRhdGVFbGVtZW50YWxQcm9wZXJ0aWVzJywge1xuICAgICAgbWVzc2FnZTogYEVsZW1lbnRhbCBwcm9wZXJ0aWVzIGRvIG5vdCBzdW0gdG8gMTogJHtzdW19YCxcbiAgICAgIHN1bSxcbiAgICAgIHByb3BlcnRpZXMsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogTm9ybWFsaXplcyBlbGVtZW50YWwgcHJvcGVydGllcyB0byBlbnN1cmUgdGhleSBzdW0gdG8gMVxuICogQHBhcmFtIHByb3BlcnRpZXMgVGhlIGVsZW1lbnRhbCBwcm9wZXJ0aWVzIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMgTm9ybWFsaXplZCBlbGVtZW50YWwgcHJvcGVydGllc1xuICovXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplUHJvcGVydGllcyA9IChcbiAgcHJvcGVydGllczogUGFydGlhbDxFbGVtZW50YWxQcm9wZXJ0aWVzPlxuKTogRWxlbWVudGFsUHJvcGVydGllcyA9PiB7XG4gIC8vIEhhbmRsZSBudWxsIG9yIHVuZGVmaW5lZFxuICBpZiAoIXByb3BlcnRpZXMpIHtcbiAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmc6IHByb3BlcnRpZXMgaXMgbnVsbCBvciB1bmRlZmluZWQgaW4gbm9ybWFsaXplUHJvcGVydGllcycpO1xuICAgIHJldHVybiB7IC4uLkRFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMgfTtcbiAgfVxuXG4gIC8vIEZpbGwgaW4gYW55IG1pc3NpbmcgcHJvcGVydGllcyB3aXRoIGRlZmF1bHRzXG4gIGNvbnN0IGNvbXBsZXRlUHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllcyA9IHtcbiAgICBGaXJlOiBwcm9wZXJ0aWVzLkZpcmUgPz8gREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUy5GaXJlLFxuICAgIFdhdGVyOiBwcm9wZXJ0aWVzLldhdGVyID8/IERFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMuV2F0ZXIsXG4gICAgRWFydGg6IHByb3BlcnRpZXMuRWFydGggPz8gREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUy5FYXJ0aCxcbiAgICBBaXI6IHByb3BlcnRpZXMuQWlyID8/IERFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMuQWlyLFxuICB9O1xuXG4gIGNvbnN0IHN1bSA9IE9iamVjdC52YWx1ZXMoY29tcGxldGVQcm9wZXJ0aWVzKS5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwsIDApO1xuXG4gIGlmIChzdW0gPT09IDApIHtcbiAgICAvLyBJZiBzdW0gaXMgMCwgcmV0dXJuIGJhbGFuY2VkIGRlZmF1bHRcbiAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmc6IHByb3BlcnRpZXMgc3VtIGlzIDAgaW4gbm9ybWFsaXplUHJvcGVydGllcycpO1xuICAgIHJldHVybiB7IC4uLkRFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMgfTtcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBlYWNoIHZhbHVlXG4gIHJldHVybiBPYmplY3QuZW50cmllcyhjb21wbGV0ZVByb3BlcnRpZXMpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAoaXNFbGVtZW50YWxQcm9wZXJ0eUtleShrZXkpKSB7XG4gICAgICBhY2Nba2V5XSA9IHZhbHVlIC9zdW07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoaXMgc2hvdWxkbid0IGhhcHBlbiB3aXRoIHRoZSB0eXBlLXNhZmV0eSBhYm92ZSwgYnV0IGp1c3QgaW4gY2FzZVxuICAgICAgY29uc29sZS53YXJuKGBXYXJuaW5nOiBpbnZhbGlkIGtleSAke2tleX0gaW4gbm9ybWFsaXplUHJvcGVydGllc2ApO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7IC4uLkRFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMgfSk7XG59O1xuXG4vKipcbiAqIFN0YW5kYXJkaXplcyBlbGVtZW50YWwgcHJvcGVydGllcyBmb3IgcmVjaXBlcywgZW5zdXJpbmcgYWxsIHJlY2lwZXMgaGF2ZVxuICogcHJvcGVybHkgbm9ybWFsaXplZCBlbGVtZW50YWwgdmFsdWVzXG4gKiBAcGFyYW0gcmVjaXBlIFRoZSByZWNpcGUgdG8gc3RhbmRhcmRpemVcbiAqIEByZXR1cm5zIFJlY2lwZSB3aXRoIHN0YW5kYXJkaXplZCBlbGVtZW50YWwgcHJvcGVydGllc1xuICovXG5leHBvcnQgY29uc3Qgc3RhbmRhcmRpemVSZWNpcGVFbGVtZW50cyA9IDxcbiAgVCBleHRlbmRzIHsgZWxlbWVudGFsUHJvcGVydGllcz86IFBhcnRpYWw8RWxlbWVudGFsUHJvcGVydGllcz4gfVxuPihcbiAgcmVjaXBlOiBUIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogVCAmIHsgZWxlbWVudGFsUHJvcGVydGllczogRWxlbWVudGFsUHJvcGVydGllcyB9ID0+IHtcbiAgLy8gSGFuZGxlIG51bGwgL3VuZGVmaW5lZCByZWNpcGVcbiAgaWYgKCFyZWNpcGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmc6IHJlY2lwZSBpcyBudWxsIG9yIHVuZGVmaW5lZCBpbiBzdGFuZGFyZGl6ZVJlY2lwZUVsZW1lbnRzJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IHsgLi4uREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUyB9XG4gICAgfSBhcyBUICYgeyBlbGVtZW50YWxQcm9wZXJ0aWVzOiBFbGVtZW50YWxQcm9wZXJ0aWVzIH07XG4gIH1cblxuICAvLyBJZiByZWNpcGUgZG9lc24ndCBoYXZlIGVsZW1lbnRhbCBwcm9wZXJ0aWVzLCB1c2UgY3VycmVudCBlbGVtZW50YWwgc3RhdGVcbiAgaWYgKCFyZWNpcGUuZWxlbWVudGFsUHJvcGVydGllcykge1xuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IEVsZW1lbnRhbENhbGN1bGF0b3IuZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlY2lwZSxcbiAgICAgIGVsZW1lbnRhbFByb3BlcnRpZXM6IGN1cnJlbnRTdGF0ZSxcbiAgICB9O1xuICB9XG5cbiAgLy8gTm9ybWFsaXplIHByb3BlcnRpZXMgdG8gZW5zdXJlIHRoZXkgc3VtIHRvIDFcbiAgcmV0dXJuIHtcbiAgICAuLi5yZWNpcGUsXG4gICAgZWxlbWVudGFsUHJvcGVydGllczogbm9ybWFsaXplUHJvcGVydGllcyhyZWNpcGUuZWxlbWVudGFsUHJvcGVydGllcyksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVFbGVtZW50YWxSZXF1aXJlbWVudHMgPSAoXG4gIHByb3BlcnRpZXM6IHVua25vd25cbik6IHByb3BlcnRpZXMgaXMgRWxlbWVudGFsUHJvcGVydGllcyA9PiB7XG4gIHJldHVybiBpc0VsZW1lbnRhbFByb3BlcnRpZXMocHJvcGVydGllcyk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGVsZW1lbnRzIHRoYXQgYXJlIG1pc3Npbmcgb3Igc2lnbmlmaWNhbnRseSBsb3dlciB0aGFuIGlkZWFsIGJhbGFuY2UgaW4gdGhlIHByb3ZpZGVkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIFRoZSBlbGVtZW50YWwgcHJvcGVydGllcyB0byBjaGVja1xuICogQHJldHVybnMgQXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgbWlzc2luZyBvciBsb3dcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1pc3NpbmdFbGVtZW50cyhcbiAgcHJvcGVydGllczogUGFydGlhbDxFbGVtZW50YWxQcm9wZXJ0aWVzPiB8IG51bGwgfCB1bmRlZmluZWRcbik6IEVsZW1lbnRbXSB7XG4gIGlmICghcHJvcGVydGllcykge1xuICAgIHJldHVybiBbJ0ZpcmUnLCAnV2F0ZXInLCAnRWFydGgnLCAnQWlyJ107XG4gIH1cblxuICBjb25zdCBtaXNzaW5nOiBFbGVtZW50W10gPSBbXTtcbiAgY29uc3QgX2lkZWFsQmFsYW5jZSA9IDAuMjU7IC8vIEVhY2ggZWxlbWVudCBzaG91bGQgaWRlYWxseSBiZSAyNSVcbiAgY29uc3QgdGhyZXNob2xkID0gMC4xNTsgLy8gQ29uc2lkZXIgbWlzc2luZyBpZiBiZWxvdyAxNSVcblxuICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgWydGaXJlJywgJ1dhdGVyJywgJ0VhcnRoJywgJ0FpciddIGFzIEVsZW1lbnRbXSkge1xuICAgIGNvbnN0IHZhbHVlID0gcHJvcGVydGllc1tlbGVtZW50XSB8fCAwO1xuICAgIGlmICh2YWx1ZSA8IHRocmVzaG9sZCkge1xuICAgICAgbWlzc2luZy5wdXNoKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtaXNzaW5nO1xufVxuXG5leHBvcnQgY29uc3QgZWxlbWVudGFsVXRpbHMgPSB7XG4gIHZhbGlkYXRlUHJvcGVydGllczogdmFsaWRhdGVFbGVtZW50YWxSZXF1aXJlbWVudHMsXG4gIG5vcm1hbGl6ZVByb3BlcnRpZXM6IG5vcm1hbGl6ZVByb3BlcnRpZXMsXG4gIHN0YW5kYXJkaXplUmVjaXBlRWxlbWVudHM6IHN0YW5kYXJkaXplUmVjaXBlRWxlbWVudHMsXG4gIGdldE1pc3NpbmdFbGVtZW50cyxcblxuICBjYWxjdWxhdGVlbGVtZW50YWxTdGF0ZShyZWNpcGU6IFJlY2lwZSB8IG51bGwgfCB1bmRlZmluZWQpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICBpZiAoIXJlY2lwZT8uaW5ncmVkaWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gRWxlbWVudGFsQ2FsY3VsYXRvci5nZXRDdXJyZW50RWxlbWVudGFsU3RhdGUoKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBzYWZlIGRlZmF1bHQgYmFsYW5jZSB0byBzdGFydFxuICAgIGNvbnN0IGJhbGFuY2U6IEVsZW1lbnRhbFByb3BlcnRpZXMgPSB7IC4uLkRFRkFVTFRfRUxFTUVOVEFMX1BST1BFUlRJRVMgfTtcblxuICAgIC8vIEdldCB0b3RhbCBhbW91bnQgZm9yIHBlcmNlbnRhZ2UgY2FsY3VsYXRpb25zXG4gICAgY29uc3QgdG90YWxBbW91bnQgPSByZWNpcGUuaW5ncmVkaWVudHMucmVkdWNlKChzdW0sIGluZykgPT4ge1xuICAgICAgY29uc3QgYW1vdW50ID0gaW5nLmFtb3VudCA/PyAxOyAvLyBEZWZhdWx0IHRvIDEgaWYgYW1vdW50IGlzIG1pc3NpbmdcbiAgICAgIHJldHVybiBzdW0gKyBhbW91bnQ7XG4gICAgfSwgMCk7XG5cbiAgICAvLyBIYW5kbGUgdGhlIHNwZWNpYWwgY2FzZSB3aGVyZSB0aGVyZSBhcmUgbm8gaW5ncmVkaWVudHMgd2l0aCBhbW91bnRcbiAgICBpZiAodG90YWxBbW91bnQgPT09IDApIHtcbiAgICAgIHJldHVybiBiYWxhbmNlO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgYmFsYW5jZSB3aXRoIDAgdmFsdWVzXG4gICAgT2JqZWN0LmtleXMoYmFsYW5jZSkuZm9yRWFjaChlbCA9PiB7XG4gICAgICBpZiAoaXNFbGVtZW50YWxQcm9wZXJ0eUtleShlbCkpIHtcbiAgICAgICAgYmFsYW5jZVtlbF0gPSAwO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUHJvY2VzcyBlYWNoIGluZ3JlZGllbnRcbiAgICByZWNpcGUuaW5ncmVkaWVudHMuZm9yRWFjaChpbmcgPT4ge1xuICAgICAgY29uc3QgYW1vdW50ID0gaW5nLmFtb3VudCA/PyAxOyAvLyBEZWZhdWx0IHRvIDEgaWYgYW1vdW50IGlzIG1pc3NpbmdcblxuICAgICAgaWYgKGluZy5lbGVtZW50YWxQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIEZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIGluZ3JlZGllbnRcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoaW5nLmVsZW1lbnRhbFByb3BlcnRpZXMpLmZvckVhY2goKFtlbGVtZW50LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICBpZiAoaXNFbGVtZW50YWxQcm9wZXJ0eUtleShlbGVtZW50KSkge1xuICAgICAgICAgICAgYmFsYW5jZVtlbGVtZW50XSArPSAodmFsdWUgKiBhbW91bnQpIC90b3RhbEFtb3VudDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTm9ybWFsaXplIHRvIGVuc3VyZSB0aGV5IHN1bSB0byAxXG4gICAgcmV0dXJuIG5vcm1hbGl6ZVByb3BlcnRpZXMoYmFsYW5jZSk7XG4gIH0sXG5cbiAgY29tYmluZVByb3BlcnRpZXMoXG4gICAgYTogRWxlbWVudGFsUHJvcGVydGllcyxcbiAgICBiOiBFbGVtZW50YWxQcm9wZXJ0aWVzLFxuICAgIGJXZWlnaHQgPSAwLjVcbiAgKTogRWxlbWVudGFsUHJvcGVydGllcyB7XG4gICAgY29uc3QgY29tYmluZWRQcm9wcyA9IHt9IGFzIEVsZW1lbnRhbFByb3BlcnRpZXM7XG4gICAgY29uc3QgYVdlaWdodCA9IDEgLSBiV2VpZ2h0O1xuXG4gICAgT2JqZWN0LmtleXMoYSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0ga2V5IGFzIGtleW9mIEVsZW1lbnRhbFByb3BlcnRpZXM7XG4gICAgICBjb21iaW5lZFByb3BzW2VsZW1lbnRdID1cbiAgICAgICAgYVtlbGVtZW50XSAqIGFXZWlnaHQgKyAoYltlbGVtZW50XSB8fCAwKSAqIGJXZWlnaHQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29tYmluZWRQcm9wcztcbiAgfSxcblxuICBnZXRlbGVtZW50YWxTdGF0ZShyZWNpcGU6IFJlY2lwZSk6IEVsZW1lbnRhbFByb3BlcnRpZXMge1xuICAgIGlmICghcmVjaXBlLmluZ3JlZGllbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIEVsZW1lbnRhbENhbGN1bGF0b3IuZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29tYmluZWRQcm9wZXJ0aWVzID0gcmVjaXBlLmluZ3JlZGllbnRzLnJlZHVjZShcbiAgICAgIChhY2MsIGluZ3JlZGllbnQpID0+IHtcbiAgICAgICAgY29uc3QgcHJvcHMgPVxuICAgICAgICAgIGluZ3JlZGllbnQuZWxlbWVudGFsUHJvcGVydGllcyB8fFxuICAgICAgICAgIEVsZW1lbnRhbENhbGN1bGF0b3IuZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgRmlyZTogYWNjLkZpcmUgKyBwcm9wcy5GaXJlLFxuICAgICAgICAgIFdhdGVyOiBhY2MuV2F0ZXIgKyBwcm9wcy5XYXRlcixcbiAgICAgICAgICBFYXJ0aDogYWNjLkVhcnRoICsgcHJvcHMuRWFydGgsXG4gICAgICAgICAgQWlyOiBhY2MuQWlyICsgcHJvcHMuQWlyLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHsgRmlyZTogMCwgV2F0ZXI6IDAsIEVhcnRoOiAwLCBBaXI6IDAgfVxuICAgICk7XG5cbiAgICByZXR1cm4gbm9ybWFsaXplUHJvcGVydGllcyhjb21iaW5lZFByb3BlcnRpZXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgY29tcGxlbWVudGFyeSBlbGVtZW50IHRoYXQgd29ya3Mgd2VsbCB3aXRoIHRoZSBnaXZlbiBlbGVtZW50XG4gICAqIEFsbCBlbGVtZW50cyB3b3JrIHdlbGwgdG9nZXRoZXIgaW4gdGhlaXIgb3duIHdheVxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBmaW5kIGEgY29tcGxlbWVudCBmb3JcbiAgICogQHJldHVybnMgVGhlIGNvbXBsZW1lbnRhcnkgZWxlbWVudFxuICAgKi9cbiAgZ2V0Q29tcGxlbWVudGFyeUVsZW1lbnQoXG4gICAgZWxlbWVudDoga2V5b2YgRWxlbWVudGFsUHJvcGVydGllc1xuICApOiBrZXlvZiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICAvLyBFYWNoIGVsZW1lbnQgY29tcGxlbWVudHMgYWxsIG90aGVycywgYnV0IHdlIHJldHVybiBvbmUgc3VnZ2VzdGlvblxuICAgIC8vIGJhc2VkIG9uIHRyYWRpdGlvbmFsIGN1bGluYXJ5IHBhaXJpbmdzXG4gICAgY29uc3QgY29tcGxlbWVudGFyeTogUmVjb3JkPFxuICAgICAga2V5b2YgRWxlbWVudGFsUHJvcGVydGllcyxcbiAgICAgIGtleW9mIEVsZW1lbnRhbFByb3BlcnRpZXNcbiAgICA+ID0ge1xuICAgICAgRmlyZTogJ0ZpcmUnLCAvLyBGaXJlIHJlaW5mb3JjZXMgaXRzZWxmXG4gICAgICBXYXRlcjogJ1dhdGVyJywgLy8gV2F0ZXIgcmVpbmZvcmNlcyBpdHNlbGZcbiAgICAgIEVhcnRoOiAnRWFydGgnLCAvLyBFYXJ0aCByZWluZm9yY2VzIGl0c2VsZlxuICAgICAgQWlyOiAnQWlyJywgLy8gQWlyIHJlaW5mb3JjZXMgaXRzZWxmXG4gICAgfTtcbiAgICByZXR1cm4gY29tcGxlbWVudGFyeVtlbGVtZW50XTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgZWxlbWVudGFsIGNoYXJhY3RlcmlzdGljcyBmb3IgYSBzcGVjaWZpYyBlbGVtZW50XG4gICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGdldCBjaGFyYWN0ZXJpc3RpY3MgZm9yXG4gICAqIEByZXR1cm5zIFRoZSBlbGVtZW50YWwgY2hhcmFjdGVyaXN0aWNzXG4gICAqL1xuICBnZXRFbGVtZW50YWxDaGFyYWN0ZXJpc3RpY3MoZWxlbWVudDogRWxlbWVudCk6IEVsZW1lbnRhbENoYXJhY3RlcmlzdGljcyB7XG4gICAgcmV0dXJuIEVMRU1FTlRBTF9DSEFSQUNURVJJU1RJQ1NbZWxlbWVudF0gYXMgdW5rbm93biBhcyBFbGVtZW50YWxDaGFyYWN0ZXJpc3RpY3M7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSBjb21wbGV0ZSBlbGVtZW50YWwgcHJvZmlsZSB0aGF0IGluY2x1ZGVzIHByb3BlcnRpZXMgYW5kIGNoYXJhY3RlcmlzdGljc1xuICAgKiBAcGFyYW0gcHJvcGVydGllcyBUaGUgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgICogQHJldHVybnMgQSBjb21wbGV0ZSBlbGVtZW50YWwgcHJvZmlsZVxuICAgKi9cbiAgZ2V0RWxlbWVudGFsUHJvZmlsZShcbiAgICBwcm9wZXJ0aWVzOiBFbGVtZW50YWxQcm9wZXJ0aWVzXG4gICk6IFBhcnRpYWw8RWxlbWVudGFsUHJvZmlsZT4ge1xuICAgIC8vIEZpbmQgdGhlIGRvbWluYW50IGVsZW1lbnRcbiAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykgYXMgW0VsZW1lbnQsIG51bWJlcl1bXTtcbiAgICBsZXQgZG9taW5hbnRFbGVtZW50OiBFbGVtZW50ID0gJ0ZpcmUnO1xuICAgIGxldCBtYXhWYWx1ZSA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IFtlbGVtZW50LCB2YWx1ZV0gb2YgZW50cmllcykge1xuICAgICAgaWYgKHZhbHVlID4gbWF4VmFsdWUpIHtcbiAgICAgICAgZG9taW5hbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgbWF4VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZG9taW5hbnQ6IGRvbWluYW50RWxlbWVudCBhcyAnRmlyZScgfCAnV2F0ZXInIHwgJ0VhcnRoJyB8ICdBaXInLFxuICAgICAgYmFsYW5jZTogcHJvcGVydGllcyxcbiAgICAgIGNoYXJhY3RlcmlzdGljczogW3RoaXMuZ2V0RWxlbWVudGFsQ2hhcmFjdGVyaXN0aWNzKGRvbWluYW50RWxlbWVudCApXSxcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzdWdnZXN0ZWQgY29va2luZyB0ZWNobmlxdWVzIGJhc2VkIG9uIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSBwcm9wZXJ0aWVzIFRoZSBlbGVtZW50YWwgcHJvcGVydGllc1xuICAgKiBAcmV0dXJucyBBcnJheSBvZiByZWNvbW1lbmRlZCBjb29raW5nIHRlY2huaXF1ZXNcbiAgICovXG4gIGdldFN1Z2dlc3RlZENvb2tpbmdUZWNobmlxdWVzKHByb3BlcnRpZXM6IEVsZW1lbnRhbFByb3BlcnRpZXMpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgdGVjaG5pcXVlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAwLjM7IC8vIE9ubHkgY29uc2lkZXIgZWxlbWVudHMgYWJvdmUgdGhpcyB0aHJlc2hvbGQgZm9yIHJlY29tbWVuZGF0aW9uc1xuXG4gICAgaWYgKHByb3BlcnRpZXMuRmlyZSA+IHRocmVzaG9sZCkge1xuICAgICAgdGVjaG5pcXVlcy5wdXNoKFxuICAgICAgICAuLi5FTEVNRU5UQUxfQ0hBUkFDVEVSSVNUSUNTLkZpcmUuY29va2luZ1RlY2huaXF1ZXMuc2xpY2UoMCwgMilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnRpZXMuV2F0ZXIgPiB0aHJlc2hvbGQpIHtcbiAgICAgIHRlY2huaXF1ZXMucHVzaChcbiAgICAgICAgLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5XYXRlci5jb29raW5nVGVjaG5pcXVlcy5zbGljZSgwLCAyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydGllcy5FYXJ0aCA+IHRocmVzaG9sZCkge1xuICAgICAgdGVjaG5pcXVlcy5wdXNoKFxuICAgICAgICAuLi5FTEVNRU5UQUxfQ0hBUkFDVEVSSVNUSUNTLkVhcnRoLmNvb2tpbmdUZWNobmlxdWVzLnNsaWNlKDAsIDIpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0aWVzLkFpciA+IHRocmVzaG9sZCkge1xuICAgICAgdGVjaG5pcXVlcy5wdXNoKFxuICAgICAgICAuLi5FTEVNRU5UQUxfQ0hBUkFDVEVSSVNUSUNTLkFpci5jb29raW5nVGVjaG5pcXVlcy5zbGljZSgwLCAyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdW5pcXVlIHRlY2huaXF1ZXMgb3IgYSBkZWZhdWx0IGlmIG5vbmUgbWVldCB0aGUgdGhyZXNob2xkXG4gICAgcmV0dXJuIHRlY2huaXF1ZXMubGVuZ3RoID4gMFxuICAgICAgPyBBcnJheS5mcm9tKG5ldyBTZXQodGVjaG5pcXVlcykpXG4gICAgICA6IFsnQmFsYW5jZWQgY29va2luZyddO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb21wbGVtZW50YXJ5IGluZ3JlZGllbnRzIGJhc2VkIG9uIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSBwcm9wZXJ0aWVzIFRoZSBlbGVtZW50YWwgcHJvcGVydGllc1xuICAgKiBAcmV0dXJucyBBcnJheSBvZiByZWNvbW1lbmRlZCBjb21wbGVtZW50YXJ5IGluZ3JlZGllbnRzXG4gICAqL1xuICBnZXRSZWNvbW1lbmRlZFRpbWVPZkRheShwcm9wZXJ0aWVzOiBFbGVtZW50YWxQcm9wZXJ0aWVzKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IF90aW1lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAwLjM7IC8vIE9ubHkgY29uc2lkZXIgZWxlbWVudHMgYWJvdmUgdGhpcyB0aHJlc2hvbGQgZm9yIHJlY29tbWVuZGF0aW9uc1xuICAgIGNvbnN0IHdlaWdodGVkVGltZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgdGltZXMgYmFzZWQgb24gdGhlIGVsZW1lbnRhbCBiYWxhbmNlLCB3ZWlnaHRlZCBieSB0aGVpciB2YWx1ZXNcbiAgICBpZiAocHJvcGVydGllcy5GaXJlID4gdGhyZXNob2xkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguY2VpbChwcm9wZXJ0aWVzLkZpcmUgKiAxMCk7IGkrKykge1xuICAgICAgICB3ZWlnaHRlZFRpbWVzLnB1c2goLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5GaXJlLnRpbWVPZkRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnRpZXMuV2F0ZXIgPiB0aHJlc2hvbGQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKHByb3BlcnRpZXMuV2F0ZXIgKiAxMCk7IGkrKykge1xuICAgICAgICB3ZWlnaHRlZFRpbWVzLnB1c2goLi4uRUxFTUVOVEFMX0NIQVJBQ1RFUklTVElDUy5XYXRlci50aW1lT2ZEYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0aWVzLkVhcnRoID4gdGhyZXNob2xkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguY2VpbChwcm9wZXJ0aWVzLkVhcnRoICogMTApOyBpKyspIHtcbiAgICAgICAgd2VpZ2h0ZWRUaW1lcy5wdXNoKC4uLkVMRU1FTlRBTF9DSEFSQUNURVJJU1RJQ1MuRWFydGgudGltZU9mRGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvcGVydGllcy5BaXIgPiB0aHJlc2hvbGQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKHByb3BlcnRpZXMuQWlyICogMTApOyBpKyspIHtcbiAgICAgICAgd2VpZ2h0ZWRUaW1lcy5wdXNoKC4uLkVMRU1FTlRBTF9DSEFSQUNURVJJU1RJQ1MuQWlyLnRpbWVPZkRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHVuaXF1ZSB0aW1lcyBvciBhIGRlZmF1bHQgaWYgbm9uZSBtZWV0IHRoZSB0aHJlc2hvbGRcbiAgICByZXR1cm4gd2VpZ2h0ZWRUaW1lcy5sZW5ndGggPiAwXG4gICAgICA/IEFycmF5LmZyb20obmV3IFNldCh3ZWlnaHRlZFRpbWVzKSlcbiAgICAgIDogWydBbnkgdGltZSddO1xuICB9LFxuXG4gIC8vIEdldCB0aGUgZGVmYXVsdCBlbGVtZW50YWwgcHJvcGVydGllc1xuICBnZXREZWZhdWx0RWxlbWVudGFsUHJvcGVydGllcygpOiBFbGVtZW50YWxQcm9wZXJ0aWVzIHtcbiAgICByZXR1cm4gREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUztcbiAgfSxcblxuICAvLyBFeHBvcnQgdGhlIGRlZmF1bHQgZWxlbWVudGFsIHByb3BlcnRpZXMgY29uc3RhbnQgZm9yIGRpcmVjdCBhY2Nlc3NcbiAgREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUyxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBlbGVtZW50YWwgc3RhdGUgZnJvbSB0aGUgRWxlbWVudGFsQ2FsY3VsYXRvciBzZXJ2aWNlXG4gICAqIFBhdHRlcm4gT08tMzogVXRpbGl0eSBJbXBvcnQgQWxpZ25tZW50IC0gU3RhbmRhbG9uZSBleHBvcnQgZm9yIFRTMjYxNCBjb21wYXRpYmlsaXR5XG4gICAqL1xuICBnZXRDdXJyZW50RWxlbWVudGFsU3RhdGUoKTogRWxlbWVudGFsUHJvcGVydGllcyB7XG4gICAgcmV0dXJuIEVsZW1lbnRhbENhbGN1bGF0b3IuZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBhdHRlcm4gT08tMzogVXRpbGl0eSBJbXBvcnQgQWxpZ25tZW50IC0gRm9ybWF0IGNvbnNpc3RlbmN5IGhlbHBlclxuICAgKiBFbnN1cmVzIGVsZW1lbnRhbCBwcm9wZXJ0eSBrZXlzIGFyZSBpbiBsb3dlcmNhc2UgZm9ybWF0XG4gICAqL1xuICBlbnN1cmVMb3dlcmNhc2VGb3JtYXQocHJvcGVydGllczogdW5rbm93bik6IGFueSB7XG4gICAgaWYgKCFwcm9wZXJ0aWVzIHx8IHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgfVxuXG4gICAgY29uc3QgbG93ZXJjYXNlUHJvcHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykpIHtcbiAgICAgIC8vIENvbnZlcnQgY2FwaXRhbGl6ZWQgZWxlbWVudCBuYW1lcyB0byBsb3dlcmNhc2VcbiAgICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBsb3dlcmNhc2VQcm9wc1tsb3dlcktleV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG93ZXJjYXNlUHJvcHM7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBlbGVtZW50YWxVdGlscztcblxuZXhwb3J0IHsgZWxlbWVudGFsRnVuY3Rpb25zLCBlbGVtZW50YWxJbnRlcmFjdGlvbnMsIGVsZW1lbnRzIH07XG5cbi8qKlxuICogVHJhbnNmb3JtIGEgbGlzdCBvZiBlbGVtZW50YWwgaXRlbXMgYmFzZWQgb24gcGxhbmV0YXJ5IHBvc2l0aW9uc1xuICpcbiAqIEBwYXJhbSBpdGVtcyBJdGVtcyB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSBwbGFuZXRhcnlQb3NpdGlvbnMgQ3VycmVudCBwbGFuZXRhcnkgcG9zaXRpb25zXG4gKiBAcGFyYW0gaXNEYXl0aW1lIFdoZXRoZXIgaXQgaXMgY3VycmVudGx5IGRheVxuICogQHBhcmFtIGN1cnJlbnRab2RpYWMgQ3VycmVudCB6b2RpYWMgc2lnblxuICogQHBhcmFtIGx1bmFyUGhhc2UgQ3VycmVudCBsdW5hciBwaGFzZVxuICogQHBhcmFtIGVsZW1lbnRhbEJvb3N0cyBPcHRpb25hbCBlbGVtZW50YWwgYm9vc3RzIHRvIGFwcGx5XG4gKiBAcGFyYW0gcGxhbmV0YXJ5Qm9vc3RzIE9wdGlvbmFsIHBsYW5ldGFyeSBib29zdHMgdG8gYXBwbHlcbiAqIEByZXR1cm5zIFRyYW5zZm9ybWVkIGFsY2hlbWljYWwgaXRlbXNcbiAqL1xuY29uc3QgX0VMRU1FTlRfV0VJR0hUUyA9IHtcbiAgRmlyZTogMS44LFxuICBXYXRlcjogMS4yLFxuICBFYXJ0aDogMC45LFxuICBBaXI6IDEuNSxcbn07XG5cbi8vIEFkZCB0aGlzIGZ1bmN0aW9uIGlmIHVuaXF1ZW5lc3Mgc2NvcmUgaXMgbmVlZGVkXG5mdW5jdGlvbiBfY2FsY3VsYXRlVW5pcXVlbmVzcyhcbiAgZWxlbWVudHM6IFJlY29yZDxFbGVtZW50YWxDaGFyYWN0ZXIsIG51bWJlcj4sXG4gIHBsYW5ldGFyeUluZmx1ZW5jZTogbnVtYmVyXG4pOiBudW1iZXIge1xuICAvLyBDYWxjdWxhdGUgdmFyaWFuY2Ugb2YgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAgY29uc3QgdmFsdWVzID0gT2JqZWN0LnZhbHVlcyhlbGVtZW50cyk7XG4gIGNvbnN0IG1lYW4gPSB2YWx1ZXMucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsLCAwKSAvIHZhbHVlcy5sZW5ndGg7XG4gIGNvbnN0IHZhcmlhbmNlID1cbiAgICB2YWx1ZXMucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgTWF0aC5wb3codmFsIC0gbWVhbiwgMiksIDApIC9cbiAgICB2YWx1ZXMubGVuZ3RoO1xuXG4gIC8vIENvbWJpbmUgd2l0aCBwbGFuZXRhcnkgaW5mbHVlbmNlXG4gIHJldHVybiBNYXRoLm1pbigxLCB2YXJpYW5jZSAqICgxICsgcGxhbmV0YXJ5SW5mbHVlbmNlKSk7XG59XG5cbi8vIE9yIG1vZGlmeSB0aGUgdHJhbnNmb3JtYXRpb24gdG8gcmVtb3ZlIHVuaXF1ZW5lc3Mgc2NvcmUgaWYgbm90IG5lZWRlZFxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUl0ZW1zV2l0aFBsYW5ldGFyeVBvc2l0aW9ucyhcbiAgaXRlbXM6IEVsZW1lbnRhbEl0ZW1bXSxcbiAgcGxhbmV0YXJ5UG9zaXRpb25zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgaXNEYXl0aW1lID0gdHJ1ZSxcbiAgY3VycmVudFpvZGlhYz86IHN0cmluZyxcbiAgbHVuYXJQaGFzZT86IEx1bmFyUGhhc2UsXG4gIHRhcm90RWxlbWVudEJvb3N0cz86IFJlY29yZDxFbGVtZW50YWxDaGFyYWN0ZXIsIG51bWJlcj4sXG4gIHRhcm90UGxhbmV0YXJ5Qm9vc3RzPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuKTogQWxjaGVtaWNhbEl0ZW1bXSB7XG4gIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICBjb25zdCB7IGJvb3N0OiBwbGFuZXRhcnlJbmZsdWVuY2UgfSA9IGNhbGN1bGF0ZVBsYW5ldGFyeUJvb3N0KFxuICAgICAgaXRlbSxcbiAgICAgIHBsYW5ldGFyeVBvc2l0aW9ucyxcbiAgICAgIGN1cnJlbnRab2RpYWMsXG4gICAgICBsdW5hclBoYXNlXG4gICAgKTtcblxuICAgIC8vIFNjYWxlIGVsZW1lbnRhbCBwcm9wZXJ0aWVzXG4gICAgY29uc3Qgc2NhbGVkRWxlbWVudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhpdGVtLmVsZW1lbnRhbFByb3BlcnRpZXMpLm1hcCgoW2VsZW1lbnQsIHZhbHVlXSkgPT4gW1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICB2YWx1ZSAqICgxICsgKHBsYW5ldGFyeUluZmx1ZW5jZSB8fCAwKSksXG4gICAgICBdKVxuICAgICkgYXMgUmVjb3JkPEVsZW1lbnRhbENoYXJhY3RlciwgbnVtYmVyPjtcblxuICAgIC8vIENhbGN1bGF0ZSBhbGNoZW1pY2FsIHByb3BlcnRpZXMgZnJvbSBlbGVtZW50YWwgcHJvcGVydGllc1xuICAgIC8vIFRoaXMgZm9sbG93cyB0aGUgc2FtZSByZWxhdGlvbnNoaXBzIGFzIGluIHRoZSBhbGNoZW1pY2FsIHN5c3RlbTpcbiAgICAvLyAtIFNwaXJpdCBpcyByZWxhdGVkIHRvIEZpcmUgKHRyYW5zZm9ybWF0aW9uKSBhbmQgQWlyIChjb25uZWN0aW9uKVxuICAgIC8vIC0gRXNzZW5jZSBpcyByZWxhdGVkIHRvIFdhdGVyIChmbHVpZGl0eSkgYW5kIEZpcmUgKHZpdGFsaXR5KVxuICAgIC8vIC0gTWF0dGVyIGlzIHJlbGF0ZWQgdG8gRWFydGggKHN0YWJpbGl0eSkgYW5kIFdhdGVyIChjb2hlc2lvbilcbiAgICAvLyAtIFN1YnN0YW5jZSBpcyByZWxhdGVkIHRvIEFpciAoc3RydWN0dXJlKSBhbmQgRWFydGggKGZvcm0pXG4gICAgY29uc3Qgc3Bpcml0ID0gc2NhbGVkRWxlbWVudHMuRmlyZSAqIDAuNiArIHNjYWxlZEVsZW1lbnRzLkFpciAqIDAuNDtcbiAgICBjb25zdCBlc3NlbmNlID0gc2NhbGVkRWxlbWVudHMuV2F0ZXIgKiAwLjYgKyBzY2FsZWRFbGVtZW50cy5GaXJlICogMC40O1xuICAgIGNvbnN0IG1hdHRlciA9IHNjYWxlZEVsZW1lbnRzLkVhcnRoICogMC43ICsgc2NhbGVkRWxlbWVudHMuV2F0ZXIgKiAwLjM7XG4gICAgY29uc3Qgc3Vic3RhbmNlID0gc2NhbGVkRWxlbWVudHMuQWlyICogMC42ICsgc2NhbGVkRWxlbWVudHMuRWFydGggKiAwLjQ7XG5cbiAgICAvLyBBcHBseSB0YXJvdCBib29zdHMgaWYgYXZhaWxhYmxlXG4gICAgY29uc3QgYm9vc3RlZFNwaXJpdCA9IHNwaXJpdCAqICh0YXJvdFBsYW5ldGFyeUJvb3N0cz8uU3Bpcml0IHx8IDEuMCk7XG4gICAgY29uc3QgYm9vc3RlZEVzc2VuY2UgPSBlc3NlbmNlICogKHRhcm90UGxhbmV0YXJ5Qm9vc3RzPy5Fc3NlbmNlIHx8IDEuMCk7XG4gICAgY29uc3QgYm9vc3RlZE1hdHRlciA9IG1hdHRlciAqICh0YXJvdFBsYW5ldGFyeUJvb3N0cz8uTWF0dGVyIHx8IDEuMCk7XG4gICAgY29uc3QgYm9vc3RlZFN1YnN0YW5jZSA9XG4gICAgICBzdWJzdGFuY2UgKiAodGFyb3RQbGFuZXRhcnlCb29zdHM/LlN1YnN0YW5jZSB8fCAxLjApO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGVuZXJneSBtZXRyaWNzIHVzaW5nIHRoZSBmb3JtdWxhcyBmcm9tIGFsY2hlbWljYWxDYWxjdWxhdGlvbnMudHNcbiAgICBjb25zdCBmaXJlID0gc2NhbGVkRWxlbWVudHMuRmlyZTtcbiAgICBjb25zdCB3YXRlciA9IHNjYWxlZEVsZW1lbnRzLldhdGVyO1xuICAgIGNvbnN0IGFpciA9IHNjYWxlZEVsZW1lbnRzLkFpcjtcbiAgICBjb25zdCBlYXJ0aCA9IHNjYWxlZEVsZW1lbnRzLkVhcnRoO1xuXG4gICAgLy8gRW5zdXJlIHdlIGhhdmUgbm9uLXplcm8gdmFsdWVzIGZvciBkZW5vbWluYXRvclxuICAgIGNvbnN0IHNhZmVWYWx1ZUZvckhlYXQgPSAodmFsOiBudW1iZXIpID0+IE1hdGgubWF4KHZhbCwgMC4wMSk7XG5cbiAgICAvLyBIZWF0IGZvcm11bGE6IChzcGlyaXReMiArIGZpcmVeMikgLyAoKHN1YnN0YW5jZSB8fCAxKSArIGVzc2VuY2UgKyBtYXR0ZXIgKyB3YXRlciArIGFpciArIGVhcnRoKV4yXG4gICAgY29uc3QgaGVhdCA9XG4gICAgICAoTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChib29zdGVkU3Bpcml0KSwgMikgKyBNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KGZpcmUpLCAyKSkgL1xuICAgICAgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChib29zdGVkU3Vic3RhbmNlICsgYm9vc3RlZEVzc2VuY2UgKyBib29zdGVkTWF0dGVyICsgd2F0ZXIgKyBhaXIgKyBlYXJ0aCksIDIpO1xuXG4gICAgLy8gRW50cm9weSBmb3JtdWxhOiAoc3Bpcml0XjIgKyBzdWJzdGFuY2VeMiArIGZpcmVeMiArIGFpcl4yKSAvICgoZXNzZW5jZSB8fCAxKSArIG1hdHRlciArIGVhcnRoICsgd2F0ZXIpXjJcbiAgICBjb25zdCBlbnRyb3B5ID1cbiAgICAgIChNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KGJvb3N0ZWRTcGlyaXQpLCAyKSArIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZFN1YnN0YW5jZSksIDIpICtcbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoZmlyZSksIDIpICsgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChhaXIpLCAyKSkgL1xuICAgICAgTWF0aC5wb3coc2FmZVZhbHVlRm9ySGVhdChib29zdGVkRXNzZW5jZSArIGJvb3N0ZWRNYXR0ZXIgKyBlYXJ0aCArIHdhdGVyKSwgMik7XG5cbiAgICAvLyBSZWFjdGl2aXR5IGZvcm11bGE6IChzcGlyaXReMiArIHN1YnN0YW5jZV4yICsgZXNzZW5jZV4yICsgZmlyZV4yICsgYWlyXjIgKyB3YXRlcl4yKSAvICgobWF0dGVyIHx8IDEpICsgZWFydGgpXjJcbiAgICBjb25zdCByZWFjdGl2aXR5ID1cbiAgICAgIChNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KGJvb3N0ZWRTcGlyaXQpLCAyKSArIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZFN1YnN0YW5jZSksIDIpICtcbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZEVzc2VuY2UpLCAyKSArIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoZmlyZSksIDIpICtcbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYWlyKSwgMikgKyBNYXRoLnBvdyhzYWZlVmFsdWVGb3JIZWF0KHdhdGVyKSwgMikpIC9cbiAgICAgIE1hdGgucG93KHNhZmVWYWx1ZUZvckhlYXQoYm9vc3RlZE1hdHRlciArIGVhcnRoKSwgMik7XG5cbiAgICAvLyBHcmVnJ3MgRW5lcmd5IGZvcm11bGEgd2l0aCBjb25zaXN0ZW50IHNjYWxpbmdcbiAgICBjb25zdCByYXdHcmVnc0VuZXJneSA9IGhlYXQgLSByZWFjdGl2aXR5ICogZW50cm9weTtcbiAgICBjb25zdCBzY2FsZWRHcmVnc0VuZXJneSA9IChyYXdHcmVnc0VuZXJneSArIDEpIC8gMjsgLy8gQ29udmVydCBmcm9tIHJhbmdlICgtMSwxKSB0byAoMCwxKVxuICAgIGNvbnN0IGdyZWdzRW5lcmd5ID0gTWF0aC5tYXgoMC4xLCBNYXRoLm1pbigxLjAsIHNjYWxlZEdyZWdzRW5lcmd5KSk7XG5cbiAgICAvLyBOb3JtYWxpemUgYWxsIGVuZXJneSB2YWx1ZXMgdG8gZW5zdXJlIHRoZXkncmUgaW4gdGhlIDAtMSByYW5nZVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRIZWF0ID0gTWF0aC5tYXgoMC4xLCBNYXRoLm1pbigxLjAsIGhlYXQpKTtcbiAgICBjb25zdCBub3JtYWxpemVkRW50cm9weSA9IE1hdGgubWF4KDAuMSwgTWF0aC5taW4oMS4wLCBlbnRyb3B5KSk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFJlYWN0aXZpdHkgPSBNYXRoLm1heCgwLjEsIE1hdGgubWluKDEuMCwgcmVhY3Rpdml0eSkpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGRvbWluYW50IGVsZW1lbnQgYmFzZWQgb24gc2NhbGVkIGVsZW1lbnRzXG4gICAgY29uc3QgZG9taW5hbnRFbGVtZW50ID0gT2JqZWN0LmVudHJpZXMoc2NhbGVkRWxlbWVudHMpLnNvcnQoXG4gICAgICAoW19rZXlBLCB2YWx1ZUFdLCBbX2tleUIsIHZhbHVlQl0pID0+IHZhbHVlQiAtIHZhbHVlQVxuICAgIClbMF1bMF0gYXMgRWxlbWVudGFsQ2hhcmFjdGVyO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGRvbWluYW50IGFsY2hlbWljYWwgcHJvcGVydHlcbiAgICBjb25zdCBhbGNoZW1pY2FsUHJvcGVydGllcyA9IHtcbiAgICAgIFNwaXJpdDogYm9vc3RlZFNwaXJpdCxcbiAgICAgIEVzc2VuY2U6IGJvb3N0ZWRFc3NlbmNlLFxuICAgICAgTWF0dGVyOiBib29zdGVkTWF0dGVyLFxuICAgICAgU3Vic3RhbmNlOiBib29zdGVkU3Vic3RhbmNlLFxuICAgIH07XG4gICAgY29uc3QgZG9taW5hbnRBbGNoZW1pY2FsUHJvcGVydHkgPSBPYmplY3QuZW50cmllcyhcbiAgICAgIGFsY2hlbWljYWxQcm9wZXJ0aWVzXG4gICAgKS5zb3J0KFxuICAgICAgKFtfa2V5QSwgdmFsdWVBXSwgW19rZXlCLCB2YWx1ZUJdKSA9PiB2YWx1ZUIgLSB2YWx1ZUFcbiAgICApWzBdWzBdIGFzIEFsY2hlbWljYWxQcm9wZXJ0eTtcblxuICAgIC8vIEV4dHJhY3QgZG9taW5hbnQgcGxhbmV0cyBiYXNlZCBvbiBwbGFuZXRhcnkgcG9zaXRpb25zIGlmIGF2YWlsYWJsZVxuICAgIGxldCBkb21pbmFudFBsYW5ldHM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHBsYW5ldGFyeVBvc2l0aW9ucykge1xuICAgICAgLy8gR2V0IHRvcCAzIHBsYW5ldHMgd2l0aCBoaWdoZXN0IHZhbHVlcyBvciBkaWduaXR5XG4gICAgICBjb25zdCBwbGFuZXRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGxhbmV0YXJ5UG9zaXRpb25zKS5maWx0ZXIoXG4gICAgICAgIChbcGxhbmV0LCBfXSkgPT4gcGxhbmV0ICE9PSAnaXNEYXl0aW1lJyAmJiBwbGFuZXQgIT09ICdjdXJyZW50Wm9kaWFjJ1xuICAgICAgKTtcblxuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCBwb3NpdGlvbiBkYXRhIGZvcm1hdHNcbiAgICAgIGRvbWluYW50UGxhbmV0cyA9IHBsYW5ldEVudHJpZXNcbiAgICAgICAgLnNvcnQoKFtfLCB2YWxBXSwgW19fLCB2YWxCXSkgPT4ge1xuICAgICAgICAgIC8vIFNvcnQgYnkgc3RyZW5ndGggL2RpZ25pdHkgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxBID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsQiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFBID0gdmFsQSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFCID0gdmFsQiBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVuZ3RoQSA9IE51bWJlcihkYXRhQS5zdHJlbmd0aCkgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVuZ3RoQiA9IE51bWJlcihkYXRhQi5zdHJlbmd0aCkgfHwgMDtcbiAgICAgICAgICAgIHJldHVybiBzdHJlbmd0aEIgLSBzdHJlbmd0aEE7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIERlZmF1bHQgc29ydCBmb3Igc2ltcGxlIG51bWVyaWMgdmFsdWVzXG4gICAgICAgICAgcmV0dXJuIE51bWJlcih2YWxCKSAtIE51bWJlcih2YWxBKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgIC5tYXAoKFtwbGFuZXQsIF9dKSA9PiBwbGFuZXQpO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB3ZSBoYXZlIHBsYW5ldGFyeSBkaWduaXRpZXMgZGF0YVxuICAgIGNvbnN0IHBsYW5ldGFyeURpZ25pdGllcyA9IHt9O1xuXG4gICAgLy8gSGFuZGxlIE5hTiB2YWx1ZXMgb3IgaW5maW5pdHkgZm9yIGFsbCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgX2Vuc3VyZVNhZmVOdW1iZXIgPSAodmFsOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgICAgaWYgKGlzTmFOKHZhbCkgfHwgIWlzRmluaXRlKHZhbCkpIHJldHVybiAwLjI7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH07XG5cbiAgICAvLyBBcHBseSBzYWZlIGFyaXRobWV0aWMgb3BlcmF0aW9ucyB3aXRoIHByb3BlciB0eXBlIGNoZWNraW5nXG4gICAgY29uc3Qgc2FmZVZhbHVlRm9yQXJpdGhtZXRpYyA9ICh2YWw6IG51bWJlcikgPT4gTWF0aC5tYXgodmFsLCAwLjAxKTtcbiAgICBjb25zdCBfc2FmZUFkZCA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gc2FmZVZhbHVlRm9yQXJpdGhtZXRpYyhhKSArIHNhZmVWYWx1ZUZvckFyaXRobWV0aWMoYik7XG4gICAgY29uc3QgX3NhZmVNdWx0aXBseSA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gc2FmZVZhbHVlRm9yQXJpdGhtZXRpYyhhKSAqIHNhZmVWYWx1ZUZvckFyaXRobWV0aWMoYik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICBlbGVtZW50YWxQcm9wZXJ0aWVzOiBpdGVtLmVsZW1lbnRhbFByb3BlcnRpZXMsXG4gICAgICB0cmFuc2Zvcm1lZEVsZW1lbnRhbFByb3BlcnRpZXM6IHNjYWxlZEVsZW1lbnRzLFxuICAgICAgYWxjaGVtaWNhbFByb3BlcnRpZXM6IHtcbiAgICAgICAgU3Bpcml0OiBib29zdGVkU3Bpcml0LFxuICAgICAgICBFc3NlbmNlOiBib29zdGVkRXNzZW5jZSxcbiAgICAgICAgTWF0dGVyOiBib29zdGVkTWF0dGVyLFxuICAgICAgICBTdWJzdGFuY2U6IGJvb3N0ZWRTdWJzdGFuY2UsXG4gICAgICB9LFxuICAgICAgaGVhdDogbm9ybWFsaXplZEhlYXQsXG4gICAgICBlbnRyb3B5OiBub3JtYWxpemVkRW50cm9weSxcbiAgICAgIHJlYWN0aXZpdHk6IG5vcm1hbGl6ZWRSZWFjdGl2aXR5LFxuICAgICAgZ3JlZ3NFbmVyZ3k6IGdyZWdzRW5lcmd5LFxuICAgICAgZG9taW5hbnRFbGVtZW50LFxuICAgICAgZG9taW5hbnRBbGNoZW1pY2FsUHJvcGVydHksXG4gICAgICBwbGFuZXRhcnlCb29zdDogcGxhbmV0YXJ5SW5mbHVlbmNlLFxuICAgICAgZG9taW5hbnRQbGFuZXRzLFxuICAgICAgcGxhbmV0YXJ5RGlnbml0aWVzLFxuICAgIH0gYXMgdW5rbm93biBhcyBBbGNoZW1pY2FsSXRlbTtcbiAgfSk7XG59XG5cbi8vIE5ldyBkaWZmZXJlbnRpYXRpb24gZnVuY3Rpb25zXG5jb25zdCBfYXBwbHlOb25MaW5lYXJTY2FsaW5nID0gKFxuICBwcm9wczogRWxlbWVudGFsUHJvcGVydGllc1xuKTogRWxlbWVudGFsUHJvcGVydGllcyA9PiAoe1xuICBGaXJlOiBNYXRoLnRhbmgocHJvcHMuRmlyZSAqIDIpLFxuICBXYXRlcjogMSAtIE1hdGguZXhwKC1wcm9wcy5XYXRlciAqIDMpLFxuICBFYXJ0aDogcHJvcHMuRWFydGggKiogMS41LFxuICBBaXI6IE1hdGguc2luKChwcm9wcy5BaXIgKiBNYXRoLlBJKSAvIDIpLFxufSk7XG5cbmNvbnN0IF9jYWxjdWxhdGVVbmlxdWVuZXNzU2NvcmUgPSAoaXRlbTogRWxlbWVudGFsSXRlbSk6IG51bWJlciA9PiB7XG4gIGNvbnN0IHZhcmlhbmNlID0gT2JqZWN0LnZhbHVlcyhpdGVtLmVsZW1lbnRhbFByb3BlcnRpZXMpLnJlZHVjZShcbiAgICAoYWNjOiBudW1iZXIsIHZhbDogbnVtYmVyKSA9PiBhY2MgKyBNYXRoLmFicyh2YWwgLSAwLjUpLFxuICAgIDBcbiAgKTtcbiAgcmV0dXJuIE1hdGgubWluKDEsIHZhcmlhbmNlICogMik7XG59O1xuXG4vLyBBZGQgb3IgdXBkYXRlIHRoZSBub3JtYWxpemVFbGVtZW50YWxWYWx1ZXMgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVFbGVtZW50YWxWYWx1ZXMoXG4gIHZhbHVlczogUmVjb3JkPEVsZW1lbnRhbENoYXJhY3RlciwgbnVtYmVyPlxuKTogUmVjb3JkPEVsZW1lbnRhbENoYXJhY3RlciwgbnVtYmVyPiB7XG4gIGNvbnN0IHRvdGFsID0gT2JqZWN0LnZhbHVlcyh2YWx1ZXMpLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCwgMCk7XG5cbiAgLy8gSWYgdG90YWwgaXMgemVybyBvciBjbG9zZSB0byB6ZXJvLCByZXR1cm4gZGVmYXVsdCBkaXN0cmlidXRpb25cbiAgaWYgKHRvdGFsIDwgMC4wMSkge1xuICAgIHJldHVybiB7XG4gICAgICBGaXJlOiAwLjI1LFxuICAgICAgV2F0ZXI6IDAuMjUsXG4gICAgICBFYXJ0aDogMC4yNSxcbiAgICAgIEFpcjogMC4yNSxcbiAgICB9O1xuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbHVlcyB0byBzdW0gdG8gMS4wXG4gIHJldHVybiB7XG4gICAgRmlyZTogdmFsdWVzLkZpcmUgLyB0b3RhbCxcbiAgICBXYXRlcjogdmFsdWVzLldhdGVyIC8gdG90YWwsXG4gICAgRWFydGg6IHZhbHVlcy5FYXJ0aCAvIHRvdGFsLFxuICAgIEFpcjogdmFsdWVzLkFpciAvIHRvdGFsLFxuICB9O1xufVxuXG4vLyBHZXQgdGhlIHByaW1hcnkgZWxlbWVudCByZWdhcmRsZXNzIG9mIGZvcm1hdFxuZXhwb3J0IGZ1bmN0aW9uIGdldFByaW1hcnlFbGVtZW50KFxuICBlbGVtZW50YWxBZmZpbml0eTogRWxlbWVudGFsQWZmaW5pdHlcbik6IHN0cmluZyB7XG4gIGNvbnN0IGFmZmluaXR5RGF0YSA9IGVsZW1lbnRhbEFmZmluaXR5IGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIHJldHVybiAoXG4gICAgYWZmaW5pdHlEYXRhLmJhc2UgfHwgYWZmaW5pdHlEYXRhLmVsZW1lbnQgfHwgJ0ZpcmUnXG4gICkgYXMgc3RyaW5nO1xufVxuXG4vLyBHZXQgZWxlbWVudCBzdHJlbmd0aCBpZiBhdmFpbGFibGVcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U3RyZW5ndGgoXG4gIGVsZW1lbnRhbEFmZmluaXR5OiBFbGVtZW50YWxBZmZpbml0eVxuKTogbnVtYmVyIHtcbiAgY29uc3QgYWZmaW5pdHlEYXRhID0gZWxlbWVudGFsQWZmaW5pdHkgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgY29uc3Qgc3RyZW5ndGggPSBhZmZpbml0eURhdGEuc3RyZW5ndGggYXMgbnVtYmVyO1xuICByZXR1cm4gdHlwZW9mIHN0cmVuZ3RoID09PSAnbnVtYmVyJyA/IHN0cmVuZ3RoIDogMTtcbn1cblxuLyoqXG4gKiBFbnN1cmVzIGFsbCByZXF1aXJlZCBlbGVtZW50YWwgcHJvcGVydGllcyBhcmUgcHJlc2VudFxuICogQHBhcmFtIHByb3BlcnRpZXMgVGhlIGVsZW1lbnRhbCBwcm9wZXJ0aWVzIHRvIHZhbGlkYXRlIGFuZCBjb21wbGV0ZVxuICogQHJldHVybnMgQ29tcGxldGUgZWxlbWVudGFsIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGNvbnN0IGVuc3VyZUNvbXBsZXRlRWxlbWVudGFsUHJvcGVydGllcyA9IChcbiAgcHJvcGVydGllczogUGFydGlhbDxFbGVtZW50YWxQcm9wZXJ0aWVzPlxuKTogRWxlbWVudGFsUHJvcGVydGllcyA9PiB7XG4gIHJldHVybiB7XG4gICAgRmlyZTogcHJvcGVydGllcy5GaXJlID8/IDAuMjUsXG4gICAgV2F0ZXI6IHByb3BlcnRpZXMuV2F0ZXIgPz8gMC4yNSxcbiAgICBFYXJ0aDogcHJvcGVydGllcy5FYXJ0aCA/PyAwLjI1LFxuICAgIEFpcjogcHJvcGVydGllcy5BaXIgPz8gMC4yNSxcbiAgfTtcbn07XG5cbi8qKlxuICogV0FSTklORzogZ2V0QmFsYW5jaW5nRWxlbWVudCBpcyBsZWdhY3kgYW5kIGRvZXMgbm90IGNvbXBseSB3aXRoIGN1cnJlbnQgZWxlbWVudGFsIGxvZ2ljIHByaW5jaXBsZXMgKG5vIG9wcG9zaW5nL2JhbGFuY2luZyBlbGVtZW50cykuIFJldmlldyB1c2FnZSBhbmQgcmVmYWN0b3IvcmVtb3ZlIGlmIG5vdCBuZWVkZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYWxhbmNpbmdFbGVtZW50KGVsZW1lbnQpIHtcbiAgLy8gRWxlbWVudHMgd29yayBiZXN0IHdpdGggdGhlbXNlbHZlcyAtIHJlaW5mb3JjaW5nIHRoZSBjdXJyZW50IGVuZXJneVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBXQVJOSU5HOiBnZXRFbGVtZW50YWxSZWxhdGlvbnNoaXAgaXMgbGVnYWN5IGFuZCBtYXkgbm90IGNvbXBseSB3aXRoIGN1cnJlbnQgZWxlbWVudGFsIGxvZ2ljIHByaW5jaXBsZXMuXG4gKiBBbGwgZWxlbWVudCBjb21iaW5hdGlvbnMgYXJlIGhhcm1vbmlvdXM7IGF2b2lkIHVzaW5nIFwib3Bwb3NpbmdcIiBvciBcImNvbnRyb2xsaW5nXCIgbG9naWMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50YWxSZWxhdGlvbnNoaXAoXG4gIGVsZW1lbnQxOiBFbGVtZW50LFxuICBlbGVtZW50MjogRWxlbWVudFxuKTogRWxlbWVudGFsUmVsYXRpb25zaGlwIHtcbiAgaWYgKGVsZW1lbnQxID09PSBlbGVtZW50Mikge1xuICAgIHJldHVybiAnc2FtZSc7XG4gIH1cblxuICAvLyBUaGUgZ2VuZXJhdGluZyBjeWNsZSBmb3IgNC1lbGVtZW50IHN5c3RlbTogRmlyZSDihpIgRWFydGgg4oaSIFdhdGVyIOKGkiBBaXIg4oaSIEZpcmVcbiAgY29uc3QgZ2VuZXJhdGluZ0N5Y2xlOiB7IFtrZXkgaW4gRWxlbWVudF06IEVsZW1lbnQgfSA9IHtcbiAgICBGaXJlOiAnRWFydGgnLFxuICAgIEVhcnRoOiAnV2F0ZXInLFxuICAgIFdhdGVyOiAnQWlyJyxcbiAgICBBaXI6ICdGaXJlJyxcbiAgfTtcblxuICAvLyBUaGUgY29udHJvbGxpbmcgY3ljbGUgZm9yIDQtZWxlbWVudCBzeXN0ZW06IEZpcmUg4oaSIEFpciDihpIgRWFydGgg4oaSIFdhdGVyIOKGkiBGaXJlXG4gIGNvbnN0IGNvbnRyb2xsaW5nQ3ljbGU6IHsgW2tleSBpbiBFbGVtZW50XTogRWxlbWVudCB9ID0ge1xuICAgIEZpcmU6ICdBaXInLFxuICAgIEFpcjogJ0VhcnRoJyxcbiAgICBFYXJ0aDogJ1dhdGVyJyxcbiAgICBXYXRlcjogJ0ZpcmUnLFxuICB9O1xuXG4gIGlmIChnZW5lcmF0aW5nQ3ljbGVbZWxlbWVudDFdID09PSBlbGVtZW50Mikge1xuICAgIHJldHVybiAnZ2VuZXJhdGluZyc7IC8vIGVsZW1lbnQxIGdlbmVyYXRlcyBlbGVtZW50MlxuICB9IGVsc2UgaWYgKGdlbmVyYXRpbmdDeWNsZVtlbGVtZW50Ml0gPT09IGVsZW1lbnQxKSB7XG4gICAgcmV0dXJuICd3ZWFrZW5lZC1ieSc7IC8vIGVsZW1lbnQyIGdlbmVyYXRlcyBlbGVtZW50MVxuICB9IGVsc2UgaWYgKGNvbnRyb2xsaW5nQ3ljbGVbZWxlbWVudDFdID09PSBlbGVtZW50Mikge1xuICAgIHJldHVybiAnY29udHJvbGxpbmcnOyAvLyBlbGVtZW50MSBjb250cm9scyBlbGVtZW50MlxuICB9IGVsc2UgaWYgKGNvbnRyb2xsaW5nQ3ljbGVbZWxlbWVudDJdID09PSBlbGVtZW50MSkge1xuICAgIHJldHVybiAnY29udHJvbGxlZC1ieSc7IC8vIGVsZW1lbnQyIGNvbnRyb2xzIGVsZW1lbnQxXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICduZXV0cmFsJztcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIGVsZW1lbnQgdGhhdCBzdHJlbmd0aGVucyB0aGUgcHJvdmlkZWQgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyZW5ndGhlbmluZ0VsZW1lbnQoZWxlbWVudDogRWxlbWVudCk6IEVsZW1lbnQge1xuICAvLyBUaGUgZWxlbWVudCB0aGF0IGdlbmVyYXRlcyB0aGUgcHJvdmlkZWQgZWxlbWVudCB3aWxsIHN0cmVuZ3RoZW4gaXRcbiAgY29uc3Qgc3RyZW5ndGhNYXA6IHsgW2tleSBpbiBFbGVtZW50XTogRWxlbWVudCB9ID0ge1xuICAgIEZpcmU6ICdBaXInLCAvLyBBaXIgc3RyZW5ndGhlbnMgRmlyZVxuICAgIEVhcnRoOiAnRmlyZScsIC8vIEZpcmUgc3RyZW5ndGhlbnMgRWFydGhcbiAgICBXYXRlcjogJ0VhcnRoJywgLy8gRWFydGggc3RyZW5ndGhlbnMgV2F0ZXJcbiAgICBBaXI6ICdXYXRlcicsIC8vIFdhdGVyIHN0cmVuZ3RoZW5zIEFpclxuICB9O1xuXG4gIHJldHVybiBzdHJlbmd0aE1hcFtlbGVtZW50XTtcbn1cblxuLyoqXG4gKiBFbmhhbmNlIHZlZ2V0YWJsZSB0cmFuc2Zvcm1hdGlvbnMgYnkgYWRkaW5nIHRoZXJtb2R5bmFtaWMgZWZmZWN0cyB0byBkaWZmZXJlbnQgY29va2luZyBtZXRob2RzXG4gKiBAcGFyYW0gdmVnZXRhYmxlcyBUaGUgY29sbGVjdGlvbiBvZiB2ZWdldGFibGVzIHRvIGVuaGFuY2VcbiAqIEByZXR1cm5zIEVuaGFuY2VkIHZlZ2V0YWJsZXMgd2l0aCBjb21wbGV0ZSB0cmFuc2Zvcm1hdGlvbiBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmhhbmNlVmVnZXRhYmxlVHJhbnNmb3JtYXRpb25zKFxuICB2ZWdldGFibGVzOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj5cbik6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyh2ZWdldGFibGVzKS5yZWR1Y2UoKGFjYywgW2tleSwgdmVnZXRhYmxlXSkgPT4ge1xuICAgIC8vIFNraXAgaWYgbm90IGFuIG9iamVjdFxuICAgIGlmICh0eXBlb2YgdmVnZXRhYmxlICE9PSAnb2JqZWN0JyB8fCB2ZWdldGFibGUgPT09IG51bGwpIHtcbiAgICAgIGFjY1trZXldID0gdmVnZXRhYmxlO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9XG5cbiAgICBjb25zdCBlbmhhbmNlZCA9IHsgLi4udmVnZXRhYmxlIH07XG5cbiAgICAvLyBDcmVhdGUgdHJhbnNmb3JtYXRpb24gaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghZW5oYW5jZWQuZWxlbWVudGFsVHJhbnNmb3JtYXRpb24pIHtcbiAgICAgIC8vIEdldCB0aGUgZG9taW5hbnQgZWxlbWVudFxuICAgICAgY29uc3QgZWxlbWVudGFsUHJvcHMgPSBlbmhhbmNlZC5lbGVtZW50YWxQcm9wZXJ0aWVzIHx8IHtcbiAgICAgICAgRWFydGg6IDAuMyxcbiAgICAgICAgV2F0ZXI6IDAuMyxcbiAgICAgICAgQWlyOiAwLjIsXG4gICAgICAgIEZpcmU6IDAuMixcbiAgICAgIH07XG4gICAgICBsZXQgZG9taW5hbnRFbGVtZW50ID0gJ0VhcnRoJztcbiAgICAgIGxldCBoaWdoZXN0VmFsdWUgPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IFtlbGVtZW50LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZWxlbWVudGFsUHJvcHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlID4gaGlnaGVzdFZhbHVlKSB7XG4gICAgICAgICAgZG9taW5hbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICBoaWdoZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZXQgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgYmFzZWQgb24gZG9taW5hbnQgZWxlbWVudFxuICAgICAgZW5oYW5jZWQuZWxlbWVudGFsVHJhbnNmb3JtYXRpb24gPSB7XG4gICAgICAgIHdoZW5Db29rZWQ6IHsgW2RvbWluYW50RWxlbWVudF06IDAuMSwgRmlyZTogMC4wNSB9LFxuICAgICAgICB3aGVuRHJpZWQ6IHsgRWFydGg6IDAuMSwgQWlyOiAwLjA1IH0sXG4gICAgICAgIHdoZW5GZXJtZW50ZWQ6IHsgV2F0ZXI6IDAuMSwgQWlyOiAwLjA1IH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGVybW9keW5hbWljIGNoYW5nZXMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGNvbnN0IHRyYW5zZm9ybWF0aW9uID0gZW5oYW5jZWQuZWxlbWVudGFsVHJhbnNmb3JtYXRpb24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgaWYgKFxuICAgICAgdHJhbnNmb3JtYXRpb24gJiZcbiAgICAgICF0cmFuc2Zvcm1hdGlvbi50aGVybW9keW5hbWljQ2hhbmdlc1xuICAgICkge1xuICAgICAgdHJhbnNmb3JtYXRpb24udGhlcm1vZHluYW1pY0NoYW5nZXMgPSB7XG4gICAgICAgIGNvb2tlZDoge1xuICAgICAgICAgIGhlYXQ6IDAuMSxcbiAgICAgICAgICBlbnRyb3B5OiAwLjA1LFxuICAgICAgICAgIHJlYWN0aXZpdHk6IDAuMDUsXG4gICAgICAgIH0sXG4gICAgICAgIGRyaWVkOiB7XG4gICAgICAgICAgaGVhdDogLTAuMDUsXG4gICAgICAgICAgZW50cm9weTogLTAuMSxcbiAgICAgICAgICByZWFjdGl2aXR5OiAtMC4wNSxcbiAgICAgICAgfSxcbiAgICAgICAgZmVybWVudGVkOiB7XG4gICAgICAgICAgZW50cm9weTogMC4yLFxuICAgICAgICAgIHJlYWN0aXZpdHk6IDAuMTUsXG4gICAgICAgICAgc3RhYmlsaXR5SW5kZXg6IC0wLjEsXG4gICAgICAgIH0sXG4gICAgICAgIHJvYXN0ZWQ6IHtcbiAgICAgICAgICBoZWF0OiAwLjIsXG4gICAgICAgICAgZW50cm9weTogMC4xLFxuICAgICAgICAgIGVuZXJneTogMC4xNSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RlYW1lZDoge1xuICAgICAgICAgIGhlYXQ6IDAuMDUsXG4gICAgICAgICAgbW9pc3R1cmU6IDAuMixcbiAgICAgICAgICByZWFjdGl2aXR5OiAwLjA1LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBBZGQgZWxlbWVudGFsU2lnbmF0dXJlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICBpZiAoIWVuaGFuY2VkLmVsZW1lbnRhbFNpZ25hdHVyZSAmJiBlbmhhbmNlZC5lbGVtZW50YWxQcm9wZXJ0aWVzKSB7XG4gICAgICBlbmhhbmNlZC5lbGVtZW50YWxTaWduYXR1cmUgPSBPYmplY3QuZW50cmllcyhlbmhhbmNlZC5lbGVtZW50YWxQcm9wZXJ0aWVzKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIC8vIEFwcGx5IFBhdHRlcm4gS0stMTogRXhwbGljaXQgVHlwZSBBc3NlcnRpb24gZm9yIGFyaXRobWV0aWMgb3BlcmF0aW9uc1xuICAgICAgICAgIGNvbnN0IHZhbHVlQSA9IE51bWJlcihhWzFdKSB8fCAwO1xuICAgICAgICAgIGNvbnN0IHZhbHVlQiA9IE51bWJlcihiWzFdKSB8fCAwO1xuICAgICAgICAgIHJldHVybiB2YWx1ZUIgLSB2YWx1ZUE7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAoKFtlbGVtZW50LCB2YWx1ZV0pID0+IFtlbGVtZW50LCBOdW1iZXIodmFsdWUpXSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHNlbnNvcnkgcHJvZmlsZXMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGlmICghZW5oYW5jZWQuc2Vuc29yeVByb2ZpbGUpIHtcbiAgICAgIC8vIERlZmF1bHQgc2Vuc29yeSBwcm9maWxlIGJhc2VkIG9uIHZlZ2V0YWJsZSBzdWJDYXRlZ29yeVxuICAgICAgY29uc3Qgc3ViQ2F0ZWdvcnkgPSBlbmhhbmNlZC5zdWJDYXRlZ29yeSB8fCAndmVnZXRhYmxlJztcblxuICAgICAgY29uc3QgcHJvZmlsZXMgPSB7XG4gICAgICAgICdsZWFmeSBncmVlbic6IHtcbiAgICAgICAgICB0YXN0ZToge1xuICAgICAgICAgICAgYml0dGVyOiAwLjYsXG4gICAgICAgICAgICBzd2VldDogMC4yLFxuICAgICAgICAgICAgdW1hbWk6IDAuMSxcbiAgICAgICAgICAgIHNhbHR5OiAwLjA1LFxuICAgICAgICAgICAgc291cjogMC4wNSxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJvbWE6IHtcbiAgICAgICAgICAgIGhlcmJhbDogMC41LFxuICAgICAgICAgICAgZWFydGh5OiAwLjMsXG4gICAgICAgICAgICBmbG9yYWw6IDAuMSxcbiAgICAgICAgICAgIGZydWl0eTogMC4wNSxcbiAgICAgICAgICAgIHdvb2R5OiAwLjA1LFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICBjcmlzcDogMC43LFxuICAgICAgICAgICAgdGVuZGVyOiAwLjIsXG4gICAgICAgICAgICBzaWxreTogMC4xLFxuICAgICAgICAgICAgY2hld3k6IDAsXG4gICAgICAgICAgICBjcmVhbXk6IDAsXG4gICAgICAgICAgICBjcnVuY2h5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICB0YXN0ZToge1xuICAgICAgICAgICAgc3dlZXQ6IDAuNSxcbiAgICAgICAgICAgIGVhcnRoeTogMC4zLFxuICAgICAgICAgICAgYml0dGVyOiAwLjEsXG4gICAgICAgICAgICB1bWFtaTogMC4xLFxuICAgICAgICAgICAgc2FsdHk6IDAsXG4gICAgICAgICAgICBzcGljeTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgICBlYXJ0aHk6IDAuNixcbiAgICAgICAgICAgIHdvb2R5OiAwLjIsXG4gICAgICAgICAgICBoZXJiYWw6IDAuMSxcbiAgICAgICAgICAgIGZydWl0eTogMC4xLFxuICAgICAgICAgICAgZmxvcmFsOiAwLFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICBjcnVuY2h5OiAwLjYsXG4gICAgICAgICAgICBjaGV3eTogMC4yLFxuICAgICAgICAgICAgdGVuZGVyOiAwLjIsXG4gICAgICAgICAgICBjcmlzcDogMCxcbiAgICAgICAgICAgIHNpbGt5OiAwLFxuICAgICAgICAgICAgY3JlYW15OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGFsbGl1bToge1xuICAgICAgICAgIHRhc3RlOiB7XG4gICAgICAgICAgICBwdW5nZW50OiAwLjYsXG4gICAgICAgICAgICBzd2VldDogMC4yLFxuICAgICAgICAgICAgdW1hbWk6IDAuMixcbiAgICAgICAgICAgIGJpdHRlcjogMCxcbiAgICAgICAgICAgIHNhbHR5OiAwLFxuICAgICAgICAgICAgc291cjogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgICBzcGljeTogMC43LFxuICAgICAgICAgICAgZWFydGh5OiAwLjIsXG4gICAgICAgICAgICBoZXJiYWw6IDAuMSxcbiAgICAgICAgICAgIGZsb3JhbDogMCxcbiAgICAgICAgICAgIGZydWl0eTogMCxcbiAgICAgICAgICAgIHdvb2R5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgY3J1bmNoeTogMC41LFxuICAgICAgICAgICAgY2hld3k6IDAuMyxcbiAgICAgICAgICAgIHRlbmRlcjogMC4yLFxuICAgICAgICAgICAgY3Jpc3A6IDAsXG4gICAgICAgICAgICBzaWxreTogMCxcbiAgICAgICAgICAgIGNyZWFteTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBjcnVjaWZlcm91czoge1xuICAgICAgICAgIHRhc3RlOiB7XG4gICAgICAgICAgICBiaXR0ZXI6IDAuNSxcbiAgICAgICAgICAgIHN3ZWV0OiAwLjIsXG4gICAgICAgICAgICBzcGljeTogMC4yLFxuICAgICAgICAgICAgdW1hbWk6IDAuMSxcbiAgICAgICAgICAgIHNhbHR5OiAwLFxuICAgICAgICAgICAgc291cjogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgICBlYXJ0aHk6IDAuNCxcbiAgICAgICAgICAgIHN1bGZ1cm91czogMC4zLFxuICAgICAgICAgICAgd29vZHk6IDAuMixcbiAgICAgICAgICAgIGhlcmJhbDogMC4xLFxuICAgICAgICAgICAgZmxvcmFsOiAwLFxuICAgICAgICAgICAgZnJ1aXR5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgY3J1bmNoeTogMC43LFxuICAgICAgICAgICAgY3Jpc3A6IDAuMixcbiAgICAgICAgICAgIHRlbmRlcjogMC4xLFxuICAgICAgICAgICAgY2hld3k6IDAsXG4gICAgICAgICAgICBzaWxreTogMCxcbiAgICAgICAgICAgIGNyZWFteTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBuaWdodHNoYWRlOiB7XG4gICAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICAgIHVtYW1pOiAwLjUsXG4gICAgICAgICAgICBzd2VldDogMC4zLFxuICAgICAgICAgICAgc291cjogMC4xLFxuICAgICAgICAgICAgYml0dGVyOiAwLjEsXG4gICAgICAgICAgICBzYWx0eTogMCxcbiAgICAgICAgICAgIHNwaWN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJvbWE6IHtcbiAgICAgICAgICAgIGZydWl0eTogMC41LFxuICAgICAgICAgICAgZWFydGh5OiAwLjMsXG4gICAgICAgICAgICBoZXJiYWw6IDAuMixcbiAgICAgICAgICAgIGZsb3JhbDogMCxcbiAgICAgICAgICAgIHdvb2R5OiAwLFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICB0ZW5kZXI6IDAuNSxcbiAgICAgICAgICAgIGp1aWN5OiAwLjMsXG4gICAgICAgICAgICBjaGV3eTogMC4yLFxuICAgICAgICAgICAgY3Jpc3A6IDAsXG4gICAgICAgICAgICBjcnVuY2h5OiAwLFxuICAgICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc3F1YXNoOiB7XG4gICAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICAgIHN3ZWV0OiAwLjYsXG4gICAgICAgICAgICBlYXJ0aHk6IDAuMixcbiAgICAgICAgICAgIG51dHR5OiAwLjIsXG4gICAgICAgICAgICBiaXR0ZXI6IDAsXG4gICAgICAgICAgICBzYWx0eTogMCxcbiAgICAgICAgICAgIHNvdXI6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm9tYToge1xuICAgICAgICAgICAgZWFydGh5OiAwLjQsXG4gICAgICAgICAgICBzd2VldDogMC40LFxuICAgICAgICAgICAgd29vZHk6IDAuMSxcbiAgICAgICAgICAgIGhlcmJhbDogMC4xLFxuICAgICAgICAgICAgZmxvcmFsOiAwLFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICB0ZW5kZXI6IDAuNCxcbiAgICAgICAgICAgIGNyZWFteTogMC4zLFxuICAgICAgICAgICAgY2hld3k6IDAuMixcbiAgICAgICAgICAgIGNyaXNwOiAwLjEsXG4gICAgICAgICAgICBjcnVuY2h5OiAwLFxuICAgICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbGVndW1lOiB7XG4gICAgICAgICAgdGFzdGU6IHtcbiAgICAgICAgICAgIGVhcnRoeTogMC41LFxuICAgICAgICAgICAgc3dlZXQ6IDAuMyxcbiAgICAgICAgICAgIHVtYW1pOiAwLjIsXG4gICAgICAgICAgICBiaXR0ZXI6IDAsXG4gICAgICAgICAgICBzYWx0eTogMCxcbiAgICAgICAgICAgIHNvdXI6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm9tYToge1xuICAgICAgICAgICAgZWFydGh5OiAwLjYsXG4gICAgICAgICAgICBudXR0eTogMC4zLFxuICAgICAgICAgICAgaGVyYmFsOiAwLjEsXG4gICAgICAgICAgICBmbG9yYWw6IDAsXG4gICAgICAgICAgICBmcnVpdHk6IDAsXG4gICAgICAgICAgICBzcGljeTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICAgIHRlbmRlcjogMC40LFxuICAgICAgICAgICAgY3JlYW15OiAwLjMsXG4gICAgICAgICAgICBjaGV3eTogMC4zLFxuICAgICAgICAgICAgY3Jpc3A6IDAsXG4gICAgICAgICAgICBjcnVuY2h5OiAwLFxuICAgICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhcmNoeToge1xuICAgICAgICAgIHRhc3RlOiB7XG4gICAgICAgICAgICBzd2VldDogMC41LFxuICAgICAgICAgICAgZWFydGh5OiAwLjMsXG4gICAgICAgICAgICB1bWFtaTogMC4yLFxuICAgICAgICAgICAgYml0dGVyOiAwLFxuICAgICAgICAgICAgc2FsdHk6IDAsXG4gICAgICAgICAgICBzb3VyOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJvbWE6IHtcbiAgICAgICAgICAgIGVhcnRoeTogMC43LFxuICAgICAgICAgICAgbnV0dHk6IDAuMixcbiAgICAgICAgICAgIGhlcmJhbDogMC4xLFxuICAgICAgICAgICAgZmxvcmFsOiAwLFxuICAgICAgICAgICAgZnJ1aXR5OiAwLFxuICAgICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgICBzdGFyY2h5OiAwLjYsXG4gICAgICAgICAgICB0ZW5kZXI6IDAuMixcbiAgICAgICAgICAgIGNyZWFteTogMC4yLFxuICAgICAgICAgICAgY3Jpc3A6IDAsXG4gICAgICAgICAgICBjcnVuY2h5OiAwLFxuICAgICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNlbGVjdCBhcHByb3ByaWF0ZSBwcm9maWxlIG9yIHVzZSBkZWZhdWx0XG4gICAgICBjb25zdCBwcm9maWxlID0gcHJvZmlsZXNbU3RyaW5nKHN1YkNhdGVnb3J5KV0gfHwge1xuICAgICAgICB0YXN0ZToge1xuICAgICAgICAgIHN3ZWV0OiAwLjI1LFxuICAgICAgICAgIGJpdHRlcjogMC4yNSxcbiAgICAgICAgICB1bWFtaTogMC4yNSxcbiAgICAgICAgICBzYWx0eTogMC4xNSxcbiAgICAgICAgICBzb3VyOiAwLjEsXG4gICAgICAgICAgc3BpY3k6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIGFyb21hOiB7XG4gICAgICAgICAgZWFydGh5OiAwLjMsXG4gICAgICAgICAgaGVyYmFsOiAwLjMsXG4gICAgICAgICAgd29vZHk6IDAuMixcbiAgICAgICAgICBmcnVpdHk6IDAuMSxcbiAgICAgICAgICBmbG9yYWw6IDAuMSxcbiAgICAgICAgICBzcGljeTogMCxcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgIHRlbmRlcjogMC4zLFxuICAgICAgICAgIGNydW5jaHk6IDAuMyxcbiAgICAgICAgICBjcmlzcDogMC4yLFxuICAgICAgICAgIGNoZXd5OiAwLjEsXG4gICAgICAgICAgY3JlYW15OiAwLjEsXG4gICAgICAgICAgc2lsa3k6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBlbmhhbmNlZC5zZW5zb3J5UHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgfVxuXG4gICAgYWNjW2tleV0gPSBlbmhhbmNlZDtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG5cbi8qKlxuICogRW5oYW5jZXMgb2lsIHByb3BlcnRpZXMgd2l0aCBhZGRpdGlvbmFsIGN1bGluYXJ5LCBzZW5zb3J5LCBhbmQgdHJhbnNmb3JtYXRpb24gZGV0YWlsc1xuICogQHBhcmFtIG9pbHMgUmVjb3JkIG9mIG9pbCBpbmdyZWRpZW50c1xuICogQHJldHVybnMgRW5oYW5jZWQgb2lsIGluZ3JlZGllbnRzIHdpdGggY29tcGxldGUgcHJvcGVydGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZW5oYW5jZU9pbFByb3BlcnRpZXMoXG4gIG9pbHM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+XG4pOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhvaWxzKS5yZWR1Y2UoKGFjYywgW2tleSwgb2lsXSkgPT4ge1xuICAgIC8vIFN0YXJ0IHdpdGggdGhlIG9yaWdpbmFsIG9pbFxuICAgIGNvbnN0IGVuaGFuY2VkT2lsID0geyAuLi5vaWwgfTtcblxuICAgIC8vIEVuc3VyZSBiYXNpYyBwcm9wZXJ0aWVzIGV4aXN0XG4gICAgZW5oYW5jZWRPaWwuY2F0ZWdvcnkgPSBTdHJpbmcoZW5oYW5jZWRPaWwuY2F0ZWdvcnkgfHwgJ29pbCcpO1xuICAgIGVuaGFuY2VkT2lsLmVsZW1lbnRhbFByb3BlcnRpZXMgPSBTdHJpbmcoSlNPTi5zdHJpbmdpZnkoZW5oYW5jZWRPaWwuZWxlbWVudGFsUHJvcGVydGllcyB8fCB7XG4gICAgICBGaXJlOiAwLjMsXG4gICAgICBXYXRlcjogMC4yLFxuICAgICAgRWFydGg6IDAuMyxcbiAgICAgIEFpcjogMC4yLFxuICAgIH0pKTtcbiAgICBlbmhhbmNlZE9pbC5xdWFsaXRpZXMgPSBTdHJpbmcoQXJyYXkuaXNBcnJheShlbmhhbmNlZE9pbC5xdWFsaXRpZXMpXG4gICAgICA/IEpTT04uc3RyaW5naWZ5KGVuaGFuY2VkT2lsLnF1YWxpdGllcylcbiAgICAgIDogSlNPTi5zdHJpbmdpZnkoW10pKTtcblxuICAgIC8vIENyZWF0ZSBkZWZhdWx0IHNlbnNvcnkgcHJvZmlsZSBpZiBub25lIGV4aXN0c1xuICAgIGlmICghZW5oYW5jZWRPaWwuc2Vuc29yeVByb2ZpbGUpIHtcbiAgICAgIGNvbnN0IG9pbFR5cGUgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGlzRnJ1aXR5ID0gb2lsVHlwZS5pbmNsdWRlcygnb2xpdmUnKSB8fCBvaWxUeXBlLmluY2x1ZGVzKCdhdm9jYWRvJyk7XG4gICAgICBjb25zdCBpc051dHR5ID1cbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnbnV0JykgfHxcbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnc2VzYW1lJykgfHxcbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnd2FsbnV0JykgfHxcbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnYWxtb25kJykgfHxcbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygncGVhbnV0Jyk7XG4gICAgICBjb25zdCBpc0Zsb3JhbCA9XG4gICAgICAgIG9pbFR5cGUuaW5jbHVkZXMoJ3N1bmZsb3dlcicpIHx8IG9pbFR5cGUuaW5jbHVkZXMoJ3NhZmZsb3dlcicpO1xuICAgICAgY29uc3QgaXNOZXV0cmFsID1cbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygndmVnZXRhYmxlJykgfHxcbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnY2Fub2xhJykgfHxcbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnZ3JhcGVzZWVkJyk7XG4gICAgICBjb25zdCBpc1Ryb3BpY2FsID1cbiAgICAgICAgb2lsVHlwZS5pbmNsdWRlcygnY29jb251dCcpIHx8IG9pbFR5cGUuaW5jbHVkZXMoJ3BhbG0nKTtcblxuICAgICAgZW5oYW5jZWRPaWwuc2Vuc29yeVByb2ZpbGUgPSBTdHJpbmcoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0YXN0ZToge1xuICAgICAgICAgIHN3ZWV0OiBpc0ZydWl0eSB8fCBpc1Ryb3BpY2FsID8gMC42IDogMC4yLFxuICAgICAgICAgIGJpdHRlcjogaXNOdXR0eSA/IDAuNCA6IDAuMSxcbiAgICAgICAgICB1bWFtaTogaXNOdXR0eSA/IDAuNSA6IDAuMixcbiAgICAgICAgICByaWNoOiBpc051dHR5IHx8IGlzRnJ1aXR5ID8gMC43IDogMC40LFxuICAgICAgICB9LFxuICAgICAgICBhcm9tYToge1xuICAgICAgICAgIGZydWl0eTogaXNGcnVpdHkgPyAwLjggOiAwLjEsXG4gICAgICAgICAgbnV0dHk6IGlzTnV0dHkgPyAwLjggOiAwLjEsXG4gICAgICAgICAgZmxvcmFsOiBpc0Zsb3JhbCA/IDAuNyA6IDAuMSxcbiAgICAgICAgICBuZXV0cmFsOiBpc05ldXRyYWwgPyAwLjkgOiAwLjIsXG4gICAgICAgICAgdHJvcGljYWw6IGlzVHJvcGljYWwgPyAwLjggOiAwLjEsXG4gICAgICAgIH0sXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICB2aXNjb3NpdHk6IGlzVHJvcGljYWwgfHwgb2lsVHlwZS5pbmNsdWRlcygnb2xpdmUnKSA/IDAuNyA6IDAuNSxcbiAgICAgICAgICBtb3V0aGZlZWw6IGlzRnJ1aXR5IHx8IGlzTnV0dHkgPyAwLjggOiAwLjUsXG4gICAgICAgICAgcmljaG5lc3M6IGlzRnJ1aXR5IHx8IGlzTnV0dHkgfHwgaXNUcm9waWNhbCA/IDAuNyA6IDAuNCxcbiAgICAgICAgfSxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBFbmhhbmNlIGN1bGluYXJ5IGFwcGxpY2F0aW9ucyBpZiBwcmVzZW50XG4gICAgaWYgKGVuaGFuY2VkT2lsLmN1bGluYXJ5QXBwbGljYXRpb25zKSB7XG4gICAgICAvLyBFbnN1cmUgYWxsIGFwcGxpY2F0aW9uIHR5cGVzIGFyZSBwcm9wZXJseSBzdHJ1Y3R1cmVkXG4gICAgICBPYmplY3QuZW50cmllcyhlbmhhbmNlZE9pbC5jdWxpbmFyeUFwcGxpY2F0aW9ucykuZm9yRWFjaChcbiAgICAgICAgKFthcHBUeXBlLCBhcHBsaWNhdGlvbl0pID0+IHtcbiAgICAgICAgICBpZiAoYXBwbGljYXRpb24gJiYgdHlwZW9mIGFwcGxpY2F0aW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgYXBwRGF0YSA9IGFwcGxpY2F0aW9uIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgICAgICAgZW5oYW5jZWRPaWwuY3VsaW5hcnlBcHBsaWNhdGlvbnNbYXBwVHlwZV0gPSBTdHJpbmcoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAuLi4oYXBwbGljYXRpb24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLFxuICAgICAgICAgICAgICBlbGVtZW50YWxFZmZlY3Q6IGFwcERhdGEuZWxlbWVudGFsRWZmZWN0IHx8IHtcbiAgICAgICAgICAgICAgICBGaXJlOlxuICAgICAgICAgICAgICAgICAgYXBwVHlwZSA9PT0gJ2ZyeWluZycgfHxcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdjb29raW5nJyB8fFxuICAgICAgICAgICAgICAgICAgYXBwVHlwZSA9PT0gJ2hpZ2hIZWF0J1xuICAgICAgICAgICAgICAgICAgICA/IDAuMlxuICAgICAgICAgICAgICAgICAgICA6IDAuMSxcbiAgICAgICAgICAgICAgICBXYXRlcjpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdkcmVzc2luZycgfHwgYXBwVHlwZSA9PT0gJ21hcmluYWRlJyA/IDAuMiA6IDAuMSxcbiAgICAgICAgICAgICAgICBFYXJ0aDpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdiYWtpbmcnIHx8IGFwcFR5cGUgPT09ICdyb2FzdGluZycgPyAwLjIgOiAwLjEsXG4gICAgICAgICAgICAgICAgQWlyOlxuICAgICAgICAgICAgICAgICAgYXBwVHlwZSA9PT0gJ2VtdWxzaW9uJyB8fCBhcHBUeXBlID09PSAnd2hpcHBpbmcnID8gMC4yIDogMC4xLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBhbGNoZW1pY2FsRWZmZWN0OiBhcHBEYXRhLmFsY2hlbWljYWxFZmZlY3QgfHwge1xuICAgICAgICAgICAgICAgIHNwaXJpdDpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdmaW5pc2hpbmcnIHx8IGFwcFR5cGUgPT09ICdpbmZ1c2lvbicgPyAwLjIgOiAwLjEsXG4gICAgICAgICAgICAgICAgZXNzZW5jZTpcbiAgICAgICAgICAgICAgICAgIGFwcFR5cGUgPT09ICdkcmVzc2luZycgfHwgYXBwVHlwZSA9PT0gJ21hcmluYWRlJyA/IDAuMiA6IDAuMSxcbiAgICAgICAgICAgICAgICBtYXR0ZXI6XG4gICAgICAgICAgICAgICAgICBhcHBUeXBlID09PSAnYmFraW5nJyB8fCBhcHBUeXBlID09PSAnY29va2luZycgPyAwLjIgOiAwLjEsXG4gICAgICAgICAgICAgICAgc3Vic3RhbmNlOlxuICAgICAgICAgICAgICAgICAgYXBwVHlwZSA9PT0gJ2ZyeWluZycgfHwgYXBwVHlwZSA9PT0gJ2hpZ2hIZWF0JyA/IDAuMiA6IDAuMSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IGN1bGluYXJ5IGFwcGxpY2F0aW9ucyBiYXNlZCBvbiBzbW9rZSBwb2ludCBhbmQgb2lsIHR5cGVcbiAgICAgIGNvbnN0IHNtb2tlUG9pbnREYXRhID0gKGVuaGFuY2VkT2lsLnNtb2tlUG9pbnQgYXMgdW5rbm93bikgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICBjb25zdCBzbW9rZVBvaW50ID0gTnVtYmVyKHNtb2tlUG9pbnREYXRhLmZhaHJlbmhlaXQpIHx8IDA7XG4gICAgICBjb25zdCBpc0hpZ2hIZWF0ID0gc21va2VQb2ludCA+IDQwMDtcbiAgICAgIGNvbnN0IGlzTWVkaXVtSGVhdCA9IHNtb2tlUG9pbnQgPiAzMjUgJiYgc21va2VQb2ludCA8PSA0MDA7XG4gICAgICBjb25zdCBpc0xvd0hlYXQgPSBzbW9rZVBvaW50IDw9IDMyNTtcbiAgICAgIGNvbnN0IGlzRmluaXNoaW5nID1cbiAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ29saXZlJykgfHxcbiAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3dhbG51dCcpIHx8XG4gICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzZXNhbWUnKSB8fFxuICAgICAgICBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncHVtcGtpbicpO1xuXG4gICAgICBlbmhhbmNlZE9pbC5jdWxpbmFyeUFwcGxpY2F0aW9ucyA9IFN0cmluZyhKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIC4uLihpc0hpZ2hIZWF0XG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGZyeWluZzoge1xuICAgICAgICAgICAgICAgIG5vdGVzOiBbJ0V4Y2VsbGVudCBmb3IgaGlnaC1oZWF0IGNvb2tpbmcnXSxcbiAgICAgICAgICAgICAgICB0ZWNobmlxdWVzOiBbJ0RlZXAgZnJ5aW5nJywgJ1N0aXItZnJ5aW5nJywgJ1NhdXTDqWluZyddLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRhbEVmZmVjdDogeyBGaXJlOiAwLjMsIEVhcnRoOiAwLjEgfSxcbiAgICAgICAgICAgICAgICBhbGNoZW1pY2FsRWZmZWN0OiB7IHN1YnN0YW5jZTogMC4zLCBtYXR0ZXI6IDAuMiB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge30pLFxuICAgICAgICAuLi4oaXNNZWRpdW1IZWF0XG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvb2tpbmc6IHtcbiAgICAgICAgICAgICAgICBub3RlczogWydHb29kIGZvciBtZWRpdW0taGVhdCBjb29raW5nJ10sXG4gICAgICAgICAgICAgICAgdGVjaG5pcXVlczogWydTYXV0w6lpbmcnLCAnUGFuIGZyeWluZycsICdSb2FzdGluZyddLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRhbEVmZmVjdDogeyBGaXJlOiAwLjIsIEVhcnRoOiAwLjIgfSxcbiAgICAgICAgICAgICAgICBhbGNoZW1pY2FsRWZmZWN0OiB7IG1hdHRlcjogMC4zLCBlc3NlbmNlOiAwLjEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHt9KSxcbiAgICAgICAgLi4uKGlzTG93SGVhdCB8fCBpc0ZpbmlzaGluZ1xuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBmaW5pc2hpbmc6IHtcbiAgICAgICAgICAgICAgICBub3RlczogWydCZXN0IHVzZWQgdW5oZWF0ZWQgb3IgbG93IGhlYXQnXSxcbiAgICAgICAgICAgICAgICB0ZWNobmlxdWVzOiBbJ0RyaXp6bGluZycsICdEcmVzc2luZ3MnLCAnRGlwcyddLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRhbEVmZmVjdDogeyBXYXRlcjogMC4zLCBBaXI6IDAuMiB9LFxuICAgICAgICAgICAgICAgIGFsY2hlbWljYWxFZmZlY3Q6IHsgc3Bpcml0OiAwLjMsIGVzc2VuY2U6IDAuMiB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge30pLFxuICAgICAgICAuLi4oZW5oYW5jZWRPaWwuc3ViQ2F0ZWdvcnkgPT09ICdiYWtpbmcnIHx8XG4gICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjb2NvbnV0JylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgYmFraW5nOiB7XG4gICAgICAgICAgICAgICAgbm90ZXM6IFsnU3VpdGFibGUgZm9yIGJha2VkIGdvb2RzJ10sXG4gICAgICAgICAgICAgICAgdGVjaG5pcXVlczogWydDYWtlcycsICdDb29raWVzJywgJ0JyZWFkcyddLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRhbEVmZmVjdDogeyBFYXJ0aDogMC4zLCBGaXJlOiAwLjEgfSxcbiAgICAgICAgICAgICAgICBhbGNoZW1pY2FsRWZmZWN0OiB7IG1hdHRlcjogMC4zLCBzdWJzdGFuY2U6IDAuMSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge30pLFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8vIEFkZCBjb29raW5nIHRyYW5zZm9ybWF0aW9ucyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgaWYgKCFlbmhhbmNlZE9pbC5lbGVtZW50YWxUcmFuc2Zvcm1hdGlvbikge1xuICAgICAgZW5oYW5jZWRPaWwuZWxlbWVudGFsVHJhbnNmb3JtYXRpb24gPSBTdHJpbmcoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB3aGVuSGVhdGVkOiB7XG4gICAgICAgICAgRmlyZTogMC4yLFxuICAgICAgICAgIEFpcjogMC4xLFxuICAgICAgICAgIFdhdGVyOiAtMC4xLFxuICAgICAgICAgIEVhcnRoOiAtMC4wNSxcbiAgICAgICAgfSxcbiAgICAgICAgd2hlbkNvb2xlZDoge1xuICAgICAgICAgIFdhdGVyOiAwLjEsXG4gICAgICAgICAgRWFydGg6IDAuMixcbiAgICAgICAgICBGaXJlOiAtMC4xLFxuICAgICAgICAgIEFpcjogLTAuMDUsXG4gICAgICAgIH0sXG4gICAgICAgIHdoZW5NaXhlZDoge1xuICAgICAgICAgIEFpcjogMC4xNSxcbiAgICAgICAgICBXYXRlcjogMC4xLFxuICAgICAgICAgIEZpcmU6IC0wLjA1LFxuICAgICAgICAgIEVhcnRoOiAtMC4wNSxcbiAgICAgICAgfSxcbiAgICAgICAgd2hlbkluZnVzZWQ6IHtcbiAgICAgICAgICBBaXI6IDAuMixcbiAgICAgICAgICBGaXJlOiAwLjEsXG4gICAgICAgICAgRWFydGg6IC0wLjA1LFxuICAgICAgICAgIFdhdGVyOiAtMC4wNSxcbiAgICAgICAgfSxcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlcm1vZHluYW1pYyBwcm9wZXJ0aWVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBpZiAoIWVuaGFuY2VkT2lsLnRoZXJtb2R5bmFtaWNQcm9wZXJ0aWVzKSB7XG4gICAgICAvLyBCYXNlIG9uIHNtb2tlIHBvaW50IGlmIGF2YWlsYWJsZVxuICAgICAgY29uc3Qgc21va2VQb2ludERhdGEgPSAoZW5oYW5jZWRPaWwuc21va2VQb2ludCBhcyB1bmtub3duKSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICAgIGNvbnN0IHNtb2tlUG9pbnQgPSBOdW1iZXIoc21va2VQb2ludERhdGEuZmFocmVuaGVpdCkgfHwgMzUwO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFNtb2tlUG9pbnQgPSAoc21va2VQb2ludCAtIDMwMCkgLyAyNTA7IC8vIE5vcm1hbGl6ZSBiZXR3ZWVuIDMwMC01NTDCsEZcbiAgICAgIGNvbnN0IGhlYXRWYWx1ZSA9IDAuNSArIG5vcm1hbGl6ZWRTbW9rZVBvaW50ICogMC40OyAvLyBTY2FsZSAwLjUtMC45XG5cbiAgICAgIGVuaGFuY2VkT2lsLnRoZXJtb2R5bmFtaWNQcm9wZXJ0aWVzID0gU3RyaW5nKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaGVhdDogTWF0aC5taW4oTWF0aC5tYXgoaGVhdFZhbHVlLCAwLjMpLCAwLjkpLFxuICAgICAgICBlbnRyb3B5OiAwLjQsXG4gICAgICAgIHJlYWN0aXZpdHk6IDAuNixcbiAgICAgICAgZW5lcmd5OiAwLjcsXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlY29tbWVuZGVkIGNvb2tpbmcgbWV0aG9kcyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgaWYgKCFlbmhhbmNlZE9pbC5yZWNvbW1lbmRlZENvb2tpbmdNZXRob2RzKSB7XG4gICAgICBjb25zdCBzbW9rZVBvaW50RGF0YSA9IChlbmhhbmNlZE9pbC5zbW9rZVBvaW50IGFzIHVua25vd24pIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgY29uc3Qgc21va2VQb2ludCA9IE51bWJlcihzbW9rZVBvaW50RGF0YS5mYWhyZW5oZWl0KSB8fCAwO1xuICAgICAgY29uc3QgbWV0aG9kczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHBvdGVuY3k6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgICBpZiAoc21va2VQb2ludCA+IDQwMCkge1xuICAgICAgICBtZXRob2RzLnB1c2goeyBuYW1lOiAnZGVlcEZyeWluZycsIHBvdGVuY3k6IDAuOSB9KTtcbiAgICAgICAgbWV0aG9kcy5wdXNoKHsgbmFtZTogJ3N0aXJGcnlpbmcnLCBwb3RlbmN5OiAwLjkgfSk7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdzYXV0w6lpbmcnLCBwb3RlbmN5OiAwLjggfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzbW9rZVBvaW50ID4gMzUwKSB7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdyb2FzdGluZycsIHBvdGVuY3k6IDAuNyB9KTtcbiAgICAgICAgbWV0aG9kcy5wdXNoKHsgbmFtZTogJ2Jha2luZycsIHBvdGVuY3k6IDAuNyB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVuaGFuY2VkT2lsLnN1YkNhdGVnb3J5ID09PSAnZmluaXNoaW5nJyB8fCBzbW9rZVBvaW50IDwgMzUwKSB7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdkcmVzc2luZycsIHBvdGVuY3k6IDAuOSB9KTtcbiAgICAgICAgbWV0aG9kcy5wdXNoKHsgbmFtZTogJ21hcmluYXRpbmcnLCBwb3RlbmN5OiAwLjggfSk7XG4gICAgICAgIG1ldGhvZHMucHVzaCh7IG5hbWU6ICdkcml6emxpbmcnLCBwb3RlbmN5OiAxLjAgfSk7XG4gICAgICB9XG5cbiAgICAgIGVuaGFuY2VkT2lsLnJlY29tbWVuZGVkQ29va2luZ01ldGhvZHMgPSBTdHJpbmcoSlNPTi5zdHJpbmdpZnkobWV0aG9kcykpO1xuICAgIH1cblxuICAgIGFjY1trZXldID0gZW5oYW5jZWRPaWw7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG4vKipcbiAqIFBhdHRlcm4gT08tMzogVXRpbGl0eSBJbXBvcnQgQWxpZ25tZW50IC0gU3RhbmRhbG9uZSBleHBvcnRzIGZvciBUUzI2MTQgY29tcGF0aWJpbGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudEVsZW1lbnRhbFN0YXRlKCk6IEVsZW1lbnRhbFByb3BlcnRpZXMge1xuICByZXR1cm4gRWxlbWVudGFsQ2FsY3VsYXRvci5nZXRDdXJyZW50RWxlbWVudGFsU3RhdGUoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRFbGVtZW50YWxQcm9wZXJ0aWVzKCk6IEVsZW1lbnRhbFByb3BlcnRpZXMge1xuICByZXR1cm4gREVGQVVMVF9FTEVNRU5UQUxfUFJPUEVSVElFUztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUxvd2VyY2FzZUZvcm1hdChwcm9wZXJ0aWVzOiB1bmtub3duKTogYW55IHtcbiAgaWYgKCFwcm9wZXJ0aWVzIHx8IHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICB9XG5cbiAgY29uc3QgbG93ZXJjYXNlUHJvcHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgLy8gQ29udmVydCBjYXBpdGFsaXplZCBlbGVtZW50IG5hbWVzIHRvIGxvd2VyY2FzZVxuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgbG93ZXJjYXNlUHJvcHNbbG93ZXJLZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gbG93ZXJjYXNlUHJvcHM7XG59XG5cbi8qKlxuICogRW5zdXJlcyB0aGUgcmV0dXJuZWQgb2JqZWN0IGFsd2F5cyBtYXRjaGVzIHRoZSBJbmdyZWRpZW50TWFwcGluZyBpbnRlcmZhY2UgYXQgcnVudGltZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGZpeEluZ3JlZGllbnRNYXBwaW5nID0gKFxuICBtYXBwaW5nOiBQYXJ0aWFsPEluZ3JlZGllbnRNYXBwaW5nPixcbiAga2V5OiBzdHJpbmdcbik6IEluZ3JlZGllbnRNYXBwaW5nID0+IHtcbiAgLy8gRm9ybWF0IGtleSBpbnRvIGEgcmVhZGFibGUgbmFtZSBpZiBubyBuYW1lIGlzIHByb3ZpZGVkXG4gIGNvbnN0IGZvcm1hdHRlZE5hbWUgPSBrZXlcbiAgICAuc3BsaXQoJ18nKVxuICAgIC5tYXAoKHdvcmQpID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKVxuICAgIC5qb2luKCcgJyk7XG5cbiAgLy8gRW5zdXJlIGFsbCByZXF1aXJlZCBlbGVtZW50cyBleGlzdCBpbiBlbGVtZW50YWxQcm9wZXJ0aWVzXG4gIGNvbnN0IGVsZW1lbnRhbFByb3BlcnRpZXMgPSBtYXBwaW5nLmVsZW1lbnRhbFByb3BlcnRpZXNcbiAgICA/IGVuc3VyZUNvbXBsZXRlRWxlbWVudGFsUHJvcGVydGllcyhtYXBwaW5nLmVsZW1lbnRhbFByb3BlcnRpZXMpXG4gICAgOiBERUZBVUxUX0VMRU1FTlRBTF9QUk9QRVJUSUVTO1xuXG4gIC8vIEFkZCBydW50aW1lIHR5cGUgZ3VhcmQgKG1pbmltYWwsIHNpbmNlIG5vcm1hbGl6YXRpb24gaXMgYWxyZWFkeSBlbmZvcmNlZClcbiAgY29uc3QgcmVxdWlyZWRLZXlzID0gWyduYW1lJywgJ2NhdGVnb3J5JywgJ2VsZW1lbnRhbFByb3BlcnRpZXMnXTtcbiAgZm9yIChjb25zdCBrIG9mIHJlcXVpcmVkS2V5cykge1xuICAgIGlmICghKGsgaW4gbWFwcGluZykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZml4SW5ncmVkaWVudE1hcHBpbmc6IE1pc3NpbmcgcmVxdWlyZWQga2V5ICcke2t9JyBmb3IgaW5ncmVkaWVudCAnJHtrZXl9J2ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEVuc3VyZSBhc3Ryb2xvZ2ljYWxQcm9maWxlIGhhcyBtaW5pbWFsIHN0cnVjdHVyZSBpZiBwcmVzZW50IGJ1dCBlbXB0eVxuICBpZiAobWFwcGluZy5hc3Ryb2xvZ2ljYWxQcm9maWxlICYmIHR5cGVvZiBtYXBwaW5nLmFzdHJvbG9naWNhbFByb2ZpbGUgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKG1hcHBpbmcuYXN0cm9sb2dpY2FsUHJvZmlsZSkubGVuZ3RoID09PSAwKSB7XG4gICAgbWFwcGluZy5hc3Ryb2xvZ2ljYWxQcm9maWxlID0ge1xuICAgICAgcnVsaW5nUGxhbmV0czogW10sXG4gICAgICBmYXZvcmFibGVab2RpYWM6IFtdXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIC4uLm1hcHBpbmcsXG4gICAgbmFtZTogbWFwcGluZy5uYW1lIHx8IGZvcm1hdHRlZE5hbWUsXG4gICAgZWxlbWVudGFsUHJvcGVydGllcyxcbiAgfSBhcyBJbmdyZWRpZW50TWFwcGluZztcbn07XG5cbi8qKlxuICogTm9ybWFsaXplcyBhbGwgaW5ncmVkaWVudCBtYXBwaW5ncyBhbmQgZ3VhcmFudGVlcyB0eXBlIHNhZmV0eSBmb3IgZG93bnN0cmVhbSB1c2FnZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGZpeEluZ3JlZGllbnRNYXBwaW5ncyA9IDxcbiAgVCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFBhcnRpYWw8SW5ncmVkaWVudE1hcHBpbmc+PlxuPihcbiAgaW5ncmVkaWVudHM6IFRcbik6IFJlY29yZDxzdHJpbmcsIEluZ3JlZGllbnRNYXBwaW5nPiA9PiB7XG4gIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgSW5ncmVkaWVudE1hcHBpbmc+ID0ge307XG5cbiAgT2JqZWN0LmVudHJpZXMoaW5ncmVkaWVudHMpLmZvckVhY2goKFtrZXksIG1hcHBpbmddKSA9PiB7XG4gICAgcmVzdWx0W2tleV0gPSBmaXhJbmdyZWRpZW50TWFwcGluZyhtYXBwaW5nLCBrZXkpO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBGaXhlcyBpbmdyZWRpZW50IG1hcHBpbmdzIGJ5IGVuc3VyaW5nIGFsbCByZXF1aXJlZCBwcm9wZXJ0aWVzIGFyZSBwcmVzZW50XG4gKiBAcGFyYW0gaW5ncmVkaWVudHMgUmF3IGluZ3JlZGllbnQgbWFwcGluZ3NcbiAqIEByZXR1cm5zIEZpeGVkIGluZ3JlZGllbnQgbWFwcGluZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpeFJhd0luZ3JlZGllbnRNYXBwaW5ncyhcbiAgaW5ncmVkaWVudHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhpbmdyZWRpZW50cykucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIC8vIFNraXAgbnVsbCBvciB1bmRlZmluZWQgdmFsdWVzXG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGFjYztcblxuICAgIGNvbnN0IHZhbHVlRGF0YSA9IHZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgIC8vIEVuc3VyZSBlbGVtZW50YWwgcHJvcGVydGllcyBhcmUgbm9ybWFsaXplZFxuICAgIGNvbnN0IGVsZW1lbnRhbFByb3BlcnRpZXMgPSBub3JtYWxpemVQcm9wZXJ0aWVzKFxuICAgICAgKHZhbHVlRGF0YS5lbGVtZW50YWxQcm9wZXJ0aWVzIGFzIFBhcnRpYWw8RWxlbWVudGFsUHJvcGVydGllcz4pIHx8IHt9XG4gICAgKTtcblxuICAgIC8vIENyZWF0ZSBhIHN0YW5kYXJkaXplZCBhc3Ryb2xvZ2ljYWwgcHJvZmlsZSBpZiBvbmUgZG9lc24ndCBleGlzdFxuICAgIGNvbnN0IGFzdHJvUHJvZmlsZSA9ICh2YWx1ZURhdGEuYXN0cm9sb2dpY2FsUHJvZmlsZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgfHwge307XG5cbiAgICAvLyBEZXRlcm1pbmUgYmFzZSBlbGVtZW50YWwgYWZmaW5pdHkgaWYgbm90IHByb3ZpZGVkXG4gICAgaWYgKCFhc3Ryb1Byb2ZpbGUuZWxlbWVudGFsQWZmaW5pdHkpIHtcbiAgICAgIGNvbnN0IHN0cm9uZ2VzdEVsZW1lbnQgPSBPYmplY3QuZW50cmllcyhlbGVtZW50YWxQcm9wZXJ0aWVzKVxuICAgICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlbMF1bMF1cbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGFzdHJvUHJvZmlsZS5lbGVtZW50YWxBZmZpbml0eSA9IHtcbiAgICAgICAgYmFzZTogc3Ryb25nZXN0RWxlbWVudCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgYWNjW2tleV0gPSB7XG4gICAgICAuLi4odmFsdWUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLFxuICAgICAgbmFtZTogdmFsdWVEYXRhLm5hbWUgfHwga2V5LnJlcGxhY2UoL18vZywgJyAnKSxcbiAgICAgIGNhdGVnb3J5OiB2YWx1ZURhdGEuY2F0ZWdvcnkgfHwgJ2luZ3JlZGllbnQnLFxuICAgICAgZWxlbWVudGFsUHJvcGVydGllcyxcbiAgICAgIGFzdHJvbG9naWNhbFByb2ZpbGU6IGFzdHJvUHJvZmlsZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG50eXBlIEVsZW1lbnRhbFJlbGF0aW9uc2hpcCA9XG4gIHwgJ2dlbmVyYXRpbmcnXG4gIHwgJ2NvbnRyb2xsaW5nJ1xuICB8ICdzYW1lJ1xuICB8ICdjb250cm9sbGVkLWJ5J1xuICB8ICd3ZWFrZW5lZC1ieSdcbiAgfCAnbmV1dHJhbCc7XG5cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBhZmZpbml0eSBiZXR3ZWVuIHR3byBlbGVtZW50cyBiYXNlZCBvbiB0aGUgRml2ZSBFbGVtZW50cyB0aGVvcnlcbiAqIFJldHVybnMgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEsIHdoZXJlOlxuICogLSAxLjA6IFNhbWUgZWxlbWVudCAocGVyZmVjdCBhZmZpbml0eSlcbiAqIC0gMC44OiBFbGVtZW50IGlzIGdlbmVyYXRlZCBieSAoY2hpbGQgb2YpIHRoZSBvdGhlclxuICogLSAwLjY6IEVsZW1lbnQgZ2VuZXJhdGVzIChwYXJlbnQgb2YpIHRoZSBvdGhlclxuICogLSAwLjQ6IE5ldXRyYWwgcmVsYXRpb25zaGlwXG4gKiAtIDAuMjogRWxlbWVudCBpcyBjb250cm9sbGVkIGJ5IHRoZSBvdGhlclxuICogLSAwLjA6IEVsZW1lbnQgY29udHJvbHMgdGhlIG90aGVyICh3ZWFrZXN0IGFmZmluaXR5KVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRWxlbWVudGFsQWZmaW5pdHkoXG4gIGVsZW1lbnQxOiBFbGVtZW50LFxuICBlbGVtZW50MjogRWxlbWVudFxuKTogbnVtYmVyIHtcbiAgY29uc3QgcmVsYXRpb25zaGlwID0gZ2V0RWxlbWVudGFsUmVsYXRpb25zaGlwKGVsZW1lbnQxLCBlbGVtZW50Mik7XG5cbiAgc3dpdGNoIChyZWxhdGlvbnNoaXApIHtcbiAgICBjYXNlICdzYW1lJzpcbiAgICAgIHJldHVybiAxLjA7XG4gICAgY2FzZSAnZ2VuZXJhdGluZyc6XG4gICAgICByZXR1cm4gMC44O1xuICAgIGNhc2UgJ2NvbnRyb2xsZWQtYnknOlxuICAgICAgcmV0dXJuIDAuNjtcbiAgICBjYXNlICduZXV0cmFsJzpcbiAgICAgIHJldHVybiAwLjQ7XG4gICAgY2FzZSAnd2Vha2VuZWQtYnknOlxuICAgICAgcmV0dXJuIDAuMjtcbiAgICBjYXNlICdjb250cm9sbGluZyc6XG4gICAgICByZXR1cm4gMC4wO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gMC40O1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=