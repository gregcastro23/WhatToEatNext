6c425301e34b62614a8e95b8b7f7c793
"use strict";
/**
 * Any Type Classifier
 * Analyzes each `any` type usage to determine if it's intentional or unintentional
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AnyTypeClassifier = void 0;
const types_1 = require("./types");
class AnyTypeClassifier {
    rules;
    confidenceWeights;
    patternMatchers;
    constructor(rules) {
        this.rules = {
            errorHandlingPatterns: [
                /catch\s*\(\s*\w+\s*:\s*any\s*\)/,
                /error\s*:\s*any/,
                /exception\s*:\s*any/,
                /err\s*:\s*any/,
                /\.catch\s*\(\s*\(\s*\w+\s*:\s*any\s*\)/,
                /try\s*\{[\s\S]*?\}\s*catch\s*\(\s*\w+\s*:\s*any/
            ],
            externalApiPatterns: [
                /response\s*:\s*any/,
                /data\s*:\s*any/,
                /payload\s*:\s*any/,
                /apiResponse\s*:\s*any/,
                /fetch\s*\([\s\S]*?\)\s*\.then\s*\(\s*\w+\s*:\s*any/,
                /axios\.\w+\s*\([\s\S]*?\)\s*:\s*any/,
                /\.json\(\)\s*:\s*any/
            ],
            testMockPatterns: [
                /mock\w*\s*:\s*any/,
                /jest\.fn\(\)\s*as\s*any/,
                /\.mockReturnValue\s*\(\s*\w+\s*as\s*any\s*\)/,
                /\.mockImplementation\s*\(\s*\w+\s*:\s*any/,
                /\.spyOn\s*\([\s\S]*?\)\s*as\s*any/,
                /describe\s*\([\s\S]*?\w+\s*:\s*any/,
                /it\s*\([\s\S]*?\w+\s*:\s*any/,
                /test\s*\([\s\S]*?\w+\s*:\s*any/
            ],
            dynamicConfigPatterns: [
                /config\s*:\s*any/,
                /options\s*:\s*any/,
                /settings\s*:\s*any/,
                /params\s*:\s*any/,
                /props\s*:\s*any/,
                /\.env\s*:\s*any/,
                /process\.env\.\w+\s*as\s*any/
            ],
            legacyCompatibilityPatterns: [
                /legacy\w*\s*:\s*any/,
                /deprecated\w*\s*:\s*any/,
                /old\w*\s*:\s*any/,
                /backward\w*\s*:\s*any/,
                /compat\w*\s*:\s*any/
            ],
            ...rules
        };
        // Initialize confidence weights for different categories
        this.confidenceWeights = new Map([
            [types_1.AnyTypeCategory.ERROR_HANDLING, 0.9],
            [types_1.AnyTypeCategory.EXTERNAL_API, 0.8],
            [types_1.AnyTypeCategory.TEST_MOCK, 0.85],
            [types_1.AnyTypeCategory.DYNAMIC_CONFIG, 0.75],
            [types_1.AnyTypeCategory.LEGACY_COMPATIBILITY, 0.7],
            [types_1.AnyTypeCategory.ARRAY_TYPE, 0.95],
            [types_1.AnyTypeCategory.RECORD_TYPE, 0.8],
            [types_1.AnyTypeCategory.FUNCTION_PARAM, 0.6],
            [types_1.AnyTypeCategory.RETURN_TYPE, 0.65],
            [types_1.AnyTypeCategory.TYPE_ASSERTION, 0.5]
        ]);
        // Initialize pattern matchers with confidence scoring
        this.patternMatchers = new Map([
            [types_1.AnyTypeCategory.ERROR_HANDLING, this.calculateErrorHandlingConfidence.bind(this)],
            [types_1.AnyTypeCategory.EXTERNAL_API, this.calculateExternalApiConfidence.bind(this)],
            [types_1.AnyTypeCategory.TEST_MOCK, this.calculateTestMockConfidence.bind(this)],
            [types_1.AnyTypeCategory.DYNAMIC_CONFIG, this.calculateDynamicConfigConfidence.bind(this)],
            [types_1.AnyTypeCategory.LEGACY_COMPATIBILITY, this.calculateLegacyCompatibilityConfidence.bind(this)],
            [types_1.AnyTypeCategory.ARRAY_TYPE, this.calculateArrayTypeConfidence.bind(this)],
            [types_1.AnyTypeCategory.RECORD_TYPE, this.calculateRecordTypeConfidence.bind(this)]
        ]);
    }
    /**
     * Classify a single any type usage using pattern recognition algorithms and contextual analysis
     */
    async classify(context) {
        try {
            // Perform contextual analysis
            const surroundingContext = this.analyzeSurroundingCodeContext(context);
            const fileTypeInfo = this.analyzeFileType(context.filePath);
            // Check for existing documentation first (highest priority)
            if (context.hasExistingComment && this.hasIntentionalDocumentation(context.existingComment)) {
                return {
                    isIntentional: true,
                    confidence: 0.95,
                    reasoning: `Explicitly documented as intentional${surroundingContext.contextualClues.length > 0 ? ` (${surroundingContext.contextualClues.join(', ')})` : ''}`,
                    requiresDocumentation: false,
                    category: this.categorizeFromComment(context.existingComment)
                };
            }
            // Run pattern recognition algorithms for all categories
            const categoryScores = new Map();
            // Calculate confidence scores for each category with contextual adjustments
            for (const [category, matcher] of this.patternMatchers) {
                let score = matcher(context);
                // Apply contextual adjustments
                score = this.applyContextualAdjustments(score, category, surroundingContext, fileTypeInfo);
                if (score > 0) {
                    categoryScores.set(category, score);
                }
            }
            // Find the highest scoring category
            let bestCategory = null;
            let bestScore = 0;
            for (const [category, score] of categoryScores) {
                if (score > bestScore) {
                    bestScore = score;
                    bestCategory = category;
                }
            }
            // If we found a strong pattern match, use it
            if (bestCategory && bestScore >= 0.7) {
                const isIntentional = this.isIntentionalCategory(bestCategory);
                const contextualReasoning = this.buildContextualReasoning(bestCategory, surroundingContext, fileTypeInfo);
                return {
                    isIntentional,
                    confidence: bestScore,
                    reasoning: contextualReasoning,
                    suggestedReplacement: isIntentional ? undefined : this.getSuggestedReplacement(bestCategory, context),
                    requiresDocumentation: isIntentional,
                    category: bestCategory
                };
            }
            // Domain-specific analysis for moderate confidence cases
            const domainClassification = this.analyzeDomainSpecific(context);
            if (domainClassification) {
                // Enhance domain classification with contextual information
                domainClassification.reasoning += this.getContextualEnhancement(surroundingContext, fileTypeInfo);
                return domainClassification;
            }
            // Function parameter and return type analysis
            const functionAnalysis = this.analyzeFunctionContext(context);
            if (functionAnalysis) {
                functionAnalysis.reasoning += this.getContextualEnhancement(surroundingContext, fileTypeInfo);
                return functionAnalysis;
            }
            // Default classification with comprehensive contextual confidence adjustment
            const defaultConfidence = this.calculateContextualConfidence(context, surroundingContext, fileTypeInfo);
            const contextualReasoning = this.buildDefaultContextualReasoning(defaultConfidence, surroundingContext, fileTypeInfo);
            return {
                isIntentional: defaultConfidence > 0.6,
                confidence: defaultConfidence,
                reasoning: contextualReasoning,
                suggestedReplacement: defaultConfidence <= 0.6 ? this.getDefaultSuggestedReplacement(context) : undefined,
                requiresDocumentation: defaultConfidence > 0.6,
                category: types_1.AnyTypeCategory.TYPE_ASSERTION
            };
        }
        catch (error) {
            throw new types_1.ClassificationError(`Failed to classify any type at ${context.filePath}:${context.lineNumber}`, context, error);
        }
    }
    /**
     * Classify multiple any type usages in batch
     */
    async classifyBatch(contexts) {
        const results = [];
        for (const context of contexts) {
            try {
                const classification = await this.classify(context);
                results.push(classification);
            }
            catch (error) {
                // Log error but continue with other classifications
                console.warn(`Classification failed for ${context.filePath}:${context.lineNumber}`, error);
                // Provide safe fallback classification
                results.push({
                    isIntentional: true,
                    confidence: 0.1,
                    reasoning: 'Classification failed, marked as intentional for safety',
                    requiresDocumentation: true,
                    category: types_1.AnyTypeCategory.LEGACY_COMPATIBILITY
                });
            }
        }
        return results;
    }
    /**
     * Enhanced comment analysis to detect existing documentation
     */
    hasIntentionalDocumentation(comment) {
        if (!comment)
            return false;
        const intentionalKeywords = [
            'intentionally any',
            'deliberately any',
            'explicitly any',
            'must be any',
            'required any',
            'needs to be any',
            'has to be any',
            'should be any',
            'keep as any',
            'leave as any',
            'any is needed',
            'any is required',
            'any type needed',
            'flexible typing',
            'dynamic typing',
            'external library',
            'third party',
            'api response',
            'unknown structure'
        ];
        const lowerComment = comment.toLowerCase();
        // Check for explicit intentional markers
        const hasIntentionalMarker = intentionalKeywords.some(keyword => lowerComment.includes(keyword));
        // Check for ESLint disable comments with explanations
        const hasEslintDisable = lowerComment.includes('eslint-disable') &&
            (lowerComment.includes('no-explicit-any') ||
                lowerComment.includes('@typescript-eslint/no-explicit-any'));
        // Check for TODO/FIXME comments that indicate temporary usage
        const hasTodoFixme = lowerComment.includes('todo') ||
            lowerComment.includes('fixme') ||
            lowerComment.includes('hack');
        return hasIntentionalMarker || (hasEslintDisable && !hasTodoFixme);
    }
    /**
     * Analyze surrounding code context for better understanding
     */
    analyzeSurroundingCodeContext(context) {
        const surroundingCode = this.getCombinedCode(context);
        const lowerCode = surroundingCode.toLowerCase();
        const contextualClues = [];
        // Error handling detection
        const hasErrorHandling = /try\s*\{|catch\s*\(|\.catch\s*\(|throw\s+|error|exception/i.test(surroundingCode);
        if (hasErrorHandling)
            contextualClues.push('error handling context');
        // API calls detection
        const hasApiCalls = /fetch\s*\(|axios\.|http\.|api\.|request\.|response\.|\.json\(\)|\.then\s*\(/i.test(surroundingCode);
        if (hasApiCalls)
            contextualClues.push('API interaction context');
        // Testing code detection
        const hasTestingCode = /describe\s*\(|it\s*\(|test\s*\(|expect\s*\(|mock|spy|jest\.|beforeEach|afterEach/i.test(surroundingCode);
        if (hasTestingCode)
            contextualClues.push('testing context');
        // Type assertions detection
        const hasTypeAssertions = /as\s+any|<any>|\(.*\s+as\s+any\s*\)/i.test(surroundingCode);
        if (hasTypeAssertions)
            contextualClues.push('type assertion context');
        // Complex logic detection (loops, conditions, multiple function calls)
        const hasComplexLogic = (surroundingCode.match(/if\s*\(|for\s*\(|while\s*\(|switch\s*\(/g) || []).length > 2 ||
            (surroundingCode.match(/\.\w+\s*\(/g) || []).length > 3;
        if (hasComplexLogic)
            contextualClues.push('complex logic context');
        return {
            hasErrorHandling,
            hasApiCalls,
            hasTestingCode,
            hasTypeAssertions,
            hasComplexLogic,
            contextualClues
        };
    }
    /**
     * Enhanced file type detection
     */
    analyzeFileType(filePath) {
        const fileName = filePath.toLowerCase();
        const pathSegments = fileName.split('/');
        // Test file detection
        const isTestFile = fileName.includes('.test.') ||
            fileName.includes('.spec.') ||
            fileName.includes('__tests__') ||
            pathSegments.some(segment => segment === 'tests' || segment === '__tests__' || segment === 'test');
        // Config file detection
        const isConfigFile = fileName.includes('config') ||
            fileName.includes('.config.') ||
            fileName.includes('settings') ||
            pathSegments.some(segment => segment === 'config' || segment === 'configs');
        // Type definition file detection
        const isTypeDefinitionFile = fileName.endsWith('.d.ts') ||
            fileName.includes('types.ts') ||
            fileName.includes('interfaces.ts') ||
            pathSegments.some(segment => segment === 'types' || segment === '@types');
        // Service file detection
        const isServiceFile = fileName.includes('service') ||
            fileName.includes('.service.') ||
            pathSegments.some(segment => segment === 'services' || segment === 'api');
        // Component file detection
        const isComponentFile = fileName.includes('component') ||
            fileName.endsWith('.tsx') ||
            pathSegments.some(segment => segment === 'components' || segment === 'ui');
        // Utility file detection
        const isUtilityFile = fileName.includes('util') ||
            fileName.includes('helper') ||
            pathSegments.some(segment => segment === 'utils' || segment === 'helpers' || segment === 'lib');
        // Determine file category
        let fileCategory = 'unknown';
        if (isTestFile)
            fileCategory = 'test';
        else if (isConfigFile)
            fileCategory = 'config';
        else if (isTypeDefinitionFile)
            fileCategory = 'types';
        else if (isServiceFile)
            fileCategory = 'service';
        else if (isComponentFile)
            fileCategory = 'component';
        else if (isUtilityFile)
            fileCategory = 'utility';
        return {
            isTestFile,
            isConfigFile,
            isTypeDefinitionFile,
            isServiceFile,
            isComponentFile,
            isUtilityFile,
            fileCategory
        };
    }
    categorizeFromComment(comment) {
        if (!comment)
            return types_1.AnyTypeCategory.LEGACY_COMPATIBILITY;
        const lowerComment = comment.toLowerCase();
        if (lowerComment.includes('external') || lowerComment.includes('api')) {
            return types_1.AnyTypeCategory.EXTERNAL_API;
        }
        if (lowerComment.includes('error') || lowerComment.includes('catch')) {
            return types_1.AnyTypeCategory.ERROR_HANDLING;
        }
        if (lowerComment.includes('test') || lowerComment.includes('mock')) {
            return types_1.AnyTypeCategory.TEST_MOCK;
        }
        if (lowerComment.includes('config') || lowerComment.includes('dynamic')) {
            return types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        return types_1.AnyTypeCategory.LEGACY_COMPATIBILITY;
    }
    matchesErrorHandling(context) {
        const codeWithSurrounding = [
            ...context.surroundingLines,
            context.codeSnippet
        ].join('\n');
        return this.rules.errorHandlingPatterns.some(pattern => pattern.test(codeWithSurrounding));
    }
    matchesExternalApi(context) {
        const codeWithSurrounding = [
            ...context.surroundingLines,
            context.codeSnippet
        ].join('\n');
        return this.rules.externalApiPatterns.some(pattern => pattern.test(codeWithSurrounding));
    }
    matchesTestMock(context) {
        const codeWithSurrounding = [
            ...context.surroundingLines,
            context.codeSnippet
        ].join('\n');
        return this.rules.testMockPatterns.some(pattern => pattern.test(codeWithSurrounding));
    }
    isSimpleArrayType(context) {
        // Match patterns like: any[], Array<any>
        const arrayPatterns = [
            /:\s*any\[\]/,
            /:\s*Array<any>/,
            /=\s*\[\]\s*as\s*any\[\]/
        ];
        return arrayPatterns.some(pattern => pattern.test(context.codeSnippet));
    }
    isRecordType(context) {
        // Match patterns like: Record<string, any>, Record<number, any>
        const recordPatterns = [
            /:\s*Record<\s*string\s*,\s*any\s*>/,
            /:\s*Record<\s*number\s*,\s*any\s*>/,
            /:\s*\{\s*\[key:\s*string\]\s*:\s*any\s*\}/,
            /\{\s*\[key:\s*string\]\s*:\s*any\s*\}/,
            /Record<\w+,\s*any\[\]>/ // Record with any arrays
        ];
        return recordPatterns.some(pattern => pattern.test(context.codeSnippet));
    }
    suggestRecordReplacement(context) {
        if (context.codeSnippet.includes('Record<string, any>')) {
            return 'Record<string, unknown>';
        }
        if (context.codeSnippet.includes('Record<number, any>')) {
            return 'Record<number, unknown>';
        }
        if (context.codeSnippet.includes('[key: string]: any')) {
            return '[key: string]: unknown';
        }
        return 'unknown';
    }
    analyzeDomainSpecific(context) {
        const domain = context.domainContext.domain;
        switch (domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
                return this.analyzeAstrologicalDomain(context);
            case types_1.CodeDomain.RECIPE:
                return this.analyzeRecipeDomain(context);
            case types_1.CodeDomain.CAMPAIGN:
                return this.analyzeCampaignDomain(context);
            case types_1.CodeDomain.SERVICE:
                return this.analyzeServiceLayerDomain(context);
            case types_1.CodeDomain.INTELLIGENCE:
                return this.analyzeIntelligenceDomain(context);
            default:
                return null;
        }
    }
    analyzeServiceLayerDomain(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        const lowerCode = codeWithSurrounding.toLowerCase();
        // Service interface patterns
        const serviceInterfacePatterns = [
            /service\s*interface/i,
            /api\s*service/i,
            /data\s*service/i,
            /business\s*service/i,
            /application\s*service/i,
            /domain\s*service/i
        ];
        // External service integration patterns
        const externalServicePatterns = [
            /external\s*service/i,
            /third\s*party\s*service/i,
            /remote\s*service/i,
            /web\s*service/i,
            /microservice/i,
            /rest\s*api/i,
            /graphql/i,
            /grpc/i
        ];
        // Service configuration patterns
        const serviceConfigPatterns = [
            /service\s*config/i,
            /endpoint\s*config/i,
            /connection\s*config/i,
            /client\s*config/i,
            /service\s*options/i,
            /service\s*settings/i
        ];
        // Data transformation patterns
        const dataTransformPatterns = [
            /data\s*transformer/i,
            /response\s*mapper/i,
            /dto\s*mapper/i,
            /entity\s*mapper/i,
            /serializer/i,
            /deserializer/i
        ];
        let confidence = 0;
        let reasoning = '';
        let suggestedReplacement = '';
        let isIntentional = false;
        let category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        // Check for external service integration (intentional)
        if (externalServicePatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.85;
            reasoning = 'External service integration requires flexible typing for unknown response structures';
            isIntentional = true;
            category = types_1.AnyTypeCategory.EXTERNAL_API;
        }
        // Check for service configuration (intentional)
        else if (serviceConfigPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.8;
            reasoning = 'Service configuration requires flexible typing for dynamic setup options';
            isIntentional = true;
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // Check for data transformation (can be more specific)
        else if (dataTransformPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.75;
            reasoning = 'Data transformation can use specific interface types for better type safety';
            suggestedReplacement = 'Record<string, unknown>';
            isIntentional = false;
            category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        }
        // Check for service interfaces (can be more specific)
        else if (serviceInterfacePatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.7;
            reasoning = 'Service interfaces can use specific interface types for better contract definition';
            suggestedReplacement = 'ServiceInterface';
            isIntentional = false;
            category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        }
        // General service context
        else if (lowerCode.includes('service') && (lowerCode.includes('data') || lowerCode.includes('response'))) {
            confidence = 0.65;
            reasoning = 'Service layer data handling can likely use more specific types';
            suggestedReplacement = 'unknown';
            isIntentional = false;
            category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        }
        if (confidence > 0) {
            return {
                isIntentional,
                confidence,
                reasoning,
                suggestedReplacement: isIntentional ? undefined : suggestedReplacement,
                requiresDocumentation: isIntentional,
                category
            };
        }
        return null;
    }
    analyzeIntelligenceDomain(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        const lowerCode = codeWithSurrounding.toLowerCase();
        // Intelligence system patterns
        const intelligencePatterns = [
            /intelligence\s*system/i,
            /enterprise\s*intelligence/i,
            /campaign\s*intelligence/i,
            /analytics\s*engine/i,
            /pattern\s*recognition/i,
            /machine\s*learning/i,
            /ai\s*system/i,
            /predictive\s*analytics/i
        ];
        // Dynamic analysis patterns
        const dynamicAnalysisPatterns = [
            /dynamic\s*analysis/i,
            /runtime\s*analysis/i,
            /adaptive\s*algorithm/i,
            /learning\s*algorithm/i,
            /evolving\s*pattern/i,
            /self\s*adjusting/i
        ];
        let confidence = 0;
        let reasoning = '';
        let category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        // Check for intelligence systems (high confidence for intentional)
        if (intelligencePatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.9;
            reasoning = 'Intelligence systems require flexible typing for evolving analytical patterns';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // Check for dynamic analysis
        else if (dynamicAnalysisPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.85;
            reasoning = 'Dynamic analysis systems require flexible typing for adaptive behavior';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // General intelligence context
        else if (lowerCode.includes('intelligence') || lowerCode.includes('analytics')) {
            confidence = 0.75;
            reasoning = 'Intelligence domain requires flexible typing for complex analytical data structures';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        if (confidence > 0) {
            return {
                isIntentional: true,
                confidence,
                reasoning,
                requiresDocumentation: true,
                category
            };
        }
        return null;
    }
    analyzeAstrologicalDomain(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        const lowerCode = codeWithSurrounding.toLowerCase();
        // Planetary position recognition patterns
        const planetaryPatterns = [
            /planetary\s*position/i,
            /planet\w*\s*data/i,
            /astro\w*\s*calculation/i,
            /ephemeris/i,
            /zodiac\s*sign/i,
            /celestial\s*body/i,
            /astronomical\s*data/i,
            /transit\s*date/i,
            /lunar\s*phase/i,
            /solar\s*position/i
        ];
        // External astronomy API patterns
        const astronomyApiPatterns = [
            /nasa\s*jpl/i,
            /horizons\s*api/i,
            /swiss\s*ephemeris/i,
            /astronomy\s*engine/i,
            /timeanddate\s*api/i,
            /astronomical\s*api/i,
            /getReliablePlanetaryPositions/i,
            /planetaryConsistencyCheck/i
        ];
        // Astrological calculation patterns
        const calculationPatterns = [
            /elemental\s*properties/i,
            /compatibility\s*score/i,
            /astrological\s*influence/i,
            /planetary\s*correspondence/i,
            /seasonal\s*calculation/i,
            /retrograde\s*motion/i,
            /aspect\s*calculation/i,
            /house\s*position/i
        ];
        let confidence = 0;
        let reasoning = '';
        let category = types_1.AnyTypeCategory.EXTERNAL_API;
        // Check for planetary position data (highest confidence)
        if (planetaryPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.9;
            reasoning = 'Astrological planetary position data requires flexible typing for external API responses';
            category = types_1.AnyTypeCategory.EXTERNAL_API;
        }
        // Check for astronomy API integration
        else if (astronomyApiPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.85;
            reasoning = 'Astronomy API integration requires flexible typing for varying response formats';
            category = types_1.AnyTypeCategory.EXTERNAL_API;
        }
        // Check for astrological calculations
        else if (calculationPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.8;
            reasoning = 'Astrological calculations require flexible typing for dynamic elemental properties';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // General astrological context
        else if (lowerCode.includes('astro') || lowerCode.includes('planetary') || lowerCode.includes('zodiac')) {
            confidence = 0.75;
            reasoning = 'Astrological domain code often requires flexible typing for cosmic data structures';
            category = types_1.AnyTypeCategory.LEGACY_COMPATIBILITY;
        }
        if (confidence > 0) {
            return {
                isIntentional: true,
                confidence,
                reasoning,
                requiresDocumentation: true,
                category
            };
        }
        return null;
    }
    analyzeRecipeDomain(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        const lowerCode = codeWithSurrounding.toLowerCase();
        // Food-related type suggestion patterns
        const ingredientPatterns = [
            /ingredient\s*data/i,
            /ingredient\s*properties/i,
            /elemental\s*ingredient/i,
            /culinary\s*ingredient/i,
            /food\s*item/i,
            /nutritional\s*data/i,
            /spoonacular\s*api/i,
            /usda\s*food/i
        ];
        const recipePatterns = [
            /recipe\s*data/i,
            /recipe\s*information/i,
            /cooking\s*method/i,
            /culinary\s*recipe/i,
            /meal\s*plan/i,
            /food\s*recommendation/i,
            /alchemical\s*recipe/i,
            /elemental\s*recipe/i
        ];
        const cuisinePatterns = [
            /cuisine\s*data/i,
            /cultural\s*food/i,
            /ethnic\s*cuisine/i,
            /traditional\s*recipe/i,
            /regional\s*food/i
        ];
        // External food API patterns
        const foodApiPatterns = [
            /spoonacular/i,
            /food\s*api/i,
            /nutrition\s*api/i,
            /recipe\s*api/i,
            /usda\s*api/i,
            /food\s*database/i
        ];
        let confidence = 0;
        let reasoning = '';
        let suggestedReplacement = '';
        let isIntentional = false;
        let category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        // Check for external food API integration (intentional)
        if (foodApiPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.85;
            reasoning = 'Food API integration requires flexible typing for varying response structures';
            isIntentional = true;
            category = types_1.AnyTypeCategory.EXTERNAL_API;
        }
        // Check for ingredient data (can be typed more specifically)
        else if (ingredientPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.8;
            reasoning = 'Ingredient data can use specific Ingredient interface type';
            suggestedReplacement = 'Ingredient';
            isIntentional = false;
            category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        }
        // Check for recipe data (can be typed more specifically)
        else if (recipePatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.8;
            reasoning = 'Recipe data can use specific Recipe interface type';
            suggestedReplacement = 'Recipe';
            isIntentional = false;
            category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        }
        // Check for cuisine data (can be typed more specifically)
        else if (cuisinePatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.75;
            reasoning = 'Cuisine data can use specific Cuisine interface type';
            suggestedReplacement = 'Cuisine';
            isIntentional = false;
            category = types_1.AnyTypeCategory.TYPE_ASSERTION;
        }
        // General food-related context
        else if (lowerCode.includes('ingredient') || lowerCode.includes('recipe') || lowerCode.includes('food')) {
            // Check if it's likely an API response or configuration
            if (lowerCode.includes('response') || lowerCode.includes('api') || lowerCode.includes('config')) {
                confidence = 0.7;
                reasoning = 'Food-related API response or configuration may require flexible typing';
                isIntentional = true;
                category = types_1.AnyTypeCategory.EXTERNAL_API;
            }
            else {
                confidence = 0.7;
                reasoning = 'Food-related data can likely use more specific types (Ingredient, Recipe, etc.)';
                suggestedReplacement = 'Ingredient | Recipe | Cuisine';
                isIntentional = false;
                category = types_1.AnyTypeCategory.TYPE_ASSERTION;
            }
        }
        if (confidence > 0) {
            return {
                isIntentional,
                confidence,
                reasoning,
                suggestedReplacement: isIntentional ? undefined : suggestedReplacement,
                requiresDocumentation: isIntentional,
                category
            };
        }
        return null;
    }
    analyzeCampaignDomain(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        const lowerCode = codeWithSurrounding.toLowerCase();
        // Campaign system dynamic configuration patterns
        const campaignConfigPatterns = [
            /campaign\s*config/i,
            /campaign\s*parameters/i,
            /campaign\s*settings/i,
            /dynamic\s*config/i,
            /flexible\s*config/i,
            /runtime\s*config/i,
            /adaptive\s*config/i
        ];
        // Campaign metrics and intelligence patterns
        const metricsPatterns = [
            /campaign\s*metrics/i,
            /progress\s*metrics/i,
            /quality\s*metrics/i,
            /performance\s*metrics/i,
            /intelligence\s*data/i,
            /analytics\s*data/i,
            /campaign\s*intelligence/i,
            /enterprise\s*intelligence/i
        ];
        // Campaign execution and automation patterns
        const executionPatterns = [
            /campaign\s*execution/i,
            /batch\s*processing/i,
            /automation\s*script/i,
            /campaign\s*phase/i,
            /safety\s*protocol/i,
            /rollback\s*mechanism/i,
            /validation\s*framework/i
        ];
        // Campaign tool integration patterns
        const toolIntegrationPatterns = [
            /typescript\s*error/i,
            /linting\s*warning/i,
            /eslint\s*result/i,
            /build\s*validation/i,
            /compilation\s*result/i,
            /error\s*analysis/i,
            /fix\s*strategy/i
        ];
        let confidence = 0;
        let reasoning = '';
        let category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        // Check for campaign configuration (highest confidence for intentional)
        if (campaignConfigPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.9;
            reasoning = 'Campaign system configuration requires flexible typing for dynamic behavior adaptation';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // Check for metrics and intelligence data
        else if (metricsPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.85;
            reasoning = 'Campaign metrics and intelligence data require flexible typing for evolving analytics';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // Check for campaign execution context
        else if (executionPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.8;
            reasoning = 'Campaign execution system requires flexible typing for diverse tool integration';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        // Check for tool integration
        else if (toolIntegrationPatterns.some(pattern => pattern.test(codeWithSurrounding))) {
            confidence = 0.75;
            reasoning = 'Campaign tool integration requires flexible typing for varying tool outputs';
            category = types_1.AnyTypeCategory.EXTERNAL_API;
        }
        // General campaign context
        else if (lowerCode.includes('campaign') || lowerCode.includes('intelligence') || lowerCode.includes('automation')) {
            confidence = 0.7;
            reasoning = 'Campaign system context often requires flexible typing for dynamic operations';
            category = types_1.AnyTypeCategory.DYNAMIC_CONFIG;
        }
        if (confidence > 0) {
            return {
                isIntentional: true,
                confidence,
                reasoning,
                requiresDocumentation: true,
                category
            };
        }
        return null;
    }
    // Confidence calculation methods for pattern recognition algorithms
    calculateErrorHandlingConfidence(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        let confidence = 0;
        let matchCount = 0;
        for (const pattern of this.rules.errorHandlingPatterns) {
            if (pattern.test(codeWithSurrounding)) {
                matchCount++;
                confidence += 0.3; // Each pattern match adds confidence
            }
        }
        // Boost confidence for catch blocks and error variables
        if (codeWithSurrounding.includes('catch') && codeWithSurrounding.includes('any')) {
            confidence += 0.4;
        }
        // Additional context clues
        if (codeWithSurrounding.toLowerCase().includes('error') ||
            codeWithSurrounding.toLowerCase().includes('exception')) {
            confidence += 0.2;
        }
        return Math.min(confidence, 0.95); // Cap at 95%
    }
    calculateExternalApiConfidence(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        let confidence = 0;
        for (const pattern of this.rules.externalApiPatterns) {
            if (pattern.test(codeWithSurrounding)) {
                confidence += 0.25;
            }
        }
        // API-related keywords boost confidence
        const apiKeywords = ['fetch', 'axios', 'api', 'response', 'request', 'http', 'json'];
        const foundKeywords = apiKeywords.filter(keyword => codeWithSurrounding.toLowerCase().includes(keyword));
        confidence += foundKeywords.length * 0.1;
        return Math.min(confidence, 0.9);
    }
    calculateTestMockConfidence(context) {
        if (!context.isInTestFile)
            return 0;
        const codeWithSurrounding = this.getCombinedCode(context);
        let confidence = 0;
        for (const pattern of this.rules.testMockPatterns) {
            if (pattern.test(codeWithSurrounding)) {
                confidence += 0.3;
            }
        }
        // Test-specific keywords
        const testKeywords = ['mock', 'spy', 'jest', 'describe', 'it', 'test', 'expect'];
        const foundKeywords = testKeywords.filter(keyword => codeWithSurrounding.toLowerCase().includes(keyword));
        confidence += foundKeywords.length * 0.1;
        return Math.min(confidence, 0.9);
    }
    calculateDynamicConfigConfidence(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        let confidence = 0;
        for (const pattern of this.rules.dynamicConfigPatterns) {
            if (pattern.test(codeWithSurrounding)) {
                confidence += 0.25;
            }
        }
        // Configuration-related context
        const configKeywords = ['config', 'options', 'settings', 'params', 'env'];
        const foundKeywords = configKeywords.filter(keyword => codeWithSurrounding.toLowerCase().includes(keyword));
        confidence += foundKeywords.length * 0.15;
        return Math.min(confidence, 0.85);
    }
    calculateLegacyCompatibilityConfidence(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        let confidence = 0;
        for (const pattern of this.rules.legacyCompatibilityPatterns) {
            if (pattern.test(codeWithSurrounding)) {
                confidence += 0.3;
            }
        }
        // Legacy-related keywords
        const legacyKeywords = ['legacy', 'deprecated', 'old', 'backward', 'compat'];
        const foundKeywords = legacyKeywords.filter(keyword => codeWithSurrounding.toLowerCase().includes(keyword));
        confidence += foundKeywords.length * 0.2;
        return Math.min(confidence, 0.8);
    }
    calculateArrayTypeConfidence(context) {
        const arrayPatterns = [
            /:\s*any\[\]/,
            /:\s*Array<any>/,
            /=\s*\[\]\s*as\s*any\[\]/,
            /new\s+Array\s*\(\s*\)\s*as\s*any\[\]/
        ];
        for (const pattern of arrayPatterns) {
            if (pattern.test(context.codeSnippet)) {
                return 0.95; // Very high confidence for array type replacement
            }
        }
        return 0;
    }
    calculateRecordTypeConfidence(context) {
        const recordPatterns = [
            /:\s*Record<\s*string\s*,\s*any\s*>/,
            /:\s*Record<\s*number\s*,\s*any\s*>/,
            /:\s*\{\s*\[key:\s*string\]\s*:\s*any\s*\}/,
            /\{\s*\[key:\s*string\]\s*:\s*any\s*\}/
        ];
        for (const pattern of recordPatterns) {
            if (pattern.test(context.codeSnippet)) {
                return 0.85; // High confidence for Record type replacement
            }
        }
        return 0;
    }
    // Helper methods for classification logic
    getCombinedCode(context) {
        return [...context.surroundingLines, context.codeSnippet].join('\n');
    }
    isIntentionalCategory(category) {
        const intentionalCategories = [
            types_1.AnyTypeCategory.ERROR_HANDLING,
            types_1.AnyTypeCategory.EXTERNAL_API,
            types_1.AnyTypeCategory.TEST_MOCK,
            types_1.AnyTypeCategory.DYNAMIC_CONFIG,
            types_1.AnyTypeCategory.LEGACY_COMPATIBILITY
        ];
        return intentionalCategories.includes(category);
    }
    getReasoningForCategory(category, context) {
        const reasoningMap = {
            [types_1.AnyTypeCategory.ERROR_HANDLING]: 'Used in error handling context - intentional for exception flexibility',
            [types_1.AnyTypeCategory.EXTERNAL_API]: 'Used for external API response - intentional for unknown response structure',
            [types_1.AnyTypeCategory.TEST_MOCK]: 'Used in test mocking - intentional for test flexibility',
            [types_1.AnyTypeCategory.DYNAMIC_CONFIG]: 'Used in dynamic configuration - intentional for flexible config structure',
            [types_1.AnyTypeCategory.LEGACY_COMPATIBILITY]: 'Used for legacy compatibility - intentional for backward compatibility',
            [types_1.AnyTypeCategory.ARRAY_TYPE]: 'Simple array type - can be safely replaced with unknown[]',
            [types_1.AnyTypeCategory.RECORD_TYPE]: 'Record type - can be safely replaced with unknown value type',
            [types_1.AnyTypeCategory.FUNCTION_PARAM]: 'Function parameter - may be replaceable with more specific type',
            [types_1.AnyTypeCategory.RETURN_TYPE]: 'Function return type - may be replaceable with inferred type',
            [types_1.AnyTypeCategory.TYPE_ASSERTION]: 'Type assertion - may be replaceable with more specific type'
        };
        return reasoningMap[category] || 'Pattern-based classification';
    }
    getSuggestedReplacement(category, context) {
        switch (category) {
            case types_1.AnyTypeCategory.ARRAY_TYPE:
                return 'unknown[]';
            case types_1.AnyTypeCategory.RECORD_TYPE:
                return this.suggestRecordReplacement(context);
            case types_1.AnyTypeCategory.FUNCTION_PARAM:
                return this.suggestFunctionParamReplacement(context);
            case types_1.AnyTypeCategory.RETURN_TYPE:
                return this.suggestReturnTypeReplacement(context);
            default:
                return 'unknown';
        }
    }
    analyzeFunctionContext(context) {
        const codeWithSurrounding = this.getCombinedCode(context);
        // Function parameter analysis
        if (/function\s*\w*\s*\([^)]*:\s*any/.test(codeWithSurrounding) ||
            /\(\s*\w+\s*:\s*any\s*\)\s*=>/.test(codeWithSurrounding)) {
            return {
                isIntentional: false,
                confidence: 0.6,
                reasoning: 'Function parameter can likely be typed more specifically',
                suggestedReplacement: this.suggestFunctionParamReplacement(context),
                requiresDocumentation: false,
                category: types_1.AnyTypeCategory.FUNCTION_PARAM
            };
        }
        // Return type analysis
        if (/:\s*any\s*\{/.test(context.codeSnippet) ||
            /=>\s*any/.test(context.codeSnippet)) {
            return {
                isIntentional: false,
                confidence: 0.65,
                reasoning: 'Function return type can likely be inferred or typed more specifically',
                suggestedReplacement: this.suggestReturnTypeReplacement(context),
                requiresDocumentation: false,
                category: types_1.AnyTypeCategory.RETURN_TYPE
            };
        }
        return null;
    }
    suggestFunctionParamReplacement(context) {
        // Analyze parameter usage to suggest better types
        if (context.codeSnippet.includes('string') || context.codeSnippet.includes('String')) {
            return 'string';
        }
        if (context.codeSnippet.includes('number') || context.codeSnippet.includes('Number')) {
            return 'number';
        }
        if (context.codeSnippet.includes('boolean') || context.codeSnippet.includes('Boolean')) {
            return 'boolean';
        }
        return 'unknown';
    }
    suggestReturnTypeReplacement(context) {
        // Analyze return statements to suggest better types
        const codeWithSurrounding = this.getCombinedCode(context);
        if (/return\s+\d+/.test(codeWithSurrounding)) {
            return 'number';
        }
        if (/return\s+['"`]/.test(codeWithSurrounding)) {
            return 'string';
        }
        if (/return\s+(true|false)/.test(codeWithSurrounding)) {
            return 'boolean';
        }
        if (/return\s+\[/.test(codeWithSurrounding)) {
            return 'unknown[]';
        }
        if (/return\s+\{/.test(codeWithSurrounding)) {
            return 'Record<string, unknown>';
        }
        return 'unknown';
    }
    calculateDefaultConfidence(context) {
        let confidence = 0.5; // Base confidence for unmatched patterns
        // Adjust based on context clues
        if (context.isInTestFile) {
            confidence += 0.1; // Slightly more likely to be intentional in tests
        }
        // Check for any comments that might indicate intentionality
        if (context.hasExistingComment) {
            confidence += 0.1;
        }
        // Domain-specific adjustments
        switch (context.domainContext.domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
            case types_1.CodeDomain.CAMPAIGN:
                confidence += 0.1; // These domains often need flexible typing
                break;
            case types_1.CodeDomain.UTILITY:
            case types_1.CodeDomain.COMPONENT:
                confidence -= 0.1; // These domains can usually be more specific
                break;
        }
        return Math.max(0.3, Math.min(0.7, confidence));
    }
    getDefaultReasoning(context, confidence) {
        if (confidence > 0.6) {
            return 'Moderate confidence - may be intentional but lacks clear documentation';
        }
        else if (confidence > 0.4) {
            return 'Low-moderate confidence - likely unintentional but requires careful review';
        }
        else {
            return 'Low confidence - appears unintentional and suitable for replacement';
        }
    }
    getDefaultSuggestedReplacement(context) {
        // Simple heuristics for default replacement
        if (context.codeSnippet.includes('[]')) {
            return 'unknown[]';
        }
        if (context.codeSnippet.includes('Record') || context.codeSnippet.includes('{')) {
            return 'Record<string, unknown>';
        }
        return 'unknown';
    }
    // Contextual analysis helper methods
    applyContextualAdjustments(baseScore, category, surroundingContext, fileTypeInfo) {
        let adjustedScore = baseScore;
        // File type adjustments
        if (fileTypeInfo.isTestFile && category === types_1.AnyTypeCategory.TEST_MOCK) {
            adjustedScore *= 1.2; // Boost test mock confidence in test files
        }
        if (fileTypeInfo.isConfigFile && category === types_1.AnyTypeCategory.DYNAMIC_CONFIG) {
            adjustedScore *= 1.3; // Boost config confidence in config files
        }
        if (fileTypeInfo.isTypeDefinitionFile) {
            adjustedScore *= 0.8; // Reduce confidence in type definition files (should be more specific)
        }
        // Contextual adjustments
        if (surroundingContext.hasErrorHandling && category === types_1.AnyTypeCategory.ERROR_HANDLING) {
            adjustedScore *= 1.2;
        }
        if (surroundingContext.hasApiCalls && category === types_1.AnyTypeCategory.EXTERNAL_API) {
            adjustedScore *= 1.15;
        }
        if (surroundingContext.hasTestingCode && category === types_1.AnyTypeCategory.TEST_MOCK) {
            adjustedScore *= 1.1;
        }
        // Penalize type assertions in complex logic (likely can be more specific)
        if (surroundingContext.hasComplexLogic && category === types_1.AnyTypeCategory.TYPE_ASSERTION) {
            adjustedScore *= 0.7;
        }
        return Math.min(adjustedScore, 1.0);
    }
    buildContextualReasoning(category, surroundingContext, fileTypeInfo) {
        const baseReasoning = this.getReasoningForCategory(category, {});
        const contextualInfo = [];
        // Add file type context
        if (fileTypeInfo.fileCategory !== 'unknown') {
            contextualInfo.push(`in ${fileTypeInfo.fileCategory} file`);
        }
        // Add surrounding context
        if (surroundingContext.contextualClues.length > 0) {
            contextualInfo.push(surroundingContext.contextualClues.join(', '));
        }
        return contextualInfo.length > 0
            ? `${baseReasoning} (${contextualInfo.join(', ')})`
            : baseReasoning;
    }
    getContextualEnhancement(surroundingContext, fileTypeInfo) {
        const enhancements = [];
        if (fileTypeInfo.fileCategory !== 'unknown') {
            enhancements.push(`in ${fileTypeInfo.fileCategory} file`);
        }
        if (surroundingContext.contextualClues.length > 0) {
            enhancements.push(surroundingContext.contextualClues.join(', '));
        }
        return enhancements.length > 0 ? ` (${enhancements.join(', ')})` : '';
    }
    calculateContextualConfidence(context, surroundingContext, fileTypeInfo) {
        let confidence = 0.5; // Base confidence
        // File type adjustments
        if (fileTypeInfo.isTestFile) {
            confidence += 0.1; // Tests often need flexible typing
        }
        if (fileTypeInfo.isConfigFile) {
            confidence += 0.15; // Config files often need dynamic typing
        }
        if (fileTypeInfo.isTypeDefinitionFile) {
            confidence -= 0.2; // Type files should be more specific
        }
        if (fileTypeInfo.isUtilityFile || fileTypeInfo.isComponentFile) {
            confidence -= 0.1; // These can usually be more specific
        }
        // Contextual adjustments
        if (surroundingContext.hasErrorHandling) {
            confidence += 0.15;
        }
        if (surroundingContext.hasApiCalls) {
            confidence += 0.1;
        }
        if (surroundingContext.hasTestingCode) {
            confidence += 0.1;
        }
        if (surroundingContext.hasTypeAssertions) {
            confidence -= 0.1; // Multiple type assertions suggest the code can be more specific
        }
        if (surroundingContext.hasComplexLogic) {
            confidence -= 0.05; // Complex logic can usually be typed more specifically
        }
        // Comment analysis
        if (context.hasExistingComment) {
            confidence += 0.1;
        }
        // Domain-specific adjustments
        switch (context.domainContext.domain) {
            case types_1.CodeDomain.ASTROLOGICAL:
            case types_1.CodeDomain.CAMPAIGN:
                confidence += 0.1; // These domains often need flexible typing
                break;
            case types_1.CodeDomain.UTILITY:
            case types_1.CodeDomain.COMPONENT:
                confidence -= 0.1; // These domains can usually be more specific
                break;
        }
        return Math.max(0.2, Math.min(0.9, confidence));
    }
    buildDefaultContextualReasoning(confidence, surroundingContext, fileTypeInfo) {
        const contextualInfo = [];
        if (fileTypeInfo.fileCategory !== 'unknown') {
            contextualInfo.push(`in ${fileTypeInfo.fileCategory} file`);
        }
        if (surroundingContext.contextualClues.length > 0) {
            contextualInfo.push(surroundingContext.contextualClues.join(', '));
        }
        let baseReasoning;
        if (confidence > 0.7) {
            baseReasoning = 'High contextual confidence - likely intentional but needs documentation';
        }
        else if (confidence > 0.6) {
            baseReasoning = 'Moderate contextual confidence - may be intentional, requires review';
        }
        else if (confidence > 0.4) {
            baseReasoning = 'Low-moderate contextual confidence - likely unintentional but needs careful review';
        }
        else {
            baseReasoning = 'Low contextual confidence - appears unintentional and suitable for replacement';
        }
        return contextualInfo.length > 0
            ? `${baseReasoning} (${contextualInfo.join(', ')})`
            : baseReasoning;
    }
}
exports.AnyTypeClassifier = AnyTypeClassifier;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L2JhY2t1cHMvZmlyc3Qtd2F2ZS0yMDI1LTA4LTExVDA1LTE5LTI2LTgxM1ovc3JjL3NlcnZpY2VzL2NhbXBhaWduL3VuaW50ZW50aW9uYWwtYW55LWVsaW1pbmF0aW9uL0FueVR5cGVDbGFzc2lmaWVyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQUVILG1DQU9pQjtBQUVqQixNQUFhLGlCQUFpQjtJQUNwQixLQUFLLENBQXNCO0lBQzNCLGlCQUFpQixDQUErQjtJQUNoRCxlQUFlLENBQW1FO0lBRTFGLFlBQVksS0FBb0M7UUFDOUMsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNYLHFCQUFxQixFQUFFO2dCQUNyQixpQ0FBaUM7Z0JBQ2pDLGlCQUFpQjtnQkFDakIscUJBQXFCO2dCQUNyQixlQUFlO2dCQUNmLHdDQUF3QztnQkFDeEMsaURBQWlEO2FBQ2xEO1lBQ0QsbUJBQW1CLEVBQUU7Z0JBQ25CLG9CQUFvQjtnQkFDcEIsZ0JBQWdCO2dCQUNoQixtQkFBbUI7Z0JBQ25CLHVCQUF1QjtnQkFDdkIsb0RBQW9EO2dCQUNwRCxxQ0FBcUM7Z0JBQ3JDLHNCQUFzQjthQUN2QjtZQUNELGdCQUFnQixFQUFFO2dCQUNoQixtQkFBbUI7Z0JBQ25CLHlCQUF5QjtnQkFDekIsOENBQThDO2dCQUM5QywyQ0FBMkM7Z0JBQzNDLG1DQUFtQztnQkFDbkMsb0NBQW9DO2dCQUNwQyw4QkFBOEI7Z0JBQzlCLGdDQUFnQzthQUNqQztZQUNELHFCQUFxQixFQUFFO2dCQUNyQixrQkFBa0I7Z0JBQ2xCLG1CQUFtQjtnQkFDbkIsb0JBQW9CO2dCQUNwQixrQkFBa0I7Z0JBQ2xCLGlCQUFpQjtnQkFDakIsaUJBQWlCO2dCQUNqQiw4QkFBOEI7YUFDL0I7WUFDRCwyQkFBMkIsRUFBRTtnQkFDM0IscUJBQXFCO2dCQUNyQix5QkFBeUI7Z0JBQ3pCLGtCQUFrQjtnQkFDbEIsdUJBQXVCO2dCQUN2QixxQkFBcUI7YUFDdEI7WUFDRCxH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QXFEO1FBRXJELE1BQU0sY0FBYyxHQUFhLEVBQUUsQ0FBQztRQUVwQyxJQUFJLFlBQVksQ0FBQyxZQUFZLEtBQUssU0FBUyxFQUFFO1lBQzNDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxZQUFZLENBQUMsWUFBWSxPQUFPLENBQUMsQ0FBQztTQUM3RDtRQUVELElBQUksa0JBQWtCLENBQUMsZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDakQsY0FBYyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDcEU7UUFFRCxJQUFJLGFBQXFCLENBQUM7UUFDMUIsSUFBSSxVQUFVLEdBQUcsR0FBRyxFQUFFO1lBQ3BCLGFBQWEsR0FBRyx5RUFBeUUsQ0FBQztTQUMzRjthQUFNLElBQUksVUFBVSxHQUFHLEdBQUcsRUFBRTtZQUMzQixhQUFhLEdBQUcsc0VBQXNFLENBQUM7U0FDeEY7YUFBTSxJQUFJLFVBQVUsR0FBRyxHQUFHLEVBQUU7WUFDM0IsYUFBYSxHQUFHLG9GQUFvRixDQUFDO1NBQ3RHO2FBQU07WUFDTCxhQUFhLEdBQUcsZ0ZBQWdGLENBQUM7U0FDbEc7UUFFRCxPQUFPLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztZQUM5QixDQUFDLENBQUMsR0FBRyxhQUFhLEtBQUssY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRztZQUNuRCxDQUFDLENBQUMsYUFBYSxDQUFDO0lBQ3BCLENBQUM7Q0FDRjtBQW41Q0QsOENBbTVDQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvYmFja3Vwcy9maXJzdC13YXZlLTIwMjUtMDgtMTFUMDUtMTktMjYtODEzWi9zcmMvc2VydmljZXMvY2FtcGFpZ24vdW5pbnRlbnRpb25hbC1hbnktZWxpbWluYXRpb24vQW55VHlwZUNsYXNzaWZpZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBbnkgVHlwZSBDbGFzc2lmaWVyXG4gKiBBbmFseXplcyBlYWNoIGBhbnlgIHR5cGUgdXNhZ2UgdG8gZGV0ZXJtaW5lIGlmIGl0J3MgaW50ZW50aW9uYWwgb3IgdW5pbnRlbnRpb25hbFxuICovXG5cbmltcG9ydCB7XG4gICAgQW55VHlwZUNhdGVnb3J5LFxuICAgIEFueVR5cGVDbGFzc2lmaWNhdGlvbixcbiAgICBDbGFzc2lmaWNhdGlvbkNvbnRleHQsXG4gICAgQ2xhc3NpZmljYXRpb25FcnJvcixcbiAgICBDbGFzc2lmaWNhdGlvblJ1bGVzLFxuICAgIENvZGVEb21haW5cbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBBbnlUeXBlQ2xhc3NpZmllciB7XG4gIHByaXZhdGUgcnVsZXM6IENsYXNzaWZpY2F0aW9uUnVsZXM7XG4gIHByaXZhdGUgY29uZmlkZW5jZVdlaWdodHM6IE1hcDxBbnlUeXBlQ2F0ZWdvcnksIG51bWJlcj47XG4gIHByaXZhdGUgcGF0dGVybk1hdGNoZXJzOiBNYXA8QW55VHlwZUNhdGVnb3J5LCAoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KSA9PiBudW1iZXI+O1xuXG4gIGNvbnN0cnVjdG9yKHJ1bGVzPzogUGFydGlhbDxDbGFzc2lmaWNhdGlvblJ1bGVzPikge1xuICAgIHRoaXMucnVsZXMgPSB7XG4gICAgICBlcnJvckhhbmRsaW5nUGF0dGVybnM6IFtcbiAgICAgICAgL2NhdGNoXFxzKlxcKFxccypcXHcrXFxzKjpcXHMqYW55XFxzKlxcKS8sXG4gICAgICAgIC9lcnJvclxccyo6XFxzKmFueS8sXG4gICAgICAgIC9leGNlcHRpb25cXHMqOlxccyphbnkvLFxuICAgICAgICAvZXJyXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL1xcLmNhdGNoXFxzKlxcKFxccypcXChcXHMqXFx3K1xccyo6XFxzKmFueVxccypcXCkvLFxuICAgICAgICAvdHJ5XFxzKlxce1tcXHNcXFNdKj9cXH1cXHMqY2F0Y2hcXHMqXFwoXFxzKlxcdytcXHMqOlxccyphbnkvXG4gICAgICBdLFxuICAgICAgZXh0ZXJuYWxBcGlQYXR0ZXJuczogW1xuICAgICAgICAvcmVzcG9uc2VcXHMqOlxccyphbnkvLFxuICAgICAgICAvZGF0YVxccyo6XFxzKmFueS8sXG4gICAgICAgIC9wYXlsb2FkXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL2FwaVJlc3BvbnNlXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL2ZldGNoXFxzKlxcKFtcXHNcXFNdKj9cXClcXHMqXFwudGhlblxccypcXChcXHMqXFx3K1xccyo6XFxzKmFueS8sXG4gICAgICAgIC9heGlvc1xcLlxcdytcXHMqXFwoW1xcc1xcU10qP1xcKVxccyo6XFxzKmFueS8sXG4gICAgICAgIC9cXC5qc29uXFwoXFwpXFxzKjpcXHMqYW55L1xuICAgICAgXSxcbiAgICAgIHRlc3RNb2NrUGF0dGVybnM6IFtcbiAgICAgICAgL21vY2tcXHcqXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL2plc3RcXC5mblxcKFxcKVxccyphc1xccyphbnkvLFxuICAgICAgICAvXFwubW9ja1JldHVyblZhbHVlXFxzKlxcKFxccypcXHcrXFxzKmFzXFxzKmFueVxccypcXCkvLFxuICAgICAgICAvXFwubW9ja0ltcGxlbWVudGF0aW9uXFxzKlxcKFxccypcXHcrXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL1xcLnNweU9uXFxzKlxcKFtcXHNcXFNdKj9cXClcXHMqYXNcXHMqYW55LyxcbiAgICAgICAgL2Rlc2NyaWJlXFxzKlxcKFtcXHNcXFNdKj9cXHcrXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL2l0XFxzKlxcKFtcXHNcXFNdKj9cXHcrXFxzKjpcXHMqYW55LyxcbiAgICAgICAgL3Rlc3RcXHMqXFwoW1xcc1xcU10qP1xcdytcXHMqOlxccyphbnkvXG4gICAgICBdLFxuICAgICAgZHluYW1pY0NvbmZpZ1BhdHRlcm5zOiBbXG4gICAgICAgIC9jb25maWdcXHMqOlxccyphbnkvLFxuICAgICAgICAvb3B0aW9uc1xccyo6XFxzKmFueS8sXG4gICAgICAgIC9zZXR0aW5nc1xccyo6XFxzKmFueS8sXG4gICAgICAgIC9wYXJhbXNcXHMqOlxccyphbnkvLFxuICAgICAgICAvcHJvcHNcXHMqOlxccyphbnkvLFxuICAgICAgICAvXFwuZW52XFxzKjpcXHMqYW55LyxcbiAgICAgICAgL3Byb2Nlc3NcXC5lbnZcXC5cXHcrXFxzKmFzXFxzKmFueS9cbiAgICAgIF0sXG4gICAgICBsZWdhY3lDb21wYXRpYmlsaXR5UGF0dGVybnM6IFtcbiAgICAgICAgL2xlZ2FjeVxcdypcXHMqOlxccyphbnkvLFxuICAgICAgICAvZGVwcmVjYXRlZFxcdypcXHMqOlxccyphbnkvLFxuICAgICAgICAvb2xkXFx3Klxccyo6XFxzKmFueS8sXG4gICAgICAgIC9iYWNrd2FyZFxcdypcXHMqOlxccyphbnkvLFxuICAgICAgICAvY29tcGF0XFx3Klxccyo6XFxzKmFueS9cbiAgICAgIF0sXG4gICAgICAuLi5ydWxlc1xuICAgIH07XG5cbiAgICAvLyBJbml0aWFsaXplIGNvbmZpZGVuY2Ugd2VpZ2h0cyBmb3IgZGlmZmVyZW50IGNhdGVnb3JpZXNcbiAgICB0aGlzLmNvbmZpZGVuY2VXZWlnaHRzID0gbmV3IE1hcChbXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkVSUk9SX0hBTkRMSU5HLCAwLjldLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEksIDAuOF0sXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LlRFU1RfTU9DSywgMC44NV0sXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHLCAwLjc1XSxcbiAgICAgIFtBbnlUeXBlQ2F0ZWdvcnkuTEVHQUNZX0NPTVBBVElCSUxJVFksIDAuN10sXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkFSUkFZX1RZUEUsIDAuOTVdLCAvLyBIaWdoIGNvbmZpZGVuY2UgZm9yIHJlcGxhY2VtZW50XG4gICAgICBbQW55VHlwZUNhdGVnb3J5LlJFQ09SRF9UWVBFLCAwLjhdLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5GVU5DVElPTl9QQVJBTSwgMC42XSxcbiAgICAgIFtBbnlUeXBlQ2F0ZWdvcnkuUkVUVVJOX1RZUEUsIDAuNjVdLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5UWVBFX0FTU0VSVElPTiwgMC41XVxuICAgIF0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBwYXR0ZXJuIG1hdGNoZXJzIHdpdGggY29uZmlkZW5jZSBzY29yaW5nXG4gICAgdGhpcy5wYXR0ZXJuTWF0Y2hlcnMgPSBuZXcgTWFwKFtcbiAgICAgIFtBbnlUeXBlQ2F0ZWdvcnkuRVJST1JfSEFORExJTkcsIHRoaXMuY2FsY3VsYXRlRXJyb3JIYW5kbGluZ0NvbmZpZGVuY2UuYmluZCh0aGlzKV0sXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSwgdGhpcy5jYWxjdWxhdGVFeHRlcm5hbEFwaUNvbmZpZGVuY2UuYmluZCh0aGlzKV0sXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LlRFU1RfTU9DSywgdGhpcy5jYWxjdWxhdGVUZXN0TW9ja0NvbmZpZGVuY2UuYmluZCh0aGlzKV0sXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHLCB0aGlzLmNhbGN1bGF0ZUR5bmFtaWNDb25maWdDb25maWRlbmNlLmJpbmQodGhpcyldLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5MRUdBQ1lfQ09NUEFUSUJJTElUWSwgdGhpcy5jYWxjdWxhdGVMZWdhY3lDb21wYXRpYmlsaXR5Q29uZmlkZW5jZS5iaW5kKHRoaXMpXSxcbiAgICAgIFtBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRSwgdGhpcy5jYWxjdWxhdGVBcnJheVR5cGVDb25maWRlbmNlLmJpbmQodGhpcyldLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5SRUNPUkRfVFlQRSwgdGhpcy5jYWxjdWxhdGVSZWNvcmRUeXBlQ29uZmlkZW5jZS5iaW5kKHRoaXMpXVxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzaWZ5IGEgc2luZ2xlIGFueSB0eXBlIHVzYWdlIHVzaW5nIHBhdHRlcm4gcmVjb2duaXRpb24gYWxnb3JpdGhtcyBhbmQgY29udGV4dHVhbCBhbmFseXNpc1xuICAgKi9cbiAgYXN5bmMgY2xhc3NpZnkoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogUHJvbWlzZTxBbnlUeXBlQ2xhc3NpZmljYXRpb24+IHtcbiAgICB0cnkge1xuICAgICAgLy8gUGVyZm9ybSBjb250ZXh0dWFsIGFuYWx5c2lzXG4gICAgICBjb25zdCBzdXJyb3VuZGluZ0NvbnRleHQgPSB0aGlzLmFuYWx5emVTdXJyb3VuZGluZ0NvZGVDb250ZXh0KGNvbnRleHQpO1xuICAgICAgY29uc3QgZmlsZVR5cGVJbmZvID0gdGhpcy5hbmFseXplRmlsZVR5cGUoY29udGV4dC5maWxlUGF0aCk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkb2N1bWVudGF0aW9uIGZpcnN0IChoaWdoZXN0IHByaW9yaXR5KVxuICAgICAgaWYgKGNvbnRleHQuaGFzRXhpc3RpbmdDb21tZW50ICYmIHRoaXMuaGFzSW50ZW50aW9uYWxEb2N1bWVudGF0aW9uKGNvbnRleHQuZXhpc3RpbmdDb21tZW50KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzSW50ZW50aW9uYWw6IHRydWUsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC45NSxcbiAgICAgICAgICByZWFzb25pbmc6IGBFeHBsaWNpdGx5IGRvY3VtZW50ZWQgYXMgaW50ZW50aW9uYWwke3N1cnJvdW5kaW5nQ29udGV4dC5jb250ZXh0dWFsQ2x1ZXMubGVuZ3RoID4gMCA/IGAgKCR7c3Vycm91bmRpbmdDb250ZXh0LmNvbnRleHR1YWxDbHVlcy5qb2luKCcsICcpfSlgIDogJyd9YCxcbiAgICAgICAgICByZXF1aXJlc0RvY3VtZW50YXRpb246IGZhbHNlLFxuICAgICAgICAgIGNhdGVnb3J5OiB0aGlzLmNhdGVnb3JpemVGcm9tQ29tbWVudChjb250ZXh0LmV4aXN0aW5nQ29tbWVudClcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gUnVuIHBhdHRlcm4gcmVjb2duaXRpb24gYWxnb3JpdGhtcyBmb3IgYWxsIGNhdGVnb3JpZXNcbiAgICAgIGNvbnN0IGNhdGVnb3J5U2NvcmVzID0gbmV3IE1hcDxBbnlUeXBlQ2F0ZWdvcnksIG51bWJlcj4oKTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIGNvbmZpZGVuY2Ugc2NvcmVzIGZvciBlYWNoIGNhdGVnb3J5IHdpdGggY29udGV4dHVhbCBhZGp1c3RtZW50c1xuICAgICAgZm9yIChjb25zdCBbY2F0ZWdvcnksIG1hdGNoZXJdIG9mIHRoaXMucGF0dGVybk1hdGNoZXJzKSB7XG4gICAgICAgIGxldCBzY29yZSA9IG1hdGNoZXIoY29udGV4dCk7XG5cbiAgICAgICAgLy8gQXBwbHkgY29udGV4dHVhbCBhZGp1c3RtZW50c1xuICAgICAgICBzY29yZSA9IHRoaXMuYXBwbHlDb250ZXh0dWFsQWRqdXN0bWVudHMoc2NvcmUsIGNhdGVnb3J5LCBzdXJyb3VuZGluZ0NvbnRleHQsIGZpbGVUeXBlSW5mbyk7XG5cbiAgICAgICAgaWYgKHNjb3JlID4gMCkge1xuICAgICAgICAgIGNhdGVnb3J5U2NvcmVzLnNldChjYXRlZ29yeSwgc2NvcmUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgdGhlIGhpZ2hlc3Qgc2NvcmluZyBjYXRlZ29yeVxuICAgICAgbGV0IGJlc3RDYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5IHwgbnVsbCA9IG51bGw7XG4gICAgICBsZXQgYmVzdFNjb3JlID0gMDtcblxuICAgICAgZm9yIChjb25zdCBbY2F0ZWdvcnksIHNjb3JlXSBvZiBjYXRlZ29yeVNjb3Jlcykge1xuICAgICAgICBpZiAoc2NvcmUgPiBiZXN0U2NvcmUpIHtcbiAgICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTtcbiAgICAgICAgICBiZXN0Q2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBmb3VuZCBhIHN0cm9uZyBwYXR0ZXJuIG1hdGNoLCB1c2UgaXRcbiAgICAgIGlmIChiZXN0Q2F0ZWdvcnkgJiYgYmVzdFNjb3JlID49IDAuNykge1xuICAgICAgICBjb25zdCBpc0ludGVudGlvbmFsID0gdGhpcy5pc0ludGVudGlvbmFsQ2F0ZWdvcnkoYmVzdENhdGVnb3J5KTtcbiAgICAgICAgY29uc3QgY29udGV4dHVhbFJlYXNvbmluZyA9IHRoaXMuYnVpbGRDb250ZXh0dWFsUmVhc29uaW5nKGJlc3RDYXRlZ29yeSwgc3Vycm91bmRpbmdDb250ZXh0LCBmaWxlVHlwZUluZm8pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNJbnRlbnRpb25hbCxcbiAgICAgICAgICBjb25maWRlbmNlOiBiZXN0U2NvcmUsXG4gICAgICAgICAgcmVhc29uaW5nOiBjb250ZXh0dWFsUmVhc29uaW5nLFxuICAgICAgICAgIHN1Z2dlc3RlZFJlcGxhY2VtZW50OiBpc0ludGVudGlvbmFsID8gdW5kZWZpbmVkIDogdGhpcy5nZXRTdWdnZXN0ZWRSZXBsYWNlbWVudChiZXN0Q2F0ZWdvcnksIGNvbnRleHQpLFxuICAgICAgICAgIHJlcXVpcmVzRG9jdW1lbnRhdGlvbjogaXNJbnRlbnRpb25hbCxcbiAgICAgICAgICBjYXRlZ29yeTogYmVzdENhdGVnb3J5XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERvbWFpbi1zcGVjaWZpYyBhbmFseXNpcyBmb3IgbW9kZXJhdGUgY29uZmlkZW5jZSBjYXNlc1xuICAgICAgY29uc3QgZG9tYWluQ2xhc3NpZmljYXRpb24gPSB0aGlzLmFuYWx5emVEb21haW5TcGVjaWZpYyhjb250ZXh0KTtcbiAgICAgIGlmIChkb21haW5DbGFzc2lmaWNhdGlvbikge1xuICAgICAgICAvLyBFbmhhbmNlIGRvbWFpbiBjbGFzc2lmaWNhdGlvbiB3aXRoIGNvbnRleHR1YWwgaW5mb3JtYXRpb25cbiAgICAgICAgZG9tYWluQ2xhc3NpZmljYXRpb24ucmVhc29uaW5nICs9IHRoaXMuZ2V0Q29udGV4dHVhbEVuaGFuY2VtZW50KHN1cnJvdW5kaW5nQ29udGV4dCwgZmlsZVR5cGVJbmZvKTtcbiAgICAgICAgcmV0dXJuIGRvbWFpbkNsYXNzaWZpY2F0aW9uO1xuICAgICAgfVxuXG4gICAgICAvLyBGdW5jdGlvbiBwYXJhbWV0ZXIgYW5kIHJldHVybiB0eXBlIGFuYWx5c2lzXG4gICAgICBjb25zdCBmdW5jdGlvbkFuYWx5c2lzID0gdGhpcy5hbmFseXplRnVuY3Rpb25Db250ZXh0KGNvbnRleHQpO1xuICAgICAgaWYgKGZ1bmN0aW9uQW5hbHlzaXMpIHtcbiAgICAgICAgZnVuY3Rpb25BbmFseXNpcy5yZWFzb25pbmcgKz0gdGhpcy5nZXRDb250ZXh0dWFsRW5oYW5jZW1lbnQoc3Vycm91bmRpbmdDb250ZXh0LCBmaWxlVHlwZUluZm8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25BbmFseXNpcztcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCBjbGFzc2lmaWNhdGlvbiB3aXRoIGNvbXByZWhlbnNpdmUgY29udGV4dHVhbCBjb25maWRlbmNlIGFkanVzdG1lbnRcbiAgICAgIGNvbnN0IGRlZmF1bHRDb25maWRlbmNlID0gdGhpcy5jYWxjdWxhdGVDb250ZXh0dWFsQ29uZmlkZW5jZShjb250ZXh0LCBzdXJyb3VuZGluZ0NvbnRleHQsIGZpbGVUeXBlSW5mbyk7XG4gICAgICBjb25zdCBjb250ZXh0dWFsUmVhc29uaW5nID0gdGhpcy5idWlsZERlZmF1bHRDb250ZXh0dWFsUmVhc29uaW5nKGRlZmF1bHRDb25maWRlbmNlLCBzdXJyb3VuZGluZ0NvbnRleHQsIGZpbGVUeXBlSW5mbyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzSW50ZW50aW9uYWw6IGRlZmF1bHRDb25maWRlbmNlID4gMC42LCAvLyBIaWdoZXIgdGhyZXNob2xkIHdpdGggY29udGV4dHVhbCBhbmFseXNpc1xuICAgICAgICBjb25maWRlbmNlOiBkZWZhdWx0Q29uZmlkZW5jZSxcbiAgICAgICAgcmVhc29uaW5nOiBjb250ZXh0dWFsUmVhc29uaW5nLFxuICAgICAgICBzdWdnZXN0ZWRSZXBsYWNlbWVudDogZGVmYXVsdENvbmZpZGVuY2UgPD0gMC42ID8gdGhpcy5nZXREZWZhdWx0U3VnZ2VzdGVkUmVwbGFjZW1lbnQoY29udGV4dCkgOiB1bmRlZmluZWQsXG4gICAgICAgIHJlcXVpcmVzRG9jdW1lbnRhdGlvbjogZGVmYXVsdENvbmZpZGVuY2UgPiAwLjYsXG4gICAgICAgIGNhdGVnb3J5OiBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT05cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IENsYXNzaWZpY2F0aW9uRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gY2xhc3NpZnkgYW55IHR5cGUgYXQgJHtjb250ZXh0LmZpbGVQYXRofToke2NvbnRleHQubGluZU51bWJlcn1gLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBlcnJvciBhcyBFcnJvclxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xhc3NpZnkgbXVsdGlwbGUgYW55IHR5cGUgdXNhZ2VzIGluIGJhdGNoXG4gICAqL1xuICBhc3luYyBjbGFzc2lmeUJhdGNoKGNvbnRleHRzOiBDbGFzc2lmaWNhdGlvbkNvbnRleHRbXSk6IFByb21pc2U8QW55VHlwZUNsYXNzaWZpY2F0aW9uW10+IHtcbiAgICBjb25zdCByZXN1bHRzOiBBbnlUeXBlQ2xhc3NpZmljYXRpb25bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb250ZXh0IG9mIGNvbnRleHRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbiA9IGF3YWl0IHRoaXMuY2xhc3NpZnkoY29udGV4dCk7XG4gICAgICAgIHJlc3VsdHMucHVzaChjbGFzc2lmaWNhdGlvbik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBMb2cgZXJyb3IgYnV0IGNvbnRpbnVlIHdpdGggb3RoZXIgY2xhc3NpZmljYXRpb25zXG4gICAgICAgIGNvbnNvbGUud2FybihgQ2xhc3NpZmljYXRpb24gZmFpbGVkIGZvciAke2NvbnRleHQuZmlsZVBhdGh9OiR7Y29udGV4dC5saW5lTnVtYmVyfWAsIGVycm9yKTtcblxuICAgICAgICAvLyBQcm92aWRlIHNhZmUgZmFsbGJhY2sgY2xhc3NpZmljYXRpb25cbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBpc0ludGVudGlvbmFsOiB0cnVlLCAvLyBDb25zZXJ2YXRpdmUgZmFsbGJhY2sgdG8gcHJldmVudCB1bndhbnRlZCBjaGFuZ2VzXG4gICAgICAgICAgY29uZmlkZW5jZTogMC4xLFxuICAgICAgICAgIHJlYXNvbmluZzogJ0NsYXNzaWZpY2F0aW9uIGZhaWxlZCwgbWFya2VkIGFzIGludGVudGlvbmFsIGZvciBzYWZldHknLFxuICAgICAgICAgIHJlcXVpcmVzRG9jdW1lbnRhdGlvbjogdHJ1ZSxcbiAgICAgICAgICBjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5LkxFR0FDWV9DT01QQVRJQklMSVRZXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuaGFuY2VkIGNvbW1lbnQgYW5hbHlzaXMgdG8gZGV0ZWN0IGV4aXN0aW5nIGRvY3VtZW50YXRpb25cbiAgICovXG4gIHByaXZhdGUgaGFzSW50ZW50aW9uYWxEb2N1bWVudGF0aW9uKGNvbW1lbnQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbW1lbnQpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGludGVudGlvbmFsS2V5d29yZHMgPSBbXG4gICAgICAnaW50ZW50aW9uYWxseSBhbnknLFxuICAgICAgJ2RlbGliZXJhdGVseSBhbnknLFxuICAgICAgJ2V4cGxpY2l0bHkgYW55JyxcbiAgICAgICdtdXN0IGJlIGFueScsXG4gICAgICAncmVxdWlyZWQgYW55JyxcbiAgICAgICduZWVkcyB0byBiZSBhbnknLFxuICAgICAgJ2hhcyB0byBiZSBhbnknLFxuICAgICAgJ3Nob3VsZCBiZSBhbnknLFxuICAgICAgJ2tlZXAgYXMgYW55JyxcbiAgICAgICdsZWF2ZSBhcyBhbnknLFxuICAgICAgJ2FueSBpcyBuZWVkZWQnLFxuICAgICAgJ2FueSBpcyByZXF1aXJlZCcsXG4gICAgICAnYW55IHR5cGUgbmVlZGVkJyxcbiAgICAgICdmbGV4aWJsZSB0eXBpbmcnLFxuICAgICAgJ2R5bmFtaWMgdHlwaW5nJyxcbiAgICAgICdleHRlcm5hbCBsaWJyYXJ5JyxcbiAgICAgICd0aGlyZCBwYXJ0eScsXG4gICAgICAnYXBpIHJlc3BvbnNlJyxcbiAgICAgICd1bmtub3duIHN0cnVjdHVyZSdcbiAgICBdO1xuXG4gICAgY29uc3QgbG93ZXJDb21tZW50ID0gY29tbWVudC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4cGxpY2l0IGludGVudGlvbmFsIG1hcmtlcnNcbiAgICBjb25zdCBoYXNJbnRlbnRpb25hbE1hcmtlciA9IGludGVudGlvbmFsS2V5d29yZHMuc29tZShrZXl3b3JkID0+XG4gICAgICBsb3dlckNvbW1lbnQuaW5jbHVkZXMoa2V5d29yZClcbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgZm9yIEVTTGludCBkaXNhYmxlIGNvbW1lbnRzIHdpdGggZXhwbGFuYXRpb25zXG4gICAgY29uc3QgaGFzRXNsaW50RGlzYWJsZSA9IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnZXNsaW50LWRpc2FibGUnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsb3dlckNvbW1lbnQuaW5jbHVkZXMoJ25vLWV4cGxpY2l0LWFueScpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyQ29tbWVudC5pbmNsdWRlcygnQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueScpKTtcblxuICAgIC8vIENoZWNrIGZvciBUT0RPL0ZJWE1FIGNvbW1lbnRzIHRoYXQgaW5kaWNhdGUgdGVtcG9yYXJ5IHVzYWdlXG4gICAgY29uc3QgaGFzVG9kb0ZpeG1lID0gbG93ZXJDb21tZW50LmluY2x1ZGVzKCd0b2RvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyQ29tbWVudC5pbmNsdWRlcygnZml4bWUnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJDb21tZW50LmluY2x1ZGVzKCdoYWNrJyk7XG5cbiAgICByZXR1cm4gaGFzSW50ZW50aW9uYWxNYXJrZXIgfHwgKGhhc0VzbGludERpc2FibGUgJiYgIWhhc1RvZG9GaXhtZSk7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBzdXJyb3VuZGluZyBjb2RlIGNvbnRleHQgZm9yIGJldHRlciB1bmRlcnN0YW5kaW5nXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVTdXJyb3VuZGluZ0NvZGVDb250ZXh0KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHtcbiAgICBoYXNFcnJvckhhbmRsaW5nOiBib29sZWFuO1xuICAgIGhhc0FwaUNhbGxzOiBib29sZWFuO1xuICAgIGhhc1Rlc3RpbmdDb2RlOiBib29sZWFuO1xuICAgIGhhc1R5cGVBc3NlcnRpb25zOiBib29sZWFuO1xuICAgIGhhc0NvbXBsZXhMb2dpYzogYm9vbGVhbjtcbiAgICBjb250ZXh0dWFsQ2x1ZXM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCBzdXJyb3VuZGluZ0NvZGUgPSB0aGlzLmdldENvbWJpbmVkQ29kZShjb250ZXh0KTtcbiAgICBjb25zdCBsb3dlckNvZGUgPSBzdXJyb3VuZGluZ0NvZGUudG9Mb3dlckNhc2UoKTtcblxuICAgIGNvbnN0IGNvbnRleHR1YWxDbHVlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEVycm9yIGhhbmRsaW5nIGRldGVjdGlvblxuICAgIGNvbnN0IGhhc0Vycm9ySGFuZGxpbmcgPSAvdHJ5XFxzKlxce3xjYXRjaFxccypcXCh8XFwuY2F0Y2hcXHMqXFwofHRocm93XFxzK3xlcnJvcnxleGNlcHRpb24vaS50ZXN0KHN1cnJvdW5kaW5nQ29kZSk7XG4gICAgaWYgKGhhc0Vycm9ySGFuZGxpbmcpIGNvbnRleHR1YWxDbHVlcy5wdXNoKCdlcnJvciBoYW5kbGluZyBjb250ZXh0Jyk7XG5cbiAgICAvLyBBUEkgY2FsbHMgZGV0ZWN0aW9uXG4gICAgY29uc3QgaGFzQXBpQ2FsbHMgPSAvZmV0Y2hcXHMqXFwofGF4aW9zXFwufGh0dHBcXC58YXBpXFwufHJlcXVlc3RcXC58cmVzcG9uc2VcXC58XFwuanNvblxcKFxcKXxcXC50aGVuXFxzKlxcKC9pLnRlc3Qoc3Vycm91bmRpbmdDb2RlKTtcbiAgICBpZiAoaGFzQXBpQ2FsbHMpIGNvbnRleHR1YWxDbHVlcy5wdXNoKCdBUEkgaW50ZXJhY3Rpb24gY29udGV4dCcpO1xuXG4gICAgLy8gVGVzdGluZyBjb2RlIGRldGVjdGlvblxuICAgIGNvbnN0IGhhc1Rlc3RpbmdDb2RlID0gL2Rlc2NyaWJlXFxzKlxcKHxpdFxccypcXCh8dGVzdFxccypcXCh8ZXhwZWN0XFxzKlxcKHxtb2NrfHNweXxqZXN0XFwufGJlZm9yZUVhY2h8YWZ0ZXJFYWNoL2kudGVzdChzdXJyb3VuZGluZ0NvZGUpO1xuICAgIGlmIChoYXNUZXN0aW5nQ29kZSkgY29udGV4dHVhbENsdWVzLnB1c2goJ3Rlc3RpbmcgY29udGV4dCcpO1xuXG4gICAgLy8gVHlwZSBhc3NlcnRpb25zIGRldGVjdGlvblxuICAgIGNvbnN0IGhhc1R5cGVBc3NlcnRpb25zID0gL2FzXFxzK2FueXw8YW55PnxcXCguKlxccythc1xccythbnlcXHMqXFwpL2kudGVzdChzdXJyb3VuZGluZ0NvZGUpO1xuICAgIGlmIChoYXNUeXBlQXNzZXJ0aW9ucykgY29udGV4dHVhbENsdWVzLnB1c2goJ3R5cGUgYXNzZXJ0aW9uIGNvbnRleHQnKTtcblxuICAgIC8vIENvbXBsZXggbG9naWMgZGV0ZWN0aW9uIChsb29wcywgY29uZGl0aW9ucywgbXVsdGlwbGUgZnVuY3Rpb24gY2FsbHMpXG4gICAgY29uc3QgaGFzQ29tcGxleExvZ2ljID0gKHN1cnJvdW5kaW5nQ29kZS5tYXRjaCgvaWZcXHMqXFwofGZvclxccypcXCh8d2hpbGVcXHMqXFwofHN3aXRjaFxccypcXCgvZykgfHwgW10pLmxlbmd0aCA+IDIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdXJyb3VuZGluZ0NvZGUubWF0Y2goL1xcLlxcdytcXHMqXFwoL2cpIHx8IFtdKS5sZW5ndGggPiAzO1xuICAgIGlmIChoYXNDb21wbGV4TG9naWMpIGNvbnRleHR1YWxDbHVlcy5wdXNoKCdjb21wbGV4IGxvZ2ljIGNvbnRleHQnKTtcblxuICAgIHJldHVybiB7XG4gICAgICBoYXNFcnJvckhhbmRsaW5nLFxuICAgICAgaGFzQXBpQ2FsbHMsXG4gICAgICBoYXNUZXN0aW5nQ29kZSxcbiAgICAgIGhhc1R5cGVBc3NlcnRpb25zLFxuICAgICAgaGFzQ29tcGxleExvZ2ljLFxuICAgICAgY29udGV4dHVhbENsdWVzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlZCBmaWxlIHR5cGUgZGV0ZWN0aW9uXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVGaWxlVHlwZShmaWxlUGF0aDogc3RyaW5nKToge1xuICAgIGlzVGVzdEZpbGU6IGJvb2xlYW47XG4gICAgaXNDb25maWdGaWxlOiBib29sZWFuO1xuICAgIGlzVHlwZURlZmluaXRpb25GaWxlOiBib29sZWFuO1xuICAgIGlzU2VydmljZUZpbGU6IGJvb2xlYW47XG4gICAgaXNDb21wb25lbnRGaWxlOiBib29sZWFuO1xuICAgIGlzVXRpbGl0eUZpbGU6IGJvb2xlYW47XG4gICAgZmlsZUNhdGVnb3J5OiBzdHJpbmc7XG4gIH0ge1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZVBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBwYXRoU2VnbWVudHMgPSBmaWxlTmFtZS5zcGxpdCgnLycpO1xuXG4gICAgLy8gVGVzdCBmaWxlIGRldGVjdGlvblxuICAgIGNvbnN0IGlzVGVzdEZpbGUgPSBmaWxlTmFtZS5pbmNsdWRlcygnLnRlc3QuJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZS5pbmNsdWRlcygnLnNwZWMuJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZS5pbmNsdWRlcygnX190ZXN0c19fJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICBwYXRoU2VnbWVudHMuc29tZShzZWdtZW50ID0+IHNlZ21lbnQgPT09ICd0ZXN0cycgfHwgc2VnbWVudCA9PT0gJ19fdGVzdHNfXycgfHwgc2VnbWVudCA9PT0gJ3Rlc3QnKTtcblxuICAgIC8vIENvbmZpZyBmaWxlIGRldGVjdGlvblxuICAgIGNvbnN0IGlzQ29uZmlnRmlsZSA9IGZpbGVOYW1lLmluY2x1ZGVzKCdjb25maWcnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUuaW5jbHVkZXMoJy5jb25maWcuJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLmluY2x1ZGVzKCdzZXR0aW5ncycpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoU2VnbWVudHMuc29tZShzZWdtZW50ID0+IHNlZ21lbnQgPT09ICdjb25maWcnIHx8IHNlZ21lbnQgPT09ICdjb25maWdzJyk7XG5cbiAgICAvLyBUeXBlIGRlZmluaXRpb24gZmlsZSBkZXRlY3Rpb25cbiAgICBjb25zdCBpc1R5cGVEZWZpbml0aW9uRmlsZSA9IGZpbGVOYW1lLmVuZHNXaXRoKCcuZC50cycpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLmluY2x1ZGVzKCd0eXBlcy50cycpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLmluY2x1ZGVzKCdpbnRlcmZhY2VzLnRzJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFNlZ21lbnRzLnNvbWUoc2VnbWVudCA9PiBzZWdtZW50ID09PSAndHlwZXMnIHx8IHNlZ21lbnQgPT09ICdAdHlwZXMnKTtcblxuICAgIC8vIFNlcnZpY2UgZmlsZSBkZXRlY3Rpb25cbiAgICBjb25zdCBpc1NlcnZpY2VGaWxlID0gZmlsZU5hbWUuaW5jbHVkZXMoJ3NlcnZpY2UnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLmluY2x1ZGVzKCcuc2VydmljZS4nKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhTZWdtZW50cy5zb21lKHNlZ21lbnQgPT4gc2VnbWVudCA9PT0gJ3NlcnZpY2VzJyB8fCBzZWdtZW50ID09PSAnYXBpJyk7XG5cbiAgICAvLyBDb21wb25lbnQgZmlsZSBkZXRlY3Rpb25cbiAgICBjb25zdCBpc0NvbXBvbmVudEZpbGUgPSBmaWxlTmFtZS5pbmNsdWRlcygnY29tcG9uZW50JykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLmVuZHNXaXRoKCcudHN4JykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhTZWdtZW50cy5zb21lKHNlZ21lbnQgPT4gc2VnbWVudCA9PT0gJ2NvbXBvbmVudHMnIHx8IHNlZ21lbnQgPT09ICd1aScpO1xuXG4gICAgLy8gVXRpbGl0eSBmaWxlIGRldGVjdGlvblxuICAgIGNvbnN0IGlzVXRpbGl0eUZpbGUgPSBmaWxlTmFtZS5pbmNsdWRlcygndXRpbCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUuaW5jbHVkZXMoJ2hlbHBlcicpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFNlZ21lbnRzLnNvbWUoc2VnbWVudCA9PiBzZWdtZW50ID09PSAndXRpbHMnIHx8IHNlZ21lbnQgPT09ICdoZWxwZXJzJyB8fCBzZWdtZW50ID09PSAnbGliJyk7XG5cbiAgICAvLyBEZXRlcm1pbmUgZmlsZSBjYXRlZ29yeVxuICAgIGxldCBmaWxlQ2F0ZWdvcnkgPSAndW5rbm93bic7XG4gICAgaWYgKGlzVGVzdEZpbGUpIGZpbGVDYXRlZ29yeSA9ICd0ZXN0JztcbiAgICBlbHNlIGlmIChpc0NvbmZpZ0ZpbGUpIGZpbGVDYXRlZ29yeSA9ICdjb25maWcnO1xuICAgIGVsc2UgaWYgKGlzVHlwZURlZmluaXRpb25GaWxlKSBmaWxlQ2F0ZWdvcnkgPSAndHlwZXMnO1xuICAgIGVsc2UgaWYgKGlzU2VydmljZUZpbGUpIGZpbGVDYXRlZ29yeSA9ICdzZXJ2aWNlJztcbiAgICBlbHNlIGlmIChpc0NvbXBvbmVudEZpbGUpIGZpbGVDYXRlZ29yeSA9ICdjb21wb25lbnQnO1xuICAgIGVsc2UgaWYgKGlzVXRpbGl0eUZpbGUpIGZpbGVDYXRlZ29yeSA9ICd1dGlsaXR5JztcblxuICAgIHJldHVybiB7XG4gICAgICBpc1Rlc3RGaWxlLFxuICAgICAgaXNDb25maWdGaWxlLFxuICAgICAgaXNUeXBlRGVmaW5pdGlvbkZpbGUsXG4gICAgICBpc1NlcnZpY2VGaWxlLFxuICAgICAgaXNDb21wb25lbnRGaWxlLFxuICAgICAgaXNVdGlsaXR5RmlsZSxcbiAgICAgIGZpbGVDYXRlZ29yeVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNhdGVnb3JpemVGcm9tQ29tbWVudChjb21tZW50Pzogc3RyaW5nKTogQW55VHlwZUNhdGVnb3J5IHtcbiAgICBpZiAoIWNvbW1lbnQpIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuTEVHQUNZX0NPTVBBVElCSUxJVFk7XG5cbiAgICBjb25zdCBsb3dlckNvbW1lbnQgPSBjb21tZW50LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAobG93ZXJDb21tZW50LmluY2x1ZGVzKCdleHRlcm5hbCcpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnYXBpJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJO1xuICAgIH1cbiAgICBpZiAobG93ZXJDb21tZW50LmluY2x1ZGVzKCdlcnJvcicpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnY2F0Y2gnKSkge1xuICAgICAgcmV0dXJuIEFueVR5cGVDYXRlZ29yeS5FUlJPUl9IQU5ETElORztcbiAgICB9XG4gICAgaWYgKGxvd2VyQ29tbWVudC5pbmNsdWRlcygndGVzdCcpIHx8IGxvd2VyQ29tbWVudC5pbmNsdWRlcygnbW9jaycpKSB7XG4gICAgICByZXR1cm4gQW55VHlwZUNhdGVnb3J5LlRFU1RfTU9DSztcbiAgICB9XG4gICAgaWYgKGxvd2VyQ29tbWVudC5pbmNsdWRlcygnY29uZmlnJykgfHwgbG93ZXJDb21tZW50LmluY2x1ZGVzKCdkeW5hbWljJykpIHtcbiAgICAgIHJldHVybiBBbnlUeXBlQ2F0ZWdvcnkuRFlOQU1JQ19DT05GSUc7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFueVR5cGVDYXRlZ29yeS5MRUdBQ1lfQ09NUEFUSUJJTElUWTtcbiAgfVxuXG4gIHByaXZhdGUgbWF0Y2hlc0Vycm9ySGFuZGxpbmcoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IFtcbiAgICAgIC4uLmNvbnRleHQuc3Vycm91bmRpbmdMaW5lcyxcbiAgICAgIGNvbnRleHQuY29kZVNuaXBwZXRcbiAgICBdLmpvaW4oJ1xcbicpO1xuXG4gICAgcmV0dXJuIHRoaXMucnVsZXMuZXJyb3JIYW5kbGluZ1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PlxuICAgICAgcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgbWF0Y2hlc0V4dGVybmFsQXBpKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNvZGVXaXRoU3Vycm91bmRpbmcgPSBbXG4gICAgICAuLi5jb250ZXh0LnN1cnJvdW5kaW5nTGluZXMsXG4gICAgICBjb250ZXh0LmNvZGVTbmlwcGV0XG4gICAgXS5qb2luKCdcXG4nKTtcblxuICAgIHJldHVybiB0aGlzLnJ1bGVzLmV4dGVybmFsQXBpUGF0dGVybnMuc29tZShwYXR0ZXJuID0+XG4gICAgICBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZylcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBtYXRjaGVzVGVzdE1vY2soY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IFtcbiAgICAgIC4uLmNvbnRleHQuc3Vycm91bmRpbmdMaW5lcyxcbiAgICAgIGNvbnRleHQuY29kZVNuaXBwZXRcbiAgICBdLmpvaW4oJ1xcbicpO1xuXG4gICAgcmV0dXJuIHRoaXMucnVsZXMudGVzdE1vY2tQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT5cbiAgICAgIHBhdHRlcm4udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGlzU2ltcGxlQXJyYXlUeXBlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgIC8vIE1hdGNoIHBhdHRlcm5zIGxpa2U6IGFueVtdLCBBcnJheTxhbnk+XG4gICAgY29uc3QgYXJyYXlQYXR0ZXJucyA9IFtcbiAgICAgIC86XFxzKmFueVxcW1xcXS8sXG4gICAgICAvOlxccypBcnJheTxhbnk+LyxcbiAgICAgIC89XFxzKlxcW1xcXVxccyphc1xccyphbnlcXFtcXF0vXG4gICAgXTtcblxuICAgIHJldHVybiBhcnJheVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29udGV4dC5jb2RlU25pcHBldCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1JlY29yZFR5cGUoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgLy8gTWF0Y2ggcGF0dGVybnMgbGlrZTogUmVjb3JkPHN0cmluZywgYW55PiwgUmVjb3JkPG51bWJlciwgYW55PlxuICAgIGNvbnN0IHJlY29yZFBhdHRlcm5zID0gW1xuICAgICAgLzpcXHMqUmVjb3JkPFxccypzdHJpbmdcXHMqLFxccyphbnlcXHMqPi8sXG4gICAgICAvOlxccypSZWNvcmQ8XFxzKm51bWJlclxccyosXFxzKmFueVxccyo+LyxcbiAgICAgIC86XFxzKlxce1xccypcXFtrZXk6XFxzKnN0cmluZ1xcXVxccyo6XFxzKmFueVxccypcXH0vLFxuICAgICAgL1xce1xccypcXFtrZXk6XFxzKnN0cmluZ1xcXVxccyo6XFxzKmFueVxccypcXH0vLCAvLyBXaXRob3V0IGNvbG9uIHByZWZpeFxuICAgICAgL1JlY29yZDxcXHcrLFxccyphbnlcXFtcXF0+LyAvLyBSZWNvcmQgd2l0aCBhbnkgYXJyYXlzXG4gICAgXTtcblxuICAgIHJldHVybiByZWNvcmRQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvbnRleHQuY29kZVNuaXBwZXQpKTtcbiAgfVxuXG4gIHByaXZhdGUgc3VnZ2VzdFJlY29yZFJlcGxhY2VtZW50KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgaWYgKGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ1JlY29yZDxzdHJpbmcsIGFueT4nKSkge1xuICAgICAgcmV0dXJuICdSZWNvcmQ8c3RyaW5nLCB1bmtub3duPic7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdSZWNvcmQ8bnVtYmVyLCBhbnk+JykpIHtcbiAgICAgIHJldHVybiAnUmVjb3JkPG51bWJlciwgdW5rbm93bj4nO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygnW2tleTogc3RyaW5nXTogYW55JykpIHtcbiAgICAgIHJldHVybiAnW2tleTogc3RyaW5nXTogdW5rbm93bic7XG4gICAgfVxuXG4gICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxuXG4gIHByaXZhdGUgYW5hbHl6ZURvbWFpblNwZWNpZmljKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IEFueVR5cGVDbGFzc2lmaWNhdGlvbiB8IG51bGwge1xuICAgIGNvbnN0IGRvbWFpbiA9IGNvbnRleHQuZG9tYWluQ29udGV4dC5kb21haW47XG5cbiAgICBzd2l0Y2ggKGRvbWFpbikge1xuICAgICAgY2FzZSBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTDpcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5hbHl6ZUFzdHJvbG9naWNhbERvbWFpbihjb250ZXh0KTtcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5SRUNJUEU6XG4gICAgICAgIHJldHVybiB0aGlzLmFuYWx5emVSZWNpcGVEb21haW4oY29udGV4dCk7XG4gICAgICBjYXNlIENvZGVEb21haW4uQ0FNUEFJR046XG4gICAgICAgIHJldHVybiB0aGlzLmFuYWx5emVDYW1wYWlnbkRvbWFpbihjb250ZXh0KTtcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5TRVJWSUNFOlxuICAgICAgICByZXR1cm4gdGhpcy5hbmFseXplU2VydmljZUxheWVyRG9tYWluKGNvbnRleHQpO1xuICAgICAgY2FzZSBDb2RlRG9tYWluLklOVEVMTElHRU5DRTpcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5hbHl6ZUludGVsbGlnZW5jZURvbWFpbihjb250ZXh0KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYW5hbHl6ZVNlcnZpY2VMYXllckRvbWFpbihjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBBbnlUeXBlQ2xhc3NpZmljYXRpb24gfCBudWxsIHtcbiAgICBjb25zdCBjb2RlV2l0aFN1cnJvdW5kaW5nID0gdGhpcy5nZXRDb21iaW5lZENvZGUoY29udGV4dCk7XG4gICAgY29uc3QgbG93ZXJDb2RlID0gY29kZVdpdGhTdXJyb3VuZGluZy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gU2VydmljZSBpbnRlcmZhY2UgcGF0dGVybnNcbiAgICBjb25zdCBzZXJ2aWNlSW50ZXJmYWNlUGF0dGVybnMgPSBbXG4gICAgICAvc2VydmljZVxccyppbnRlcmZhY2UvaSxcbiAgICAgIC9hcGlcXHMqc2VydmljZS9pLFxuICAgICAgL2RhdGFcXHMqc2VydmljZS9pLFxuICAgICAgL2J1c2luZXNzXFxzKnNlcnZpY2UvaSxcbiAgICAgIC9hcHBsaWNhdGlvblxccypzZXJ2aWNlL2ksXG4gICAgICAvZG9tYWluXFxzKnNlcnZpY2UvaVxuICAgIF07XG5cbiAgICAvLyBFeHRlcm5hbCBzZXJ2aWNlIGludGVncmF0aW9uIHBhdHRlcm5zXG4gICAgY29uc3QgZXh0ZXJuYWxTZXJ2aWNlUGF0dGVybnMgPSBbXG4gICAgICAvZXh0ZXJuYWxcXHMqc2VydmljZS9pLFxuICAgICAgL3RoaXJkXFxzKnBhcnR5XFxzKnNlcnZpY2UvaSxcbiAgICAgIC9yZW1vdGVcXHMqc2VydmljZS9pLFxuICAgICAgL3dlYlxccypzZXJ2aWNlL2ksXG4gICAgICAvbWljcm9zZXJ2aWNlL2ksXG4gICAgICAvcmVzdFxccyphcGkvaSxcbiAgICAgIC9ncmFwaHFsL2ksXG4gICAgICAvZ3JwYy9pXG4gICAgXTtcblxuICAgIC8vIFNlcnZpY2UgY29uZmlndXJhdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IHNlcnZpY2VDb25maWdQYXR0ZXJucyA9IFtcbiAgICAgIC9zZXJ2aWNlXFxzKmNvbmZpZy9pLFxuICAgICAgL2VuZHBvaW50XFxzKmNvbmZpZy9pLFxuICAgICAgL2Nvbm5lY3Rpb25cXHMqY29uZmlnL2ksXG4gICAgICAvY2xpZW50XFxzKmNvbmZpZy9pLFxuICAgICAgL3NlcnZpY2VcXHMqb3B0aW9ucy9pLFxuICAgICAgL3NlcnZpY2VcXHMqc2V0dGluZ3MvaVxuICAgIF07XG5cbiAgICAvLyBEYXRhIHRyYW5zZm9ybWF0aW9uIHBhdHRlcm5zXG4gICAgY29uc3QgZGF0YVRyYW5zZm9ybVBhdHRlcm5zID0gW1xuICAgICAgL2RhdGFcXHMqdHJhbnNmb3JtZXIvaSxcbiAgICAgIC9yZXNwb25zZVxccyptYXBwZXIvaSxcbiAgICAgIC9kdG9cXHMqbWFwcGVyL2ksXG4gICAgICAvZW50aXR5XFxzKm1hcHBlci9pLFxuICAgICAgL3NlcmlhbGl6ZXIvaSxcbiAgICAgIC9kZXNlcmlhbGl6ZXIvaVxuICAgIF07XG5cbiAgICBsZXQgY29uZmlkZW5jZSA9IDA7XG4gICAgbGV0IHJlYXNvbmluZyA9ICcnO1xuICAgIGxldCBzdWdnZXN0ZWRSZXBsYWNlbWVudCA9ICcnO1xuICAgIGxldCBpc0ludGVudGlvbmFsID0gZmFsc2U7XG4gICAgbGV0IGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LlRZUEVfQVNTRVJUSU9OO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4dGVybmFsIHNlcnZpY2UgaW50ZWdyYXRpb24gKGludGVudGlvbmFsKVxuICAgIGlmIChleHRlcm5hbFNlcnZpY2VQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuODU7XG4gICAgICByZWFzb25pbmcgPSAnRXh0ZXJuYWwgc2VydmljZSBpbnRlZ3JhdGlvbiByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIHVua25vd24gcmVzcG9uc2Ugc3RydWN0dXJlcyc7XG4gICAgICBpc0ludGVudGlvbmFsID0gdHJ1ZTtcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIHNlcnZpY2UgY29uZmlndXJhdGlvbiAoaW50ZW50aW9uYWwpXG4gICAgZWxzZSBpZiAoc2VydmljZUNvbmZpZ1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpKSB7XG4gICAgICBjb25maWRlbmNlID0gMC44O1xuICAgICAgcmVhc29uaW5nID0gJ1NlcnZpY2UgY29uZmlndXJhdGlvbiByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIGR5bmFtaWMgc2V0dXAgb3B0aW9ucyc7XG4gICAgICBpc0ludGVudGlvbmFsID0gdHJ1ZTtcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgZGF0YSB0cmFuc2Zvcm1hdGlvbiAoY2FuIGJlIG1vcmUgc3BlY2lmaWMpXG4gICAgZWxzZSBpZiAoZGF0YVRyYW5zZm9ybVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpKSB7XG4gICAgICBjb25maWRlbmNlID0gMC43NTtcbiAgICAgIHJlYXNvbmluZyA9ICdEYXRhIHRyYW5zZm9ybWF0aW9uIGNhbiB1c2Ugc3BlY2lmaWMgaW50ZXJmYWNlIHR5cGVzIGZvciBiZXR0ZXIgdHlwZSBzYWZldHknO1xuICAgICAgc3VnZ2VzdGVkUmVwbGFjZW1lbnQgPSAnUmVjb3JkPHN0cmluZywgdW5rbm93bj4nO1xuICAgICAgaXNJbnRlbnRpb25hbCA9IGZhbHNlO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT047XG4gICAgfVxuICAgIC8vIENoZWNrIGZvciBzZXJ2aWNlIGludGVyZmFjZXMgKGNhbiBiZSBtb3JlIHNwZWNpZmljKVxuICAgIGVsc2UgaWYgKHNlcnZpY2VJbnRlcmZhY2VQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuNztcbiAgICAgIHJlYXNvbmluZyA9ICdTZXJ2aWNlIGludGVyZmFjZXMgY2FuIHVzZSBzcGVjaWZpYyBpbnRlcmZhY2UgdHlwZXMgZm9yIGJldHRlciBjb250cmFjdCBkZWZpbml0aW9uJztcbiAgICAgIHN1Z2dlc3RlZFJlcGxhY2VtZW50ID0gJ1NlcnZpY2VJbnRlcmZhY2UnO1xuICAgICAgaXNJbnRlbnRpb25hbCA9IGZhbHNlO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT047XG4gICAgfVxuICAgIC8vIEdlbmVyYWwgc2VydmljZSBjb250ZXh0XG4gICAgZWxzZSBpZiAobG93ZXJDb2RlLmluY2x1ZGVzKCdzZXJ2aWNlJykgJiYgKGxvd2VyQ29kZS5pbmNsdWRlcygnZGF0YScpIHx8IGxvd2VyQ29kZS5pbmNsdWRlcygncmVzcG9uc2UnKSkpIHtcbiAgICAgIGNvbmZpZGVuY2UgPSAwLjY1O1xuICAgICAgcmVhc29uaW5nID0gJ1NlcnZpY2UgbGF5ZXIgZGF0YSBoYW5kbGluZyBjYW4gbGlrZWx5IHVzZSBtb3JlIHNwZWNpZmljIHR5cGVzJztcbiAgICAgIHN1Z2dlc3RlZFJlcGxhY2VtZW50ID0gJ3Vua25vd24nO1xuICAgICAgaXNJbnRlbnRpb25hbCA9IGZhbHNlO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT047XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZGVuY2UgPiAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0ludGVudGlvbmFsLFxuICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICByZWFzb25pbmcsXG4gICAgICAgIHN1Z2dlc3RlZFJlcGxhY2VtZW50OiBpc0ludGVudGlvbmFsID8gdW5kZWZpbmVkIDogc3VnZ2VzdGVkUmVwbGFjZW1lbnQsXG4gICAgICAgIHJlcXVpcmVzRG9jdW1lbnRhdGlvbjogaXNJbnRlbnRpb25hbCxcbiAgICAgICAgY2F0ZWdvcnlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVJbnRlbGxpZ2VuY2VEb21haW4oY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogQW55VHlwZUNsYXNzaWZpY2F0aW9uIHwgbnVsbCB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IHRoaXMuZ2V0Q29tYmluZWRDb2RlKGNvbnRleHQpO1xuICAgIGNvbnN0IGxvd2VyQ29kZSA9IGNvZGVXaXRoU3Vycm91bmRpbmcudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIEludGVsbGlnZW5jZSBzeXN0ZW0gcGF0dGVybnNcbiAgICBjb25zdCBpbnRlbGxpZ2VuY2VQYXR0ZXJucyA9IFtcbiAgICAgIC9pbnRlbGxpZ2VuY2VcXHMqc3lzdGVtL2ksXG4gICAgICAvZW50ZXJwcmlzZVxccyppbnRlbGxpZ2VuY2UvaSxcbiAgICAgIC9jYW1wYWlnblxccyppbnRlbGxpZ2VuY2UvaSxcbiAgICAgIC9hbmFseXRpY3NcXHMqZW5naW5lL2ksXG4gICAgICAvcGF0dGVyblxccypyZWNvZ25pdGlvbi9pLFxuICAgICAgL21hY2hpbmVcXHMqbGVhcm5pbmcvaSxcbiAgICAgIC9haVxccypzeXN0ZW0vaSxcbiAgICAgIC9wcmVkaWN0aXZlXFxzKmFuYWx5dGljcy9pXG4gICAgXTtcblxuICAgIC8vIER5bmFtaWMgYW5hbHlzaXMgcGF0dGVybnNcbiAgICBjb25zdCBkeW5hbWljQW5hbHlzaXNQYXR0ZXJucyA9IFtcbiAgICAgIC9keW5hbWljXFxzKmFuYWx5c2lzL2ksXG4gICAgICAvcnVudGltZVxccyphbmFseXNpcy9pLFxuICAgICAgL2FkYXB0aXZlXFxzKmFsZ29yaXRobS9pLFxuICAgICAgL2xlYXJuaW5nXFxzKmFsZ29yaXRobS9pLFxuICAgICAgL2V2b2x2aW5nXFxzKnBhdHRlcm4vaSxcbiAgICAgIC9zZWxmXFxzKmFkanVzdGluZy9pXG4gICAgXTtcblxuICAgIGxldCBjb25maWRlbmNlID0gMDtcbiAgICBsZXQgcmVhc29uaW5nID0gJyc7XG4gICAgbGV0IGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGludGVsbGlnZW5jZSBzeXN0ZW1zIChoaWdoIGNvbmZpZGVuY2UgZm9yIGludGVudGlvbmFsKVxuICAgIGlmIChpbnRlbGxpZ2VuY2VQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuOTtcbiAgICAgIHJlYXNvbmluZyA9ICdJbnRlbGxpZ2VuY2Ugc3lzdGVtcyByZXF1aXJlIGZsZXhpYmxlIHR5cGluZyBmb3IgZXZvbHZpbmcgYW5hbHl0aWNhbCBwYXR0ZXJucyc7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5EWU5BTUlDX0NPTkZJRztcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIGR5bmFtaWMgYW5hbHlzaXNcbiAgICBlbHNlIGlmIChkeW5hbWljQW5hbHlzaXNQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuODU7XG4gICAgICByZWFzb25pbmcgPSAnRHluYW1pYyBhbmFseXNpcyBzeXN0ZW1zIHJlcXVpcmUgZmxleGlibGUgdHlwaW5nIGZvciBhZGFwdGl2ZSBiZWhhdmlvcic7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5EWU5BTUlDX0NPTkZJRztcbiAgICB9XG4gICAgLy8gR2VuZXJhbCBpbnRlbGxpZ2VuY2UgY29udGV4dFxuICAgIGVsc2UgaWYgKGxvd2VyQ29kZS5pbmNsdWRlcygnaW50ZWxsaWdlbmNlJykgfHwgbG93ZXJDb2RlLmluY2x1ZGVzKCdhbmFseXRpY3MnKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuNzU7XG4gICAgICByZWFzb25pbmcgPSAnSW50ZWxsaWdlbmNlIGRvbWFpbiByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIGNvbXBsZXggYW5hbHl0aWNhbCBkYXRhIHN0cnVjdHVyZXMnO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuRFlOQU1JQ19DT05GSUc7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZGVuY2UgPiAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0ludGVudGlvbmFsOiB0cnVlLFxuICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICByZWFzb25pbmcsXG4gICAgICAgIHJlcXVpcmVzRG9jdW1lbnRhdGlvbjogdHJ1ZSxcbiAgICAgICAgY2F0ZWdvcnlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVBc3Ryb2xvZ2ljYWxEb21haW4oY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogQW55VHlwZUNsYXNzaWZpY2F0aW9uIHwgbnVsbCB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IHRoaXMuZ2V0Q29tYmluZWRDb2RlKGNvbnRleHQpO1xuICAgIGNvbnN0IGxvd2VyQ29kZSA9IGNvZGVXaXRoU3Vycm91bmRpbmcudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIFBsYW5ldGFyeSBwb3NpdGlvbiByZWNvZ25pdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IHBsYW5ldGFyeVBhdHRlcm5zID0gW1xuICAgICAgL3BsYW5ldGFyeVxccypwb3NpdGlvbi9pLFxuICAgICAgL3BsYW5ldFxcdypcXHMqZGF0YS9pLFxuICAgICAgL2FzdHJvXFx3KlxccypjYWxjdWxhdGlvbi9pLFxuICAgICAgL2VwaGVtZXJpcy9pLFxuICAgICAgL3pvZGlhY1xccypzaWduL2ksXG4gICAgICAvY2VsZXN0aWFsXFxzKmJvZHkvaSxcbiAgICAgIC9hc3Ryb25vbWljYWxcXHMqZGF0YS9pLFxuICAgICAgL3RyYW5zaXRcXHMqZGF0ZS9pLFxuICAgICAgL2x1bmFyXFxzKnBoYXNlL2ksXG4gICAgICAvc29sYXJcXHMqcG9zaXRpb24vaVxuICAgIF07XG5cbiAgICAvLyBFeHRlcm5hbCBhc3Ryb25vbXkgQVBJIHBhdHRlcm5zXG4gICAgY29uc3QgYXN0cm9ub215QXBpUGF0dGVybnMgPSBbXG4gICAgICAvbmFzYVxccypqcGwvaSxcbiAgICAgIC9ob3Jpem9uc1xccyphcGkvaSxcbiAgICAgIC9zd2lzc1xccyplcGhlbWVyaXMvaSxcbiAgICAgIC9hc3Ryb25vbXlcXHMqZW5naW5lL2ksXG4gICAgICAvdGltZWFuZGRhdGVcXHMqYXBpL2ksXG4gICAgICAvYXN0cm9ub21pY2FsXFxzKmFwaS9pLFxuICAgICAgL2dldFJlbGlhYmxlUGxhbmV0YXJ5UG9zaXRpb25zL2ksXG4gICAgICAvcGxhbmV0YXJ5Q29uc2lzdGVuY3lDaGVjay9pXG4gICAgXTtcblxuICAgIC8vIEFzdHJvbG9naWNhbCBjYWxjdWxhdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IGNhbGN1bGF0aW9uUGF0dGVybnMgPSBbXG4gICAgICAvZWxlbWVudGFsXFxzKnByb3BlcnRpZXMvaSxcbiAgICAgIC9jb21wYXRpYmlsaXR5XFxzKnNjb3JlL2ksXG4gICAgICAvYXN0cm9sb2dpY2FsXFxzKmluZmx1ZW5jZS9pLFxuICAgICAgL3BsYW5ldGFyeVxccypjb3JyZXNwb25kZW5jZS9pLFxuICAgICAgL3NlYXNvbmFsXFxzKmNhbGN1bGF0aW9uL2ksXG4gICAgICAvcmV0cm9ncmFkZVxccyptb3Rpb24vaSxcbiAgICAgIC9hc3BlY3RcXHMqY2FsY3VsYXRpb24vaSxcbiAgICAgIC9ob3VzZVxccypwb3NpdGlvbi9pXG4gICAgXTtcblxuICAgIGxldCBjb25maWRlbmNlID0gMDtcbiAgICBsZXQgcmVhc29uaW5nID0gJyc7XG4gICAgbGV0IGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSTtcblxuICAgIC8vIENoZWNrIGZvciBwbGFuZXRhcnkgcG9zaXRpb24gZGF0YSAoaGlnaGVzdCBjb25maWRlbmNlKVxuICAgIGlmIChwbGFuZXRhcnlQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuOTtcbiAgICAgIHJlYXNvbmluZyA9ICdBc3Ryb2xvZ2ljYWwgcGxhbmV0YXJ5IHBvc2l0aW9uIGRhdGEgcmVxdWlyZXMgZmxleGlibGUgdHlwaW5nIGZvciBleHRlcm5hbCBBUEkgcmVzcG9uc2VzJztcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIGFzdHJvbm9teSBBUEkgaW50ZWdyYXRpb25cbiAgICBlbHNlIGlmIChhc3Ryb25vbXlBcGlQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuODU7XG4gICAgICByZWFzb25pbmcgPSAnQXN0cm9ub215IEFQSSBpbnRlZ3JhdGlvbiByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIHZhcnlpbmcgcmVzcG9uc2UgZm9ybWF0cyc7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEk7XG4gICAgfVxuICAgIC8vIENoZWNrIGZvciBhc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb25zXG4gICAgZWxzZSBpZiAoY2FsY3VsYXRpb25QYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuODtcbiAgICAgIHJlYXNvbmluZyA9ICdBc3Ryb2xvZ2ljYWwgY2FsY3VsYXRpb25zIHJlcXVpcmUgZmxleGlibGUgdHlwaW5nIGZvciBkeW5hbWljIGVsZW1lbnRhbCBwcm9wZXJ0aWVzJztcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuICAgIH1cbiAgICAvLyBHZW5lcmFsIGFzdHJvbG9naWNhbCBjb250ZXh0XG4gICAgZWxzZSBpZiAobG93ZXJDb2RlLmluY2x1ZGVzKCdhc3RybycpIHx8IGxvd2VyQ29kZS5pbmNsdWRlcygncGxhbmV0YXJ5JykgfHwgbG93ZXJDb2RlLmluY2x1ZGVzKCd6b2RpYWMnKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuNzU7XG4gICAgICByZWFzb25pbmcgPSAnQXN0cm9sb2dpY2FsIGRvbWFpbiBjb2RlIG9mdGVuIHJlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3IgY29zbWljIGRhdGEgc3RydWN0dXJlcyc7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5MRUdBQ1lfQ09NUEFUSUJJTElUWTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlkZW5jZSA+IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzSW50ZW50aW9uYWw6IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2UsXG4gICAgICAgIHJlYXNvbmluZyxcbiAgICAgICAgcmVxdWlyZXNEb2N1bWVudGF0aW9uOiB0cnVlLFxuICAgICAgICBjYXRlZ29yeVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYW5hbHl6ZVJlY2lwZURvbWFpbihjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBBbnlUeXBlQ2xhc3NpZmljYXRpb24gfCBudWxsIHtcbiAgICBjb25zdCBjb2RlV2l0aFN1cnJvdW5kaW5nID0gdGhpcy5nZXRDb21iaW5lZENvZGUoY29udGV4dCk7XG4gICAgY29uc3QgbG93ZXJDb2RlID0gY29kZVdpdGhTdXJyb3VuZGluZy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gRm9vZC1yZWxhdGVkIHR5cGUgc3VnZ2VzdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IGluZ3JlZGllbnRQYXR0ZXJucyA9IFtcbiAgICAgIC9pbmdyZWRpZW50XFxzKmRhdGEvaSxcbiAgICAgIC9pbmdyZWRpZW50XFxzKnByb3BlcnRpZXMvaSxcbiAgICAgIC9lbGVtZW50YWxcXHMqaW5ncmVkaWVudC9pLFxuICAgICAgL2N1bGluYXJ5XFxzKmluZ3JlZGllbnQvaSxcbiAgICAgIC9mb29kXFxzKml0ZW0vaSxcbiAgICAgIC9udXRyaXRpb25hbFxccypkYXRhL2ksXG4gICAgICAvc3Bvb25hY3VsYXJcXHMqYXBpL2ksXG4gICAgICAvdXNkYVxccypmb29kL2lcbiAgICBdO1xuXG4gICAgY29uc3QgcmVjaXBlUGF0dGVybnMgPSBbXG4gICAgICAvcmVjaXBlXFxzKmRhdGEvaSxcbiAgICAgIC9yZWNpcGVcXHMqaW5mb3JtYXRpb24vaSxcbiAgICAgIC9jb29raW5nXFxzKm1ldGhvZC9pLFxuICAgICAgL2N1bGluYXJ5XFxzKnJlY2lwZS9pLFxuICAgICAgL21lYWxcXHMqcGxhbi9pLFxuICAgICAgL2Zvb2RcXHMqcmVjb21tZW5kYXRpb24vaSxcbiAgICAgIC9hbGNoZW1pY2FsXFxzKnJlY2lwZS9pLFxuICAgICAgL2VsZW1lbnRhbFxccypyZWNpcGUvaVxuICAgIF07XG5cbiAgICBjb25zdCBjdWlzaW5lUGF0dGVybnMgPSBbXG4gICAgICAvY3Vpc2luZVxccypkYXRhL2ksXG4gICAgICAvY3VsdHVyYWxcXHMqZm9vZC9pLFxuICAgICAgL2V0aG5pY1xccypjdWlzaW5lL2ksXG4gICAgICAvdHJhZGl0aW9uYWxcXHMqcmVjaXBlL2ksXG4gICAgICAvcmVnaW9uYWxcXHMqZm9vZC9pXG4gICAgXTtcblxuICAgIC8vIEV4dGVybmFsIGZvb2QgQVBJIHBhdHRlcm5zXG4gICAgY29uc3QgZm9vZEFwaVBhdHRlcm5zID0gW1xuICAgICAgL3Nwb29uYWN1bGFyL2ksXG4gICAgICAvZm9vZFxccyphcGkvaSxcbiAgICAgIC9udXRyaXRpb25cXHMqYXBpL2ksXG4gICAgICAvcmVjaXBlXFxzKmFwaS9pLFxuICAgICAgL3VzZGFcXHMqYXBpL2ksXG4gICAgICAvZm9vZFxccypkYXRhYmFzZS9pXG4gICAgXTtcblxuICAgIGxldCBjb25maWRlbmNlID0gMDtcbiAgICBsZXQgcmVhc29uaW5nID0gJyc7XG4gICAgbGV0IHN1Z2dlc3RlZFJlcGxhY2VtZW50ID0gJyc7XG4gICAgbGV0IGlzSW50ZW50aW9uYWwgPSBmYWxzZTtcbiAgICBsZXQgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT047XG5cbiAgICAvLyBDaGVjayBmb3IgZXh0ZXJuYWwgZm9vZCBBUEkgaW50ZWdyYXRpb24gKGludGVudGlvbmFsKVxuICAgIGlmIChmb29kQXBpUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkpIHtcbiAgICAgIGNvbmZpZGVuY2UgPSAwLjg1O1xuICAgICAgcmVhc29uaW5nID0gJ0Zvb2QgQVBJIGludGVncmF0aW9uIHJlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3IgdmFyeWluZyByZXNwb25zZSBzdHJ1Y3R1cmVzJztcbiAgICAgIGlzSW50ZW50aW9uYWwgPSB0cnVlO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJO1xuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgaW5ncmVkaWVudCBkYXRhIChjYW4gYmUgdHlwZWQgbW9yZSBzcGVjaWZpY2FsbHkpXG4gICAgZWxzZSBpZiAoaW5ncmVkaWVudFBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpKSB7XG4gICAgICBjb25maWRlbmNlID0gMC44O1xuICAgICAgcmVhc29uaW5nID0gJ0luZ3JlZGllbnQgZGF0YSBjYW4gdXNlIHNwZWNpZmljIEluZ3JlZGllbnQgaW50ZXJmYWNlIHR5cGUnO1xuICAgICAgc3VnZ2VzdGVkUmVwbGFjZW1lbnQgPSAnSW5ncmVkaWVudCc7XG4gICAgICBpc0ludGVudGlvbmFsID0gZmFsc2U7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5UWVBFX0FTU0VSVElPTjtcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIHJlY2lwZSBkYXRhIChjYW4gYmUgdHlwZWQgbW9yZSBzcGVjaWZpY2FsbHkpXG4gICAgZWxzZSBpZiAocmVjaXBlUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkpIHtcbiAgICAgIGNvbmZpZGVuY2UgPSAwLjg7XG4gICAgICByZWFzb25pbmcgPSAnUmVjaXBlIGRhdGEgY2FuIHVzZSBzcGVjaWZpYyBSZWNpcGUgaW50ZXJmYWNlIHR5cGUnO1xuICAgICAgc3VnZ2VzdGVkUmVwbGFjZW1lbnQgPSAnUmVjaXBlJztcbiAgICAgIGlzSW50ZW50aW9uYWwgPSBmYWxzZTtcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LlRZUEVfQVNTRVJUSU9OO1xuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgY3Vpc2luZSBkYXRhIChjYW4gYmUgdHlwZWQgbW9yZSBzcGVjaWZpY2FsbHkpXG4gICAgZWxzZSBpZiAoY3Vpc2luZVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpKSB7XG4gICAgICBjb25maWRlbmNlID0gMC43NTtcbiAgICAgIHJlYXNvbmluZyA9ICdDdWlzaW5lIGRhdGEgY2FuIHVzZSBzcGVjaWZpYyBDdWlzaW5lIGludGVyZmFjZSB0eXBlJztcbiAgICAgIHN1Z2dlc3RlZFJlcGxhY2VtZW50ID0gJ0N1aXNpbmUnO1xuICAgICAgaXNJbnRlbnRpb25hbCA9IGZhbHNlO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT047XG4gICAgfVxuICAgIC8vIEdlbmVyYWwgZm9vZC1yZWxhdGVkIGNvbnRleHRcbiAgICBlbHNlIGlmIChsb3dlckNvZGUuaW5jbHVkZXMoJ2luZ3JlZGllbnQnKSB8fCBsb3dlckNvZGUuaW5jbHVkZXMoJ3JlY2lwZScpIHx8IGxvd2VyQ29kZS5pbmNsdWRlcygnZm9vZCcpKSB7XG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGxpa2VseSBhbiBBUEkgcmVzcG9uc2Ugb3IgY29uZmlndXJhdGlvblxuICAgICAgaWYgKGxvd2VyQ29kZS5pbmNsdWRlcygncmVzcG9uc2UnKSB8fCBsb3dlckNvZGUuaW5jbHVkZXMoJ2FwaScpIHx8IGxvd2VyQ29kZS5pbmNsdWRlcygnY29uZmlnJykpIHtcbiAgICAgICAgY29uZmlkZW5jZSA9IDAuNztcbiAgICAgICAgcmVhc29uaW5nID0gJ0Zvb2QtcmVsYXRlZCBBUEkgcmVzcG9uc2Ugb3IgY29uZmlndXJhdGlvbiBtYXkgcmVxdWlyZSBmbGV4aWJsZSB0eXBpbmcnO1xuICAgICAgICBpc0ludGVudGlvbmFsID0gdHJ1ZTtcbiAgICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlkZW5jZSA9IDAuNztcbiAgICAgICAgcmVhc29uaW5nID0gJ0Zvb2QtcmVsYXRlZCBkYXRhIGNhbiBsaWtlbHkgdXNlIG1vcmUgc3BlY2lmaWMgdHlwZXMgKEluZ3JlZGllbnQsIFJlY2lwZSwgZXRjLiknO1xuICAgICAgICBzdWdnZXN0ZWRSZXBsYWNlbWVudCA9ICdJbmdyZWRpZW50IHwgUmVjaXBlIHwgQ3Vpc2luZSc7XG4gICAgICAgIGlzSW50ZW50aW9uYWwgPSBmYWxzZTtcbiAgICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT047XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZGVuY2UgPiAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0ludGVudGlvbmFsLFxuICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICByZWFzb25pbmcsXG4gICAgICAgIHN1Z2dlc3RlZFJlcGxhY2VtZW50OiBpc0ludGVudGlvbmFsID8gdW5kZWZpbmVkIDogc3VnZ2VzdGVkUmVwbGFjZW1lbnQsXG4gICAgICAgIHJlcXVpcmVzRG9jdW1lbnRhdGlvbjogaXNJbnRlbnRpb25hbCxcbiAgICAgICAgY2F0ZWdvcnlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVDYW1wYWlnbkRvbWFpbihjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBBbnlUeXBlQ2xhc3NpZmljYXRpb24gfCBudWxsIHtcbiAgICBjb25zdCBjb2RlV2l0aFN1cnJvdW5kaW5nID0gdGhpcy5nZXRDb21iaW5lZENvZGUoY29udGV4dCk7XG4gICAgY29uc3QgbG93ZXJDb2RlID0gY29kZVdpdGhTdXJyb3VuZGluZy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ2FtcGFpZ24gc3lzdGVtIGR5bmFtaWMgY29uZmlndXJhdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IGNhbXBhaWduQ29uZmlnUGF0dGVybnMgPSBbXG4gICAgICAvY2FtcGFpZ25cXHMqY29uZmlnL2ksXG4gICAgICAvY2FtcGFpZ25cXHMqcGFyYW1ldGVycy9pLFxuICAgICAgL2NhbXBhaWduXFxzKnNldHRpbmdzL2ksXG4gICAgICAvZHluYW1pY1xccypjb25maWcvaSxcbiAgICAgIC9mbGV4aWJsZVxccypjb25maWcvaSxcbiAgICAgIC9ydW50aW1lXFxzKmNvbmZpZy9pLFxuICAgICAgL2FkYXB0aXZlXFxzKmNvbmZpZy9pXG4gICAgXTtcblxuICAgIC8vIENhbXBhaWduIG1ldHJpY3MgYW5kIGludGVsbGlnZW5jZSBwYXR0ZXJuc1xuICAgIGNvbnN0IG1ldHJpY3NQYXR0ZXJucyA9IFtcbiAgICAgIC9jYW1wYWlnblxccyptZXRyaWNzL2ksXG4gICAgICAvcHJvZ3Jlc3NcXHMqbWV0cmljcy9pLFxuICAgICAgL3F1YWxpdHlcXHMqbWV0cmljcy9pLFxuICAgICAgL3BlcmZvcm1hbmNlXFxzKm1ldHJpY3MvaSxcbiAgICAgIC9pbnRlbGxpZ2VuY2VcXHMqZGF0YS9pLFxuICAgICAgL2FuYWx5dGljc1xccypkYXRhL2ksXG4gICAgICAvY2FtcGFpZ25cXHMqaW50ZWxsaWdlbmNlL2ksXG4gICAgICAvZW50ZXJwcmlzZVxccyppbnRlbGxpZ2VuY2UvaVxuICAgIF07XG5cbiAgICAvLyBDYW1wYWlnbiBleGVjdXRpb24gYW5kIGF1dG9tYXRpb24gcGF0dGVybnNcbiAgICBjb25zdCBleGVjdXRpb25QYXR0ZXJucyA9IFtcbiAgICAgIC9jYW1wYWlnblxccypleGVjdXRpb24vaSxcbiAgICAgIC9iYXRjaFxccypwcm9jZXNzaW5nL2ksXG4gICAgICAvYXV0b21hdGlvblxccypzY3JpcHQvaSxcbiAgICAgIC9jYW1wYWlnblxccypwaGFzZS9pLFxuICAgICAgL3NhZmV0eVxccypwcm90b2NvbC9pLFxuICAgICAgL3JvbGxiYWNrXFxzKm1lY2hhbmlzbS9pLFxuICAgICAgL3ZhbGlkYXRpb25cXHMqZnJhbWV3b3JrL2lcbiAgICBdO1xuXG4gICAgLy8gQ2FtcGFpZ24gdG9vbCBpbnRlZ3JhdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IHRvb2xJbnRlZ3JhdGlvblBhdHRlcm5zID0gW1xuICAgICAgL3R5cGVzY3JpcHRcXHMqZXJyb3IvaSxcbiAgICAgIC9saW50aW5nXFxzKndhcm5pbmcvaSxcbiAgICAgIC9lc2xpbnRcXHMqcmVzdWx0L2ksXG4gICAgICAvYnVpbGRcXHMqdmFsaWRhdGlvbi9pLFxuICAgICAgL2NvbXBpbGF0aW9uXFxzKnJlc3VsdC9pLFxuICAgICAgL2Vycm9yXFxzKmFuYWx5c2lzL2ksXG4gICAgICAvZml4XFxzKnN0cmF0ZWd5L2lcbiAgICBdO1xuXG4gICAgbGV0IGNvbmZpZGVuY2UgPSAwO1xuICAgIGxldCByZWFzb25pbmcgPSAnJztcbiAgICBsZXQgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuRFlOQU1JQ19DT05GSUc7XG5cbiAgICAvLyBDaGVjayBmb3IgY2FtcGFpZ24gY29uZmlndXJhdGlvbiAoaGlnaGVzdCBjb25maWRlbmNlIGZvciBpbnRlbnRpb25hbClcbiAgICBpZiAoY2FtcGFpZ25Db25maWdQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuOTtcbiAgICAgIHJlYXNvbmluZyA9ICdDYW1wYWlnbiBzeXN0ZW0gY29uZmlndXJhdGlvbiByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIGR5bmFtaWMgYmVoYXZpb3IgYWRhcHRhdGlvbic7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5EWU5BTUlDX0NPTkZJRztcbiAgICB9XG4gICAgLy8gQ2hlY2sgZm9yIG1ldHJpY3MgYW5kIGludGVsbGlnZW5jZSBkYXRhXG4gICAgZWxzZSBpZiAobWV0cmljc1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpKSB7XG4gICAgICBjb25maWRlbmNlID0gMC44NTtcbiAgICAgIHJlYXNvbmluZyA9ICdDYW1wYWlnbiBtZXRyaWNzIGFuZCBpbnRlbGxpZ2VuY2UgZGF0YSByZXF1aXJlIGZsZXhpYmxlIHR5cGluZyBmb3IgZXZvbHZpbmcgYW5hbHl0aWNzJztcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgY2FtcGFpZ24gZXhlY3V0aW9uIGNvbnRleHRcbiAgICBlbHNlIGlmIChleGVjdXRpb25QYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuODtcbiAgICAgIHJlYXNvbmluZyA9ICdDYW1wYWlnbiBleGVjdXRpb24gc3lzdGVtIHJlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3IgZGl2ZXJzZSB0b29sIGludGVncmF0aW9uJztcbiAgICAgIGNhdGVnb3J5ID0gQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHO1xuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgdG9vbCBpbnRlZ3JhdGlvblxuICAgIGVsc2UgaWYgKHRvb2xJbnRlZ3JhdGlvblBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpKSB7XG4gICAgICBjb25maWRlbmNlID0gMC43NTtcbiAgICAgIHJlYXNvbmluZyA9ICdDYW1wYWlnbiB0b29sIGludGVncmF0aW9uIHJlcXVpcmVzIGZsZXhpYmxlIHR5cGluZyBmb3IgdmFyeWluZyB0b29sIG91dHB1dHMnO1xuICAgICAgY2F0ZWdvcnkgPSBBbnlUeXBlQ2F0ZWdvcnkuRVhURVJOQUxfQVBJO1xuICAgIH1cbiAgICAvLyBHZW5lcmFsIGNhbXBhaWduIGNvbnRleHRcbiAgICBlbHNlIGlmIChsb3dlckNvZGUuaW5jbHVkZXMoJ2NhbXBhaWduJykgfHwgbG93ZXJDb2RlLmluY2x1ZGVzKCdpbnRlbGxpZ2VuY2UnKSB8fCBsb3dlckNvZGUuaW5jbHVkZXMoJ2F1dG9tYXRpb24nKSkge1xuICAgICAgY29uZmlkZW5jZSA9IDAuNztcbiAgICAgIHJlYXNvbmluZyA9ICdDYW1wYWlnbiBzeXN0ZW0gY29udGV4dCBvZnRlbiByZXF1aXJlcyBmbGV4aWJsZSB0eXBpbmcgZm9yIGR5bmFtaWMgb3BlcmF0aW9ucyc7XG4gICAgICBjYXRlZ29yeSA9IEFueVR5cGVDYXRlZ29yeS5EWU5BTUlDX0NPTkZJRztcbiAgICB9XG5cbiAgICBpZiAoY29uZmlkZW5jZSA+IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzSW50ZW50aW9uYWw6IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2UsXG4gICAgICAgIHJlYXNvbmluZyxcbiAgICAgICAgcmVxdWlyZXNEb2N1bWVudGF0aW9uOiB0cnVlLFxuICAgICAgICBjYXRlZ29yeVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIENvbmZpZGVuY2UgY2FsY3VsYXRpb24gbWV0aG9kcyBmb3IgcGF0dGVybiByZWNvZ25pdGlvbiBhbGdvcml0aG1zXG4gIHByaXZhdGUgY2FsY3VsYXRlRXJyb3JIYW5kbGluZ0NvbmZpZGVuY2UoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogbnVtYmVyIHtcbiAgICBjb25zdCBjb2RlV2l0aFN1cnJvdW5kaW5nID0gdGhpcy5nZXRDb21iaW5lZENvZGUoY29udGV4dCk7XG4gICAgbGV0IGNvbmZpZGVuY2UgPSAwO1xuICAgIGxldCBtYXRjaENvdW50ID0gMDtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB0aGlzLnJ1bGVzLmVycm9ySGFuZGxpbmdQYXR0ZXJucykge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkge1xuICAgICAgICBtYXRjaENvdW50Kys7XG4gICAgICAgIGNvbmZpZGVuY2UgKz0gMC4zOyAvLyBFYWNoIHBhdHRlcm4gbWF0Y2ggYWRkcyBjb25maWRlbmNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQm9vc3QgY29uZmlkZW5jZSBmb3IgY2F0Y2ggYmxvY2tzIGFuZCBlcnJvciB2YXJpYWJsZXNcbiAgICBpZiAoY29kZVdpdGhTdXJyb3VuZGluZy5pbmNsdWRlcygnY2F0Y2gnKSAmJiBjb2RlV2l0aFN1cnJvdW5kaW5nLmluY2x1ZGVzKCdhbnknKSkge1xuICAgICAgY29uZmlkZW5jZSArPSAwLjQ7XG4gICAgfVxuXG4gICAgLy8gQWRkaXRpb25hbCBjb250ZXh0IGNsdWVzXG4gICAgaWYgKGNvZGVXaXRoU3Vycm91bmRpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZXJyb3InKSB8fFxuICAgICAgICBjb2RlV2l0aFN1cnJvdW5kaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2V4Y2VwdGlvbicpKSB7XG4gICAgICBjb25maWRlbmNlICs9IDAuMjtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5taW4oY29uZmlkZW5jZSwgMC45NSk7IC8vIENhcCBhdCA5NSVcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRXh0ZXJuYWxBcGlDb25maWRlbmNlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IG51bWJlciB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IHRoaXMuZ2V0Q29tYmluZWRDb2RlKGNvbnRleHQpO1xuICAgIGxldCBjb25maWRlbmNlID0gMDtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB0aGlzLnJ1bGVzLmV4dGVybmFsQXBpUGF0dGVybnMpIHtcbiAgICAgIGlmIChwYXR0ZXJuLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpIHtcbiAgICAgICAgY29uZmlkZW5jZSArPSAwLjI1O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFQSS1yZWxhdGVkIGtleXdvcmRzIGJvb3N0IGNvbmZpZGVuY2VcbiAgICBjb25zdCBhcGlLZXl3b3JkcyA9IFsnZmV0Y2gnLCAnYXhpb3MnLCAnYXBpJywgJ3Jlc3BvbnNlJywgJ3JlcXVlc3QnLCAnaHR0cCcsICdqc29uJ107XG4gICAgY29uc3QgZm91bmRLZXl3b3JkcyA9IGFwaUtleXdvcmRzLmZpbHRlcihrZXl3b3JkID0+XG4gICAgICBjb2RlV2l0aFN1cnJvdW5kaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZClcbiAgICApO1xuICAgIGNvbmZpZGVuY2UgKz0gZm91bmRLZXl3b3Jkcy5sZW5ndGggKiAwLjE7XG5cbiAgICByZXR1cm4gTWF0aC5taW4oY29uZmlkZW5jZSwgMC45KTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlVGVzdE1vY2tDb25maWRlbmNlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IG51bWJlciB7XG4gICAgaWYgKCFjb250ZXh0LmlzSW5UZXN0RmlsZSkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBjb2RlV2l0aFN1cnJvdW5kaW5nID0gdGhpcy5nZXRDb21iaW5lZENvZGUoY29udGV4dCk7XG4gICAgbGV0IGNvbmZpZGVuY2UgPSAwO1xuXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHRoaXMucnVsZXMudGVzdE1vY2tQYXR0ZXJucykge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkge1xuICAgICAgICBjb25maWRlbmNlICs9IDAuMztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUZXN0LXNwZWNpZmljIGtleXdvcmRzXG4gICAgY29uc3QgdGVzdEtleXdvcmRzID0gWydtb2NrJywgJ3NweScsICdqZXN0JywgJ2Rlc2NyaWJlJywgJ2l0JywgJ3Rlc3QnLCAnZXhwZWN0J107XG4gICAgY29uc3QgZm91bmRLZXl3b3JkcyA9IHRlc3RLZXl3b3Jkcy5maWx0ZXIoa2V5d29yZCA9PlxuICAgICAgY29kZVdpdGhTdXJyb3VuZGluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQpXG4gICAgKTtcbiAgICBjb25maWRlbmNlICs9IGZvdW5kS2V5d29yZHMubGVuZ3RoICogMC4xO1xuXG4gICAgcmV0dXJuIE1hdGgubWluKGNvbmZpZGVuY2UsIDAuOSk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUR5bmFtaWNDb25maWdDb25maWRlbmNlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IG51bWJlciB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IHRoaXMuZ2V0Q29tYmluZWRDb2RlKGNvbnRleHQpO1xuICAgIGxldCBjb25maWRlbmNlID0gMDtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB0aGlzLnJ1bGVzLmR5bmFtaWNDb25maWdQYXR0ZXJucykge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkge1xuICAgICAgICBjb25maWRlbmNlICs9IDAuMjU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ29uZmlndXJhdGlvbi1yZWxhdGVkIGNvbnRleHRcbiAgICBjb25zdCBjb25maWdLZXl3b3JkcyA9IFsnY29uZmlnJywgJ29wdGlvbnMnLCAnc2V0dGluZ3MnLCAncGFyYW1zJywgJ2VudiddO1xuICAgIGNvbnN0IGZvdW5kS2V5d29yZHMgPSBjb25maWdLZXl3b3Jkcy5maWx0ZXIoa2V5d29yZCA9PlxuICAgICAgY29kZVdpdGhTdXJyb3VuZGluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQpXG4gICAgKTtcbiAgICBjb25maWRlbmNlICs9IGZvdW5kS2V5d29yZHMubGVuZ3RoICogMC4xNTtcblxuICAgIHJldHVybiBNYXRoLm1pbihjb25maWRlbmNlLCAwLjg1KTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlTGVnYWN5Q29tcGF0aWJpbGl0eUNvbmZpZGVuY2UoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogbnVtYmVyIHtcbiAgICBjb25zdCBjb2RlV2l0aFN1cnJvdW5kaW5nID0gdGhpcy5nZXRDb21iaW5lZENvZGUoY29udGV4dCk7XG4gICAgbGV0IGNvbmZpZGVuY2UgPSAwO1xuXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHRoaXMucnVsZXMubGVnYWN5Q29tcGF0aWJpbGl0eVBhdHRlcm5zKSB7XG4gICAgICBpZiAocGF0dGVybi50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSB7XG4gICAgICAgIGNvbmZpZGVuY2UgKz0gMC4zO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExlZ2FjeS1yZWxhdGVkIGtleXdvcmRzXG4gICAgY29uc3QgbGVnYWN5S2V5d29yZHMgPSBbJ2xlZ2FjeScsICdkZXByZWNhdGVkJywgJ29sZCcsICdiYWNrd2FyZCcsICdjb21wYXQnXTtcbiAgICBjb25zdCBmb3VuZEtleXdvcmRzID0gbGVnYWN5S2V5d29yZHMuZmlsdGVyKGtleXdvcmQgPT5cbiAgICAgIGNvZGVXaXRoU3Vycm91bmRpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKVxuICAgICk7XG4gICAgY29uZmlkZW5jZSArPSBmb3VuZEtleXdvcmRzLmxlbmd0aCAqIDAuMjtcblxuICAgIHJldHVybiBNYXRoLm1pbihjb25maWRlbmNlLCAwLjgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBcnJheVR5cGVDb25maWRlbmNlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IG51bWJlciB7XG4gICAgY29uc3QgYXJyYXlQYXR0ZXJucyA9IFtcbiAgICAgIC86XFxzKmFueVxcW1xcXS8sXG4gICAgICAvOlxccypBcnJheTxhbnk+LyxcbiAgICAgIC89XFxzKlxcW1xcXVxccyphc1xccyphbnlcXFtcXF0vLFxuICAgICAgL25ld1xccytBcnJheVxccypcXChcXHMqXFwpXFxzKmFzXFxzKmFueVxcW1xcXS9cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGFycmF5UGF0dGVybnMpIHtcbiAgICAgIGlmIChwYXR0ZXJuLnRlc3QoY29udGV4dC5jb2RlU25pcHBldCkpIHtcbiAgICAgICAgcmV0dXJuIDAuOTU7IC8vIFZlcnkgaGlnaCBjb25maWRlbmNlIGZvciBhcnJheSB0eXBlIHJlcGxhY2VtZW50XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJlY29yZFR5cGVDb25maWRlbmNlKGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IG51bWJlciB7XG4gICAgY29uc3QgcmVjb3JkUGF0dGVybnMgPSBbXG4gICAgICAvOlxccypSZWNvcmQ8XFxzKnN0cmluZ1xccyosXFxzKmFueVxccyo+LyxcbiAgICAgIC86XFxzKlJlY29yZDxcXHMqbnVtYmVyXFxzKixcXHMqYW55XFxzKj4vLFxuICAgICAgLzpcXHMqXFx7XFxzKlxcW2tleTpcXHMqc3RyaW5nXFxdXFxzKjpcXHMqYW55XFxzKlxcfS8sXG4gICAgICAvXFx7XFxzKlxcW2tleTpcXHMqc3RyaW5nXFxdXFxzKjpcXHMqYW55XFxzKlxcfS9cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHJlY29yZFBhdHRlcm5zKSB7XG4gICAgICBpZiAocGF0dGVybi50ZXN0KGNvbnRleHQuY29kZVNuaXBwZXQpKSB7XG4gICAgICAgIHJldHVybiAwLjg1OyAvLyBIaWdoIGNvbmZpZGVuY2UgZm9yIFJlY29yZCB0eXBlIHJlcGxhY2VtZW50XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kcyBmb3IgY2xhc3NpZmljYXRpb24gbG9naWNcbiAgcHJpdmF0ZSBnZXRDb21iaW5lZENvZGUoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICByZXR1cm4gWy4uLmNvbnRleHQuc3Vycm91bmRpbmdMaW5lcywgY29udGV4dC5jb2RlU25pcHBldF0uam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGlzSW50ZW50aW9uYWxDYXRlZ29yeShjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5KTogYm9vbGVhbiB7XG4gICAgY29uc3QgaW50ZW50aW9uYWxDYXRlZ29yaWVzID0gW1xuICAgICAgQW55VHlwZUNhdGVnb3J5LkVSUk9SX0hBTkRMSU5HLFxuICAgICAgQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSSxcbiAgICAgIEFueVR5cGVDYXRlZ29yeS5URVNUX01PQ0ssXG4gICAgICBBbnlUeXBlQ2F0ZWdvcnkuRFlOQU1JQ19DT05GSUcsXG4gICAgICBBbnlUeXBlQ2F0ZWdvcnkuTEVHQUNZX0NPTVBBVElCSUxJVFlcbiAgICBdO1xuICAgIHJldHVybiBpbnRlbnRpb25hbENhdGVnb3JpZXMuaW5jbHVkZXMoY2F0ZWdvcnkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSZWFzb25pbmdGb3JDYXRlZ29yeShjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5LCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlYXNvbmluZ01hcCA9IHtcbiAgICAgIFtBbnlUeXBlQ2F0ZWdvcnkuRVJST1JfSEFORExJTkddOiAnVXNlZCBpbiBlcnJvciBoYW5kbGluZyBjb250ZXh0IC0gaW50ZW50aW9uYWwgZm9yIGV4Y2VwdGlvbiBmbGV4aWJpbGl0eScsXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkVYVEVSTkFMX0FQSV06ICdVc2VkIGZvciBleHRlcm5hbCBBUEkgcmVzcG9uc2UgLSBpbnRlbnRpb25hbCBmb3IgdW5rbm93biByZXNwb25zZSBzdHJ1Y3R1cmUnLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5URVNUX01PQ0tdOiAnVXNlZCBpbiB0ZXN0IG1vY2tpbmcgLSBpbnRlbnRpb25hbCBmb3IgdGVzdCBmbGV4aWJpbGl0eScsXG4gICAgICBbQW55VHlwZUNhdGVnb3J5LkRZTkFNSUNfQ09ORklHXTogJ1VzZWQgaW4gZHluYW1pYyBjb25maWd1cmF0aW9uIC0gaW50ZW50aW9uYWwgZm9yIGZsZXhpYmxlIGNvbmZpZyBzdHJ1Y3R1cmUnLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5MRUdBQ1lfQ09NUEFUSUJJTElUWV06ICdVc2VkIGZvciBsZWdhY3kgY29tcGF0aWJpbGl0eSAtIGludGVudGlvbmFsIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5JyxcbiAgICAgIFtBbnlUeXBlQ2F0ZWdvcnkuQVJSQVlfVFlQRV06ICdTaW1wbGUgYXJyYXkgdHlwZSAtIGNhbiBiZSBzYWZlbHkgcmVwbGFjZWQgd2l0aCB1bmtub3duW10nLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5SRUNPUkRfVFlQRV06ICdSZWNvcmQgdHlwZSAtIGNhbiBiZSBzYWZlbHkgcmVwbGFjZWQgd2l0aCB1bmtub3duIHZhbHVlIHR5cGUnLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5GVU5DVElPTl9QQVJBTV06ICdGdW5jdGlvbiBwYXJhbWV0ZXIgLSBtYXkgYmUgcmVwbGFjZWFibGUgd2l0aCBtb3JlIHNwZWNpZmljIHR5cGUnLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5SRVRVUk5fVFlQRV06ICdGdW5jdGlvbiByZXR1cm4gdHlwZSAtIG1heSBiZSByZXBsYWNlYWJsZSB3aXRoIGluZmVycmVkIHR5cGUnLFxuICAgICAgW0FueVR5cGVDYXRlZ29yeS5UWVBFX0FTU0VSVElPTl06ICdUeXBlIGFzc2VydGlvbiAtIG1heSBiZSByZXBsYWNlYWJsZSB3aXRoIG1vcmUgc3BlY2lmaWMgdHlwZSdcbiAgICB9O1xuXG4gICAgcmV0dXJuIHJlYXNvbmluZ01hcFtjYXRlZ29yeV0gfHwgJ1BhdHRlcm4tYmFzZWQgY2xhc3NpZmljYXRpb24nO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdWdnZXN0ZWRSZXBsYWNlbWVudChjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5LCBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoY2F0ZWdvcnkpIHtcbiAgICAgIGNhc2UgQW55VHlwZUNhdGVnb3J5LkFSUkFZX1RZUEU6XG4gICAgICAgIHJldHVybiAndW5rbm93bltdJztcbiAgICAgIGNhc2UgQW55VHlwZUNhdGVnb3J5LlJFQ09SRF9UWVBFOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWdnZXN0UmVjb3JkUmVwbGFjZW1lbnQoY29udGV4dCk7XG4gICAgICBjYXNlIEFueVR5cGVDYXRlZ29yeS5GVU5DVElPTl9QQVJBTTpcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdEZ1bmN0aW9uUGFyYW1SZXBsYWNlbWVudChjb250ZXh0KTtcbiAgICAgIGNhc2UgQW55VHlwZUNhdGVnb3J5LlJFVFVSTl9UWVBFOlxuICAgICAgICByZXR1cm4gdGhpcy5zdWdnZXN0UmV0dXJuVHlwZVJlcGxhY2VtZW50KGNvbnRleHQpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFuYWx5emVGdW5jdGlvbkNvbnRleHQoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogQW55VHlwZUNsYXNzaWZpY2F0aW9uIHwgbnVsbCB7XG4gICAgY29uc3QgY29kZVdpdGhTdXJyb3VuZGluZyA9IHRoaXMuZ2V0Q29tYmluZWRDb2RlKGNvbnRleHQpO1xuXG4gICAgLy8gRnVuY3Rpb24gcGFyYW1ldGVyIGFuYWx5c2lzXG4gICAgaWYgKC9mdW5jdGlvblxccypcXHcqXFxzKlxcKFteKV0qOlxccyphbnkvLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykgfHxcbiAgICAgICAgL1xcKFxccypcXHcrXFxzKjpcXHMqYW55XFxzKlxcKVxccyo9Pi8udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNJbnRlbnRpb25hbDogZmFsc2UsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNixcbiAgICAgICAgcmVhc29uaW5nOiAnRnVuY3Rpb24gcGFyYW1ldGVyIGNhbiBsaWtlbHkgYmUgdHlwZWQgbW9yZSBzcGVjaWZpY2FsbHknLFxuICAgICAgICBzdWdnZXN0ZWRSZXBsYWNlbWVudDogdGhpcy5zdWdnZXN0RnVuY3Rpb25QYXJhbVJlcGxhY2VtZW50KGNvbnRleHQpLFxuICAgICAgICByZXF1aXJlc0RvY3VtZW50YXRpb246IGZhbHNlLFxuICAgICAgICBjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5LkZVTkNUSU9OX1BBUkFNXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0eXBlIGFuYWx5c2lzXG4gICAgaWYgKC86XFxzKmFueVxccypcXHsvLnRlc3QoY29udGV4dC5jb2RlU25pcHBldCkgfHxcbiAgICAgICAgLz0+XFxzKmFueS8udGVzdChjb250ZXh0LmNvZGVTbmlwcGV0KSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNJbnRlbnRpb25hbDogZmFsc2UsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNjUsXG4gICAgICAgIHJlYXNvbmluZzogJ0Z1bmN0aW9uIHJldHVybiB0eXBlIGNhbiBsaWtlbHkgYmUgaW5mZXJyZWQgb3IgdHlwZWQgbW9yZSBzcGVjaWZpY2FsbHknLFxuICAgICAgICBzdWdnZXN0ZWRSZXBsYWNlbWVudDogdGhpcy5zdWdnZXN0UmV0dXJuVHlwZVJlcGxhY2VtZW50KGNvbnRleHQpLFxuICAgICAgICByZXF1aXJlc0RvY3VtZW50YXRpb246IGZhbHNlLFxuICAgICAgICBjYXRlZ29yeTogQW55VHlwZUNhdGVnb3J5LlJFVFVSTl9UWVBFXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWdnZXN0RnVuY3Rpb25QYXJhbVJlcGxhY2VtZW50KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgLy8gQW5hbHl6ZSBwYXJhbWV0ZXIgdXNhZ2UgdG8gc3VnZ2VzdCBiZXR0ZXIgdHlwZXNcbiAgICBpZiAoY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygnc3RyaW5nJykgfHwgY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygnU3RyaW5nJykpIHtcbiAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICB9XG4gICAgaWYgKGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ251bWJlcicpIHx8IGNvbnRleHQuY29kZVNuaXBwZXQuaW5jbHVkZXMoJ051bWJlcicpKSB7XG4gICAgICByZXR1cm4gJ251bWJlcic7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdib29sZWFuJykgfHwgY29udGV4dC5jb2RlU25pcHBldC5pbmNsdWRlcygnQm9vbGVhbicpKSB7XG4gICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xuICAgIH1cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWdnZXN0UmV0dXJuVHlwZVJlcGxhY2VtZW50KGNvbnRleHQ6IENsYXNzaWZpY2F0aW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgLy8gQW5hbHl6ZSByZXR1cm4gc3RhdGVtZW50cyB0byBzdWdnZXN0IGJldHRlciB0eXBlc1xuICAgIGNvbnN0IGNvZGVXaXRoU3Vycm91bmRpbmcgPSB0aGlzLmdldENvbWJpbmVkQ29kZShjb250ZXh0KTtcblxuICAgIGlmICgvcmV0dXJuXFxzK1xcZCsvLnRlc3QoY29kZVdpdGhTdXJyb3VuZGluZykpIHtcbiAgICAgIHJldHVybiAnbnVtYmVyJztcbiAgICB9XG4gICAgaWYgKC9yZXR1cm5cXHMrWydcImBdLy50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSB7XG4gICAgICByZXR1cm4gJ3N0cmluZyc7XG4gICAgfVxuICAgIGlmICgvcmV0dXJuXFxzKyh0cnVlfGZhbHNlKS8udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkge1xuICAgICAgcmV0dXJuICdib29sZWFuJztcbiAgICB9XG4gICAgaWYgKC9yZXR1cm5cXHMrXFxbLy50ZXN0KGNvZGVXaXRoU3Vycm91bmRpbmcpKSB7XG4gICAgICByZXR1cm4gJ3Vua25vd25bXSc7XG4gICAgfVxuICAgIGlmICgvcmV0dXJuXFxzK1xcey8udGVzdChjb2RlV2l0aFN1cnJvdW5kaW5nKSkge1xuICAgICAgcmV0dXJuICdSZWNvcmQ8c3RyaW5nLCB1bmtub3duPic7XG4gICAgfVxuXG4gICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRGVmYXVsdENvbmZpZGVuY2UoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogbnVtYmVyIHtcbiAgICBsZXQgY29uZmlkZW5jZSA9IDAuNTsgLy8gQmFzZSBjb25maWRlbmNlIGZvciB1bm1hdGNoZWQgcGF0dGVybnNcblxuICAgIC8vIEFkanVzdCBiYXNlZCBvbiBjb250ZXh0IGNsdWVzXG4gICAgaWYgKGNvbnRleHQuaXNJblRlc3RGaWxlKSB7XG4gICAgICBjb25maWRlbmNlICs9IDAuMTsgLy8gU2xpZ2h0bHkgbW9yZSBsaWtlbHkgdG8gYmUgaW50ZW50aW9uYWwgaW4gdGVzdHNcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgYW55IGNvbW1lbnRzIHRoYXQgbWlnaHQgaW5kaWNhdGUgaW50ZW50aW9uYWxpdHlcbiAgICBpZiAoY29udGV4dC5oYXNFeGlzdGluZ0NvbW1lbnQpIHtcbiAgICAgIGNvbmZpZGVuY2UgKz0gMC4xO1xuICAgIH1cblxuICAgIC8vIERvbWFpbi1zcGVjaWZpYyBhZGp1c3RtZW50c1xuICAgIHN3aXRjaCAoY29udGV4dC5kb21haW5Db250ZXh0LmRvbWFpbikge1xuICAgICAgY2FzZSBDb2RlRG9tYWluLkFTVFJPTE9HSUNBTDpcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5DQU1QQUlHTjpcbiAgICAgICAgY29uZmlkZW5jZSArPSAwLjE7IC8vIFRoZXNlIGRvbWFpbnMgb2Z0ZW4gbmVlZCBmbGV4aWJsZSB0eXBpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvZGVEb21haW4uVVRJTElUWTpcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5DT01QT05FTlQ6XG4gICAgICAgIGNvbmZpZGVuY2UgLT0gMC4xOyAvLyBUaGVzZSBkb21haW5zIGNhbiB1c3VhbGx5IGJlIG1vcmUgc3BlY2lmaWNcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGgubWF4KDAuMywgTWF0aC5taW4oMC43LCBjb25maWRlbmNlKSk7XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRSZWFzb25pbmcoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0LCBjb25maWRlbmNlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChjb25maWRlbmNlID4gMC42KSB7XG4gICAgICByZXR1cm4gJ01vZGVyYXRlIGNvbmZpZGVuY2UgLSBtYXkgYmUgaW50ZW50aW9uYWwgYnV0IGxhY2tzIGNsZWFyIGRvY3VtZW50YXRpb24nO1xuICAgIH0gZWxzZSBpZiAoY29uZmlkZW5jZSA+IDAuNCkge1xuICAgICAgcmV0dXJuICdMb3ctbW9kZXJhdGUgY29uZmlkZW5jZSAtIGxpa2VseSB1bmludGVudGlvbmFsIGJ1dCByZXF1aXJlcyBjYXJlZnVsIHJldmlldyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnTG93IGNvbmZpZGVuY2UgLSBhcHBlYXJzIHVuaW50ZW50aW9uYWwgYW5kIHN1aXRhYmxlIGZvciByZXBsYWNlbWVudCc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0U3VnZ2VzdGVkUmVwbGFjZW1lbnQoY29udGV4dDogQ2xhc3NpZmljYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICAvLyBTaW1wbGUgaGV1cmlzdGljcyBmb3IgZGVmYXVsdCByZXBsYWNlbWVudFxuICAgIGlmIChjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdbXScpKSB7XG4gICAgICByZXR1cm4gJ3Vua25vd25bXSc7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCdSZWNvcmQnKSB8fCBjb250ZXh0LmNvZGVTbmlwcGV0LmluY2x1ZGVzKCd7JykpIHtcbiAgICAgIHJldHVybiAnUmVjb3JkPHN0cmluZywgdW5rbm93bj4nO1xuICAgIH1cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLy8gQ29udGV4dHVhbCBhbmFseXNpcyBoZWxwZXIgbWV0aG9kc1xuICBwcml2YXRlIGFwcGx5Q29udGV4dHVhbEFkanVzdG1lbnRzKFxuICAgIGJhc2VTY29yZTogbnVtYmVyLFxuICAgIGNhdGVnb3J5OiBBbnlUeXBlQ2F0ZWdvcnksXG4gICAgc3Vycm91bmRpbmdDb250ZXh0OiBSZXR1cm5UeXBlPHR5cGVvZiB0aGlzLmFuYWx5emVTdXJyb3VuZGluZ0NvZGVDb250ZXh0PixcbiAgICBmaWxlVHlwZUluZm86IFJldHVyblR5cGU8dHlwZW9mIHRoaXMuYW5hbHl6ZUZpbGVUeXBlPlxuICApOiBudW1iZXIge1xuICAgIGxldCBhZGp1c3RlZFNjb3JlID0gYmFzZVNjb3JlO1xuXG4gICAgLy8gRmlsZSB0eXBlIGFkanVzdG1lbnRzXG4gICAgaWYgKGZpbGVUeXBlSW5mby5pc1Rlc3RGaWxlICYmIGNhdGVnb3J5ID09PSBBbnlUeXBlQ2F0ZWdvcnkuVEVTVF9NT0NLKSB7XG4gICAgICBhZGp1c3RlZFNjb3JlICo9IDEuMjsgLy8gQm9vc3QgdGVzdCBtb2NrIGNvbmZpZGVuY2UgaW4gdGVzdCBmaWxlc1xuICAgIH1cblxuICAgIGlmIChmaWxlVHlwZUluZm8uaXNDb25maWdGaWxlICYmIGNhdGVnb3J5ID09PSBBbnlUeXBlQ2F0ZWdvcnkuRFlOQU1JQ19DT05GSUcpIHtcbiAgICAgIGFkanVzdGVkU2NvcmUgKj0gMS4zOyAvLyBCb29zdCBjb25maWcgY29uZmlkZW5jZSBpbiBjb25maWcgZmlsZXNcbiAgICB9XG5cbiAgICBpZiAoZmlsZVR5cGVJbmZvLmlzVHlwZURlZmluaXRpb25GaWxlKSB7XG4gICAgICBhZGp1c3RlZFNjb3JlICo9IDAuODsgLy8gUmVkdWNlIGNvbmZpZGVuY2UgaW4gdHlwZSBkZWZpbml0aW9uIGZpbGVzIChzaG91bGQgYmUgbW9yZSBzcGVjaWZpYylcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0dWFsIGFkanVzdG1lbnRzXG4gICAgaWYgKHN1cnJvdW5kaW5nQ29udGV4dC5oYXNFcnJvckhhbmRsaW5nICYmIGNhdGVnb3J5ID09PSBBbnlUeXBlQ2F0ZWdvcnkuRVJST1JfSEFORExJTkcpIHtcbiAgICAgIGFkanVzdGVkU2NvcmUgKj0gMS4yO1xuICAgIH1cblxuICAgIGlmIChzdXJyb3VuZGluZ0NvbnRleHQuaGFzQXBpQ2FsbHMgJiYgY2F0ZWdvcnkgPT09IEFueVR5cGVDYXRlZ29yeS5FWFRFUk5BTF9BUEkpIHtcbiAgICAgIGFkanVzdGVkU2NvcmUgKj0gMS4xNTtcbiAgICB9XG5cbiAgICBpZiAoc3Vycm91bmRpbmdDb250ZXh0Lmhhc1Rlc3RpbmdDb2RlICYmIGNhdGVnb3J5ID09PSBBbnlUeXBlQ2F0ZWdvcnkuVEVTVF9NT0NLKSB7XG4gICAgICBhZGp1c3RlZFNjb3JlICo9IDEuMTtcbiAgICB9XG5cbiAgICAvLyBQZW5hbGl6ZSB0eXBlIGFzc2VydGlvbnMgaW4gY29tcGxleCBsb2dpYyAobGlrZWx5IGNhbiBiZSBtb3JlIHNwZWNpZmljKVxuICAgIGlmIChzdXJyb3VuZGluZ0NvbnRleHQuaGFzQ29tcGxleExvZ2ljICYmIGNhdGVnb3J5ID09PSBBbnlUeXBlQ2F0ZWdvcnkuVFlQRV9BU1NFUlRJT04pIHtcbiAgICAgIGFkanVzdGVkU2NvcmUgKj0gMC43O1xuICAgIH1cblxuICAgIHJldHVybiBNYXRoLm1pbihhZGp1c3RlZFNjb3JlLCAxLjApO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENvbnRleHR1YWxSZWFzb25pbmcoXG4gICAgY2F0ZWdvcnk6IEFueVR5cGVDYXRlZ29yeSxcbiAgICBzdXJyb3VuZGluZ0NvbnRleHQ6IFJldHVyblR5cGU8dHlwZW9mIHRoaXMuYW5hbHl6ZVN1cnJvdW5kaW5nQ29kZUNvbnRleHQ+LFxuICAgIGZpbGVUeXBlSW5mbzogUmV0dXJuVHlwZTx0eXBlb2YgdGhpcy5hbmFseXplRmlsZVR5cGU+XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYmFzZVJlYXNvbmluZyA9IHRoaXMuZ2V0UmVhc29uaW5nRm9yQ2F0ZWdvcnkoY2F0ZWdvcnksIHt9IGFzIENsYXNzaWZpY2F0aW9uQ29udGV4dCk7XG4gICAgY29uc3QgY29udGV4dHVhbEluZm86IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgZmlsZSB0eXBlIGNvbnRleHRcbiAgICBpZiAoZmlsZVR5cGVJbmZvLmZpbGVDYXRlZ29yeSAhPT0gJ3Vua25vd24nKSB7XG4gICAgICBjb250ZXh0dWFsSW5mby5wdXNoKGBpbiAke2ZpbGVUeXBlSW5mby5maWxlQ2F0ZWdvcnl9IGZpbGVgKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc3Vycm91bmRpbmcgY29udGV4dFxuICAgIGlmIChzdXJyb3VuZGluZ0NvbnRleHQuY29udGV4dHVhbENsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRleHR1YWxJbmZvLnB1c2goc3Vycm91bmRpbmdDb250ZXh0LmNvbnRleHR1YWxDbHVlcy5qb2luKCcsICcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGV4dHVhbEluZm8ubGVuZ3RoID4gMFxuICAgICAgPyBgJHtiYXNlUmVhc29uaW5nfSAoJHtjb250ZXh0dWFsSW5mby5qb2luKCcsICcpfSlgXG4gICAgICA6IGJhc2VSZWFzb25pbmc7XG4gIH1cblxuICBwcml2YXRlIGdldENvbnRleHR1YWxFbmhhbmNlbWVudChcbiAgICBzdXJyb3VuZGluZ0NvbnRleHQ6IFJldHVyblR5cGU8dHlwZW9mIHRoaXMuYW5hbHl6ZVN1cnJvdW5kaW5nQ29kZUNvbnRleHQ+LFxuICAgIGZpbGVUeXBlSW5mbzogUmV0dXJuVHlwZTx0eXBlb2YgdGhpcy5hbmFseXplRmlsZVR5cGU+XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgZW5oYW5jZW1lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKGZpbGVUeXBlSW5mby5maWxlQ2F0ZWdvcnkgIT09ICd1bmtub3duJykge1xuICAgICAgZW5oYW5jZW1lbnRzLnB1c2goYGluICR7ZmlsZVR5cGVJbmZvLmZpbGVDYXRlZ29yeX0gZmlsZWApO1xuICAgIH1cblxuICAgIGlmIChzdXJyb3VuZGluZ0NvbnRleHQuY29udGV4dHVhbENsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGVuaGFuY2VtZW50cy5wdXNoKHN1cnJvdW5kaW5nQ29udGV4dC5jb250ZXh0dWFsQ2x1ZXMuam9pbignLCAnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuaGFuY2VtZW50cy5sZW5ndGggPiAwID8gYCAoJHtlbmhhbmNlbWVudHMuam9pbignLCAnKX0pYCA6ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb250ZXh0dWFsQ29uZmlkZW5jZShcbiAgICBjb250ZXh0OiBDbGFzc2lmaWNhdGlvbkNvbnRleHQsXG4gICAgc3Vycm91bmRpbmdDb250ZXh0OiBSZXR1cm5UeXBlPHR5cGVvZiB0aGlzLmFuYWx5emVTdXJyb3VuZGluZ0NvZGVDb250ZXh0PixcbiAgICBmaWxlVHlwZUluZm86IFJldHVyblR5cGU8dHlwZW9mIHRoaXMuYW5hbHl6ZUZpbGVUeXBlPlxuICApOiBudW1iZXIge1xuICAgIGxldCBjb25maWRlbmNlID0gMC41OyAvLyBCYXNlIGNvbmZpZGVuY2VcblxuICAgIC8vIEZpbGUgdHlwZSBhZGp1c3RtZW50c1xuICAgIGlmIChmaWxlVHlwZUluZm8uaXNUZXN0RmlsZSkge1xuICAgICAgY29uZmlkZW5jZSArPSAwLjE7IC8vIFRlc3RzIG9mdGVuIG5lZWQgZmxleGlibGUgdHlwaW5nXG4gICAgfVxuXG4gICAgaWYgKGZpbGVUeXBlSW5mby5pc0NvbmZpZ0ZpbGUpIHtcbiAgICAgIGNvbmZpZGVuY2UgKz0gMC4xNTsgLy8gQ29uZmlnIGZpbGVzIG9mdGVuIG5lZWQgZHluYW1pYyB0eXBpbmdcbiAgICB9XG5cbiAgICBpZiAoZmlsZVR5cGVJbmZvLmlzVHlwZURlZmluaXRpb25GaWxlKSB7XG4gICAgICBjb25maWRlbmNlIC09IDAuMjsgLy8gVHlwZSBmaWxlcyBzaG91bGQgYmUgbW9yZSBzcGVjaWZpY1xuICAgIH1cblxuICAgIGlmIChmaWxlVHlwZUluZm8uaXNVdGlsaXR5RmlsZSB8fCBmaWxlVHlwZUluZm8uaXNDb21wb25lbnRGaWxlKSB7XG4gICAgICBjb25maWRlbmNlIC09IDAuMTsgLy8gVGhlc2UgY2FuIHVzdWFsbHkgYmUgbW9yZSBzcGVjaWZpY1xuICAgIH1cblxuICAgIC8vIENvbnRleHR1YWwgYWRqdXN0bWVudHNcbiAgICBpZiAoc3Vycm91bmRpbmdDb250ZXh0Lmhhc0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgIGNvbmZpZGVuY2UgKz0gMC4xNTtcbiAgICB9XG5cbiAgICBpZiAoc3Vycm91bmRpbmdDb250ZXh0Lmhhc0FwaUNhbGxzKSB7XG4gICAgICBjb25maWRlbmNlICs9IDAuMTtcbiAgICB9XG5cbiAgICBpZiAoc3Vycm91bmRpbmdDb250ZXh0Lmhhc1Rlc3RpbmdDb2RlKSB7XG4gICAgICBjb25maWRlbmNlICs9IDAuMTtcbiAgICB9XG5cbiAgICBpZiAoc3Vycm91bmRpbmdDb250ZXh0Lmhhc1R5cGVBc3NlcnRpb25zKSB7XG4gICAgICBjb25maWRlbmNlIC09IDAuMTsgLy8gTXVsdGlwbGUgdHlwZSBhc3NlcnRpb25zIHN1Z2dlc3QgdGhlIGNvZGUgY2FuIGJlIG1vcmUgc3BlY2lmaWNcbiAgICB9XG5cbiAgICBpZiAoc3Vycm91bmRpbmdDb250ZXh0Lmhhc0NvbXBsZXhMb2dpYykge1xuICAgICAgY29uZmlkZW5jZSAtPSAwLjA1OyAvLyBDb21wbGV4IGxvZ2ljIGNhbiB1c3VhbGx5IGJlIHR5cGVkIG1vcmUgc3BlY2lmaWNhbGx5XG4gICAgfVxuXG4gICAgLy8gQ29tbWVudCBhbmFseXNpc1xuICAgIGlmIChjb250ZXh0Lmhhc0V4aXN0aW5nQ29tbWVudCkge1xuICAgICAgY29uZmlkZW5jZSArPSAwLjE7XG4gICAgfVxuXG4gICAgLy8gRG9tYWluLXNwZWNpZmljIGFkanVzdG1lbnRzXG4gICAgc3dpdGNoIChjb250ZXh0LmRvbWFpbkNvbnRleHQuZG9tYWluKSB7XG4gICAgICBjYXNlIENvZGVEb21haW4uQVNUUk9MT0dJQ0FMOlxuICAgICAgY2FzZSBDb2RlRG9tYWluLkNBTVBBSUdOOlxuICAgICAgICBjb25maWRlbmNlICs9IDAuMTsgLy8gVGhlc2UgZG9tYWlucyBvZnRlbiBuZWVkIGZsZXhpYmxlIHR5cGluZ1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29kZURvbWFpbi5VVElMSVRZOlxuICAgICAgY2FzZSBDb2RlRG9tYWluLkNPTVBPTkVOVDpcbiAgICAgICAgY29uZmlkZW5jZSAtPSAwLjE7IC8vIFRoZXNlIGRvbWFpbnMgY2FuIHVzdWFsbHkgYmUgbW9yZSBzcGVjaWZpY1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5tYXgoMC4yLCBNYXRoLm1pbigwLjksIGNvbmZpZGVuY2UpKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGREZWZhdWx0Q29udGV4dHVhbFJlYXNvbmluZyhcbiAgICBjb25maWRlbmNlOiBudW1iZXIsXG4gICAgc3Vycm91bmRpbmdDb250ZXh0OiBSZXR1cm5UeXBlPHR5cGVvZiB0aGlzLmFuYWx5emVTdXJyb3VuZGluZ0NvZGVDb250ZXh0PixcbiAgICBmaWxlVHlwZUluZm86IFJldHVyblR5cGU8dHlwZW9mIHRoaXMuYW5hbHl6ZUZpbGVUeXBlPlxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnRleHR1YWxJbmZvOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKGZpbGVUeXBlSW5mby5maWxlQ2F0ZWdvcnkgIT09ICd1bmtub3duJykge1xuICAgICAgY29udGV4dHVhbEluZm8ucHVzaChgaW4gJHtmaWxlVHlwZUluZm8uZmlsZUNhdGVnb3J5fSBmaWxlYCk7XG4gICAgfVxuXG4gICAgaWYgKHN1cnJvdW5kaW5nQ29udGV4dC5jb250ZXh0dWFsQ2x1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29udGV4dHVhbEluZm8ucHVzaChzdXJyb3VuZGluZ0NvbnRleHQuY29udGV4dHVhbENsdWVzLmpvaW4oJywgJykpO1xuICAgIH1cblxuICAgIGxldCBiYXNlUmVhc29uaW5nOiBzdHJpbmc7XG4gICAgaWYgKGNvbmZpZGVuY2UgPiAwLjcpIHtcbiAgICAgIGJhc2VSZWFzb25pbmcgPSAnSGlnaCBjb250ZXh0dWFsIGNvbmZpZGVuY2UgLSBsaWtlbHkgaW50ZW50aW9uYWwgYnV0IG5lZWRzIGRvY3VtZW50YXRpb24nO1xuICAgIH0gZWxzZSBpZiAoY29uZmlkZW5jZSA+IDAuNikge1xuICAgICAgYmFzZVJlYXNvbmluZyA9ICdNb2RlcmF0ZSBjb250ZXh0dWFsIGNvbmZpZGVuY2UgLSBtYXkgYmUgaW50ZW50aW9uYWwsIHJlcXVpcmVzIHJldmlldyc7XG4gICAgfSBlbHNlIGlmIChjb25maWRlbmNlID4gMC40KSB7XG4gICAgICBiYXNlUmVhc29uaW5nID0gJ0xvdy1tb2RlcmF0ZSBjb250ZXh0dWFsIGNvbmZpZGVuY2UgLSBsaWtlbHkgdW5pbnRlbnRpb25hbCBidXQgbmVlZHMgY2FyZWZ1bCByZXZpZXcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlUmVhc29uaW5nID0gJ0xvdyBjb250ZXh0dWFsIGNvbmZpZGVuY2UgLSBhcHBlYXJzIHVuaW50ZW50aW9uYWwgYW5kIHN1aXRhYmxlIGZvciByZXBsYWNlbWVudCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRleHR1YWxJbmZvLmxlbmd0aCA+IDBcbiAgICAgID8gYCR7YmFzZVJlYXNvbmluZ30gKCR7Y29udGV4dHVhbEluZm8uam9pbignLCAnKX0pYFxuICAgICAgOiBiYXNlUmVhc29uaW5nO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=