df4c80bb56f2595c81899a7903279562
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock all external dependencies for E2E simulation
jest.mock('next/navigation', () => ({
    useRouter: () => ({
        push: jest.fn(),
        back: jest.fn(),
        forward: jest.fn(),
        refresh: jest.fn(),
        replace: jest.fn()
    })
}));
jest.mock('@/contexts/AlchemicalContext/hooks');
jest.mock('@/hooks/useStatePreservation');
jest.mock('@/utils/logger', () => ({
    logger: {
        debug: jest.fn(),
        info: jest.fn(),
        warn: jest.fn(),
        error: jest.fn()
    }
}));
// Mock realistic component behaviors for E2E testing
jest.mock('@/components/CuisineRecommender', () => {
    return function MockCuisineRecommender() {
        var _a;
        const [selectedCuisine, setSelectedCuisine] = react_1.default.useState(null);
        const [showRecipes, setShowRecipes] = react_1.default.useState(false);
        const cuisines = [
            { name: 'Italian', score: 95, recipes: ['Pasta Marinara', 'Risotto', 'Pizza Margherita'] },
            { name: 'Chinese', score: 88, recipes: ['Fried Rice', 'Sweet and Sour Pork', 'Kung Pao Chicken'] },
            { name: 'Mexican', score: 82, recipes: ['Tacos', 'Enchiladas', 'Guacamole'] },
            { name: 'Indian', score: 79, recipes: ['Curry', 'Biryani', 'Naan'] }
        ];
        const handleCuisineSelect = (cuisine) => {
            setSelectedCuisine(cuisine.name);
            setShowRecipes(true);
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "cuisine-recommender", children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cuisine Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: "cuisine-grid", children: cuisines.map(cuisine => ((0, jsx_runtime_1.jsx)("div", { className: "cuisine-card", "data-testid": `cuisine-card-${cuisine.name.toLowerCase()}`, children: (0, jsx_runtime_1.jsxs)("button", { onClick: () => handleCuisineSelect(cuisine), className: selectedCuisine === cuisine.name ? 'selected' : '', "data-testid": `cuisine-${cuisine.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: cuisine.name }), (0, jsx_runtime_1.jsxs)("div", { className: "score", children: ["Match: ", cuisine.score, "%"] })] }) }, cuisine.name))) }), showRecipes && selectedCuisine && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "recipe-recommendations", className: "recipe-section", children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Recommended ", selectedCuisine, " Recipes"] }), (0, jsx_runtime_1.jsx)("div", { className: "recipe-list", children: (_a = cuisines.find(c => c.name === selectedCuisine)) === null || _a === void 0 ? void 0 : _a.recipes.map(recipe => ((0, jsx_runtime_1.jsx)("button", { "data-testid": `recipe-${recipe.toLowerCase().replace(/\s+/g, '-')}`, className: "recipe-button", children: recipe }, recipe))) })] }))] }));
    };
});
jest.mock('@/components/IngredientRecommender', () => {
    return function MockIngredientRecommender({ maxDisplayed = 8 }) {
        const [selectedIngredients, setSelectedIngredients] = react_1.default.useState([]);
        const [expandedIngredient, setExpandedIngredient] = react_1.default.useState(null);
        const ingredients = [
            { name: 'Tomatoes', category: 'Vegetables', properties: ['Umami', 'Acidic', 'Fresh'] },
            { name: 'Onions', category: 'Vegetables', properties: ['Sweet', 'Pungent', 'Aromatic'] },
            { name: 'Garlic', category: 'Aromatics', properties: ['Pungent', 'Savory', 'Aromatic'] },
            { name: 'Basil', category: 'Herbs', properties: ['Fresh', 'Aromatic', 'Sweet'] },
            { name: 'Olive Oil', category: 'Oils', properties: ['Rich', 'Fruity', 'Smooth'] },
            { name: 'Cheese', category: 'Dairy', properties: ['Creamy', 'Salty', 'Rich'] },
            { name: 'Pasta', category: 'Grains', properties: ['Neutral', 'Filling', 'Versatile'] },
            { name: 'Chicken', category: 'Proteins', properties: ['Lean', 'Mild', 'Versatile'] }
        ];
        const displayedIngredients = ingredients.slice(0, maxDisplayed);
        const toggleIngredient = (ingredient) => {
            setSelectedIngredients(prev => prev.includes(ingredient)
                ? prev.filter(i => i !== ingredient)
                : [...prev, ingredient]);
        };
        const toggleExpanded = (ingredient) => {
            setExpandedIngredient(prev => prev === ingredient ? null : ingredient);
        };
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "ingredient-recommender", children: [(0, jsx_runtime_1.jsx)("h3", { children: "Ingredient Recommendations" }), (0, jsx_runtime_1.jsx)("div", { className: "ingredient-grid", children: displayedIngredients.map(ingredient => ((0, jsx_runtime_1.jsxs)("div", { className: "ingredient-card", "data-testid": `ingredient-card-${ingredient.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => toggleIngredient(ingredient.name), className: selectedIngredients.includes(ingredient.name) ? 'selected' : '', "data-testid": `ingredient-${ingredient.name.toLowerCase()}`, children: ingredient.name }), (0, jsx_runtime_1.jsx)("button", { onClick: () => toggleExpanded(ingredient.name), "data-testid": `expand-${ingredient.name.toLowerCase()}`, className: "expand-button", children: expandedIngredient === ingredient.name ? '▼' : '▶' }), expandedIngredient === ingredient.name && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": `details-${ingredient.name.toLowerCase()}`, className: "ingredient-details", children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Category: ", ingredient.category] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Properties: ", ingredient.properties.join(', ')] })] }))] }, ingredient.name))) }), selectedIngredients.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "selected-ingredients-summary", className: "selection-summary", children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["Selected Ingredients (", selectedIngredients.length, ")"] }), (0, jsx_runtime_1.jsx)("div", { children: selectedIngredients.join(', ') })] }))] }));
    };
});
jest.mock('@/components/CookingMethodsSection', () => {
    return function MockCookingMethodsSection({ maxDisplayed = 6, onViewMore }) {
        const [selectedMethod, setSelectedMethod] = react_1.default.useState(null);
        const methods = [
            { name: 'Sauté', time: '5-10 min', difficulty: 'Easy', description: 'Quick cooking in a pan with oil' },
            { name: 'Roast', time: '30-60 min', difficulty: 'Medium', description: 'Cooking in the oven with dry heat' },
            { name: 'Grill', time: '10-20 min', difficulty: 'Medium', description: 'Cooking over direct heat' },
            { name: 'Steam', time: '10-15 min', difficulty: 'Easy', description: 'Cooking with steam heat' },
            { name: 'Braise', time: '60-120 min', difficulty: 'Hard', description: 'Slow cooking with liquid' },
            { name: 'Stir-fry', time: '5-8 min', difficulty: 'Medium', description: 'Quick cooking while stirring' }
        ];
        const displayedMethods = methods.slice(0, maxDisplayed);
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "cooking-methods", children: [(0, jsx_runtime_1.jsx)("h3", { children: "Cooking Methods" }), (0, jsx_runtime_1.jsx)("div", { className: "methods-grid", children: displayedMethods.map(method => ((0, jsx_runtime_1.jsxs)("div", { className: "method-card", "data-testid": `method-card-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsxs)("button", { onClick: () => setSelectedMethod(method.name), className: selectedMethod === method.name ? 'selected' : '', "data-testid": `method-${method.name.toLowerCase()}`, children: [(0, jsx_runtime_1.jsx)("h4", { children: method.name }), (0, jsx_runtime_1.jsxs)("div", { className: "method-info", children: [(0, jsx_runtime_1.jsxs)("div", { children: ["Time: ", method.time] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Difficulty: ", method.difficulty] })] })] }), selectedMethod === method.name && ((0, jsx_runtime_1.jsx)("div", { "data-testid": `method-details-${method.name.toLowerCase()}`, className: "method-details", children: (0, jsx_runtime_1.jsx)("p", { children: method.description }) }))] }, method.name))) }), (0, jsx_runtime_1.jsx)("button", { onClick: onViewMore, "data-testid": "view-more-methods", className: "view-more-button", children: "View All Cooking Methods" })] }));
    };
});
jest.mock('@/components/recipes/RecipeBuilderSimple', () => {
    return function MockRecipeBuilderSimple() {
        const [recipeName, setRecipeName] = react_1.default.useState('');
        const [ingredients, setIngredients] = react_1.default.useState([]);
        const [steps, setSteps] = react_1.default.useState([]);
        const [servings, setServings] = react_1.default.useState(4);
        const [prepTime, setPrepTime] = react_1.default.useState(15);
        const [cookTime, setCookTime] = react_1.default.useState(30);
        const addIngredient = () => {
            setIngredients(prev => [...prev, { name: '', quantity: '' }]);
        };
        const updateIngredient = (index, field, value) => {
            setIngredients(prev => prev.map((ing, i) => i === index ? { ...ing, [field]: value } : ing));
        };
        const removeIngredient = (index) => {
            setIngredients(prev => prev.filter((_, i) => i !== index));
        };
        const addStep = () => {
            setSteps(prev => [...prev, { instruction: '', timing: '' }]);
        };
        const updateStep = (index, field, value) => {
            setSteps(prev => prev.map((step, i) => i === index ? { ...step, [field]: value } : step));
        };
        const removeStep = (index) => {
            setSteps(prev => prev.filter((_, i) => i !== index));
        };
        const canSave = recipeName.trim() &&
            ingredients.some(ing => ing.name.trim()) &&
            steps.some(step => step.instruction.trim());
        const totalTime = prepTime + cookTime;
        return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "recipe-builder", children: [(0, jsx_runtime_1.jsx)("h3", { children: "Recipe Builder" }), (0, jsx_runtime_1.jsxs)("div", { className: "recipe-form", children: [(0, jsx_runtime_1.jsxs)("div", { className: "recipe-header", children: [(0, jsx_runtime_1.jsx)("input", { type: "text", placeholder: "Recipe Name", value: recipeName, onChange: (e) => setRecipeName(e.target.value), "data-testid": "recipe-name-input" }), (0, jsx_runtime_1.jsxs)("div", { className: "recipe-meta", children: [(0, jsx_runtime_1.jsx)("input", { type: "number", value: servings, onChange: (e) => setServings(parseInt(e.target.value) || 1), "data-testid": "servings-input", min: "1" }), (0, jsx_runtime_1.jsx)("input", { type: "number", value: prepTime, onChange: (e) => setPrepTime(parseInt(e.target.value) || 0), "data-testid": "prep-time-input", min: "0" }), (0, jsx_runtime_1.jsx)("input", { type: "number", value: cookTime, onChange: (e) => setCookTime(parseInt(e.target.value) || 0), "data-testid": "cook-time-input", min: "0" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "ingredients-section", children: [(0, jsx_runtime_1.jsx)("h4", { children: "Ingredients" }), (0, jsx_runtime_1.jsx)("button", { onClick: addIngredient, "data-testid": "add-ingredient", children: "Add Ingredient" }), ingredients.map((ingredient, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "ingredient-row", "data-testid": `ingredient-row-${index}`, children: [(0, jsx_runtime_1.jsx)("input", { type: "text", placeholder: "Quantity", value: ingredient.quantity, onChange: (e) => updateIngredient(index, 'quantity', e.target.value), "data-testid": `ingredient-quantity-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: "text", placeholder: "Ingredient name", value: ingredient.name, onChange: (e) => updateIngredient(index, 'name', e.target.value), "data-testid": `ingredient-name-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeIngredient(index), "data-testid": `remove-ingredient-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": "ingredients-count", children: ["Ingredients: ", ingredients.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "steps-section", children: [(0, jsx_runtime_1.jsx)("h4", { children: "Instructions" }), (0, jsx_runtime_1.jsx)("button", { onClick: addStep, "data-testid": "add-step", children: "Add Step" }), steps.map((step, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "step-row", "data-testid": `step-row-${index}`, children: [(0, jsx_runtime_1.jsx)("span", { className: "step-number", children: index + 1 }), (0, jsx_runtime_1.jsx)("textarea", { placeholder: "Describe this step...", value: step.instruction, onChange: (e) => updateStep(index, 'instruction', e.target.value), "data-testid": `step-instruction-${index}` }), (0, jsx_runtime_1.jsx)("input", { type: "text", placeholder: "Timing", value: step.timing, onChange: (e) => updateStep(index, 'timing', e.target.value), "data-testid": `step-timing-${index}` }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeStep(index), "data-testid": `remove-step-${index}`, children: "Remove" })] }, index))), (0, jsx_runtime_1.jsxs)("div", { "data-testid": "steps-count", children: ["Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "recipe-summary", "data-testid": "recipe-summary", children: [(0, jsx_runtime_1.jsx)("h4", { children: "Recipe Summary" }), (0, jsx_runtime_1.jsxs)("div", { children: ["Name: ", recipeName || 'Untitled Recipe'] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Servings: ", servings] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Total Time: ", totalTime, " minutes"] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Ingredients: ", ingredients.length] }), (0, jsx_runtime_1.jsxs)("div", { children: ["Steps: ", steps.length] })] }), (0, jsx_runtime_1.jsx)("button", { disabled: !canSave, "data-testid": "save-recipe", className: canSave ? 'enabled' : 'disabled', children: "Save Recipe" })] })] }));
    };
});
/**
 * End-to-End Tests for Main Page Workflows
 *
 * These tests simulate complete user workflows on the main page,
 * testing the integration between all components and user interactions.
 *
 * Note: These tests use jsdom and testing-library to simulate E2E scenarios
 * without requiring a full browser environment.
 */
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const MainPageLayout_1 = __importDefault(require("@/components/layout/MainPageLayout"));
const hooks_1 = require("@/contexts/AlchemicalContext/hooks");
const useStatePreservation_1 = require("@/hooks/useStatePreservation");
describe('Main Page E2E Workflows', () => {
    const mockAlchemicalContext = {
        state: {
            astrologicalState: { sunSign: 'aries' },
            elementalState: { Fire: 0.3, Water: 0.2, Earth: 0.3, Air: 0.2 }
        },
        planetaryPositions: { sun: { sign: 'aries' } },
        isDaytime: true
    };
    const mockNavigationState = {
        saveState: jest.fn(),
        getState: jest.fn(() => ({}))
    };
    const mockScrollPreservation = {
        restoreScrollPosition: jest.fn()
    };
    beforeEach(() => {
        jest.clearAllMocks();
        hooks_1.useAlchemical.mockReturnValue(mockAlchemicalContext);
        useStatePreservation_1.useNavigationState.mockReturnValue(mockNavigationState);
        useStatePreservation_1.useScrollPreservation.mockReturnValue(mockScrollPreservation);
        useStatePreservation_1.useAutoStateCleanup.mockReturnValue(undefined);
        // Mock DOM methods
        Object.defineProperty(window, 'scrollY', { value: 0, writable: true });
        jest.spyOn(document, 'getElementById').mockImplementation(() => ({
            scrollIntoView: jest.fn(),
            style: {},
            classList: { add: jest.fn(), remove: jest.fn() }
        }));
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    it('completes full meal planning workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        // Wait for all components to load
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('cooking-methods')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Step 1: Select a cuisine
        const italianCuisine = react_2.screen.getByTestId('cuisine-italian');
        await user.click(italianCuisine);
        // Verify cuisine selection and recipe recommendations appear
        expect(react_2.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_2.screen.getByText('Recommended Italian Recipes')).toBeInTheDocument();
        // Step 2: Select ingredients
        const tomatoes = react_2.screen.getByTestId('ingredient-tomatoes');
        const basil = react_2.screen.getByTestId('ingredient-basil');
        const oliveOil = react_2.screen.getByTestId('ingredient-olive oil');
        await user.click(tomatoes);
        await user.click(basil);
        await user.click(oliveOil);
        // Verify ingredient selection
        expect(react_2.screen.getByTestId('selected-ingredients-summary')).toBeInTheDocument();
        expect(react_2.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        // Step 3: Select cooking method
        const sauteMethod = react_2.screen.getByTestId('method-sauté');
        await user.click(sauteMethod);
        // Verify method selection and details
        expect(react_2.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
        // Step 4: Build a recipe
        const recipeNameInput = react_2.screen.getByTestId('recipe-name-input');
        await user.type(recipeNameInput, 'Italian Tomato Basil Sauté');
        // Add ingredients to recipe
        const addIngredientButton = react_2.screen.getByTestId('add-ingredient');
        await user.click(addIngredientButton);
        await user.click(addIngredientButton);
        await user.click(addIngredientButton);
        // Fill in ingredient details
        await user.type(react_2.screen.getByTestId('ingredient-quantity-0'), '2 cups');
        await user.type(react_2.screen.getByTestId('ingredient-name-0'), 'Fresh Tomatoes');
        await user.type(react_2.screen.getByTestId('ingredient-quantity-1'), '1/4 cup');
        await user.type(react_2.screen.getByTestId('ingredient-name-1'), 'Fresh Basil');
        await user.type(react_2.screen.getByTestId('ingredient-quantity-2'), '2 tbsp');
        await user.type(react_2.screen.getByTestId('ingredient-name-2'), 'Olive Oil');
        // Add cooking steps
        const addStepButton = react_2.screen.getByTestId('add-step');
        await user.click(addStepButton);
        await user.click(addStepButton);
        await user.type(react_2.screen.getByTestId('step-instruction-0'), 'Heat olive oil in a large pan over medium heat');
        await user.type(react_2.screen.getByTestId('step-timing-0'), '2 min');
        await user.type(react_2.screen.getByTestId('step-instruction-1'), 'Add tomatoes and basil, sauté until tender');
        await user.type(react_2.screen.getByTestId('step-timing-1'), '8 min');
        // Verify recipe can be saved
        const saveButton = react_2.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        // Save the recipe
        await user.click(saveButton);
        // Verify the complete workflow
        expect(react_2.screen.getByDisplayValue('Italian Tomato Basil Sauté')).toBeInTheDocument();
        expect(react_2.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        expect(react_2.screen.getByText('Steps: 2')).toBeInTheDocument();
    });
    it('handles ingredient exploration workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('ingredient-recommender')).toBeInTheDocument();
        });
        // Expand ingredient details
        const expandTomatoes = react_2.screen.getByTestId('expand-tomatoes');
        await user.click(expandTomatoes);
        // Verify details are shown
        expect(react_2.screen.getByTestId('details-tomatoes')).toBeInTheDocument();
        expect(react_2.screen.getByText('Category: Vegetables')).toBeInTheDocument();
        expect(react_2.screen.getByText('Properties: Umami, Acidic, Fresh')).toBeInTheDocument();
        // Expand another ingredient
        const expandGarlic = react_2.screen.getByTestId('expand-garlic');
        await user.click(expandGarlic);
        expect(react_2.screen.getByTestId('details-garlic')).toBeInTheDocument();
        expect(react_2.screen.getByText('Category: Aromatics')).toBeInTheDocument();
        // Collapse first ingredient
        await user.click(expandTomatoes);
        expect(react_2.screen.queryByTestId('details-tomatoes')).not.toBeInTheDocument();
        // Select multiple ingredients
        await user.click(react_2.screen.getByTestId('ingredient-tomatoes'));
        await user.click(react_2.screen.getByTestId('ingredient-garlic'));
        await user.click(react_2.screen.getByTestId('ingredient-basil'));
        // Verify selection summary
        expect(react_2.screen.getByText('Selected Ingredients (3)')).toBeInTheDocument();
        expect(react_2.screen.getByText('Tomatoes, Garlic, Basil')).toBeInTheDocument();
    });
    it('handles cooking method exploration workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('cooking-methods')).toBeInTheDocument();
        });
        // Select different cooking methods and view details
        const roastMethod = react_2.screen.getByTestId('method-roast');
        await user.click(roastMethod);
        expect(react_2.screen.getByTestId('method-details-roast')).toBeInTheDocument();
        expect(react_2.screen.getByText('Cooking in the oven with dry heat')).toBeInTheDocument();
        // Switch to another method
        const grillMethod = react_2.screen.getByTestId('method-grill');
        await user.click(grillMethod);
        expect(react_2.screen.getByTestId('method-details-grill')).toBeInTheDocument();
        expect(react_2.screen.getByText('Cooking over direct heat')).toBeInTheDocument();
        // Previous method details should be hidden
        expect(react_2.screen.queryByTestId('method-details-roast')).not.toBeInTheDocument();
        // Test view more functionality
        const viewMoreButton = react_2.screen.getByTestId('view-more-methods');
        expect(viewMoreButton).toBeInTheDocument();
    });
    it('handles complete recipe creation workflow', async () => {
        const user = user_event_1.default.setup();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Create a complete recipe from scratch
        const recipeNameInput = react_2.screen.getByTestId('recipe-name-input');
        await user.type(recipeNameInput, 'Mediterranean Chicken');
        // Update recipe metadata
        const servingsInput = react_2.screen.getByTestId('servings-input');
        const prepTimeInput = react_2.screen.getByTestId('prep-time-input');
        const cookTimeInput = react_2.screen.getByTestId('cook-time-input');
        await user.clear(servingsInput);
        await user.type(servingsInput, '6');
        await user.clear(prepTimeInput);
        await user.type(prepTimeInput, '20');
        await user.clear(cookTimeInput);
        await user.type(cookTimeInput, '45');
        // Add multiple ingredients
        for (let i = 0; i < 4; i++) {
            await user.click(react_2.screen.getByTestId('add-ingredient'));
        }
        const ingredients = [
            { quantity: '2 lbs', name: 'Chicken Breast' },
            { quantity: '1 cup', name: 'Cherry Tomatoes' },
            { quantity: '1/2 cup', name: 'Kalamata Olives' },
            { quantity: '1/4 cup', name: 'Olive Oil' }
        ];
        for (let i = 0; i < ingredients.length; i++) {
            await user.type(react_2.screen.getByTestId(`ingredient-quantity-${i}`), ingredients[i].quantity);
            await user.type(react_2.screen.getByTestId(`ingredient-name-${i}`), ingredients[i].name);
        }
        // Add cooking steps
        for (let i = 0; i < 3; i++) {
            await user.click(react_2.screen.getByTestId('add-step'));
        }
        const steps = [
            { instruction: 'Preheat oven to 375°F and prepare chicken', timing: '5 min' },
            { instruction: 'Sear chicken in olive oil until golden', timing: '10 min' },
            { instruction: 'Add tomatoes and olives, bake until done', timing: '30 min' }
        ];
        for (let i = 0; i < steps.length; i++) {
            await user.type(react_2.screen.getByTestId(`step-instruction-${i}`), steps[i].instruction);
            await user.type(react_2.screen.getByTestId(`step-timing-${i}`), steps[i].timing);
        }
        // Verify recipe summary
        const summary = react_2.screen.getByTestId('recipe-summary');
        expect(summary).toHaveTextContent('Name: Mediterranean Chicken');
        expect(summary).toHaveTextContent('Servings: 6');
        expect(summary).toHaveTextContent('Total Time: 65 minutes');
        expect(summary).toHaveTextContent('Ingredients: 4');
        expect(summary).toHaveTextContent('Steps: 3');
        // Verify save button is enabled
        const saveButton = react_2.screen.getByTestId('save-recipe');
        expect(saveButton).toBeEnabled();
        expect(saveButton).toHaveClass('enabled');
        // Test ingredient removal
        await user.click(react_2.screen.getByTestId('remove-ingredient-3'));
        expect(react_2.screen.getByText('Ingredients: 3')).toBeInTheDocument();
        // Test step removal
        await user.click(react_2.screen.getByTestId('remove-step-0'));
        expect(react_2.screen.getByText('Steps: 2')).toBeInTheDocument();
        // Verify step renumbering
        expect(react_2.screen.getByDisplayValue('Sear chicken in olive oil until golden')).toBeInTheDocument();
    });
    it('handles navigation and state preservation workflow', async () => {
        const user = user_event_1.default.setup();
        const mockOnSectionNavigate = jest.fn();
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, { onSectionNavigate: mockOnSectionNavigate }));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('cuisine-recommender')).toBeInTheDocument();
        });
        // Make selections across different components
        await user.click(react_2.screen.getByTestId('cuisine-italian'));
        await user.click(react_2.screen.getByTestId('ingredient-tomatoes'));
        await user.click(react_2.screen.getByTestId('method-sauté'));
        // Navigate between sections
        const cuisineNavButton = react_2.screen.getByText('Cuisine Recommendations');
        await user.click(cuisineNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('cuisine');
        const ingredientsNavButton = react_2.screen.getByText('Ingredient Recommendations');
        await user.click(ingredientsNavButton);
        expect(mockOnSectionNavigate).toHaveBeenCalledWith('ingredients');
        // Verify state preservation was called
        await (0, react_2.waitFor)(() => {
            expect(mockNavigationState.saveState).toHaveBeenCalled();
        });
        // Verify selections are maintained after navigation
        expect(react_2.screen.getByTestId('recipe-recommendations')).toBeInTheDocument();
        expect(react_2.screen.getByText('Selected Ingredients (1)')).toBeInTheDocument();
        expect(react_2.screen.getByTestId('method-details-sauté')).toBeInTheDocument();
    });
    it('handles error recovery workflow', async () => {
        const user = user_event_1.default.setup();
        // Mock console.error to avoid noise
        const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => { });
        await (0, react_2.act)(async () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(MainPageLayout_1.default, {}));
        });
        await (0, react_2.waitFor)(() => {
            expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        });
        // Simulate user creating a recipe and encountering an error
        const recipeNameInput = react_2.screen.getByTestId('recipe-name-input');
        await user.type(recipeNameInput, 'Test Recipe');
        // Add ingredient
        await user.click(react_2.screen.getByTestId('add-ingredient'));
        await user.type(react_2.screen.getByTestId('ingredient-name-0'), 'Test Ingredient');
        // Add step
        await user.click(react_2.screen.getByTestId('add-step'));
        await user.type(react_2.screen.getByTestId('step-instruction-0'), 'Test step');
        // Verify recipe is valid
        expect(react_2.screen.getByTestId('save-recipe')).toBeEnabled();
        // The main page should continue to function despite any errors
        expect(react_2.screen.getByText('What to Eat Next')).toBeInTheDocument();
        expect(react_2.screen.getByTestId('recipe-builder')).toBeInTheDocument();
        consoleSpy.mockRestore();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vZTJlL01haW5QYWdlV29ya2Zsb3dzLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQWlCQSxvREFBb0Q7QUFDcEQsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNuQixDQUFDO0NBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7QUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUU7UUFDTixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDakI7Q0FDRixDQUFDLENBQUMsQ0FBQztBQUVKLHFEQUFxRDtBQUNyRCxJQUFJLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtJQUNoRCxPQUFPLFNBQVMsc0JBQXNCOztRQUNwQyxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsZUFBSyxDQUFDLFFBQVEsQ0FB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QUFDLENBQUM7UUFFaEQsaUJBQWlCO1FBQ2pCLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFNLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQztRQUN2RCxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLGlCQUFpQixDQUFDLENBQUM7UUFFNUUsV0FBVztRQUNYLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDakQsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsb0JBQW9CLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUV2RSx5QkFBeUI7UUFDekIsTUFBTSxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUV4RCwrREFBK0Q7UUFDL0QsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDakUsTUFBTSxDQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFakUsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzNCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9fX3Rlc3RzX18vZTJlL01haW5QYWdlV29ya2Zsb3dzLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW5kLXRvLUVuZCBUZXN0cyBmb3IgTWFpbiBQYWdlIFdvcmtmbG93c1xuICogXG4gKiBUaGVzZSB0ZXN0cyBzaW11bGF0ZSBjb21wbGV0ZSB1c2VyIHdvcmtmbG93cyBvbiB0aGUgbWFpbiBwYWdlLFxuICogdGVzdGluZyB0aGUgaW50ZWdyYXRpb24gYmV0d2VlbiBhbGwgY29tcG9uZW50cyBhbmQgdXNlciBpbnRlcmFjdGlvbnMuXG4gKiBcbiAqIE5vdGU6IFRoZXNlIHRlc3RzIHVzZSBqc2RvbSBhbmQgdGVzdGluZy1saWJyYXJ5IHRvIHNpbXVsYXRlIEUyRSBzY2VuYXJpb3NcbiAqIHdpdGhvdXQgcmVxdWlyaW5nIGEgZnVsbCBicm93c2VyIGVudmlyb25tZW50LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB1c2VyRXZlbnQgZnJvbSAnQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50JztcbmltcG9ydCBNYWluUGFnZUxheW91dCBmcm9tICdAL2NvbXBvbmVudHMvbGF5b3V0L01haW5QYWdlTGF5b3V0JztcbmltcG9ydCB7IHVzZUFsY2hlbWljYWwgfSBmcm9tICdAL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJztcbmltcG9ydCB7IHVzZU5hdmlnYXRpb25TdGF0ZSwgdXNlU2Nyb2xsUHJlc2VydmF0aW9uLCB1c2VBdXRvU3RhdGVDbGVhbnVwIH0gZnJvbSAnQC9ob29rcy91c2VTdGF0ZVByZXNlcnZhdGlvbic7XG5cbi8vIE1vY2sgYWxsIGV4dGVybmFsIGRlcGVuZGVuY2llcyBmb3IgRTJFIHNpbXVsYXRpb25cbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiAoKSA9PiAoe1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgICBiYWNrOiBqZXN0LmZuKCksXG4gICAgZm9yd2FyZDogamVzdC5mbigpLFxuICAgIHJlZnJlc2g6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlOiBqZXN0LmZuKClcbiAgfSlcbn0pKTtcblxuamVzdC5tb2NrKCdAL2NvbnRleHRzL0FsY2hlbWljYWxDb250ZXh0L2hvb2tzJyk7XG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlU3RhdGVQcmVzZXJ2YXRpb24nKTtcbmplc3QubW9jaygnQC91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dnZXI6IHtcbiAgICBkZWJ1ZzogamVzdC5mbigpLFxuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICB3YXJuOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKVxuICB9XG59KSk7XG5cbi8vIE1vY2sgcmVhbGlzdGljIGNvbXBvbmVudCBiZWhhdmlvcnMgZm9yIEUyRSB0ZXN0aW5nXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9DdWlzaW5lUmVjb21tZW5kZXInLCAoKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBNb2NrQ3Vpc2luZVJlY29tbWVuZGVyKCkge1xuICAgIGNvbnN0IFtzZWxlY3RlZEN1aXNpbmUsIHNldFNlbGVjdGVkQ3Vpc2luZV0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbc2hvd1JlY2lwZXMsIHNldFNob3dSZWNpcGVzXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgICBcbiAgICBjb25zdCBjdWlzaW5lcyA9IFtcbiAgICAgIHsgbmFtZTogJ0l0YWxpYW4nLCBzY29yZTogOTUsIHJlY2lwZXM6IFsnUGFzdGEgTWFyaW5hcmEnLCAnUmlzb3R0bycsICdQaXp6YSBNYXJnaGVyaXRhJ10gfSxcbiAgICAgIHsgbmFtZTogJ0NoaW5lc2UnLCBzY29yZTogODgsIHJlY2lwZXM6IFsnRnJpZWQgUmljZScsICdTd2VldCBhbmQgU291ciBQb3JrJywgJ0t1bmcgUGFvIENoaWNrZW4nXSB9LFxuICAgICAgeyBuYW1lOiAnTWV4aWNhbicsIHNjb3JlOiA4MiwgcmVjaXBlczogWydUYWNvcycsICdFbmNoaWxhZGFzJywgJ0d1YWNhbW9sZSddIH0sXG4gICAgICB7IG5hbWU6ICdJbmRpYW4nLCBzY29yZTogNzksIHJlY2lwZXM6IFsnQ3VycnknLCAnQmlyeWFuaScsICdOYWFuJ10gfVxuICAgIF07XG4gICAgXG4gICAgY29uc3QgaGFuZGxlQ3Vpc2luZVNlbGVjdCA9IChjdWlzaW5lOiBhbnkpID0+IHtcbiAgICAgIHNldFNlbGVjdGVkQ3Vpc2luZShjdWlzaW5lLm5hbWUpO1xuICAgICAgc2V0U2hvd1JlY2lwZXModHJ1ZSk7XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImN1aXNpbmUtcmVjb21tZW5kZXJcIj5cbiAgICAgICAgPGgzPkN1aXNpbmUgUmVjb21tZW5kYXRpb25zPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjdWlzaW5lLWdyaWRcIj5cbiAgICAgICAgICB7Y3Vpc2luZXMubWFwKGN1aXNpbmUgPT4gKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAga2V5PXtjdWlzaW5lLm5hbWV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImN1aXNpbmUtY2FyZFwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgY3Vpc2luZS1jYXJkLSR7Y3Vpc2luZS5uYW1lLnRvTG93ZXJDYXNlKCl9YH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUN1aXNpbmVTZWxlY3QoY3Vpc2luZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzZWxlY3RlZEN1aXNpbmUgPT09IGN1aXNpbmUubmFtZSA/ICdzZWxlY3RlZCcgOiAnJ31cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGN1aXNpbmUtJHtjdWlzaW5lLm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGg0PntjdWlzaW5lLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjb3JlXCI+TWF0Y2g6IHtjdWlzaW5lLnNjb3JlfSU8L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7c2hvd1JlY2lwZXMgJiYgc2VsZWN0ZWRDdWlzaW5lICYmIChcbiAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwicmVjaXBlLXJlY29tbWVuZGF0aW9uc1wiIGNsYXNzTmFtZT1cInJlY2lwZS1zZWN0aW9uXCI+XG4gICAgICAgICAgICA8aDQ+UmVjb21tZW5kZWQge3NlbGVjdGVkQ3Vpc2luZX0gUmVjaXBlczwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlY2lwZS1saXN0XCI+XG4gICAgICAgICAgICAgIHtjdWlzaW5lcy5maW5kKGMgPT4gYy5uYW1lID09PSBzZWxlY3RlZEN1aXNpbmUpPy5yZWNpcGVzLm1hcChyZWNpcGUgPT4gKFxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGtleT17cmVjaXBlfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2ByZWNpcGUtJHtyZWNpcGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyl9YH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlY2lwZS1idXR0b25cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtyZWNpcGV9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL0luZ3JlZGllbnRSZWNvbW1lbmRlcicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tJbmdyZWRpZW50UmVjb21tZW5kZXIoeyBtYXhEaXNwbGF5ZWQgPSA4IH06IHsgbWF4RGlzcGxheWVkPzogbnVtYmVyIH0pIHtcbiAgICBjb25zdCBbc2VsZWN0ZWRJbmdyZWRpZW50cywgc2V0U2VsZWN0ZWRJbmdyZWRpZW50c10gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICAgIGNvbnN0IFtleHBhbmRlZEluZ3JlZGllbnQsIHNldEV4cGFuZGVkSW5ncmVkaWVudF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBcbiAgICBjb25zdCBpbmdyZWRpZW50cyA9IFtcbiAgICAgIHsgbmFtZTogJ1RvbWF0b2VzJywgY2F0ZWdvcnk6ICdWZWdldGFibGVzJywgcHJvcGVydGllczogWydVbWFtaScsICdBY2lkaWMnLCAnRnJlc2gnXSB9LFxuICAgICAgeyBuYW1lOiAnT25pb25zJywgY2F0ZWdvcnk6ICdWZWdldGFibGVzJywgcHJvcGVydGllczogWydTd2VldCcsICdQdW5nZW50JywgJ0Fyb21hdGljJ10gfSxcbiAgICAgIHsgbmFtZTogJ0dhcmxpYycsIGNhdGVnb3J5OiAnQXJvbWF0aWNzJywgcHJvcGVydGllczogWydQdW5nZW50JywgJ1Nhdm9yeScsICdBcm9tYXRpYyddIH0sXG4gICAgICB7IG5hbWU6ICdCYXNpbCcsIGNhdGVnb3J5OiAnSGVyYnMnLCBwcm9wZXJ0aWVzOiBbJ0ZyZXNoJywgJ0Fyb21hdGljJywgJ1N3ZWV0J10gfSxcbiAgICAgIHsgbmFtZTogJ09saXZlIE9pbCcsIGNhdGVnb3J5OiAnT2lscycsIHByb3BlcnRpZXM6IFsnUmljaCcsICdGcnVpdHknLCAnU21vb3RoJ10gfSxcbiAgICAgIHsgbmFtZTogJ0NoZWVzZScsIGNhdGVnb3J5OiAnRGFpcnknLCBwcm9wZXJ0aWVzOiBbJ0NyZWFteScsICdTYWx0eScsICdSaWNoJ10gfSxcbiAgICAgIHsgbmFtZTogJ1Bhc3RhJywgY2F0ZWdvcnk6ICdHcmFpbnMnLCBwcm9wZXJ0aWVzOiBbJ05ldXRyYWwnLCAnRmlsbGluZycsICdWZXJzYXRpbGUnXSB9LFxuICAgICAgeyBuYW1lOiAnQ2hpY2tlbicsIGNhdGVnb3J5OiAnUHJvdGVpbnMnLCBwcm9wZXJ0aWVzOiBbJ0xlYW4nLCAnTWlsZCcsICdWZXJzYXRpbGUnXSB9XG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBkaXNwbGF5ZWRJbmdyZWRpZW50cyA9IGluZ3JlZGllbnRzLnNsaWNlKDAsIG1heERpc3BsYXllZCk7XG4gICAgXG4gICAgY29uc3QgdG9nZ2xlSW5ncmVkaWVudCA9IChpbmdyZWRpZW50OiBzdHJpbmcpID0+IHtcbiAgICAgIHNldFNlbGVjdGVkSW5ncmVkaWVudHMocHJldiA9PiBcbiAgICAgICAgcHJldi5pbmNsdWRlcyhpbmdyZWRpZW50KSBcbiAgICAgICAgICA/IHByZXYuZmlsdGVyKGkgPT4gaSAhPT0gaW5ncmVkaWVudClcbiAgICAgICAgICA6IFsuLi5wcmV2LCBpbmdyZWRpZW50XVxuICAgICAgKTtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHRvZ2dsZUV4cGFuZGVkID0gKGluZ3JlZGllbnQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0RXhwYW5kZWRJbmdyZWRpZW50KHByZXYgPT4gcHJldiA9PT0gaW5ncmVkaWVudCA/IG51bGwgOiBpbmdyZWRpZW50KTtcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaW5ncmVkaWVudC1yZWNvbW1lbmRlclwiPlxuICAgICAgICA8aDM+SW5ncmVkaWVudCBSZWNvbW1lbmRhdGlvbnM8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImluZ3JlZGllbnQtZ3JpZFwiPlxuICAgICAgICAgIHtkaXNwbGF5ZWRJbmdyZWRpZW50cy5tYXAoaW5ncmVkaWVudCA9PiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICBrZXk9e2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5ncmVkaWVudC1jYXJkXCJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BpbmdyZWRpZW50LWNhcmQtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdG9nZ2xlSW5ncmVkaWVudChpbmdyZWRpZW50Lm5hbWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2VsZWN0ZWRJbmdyZWRpZW50cy5pbmNsdWRlcyhpbmdyZWRpZW50Lm5hbWUpID8gJ3NlbGVjdGVkJyA6ICcnfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgaW5ncmVkaWVudC0ke2luZ3JlZGllbnQubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aW5ncmVkaWVudC5uYW1lfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRvZ2dsZUV4cGFuZGVkKGluZ3JlZGllbnQubmFtZSl9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BleHBhbmQtJHtpbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKX1gfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImV4cGFuZC1idXR0b25cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2V4cGFuZGVkSW5ncmVkaWVudCA9PT0gaW5ncmVkaWVudC5uYW1lID8gJ+KWvCcgOiAn4pa2J31cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7ZXhwYW5kZWRJbmdyZWRpZW50ID09PSBpbmdyZWRpZW50Lm5hbWUgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9e2BkZXRhaWxzLSR7aW5ncmVkaWVudC5uYW1lLnRvTG93ZXJDYXNlKCl9YH0gY2xhc3NOYW1lPVwiaW5ncmVkaWVudC1kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2PkNhdGVnb3J5OiB7aW5ncmVkaWVudC5jYXRlZ29yeX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+UHJvcGVydGllczoge2luZ3JlZGllbnQucHJvcGVydGllcy5qb2luKCcsICcpfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAge3NlbGVjdGVkSW5ncmVkaWVudHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInNlbGVjdGVkLWluZ3JlZGllbnRzLXN1bW1hcnlcIiBjbGFzc05hbWU9XCJzZWxlY3Rpb24tc3VtbWFyeVwiPlxuICAgICAgICAgICAgPGg0PlNlbGVjdGVkIEluZ3JlZGllbnRzICh7c2VsZWN0ZWRJbmdyZWRpZW50cy5sZW5ndGh9KTwvaDQ+XG4gICAgICAgICAgICA8ZGl2PntzZWxlY3RlZEluZ3JlZGllbnRzLmpvaW4oJywgJyl9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL0Nvb2tpbmdNZXRob2RzU2VjdGlvbicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tDb29raW5nTWV0aG9kc1NlY3Rpb24oeyBcbiAgICBtYXhEaXNwbGF5ZWQgPSA2LCBcbiAgICBvblZpZXdNb3JlIFxuICB9OiB7IFxuICAgIG1heERpc3BsYXllZD86IG51bWJlcjtcbiAgICBvblZpZXdNb3JlPzogKCkgPT4gdm9pZDtcbiAgfSkge1xuICAgIGNvbnN0IFtzZWxlY3RlZE1ldGhvZCwgc2V0U2VsZWN0ZWRNZXRob2RdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gICAgXG4gICAgY29uc3QgbWV0aG9kcyA9IFtcbiAgICAgIHsgbmFtZTogJ1NhdXTDqScsIHRpbWU6ICc1LTEwIG1pbicsIGRpZmZpY3VsdHk6ICdFYXN5JywgZGVzY3JpcHRpb246ICdRdWljayBjb29raW5nIGluIGEgcGFuIHdpdGggb2lsJyB9LFxuICAgICAgeyBuYW1lOiAnUm9hc3QnLCB0aW1lOiAnMzAtNjAgbWluJywgZGlmZmljdWx0eTogJ01lZGl1bScsIGRlc2NyaXB0aW9uOiAnQ29va2luZyBpbiB0aGUgb3ZlbiB3aXRoIGRyeSBoZWF0JyB9LFxuICAgICAgeyBuYW1lOiAnR3JpbGwnLCB0aW1lOiAnMTAtMjAgbWluJywgZGlmZmljdWx0eTogJ01lZGl1bScsIGRlc2NyaXB0aW9uOiAnQ29va2luZyBvdmVyIGRpcmVjdCBoZWF0JyB9LFxuICAgICAgeyBuYW1lOiAnU3RlYW0nLCB0aW1lOiAnMTAtMTUgbWluJywgZGlmZmljdWx0eTogJ0Vhc3knLCBkZXNjcmlwdGlvbjogJ0Nvb2tpbmcgd2l0aCBzdGVhbSBoZWF0JyB9LFxuICAgICAgeyBuYW1lOiAnQnJhaXNlJywgdGltZTogJzYwLTEyMCBtaW4nLCBkaWZmaWN1bHR5OiAnSGFyZCcsIGRlc2NyaXB0aW9uOiAnU2xvdyBjb29raW5nIHdpdGggbGlxdWlkJyB9LFxuICAgICAgeyBuYW1lOiAnU3Rpci1mcnknLCB0aW1lOiAnNS04IG1pbicsIGRpZmZpY3VsdHk6ICdNZWRpdW0nLCBkZXNjcmlwdGlvbjogJ1F1aWNrIGNvb2tpbmcgd2hpbGUgc3RpcnJpbmcnIH1cbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGRpc3BsYXllZE1ldGhvZHMgPSBtZXRob2RzLnNsaWNlKDAsIG1heERpc3BsYXllZCk7XG4gICAgXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJjb29raW5nLW1ldGhvZHNcIj5cbiAgICAgICAgPGgzPkNvb2tpbmcgTWV0aG9kczwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWV0aG9kcy1ncmlkXCI+XG4gICAgICAgICAge2Rpc3BsYXllZE1ldGhvZHMubWFwKG1ldGhvZCA9PiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICBrZXk9e21ldGhvZC5uYW1lfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtZXRob2QtY2FyZFwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbWV0aG9kLWNhcmQtJHttZXRob2QubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZE1ldGhvZChtZXRob2QubmFtZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzZWxlY3RlZE1ldGhvZCA9PT0gbWV0aG9kLm5hbWUgPyAnc2VsZWN0ZWQnIDogJyd9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BtZXRob2QtJHttZXRob2QubmFtZS50b0xvd2VyQ2FzZSgpfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aDQ+e21ldGhvZC5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXRob2QtaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdj5UaW1lOiB7bWV0aG9kLnRpbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PkRpZmZpY3VsdHk6IHttZXRob2QuZGlmZmljdWx0eX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7c2VsZWN0ZWRNZXRob2QgPT09IG1ldGhvZC5uYW1lICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPXtgbWV0aG9kLWRldGFpbHMtJHttZXRob2QubmFtZS50b0xvd2VyQ2FzZSgpfWB9IGNsYXNzTmFtZT1cIm1ldGhvZC1kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgICA8cD57bWV0aG9kLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgb25DbGljaz17b25WaWV3TW9yZX0gXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJ2aWV3LW1vcmUtbWV0aG9kc1wiXG4gICAgICAgICAgY2xhc3NOYW1lPVwidmlldy1tb3JlLWJ1dHRvblwiXG4gICAgICAgID5cbiAgICAgICAgICBWaWV3IEFsbCBDb29raW5nIE1ldGhvZHNcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xufSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL3JlY2lwZXMvUmVjaXBlQnVpbGRlclNpbXBsZScsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tSZWNpcGVCdWlsZGVyU2ltcGxlKCkge1xuICAgIGNvbnN0IFtyZWNpcGVOYW1lLCBzZXRSZWNpcGVOYW1lXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbaW5ncmVkaWVudHMsIHNldEluZ3JlZGllbnRzXSA9IFJlYWN0LnVzZVN0YXRlPEFycmF5PHtuYW1lOiBzdHJpbmcsIHF1YW50aXR5OiBzdHJpbmd9Pj4oW10pO1xuICAgIGNvbnN0IFtzdGVwcywgc2V0U3RlcHNdID0gUmVhY3QudXNlU3RhdGU8QXJyYXk8e2luc3RydWN0aW9uOiBzdHJpbmcsIHRpbWluZzogc3RyaW5nfT4+KFtdKTtcbiAgICBjb25zdCBbc2VydmluZ3MsIHNldFNlcnZpbmdzXSA9IFJlYWN0LnVzZVN0YXRlKDQpO1xuICAgIGNvbnN0IFtwcmVwVGltZSwgc2V0UHJlcFRpbWVdID0gUmVhY3QudXNlU3RhdGUoMTUpO1xuICAgIGNvbnN0IFtjb29rVGltZSwgc2V0Q29va1RpbWVdID0gUmVhY3QudXNlU3RhdGUoMzApO1xuICAgIFxuICAgIGNvbnN0IGFkZEluZ3JlZGllbnQgPSAoKSA9PiB7XG4gICAgICBzZXRJbmdyZWRpZW50cyhwcmV2ID0+IFsuLi5wcmV2LCB7IG5hbWU6ICcnLCBxdWFudGl0eTogJycgfV0pO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgdXBkYXRlSW5ncmVkaWVudCA9IChpbmRleDogbnVtYmVyLCBmaWVsZDogJ25hbWUnIHwgJ3F1YW50aXR5JywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgc2V0SW5ncmVkaWVudHMocHJldiA9PiBwcmV2Lm1hcCgoaW5nLCBpKSA9PiBcbiAgICAgICAgaSA9PT0gaW5kZXggPyB7IC4uLmluZywgW2ZpZWxkXTogdmFsdWUgfSA6IGluZ1xuICAgICAgKSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCByZW1vdmVJbmdyZWRpZW50ID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHNldEluZ3JlZGllbnRzKHByZXYgPT4gcHJldi5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBhZGRTdGVwID0gKCkgPT4ge1xuICAgICAgc2V0U3RlcHMocHJldiA9PiBbLi4ucHJldiwgeyBpbnN0cnVjdGlvbjogJycsIHRpbWluZzogJycgfV0pO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgdXBkYXRlU3RlcCA9IChpbmRleDogbnVtYmVyLCBmaWVsZDogJ2luc3RydWN0aW9uJyB8ICd0aW1pbmcnLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRTdGVwcyhwcmV2ID0+IHByZXYubWFwKChzdGVwLCBpKSA9PiBcbiAgICAgICAgaSA9PT0gaW5kZXggPyB7IC4uLnN0ZXAsIFtmaWVsZF06IHZhbHVlIH0gOiBzdGVwXG4gICAgICApKTtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHJlbW92ZVN0ZXAgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgc2V0U3RlcHMocHJldiA9PiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpKTtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGNhblNhdmUgPSByZWNpcGVOYW1lLnRyaW0oKSAmJiBcbiAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50cy5zb21lKGluZyA9PiBpbmcubmFtZS50cmltKCkpICYmIFxuICAgICAgICAgICAgICAgICAgIHN0ZXBzLnNvbWUoc3RlcCA9PiBzdGVwLmluc3RydWN0aW9uLnRyaW0oKSk7XG4gICAgXG4gICAgY29uc3QgdG90YWxUaW1lID0gcHJlcFRpbWUgKyBjb29rVGltZTtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInJlY2lwZS1idWlsZGVyXCI+XG4gICAgICAgIDxoMz5SZWNpcGUgQnVpbGRlcjwvaDM+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlY2lwZS1mb3JtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWNpcGUtaGVhZGVyXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlJlY2lwZSBOYW1lXCJcbiAgICAgICAgICAgICAgdmFsdWU9e3JlY2lwZU5hbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UmVjaXBlTmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwicmVjaXBlLW5hbWUtaW5wdXRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWNpcGUtbWV0YVwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VydmluZ3N9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZXJ2aW5ncyhwYXJzZUludChlLnRhcmdldC52YWx1ZSkgfHwgMSl9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJzZXJ2aW5ncy1pbnB1dFwiXG4gICAgICAgICAgICAgICAgbWluPVwiMVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtwcmVwVGltZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFByZXBUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInByZXAtdGltZS1pbnB1dFwiXG4gICAgICAgICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtjb29rVGltZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldENvb2tUaW1lKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImNvb2stdGltZS1pbnB1dFwiXG4gICAgICAgICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImluZ3JlZGllbnRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoND5JbmdyZWRpZW50czwvaDQ+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FkZEluZ3JlZGllbnR9IGRhdGEtdGVzdGlkPVwiYWRkLWluZ3JlZGllbnRcIj5cbiAgICAgICAgICAgICAgQWRkIEluZ3JlZGllbnRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7aW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cImluZ3JlZGllbnQtcm93XCIgZGF0YS10ZXN0aWQ9e2BpbmdyZWRpZW50LXJvdy0ke2luZGV4fWB9PlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJRdWFudGl0eVwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17aW5ncmVkaWVudC5xdWFudGl0eX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdXBkYXRlSW5ncmVkaWVudChpbmRleCwgJ3F1YW50aXR5JywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BpbmdyZWRpZW50LXF1YW50aXR5LSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJJbmdyZWRpZW50IG5hbWVcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2luZ3JlZGllbnQubmFtZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdXBkYXRlSW5ncmVkaWVudChpbmRleCwgJ25hbWUnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGluZ3JlZGllbnQtbmFtZS0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByZW1vdmVJbmdyZWRpZW50KGluZGV4KX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgcmVtb3ZlLWluZ3JlZGllbnQtJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFJlbW92ZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaW5ncmVkaWVudHMtY291bnRcIj5cbiAgICAgICAgICAgICAgSW5ncmVkaWVudHM6IHtpbmdyZWRpZW50cy5sZW5ndGh9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0ZXBzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxoND5JbnN0cnVjdGlvbnM8L2g0PlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXthZGRTdGVwfSBkYXRhLXRlc3RpZD1cImFkZC1zdGVwXCI+XG4gICAgICAgICAgICAgIEFkZCBTdGVwXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAge3N0ZXBzLm1hcCgoc3RlcCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJzdGVwLXJvd1wiIGRhdGEtdGVzdGlkPXtgc3RlcC1yb3ctJHtpbmRleH1gfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzdGVwLW51bWJlclwiPntpbmRleCArIDF9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEZXNjcmliZSB0aGlzIHN0ZXAuLi5cIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0ZXAuaW5zdHJ1Y3Rpb259XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZVN0ZXAoaW5kZXgsICdpbnN0cnVjdGlvbicsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC1pbnN0cnVjdGlvbi0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVGltaW5nXCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtzdGVwLnRpbWluZ31cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdXBkYXRlU3RlcChpbmRleCwgJ3RpbWluZycsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3RlcC10aW1pbmctJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVtb3ZlU3RlcChpbmRleCl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YHJlbW92ZS1zdGVwLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBSZW1vdmVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0ZXBzLWNvdW50XCI+XG4gICAgICAgICAgICAgIFN0ZXBzOiB7c3RlcHMubGVuZ3RofVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWNpcGUtc3VtbWFyeVwiIGRhdGEtdGVzdGlkPVwicmVjaXBlLXN1bW1hcnlcIj5cbiAgICAgICAgICAgIDxoND5SZWNpcGUgU3VtbWFyeTwvaDQ+XG4gICAgICAgICAgICA8ZGl2Pk5hbWU6IHtyZWNpcGVOYW1lIHx8ICdVbnRpdGxlZCBSZWNpcGUnfTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5TZXJ2aW5nczoge3NlcnZpbmdzfTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5Ub3RhbCBUaW1lOiB7dG90YWxUaW1lfSBtaW51dGVzPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PkluZ3JlZGllbnRzOiB7aW5ncmVkaWVudHMubGVuZ3RofTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5TdGVwczoge3N0ZXBzLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFjYW5TYXZlfVxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJzYXZlLXJlY2lwZVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NhblNhdmUgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFNhdmUgUmVjaXBlXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcbn0pO1xuXG5kZXNjcmliZSgnTWFpbiBQYWdlIEUyRSBXb3JrZmxvd3MnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBbGNoZW1pY2FsQ29udGV4dCA9IHtcbiAgICBzdGF0ZToge1xuICAgICAgYXN0cm9sb2dpY2FsU3RhdGU6IHsgc3VuU2lnbjogJ2FyaWVzJyB9LFxuICAgICAgZWxlbWVudGFsU3RhdGU6IHsgRmlyZTogMC4zLCBXYXRlcjogMC4yLCBFYXJ0aDogMC4zLCBBaXI6IDAuMiB9XG4gICAgfSxcbiAgICBwbGFuZXRhcnlQb3NpdGlvbnM6IHsgc3VuOiB7IHNpZ246ICdhcmllcycgfSB9LFxuICAgIGlzRGF5dGltZTogdHJ1ZVxuICB9O1xuXG4gIGNvbnN0IG1vY2tOYXZpZ2F0aW9uU3RhdGUgPSB7XG4gICAgc2F2ZVN0YXRlOiBqZXN0LmZuKCksXG4gICAgZ2V0U3RhdGU6IGplc3QuZm4oKCkgPT4gKHt9KSlcbiAgfTtcblxuICBjb25zdCBtb2NrU2Nyb2xsUHJlc2VydmF0aW9uID0ge1xuICAgIHJlc3RvcmVTY3JvbGxQb3NpdGlvbjogamVzdC5mbigpXG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgKHVzZUFsY2hlbWljYWwgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja0FsY2hlbWljYWxDb250ZXh0KTtcbiAgICAodXNlTmF2aWdhdGlvblN0YXRlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tOYXZpZ2F0aW9uU3RhdGUpO1xuICAgICh1c2VTY3JvbGxQcmVzZXJ2YXRpb24gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1Njcm9sbFByZXNlcnZhdGlvbik7XG4gICAgKHVzZUF1dG9TdGF0ZUNsZWFudXAgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUodW5kZWZpbmVkKTtcblxuICAgIC8vIE1vY2sgRE9NIG1ldGhvZHNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnc2Nyb2xsWScsIHsgdmFsdWU6IDAsIHdyaXRhYmxlOiB0cnVlIH0pO1xuICAgIGplc3Quc3B5T24oZG9jdW1lbnQsICdnZXRFbGVtZW50QnlJZCcpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgICAgc2Nyb2xsSW50b1ZpZXc6IGplc3QuZm4oKSxcbiAgICAgIHN0eWxlOiB7fSxcbiAgICAgIGNsYXNzTGlzdDogeyBhZGQ6IGplc3QuZm4oKSwgcmVtb3ZlOiBqZXN0LmZuKCkgfVxuICAgIH0gYXMgYW55KSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgaXQoJ2NvbXBsZXRlcyBmdWxsIG1lYWwgcGxhbm5pbmcgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgIFxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IC8+KTtcbiAgICB9KTtcblxuICAgIC8vIFdhaXQgZm9yIGFsbCBjb21wb25lbnRzIHRvIGxvYWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1aXNpbmUtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Nvb2tpbmctbWV0aG9kcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLWJ1aWxkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIFN0ZXAgMTogU2VsZWN0IGEgY3Vpc2luZVxuICAgIGNvbnN0IGl0YWxpYW5DdWlzaW5lID0gc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLWl0YWxpYW4nKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGl0YWxpYW5DdWlzaW5lKTtcblxuICAgIC8vIFZlcmlmeSBjdWlzaW5lIHNlbGVjdGlvbiBhbmQgcmVjaXBlIHJlY29tbWVuZGF0aW9ucyBhcHBlYXJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtcmVjb21tZW5kYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JlY29tbWVuZGVkIEl0YWxpYW4gUmVjaXBlcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gU3RlcCAyOiBTZWxlY3QgaW5ncmVkaWVudHNcbiAgICBjb25zdCB0b21hdG9lcyA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC10b21hdG9lcycpO1xuICAgIGNvbnN0IGJhc2lsID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LWJhc2lsJyk7XG4gICAgY29uc3Qgb2xpdmVPaWwgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtb2xpdmUgb2lsJyk7XG5cbiAgICBhd2FpdCB1c2VyLmNsaWNrKHRvbWF0b2VzKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGJhc2lsKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKG9saXZlT2lsKTtcblxuICAgIC8vIFZlcmlmeSBpbmdyZWRpZW50IHNlbGVjdGlvblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbGVjdGVkLWluZ3JlZGllbnRzLXN1bW1hcnknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgSW5ncmVkaWVudHMgKDMpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTdGVwIDM6IFNlbGVjdCBjb29raW5nIG1ldGhvZFxuICAgIGNvbnN0IHNhdXRlTWV0aG9kID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2Qtc2F1dMOpJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhzYXV0ZU1ldGhvZCk7XG5cbiAgICAvLyBWZXJpZnkgbWV0aG9kIHNlbGVjdGlvbiBhbmQgZGV0YWlsc1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXNhdXTDqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gU3RlcCA0OiBCdWlsZCBhIHJlY2lwZVxuICAgIGNvbnN0IHJlY2lwZU5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncmVjaXBlLW5hbWUtaW5wdXQnKTtcbiAgICBhd2FpdCB1c2VyLnR5cGUocmVjaXBlTmFtZUlucHV0LCAnSXRhbGlhbiBUb21hdG8gQmFzaWwgU2F1dMOpJyk7XG5cbiAgICAvLyBBZGQgaW5ncmVkaWVudHMgdG8gcmVjaXBlXG4gICAgY29uc3QgYWRkSW5ncmVkaWVudEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLWluZ3JlZGllbnQnKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGFkZEluZ3JlZGllbnRCdXR0b24pO1xuICAgIGF3YWl0IHVzZXIuY2xpY2soYWRkSW5ncmVkaWVudEJ1dHRvbik7XG4gICAgYXdhaXQgdXNlci5jbGljayhhZGRJbmdyZWRpZW50QnV0dG9uKTtcblxuICAgIC8vIEZpbGwgaW4gaW5ncmVkaWVudCBkZXRhaWxzXG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1xdWFudGl0eS0wJyksICcyIGN1cHMnKTtcbiAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LW5hbWUtMCcpLCAnRnJlc2ggVG9tYXRvZXMnKTtcblxuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcXVhbnRpdHktMScpLCAnMS80IGN1cCcpO1xuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtbmFtZS0xJyksICdGcmVzaCBCYXNpbCcpO1xuXG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1xdWFudGl0eS0yJyksICcyIHRic3AnKTtcbiAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LW5hbWUtMicpLCAnT2xpdmUgT2lsJyk7XG5cbiAgICAvLyBBZGQgY29va2luZyBzdGVwc1xuICAgIGNvbnN0IGFkZFN0ZXBCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1zdGVwJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhhZGRTdGVwQnV0dG9uKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGFkZFN0ZXBCdXR0b24pO1xuXG4gICAgYXdhaXQgdXNlci50eXBlKFxuICAgICAgc2NyZWVuLmdldEJ5VGVzdElkKCdzdGVwLWluc3RydWN0aW9uLTAnKSxcbiAgICAgICdIZWF0IG9saXZlIG9pbCBpbiBhIGxhcmdlIHBhbiBvdmVyIG1lZGl1bSBoZWF0J1xuICAgICk7XG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC10aW1pbmctMCcpLCAnMiBtaW4nKTtcblxuICAgIGF3YWl0IHVzZXIudHlwZShcbiAgICAgIHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0xJyksXG4gICAgICAnQWRkIHRvbWF0b2VzIGFuZCBiYXNpbCwgc2F1dMOpIHVudGlsIHRlbmRlcidcbiAgICApO1xuICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0ZXAtdGltaW5nLTEnKSwgJzggbWluJyk7XG5cbiAgICAvLyBWZXJpZnkgcmVjaXBlIGNhbiBiZSBzYXZlZFxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NhdmUtcmVjaXBlJyk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvQmVFbmFibGVkKCk7XG5cbiAgICAvLyBTYXZlIHRoZSByZWNpcGVcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNhdmVCdXR0b24pO1xuXG4gICAgLy8gVmVyaWZ5IHRoZSBjb21wbGV0ZSB3b3JrZmxvd1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0l0YWxpYW4gVG9tYXRvIEJhc2lsIFNhdXTDqScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbmdyZWRpZW50czogMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTdGVwczogMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnaGFuZGxlcyBpbmdyZWRpZW50IGV4cGxvcmF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICBcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2luZ3JlZGllbnQtcmVjb21tZW5kZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIEV4cGFuZCBpbmdyZWRpZW50IGRldGFpbHNcbiAgICBjb25zdCBleHBhbmRUb21hdG9lcyA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnZXhwYW5kLXRvbWF0b2VzJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhleHBhbmRUb21hdG9lcyk7XG5cbiAgICAvLyBWZXJpZnkgZGV0YWlscyBhcmUgc2hvd25cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdkZXRhaWxzLXRvbWF0b2VzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NhdGVnb3J5OiBWZWdldGFibGVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb3BlcnRpZXM6IFVtYW1pLCBBY2lkaWMsIEZyZXNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBFeHBhbmQgYW5vdGhlciBpbmdyZWRpZW50XG4gICAgY29uc3QgZXhwYW5kR2FybGljID0gc2NyZWVuLmdldEJ5VGVzdElkKCdleHBhbmQtZ2FybGljJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhleHBhbmRHYXJsaWMpO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZGV0YWlscy1nYXJsaWMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ2F0ZWdvcnk6IEFyb21hdGljcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gQ29sbGFwc2UgZmlyc3QgaW5ncmVkaWVudFxuICAgIGF3YWl0IHVzZXIuY2xpY2soZXhwYW5kVG9tYXRvZXMpO1xuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRlc3RJZCgnZGV0YWlscy10b21hdG9lcycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFNlbGVjdCBtdWx0aXBsZSBpbmdyZWRpZW50c1xuICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LXRvbWF0b2VzJykpO1xuICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdpbmdyZWRpZW50LWdhcmxpYycpKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1iYXNpbCcpKTtcblxuICAgIC8vIFZlcmlmeSBzZWxlY3Rpb24gc3VtbWFyeVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBJbmdyZWRpZW50cyAoMyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVG9tYXRvZXMsIEdhcmxpYywgQmFzaWwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgY29va2luZyBtZXRob2QgZXhwbG9yYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgIFxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPE1haW5QYWdlTGF5b3V0IC8+KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY29va2luZy1tZXRob2RzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBTZWxlY3QgZGlmZmVyZW50IGNvb2tpbmcgbWV0aG9kcyBhbmQgdmlldyBkZXRhaWxzXG4gICAgY29uc3Qgcm9hc3RNZXRob2QgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ21ldGhvZC1yb2FzdCcpO1xuICAgIGF3YWl0IHVzZXIuY2xpY2socm9hc3RNZXRob2QpO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtcm9hc3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29va2luZyBpbiB0aGUgb3ZlbiB3aXRoIGRyeSBoZWF0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBTd2l0Y2ggdG8gYW5vdGhlciBtZXRob2RcbiAgICBjb25zdCBncmlsbE1ldGhvZCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWdyaWxsJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhncmlsbE1ldGhvZCk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdtZXRob2QtZGV0YWlscy1ncmlsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb29raW5nIG92ZXIgZGlyZWN0IGhlYXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFByZXZpb3VzIG1ldGhvZCBkZXRhaWxzIHNob3VsZCBiZSBoaWRkZW5cbiAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ21ldGhvZC1kZXRhaWxzLXJvYXN0JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gVGVzdCB2aWV3IG1vcmUgZnVuY3Rpb25hbGl0eVxuICAgIGNvbnN0IHZpZXdNb3JlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCd2aWV3LW1vcmUtbWV0aG9kcycpO1xuICAgIGV4cGVjdCh2aWV3TW9yZUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgY29tcGxldGUgcmVjaXBlIGNyZWF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICBcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxNYWluUGFnZUxheW91dCAvPik7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1idWlsZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgYSBjb21wbGV0ZSByZWNpcGUgZnJvbSBzY3JhdGNoXG4gICAgY29uc3QgcmVjaXBlTmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIGF3YWl0IHVzZXIudHlwZShyZWNpcGVOYW1lSW5wdXQsICdNZWRpdGVycmFuZWFuIENoaWNrZW4nKTtcblxuICAgIC8vIFVwZGF0ZSByZWNpcGUgbWV0YWRhdGFcbiAgICBjb25zdCBzZXJ2aW5nc0lucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZXJ2aW5ncy1pbnB1dCcpO1xuICAgIGNvbnN0IHByZXBUaW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ByZXAtdGltZS1pbnB1dCcpO1xuICAgIGNvbnN0IGNvb2tUaW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Nvb2stdGltZS1pbnB1dCcpO1xuXG4gICAgYXdhaXQgdXNlci5jbGVhcihzZXJ2aW5nc0lucHV0KTtcbiAgICBhd2FpdCB1c2VyLnR5cGUoc2VydmluZ3NJbnB1dCwgJzYnKTtcblxuICAgIGF3YWl0IHVzZXIuY2xlYXIocHJlcFRpbWVJbnB1dCk7XG4gICAgYXdhaXQgdXNlci50eXBlKHByZXBUaW1lSW5wdXQsICcyMCcpO1xuXG4gICAgYXdhaXQgdXNlci5jbGVhcihjb29rVGltZUlucHV0KTtcbiAgICBhd2FpdCB1c2VyLnR5cGUoY29va1RpbWVJbnB1dCwgJzQ1Jyk7XG5cbiAgICAvLyBBZGQgbXVsdGlwbGUgaW5ncmVkaWVudHNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1pbmdyZWRpZW50JykpO1xuICAgIH1cblxuICAgIGNvbnN0IGluZ3JlZGllbnRzID0gW1xuICAgICAgeyBxdWFudGl0eTogJzIgbGJzJywgbmFtZTogJ0NoaWNrZW4gQnJlYXN0JyB9LFxuICAgICAgeyBxdWFudGl0eTogJzEgY3VwJywgbmFtZTogJ0NoZXJyeSBUb21hdG9lcycgfSxcbiAgICAgIHsgcXVhbnRpdHk6ICcxLzIgY3VwJywgbmFtZTogJ0thbGFtYXRhIE9saXZlcycgfSxcbiAgICAgIHsgcXVhbnRpdHk6ICcxLzQgY3VwJywgbmFtZTogJ09saXZlIE9pbCcgfVxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZ3JlZGllbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKGBpbmdyZWRpZW50LXF1YW50aXR5LSR7aX1gKSwgaW5ncmVkaWVudHNbaV0ucXVhbnRpdHkpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZChgaW5ncmVkaWVudC1uYW1lLSR7aX1gKSwgaW5ncmVkaWVudHNbaV0ubmFtZSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGNvb2tpbmcgc3RlcHNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FkZC1zdGVwJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0ZXBzID0gW1xuICAgICAgeyBpbnN0cnVjdGlvbjogJ1ByZWhlYXQgb3ZlbiB0byAzNzXCsEYgYW5kIHByZXBhcmUgY2hpY2tlbicsIHRpbWluZzogJzUgbWluJyB9LFxuICAgICAgeyBpbnN0cnVjdGlvbjogJ1NlYXIgY2hpY2tlbiBpbiBvbGl2ZSBvaWwgdW50aWwgZ29sZGVuJywgdGltaW5nOiAnMTAgbWluJyB9LFxuICAgICAgeyBpbnN0cnVjdGlvbjogJ0FkZCB0b21hdG9lcyBhbmQgb2xpdmVzLCBiYWtlIHVudGlsIGRvbmUnLCB0aW1pbmc6ICczMCBtaW4nIH1cbiAgICBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZChgc3RlcC1pbnN0cnVjdGlvbi0ke2l9YCksIHN0ZXBzW2ldLmluc3RydWN0aW9uKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoYHN0ZXAtdGltaW5nLSR7aX1gKSwgc3RlcHNbaV0udGltaW5nKTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZnkgcmVjaXBlIHN1bW1hcnlcbiAgICBjb25zdCBzdW1tYXJ5ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtc3VtbWFyeScpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnTmFtZTogTWVkaXRlcnJhbmVhbiBDaGlja2VuJyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvSGF2ZVRleHRDb250ZW50KCdTZXJ2aW5nczogNicpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnVG90YWwgVGltZTogNjUgbWludXRlcycpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0hhdmVUZXh0Q29udGVudCgnSW5ncmVkaWVudHM6IDQnKTtcbiAgICBleHBlY3Qoc3VtbWFyeSkudG9IYXZlVGV4dENvbnRlbnQoJ1N0ZXBzOiAzJyk7XG5cbiAgICAvLyBWZXJpZnkgc2F2ZSBidXR0b24gaXMgZW5hYmxlZFxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NhdmUtcmVjaXBlJyk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvQmVFbmFibGVkKCk7XG4gICAgZXhwZWN0KHNhdmVCdXR0b24pLnRvSGF2ZUNsYXNzKCdlbmFibGVkJyk7XG5cbiAgICAvLyBUZXN0IGluZ3JlZGllbnQgcmVtb3ZhbFxuICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdyZW1vdmUtaW5ncmVkaWVudC0zJykpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbmdyZWRpZW50czogMycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgLy8gVGVzdCBzdGVwIHJlbW92YWxcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgncmVtb3ZlLXN0ZXAtMCcpKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcHM6IDInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgIC8vIFZlcmlmeSBzdGVwIHJlbnVtYmVyaW5nXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnU2VhciBjaGlja2VuIGluIG9saXZlIG9pbCB1bnRpbCBnb2xkZW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgbmF2aWdhdGlvbiBhbmQgc3RhdGUgcHJlc2VydmF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICBjb25zdCBtb2NrT25TZWN0aW9uTmF2aWdhdGUgPSBqZXN0LmZuKCk7XG4gICAgXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8TWFpblBhZ2VMYXlvdXQgb25TZWN0aW9uTmF2aWdhdGU9e21vY2tPblNlY3Rpb25OYXZpZ2F0ZX0gLz4pO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjdWlzaW5lLXJlY29tbWVuZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBNYWtlIHNlbGVjdGlvbnMgYWNyb3NzIGRpZmZlcmVudCBjb21wb25lbnRzXG4gICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1aXNpbmUtaXRhbGlhbicpKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC10b21hdG9lcycpKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLXNhdXTDqScpKTtcblxuICAgIC8vIE5hdmlnYXRlIGJldHdlZW4gc2VjdGlvbnNcbiAgICBjb25zdCBjdWlzaW5lTmF2QnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnQ3Vpc2luZSBSZWNvbW1lbmRhdGlvbnMnKTtcbiAgICBhd2FpdCB1c2VyLmNsaWNrKGN1aXNpbmVOYXZCdXR0b24pO1xuICAgIGV4cGVjdChtb2NrT25TZWN0aW9uTmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdjdWlzaW5lJyk7XG5cbiAgICBjb25zdCBpbmdyZWRpZW50c05hdkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0luZ3JlZGllbnQgUmVjb21tZW5kYXRpb25zJyk7XG4gICAgYXdhaXQgdXNlci5jbGljayhpbmdyZWRpZW50c05hdkJ1dHRvbik7XG4gICAgZXhwZWN0KG1vY2tPblNlY3Rpb25OYXZpZ2F0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2luZ3JlZGllbnRzJyk7XG5cbiAgICAvLyBWZXJpZnkgc3RhdGUgcHJlc2VydmF0aW9uIHdhcyBjYWxsZWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChtb2NrTmF2aWdhdGlvblN0YXRlLnNhdmVTdGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gVmVyaWZ5IHNlbGVjdGlvbnMgYXJlIG1haW50YWluZWQgYWZ0ZXIgbmF2aWdhdGlvblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3JlY2lwZS1yZWNvbW1lbmRhdGlvbnMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgSW5ncmVkaWVudHMgKDEpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbWV0aG9kLWRldGFpbHMtc2F1dMOpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGVycm9yIHJlY292ZXJ5IHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICBcbiAgICAvLyBNb2NrIGNvbnNvbGUuZXJyb3IgdG8gYXZvaWQgbm9pc2VcbiAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8TWFpblBhZ2VMYXlvdXQgLz4pO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtYnVpbGRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2ltdWxhdGUgdXNlciBjcmVhdGluZyBhIHJlY2lwZSBhbmQgZW5jb3VudGVyaW5nIGFuIGVycm9yXG4gICAgY29uc3QgcmVjaXBlTmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtbmFtZS1pbnB1dCcpO1xuICAgIGF3YWl0IHVzZXIudHlwZShyZWNpcGVOYW1lSW5wdXQsICdUZXN0IFJlY2lwZScpO1xuXG4gICAgLy8gQWRkIGluZ3JlZGllbnRcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLWluZ3JlZGllbnQnKSk7XG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5ncmVkaWVudC1uYW1lLTAnKSwgJ1Rlc3QgSW5ncmVkaWVudCcpO1xuXG4gICAgLy8gQWRkIHN0ZXBcbiAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYWRkLXN0ZXAnKSk7XG4gICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3RlcC1pbnN0cnVjdGlvbi0wJyksICdUZXN0IHN0ZXAnKTtcblxuICAgIC8vIFZlcmlmeSByZWNpcGUgaXMgdmFsaWRcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzYXZlLXJlY2lwZScpKS50b0JlRW5hYmxlZCgpO1xuXG4gICAgLy8gVGhlIG1haW4gcGFnZSBzaG91bGQgY29udGludWUgdG8gZnVuY3Rpb24gZGVzcGl0ZSBhbnkgZXJyb3JzXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1doYXQgdG8gRWF0IE5leHQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdyZWNpcGUtYnVpbGRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==