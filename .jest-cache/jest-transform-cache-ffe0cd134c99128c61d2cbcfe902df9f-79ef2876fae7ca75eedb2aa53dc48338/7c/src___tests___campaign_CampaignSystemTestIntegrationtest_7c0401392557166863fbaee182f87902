dec4a5ce406f8030b84f5fcc8eb2097f
"use strict";
/* eslint-disable @typescript-eslint/no-explicit-any, no-console, @typescript-eslint/no-unused-vars, max-lines-per-function -- Campaign/test file with intentional patterns */
/**
 * Campaign System Test Integration Tests
 *
 * Comprehensive tests for campaign system test integration functionality,
 * including mocking, isolation, and memory management.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const campaign_1 = require("../../types/campaign");
const CampaignTestController_1 = require("../utils/CampaignTestController");
const campaignTestUtils_1 = require("../utils/campaignTestUtils");
describe('Campaign System Test Integration', () => {
    // Test isolation and cleanup
    afterEach(async () => {
        // Ensure cleanup after each test
        try {
            void CampaignTestController_1.campaignTestController.cleanupAfterTest('test-cleanup');
        }
        catch (error) {
            console.warn('Cleanup warning:', error);
        }
    });
    afterAll(async () => {
        // Force cleanup of singleton instances
        const { CampaignTestController } = await Promise.resolve().then(() => __importStar(require('../utils/CampaignTestController')));
        void CampaignTestController.forceCleanup();
    });
    describe('Campaign System Mocking', () => {
        it('should initialize mock campaign system without running actual builds', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'mock-initialization-test',
                preventActualBuilds: true,
                preventGitOperations: true
            });
            try {
                // Verify mock instances are created
                expect(context.controller).toBeDefined();
                expect(context.tracker).toBeDefined();
                expect(context.safety).toBeDefined();
                // Verify test isolation is active
                void campaignTestUtils_1.campaignTestAssertions.testIsolationActive(context);
                // Verify environment variables are set for test isolation
                expect(process.env.NODE_ENV).toBe('test');
                expect(process.env.DISABLE_ACTUAL_BUILDS).toBe('true');
                expect(process.env.DISABLE_GIT_OPERATIONS).toBe('true');
                // Test that mock controller doesn't run actual scripts
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                const result = await context.controller.executePhase(mockPhase);
                expect(result.success).toBe(true);
                expect(result.executionTime).toBeGreaterThan(0);
                expect(result.safetyEvents).toBeDefined();
                // Verify no actual build processes were triggered
                expect(result.filesProcessed).toBeGreaterThan(0); // Mock processing
                expect(result.errorsFixed).toBeGreaterThan(0); // Mock fixes
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('mock-initialization-test');
            }
        });
        it('should prevent actual TypeScript compilation during tests', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'prevent-tsc-test',
                preventActualBuilds: true
            });
            try {
                // Mock TypeScript error count should not run actual tsc
                const errorCount = context.tracker.getTypeScriptErrorCount();
                expect(typeof errorCount).toBe('number');
                expect(errorCount).toBeGreaterThanOrEqual(0);
                // Mock error breakdown should not run actual analysis
                const breakdown = context.tracker.getTypeScriptErrorBreakdown();
                expect(typeof breakdown).toBe('object');
                expect(Object.keys(breakdown).length).toBeGreaterThan(0);
                // Verify that actual tsc command was not executed
                // (This is ensured by the mock implementation)
                expect(breakdown['TS2352']).toBeDefined();
                expect(breakdown['TS2339']).toBeDefined();
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('prevent-tsc-test');
            }
        });
        it('should prevent actual git operations during tests', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'prevent-git-test',
                preventGitOperations: true
            });
            try {
                // Mock stash creation should not run actual git commands
                const stashId = context.safety.createStash('checkpoint', 'test');
                expect(typeof stashId).toBe('string');
                expect(stashId).toContain('mock_stash_');
                // Mock stash application should not run actual git commands
                const stashResult = context.safety.applyStash(String(stashId));
                expect(stashResult).toBeDefined();
                // Mock git state validation should not run actual git commands
                const validation = await context.safety.validateGitState();
                expect(validation.success).toBe(true);
                // Verify safety events were recorded
                const safetyEvents = context.safety.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
                expect(safetyEvents.some(e => e.type === campaign_1.SafetyEventType.CHECKPOINT_CREATED)).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('prevent-git-test');
            }
        });
    });
    describe('Test-Safe Progress Tracking', () => {
        it('should track progress without memory leaks', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'memory-safe-tracking-test',
                enableMemoryMonitoring: true,
                mockProgressTracking: true
            });
            try {
                expect(context.testSafeTracker).toBeDefined();
                if (context.testSafeTracker) {
                    // Start tracking
                    context.testSafeTracker.startTracking('memory-test');
                    // Simulate multiple progress updates
                    for (let i = 0; i < 10; i++) {
                        context.testSafeTracker.updateMetrics({
                            typeScriptErrors: { current: 86 - i * 5,
                                target: 0,
                                reduction: i * 5,
                                percentage: Math.round(((i * 5) / 86) * 100)
                            }
                        }, `update-${i}`);
                    }
                    // Get progress history
                    const history = context.testSafeTracker.getProgressHistory();
                    expect(history.length).toBeGreaterThan(0);
                    expect(history.length).toBeLessThanOrEqual(20); // Should be limited to prevent memory issues
                    // Validate memory usage
                    const memoryStats = context.testSafeTracker.getMemoryStatistics();
                    if (memoryStats != null) {
                        expect(memoryStats.memoryEfficient).toBe(true);
                    }
                    // Stop tracking
                    context.testSafeTracker.stopTracking('memory-test');
                }
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('memory-safe-tracking-test');
            }
        });
        it('should simulate realistic progress over time', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'progress-simulation-test',
                mockProgressTracking: true
            });
            try {
                if (context.testSafeTracker) {
                    const initialMetrics = await context.testSafeTracker.getProgressMetrics();
                    // Simulate progress to target metrics
                    const targetMetrics = {
                        typeScriptErrors: { curren, t: 0, target: 0, reduction: 86, percentage: 100 },
                        lintingWarnings: { curren, t: 0, target: 0, reduction: 4506, percentage: 100 }
                    };
                    context.testSafeTracker.simulateProgress(targetMetrics, 1000, 'simulation-test');
                    const finalMetrics = await context.testSafeTracker.getProgressMetrics();
                    // Verify progress was made
                    expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(initialMetrics.typeScriptErrors.current);
                    expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(initialMetrics.lintingWarnings.current);
                }
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('progress-simulation-test');
            }
        });
        it('should generate comprehensive progress reports', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'progress-report-test',
                mockProgressTracking: true
            });
            try {
                // Generate progress report
                const report = await context.tracker.generateProgressReport();
                expect(report).toBeDefined();
                expect(report.campaignId).toBe('mock-campaign');
                expect(report.overallProgress).toBeGreaterThanOrEqual(0);
                expect(report.overallProgress).toBeLessThanOrEqual(100);
                expect(report.phases).toBeDefined();
                expect(report.phases.length).toBeGreaterThan(0);
                expect(report.currentMetrics).toBeDefined();
                expect(report.targetMetrics).toBeDefined();
                expect(report.estimatedCompletion).toBeInstanceOf(Date);
                // Verify phase reports
                const phase = (await report).phases[0];
                expect(phase.phaseId).toBeDefined();
                expect(phase.phaseName).toBeDefined();
                expect(phase.status).toBeDefined();
                expect(phase.metrics).toBeDefined();
                expect(Array.isArray(phase.achievements)).toBe(true);
                expect(Array.isArray(phase.issues)).toBe(true);
                expect(Array.isArray(phase.recommendations)).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('progress-report-test');
            }
        });
    });
    describe('Campaign Pause/Resume Functionality', () => {
        it('should pause campaign operations for test isolation', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'pause-resume-test'
            });
            try {
                // Verify campaign is paused
                expect(context.testController.isPaused()).toBe(true);
                expect(context.controller.isPaused()).toBe(true);
                // Attempt to execute phase while paused should handle gracefully
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                await expect(context.controller.executePhase(mockPhase)).rejects.toThrow('Campaign is paused');
                // Resume campaign
                context.testController.resumeCampaignAfterTest('pause-resume-test');
                expect(context.testController.isPaused()).toBe(false);
                expect(context.controller.isPaused()).toBe(false);
                // Should be able to execute phase after resume
                const result = await context.controller.executePhase(mockPhase);
                expect(result.success).toBe(true);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('pause-resume-test');
            }
        });
        it('should maintain test isolation across multiple tests', async () => {
            // First test
            const context1 = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'isolation-test-1'
            });
            try {
                context1.testController.updateMockMetrics({
                    typeScriptErrors: { curren, t: 10, target: 0, reduction: 76, percentage: 88 }
                }, 'isolation-test-1');
                const metrics1 = await context1.tracker.getProgressMetrics();
                expect(metrics1.typeScriptErrors.current).toBe(10);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('isolation-test-1');
            }
            // Second test should have clean state
            const context2 = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'isolation-test-2'
            });
            try {
                const metrics2 = await context2.tracker.getProgressMetrics();
                // Should not have the modified metrics from test 1
                expect(metrics2.typeScriptErrors.current).not.toBe(10);
                expect(metrics2.typeScriptErrors.current).toBeGreaterThan(10); // Should be initial value
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('isolation-test-2');
            }
        });
        it('should handle concurrent test isolation', async () => {
            // This test verifies that the singleton pattern works correctly
            // and doesn't cause conflicts between concurrent test setups
            const testPromises = [
                (0, campaignTestUtils_1.withCampaignTestIsolation)('concurrent-test-1', async (context) => {
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { curren, t: 20, target: 0, reduction: 66, percentage: 77 }
                    }, 'concurrent-test-1');
                    const metrics = await context.tracker.getProgressMetrics();
                    expect(metrics.typeScriptErrors.current).toBe(20);
                    return 'test-1-complete';
                }),
                (0, campaignTestUtils_1.withCampaignTestIsolation)('concurrent-test-2', async (context) => {
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { curren, t: 30, target: 0, reduction: 56, percentage: 65 }
                    }, 'concurrent-test-2');
                    const metrics = await context.tracker.getProgressMetrics();
                    expect(metrics.typeScriptErrors.current).toBe(30);
                    return 'test-2-complete';
                })
            ];
            const results = await Promise.all(testPromises);
            expect(results).toEqual(['test-1-complete', 'test-2-complete']);
        });
    });
    describe('Memory Management', () => {
        it('should prevent memory leaks during campaign operations', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'memory-leak-prevention-test',
                enableMemoryMonitoring: true
            });
            try {
                // Perform multiple operations that could cause memory leaks
                for (let i = 0; i < 20; i++) {
                    const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                    context.controller.executePhase(mockPhase);
                    // Update metrics
                    context.testController.updateMockMetrics({
                        typeScriptErrors: { curren, t: 86 - i, target: 0, reduction: i, percentage: Math.round((i / 86) * 100) }
                    }, `iteration-${i}`);
                    // Create safety checkpoints
                    context.safety.createStash(`Checkpoint ${i}`, 'test-phase');
                }
                // Validate memory usage
                void campaignTestUtils_1.campaignTestAssertions.memoryUsageAcceptable(context);
                // Verify that safety events are properly managed (not accumulating indefinitely)
                const safetyEvents = context.controller.getSafetyEvents();
                expect(safetyEvents.length).toBeLessThan(100); // Should be limited to prevent memory issues
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('memory-leak-prevention-test');
            }
        });
        it('should cleanup resources properly after test completion', async () => {
            // Setup and use campaign test
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'resource-cleanup-test',
                enableMemoryMonitoring: true
            });
            // Perform some operations
            const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
            context.controller.executePhase(mockPhase);
            if (context.testSafeTracker) {
                context.testSafeTracker.startTracking('cleanup-test');
                context.testSafeTracker.updateMetrics({
                    typeScriptErrors: { curren, t: 50, target: 0, reduction: 50, percentage: 50 }
                }, 'cleanup-test');
            }
            // Cleanup
            (0, campaignTestUtils_1.cleanupCampaignTest)('resource-cleanup-test');
            // Verify cleanup was effective
            expect(context.testController.isPaused()).toBe(false);
            expect(context.testController.isIsolated()).toBe(false);
            // Test-safe tracker should be cleaned up
            if (context.testSafeTracker) {
                const validation = context.testSafeTracker.validateTrackingState();
                // Should not be tracking anymore
                expect(validation.success).toBe(true);
            }
        });
    });
    describe('Complete Campaign Test Scenarios', () => {
        it('should execute TypeScript error reduction scenario', async () => {
            const scenario = campaignTestUtils_1.campaignTestData.typeScriptErrorReduction();
            const _config = (0, campaignTestUtils_1.createMockCampaignConfig)();
            const { context: _context, results, finalMetrics, safetyEvents: _safetyEvents } = await (0, campaignTestUtils_1.executeCampaignTestScenario)(scenario, _config);
            try {
                // Verify phase execution
                expect(results.length).toBe(1);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(results[0]);
                // Verify progress improvement
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(scenario.initialMetrics, finalMetrics);
                // Verify safety events
                campaignTestUtils_1.campaignTestAssertions.safetyEventsRecorded(_safetyEvents, scenario.expectedSafetyEvents);
                // Verify final state
                expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(scenario.initialMetrics.typeScriptErrors.current);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)(scenario.name);
            }
        });
        it('should execute linting warning cleanup scenario', async () => {
            const scenario = campaignTestUtils_1.campaignTestData.lintingWarningCleanup();
            const _config = (0, campaignTestUtils_1.createMockCampaignConfig)();
            const { context: _context, results, finalMetrics, safetyEvents: _safetyEvents } = await (0, campaignTestUtils_1.executeCampaignTestScenario)(scenario, _config);
            try {
                // Verify phase execution
                expect(results.length).toBe(1);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(results[0]);
                // Verify progress improvement
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(scenario.initialMetrics, finalMetrics);
                // Verify linting-specific improvements
                expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(scenario.initialMetrics.lintingWarnings.current);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)(scenario.name);
            }
        });
        it('should handle campaign failures gracefully', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'failure-handling-test'
            });
            try {
                // Create a phase that will fail
                const failingPhase = {
                    ...(0, campaignTestUtils_1.createMockCampaignConfig)().phases[0],
                    successCriteria: { typeScriptErrors: -1, // Impossible criteria
                    }
                };
                // Mock the controller to simulate failure
                void jest.spyOn(context.controller, 'executePhase').mockRejectedValueOnce(new Error('Mock failure'));
                // Execute phase and expect it to handle failure
                await expect(context.controller.executePhase(failingPhase)).rejects.toThrow('Mock failure');
                // Verify safety events were recorded for the failure
                const safetyEvents = context.controller.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('failure-handling-test');
            }
        });
    });
    describe('Integration Validation', () => {
        it('should validate complete campaign system integration', async () => {
            const context = await (0, campaignTestUtils_1.setupCampaignTest)({
                testName: 'integration-validation-test',
                enableMemoryMonitoring: true,
                preventActualBuilds: true,
                preventGitOperations: true,
                mockProgressTracking: true
            });
            try {
                // Validate test isolation
                const isolation = (0, campaignTestUtils_1.validateCampaignTestIsolation)(await context);
                expect(isolation.isValid).toBe(true);
                expect(isolation.issues).toHaveLength(0);
                // Test all major components
                const mockPhase = (0, campaignTestUtils_1.createMockCampaignConfig)().phases[0];
                // 1. Execute campaign phase
                const resolvedContext = await context;
                const phaseResult = await resolvedContext.controller.executePhase(mockPhase);
                void campaignTestUtils_1.campaignTestAssertions.phaseCompletedSuccessfully(phaseResult);
                // 2. Track progress
                const initialMetrics = await (await context).tracker.getProgressMetrics();
                context.testController.updateMockMetrics({
                    typeScriptErrors: { curren, t: 25, target: 0, reduction: 61, percentage: 71 }
                }, 'integration-test');
                const updatedMetrics = await (await context).tracker.getProgressMetrics();
                void campaignTestUtils_1.campaignTestAssertions.progressImproved(initialMetrics, updatedMetrics);
                // 3. Safety operations
                const stashId = (await context).safety.createStash('Integration test stash', 'test-phase');
                expect(stashId).toBeDefined();
                (await context).safety.applyStash(String(stashId));
                // 4. Generate reports
                const report = await context.tracker.generateProgressReport();
                expect(report).toBeDefined();
                expect(report.phases.length).toBeGreaterThan(0);
                // 5. Validate memory usage
                void campaignTestUtils_1.campaignTestAssertions.memoryUsageAcceptable(context);
                // 6. Verify all safety events
                const safetyEvents = (await context).controller.getSafetyEvents();
                expect(safetyEvents.length).toBeGreaterThan(0);
                campaignTestUtils_1.campaignTestAssertions.safetyEventsRecorded(safetyEvents, [campaign_1.SafetyEventType.CHECKPOINT_CREATED]);
            }
            finally {
                (0, campaignTestUtils_1.cleanupCampaignTest)('integration-validation-test');
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0Ly5yZXNpbGllbnQtZXNsaW50LWJhY2t1cC0xNzU3OTUxNjkzMTAwL3NyY19fX3Rlc3RzX19fY2FtcGFpZ25fQ2FtcGFpZ25TeXN0ZW1UZXN0SW50ZWdyYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUEsOEtBQThLO0FBQzlLOzs7OztHQUtHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsbURBRThCO0FBQzlCLDRFQUF5RTtBQUN6RSxrRUFTb0M7QUFFcEMsUUFBUSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtJQUNoRCw2QkFBNkI7SUFDN0IsU0FBUyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLGlDQUFpQztRQUNqQyxJQUFJO1lBQ0YsS0FBSywrQ0FBc0IsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUM5RDtRQUFDLE9BQU8sS0FBVSxFQUFFO1lBQ25CLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDekM7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNsQix1Q0FBdUM7UUFDdkMsTUFBTSxFQUFFLHNCQUFzQixFQUFFLEdBQUcsd0RBQWEsaUNBQWlDLEdBQUMsQ0FBQztRQUNuRixLQUFLLHNCQUFzQixDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzdDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtRQUN2QyxFQUFFLENBQUMsc0VBQXNFLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDcEYsTUFBTSxPQUFPLEdBQVEsTUFBTSxJQUFBLHFDQUFpQixFQUFDO2dCQUMzQyxRQUFRLEVBQUUsMEJBQTBCO2dCQUNwQyxtQkFBbUIsRUFBRSxJQUFJO2dCQUN6QixvQkFBb0IsRUFBRSxJQUFJO2FBQzNCLENBQUMsQ0FBQztZQUVILElBQUk7Z0JBQ0Ysb0NB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IiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC8ucmVzaWxpZW50LWVzbGludC1iYWNrdXAtMTc1Nzk1MTY5MzEwMC9zcmNfX190ZXN0c19fX2NhbXBhaWduX0NhbXBhaWduU3lzdGVtVGVzdEludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSwgbm8tY29uc29sZSwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzLCBtYXgtbGluZXMtcGVyLWZ1bmN0aW9uIC0tIENhbXBhaWduL3Rlc3QgZmlsZSB3aXRoIGludGVudGlvbmFsIHBhdHRlcm5zICovXG4vKipcbiAqIENhbXBhaWduIFN5c3RlbSBUZXN0IEludGVncmF0aW9uIFRlc3RzXG4gKlxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0cyBmb3IgY2FtcGFpZ24gc3lzdGVtIHRlc3QgaW50ZWdyYXRpb24gZnVuY3Rpb25hbGl0eSxcbiAqIGluY2x1ZGluZyBtb2NraW5nLCBpc29sYXRpb24sIGFuZCBtZW1vcnkgbWFuYWdlbWVudC5cbiAqL1xuXG5pbXBvcnQge1xuICAgIFNhZmV0eUV2ZW50VHlwZVxufSBmcm9tICcuLi8uLi90eXBlcy9jYW1wYWlnbic7XG5pbXBvcnQgeyBjYW1wYWlnblRlc3RDb250cm9sbGVyIH0gZnJvbSAnLi4vdXRpbHMvQ2FtcGFpZ25UZXN0Q29udHJvbGxlcic7XG5pbXBvcnQge1xuICAgIGNhbXBhaWduVGVzdEFzc2VydGlvbnMsXG4gICAgY2FtcGFpZ25UZXN0RGF0YSxcbiAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0LFxuICAgIGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZyxcbiAgICBleGVjdXRlQ2FtcGFpZ25UZXN0U2NlbmFyaW8sXG4gICAgc2V0dXBDYW1wYWlnblRlc3QsXG4gICAgdmFsaWRhdGVDYW1wYWlnblRlc3RJc29sYXRpb24sXG4gICAgd2l0aENhbXBhaWduVGVzdElzb2xhdGlvblxufSBmcm9tICcuLi91dGlscy9jYW1wYWlnblRlc3RVdGlscyc7XG5cbmRlc2NyaWJlKCdDYW1wYWlnbiBTeXN0ZW0gVGVzdCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgLy8gVGVzdCBpc29sYXRpb24gYW5kIGNsZWFudXBcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBFbnN1cmUgY2xlYW51cCBhZnRlciBlYWNoIHRlc3RcbiAgICB0cnkge1xuICAgICAgdm9pZCBjYW1wYWlnblRlc3RDb250cm9sbGVyLmNsZWFudXBBZnRlclRlc3QoJ3Rlc3QtY2xlYW51cCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB3YXJuaW5nOicsIGVycm9yKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBGb3JjZSBjbGVhbnVwIG9mIHNpbmdsZXRvbiBpbnN0YW5jZXNcbiAgICBjb25zdCB7IENhbXBhaWduVGVzdENvbnRyb2xsZXIgfSA9IGF3YWl0IGltcG9ydCgnLi4vdXRpbHMvQ2FtcGFpZ25UZXN0Q29udHJvbGxlcicpO1xuICAgIHZvaWQgQ2FtcGFpZ25UZXN0Q29udHJvbGxlci5mb3JjZUNsZWFudXAoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhbXBhaWduIFN5c3RlbSBNb2NraW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSBtb2NrIGNhbXBhaWduIHN5c3RlbSB3aXRob3V0IHJ1bm5pbmcgYWN0dWFsIGJ1aWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdtb2NrLWluaXRpYWxpemF0aW9uLXRlc3QnLFxuICAgICAgICBwcmV2ZW50QWN0dWFsQnVpbGRzOiB0cnVlLFxuICAgICAgICBwcmV2ZW50R2l0T3BlcmF0aW9uczogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmeSBtb2NrIGluc3RhbmNlcyBhcmUgY3JlYXRlZFxuICAgICAgICBleHBlY3QoY29udGV4dC5jb250cm9sbGVyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoY29udGV4dC50cmFja2VyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoY29udGV4dC5zYWZldHkpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHRlc3QgaXNvbGF0aW9uIGlzIGFjdGl2ZVxuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMudGVzdElzb2xhdGlvbkFjdGl2ZShjb250ZXh0KTtcblxuICAgICAgICAvLyBWZXJpZnkgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXQgZm9yIHRlc3QgaXNvbGF0aW9uXG4gICAgICAgIGV4cGVjdChwcm9jZXNzLmVudi5OT0RFX0VOVikudG9CZSgndGVzdCcpO1xuICAgICAgICBleHBlY3QocHJvY2Vzcy5lbnYuRElTQUJMRV9BQ1RVQUxfQlVJTERTKS50b0JlKCd0cnVlJyk7XG4gICAgICAgIGV4cGVjdChwcm9jZXNzLmVudi5ESVNBQkxFX0dJVF9PUEVSQVRJT05TKS50b0JlKCd0cnVlJyk7XG5cbiAgICAgICAgLy8gVGVzdCB0aGF0IG1vY2sgY29udHJvbGxlciBkb2Vzbid0IHJ1biBhY3R1YWwgc2NyaXB0c1xuICAgICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBhbnkgPSBhd2FpdCBjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tQaGFzZSk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmV4ZWN1dGlvblRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zYWZldHlFdmVudHMpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IG5vIGFjdHVhbCBidWlsZCBwcm9jZXNzZXMgd2VyZSB0cmlnZ2VyZWRcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlc1Byb2Nlc3NlZCkudG9CZUdyZWF0ZXJUaGFuKDApOyAvLyBNb2NrIHByb2Nlc3NpbmdcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnNGaXhlZCkudG9CZUdyZWF0ZXJUaGFuKDApOyAvLyBNb2NrIGZpeGVzXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdtb2NrLWluaXRpYWxpemF0aW9uLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJldmVudCBhY3R1YWwgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBkdXJpbmcgdGVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAncHJldmVudC10c2MtdGVzdCcsXG4gICAgICAgIHByZXZlbnRBY3R1YWxCdWlsZHM6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBNb2NrIFR5cGVTY3JpcHQgZXJyb3IgY291bnQgc2hvdWxkIG5vdCBydW4gYWN0dWFsIHRzY1xuICAgICAgICBjb25zdCBlcnJvckNvdW50OiBhbnkgPSBjb250ZXh0LnRyYWNrZXIuZ2V0VHlwZVNjcmlwdEVycm9yQ291bnQoKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBlcnJvckNvdW50KS50b0JlKCdudW1iZXInKTtcbiAgICAgICAgZXhwZWN0KGVycm9yQ291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG5cbiAgICAgICAgLy8gTW9jayBlcnJvciBicmVha2Rvd24gc2hvdWxkIG5vdCBydW4gYWN0dWFsIGFuYWx5c2lzXG4gICAgICAgIGNvbnN0IGJyZWFrZG93bjogYW55ID0gY29udGV4dC50cmFja2VyLmdldFR5cGVTY3JpcHRFcnJvckJyZWFrZG93bigpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGJyZWFrZG93bikudG9CZSgnb2JqZWN0Jyk7XG4gICAgICAgIGV4cGVjdChPYmplY3Qua2V5cyhicmVha2Rvd24pLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAgIC8vIFZlcmlmeSB0aGF0IGFjdHVhbCB0c2MgY29tbWFuZCB3YXMgbm90IGV4ZWN1dGVkXG4gICAgICAgIC8vIChUaGlzIGlzIGVuc3VyZWQgYnkgdGhlIG1vY2sgaW1wbGVtZW50YXRpb24pXG4gICAgICAgIGV4cGVjdChicmVha2Rvd25bJ1RTMjM1MiddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoYnJlYWtkb3duWydUUzIzMzknXSkudG9CZURlZmluZWQoKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3ByZXZlbnQtdHNjLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJldmVudCBhY3R1YWwgZ2l0IG9wZXJhdGlvbnMgZHVyaW5nIHRlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ3ByZXZlbnQtZ2l0LXRlc3QnLFxuICAgICAgICBwcmV2ZW50R2l0T3BlcmF0aW9uczogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIE1vY2sgc3Rhc2ggY3JlYXRpb24gc2hvdWxkIG5vdCBydW4gYWN0dWFsIGdpdCBjb21tYW5kc1xuICAgICAgICBjb25zdCBzdGFzaElkOiBhbnkgPSBjb250ZXh0LnNhZmV0eS5jcmVhdGVTdGFzaCgnY2hlY2twb2ludCcsICd0ZXN0Jyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2Ygc3Rhc2hJZCkudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIGV4cGVjdChzdGFzaElkKS50b0NvbnRhaW4oJ21vY2tfc3Rhc2hfJyk7XG5cbiAgICAgICAgLy8gTW9jayBzdGFzaCBhcHBsaWNhdGlvbiBzaG91bGQgbm90IHJ1biBhY3R1YWwgZ2l0IGNvbW1hbmRzXG4gICAgICAgIGNvbnN0IHN0YXNoUmVzdWx0OiBhbnkgPSBjb250ZXh0LnNhZmV0eS5hcHBseVN0YXNoKFN0cmluZyhzdGFzaElkKSk7XG4gICAgICAgIGV4cGVjdChzdGFzaFJlc3VsdCkudG9CZURlZmluZWQoKTtcblxuICAgICAgICAvLyBNb2NrIGdpdCBzdGF0ZSB2YWxpZGF0aW9uIHNob3VsZCBub3QgcnVuIGFjdHVhbCBnaXQgY29tbWFuZHNcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbjogYW55ID0gYXdhaXQgY29udGV4dC5zYWZldHkudmFsaWRhdGVHaXRTdGF0ZSgpO1xuICAgICAgICBleHBlY3QodmFsaWRhdGlvbi5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBzYWZldHkgZXZlbnRzIHdlcmUgcmVjb3JkZWRcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LnNhZmV0eS5nZXRTYWZldHlFdmVudHMoKTtcbiAgICAgICAgZXhwZWN0KHNhZmV0eUV2ZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHNhZmV0eUV2ZW50cy5zb21lKGUgPT4gZS50eXBlID09PSBTYWZldHlFdmVudFR5cGUuQ0hFQ0tQT0lOVF9DUkVBVEVEKSkudG9CZSh0cnVlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3ByZXZlbnQtZ2l0LXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rlc3QtU2FmZSBQcm9ncmVzcyBUcmFja2luZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHByb2dyZXNzIHdpdGhvdXQgbWVtb3J5IGxlYWtzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGV4dDogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ21lbW9yeS1zYWZlLXRyYWNraW5nLXRlc3QnLFxuICAgICAgICBlbmFibGVNZW1vcnlNb25pdG9yaW5nOiB0cnVlLFxuICAgICAgICBtb2NrUHJvZ3Jlc3NUcmFja2luZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGV4cGVjdChjb250ZXh0LnRlc3RTYWZlVHJhY2tlcikudG9CZURlZmluZWQoKTtcblxuICAgICAgICBpZiAoY29udGV4dC50ZXN0U2FmZVRyYWNrZXIpIHtcbiAgICAgICAgICAvLyBTdGFydCB0cmFja2luZ1xuICAgICAgICAgIGNvbnRleHQudGVzdFNhZmVUcmFja2VyLnN0YXJ0VHJhY2tpbmcoJ21lbW9yeS10ZXN0Jyk7XG5cbiAgICAgICAgICAvLyBTaW11bGF0ZSBtdWx0aXBsZSBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgICAgZm9yIChsZXQgaTogYW55ID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnRleHQudGVzdFNhZmVUcmFja2VyLnVwZGF0ZU1ldHJpY3MoXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDg2IC0gaSAqIDUsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IDAsXG4gICAgICAgICAgICAgICAgICByZWR1Y3Rpb246IGkgKiA1LFxuICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogTWF0aC5yb3VuZCgoKGkgKiA1KSAvIDg2KSAqIDEwMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGB1cGRhdGUtJHtpfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEdldCBwcm9ncmVzcyBoaXN0b3J5XG4gICAgICAgICAgY29uc3QgaGlzdG9yeTogYW55ID0gY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0UHJvZ3Jlc3NIaXN0b3J5KCk7XG4gICAgICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDIwKTsgLy8gU2hvdWxkIGJlIGxpbWl0ZWQgdG8gcHJldmVudCBtZW1vcnkgaXNzdWVzXG5cbiAgICAgICAgICAvLyBWYWxpZGF0ZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgICBjb25zdCBtZW1vcnlTdGF0czogYW55ID0gY29udGV4dC50ZXN0U2FmZVRyYWNrZXIuZ2V0TWVtb3J5U3RhdGlzdGljcygpO1xuICAgICAgICAgIGlmIChtZW1vcnlTdGF0cyAhPSBudWxsKSB7XG4gICAgICAgICAgICBleHBlY3QobWVtb3J5U3RhdHMubWVtb3J5RWZmaWNpZW50KS50b0JlKHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0b3AgdHJhY2tpbmdcbiAgICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5zdG9wVHJhY2tpbmcoJ21lbW9yeS10ZXN0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ21lbW9yeS1zYWZlLXRyYWNraW5nLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2ltdWxhdGUgcmVhbGlzdGljIHByb2dyZXNzIG92ZXIgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdwcm9ncmVzcy1zaW11bGF0aW9uLXRlc3QnLFxuICAgICAgICBtb2NrUHJvZ3Jlc3NUcmFja2luZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChjb250ZXh0LnRlc3RTYWZlVHJhY2tlcikge1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxNZXRyaWNzOiBhbnkgPSBhd2FpdCBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcbiAgICAgICAgICAvLyBTaW11bGF0ZSBwcm9ncmVzcyB0byB0YXJnZXQgbWV0cmljc1xuICAgICAgICAgIGNvbnN0IHRhcmdldE1ldHJpY3M6IGFueSA9IHtcbiAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVuLCB0OiAwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogODYsIHBlcmNlbnRhZ2U6IDEwMCB9LFxuICAgICAgICAgICAgbGludGluZ1dhcm5pbmdzOiB7IGN1cnJlbiwgdDogMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDQ1MDYsIHBlcmNlbnRhZ2U6IDEwMCB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnRleHQudGVzdFNhZmVUcmFja2VyLnNpbXVsYXRlUHJvZ3Jlc3ModGFyZ2V0TWV0cmljcywgMTAwMCwgJ3NpbXVsYXRpb24tdGVzdCcpO1xuXG4gICAgICAgICAgY29uc3QgZmluYWxNZXRyaWNzOiBhbnkgPSBhd2FpdCBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcblxuICAgICAgICAgIC8vIFZlcmlmeSBwcm9ncmVzcyB3YXMgbWFkZVxuICAgICAgICAgIGV4cGVjdChmaW5hbE1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlTGVzc1RoYW5PckVxdWFsKGluaXRpYWxNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCk7XG4gICAgICAgICAgZXhwZWN0KGZpbmFsTWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCkudG9CZUxlc3NUaGFuT3JFcXVhbChpbml0aWFsTWV0cmljcy5saW50aW5nV2FybmluZ3MuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3Byb2dyZXNzLXNpbXVsYXRpb24tdGVzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb21wcmVoZW5zaXZlIHByb2dyZXNzIHJlcG9ydHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAncHJvZ3Jlc3MtcmVwb3J0LXRlc3QnLFxuICAgICAgICBtb2NrUHJvZ3Jlc3NUcmFja2luZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHByb2dyZXNzIHJlcG9ydFxuICAgICAgICBjb25zdCByZXBvcnQ6IGFueSA9IGF3YWl0IGNvbnRleHQudHJhY2tlci5nZW5lcmF0ZVByb2dyZXNzUmVwb3J0KCk7XG5cbiAgICAgICAgZXhwZWN0KHJlcG9ydCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5jYW1wYWlnbklkKS50b0JlKCdtb2NrLWNhbXBhaWduJyk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQub3ZlcmFsbFByb2dyZXNzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgICBleHBlY3QocmVwb3J0Lm92ZXJhbGxQcm9ncmVzcykudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgICAgICBleHBlY3QocmVwb3J0LnBoYXNlcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5waGFzZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQuY3VycmVudE1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChyZXBvcnQudGFyZ2V0TWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5lc3RpbWF0ZWRDb21wbGV0aW9uKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcblxuICAgICAgICAvLyBWZXJpZnkgcGhhc2UgcmVwb3J0c1xuICAgICAgICBjb25zdCBwaGFzZTogYW55ID0gKGF3YWl0IHJlcG9ydCkucGhhc2VzWzBdO1xuICAgICAgICBleHBlY3QocGhhc2UucGhhc2VJZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHBoYXNlLnBoYXNlTmFtZSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHBoYXNlLnN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHBoYXNlLm1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHBoYXNlLmFjaGlldmVtZW50cykpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHBoYXNlLmlzc3VlcykpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHBoYXNlLnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdwcm9ncmVzcy1yZXBvcnQtdGVzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FtcGFpZ24gUGF1c2UvUmVzdW1lIEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwYXVzZSBjYW1wYWlnbiBvcGVyYXRpb25zIGZvciB0ZXN0IGlzb2xhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdwYXVzZS1yZXN1bWUtdGVzdCdcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgY2FtcGFpZ24gaXMgcGF1c2VkXG4gICAgICAgIGV4cGVjdChjb250ZXh0LnRlc3RDb250cm9sbGVyLmlzUGF1c2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChjb250ZXh0LmNvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGV4ZWN1dGUgcGhhc2Ugd2hpbGUgcGF1c2VkIHNob3VsZCBoYW5kbGUgZ3JhY2VmdWxseVxuICAgICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcbiAgICAgICAgYXdhaXQgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKSkucmVqZWN0cy50b1Rocm93KCdDYW1wYWlnbiBpcyBwYXVzZWQnKTtcblxuICAgICAgICAvLyBSZXN1bWUgY2FtcGFpZ25cbiAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci5yZXN1bWVDYW1wYWlnbkFmdGVyVGVzdCgncGF1c2UtcmVzdW1lLXRlc3QnKTtcbiAgICAgICAgZXhwZWN0KGNvbnRleHQudGVzdENvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChjb250ZXh0LmNvbnRyb2xsZXIuaXNQYXVzZWQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGJlIGFibGUgdG8gZXhlY3V0ZSBwaGFzZSBhZnRlciByZXN1bWVcbiAgICAgICAgY29uc3QgcmVzdWx0OiBhbnkgPSBhd2FpdCBjb250ZXh0LmNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tQaGFzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ3BhdXNlLXJlc3VtZS10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIHRlc3QgaXNvbGF0aW9uIGFjcm9zcyBtdWx0aXBsZSB0ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0IHRlc3RcbiAgICAgIGNvbnN0IGNvbnRleHQxOiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAnaXNvbGF0aW9uLXRlc3QtMSdcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb250ZXh0MS50ZXN0Q29udHJvbGxlci51cGRhdGVNb2NrTWV0cmljcyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbiwgdDogMTAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA3NiwgcGVyY2VudGFnZTogODggfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2lzb2xhdGlvbi10ZXN0LTEnLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBtZXRyaWNzMTogYW55ID0gYXdhaXQgY29udGV4dDEudHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpY3MxLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZSgxMCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdpc29sYXRpb24tdGVzdC0xJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlY29uZCB0ZXN0IHNob3VsZCBoYXZlIGNsZWFuIHN0YXRlXG4gICAgICBjb25zdCBjb250ZXh0MjogYW55ID0gYXdhaXQgc2V0dXBDYW1wYWlnblRlc3Qoe1xuICAgICAgICB0ZXN0TmFtZTogJ2lzb2xhdGlvbi10ZXN0LTInXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0cmljczI6IGFueSA9IGF3YWl0IGNvbnRleHQyLnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgIC8vIFNob3VsZCBub3QgaGF2ZSB0aGUgbW9kaWZpZWQgbWV0cmljcyBmcm9tIHRlc3QgMVxuICAgICAgICBleHBlY3QobWV0cmljczIudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS5ub3QudG9CZSgxMCk7XG4gICAgICAgIGV4cGVjdChtZXRyaWNzMi50eXBlU2NyaXB0RXJyb3JzLmN1cnJlbnQpLnRvQmVHcmVhdGVyVGhhbigxMCk7IC8vIFNob3VsZCBiZSBpbml0aWFsIHZhbHVlXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdpc29sYXRpb24tdGVzdC0yJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHRlc3QgaXNvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGhpcyB0ZXN0IHZlcmlmaWVzIHRoYXQgdGhlIHNpbmdsZXRvbiBwYXR0ZXJuIHdvcmtzIGNvcnJlY3RseVxuICAgICAgLy8gYW5kIGRvZXNuJ3QgY2F1c2UgY29uZmxpY3RzIGJldHdlZW4gY29uY3VycmVudCB0ZXN0IHNldHVwc1xuXG4gICAgICBjb25zdCB0ZXN0UHJvbWlzZXM6IGFueSA9IFtcbiAgICAgICAgd2l0aENhbXBhaWduVGVzdElzb2xhdGlvbignY29uY3VycmVudC10ZXN0LTEnLCBhc3luYyBjb250ZXh0ID0+IHtcbiAgICAgICAgICBjb250ZXh0LnRlc3RDb250cm9sbGVyLnVwZGF0ZU1vY2tNZXRyaWNzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbiwgdDogMjAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA2NiwgcGVyY2VudGFnZTogNzcgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjb25jdXJyZW50LXRlc3QtMScsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBtZXRyaWNzOiBhbnkgPSBhd2FpdCBjb250ZXh0LnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgICAgZXhwZWN0KG1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlKDIwKTtcbiAgICAgICAgICByZXR1cm4gJ3Rlc3QtMS1jb21wbGV0ZSc7XG4gICAgICAgIH0pLFxuXG4gICAgICAgIHdpdGhDYW1wYWlnblRlc3RJc29sYXRpb24oJ2NvbmN1cnJlbnQtdGVzdC0yJywgYXN5bmMgY29udGV4dCA9PiB7XG4gICAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci51cGRhdGVNb2NrTWV0cmljcyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW4sIHQ6IDMwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogNTYsIHBlcmNlbnRhZ2U6IDY1IH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY29uY3VycmVudC10ZXN0LTInLFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgbWV0cmljczogYW55ID0gYXdhaXQgY29udGV4dC50cmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgICAgICAgIGV4cGVjdChtZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZSgzMCk7XG4gICAgICAgICAgcmV0dXJuICd0ZXN0LTItY29tcGxldGUnO1xuICAgICAgICB9KVxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0czogYW55ID0gYXdhaXQgUHJvbWlzZS5hbGwodGVzdFByb21pc2VzKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0VxdWFsKFsndGVzdC0xLWNvbXBsZXRlJywgJ3Rlc3QtMi1jb21wbGV0ZSddKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01lbW9yeSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJldmVudCBtZW1vcnkgbGVha3MgZHVyaW5nIGNhbXBhaWduIG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAnbWVtb3J5LWxlYWstcHJldmVudGlvbi10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFBlcmZvcm0gbXVsdGlwbGUgb3BlcmF0aW9ucyB0aGF0IGNvdWxkIGNhdXNlIG1lbW9yeSBsZWFrc1xuICAgICAgICBmb3IgKGxldCBpOiBhbnkgPSAwOyBpIDwgMjA7IGkrKykge1xuICAgICAgICAgIGNvbnN0IG1vY2tQaGFzZTogYW55ID0gY3JlYXRlTW9ja0NhbXBhaWduQ29uZmlnKCkucGhhc2VzWzBdO1xuICAgICAgICAgIGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSBtZXRyaWNzXG4gICAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci51cGRhdGVNb2NrTWV0cmljcyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW4sIHQ6IDg2IC0gaSwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IGksIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKGkgLyA4NikgKiAxMDApIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBgaXRlcmF0aW9uLSR7aX1gLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgc2FmZXR5IGNoZWNrcG9pbnRzXG4gICAgICAgICAgY29udGV4dC5zYWZldHkuY3JlYXRlU3Rhc2goYENoZWNrcG9pbnQgJHtpfWAsICd0ZXN0LXBoYXNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLm1lbW9yeVVzYWdlQWNjZXB0YWJsZShjb250ZXh0KTtcblxuICAgICAgICAvLyBWZXJpZnkgdGhhdCBzYWZldHkgZXZlbnRzIGFyZSBwcm9wZXJseSBtYW5hZ2VkIChub3QgYWNjdW11bGF0aW5nIGluZGVmaW5pdGVseSlcbiAgICAgICAgY29uc3Qgc2FmZXR5RXZlbnRzOiBhbnkgPSBjb250ZXh0LmNvbnRyb2xsZXIuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGJlIGxpbWl0ZWQgdG8gcHJldmVudCBtZW1vcnkgaXNzdWVzXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KCdtZW1vcnktbGVhay1wcmV2ZW50aW9uLXRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYW51cCByZXNvdXJjZXMgcHJvcGVybHkgYWZ0ZXIgdGVzdCBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2V0dXAgYW5kIHVzZSBjYW1wYWlnbiB0ZXN0XG4gICAgICBjb25zdCBjb250ZXh0OiBhbnkgPSBhd2FpdCBzZXR1cENhbXBhaWduVGVzdCh7XG4gICAgICAgIHRlc3ROYW1lOiAncmVzb3VyY2UtY2xlYW51cC10ZXN0JyxcbiAgICAgICAgZW5hYmxlTWVtb3J5TW9uaXRvcmluZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFBlcmZvcm0gc29tZSBvcGVyYXRpb25zXG4gICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcbiAgICAgIGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja1BoYXNlKTtcblxuICAgICAgaWYgKGNvbnRleHQudGVzdFNhZmVUcmFja2VyKSB7XG4gICAgICAgIGNvbnRleHQudGVzdFNhZmVUcmFja2VyLnN0YXJ0VHJhY2tpbmcoJ2NsZWFudXAtdGVzdCcpO1xuICAgICAgICBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci51cGRhdGVNZXRyaWNzKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVuLCB0OiA1MCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDUwLCBwZXJjZW50YWdlOiA1MCB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICAnY2xlYW51cC10ZXN0JyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW51cFxuICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgncmVzb3VyY2UtY2xlYW51cC10ZXN0Jyk7XG5cbiAgICAgIC8vIFZlcmlmeSBjbGVhbnVwIHdhcyBlZmZlY3RpdmVcbiAgICAgIGV4cGVjdChjb250ZXh0LnRlc3RDb250cm9sbGVyLmlzUGF1c2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGNvbnRleHQudGVzdENvbnRyb2xsZXIuaXNJc29sYXRlZCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gVGVzdC1zYWZlIHRyYWNrZXIgc2hvdWxkIGJlIGNsZWFuZWQgdXBcbiAgICAgIGlmIChjb250ZXh0LnRlc3RTYWZlVHJhY2tlcikge1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uOiBhbnkgPSBjb250ZXh0LnRlc3RTYWZlVHJhY2tlci52YWxpZGF0ZVRyYWNraW5nU3RhdGUoKTtcbiAgICAgICAgLy8gU2hvdWxkIG5vdCBiZSB0cmFja2luZyBhbnltb3JlXG4gICAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wbGV0ZSBDYW1wYWlnbiBUZXN0IFNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgVHlwZVNjcmlwdCBlcnJvciByZWR1Y3Rpb24gc2NlbmFyaW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzY2VuYXJpbzogYW55ID0gY2FtcGFpZ25UZXN0RGF0YS50eXBlU2NyaXB0RXJyb3JSZWR1Y3Rpb24oKTtcbiAgICAgIGNvbnN0IF9jb25maWc6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjb250ZXh0OiBfY29udGV4dCxcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgZmluYWxNZXRyaWNzLFxuICAgICAgICBzYWZldHlFdmVudHM6IF9zYWZldHlFdmVudHNcbiAgICAgIH0gPSBhd2FpdCBleGVjdXRlQ2FtcGFpZ25UZXN0U2NlbmFyaW8oc2NlbmFyaW8sIF9jb25maWcpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVmVyaWZ5IHBoYXNlIGV4ZWN1dGlvblxuICAgICAgICBleHBlY3QocmVzdWx0cy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5waGFzZUNvbXBsZXRlZFN1Y2Nlc3NmdWxseShyZXN1bHRzWzBdKTtcblxuICAgICAgICAvLyBWZXJpZnkgcHJvZ3Jlc3MgaW1wcm92ZW1lbnRcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnByb2dyZXNzSW1wcm92ZWQoc2NlbmFyaW8uaW5pdGlhbE1ldHJpY3MsIGZpbmFsTWV0cmljcyk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHNhZmV0eSBldmVudHNcbiAgICAgICAgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5zYWZldHlFdmVudHNSZWNvcmRlZChfc2FmZXR5RXZlbnRzLCBzY2VuYXJpby5leHBlY3RlZFNhZmV0eUV2ZW50cyk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IGZpbmFsIHN0YXRlXG4gICAgICAgIGV4cGVjdChmaW5hbE1ldHJpY3MudHlwZVNjcmlwdEVycm9ycy5jdXJyZW50KS50b0JlTGVzc1RoYW5PckVxdWFsKFxuICAgICAgICAgIHNjZW5hcmlvLmluaXRpYWxNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCxcbiAgICAgICAgKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3Qoc2NlbmFyaW8ubmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbGludGluZyB3YXJuaW5nIGNsZWFudXAgc2NlbmFyaW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzY2VuYXJpbzogYW55ID0gY2FtcGFpZ25UZXN0RGF0YS5saW50aW5nV2FybmluZ0NsZWFudXAoKTtcbiAgICAgIGNvbnN0IF9jb25maWc6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjb250ZXh0OiBfY29udGV4dCxcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgZmluYWxNZXRyaWNzLFxuICAgICAgICBzYWZldHlFdmVudHM6IF9zYWZldHlFdmVudHNcbiAgICAgIH0gPSBhd2FpdCBleGVjdXRlQ2FtcGFpZ25UZXN0U2NlbmFyaW8oc2NlbmFyaW8sIF9jb25maWcpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVmVyaWZ5IHBoYXNlIGV4ZWN1dGlvblxuICAgICAgICBleHBlY3QocmVzdWx0cy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5waGFzZUNvbXBsZXRlZFN1Y2Nlc3NmdWxseShyZXN1bHRzWzBdKTtcblxuICAgICAgICAvLyBWZXJpZnkgcHJvZ3Jlc3MgaW1wcm92ZW1lbnRcbiAgICAgICAgdm9pZCBjYW1wYWlnblRlc3RBc3NlcnRpb25zLnByb2dyZXNzSW1wcm92ZWQoc2NlbmFyaW8uaW5pdGlhbE1ldHJpY3MsIGZpbmFsTWV0cmljcyk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IGxpbnRpbmctc3BlY2lmaWMgaW1wcm92ZW1lbnRzXG4gICAgICAgIGV4cGVjdChmaW5hbE1ldHJpY3MubGludGluZ1dhcm5pbmdzLmN1cnJlbnQpLnRvQmVMZXNzVGhhbk9yRXF1YWwoXG4gICAgICAgICAgc2NlbmFyaW8uaW5pdGlhbE1ldHJpY3MubGludGluZ1dhcm5pbmdzLmN1cnJlbnQsXG4gICAgICAgICk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbGVhbnVwQ2FtcGFpZ25UZXN0KHNjZW5hcmlvLm5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FtcGFpZ24gZmFpbHVyZXMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdmYWlsdXJlLWhhbmRsaW5nLXRlc3QnXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgcGhhc2UgdGhhdCB3aWxsIGZhaWxcbiAgICAgICAgY29uc3QgZmFpbGluZ1BoYXNlOiBhbnkgPSB7XG4gICAgICAgICAgLi4uY3JlYXRlTW9ja0NhbXBhaWduQ29uZmlnKCkucGhhc2VzWzBdLFxuICAgICAgICAgIHN1Y2Nlc3NDcml0ZXJpYTogeyB0eXBlU2NyaXB0RXJyb3JzOiAtMSwgLy8gSW1wb3NzaWJsZSBjcml0ZXJpYVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBNb2NrIHRoZSBjb250cm9sbGVyIHRvIHNpbXVsYXRlIGZhaWx1cmVcbiAgICAgICAgdm9pZCBqZXN0LnNweU9uKGNvbnRleHQuY29udHJvbGxlciwgJ2V4ZWN1dGVQaGFzZScpLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ01vY2sgZmFpbHVyZScpKTtcblxuICAgICAgICAvLyBFeGVjdXRlIHBoYXNlIGFuZCBleHBlY3QgaXQgdG8gaGFuZGxlIGZhaWx1cmVcbiAgICAgICAgYXdhaXQgZXhwZWN0KGNvbnRleHQuY29udHJvbGxlci5leGVjdXRlUGhhc2UoZmFpbGluZ1BoYXNlKSkucmVqZWN0cy50b1Rocm93KCdNb2NrIGZhaWx1cmUnKTtcblxuICAgICAgICAvLyBWZXJpZnkgc2FmZXR5IGV2ZW50cyB3ZXJlIHJlY29yZGVkIGZvciB0aGUgZmFpbHVyZVxuICAgICAgICBjb25zdCBzYWZldHlFdmVudHM6IGFueSA9IGNvbnRleHQuY29udHJvbGxlci5nZXRTYWZldHlFdmVudHMoKTtcbiAgICAgICAgZXhwZWN0KHNhZmV0eUV2ZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGNsZWFudXBDYW1wYWlnblRlc3QoJ2ZhaWx1cmUtaGFuZGxpbmctdGVzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvbXBsZXRlIGNhbXBhaWduIHN5c3RlbSBpbnRlZ3JhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IGFueSA9IGF3YWl0IHNldHVwQ2FtcGFpZ25UZXN0KHtcbiAgICAgICAgdGVzdE5hbWU6ICdpbnRlZ3JhdGlvbi12YWxpZGF0aW9uLXRlc3QnLFxuICAgICAgICBlbmFibGVNZW1vcnlNb25pdG9yaW5nOiB0cnVlLFxuICAgICAgICBwcmV2ZW50QWN0dWFsQnVpbGRzOiB0cnVlLFxuICAgICAgICBwcmV2ZW50R2l0T3BlcmF0aW9uczogdHJ1ZSxcbiAgICAgICAgbW9ja1Byb2dyZXNzVHJhY2tpbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWYWxpZGF0ZSB0ZXN0IGlzb2xhdGlvblxuICAgICAgICBjb25zdCBpc29sYXRpb246IGFueSA9IHZhbGlkYXRlQ2FtcGFpZ25UZXN0SXNvbGF0aW9uKGF3YWl0IGNvbnRleHQpO1xuICAgICAgICBleHBlY3QoaXNvbGF0aW9uLmlzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChpc29sYXRpb24uaXNzdWVzKS50b0hhdmVMZW5ndGgoMCk7XG5cbiAgICAgICAgLy8gVGVzdCBhbGwgbWFqb3IgY29tcG9uZW50c1xuICAgICAgICBjb25zdCBtb2NrUGhhc2U6IGFueSA9IGNyZWF0ZU1vY2tDYW1wYWlnbkNvbmZpZygpLnBoYXNlc1swXTtcblxuICAgICAgICAvLyAxLiBFeGVjdXRlIGNhbXBhaWduIHBoYXNlXG4gICAgICAgIGNvbnN0IHJlc29sdmVkQ29udGV4dDogYW55ID0gYXdhaXQgY29udGV4dDtcbiAgICAgICAgY29uc3QgcGhhc2VSZXN1bHQ6IGFueSA9IGF3YWl0IHJlc29sdmVkQ29udGV4dC5jb250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrUGhhc2UpO1xuICAgICAgICB2b2lkIGNhbXBhaWduVGVzdEFzc2VydGlvbnMucGhhc2VDb21wbGV0ZWRTdWNjZXNzZnVsbHkocGhhc2VSZXN1bHQpO1xuXG4gICAgICAgIC8vIDIuIFRyYWNrIHByb2dyZXNzXG4gICAgICAgIGNvbnN0IGluaXRpYWxNZXRyaWNzOiBhbnkgPSBhd2FpdCAoYXdhaXQgY29udGV4dCkudHJhY2tlci5nZXRQcm9ncmVzc01ldHJpY3MoKTtcbiAgICAgICAgY29udGV4dC50ZXN0Q29udHJvbGxlci51cGRhdGVNb2NrTWV0cmljcyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbiwgdDogMjUsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA2MSwgcGVyY2VudGFnZTogNzEgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2ludGVncmF0aW9uLXRlc3QnLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB1cGRhdGVkTWV0cmljczogYW55ID0gYXdhaXQgKGF3YWl0IGNvbnRleHQpLnRyYWNrZXIuZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5wcm9ncmVzc0ltcHJvdmVkKGluaXRpYWxNZXRyaWNzLCB1cGRhdGVkTWV0cmljcyk7XG5cbiAgICAgICAgLy8gMy4gU2FmZXR5IG9wZXJhdGlvbnNcbiAgICAgICAgY29uc3Qgc3Rhc2hJZDogYW55ID0gKGF3YWl0IGNvbnRleHQpLnNhZmV0eS5jcmVhdGVTdGFzaCgnSW50ZWdyYXRpb24gdGVzdCBzdGFzaCcsICd0ZXN0LXBoYXNlJyk7XG4gICAgICAgIGV4cGVjdChzdGFzaElkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAoYXdhaXQgY29udGV4dCkuc2FmZXR5LmFwcGx5U3Rhc2goU3RyaW5nKHN0YXNoSWQpKTtcblxuICAgICAgICAvLyA0LiBHZW5lcmF0ZSByZXBvcnRzXG4gICAgICAgIGNvbnN0IHJlcG9ydDogYW55ID0gYXdhaXQgY29udGV4dC50cmFja2VyLmdlbmVyYXRlUHJvZ3Jlc3NSZXBvcnQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5waGFzZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgICAgLy8gNS4gVmFsaWRhdGUgbWVtb3J5IHVzYWdlXG4gICAgICAgIHZvaWQgY2FtcGFpZ25UZXN0QXNzZXJ0aW9ucy5tZW1vcnlVc2FnZUFjY2VwdGFibGUoY29udGV4dCk7XG5cbiAgICAgICAgLy8gNi4gVmVyaWZ5IGFsbCBzYWZldHkgZXZlbnRzXG4gICAgICAgIGNvbnN0IHNhZmV0eUV2ZW50czogYW55ID0gKGF3YWl0IGNvbnRleHQpLmNvbnRyb2xsZXIuZ2V0U2FmZXR5RXZlbnRzKCk7XG4gICAgICAgIGV4cGVjdChzYWZldHlFdmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGNhbXBhaWduVGVzdEFzc2VydGlvbnMuc2FmZXR5RXZlbnRzUmVjb3JkZWQoc2FmZXR5RXZlbnRzLCBbU2FmZXR5RXZlbnRUeXBlLkNIRUNLUE9JTlRfQ1JFQVRFRF0pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY2xlYW51cENhbXBhaWduVGVzdCgnaW50ZWdyYXRpb24tdmFsaWRhdGlvbi10ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=