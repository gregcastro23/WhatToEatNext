6c55285cb0b223e6ee03180f74512027
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('../AnalysisTools');
jest.mock('child_process');
jest.mock('fs');
const child_process_1 = require("child_process");
const fs = __importStar(require("fs"));
const AnalysisTools_1 = require("../AnalysisTools");
const ProgressMonitoringSystem_1 = require("../ProgressMonitoringSystem");
const mockAnalysisTools = AnalysisTools_1.AnalysisTools;
const mockExecSync = child_process_1.execSync;
const mockFs = fs;
describe('ProgressMonitoringSystem', () => {
    let monitoringSystem;
    let mockAnalysisToolsInstance;
    beforeEach(() => {
        jest.clearAllMocks();
        // Mock file system operations
        mockFs.existsSync.mockReturnValue(false);
        mockFs.readFileSync.mockReturnValue('[]');
        mockFs.writeFileSync.mockImplementation(() => { });
        mockFs.mkdirSync.mockImplementation(() => '');
        // Mock AnalysisTools
        mockAnalysisToolsInstance = {
            generateComprehensiveReport: jest.fn(),
            analyzeDomainDistribution: jest.fn(),
            generateClassificationAccuracyReport: jest.fn(),
            generateSuccessRateAnalysis: jest.fn(),
            generateManualReviewRecommendations: jest.fn()
        };
        mockAnalysisTools.mockImplementation(() => mockAnalysisToolsInstance);
        // Mock successful TypeScript compilation by default
        mockExecSync.mockReturnValue('');
        monitoringSystem = new ProgressMonitoringSystem_1.ProgressMonitoringSystem();
    });
    afterEach(() => {
        monitoringSystem.stopMonitoring();
    });
    describe('constructor', () => {
        it('should initialize with default alert thresholds', () => {
            const thresholds = monitoringSystem.getAlertThresholds();
            expect(thresholds.successRateThreshold).toBe(70);
            expect(thresholds.buildFailureThreshold).toBe(3);
            expect(thresholds.classificationAccuracyThreshold).toBe(80);
            expect(thresholds.safetyEventThreshold).toBe(5);
            expect(thresholds.progressStallThreshold).toBe(24);
        });
        it('should initialize with custom alert thresholds', () => {
            const customThresholds = {
                successRateThreshold: 80,
                buildFailureThreshold: 2
            };
            const customMonitoringSystem = new ProgressMonitoringSystem_1.ProgressMonitoringSystem(customThresholds);
            const thresholds = customMonitoringSystem.getAlertThresholds();
            expect(thresholds.successRateThreshold).toBe(80);
            expect(thresholds.buildFailureThreshold).toBe(2);
            expect(thresholds.classificationAccuracyThreshold).toBe(80); // Default
        });
    });
    describe('monitoring lifecycle', () => {
        it('should start monitoring with specified interval', (done) => {
            const intervalMinutes = 1;
            monitoringSystem.on('monitoring_started', (data) => {
                expect(data.intervalMinutes).toBe(intervalMinutes);
                done();
            });
            monitoringSystem.startMonitoring(intervalMinutes);
            expect(monitoringSystem['isMonitoring']).toBe(true);
        });
        it('should not start monitoring if already running', () => {
            monitoringSystem.startMonitoring();
            const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
            monitoringSystem.startMonitoring();
            expect(consoleSpy).toHaveBeenCalledWith('Progress monitoring is already running');
            consoleSpy.mockRestore();
        });
        it('should stop monitoring', (done) => {
            monitoringSystem.on('monitoring_stopped', () => {
                expect(monitoringSystem['isMonitoring']).toBe(false);
                done();
            });
            monitoringSystem.startMonitoring();
            monitoringSystem.stopMonitoring();
        });
        it('should not stop monitoring if not running', () => {
            const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
            monitoringSystem.stopMonitoring();
            expect(consoleSpy).toHaveBeenCalledWith('Progress monitoring is not running');
            consoleSpy.mockRestore();
        });
    });
    describe('progress metrics', () => {
        beforeEach(() => {
            // Mock comprehensive report
            mockAnalysisToolsInstance.generateComprehensiveReport.mockResolvedValue({
                id: 'test-report',
                timestamp: new Date(),
                domainDistribution: {
                    totalAnyTypes: 1000,
                    intentionalVsUnintentional: {
                        intentional: { count: 300, percentage: 30 },
                        unintentional: { count: 700, percentage: 70 }
                    },
                    byDomain: [],
                    byCategory: [],
                    analysisDate: new Date()
                },
                accuracyReport: {
                    overallAccuracy: 85,
                    averageConfidence: 0.8,
                    sampleSize: 100,
                    categoryAccuracy: [],
                    confidenceDistribution: [],
                    reportDate: new Date()
                },
                successRateAnalysis: {
                    currentSuccessRate: 75,
                    targetSuccessRate: 85,
                    improvementNeeded: 10,
                    categorySuccessRates: [],
                    trendingData: {
                        date: new Date(),
                        successRate: 75,
                        totalAnyTypes: 1000,
                        unintentionalCount: 700,
                        classificationAccuracy: 85
                    },
                    projectedCompletion: new Date(),
                    recommendations: [],
                    analysisDate: new Date()
                },
                manualReviewRecommendations: [],
                summary: {
                    totalAnyTypes: 1000,
                    unintentionalCount: 700,
                    classificationAccuracy: 85,
                    currentSuccessRate: 75,
                    manualReviewCases: 50,
                    topDomain: 'utility',
                    topCategory: 'function_param'
                }
            });
        });
        it('should get current progress metrics', async () => {
            const progress = await monitoringSystem.getProgressMetrics();
            expect(progress.totalAnyTypes).toBe(1000);
            expect(progress.classifiedIntentional).toBe(300);
            expect(progress.classifiedUnintentional).toBe(700);
            expect(progress.averageSuccessRate).toBe(75);
            expect(progress.targetReductionPercentage).toBe(20);
            expect(progress.buildStable).toBe(true); // Default mock
            expect(progress.lastUpdate).toBeInstanceOf(Date);
        });
        it('should handle build failures in progress metrics', async () => {
            // Mock TypeScript compilation failure
            mockExecSync.mockImplementation(() => {
                throw new Error('Compilation failed');
            });
            const progress = await monitoringSystem.getProgressMetrics();
            expect(progress.buildStable).toBe(false);
        });
    });
    describe('build stability monitoring', () => {
        it('should detect stable builds', async () => {
            mockExecSync.mockReturnValue(''); // Successful compilation
            await monitoringSystem.monitorBuildStability();
            const history = monitoringSystem.getBuildStabilityHistory(1);
            expect(history[0].isStable).toBe(true);
            expect(history[0].errorCount).toBe(0);
            expect(history[0].buildTime).toBeGreaterThanOrEqual(0);
        });
        it('should detect build failures', async () => {
            const errorOutput = 'error TS2304: Cannot find name\nerror TS2345: Argument type';
            mockExecSync.mockImplementation(() => {
                const error = new Error('Compilation failed');
                error.stdout = errorOutput;
                throw error;
            });
            await monitoringSystem.monitorBuildStability();
            const history = monitoringSystem.getBuildStabilityHistory(1);
            expect(history[0].isStable).toBe(false);
            expect(history[0].errorCount).toBe(2); // Two TS errors
            expect(history[0].errorMessage).toContain('error TS2304');
        });
        it('should emit alert for build failures', (done) => {
            mockExecSync.mockImplementation(() => {
                throw new Error('Build failed');
            });
            monitoringSystem.on('alert', (alert) => {
                if (alert.type === 'build_failure') {
                    expect(alert.severity).toBe('high');
                    expect(alert.message).toContain('Build failure detected');
                    done();
                }
            });
            monitoringSystem.monitorBuildStability();
        });
        it('should emit alert for consecutive build failures', async () => {
            mockExecSync.mockImplementation(() => {
                throw new Error('Build failed');
            });
            const alertPromise = new Promise((resolve) => {
                monitoringSystem.on('alert', (alert) => {
                    if (alert.type === 'consecutive_build_failures') {
                        resolve(alert);
                    }
                });
            });
            // Trigger multiple build failures
            for (let i = 0; i < 3; i++) {
                await monitoringSystem.monitorBuildStability();
            }
            const alert = await alertPromise;
            expect(alert.severity).toBe('critical');
            expect(alert.message).toContain('consecutive build failures');
        });
    });
    describe('alert system', () => {
        beforeEach(() => {
            // Mock analysis report for alert checking
            mockAnalysisToolsInstance.generateComprehensiveReport.mockResolvedValue({
                domainDistribution: {
                    totalAnyTypes: 1000,
                    intentionalVsUnintentional: {
                        intentional: { count: 300, percentage: 30 },
                        unintentional: { count: 700, percentage: 70 }
                    }
                },
                summary: { currentSuccessRate: 60 },
                accuracyReport: { overallAccuracy: 70 } // Below threshold
            });
        });
        it('should emit low success rate alert', async () => {
            const alertPromise = new Promise((resolve) => {
                monitoringSystem.on('alert', (alert) => {
                    if (alert.type === 'low_success_rate') {
                        resolve(alert);
                    }
                });
            });
            await monitoringSystem.checkAlertConditions();
            const alert = await alertPromise;
            expect(alert.severity).toBe('medium');
            expect(alert.message).toContain('Success rate');
            expect(alert.data.currentRate).toBe(60);
            expect(alert.data.threshold).toBe(70);
        });
        it('should not emit duplicate alerts within one hour', async () => {
            let alertCount = 0;
            monitoringSystem.on('alert', (alert) => {
                if (alert.type === 'low_success_rate') {
                    alertCount++;
                }
            });
            // Check conditions twice
            await monitoringSystem.checkAlertConditions();
            await monitoringSystem.checkAlertConditions();
            expect(alertCount).toBe(1); // Should only emit once
        });
        it('should handle safety protocol activation', () => {
            const safetyEvent = {
                type: 'corruption_detected',
                severity: 'critical',
                description: 'File corruption detected',
                action: 'rollback_initiated',
                timestamp: new Date(),
                affectedFiles: ['test.ts']
            };
            const alertPromise = new Promise((resolve) => {
                monitoringSystem.on('alert', (alert) => {
                    if (alert.type === 'safety_protocol_activation') {
                        resolve(alert);
                    }
                });
            });
            const criticalEventPromise = new Promise((resolve) => {
                monitoringSystem.on('critical_safety_event', resolve);
            });
            monitoringSystem.handleSafetyProtocolActivation(safetyEvent);
            return Promise.all([alertPromise, criticalEventPromise]).then(([alert]) => {
                expect(alert.severity).toBe('critical');
                expect(alert.message).toContain('Safety protocol activated');
                expect(alert.data.safetyEvent).toEqual(safetyEvent);
            });
        });
        it('should update alert thresholds', () => {
            const newThresholds = {
                successRateThreshold: 80,
                buildFailureThreshold: 2
            };
            const updatePromise = new Promise((resolve) => {
                monitoringSystem.on('alert_thresholds_updated', resolve);
            });
            monitoringSystem.updateAlertThresholds(newThresholds);
            const thresholds = monitoringSystem.getAlertThresholds();
            expect(thresholds.successRateThreshold).toBe(80);
            expect(thresholds.buildFailureThreshold).toBe(2);
            return updatePromise;
        });
    });
    describe('dashboard data', () => {
        beforeEach(() => {
            mockAnalysisToolsInstance.generateComprehensiveReport.mockResolvedValue({
                id: 'test-report',
                timestamp: new Date(),
                domainDistribution: {
                    totalAnyTypes: 1000,
                    intentionalVsUnintentional: {
                        intentional: { count: 300, percentage: 30 },
                        unintentional: { count: 700, percentage: 70 }
                    }
                },
                accuracyReport: { overallAccuracy: 85 },
                summary: { currentSuccessRate: 75 }
            });
        });
        it('should update dashboard data', async () => {
            const updatePromise = new Promise((resolve) => {
                monitoringSystem.on('dashboard_updated', resolve);
            });
            await monitoringSystem['updateDashboard']();
            const dashboardData = await updatePromise;
            expect(dashboardData.lastUpdate).toBeInstanceOf(Date);
            expect(dashboardData.analysisReport).toBeDefined();
            expect(dashboardData.progressMetrics).toBeDefined();
            expect(dashboardData.buildStability).toBeDefined();
            expect(dashboardData.alertSummary).toBeDefined();
            expect(dashboardData.trendingData).toBeInstanceOf(Array);
            expect(dashboardData.systemHealth).toBeDefined();
        });
        it('should get current dashboard data', async () => {
            await monitoringSystem['updateDashboard']();
            const dashboardData = monitoringSystem.getDashboardData();
            expect(dashboardData).toBeDefined();
            expect(dashboardData.lastUpdate).toBeInstanceOf(Date);
        });
        it('should calculate system health', async () => {
            await monitoringSystem['updateDashboard']();
            const dashboardData = monitoringSystem.getDashboardData();
            const systemHealth = dashboardData.systemHealth;
            expect(systemHealth.score).toBeGreaterThanOrEqual(0);
            expect(systemHealth.score).toBeLessThanOrEqual(100);
            expect(['healthy', 'warning', 'critical']).toContain(systemHealth.status);
            expect(systemHealth.lastCheck).toBeInstanceOf(Date);
            expect(systemHealth.issues).toBeInstanceOf(Array);
        });
    });
    describe('alert history management', () => {
        it('should maintain alert history', async () => {
            // Trigger an alert
            mockAnalysisToolsInstance.generateComprehensiveReport.mockResolvedValue({
                domainDistribution: {
                    totalAnyTypes: 1000,
                    intentionalVsUnintentional: {
                        intentional: { count: 300, percentage: 30 },
                        unintentional: { count: 700, percentage: 70 }
                    }
                },
                summary: { currentSuccessRate: 60 }
            });
            await monitoringSystem.checkAlertConditions();
            const history = monitoringSystem.getAlertHistory();
            expect(history.length).toBeGreaterThan(0);
            expect(history[0].type).toBe('low_success_rate');
        });
        it('should limit alert history', () => {
            const history = monitoringSystem.getAlertHistory(5);
            expect(history.length).toBeLessThanOrEqual(5);
        });
        it('should clear alert history', () => {
            const clearPromise = new Promise((resolve) => {
                monitoringSystem.on('alert_history_cleared', resolve);
            });
            monitoringSystem.clearAlertHistory();
            const history = monitoringSystem.getAlertHistory();
            expect(history.length).toBe(0);
            return clearPromise;
        });
    });
    describe('error handling', () => {
        it('should handle dashboard update errors', async () => {
            mockAnalysisToolsInstance.generateComprehensiveReport.mockRejectedValue(new Error('Analysis failed'));
            await expect(monitoringSystem['updateDashboard']()).rejects.toThrow('Analysis failed');
        });
        it('should handle monitoring errors gracefully', (done) => {
            mockAnalysisToolsInstance.generateComprehensiveReport.mockRejectedValue(new Error('Monitoring error'));
            monitoringSystem.on('alert', (alert) => {
                if (alert.type === 'system_error') {
                    expect(alert.severity).toBe('high');
                    expect(alert.message).toContain('Monitoring system error');
                    done();
                }
            });
            // Start monitoring with very short interval for testing
            monitoringSystem.startMonitoring(0.01); // 0.6 seconds
        });
        it('should handle file system errors gracefully', () => {
            mockFs.writeFileSync.mockImplementation(() => {
                throw new Error('File system error');
            });
            // Should not throw error
            expect(() => monitoringSystem['saveAlertHistory']()).not.toThrow();
        });
    });
    describe('integration', () => {
        it('should integrate with analysis tools', async () => {
            // Mock the comprehensive report properly
            mockAnalysisToolsInstance.generateComprehensiveReport.mockResolvedValue({
                domainDistribution: {
                    totalAnyTypes: 1000,
                    intentionalVsUnintentional: {
                        intentional: { count: 300, percentage: 30 },
                        unintentional: { count: 700, percentage: 70 }
                    }
                },
                summary: { currentSuccessRate: 75, totalAnyTypes: 1000 }
            });
            const progress = await monitoringSystem.getProgressMetrics();
            expect(mockAnalysisToolsInstance.generateComprehensiveReport).toHaveBeenCalled();
            expect(progress).toBeDefined();
        });
        it('should persist data across restarts', () => {
            // Mock existing history file
            mockFs.existsSync.mockReturnValue(true);
            mockFs.readFileSync.mockReturnValue(JSON.stringify([
                {
                    type: 'low_success_rate',
                    severity: 'medium',
                    message: 'Test alert',
                    timestamp: new Date().toISOString()
                }
            ]));
            const newMonitoringSystem = new ProgressMonitoringSystem_1.ProgressMonitoringSystem();
            const history = newMonitoringSystem.getAlertHistory();
            expect(history.length).toBe(1);
            expect(history[0].type).toBe('low_success_rate');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vUHJvZ3Jlc3NNb25pdG9yaW5nU3lzdGVtLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtBLG9CQUFvQjtBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7QUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBUmhCLGlEQUF5QztBQUN6Qyx1Q0FBeUI7QUFDekIsb0RBQWlEO0FBQ2pELDBFQUE2RjtBQU83RixNQUFNLGlCQUFpQixHQUFHLDZCQUF1RCxDQUFDO0FBQ2xGLE1BQU0sWUFBWSxHQUFHLHdCQUFnRCxDQUFDO0FBQ3RFLE1BQU0sTUFBTSxHQUFHLEVBQTRCLENBQUM7QUFFNUMsUUFBUSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtJQUN4QyxJQUFJLGdCQUEwQyxDQUFDO0lBQy9DLElBQUkseUJBQXFELENBQUM7SUFFMUQsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUVyQiw4QkFBOEI7UUFDOUIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekMsTUFBTSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQUMsQ0FBQztRQUNsRCxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRTlDLHFCQUFxQjtRQUNyQix5QkFBeUIsR0FBRztZQUMxQiwy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RSxrQkFBa0I7b0JBQ3hCLFFBQVEsRUFBRSxRQUFRO29CQUNsQixPQUFPLEVBQUUsWUFBWTtvQkFDckIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO2lCQUNwQzthQUNGLENBQUMsQ0FBQyxDQUFDO1lBRUosTUFBTSxtQkFBbUIsR0FBRyxJQUFJLG1EQUF3QixFQUFFLENBQUM7WUFDM0QsTUFBTSxPQUFPLEdBQUcsbUJBQW1CLENBQUMsZUFBZSxFQUFFLENBQUM7WUFFdEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi91bmludGVudGlvbmFsLWFueS1lbGltaW5hdGlvbi9fX3Rlc3RzX18vUHJvZ3Jlc3NNb25pdG9yaW5nU3lzdGVtLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCB7IEFuYWx5c2lzVG9vbHMgfSBmcm9tICcuLi9BbmFseXNpc1Rvb2xzJztcbmltcG9ydCB7IEFsZXJ0LCBEYXNoYm9hcmREYXRhLCBQcm9ncmVzc01vbml0b3JpbmdTeXN0ZW0gfSBmcm9tICcuLi9Qcm9ncmVzc01vbml0b3JpbmdTeXN0ZW0nO1xuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCcuLi9BbmFseXNpc1Rvb2xzJyk7XG5qZXN0Lm1vY2soJ2NoaWxkX3Byb2Nlc3MnKTtcbmplc3QubW9jaygnZnMnKTtcblxuY29uc3QgbW9ja0FuYWx5c2lzVG9vbHMgPSBBbmFseXNpc1Rvb2xzIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIEFuYWx5c2lzVG9vbHM+O1xuY29uc3QgbW9ja0V4ZWNTeW5jID0gZXhlY1N5bmMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZXhlY1N5bmM+O1xuY29uc3QgbW9ja0ZzID0gZnMgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGZzPjtcblxuZGVzY3JpYmUoJ1Byb2dyZXNzTW9uaXRvcmluZ1N5c3RlbScsICgpID0+IHtcbiAgbGV0IG1vbml0b3JpbmdTeXN0ZW06IFByb2dyZXNzTW9uaXRvcmluZ1N5c3RlbTtcbiAgbGV0IG1vY2tBbmFseXNpc1Rvb2xzSW5zdGFuY2U6IGplc3QuTW9ja2VkPEFuYWx5c2lzVG9vbHM+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgLy8gTW9jayBmaWxlIHN5c3RlbSBvcGVyYXRpb25zXG4gICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgICBtb2NrRnMucmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZSgnW10nKTtcbiAgICBtb2NrRnMud3JpdGVGaWxlU3luYy5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgIG1vY2tGcy5ta2RpclN5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICcnKTtcblxuICAgIC8vIE1vY2sgQW5hbHlzaXNUb29sc1xuICAgIG1vY2tBbmFseXNpc1Rvb2xzSW5zdGFuY2UgPSB7XG4gICAgICBnZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQ6IGplc3QuZm4oKSxcbiAgICAgIGFuYWx5emVEb21haW5EaXN0cmlidXRpb246IGplc3QuZm4oKSxcbiAgICAgIGdlbmVyYXRlQ2xhc3NpZmljYXRpb25BY2N1cmFjeVJlcG9ydDogamVzdC5mbigpLFxuICAgICAgZ2VuZXJhdGVTdWNjZXNzUmF0ZUFuYWx5c2lzOiBqZXN0LmZuKCksXG4gICAgICBnZW5lcmF0ZU1hbnVhbFJldmlld1JlY29tbWVuZGF0aW9uczogamVzdC5mbigpXG4gICAgfSBhcyBhbnk7XG5cbiAgICBtb2NrQW5hbHlzaXNUb29scy5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja0FuYWx5c2lzVG9vbHNJbnN0YW5jZSk7XG5cbiAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBieSBkZWZhdWx0XG4gICAgbW9ja0V4ZWNTeW5jLm1vY2tSZXR1cm5WYWx1ZSgnJyk7XG5cbiAgICBtb25pdG9yaW5nU3lzdGVtID0gbmV3IFByb2dyZXNzTW9uaXRvcmluZ1N5c3RlbSgpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIG1vbml0b3JpbmdTeXN0ZW0uc3RvcE1vbml0b3JpbmcoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NvbnN0cnVjdG9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgYWxlcnQgdGhyZXNob2xkcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRocmVzaG9sZHMgPSBtb25pdG9yaW5nU3lzdGVtLmdldEFsZXJ0VGhyZXNob2xkcygpO1xuXG4gICAgICBleHBlY3QodGhyZXNob2xkcy5zdWNjZXNzUmF0ZVRocmVzaG9sZCkudG9CZSg3MCk7XG4gICAgICBleHBlY3QodGhyZXNob2xkcy5idWlsZEZhaWx1cmVUaHJlc2hvbGQpLnRvQmUoMyk7XG4gICAgICBleHBlY3QodGhyZXNob2xkcy5jbGFzc2lmaWNhdGlvbkFjY3VyYWN5VGhyZXNob2xkKS50b0JlKDgwKTtcbiAgICAgIGV4cGVjdCh0aHJlc2hvbGRzLnNhZmV0eUV2ZW50VGhyZXNob2xkKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KHRocmVzaG9sZHMucHJvZ3Jlc3NTdGFsbFRocmVzaG9sZCkudG9CZSgyNCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBjdXN0b20gYWxlcnQgdGhyZXNob2xkcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVRocmVzaG9sZHMgPSB7XG4gICAgICAgIHN1Y2Nlc3NSYXRlVGhyZXNob2xkOiA4MCxcbiAgICAgICAgYnVpbGRGYWlsdXJlVGhyZXNob2xkOiAyXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjdXN0b21Nb25pdG9yaW5nU3lzdGVtID0gbmV3IFByb2dyZXNzTW9uaXRvcmluZ1N5c3RlbShjdXN0b21UaHJlc2hvbGRzKTtcbiAgICAgIGNvbnN0IHRocmVzaG9sZHMgPSBjdXN0b21Nb25pdG9yaW5nU3lzdGVtLmdldEFsZXJ0VGhyZXNob2xkcygpO1xuXG4gICAgICBleHBlY3QodGhyZXNob2xkcy5zdWNjZXNzUmF0ZVRocmVzaG9sZCkudG9CZSg4MCk7XG4gICAgICBleHBlY3QodGhyZXNob2xkcy5idWlsZEZhaWx1cmVUaHJlc2hvbGQpLnRvQmUoMik7XG4gICAgICBleHBlY3QodGhyZXNob2xkcy5jbGFzc2lmaWNhdGlvbkFjY3VyYWN5VGhyZXNob2xkKS50b0JlKDgwKTsgLy8gRGVmYXVsdFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbW9uaXRvcmluZyBsaWZlY3ljbGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdGFydCBtb25pdG9yaW5nIHdpdGggc3BlY2lmaWVkIGludGVydmFsJywgKGRvbmUpID0+IHtcbiAgICAgIGNvbnN0IGludGVydmFsTWludXRlcyA9IDE7XG5cbiAgICAgIG1vbml0b3JpbmdTeXN0ZW0ub24oJ21vbml0b3Jpbmdfc3RhcnRlZCcsIChkYXRhKSA9PiB7XG4gICAgICAgIGV4cGVjdChkYXRhLmludGVydmFsTWludXRlcykudG9CZShpbnRlcnZhbE1pbnV0ZXMpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5zdGFydE1vbml0b3JpbmcoaW50ZXJ2YWxNaW51dGVzKTtcbiAgICAgIGV4cGVjdChtb25pdG9yaW5nU3lzdGVtWydpc01vbml0b3JpbmcnXSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHN0YXJ0IG1vbml0b3JpbmcgaWYgYWxyZWFkeSBydW5uaW5nJywgKCkgPT4ge1xuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5zdGFydE1vbml0b3JpbmcoKTtcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5zdGFydE1vbml0b3JpbmcoKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQcm9ncmVzcyBtb25pdG9yaW5nIGlzIGFscmVhZHkgcnVubmluZycpO1xuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdG9wIG1vbml0b3JpbmcnLCAoZG9uZSkgPT4ge1xuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5vbignbW9uaXRvcmluZ19zdG9wcGVkJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9uaXRvcmluZ1N5c3RlbVsnaXNNb25pdG9yaW5nJ10pLnRvQmUoZmFsc2UpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5zdGFydE1vbml0b3JpbmcoKTtcbiAgICAgIG1vbml0b3JpbmdTeXN0ZW0uc3RvcE1vbml0b3JpbmcoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHN0b3AgbW9uaXRvcmluZyBpZiBub3QgcnVubmluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5zdG9wTW9uaXRvcmluZygpO1xuXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1Byb2dyZXNzIG1vbml0b3JpbmcgaXMgbm90IHJ1bm5pbmcnKTtcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Byb2dyZXNzIG1ldHJpY3MnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAvLyBNb2NrIGNvbXByZWhlbnNpdmUgcmVwb3J0XG4gICAgICBtb2NrQW5hbHlzaXNUb29sc0luc3RhbmNlLmdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlcG9ydC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlkOiAndGVzdC1yZXBvcnQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIGRvbWFpbkRpc3RyaWJ1dGlvbjoge1xuICAgICAgICAgIHRvdGFsQW55VHlwZXM6IDEwMDAsXG4gICAgICAgICAgaW50ZW50aW9uYWxWc1VuaW50ZW50aW9uYWw6IHtcbiAgICAgICAgICAgIGludGVudGlvbmFsOiB7IGNvdW50OiAzMDAsIHBlcmNlbnRhZ2U6IDMwIH0sXG4gICAgICAgICAgICB1bmludGVudGlvbmFsOiB7IGNvdW50OiA3MDAsIHBlcmNlbnRhZ2U6IDcwIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ5RG9tYWluOiBbXSxcbiAgICAgICAgICBieUNhdGVnb3J5OiBbXSxcbiAgICAgICAgICBhbmFseXNpc0RhdGU6IG5ldyBEYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgYWNjdXJhY3lSZXBvcnQ6IHtcbiAgICAgICAgICBvdmVyYWxsQWNjdXJhY3k6IDg1LFxuICAgICAgICAgIGF2ZXJhZ2VDb25maWRlbmNlOiAwLjgsXG4gICAgICAgICAgc2FtcGxlU2l6ZTogMTAwLFxuICAgICAgICAgIGNhdGVnb3J5QWNjdXJhY3k6IFtdLFxuICAgICAgICAgIGNvbmZpZGVuY2VEaXN0cmlidXRpb246IFtdLFxuICAgICAgICAgIHJlcG9ydERhdGU6IG5ldyBEYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2Vzc1JhdGVBbmFseXNpczoge1xuICAgICAgICAgIGN1cnJlbnRTdWNjZXNzUmF0ZTogNzUsXG4gICAgICAgICAgdGFyZ2V0U3VjY2Vzc1JhdGU6IDg1LFxuICAgICAgICAgIGltcHJvdmVtZW50TmVlZGVkOiAxMCxcbiAgICAgICAgICBjYXRlZ29yeVN1Y2Nlc3NSYXRlczogW10sXG4gICAgICAgICAgdHJlbmRpbmdEYXRhOiB7XG4gICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgc3VjY2Vzc1JhdGU6IDc1LFxuICAgICAgICAgICAgdG90YWxBbnlUeXBlczogMTAwMCxcbiAgICAgICAgICAgIHVuaW50ZW50aW9uYWxDb3VudDogNzAwLFxuICAgICAgICAgICAgY2xhc3NpZmljYXRpb25BY2N1cmFjeTogODVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb2plY3RlZENvbXBsZXRpb246IG5ldyBEYXRlKCksXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICAgICAgICBhbmFseXNpc0RhdGU6IG5ldyBEYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgbWFudWFsUmV2aWV3UmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICAgICAgc3VtbWFyeToge1xuICAgICAgICAgIHRvdGFsQW55VHlwZXM6IDEwMDAsXG4gICAgICAgICAgdW5pbnRlbnRpb25hbENvdW50OiA3MDAsXG4gICAgICAgICAgY2xhc3NpZmljYXRpb25BY2N1cmFjeTogODUsXG4gICAgICAgICAgY3VycmVudFN1Y2Nlc3NSYXRlOiA3NSxcbiAgICAgICAgICBtYW51YWxSZXZpZXdDYXNlczogNTAsXG4gICAgICAgICAgdG9wRG9tYWluOiAndXRpbGl0eScgYXMgYW55LFxuICAgICAgICAgIHRvcENhdGVnb3J5OiAnZnVuY3Rpb25fcGFyYW0nIGFzIGFueVxuICAgICAgICB9XG4gICAgICB9IGFzIGFueSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCBjdXJyZW50IHByb2dyZXNzIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGF3YWl0IG1vbml0b3JpbmdTeXN0ZW0uZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG5cbiAgICAgIGV4cGVjdChwcm9ncmVzcy50b3RhbEFueVR5cGVzKS50b0JlKDEwMDApO1xuICAgICAgZXhwZWN0KHByb2dyZXNzLmNsYXNzaWZpZWRJbnRlbnRpb25hbCkudG9CZSgzMDApO1xuICAgICAgZXhwZWN0KHByb2dyZXNzLmNsYXNzaWZpZWRVbmludGVudGlvbmFsKS50b0JlKDcwMCk7XG4gICAgICBleHBlY3QocHJvZ3Jlc3MuYXZlcmFnZVN1Y2Nlc3NSYXRlKS50b0JlKDc1KTtcbiAgICAgIGV4cGVjdChwcm9ncmVzcy50YXJnZXRSZWR1Y3Rpb25QZXJjZW50YWdlKS50b0JlKDIwKTtcbiAgICAgIGV4cGVjdChwcm9ncmVzcy5idWlsZFN0YWJsZSkudG9CZSh0cnVlKTsgLy8gRGVmYXVsdCBtb2NrXG4gICAgICBleHBlY3QocHJvZ3Jlc3MubGFzdFVwZGF0ZSkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBidWlsZCBmYWlsdXJlcyBpbiBwcm9ncmVzcyBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGZhaWx1cmVcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBpbGF0aW9uIGZhaWxlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgbW9uaXRvcmluZ1N5c3RlbS5nZXRQcm9ncmVzc01ldHJpY3MoKTtcblxuICAgICAgZXhwZWN0KHByb2dyZXNzLmJ1aWxkU3RhYmxlKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1aWxkIHN0YWJpbGl0eSBtb25pdG9yaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHN0YWJsZSBidWlsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja1JldHVyblZhbHVlKCcnKTsgLy8gU3VjY2Vzc2Z1bCBjb21waWxhdGlvblxuXG4gICAgICBhd2FpdCBtb25pdG9yaW5nU3lzdGVtLm1vbml0b3JCdWlsZFN0YWJpbGl0eSgpO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gbW9uaXRvcmluZ1N5c3RlbS5nZXRCdWlsZFN0YWJpbGl0eUhpc3RvcnkoMSk7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXS5pc1N0YWJsZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdLmVycm9yQ291bnQpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXS5idWlsZFRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBidWlsZCBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yT3V0cHV0ID0gJ2Vycm9yIFRTMjMwNDogQ2Fubm90IGZpbmQgbmFtZVxcbmVycm9yIFRTMjM0NTogQXJndW1lbnQgdHlwZSc7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0NvbXBpbGF0aW9uIGZhaWxlZCcpO1xuICAgICAgICAoZXJyb3IgYXMgYW55KS5zdGRvdXQgPSBlcnJvck91dHB1dDtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgbW9uaXRvcmluZ1N5c3RlbS5tb25pdG9yQnVpbGRTdGFiaWxpdHkoKTtcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IG1vbml0b3JpbmdTeXN0ZW0uZ2V0QnVpbGRTdGFiaWxpdHlIaXN0b3J5KDEpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0uaXNTdGFibGUpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0uZXJyb3JDb3VudCkudG9CZSgyKTsgLy8gVHdvIFRTIGVycm9yc1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0uZXJyb3JNZXNzYWdlKS50b0NvbnRhaW4oJ2Vycm9yIFRTMjMwNCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlbWl0IGFsZXJ0IGZvciBidWlsZCBmYWlsdXJlcycsIChkb25lKSA9PiB7XG4gICAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCdWlsZCBmYWlsZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBtb25pdG9yaW5nU3lzdGVtLm9uKCdhbGVydCcsIChhbGVydDogQWxlcnQpID0+IHtcbiAgICAgICAgaWYgKGFsZXJ0LnR5cGUgPT09ICdidWlsZF9mYWlsdXJlJykge1xuICAgICAgICAgIGV4cGVjdChhbGVydC5zZXZlcml0eSkudG9CZSgnaGlnaCcpO1xuICAgICAgICAgIGV4cGVjdChhbGVydC5tZXNzYWdlKS50b0NvbnRhaW4oJ0J1aWxkIGZhaWx1cmUgZGV0ZWN0ZWQnKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBtb25pdG9yaW5nU3lzdGVtLm1vbml0b3JCdWlsZFN0YWJpbGl0eSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlbWl0IGFsZXJ0IGZvciBjb25zZWN1dGl2ZSBidWlsZCBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0J1aWxkIGZhaWxlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFsZXJ0UHJvbWlzZSA9IG5ldyBQcm9taXNlPEFsZXJ0PigocmVzb2x2ZSkgPT4ge1xuICAgICAgICBtb25pdG9yaW5nU3lzdGVtLm9uKCdhbGVydCcsIChhbGVydDogQWxlcnQpID0+IHtcbiAgICAgICAgICBpZiAoYWxlcnQudHlwZSA9PT0gJ2NvbnNlY3V0aXZlX2J1aWxkX2ZhaWx1cmVzJykge1xuICAgICAgICAgICAgcmVzb2x2ZShhbGVydCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUcmlnZ2VyIG11bHRpcGxlIGJ1aWxkIGZhaWx1cmVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBhd2FpdCBtb25pdG9yaW5nU3lzdGVtLm1vbml0b3JCdWlsZFN0YWJpbGl0eSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhbGVydCA9IGF3YWl0IGFsZXJ0UHJvbWlzZTtcbiAgICAgIGV4cGVjdChhbGVydC5zZXZlcml0eSkudG9CZSgnY3JpdGljYWwnKTtcbiAgICAgIGV4cGVjdChhbGVydC5tZXNzYWdlKS50b0NvbnRhaW4oJ2NvbnNlY3V0aXZlIGJ1aWxkIGZhaWx1cmVzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhbGVydCBzeXN0ZW0nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAvLyBNb2NrIGFuYWx5c2lzIHJlcG9ydCBmb3IgYWxlcnQgY2hlY2tpbmdcbiAgICAgIG1vY2tBbmFseXNpc1Rvb2xzSW5zdGFuY2UuZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZG9tYWluRGlzdHJpYnV0aW9uOiB7XG4gICAgICAgICAgdG90YWxBbnlUeXBlczogMTAwMCxcbiAgICAgICAgICBpbnRlbnRpb25hbFZzVW5pbnRlbnRpb25hbDoge1xuICAgICAgICAgICAgaW50ZW50aW9uYWw6IHsgY291bnQ6IDMwMCwgcGVyY2VudGFnZTogMzAgfSxcbiAgICAgICAgICAgIHVuaW50ZW50aW9uYWw6IHsgY291bnQ6IDcwMCwgcGVyY2VudGFnZTogNzAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3VtbWFyeTogeyBjdXJyZW50U3VjY2Vzc1JhdGU6IDYwIH0sIC8vIEJlbG93IHRocmVzaG9sZFxuICAgICAgICBhY2N1cmFjeVJlcG9ydDogeyBvdmVyYWxsQWNjdXJhY3k6IDcwIH0gLy8gQmVsb3cgdGhyZXNob2xkXG4gICAgICB9IGFzIGFueSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgbG93IHN1Y2Nlc3MgcmF0ZSBhbGVydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFsZXJ0UHJvbWlzZSA9IG5ldyBQcm9taXNlPEFsZXJ0PigocmVzb2x2ZSkgPT4ge1xuICAgICAgICBtb25pdG9yaW5nU3lzdGVtLm9uKCdhbGVydCcsIChhbGVydDogQWxlcnQpID0+IHtcbiAgICAgICAgICBpZiAoYWxlcnQudHlwZSA9PT0gJ2xvd19zdWNjZXNzX3JhdGUnKSB7XG4gICAgICAgICAgICByZXNvbHZlKGFsZXJ0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IG1vbml0b3JpbmdTeXN0ZW0uY2hlY2tBbGVydENvbmRpdGlvbnMoKTtcblxuICAgICAgY29uc3QgYWxlcnQgPSBhd2FpdCBhbGVydFByb21pc2U7XG4gICAgICBleHBlY3QoYWxlcnQuc2V2ZXJpdHkpLnRvQmUoJ21lZGl1bScpO1xuICAgICAgZXhwZWN0KGFsZXJ0Lm1lc3NhZ2UpLnRvQ29udGFpbignU3VjY2VzcyByYXRlJyk7XG4gICAgICBleHBlY3QoYWxlcnQuZGF0YS5jdXJyZW50UmF0ZSkudG9CZSg2MCk7XG4gICAgICBleHBlY3QoYWxlcnQuZGF0YS50aHJlc2hvbGQpLnRvQmUoNzApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZW1pdCBkdXBsaWNhdGUgYWxlcnRzIHdpdGhpbiBvbmUgaG91cicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBhbGVydENvdW50ID0gMDtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5vbignYWxlcnQnLCAoYWxlcnQ6IEFsZXJ0KSA9PiB7XG4gICAgICAgIGlmIChhbGVydC50eXBlID09PSAnbG93X3N1Y2Nlc3NfcmF0ZScpIHtcbiAgICAgICAgICBhbGVydENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayBjb25kaXRpb25zIHR3aWNlXG4gICAgICBhd2FpdCBtb25pdG9yaW5nU3lzdGVtLmNoZWNrQWxlcnRDb25kaXRpb25zKCk7XG4gICAgICBhd2FpdCBtb25pdG9yaW5nU3lzdGVtLmNoZWNrQWxlcnRDb25kaXRpb25zKCk7XG5cbiAgICAgIGV4cGVjdChhbGVydENvdW50KS50b0JlKDEpOyAvLyBTaG91bGQgb25seSBlbWl0IG9uY2VcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNhZmV0eSBwcm90b2NvbCBhY3RpdmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2FmZXR5RXZlbnQgPSB7XG4gICAgICAgIHR5cGU6ICdjb3JydXB0aW9uX2RldGVjdGVkJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcgYXMgY29uc3QsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRmlsZSBjb3JydXB0aW9uIGRldGVjdGVkJyxcbiAgICAgICAgYWN0aW9uOiAncm9sbGJhY2tfaW5pdGlhdGVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBhZmZlY3RlZEZpbGVzOiBbJ3Rlc3QudHMnXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgYWxlcnRQcm9taXNlID0gbmV3IFByb21pc2U8QWxlcnQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIG1vbml0b3JpbmdTeXN0ZW0ub24oJ2FsZXJ0JywgKGFsZXJ0OiBBbGVydCkgPT4ge1xuICAgICAgICAgIGlmIChhbGVydC50eXBlID09PSAnc2FmZXR5X3Byb3RvY29sX2FjdGl2YXRpb24nKSB7XG4gICAgICAgICAgICByZXNvbHZlKGFsZXJ0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNyaXRpY2FsRXZlbnRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgbW9uaXRvcmluZ1N5c3RlbS5vbignY3JpdGljYWxfc2FmZXR5X2V2ZW50JywgcmVzb2x2ZSk7XG4gICAgICB9KTtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5oYW5kbGVTYWZldHlQcm90b2NvbEFjdGl2YXRpb24oc2FmZXR5RXZlbnQpO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2FsZXJ0UHJvbWlzZSwgY3JpdGljYWxFdmVudFByb21pc2VdKS50aGVuKChbYWxlcnRdKSA9PiB7XG4gICAgICAgIGV4cGVjdChhbGVydC5zZXZlcml0eSkudG9CZSgnY3JpdGljYWwnKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0Lm1lc3NhZ2UpLnRvQ29udGFpbignU2FmZXR5IHByb3RvY29sIGFjdGl2YXRlZCcpO1xuICAgICAgICBleHBlY3QoYWxlcnQuZGF0YS5zYWZldHlFdmVudCkudG9FcXVhbChzYWZldHlFdmVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGFsZXJ0IHRocmVzaG9sZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdUaHJlc2hvbGRzID0ge1xuICAgICAgICBzdWNjZXNzUmF0ZVRocmVzaG9sZDogODAsXG4gICAgICAgIGJ1aWxkRmFpbHVyZVRocmVzaG9sZDogMlxuICAgICAgfTtcblxuICAgICAgY29uc3QgdXBkYXRlUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIG1vbml0b3JpbmdTeXN0ZW0ub24oJ2FsZXJ0X3RocmVzaG9sZHNfdXBkYXRlZCcsIHJlc29sdmUpO1xuICAgICAgfSk7XG5cbiAgICAgIG1vbml0b3JpbmdTeXN0ZW0udXBkYXRlQWxlcnRUaHJlc2hvbGRzKG5ld1RocmVzaG9sZHMpO1xuXG4gICAgICBjb25zdCB0aHJlc2hvbGRzID0gbW9uaXRvcmluZ1N5c3RlbS5nZXRBbGVydFRocmVzaG9sZHMoKTtcbiAgICAgIGV4cGVjdCh0aHJlc2hvbGRzLnN1Y2Nlc3NSYXRlVGhyZXNob2xkKS50b0JlKDgwKTtcbiAgICAgIGV4cGVjdCh0aHJlc2hvbGRzLmJ1aWxkRmFpbHVyZVRocmVzaG9sZCkudG9CZSgyKTtcblxuICAgICAgcmV0dXJuIHVwZGF0ZVByb21pc2U7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYXNoYm9hcmQgZGF0YScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tBbmFseXNpc1Rvb2xzSW5zdGFuY2UuZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaWQ6ICd0ZXN0LXJlcG9ydCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgZG9tYWluRGlzdHJpYnV0aW9uOiB7XG4gICAgICAgICAgdG90YWxBbnlUeXBlczogMTAwMCxcbiAgICAgICAgICBpbnRlbnRpb25hbFZzVW5pbnRlbnRpb25hbDoge1xuICAgICAgICAgICAgaW50ZW50aW9uYWw6IHsgY291bnQ6IDMwMCwgcGVyY2VudGFnZTogMzAgfSxcbiAgICAgICAgICAgIHVuaW50ZW50aW9uYWw6IHsgY291bnQ6IDcwMCwgcGVyY2VudGFnZTogNzAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYWNjdXJhY3lSZXBvcnQ6IHsgb3ZlcmFsbEFjY3VyYWN5OiA4NSB9LFxuICAgICAgICBzdW1tYXJ5OiB7IGN1cnJlbnRTdWNjZXNzUmF0ZTogNzUgfVxuICAgICAgfSBhcyBhbnkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgZGFzaGJvYXJkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVQcm9taXNlID0gbmV3IFByb21pc2U8RGFzaGJvYXJkRGF0YT4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgbW9uaXRvcmluZ1N5c3RlbS5vbignZGFzaGJvYXJkX3VwZGF0ZWQnLCByZXNvbHZlKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBtb25pdG9yaW5nU3lzdGVtWyd1cGRhdGVEYXNoYm9hcmQnXSgpO1xuXG4gICAgICBjb25zdCBkYXNoYm9hcmREYXRhID0gYXdhaXQgdXBkYXRlUHJvbWlzZTtcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLmxhc3RVcGRhdGUpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZERhdGEuYW5hbHlzaXNSZXBvcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkRGF0YS5wcm9ncmVzc01ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkRGF0YS5idWlsZFN0YWJpbGl0eSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLmFsZXJ0U3VtbWFyeSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLnRyZW5kaW5nRGF0YSkudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZERhdGEuc3lzdGVtSGVhbHRoKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBkYXNoYm9hcmQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1vbml0b3JpbmdTeXN0ZW1bJ3VwZGF0ZURhc2hib2FyZCddKCk7XG5cbiAgICAgIGNvbnN0IGRhc2hib2FyZERhdGEgPSBtb25pdG9yaW5nU3lzdGVtLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZERhdGEhLmxhc3RVcGRhdGUpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc3lzdGVtIGhlYWx0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IG1vbml0b3JpbmdTeXN0ZW1bJ3VwZGF0ZURhc2hib2FyZCddKCk7XG5cbiAgICAgIGNvbnN0IGRhc2hib2FyZERhdGEgPSBtb25pdG9yaW5nU3lzdGVtLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgIGNvbnN0IHN5c3RlbUhlYWx0aCA9IGRhc2hib2FyZERhdGEhLnN5c3RlbUhlYWx0aDtcblxuICAgICAgZXhwZWN0KHN5c3RlbUhlYWx0aC5zY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzeXN0ZW1IZWFsdGguc2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICAgIGV4cGVjdChbJ2hlYWx0aHknLCAnd2FybmluZycsICdjcml0aWNhbCddKS50b0NvbnRhaW4oc3lzdGVtSGVhbHRoLnN0YXR1cyk7XG4gICAgICBleHBlY3Qoc3lzdGVtSGVhbHRoLmxhc3RDaGVjaykudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgICBleHBlY3Qoc3lzdGVtSGVhbHRoLmlzc3VlcykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWxlcnQgaGlzdG9yeSBtYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gYWxlcnQgaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRyaWdnZXIgYW4gYWxlcnRcbiAgICAgIG1vY2tBbmFseXNpc1Rvb2xzSW5zdGFuY2UuZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZG9tYWluRGlzdHJpYnV0aW9uOiB7XG4gICAgICAgICAgdG90YWxBbnlUeXBlczogMTAwMCxcbiAgICAgICAgICBpbnRlbnRpb25hbFZzVW5pbnRlbnRpb25hbDoge1xuICAgICAgICAgICAgaW50ZW50aW9uYWw6IHsgY291bnQ6IDMwMCwgcGVyY2VudGFnZTogMzAgfSxcbiAgICAgICAgICAgIHVuaW50ZW50aW9uYWw6IHsgY291bnQ6IDcwMCwgcGVyY2VudGFnZTogNzAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3VtbWFyeTogeyBjdXJyZW50U3VjY2Vzc1JhdGU6IDYwIH1cbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgYXdhaXQgbW9uaXRvcmluZ1N5c3RlbS5jaGVja0FsZXJ0Q29uZGl0aW9ucygpO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gbW9uaXRvcmluZ1N5c3RlbS5nZXRBbGVydEhpc3RvcnkoKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0udHlwZSkudG9CZSgnbG93X3N1Y2Nlc3NfcmF0ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsaW1pdCBhbGVydCBoaXN0b3J5JywgKCkgPT4ge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IG1vbml0b3JpbmdTeXN0ZW0uZ2V0QWxlcnRIaXN0b3J5KDUpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbGVhciBhbGVydCBoaXN0b3J5JywgKCkgPT4ge1xuICAgICAgY29uc3QgY2xlYXJQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgbW9uaXRvcmluZ1N5c3RlbS5vbignYWxlcnRfaGlzdG9yeV9jbGVhcmVkJywgcmVzb2x2ZSk7XG4gICAgICB9KTtcblxuICAgICAgbW9uaXRvcmluZ1N5c3RlbS5jbGVhckFsZXJ0SGlzdG9yeSgpO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gbW9uaXRvcmluZ1N5c3RlbS5nZXRBbGVydEhpc3RvcnkoKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZSgwKTtcblxuICAgICAgcmV0dXJuIGNsZWFyUHJvbWlzZTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Vycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhc2hib2FyZCB1cGRhdGUgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FuYWx5c2lzVG9vbHNJbnN0YW5jZS5nZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignQW5hbHlzaXMgZmFpbGVkJylcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChtb25pdG9yaW5nU3lzdGVtWyd1cGRhdGVEYXNoYm9hcmQnXSgpKS5yZWplY3RzLnRvVGhyb3coJ0FuYWx5c2lzIGZhaWxlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbW9uaXRvcmluZyBlcnJvcnMgZ3JhY2VmdWxseScsIChkb25lKSA9PiB7XG4gICAgICBtb2NrQW5hbHlzaXNUb29sc0luc3RhbmNlLmdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlcG9ydC5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKCdNb25pdG9yaW5nIGVycm9yJylcbiAgICAgICk7XG5cbiAgICAgIG1vbml0b3JpbmdTeXN0ZW0ub24oJ2FsZXJ0JywgKGFsZXJ0OiBBbGVydCkgPT4ge1xuICAgICAgICBpZiAoYWxlcnQudHlwZSA9PT0gJ3N5c3RlbV9lcnJvcicpIHtcbiAgICAgICAgICBleHBlY3QoYWxlcnQuc2V2ZXJpdHkpLnRvQmUoJ2hpZ2gnKTtcbiAgICAgICAgICBleHBlY3QoYWxlcnQubWVzc2FnZSkudG9Db250YWluKCdNb25pdG9yaW5nIHN5c3RlbSBlcnJvcicpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0YXJ0IG1vbml0b3Jpbmcgd2l0aCB2ZXJ5IHNob3J0IGludGVydmFsIGZvciB0ZXN0aW5nXG4gICAgICBtb25pdG9yaW5nU3lzdGVtLnN0YXJ0TW9uaXRvcmluZygwLjAxKTsgLy8gMC42IHNlY29uZHNcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZpbGUgc3lzdGVtIGVycm9ycyBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgICAgbW9ja0ZzLndyaXRlRmlsZVN5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHN5c3RlbSBlcnJvcicpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgZXJyb3JcbiAgICAgIGV4cGVjdCgoKSA9PiBtb25pdG9yaW5nU3lzdGVtWydzYXZlQWxlcnRIaXN0b3J5J10oKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2ludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW50ZWdyYXRlIHdpdGggYW5hbHlzaXMgdG9vbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHRoZSBjb21wcmVoZW5zaXZlIHJlcG9ydCBwcm9wZXJseVxuICAgICAgbW9ja0FuYWx5c2lzVG9vbHNJbnN0YW5jZS5nZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkb21haW5EaXN0cmlidXRpb246IHtcbiAgICAgICAgICB0b3RhbEFueVR5cGVzOiAxMDAwLFxuICAgICAgICAgIGludGVudGlvbmFsVnNVbmludGVudGlvbmFsOiB7XG4gICAgICAgICAgICBpbnRlbnRpb25hbDogeyBjb3VudDogMzAwLCBwZXJjZW50YWdlOiAzMCB9LFxuICAgICAgICAgICAgdW5pbnRlbnRpb25hbDogeyBjb3VudDogNzAwLCBwZXJjZW50YWdlOiA3MCB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdW1tYXJ5OiB7IGN1cnJlbnRTdWNjZXNzUmF0ZTogNzUsIHRvdGFsQW55VHlwZXM6IDEwMDAgfVxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGF3YWl0IG1vbml0b3JpbmdTeXN0ZW0uZ2V0UHJvZ3Jlc3NNZXRyaWNzKCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQW5hbHlzaXNUb29sc0luc3RhbmNlLmdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlcG9ydCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHByb2dyZXNzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwZXJzaXN0IGRhdGEgYWNyb3NzIHJlc3RhcnRzJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayBleGlzdGluZyBoaXN0b3J5IGZpbGVcbiAgICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIG1vY2tGcy5yZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdsb3dfc3VjY2Vzc19yYXRlJyxcbiAgICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgICAgICAgbWVzc2FnZTogJ1Rlc3QgYWxlcnQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgIF0pKTtcblxuICAgICAgY29uc3QgbmV3TW9uaXRvcmluZ1N5c3RlbSA9IG5ldyBQcm9ncmVzc01vbml0b3JpbmdTeXN0ZW0oKTtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBuZXdNb25pdG9yaW5nU3lzdGVtLmdldEFsZXJ0SGlzdG9yeSgpO1xuXG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXS50eXBlKS50b0JlKCdsb3dfc3VjY2Vzc19yYXRlJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=