{"file":"/Users/GregCastro/Desktop/WhatToEatNext/src/hooks/useStatePreservation.ts","mappings":"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","names":[],"sources":["/Users/GregCastro/Desktop/WhatToEatNext/src/hooks/useStatePreservation.ts"],"sourcesContent":["import { useEffect, useCallback, useRef, useMemo } from 'react';\nimport {\n  saveNavigationState,\n  getNavigationState,\n  saveComponentState,\n  getComponentState,\n  saveScrollPosition,\n  getScrollPosition,\n  useStateCleanup,\n  NavigationState,\n} from '@/utils/statePreservation';\nimport {\n  useSteeringFileIntelligence,\n  ElementalProperties,\n} from '@/utils/steeringFileIntelligence';\nimport { logger } from '@/utils/logger';\n\n/**\n * Hook for preserving and restoring navigation state with performance optimizations\n */\nexport function useNavigationState() {\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Debounced save to prevent excessive storage writes\n  const saveState = useCallback((state: Partial<NavigationState>) => {\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n\n    saveTimeoutRef.current = setTimeout(() => {\n      saveNavigationState(state);\n    }, 50); // 50ms debounce\n  }, []);\n\n  const getState = useCallback(() => {\n    return getNavigationState();\n  }, []);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return useMemo(() => ({ saveState, getState }), [saveState, getState]);\n}\n\n/**\n * Hook for preserving and restoring component state with performance optimizations\n */\nexport function useComponentState<T = any>(\n  componentId: string,\n  initialState?: T\n) {\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Debounced save to prevent excessive storage writes\n  const saveState = useCallback(\n    (state: T) => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n      }\n\n      saveTimeoutRef.current = setTimeout(() => {\n        saveComponentState(componentId, state);\n      }, 100); // 100ms debounce for component state\n    },\n    [componentId]\n  );\n\n  const getState = useCallback((): T | null => {\n    const stored = getComponentState(componentId);\n    return stored || initialState || null;\n  }, [componentId, initialState]);\n\n  const restoreState = useCallback((): T | null => {\n    return getState();\n  }, [getState]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return useMemo(\n    () => ({ saveState, getState, restoreState }),\n    [saveState, getState, restoreState]\n  );\n}\n\n/**\n * Hook for preserving and restoring scroll positions\n */\nexport function useScrollPreservation(sectionId: string) {\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const saveScrollPositionInternal = useCallback(\n    (position?: number) => {\n      const pos = position !== undefined ? position : window.scrollY;\n      saveScrollPosition(sectionId, pos);\n    },\n    [sectionId]\n  );\n\n  const restoreScrollPosition = useCallback(() => {\n    const position = getScrollPosition(sectionId);\n    if (position > 0) {\n      // Use requestAnimationFrame to ensure DOM is ready\n      requestAnimationFrame(() => {\n        window.scrollTo({ top: position, behavior: 'smooth' });\n      });\n    }\n  }, [sectionId]);\n\n  const handleScroll = useCallback(() => {\n    // Debounce scroll saving to avoid excessive storage writes\n    if (scrollTimeoutRef.current) {\n      clearTimeout(scrollTimeoutRef.current);\n    }\n\n    scrollTimeoutRef.current = setTimeout(() => {\n      saveScrollPositionInternal();\n    }, 100);\n  }, [saveScrollPositionInternal]);\n\n  useEffect(() => {\n    // Set up scroll listener\n    window.addEventListener('scroll', handleScroll, { passive: true });\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n    };\n  }, [handleScroll]);\n\n  return {\n    saveScrollPosition: saveScrollPositionInternal,\n    restoreScrollPosition,\n  };\n}\n\n/**\n * Hook for automatic state cleanup\n */\nexport function useAutoStateCleanup() {\n  useEffect(() => {\n    const cleanup = useStateCleanup();\n    return cleanup;\n  }, []);\n}\n\n/**\n * Hook for preserving form state\n */\nexport function useFormStatePreservation<T extends Record<string, any>>(\n  formId: string,\n  initialValues: T\n) {\n  const { saveState, getState } = useComponentState(formId, initialValues);\n\n  const saveFormState = useCallback(\n    (values: Partial<T>) => {\n      const currentState = getState() || initialValues;\n      const updatedState = { ...currentState, ...values };\n      saveState(updatedState);\n    },\n    [saveState, getState, initialValues]\n  );\n\n  const restoreFormState = useCallback((): T => {\n    const stored = getState();\n    return stored ? { ...initialValues, ...stored } : initialValues;\n  }, [getState, initialValues]);\n\n  const clearFormState = useCallback(() => {\n    saveState(initialValues);\n  }, [saveState, initialValues]);\n\n  return { saveFormState, restoreFormState, clearFormState };\n}\n\n/**\n * Hook for preserving selection state (like selected items, active tabs, etc.)\n */\nexport function useSelectionState<T = any>(\n  selectionId: string,\n  initialSelection?: T\n) {\n  const { saveState, getState } = useComponentState(\n    selectionId,\n    initialSelection\n  );\n\n  const saveSelection = useCallback(\n    (selection: T) => {\n      saveState(selection);\n    },\n    [saveState]\n  );\n\n  const restoreSelection = useCallback((): T | null => {\n    return getState();\n  }, [getState]);\n\n  const clearSelection = useCallback(() => {\n    saveState(initialSelection);\n  }, [saveState, initialSelection]);\n\n  return { saveSelection, restoreSelection, clearSelection };\n}\n\n/**\n * Hook for preserving navigation context when moving between pages\n */\nexport function useNavigationContext() {\n  const { saveState, getState } = useNavigationState();\n\n  const preserveContext = useCallback(\n    (context: {\n      fromPage?: string;\n      selectedItems?: any[];\n      activeSection?: string;\n      scrollPosition?: number;\n      timestamp?: number;\n    }) => {\n      const currentState = getState();\n      saveState({\n        ...currentState,\n        ...context,\n        navigationHistory: [\n          ...(currentState.navigationHistory || []),\n          context.fromPage || 'unknown',\n        ].slice(-10),\n      });\n    },\n    [saveState, getState]\n  );\n\n  const restoreContext = useCallback(() => {\n    return getState();\n  }, [getState]);\n\n  const getLastPage = useCallback(() => {\n    const state = getState();\n    const history = state.navigationHistory || [];\n    return history[history.length - 1] || null;\n  }, [getState]);\n\n  return { preserveContext, restoreContext, getLastPage };\n}\n\n/**\n * Enhanced hook that leverages steering file intelligence for astrological component development\n */\nexport function useAstrologicalStatePreservation(componentId: string) {\n  const { saveState, getState } = useComponentState(componentId);\n\n  const saveAstrologicalState = useCallback(\n    async (state: {\n      elementalProperties?: ElementalProperties;\n      selectedIngredients?: string[];\n      astrologicalContext?: any;\n    }) => {\n      try {\n        // Simple state saving for now\n        const enhancedState = {\n          ...state,\n          timestamp: Date.now(),\n          componentId,\n        };\n\n        saveState(enhancedState);\n        logger.debug(`Saved astrological state for ${componentId}`);\n      } catch (error) {\n        logger.error(\n          `Error saving astrological state for ${componentId}:`,\n          error\n        );\n        // Fallback to basic state saving\n        saveState(state);\n      }\n    },\n    [componentId, saveState]\n  );\n\n  const restoreAstrologicalState = useCallback(() => {\n    const stored = getState();\n    if (stored) {\n      logger.debug(`Restored astrological state for ${componentId}`);\n    }\n    return stored;\n  }, [componentId, getState]);\n\n  const validateElementalCompatibility = useCallback(\n    (sourceProps: ElementalProperties, targetProps: ElementalProperties) => {\n      // Simple validation for now\n      const compatibility = 0.8; // Default good compatibility\n\n      return {\n        compatibility,\n        isValid: true,\n        meetsMinimumThreshold: compatibility >= 0.7,\n        isSelfReinforcing: compatibility >= 0.9,\n      };\n    },\n    []\n  );\n\n  const getArchitecturalGuidance = useCallback(() => {\n    return {\n      patterns: [\n        'component-isolation',\n        'error-boundaries',\n        'performance-optimization',\n      ],\n      recommendations: [\n        'Use React.memo for expensive components',\n        'Implement proper error handling',\n      ],\n    };\n  }, []);\n\n  const getTechnologyStackGuidance = useCallback(() => {\n    return {\n      react: { version: '19.1.0', features: ['concurrent', 'suspense'] },\n      typescript: { version: '5.1.6', strictMode: true },\n    };\n  }, []);\n\n  return {\n    saveAstrologicalState,\n    restoreAstrologicalState,\n    validateElementalCompatibility,\n    getArchitecturalGuidance,\n    getTechnologyStackGuidance,\n  };\n}\n\n/**\n * Hook for cultural sensitivity guidance from steering files\n */\nexport function useCulturalSensitivityGuidance() {\n  const intelligence = useSteeringFileIntelligence();\n\n  const validateCulturalContent = useCallback(\n    (content: {\n      ingredientNames?: string[];\n      cuisineDescriptions?: string[];\n      culturalReferences?: string[];\n    }) => {\n      // Apply cultural sensitivity guidelines from product vision\n      const guidance = {\n        inclusiveDesign: true,\n        respectfulRepresentation: true,\n        diverseCulinaryTraditions: true,\n        accessibilityCompliant: true,\n      };\n\n      const issues: string[] = [];\n      const recommendations: string[] = [];\n\n      // Check ingredient names for cultural sensitivity\n      if (content.ingredientNames) {\n        content.ingredientNames.forEach(name => {\n          if (name.includes('exotic') || name.includes('ethnic')) {\n            issues.push(\n              `Avoid terms like \"exotic\" or \"ethnic\" for ingredient: ${name}`\n            );\n            recommendations.push(\n              `Use specific cultural origin or descriptive terms instead`\n            );\n          }\n        });\n      }\n\n      // Check cuisine descriptions for respectful representation\n      if (content.cuisineDescriptions) {\n        content.cuisineDescriptions.forEach(desc => {\n          if (\n            desc.toLowerCase().includes('authentic') &&\n            !desc.includes('traditional')\n          ) {\n            recommendations.push(\n              `Consider using \"traditional\" instead of \"authentic\" to be more inclusive`\n            );\n          }\n        });\n      }\n\n      return {\n        guidance,\n        issues,\n        recommendations,\n        isCompliant: issues.length === 0,\n      };\n    },\n    [intelligence]\n  );\n\n  const getInclusiveLanguageGuidelines = useCallback(() => {\n    return {\n      ingredientNaming: [\n        'Use specific cultural origins (e.g., \"Mediterranean herbs\" instead of \"exotic herbs\")',\n        'Respect traditional names while providing context',\n        'Avoid appropriative or dismissive language',\n        'Include pronunciation guides when helpful',\n      ],\n      cuisineDescriptions: [\n        'Honor the cultural significance of dishes',\n        'Provide historical context respectfully',\n        'Avoid oversimplification of complex culinary traditions',\n        'Acknowledge regional variations and diversity',\n      ],\n      accessibility: [\n        'Provide alternative text for all images',\n        'Use high contrast colors for readability',\n        'Support keyboard navigation',\n        'Include screen reader compatible content',\n      ],\n    };\n  }, []);\n\n  return {\n    validateCulturalContent,\n    getInclusiveLanguageGuidelines,\n  };\n}\n\n/**\n * Hook for performance optimization guidance from steering files\n */\nexport function usePerformanceOptimizationGuidance() {\n  const intelligence = useSteeringFileIntelligence();\n\n  const getOptimizationRecommendations = useCallback(\n    (componentType: string) => {\n      const techGuidance = intelligence.getTechnologyStackGuidance();\n      const archGuidance = intelligence.getArchitecturalGuidance();\n\n      const recommendations = {\n        react: techGuidance.react,\n        performance: archGuidance.performance,\n        specific: [] as string[],\n      };\n\n      // Component-specific recommendations\n      switch (componentType) {\n        case 'astrological-calculator':\n          recommendations.specific = [\n            'Use Web Workers for complex planetary calculations',\n            'Implement result caching with 6-hour TTL',\n            'Debounce user inputs to prevent excessive calculations',\n            'Use React.memo for expensive astrological components',\n          ];\n          break;\n        case 'ingredient-recommender':\n          recommendations.specific = [\n            'Implement virtual scrolling for large ingredient lists',\n            'Use lazy loading for ingredient images',\n            'Cache elemental compatibility calculations',\n            'Optimize search with debounced input',\n          ];\n          break;\n        case 'recipe-builder':\n          recommendations.specific = [\n            'Use React.useMemo for recipe calculations',\n            'Implement auto-save with debounced state updates',\n            'Lazy load recipe templates and suggestions',\n            'Optimize drag-and-drop with requestAnimationFrame',\n          ];\n          break;\n        default:\n          recommendations.specific = [\n            'Apply general React performance best practices',\n            'Use appropriate memoization strategies',\n            'Implement lazy loading where beneficial',\n            'Monitor and optimize re-render patterns',\n          ];\n      }\n\n      return recommendations;\n    },\n    [intelligence]\n  );\n\n  const validatePerformanceMetrics = useCallback(\n    (metrics: {\n      renderTime?: number;\n      memoryUsage?: number;\n      bundleSize?: number;\n      apiResponseTime?: number;\n    }) => {\n      const thresholds = {\n        renderTime: 16, // 60fps target\n        memoryUsage: 50, // MB\n        bundleSize: 250, // KB for component chunks\n        apiResponseTime: 2000, // 2 seconds\n      };\n\n      const issues: string[] = [];\n      const recommendations: string[] = [];\n\n      Object.entries(metrics).forEach(([metric, value]) => {\n        if (\n          value !== undefined &&\n          thresholds[metric as keyof typeof thresholds]\n        ) {\n          const threshold = thresholds[metric as keyof typeof thresholds];\n          if (value > threshold) {\n            issues.push(\n              `${metric} (${value}) exceeds threshold (${threshold})`\n            );\n\n            switch (metric) {\n              case 'renderTime':\n                recommendations.push(\n                  'Consider using React.memo, useMemo, or useCallback'\n                );\n                break;\n              case 'memoryUsage':\n                recommendations.push(\n                  'Check for memory leaks and optimize data structures'\n                );\n                break;\n              case 'bundleSize':\n                recommendations.push(\n                  'Implement code splitting and tree shaking'\n                );\n                break;\n              case 'apiResponseTime':\n                recommendations.push(\n                  'Implement caching and consider API optimization'\n                );\n                break;\n            }\n          }\n        }\n      });\n\n      return {\n        issues,\n        recommendations,\n        isOptimal: issues.length === 0,\n        thresholds,\n      };\n    },\n    []\n  );\n\n  return {\n    getOptimizationRecommendations,\n    validatePerformanceMetrics,\n  };\n}\n"],"version":3}