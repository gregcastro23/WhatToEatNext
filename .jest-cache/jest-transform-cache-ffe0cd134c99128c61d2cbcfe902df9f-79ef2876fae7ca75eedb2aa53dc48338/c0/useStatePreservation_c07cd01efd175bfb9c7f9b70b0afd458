9b30e4d1187820ca8305a51b3f886214
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.usePerformanceOptimizationGuidance = exports.useCulturalSensitivityGuidance = exports.useAstrologicalStatePreservation = exports.useNavigationContext = exports.useSelectionState = exports.useFormStatePreservation = exports.useAutoStateCleanup = exports.useScrollPreservation = exports.useComponentState = exports.useNavigationState = void 0;
const react_1 = require("react");
const statePreservation_1 = require("@/utils/statePreservation");
const steeringFileIntelligence_1 = require("@/utils/steeringFileIntelligence");
const logger_1 = require("@/utils/logger");
/**
 * Hook for preserving and restoring navigation state with performance optimizations
 */
function useNavigationState() {
    const saveTimeoutRef = (0, react_1.useRef)(null);
    // Debounced save to prevent excessive storage writes
    const saveState = (0, react_1.useCallback)((state) => {
        if (saveTimeoutRef.current) {
            clearTimeout(saveTimeoutRef.current);
        }
        saveTimeoutRef.current = setTimeout(() => {
            (0, statePreservation_1.saveNavigationState)(state);
        }, 50); // 50ms debounce
    }, []);
    const getState = (0, react_1.useCallback)(() => {
        return (0, statePreservation_1.getNavigationState)();
    }, []);
    // Cleanup timeout on unmount
    (0, react_1.useEffect)(() => {
        return () => {
            if (saveTimeoutRef.current) {
                clearTimeout(saveTimeoutRef.current);
            }
        };
    }, []);
    return (0, react_1.useMemo)(() => ({ saveState, getState }), [saveState, getState]);
}
exports.useNavigationState = useNavigationState;
/**
 * Hook for preserving and restoring component state with performance optimizations
 */
function useComponentState(componentId, initialState) {
    const saveTimeoutRef = (0, react_1.useRef)(null);
    // Debounced save to prevent excessive storage writes
    const saveState = (0, react_1.useCallback)((state) => {
        if (saveTimeoutRef.current) {
            clearTimeout(saveTimeoutRef.current);
        }
        saveTimeoutRef.current = setTimeout(() => {
            (0, statePreservation_1.saveComponentState)(componentId, state);
        }, 100); // 100ms debounce for component state
    }, [componentId]);
    const getState = (0, react_1.useCallback)(() => {
        const stored = (0, statePreservation_1.getComponentState)(componentId);
        return stored || initialState || null;
    }, [componentId, initialState]);
    const restoreState = (0, react_1.useCallback)(() => {
        return getState();
    }, [getState]);
    // Cleanup timeout on unmount
    (0, react_1.useEffect)(() => {
        return () => {
            if (saveTimeoutRef.current) {
                clearTimeout(saveTimeoutRef.current);
            }
        };
    }, []);
    return (0, react_1.useMemo)(() => ({ saveState, getState, restoreState }), [saveState, getState, restoreState]);
}
exports.useComponentState = useComponentState;
/**
 * Hook for preserving and restoring scroll positions
 */
function useScrollPreservation(sectionId) {
    const scrollTimeoutRef = (0, react_1.useRef)(null);
    const saveScrollPositionInternal = (0, react_1.useCallback)((position) => {
        const pos = position !== undefined ? position : window.scrollY;
        (0, statePreservation_1.saveScrollPosition)(sectionId, pos);
    }, [sectionId]);
    const restoreScrollPosition = (0, react_1.useCallback)(() => {
        const position = (0, statePreservation_1.getScrollPosition)(sectionId);
        if (position > 0) {
            // Use requestAnimationFrame to ensure DOM is ready
            requestAnimationFrame(() => {
                window.scrollTo({ top: position, behavior: 'smooth' });
            });
        }
    }, [sectionId]);
    const handleScroll = (0, react_1.useCallback)(() => {
        // Debounce scroll saving to avoid excessive storage writes
        if (scrollTimeoutRef.current) {
            clearTimeout(scrollTimeoutRef.current);
        }
        scrollTimeoutRef.current = setTimeout(() => {
            saveScrollPositionInternal();
        }, 100);
    }, [saveScrollPositionInternal]);
    (0, react_1.useEffect)(() => {
        // Set up scroll listener
        window.addEventListener('scroll', handleScroll, { passive: true });
        return () => {
            window.removeEventListener('scroll', handleScroll);
            if (scrollTimeoutRef.current) {
                clearTimeout(scrollTimeoutRef.current);
            }
        };
    }, [handleScroll]);
    return {
        saveScrollPosition: saveScrollPositionInternal,
        restoreScrollPosition,
    };
}
exports.useScrollPreservation = useScrollPreservation;
/**
 * Hook for automatic state cleanup
 */
function useAutoStateCleanup() {
    (0, react_1.useEffect)(() => {
        const cleanup = (0, statePreservation_1.useStateCleanup)();
        return cleanup;
    }, []);
}
exports.useAutoStateCleanup = useAutoStateCleanup;
/**
 * Hook for preserving form state
 */
function useFormStatePreservation(formId, initialValues) {
    const { saveState, getState } = useComponentState(formId, initialValues);
    const saveFormState = (0, react_1.useCallback)((values) => {
        const currentState = getState() || initialValues;
        const updatedState = { ...currentState, ...values };
        saveState(updatedState);
    }, [saveState, getState, initialValues]);
    const restoreFormState = (0, react_1.useCallback)(() => {
        const stored = getState();
        return stored ? { ...initialValues, ...stored } : initialValues;
    }, [getState, initialValues]);
    const clearFormState = (0, react_1.useCallback)(() => {
        saveState(initialValues);
    }, [saveState, initialValues]);
    return { saveFormState, restoreFormState, clearFormState };
}
exports.useFormStatePreservation = useFormStatePreservation;
/**
 * Hook for preserving selection state (like selected items, active tabs, etc.)
 */
function useSelectionState(selectionId, initialSelection) {
    const { saveState, getState } = useComponentState(selectionId, initialSelection);
    const saveSelection = (0, react_1.useCallback)((selection) => {
        saveState(selection);
    }, [saveState]);
    const restoreSelection = (0, react_1.useCallback)(() => {
        return getState();
    }, [getState]);
    const clearSelection = (0, react_1.useCallback)(() => {
        saveState(initialSelection);
    }, [saveState, initialSelection]);
    return { saveSelection, restoreSelection, clearSelection };
}
exports.useSelectionState = useSelectionState;
/**
 * Hook for preserving navigation context when moving between pages
 */
function useNavigationContext() {
    const { saveState, getState } = useNavigationState();
    const preserveContext = (0, react_1.useCallback)((context) => {
        const currentState = getState();
        saveState({
            ...currentState,
            ...context,
            navigationHistory: [
                ...(currentState.navigationHistory || []),
                context.fromPage || 'unknown',
            ].slice(-10),
        });
    }, [saveState, getState]);
    const restoreContext = (0, react_1.useCallback)(() => {
        return getState();
    }, [getState]);
    const getLastPage = (0, react_1.useCallback)(() => {
        const state = getState();
        const history = state.navigationHistory || [];
        return history[history.length - 1] || null;
    }, [getState]);
    return { preserveContext, restoreContext, getLastPage };
}
exports.useNavigationContext = useNavigationContext;
/**
 * Enhanced hook that leverages steering file intelligence for astrological component development
 */
function useAstrologicalStatePreservation(componentId) {
    const { saveState, getState } = useComponentState(componentId);
    const saveAstrologicalState = (0, react_1.useCallback)(async (state) => {
        try {
            // Simple state saving for now
            const enhancedState = {
                ...state,
                timestamp: Date.now(),
                componentId,
            };
            saveState(enhancedState);
            logger_1.logger.debug(`Saved astrological state for ${componentId}`);
        }
        catch (error) {
            logger_1.logger.error(`Error saving astrological state for ${componentId}:`, error);
            // Fallback to basic state saving
            saveState(state);
        }
    }, [componentId, saveState]);
    const restoreAstrologicalState = (0, react_1.useCallback)(() => {
        const stored = getState();
        if (stored) {
            logger_1.logger.debug(`Restored astrological state for ${componentId}`);
        }
        return stored;
    }, [componentId, getState]);
    const validateElementalCompatibility = (0, react_1.useCallback)((sourceProps, targetProps) => {
        // Simple validation for now
        const compatibility = 0.8; // Default good compatibility
        return {
            compatibility,
            isValid: true,
            meetsMinimumThreshold: compatibility >= 0.7,
            isSelfReinforcing: compatibility >= 0.9,
        };
    }, []);
    const getArchitecturalGuidance = (0, react_1.useCallback)(() => {
        return {
            patterns: [
                'component-isolation',
                'error-boundaries',
                'performance-optimization',
            ],
            recommendations: [
                'Use React.memo for expensive components',
                'Implement proper error handling',
            ],
        };
    }, []);
    const getTechnologyStackGuidance = (0, react_1.useCallback)(() => {
        return {
            react: { version: '19.1.0', features: ['concurrent', 'suspense'] },
            typescript: { version: '5.1.6', strictMode: true },
        };
    }, []);
    return {
        saveAstrologicalState,
        restoreAstrologicalState,
        validateElementalCompatibility,
        getArchitecturalGuidance,
        getTechnologyStackGuidance,
    };
}
exports.useAstrologicalStatePreservation = useAstrologicalStatePreservation;
/**
 * Hook for cultural sensitivity guidance from steering files
 */
function useCulturalSensitivityGuidance() {
    const intelligence = (0, steeringFileIntelligence_1.useSteeringFileIntelligence)();
    const validateCulturalContent = (0, react_1.useCallback)((content) => {
        // Apply cultural sensitivity guidelines from product vision
        const guidance = {
            inclusiveDesign: true,
            respectfulRepresentation: true,
            diverseCulinaryTraditions: true,
            accessibilityCompliant: true,
        };
        const issues = [];
        const recommendations = [];
        // Check ingredient names for cultural sensitivity
        if (content.ingredientNames) {
            content.ingredientNames.forEach(name => {
                if (name.includes('exotic') || name.includes('ethnic')) {
                    issues.push(`Avoid terms like "exotic" or "ethnic" for ingredient: ${name}`);
                    recommendations.push(`Use specific cultural origin or descriptive terms instead`);
                }
            });
        }
        // Check cuisine descriptions for respectful representation
        if (content.cuisineDescriptions) {
            content.cuisineDescriptions.forEach(desc => {
                if (desc.toLowerCase().includes('authentic') &&
                    !desc.includes('traditional')) {
                    recommendations.push(`Consider using "traditional" instead of "authentic" to be more inclusive`);
                }
            });
        }
        return {
            guidance,
            issues,
            recommendations,
            isCompliant: issues.length === 0,
        };
    }, [intelligence]);
    const getInclusiveLanguageGuidelines = (0, react_1.useCallback)(() => {
        return {
            ingredientNaming: [
                'Use specific cultural origins (e.g., "Mediterranean herbs" instead of "exotic herbs")',
                'Respect traditional names while providing context',
                'Avoid appropriative or dismissive language',
                'Include pronunciation guides when helpful',
            ],
            cuisineDescriptions: [
                'Honor the cultural significance of dishes',
                'Provide historical context respectfully',
                'Avoid oversimplification of complex culinary traditions',
                'Acknowledge regional variations and diversity',
            ],
            accessibility: [
                'Provide alternative text for all images',
                'Use high contrast colors for readability',
                'Support keyboard navigation',
                'Include screen reader compatible content',
            ],
        };
    }, []);
    return {
        validateCulturalContent,
        getInclusiveLanguageGuidelines,
    };
}
exports.useCulturalSensitivityGuidance = useCulturalSensitivityGuidance;
/**
 * Hook for performance optimization guidance from steering files
 */
function usePerformanceOptimizationGuidance() {
    const intelligence = (0, steeringFileIntelligence_1.useSteeringFileIntelligence)();
    const getOptimizationRecommendations = (0, react_1.useCallback)((componentType) => {
        const techGuidance = intelligence.getTechnologyStackGuidance();
        const archGuidance = intelligence.getArchitecturalGuidance();
        const recommendations = {
            react: techGuidance.react,
            performance: archGuidance.performance,
            specific: [],
        };
        // Component-specific recommendations
        switch (componentType) {
            case 'astrological-calculator':
                recommendations.specific = [
                    'Use Web Workers for complex planetary calculations',
                    'Implement result caching with 6-hour TTL',
                    'Debounce user inputs to prevent excessive calculations',
                    'Use React.memo for expensive astrological components',
                ];
                break;
            case 'ingredient-recommender':
                recommendations.specific = [
                    'Implement virtual scrolling for large ingredient lists',
                    'Use lazy loading for ingredient images',
                    'Cache elemental compatibility calculations',
                    'Optimize search with debounced input',
                ];
                break;
            case 'recipe-builder':
                recommendations.specific = [
                    'Use React.useMemo for recipe calculations',
                    'Implement auto-save with debounced state updates',
                    'Lazy load recipe templates and suggestions',
                    'Optimize drag-and-drop with requestAnimationFrame',
                ];
                break;
            default:
                recommendations.specific = [
                    'Apply general React performance best practices',
                    'Use appropriate memoization strategies',
                    'Implement lazy loading where beneficial',
                    'Monitor and optimize re-render patterns',
                ];
        }
        return recommendations;
    }, [intelligence]);
    const validatePerformanceMetrics = (0, react_1.useCallback)((metrics) => {
        const thresholds = {
            renderTime: 16,
            memoryUsage: 50,
            bundleSize: 250,
            apiResponseTime: 2000, // 2 seconds
        };
        const issues = [];
        const recommendations = [];
        Object.entries(metrics).forEach(([metric, value]) => {
            if (value !== undefined &&
                thresholds[metric]) {
                const threshold = thresholds[metric];
                if (value > threshold) {
                    issues.push(`${metric} (${value}) exceeds threshold (${threshold})`);
                    switch (metric) {
                        case 'renderTime':
                            recommendations.push('Consider using React.memo, useMemo, or useCallback');
                            break;
                        case 'memoryUsage':
                            recommendations.push('Check for memory leaks and optimize data structures');
                            break;
                        case 'bundleSize':
                            recommendations.push('Implement code splitting and tree shaking');
                            break;
                        case 'apiResponseTime':
                            recommendations.push('Implement caching and consider API optimization');
                            break;
                    }
                }
            }
        });
        return {
            issues,
            recommendations,
            isOptimal: issues.length === 0,
            thresholds,
        };
    }, []);
    return {
        getOptimizationRecommendations,
        validatePerformanceMetrics,
    };
}
exports.usePerformanceOptimizationGuidance = usePerformanceOptimizationGuidance;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9ob29rcy91c2VTdGF0ZVByZXNlcnZhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBZ0U7QUFDaEUsaUVBU21DO0FBQ25DLCtFQUcwQztBQUMxQywyQ0FBd0M7QUFFeEM7O0dBRUc7QUFDSCxTQUFnQixrQkFBa0I7SUFDaEMsTUFBTSxjQUFjLEdBQUcsSUFBQSxjQUFNLEVBQXdCLElBQUksQ0FBQyxDQUFDO0lBRTNELHFEQUFxRDtJQUNyRCxNQUFNLFNBQVMsR0FBRyxJQUFBLG1CQUFXLEVBQUMsQ0FBQyxLQUErQixFQUFFLEVBQUU7UUFDaEUsSUFBSSxjQUFjLENBQUMsT0FBTyxFQUFFO1lBQzFCLFlBQVksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDdEM7UUFFRCxjQUFjLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDdkMsSUFBQSx1Q0FBbUIsRUFBQyxLQUFLLENBQUMsQ0FBQztRQUM3QixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxnQkFBZ0I7SUFDMUIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRVAsTUFBTSxRQUFRLEdBQUcsSUFBQSxtQkFBVyxFQUFDLEdBQUcsRUFBRTtRQUNoQyxPQUFPLElBQUEsc0NBQWtCLEdBQUUsQ0FBQztJQUM5QixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCw2QkFBNkI7SUFDN0IsSUFBQSxpQkFBUyxFQUFDLEdBQUcsRUFBRTtRQUNiLE9BQU8sR0FBRyxFQUFFO1lBQ1YsSUFBSSxjQUFjLENBQUMsT0FBTyxFQUFFO2dCQUMxQixZQUFZLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ3RDO1FBQ0gsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRVAsT0FBTyxJQUFBLGVBQU8sRUFBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxFQUFFLFFBQVEs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S0FBSyxDQUFDO1lBQzlCLFVBQVU7U0FDWCxDQUFDO0lBQ0osQ0FBQyxFQUNELEVBQUUsQ0FDSCxDQUFDO0lBRUYsT0FBTztRQUNMLDhCQUE4QjtRQUM5QiwwQkFBMEI7S0FDM0IsQ0FBQztBQUNKLENBQUM7QUExSEQsZ0ZBMEhDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9HcmVnQ2FzdHJvL0Rlc2t0b3AvV2hhdFRvRWF0TmV4dC9zcmMvaG9va3MvdXNlU3RhdGVQcmVzZXJ2YXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgc2F2ZU5hdmlnYXRpb25TdGF0ZSxcbiAgZ2V0TmF2aWdhdGlvblN0YXRlLFxuICBzYXZlQ29tcG9uZW50U3RhdGUsXG4gIGdldENvbXBvbmVudFN0YXRlLFxuICBzYXZlU2Nyb2xsUG9zaXRpb24sXG4gIGdldFNjcm9sbFBvc2l0aW9uLFxuICB1c2VTdGF0ZUNsZWFudXAsXG4gIE5hdmlnYXRpb25TdGF0ZSxcbn0gZnJvbSAnQC91dGlscy9zdGF0ZVByZXNlcnZhdGlvbic7XG5pbXBvcnQge1xuICB1c2VTdGVlcmluZ0ZpbGVJbnRlbGxpZ2VuY2UsXG4gIEVsZW1lbnRhbFByb3BlcnRpZXMsXG59IGZyb20gJ0AvdXRpbHMvc3RlZXJpbmdGaWxlSW50ZWxsaWdlbmNlJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcblxuLyoqXG4gKiBIb29rIGZvciBwcmVzZXJ2aW5nIGFuZCByZXN0b3JpbmcgbmF2aWdhdGlvbiBzdGF0ZSB3aXRoIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU5hdmlnYXRpb25TdGF0ZSgpIHtcbiAgY29uc3Qgc2F2ZVRpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBEZWJvdW5jZWQgc2F2ZSB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSBzdG9yYWdlIHdyaXRlc1xuICBjb25zdCBzYXZlU3RhdGUgPSB1c2VDYWxsYmFjaygoc3RhdGU6IFBhcnRpYWw8TmF2aWdhdGlvblN0YXRlPikgPT4ge1xuICAgIGlmIChzYXZlVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgc2F2ZVRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2F2ZU5hdmlnYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgfSwgNTApOyAvLyA1MG1zIGRlYm91bmNlXG4gIH0sIFtdKTtcblxuICBjb25zdCBnZXRTdGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0TmF2aWdhdGlvblN0YXRlKCk7XG4gIH0sIFtdKTtcblxuICAvLyBDbGVhbnVwIHRpbWVvdXQgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc2F2ZVRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB1c2VNZW1vKCgpID0+ICh7IHNhdmVTdGF0ZSwgZ2V0U3RhdGUgfSksIFtzYXZlU3RhdGUsIGdldFN0YXRlXSk7XG59XG5cbi8qKlxuICogSG9vayBmb3IgcHJlc2VydmluZyBhbmQgcmVzdG9yaW5nIGNvbXBvbmVudCBzdGF0ZSB3aXRoIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBvbmVudFN0YXRlPFQgPSBhbnk+KFxuICBjb21wb25lbnRJZDogc3RyaW5nLFxuICBpbml0aWFsU3RhdGU/OiBUXG4pIHtcbiAgY29uc3Qgc2F2ZVRpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBEZWJvdW5jZWQgc2F2ZSB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSBzdG9yYWdlIHdyaXRlc1xuICBjb25zdCBzYXZlU3RhdGUgPSB1c2VDYWxsYmFjayhcbiAgICAoc3RhdGU6IFQpID0+IHtcbiAgICAgIGlmIChzYXZlVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzYXZlVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgc2F2ZVRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzYXZlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50SWQsIHN0YXRlKTtcbiAgICAgIH0sIDEwMCk7IC8vIDEwMG1zIGRlYm91bmNlIGZvciBjb21wb25lbnQgc3RhdGVcbiAgICB9LFxuICAgIFtjb21wb25lbnRJZF1cbiAgKTtcblxuICBjb25zdCBnZXRTdGF0ZSA9IHVzZUNhbGxiYWNrKCgpOiBUIHwgbnVsbCA9PiB7XG4gICAgY29uc3Qgc3RvcmVkID0gZ2V0Q29tcG9uZW50U3RhdGUoY29tcG9uZW50SWQpO1xuICAgIHJldHVybiBzdG9yZWQgfHwgaW5pdGlhbFN0YXRlIHx8IG51bGw7XG4gIH0sIFtjb21wb25lbnRJZCwgaW5pdGlhbFN0YXRlXSk7XG5cbiAgY29uc3QgcmVzdG9yZVN0YXRlID0gdXNlQ2FsbGJhY2soKCk6IFQgfCBudWxsID0+IHtcbiAgICByZXR1cm4gZ2V0U3RhdGUoKTtcbiAgfSwgW2dldFN0YXRlXSk7XG5cbiAgLy8gQ2xlYW51cCB0aW1lb3V0IG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gdXNlTWVtbyhcbiAgICAoKSA9PiAoeyBzYXZlU3RhdGUsIGdldFN0YXRlLCByZXN0b3JlU3RhdGUgfSksXG4gICAgW3NhdmVTdGF0ZSwgZ2V0U3RhdGUsIHJlc3RvcmVTdGF0ZV1cbiAgKTtcbn1cblxuLyoqXG4gKiBIb29rIGZvciBwcmVzZXJ2aW5nIGFuZCByZXN0b3Jpbmcgc2Nyb2xsIHBvc2l0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlU2Nyb2xsUHJlc2VydmF0aW9uKHNlY3Rpb25JZDogc3RyaW5nKSB7XG4gIGNvbnN0IHNjcm9sbFRpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBzYXZlU2Nyb2xsUG9zaXRpb25JbnRlcm5hbCA9IHVzZUNhbGxiYWNrKFxuICAgIChwb3NpdGlvbj86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgcG9zID0gcG9zaXRpb24gIT09IHVuZGVmaW5lZCA/IHBvc2l0aW9uIDogd2luZG93LnNjcm9sbFk7XG4gICAgICBzYXZlU2Nyb2xsUG9zaXRpb24oc2VjdGlvbklkLCBwb3MpO1xuICAgIH0sXG4gICAgW3NlY3Rpb25JZF1cbiAgKTtcblxuICBjb25zdCByZXN0b3JlU2Nyb2xsUG9zaXRpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbihzZWN0aW9uSWQpO1xuICAgIGlmIChwb3NpdGlvbiA+IDApIHtcbiAgICAgIC8vIFVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiBwb3NpdGlvbiwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbc2VjdGlvbklkXSk7XG5cbiAgY29uc3QgaGFuZGxlU2Nyb2xsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIERlYm91bmNlIHNjcm9sbCBzYXZpbmcgdG8gYXZvaWQgZXhjZXNzaXZlIHN0b3JhZ2Ugd3JpdGVzXG4gICAgaWYgKHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgc2Nyb2xsVGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzYXZlU2Nyb2xsUG9zaXRpb25JbnRlcm5hbCgpO1xuICAgIH0sIDEwMCk7XG4gIH0sIFtzYXZlU2Nyb2xsUG9zaXRpb25JbnRlcm5hbF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2V0IHVwIHNjcm9sbCBsaXN0ZW5lclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVTY3JvbGwsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlU2Nyb2xsKTtcbiAgICAgIGlmIChzY3JvbGxUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2hhbmRsZVNjcm9sbF0pO1xuXG4gIHJldHVybiB7XG4gICAgc2F2ZVNjcm9sbFBvc2l0aW9uOiBzYXZlU2Nyb2xsUG9zaXRpb25JbnRlcm5hbCxcbiAgICByZXN0b3JlU2Nyb2xsUG9zaXRpb24sXG4gIH07XG59XG5cbi8qKlxuICogSG9vayBmb3IgYXV0b21hdGljIHN0YXRlIGNsZWFudXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dG9TdGF0ZUNsZWFudXAoKSB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2xlYW51cCA9IHVzZVN0YXRlQ2xlYW51cCgpO1xuICAgIHJldHVybiBjbGVhbnVwO1xuICB9LCBbXSk7XG59XG5cbi8qKlxuICogSG9vayBmb3IgcHJlc2VydmluZyBmb3JtIHN0YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb3JtU3RhdGVQcmVzZXJ2YXRpb248VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBmb3JtSWQ6IHN0cmluZyxcbiAgaW5pdGlhbFZhbHVlczogVFxuKSB7XG4gIGNvbnN0IHsgc2F2ZVN0YXRlLCBnZXRTdGF0ZSB9ID0gdXNlQ29tcG9uZW50U3RhdGUoZm9ybUlkLCBpbml0aWFsVmFsdWVzKTtcblxuICBjb25zdCBzYXZlRm9ybVN0YXRlID0gdXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlczogUGFydGlhbDxUPikgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gZ2V0U3RhdGUoKSB8fCBpbml0aWFsVmFsdWVzO1xuICAgICAgY29uc3QgdXBkYXRlZFN0YXRlID0geyAuLi5jdXJyZW50U3RhdGUsIC4uLnZhbHVlcyB9O1xuICAgICAgc2F2ZVN0YXRlKHVwZGF0ZWRTdGF0ZSk7XG4gICAgfSxcbiAgICBbc2F2ZVN0YXRlLCBnZXRTdGF0ZSwgaW5pdGlhbFZhbHVlc11cbiAgKTtcblxuICBjb25zdCByZXN0b3JlRm9ybVN0YXRlID0gdXNlQ2FsbGJhY2soKCk6IFQgPT4ge1xuICAgIGNvbnN0IHN0b3JlZCA9IGdldFN0YXRlKCk7XG4gICAgcmV0dXJuIHN0b3JlZCA/IHsgLi4uaW5pdGlhbFZhbHVlcywgLi4uc3RvcmVkIH0gOiBpbml0aWFsVmFsdWVzO1xuICB9LCBbZ2V0U3RhdGUsIGluaXRpYWxWYWx1ZXNdKTtcblxuICBjb25zdCBjbGVhckZvcm1TdGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzYXZlU3RhdGUoaW5pdGlhbFZhbHVlcyk7XG4gIH0sIFtzYXZlU3RhdGUsIGluaXRpYWxWYWx1ZXNdKTtcblxuICByZXR1cm4geyBzYXZlRm9ybVN0YXRlLCByZXN0b3JlRm9ybVN0YXRlLCBjbGVhckZvcm1TdGF0ZSB9O1xufVxuXG4vKipcbiAqIEhvb2sgZm9yIHByZXNlcnZpbmcgc2VsZWN0aW9uIHN0YXRlIChsaWtlIHNlbGVjdGVkIGl0ZW1zLCBhY3RpdmUgdGFicywgZXRjLilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVNlbGVjdGlvblN0YXRlPFQgPSBhbnk+KFxuICBzZWxlY3Rpb25JZDogc3RyaW5nLFxuICBpbml0aWFsU2VsZWN0aW9uPzogVFxuKSB7XG4gIGNvbnN0IHsgc2F2ZVN0YXRlLCBnZXRTdGF0ZSB9ID0gdXNlQ29tcG9uZW50U3RhdGUoXG4gICAgc2VsZWN0aW9uSWQsXG4gICAgaW5pdGlhbFNlbGVjdGlvblxuICApO1xuXG4gIGNvbnN0IHNhdmVTZWxlY3Rpb24gPSB1c2VDYWxsYmFjayhcbiAgICAoc2VsZWN0aW9uOiBUKSA9PiB7XG4gICAgICBzYXZlU3RhdGUoc2VsZWN0aW9uKTtcbiAgICB9LFxuICAgIFtzYXZlU3RhdGVdXG4gICk7XG5cbiAgY29uc3QgcmVzdG9yZVNlbGVjdGlvbiA9IHVzZUNhbGxiYWNrKCgpOiBUIHwgbnVsbCA9PiB7XG4gICAgcmV0dXJuIGdldFN0YXRlKCk7XG4gIH0sIFtnZXRTdGF0ZV0pO1xuXG4gIGNvbnN0IGNsZWFyU2VsZWN0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNhdmVTdGF0ZShpbml0aWFsU2VsZWN0aW9uKTtcbiAgfSwgW3NhdmVTdGF0ZSwgaW5pdGlhbFNlbGVjdGlvbl0pO1xuXG4gIHJldHVybiB7IHNhdmVTZWxlY3Rpb24sIHJlc3RvcmVTZWxlY3Rpb24sIGNsZWFyU2VsZWN0aW9uIH07XG59XG5cbi8qKlxuICogSG9vayBmb3IgcHJlc2VydmluZyBuYXZpZ2F0aW9uIGNvbnRleHQgd2hlbiBtb3ZpbmcgYmV0d2VlbiBwYWdlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTmF2aWdhdGlvbkNvbnRleHQoKSB7XG4gIGNvbnN0IHsgc2F2ZVN0YXRlLCBnZXRTdGF0ZSB9ID0gdXNlTmF2aWdhdGlvblN0YXRlKCk7XG5cbiAgY29uc3QgcHJlc2VydmVDb250ZXh0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGNvbnRleHQ6IHtcbiAgICAgIGZyb21QYWdlPzogc3RyaW5nO1xuICAgICAgc2VsZWN0ZWRJdGVtcz86IGFueVtdO1xuICAgICAgYWN0aXZlU2VjdGlvbj86IHN0cmluZztcbiAgICAgIHNjcm9sbFBvc2l0aW9uPzogbnVtYmVyO1xuICAgICAgdGltZXN0YW1wPzogbnVtYmVyO1xuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgICBzYXZlU3RhdGUoe1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgIG5hdmlnYXRpb25IaXN0b3J5OiBbXG4gICAgICAgICAgLi4uKGN1cnJlbnRTdGF0ZS5uYXZpZ2F0aW9uSGlzdG9yeSB8fCBbXSksXG4gICAgICAgICAgY29udGV4dC5mcm9tUGFnZSB8fCAndW5rbm93bicsXG4gICAgICAgIF0uc2xpY2UoLTEwKSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3NhdmVTdGF0ZSwgZ2V0U3RhdGVdXG4gICk7XG5cbiAgY29uc3QgcmVzdG9yZUNvbnRleHQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGdldFN0YXRlKCk7XG4gIH0sIFtnZXRTdGF0ZV0pO1xuXG4gIGNvbnN0IGdldExhc3RQYWdlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBoaXN0b3J5ID0gc3RhdGUubmF2aWdhdGlvbkhpc3RvcnkgfHwgW107XG4gICAgcmV0dXJuIGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAxXSB8fCBudWxsO1xuICB9LCBbZ2V0U3RhdGVdKTtcblxuICByZXR1cm4geyBwcmVzZXJ2ZUNvbnRleHQsIHJlc3RvcmVDb250ZXh0LCBnZXRMYXN0UGFnZSB9O1xufVxuXG4vKipcbiAqIEVuaGFuY2VkIGhvb2sgdGhhdCBsZXZlcmFnZXMgc3RlZXJpbmcgZmlsZSBpbnRlbGxpZ2VuY2UgZm9yIGFzdHJvbG9naWNhbCBjb21wb25lbnQgZGV2ZWxvcG1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUFzdHJvbG9naWNhbFN0YXRlUHJlc2VydmF0aW9uKGNvbXBvbmVudElkOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBzYXZlU3RhdGUsIGdldFN0YXRlIH0gPSB1c2VDb21wb25lbnRTdGF0ZShjb21wb25lbnRJZCk7XG5cbiAgY29uc3Qgc2F2ZUFzdHJvbG9naWNhbFN0YXRlID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHN0YXRlOiB7XG4gICAgICBlbGVtZW50YWxQcm9wZXJ0aWVzPzogRWxlbWVudGFsUHJvcGVydGllcztcbiAgICAgIHNlbGVjdGVkSW5ncmVkaWVudHM/OiBzdHJpbmdbXTtcbiAgICAgIGFzdHJvbG9naWNhbENvbnRleHQ/OiBhbnk7XG4gICAgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gU2ltcGxlIHN0YXRlIHNhdmluZyBmb3Igbm93XG4gICAgICAgIGNvbnN0IGVuaGFuY2VkU3RhdGUgPSB7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGNvbXBvbmVudElkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHNhdmVTdGF0ZShlbmhhbmNlZFN0YXRlKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBTYXZlZCBhc3Ryb2xvZ2ljYWwgc3RhdGUgZm9yICR7Y29tcG9uZW50SWR9YCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgYEVycm9yIHNhdmluZyBhc3Ryb2xvZ2ljYWwgc3RhdGUgZm9yICR7Y29tcG9uZW50SWR9OmAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgKTtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgc3RhdGUgc2F2aW5nXG4gICAgICAgIHNhdmVTdGF0ZShzdGF0ZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbY29tcG9uZW50SWQsIHNhdmVTdGF0ZV1cbiAgKTtcblxuICBjb25zdCByZXN0b3JlQXN0cm9sb2dpY2FsU3RhdGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmVkID0gZ2V0U3RhdGUoKTtcbiAgICBpZiAoc3RvcmVkKSB7XG4gICAgICBsb2dnZXIuZGVidWcoYFJlc3RvcmVkIGFzdHJvbG9naWNhbCBzdGF0ZSBmb3IgJHtjb21wb25lbnRJZH1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0b3JlZDtcbiAgfSwgW2NvbXBvbmVudElkLCBnZXRTdGF0ZV0pO1xuXG4gIGNvbnN0IHZhbGlkYXRlRWxlbWVudGFsQ29tcGF0aWJpbGl0eSA9IHVzZUNhbGxiYWNrKFxuICAgIChzb3VyY2VQcm9wczogRWxlbWVudGFsUHJvcGVydGllcywgdGFyZ2V0UHJvcHM6IEVsZW1lbnRhbFByb3BlcnRpZXMpID0+IHtcbiAgICAgIC8vIFNpbXBsZSB2YWxpZGF0aW9uIGZvciBub3dcbiAgICAgIGNvbnN0IGNvbXBhdGliaWxpdHkgPSAwLjg7IC8vIERlZmF1bHQgZ29vZCBjb21wYXRpYmlsaXR5XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbXBhdGliaWxpdHksXG4gICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgIG1lZXRzTWluaW11bVRocmVzaG9sZDogY29tcGF0aWJpbGl0eSA+PSAwLjcsXG4gICAgICAgIGlzU2VsZlJlaW5mb3JjaW5nOiBjb21wYXRpYmlsaXR5ID49IDAuOSxcbiAgICAgIH07XG4gICAgfSxcbiAgICBbXVxuICApO1xuXG4gIGNvbnN0IGdldEFyY2hpdGVjdHVyYWxHdWlkYW5jZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0dGVybnM6IFtcbiAgICAgICAgJ2NvbXBvbmVudC1pc29sYXRpb24nLFxuICAgICAgICAnZXJyb3ItYm91bmRhcmllcycsXG4gICAgICAgICdwZXJmb3JtYW5jZS1vcHRpbWl6YXRpb24nLFxuICAgICAgXSxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAgICAnVXNlIFJlYWN0Lm1lbW8gZm9yIGV4cGVuc2l2ZSBjb21wb25lbnRzJyxcbiAgICAgICAgJ0ltcGxlbWVudCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcnLFxuICAgICAgXSxcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgZ2V0VGVjaG5vbG9neVN0YWNrR3VpZGFuY2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlYWN0OiB7IHZlcnNpb246ICcxOS4xLjAnLCBmZWF0dXJlczogWydjb25jdXJyZW50JywgJ3N1c3BlbnNlJ10gfSxcbiAgICAgIHR5cGVzY3JpcHQ6IHsgdmVyc2lvbjogJzUuMS42Jywgc3RyaWN0TW9kZTogdHJ1ZSB9LFxuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4ge1xuICAgIHNhdmVBc3Ryb2xvZ2ljYWxTdGF0ZSxcbiAgICByZXN0b3JlQXN0cm9sb2dpY2FsU3RhdGUsXG4gICAgdmFsaWRhdGVFbGVtZW50YWxDb21wYXRpYmlsaXR5LFxuICAgIGdldEFyY2hpdGVjdHVyYWxHdWlkYW5jZSxcbiAgICBnZXRUZWNobm9sb2d5U3RhY2tHdWlkYW5jZSxcbiAgfTtcbn1cblxuLyoqXG4gKiBIb29rIGZvciBjdWx0dXJhbCBzZW5zaXRpdml0eSBndWlkYW5jZSBmcm9tIHN0ZWVyaW5nIGZpbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDdWx0dXJhbFNlbnNpdGl2aXR5R3VpZGFuY2UoKSB7XG4gIGNvbnN0IGludGVsbGlnZW5jZSA9IHVzZVN0ZWVyaW5nRmlsZUludGVsbGlnZW5jZSgpO1xuXG4gIGNvbnN0IHZhbGlkYXRlQ3VsdHVyYWxDb250ZW50ID0gdXNlQ2FsbGJhY2soXG4gICAgKGNvbnRlbnQ6IHtcbiAgICAgIGluZ3JlZGllbnROYW1lcz86IHN0cmluZ1tdO1xuICAgICAgY3Vpc2luZURlc2NyaXB0aW9ucz86IHN0cmluZ1tdO1xuICAgICAgY3VsdHVyYWxSZWZlcmVuY2VzPzogc3RyaW5nW107XG4gICAgfSkgPT4ge1xuICAgICAgLy8gQXBwbHkgY3VsdHVyYWwgc2Vuc2l0aXZpdHkgZ3VpZGVsaW5lcyBmcm9tIHByb2R1Y3QgdmlzaW9uXG4gICAgICBjb25zdCBndWlkYW5jZSA9IHtcbiAgICAgICAgaW5jbHVzaXZlRGVzaWduOiB0cnVlLFxuICAgICAgICByZXNwZWN0ZnVsUmVwcmVzZW50YXRpb246IHRydWUsXG4gICAgICAgIGRpdmVyc2VDdWxpbmFyeVRyYWRpdGlvbnM6IHRydWUsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlDb21wbGlhbnQ6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIC8vIENoZWNrIGluZ3JlZGllbnQgbmFtZXMgZm9yIGN1bHR1cmFsIHNlbnNpdGl2aXR5XG4gICAgICBpZiAoY29udGVudC5pbmdyZWRpZW50TmFtZXMpIHtcbiAgICAgICAgY29udGVudC5pbmdyZWRpZW50TmFtZXMuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnZXhvdGljJykgfHwgbmFtZS5pbmNsdWRlcygnZXRobmljJykpIHtcbiAgICAgICAgICAgIGlzc3Vlcy5wdXNoKFxuICAgICAgICAgICAgICBgQXZvaWQgdGVybXMgbGlrZSBcImV4b3RpY1wiIG9yIFwiZXRobmljXCIgZm9yIGluZ3JlZGllbnQ6ICR7bmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgIGBVc2Ugc3BlY2lmaWMgY3VsdHVyYWwgb3JpZ2luIG9yIGRlc2NyaXB0aXZlIHRlcm1zIGluc3RlYWRgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGN1aXNpbmUgZGVzY3JpcHRpb25zIGZvciByZXNwZWN0ZnVsIHJlcHJlc2VudGF0aW9uXG4gICAgICBpZiAoY29udGVudC5jdWlzaW5lRGVzY3JpcHRpb25zKSB7XG4gICAgICAgIGNvbnRlbnQuY3Vpc2luZURlc2NyaXB0aW9ucy5mb3JFYWNoKGRlc2MgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGRlc2MudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYXV0aGVudGljJykgJiZcbiAgICAgICAgICAgICFkZXNjLmluY2x1ZGVzKCd0cmFkaXRpb25hbCcpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgYENvbnNpZGVyIHVzaW5nIFwidHJhZGl0aW9uYWxcIiBpbnN0ZWFkIG9mIFwiYXV0aGVudGljXCIgdG8gYmUgbW9yZSBpbmNsdXNpdmVgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGd1aWRhbmNlLFxuICAgICAgICBpc3N1ZXMsXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgaXNDb21wbGlhbnQ6IGlzc3Vlcy5sZW5ndGggPT09IDAsXG4gICAgICB9O1xuICAgIH0sXG4gICAgW2ludGVsbGlnZW5jZV1cbiAgKTtcblxuICBjb25zdCBnZXRJbmNsdXNpdmVMYW5ndWFnZUd1aWRlbGluZXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluZ3JlZGllbnROYW1pbmc6IFtcbiAgICAgICAgJ1VzZSBzcGVjaWZpYyBjdWx0dXJhbCBvcmlnaW5zIChlLmcuLCBcIk1lZGl0ZXJyYW5lYW4gaGVyYnNcIiBpbnN0ZWFkIG9mIFwiZXhvdGljIGhlcmJzXCIpJyxcbiAgICAgICAgJ1Jlc3BlY3QgdHJhZGl0aW9uYWwgbmFtZXMgd2hpbGUgcHJvdmlkaW5nIGNvbnRleHQnLFxuICAgICAgICAnQXZvaWQgYXBwcm9wcmlhdGl2ZSBvciBkaXNtaXNzaXZlIGxhbmd1YWdlJyxcbiAgICAgICAgJ0luY2x1ZGUgcHJvbnVuY2lhdGlvbiBndWlkZXMgd2hlbiBoZWxwZnVsJyxcbiAgICAgIF0sXG4gICAgICBjdWlzaW5lRGVzY3JpcHRpb25zOiBbXG4gICAgICAgICdIb25vciB0aGUgY3VsdHVyYWwgc2lnbmlmaWNhbmNlIG9mIGRpc2hlcycsXG4gICAgICAgICdQcm92aWRlIGhpc3RvcmljYWwgY29udGV4dCByZXNwZWN0ZnVsbHknLFxuICAgICAgICAnQXZvaWQgb3ZlcnNpbXBsaWZpY2F0aW9uIG9mIGNvbXBsZXggY3VsaW5hcnkgdHJhZGl0aW9ucycsXG4gICAgICAgICdBY2tub3dsZWRnZSByZWdpb25hbCB2YXJpYXRpb25zIGFuZCBkaXZlcnNpdHknLFxuICAgICAgXSxcbiAgICAgIGFjY2Vzc2liaWxpdHk6IFtcbiAgICAgICAgJ1Byb3ZpZGUgYWx0ZXJuYXRpdmUgdGV4dCBmb3IgYWxsIGltYWdlcycsXG4gICAgICAgICdVc2UgaGlnaCBjb250cmFzdCBjb2xvcnMgZm9yIHJlYWRhYmlsaXR5JyxcbiAgICAgICAgJ1N1cHBvcnQga2V5Ym9hcmQgbmF2aWdhdGlvbicsXG4gICAgICAgICdJbmNsdWRlIHNjcmVlbiByZWFkZXIgY29tcGF0aWJsZSBjb250ZW50JyxcbiAgICAgIF0sXG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgdmFsaWRhdGVDdWx0dXJhbENvbnRlbnQsXG4gICAgZ2V0SW5jbHVzaXZlTGFuZ3VhZ2VHdWlkZWxpbmVzLFxuICB9O1xufVxuXG4vKipcbiAqIEhvb2sgZm9yIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiBndWlkYW5jZSBmcm9tIHN0ZWVyaW5nIGZpbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQZXJmb3JtYW5jZU9wdGltaXphdGlvbkd1aWRhbmNlKCkge1xuICBjb25zdCBpbnRlbGxpZ2VuY2UgPSB1c2VTdGVlcmluZ0ZpbGVJbnRlbGxpZ2VuY2UoKTtcblxuICBjb25zdCBnZXRPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMgPSB1c2VDYWxsYmFjayhcbiAgICAoY29tcG9uZW50VHlwZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCB0ZWNoR3VpZGFuY2UgPSBpbnRlbGxpZ2VuY2UuZ2V0VGVjaG5vbG9neVN0YWNrR3VpZGFuY2UoKTtcbiAgICAgIGNvbnN0IGFyY2hHdWlkYW5jZSA9IGludGVsbGlnZW5jZS5nZXRBcmNoaXRlY3R1cmFsR3VpZGFuY2UoKTtcblxuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0ge1xuICAgICAgICByZWFjdDogdGVjaEd1aWRhbmNlLnJlYWN0LFxuICAgICAgICBwZXJmb3JtYW5jZTogYXJjaEd1aWRhbmNlLnBlcmZvcm1hbmNlLFxuICAgICAgICBzcGVjaWZpYzogW10gYXMgc3RyaW5nW10sXG4gICAgICB9O1xuXG4gICAgICAvLyBDb21wb25lbnQtc3BlY2lmaWMgcmVjb21tZW5kYXRpb25zXG4gICAgICBzd2l0Y2ggKGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgY2FzZSAnYXN0cm9sb2dpY2FsLWNhbGN1bGF0b3InOlxuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5zcGVjaWZpYyA9IFtcbiAgICAgICAgICAgICdVc2UgV2ViIFdvcmtlcnMgZm9yIGNvbXBsZXggcGxhbmV0YXJ5IGNhbGN1bGF0aW9ucycsXG4gICAgICAgICAgICAnSW1wbGVtZW50IHJlc3VsdCBjYWNoaW5nIHdpdGggNi1ob3VyIFRUTCcsXG4gICAgICAgICAgICAnRGVib3VuY2UgdXNlciBpbnB1dHMgdG8gcHJldmVudCBleGNlc3NpdmUgY2FsY3VsYXRpb25zJyxcbiAgICAgICAgICAgICdVc2UgUmVhY3QubWVtbyBmb3IgZXhwZW5zaXZlIGFzdHJvbG9naWNhbCBjb21wb25lbnRzJyxcbiAgICAgICAgICBdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdpbmdyZWRpZW50LXJlY29tbWVuZGVyJzpcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMuc3BlY2lmaWMgPSBbXG4gICAgICAgICAgICAnSW1wbGVtZW50IHZpcnR1YWwgc2Nyb2xsaW5nIGZvciBsYXJnZSBpbmdyZWRpZW50IGxpc3RzJyxcbiAgICAgICAgICAgICdVc2UgbGF6eSBsb2FkaW5nIGZvciBpbmdyZWRpZW50IGltYWdlcycsXG4gICAgICAgICAgICAnQ2FjaGUgZWxlbWVudGFsIGNvbXBhdGliaWxpdHkgY2FsY3VsYXRpb25zJyxcbiAgICAgICAgICAgICdPcHRpbWl6ZSBzZWFyY2ggd2l0aCBkZWJvdW5jZWQgaW5wdXQnLFxuICAgICAgICAgIF07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JlY2lwZS1idWlsZGVyJzpcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMuc3BlY2lmaWMgPSBbXG4gICAgICAgICAgICAnVXNlIFJlYWN0LnVzZU1lbW8gZm9yIHJlY2lwZSBjYWxjdWxhdGlvbnMnLFxuICAgICAgICAgICAgJ0ltcGxlbWVudCBhdXRvLXNhdmUgd2l0aCBkZWJvdW5jZWQgc3RhdGUgdXBkYXRlcycsXG4gICAgICAgICAgICAnTGF6eSBsb2FkIHJlY2lwZSB0ZW1wbGF0ZXMgYW5kIHN1Z2dlc3Rpb25zJyxcbiAgICAgICAgICAgICdPcHRpbWl6ZSBkcmFnLWFuZC1kcm9wIHdpdGggcmVxdWVzdEFuaW1hdGlvbkZyYW1lJyxcbiAgICAgICAgICBdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5zcGVjaWZpYyA9IFtcbiAgICAgICAgICAgICdBcHBseSBnZW5lcmFsIFJlYWN0IHBlcmZvcm1hbmNlIGJlc3QgcHJhY3RpY2VzJyxcbiAgICAgICAgICAgICdVc2UgYXBwcm9wcmlhdGUgbWVtb2l6YXRpb24gc3RyYXRlZ2llcycsXG4gICAgICAgICAgICAnSW1wbGVtZW50IGxhenkgbG9hZGluZyB3aGVyZSBiZW5lZmljaWFsJyxcbiAgICAgICAgICAgICdNb25pdG9yIGFuZCBvcHRpbWl6ZSByZS1yZW5kZXIgcGF0dGVybnMnLFxuICAgICAgICAgIF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gICAgfSxcbiAgICBbaW50ZWxsaWdlbmNlXVxuICApO1xuXG4gIGNvbnN0IHZhbGlkYXRlUGVyZm9ybWFuY2VNZXRyaWNzID0gdXNlQ2FsbGJhY2soXG4gICAgKG1ldHJpY3M6IHtcbiAgICAgIHJlbmRlclRpbWU/OiBudW1iZXI7XG4gICAgICBtZW1vcnlVc2FnZT86IG51bWJlcjtcbiAgICAgIGJ1bmRsZVNpemU/OiBudW1iZXI7XG4gICAgICBhcGlSZXNwb25zZVRpbWU/OiBudW1iZXI7XG4gICAgfSkgPT4ge1xuICAgICAgY29uc3QgdGhyZXNob2xkcyA9IHtcbiAgICAgICAgcmVuZGVyVGltZTogMTYsIC8vIDYwZnBzIHRhcmdldFxuICAgICAgICBtZW1vcnlVc2FnZTogNTAsIC8vIE1CXG4gICAgICAgIGJ1bmRsZVNpemU6IDI1MCwgLy8gS0IgZm9yIGNvbXBvbmVudCBjaHVua3NcbiAgICAgICAgYXBpUmVzcG9uc2VUaW1lOiAyMDAwLCAvLyAyIHNlY29uZHNcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgT2JqZWN0LmVudHJpZXMobWV0cmljcykuZm9yRWFjaCgoW21ldHJpYywgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgdGhyZXNob2xkc1ttZXRyaWMgYXMga2V5b2YgdHlwZW9mIHRocmVzaG9sZHNdXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IHRocmVzaG9sZHNbbWV0cmljIGFzIGtleW9mIHR5cGVvZiB0aHJlc2hvbGRzXTtcbiAgICAgICAgICBpZiAodmFsdWUgPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGlzc3Vlcy5wdXNoKFxuICAgICAgICAgICAgICBgJHttZXRyaWN9ICgke3ZhbHVlfSkgZXhjZWVkcyB0aHJlc2hvbGQgKCR7dGhyZXNob2xkfSlgXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKG1ldHJpYykge1xuICAgICAgICAgICAgICBjYXNlICdyZW5kZXJUaW1lJzpcbiAgICAgICAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICAgICdDb25zaWRlciB1c2luZyBSZWFjdC5tZW1vLCB1c2VNZW1vLCBvciB1c2VDYWxsYmFjaydcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdtZW1vcnlVc2FnZSc6XG4gICAgICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgICAnQ2hlY2sgZm9yIG1lbW9yeSBsZWFrcyBhbmQgb3B0aW1pemUgZGF0YSBzdHJ1Y3R1cmVzJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2J1bmRsZVNpemUnOlxuICAgICAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgICAgJ0ltcGxlbWVudCBjb2RlIHNwbGl0dGluZyBhbmQgdHJlZSBzaGFraW5nJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FwaVJlc3BvbnNlVGltZSc6XG4gICAgICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgICAnSW1wbGVtZW50IGNhY2hpbmcgYW5kIGNvbnNpZGVyIEFQSSBvcHRpbWl6YXRpb24nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc3N1ZXMsXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgaXNPcHRpbWFsOiBpc3N1ZXMubGVuZ3RoID09PSAwLFxuICAgICAgICB0aHJlc2hvbGRzLFxuICAgICAgfTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMsXG4gICAgdmFsaWRhdGVQZXJmb3JtYW5jZU1ldHJpY3MsXG4gIH07XG59XG4iXSwidmVyc2lvbiI6M30=