7324f88c113125b5e6b8f8c0b11760fd
"use strict";
/**
 * End-to-End Campaign Integration Tests
 * Perfect Codebase Campaign - Complete Campaign Workflow Testing
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock dependencies
jest.mock('child_process');
jest.mock('fs');
const CampaignController_1 = require("../../CampaignController");
const SafetyProtocol_1 = require("../../SafetyProtocol");
const ProgressTracker_1 = require("../../ProgressTracker");
const campaign_1 = require("../../../../types/campaign");
const child_process_1 = require("child_process");
const fs = __importStar(require("fs"));
const mockExecSync = child_process_1.execSync;
const mockFs = fs;
describe('End-to-End Campaign Integration Tests', () => {
    let campaignController;
    let safetyProtocol;
    let progressTracker;
    let mockConfig;
    beforeEach(() => {
        // Setup comprehensive campaign configuration
        const safetySettings = {
            maxFilesPerBatch: 25,
            buildValidationFrequency: 5,
            testValidationFrequency: 10,
            corruptionDetectionEnabled: true,
            automaticRollbackEnabled: true,
            stashRetentionDays: 7
        };
        mockConfig = {
            phases: [
                {
                    id: 'phase1',
                    name: 'TypeScript Error Elimination',
                    description: 'Eliminate all TypeScript compilation errors',
                    tools: [
                        {
                            scriptPath: 'scripts/typescript-fixes/fix-typescript-errors-enhanced-v3.js',
                            parameters: { maxFiles: 15, autoFix: true, validateSafety: true },
                            batchSize: 15,
                            safetyLevel: campaign_1.SafetyLevel.MAXIMUM
                        },
                        {
                            scriptPath: 'scripts/typescript-fixes/fix-explicit-any-systematic.js',
                            parameters: { maxFiles: 25, autoFix: true },
                            batchSize: 25,
                            safetyLevel: campaign_1.SafetyLevel.HIGH
                        }
                    ],
                    successCriteria: {
                        typeScriptErrors: 0
                    },
                    safetyCheckpoints: []
                },
                {
                    id: 'phase2',
                    name: 'Linting Excellence Achievement',
                    description: 'Eliminate all linting warnings',
                    tools: [
                        {
                            scriptPath: 'scripts/typescript-fixes/fix-unused-variables-enhanced.js',
                            parameters: { maxFiles: 20, autoFix: true },
                            batchSize: 20,
                            safetyLevel: campaign_1.SafetyLevel.HIGH
                        },
                        {
                            scriptPath: 'scripts/lint-fixes/fix-console-statements-only.js',
                            parameters: { dryRun: false },
                            batchSize: 15,
                            safetyLevel: campaign_1.SafetyLevel.MEDIUM
                        }
                    ],
                    successCriteria: {
                        lintingWarnings: 0
                    },
                    safetyCheckpoints: []
                },
                {
                    id: 'phase3',
                    name: 'Enterprise Intelligence Transformation',
                    description: 'Transform unused exports to enterprise systems',
                    tools: [
                        {
                            scriptPath: 'scripts/enterprise/transform-unused-exports.js',
                            parameters: { maxFiles: 30, generateIntelligence: true },
                            batchSize: 30,
                            safetyLevel: campaign_1.SafetyLevel.HIGH
                        }
                    ],
                    successCriteria: {
                        enterpriseSystems: 200
                    },
                    safetyCheckpoints: []
                },
                {
                    id: 'phase4',
                    name: 'Performance Optimization',
                    description: 'Optimize build performance and maintain targets',
                    tools: [
                        {
                            scriptPath: 'scripts/performance/optimize-build.js',
                            parameters: { targetTime: 10, optimizeCache: true },
                            batchSize: 50,
                            safetyLevel: campaign_1.SafetyLevel.MEDIUM
                        }
                    ],
                    successCriteria: {
                        buildTime: 10
                    },
                    safetyCheckpoints: []
                }
            ],
            safetySettings,
            progressTargets: {
                typeScriptErrors: 0,
                lintingWarnings: 0,
                buildTime: 10,
                enterpriseSystems: 200
            },
            toolConfiguration: {
                enhancedErrorFixer: 'scripts/typescript-fixes/fix-typescript-errors-enhanced-v3.js',
                explicitAnyFixer: 'scripts/typescript-fixes/fix-explicit-any-systematic.js',
                unusedVariablesFixer: 'scripts/typescript-fixes/fix-unused-variables-enhanced.js',
                consoleStatementFixer: 'scripts/lint-fixes/fix-console-statements-only.js'
            }
        };
        campaignController = new CampaignController_1.CampaignController(mockConfig);
        safetyProtocol = new SafetyProtocol_1.SafetyProtocol(safetySettings);
        progressTracker = new ProgressTracker_1.ProgressTracker();
        // Reset mocks
        jest.clearAllMocks();
        setupDefaultMocks();
    });
    function setupDefaultMocks() {
        // Default successful git operations
        mockExecSync.mockImplementation((command) => {
            const cmd = command.toString();
            if (cmd.includes('git status --porcelain'))
                return '';
            if (cmd.includes('git stash push'))
                return '';
            if (cmd.includes('git stash list'))
                return 'stash@{0}: campaign-stash';
            if (cmd.includes('git stash apply'))
                return '';
            if (cmd.includes('git branch --show-current'))
                return 'main';
            if (cmd.includes('yarn build'))
                return '';
            if (cmd.includes('yarn test'))
                return 'Tests passed';
            return '';
        });
        mockFs.existsSync.mockReturnValue(true);
        mockFs.readFileSync.mockReturnValue('valid content');
        mockFs.writeFileSync.mockImplementation(() => { });
    }
    describe('Complete Campaign Execution', () => {
        it('should execute all phases in sequence successfully', async () => {
            // Mock progressive improvement across phases
            let tsErrors = 86;
            let lintWarnings = 4506;
            let enterpriseSystems = 0;
            let buildTime = 12;
            jest.spyOn(progressTracker, 'getTypeScriptErrorCount').mockImplementation(async () => tsErrors);
            jest.spyOn(progressTracker, 'getLintingWarningCount').mockImplementation(async () => lintWarnings);
            jest.spyOn(progressTracker, 'getEnterpriseSystemCount').mockImplementation(async () => enterpriseSystems);
            jest.spyOn(progressTracker, 'getBuildTime').mockImplementation(async () => buildTime);
            const phaseResults = [];
            // Execute Phase 1: TypeScript Error Elimination
            const phase1Result = await campaignController.executePhase(mockConfig.phases[0]);
            tsErrors = 0; // Phase 1 eliminates TypeScript errors
            phaseResults.push(phase1Result);
            expect(phase1Result.success).toBe(true);
            expect(phase1Result.phaseId).toBe('phase1');
            // Execute Phase 2: Linting Excellence
            const phase2Result = await campaignController.executePhase(mockConfig.phases[1]);
            lintWarnings = 0; // Phase 2 eliminates linting warnings
            phaseResults.push(phase2Result);
            expect(phase2Result.success).toBe(true);
            expect(phase2Result.phaseId).toBe('phase2');
            // Execute Phase 3: Enterprise Intelligence
            const phase3Result = await campaignController.executePhase(mockConfig.phases[2]);
            enterpriseSystems = 200; // Phase 3 creates enterprise systems
            phaseResults.push(phase3Result);
            expect(phase3Result.success).toBe(true);
            expect(phase3Result.phaseId).toBe('phase3');
            // Execute Phase 4: Performance Optimization
            const phase4Result = await campaignController.executePhase(mockConfig.phases[3]);
            buildTime = 8.5; // Phase 4 optimizes build time
            phaseResults.push(phase4Result);
            expect(phase4Result.success).toBe(true);
            expect(phase4Result.phaseId).toBe('phase4');
            // Verify overall campaign success
            expect(phaseResults.every(result => result.success)).toBe(true);
            expect(phaseResults.length).toBe(4);
        });
        it('should maintain safety protocols throughout entire campaign', async () => {
            const allSafetyEvents = [];
            for (const phase of mockConfig.phases) {
                const result = await campaignController.executePhase(phase);
                allSafetyEvents.push(...result.safetyEvents);
            }
            // Verify safety events were recorded for each phase
            expect(allSafetyEvents.length).toBeGreaterThan(0);
            // Check that each phase has safety events
            for (const phase of mockConfig.phases) {
                expect(allSafetyEvents.some(event => event.description.includes(phase.name) || event.description.includes(phase.id))).toBe(true);
            }
        });
        it('should track progress metrics throughout campaign', async () => {
            // Mock progressive metrics improvement
            const metricsHistory = [];
            jest.spyOn(progressTracker, 'getProgressMetrics').mockImplementation(async () => {
                const metrics = {
                    typeScriptErrors: { current: Math.max(0, 86 - metricsHistory.length * 20), target: 0, reduction: metricsHistory.length * 20, percentage: Math.min(100, (metricsHistory.length * 20 / 86) * 100) },
                    lintingWarnings: { current: Math.max(0, 4506 - metricsHistory.length * 1000), target: 0, reduction: metricsHistory.length * 1000, percentage: Math.min(100, (metricsHistory.length * 1000 / 4506) * 100) },
                    buildPerformance: { currentTime: Math.max(8, 12 - metricsHistory.length), targetTime: 10, cacheHitRate: 0.8, memoryUsage: 45 },
                    enterpriseSystems: { current: metricsHistory.length * 50, target: 200, transformedExports: metricsHistory.length * 50 }
                };
                metricsHistory.push(metrics);
                return metrics;
            });
            // Execute all phases
            for (const phase of mockConfig.phases) {
                await campaignController.executePhase(phase);
                await progressTracker.getProgressMetrics(); // Trigger metrics collection
            }
            expect(metricsHistory.length).toBeGreaterThan(0);
            // Verify progressive improvement
            const finalMetrics = metricsHistory[metricsHistory.length - 1];
            expect(finalMetrics.typeScriptErrors.current).toBeLessThanOrEqual(86);
            expect(finalMetrics.lintingWarnings.current).toBeLessThanOrEqual(4506);
        });
        it('should validate all milestones after campaign completion', async () => {
            // Mock successful campaign completion
            jest.spyOn(progressTracker, 'getProgressMetrics').mockResolvedValue({
                typeScriptErrors: { current: 0, target: 0, reduction: 86, percentage: 100 },
                lintingWarnings: { current: 0, target: 0, reduction: 4506, percentage: 100 },
                buildPerformance: { currentTime: 8.5, targetTime: 10, cacheHitRate: 0.85, memoryUsage: 42 },
                enterpriseSystems: { current: 200, target: 200, transformedExports: 200 }
            });
            // Execute all phases
            for (const phase of mockConfig.phases) {
                await campaignController.executePhase(phase);
            }
            // Validate all milestones
            const milestones = [
                'zero-typescript-errors',
                'zero-linting-warnings',
                'build-time-under-10s',
                'enterprise-systems-200',
                'phase-1-complete',
                'phase-2-complete',
                'phase-3-complete',
                'phase-4-complete'
            ];
            for (const milestone of milestones) {
                const isValid = await progressTracker.validateMilestone(milestone);
                expect(isValid).toBe(true);
            }
        });
        it('should generate comprehensive final report', async () => {
            // Mock successful campaign completion
            jest.spyOn(progressTracker, 'getProgressMetrics').mockResolvedValue({
                typeScriptErrors: { current: 0, target: 0, reduction: 86, percentage: 100 },
                lintingWarnings: { current: 0, target: 0, reduction: 4506, percentage: 100 },
                buildPerformance: { currentTime: 8.5, targetTime: 10, cacheHitRate: 0.85, memoryUsage: 42 },
                enterpriseSystems: { current: 200, target: 200, transformedExports: 200 }
            });
            // Execute all phases
            for (const phase of mockConfig.phases) {
                await campaignController.executePhase(phase);
            }
            const finalReport = await progressTracker.generateProgressReport();
            expect(finalReport.campaignId).toBe('perfect-codebase-campaign');
            expect(finalReport.overallProgress).toBe(100);
            expect(finalReport.phases.length).toBe(2); // Default phases in progress tracker
            expect(finalReport.phases.every(phase => phase.status === campaign_1.PhaseStatus.COMPLETED)).toBe(true);
        });
    });
    describe('Campaign Failure and Recovery Scenarios', () => {
        it('should handle phase failure and trigger rollback', async () => {
            const phase1 = mockConfig.phases[0];
            // Mock tool execution failure
            jest.spyOn(campaignController, 'executeTool').mockRejectedValue(new Error('Critical tool failure'));
            const result = await campaignController.executePhase(phase1);
            expect(result.success).toBe(false);
            expect(result.phaseId).toBe('phase1');
            expect(result.safetyEvents.some(event => event.type === campaign_1.SafetyEventType.BUILD_FAILURE)).toBe(true);
        });
        it('should handle corruption detection during campaign', async () => {
            // Mock corruption detection
            mockFs.readFileSync.mockReturnValue(`
        function test() {
        <<<<<<< HEAD
          return 'conflict';
        =======
          return 'other';
        >>>>>>> branch
        }
      `);
            const corruptionReport = await safetyProtocol.detectCorruption(['test-file.ts']);
            expect(corruptionReport.severity).toBe(campaign_1.CorruptionSeverity.CRITICAL);
            expect(corruptionReport.recommendedAction).toBe(campaign_1.RecoveryAction.EMERGENCY_RESTORE);
            // Verify emergency rollback would be triggered
            if (corruptionReport.severity === campaign_1.CorruptionSeverity.CRITICAL) {
                // Create a stash first for rollback
                await safetyProtocol.createStash('Emergency stash');
                await safetyProtocol.emergencyRollback();
                expect(mockExecSync).toHaveBeenCalledWith(expect.stringContaining('git stash apply'), expect.any(Object));
            }
        });
        it('should handle build failures during phase execution', async () => {
            const phase1 = mockConfig.phases[0];
            // Mock build failure
            mockExecSync.mockImplementation((command) => {
                if (command.toString().includes('yarn build')) {
                    throw new Error('Build compilation failed');
                }
                return '';
            });
            jest.spyOn(progressTracker, 'getBuildTime').mockResolvedValue(-1);
            const result = await campaignController.executePhase(phase1);
            // Should handle gracefully
            expect(result.phaseId).toBe('phase1');
        });
        it('should recover from partial phase failures', async () => {
            const phase1 = mockConfig.phases[0];
            // Mock partial failure - first tool fails, second succeeds
            let toolCallCount = 0;
            jest.spyOn(campaignController, 'executeTool').mockImplementation(async () => {
                toolCallCount++;
                if (toolCallCount === 1) {
                    throw new Error('First tool failed');
                }
                return {
                    filesProcessed: ['file1.ts', 'file2.ts'],
                    changesApplied: 10,
                    success: true
                };
            });
            const result = await campaignController.executePhase(phase1);
            // Should fail due to first tool failure
            expect(result.success).toBe(false);
            expect(result.phaseId).toBe('phase1');
        });
    });
    describe('Performance and Scalability', () => {
        it('should handle large file batches efficiently', async () => {
            const phase1 = mockConfig.phases[0];
            // Mock large file processing
            const largeFileList = Array.from({ length: 100 }, (_, i) => `file${i}.ts`);
            jest.spyOn(campaignController, 'executeTool').mockResolvedValue({
                filesProcessed: largeFileList,
                changesApplied: largeFileList.length * 2,
                success: true
            });
            const startTime = Date.now();
            const result = await campaignController.executePhase(phase1);
            const executionTime = Date.now() - startTime;
            expect(result.success).toBe(true);
            expect(result.filesProcessed).toBe(100);
            expect(executionTime).toBeLessThan(10000); // Should complete within 10 seconds
        });
        it('should maintain memory usage within limits during campaign', async () => {
            // Mock memory tracking
            jest.spyOn(progressTracker, 'getMemoryUsage').mockResolvedValue(45); // 45MB
            for (const phase of mockConfig.phases) {
                await campaignController.executePhase(phase);
                const memoryUsage = await progressTracker.getMemoryUsage();
                expect(memoryUsage).toBeLessThan(50); // Should stay under 50MB
            }
        });
        it('should handle concurrent safety operations', async () => {
            // Create multiple stashes concurrently
            const stashPromises = Array.from({ length: 5 }, (_, i) => safetyProtocol.createStash(`Concurrent stash ${i}`));
            const stashIds = await Promise.all(stashPromises);
            expect(stashIds.length).toBe(5);
            expect(stashIds.every(id => typeof id === 'string')).toBe(true);
            const stashes = await safetyProtocol.listStashes();
            expect(stashes.length).toBe(5);
        });
    });
    describe('Configuration and Customization', () => {
        it('should support custom phase configurations', async () => {
            const customPhase = {
                id: 'custom-phase',
                name: 'Custom Phase',
                description: 'Custom phase for testing',
                tools: [{
                        scriptPath: 'scripts/custom/custom-script.js',
                        parameters: { customParam: true },
                        batchSize: 5,
                        safetyLevel: campaign_1.SafetyLevel.LOW
                    }],
                successCriteria: { typeScriptErrors: 10 },
                safetyCheckpoints: []
            };
            const result = await campaignController.executePhase(customPhase);
            expect(result.phaseId).toBe('custom-phase');
        });
        it('should support custom safety settings', async () => {
            const customSafetySettings = {
                maxFilesPerBatch: 50,
                buildValidationFrequency: 10,
                testValidationFrequency: 20,
                corruptionDetectionEnabled: false,
                automaticRollbackEnabled: false,
                stashRetentionDays: 14
            };
            const customSafetyProtocol = new SafetyProtocol_1.SafetyProtocol(customSafetySettings);
            // Verify custom settings are applied
            expect(customSafetyProtocol.settings.maxFilesPerBatch).toBe(50);
            expect(customSafetyProtocol.settings.stashRetentionDays).toBe(14);
        });
        it('should support custom success criteria', async () => {
            const customPhase = {
                ...mockConfig.phases[0],
                successCriteria: {
                    typeScriptErrors: 5,
                    customValidation: async () => {
                        // Custom validation logic
                        return true;
                    }
                }
            };
            // Mock 5 remaining TypeScript errors
            jest.spyOn(progressTracker, 'getProgressMetrics').mockResolvedValue({
                typeScriptErrors: { current: 5, target: 0, reduction: 81, percentage: 94 },
                lintingWarnings: { current: 4506, target: 0, reduction: 0, percentage: 0 },
                buildPerformance: { currentTime: 8.5, targetTime: 10, cacheHitRate: 0.8, memoryUsage: 45 },
                enterpriseSystems: { current: 0, target: 200, transformedExports: 0 }
            });
            const validation = await campaignController.validatePhaseCompletion(customPhase);
            expect(validation.success).toBe(true); // Should pass with 5 errors allowed
        });
    });
    describe('Reporting and Analytics', () => {
        it('should generate detailed execution analytics', async () => {
            const executionMetrics = [];
            for (const phase of mockConfig.phases) {
                const startTime = Date.now();
                const result = await campaignController.executePhase(phase);
                const endTime = Date.now();
                executionMetrics.push({
                    phaseId: phase.id,
                    phaseName: phase.name,
                    executionTime: endTime - startTime,
                    success: result.success,
                    filesProcessed: result.filesProcessed,
                    errorsFixed: result.errorsFixed,
                    safetyEventsCount: result.safetyEvents.length
                });
            }
            expect(executionMetrics.length).toBe(4);
            expect(executionMetrics.every(metric => metric.executionTime > 0)).toBe(true);
            expect(executionMetrics.every(metric => typeof metric.success === 'boolean')).toBe(true);
        });
        it('should export comprehensive campaign metrics', async () => {
            // Execute campaign
            for (const phase of mockConfig.phases) {
                await campaignController.executePhase(phase);
            }
            // Export metrics
            const exportPath = 'test-campaign-metrics.json';
            await progressTracker.exportMetrics(exportPath);
            expect(mockFs.writeFileSync).toHaveBeenCalledWith(exportPath, expect.stringContaining('"campaignId": "perfect-codebase-campaign"'), undefined);
        });
        it('should track improvement trends over time', async () => {
            // Mock progressive improvement
            let improvementStep = 0;
            jest.spyOn(progressTracker, 'getProgressMetrics').mockImplementation(async () => {
                improvementStep++;
                return {
                    typeScriptErrors: { current: Math.max(0, 86 - improvementStep * 20), target: 0, reduction: improvementStep * 20, percentage: Math.min(100, (improvementStep * 20 / 86) * 100) },
                    lintingWarnings: { current: Math.max(0, 4506 - improvementStep * 1000), target: 0, reduction: improvementStep * 1000, percentage: Math.min(100, (improvementStep * 1000 / 4506) * 100) },
                    buildPerformance: { currentTime: Math.max(8, 12 - improvementStep), targetTime: 10, cacheHitRate: 0.8, memoryUsage: 45 },
                    enterpriseSystems: { current: improvementStep * 50, target: 200, transformedExports: improvementStep * 50 }
                };
            });
            // Execute phases and collect metrics
            for (const phase of mockConfig.phases) {
                await campaignController.executePhase(phase);
                await progressTracker.getProgressMetrics();
            }
            const improvement = progressTracker.getMetricsImprovement();
            expect(improvement.typeScriptErrorsReduced).toBeGreaterThan(0);
            expect(improvement.lintingWarningsReduced).toBeGreaterThan(0);
            expect(improvement.enterpriseSystemsAdded).toBeGreaterThan(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0dyZWdDYXN0cm8vRGVza3RvcC9XaGF0VG9FYXROZXh0L3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi9fX3Rlc3RzX18vaW50ZWdyYXRpb24vRW5kVG9FbmRDYW1wYWlnbi5pbnRlZ3JhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkgsb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQWpCaEIsaUVBQThEO0FBQzlELHlEQUFzRDtBQUN0RCwyREFBd0Q7QUFDeEQseURBUW9DO0FBQ3BDLGlEQUF5QztBQUN6Qyx1Q0FBeUI7QUFNekIsTUFBTSxZQUFZLEdBQUcsd0JBQWdELENBQUM7QUFDdEUsTUFBTSxNQUFNLEdBQUcsRUFBNEIsQ0FBQztBQUU1QyxRQUFRLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO0lBQ3JELElBQUksa0JBQXNDLENBQUM7SUFDM0MsSUFBSSxjQUE4QixDQUFDO0lBQ25DLElBQUksZUFBZ0MsQ0FBQztJQUNyQyxJQUFJLFVBQTBCLENBQUM7SUFFL0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLDZDQUE2QztRQUM3QyxNQUFNLGNBQWMsR0FBbUI7WUFDckMsZ0JBQWdCLEVBQUUsRUFBRTtZQUNwQix3QkFBd0IsRUFBRSxDQUFDO1lBQzNCLHVCQUF1QixFQUFFLEVBQUU7WUFDM0IsMEJBQTBCLEVBQUUsSUFBSTtZQUNoQyx3QkFBd0IsRUFBRSxJQUFJO1lBQzlCLGtCQUFrQixFQUFFLENBQUM7U0FDdEIsQ0FBQztRQUVGLFVBQVUsR0FBRztZQUNYLE1BQU0sRUFBRTtnQkFDTjtvQkFDRSxFQUFFLEVBQUUsUUFBUTtvQkFDWixJQUFJLEVBQUUsOEJBQThCO29CQUNwQyxXQUFXLEVBQUUsNkNBQTZDO29CQUMxRCxLQUFLLEVBQUU7d0JBQ0w7NEJBQ0UsVUFBVSxFQUFFLCtEQUErRDs0QkFDM0UsVUFBVSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUU7NEJBQ2pFLFNBQVMsRUFBRSxFQUFFOzRCQUNiLFdBQVcsRUFBRSxzQkFBVyxDQUFDLE9BQU87eUJBQ2pDO3dCQUNEOzRCQUNFLFVBQVUsRUFBRSx5REFBeUQ7NEJBQ3JFLFVBQVUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTs0QkFDM0MsU0FBUyxFQUFFLEVBQUU7NEJBQ2IsV0FBVyxFQUFFLHNCQUFXLENBQUMsSUFBSTt5QkFDOUI7cUJBQ0Y7b0JBQ0QsZUFBZSxFQUFFO3dCQUNmLGdCQUFnQixFQUFFLENBQUM7cUJBQ3BCO29CQUNELGlCQUFpQixFQUFFLEVBQUU7aUJBQ3RCO2dCQUNEO29CQUNFLEVBQUUsRUFBRSxRQUFRO29CQUNaLElBQUksRUFBRSxnQ0FBZ0M7b0JBQ3RDLFdBQVcsRUFBRSxnQ0FBZ0M7b0JBQzdDLEtBQUssRUFBRTt3QkFDTDs0QkFDRSxVQUFVLEVBQUUsMkRBQTJEOzRCQUN2RSxVQUFVLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUU7NEJBQzNDLFNBQVMsRUFBRSxFQUFFOzRCQUNiLFdBQVcsRUFBRSxzQkFBVyxDQUFDLElBQUk7eUJBQzlCO3dCQUNEOzRCQUNFLFVBQVUsRUFBRSxtREFBbUQ7NEJBQy9ELFVBQVUsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7NEJBQzdCLFNBQVMsRUFBRSxFQUFFOzRCQUNiLFdBQVcsRUFBRSxzQkFBVyxDQUFDLE1BQU07eUJBQ2hDO3FCQUNGO29CQUNELGVBQWUsRUFBRTt3QkFDZixlQUFlLEVBQUUsQ0FBQztxQkFDbkI7b0JBQ0QsaUJBQWlCLEVBQUUsRUFBRTtpQkFDdEI7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLFFBQVE7b0JBQ1osSUFBSSxFQUFFLHdDQUF3QztvQkFDOUMsV0FBVyxFQUFFLGdEQUFnRDtvQkFDN0QsS0FBSyxFQUFFO3dCQUNMOzRCQUNFLFVBQVUsRUFBRSxnREFBZ0Q7NEJBQzVELFVBQVUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsSUFBSSxFQUFFOzRCQUN4RCxTQUFTLEVBQUUsRUFBRTs0QkFDYixXQUFXLEVBQUUsc0JBQVcsQ0FBQyxJQUFJO3lCQUM5QjtxQkFDRjtvQkFDRCxlQUFlLEVBQUU7d0JBQ2YsaUJBQWlCLEVBQUUsR0FBRztxQkFDdkI7b0JBQ0QsaUJBQWlCLEVBQUUsRUFBRTtpQkFDdEI7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLFFBQVE7b0JBQ1osSUFBSSxFQUFFLDBCQUEwQjtvQkFDaEMsV0FBVyxFQUFFLGlEQUFpRDtvQkFDOUQsS0FBSyxFQUFFO3dCQUNMOzRCQUNFLFVBQVUsRUFBRSx1Q0FBdUM7NEJBQ25ELFVBQVUsRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRTs0QkFDbkQsU0FBUyxFQUFFLEVBQUU7NEJBQ2IsV0FBVyxFQUFFLHNCQUFXLENBQUMsTUFBTTt5QkFDaEM7cUJBQ0Y7b0JBQ0QsZUFBZSxFQUFFO3dCQUNmLFNBQVMsRUFBRSxFQUFFO3FCQUNkO29CQUNELGlCQUFpQixFQUFFLEVBQUU7aUJBQ3RCO2FBQ0Y7WUFDRCxjQUFjO1lBQ2QsZUFBZSxFQUFFO2dCQUNmLGdCQUFnQixFQUFFLENBQUM7Z0JBQ25CLGVBQWUsRUFBRSxDQUFDO2dCQUNsQixTQUFTLEVBQUUsRUFBRTtnQkFDYixpQkFBaUIsRUFBRSxHQUFHO2FBQ3ZCO1lBQ0QsaUJBQWlCLEVBQUU7Z0JBQ2pCLGtCQUFrQixFQUFFLCtEQUErRDtnQkFDbkYsZ0JBQWdCLEVBQUUseURBQXlEO2dCQUMzRSxvQkFBb0IsRUFBRSwyREFBMkQ7Z0JBQ2pGLHFCQUFxQixFQUFFLG1EQUFtRDthQUMzRTtTQUNGLENBQUM7UUFFRixrQkFBa0IsR0FBRyxJQUFJLHVDQUFrQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3hELGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDcEQsZUFBZSxHQUFHLElBQUksaUNBQWUsRUFBRSxDQUFDO1FBRXhDLGNBQWM7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsaUJBQWlCLEVBQUUsQ0FBQztJQUN0QixDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsaUJBQWlCO1FBQ3hCLG9DQUFvQztRQUNwQyxZQUFZLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUMxQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUM7WUFFL0IsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLHdCQUF3QixDQUFDO2dCQUFFLE9BQU8sRUFBRSxDQUFDO1lBQ3RELElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFBRSxPQUFPLEVBQUUsQ0FBQztZQUM5QyxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUM7Z0JBQUUsT0FBTywyQkFBMkIsQ0FBQztZQUN2RSxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUM7Z0JBQUUsT0FBTyxFQUFFLENBQUM7WUFDL0MsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLDJCQUEyQixDQUFDO2dCQUFFLE9BQU8sTUFBTSxDQUFDO1lBQzdELElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7Z0JBQUUsT0FBTyxFQUFFLENBQUM7WUFDMUMsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztnQkFBRSxPQUFPLGNBQWMsQ0FBQztZQUVyRCxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsUUFBUSxDQUFDLDZCQUE2QixFQUFFLEdBQUcsRUFBRTtRQUMzQyxFQUFFLENBQUMsb0RBQW9ELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbEUsNkNBQTZDO1lBQzdDLElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztZQUNsQixJQUFJLFlBQVksR0FBRyxJQUFJLENBQUM7WUFDeEIsSUFBSSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7WUFDMUIsSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBRW5CLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLHlCQUF5QixDQUFDLENBQUMsa0JBQWtCLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSx3QkFBd0IsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDbkcsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsMEJBQTBCLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDMUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsY0FBYyxDQUFDLENBQUMsa0JBQWtCLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUV0RixNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7WUFFeEIsZ0RBQWdEO1lBQ2hELE1BQU0sWUFBWSxHQUFHLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRixRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsdUNBQXVDO1lBQ3JELFlBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFaEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFNUMsc0NBQXNDO1lBQ3RDLE1BQU0sWUFBWSxHQUFHLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRixZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsc0NBQXNDO1lBQ3hELFlBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFaEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFNUMsMkNBQTJDO1lBQzNDLE1BQU0sWUFBWSxHQUFHLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRixpQkFBaUIsR0FBRyxHQUFHLENBQUMsQ0FBQyxxQ0FBcUM7WUFDOUQsWUFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVoQyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUU1Qyw0Q0FBNEM7WUFDNUMsTUFBTSxZQUFZLEdBQUcsTUFBTSxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pGLFNBQVMsR0FBRyxHQUFHLENBQUMsQ0FBQywrQkFBK0I7WUFDaEQsWUFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVoQyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUU1QyxrQ0FBa0M7WUFDbEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEUsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNkRBQTZELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDM0UsTUFBTSxlQUFlLEdBQVUsRUFBRSxDQUFDO1lBRWxDLEtBQUssTUFBTSxLQUFLLElBQUksVUFBVSxDQUFDLE1BQU0sRUFBRTtnQkFDckMsTUFBTSxNQUFNLEdBQUcsTUFBTSxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzVELGVBQWUsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDOUM7WUFFRCxvREFBb0Q7WUFDcEQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFbEQsMENBQTBDO1lBQzFDLEtBQUssTUFBTSxLQUFLLElBQUksVUFBVSxDQUFDLE1BQU0sRUFBRTtnQkFDckMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FDbEMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FDL0UsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNmO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsbURBQW1ELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDakUsdUNBQXVDO1lBQ3ZDLE1BQU0sY0FBYyxHQUFVLEVBQUUsQ0FBQztZQUVqQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxFQUFFO2dCQUM5RSxNQUFNLE9BQU8sR0FBRztvQkFDZCxnQkFBZ0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsY0FBYyxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxjQUFjLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRTtvQkFDak0sZUFBZSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksR0FBRyxjQUFjLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLGNBQWMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFO29CQUMxTSxnQkFBZ0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFO29CQUM5SCxpQkFBaUIsRUFBRSxFQUFFLE9BQU8sRUFBRSxjQUFjLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGtCQUFrQixFQUFFLGNBQWMsQ0FBQyxNQUFNLEdBQUcsRUFBRSxFQUFFO2lCQUN4SCxDQUFDO2dCQUNGLGNBQWMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzdCLE9BQU8sT0FBTyxDQUFDO1lBQ2pCLENBQUMsQ0FBQyxDQUFDO1lBRUgscUJBQXFCO1lBQ3JCLEtBQUssTUFBTSxLQUFLLElBQUksVUFBVSxDQUFDLE1BQU0sRUFBRTtnQkFDckMsTUFBTSxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzdDLE1BQU0sZUFBZSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyw2QkFBNkI7YUFDMUU7WUFFRCxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVqRCxpQ0FBaUM7WUFDakMsTUFBTSxZQUFZLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0QsTUFBTSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0RSxNQUFNLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6RSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywwREFBMEQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RSxzQ0FBc0M7WUFDdEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDbEUsZ0JBQWdCLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFO2dCQUMzRSxlQUFlLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFO2dCQUM1RSxnQkFBZ0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUU7Z0JBQzNGLGlCQUFpQixFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGtCQUFrQixFQUFFLEdBQUcsRUFBRTthQUMxRSxDQUFDLENBQUM7WUFFSCxxQkFBcUI7WUFDckIsS0FBSyxNQUFNLEtBQUssSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFO2dCQUNyQyxNQUFNLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUM5QztZQUVELDBCQUEwQjtZQUMxQixNQUFNLFVBQVUsR0FBRztnQkFDakIsd0JBQXdCO2dCQUN4Qix1QkFBdUI7Z0JBQ3ZCLHNCQUFzQjtnQkFDdEIsd0JBQXdCO2dCQUN4QixrQkFBa0I7Z0JBQ2xCLGtCQUFrQjtnQkFDbEIsa0JBQWtCO2dCQUNsQixrQkFBa0I7YUFDbkIsQ0FBQztZQUVGLEtBQUssTUFBTSxTQUFTLElBQUksVUFBVSxFQUFFO2dCQUNsQyxNQUFNLE9BQU8sR0FBRyxNQUFNLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDbkUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUM1QjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFELHNDQUFzQztZQUN0QyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLGlCQUFpQixDQUFDO2dCQUNsRSxnQkFBZ0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUU7Z0JBQzNFLGVBQWUsRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUU7Z0JBQzVFLGdCQUFnQixFQUFFLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLEVBQUUsRUFBRTtnQkFDM0YsaUJBQWlCLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO2FBQzFFLENBQUMsQ0FBQztZQUVILHFCQUFxQjtZQUNyQixLQUFLLE1BQU0sS0FBSyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3JDLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzlDO1lBRUQsTUFBTSxXQUFXLEdBQUcsTUFBTSxlQUFlLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztZQUVuRSxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlDLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHFDQUFxQztZQUNoRixNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLHNCQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0YsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyx5Q0FBeUMsRUFBRSxHQUFHLEVBQUU7UUFDdkQsRUFBRSxDQUFDLGtEQUFrRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2hFLE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFcEMsOEJBQThCO1lBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQXlCLEVBQUUsYUFBYSxDQUFDLENBQUMsaUJBQWlCLENBQ3BFLElBQUksS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQ25DLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxNQUFNLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUU3RCxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FDdEMsS0FBSyxDQUFDLElBQUksS0FBSywwQkFBZSxDQUFDLGFBQWEsQ0FDN0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxvREFBb0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNsRSw0QkFBNEI7WUFDNUIsTUFBTSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUM7Ozs7Ozs7O09BUW5DLENBQUMsQ0FBQztZQUVILE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1lBRWpGLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsNkJBQWtCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLHlCQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUVsRiwrQ0FBK0M7WUFDL0MsSUFBSSxnQkFBZ0IsQ0FBQyxRQUFRLEtBQUssNkJBQWtCLENBQUMsUUFBUSxFQUFFO2dCQUM3RCxvQ0FBb0M7Z0JBQ3BDLE1BQU0sY0FBYyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2dCQUNwRCxNQUFNLGNBQWMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2dCQUV6QyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsb0JBQW9CLENBQ3ZDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxFQUMxQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUNuQixDQUFDO2FBQ0g7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxREFBcUQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNuRSxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXBDLHFCQUFxQjtZQUNyQixZQUFZLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtnQkFDMUMsSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFFO29CQUM3QyxNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7aUJBQzdDO2dCQUNELE9BQU8sRUFBRSxDQUFDO1lBQ1osQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxjQUFjLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRWxFLE1BQU0sTUFBTSxHQUFHLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRTdELDJCQUEyQjtZQUMzQixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN4QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMxRCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXBDLDJEQUEyRDtZQUMzRCxJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7WUFDdEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBeUIsRUFBRSxhQUFhLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLElBQUksRUFBRTtnQkFDakYsYUFBYSxFQUFFLENBQUM7Z0JBQ2hCLElBQUksYUFBYSxLQUFLLENBQUMsRUFBRTtvQkFDdkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2lCQUN0QztnQkFDRCxPQUFPO29CQUNMLGNBQWMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUM7b0JBQ3hDLGNBQWMsRUFBRSxFQUFFO29CQUNsQixPQUFPLEVBQUUsSUFBSTtpQkFDZCxDQUFDO1lBQ0osQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLE1BQU0sR0FBRyxNQUFNLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUU3RCx3Q0FBd0M7WUFDeEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLEVBQUU7UUFDM0MsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzVELE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFcEMsNkJBQTZCO1lBQzdCLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFM0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBeUIsRUFBRSxhQUFhLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDckUsY0FBYyxFQUFFLGFBQWE7Z0JBQzdCLGNBQWMsRUFBRSxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQ3hDLE9BQU8sRUFBRSxJQUFJO2FBQ2QsQ0FBQyxDQUFDO1lBRUgsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQzdCLE1BQU0sTUFBTSxHQUFHLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzdELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUM7WUFFN0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLG9DQUFvQztRQUNqRixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw0REFBNEQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMxRSx1QkFBdUI7WUFDdkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU87WUFFNUUsS0FBSyxNQUFNLEtBQUssSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFO2dCQUNyQyxNQUFNLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFFN0MsTUFBTSxXQUFXLEdBQUcsTUFBTSxlQUFlLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQzNELE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyx5QkFBeUI7YUFDaEU7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMxRCx1Q0FBdUM7WUFDdkMsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUN2RCxjQUFjLENBQUMsV0FBVyxDQUFDLG9CQUFvQixDQUFDLEVBQUUsQ0FBQyxDQUNwRCxDQUFDO1lBRUYsTUFBTSxRQUFRLEdBQUcsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRWxELE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFaEUsTUFBTSxPQUFPLEdBQUcsTUFBTSxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbkQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDL0MsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFELE1BQU0sV0FBVyxHQUFHO2dCQUNsQixFQUFFLEVBQUUsY0FBYztnQkFDbEIsSUFBSSxFQUFFLGNBQWM7Z0JBQ3BCLFdBQVcsRUFBRSwwQkFBMEI7Z0JBQ3ZDLEtBQUssRUFBRSxDQUFDO3dCQUNOLFVBQVUsRUFBRSxpQ0FBaUM7d0JBQzdDLFVBQVUsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUU7d0JBQ2pDLFNBQVMsRUFBRSxDQUFDO3dCQUNaLFdBQVcsRUFBRSxzQkFBVyxDQUFDLEdBQUc7cUJBQzdCLENBQUM7Z0JBQ0YsZUFBZSxFQUFFLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxFQUFFO2dCQUN6QyxpQkFBaUIsRUFBRSxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxNQUFNLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUVsRSxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNyRCxNQUFNLG9CQUFvQixHQUFtQjtnQkFDM0MsZ0JBQWdCLEVBQUUsRUFBRTtnQkFDcEIsd0JBQXdCLEVBQUUsRUFBRTtnQkFDNUIsdUJBQXVCLEVBQUUsRUFBRTtnQkFDM0IsMEJBQTBCLEVBQUUsS0FBSztnQkFDakMsd0JBQXdCLEVBQUUsS0FBSztnQkFDL0Isa0JBQWtCLEVBQUUsRUFBRTthQUN2QixDQUFDO1lBRUYsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLCtCQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUV0RSxxQ0FBcUM7WUFDckMsTUFBTSxDQUFFLG9CQUE0QixDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN6RSxNQUFNLENBQUUsb0JBQTRCLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3RELE1BQU0sV0FBVyxHQUFHO2dCQUNsQixHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixlQUFlLEVBQUU7b0JBQ2YsZ0JBQWdCLEVBQUUsQ0FBQztvQkFDbkIsZ0JBQWdCLEVBQUUsS0FBSyxJQUFJLEVBQUU7d0JBQzNCLDBCQUEwQjt3QkFDMUIsT0FBTyxJQUFJLENBQUM7b0JBQ2QsQ0FBQztpQkFDRjthQUNGLENBQUM7WUFFRixxQ0FBcUM7WUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDbEUsZ0JBQWdCLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFO2dCQUMxRSxlQUFlLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFO2dCQUMxRSxnQkFBZ0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUU7Z0JBQzFGLGlCQUFpQixFQUFFLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGtCQUFrQixFQUFFLENBQUMsRUFBRTthQUN0RSxDQUFDLENBQUM7WUFFSCxNQUFNLFVBQVUsR0FBRyxNQUFNLGtCQUFrQixDQUFDLHVCQUF1QixDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRWpGLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsb0NBQW9DO1FBQzdFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1FBQ3ZDLEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM1RCxNQUFNLGdCQUFnQixHQUFVLEVBQUUsQ0FBQztZQUVuQyxLQUFLLE1BQU0sS0FBSyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3JDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFDN0IsTUFBTSxNQUFNLEdBQUcsTUFBTSxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzVELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFFM0IsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO29CQUNwQixPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUU7b0JBQ2pCLFNBQVMsRUFBRSxLQUFLLENBQUMsSUFBSTtvQkFDckIsYUFBYSxFQUFFLE9BQU8sR0FBRyxTQUFTO29CQUNsQyxPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU87b0JBQ3ZCLGNBQWMsRUFBRSxNQUFNLENBQUMsY0FBYztvQkFDckMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxXQUFXO29CQUMvQixpQkFBaUIsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU07aUJBQzlDLENBQUMsQ0FBQzthQUNKO1lBRUQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5RSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxNQUFNLENBQUMsT0FBTyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzVELG1CQUFtQjtZQUNuQixLQUFLLE1BQU0sS0FBSyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3JDLE1BQU0sa0JBQWtCLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzlDO1lBRUQsaUJBQWlCO1lBQ2pCLE1BQU0sVUFBVSxHQUFHLDRCQUE0QixDQUFDO1lBQ2hELE1BQU0sZUFBZSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUVoRCxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLG9CQUFvQixDQUMvQyxVQUFVLEVBQ1YsTUFBTSxDQUFDLGdCQUFnQixDQUFDLDJDQUEyQyxDQUFDLEVBQ3BFLFNBQVMsQ0FDVixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMkNBQTJDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDekQsK0JBQStCO1lBQy9CLElBQUksZUFBZSxHQUFHLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxFQUFFO2dCQUM5RSxlQUFlLEVBQUUsQ0FBQztnQkFDbEIsT0FBTztvQkFDTCxnQkFBZ0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsZUFBZSxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLGVBQWUsR0FBRyxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsZUFBZSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRTtvQkFDL0ssZUFBZSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksR0FBRyxlQUFlLEdBQUcsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsZUFBZSxHQUFHLElBQUksRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxlQUFlLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFO29CQUN4TCxnQkFBZ0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsZUFBZSxDQUFDLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLEVBQUU7b0JBQ3hILGlCQUFpQixFQUFFLEVBQUUsT0FBTyxFQUFFLGVBQWUsR0FBRyxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxrQkFBa0IsRUFBRSxlQUFlLEdBQUcsRUFBRSxFQUFFO2lCQUM1RyxDQUFDO1lBQ0osQ0FBQyxDQUFDLENBQUM7WUFFSCxxQ0FBcUM7WUFDckMsS0FBSyxNQUFNLEtBQUssSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFO2dCQUNyQyxNQUFNLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDN0MsTUFBTSxlQUFlLENBQUMsa0JBQWtCLEVBQUUsQ0FBQzthQUM1QztZQUVELE1BQU0sV0FBVyxHQUFHLGVBQWUsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1lBRTVELE1BQU0sQ0FBQyxXQUFXLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0QsTUFBTSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5RCxNQUFNLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvR3JlZ0Nhc3Ryby9EZXNrdG9wL1doYXRUb0VhdE5leHQvc3JjL3NlcnZpY2VzL2NhbXBhaWduL19fdGVzdHNfXy9pbnRlZ3JhdGlvbi9FbmRUb0VuZENhbXBhaWduLmludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmQtdG8tRW5kIENhbXBhaWduIEludGVncmF0aW9uIFRlc3RzXG4gKiBQZXJmZWN0IENvZGViYXNlIENhbXBhaWduIC0gQ29tcGxldGUgQ2FtcGFpZ24gV29ya2Zsb3cgVGVzdGluZ1xuICovXG5cbmltcG9ydCB7IENhbXBhaWduQ29udHJvbGxlciB9IGZyb20gJy4uLy4uL0NhbXBhaWduQ29udHJvbGxlcic7XG5pbXBvcnQgeyBTYWZldHlQcm90b2NvbCB9IGZyb20gJy4uLy4uL1NhZmV0eVByb3RvY29sJztcbmltcG9ydCB7IFByb2dyZXNzVHJhY2tlciB9IGZyb20gJy4uLy4uL1Byb2dyZXNzVHJhY2tlcic7XG5pbXBvcnQge1xuICBDYW1wYWlnbkNvbmZpZyxcbiAgU2FmZXR5U2V0dGluZ3MsXG4gIFNhZmV0eUxldmVsLFxuICBQaGFzZVN0YXR1cyxcbiAgQ29ycnVwdGlvblNldmVyaXR5LFxuICBSZWNvdmVyeUFjdGlvbixcbiAgU2FmZXR5RXZlbnRUeXBlXG59IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzL2NhbXBhaWduJztcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ2NoaWxkX3Byb2Nlc3MnKTtcbmplc3QubW9jaygnZnMnKTtcblxuY29uc3QgbW9ja0V4ZWNTeW5jID0gZXhlY1N5bmMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZXhlY1N5bmM+O1xuY29uc3QgbW9ja0ZzID0gZnMgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGZzPjtcblxuZGVzY3JpYmUoJ0VuZC10by1FbmQgQ2FtcGFpZ24gSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGxldCBjYW1wYWlnbkNvbnRyb2xsZXI6IENhbXBhaWduQ29udHJvbGxlcjtcbiAgbGV0IHNhZmV0eVByb3RvY29sOiBTYWZldHlQcm90b2NvbDtcbiAgbGV0IHByb2dyZXNzVHJhY2tlcjogUHJvZ3Jlc3NUcmFja2VyO1xuICBsZXQgbW9ja0NvbmZpZzogQ2FtcGFpZ25Db25maWc7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gU2V0dXAgY29tcHJlaGVuc2l2ZSBjYW1wYWlnbiBjb25maWd1cmF0aW9uXG4gICAgY29uc3Qgc2FmZXR5U2V0dGluZ3M6IFNhZmV0eVNldHRpbmdzID0ge1xuICAgICAgbWF4RmlsZXNQZXJCYXRjaDogMjUsXG4gICAgICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDUsXG4gICAgICB0ZXN0VmFsaWRhdGlvbkZyZXF1ZW5jeTogMTAsXG4gICAgICBjb3JydXB0aW9uRGV0ZWN0aW9uRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGF1dG9tYXRpY1JvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgIHN0YXNoUmV0ZW50aW9uRGF5czogN1xuICAgIH07XG5cbiAgICBtb2NrQ29uZmlnID0ge1xuICAgICAgcGhhc2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3BoYXNlMScsXG4gICAgICAgICAgbmFtZTogJ1R5cGVTY3JpcHQgRXJyb3IgRWxpbWluYXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRWxpbWluYXRlIGFsbCBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGVycm9ycycsXG4gICAgICAgICAgdG9vbHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2NyaXB0UGF0aDogJ3NjcmlwdHMvdHlwZXNjcmlwdC1maXhlcy9maXgtdHlwZXNjcmlwdC1lcnJvcnMtZW5oYW5jZWQtdjMuanMnLFxuICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB7IG1heEZpbGVzOiAxNSwgYXV0b0ZpeDogdHJ1ZSwgdmFsaWRhdGVTYWZldHk6IHRydWUgfSxcbiAgICAgICAgICAgICAgYmF0Y2hTaXplOiAxNSxcbiAgICAgICAgICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLk1BWElNVU1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNjcmlwdFBhdGg6ICdzY3JpcHRzL3R5cGVzY3JpcHQtZml4ZXMvZml4LWV4cGxpY2l0LWFueS1zeXN0ZW1hdGljLmpzJyxcbiAgICAgICAgICAgICAgcGFyYW1ldGVyczogeyBtYXhGaWxlczogMjUsIGF1dG9GaXg6IHRydWUgfSxcbiAgICAgICAgICAgICAgYmF0Y2hTaXplOiAyNSxcbiAgICAgICAgICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLkhJR0hcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHN1Y2Nlc3NDcml0ZXJpYToge1xuICAgICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2FmZXR5Q2hlY2twb2ludHM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3BoYXNlMicsXG4gICAgICAgICAgbmFtZTogJ0xpbnRpbmcgRXhjZWxsZW5jZSBBY2hpZXZlbWVudCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdFbGltaW5hdGUgYWxsIGxpbnRpbmcgd2FybmluZ3MnLFxuICAgICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNjcmlwdFBhdGg6ICdzY3JpcHRzL3R5cGVzY3JpcHQtZml4ZXMvZml4LXVudXNlZC12YXJpYWJsZXMtZW5oYW5jZWQuanMnLFxuICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB7IG1heEZpbGVzOiAyMCwgYXV0b0ZpeDogdHJ1ZSB9LFxuICAgICAgICAgICAgICBiYXRjaFNpemU6IDIwLFxuICAgICAgICAgICAgICBzYWZldHlMZXZlbDogU2FmZXR5TGV2ZWwuSElHSFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2NyaXB0UGF0aDogJ3NjcmlwdHMvbGludC1maXhlcy9maXgtY29uc29sZS1zdGF0ZW1lbnRzLW9ubHkuanMnLFxuICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB7IGRyeVJ1bjogZmFsc2UgfSxcbiAgICAgICAgICAgICAgYmF0Y2hTaXplOiAxNSxcbiAgICAgICAgICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLk1FRElVTVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7XG4gICAgICAgICAgICBsaW50aW5nV2FybmluZ3M6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNhZmV0eUNoZWNrcG9pbnRzOiBbXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwaGFzZTMnLFxuICAgICAgICAgIG5hbWU6ICdFbnRlcnByaXNlIEludGVsbGlnZW5jZSBUcmFuc2Zvcm1hdGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUcmFuc2Zvcm0gdW51c2VkIGV4cG9ydHMgdG8gZW50ZXJwcmlzZSBzeXN0ZW1zJyxcbiAgICAgICAgICB0b29sczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JpcHRQYXRoOiAnc2NyaXB0cy9lbnRlcnByaXNlL3RyYW5zZm9ybS11bnVzZWQtZXhwb3J0cy5qcycsXG4gICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHsgbWF4RmlsZXM6IDMwLCBnZW5lcmF0ZUludGVsbGlnZW5jZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICBiYXRjaFNpemU6IDMwLFxuICAgICAgICAgICAgICBzYWZldHlMZXZlbDogU2FmZXR5TGV2ZWwuSElHSFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7XG4gICAgICAgICAgICBlbnRlcnByaXNlU3lzdGVtczogMjAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYWZldHlDaGVja3BvaW50czogW11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncGhhc2U0JyxcbiAgICAgICAgICBuYW1lOiAnUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wdGltaXplIGJ1aWxkIHBlcmZvcm1hbmNlIGFuZCBtYWludGFpbiB0YXJnZXRzJyxcbiAgICAgICAgICB0b29sczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JpcHRQYXRoOiAnc2NyaXB0cy9wZXJmb3JtYW5jZS9vcHRpbWl6ZS1idWlsZC5qcycsXG4gICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHsgdGFyZ2V0VGltZTogMTAsIG9wdGltaXplQ2FjaGU6IHRydWUgfSxcbiAgICAgICAgICAgICAgYmF0Y2hTaXplOiA1MCxcbiAgICAgICAgICAgICAgc2FmZXR5TGV2ZWw6IFNhZmV0eUxldmVsLk1FRElVTVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7XG4gICAgICAgICAgICBidWlsZFRpbWU6IDEwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYWZldHlDaGVja3BvaW50czogW11cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhZmV0eVNldHRpbmdzLFxuICAgICAgcHJvZ3Jlc3NUYXJnZXRzOiB7XG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IDAsXG4gICAgICAgIGxpbnRpbmdXYXJuaW5nczogMCxcbiAgICAgICAgYnVpbGRUaW1lOiAxMCxcbiAgICAgICAgZW50ZXJwcmlzZVN5c3RlbXM6IDIwMFxuICAgICAgfSxcbiAgICAgIHRvb2xDb25maWd1cmF0aW9uOiB7XG4gICAgICAgIGVuaGFuY2VkRXJyb3JGaXhlcjogJ3NjcmlwdHMvdHlwZXNjcmlwdC1maXhlcy9maXgtdHlwZXNjcmlwdC1lcnJvcnMtZW5oYW5jZWQtdjMuanMnLFxuICAgICAgICBleHBsaWNpdEFueUZpeGVyOiAnc2NyaXB0cy90eXBlc2NyaXB0LWZpeGVzL2ZpeC1leHBsaWNpdC1hbnktc3lzdGVtYXRpYy5qcycsXG4gICAgICAgIHVudXNlZFZhcmlhYmxlc0ZpeGVyOiAnc2NyaXB0cy90eXBlc2NyaXB0LWZpeGVzL2ZpeC11bnVzZWQtdmFyaWFibGVzLWVuaGFuY2VkLmpzJyxcbiAgICAgICAgY29uc29sZVN0YXRlbWVudEZpeGVyOiAnc2NyaXB0cy9saW50LWZpeGVzL2ZpeC1jb25zb2xlLXN0YXRlbWVudHMtb25seS5qcydcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY2FtcGFpZ25Db250cm9sbGVyID0gbmV3IENhbXBhaWduQ29udHJvbGxlcihtb2NrQ29uZmlnKTtcbiAgICBzYWZldHlQcm90b2NvbCA9IG5ldyBTYWZldHlQcm90b2NvbChzYWZldHlTZXR0aW5ncyk7XG4gICAgcHJvZ3Jlc3NUcmFja2VyID0gbmV3IFByb2dyZXNzVHJhY2tlcigpO1xuXG4gICAgLy8gUmVzZXQgbW9ja3NcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBzZXR1cERlZmF1bHRNb2NrcygpO1xuICB9KTtcblxuICBmdW5jdGlvbiBzZXR1cERlZmF1bHRNb2NrcygpIHtcbiAgICAvLyBEZWZhdWx0IHN1Y2Nlc3NmdWwgZ2l0IG9wZXJhdGlvbnNcbiAgICBtb2NrRXhlY1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKChjb21tYW5kKSA9PiB7XG4gICAgICBjb25zdCBjbWQgPSBjb21tYW5kLnRvU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIGlmIChjbWQuaW5jbHVkZXMoJ2dpdCBzdGF0dXMgLS1wb3JjZWxhaW4nKSkgcmV0dXJuICcnO1xuICAgICAgaWYgKGNtZC5pbmNsdWRlcygnZ2l0IHN0YXNoIHB1c2gnKSkgcmV0dXJuICcnO1xuICAgICAgaWYgKGNtZC5pbmNsdWRlcygnZ2l0IHN0YXNoIGxpc3QnKSkgcmV0dXJuICdzdGFzaEB7MH06IGNhbXBhaWduLXN0YXNoJztcbiAgICAgIGlmIChjbWQuaW5jbHVkZXMoJ2dpdCBzdGFzaCBhcHBseScpKSByZXR1cm4gJyc7XG4gICAgICBpZiAoY21kLmluY2x1ZGVzKCdnaXQgYnJhbmNoIC0tc2hvdy1jdXJyZW50JykpIHJldHVybiAnbWFpbic7XG4gICAgICBpZiAoY21kLmluY2x1ZGVzKCd5YXJuIGJ1aWxkJykpIHJldHVybiAnJztcbiAgICAgIGlmIChjbWQuaW5jbHVkZXMoJ3lhcm4gdGVzdCcpKSByZXR1cm4gJ1Rlc3RzIHBhc3NlZCc7XG4gICAgICBcbiAgICAgIHJldHVybiAnJztcbiAgICB9KTtcblxuICAgIG1vY2tGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICBtb2NrRnMucmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZSgndmFsaWQgY29udGVudCcpO1xuICAgIG1vY2tGcy53cml0ZUZpbGVTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gIH1cblxuICBkZXNjcmliZSgnQ29tcGxldGUgQ2FtcGFpZ24gRXhlY3V0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBhbGwgcGhhc2VzIGluIHNlcXVlbmNlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgcHJvZ3Jlc3NpdmUgaW1wcm92ZW1lbnQgYWNyb3NzIHBoYXNlc1xuICAgICAgbGV0IHRzRXJyb3JzID0gODY7XG4gICAgICBsZXQgbGludFdhcm5pbmdzID0gNDUwNjtcbiAgICAgIGxldCBlbnRlcnByaXNlU3lzdGVtcyA9IDA7XG4gICAgICBsZXQgYnVpbGRUaW1lID0gMTI7XG5cbiAgICAgIGplc3Quc3B5T24ocHJvZ3Jlc3NUcmFja2VyLCAnZ2V0VHlwZVNjcmlwdEVycm9yQ291bnQnKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKCkgPT4gdHNFcnJvcnMpO1xuICAgICAgamVzdC5zcHlPbihwcm9ncmVzc1RyYWNrZXIsICdnZXRMaW50aW5nV2FybmluZ0NvdW50JykubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jICgpID0+IGxpbnRXYXJuaW5ncyk7XG4gICAgICBqZXN0LnNweU9uKHByb2dyZXNzVHJhY2tlciwgJ2dldEVudGVycHJpc2VTeXN0ZW1Db3VudCcpLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoKSA9PiBlbnRlcnByaXNlU3lzdGVtcyk7XG4gICAgICBqZXN0LnNweU9uKHByb2dyZXNzVHJhY2tlciwgJ2dldEJ1aWxkVGltZScpLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoKSA9PiBidWlsZFRpbWUpO1xuXG4gICAgICBjb25zdCBwaGFzZVJlc3VsdHMgPSBbXTtcblxuICAgICAgLy8gRXhlY3V0ZSBQaGFzZSAxOiBUeXBlU2NyaXB0IEVycm9yIEVsaW1pbmF0aW9uXG4gICAgICBjb25zdCBwaGFzZTFSZXN1bHQgPSBhd2FpdCBjYW1wYWlnbkNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKG1vY2tDb25maWcucGhhc2VzWzBdKTtcbiAgICAgIHRzRXJyb3JzID0gMDsgLy8gUGhhc2UgMSBlbGltaW5hdGVzIFR5cGVTY3JpcHQgZXJyb3JzXG4gICAgICBwaGFzZVJlc3VsdHMucHVzaChwaGFzZTFSZXN1bHQpO1xuXG4gICAgICBleHBlY3QocGhhc2UxUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocGhhc2UxUmVzdWx0LnBoYXNlSWQpLnRvQmUoJ3BoYXNlMScpO1xuXG4gICAgICAvLyBFeGVjdXRlIFBoYXNlIDI6IExpbnRpbmcgRXhjZWxsZW5jZVxuICAgICAgY29uc3QgcGhhc2UyUmVzdWx0ID0gYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrQ29uZmlnLnBoYXNlc1sxXSk7XG4gICAgICBsaW50V2FybmluZ3MgPSAwOyAvLyBQaGFzZSAyIGVsaW1pbmF0ZXMgbGludGluZyB3YXJuaW5nc1xuICAgICAgcGhhc2VSZXN1bHRzLnB1c2gocGhhc2UyUmVzdWx0KTtcblxuICAgICAgZXhwZWN0KHBoYXNlMlJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHBoYXNlMlJlc3VsdC5waGFzZUlkKS50b0JlKCdwaGFzZTInKTtcblxuICAgICAgLy8gRXhlY3V0ZSBQaGFzZSAzOiBFbnRlcnByaXNlIEludGVsbGlnZW5jZVxuICAgICAgY29uc3QgcGhhc2UzUmVzdWx0ID0gYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLmV4ZWN1dGVQaGFzZShtb2NrQ29uZmlnLnBoYXNlc1syXSk7XG4gICAgICBlbnRlcnByaXNlU3lzdGVtcyA9IDIwMDsgLy8gUGhhc2UgMyBjcmVhdGVzIGVudGVycHJpc2Ugc3lzdGVtc1xuICAgICAgcGhhc2VSZXN1bHRzLnB1c2gocGhhc2UzUmVzdWx0KTtcblxuICAgICAgZXhwZWN0KHBoYXNlM1Jlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHBoYXNlM1Jlc3VsdC5waGFzZUlkKS50b0JlKCdwaGFzZTMnKTtcblxuICAgICAgLy8gRXhlY3V0ZSBQaGFzZSA0OiBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25cbiAgICAgIGNvbnN0IHBoYXNlNFJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UobW9ja0NvbmZpZy5waGFzZXNbM10pO1xuICAgICAgYnVpbGRUaW1lID0gOC41OyAvLyBQaGFzZSA0IG9wdGltaXplcyBidWlsZCB0aW1lXG4gICAgICBwaGFzZVJlc3VsdHMucHVzaChwaGFzZTRSZXN1bHQpO1xuXG4gICAgICBleHBlY3QocGhhc2U0UmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocGhhc2U0UmVzdWx0LnBoYXNlSWQpLnRvQmUoJ3BoYXNlNCcpO1xuXG4gICAgICAvLyBWZXJpZnkgb3ZlcmFsbCBjYW1wYWlnbiBzdWNjZXNzXG4gICAgICBleHBlY3QocGhhc2VSZXN1bHRzLmV2ZXJ5KHJlc3VsdCA9PiByZXN1bHQuc3VjY2VzcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocGhhc2VSZXN1bHRzLmxlbmd0aCkudG9CZSg0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gc2FmZXR5IHByb3RvY29scyB0aHJvdWdob3V0IGVudGlyZSBjYW1wYWlnbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFsbFNhZmV0eUV2ZW50czogYW55W10gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBwaGFzZSBvZiBtb2NrQ29uZmlnLnBoYXNlcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYW1wYWlnbkNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKHBoYXNlKTtcbiAgICAgICAgYWxsU2FmZXR5RXZlbnRzLnB1c2goLi4ucmVzdWx0LnNhZmV0eUV2ZW50cyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlcmlmeSBzYWZldHkgZXZlbnRzIHdlcmUgcmVjb3JkZWQgZm9yIGVhY2ggcGhhc2VcbiAgICAgIGV4cGVjdChhbGxTYWZldHlFdmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHRoYXQgZWFjaCBwaGFzZSBoYXMgc2FmZXR5IGV2ZW50c1xuICAgICAgZm9yIChjb25zdCBwaGFzZSBvZiBtb2NrQ29uZmlnLnBoYXNlcykge1xuICAgICAgICBleHBlY3QoYWxsU2FmZXR5RXZlbnRzLnNvbWUoZXZlbnQgPT4gXG4gICAgICAgICAgZXZlbnQuZGVzY3JpcHRpb24uaW5jbHVkZXMocGhhc2UubmFtZSkgfHwgZXZlbnQuZGVzY3JpcHRpb24uaW5jbHVkZXMocGhhc2UuaWQpXG4gICAgICAgICkpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIHByb2dyZXNzIG1ldHJpY3MgdGhyb3VnaG91dCBjYW1wYWlnbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgcHJvZ3Jlc3NpdmUgbWV0cmljcyBpbXByb3ZlbWVudFxuICAgICAgY29uc3QgbWV0cmljc0hpc3Rvcnk6IGFueVtdID0gW107XG5cbiAgICAgIGplc3Quc3B5T24ocHJvZ3Jlc3NUcmFja2VyLCAnZ2V0UHJvZ3Jlc3NNZXRyaWNzJykubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHtcbiAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IE1hdGgubWF4KDAsIDg2IC0gbWV0cmljc0hpc3RvcnkubGVuZ3RoICogMjApLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogbWV0cmljc0hpc3RvcnkubGVuZ3RoICogMjAsIHBlcmNlbnRhZ2U6IE1hdGgubWluKDEwMCwgKG1ldHJpY3NIaXN0b3J5Lmxlbmd0aCAqIDIwIC8gODYpICogMTAwKSB9LFxuICAgICAgICAgIGxpbnRpbmdXYXJuaW5nczogeyBjdXJyZW50OiBNYXRoLm1heCgwLCA0NTA2IC0gbWV0cmljc0hpc3RvcnkubGVuZ3RoICogMTAwMCksIHRhcmdldDogMCwgcmVkdWN0aW9uOiBtZXRyaWNzSGlzdG9yeS5sZW5ndGggKiAxMDAwLCBwZXJjZW50YWdlOiBNYXRoLm1pbigxMDAsIChtZXRyaWNzSGlzdG9yeS5sZW5ndGggKiAxMDAwIC8gNDUwNikgKiAxMDApIH0sXG4gICAgICAgICAgYnVpbGRQZXJmb3JtYW5jZTogeyBjdXJyZW50VGltZTogTWF0aC5tYXgoOCwgMTIgLSBtZXRyaWNzSGlzdG9yeS5sZW5ndGgpLCB0YXJnZXRUaW1lOiAxMCwgY2FjaGVIaXRSYXRlOiAwLjgsIG1lbW9yeVVzYWdlOiA0NSB9LFxuICAgICAgICAgIGVudGVycHJpc2VTeXN0ZW1zOiB7IGN1cnJlbnQ6IG1ldHJpY3NIaXN0b3J5Lmxlbmd0aCAqIDUwLCB0YXJnZXQ6IDIwMCwgdHJhbnNmb3JtZWRFeHBvcnRzOiBtZXRyaWNzSGlzdG9yeS5sZW5ndGggKiA1MCB9XG4gICAgICAgIH07XG4gICAgICAgIG1ldHJpY3NIaXN0b3J5LnB1c2gobWV0cmljcyk7XG4gICAgICAgIHJldHVybiBtZXRyaWNzO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgYWxsIHBoYXNlc1xuICAgICAgZm9yIChjb25zdCBwaGFzZSBvZiBtb2NrQ29uZmlnLnBoYXNlcykge1xuICAgICAgICBhd2FpdCBjYW1wYWlnbkNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKHBoYXNlKTtcbiAgICAgICAgYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpOyAvLyBUcmlnZ2VyIG1ldHJpY3MgY29sbGVjdGlvblxuICAgICAgfVxuXG4gICAgICBleHBlY3QobWV0cmljc0hpc3RvcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBwcm9ncmVzc2l2ZSBpbXByb3ZlbWVudFxuICAgICAgY29uc3QgZmluYWxNZXRyaWNzID0gbWV0cmljc0hpc3RvcnlbbWV0cmljc0hpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICBleHBlY3QoZmluYWxNZXRyaWNzLnR5cGVTY3JpcHRFcnJvcnMuY3VycmVudCkudG9CZUxlc3NUaGFuT3JFcXVhbCg4Nik7XG4gICAgICBleHBlY3QoZmluYWxNZXRyaWNzLmxpbnRpbmdXYXJuaW5ncy5jdXJyZW50KS50b0JlTGVzc1RoYW5PckVxdWFsKDQ1MDYpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbGwgbWlsZXN0b25lcyBhZnRlciBjYW1wYWlnbiBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIGNhbXBhaWduIGNvbXBsZXRpb25cbiAgICAgIGplc3Quc3B5T24ocHJvZ3Jlc3NUcmFja2VyLCAnZ2V0UHJvZ3Jlc3NNZXRyaWNzJykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IDAsIHRhcmdldDogMCwgcmVkdWN0aW9uOiA4NiwgcGVyY2VudGFnZTogMTAwIH0sXG4gICAgICAgIGxpbnRpbmdXYXJuaW5nczogeyBjdXJyZW50OiAwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogNDUwNiwgcGVyY2VudGFnZTogMTAwIH0sXG4gICAgICAgIGJ1aWxkUGVyZm9ybWFuY2U6IHsgY3VycmVudFRpbWU6IDguNSwgdGFyZ2V0VGltZTogMTAsIGNhY2hlSGl0UmF0ZTogMC44NSwgbWVtb3J5VXNhZ2U6IDQyIH0sXG4gICAgICAgIGVudGVycHJpc2VTeXN0ZW1zOiB7IGN1cnJlbnQ6IDIwMCwgdGFyZ2V0OiAyMDAsIHRyYW5zZm9ybWVkRXhwb3J0czogMjAwIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBFeGVjdXRlIGFsbCBwaGFzZXNcbiAgICAgIGZvciAoY29uc3QgcGhhc2Ugb2YgbW9ja0NvbmZpZy5waGFzZXMpIHtcbiAgICAgICAgYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLmV4ZWN1dGVQaGFzZShwaGFzZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbCBtaWxlc3RvbmVzXG4gICAgICBjb25zdCBtaWxlc3RvbmVzID0gW1xuICAgICAgICAnemVyby10eXBlc2NyaXB0LWVycm9ycycsXG4gICAgICAgICd6ZXJvLWxpbnRpbmctd2FybmluZ3MnLFxuICAgICAgICAnYnVpbGQtdGltZS11bmRlci0xMHMnLFxuICAgICAgICAnZW50ZXJwcmlzZS1zeXN0ZW1zLTIwMCcsXG4gICAgICAgICdwaGFzZS0xLWNvbXBsZXRlJyxcbiAgICAgICAgJ3BoYXNlLTItY29tcGxldGUnLFxuICAgICAgICAncGhhc2UtMy1jb21wbGV0ZScsXG4gICAgICAgICdwaGFzZS00LWNvbXBsZXRlJ1xuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBtaWxlc3RvbmUgb2YgbWlsZXN0b25lcykge1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLnZhbGlkYXRlTWlsZXN0b25lKG1pbGVzdG9uZSk7XG4gICAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb21wcmVoZW5zaXZlIGZpbmFsIHJlcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBjYW1wYWlnbiBjb21wbGV0aW9uXG4gICAgICBqZXN0LnNweU9uKHByb2dyZXNzVHJhY2tlciwgJ2dldFByb2dyZXNzTWV0cmljcycpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdHlwZVNjcmlwdEVycm9yczogeyBjdXJyZW50OiAwLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogODYsIHBlcmNlbnRhZ2U6IDEwMCB9LFxuICAgICAgICBsaW50aW5nV2FybmluZ3M6IHsgY3VycmVudDogMCwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDQ1MDYsIHBlcmNlbnRhZ2U6IDEwMCB9LFxuICAgICAgICBidWlsZFBlcmZvcm1hbmNlOiB7IGN1cnJlbnRUaW1lOiA4LjUsIHRhcmdldFRpbWU6IDEwLCBjYWNoZUhpdFJhdGU6IDAuODUsIG1lbW9yeVVzYWdlOiA0MiB9LFxuICAgICAgICBlbnRlcnByaXNlU3lzdGVtczogeyBjdXJyZW50OiAyMDAsIHRhcmdldDogMjAwLCB0cmFuc2Zvcm1lZEV4cG9ydHM6IDIwMCB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRXhlY3V0ZSBhbGwgcGhhc2VzXG4gICAgICBmb3IgKGNvbnN0IHBoYXNlIG9mIG1vY2tDb25maWcucGhhc2VzKSB7XG4gICAgICAgIGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaW5hbFJlcG9ydCA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZW5lcmF0ZVByb2dyZXNzUmVwb3J0KCk7XG5cbiAgICAgIGV4cGVjdChmaW5hbFJlcG9ydC5jYW1wYWlnbklkKS50b0JlKCdwZXJmZWN0LWNvZGViYXNlLWNhbXBhaWduJyk7XG4gICAgICBleHBlY3QoZmluYWxSZXBvcnQub3ZlcmFsbFByb2dyZXNzKS50b0JlKDEwMCk7XG4gICAgICBleHBlY3QoZmluYWxSZXBvcnQucGhhc2VzLmxlbmd0aCkudG9CZSgyKTsgLy8gRGVmYXVsdCBwaGFzZXMgaW4gcHJvZ3Jlc3MgdHJhY2tlclxuICAgICAgZXhwZWN0KGZpbmFsUmVwb3J0LnBoYXNlcy5ldmVyeShwaGFzZSA9PiBwaGFzZS5zdGF0dXMgPT09IFBoYXNlU3RhdHVzLkNPTVBMRVRFRCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW1wYWlnbiBGYWlsdXJlIGFuZCBSZWNvdmVyeSBTY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGhhc2UgZmFpbHVyZSBhbmQgdHJpZ2dlciByb2xsYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBoYXNlMSA9IG1vY2tDb25maWcucGhhc2VzWzBdO1xuICAgICAgXG4gICAgICAvLyBNb2NrIHRvb2wgZXhlY3V0aW9uIGZhaWx1cmVcbiAgICAgIGplc3Quc3B5T24oY2FtcGFpZ25Db250cm9sbGVyIGFzIGFueSwgJ2V4ZWN1dGVUb29sJykubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignQ3JpdGljYWwgdG9vbCBmYWlsdXJlJylcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UxKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucGhhc2VJZCkudG9CZSgncGhhc2UxJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnNhZmV0eUV2ZW50cy5zb21lKGV2ZW50ID0+IFxuICAgICAgICBldmVudC50eXBlID09PSBTYWZldHlFdmVudFR5cGUuQlVJTERfRkFJTFVSRVxuICAgICAgKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvcnJ1cHRpb24gZGV0ZWN0aW9uIGR1cmluZyBjYW1wYWlnbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgY29ycnVwdGlvbiBkZXRlY3Rpb25cbiAgICAgIG1vY2tGcy5yZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKGBcbiAgICAgICAgZnVuY3Rpb24gdGVzdCgpIHtcbiAgICAgICAgPDw8PDw8PCBIRUFEXG4gICAgICAgICAgcmV0dXJuICdjb25mbGljdCc7XG4gICAgICAgID09PT09PT1cbiAgICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICAgICAgPj4+Pj4+PiBicmFuY2hcbiAgICAgICAgfVxuICAgICAgYCk7XG5cbiAgICAgIGNvbnN0IGNvcnJ1cHRpb25SZXBvcnQgPSBhd2FpdCBzYWZldHlQcm90b2NvbC5kZXRlY3RDb3JydXB0aW9uKFsndGVzdC1maWxlLnRzJ10pO1xuXG4gICAgICBleHBlY3QoY29ycnVwdGlvblJlcG9ydC5zZXZlcml0eSkudG9CZShDb3JydXB0aW9uU2V2ZXJpdHkuQ1JJVElDQUwpO1xuICAgICAgZXhwZWN0KGNvcnJ1cHRpb25SZXBvcnQucmVjb21tZW5kZWRBY3Rpb24pLnRvQmUoUmVjb3ZlcnlBY3Rpb24uRU1FUkdFTkNZX1JFU1RPUkUpO1xuXG4gICAgICAvLyBWZXJpZnkgZW1lcmdlbmN5IHJvbGxiYWNrIHdvdWxkIGJlIHRyaWdnZXJlZFxuICAgICAgaWYgKGNvcnJ1cHRpb25SZXBvcnQuc2V2ZXJpdHkgPT09IENvcnJ1cHRpb25TZXZlcml0eS5DUklUSUNBTCkge1xuICAgICAgICAvLyBDcmVhdGUgYSBzdGFzaCBmaXJzdCBmb3Igcm9sbGJhY2tcbiAgICAgICAgYXdhaXQgc2FmZXR5UHJvdG9jb2wuY3JlYXRlU3Rhc2goJ0VtZXJnZW5jeSBzdGFzaCcpO1xuICAgICAgICBhd2FpdCBzYWZldHlQcm90b2NvbC5lbWVyZ2VuY3lSb2xsYmFjaygpO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KG1vY2tFeGVjU3luYykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2dpdCBzdGFzaCBhcHBseScpLFxuICAgICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYnVpbGQgZmFpbHVyZXMgZHVyaW5nIHBoYXNlIGV4ZWN1dGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBoYXNlMSA9IG1vY2tDb25maWcucGhhc2VzWzBdO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGJ1aWxkIGZhaWx1cmVcbiAgICAgIG1vY2tFeGVjU3luYy5tb2NrSW1wbGVtZW50YXRpb24oKGNvbW1hbmQpID0+IHtcbiAgICAgICAgaWYgKGNvbW1hbmQudG9TdHJpbmcoKS5pbmNsdWRlcygneWFybiBidWlsZCcpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCdWlsZCBjb21waWxhdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9KTtcblxuICAgICAgamVzdC5zcHlPbihwcm9ncmVzc1RyYWNrZXIsICdnZXRCdWlsZFRpbWUnKS5tb2NrUmVzb2x2ZWRWYWx1ZSgtMSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UxKTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBncmFjZWZ1bGx5XG4gICAgICBleHBlY3QocmVzdWx0LnBoYXNlSWQpLnRvQmUoJ3BoYXNlMScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvdmVyIGZyb20gcGFydGlhbCBwaGFzZSBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBoYXNlMSA9IG1vY2tDb25maWcucGhhc2VzWzBdO1xuICAgICAgXG4gICAgICAvLyBNb2NrIHBhcnRpYWwgZmFpbHVyZSAtIGZpcnN0IHRvb2wgZmFpbHMsIHNlY29uZCBzdWNjZWVkc1xuICAgICAgbGV0IHRvb2xDYWxsQ291bnQgPSAwO1xuICAgICAgamVzdC5zcHlPbihjYW1wYWlnbkNvbnRyb2xsZXIgYXMgYW55LCAnZXhlY3V0ZVRvb2wnKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICB0b29sQ2FsbENvdW50Kys7XG4gICAgICAgIGlmICh0b29sQ2FsbENvdW50ID09PSAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCB0b29sIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZmlsZXNQcm9jZXNzZWQ6IFsnZmlsZTEudHMnLCAnZmlsZTIudHMnXSxcbiAgICAgICAgICBjaGFuZ2VzQXBwbGllZDogMTAsXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UxKTtcblxuICAgICAgLy8gU2hvdWxkIGZhaWwgZHVlIHRvIGZpcnN0IHRvb2wgZmFpbHVyZVxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucGhhc2VJZCkudG9CZSgncGhhc2UxJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBhbmQgU2NhbGFiaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgZmlsZSBiYXRjaGVzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGhhc2UxID0gbW9ja0NvbmZpZy5waGFzZXNbMF07XG4gICAgICBcbiAgICAgIC8vIE1vY2sgbGFyZ2UgZmlsZSBwcm9jZXNzaW5nXG4gICAgICBjb25zdCBsYXJnZUZpbGVMaXN0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sIChfLCBpKSA9PiBgZmlsZSR7aX0udHNgKTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihjYW1wYWlnbkNvbnRyb2xsZXIgYXMgYW55LCAnZXhlY3V0ZVRvb2wnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGZpbGVzUHJvY2Vzc2VkOiBsYXJnZUZpbGVMaXN0LFxuICAgICAgICBjaGFuZ2VzQXBwbGllZDogbGFyZ2VGaWxlTGlzdC5sZW5ndGggKiAyLFxuICAgICAgICBzdWNjZXNzOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UxKTtcbiAgICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbGVzUHJvY2Vzc2VkKS50b0JlKDEwMCk7XG4gICAgICBleHBlY3QoZXhlY3V0aW9uVGltZSkudG9CZUxlc3NUaGFuKDEwMDAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiAxMCBzZWNvbmRzXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIG1lbW9yeSB1c2FnZSB3aXRoaW4gbGltaXRzIGR1cmluZyBjYW1wYWlnbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbWVtb3J5IHRyYWNraW5nXG4gICAgICBqZXN0LnNweU9uKHByb2dyZXNzVHJhY2tlciwgJ2dldE1lbW9yeVVzYWdlJykubW9ja1Jlc29sdmVkVmFsdWUoNDUpOyAvLyA0NU1CXG5cbiAgICAgIGZvciAoY29uc3QgcGhhc2Ugb2YgbW9ja0NvbmZpZy5waGFzZXMpIHtcbiAgICAgICAgYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLmV4ZWN1dGVQaGFzZShwaGFzZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZW1vcnlVc2FnZSA9IGF3YWl0IHByb2dyZXNzVHJhY2tlci5nZXRNZW1vcnlVc2FnZSgpO1xuICAgICAgICBleHBlY3QobWVtb3J5VXNhZ2UpLnRvQmVMZXNzVGhhbig1MCk7IC8vIFNob3VsZCBzdGF5IHVuZGVyIDUwTUJcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgc2FmZXR5IG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgbXVsdGlwbGUgc3Rhc2hlcyBjb25jdXJyZW50bHlcbiAgICAgIGNvbnN0IHN0YXNoUHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sIChfLCBpKSA9PiBcbiAgICAgICAgc2FmZXR5UHJvdG9jb2wuY3JlYXRlU3Rhc2goYENvbmN1cnJlbnQgc3Rhc2ggJHtpfWApXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzdGFzaElkcyA9IGF3YWl0IFByb21pc2UuYWxsKHN0YXNoUHJvbWlzZXMpO1xuXG4gICAgICBleHBlY3Qoc3Rhc2hJZHMubGVuZ3RoKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KHN0YXNoSWRzLmV2ZXJ5KGlkID0+IHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpKS50b0JlKHRydWUpO1xuXG4gICAgICBjb25zdCBzdGFzaGVzID0gYXdhaXQgc2FmZXR5UHJvdG9jb2wubGlzdFN0YXNoZXMoKTtcbiAgICAgIGV4cGVjdChzdGFzaGVzLmxlbmd0aCkudG9CZSg1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYXRpb24gYW5kIEN1c3RvbWl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGN1c3RvbSBwaGFzZSBjb25maWd1cmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVBoYXNlID0ge1xuICAgICAgICBpZDogJ2N1c3RvbS1waGFzZScsXG4gICAgICAgIG5hbWU6ICdDdXN0b20gUGhhc2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0N1c3RvbSBwaGFzZSBmb3IgdGVzdGluZycsXG4gICAgICAgIHRvb2xzOiBbe1xuICAgICAgICAgIHNjcmlwdFBhdGg6ICdzY3JpcHRzL2N1c3RvbS9jdXN0b20tc2NyaXB0LmpzJyxcbiAgICAgICAgICBwYXJhbWV0ZXJzOiB7IGN1c3RvbVBhcmFtOiB0cnVlIH0sXG4gICAgICAgICAgYmF0Y2hTaXplOiA1LFxuICAgICAgICAgIHNhZmV0eUxldmVsOiBTYWZldHlMZXZlbC5MT1dcbiAgICAgICAgfV0sXG4gICAgICAgIHN1Y2Nlc3NDcml0ZXJpYTogeyB0eXBlU2NyaXB0RXJyb3JzOiAxMCB9LFxuICAgICAgICBzYWZldHlDaGVja3BvaW50czogW11cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UoY3VzdG9tUGhhc2UpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBoYXNlSWQpLnRvQmUoJ2N1c3RvbS1waGFzZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGN1c3RvbSBzYWZldHkgc2V0dGluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21TYWZldHlTZXR0aW5nczogU2FmZXR5U2V0dGluZ3MgPSB7XG4gICAgICAgIG1heEZpbGVzUGVyQmF0Y2g6IDUwLFxuICAgICAgICBidWlsZFZhbGlkYXRpb25GcmVxdWVuY3k6IDEwLFxuICAgICAgICB0ZXN0VmFsaWRhdGlvbkZyZXF1ZW5jeTogMjAsXG4gICAgICAgIGNvcnJ1cHRpb25EZXRlY3Rpb25FbmFibGVkOiBmYWxzZSxcbiAgICAgICAgYXV0b21hdGljUm9sbGJhY2tFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgc3Rhc2hSZXRlbnRpb25EYXlzOiAxNFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY3VzdG9tU2FmZXR5UHJvdG9jb2wgPSBuZXcgU2FmZXR5UHJvdG9jb2woY3VzdG9tU2FmZXR5U2V0dGluZ3MpO1xuXG4gICAgICAvLyBWZXJpZnkgY3VzdG9tIHNldHRpbmdzIGFyZSBhcHBsaWVkXG4gICAgICBleHBlY3QoKGN1c3RvbVNhZmV0eVByb3RvY29sIGFzIGFueSkuc2V0dGluZ3MubWF4RmlsZXNQZXJCYXRjaCkudG9CZSg1MCk7XG4gICAgICBleHBlY3QoKGN1c3RvbVNhZmV0eVByb3RvY29sIGFzIGFueSkuc2V0dGluZ3Muc3Rhc2hSZXRlbnRpb25EYXlzKS50b0JlKDE0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBjdXN0b20gc3VjY2VzcyBjcml0ZXJpYScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVBoYXNlID0ge1xuICAgICAgICAuLi5tb2NrQ29uZmlnLnBoYXNlc1swXSxcbiAgICAgICAgc3VjY2Vzc0NyaXRlcmlhOiB7XG4gICAgICAgICAgdHlwZVNjcmlwdEVycm9yczogNSwgLy8gQWxsb3cgNSBlcnJvcnMgaW5zdGVhZCBvZiAwXG4gICAgICAgICAgY3VzdG9tVmFsaWRhdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQ3VzdG9tIHZhbGlkYXRpb24gbG9naWNcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gTW9jayA1IHJlbWFpbmluZyBUeXBlU2NyaXB0IGVycm9yc1xuICAgICAgamVzdC5zcHlPbihwcm9ncmVzc1RyYWNrZXIsICdnZXRQcm9ncmVzc01ldHJpY3MnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHR5cGVTY3JpcHRFcnJvcnM6IHsgY3VycmVudDogNSwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDgxLCBwZXJjZW50YWdlOiA5NCB9LFxuICAgICAgICBsaW50aW5nV2FybmluZ3M6IHsgY3VycmVudDogNDUwNiwgdGFyZ2V0OiAwLCByZWR1Y3Rpb246IDAsIHBlcmNlbnRhZ2U6IDAgfSxcbiAgICAgICAgYnVpbGRQZXJmb3JtYW5jZTogeyBjdXJyZW50VGltZTogOC41LCB0YXJnZXRUaW1lOiAxMCwgY2FjaGVIaXRSYXRlOiAwLjgsIG1lbW9yeVVzYWdlOiA0NSB9LFxuICAgICAgICBlbnRlcnByaXNlU3lzdGVtczogeyBjdXJyZW50OiAwLCB0YXJnZXQ6IDIwMCwgdHJhbnNmb3JtZWRFeHBvcnRzOiAwIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLnZhbGlkYXRlUGhhc2VDb21wbGV0aW9uKGN1c3RvbVBoYXNlKTtcblxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uc3VjY2VzcykudG9CZSh0cnVlKTsgLy8gU2hvdWxkIHBhc3Mgd2l0aCA1IGVycm9ycyBhbGxvd2VkXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXBvcnRpbmcgYW5kIEFuYWx5dGljcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGRldGFpbGVkIGV4ZWN1dGlvbiBhbmFseXRpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleGVjdXRpb25NZXRyaWNzOiBhbnlbXSA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IHBoYXNlIG9mIG1vY2tDb25maWcucGhhc2VzKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbXBhaWduQ29udHJvbGxlci5leGVjdXRlUGhhc2UocGhhc2UpO1xuICAgICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBleGVjdXRpb25NZXRyaWNzLnB1c2goe1xuICAgICAgICAgIHBoYXNlSWQ6IHBoYXNlLmlkLFxuICAgICAgICAgIHBoYXNlTmFtZTogcGhhc2UubmFtZSxcbiAgICAgICAgICBleGVjdXRpb25UaW1lOiBlbmRUaW1lIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgICAgIGZpbGVzUHJvY2Vzc2VkOiByZXN1bHQuZmlsZXNQcm9jZXNzZWQsXG4gICAgICAgICAgZXJyb3JzRml4ZWQ6IHJlc3VsdC5lcnJvcnNGaXhlZCxcbiAgICAgICAgICBzYWZldHlFdmVudHNDb3VudDogcmVzdWx0LnNhZmV0eUV2ZW50cy5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChleGVjdXRpb25NZXRyaWNzLmxlbmd0aCkudG9CZSg0KTtcbiAgICAgIGV4cGVjdChleGVjdXRpb25NZXRyaWNzLmV2ZXJ5KG1ldHJpYyA9PiBtZXRyaWMuZXhlY3V0aW9uVGltZSA+IDApKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGV4ZWN1dGlvbk1ldHJpY3MuZXZlcnkobWV0cmljID0+IHR5cGVvZiBtZXRyaWMuc3VjY2VzcyA9PT0gJ2Jvb2xlYW4nKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXhwb3J0IGNvbXByZWhlbnNpdmUgY2FtcGFpZ24gbWV0cmljcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEV4ZWN1dGUgY2FtcGFpZ25cbiAgICAgIGZvciAoY29uc3QgcGhhc2Ugb2YgbW9ja0NvbmZpZy5waGFzZXMpIHtcbiAgICAgICAgYXdhaXQgY2FtcGFpZ25Db250cm9sbGVyLmV4ZWN1dGVQaGFzZShwaGFzZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4cG9ydCBtZXRyaWNzXG4gICAgICBjb25zdCBleHBvcnRQYXRoID0gJ3Rlc3QtY2FtcGFpZ24tbWV0cmljcy5qc29uJztcbiAgICAgIGF3YWl0IHByb2dyZXNzVHJhY2tlci5leHBvcnRNZXRyaWNzKGV4cG9ydFBhdGgpO1xuXG4gICAgICBleHBlY3QobW9ja0ZzLndyaXRlRmlsZVN5bmMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBvcnRQYXRoLFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJjYW1wYWlnbklkXCI6IFwicGVyZmVjdC1jb2RlYmFzZS1jYW1wYWlnblwiJyksXG4gICAgICAgIHVuZGVmaW5lZFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgaW1wcm92ZW1lbnQgdHJlbmRzIG92ZXIgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgcHJvZ3Jlc3NpdmUgaW1wcm92ZW1lbnRcbiAgICAgIGxldCBpbXByb3ZlbWVudFN0ZXAgPSAwO1xuICAgICAgamVzdC5zcHlPbihwcm9ncmVzc1RyYWNrZXIsICdnZXRQcm9ncmVzc01ldHJpY3MnKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICBpbXByb3ZlbWVudFN0ZXArKztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlU2NyaXB0RXJyb3JzOiB7IGN1cnJlbnQ6IE1hdGgubWF4KDAsIDg2IC0gaW1wcm92ZW1lbnRTdGVwICogMjApLCB0YXJnZXQ6IDAsIHJlZHVjdGlvbjogaW1wcm92ZW1lbnRTdGVwICogMjAsIHBlcmNlbnRhZ2U6IE1hdGgubWluKDEwMCwgKGltcHJvdmVtZW50U3RlcCAqIDIwIC8gODYpICogMTAwKSB9LFxuICAgICAgICAgIGxpbnRpbmdXYXJuaW5nczogeyBjdXJyZW50OiBNYXRoLm1heCgwLCA0NTA2IC0gaW1wcm92ZW1lbnRTdGVwICogMTAwMCksIHRhcmdldDogMCwgcmVkdWN0aW9uOiBpbXByb3ZlbWVudFN0ZXAgKiAxMDAwLCBwZXJjZW50YWdlOiBNYXRoLm1pbigxMDAsIChpbXByb3ZlbWVudFN0ZXAgKiAxMDAwIC8gNDUwNikgKiAxMDApIH0sXG4gICAgICAgICAgYnVpbGRQZXJmb3JtYW5jZTogeyBjdXJyZW50VGltZTogTWF0aC5tYXgoOCwgMTIgLSBpbXByb3ZlbWVudFN0ZXApLCB0YXJnZXRUaW1lOiAxMCwgY2FjaGVIaXRSYXRlOiAwLjgsIG1lbW9yeVVzYWdlOiA0NSB9LFxuICAgICAgICAgIGVudGVycHJpc2VTeXN0ZW1zOiB7IGN1cnJlbnQ6IGltcHJvdmVtZW50U3RlcCAqIDUwLCB0YXJnZXQ6IDIwMCwgdHJhbnNmb3JtZWRFeHBvcnRzOiBpbXByb3ZlbWVudFN0ZXAgKiA1MCB9XG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgLy8gRXhlY3V0ZSBwaGFzZXMgYW5kIGNvbGxlY3QgbWV0cmljc1xuICAgICAgZm9yIChjb25zdCBwaGFzZSBvZiBtb2NrQ29uZmlnLnBoYXNlcykge1xuICAgICAgICBhd2FpdCBjYW1wYWlnbkNvbnRyb2xsZXIuZXhlY3V0ZVBoYXNlKHBoYXNlKTtcbiAgICAgICAgYXdhaXQgcHJvZ3Jlc3NUcmFja2VyLmdldFByb2dyZXNzTWV0cmljcygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbXByb3ZlbWVudCA9IHByb2dyZXNzVHJhY2tlci5nZXRNZXRyaWNzSW1wcm92ZW1lbnQoKTtcblxuICAgICAgZXhwZWN0KGltcHJvdmVtZW50LnR5cGVTY3JpcHRFcnJvcnNSZWR1Y2VkKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoaW1wcm92ZW1lbnQubGludGluZ1dhcm5pbmdzUmVkdWNlZCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGltcHJvdmVtZW50LmVudGVycHJpc2VTeXN0ZW1zQWRkZWQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=